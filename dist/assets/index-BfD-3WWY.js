function Z5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Yd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var x0={exports:{}},Wu={},b0={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw;function eI(){if(cw)return Mt;cw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,w={};function A(H,J,Ee){this.props=H,this.context=J,this.refs=w,this.updater=Ee||b}A.prototype.isReactComponent={},A.prototype.setState=function(H,J){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,J,"setState")},A.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function j(){}j.prototype=A.prototype;function R(H,J,Ee){this.props=H,this.context=J,this.refs=w,this.updater=Ee||b}var L=R.prototype=new j;L.constructor=R,k(L,A.prototype),L.isPureReactComponent=!0;var D=Array.isArray,z=Object.prototype.hasOwnProperty,G={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function I(H,J,Ee){var $e,Te={},Ve=null,Ge=null;if(J!=null)for($e in J.ref!==void 0&&(Ge=J.ref),J.key!==void 0&&(Ve=""+J.key),J)z.call(J,$e)&&!M.hasOwnProperty($e)&&(Te[$e]=J[$e]);var rt=arguments.length-2;if(rt===1)Te.children=Ee;else if(1<rt){for(var Ke=Array(rt),ct=0;ct<rt;ct++)Ke[ct]=arguments[ct+2];Te.children=Ke}if(H&&H.defaultProps)for($e in rt=H.defaultProps,rt)Te[$e]===void 0&&(Te[$e]=rt[$e]);return{$$typeof:t,type:H,key:Ve,ref:Ge,props:Te,_owner:G.current}}function T(H,J){return{$$typeof:t,type:H.type,key:J,ref:H.ref,props:H.props,_owner:H._owner}}function N(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function V(H){var J={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ee){return J[Ee]})}var U=/\/+/g;function O(H,J){return typeof H=="object"&&H!==null&&H.key!=null?V(""+H.key):J.toString(36)}function xe(H,J,Ee,$e,Te){var Ve=typeof H;(Ve==="undefined"||Ve==="boolean")&&(H=null);var Ge=!1;if(H===null)Ge=!0;else switch(Ve){case"string":case"number":Ge=!0;break;case"object":switch(H.$$typeof){case t:case e:Ge=!0}}if(Ge)return Ge=H,Te=Te(Ge),H=$e===""?"."+O(Ge,0):$e,D(Te)?(Ee="",H!=null&&(Ee=H.replace(U,"$&/")+"/"),xe(Te,J,Ee,"",function(ct){return ct})):Te!=null&&(N(Te)&&(Te=T(Te,Ee+(!Te.key||Ge&&Ge.key===Te.key?"":(""+Te.key).replace(U,"$&/")+"/")+H)),J.push(Te)),1;if(Ge=0,$e=$e===""?".":$e+":",D(H))for(var rt=0;rt<H.length;rt++){Ve=H[rt];var Ke=$e+O(Ve,rt);Ge+=xe(Ve,J,Ee,Ke,Te)}else if(Ke=v(H),typeof Ke=="function")for(H=Ke.call(H),rt=0;!(Ve=H.next()).done;)Ve=Ve.value,Ke=$e+O(Ve,rt++),Ge+=xe(Ve,J,Ee,Ke,Te);else if(Ve==="object")throw J=String(H),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ge}function Pe(H,J,Ee){if(H==null)return H;var $e=[],Te=0;return xe(H,$e,"","",function(Ve){return J.call(Ee,Ve,Te++)}),$e}function We(H){if(H._status===-1){var J=H._result;J=J(),J.then(function(Ee){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ee)},function(Ee){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ee)}),H._status===-1&&(H._status=0,H._result=J)}if(H._status===1)return H._result.default;throw H._result}var He={current:null},de={transition:null},ce={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:de,ReactCurrentOwner:G};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Mt.Children={map:Pe,forEach:function(H,J,Ee){Pe(H,function(){J.apply(this,arguments)},Ee)},count:function(H){var J=0;return Pe(H,function(){J++}),J},toArray:function(H){return Pe(H,function(J){return J})||[]},only:function(H){if(!N(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Mt.Component=A,Mt.Fragment=n,Mt.Profiler=i,Mt.PureComponent=R,Mt.StrictMode=r,Mt.Suspense=h,Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Mt.act=oe,Mt.cloneElement=function(H,J,Ee){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var $e=k({},H.props),Te=H.key,Ve=H.ref,Ge=H._owner;if(J!=null){if(J.ref!==void 0&&(Ve=J.ref,Ge=G.current),J.key!==void 0&&(Te=""+J.key),H.type&&H.type.defaultProps)var rt=H.type.defaultProps;for(Ke in J)z.call(J,Ke)&&!M.hasOwnProperty(Ke)&&($e[Ke]=J[Ke]===void 0&&rt!==void 0?rt[Ke]:J[Ke])}var Ke=arguments.length-2;if(Ke===1)$e.children=Ee;else if(1<Ke){rt=Array(Ke);for(var ct=0;ct<Ke;ct++)rt[ct]=arguments[ct+2];$e.children=rt}return{$$typeof:t,type:H.type,key:Te,ref:Ve,props:$e,_owner:Ge}},Mt.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:o,_context:H},H.Consumer=H},Mt.createElement=I,Mt.createFactory=function(H){var J=I.bind(null,H);return J.type=H,J},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(H){return{$$typeof:u,render:H}},Mt.isValidElement=N,Mt.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:We}},Mt.memo=function(H,J){return{$$typeof:f,type:H,compare:J===void 0?null:J}},Mt.startTransition=function(H){var J=de.transition;de.transition={};try{H()}finally{de.transition=J}},Mt.unstable_act=oe,Mt.useCallback=function(H,J){return He.current.useCallback(H,J)},Mt.useContext=function(H){return He.current.useContext(H)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(H){return He.current.useDeferredValue(H)},Mt.useEffect=function(H,J){return He.current.useEffect(H,J)},Mt.useId=function(){return He.current.useId()},Mt.useImperativeHandle=function(H,J,Ee){return He.current.useImperativeHandle(H,J,Ee)},Mt.useInsertionEffect=function(H,J){return He.current.useInsertionEffect(H,J)},Mt.useLayoutEffect=function(H,J){return He.current.useLayoutEffect(H,J)},Mt.useMemo=function(H,J){return He.current.useMemo(H,J)},Mt.useReducer=function(H,J,Ee){return He.current.useReducer(H,J,Ee)},Mt.useRef=function(H){return He.current.useRef(H)},Mt.useState=function(H){return He.current.useState(H)},Mt.useSyncExternalStore=function(H,J,Ee){return He.current.useSyncExternalStore(H,J,Ee)},Mt.useTransition=function(){return He.current.useTransition()},Mt.version="18.3.1",Mt}var uw;function $v(){return uw||(uw=1,b0.exports=eI()),b0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function tI(){if(dw)return Wu;dw=1;var t=$v(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var g,y={},v=null,b=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:v,ref:b,props:y,_owner:i.current}}return Wu.Fragment=n,Wu.jsx=c,Wu.jsxs=c,Wu}var hw;function nI(){return hw||(hw=1,x0.exports=tI()),x0.exports}var a=nI(),S=$v();const Gi=Yd(S),yy=Z5({__proto__:null,default:Gi},[S]);var _f={},w0={exports:{}},fi={},_0={exports:{}},E0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function rI(){return fw||(fw=1,function(t){function e(de,ce){var oe=de.length;de.push(ce);e:for(;0<oe;){var H=oe-1>>>1,J=de[H];if(0<i(J,ce))de[H]=ce,de[oe]=J,oe=H;else break e}}function n(de){return de.length===0?null:de[0]}function r(de){if(de.length===0)return null;var ce=de[0],oe=de.pop();if(oe!==ce){de[0]=oe;e:for(var H=0,J=de.length,Ee=J>>>1;H<Ee;){var $e=2*(H+1)-1,Te=de[$e],Ve=$e+1,Ge=de[Ve];if(0>i(Te,oe))Ve<J&&0>i(Ge,Te)?(de[H]=Ge,de[Ve]=oe,H=Ve):(de[H]=Te,de[$e]=oe,H=$e);else if(Ve<J&&0>i(Ge,oe))de[H]=Ge,de[Ve]=oe,H=Ve;else break e}}return ce}function i(de,ce){var oe=de.sortIndex-ce.sortIndex;return oe!==0?oe:de.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,v=3,b=!1,k=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(de){for(var ce=n(f);ce!==null;){if(ce.callback===null)r(f);else if(ce.startTime<=de)r(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(f)}}function D(de){if(w=!1,L(de),!k)if(n(h)!==null)k=!0,We(z);else{var ce=n(f);ce!==null&&He(D,ce.startTime-de)}}function z(de,ce){k=!1,w&&(w=!1,j(I),I=-1),b=!0;var oe=v;try{for(L(ce),y=n(h);y!==null&&(!(y.expirationTime>ce)||de&&!V());){var H=y.callback;if(typeof H=="function"){y.callback=null,v=y.priorityLevel;var J=H(y.expirationTime<=ce);ce=t.unstable_now(),typeof J=="function"?y.callback=J:y===n(h)&&r(h),L(ce)}else r(h);y=n(h)}if(y!==null)var Ee=!0;else{var $e=n(f);$e!==null&&He(D,$e.startTime-ce),Ee=!1}return Ee}finally{y=null,v=oe,b=!1}}var G=!1,M=null,I=-1,T=5,N=-1;function V(){return!(t.unstable_now()-N<T)}function U(){if(M!==null){var de=t.unstable_now();N=de;var ce=!0;try{ce=M(!0,de)}finally{ce?O():(G=!1,M=null)}}else G=!1}var O;if(typeof R=="function")O=function(){R(U)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Pe=xe.port2;xe.port1.onmessage=U,O=function(){Pe.postMessage(null)}}else O=function(){A(U,0)};function We(de){M=de,G||(G=!0,O())}function He(de,ce){I=A(function(){de(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,We(z))},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(de){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var oe=v;v=ce;try{return de()}finally{v=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(de,ce){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var oe=v;v=de;try{return ce()}finally{v=oe}},t.unstable_scheduleCallback=function(de,ce,oe){var H=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?H+oe:H):oe=H,de){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=oe+J,de={id:g++,callback:ce,priorityLevel:de,startTime:oe,expirationTime:J,sortIndex:-1},oe>H?(de.sortIndex=oe,e(f,de),n(h)===null&&de===n(f)&&(w?(j(I),I=-1):w=!0,He(D,oe-H))):(de.sortIndex=J,e(h,de),k||b||(k=!0,We(z))),de},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(de){var ce=v;return function(){var oe=v;v=ce;try{return de.apply(this,arguments)}finally{v=oe}}}}(E0)),E0}var pw;function iI(){return pw||(pw=1,_0.exports=rI()),_0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function sI(){if(mw)return fi;mw=1;var t=$v(),e=iI();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,l){c(s,l),c(s+"Capture",l)}function c(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(s){return h.call(y,s)?!0:h.call(g,s)?!1:f.test(s)?y[s]=!0:(g[s]=!0,!1)}function b(s,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,l,d,m){if(l===null||typeof l>"u"||b(s,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function w(s,l,d,m,x,E,P){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=E,this.removeEmptyString=P}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){A[s]=new w(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];A[l]=new w(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){A[s]=new w(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){A[s]=new w(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){A[s]=new w(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){A[s]=new w(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){A[s]=new w(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){A[s]=new w(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){A[s]=new w(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function R(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(j,R);A[l]=new w(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(j,R);A[l]=new w(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(j,R);A[l]=new w(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){A[s]=new w(s,1,!1,s.toLowerCase(),null,!1,!1)}),A.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){A[s]=new w(s,1,!1,s.toLowerCase(),null,!0,!0)});function L(s,l,d,m){var x=A.hasOwnProperty(l)?A[l]:null;(x!==null?x.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(k(l,d,x,m)&&(d=null),m||x===null?v(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):x.mustUseProperty?s[x.propertyName]=d===null?x.type===3?!1:"":d:(l=x.attributeName,m=x.attributeNamespace,d===null?s.removeAttribute(l):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,m?s.setAttributeNS(m,l,d):s.setAttribute(l,d))))}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),G=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),We=Symbol.for("react.lazy"),He=Symbol.for("react.offscreen"),de=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=de&&s[de]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,H;function J(s){if(H===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||""}return`
`+H+s}var Ee=!1;function $e(s,l){if(!s||Ee)return"";Ee=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ue){var m=ue}Reflect.construct(s,[],l)}else{try{l.call()}catch(ue){m=ue}s.call(l.prototype)}else{try{throw Error()}catch(ue){m=ue}s()}}catch(ue){if(ue&&m&&typeof ue.stack=="string"){for(var x=ue.stack.split(`
`),E=m.stack.split(`
`),P=x.length-1,B=E.length-1;1<=P&&0<=B&&x[P]!==E[B];)B--;for(;1<=P&&0<=B;P--,B--)if(x[P]!==E[B]){if(P!==1||B!==1)do if(P--,B--,0>B||x[P]!==E[B]){var K=`
`+x[P].replace(" at new "," at ");return s.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",s.displayName)),K}while(1<=P&&0<=B);break}}}finally{Ee=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?J(s):""}function Te(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=$e(s.type,!1),s;case 11:return s=$e(s.type.render,!1),s;case 1:return s=$e(s.type,!0),s;default:return""}}function Ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case G:return"Portal";case T:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case xe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case N:return(s._context.displayName||"Context")+".Provider";case U:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Pe:return l=s.displayName||null,l!==null?l:Ve(s.type)||"Memo";case We:l=s._payload,s=s._init;try{return Ve(s(l))}catch{}}return null}function Ge(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function rt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ke(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ct(s){var l=Ke(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,E=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(P){m=""+P,E.call(this,P)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function kt(s){s._valueTracker||(s._valueTracker=ct(s))}function mt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return s&&(m=Ke(s)?s.checked?"true":"false":s.value),s=m,s!==d?(l.setValue(s),!0):!1}function ht(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Dt(s,l){var d=l.checked;return oe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function re(s,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=rt(l.value!=null?l.value:d),s._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function qe(s,l){l=l.checked,l!=null&&L(s,"checked",l,!1)}function Se(s,l){qe(s,l);var d=rt(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Je(s,l.type,d):l.hasOwnProperty("defaultValue")&&Je(s,l.type,rt(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function ge(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Je(s,l,d){(l!=="number"||ht(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var te=Array.isArray;function xt(s,l,d,m){if(s=s.options,l){l={};for(var x=0;x<d.length;x++)l["$"+d[x]]=!0;for(d=0;d<s.length;d++)x=l.hasOwnProperty("$"+s[d].value),s[d].selected!==x&&(s[d].selected=x),x&&m&&(s[d].defaultSelected=!0)}else{for(d=""+rt(d),l=null,x=0;x<s.length;x++){if(s[x].value===d){s[x].selected=!0,m&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function be(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Qe(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(te(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:rt(d)}}function _e(s,l){var d=rt(l.value),m=rt(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),m!=null&&(s.defaultValue=""+m)}function Y(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function pe(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Re(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?pe(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var se,Ue=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,x){MSApp.execUnsafeLocalFunction(function(){return s(l,d,m,x)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(se=se||document.createElement("div"),se.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=se.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function ke(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pt=["Webkit","ms","Moz","O"];Object.keys(pt).forEach(function(s){Pt.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),pt[l]=pt[s]})});function dt(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||pt.hasOwnProperty(s)&&pt[s]?(""+l).trim():l+"px"}function Xt(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,x=dt(d,l[d],m);d==="float"&&(d="cssFloat"),m?s.setProperty(d,x):s[d]=x}}var Cn=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jn(s,l){if(l){if(Cn[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ln(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lr=null;function yr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var W=null,q=null,le=null;function X(s){if(s=ju(s)){if(typeof W!="function")throw Error(n(280));var l=s.stateNode;l&&(l=Oh(l),W(s.stateNode,s.type,l))}}function ae(s){q?le?le.push(s):le=[s]:q=s}function Me(){if(q){var s=q,l=le;if(le=q=null,X(s),l)for(s=0;s<l.length;s++)X(l[s])}}function Oe(s,l){return s(l)}function ye(){}var me=!1;function Ae(s,l,d){if(me)return s(l,d);me=!0;try{return Oe(s,l,d)}finally{me=!1,(q!==null||le!==null)&&(ye(),Me())}}function Ze(s,l){var d=s.stateNode;if(d===null)return null;var m=Oh(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var bt=!1;if(u)try{var ot={};Object.defineProperty(ot,"passive",{get:function(){bt=!0}}),window.addEventListener("test",ot,ot),window.removeEventListener("test",ot,ot)}catch{bt=!1}function je(s,l,d,m,x,E,P,B,K){var ue=Array.prototype.slice.call(arguments,3);try{l.apply(d,ue)}catch(Ie){this.onError(Ie)}}var ze=!1,Lt=null,jt=!1,en=null,Wt={onError:function(s){ze=!0,Lt=s}};function Vn(s,l,d,m,x,E,P,B,K){ze=!1,Lt=null,je.apply(Wt,arguments)}function it(s,l,d,m,x,E,P,B,K){if(Vn.apply(this,arguments),ze){if(ze){var ue=Lt;ze=!1,Lt=null}else throw Error(n(198));jt||(jt=!0,en=ue)}}function tn(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function Kt(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function cr(s){if(tn(s)!==s)throw Error(n(188))}function Lr(s){var l=s.alternate;if(!l){if(l=tn(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,m=l;;){var x=d.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){d=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===d)return cr(x),s;if(E===m)return cr(x),l;E=E.sibling}throw Error(n(188))}if(d.return!==m.return)d=x,m=E;else{for(var P=!1,B=x.child;B;){if(B===d){P=!0,d=x,m=E;break}if(B===m){P=!0,m=x,d=E;break}B=B.sibling}if(!P){for(B=E.child;B;){if(B===d){P=!0,d=E,m=x;break}if(B===m){P=!0,m=E,d=x;break}B=B.sibling}if(!P)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function na(s){return s=Lr(s),s!==null?si(s):null}function si(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=si(s);if(l!==null)return l;s=s.sibling}return null}var ys=e.unstable_scheduleCallback,Xi=e.unstable_cancelCallback,Vl=e.unstable_shouldYield,bh=e.unstable_requestPaint,on=e.unstable_now,Fo=e.unstable_getCurrentPriorityLevel,vs=e.unstable_ImmediatePriority,ai=e.unstable_UserBlockingPriority,Qr=e.unstable_NormalPriority,La=e.unstable_LowPriority,Fl=e.unstable_IdlePriority,Yr=null,Xr=null;function er(s){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Yr,s,void 0,(s.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:Ul,Va=Math.log,Uo=Math.LN2;function Ul(s){return s>>>=0,s===0?32:31-(Va(s)/Uo|0)|0}var Fa=64,Ua=4194304;function xs(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ra(s,l){var d=s.pendingLanes;if(d===0)return 0;var m=0,x=s.suspendedLanes,E=s.pingedLanes,P=d&268435455;if(P!==0){var B=P&~x;B!==0?m=xs(B):(E&=P,E!==0&&(m=xs(E)))}else P=d&~x,P!==0?m=xs(P):E!==0&&(m=xs(E));if(m===0)return 0;if(l!==0&&l!==m&&(l&x)===0&&(x=m&-m,E=l&-l,x>=E||x===16&&(E&4194240)!==0))return l;if((m&4)!==0&&(m|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=m;0<l;)d=31-Fn(l),x=1<<d,m|=s[d],l&=~x;return m}function mu(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ji(s,l){for(var d=s.suspendedLanes,m=s.pingedLanes,x=s.expirationTimes,E=s.pendingLanes;0<E;){var P=31-Fn(E),B=1<<P,K=x[P];K===-1?((B&d)===0||(B&m)!==0)&&(x[P]=mu(B,l)):K<=l&&(s.expiredLanes|=B),E&=~B}}function Jr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ia(){var s=Fa;return Fa<<=1,(Fa&4194240)===0&&(Fa=64),s}function Zi(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function bs(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Fn(l),s[l]=d}function rn(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<d;){var x=31-Fn(d),E=1<<x;l[x]=0,m[x]=-1,s[x]=-1,d&=~E}}function ws(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var m=31-Fn(d),x=1<<m;x&l|s[m]&l&&(s[m]|=l),d&=~x}}var Ot=0;function _s(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var sa,aa,$,fe,Ye,wt=!1,zt=[],Vt=null,dn=null,Un=null,vr=new Map,$n=new Map,En=[],Qt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Es(s,l){switch(s){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":vr.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(l.pointerId)}}function kr(s,l,d,m,x,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},l!==null&&(l=ju(l),l!==null&&aa(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function ln(s,l,d,m,x){switch(l){case"focusin":return Vt=kr(Vt,s,l,d,m,x),!0;case"dragenter":return dn=kr(dn,s,l,d,m,x),!0;case"mouseover":return Un=kr(Un,s,l,d,m,x),!0;case"pointerover":var E=x.pointerId;return vr.set(E,kr(vr.get(E)||null,s,l,d,m,x)),!0;case"gotpointercapture":return E=x.pointerId,$n.set(E,kr($n.get(E)||null,s,l,d,m,x)),!0}return!1}function Sr(s){var l=Wo(s.target);if(l!==null){var d=tn(l);if(d!==null){if(l=d.tag,l===13){if(l=Kt(d),l!==null){s.blockedOn=l,Ye(s.priority,function(){$(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xr(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=$l(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);lr=m,d.target.dispatchEvent(m),lr=null}else return l=ju(d),l!==null&&aa(l),s.blockedOn=d,!1;l.shift()}return!0}function $o(s,l,d){xr(s)&&d.delete(l)}function wh(){wt=!1,Vt!==null&&xr(Vt)&&(Vt=null),dn!==null&&xr(dn)&&(dn=null),Un!==null&&xr(Un)&&(Un=null),vr.forEach($o),$n.forEach($o)}function es(s,l){s.blockedOn===l&&(s.blockedOn=null,wt||(wt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wh)))}function ts(s){function l(x){return es(x,s)}if(0<zt.length){es(zt[0],s);for(var d=1;d<zt.length;d++){var m=zt[d];m.blockedOn===s&&(m.blockedOn=null)}}for(Vt!==null&&es(Vt,s),dn!==null&&es(dn,s),Un!==null&&es(Un,s),vr.forEach(l),$n.forEach(l),d=0;d<En.length;d++)m=En[d],m.blockedOn===s&&(m.blockedOn=null);for(;0<En.length&&(d=En[0],d.blockedOn===null);)Sr(d),d.blockedOn===null&&En.shift()}var oa=D.ReactCurrentBatchConfig,$a=!0;function Nn(s,l,d,m){var x=Ot,E=oa.transition;oa.transition=null;try{Ot=1,gu(s,l,d,m)}finally{Ot=x,oa.transition=E}}function Jm(s,l,d,m){var x=Ot,E=oa.transition;oa.transition=null;try{Ot=4,gu(s,l,d,m)}finally{Ot=x,oa.transition=E}}function gu(s,l,d,m){if($a){var x=$l(s,l,d,m);if(x===null)cg(s,l,m,zo,d),Es(s,m);else if(ln(x,s,l,d,m))m.stopPropagation();else if(Es(s,m),l&4&&-1<Qt.indexOf(s)){for(;x!==null;){var E=ju(x);if(E!==null&&sa(E),E=$l(s,l,d,m),E===null&&cg(s,l,m,zo,d),E===x)break;x=E}x!==null&&m.stopPropagation()}else cg(s,l,m,null,d)}}var zo=null;function $l(s,l,d,m){if(zo=null,s=yr(m),s=Wo(s),s!==null)if(l=tn(s),l===null)s=null;else if(d=l.tag,d===13){if(s=Kt(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return zo=s,null}function yu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fo()){case vs:return 1;case ai:return 4;case Qr:case La:return 16;case Fl:return 536870912;default:return 16}default:return 16}}var _i=null,zl=null,oi=null;function vu(){if(oi)return oi;var s,l=zl,d=l.length,m,x="value"in _i?_i.value:_i.textContent,E=x.length;for(s=0;s<d&&l[s]===x[s];s++);var P=d-s;for(m=1;m<=P&&l[d-m]===x[E-m];m++);return oi=x.slice(s,1<m?1-m:void 0)}function Bl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ns(){return!0}function xu(){return!1}function Ar(s){function l(d,m,x,E,P){this._reactName=d,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=P,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(d=s[B],this[B]=d?d(E):E[B]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ns:xu,this.isPropagationStopped=xu,this}return oe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),l}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hl=Ar(ns),ks=oe({},ns,{view:0,detail:0}),Zm=Ar(ks),Wl,la,za,Bo=oe({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==za&&(za&&s.type==="mousemove"?(Wl=s.screenX-za.screenX,la=s.screenY-za.screenY):la=Wl=0,za=s),Wl)},movementY:function(s){return"movementY"in s?s.movementY:la}}),ql=Ar(Bo),bu=oe({},Bo,{dataTransfer:0}),_h=Ar(bu),Gl=oe({},ks,{relatedTarget:0}),Kl=Ar(Gl),Eh=oe({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),ca=Ar(Eh),Nh=oe({},ns,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),kh=Ar(Nh),Sh=oe({},ns,{data:0}),wu=Ar(Sh),Ql={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Th(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Ah[s])?!!l[s]:!1}function Ss(){return Th}var p=oe({},ks,{key:function(s){if(s.key){var l=Ql[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Bl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Zr[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(s){return s.type==="keypress"?Bl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Bl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=Ar(p),C=oe({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=Ar(C),Z=oe({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),he=Ar(Z),Be=oe({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),sn=Ar(Be),ur=oe({},Bo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Bt=Ar(ur),br=[9,13,27,32],tr=u&&"CompositionEvent"in window,Di=null;u&&"documentMode"in document&&(Di=document.documentMode);var Ei=u&&"TextEvent"in window&&!Di,Ho=u&&(!tr||Di&&8<Di&&11>=Di),Yl=" ",rb=!1;function ib(s,l){switch(s){case"keyup":return br.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sb(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xl=!1;function Yj(s,l){switch(s){case"compositionend":return sb(l);case"keypress":return l.which!==32?null:(rb=!0,Yl);case"textInput":return s=l.data,s===Yl&&rb?null:s;default:return null}}function Xj(s,l){if(Xl)return s==="compositionend"||!tr&&ib(s,l)?(s=vu(),oi=zl=_i=null,Xl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ho&&l.locale!=="ko"?null:l.data;default:return null}}var Jj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ab(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Jj[s.type]:l==="textarea"}function ob(s,l,d,m){ae(m),l=Rh(l,"onChange"),0<l.length&&(d=new Hl("onChange","change",null,d,m),s.push({event:d,listeners:l}))}var _u=null,Eu=null;function Zj(s){kb(s,0)}function Ch(s){var l=nc(s);if(mt(l))return s}function e5(s,l){if(s==="change")return l}var lb=!1;if(u){var eg;if(u){var tg="oninput"in document;if(!tg){var cb=document.createElement("div");cb.setAttribute("oninput","return;"),tg=typeof cb.oninput=="function"}eg=tg}else eg=!1;lb=eg&&(!document.documentMode||9<document.documentMode)}function ub(){_u&&(_u.detachEvent("onpropertychange",db),Eu=_u=null)}function db(s){if(s.propertyName==="value"&&Ch(Eu)){var l=[];ob(l,Eu,s,yr(s)),Ae(Zj,l)}}function t5(s,l,d){s==="focusin"?(ub(),_u=l,Eu=d,_u.attachEvent("onpropertychange",db)):s==="focusout"&&ub()}function n5(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ch(Eu)}function r5(s,l){if(s==="click")return Ch(l)}function i5(s,l){if(s==="input"||s==="change")return Ch(l)}function s5(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var rs=typeof Object.is=="function"?Object.is:s5;function Nu(s,l){if(rs(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var x=d[m];if(!h.call(l,x)||!rs(s[x],l[x]))return!1}return!0}function hb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function fb(s,l){var d=hb(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=l&&m>=l)return{node:d,offset:l-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=hb(d)}}function pb(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?pb(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function mb(){for(var s=window,l=ht();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=ht(s.document)}return l}function ng(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function a5(s){var l=mb(),d=s.focusedElem,m=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&pb(d.ownerDocument.documentElement,d)){if(m!==null&&ng(d)){if(l=m.start,s=m.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var x=d.textContent.length,E=Math.min(m.start,x);m=m.end===void 0?E:Math.min(m.end,x),!s.extend&&E>m&&(x=m,m=E,E=x),x=fb(d,E);var P=fb(d,m);x&&P&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==P.node||s.focusOffset!==P.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),s.removeAllRanges(),E>m?(s.addRange(l),s.extend(P.node,P.offset)):(l.setEnd(P.node,P.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var o5=u&&"documentMode"in document&&11>=document.documentMode,Jl=null,rg=null,ku=null,ig=!1;function gb(s,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ig||Jl==null||Jl!==ht(m)||(m=Jl,"selectionStart"in m&&ng(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ku&&Nu(ku,m)||(ku=m,m=Rh(rg,"onSelect"),0<m.length&&(l=new Hl("onSelect","select",null,l,d),s.push({event:l,listeners:m}),l.target=Jl)))}function jh(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Zl={animationend:jh("Animation","AnimationEnd"),animationiteration:jh("Animation","AnimationIteration"),animationstart:jh("Animation","AnimationStart"),transitionend:jh("Transition","TransitionEnd")},sg={},yb={};u&&(yb=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Ih(s){if(sg[s])return sg[s];if(!Zl[s])return s;var l=Zl[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in yb)return sg[s]=l[d];return s}var vb=Ih("animationend"),xb=Ih("animationiteration"),bb=Ih("animationstart"),wb=Ih("transitionend"),_b=new Map,Eb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(s,l){_b.set(s,l),o(l,[s])}for(var ag=0;ag<Eb.length;ag++){var og=Eb[ag],l5=og.toLowerCase(),c5=og[0].toUpperCase()+og.slice(1);Ba(l5,"on"+c5)}Ba(vb,"onAnimationEnd"),Ba(xb,"onAnimationIteration"),Ba(bb,"onAnimationStart"),Ba("dblclick","onDoubleClick"),Ba("focusin","onFocus"),Ba("focusout","onBlur"),Ba(wb,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function Nb(s,l,d){var m=s.type||"unknown-event";s.currentTarget=d,it(m,l,void 0,s),s.currentTarget=null}function kb(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],x=m.event;m=m.listeners;e:{var E=void 0;if(l)for(var P=m.length-1;0<=P;P--){var B=m[P],K=B.instance,ue=B.currentTarget;if(B=B.listener,K!==E&&x.isPropagationStopped())break e;Nb(x,B,ue),E=K}else for(P=0;P<m.length;P++){if(B=m[P],K=B.instance,ue=B.currentTarget,B=B.listener,K!==E&&x.isPropagationStopped())break e;Nb(x,B,ue),E=K}}}if(jt)throw s=en,jt=!1,en=null,s}function xn(s,l){var d=l[mg];d===void 0&&(d=l[mg]=new Set);var m=s+"__bubble";d.has(m)||(Sb(l,s,2,!1),d.add(m))}function lg(s,l,d){var m=0;l&&(m|=4),Sb(d,s,m,l)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function Au(s){if(!s[Ph]){s[Ph]=!0,r.forEach(function(d){d!=="selectionchange"&&(u5.has(d)||lg(d,!1,s),lg(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Ph]||(l[Ph]=!0,lg("selectionchange",!1,l))}}function Sb(s,l,d,m){switch(yu(l)){case 1:var x=Nn;break;case 4:x=Jm;break;default:x=gu}d=x.bind(null,l,d,s),x=void 0,!bt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),m?x!==void 0?s.addEventListener(l,d,{capture:!0,passive:x}):s.addEventListener(l,d,!0):x!==void 0?s.addEventListener(l,d,{passive:x}):s.addEventListener(l,d,!1)}function cg(s,l,d,m,x){var E=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var B=m.stateNode.containerInfo;if(B===x||B.nodeType===8&&B.parentNode===x)break;if(P===4)for(P=m.return;P!==null;){var K=P.tag;if((K===3||K===4)&&(K=P.stateNode.containerInfo,K===x||K.nodeType===8&&K.parentNode===x))return;P=P.return}for(;B!==null;){if(P=Wo(B),P===null)return;if(K=P.tag,K===5||K===6){m=E=P;continue e}B=B.parentNode}}m=m.return}Ae(function(){var ue=E,Ie=yr(d),Le=[];e:{var Ce=_b.get(s);if(Ce!==void 0){var et=Hl,st=s;switch(s){case"keypress":if(Bl(d)===0)break e;case"keydown":case"keyup":et=_;break;case"focusin":st="focus",et=Kl;break;case"focusout":st="blur",et=Kl;break;case"beforeblur":case"afterblur":et=Kl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=_h;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=he;break;case vb:case xb:case bb:et=ca;break;case wb:et=sn;break;case"scroll":et=Zm;break;case"wheel":et=Bt;break;case"copy":case"cut":case"paste":et=kh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=F}var lt=(l&4)!==0,Kn=!lt&&s==="scroll",ee=lt?Ce!==null?Ce+"Capture":null:Ce;lt=[];for(var Q=ue,ie;Q!==null;){ie=Q;var Fe=ie.stateNode;if(ie.tag===5&&Fe!==null&&(ie=Fe,ee!==null&&(Fe=Ze(Q,ee),Fe!=null&&lt.push(Tu(Q,Fe,ie)))),Kn)break;Q=Q.return}0<lt.length&&(Ce=new et(Ce,st,null,d,Ie),Le.push({event:Ce,listeners:lt}))}}if((l&7)===0){e:{if(Ce=s==="mouseover"||s==="pointerover",et=s==="mouseout"||s==="pointerout",Ce&&d!==lr&&(st=d.relatedTarget||d.fromElement)&&(Wo(st)||st[ua]))break e;if((et||Ce)&&(Ce=Ie.window===Ie?Ie:(Ce=Ie.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,et?(st=d.relatedTarget||d.toElement,et=ue,st=st?Wo(st):null,st!==null&&(Kn=tn(st),st!==Kn||st.tag!==5&&st.tag!==6)&&(st=null)):(et=null,st=ue),et!==st)){if(lt=ql,Fe="onMouseLeave",ee="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(lt=F,Fe="onPointerLeave",ee="onPointerEnter",Q="pointer"),Kn=et==null?Ce:nc(et),ie=st==null?Ce:nc(st),Ce=new lt(Fe,Q+"leave",et,d,Ie),Ce.target=Kn,Ce.relatedTarget=ie,Fe=null,Wo(Ie)===ue&&(lt=new lt(ee,Q+"enter",st,d,Ie),lt.target=ie,lt.relatedTarget=Kn,Fe=lt),Kn=Fe,et&&st)t:{for(lt=et,ee=st,Q=0,ie=lt;ie;ie=ec(ie))Q++;for(ie=0,Fe=ee;Fe;Fe=ec(Fe))ie++;for(;0<Q-ie;)lt=ec(lt),Q--;for(;0<ie-Q;)ee=ec(ee),ie--;for(;Q--;){if(lt===ee||ee!==null&&lt===ee.alternate)break t;lt=ec(lt),ee=ec(ee)}lt=null}else lt=null;et!==null&&Ab(Le,Ce,et,lt,!1),st!==null&&Kn!==null&&Ab(Le,Kn,st,lt,!0)}}e:{if(Ce=ue?nc(ue):window,et=Ce.nodeName&&Ce.nodeName.toLowerCase(),et==="select"||et==="input"&&Ce.type==="file")var ut=e5;else if(ab(Ce))if(lb)ut=i5;else{ut=n5;var gt=t5}else(et=Ce.nodeName)&&et.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(ut=r5);if(ut&&(ut=ut(s,ue))){ob(Le,ut,d,Ie);break e}gt&&gt(s,Ce,ue),s==="focusout"&&(gt=Ce._wrapperState)&&gt.controlled&&Ce.type==="number"&&Je(Ce,"number",Ce.value)}switch(gt=ue?nc(ue):window,s){case"focusin":(ab(gt)||gt.contentEditable==="true")&&(Jl=gt,rg=ue,ku=null);break;case"focusout":ku=rg=Jl=null;break;case"mousedown":ig=!0;break;case"contextmenu":case"mouseup":case"dragend":ig=!1,gb(Le,d,Ie);break;case"selectionchange":if(o5)break;case"keydown":case"keyup":gb(Le,d,Ie)}var yt;if(tr)e:{switch(s){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Xl?ib(s,d)&&(St="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(St="onCompositionStart");St&&(Ho&&d.locale!=="ko"&&(Xl||St!=="onCompositionStart"?St==="onCompositionEnd"&&Xl&&(yt=vu()):(_i=Ie,zl="value"in _i?_i.value:_i.textContent,Xl=!0)),gt=Rh(ue,St),0<gt.length&&(St=new wu(St,s,null,d,Ie),Le.push({event:St,listeners:gt}),yt?St.data=yt:(yt=sb(d),yt!==null&&(St.data=yt)))),(yt=Ei?Yj(s,d):Xj(s,d))&&(ue=Rh(ue,"onBeforeInput"),0<ue.length&&(Ie=new wu("onBeforeInput","beforeinput",null,d,Ie),Le.push({event:Ie,listeners:ue}),Ie.data=yt))}kb(Le,l)})}function Tu(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Rh(s,l){for(var d=l+"Capture",m=[];s!==null;){var x=s,E=x.stateNode;x.tag===5&&E!==null&&(x=E,E=Ze(s,d),E!=null&&m.unshift(Tu(s,E,x)),E=Ze(s,l),E!=null&&m.push(Tu(s,E,x))),s=s.return}return m}function ec(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Ab(s,l,d,m,x){for(var E=l._reactName,P=[];d!==null&&d!==m;){var B=d,K=B.alternate,ue=B.stateNode;if(K!==null&&K===m)break;B.tag===5&&ue!==null&&(B=ue,x?(K=Ze(d,E),K!=null&&P.unshift(Tu(d,K,B))):x||(K=Ze(d,E),K!=null&&P.push(Tu(d,K,B)))),d=d.return}P.length!==0&&s.push({event:l,listeners:P})}var d5=/\r\n?/g,h5=/\u0000|\uFFFD/g;function Tb(s){return(typeof s=="string"?s:""+s).replace(d5,`
`).replace(h5,"")}function Mh(s,l,d){if(l=Tb(l),Tb(s)!==l&&d)throw Error(n(425))}function Dh(){}var ug=null,dg=null;function hg(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var fg=typeof setTimeout=="function"?setTimeout:void 0,f5=typeof clearTimeout=="function"?clearTimeout:void 0,Cb=typeof Promise=="function"?Promise:void 0,p5=typeof queueMicrotask=="function"?queueMicrotask:typeof Cb<"u"?function(s){return Cb.resolve(null).then(s).catch(m5)}:fg;function m5(s){setTimeout(function(){throw s})}function pg(s,l){var d=l,m=0;do{var x=d.nextSibling;if(s.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(m===0){s.removeChild(x),ts(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=x}while(d);ts(l)}function Ha(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function jb(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var tc=Math.random().toString(36).slice(2),As="__reactFiber$"+tc,Cu="__reactProps$"+tc,ua="__reactContainer$"+tc,mg="__reactEvents$"+tc,g5="__reactListeners$"+tc,y5="__reactHandles$"+tc;function Wo(s){var l=s[As];if(l)return l;for(var d=s.parentNode;d;){if(l=d[ua]||d[As]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=jb(s);s!==null;){if(d=s[As])return d;s=jb(s)}return l}s=d,d=s.parentNode}return null}function ju(s){return s=s[As]||s[ua],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function nc(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Oh(s){return s[Cu]||null}var gg=[],rc=-1;function Wa(s){return{current:s}}function bn(s){0>rc||(s.current=gg[rc],gg[rc]=null,rc--)}function mn(s,l){rc++,gg[rc]=s.current,s.current=l}var qa={},Vr=Wa(qa),li=Wa(!1),qo=qa;function ic(s,l){var d=s.type.contextTypes;if(!d)return qa;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var x={},E;for(E in d)x[E]=l[E];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=x),x}function ci(s){return s=s.childContextTypes,s!=null}function Lh(){bn(li),bn(Vr)}function Ib(s,l,d){if(Vr.current!==qa)throw Error(n(168));mn(Vr,l),mn(li,d)}function Pb(s,l,d){var m=s.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var x in m)if(!(x in l))throw Error(n(108,Ge(s)||"Unknown",x));return oe({},d,m)}function Vh(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||qa,qo=Vr.current,mn(Vr,s),mn(li,li.current),!0}function Rb(s,l,d){var m=s.stateNode;if(!m)throw Error(n(169));d?(s=Pb(s,l,qo),m.__reactInternalMemoizedMergedChildContext=s,bn(li),bn(Vr),mn(Vr,s)):bn(li),mn(li,d)}var da=null,Fh=!1,yg=!1;function Mb(s){da===null?da=[s]:da.push(s)}function v5(s){Fh=!0,Mb(s)}function Ga(){if(!yg&&da!==null){yg=!0;var s=0,l=Ot;try{var d=da;for(Ot=1;s<d.length;s++){var m=d[s];do m=m(!0);while(m!==null)}da=null,Fh=!1}catch(x){throw da!==null&&(da=da.slice(s+1)),ys(vs,Ga),x}finally{Ot=l,yg=!1}}return null}var sc=[],ac=0,Uh=null,$h=0,Oi=[],Li=0,Go=null,ha=1,fa="";function Ko(s,l){sc[ac++]=$h,sc[ac++]=Uh,Uh=s,$h=l}function Db(s,l,d){Oi[Li++]=ha,Oi[Li++]=fa,Oi[Li++]=Go,Go=s;var m=ha;s=fa;var x=32-Fn(m)-1;m&=~(1<<x),d+=1;var E=32-Fn(l)+x;if(30<E){var P=x-x%5;E=(m&(1<<P)-1).toString(32),m>>=P,x-=P,ha=1<<32-Fn(l)+x|d<<x|m,fa=E+s}else ha=1<<E|d<<x|m,fa=s}function vg(s){s.return!==null&&(Ko(s,1),Db(s,1,0))}function xg(s){for(;s===Uh;)Uh=sc[--ac],sc[ac]=null,$h=sc[--ac],sc[ac]=null;for(;s===Go;)Go=Oi[--Li],Oi[Li]=null,fa=Oi[--Li],Oi[Li]=null,ha=Oi[--Li],Oi[Li]=null}var Ni=null,ki=null,kn=!1,is=null;function Ob(s,l){var d=$i(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function Lb(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Ni=s,ki=Ha(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Ni=s,ki=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Go!==null?{id:ha,overflow:fa}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=$i(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,Ni=s,ki=null,!0):!1;default:return!1}}function bg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function wg(s){if(kn){var l=ki;if(l){var d=l;if(!Lb(s,l)){if(bg(s))throw Error(n(418));l=Ha(d.nextSibling);var m=Ni;l&&Lb(s,l)?Ob(m,d):(s.flags=s.flags&-4097|2,kn=!1,Ni=s)}}else{if(bg(s))throw Error(n(418));s.flags=s.flags&-4097|2,kn=!1,Ni=s}}}function Vb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ni=s}function zh(s){if(s!==Ni)return!1;if(!kn)return Vb(s),kn=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!hg(s.type,s.memoizedProps)),l&&(l=ki)){if(bg(s))throw Fb(),Error(n(418));for(;l;)Ob(s,l),l=Ha(l.nextSibling)}if(Vb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){ki=Ha(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}ki=null}}else ki=Ni?Ha(s.stateNode.nextSibling):null;return!0}function Fb(){for(var s=ki;s;)s=Ha(s.nextSibling)}function oc(){ki=Ni=null,kn=!1}function _g(s){is===null?is=[s]:is.push(s)}var x5=D.ReactCurrentBatchConfig;function Iu(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,s));var x=m,E=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(P){var B=x.refs;P===null?delete B[E]:B[E]=P},l._stringRef=E,l)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Bh(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Ub(s){var l=s._init;return l(s._payload)}function $b(s){function l(ee,Q){if(s){var ie=ee.deletions;ie===null?(ee.deletions=[Q],ee.flags|=16):ie.push(Q)}}function d(ee,Q){if(!s)return null;for(;Q!==null;)l(ee,Q),Q=Q.sibling;return null}function m(ee,Q){for(ee=new Map;Q!==null;)Q.key!==null?ee.set(Q.key,Q):ee.set(Q.index,Q),Q=Q.sibling;return ee}function x(ee,Q){return ee=to(ee,Q),ee.index=0,ee.sibling=null,ee}function E(ee,Q,ie){return ee.index=ie,s?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<Q?(ee.flags|=2,Q):ie):(ee.flags|=2,Q)):(ee.flags|=1048576,Q)}function P(ee){return s&&ee.alternate===null&&(ee.flags|=2),ee}function B(ee,Q,ie,Fe){return Q===null||Q.tag!==6?(Q=f0(ie,ee.mode,Fe),Q.return=ee,Q):(Q=x(Q,ie),Q.return=ee,Q)}function K(ee,Q,ie,Fe){var ut=ie.type;return ut===M?Ie(ee,Q,ie.props.children,Fe,ie.key):Q!==null&&(Q.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===We&&Ub(ut)===Q.type)?(Fe=x(Q,ie.props),Fe.ref=Iu(ee,Q,ie),Fe.return=ee,Fe):(Fe=pf(ie.type,ie.key,ie.props,null,ee.mode,Fe),Fe.ref=Iu(ee,Q,ie),Fe.return=ee,Fe)}function ue(ee,Q,ie,Fe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ie.containerInfo||Q.stateNode.implementation!==ie.implementation?(Q=p0(ie,ee.mode,Fe),Q.return=ee,Q):(Q=x(Q,ie.children||[]),Q.return=ee,Q)}function Ie(ee,Q,ie,Fe,ut){return Q===null||Q.tag!==7?(Q=nl(ie,ee.mode,Fe,ut),Q.return=ee,Q):(Q=x(Q,ie),Q.return=ee,Q)}function Le(ee,Q,ie){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=f0(""+Q,ee.mode,ie),Q.return=ee,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return ie=pf(Q.type,Q.key,Q.props,null,ee.mode,ie),ie.ref=Iu(ee,null,Q),ie.return=ee,ie;case G:return Q=p0(Q,ee.mode,ie),Q.return=ee,Q;case We:var Fe=Q._init;return Le(ee,Fe(Q._payload),ie)}if(te(Q)||ce(Q))return Q=nl(Q,ee.mode,ie,null),Q.return=ee,Q;Bh(ee,Q)}return null}function Ce(ee,Q,ie,Fe){var ut=Q!==null?Q.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ut!==null?null:B(ee,Q,""+ie,Fe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case z:return ie.key===ut?K(ee,Q,ie,Fe):null;case G:return ie.key===ut?ue(ee,Q,ie,Fe):null;case We:return ut=ie._init,Ce(ee,Q,ut(ie._payload),Fe)}if(te(ie)||ce(ie))return ut!==null?null:Ie(ee,Q,ie,Fe,null);Bh(ee,ie)}return null}function et(ee,Q,ie,Fe,ut){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return ee=ee.get(ie)||null,B(Q,ee,""+Fe,ut);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case z:return ee=ee.get(Fe.key===null?ie:Fe.key)||null,K(Q,ee,Fe,ut);case G:return ee=ee.get(Fe.key===null?ie:Fe.key)||null,ue(Q,ee,Fe,ut);case We:var gt=Fe._init;return et(ee,Q,ie,gt(Fe._payload),ut)}if(te(Fe)||ce(Fe))return ee=ee.get(ie)||null,Ie(Q,ee,Fe,ut,null);Bh(Q,Fe)}return null}function st(ee,Q,ie,Fe){for(var ut=null,gt=null,yt=Q,St=Q=0,Er=null;yt!==null&&St<ie.length;St++){yt.index>St?(Er=yt,yt=null):Er=yt.sibling;var Yt=Ce(ee,yt,ie[St],Fe);if(Yt===null){yt===null&&(yt=Er);break}s&&yt&&Yt.alternate===null&&l(ee,yt),Q=E(Yt,Q,St),gt===null?ut=Yt:gt.sibling=Yt,gt=Yt,yt=Er}if(St===ie.length)return d(ee,yt),kn&&Ko(ee,St),ut;if(yt===null){for(;St<ie.length;St++)yt=Le(ee,ie[St],Fe),yt!==null&&(Q=E(yt,Q,St),gt===null?ut=yt:gt.sibling=yt,gt=yt);return kn&&Ko(ee,St),ut}for(yt=m(ee,yt);St<ie.length;St++)Er=et(yt,ee,St,ie[St],Fe),Er!==null&&(s&&Er.alternate!==null&&yt.delete(Er.key===null?St:Er.key),Q=E(Er,Q,St),gt===null?ut=Er:gt.sibling=Er,gt=Er);return s&&yt.forEach(function(no){return l(ee,no)}),kn&&Ko(ee,St),ut}function lt(ee,Q,ie,Fe){var ut=ce(ie);if(typeof ut!="function")throw Error(n(150));if(ie=ut.call(ie),ie==null)throw Error(n(151));for(var gt=ut=null,yt=Q,St=Q=0,Er=null,Yt=ie.next();yt!==null&&!Yt.done;St++,Yt=ie.next()){yt.index>St?(Er=yt,yt=null):Er=yt.sibling;var no=Ce(ee,yt,Yt.value,Fe);if(no===null){yt===null&&(yt=Er);break}s&&yt&&no.alternate===null&&l(ee,yt),Q=E(no,Q,St),gt===null?ut=no:gt.sibling=no,gt=no,yt=Er}if(Yt.done)return d(ee,yt),kn&&Ko(ee,St),ut;if(yt===null){for(;!Yt.done;St++,Yt=ie.next())Yt=Le(ee,Yt.value,Fe),Yt!==null&&(Q=E(Yt,Q,St),gt===null?ut=Yt:gt.sibling=Yt,gt=Yt);return kn&&Ko(ee,St),ut}for(yt=m(ee,yt);!Yt.done;St++,Yt=ie.next())Yt=et(yt,ee,St,Yt.value,Fe),Yt!==null&&(s&&Yt.alternate!==null&&yt.delete(Yt.key===null?St:Yt.key),Q=E(Yt,Q,St),gt===null?ut=Yt:gt.sibling=Yt,gt=Yt);return s&&yt.forEach(function(J5){return l(ee,J5)}),kn&&Ko(ee,St),ut}function Kn(ee,Q,ie,Fe){if(typeof ie=="object"&&ie!==null&&ie.type===M&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case z:e:{for(var ut=ie.key,gt=Q;gt!==null;){if(gt.key===ut){if(ut=ie.type,ut===M){if(gt.tag===7){d(ee,gt.sibling),Q=x(gt,ie.props.children),Q.return=ee,ee=Q;break e}}else if(gt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===We&&Ub(ut)===gt.type){d(ee,gt.sibling),Q=x(gt,ie.props),Q.ref=Iu(ee,gt,ie),Q.return=ee,ee=Q;break e}d(ee,gt);break}else l(ee,gt);gt=gt.sibling}ie.type===M?(Q=nl(ie.props.children,ee.mode,Fe,ie.key),Q.return=ee,ee=Q):(Fe=pf(ie.type,ie.key,ie.props,null,ee.mode,Fe),Fe.ref=Iu(ee,Q,ie),Fe.return=ee,ee=Fe)}return P(ee);case G:e:{for(gt=ie.key;Q!==null;){if(Q.key===gt)if(Q.tag===4&&Q.stateNode.containerInfo===ie.containerInfo&&Q.stateNode.implementation===ie.implementation){d(ee,Q.sibling),Q=x(Q,ie.children||[]),Q.return=ee,ee=Q;break e}else{d(ee,Q);break}else l(ee,Q);Q=Q.sibling}Q=p0(ie,ee.mode,Fe),Q.return=ee,ee=Q}return P(ee);case We:return gt=ie._init,Kn(ee,Q,gt(ie._payload),Fe)}if(te(ie))return st(ee,Q,ie,Fe);if(ce(ie))return lt(ee,Q,ie,Fe);Bh(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,Q!==null&&Q.tag===6?(d(ee,Q.sibling),Q=x(Q,ie),Q.return=ee,ee=Q):(d(ee,Q),Q=f0(ie,ee.mode,Fe),Q.return=ee,ee=Q),P(ee)):d(ee,Q)}return Kn}var lc=$b(!0),zb=$b(!1),Hh=Wa(null),Wh=null,cc=null,Eg=null;function Ng(){Eg=cc=Wh=null}function kg(s){var l=Hh.current;bn(Hh),s._currentValue=l}function Sg(s,l,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===d)break;s=s.return}}function uc(s,l){Wh=s,Eg=cc=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(ui=!0),s.firstContext=null)}function Vi(s){var l=s._currentValue;if(Eg!==s)if(s={context:s,memoizedValue:l,next:null},cc===null){if(Wh===null)throw Error(n(308));cc=s,Wh.dependencies={lanes:0,firstContext:s}}else cc=cc.next=s;return l}var Qo=null;function Ag(s){Qo===null?Qo=[s]:Qo.push(s)}function Bb(s,l,d,m){var x=l.interleaved;return x===null?(d.next=d,Ag(l)):(d.next=x.next,x.next=d),l.interleaved=d,pa(s,m)}function pa(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Ka=!1;function Tg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hb(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ma(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Qa(s,l,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(qt&2)!==0){var x=m.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),m.pending=l,pa(s,d)}return x=m.interleaved,x===null?(l.next=l,Ag(m)):(l.next=x.next,x.next=l),m.interleaved=l,pa(s,d)}function qh(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,ws(s,d)}}function Wb(s,l){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var x=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var P={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?x=E=P:E=E.next=P,d=d.next}while(d!==null);E===null?x=E=l:E=E.next=l}else x=E=l;d={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,effects:m.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Gh(s,l,d,m){var x=s.updateQueue;Ka=!1;var E=x.firstBaseUpdate,P=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var K=B,ue=K.next;K.next=null,P===null?E=ue:P.next=ue,P=K;var Ie=s.alternate;Ie!==null&&(Ie=Ie.updateQueue,B=Ie.lastBaseUpdate,B!==P&&(B===null?Ie.firstBaseUpdate=ue:B.next=ue,Ie.lastBaseUpdate=K))}if(E!==null){var Le=x.baseState;P=0,Ie=ue=K=null,B=E;do{var Ce=B.lane,et=B.eventTime;if((m&Ce)===Ce){Ie!==null&&(Ie=Ie.next={eventTime:et,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var st=s,lt=B;switch(Ce=l,et=d,lt.tag){case 1:if(st=lt.payload,typeof st=="function"){Le=st.call(et,Le,Ce);break e}Le=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=lt.payload,Ce=typeof st=="function"?st.call(et,Le,Ce):st,Ce==null)break e;Le=oe({},Le,Ce);break e;case 2:Ka=!0}}B.callback!==null&&B.lane!==0&&(s.flags|=64,Ce=x.effects,Ce===null?x.effects=[B]:Ce.push(B))}else et={eventTime:et,lane:Ce,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Ie===null?(ue=Ie=et,K=Le):Ie=Ie.next=et,P|=Ce;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;Ce=B,B=Ce.next,Ce.next=null,x.lastBaseUpdate=Ce,x.shared.pending=null}}while(!0);if(Ie===null&&(K=Le),x.baseState=K,x.firstBaseUpdate=ue,x.lastBaseUpdate=Ie,l=x.shared.interleaved,l!==null){x=l;do P|=x.lane,x=x.next;while(x!==l)}else E===null&&(x.shared.lanes=0);Jo|=P,s.lanes=P,s.memoizedState=Le}}function qb(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var m=s[l],x=m.callback;if(x!==null){if(m.callback=null,m=d,typeof x!="function")throw Error(n(191,x));x.call(m)}}}var Pu={},Ts=Wa(Pu),Ru=Wa(Pu),Mu=Wa(Pu);function Yo(s){if(s===Pu)throw Error(n(174));return s}function Cg(s,l){switch(mn(Mu,l),mn(Ru,s),mn(Ts,Pu),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Re(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Re(l,s)}bn(Ts),mn(Ts,l)}function dc(){bn(Ts),bn(Ru),bn(Mu)}function Gb(s){Yo(Mu.current);var l=Yo(Ts.current),d=Re(l,s.type);l!==d&&(mn(Ru,s),mn(Ts,d))}function jg(s){Ru.current===s&&(bn(Ts),bn(Ru))}var In=Wa(0);function Kh(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ig=[];function Pg(){for(var s=0;s<Ig.length;s++)Ig[s]._workInProgressVersionPrimary=null;Ig.length=0}var Qh=D.ReactCurrentDispatcher,Rg=D.ReactCurrentBatchConfig,Xo=0,Pn=null,dr=null,wr=null,Yh=!1,Du=!1,Ou=0,b5=0;function Fr(){throw Error(n(321))}function Mg(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!rs(s[d],l[d]))return!1;return!0}function Dg(s,l,d,m,x,E){if(Xo=E,Pn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Qh.current=s===null||s.memoizedState===null?N5:k5,s=d(m,x),Du){E=0;do{if(Du=!1,Ou=0,25<=E)throw Error(n(301));E+=1,wr=dr=null,l.updateQueue=null,Qh.current=S5,s=d(m,x)}while(Du)}if(Qh.current=Zh,l=dr!==null&&dr.next!==null,Xo=0,wr=dr=Pn=null,Yh=!1,l)throw Error(n(300));return s}function Og(){var s=Ou!==0;return Ou=0,s}function Cs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?Pn.memoizedState=wr=s:wr=wr.next=s,wr}function Fi(){if(dr===null){var s=Pn.alternate;s=s!==null?s.memoizedState:null}else s=dr.next;var l=wr===null?Pn.memoizedState:wr.next;if(l!==null)wr=l,dr=s;else{if(s===null)throw Error(n(310));dr=s,s={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},wr===null?Pn.memoizedState=wr=s:wr=wr.next=s}return wr}function Lu(s,l){return typeof l=="function"?l(s):l}function Lg(s){var l=Fi(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=dr,x=m.baseQueue,E=d.pending;if(E!==null){if(x!==null){var P=x.next;x.next=E.next,E.next=P}m.baseQueue=x=E,d.pending=null}if(x!==null){E=x.next,m=m.baseState;var B=P=null,K=null,ue=E;do{var Ie=ue.lane;if((Xo&Ie)===Ie)K!==null&&(K=K.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),m=ue.hasEagerState?ue.eagerState:s(m,ue.action);else{var Le={lane:Ie,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};K===null?(B=K=Le,P=m):K=K.next=Le,Pn.lanes|=Ie,Jo|=Ie}ue=ue.next}while(ue!==null&&ue!==E);K===null?P=m:K.next=B,rs(m,l.memoizedState)||(ui=!0),l.memoizedState=m,l.baseState=P,l.baseQueue=K,d.lastRenderedState=m}if(s=d.interleaved,s!==null){x=s;do E=x.lane,Pn.lanes|=E,Jo|=E,x=x.next;while(x!==s)}else x===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Vg(s){var l=Fi(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=d.dispatch,x=d.pending,E=l.memoizedState;if(x!==null){d.pending=null;var P=x=x.next;do E=s(E,P.action),P=P.next;while(P!==x);rs(E,l.memoizedState)||(ui=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),d.lastRenderedState=E}return[E,m]}function Kb(){}function Qb(s,l){var d=Pn,m=Fi(),x=l(),E=!rs(m.memoizedState,x);if(E&&(m.memoizedState=x,ui=!0),m=m.queue,Fg(Jb.bind(null,d,m,s),[s]),m.getSnapshot!==l||E||wr!==null&&wr.memoizedState.tag&1){if(d.flags|=2048,Vu(9,Xb.bind(null,d,m,x,l),void 0,null),_r===null)throw Error(n(349));(Xo&30)!==0||Yb(d,l,x)}return x}function Yb(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=Pn.updateQueue,l===null?(l={lastEffect:null,stores:null},Pn.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function Xb(s,l,d,m){l.value=d,l.getSnapshot=m,Zb(l)&&e2(s)}function Jb(s,l,d){return d(function(){Zb(l)&&e2(s)})}function Zb(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!rs(s,d)}catch{return!0}}function e2(s){var l=pa(s,1);l!==null&&ls(l,s,1,-1)}function t2(s){var l=Cs();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lu,lastRenderedState:s},l.queue=s,s=s.dispatch=E5.bind(null,Pn,s),[l.memoizedState,s]}function Vu(s,l,d,m){return s={tag:s,create:l,destroy:d,deps:m,next:null},l=Pn.updateQueue,l===null?(l={lastEffect:null,stores:null},Pn.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,l.lastEffect=s)),s}function n2(){return Fi().memoizedState}function Xh(s,l,d,m){var x=Cs();Pn.flags|=s,x.memoizedState=Vu(1|l,d,void 0,m===void 0?null:m)}function Jh(s,l,d,m){var x=Fi();m=m===void 0?null:m;var E=void 0;if(dr!==null){var P=dr.memoizedState;if(E=P.destroy,m!==null&&Mg(m,P.deps)){x.memoizedState=Vu(l,d,E,m);return}}Pn.flags|=s,x.memoizedState=Vu(1|l,d,E,m)}function r2(s,l){return Xh(8390656,8,s,l)}function Fg(s,l){return Jh(2048,8,s,l)}function i2(s,l){return Jh(4,2,s,l)}function s2(s,l){return Jh(4,4,s,l)}function a2(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function o2(s,l,d){return d=d!=null?d.concat([s]):null,Jh(4,4,a2.bind(null,l,s),d)}function Ug(){}function l2(s,l){var d=Fi();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Mg(l,m[1])?m[0]:(d.memoizedState=[s,l],s)}function c2(s,l){var d=Fi();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Mg(l,m[1])?m[0]:(s=s(),d.memoizedState=[s,l],s)}function u2(s,l,d){return(Xo&21)===0?(s.baseState&&(s.baseState=!1,ui=!0),s.memoizedState=d):(rs(d,l)||(d=ia(),Pn.lanes|=d,Jo|=d,s.baseState=!0),l)}function w5(s,l){var d=Ot;Ot=d!==0&&4>d?d:4,s(!0);var m=Rg.transition;Rg.transition={};try{s(!1),l()}finally{Ot=d,Rg.transition=m}}function d2(){return Fi().memoizedState}function _5(s,l,d){var m=Za(s);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},h2(s))f2(l,d);else if(d=Bb(s,l,d,m),d!==null){var x=ti();ls(d,s,m,x),p2(d,l,m)}}function E5(s,l,d){var m=Za(s),x={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(h2(s))f2(l,x);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var P=l.lastRenderedState,B=E(P,d);if(x.hasEagerState=!0,x.eagerState=B,rs(B,P)){var K=l.interleaved;K===null?(x.next=x,Ag(l)):(x.next=K.next,K.next=x),l.interleaved=x;return}}catch{}finally{}d=Bb(s,l,x,m),d!==null&&(x=ti(),ls(d,s,m,x),p2(d,l,m))}}function h2(s){var l=s.alternate;return s===Pn||l!==null&&l===Pn}function f2(s,l){Du=Yh=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function p2(s,l,d){if((d&4194240)!==0){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,ws(s,d)}}var Zh={readContext:Vi,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},N5={readContext:Vi,useCallback:function(s,l){return Cs().memoizedState=[s,l===void 0?null:l],s},useContext:Vi,useEffect:r2,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,Xh(4194308,4,a2.bind(null,l,s),d)},useLayoutEffect:function(s,l){return Xh(4194308,4,s,l)},useInsertionEffect:function(s,l){return Xh(4,2,s,l)},useMemo:function(s,l){var d=Cs();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var m=Cs();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},m.queue=s,s=s.dispatch=_5.bind(null,Pn,s),[m.memoizedState,s]},useRef:function(s){var l=Cs();return s={current:s},l.memoizedState=s},useState:t2,useDebugValue:Ug,useDeferredValue:function(s){return Cs().memoizedState=s},useTransition:function(){var s=t2(!1),l=s[0];return s=w5.bind(null,s[1]),Cs().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var m=Pn,x=Cs();if(kn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),_r===null)throw Error(n(349));(Xo&30)!==0||Yb(m,l,d)}x.memoizedState=d;var E={value:d,getSnapshot:l};return x.queue=E,r2(Jb.bind(null,m,E,s),[s]),m.flags|=2048,Vu(9,Xb.bind(null,m,E,d,l),void 0,null),d},useId:function(){var s=Cs(),l=_r.identifierPrefix;if(kn){var d=fa,m=ha;d=(m&~(1<<32-Fn(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=Ou++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=b5++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},k5={readContext:Vi,useCallback:l2,useContext:Vi,useEffect:Fg,useImperativeHandle:o2,useInsertionEffect:i2,useLayoutEffect:s2,useMemo:c2,useReducer:Lg,useRef:n2,useState:function(){return Lg(Lu)},useDebugValue:Ug,useDeferredValue:function(s){var l=Fi();return u2(l,dr.memoizedState,s)},useTransition:function(){var s=Lg(Lu)[0],l=Fi().memoizedState;return[s,l]},useMutableSource:Kb,useSyncExternalStore:Qb,useId:d2,unstable_isNewReconciler:!1},S5={readContext:Vi,useCallback:l2,useContext:Vi,useEffect:Fg,useImperativeHandle:o2,useInsertionEffect:i2,useLayoutEffect:s2,useMemo:c2,useReducer:Vg,useRef:n2,useState:function(){return Vg(Lu)},useDebugValue:Ug,useDeferredValue:function(s){var l=Fi();return dr===null?l.memoizedState=s:u2(l,dr.memoizedState,s)},useTransition:function(){var s=Vg(Lu)[0],l=Fi().memoizedState;return[s,l]},useMutableSource:Kb,useSyncExternalStore:Qb,useId:d2,unstable_isNewReconciler:!1};function ss(s,l){if(s&&s.defaultProps){l=oe({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function $g(s,l,d,m){l=s.memoizedState,d=d(m,l),d=d==null?l:oe({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var ef={isMounted:function(s){return(s=s._reactInternals)?tn(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var m=ti(),x=Za(s),E=ma(m,x);E.payload=l,d!=null&&(E.callback=d),l=Qa(s,E,x),l!==null&&(ls(l,s,x,m),qh(l,s,x))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var m=ti(),x=Za(s),E=ma(m,x);E.tag=1,E.payload=l,d!=null&&(E.callback=d),l=Qa(s,E,x),l!==null&&(ls(l,s,x,m),qh(l,s,x))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=ti(),m=Za(s),x=ma(d,m);x.tag=2,l!=null&&(x.callback=l),l=Qa(s,x,m),l!==null&&(ls(l,s,m,d),qh(l,s,m))}};function m2(s,l,d,m,x,E,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,P):l.prototype&&l.prototype.isPureReactComponent?!Nu(d,m)||!Nu(x,E):!0}function g2(s,l,d){var m=!1,x=qa,E=l.contextType;return typeof E=="object"&&E!==null?E=Vi(E):(x=ci(l)?qo:Vr.current,m=l.contextTypes,E=(m=m!=null)?ic(s,x):qa),l=new l(d,E),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=ef,s.stateNode=l,l._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=E),l}function y2(s,l,d,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==s&&ef.enqueueReplaceState(l,l.state,null)}function zg(s,l,d,m){var x=s.stateNode;x.props=d,x.state=s.memoizedState,x.refs={},Tg(s);var E=l.contextType;typeof E=="object"&&E!==null?x.context=Vi(E):(E=ci(l)?qo:Vr.current,x.context=ic(s,E)),x.state=s.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&($g(s,l,E,d),x.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&ef.enqueueReplaceState(x,x.state,null),Gh(s,d,x,m),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function hc(s,l){try{var d="",m=l;do d+=Te(m),m=m.return;while(m);var x=d}catch(E){x=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:l,stack:x,digest:null}}function Bg(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function Hg(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var A5=typeof WeakMap=="function"?WeakMap:Map;function v2(s,l,d){d=ma(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){lf||(lf=!0,s0=m),Hg(s,l)},d}function x2(s,l,d){d=ma(-1,d),d.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var x=l.value;d.payload=function(){return m(x)},d.callback=function(){Hg(s,l)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){Hg(s,l),typeof m!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var P=l.stack;this.componentDidCatch(l.value,{componentStack:P!==null?P:""})}),d}function b2(s,l,d){var m=s.pingCache;if(m===null){m=s.pingCache=new A5;var x=new Set;m.set(l,x)}else x=m.get(l),x===void 0&&(x=new Set,m.set(l,x));x.has(d)||(x.add(d),s=$5.bind(null,s,l,d),l.then(s,s))}function w2(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function _2(s,l,d,m,x){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=ma(-1,1),l.tag=2,Qa(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var T5=D.ReactCurrentOwner,ui=!1;function ei(s,l,d,m){l.child=s===null?zb(l,null,d,m):lc(l,s.child,d,m)}function E2(s,l,d,m,x){d=d.render;var E=l.ref;return uc(l,x),m=Dg(s,l,d,m,E,x),d=Og(),s!==null&&!ui?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,ga(s,l,x)):(kn&&d&&vg(l),l.flags|=1,ei(s,l,m,x),l.child)}function N2(s,l,d,m,x){if(s===null){var E=d.type;return typeof E=="function"&&!h0(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=E,k2(s,l,E,m,x)):(s=pf(d.type,null,m,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,(s.lanes&x)===0){var P=E.memoizedProps;if(d=d.compare,d=d!==null?d:Nu,d(P,m)&&s.ref===l.ref)return ga(s,l,x)}return l.flags|=1,s=to(E,m),s.ref=l.ref,s.return=l,l.child=s}function k2(s,l,d,m,x){if(s!==null){var E=s.memoizedProps;if(Nu(E,m)&&s.ref===l.ref)if(ui=!1,l.pendingProps=m=E,(s.lanes&x)!==0)(s.flags&131072)!==0&&(ui=!0);else return l.lanes=s.lanes,ga(s,l,x)}return Wg(s,l,d,m,x)}function S2(s,l,d){var m=l.pendingProps,x=m.children,E=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},mn(pc,Si),Si|=d;else{if((d&1073741824)===0)return s=E!==null?E.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,mn(pc,Si),Si|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=E!==null?E.baseLanes:d,mn(pc,Si),Si|=m}else E!==null?(m=E.baseLanes|d,l.memoizedState=null):m=d,mn(pc,Si),Si|=m;return ei(s,l,x,d),l.child}function A2(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Wg(s,l,d,m,x){var E=ci(d)?qo:Vr.current;return E=ic(l,E),uc(l,x),d=Dg(s,l,d,m,E,x),m=Og(),s!==null&&!ui?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~x,ga(s,l,x)):(kn&&m&&vg(l),l.flags|=1,ei(s,l,d,x),l.child)}function T2(s,l,d,m,x){if(ci(d)){var E=!0;Vh(l)}else E=!1;if(uc(l,x),l.stateNode===null)nf(s,l),g2(l,d,m),zg(l,d,m,x),m=!0;else if(s===null){var P=l.stateNode,B=l.memoizedProps;P.props=B;var K=P.context,ue=d.contextType;typeof ue=="object"&&ue!==null?ue=Vi(ue):(ue=ci(d)?qo:Vr.current,ue=ic(l,ue));var Ie=d.getDerivedStateFromProps,Le=typeof Ie=="function"||typeof P.getSnapshotBeforeUpdate=="function";Le||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(B!==m||K!==ue)&&y2(l,P,m,ue),Ka=!1;var Ce=l.memoizedState;P.state=Ce,Gh(l,m,P,x),K=l.memoizedState,B!==m||Ce!==K||li.current||Ka?(typeof Ie=="function"&&($g(l,d,Ie,m),K=l.memoizedState),(B=Ka||m2(l,d,B,m,Ce,K,ue))?(Le||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(l.flags|=4194308)):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=K),P.props=m,P.state=K,P.context=ue,m=B):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{P=l.stateNode,Hb(s,l),B=l.memoizedProps,ue=l.type===l.elementType?B:ss(l.type,B),P.props=ue,Le=l.pendingProps,Ce=P.context,K=d.contextType,typeof K=="object"&&K!==null?K=Vi(K):(K=ci(d)?qo:Vr.current,K=ic(l,K));var et=d.getDerivedStateFromProps;(Ie=typeof et=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(B!==Le||Ce!==K)&&y2(l,P,m,K),Ka=!1,Ce=l.memoizedState,P.state=Ce,Gh(l,m,P,x);var st=l.memoizedState;B!==Le||Ce!==st||li.current||Ka?(typeof et=="function"&&($g(l,d,et,m),st=l.memoizedState),(ue=Ka||m2(l,d,ue,m,Ce,st,K)||!1)?(Ie||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,st,K),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,st,K)),typeof P.componentDidUpdate=="function"&&(l.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof P.componentDidUpdate!="function"||B===s.memoizedProps&&Ce===s.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&Ce===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=st),P.props=m,P.state=st,P.context=K,m=ue):(typeof P.componentDidUpdate!="function"||B===s.memoizedProps&&Ce===s.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&Ce===s.memoizedState||(l.flags|=1024),m=!1)}return qg(s,l,d,m,E,x)}function qg(s,l,d,m,x,E){A2(s,l);var P=(l.flags&128)!==0;if(!m&&!P)return x&&Rb(l,d,!1),ga(s,l,E);m=l.stateNode,T5.current=l;var B=P&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,s!==null&&P?(l.child=lc(l,s.child,null,E),l.child=lc(l,null,B,E)):ei(s,l,B,E),l.memoizedState=m.state,x&&Rb(l,d,!0),l.child}function C2(s){var l=s.stateNode;l.pendingContext?Ib(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Ib(s,l.context,!1),Cg(s,l.containerInfo)}function j2(s,l,d,m,x){return oc(),_g(x),l.flags|=256,ei(s,l,d,m),l.child}var Gg={dehydrated:null,treeContext:null,retryLane:0};function Kg(s){return{baseLanes:s,cachePool:null,transitions:null}}function I2(s,l,d){var m=l.pendingProps,x=In.current,E=!1,P=(l.flags&128)!==0,B;if((B=P)||(B=s!==null&&s.memoizedState===null?!1:(x&2)!==0),B?(E=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),mn(In,x&1),s===null)return wg(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(P=m.children,s=m.fallback,E?(m=l.mode,E=l.child,P={mode:"hidden",children:P},(m&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=P):E=mf(P,m,0,null),s=nl(s,m,d,null),E.return=l,s.return=l,E.sibling=s,l.child=E,l.child.memoizedState=Kg(d),l.memoizedState=Gg,s):Qg(l,P));if(x=s.memoizedState,x!==null&&(B=x.dehydrated,B!==null))return C5(s,l,P,m,B,x,d);if(E){E=m.fallback,P=l.mode,x=s.child,B=x.sibling;var K={mode:"hidden",children:m.children};return(P&1)===0&&l.child!==x?(m=l.child,m.childLanes=0,m.pendingProps=K,l.deletions=null):(m=to(x,K),m.subtreeFlags=x.subtreeFlags&14680064),B!==null?E=to(B,E):(E=nl(E,P,d,null),E.flags|=2),E.return=l,m.return=l,m.sibling=E,l.child=m,m=E,E=l.child,P=s.child.memoizedState,P=P===null?Kg(d):{baseLanes:P.baseLanes|d,cachePool:null,transitions:P.transitions},E.memoizedState=P,E.childLanes=s.childLanes&~d,l.memoizedState=Gg,m}return E=s.child,s=E.sibling,m=to(E,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=d),m.return=l,m.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=m,l.memoizedState=null,m}function Qg(s,l){return l=mf({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function tf(s,l,d,m){return m!==null&&_g(m),lc(l,s.child,null,d),s=Qg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function C5(s,l,d,m,x,E,P){if(d)return l.flags&256?(l.flags&=-257,m=Bg(Error(n(422))),tf(s,l,P,m)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(E=m.fallback,x=l.mode,m=mf({mode:"visible",children:m.children},x,0,null),E=nl(E,x,P,null),E.flags|=2,m.return=l,E.return=l,m.sibling=E,l.child=m,(l.mode&1)!==0&&lc(l,s.child,null,P),l.child.memoizedState=Kg(P),l.memoizedState=Gg,E);if((l.mode&1)===0)return tf(s,l,P,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var B=m.dgst;return m=B,E=Error(n(419)),m=Bg(E,m,void 0),tf(s,l,P,m)}if(B=(P&s.childLanes)!==0,ui||B){if(m=_r,m!==null){switch(P&-P){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|P))!==0?0:x,x!==0&&x!==E.retryLane&&(E.retryLane=x,pa(s,x),ls(m,s,x,-1))}return d0(),m=Bg(Error(n(421))),tf(s,l,P,m)}return x.data==="$?"?(l.flags|=128,l.child=s.child,l=z5.bind(null,s),x._reactRetry=l,null):(s=E.treeContext,ki=Ha(x.nextSibling),Ni=l,kn=!0,is=null,s!==null&&(Oi[Li++]=ha,Oi[Li++]=fa,Oi[Li++]=Go,ha=s.id,fa=s.overflow,Go=l),l=Qg(l,m.children),l.flags|=4096,l)}function P2(s,l,d){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),Sg(s.return,l,d)}function Yg(s,l,d,m,x){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:x}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=d,E.tailMode=x)}function R2(s,l,d){var m=l.pendingProps,x=m.revealOrder,E=m.tail;if(ei(s,l,m.children,d),m=In.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&P2(s,d,l);else if(s.tag===19)P2(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(mn(In,m),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(d=l.child,x=null;d!==null;)s=d.alternate,s!==null&&Kh(s)===null&&(x=d),d=d.sibling;d=x,d===null?(x=l.child,l.child=null):(x=d.sibling,d.sibling=null),Yg(l,!1,x,d,E);break;case"backwards":for(d=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Kh(s)===null){l.child=x;break}s=x.sibling,x.sibling=d,d=x,x=s}Yg(l,!0,d,null,E);break;case"together":Yg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function nf(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function ga(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Jo|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=to(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=to(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function j5(s,l,d){switch(l.tag){case 3:C2(l),oc();break;case 5:Gb(l);break;case 1:ci(l.type)&&Vh(l);break;case 4:Cg(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,x=l.memoizedProps.value;mn(Hh,m._currentValue),m._currentValue=x;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(mn(In,In.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?I2(s,l,d):(mn(In,In.current&1),s=ga(s,l,d),s!==null?s.sibling:null);mn(In,In.current&1);break;case 19:if(m=(d&l.childLanes)!==0,(s.flags&128)!==0){if(m)return R2(s,l,d);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),mn(In,In.current),m)break;return null;case 22:case 23:return l.lanes=0,S2(s,l,d)}return ga(s,l,d)}var M2,Xg,D2,O2;M2=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Xg=function(){},D2=function(s,l,d,m){var x=s.memoizedProps;if(x!==m){s=l.stateNode,Yo(Ts.current);var E=null;switch(d){case"input":x=Dt(s,x),m=Dt(s,m),E=[];break;case"select":x=oe({},x,{value:void 0}),m=oe({},m,{value:void 0}),E=[];break;case"textarea":x=be(s,x),m=be(s,m),E=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Dh)}jn(d,m);var P;d=null;for(ue in x)if(!m.hasOwnProperty(ue)&&x.hasOwnProperty(ue)&&x[ue]!=null)if(ue==="style"){var B=x[ue];for(P in B)B.hasOwnProperty(P)&&(d||(d={}),d[P]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(i.hasOwnProperty(ue)?E||(E=[]):(E=E||[]).push(ue,null));for(ue in m){var K=m[ue];if(B=x!=null?x[ue]:void 0,m.hasOwnProperty(ue)&&K!==B&&(K!=null||B!=null))if(ue==="style")if(B){for(P in B)!B.hasOwnProperty(P)||K&&K.hasOwnProperty(P)||(d||(d={}),d[P]="");for(P in K)K.hasOwnProperty(P)&&B[P]!==K[P]&&(d||(d={}),d[P]=K[P])}else d||(E||(E=[]),E.push(ue,d)),d=K;else ue==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,B=B?B.__html:void 0,K!=null&&B!==K&&(E=E||[]).push(ue,K)):ue==="children"?typeof K!="string"&&typeof K!="number"||(E=E||[]).push(ue,""+K):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(i.hasOwnProperty(ue)?(K!=null&&ue==="onScroll"&&xn("scroll",s),E||B===K||(E=[])):(E=E||[]).push(ue,K))}d&&(E=E||[]).push("style",d);var ue=E;(l.updateQueue=ue)&&(l.flags|=4)}},O2=function(s,l,d,m){d!==m&&(l.flags|=4)};function Fu(s,l){if(!kn)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Ur(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(l)for(var x=s.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=m,s.childLanes=d,l}function I5(s,l,d){var m=l.pendingProps;switch(xg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(l),null;case 1:return ci(l.type)&&Lh(),Ur(l),null;case 3:return m=l.stateNode,dc(),bn(li),bn(Vr),Pg(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(zh(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,is!==null&&(l0(is),is=null))),Xg(s,l),Ur(l),null;case 5:jg(l);var x=Yo(Mu.current);if(d=l.type,s!==null&&l.stateNode!=null)D2(s,l,d,m,x),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(n(166));return Ur(l),null}if(s=Yo(Ts.current),zh(l)){m=l.stateNode,d=l.type;var E=l.memoizedProps;switch(m[As]=l,m[Cu]=E,s=(l.mode&1)!==0,d){case"dialog":xn("cancel",m),xn("close",m);break;case"iframe":case"object":case"embed":xn("load",m);break;case"video":case"audio":for(x=0;x<Su.length;x++)xn(Su[x],m);break;case"source":xn("error",m);break;case"img":case"image":case"link":xn("error",m),xn("load",m);break;case"details":xn("toggle",m);break;case"input":re(m,E),xn("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!E.multiple},xn("invalid",m);break;case"textarea":Qe(m,E),xn("invalid",m)}jn(d,E),x=null;for(var P in E)if(E.hasOwnProperty(P)){var B=E[P];P==="children"?typeof B=="string"?m.textContent!==B&&(E.suppressHydrationWarning!==!0&&Mh(m.textContent,B,s),x=["children",B]):typeof B=="number"&&m.textContent!==""+B&&(E.suppressHydrationWarning!==!0&&Mh(m.textContent,B,s),x=["children",""+B]):i.hasOwnProperty(P)&&B!=null&&P==="onScroll"&&xn("scroll",m)}switch(d){case"input":kt(m),ge(m,E,!0);break;case"textarea":kt(m),Y(m);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(m.onclick=Dh)}m=x,l.updateQueue=m,m!==null&&(l.flags|=4)}else{P=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=pe(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=P.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=P.createElement(d,{is:m.is}):(s=P.createElement(d),d==="select"&&(P=s,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):s=P.createElementNS(s,d),s[As]=l,s[Cu]=m,M2(s,l,!1,!1),l.stateNode=s;e:{switch(P=Ln(d,m),d){case"dialog":xn("cancel",s),xn("close",s),x=m;break;case"iframe":case"object":case"embed":xn("load",s),x=m;break;case"video":case"audio":for(x=0;x<Su.length;x++)xn(Su[x],s);x=m;break;case"source":xn("error",s),x=m;break;case"img":case"image":case"link":xn("error",s),xn("load",s),x=m;break;case"details":xn("toggle",s),x=m;break;case"input":re(s,m),x=Dt(s,m),xn("invalid",s);break;case"option":x=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},x=oe({},m,{value:void 0}),xn("invalid",s);break;case"textarea":Qe(s,m),x=be(s,m),xn("invalid",s);break;default:x=m}jn(d,x),B=x;for(E in B)if(B.hasOwnProperty(E)){var K=B[E];E==="style"?Xt(s,K):E==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&Ue(s,K)):E==="children"?typeof K=="string"?(d!=="textarea"||K!=="")&&ke(s,K):typeof K=="number"&&ke(s,""+K):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?K!=null&&E==="onScroll"&&xn("scroll",s):K!=null&&L(s,E,K,P))}switch(d){case"input":kt(s),ge(s,m,!1);break;case"textarea":kt(s),Y(s);break;case"option":m.value!=null&&s.setAttribute("value",""+rt(m.value));break;case"select":s.multiple=!!m.multiple,E=m.value,E!=null?xt(s,!!m.multiple,E,!1):m.defaultValue!=null&&xt(s,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Dh)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ur(l),null;case 6:if(s&&l.stateNode!=null)O2(s,l,s.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(n(166));if(d=Yo(Mu.current),Yo(Ts.current),zh(l)){if(m=l.stateNode,d=l.memoizedProps,m[As]=l,(E=m.nodeValue!==d)&&(s=Ni,s!==null))switch(s.tag){case 3:Mh(m.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Mh(m.nodeValue,d,(s.mode&1)!==0)}E&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[As]=l,l.stateNode=m}return Ur(l),null;case 13:if(bn(In),m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(kn&&ki!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Fb(),oc(),l.flags|=98560,E=!1;else if(E=zh(l),m!==null&&m.dehydrated!==null){if(s===null){if(!E)throw Error(n(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[As]=l}else oc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ur(l),E=!1}else is!==null&&(l0(is),is=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(In.current&1)!==0?hr===0&&(hr=3):d0())),l.updateQueue!==null&&(l.flags|=4),Ur(l),null);case 4:return dc(),Xg(s,l),s===null&&Au(l.stateNode.containerInfo),Ur(l),null;case 10:return kg(l.type._context),Ur(l),null;case 17:return ci(l.type)&&Lh(),Ur(l),null;case 19:if(bn(In),E=l.memoizedState,E===null)return Ur(l),null;if(m=(l.flags&128)!==0,P=E.rendering,P===null)if(m)Fu(E,!1);else{if(hr!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(P=Kh(s),P!==null){for(l.flags|=128,Fu(E,!1),m=P.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)E=d,s=m,E.flags&=14680066,P=E.alternate,P===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=P.childLanes,E.lanes=P.lanes,E.child=P.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=P.memoizedProps,E.memoizedState=P.memoizedState,E.updateQueue=P.updateQueue,E.type=P.type,s=P.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return mn(In,In.current&1|2),l.child}s=s.sibling}E.tail!==null&&on()>mc&&(l.flags|=128,m=!0,Fu(E,!1),l.lanes=4194304)}else{if(!m)if(s=Kh(P),s!==null){if(l.flags|=128,m=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Fu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!kn)return Ur(l),null}else 2*on()-E.renderingStartTime>mc&&d!==1073741824&&(l.flags|=128,m=!0,Fu(E,!1),l.lanes=4194304);E.isBackwards?(P.sibling=l.child,l.child=P):(d=E.last,d!==null?d.sibling=P:l.child=P,E.last=P)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=on(),l.sibling=null,d=In.current,mn(In,m?d&1|2:d&1),l):(Ur(l),null);case 22:case 23:return u0(),m=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(Si&1073741824)!==0&&(Ur(l),l.subtreeFlags&6&&(l.flags|=8192)):Ur(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function P5(s,l){switch(xg(l),l.tag){case 1:return ci(l.type)&&Lh(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return dc(),bn(li),bn(Vr),Pg(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return jg(l),null;case 13:if(bn(In),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));oc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return bn(In),null;case 4:return dc(),null;case 10:return kg(l.type._context),null;case 22:case 23:return u0(),null;case 24:return null;default:return null}}var rf=!1,$r=!1,R5=typeof WeakSet=="function"?WeakSet:Set,nt=null;function fc(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){zn(s,l,m)}else d.current=null}function Jg(s,l,d){try{d()}catch(m){zn(s,l,m)}}var L2=!1;function M5(s,l){if(ug=$a,s=mb(),ng(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var P=0,B=-1,K=-1,ue=0,Ie=0,Le=s,Ce=null;t:for(;;){for(var et;Le!==d||x!==0&&Le.nodeType!==3||(B=P+x),Le!==E||m!==0&&Le.nodeType!==3||(K=P+m),Le.nodeType===3&&(P+=Le.nodeValue.length),(et=Le.firstChild)!==null;)Ce=Le,Le=et;for(;;){if(Le===s)break t;if(Ce===d&&++ue===x&&(B=P),Ce===E&&++Ie===m&&(K=P),(et=Le.nextSibling)!==null)break;Le=Ce,Ce=Le.parentNode}Le=et}d=B===-1||K===-1?null:{start:B,end:K}}else d=null}d=d||{start:0,end:0}}else d=null;for(dg={focusedElem:s,selectionRange:d},$a=!1,nt=l;nt!==null;)if(l=nt,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,nt=s;else for(;nt!==null;){l=nt;try{var st=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(st!==null){var lt=st.memoizedProps,Kn=st.memoizedState,ee=l.stateNode,Q=ee.getSnapshotBeforeUpdate(l.elementType===l.type?lt:ss(l.type,lt),Kn);ee.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ie=l.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Fe){zn(l,l.return,Fe)}if(s=l.sibling,s!==null){s.return=l.return,nt=s;break}nt=l.return}return st=L2,L2=!1,st}function Uu(s,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&s)===s){var E=x.destroy;x.destroy=void 0,E!==void 0&&Jg(l,d,E)}x=x.next}while(x!==m)}}function sf(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function Zg(s){var l=s.ref;if(l!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof l=="function"?l(s):l.current=s}}function V2(s){var l=s.alternate;l!==null&&(s.alternate=null,V2(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[As],delete l[Cu],delete l[mg],delete l[g5],delete l[y5])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function F2(s){return s.tag===5||s.tag===3||s.tag===4}function U2(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||F2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function e0(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Dh));else if(m!==4&&(s=s.child,s!==null))for(e0(s,l,d),s=s.sibling;s!==null;)e0(s,l,d),s=s.sibling}function t0(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(t0(s,l,d),s=s.sibling;s!==null;)t0(s,l,d),s=s.sibling}var Tr=null,as=!1;function Ya(s,l,d){for(d=d.child;d!==null;)$2(s,l,d),d=d.sibling}function $2(s,l,d){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Yr,d)}catch{}switch(d.tag){case 5:$r||fc(d,l);case 6:var m=Tr,x=as;Tr=null,Ya(s,l,d),Tr=m,as=x,Tr!==null&&(as?(s=Tr,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Tr.removeChild(d.stateNode));break;case 18:Tr!==null&&(as?(s=Tr,d=d.stateNode,s.nodeType===8?pg(s.parentNode,d):s.nodeType===1&&pg(s,d),ts(s)):pg(Tr,d.stateNode));break;case 4:m=Tr,x=as,Tr=d.stateNode.containerInfo,as=!0,Ya(s,l,d),Tr=m,as=x;break;case 0:case 11:case 14:case 15:if(!$r&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var E=x,P=E.destroy;E=E.tag,P!==void 0&&((E&2)!==0||(E&4)!==0)&&Jg(d,l,P),x=x.next}while(x!==m)}Ya(s,l,d);break;case 1:if(!$r&&(fc(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(B){zn(d,l,B)}Ya(s,l,d);break;case 21:Ya(s,l,d);break;case 22:d.mode&1?($r=(m=$r)||d.memoizedState!==null,Ya(s,l,d),$r=m):Ya(s,l,d);break;default:Ya(s,l,d)}}function z2(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new R5),l.forEach(function(m){var x=B5.bind(null,s,m);d.has(m)||(d.add(m),m.then(x,x))})}}function os(s,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];try{var E=s,P=l,B=P;e:for(;B!==null;){switch(B.tag){case 5:Tr=B.stateNode,as=!1;break e;case 3:Tr=B.stateNode.containerInfo,as=!0;break e;case 4:Tr=B.stateNode.containerInfo,as=!0;break e}B=B.return}if(Tr===null)throw Error(n(160));$2(E,P,x),Tr=null,as=!1;var K=x.alternate;K!==null&&(K.return=null),x.return=null}catch(ue){zn(x,l,ue)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)B2(l,s),l=l.sibling}function B2(s,l){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(os(l,s),js(s),m&4){try{Uu(3,s,s.return),sf(3,s)}catch(lt){zn(s,s.return,lt)}try{Uu(5,s,s.return)}catch(lt){zn(s,s.return,lt)}}break;case 1:os(l,s),js(s),m&512&&d!==null&&fc(d,d.return);break;case 5:if(os(l,s),js(s),m&512&&d!==null&&fc(d,d.return),s.flags&32){var x=s.stateNode;try{ke(x,"")}catch(lt){zn(s,s.return,lt)}}if(m&4&&(x=s.stateNode,x!=null)){var E=s.memoizedProps,P=d!==null?d.memoizedProps:E,B=s.type,K=s.updateQueue;if(s.updateQueue=null,K!==null)try{B==="input"&&E.type==="radio"&&E.name!=null&&qe(x,E),Ln(B,P);var ue=Ln(B,E);for(P=0;P<K.length;P+=2){var Ie=K[P],Le=K[P+1];Ie==="style"?Xt(x,Le):Ie==="dangerouslySetInnerHTML"?Ue(x,Le):Ie==="children"?ke(x,Le):L(x,Ie,Le,ue)}switch(B){case"input":Se(x,E);break;case"textarea":_e(x,E);break;case"select":var Ce=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!E.multiple;var et=E.value;et!=null?xt(x,!!E.multiple,et,!1):Ce!==!!E.multiple&&(E.defaultValue!=null?xt(x,!!E.multiple,E.defaultValue,!0):xt(x,!!E.multiple,E.multiple?[]:"",!1))}x[Cu]=E}catch(lt){zn(s,s.return,lt)}}break;case 6:if(os(l,s),js(s),m&4){if(s.stateNode===null)throw Error(n(162));x=s.stateNode,E=s.memoizedProps;try{x.nodeValue=E}catch(lt){zn(s,s.return,lt)}}break;case 3:if(os(l,s),js(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ts(l.containerInfo)}catch(lt){zn(s,s.return,lt)}break;case 4:os(l,s),js(s);break;case 13:os(l,s),js(s),x=s.child,x.flags&8192&&(E=x.memoizedState!==null,x.stateNode.isHidden=E,!E||x.alternate!==null&&x.alternate.memoizedState!==null||(i0=on())),m&4&&z2(s);break;case 22:if(Ie=d!==null&&d.memoizedState!==null,s.mode&1?($r=(ue=$r)||Ie,os(l,s),$r=ue):os(l,s),js(s),m&8192){if(ue=s.memoizedState!==null,(s.stateNode.isHidden=ue)&&!Ie&&(s.mode&1)!==0)for(nt=s,Ie=s.child;Ie!==null;){for(Le=nt=Ie;nt!==null;){switch(Ce=nt,et=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:Uu(4,Ce,Ce.return);break;case 1:fc(Ce,Ce.return);var st=Ce.stateNode;if(typeof st.componentWillUnmount=="function"){m=Ce,d=Ce.return;try{l=m,st.props=l.memoizedProps,st.state=l.memoizedState,st.componentWillUnmount()}catch(lt){zn(m,d,lt)}}break;case 5:fc(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){q2(Le);continue}}et!==null?(et.return=Ce,nt=et):q2(Le)}Ie=Ie.sibling}e:for(Ie=null,Le=s;;){if(Le.tag===5){if(Ie===null){Ie=Le;try{x=Le.stateNode,ue?(E=x.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(B=Le.stateNode,K=Le.memoizedProps.style,P=K!=null&&K.hasOwnProperty("display")?K.display:null,B.style.display=dt("display",P))}catch(lt){zn(s,s.return,lt)}}}else if(Le.tag===6){if(Ie===null)try{Le.stateNode.nodeValue=ue?"":Le.memoizedProps}catch(lt){zn(s,s.return,lt)}}else if((Le.tag!==22&&Le.tag!==23||Le.memoizedState===null||Le===s)&&Le.child!==null){Le.child.return=Le,Le=Le.child;continue}if(Le===s)break e;for(;Le.sibling===null;){if(Le.return===null||Le.return===s)break e;Ie===Le&&(Ie=null),Le=Le.return}Ie===Le&&(Ie=null),Le.sibling.return=Le.return,Le=Le.sibling}}break;case 19:os(l,s),js(s),m&4&&z2(s);break;case 21:break;default:os(l,s),js(s)}}function js(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(F2(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(ke(x,""),m.flags&=-33);var E=U2(s);t0(s,E,x);break;case 3:case 4:var P=m.stateNode.containerInfo,B=U2(s);e0(s,B,P);break;default:throw Error(n(161))}}catch(K){zn(s,s.return,K)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function D5(s,l,d){nt=s,H2(s)}function H2(s,l,d){for(var m=(s.mode&1)!==0;nt!==null;){var x=nt,E=x.child;if(x.tag===22&&m){var P=x.memoizedState!==null||rf;if(!P){var B=x.alternate,K=B!==null&&B.memoizedState!==null||$r;B=rf;var ue=$r;if(rf=P,($r=K)&&!ue)for(nt=x;nt!==null;)P=nt,K=P.child,P.tag===22&&P.memoizedState!==null?G2(x):K!==null?(K.return=P,nt=K):G2(x);for(;E!==null;)nt=E,H2(E),E=E.sibling;nt=x,rf=B,$r=ue}W2(s)}else(x.subtreeFlags&8772)!==0&&E!==null?(E.return=x,nt=E):W2(s)}}function W2(s){for(;nt!==null;){var l=nt;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:$r||sf(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!$r)if(d===null)m.componentDidMount();else{var x=l.elementType===l.type?d.memoizedProps:ss(l.type,d.memoizedProps);m.componentDidUpdate(x,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&qb(l,E,m);break;case 3:var P=l.updateQueue;if(P!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}qb(l,P,d)}break;case 5:var B=l.stateNode;if(d===null&&l.flags&4){d=B;var K=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&d.focus();break;case"img":K.src&&(d.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ue=l.alternate;if(ue!==null){var Ie=ue.memoizedState;if(Ie!==null){var Le=Ie.dehydrated;Le!==null&&ts(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$r||l.flags&512&&Zg(l)}catch(Ce){zn(l,l.return,Ce)}}if(l===s){nt=null;break}if(d=l.sibling,d!==null){d.return=l.return,nt=d;break}nt=l.return}}function q2(s){for(;nt!==null;){var l=nt;if(l===s){nt=null;break}var d=l.sibling;if(d!==null){d.return=l.return,nt=d;break}nt=l.return}}function G2(s){for(;nt!==null;){var l=nt;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{sf(4,l)}catch(K){zn(l,d,K)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var x=l.return;try{m.componentDidMount()}catch(K){zn(l,x,K)}}var E=l.return;try{Zg(l)}catch(K){zn(l,E,K)}break;case 5:var P=l.return;try{Zg(l)}catch(K){zn(l,P,K)}}}catch(K){zn(l,l.return,K)}if(l===s){nt=null;break}var B=l.sibling;if(B!==null){B.return=l.return,nt=B;break}nt=l.return}}var O5=Math.ceil,af=D.ReactCurrentDispatcher,n0=D.ReactCurrentOwner,Ui=D.ReactCurrentBatchConfig,qt=0,_r=null,nr=null,Cr=0,Si=0,pc=Wa(0),hr=0,$u=null,Jo=0,of=0,r0=0,zu=null,di=null,i0=0,mc=1/0,ya=null,lf=!1,s0=null,Xa=null,cf=!1,Ja=null,uf=0,Bu=0,a0=null,df=-1,hf=0;function ti(){return(qt&6)!==0?on():df!==-1?df:df=on()}function Za(s){return(s.mode&1)===0?1:(qt&2)!==0&&Cr!==0?Cr&-Cr:x5.transition!==null?(hf===0&&(hf=ia()),hf):(s=Ot,s!==0||(s=window.event,s=s===void 0?16:yu(s.type)),s)}function ls(s,l,d,m){if(50<Bu)throw Bu=0,a0=null,Error(n(185));bs(s,d,m),((qt&2)===0||s!==_r)&&(s===_r&&((qt&2)===0&&(of|=d),hr===4&&eo(s,Cr)),hi(s,m),d===1&&qt===0&&(l.mode&1)===0&&(mc=on()+500,Fh&&Ga()))}function hi(s,l){var d=s.callbackNode;Ji(s,l);var m=ra(s,s===_r?Cr:0);if(m===0)d!==null&&Xi(d),s.callbackNode=null,s.callbackPriority=0;else if(l=m&-m,s.callbackPriority!==l){if(d!=null&&Xi(d),l===1)s.tag===0?v5(Q2.bind(null,s)):Mb(Q2.bind(null,s)),p5(function(){(qt&6)===0&&Ga()}),d=null;else{switch(_s(m)){case 1:d=vs;break;case 4:d=ai;break;case 16:d=Qr;break;case 536870912:d=Fl;break;default:d=Qr}d=rw(d,K2.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function K2(s,l){if(df=-1,hf=0,(qt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(gc()&&s.callbackNode!==d)return null;var m=ra(s,s===_r?Cr:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||l)l=ff(s,m);else{l=m;var x=qt;qt|=2;var E=X2();(_r!==s||Cr!==l)&&(ya=null,mc=on()+500,el(s,l));do try{F5();break}catch(B){Y2(s,B)}while(!0);Ng(),af.current=E,qt=x,nr!==null?l=0:(_r=null,Cr=0,l=hr)}if(l!==0){if(l===2&&(x=Jr(s),x!==0&&(m=x,l=o0(s,x))),l===1)throw d=$u,el(s,0),eo(s,m),hi(s,on()),d;if(l===6)eo(s,m);else{if(x=s.current.alternate,(m&30)===0&&!L5(x)&&(l=ff(s,m),l===2&&(E=Jr(s),E!==0&&(m=E,l=o0(s,E))),l===1))throw d=$u,el(s,0),eo(s,m),hi(s,on()),d;switch(s.finishedWork=x,s.finishedLanes=m,l){case 0:case 1:throw Error(n(345));case 2:tl(s,di,ya);break;case 3:if(eo(s,m),(m&130023424)===m&&(l=i0+500-on(),10<l)){if(ra(s,0)!==0)break;if(x=s.suspendedLanes,(x&m)!==m){ti(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=fg(tl.bind(null,s,di,ya),l);break}tl(s,di,ya);break;case 4:if(eo(s,m),(m&4194240)===m)break;for(l=s.eventTimes,x=-1;0<m;){var P=31-Fn(m);E=1<<P,P=l[P],P>x&&(x=P),m&=~E}if(m=x,m=on()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*O5(m/1960))-m,10<m){s.timeoutHandle=fg(tl.bind(null,s,di,ya),m);break}tl(s,di,ya);break;case 5:tl(s,di,ya);break;default:throw Error(n(329))}}}return hi(s,on()),s.callbackNode===d?K2.bind(null,s):null}function o0(s,l){var d=zu;return s.current.memoizedState.isDehydrated&&(el(s,l).flags|=256),s=ff(s,l),s!==2&&(l=di,di=d,l!==null&&l0(l)),s}function l0(s){di===null?di=s:di.push.apply(di,s)}function L5(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var x=d[m],E=x.getSnapshot;x=x.value;try{if(!rs(E(),x))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function eo(s,l){for(l&=~r0,l&=~of,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-Fn(l),m=1<<d;s[d]=-1,l&=~m}}function Q2(s){if((qt&6)!==0)throw Error(n(327));gc();var l=ra(s,0);if((l&1)===0)return hi(s,on()),null;var d=ff(s,l);if(s.tag!==0&&d===2){var m=Jr(s);m!==0&&(l=m,d=o0(s,m))}if(d===1)throw d=$u,el(s,0),eo(s,l),hi(s,on()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,tl(s,di,ya),hi(s,on()),null}function c0(s,l){var d=qt;qt|=1;try{return s(l)}finally{qt=d,qt===0&&(mc=on()+500,Fh&&Ga())}}function Zo(s){Ja!==null&&Ja.tag===0&&(qt&6)===0&&gc();var l=qt;qt|=1;var d=Ui.transition,m=Ot;try{if(Ui.transition=null,Ot=1,s)return s()}finally{Ot=m,Ui.transition=d,qt=l,(qt&6)===0&&Ga()}}function u0(){Si=pc.current,bn(pc)}function el(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,f5(d)),nr!==null)for(d=nr.return;d!==null;){var m=d;switch(xg(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Lh();break;case 3:dc(),bn(li),bn(Vr),Pg();break;case 5:jg(m);break;case 4:dc();break;case 13:bn(In);break;case 19:bn(In);break;case 10:kg(m.type._context);break;case 22:case 23:u0()}d=d.return}if(_r=s,nr=s=to(s.current,null),Cr=Si=l,hr=0,$u=null,r0=of=Jo=0,di=zu=null,Qo!==null){for(l=0;l<Qo.length;l++)if(d=Qo[l],m=d.interleaved,m!==null){d.interleaved=null;var x=m.next,E=d.pending;if(E!==null){var P=E.next;E.next=x,m.next=P}d.pending=m}Qo=null}return s}function Y2(s,l){do{var d=nr;try{if(Ng(),Qh.current=Zh,Yh){for(var m=Pn.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}Yh=!1}if(Xo=0,wr=dr=Pn=null,Du=!1,Ou=0,n0.current=null,d===null||d.return===null){hr=1,$u=l,nr=null;break}e:{var E=s,P=d.return,B=d,K=l;if(l=Cr,B.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ue=K,Ie=B,Le=Ie.tag;if((Ie.mode&1)===0&&(Le===0||Le===11||Le===15)){var Ce=Ie.alternate;Ce?(Ie.updateQueue=Ce.updateQueue,Ie.memoizedState=Ce.memoizedState,Ie.lanes=Ce.lanes):(Ie.updateQueue=null,Ie.memoizedState=null)}var et=w2(P);if(et!==null){et.flags&=-257,_2(et,P,B,E,l),et.mode&1&&b2(E,ue,l),l=et,K=ue;var st=l.updateQueue;if(st===null){var lt=new Set;lt.add(K),l.updateQueue=lt}else st.add(K);break e}else{if((l&1)===0){b2(E,ue,l),d0();break e}K=Error(n(426))}}else if(kn&&B.mode&1){var Kn=w2(P);if(Kn!==null){(Kn.flags&65536)===0&&(Kn.flags|=256),_2(Kn,P,B,E,l),_g(hc(K,B));break e}}E=K=hc(K,B),hr!==4&&(hr=2),zu===null?zu=[E]:zu.push(E),E=P;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var ee=v2(E,K,l);Wb(E,ee);break e;case 1:B=K;var Q=E.type,ie=E.stateNode;if((E.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Xa===null||!Xa.has(ie)))){E.flags|=65536,l&=-l,E.lanes|=l;var Fe=x2(E,B,l);Wb(E,Fe);break e}}E=E.return}while(E!==null)}Z2(d)}catch(ut){l=ut,nr===d&&d!==null&&(nr=d=d.return);continue}break}while(!0)}function X2(){var s=af.current;return af.current=Zh,s===null?Zh:s}function d0(){(hr===0||hr===3||hr===2)&&(hr=4),_r===null||(Jo&268435455)===0&&(of&268435455)===0||eo(_r,Cr)}function ff(s,l){var d=qt;qt|=2;var m=X2();(_r!==s||Cr!==l)&&(ya=null,el(s,l));do try{V5();break}catch(x){Y2(s,x)}while(!0);if(Ng(),qt=d,af.current=m,nr!==null)throw Error(n(261));return _r=null,Cr=0,hr}function V5(){for(;nr!==null;)J2(nr)}function F5(){for(;nr!==null&&!Vl();)J2(nr)}function J2(s){var l=nw(s.alternate,s,Si);s.memoizedProps=s.pendingProps,l===null?Z2(s):nr=l,n0.current=null}function Z2(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=I5(d,l,Si),d!==null){nr=d;return}}else{if(d=P5(d,l),d!==null){d.flags&=32767,nr=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{hr=6,nr=null;return}}if(l=l.sibling,l!==null){nr=l;return}nr=l=s}while(l!==null);hr===0&&(hr=5)}function tl(s,l,d){var m=Ot,x=Ui.transition;try{Ui.transition=null,Ot=1,U5(s,l,d,m)}finally{Ui.transition=x,Ot=m}return null}function U5(s,l,d,m){do gc();while(Ja!==null);if((qt&6)!==0)throw Error(n(327));d=s.finishedWork;var x=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var E=d.lanes|d.childLanes;if(rn(s,E),s===_r&&(nr=_r=null,Cr=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||cf||(cf=!0,rw(Qr,function(){return gc(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=Ui.transition,Ui.transition=null;var P=Ot;Ot=1;var B=qt;qt|=4,n0.current=null,M5(s,d),B2(d,s),a5(dg),$a=!!ug,dg=ug=null,s.current=d,D5(d),bh(),qt=B,Ot=P,Ui.transition=E}else s.current=d;if(cf&&(cf=!1,Ja=s,uf=x),E=s.pendingLanes,E===0&&(Xa=null),er(d.stateNode),hi(s,on()),l!==null)for(m=s.onRecoverableError,d=0;d<l.length;d++)x=l[d],m(x.value,{componentStack:x.stack,digest:x.digest});if(lf)throw lf=!1,s=s0,s0=null,s;return(uf&1)!==0&&s.tag!==0&&gc(),E=s.pendingLanes,(E&1)!==0?s===a0?Bu++:(Bu=0,a0=s):Bu=0,Ga(),null}function gc(){if(Ja!==null){var s=_s(uf),l=Ui.transition,d=Ot;try{if(Ui.transition=null,Ot=16>s?16:s,Ja===null)var m=!1;else{if(s=Ja,Ja=null,uf=0,(qt&6)!==0)throw Error(n(331));var x=qt;for(qt|=4,nt=s.current;nt!==null;){var E=nt,P=E.child;if((nt.flags&16)!==0){var B=E.deletions;if(B!==null){for(var K=0;K<B.length;K++){var ue=B[K];for(nt=ue;nt!==null;){var Ie=nt;switch(Ie.tag){case 0:case 11:case 15:Uu(8,Ie,E)}var Le=Ie.child;if(Le!==null)Le.return=Ie,nt=Le;else for(;nt!==null;){Ie=nt;var Ce=Ie.sibling,et=Ie.return;if(V2(Ie),Ie===ue){nt=null;break}if(Ce!==null){Ce.return=et,nt=Ce;break}nt=et}}}var st=E.alternate;if(st!==null){var lt=st.child;if(lt!==null){st.child=null;do{var Kn=lt.sibling;lt.sibling=null,lt=Kn}while(lt!==null)}}nt=E}}if((E.subtreeFlags&2064)!==0&&P!==null)P.return=E,nt=P;else e:for(;nt!==null;){if(E=nt,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Uu(9,E,E.return)}var ee=E.sibling;if(ee!==null){ee.return=E.return,nt=ee;break e}nt=E.return}}var Q=s.current;for(nt=Q;nt!==null;){P=nt;var ie=P.child;if((P.subtreeFlags&2064)!==0&&ie!==null)ie.return=P,nt=ie;else e:for(P=Q;nt!==null;){if(B=nt,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:sf(9,B)}}catch(ut){zn(B,B.return,ut)}if(B===P){nt=null;break e}var Fe=B.sibling;if(Fe!==null){Fe.return=B.return,nt=Fe;break e}nt=B.return}}if(qt=x,Ga(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Yr,s)}catch{}m=!0}return m}finally{Ot=d,Ui.transition=l}}return!1}function ew(s,l,d){l=hc(d,l),l=v2(s,l,1),s=Qa(s,l,1),l=ti(),s!==null&&(bs(s,1,l),hi(s,l))}function zn(s,l,d){if(s.tag===3)ew(s,s,d);else for(;l!==null;){if(l.tag===3){ew(l,s,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Xa===null||!Xa.has(m))){s=hc(d,s),s=x2(l,s,1),l=Qa(l,s,1),s=ti(),l!==null&&(bs(l,1,s),hi(l,s));break}}l=l.return}}function $5(s,l,d){var m=s.pingCache;m!==null&&m.delete(l),l=ti(),s.pingedLanes|=s.suspendedLanes&d,_r===s&&(Cr&d)===d&&(hr===4||hr===3&&(Cr&130023424)===Cr&&500>on()-i0?el(s,0):r0|=d),hi(s,l)}function tw(s,l){l===0&&((s.mode&1)===0?l=1:(l=Ua,Ua<<=1,(Ua&130023424)===0&&(Ua=4194304)));var d=ti();s=pa(s,l),s!==null&&(bs(s,l,d),hi(s,d))}function z5(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),tw(s,d)}function B5(s,l){var d=0;switch(s.tag){case 13:var m=s.stateNode,x=s.memoizedState;x!==null&&(d=x.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(l),tw(s,d)}var nw;nw=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||li.current)ui=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return ui=!1,j5(s,l,d);ui=(s.flags&131072)!==0}else ui=!1,kn&&(l.flags&1048576)!==0&&Db(l,$h,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;nf(s,l),s=l.pendingProps;var x=ic(l,Vr.current);uc(l,d),x=Dg(null,l,m,s,x,d);var E=Og();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ci(m)?(E=!0,Vh(l)):E=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Tg(l),x.updater=ef,l.stateNode=x,x._reactInternals=l,zg(l,m,s,d),l=qg(null,l,m,!0,E,d)):(l.tag=0,kn&&E&&vg(l),ei(null,l,x,d),l=l.child),l;case 16:m=l.elementType;e:{switch(nf(s,l),s=l.pendingProps,x=m._init,m=x(m._payload),l.type=m,x=l.tag=W5(m),s=ss(m,s),x){case 0:l=Wg(null,l,m,s,d);break e;case 1:l=T2(null,l,m,s,d);break e;case 11:l=E2(null,l,m,s,d);break e;case 14:l=N2(null,l,m,ss(m.type,s),d);break e}throw Error(n(306,m,""))}return l;case 0:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:ss(m,x),Wg(s,l,m,x,d);case 1:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:ss(m,x),T2(s,l,m,x,d);case 3:e:{if(C2(l),s===null)throw Error(n(387));m=l.pendingProps,E=l.memoizedState,x=E.element,Hb(s,l),Gh(l,m,null,d);var P=l.memoizedState;if(m=P.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){x=hc(Error(n(423)),l),l=j2(s,l,m,d,x);break e}else if(m!==x){x=hc(Error(n(424)),l),l=j2(s,l,m,d,x);break e}else for(ki=Ha(l.stateNode.containerInfo.firstChild),Ni=l,kn=!0,is=null,d=zb(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(oc(),m===x){l=ga(s,l,d);break e}ei(s,l,m,d)}l=l.child}return l;case 5:return Gb(l),s===null&&wg(l),m=l.type,x=l.pendingProps,E=s!==null?s.memoizedProps:null,P=x.children,hg(m,x)?P=null:E!==null&&hg(m,E)&&(l.flags|=32),A2(s,l),ei(s,l,P,d),l.child;case 6:return s===null&&wg(l),null;case 13:return I2(s,l,d);case 4:return Cg(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=lc(l,null,m,d):ei(s,l,m,d),l.child;case 11:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:ss(m,x),E2(s,l,m,x,d);case 7:return ei(s,l,l.pendingProps,d),l.child;case 8:return ei(s,l,l.pendingProps.children,d),l.child;case 12:return ei(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,x=l.pendingProps,E=l.memoizedProps,P=x.value,mn(Hh,m._currentValue),m._currentValue=P,E!==null)if(rs(E.value,P)){if(E.children===x.children&&!li.current){l=ga(s,l,d);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var B=E.dependencies;if(B!==null){P=E.child;for(var K=B.firstContext;K!==null;){if(K.context===m){if(E.tag===1){K=ma(-1,d&-d),K.tag=2;var ue=E.updateQueue;if(ue!==null){ue=ue.shared;var Ie=ue.pending;Ie===null?K.next=K:(K.next=Ie.next,Ie.next=K),ue.pending=K}}E.lanes|=d,K=E.alternate,K!==null&&(K.lanes|=d),Sg(E.return,d,l),B.lanes|=d;break}K=K.next}}else if(E.tag===10)P=E.type===l.type?null:E.child;else if(E.tag===18){if(P=E.return,P===null)throw Error(n(341));P.lanes|=d,B=P.alternate,B!==null&&(B.lanes|=d),Sg(P,d,l),P=E.sibling}else P=E.child;if(P!==null)P.return=E;else for(P=E;P!==null;){if(P===l){P=null;break}if(E=P.sibling,E!==null){E.return=P.return,P=E;break}P=P.return}E=P}ei(s,l,x.children,d),l=l.child}return l;case 9:return x=l.type,m=l.pendingProps.children,uc(l,d),x=Vi(x),m=m(x),l.flags|=1,ei(s,l,m,d),l.child;case 14:return m=l.type,x=ss(m,l.pendingProps),x=ss(m.type,x),N2(s,l,m,x,d);case 15:return k2(s,l,l.type,l.pendingProps,d);case 17:return m=l.type,x=l.pendingProps,x=l.elementType===m?x:ss(m,x),nf(s,l),l.tag=1,ci(m)?(s=!0,Vh(l)):s=!1,uc(l,d),g2(l,m,x),zg(l,m,x,d),qg(null,l,m,!0,s,d);case 19:return R2(s,l,d);case 22:return S2(s,l,d)}throw Error(n(156,l.tag))};function rw(s,l){return ys(s,l)}function H5(s,l,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(s,l,d,m){return new H5(s,l,d,m)}function h0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function W5(s){if(typeof s=="function")return h0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===Pe)return 14}return 2}function to(s,l){var d=s.alternate;return d===null?(d=$i(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function pf(s,l,d,m,x,E){var P=2;if(m=s,typeof s=="function")h0(s)&&(P=1);else if(typeof s=="string")P=5;else e:switch(s){case M:return nl(d.children,x,E,l);case I:P=8,x|=8;break;case T:return s=$i(12,d,l,x|2),s.elementType=T,s.lanes=E,s;case O:return s=$i(13,d,l,x),s.elementType=O,s.lanes=E,s;case xe:return s=$i(19,d,l,x),s.elementType=xe,s.lanes=E,s;case He:return mf(d,x,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:P=10;break e;case V:P=9;break e;case U:P=11;break e;case Pe:P=14;break e;case We:P=16,m=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=$i(P,d,l,x),l.elementType=s,l.type=m,l.lanes=E,l}function nl(s,l,d,m){return s=$i(7,s,m,l),s.lanes=d,s}function mf(s,l,d,m){return s=$i(22,s,m,l),s.elementType=He,s.lanes=d,s.stateNode={isHidden:!1},s}function f0(s,l,d){return s=$i(6,s,null,l),s.lanes=d,s}function p0(s,l,d){return l=$i(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function q5(s,l,d,m,x){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zi(0),this.expirationTimes=Zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function m0(s,l,d,m,x,E,P,B,K){return s=new q5(s,l,d,B,K),l===1?(l=1,E===!0&&(l|=8)):l=0,E=$i(3,null,null,l),s.current=E,E.stateNode=s,E.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tg(E),s}function G5(s,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:m==null?null:""+m,children:s,containerInfo:l,implementation:d}}function iw(s){if(!s)return qa;s=s._reactInternals;e:{if(tn(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ci(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(ci(d))return Pb(s,d,l)}return l}function sw(s,l,d,m,x,E,P,B,K){return s=m0(d,m,!0,s,x,E,P,B,K),s.context=iw(null),d=s.current,m=ti(),x=Za(d),E=ma(m,x),E.callback=l??null,Qa(d,E,x),s.current.lanes=x,bs(s,x,m),hi(s,m),s}function gf(s,l,d,m){var x=l.current,E=ti(),P=Za(x);return d=iw(d),l.context===null?l.context=d:l.pendingContext=d,l=ma(E,P),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=Qa(x,l,P),s!==null&&(ls(s,x,P,E),qh(s,x,P)),P}function yf(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function aw(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function g0(s,l){aw(s,l),(s=s.alternate)&&aw(s,l)}function K5(){return null}var ow=typeof reportError=="function"?reportError:function(s){console.error(s)};function y0(s){this._internalRoot=s}vf.prototype.render=y0.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));gf(s,l,null,null)},vf.prototype.unmount=y0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Zo(function(){gf(null,s,null,null)}),l[ua]=null}};function vf(s){this._internalRoot=s}vf.prototype.unstable_scheduleHydration=function(s){if(s){var l=fe();s={blockedOn:null,target:s,priority:l};for(var d=0;d<En.length&&l!==0&&l<En[d].priority;d++);En.splice(d,0,s),d===0&&Sr(s)}};function v0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function xf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function lw(){}function Q5(s,l,d,m,x){if(x){if(typeof m=="function"){var E=m;m=function(){var ue=yf(P);E.call(ue)}}var P=sw(l,m,s,0,null,!1,!1,"",lw);return s._reactRootContainer=P,s[ua]=P.current,Au(s.nodeType===8?s.parentNode:s),Zo(),P}for(;x=s.lastChild;)s.removeChild(x);if(typeof m=="function"){var B=m;m=function(){var ue=yf(K);B.call(ue)}}var K=m0(s,0,!1,null,null,!1,!1,"",lw);return s._reactRootContainer=K,s[ua]=K.current,Au(s.nodeType===8?s.parentNode:s),Zo(function(){gf(l,K,d,m)}),K}function bf(s,l,d,m,x){var E=d._reactRootContainer;if(E){var P=E;if(typeof x=="function"){var B=x;x=function(){var K=yf(P);B.call(K)}}gf(l,P,s,x)}else P=Q5(d,l,s,x,m);return yf(P)}sa=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=xs(l.pendingLanes);d!==0&&(ws(l,d|1),hi(l,on()),(qt&6)===0&&(mc=on()+500,Ga()))}break;case 13:Zo(function(){var m=pa(s,1);if(m!==null){var x=ti();ls(m,s,1,x)}}),g0(s,1)}},aa=function(s){if(s.tag===13){var l=pa(s,134217728);if(l!==null){var d=ti();ls(l,s,134217728,d)}g0(s,134217728)}},$=function(s){if(s.tag===13){var l=Za(s),d=pa(s,l);if(d!==null){var m=ti();ls(d,s,l,m)}g0(s,l)}},fe=function(){return Ot},Ye=function(s,l){var d=Ot;try{return Ot=s,l()}finally{Ot=d}},W=function(s,l,d){switch(l){case"input":if(Se(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==s&&m.form===s.form){var x=Oh(m);if(!x)throw Error(n(90));mt(m),Se(m,x)}}}break;case"textarea":_e(s,d);break;case"select":l=d.value,l!=null&&xt(s,!!d.multiple,l,!1)}},Oe=c0,ye=Zo;var Y5={usingClientEntryPoint:!1,Events:[ju,nc,Oh,ae,Me,c0]},Hu={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X5={bundleType:Hu.bundleType,version:Hu.version,rendererPackageName:Hu.rendererPackageName,rendererConfig:Hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=na(s),s===null?null:s.stateNode},findFiberByHostInstance:Hu.findFiberByHostInstance||K5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wf.isDisabled&&wf.supportsFiber)try{Yr=wf.inject(X5),Xr=wf}catch{}}return fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y5,fi.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v0(l))throw Error(n(200));return G5(s,l,null,d)},fi.createRoot=function(s,l){if(!v0(s))throw Error(n(299));var d=!1,m="",x=ow;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=m0(s,1,!1,null,null,d,!1,m,x),s[ua]=l.current,Au(s.nodeType===8?s.parentNode:s),new y0(l)},fi.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=na(l),s=s===null?null:s.stateNode,s},fi.flushSync=function(s){return Zo(s)},fi.hydrate=function(s,l,d){if(!xf(l))throw Error(n(200));return bf(null,s,l,!0,d)},fi.hydrateRoot=function(s,l,d){if(!v0(s))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,x=!1,E="",P=ow;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),l=sw(l,null,s,1,d??null,x,!1,E,P),s[ua]=l.current,Au(s),m)for(s=0;s<m.length;s++)d=m[s],x=d._getVersion,x=x(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,x]:l.mutableSourceEagerHydrationData.push(d,x);return new vf(l)},fi.render=function(s,l,d){if(!xf(l))throw Error(n(200));return bf(null,s,l,!1,d)},fi.unmountComponentAtNode=function(s){if(!xf(s))throw Error(n(40));return s._reactRootContainer?(Zo(function(){bf(null,null,s,!1,function(){s._reactRootContainer=null,s[ua]=null})}),!0):!1},fi.unstable_batchedUpdates=c0,fi.unstable_renderSubtreeIntoContainer=function(s,l,d,m){if(!xf(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return bf(s,l,d,!1,m)},fi.version="18.3.1-next-f1338f8080-20240426",fi}var gw;function qk(){if(gw)return w0.exports;gw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),w0.exports=sI(),w0.exports}var yw;function aI(){if(yw)return _f;yw=1;var t=qk();return _f.createRoot=t.createRoot,_f.hydrateRoot=t.hydrateRoot,_f}var oI=aI();const lI=Yd(oI);var zv=qk();const cI=Yd(zv);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}var ho;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ho||(ho={}));const vw="popstate";function uI(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:c,hash:u}=r.location;return vy("",{pathname:o,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gp(i)}return hI(e,n,null,t)}function Jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dI(){return Math.random().toString(36).substr(2,8)}function xw(t,e){return{usr:t.state,key:t.key,idx:e}}function vy(t,e,n,r){return n===void 0&&(n=null),_d({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?tu(e):e,{state:n,key:e&&e.key||r||dI()})}function gp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,u=ho.Pop,h=null,f=g();f==null&&(f=0,c.replaceState(_d({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=ho.Pop;let A=g(),j=A==null?null:A-f;f=A,h&&h({action:u,location:w.location,delta:j})}function v(A,j){u=ho.Push;let R=vy(w.location,A,j);f=g()+1;let L=xw(R,f),D=w.createHref(R);try{c.pushState(L,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(D)}o&&h&&h({action:u,location:w.location,delta:1})}function b(A,j){u=ho.Replace;let R=vy(w.location,A,j);f=g();let L=xw(R,f),D=w.createHref(R);c.replaceState(L,"",D),o&&h&&h({action:u,location:w.location,delta:0})}function k(A){let j=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof A=="string"?A:gp(A);return R=R.replace(/ $/,"%20"),Jn(j,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,j)}let w={get action(){return u},get location(){return t(i,c)},listen(A){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(vw,y),h=A,()=>{i.removeEventListener(vw,y),h=null}},createHref(A){return e(i,A)},createURL:k,encodeLocation(A){let j=k(A);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:b,go(A){return c.go(A)}};return w}var bw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bw||(bw={}));function fI(t,e,n){return n===void 0&&(n="/"),pI(t,e,n)}function pI(t,e,n,r){let i=typeof e=="string"?tu(e):e,o=Bv(i.pathname||"/",n);if(o==null)return null;let c=Kk(t);mI(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=AI(o);u=NI(c[h],f)}return u}function Kk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,c,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(Jn(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=po([r,h.relativePath]),g=n.concat(h);o.children&&o.children.length>0&&(Jn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Kk(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:_I(f,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let h of Qk(o.path))i(o,c,h)}),e}function Qk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=Qk(r.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function mI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gI=/^:[\w-]+$/,yI=3,vI=2,xI=1,bI=10,wI=-2,ww=t=>t==="*";function _I(t,e){let n=t.split("/"),r=n.length;return n.some(ww)&&(r+=wI),e&&(r+=vI),n.filter(i=>!ww(i)).reduce((i,o)=>i+(gI.test(o)?yI:o===""?xI:bI),r)}function EI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function NI(t,e,n){let{routesMeta:r}=t,i={},o="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=kI({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:po([o,y.pathname]),pathnameBase:II(po([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=po([o,y.pathnameBase]))}return c}function kI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:v,isOptional:b}=g;if(v==="*"){let w=u[y]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const k=u[y];return b&&!k?f[v]=void 0:f[v]=(k||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function SI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function TI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?tu(t):t;return{pathname:n?n.startsWith("/")?n:CI(n,e):e,search:PI(r),hash:RI(i)}}function CI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function N0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hv(t,e){let n=jI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=tu(t):(i=_d({},t),Jn(!i.pathname||!i.pathname.includes("?"),N0("?","pathname","search",i)),Jn(!i.pathname||!i.pathname.includes("#"),N0("#","pathname","hash",i)),Jn(!i.search||!i.search.includes("#"),N0("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=TI(i,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const po=t=>t.join("/").replace(/\/\/+/g,"/"),II=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Yk=["post","put","patch","delete"];new Set(Yk);const DI=["get",...Yk];new Set(DI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}const qv=S.createContext(null),OI=S.createContext(null),Po=S.createContext(null),tm=S.createContext(null),Ma=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Xk=S.createContext(null);function LI(t,e){let{relative:n}=e===void 0?{}:e;nu()||Jn(!1);let{basename:r,navigator:i}=S.useContext(Po),{hash:o,pathname:c,search:u}=Zk(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:po([r,c])),i.createHref({pathname:h,search:u,hash:o})}function nu(){return S.useContext(tm)!=null}function ea(){return nu()||Jn(!1),S.useContext(tm).location}function Jk(t){S.useContext(Po).static||S.useLayoutEffect(t)}function wi(){let{isDataRoute:t}=S.useContext(Ma);return t?YI():VI()}function VI(){nu()||Jn(!1);let t=S.useContext(qv),{basename:e,future:n,navigator:r}=S.useContext(Po),{matches:i}=S.useContext(Ma),{pathname:o}=ea(),c=JSON.stringify(Hv(i,n.v7_relativeSplatPath)),u=S.useRef(!1);return Jk(()=>{u.current=!0}),S.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=Wv(f,JSON.parse(c),o,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:po([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,o,t])}function Gv(){let{matches:t}=S.useContext(Ma),e=t[t.length-1];return e?e.params:{}}function Zk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(Po),{matches:i}=S.useContext(Ma),{pathname:o}=ea(),c=JSON.stringify(Hv(i,r.v7_relativeSplatPath));return S.useMemo(()=>Wv(t,JSON.parse(c),o,n==="path"),[t,c,o,n])}function FI(t,e){return UI(t,e)}function UI(t,e,n,r){nu()||Jn(!1);let{navigator:i}=S.useContext(Po),{matches:o}=S.useContext(Ma),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=ea(),g;if(e){var y;let A=typeof e=="string"?tu(e):e;h==="/"||(y=A.pathname)!=null&&y.startsWith(h)||Jn(!1),g=A}else g=f;let v=g.pathname||"/",b=v;if(h!=="/"){let A=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let k=fI(t,{pathname:b}),w=WI(k&&k.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:po([h,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:po([h,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,n,r);return e&&w?S.createElement(tm.Provider,{value:{location:Ed({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ho.Pop}},w):w}function $I(){let t=QI(),e=MI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:i},n):null,null)}const zI=S.createElement($I,null);class BI extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ma.Provider,{value:this.props.routeContext},S.createElement(Xk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HI(t){let{routeContext:e,match:n,children:r}=t,i=S.useContext(qv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ma.Provider,{value:e},r)}function WI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||Jn(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:v,errors:b}=n,k=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||k){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,v)=>{let b,k=!1,w=null,A=null;n&&(b=u&&y.route.id?u[y.route.id]:void 0,w=y.route.errorElement||zI,h&&(f<0&&v===0?(XI("route-fallback"),k=!0,A=null):f===v&&(k=!0,A=y.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,v+1)),R=()=>{let L;return b?L=w:k?L=A:y.route.Component?L=S.createElement(y.route.Component,null):y.route.element?L=y.route.element:L=g,S.createElement(HI,{match:y,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:L})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?S.createElement(BI,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:R(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):R()},null)}var eS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eS||{}),tS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tS||{});function qI(t){let e=S.useContext(qv);return e||Jn(!1),e}function GI(t){let e=S.useContext(OI);return e||Jn(!1),e}function KI(t){let e=S.useContext(Ma);return e||Jn(!1),e}function nS(t){let e=KI(),n=e.matches[e.matches.length-1];return n.route.id||Jn(!1),n.route.id}function QI(){var t;let e=S.useContext(Xk),n=GI(),r=nS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function YI(){let{router:t}=qI(eS.UseNavigateStable),e=nS(tS.UseNavigateStable),n=S.useRef(!1);return Jk(()=>{n.current=!0}),S.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ed({fromRouteId:e},o)))},[t,e])}const _w={};function XI(t,e,n){_w[t]||(_w[t]=!0)}function JI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ZI(t){let{to:e,replace:n,state:r,relative:i}=t;nu()||Jn(!1);let{future:o,static:c}=S.useContext(Po),{matches:u}=S.useContext(Ma),{pathname:h}=ea(),f=wi(),g=Wv(e,Hv(u,o.v7_relativeSplatPath),h,i==="path"),y=JSON.stringify(g);return S.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:i}),[f,y,i,n,r]),null}function fr(t){Jn(!1)}function e3(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ho.Pop,navigator:o,static:c=!1,future:u}=t;nu()&&Jn(!1);let h=e.replace(/^\/*/,"/"),f=S.useMemo(()=>({basename:h,navigator:o,static:c,future:Ed({v7_relativeSplatPath:!1},u)}),[h,u,o,c]);typeof r=="string"&&(r=tu(r));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:k="default"}=r,w=S.useMemo(()=>{let A=Bv(g,h);return A==null?null:{location:{pathname:A,search:y,hash:v,state:b,key:k},navigationType:i}},[h,g,y,v,b,k,i]);return w==null?null:S.createElement(Po.Provider,{value:f},S.createElement(tm.Provider,{children:n,value:w}))}function t3(t){let{children:e,location:n}=t;return FI(xy(e),n)}new Promise(()=>{});function xy(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,i)=>{if(!S.isValidElement(r))return;let o=[...e,i];if(r.type===S.Fragment){n.push.apply(n,xy(r.props.children,o));return}r.type!==fr&&Jn(!1),!r.props.index||!r.props.children||Jn(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=xy(r.props.children,o)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function by(){return by=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},by.apply(this,arguments)}function n3(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function r3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i3(t,e){return t.button===0&&(!e||e==="_self")&&!r3(t)}function wy(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function s3(t,e){let n=wy(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const a3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],o3="6";try{window.__reactRouterVersion=o3}catch{}const l3="startTransition",Ew=yy[l3];function c3(t){let{basename:e,children:n,future:r,window:i}=t,o=S.useRef();o.current==null&&(o.current=uI({window:i,v5Compat:!0}));let c=o.current,[u,h]=S.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=S.useCallback(y=>{f&&Ew?Ew(()=>h(y)):h(y)},[h,f]);return S.useLayoutEffect(()=>c.listen(g),[c,g]),S.useEffect(()=>JI(r),[r]),S.createElement(e3,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const u3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tt=S.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y}=e,v=n3(e,a3),{basename:b}=S.useContext(Po),k,w=!1;if(typeof f=="string"&&d3.test(f)&&(k=f,u3))try{let L=new URL(window.location.href),D=f.startsWith("//")?new URL(L.protocol+f):new URL(f),z=Bv(D.pathname,b);D.origin===L.origin&&z!=null?f=z+D.search+D.hash:w=!0}catch{}let A=LI(f,{relative:i}),j=h3(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:i,viewTransition:y});function R(L){r&&r(L),L.defaultPrevented||j(L)}return S.createElement("a",by({},v,{href:k||A,onClick:w||o?r:R,ref:n,target:h}))});var Nw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Nw||(Nw={}));var kw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kw||(kw={}));function h3(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,h=wi(),f=ea(),g=Zk(t,{relative:c});return S.useCallback(y=>{if(i3(y,n)){y.preventDefault();let v=r!==void 0?r:gp(f)===gp(g);h(t,{replace:v,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[f,h,g,r,i,n,t,o,c,u])}function Kv(t){let e=S.useRef(wy(t)),n=S.useRef(!1),r=ea(),i=S.useMemo(()=>s3(r.search,n.current?null:e.current),[r.search]),o=wi(),c=S.useCallback((u,h)=>{const f=wy(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,h)},[o,i]);return[i,c]}const rS=S.createContext(),f3=({children:t})=>{const[e,n]=S.useState(()=>{const b=localStorage.getItem("carrito");return b?JSON.parse(b):[]}),[r,i]=S.useState(()=>{const b=localStorage.getItem("favoritos");return b?JSON.parse(b):[]});S.useEffect(()=>{localStorage.setItem("carrito",JSON.stringify(e))},[e]),S.useEffect(()=>{n(b=>b.map(k=>{if(k.maxStock!==void 0)return k;if(Array.isArray(k.variantes)&&k.colorSeleccionado){const w=k.variantes.find(A=>A.color===k.colorSeleccionado);if(w&&w.cantidad!==void 0)return{...k,maxStock:Number(w.cantidad)||0}}if(k.cantidadProducto!==void 0){const w=Number(k.cantidadProducto);if(!Number.isNaN(w))return{...k,maxStock:w}}return k}))},[]),S.useEffect(()=>{n(b=>{const k=new Map;for(const w of b){const A=`${w.id}__${w.colorSeleccionado??""}`,j=k.get(A);j?k.set(A,{...j,cantidad:(Number(j.cantidad)||0)+(Number(w.cantidad)||0),maxStock:Math.max(Number(j.maxStock??0)||0,Number(w.maxStock??0)||0)||j.maxStock||w.maxStock}):k.set(A,{...w})}return Array.from(k.values())})},[]),S.useEffect(()=>{localStorage.setItem("favoritos",JSON.stringify(r))},[r]);const o=b=>{try{const k=(b??"").toString().trim();return k||null}catch{return null}},c=(b,k=null)=>{n(w=>{const A=o(k),j=A&&Array.isArray(b.variantes)?b.variantes.find(D=>o(D.color)===A):null,R=(j&&Number(j.cantidad))??(b.maxStock!==void 0?Number(b.maxStock):void 0)??(b.cantidad!==void 0?Number(b.cantidad):void 0)??1/0,L=w.find(D=>D.id===b.id&&o(D.colorSeleccionado)===A);if(L){const D=Number.isFinite(R)?R:1/0,z=D;return L.cantidad<z?w.map(G=>G.id===b.id&&o(G.colorSeleccionado)===A?{...G,cantidad:G.cantidad+1,maxStock:D}:G):w}return R>0?[...w,{...b,cantidad:1,colorSeleccionado:A,maxStock:R}]:w})},u=(b,k=null)=>{const w=o(k);n(A=>A.map(j=>j.id===b&&o(j.colorSeleccionado)===w?{...j,cantidad:j.cantidad-1}:j).filter(j=>j.cantidad>0))},h=(b,k=null)=>{const w=o(k);n(A=>A.filter(j=>!(j.id===b&&o(j.colorSeleccionado)===w)))},f=b=>{n(k=>k.find(A=>A.id===b.id)?k.filter(A=>A.id!==b.id):[...k,{...b,cantidad:1}])},g=b=>{i(k=>k.find(w=>w.id===b.id)?k:[...k,b])},y=b=>{i(k=>k.filter(w=>w.id!==b))},v=()=>{n([])};return a.jsx(rS.Provider,{value:{carrito:e,favoritos:r,agregarAlCarrito:c,eliminarUnidadDelCarrito:u,quitarDelCarrito:h,toggleCarrito:f,agregarAFavoritos:g,eliminarDeFavoritos:y,vaciarCarrito:v},children:t})},Xd=()=>S.useContext(rS),iS=S.createContext();function ru(){return S.useContext(iS)}function p3({children:t}){const[e,n]=S.useState(!1),[r,i]=S.useState("login");function o(u="login"){i(u),n(!0)}function c(){n(!1)}return a.jsx(iS.Provider,{value:{modalAbierto:e,setModalAbierto:n,abrirModal:o,cerrarModal:c,modo:r,setModo:i},children:t})}const m3=()=>{};var Sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},g3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],c=t[n++],u=t[n++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},aS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,u=c?t[i+1]:0,h=i+2<t.length,f=h?t[i+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,b=f&63;h||(b=64,c||(v=64)),r.push(n[g],n[y],n[v],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):g3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new y3;const v=o<<2|u>>4;if(r.push(v),f!==64){const b=u<<4&240|f>>2;if(r.push(b),y!==64){const k=f<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class y3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v3=function(t){const e=sS(t);return aS.encodeByteArray(e,!0)},yp=function(t){return v3(t).replace(/\./g,"")},oS=function(t){try{return aS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=()=>x3().__FIREBASE_DEFAULTS__,w3=()=>{if(typeof process>"u"||typeof Sw>"u")return;const t=Sw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oS(t[1]);return e&&JSON.parse(e)},nm=()=>{try{return m3()||b3()||w3()||_3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lS=t=>{var e,n;return(n=(e=nm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cS=t=>{const e=lS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uS=()=>{var t;return(t=nm())===null||t===void 0?void 0:t.config},dS=t=>{var e;return(e=nm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yp(JSON.stringify(n)),yp(JSON.stringify(c)),""].join(".")}const ad={};function N3(){const t={prod:[],emulator:[]};for(const e of Object.keys(ad))ad[e]?t.emulator.push(e):t.prod.push(e);return t}function k3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Aw=!1;function Yv(t,e){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||ad[t]===e||ad[t]||Aw)return;ad[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=N3().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Aw=!0,c()},v}function g(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=k3(r),b=n("text"),k=document.getElementById(b)||document.createElement("span"),w=n("learnmore"),A=document.getElementById(w)||document.createElement("a"),j=n("preprendIcon"),R=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const L=v.element;u(L),g(A,w);const D=f();h(R,j),L.append(R,k,A,D),document.body.appendChild(L)}o?(k.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function A3(){var t;const e=(t=nm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I3(){const t=Kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function P3(){return!A3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R3(){try{return typeof indexedDB=="object"}catch{return!1}}function M3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="FirebaseError";class ta extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=D3,Object.setPrototypeOf(this,ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jd.prototype.create)}}class Jd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?O3(o,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new ta(i,u,r)}}function O3(t,e){return t.replace(L3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const L3=/\{\$([^}]+)}/g;function V3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],c=e[i];if(Tw(o)&&Tw(c)){if(!_l(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Tw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ju(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function F3(t,e){const n=new U3(t,e);return n.subscribe.bind(n)}class U3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=k0),i.error===void 0&&(i.error=k0),i.complete===void 0&&(i.complete=k0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function k0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t){return t&&t._delegate?t._delegate:t}class bo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new E3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H3(e))try{this.getOrInitializeService({instanceIdentifier:al})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=al){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=al){return this.instances.has(e)}getOptions(e=al){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=al){return this.component?this.component.multipleInstances?e:al:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B3(t){return t===al?void 0:t}function H3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const q3={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},G3=Ft.INFO,K3={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},Q3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=K3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xv{constructor(e){this.name=e,this._logLevel=G3,this._logHandler=Q3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const Y3=(t,e)=>e.some(n=>t instanceof n);let Cw,jw;function X3(){return Cw||(Cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J3(){return jw||(jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fS=new WeakMap,_y=new WeakMap,pS=new WeakMap,S0=new WeakMap,Jv=new WeakMap;function Z3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(mo(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&fS.set(n,t)}).catch(()=>{}),Jv.set(e,t),e}function eP(t){if(_y.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});_y.set(t,e)}let Ey={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _y.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tP(t){Ey=t(Ey)}function nP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(A0(this),e,...n);return pS.set(r,e.sort?e.sort():[e]),mo(r)}:J3().includes(t)?function(...e){return t.apply(A0(this),e),mo(fS.get(this))}:function(...e){return mo(t.apply(A0(this),e))}}function rP(t){return typeof t=="function"?nP(t):(t instanceof IDBTransaction&&eP(t),Y3(t,X3())?new Proxy(t,Ey):t)}function mo(t){if(t instanceof IDBRequest)return Z3(t);if(S0.has(t))return S0.get(t);const e=rP(t);return e!==t&&(S0.set(t,e),Jv.set(e,t)),e}const A0=t=>Jv.get(t);function iP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),u=mo(c);return r&&c.addEventListener("upgradeneeded",h=>{r(mo(c.result),h.oldVersion,h.newVersion,mo(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const sP=["get","getKey","getAll","getAllKeys","count"],aP=["put","add","delete","clear"],T0=new Map;function Iw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T0.get(e))return T0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sP.includes(n)))return;const o=async function(c,...u){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&h.done]))[0]};return T0.set(e,o),o}tP(t=>({...t,get:(e,n,r)=>Iw(e,n)||t.get(e,n,r),has:(e,n)=>!!Iw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ny="@firebase/app",Pw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new Xv("@firebase/app"),cP="@firebase/app-compat",uP="@firebase/analytics-compat",dP="@firebase/analytics",hP="@firebase/app-check-compat",fP="@firebase/app-check",pP="@firebase/auth",mP="@firebase/auth-compat",gP="@firebase/database",yP="@firebase/data-connect",vP="@firebase/database-compat",xP="@firebase/functions",bP="@firebase/functions-compat",wP="@firebase/installations",_P="@firebase/installations-compat",EP="@firebase/messaging",NP="@firebase/messaging-compat",kP="@firebase/performance",SP="@firebase/performance-compat",AP="@firebase/remote-config",TP="@firebase/remote-config-compat",CP="@firebase/storage",jP="@firebase/storage-compat",IP="@firebase/firestore",PP="@firebase/ai",RP="@firebase/firestore-compat",MP="firebase",DP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="[DEFAULT]",OP={[Ny]:"fire-core",[cP]:"fire-core-compat",[dP]:"fire-analytics",[uP]:"fire-analytics-compat",[fP]:"fire-app-check",[hP]:"fire-app-check-compat",[pP]:"fire-auth",[mP]:"fire-auth-compat",[gP]:"fire-rtdb",[yP]:"fire-data-connect",[vP]:"fire-rtdb-compat",[xP]:"fire-fn",[bP]:"fire-fn-compat",[wP]:"fire-iid",[_P]:"fire-iid-compat",[EP]:"fire-fcm",[NP]:"fire-fcm-compat",[kP]:"fire-perf",[SP]:"fire-perf-compat",[AP]:"fire-rc",[TP]:"fire-rc-compat",[CP]:"fire-gcs",[jP]:"fire-gcs-compat",[IP]:"fire-fst",[RP]:"fire-fst-compat",[PP]:"fire-vertex","fire-js":"fire-js",[MP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=new Map,LP=new Map,Sy=new Map;function Rw(t,e){try{t.container.addComponent(e)}catch(n){Sa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function El(t){const e=t.name;if(Sy.has(e))return Sa.debug(`There were multiple attempts to register component ${e}.`),!1;Sy.set(e,t);for(const n of vp.values())Rw(n,t);for(const n of LP.values())Rw(n,t);return!0}function rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ai(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},go=new Jd("app","Firebase",VP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=DP;function mS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ky,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw go.create("bad-app-name",{appName:String(i)});if(n||(n=uS()),!n)throw go.create("no-options");const o=vp.get(i);if(o){if(_l(n,o.options)&&_l(r,o.config))return o;throw go.create("duplicate-app",{appName:i})}const c=new W3(i);for(const h of Sy.values())c.addComponent(h);const u=new FP(n,r,c);return vp.set(i,u),u}function Zv(t=ky){const e=vp.get(t);if(!e&&t===ky&&uS())return mS();if(!e)throw go.create("no-app",{appName:t});return e}function Us(t,e,n){var r;let i=(r=OP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sa.warn(u.join(" "));return}El(new bo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="firebase-heartbeat-database",$P=1,Nd="firebase-heartbeat-store";let C0=null;function gS(){return C0||(C0=iP(UP,$P,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nd)}catch(n){console.warn(n)}}}}).catch(t=>{throw go.create("idb-open",{originalErrorMessage:t.message})})),C0}async function zP(t){try{const n=(await gS()).transaction(Nd),r=await n.objectStore(Nd).get(yS(t));return await n.done,r}catch(e){if(e instanceof ta)Sa.warn(e.message);else{const n=go.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sa.warn(n.message)}}}async function Mw(t,e){try{const r=(await gS()).transaction(Nd,"readwrite");await r.objectStore(Nd).put(e,yS(t)),await r.done}catch(n){if(n instanceof ta)Sa.warn(n.message);else{const r=go.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sa.warn(r.message)}}}function yS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=1024,HP=30;class WP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Dw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>HP){const c=KP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Sa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dw(),{heartbeatsToSend:r,unsentEntries:i}=qP(this._heartbeatsCache.heartbeats),o=yp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Sa.warn(n),""}}}function Dw(){return new Date().toISOString().substring(0,10)}function qP(t,e=BP){const n=[];let r=t.slice();for(const i of t){const o=n.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Ow(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ow(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R3()?M3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ow(t){return yp(JSON.stringify({version:2,heartbeats:t})).length}function KP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){El(new bo("platform-logger",e=>new oP(e),"PRIVATE")),El(new bo("heartbeat",e=>new WP(e),"PRIVATE")),Us(Ny,Pw,t),Us(Ny,Pw,"esm2017"),Us("fire-js","")}QP("");function ex(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Pl(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function u(g){try{f(r.next(g))}catch(y){c(y)}}function h(g){try{f(r.throw(g))}catch(y){c(y)}}function f(g){g.done?o(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})}function vS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YP=vS,xS=new Jd("auth","Firebase",vS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=new Xv("@firebase/auth");function XP(t,...e){xp.logLevel<=Ft.WARN&&xp.warn(`Auth (${Il}): ${t}`,...e)}function Qf(t,...e){xp.logLevel<=Ft.ERROR&&xp.error(`Auth (${Il}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,...e){throw tx(t,...e)}function $s(t,...e){return tx(t,...e)}function bS(t,e,n){const r=Object.assign(Object.assign({},YP()),{[e]:n});return new Jd("auth","Firebase",r).create(e,{appName:t.name})}function Ea(t){return bS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xS.create(t,...e)}function _t(t,e,...n){if(!t)throw tx(e,...n)}function wa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qf(e),new Error(e)}function Aa(t,e){t||wa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JP(){return Lw()==="http:"||Lw()==="https:"}function Lw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JP()||C3()||"connection"in navigator)?navigator.onLine:!0}function e6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Aa(n>e,"Short delay should be less than long delay!"),this.isMobile=S3()||j3()}get(){return ZP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e){Aa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r6=new eh(3e4,6e4);function Mo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Da(t,e,n,r,i={}){return _S(t,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Zd(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},o);return T3()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Ro(t.emulatorConfig.host)&&(f.credentials="include"),wS.fetch()(await ES(t,t.config.apiHost,n,u),f)})}async function _S(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},t6),e);try{const i=new s6(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Ef(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ef(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Ef(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw Ef(t,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw bS(t,g,f);ms(t,g)}}catch(i){if(i instanceof ta)throw i;ms(t,"network-request-failed",{message:String(i)})}}async function th(t,e,n,r,i={}){const o=await Da(t,e,n,r,i);return"mfaPendingCredential"in o&&ms(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function ES(t,e,n,r){const i=`${e}${n}?${r}`,o=t,c=o.config.emulator?nx(t.config,i):`${t.config.apiScheme}://${i}`;return n6.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function i6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class s6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($s(this.auth,"network-request-failed")),r6.get())})}}function Ef(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$s(t,e,r);return i.customData._tokenResponse=n,i}function Vw(t){return t!==void 0&&t.enterprise!==void 0}class a6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return i6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function o6(t,e){return Da(t,"GET","/v2/recaptchaConfig",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e){return Da(t,"POST","/v1/accounts:delete",e)}async function bp(t,e){return Da(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c6(t,e=!1){const n=vn(t),r=await n.getIdToken(e),i=rx(r);_t(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:od(j0(i.auth_time)),issuedAtTime:od(j0(i.iat)),expirationTime:od(j0(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function j0(t){return Number(t)*1e3}function rx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{const i=oS(n);return i?JSON.parse(i):(Qf("Failed to decode base64 JWT payload"),null)}catch(i){return Qf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Fw(t){const e=rx(t);return _t(e,"internal-error"),_t(typeof e.exp<"u","internal-error"),_t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ta&&u6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function u6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=od(this.lastLoginAt),this.creationTime=od(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Hc(t,bp(n,{idToken:r}));_t(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?NS(o.providerUserInfo):[],u=f6(t.providerData,c),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),g=h?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ty(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function h6(t){const e=vn(t);await wp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f6(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NS(t){return t.map(e=>{var{providerId:n}=e,r=ex(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p6(t,e){const n=await _S(t,{},async()=>{const r=Zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,c=await ES(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&Ro(t.emulatorConfig.host)&&(h.credentials="include"),wS.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function m6(t,e){return Da(t,"POST","/v2/accounts:revokeToken",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t(typeof e.idToken<"u","internal-error"),_t(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_t(e.length!==0,"internal-error");const n=Fw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await p6(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,c=new Lc;return r&&(_t(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(_t(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(_t(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lc,this.toJSON())}_performRefresh(){return wa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e){_t(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=ex(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ty(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Hc(this,this.stsTokenManager.getToken(this.auth,e));return _t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c6(this,e)}reload(){return h6(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(Ea(this.auth));const e=await this.getIdToken();return await Hc(this,l6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,c,u,h,f,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,k=(c=n.photoURL)!==null&&c!==void 0?c:void 0,w=(u=n.tenantId)!==null&&u!==void 0?u:void 0,A=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,j=(f=n.createdAt)!==null&&f!==void 0?f:void 0,R=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:L,emailVerified:D,isAnonymous:z,providerData:G,stsTokenManager:M}=n;_t(L&&M,e,"internal-error");const I=Lc.fromJSON(this.name,M);_t(typeof L=="string",e,"internal-error"),ro(y,e.name),ro(v,e.name),_t(typeof D=="boolean",e,"internal-error"),_t(typeof z=="boolean",e,"internal-error"),ro(b,e.name),ro(k,e.name),ro(w,e.name),ro(A,e.name),ro(j,e.name),ro(R,e.name);const T=new fs({uid:L,auth:e,email:v,emailVerified:D,displayName:y,isAnonymous:z,photoURL:k,phoneNumber:b,tenantId:w,stsTokenManager:I,createdAt:j,lastLoginAt:R});return G&&Array.isArray(G)&&(T.providerData=G.map(N=>Object.assign({},N))),A&&(T._redirectEventId=A),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Lc;i.updateFromServerResponse(n);const o=new fs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wp(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_t(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?NS(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Lc;u.updateFromIdToken(r);const h=new fs({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ty(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new Map;function _a(t){Aa(t instanceof Function,"Expected a class definition");let e=Uw.get(t);return e?(Aa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kS.type="NONE";const $w=kS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e,n){return`firebase:${t}:${e}:${n}`}class Vc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Yf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Yf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bp(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Vc(_a($w),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||_a($w);const c=Yf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await bp(e,{idToken:g}).catch(()=>{});if(!v)break;y=await fs._fromGetAccountInfoResponse(e,v,g)}else y=fs._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Vc(o,e,r):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Vc(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IS(e))return"Blackberry";if(PS(e))return"Webos";if(AS(e))return"Safari";if((e.includes("chrome/")||TS(e))&&!e.includes("edge/"))return"Chrome";if(jS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SS(t=Kr()){return/firefox\//i.test(t)}function AS(t=Kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TS(t=Kr()){return/crios\//i.test(t)}function CS(t=Kr()){return/iemobile/i.test(t)}function jS(t=Kr()){return/android/i.test(t)}function IS(t=Kr()){return/blackberry/i.test(t)}function PS(t=Kr()){return/webos/i.test(t)}function ix(t=Kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g6(t=Kr()){var e;return ix(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function y6(){return I3()&&document.documentMode===10}function RS(t=Kr()){return ix(t)||jS(t)||PS(t)||IS(t)||/windows phone/i.test(t)||CS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e=[]){let n;switch(t){case"Browser":n=zw(Kr());break;case"Worker":n=`${zw(Kr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Il}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6(t,e={}){return Da(t,"GET","/v2/passwordPolicy",Mo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=6;class w6{constructor(e){var n,r,i,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:b6,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bw(this),this.idTokenSubscription=new Bw(this),this.beforeStateQueue=new v6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_a(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Vc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bp(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(Ea(this));const n=e?vn(e):null;return n&&_t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(Ea(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(Ea(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x6(this),n=new w6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await m6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_a(e)||this._popupRedirectResolver;_t(n,this,"argument-error"),this.redirectPersistenceManager=await Vc.create(this,[_a(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&XP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rl(t){return vn(t)}class Bw{constructor(e){this.auth=e,this.observer=null,this.addObserver=F3(n=>this.observer=n)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E6(t){im=t}function DS(t){return im.loadJS(t)}function N6(){return im.recaptchaEnterpriseScript}function k6(){return im.gapiScript}function S6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class A6{constructor(){this.enterprise=new T6}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class T6{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const C6="recaptcha-enterprise",OS="NO_RECAPTCHA";class j6{constructor(e){this.type=C6,this.auth=Rl(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{o6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new a6(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function i(o,c,u){const h=window.grecaptcha;Vw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(OS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new A6().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!n&&Vw(window.grecaptcha))i(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=N6();h.length!==0&&(h+=u),DS(h).then(()=>{i(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Hw(t,e,n,r=!1,i=!1){const o=new j6(t);let c;if(i)c=OS;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Cy(t,e,n,r,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Hw(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Hw(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t,e){const n=rm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(_l(o,e??{}))return i;ms(i,"already-initialized")}return n.initialize({options:e})}function P6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_a);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function R6(t,e,n){const r=Rl(t);_t(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=LS(e),{host:c,port:u}=M6(e),h=u===null?"":`:${u}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_t(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_t(_l(f,r.config.emulator)&&_l(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Ro(c)?(Qv(`${o}//${c}${h}`),Yv("Auth",!0)):D6()}function LS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function M6(t){const e=LS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Ww(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Ww(c)}}}function Ww(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function D6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wa("not implemented")}_getIdTokenResponse(e){return wa("not implemented")}_linkToIdToken(e,n){return wa("not implemented")}_getReauthenticationResolver(e){return wa("not implemented")}}async function O6(t,e){return Da(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(t,e){return th(t,"POST","/v1/accounts:signInWithPassword",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6(t,e){return th(t,"POST","/v1/accounts:signInWithEmailLink",Mo(t,e))}async function F6(t,e){return th(t,"POST","/v1/accounts:signInWithEmailLink",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends sx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new kd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new kd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cy(e,n,"signInWithPassword",L6);case"emailLink":return V6(e,{email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cy(e,r,"signUpPassword",O6);case"emailLink":return F6(e,{idToken:n,email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t,e){return th(t,"POST","/v1/accounts:signInWithIdp",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6="http://localhost";class Nl extends sx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Nl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ms("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=ex(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new Nl(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Fc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fc(e,n)}buildRequest(){const e={requestUri:U6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function z6(t){const e=Xu(Ju(t)).link,n=e?Xu(Ju(e)).deep_link_id:null,r=Xu(Ju(t)).deep_link_id;return(r?Xu(Ju(r)).link:null)||r||n||e||t}class ax{constructor(e){var n,r,i,o,c,u;const h=Xu(Ju(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=$6((i=h.mode)!==null&&i!==void 0?i:null);_t(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=z6(e);try{return new ax(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(){this.providerId=iu.PROVIDER_ID}static credential(e,n){return kd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ax.parseLink(n);return _t(r,"argument-error"),kd._fromEmailAndCode(e,r.code,r.tenantId)}}iu.PROVIDER_ID="password";iu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";iu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends VS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends nh{constructor(){super("facebook.com")}static credential(e){return Nl._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Nl._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return oo.credential(n,r)}catch{return null}}}oo.GOOGLE_SIGN_IN_METHOD="google.com";oo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends nh{constructor(){super("github.com")}static credential(e){return Nl._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends nh{constructor(){super("twitter.com")}static credential(e,n){return Nl._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return co.credential(n,r)}catch{return null}}}co.TWITTER_SIGN_IN_METHOD="twitter.com";co.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B6(t,e){return th(t,"POST","/v1/accounts:signUp",Mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await fs._fromIdTokenResponse(e,r,i),c=qw(r);return new kl({user:o,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=qw(r);return new kl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function qw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends ta{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_p.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _p(e,n,r,i)}}function FS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_p._fromErrorAndOperation(t,o,e,r):o})}async function H6(t,e,n=!1){const r=await Hc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(t,e,n=!1){const{auth:r}=t;if(Ai(r.app))return Promise.reject(Ea(r));const i="reauthenticate";try{const o=await Hc(t,FS(r,i,e,t),n);_t(o.idToken,r,"internal-error");const c=rx(o.idToken);_t(c,r,"internal-error");const{sub:u}=c;return _t(t.uid===u,r,"user-mismatch"),kl._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ms(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t,e,n=!1){if(Ai(t.app))return Promise.reject(Ea(t));const r="signIn",i=await FS(t,r,e),o=await kl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function q6(t,e){return US(Rl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t){const e=Rl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function G6(t,e,n){if(Ai(t.app))return Promise.reject(Ea(t));const r=Rl(t),c=await Cy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B6).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&$S(t),h}),u=await kl._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function K6(t,e,n){return Ai(t.app)?Promise.reject(Ea(t)):q6(vn(t),iu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$S(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q6(t,e){return Da(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=vn(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Hc(r,Q6(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function Y6(t,e,n,r){return vn(t).onIdTokenChanged(e,n,r)}function X6(t,e,n){return vn(t).beforeAuthStateChanged(e,n)}function J6(t,e,n,r){return vn(t).onAuthStateChanged(e,n,r)}function Z6(t){return vn(t).signOut()}const Ep="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ep,"1"),this.storage.removeItem(Ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=1e3,tR=10;class BS extends zS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);y6()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BS.type="LOCAL";const nR=BS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends zS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HS.type="SESSION";const WS=HS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new sm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async f=>f(n.origin,o)),h=await rR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const f=ox("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(){return window}function sR(t){zs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return typeof zs().WorkerGlobalScope<"u"&&typeof zs().importScripts=="function"}async function aR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lR(){return qS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="firebaseLocalStorageDb",cR=1,Np="firebaseLocalStorage",KS="fbase_key";class rh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function am(t,e){return t.transaction([Np],e?"readwrite":"readonly").objectStore(Np)}function uR(){const t=indexedDB.deleteDatabase(GS);return new rh(t).toPromise()}function jy(){const t=indexedDB.open(GS,cR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Np,{keyPath:KS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Np)?e(r):(r.close(),await uR(),e(await jy()))})})}async function Gw(t,e,n){const r=am(t,!0).put({[KS]:e,value:n});return new rh(r).toPromise()}async function dR(t,e){const n=am(t,!1).get(e),r=await new rh(n).toPromise();return r===void 0?null:r.value}function Kw(t,e){const n=am(t,!0).delete(e);return new rh(n).toPromise()}const hR=800,fR=3;class QS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sm._getInstance(lR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aR(),!this.activeServiceWorker)return;this.sender=new iR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jy();return await Gw(e,Ep,"1"),await Kw(e,Ep),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>dR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=am(i,!1).getAll();return new rh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QS.type="LOCAL";const pR=QS;new eh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e){return e?_a(e):(_t(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx extends sx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gR(t){return US(t.auth,new lx(t),t.bypassAuthState)}function yR(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),W6(n,new lx(t),t.bypassAuthState)}async function vR(t){const{auth:e,user:n}=t;return _t(n,e,"internal-error"),H6(n,new lx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gR;case"linkViaPopup":case"linkViaRedirect":return vR;case"reauthViaPopup":case"reauthViaRedirect":return yR;default:ms(this.auth,"internal-error")}}resolve(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new eh(2e3,1e4);class jc extends YS{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,jc.currentPopupAction&&jc.currentPopupAction.cancel(),jc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){Aa(this.filter.length===1,"Popup operations only handle one event");const e=ox();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($s(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xR.get())};e()}}jc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="pendingRedirect",Xf=new Map;class wR extends YS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xf.get(this.auth._key());if(!e){try{const r=await _R(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xf.set(this.auth._key(),e)}return this.bypassAuthState||Xf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _R(t,e){const n=kR(e),r=NR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ER(t,e){Xf.set(t._key(),e)}function NR(t){return _a(t._redirectPersistence)}function kR(t){return Yf(bR,t.config.apiKey,t.name)}async function SR(t,e,n=!1){if(Ai(t.app))return Promise.reject(Ea(t));const r=Rl(t),i=mR(r,e),c=await new wR(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=10*60*1e3;class TR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($s(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qw(e))}saveEventToCache(e){this.cachedEventUids.add(Qw(e)),this.lastProcessedEventTime=Date.now()}}function Qw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e={}){return Da(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PR=/^https?/;async function RR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jR(t);for(const n of e)try{if(MR(n))return}catch{}ms(t,"unauthorized-domain")}function MR(t){const e=Ay(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!PR.test(n))return!1;if(IR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new eh(3e4,6e4);function Yw(){const t=zs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OR(t){return new Promise((e,n)=>{var r,i,o;function c(){Yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yw(),n($s(t,"network-request-failed"))},timeout:DR.get()})}if(!((i=(r=zs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=zs().gapi)===null||o===void 0)&&o.load)c();else{const u=S6("iframefcb");return zs()[u]=()=>{gapi.load?c():n($s(t,"network-request-failed"))},DS(`${k6()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Jf=null,e})}let Jf=null;function LR(t){return Jf=Jf||OR(t),Jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new eh(5e3,15e3),FR="__/auth/iframe",UR="emulator/auth/iframe",$R={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BR(t){const e=t.config;_t(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nx(e,UR):`https://${t.config.authDomain}/${FR}`,r={apiKey:e.apiKey,appName:t.name,v:Il},i=zR.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Zd(r).slice(1)}`}async function HR(t){const e=await LR(t),n=zs().gapi;return _t(n,t,"internal-error"),e.open({where:document.body,url:BR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$R,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=$s(t,"network-request-failed"),u=zs().setTimeout(()=>{o(c)},VR.get());function h(){zs().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qR=500,GR=600,KR="_blank",QR="http://localhost";class Xw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YR(t,e,n,r=qR,i=GR){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},WR),{width:r.toString(),height:i.toString(),top:o,left:c}),f=Kr().toLowerCase();n&&(u=TS(f)?KR:n),SS(f)&&(e=e||QR,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[b,k])=>`${v}${b}=${k},`,"");if(g6(f)&&u!=="_self")return XR(e||"",u),new Xw(null);const y=window.open(e||"",u,g);_t(y,t,"popup-blocked");try{y.focus()}catch{}return new Xw(y)}function XR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="__/auth/handler",ZR="emulator/auth/handler",eM=encodeURIComponent("fac");async function Jw(t,e,n,r,i,o){_t(t.config.authDomain,t,"auth-domain-config-required"),_t(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Il,eventId:i};if(e instanceof VS){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",V3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof nh){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await t._getAppCheckToken(),f=h?`#${eM}=${encodeURIComponent(h)}`:"";return`${tM(t)}?${Zd(u).slice(1)}${f}`}function tM({config:t}){return t.emulator?nx(t,ZR):`https://${t.authDomain}/${JR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="webStorageSupport";class nM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WS,this._completeRedirectFn=SR,this._overrideRedirectResult=ER}async _openPopup(e,n,r,i){var o;Aa((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await Jw(e,n,r,Ay(),i);return YR(e,c,ox())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Jw(e,n,r,Ay(),i);return sR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Aa(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await HR(e),r=new TR(e);return n.register("authEvent",i=>(_t(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I0,{type:I0},i=>{var o;const c=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[I0];c!==void 0&&n(!!c),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RS()||AS()||ix()}}const rM=nM;var Zw="@firebase/auth",e_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aM(t){El(new bo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;_t(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MS(t)},f=new _6(r,i,o,h);return P6(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),El(new bo("auth-internal",e=>{const n=Rl(e.getProvider("auth").getImmediate());return(r=>new iM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Us(Zw,e_,sM(t)),Us(Zw,e_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=5*60,lM=dS("authIdTokenMaxAge")||oM;let t_=null;const cM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lM)return;const i=n==null?void 0:n.token;t_!==i&&(t_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uM(t=Zv()){const e=rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=I6(t,{popupRedirectResolver:rM,persistence:[pR,nR,WS]}),r=dS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=cM(o.toString());X6(n,c,()=>c(n.currentUser)),Y6(n,u=>c(u))}}const i=lS("auth");return i&&R6(n,`http://${i}`),n}function dM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}E6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=$s("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",dM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aM("Browser");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,JS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,I){function T(){}T.prototype=I.prototype,M.D=I.prototype,M.prototype=new T,M.prototype.constructor=M,M.C=function(N,V,U){for(var O=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)O[xe-2]=arguments[xe];return I.prototype[V].apply(N,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,I,T){T||(T=0);var N=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)N[V]=I.charCodeAt(T++)|I.charCodeAt(T++)<<8|I.charCodeAt(T++)<<16|I.charCodeAt(T++)<<24;else for(V=0;16>V;++V)N[V]=I[T++]|I[T++]<<8|I[T++]<<16|I[T++]<<24;I=M.g[0],T=M.g[1],V=M.g[2];var U=M.g[3],O=I+(U^T&(V^U))+N[0]+3614090360&4294967295;I=T+(O<<7&4294967295|O>>>25),O=U+(V^I&(T^V))+N[1]+3905402710&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(T^U&(I^T))+N[2]+606105819&4294967295,V=U+(O<<17&4294967295|O>>>15),O=T+(I^V&(U^I))+N[3]+3250441966&4294967295,T=V+(O<<22&4294967295|O>>>10),O=I+(U^T&(V^U))+N[4]+4118548399&4294967295,I=T+(O<<7&4294967295|O>>>25),O=U+(V^I&(T^V))+N[5]+1200080426&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(T^U&(I^T))+N[6]+2821735955&4294967295,V=U+(O<<17&4294967295|O>>>15),O=T+(I^V&(U^I))+N[7]+4249261313&4294967295,T=V+(O<<22&4294967295|O>>>10),O=I+(U^T&(V^U))+N[8]+1770035416&4294967295,I=T+(O<<7&4294967295|O>>>25),O=U+(V^I&(T^V))+N[9]+2336552879&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(T^U&(I^T))+N[10]+4294925233&4294967295,V=U+(O<<17&4294967295|O>>>15),O=T+(I^V&(U^I))+N[11]+2304563134&4294967295,T=V+(O<<22&4294967295|O>>>10),O=I+(U^T&(V^U))+N[12]+1804603682&4294967295,I=T+(O<<7&4294967295|O>>>25),O=U+(V^I&(T^V))+N[13]+4254626195&4294967295,U=I+(O<<12&4294967295|O>>>20),O=V+(T^U&(I^T))+N[14]+2792965006&4294967295,V=U+(O<<17&4294967295|O>>>15),O=T+(I^V&(U^I))+N[15]+1236535329&4294967295,T=V+(O<<22&4294967295|O>>>10),O=I+(V^U&(T^V))+N[1]+4129170786&4294967295,I=T+(O<<5&4294967295|O>>>27),O=U+(T^V&(I^T))+N[6]+3225465664&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^T&(U^I))+N[11]+643717713&4294967295,V=U+(O<<14&4294967295|O>>>18),O=T+(U^I&(V^U))+N[0]+3921069994&4294967295,T=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(T^V))+N[5]+3593408605&4294967295,I=T+(O<<5&4294967295|O>>>27),O=U+(T^V&(I^T))+N[10]+38016083&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^T&(U^I))+N[15]+3634488961&4294967295,V=U+(O<<14&4294967295|O>>>18),O=T+(U^I&(V^U))+N[4]+3889429448&4294967295,T=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(T^V))+N[9]+568446438&4294967295,I=T+(O<<5&4294967295|O>>>27),O=U+(T^V&(I^T))+N[14]+3275163606&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^T&(U^I))+N[3]+4107603335&4294967295,V=U+(O<<14&4294967295|O>>>18),O=T+(U^I&(V^U))+N[8]+1163531501&4294967295,T=V+(O<<20&4294967295|O>>>12),O=I+(V^U&(T^V))+N[13]+2850285829&4294967295,I=T+(O<<5&4294967295|O>>>27),O=U+(T^V&(I^T))+N[2]+4243563512&4294967295,U=I+(O<<9&4294967295|O>>>23),O=V+(I^T&(U^I))+N[7]+1735328473&4294967295,V=U+(O<<14&4294967295|O>>>18),O=T+(U^I&(V^U))+N[12]+2368359562&4294967295,T=V+(O<<20&4294967295|O>>>12),O=I+(T^V^U)+N[5]+4294588738&4294967295,I=T+(O<<4&4294967295|O>>>28),O=U+(I^T^V)+N[8]+2272392833&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^T)+N[11]+1839030562&4294967295,V=U+(O<<16&4294967295|O>>>16),O=T+(V^U^I)+N[14]+4259657740&4294967295,T=V+(O<<23&4294967295|O>>>9),O=I+(T^V^U)+N[1]+2763975236&4294967295,I=T+(O<<4&4294967295|O>>>28),O=U+(I^T^V)+N[4]+1272893353&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^T)+N[7]+4139469664&4294967295,V=U+(O<<16&4294967295|O>>>16),O=T+(V^U^I)+N[10]+3200236656&4294967295,T=V+(O<<23&4294967295|O>>>9),O=I+(T^V^U)+N[13]+681279174&4294967295,I=T+(O<<4&4294967295|O>>>28),O=U+(I^T^V)+N[0]+3936430074&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^T)+N[3]+3572445317&4294967295,V=U+(O<<16&4294967295|O>>>16),O=T+(V^U^I)+N[6]+76029189&4294967295,T=V+(O<<23&4294967295|O>>>9),O=I+(T^V^U)+N[9]+3654602809&4294967295,I=T+(O<<4&4294967295|O>>>28),O=U+(I^T^V)+N[12]+3873151461&4294967295,U=I+(O<<11&4294967295|O>>>21),O=V+(U^I^T)+N[15]+530742520&4294967295,V=U+(O<<16&4294967295|O>>>16),O=T+(V^U^I)+N[2]+3299628645&4294967295,T=V+(O<<23&4294967295|O>>>9),O=I+(V^(T|~U))+N[0]+4096336452&4294967295,I=T+(O<<6&4294967295|O>>>26),O=U+(T^(I|~V))+N[7]+1126891415&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~T))+N[14]+2878612391&4294967295,V=U+(O<<15&4294967295|O>>>17),O=T+(U^(V|~I))+N[5]+4237533241&4294967295,T=V+(O<<21&4294967295|O>>>11),O=I+(V^(T|~U))+N[12]+1700485571&4294967295,I=T+(O<<6&4294967295|O>>>26),O=U+(T^(I|~V))+N[3]+2399980690&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~T))+N[10]+4293915773&4294967295,V=U+(O<<15&4294967295|O>>>17),O=T+(U^(V|~I))+N[1]+2240044497&4294967295,T=V+(O<<21&4294967295|O>>>11),O=I+(V^(T|~U))+N[8]+1873313359&4294967295,I=T+(O<<6&4294967295|O>>>26),O=U+(T^(I|~V))+N[15]+4264355552&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~T))+N[6]+2734768916&4294967295,V=U+(O<<15&4294967295|O>>>17),O=T+(U^(V|~I))+N[13]+1309151649&4294967295,T=V+(O<<21&4294967295|O>>>11),O=I+(V^(T|~U))+N[4]+4149444226&4294967295,I=T+(O<<6&4294967295|O>>>26),O=U+(T^(I|~V))+N[11]+3174756917&4294967295,U=I+(O<<10&4294967295|O>>>22),O=V+(I^(U|~T))+N[2]+718787259&4294967295,V=U+(O<<15&4294967295|O>>>17),O=T+(U^(V|~I))+N[9]+3951481745&4294967295,M.g[0]=M.g[0]+I&4294967295,M.g[1]=M.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.u=function(M,I){I===void 0&&(I=M.length);for(var T=I-this.blockSize,N=this.B,V=this.h,U=0;U<I;){if(V==0)for(;U<=T;)i(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<I;)if(N[V++]=M.charCodeAt(U++),V==this.blockSize){i(this,N),V=0;break}}else for(;U<I;)if(N[V++]=M[U++],V==this.blockSize){i(this,N),V=0;break}}this.h=V,this.o+=I},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var I=1;I<M.length-8;++I)M[I]=0;var T=8*this.o;for(I=M.length-8;I<M.length;++I)M[I]=T&255,T/=256;for(this.u(M),M=Array(16),I=T=0;4>I;++I)for(var N=0;32>N;N+=8)M[T++]=this.g[I]>>>N&255;return M};function o(M,I){var T=u;return Object.prototype.hasOwnProperty.call(T,M)?T[M]:T[M]=I(M)}function c(M,I){this.h=I;for(var T=[],N=!0,V=M.length-1;0<=V;V--){var U=M[V]|0;N&&U==I||(T[V]=U,N=!1)}this.g=T}var u={};function h(M){return-128<=M&&128>M?o(M,function(I){return new c([I|0],0>I?-1:0)}):new c([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(0>M)return A(f(-M));for(var I=[],T=1,N=0;M>=T;N++)I[N]=M/T|0,T*=4294967296;return new c(I,0)}function g(M,I){if(M.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(M.charAt(0)=="-")return A(g(M.substring(1),I));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=f(Math.pow(I,8)),N=y,V=0;V<M.length;V+=8){var U=Math.min(8,M.length-V),O=parseInt(M.substring(V,V+U),I);8>U?(U=f(Math.pow(I,U)),N=N.j(U).add(f(O))):(N=N.j(T),N=N.add(f(O)))}return N}var y=h(0),v=h(1),b=h(16777216);t=c.prototype,t.m=function(){if(w(this))return-A(this).m();for(var M=0,I=1,T=0;T<this.g.length;T++){var N=this.i(T);M+=(0<=N?N:4294967296+N)*I,I*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(w(this))return"-"+A(this).toString(M);for(var I=f(Math.pow(M,6)),T=this,N="";;){var V=D(T,I).g;T=j(T,V.j(I));var U=((0<T.g.length?T.g[0]:T.h)>>>0).toString(M);if(T=V,k(T))return U+N;for(;6>U.length;)U="0"+U;N=U+N}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(var I=0;I<M.g.length;I++)if(M.g[I]!=0)return!1;return!0}function w(M){return M.h==-1}t.l=function(M){return M=j(this,M),w(M)?-1:k(M)?0:1};function A(M){for(var I=M.g.length,T=[],N=0;N<I;N++)T[N]=~M.g[N];return new c(T,~M.h).add(v)}t.abs=function(){return w(this)?A(this):this},t.add=function(M){for(var I=Math.max(this.g.length,M.g.length),T=[],N=0,V=0;V<=I;V++){var U=N+(this.i(V)&65535)+(M.i(V)&65535),O=(U>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);N=O>>>16,U&=65535,O&=65535,T[V]=O<<16|U}return new c(T,T[T.length-1]&-2147483648?-1:0)};function j(M,I){return M.add(A(I))}t.j=function(M){if(k(this)||k(M))return y;if(w(this))return w(M)?A(this).j(A(M)):A(A(this).j(M));if(w(M))return A(this.j(A(M)));if(0>this.l(b)&&0>M.l(b))return f(this.m()*M.m());for(var I=this.g.length+M.g.length,T=[],N=0;N<2*I;N++)T[N]=0;for(N=0;N<this.g.length;N++)for(var V=0;V<M.g.length;V++){var U=this.i(N)>>>16,O=this.i(N)&65535,xe=M.i(V)>>>16,Pe=M.i(V)&65535;T[2*N+2*V]+=O*Pe,R(T,2*N+2*V),T[2*N+2*V+1]+=U*Pe,R(T,2*N+2*V+1),T[2*N+2*V+1]+=O*xe,R(T,2*N+2*V+1),T[2*N+2*V+2]+=U*xe,R(T,2*N+2*V+2)}for(N=0;N<I;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=I;N<2*I;N++)T[N]=0;return new c(T,0)};function R(M,I){for(;(M[I]&65535)!=M[I];)M[I+1]+=M[I]>>>16,M[I]&=65535,I++}function L(M,I){this.g=M,this.h=I}function D(M,I){if(k(I))throw Error("division by zero");if(k(M))return new L(y,y);if(w(M))return I=D(A(M),I),new L(A(I.g),A(I.h));if(w(I))return I=D(M,A(I)),new L(A(I.g),I.h);if(30<M.g.length){if(w(M)||w(I))throw Error("slowDivide_ only works with positive integers.");for(var T=v,N=I;0>=N.l(M);)T=z(T),N=z(N);var V=G(T,1),U=G(N,1);for(N=G(N,2),T=G(T,2);!k(N);){var O=U.add(N);0>=O.l(M)&&(V=V.add(T),U=O),N=G(N,1),T=G(T,1)}return I=j(M,V.j(I)),new L(V,I)}for(V=y;0<=M.l(I);){for(T=Math.max(1,Math.floor(M.m()/I.m())),N=Math.ceil(Math.log(T)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),U=f(T),O=U.j(I);w(O)||0<O.l(M);)T-=N,U=f(T),O=U.j(I);k(U)&&(U=v),V=V.add(U),M=j(M,O)}return new L(V,M)}t.A=function(M){return D(this,M).h},t.and=function(M){for(var I=Math.max(this.g.length,M.g.length),T=[],N=0;N<I;N++)T[N]=this.i(N)&M.i(N);return new c(T,this.h&M.h)},t.or=function(M){for(var I=Math.max(this.g.length,M.g.length),T=[],N=0;N<I;N++)T[N]=this.i(N)|M.i(N);return new c(T,this.h|M.h)},t.xor=function(M){for(var I=Math.max(this.g.length,M.g.length),T=[],N=0;N<I;N++)T[N]=this.i(N)^M.i(N);return new c(T,this.h^M.h)};function z(M){for(var I=M.g.length+1,T=[],N=0;N<I;N++)T[N]=M.i(N)<<1|M.i(N-1)>>>31;return new c(T,M.h)}function G(M,I){var T=I>>5;I%=32;for(var N=M.g.length-T,V=[],U=0;U<N;U++)V[U]=0<I?M.i(U+T)>>>I|M.i(U+T+1)<<32-I:M.i(U+T);return new c(V,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,yo=c}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZS,Zu,eA,Zf,Iy,tA,nA,rA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,_,C){return p==Array.prototype||p==Object.prototype||(p[_]=C.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nf=="object"&&Nf];for(var _=0;_<p.length;++_){var C=p[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(p,_){if(_)e:{var C=r;p=p.split(".");for(var F=0;F<p.length-1;F++){var Z=p[F];if(!(Z in C))break e;C=C[Z]}p=p[p.length-1],F=C[p],_=_(F),_!=F&&_!=null&&e(C,p,{configurable:!0,writable:!0,value:_})}}function o(p,_){p instanceof String&&(p+="");var C=0,F=!1,Z={next:function(){if(!F&&C<p.length){var he=C++;return{value:_(he,p[he]),done:!1}}return F=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}i("Array.prototype.values",function(p){return p||function(){return o(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(p){var _=typeof p;return _=_!="object"?_:p?Array.isArray(p)?"array":_:"null",_=="array"||_=="object"&&typeof p.length=="number"}function f(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function g(p,_,C){return p.call.apply(p.bind,arguments)}function y(p,_,C){if(!p)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,F),p.apply(_,Z)}}return function(){return p.apply(_,arguments)}}function v(p,_,C){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function b(p,_){var C=Array.prototype.slice.call(arguments,1);return function(){var F=C.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function k(p,_){function C(){}C.prototype=_.prototype,p.aa=_.prototype,p.prototype=new C,p.prototype.constructor=p,p.Qb=function(F,Z,he){for(var Be=Array(arguments.length-2),sn=2;sn<arguments.length;sn++)Be[sn-2]=arguments[sn];return _.prototype[Z].apply(F,Be)}}function w(p){const _=p.length;if(0<_){const C=Array(_);for(let F=0;F<_;F++)C[F]=p[F];return C}return[]}function A(p,_){for(let C=1;C<arguments.length;C++){const F=arguments[C];if(h(F)){const Z=p.length||0,he=F.length||0;p.length=Z+he;for(let Be=0;Be<he;Be++)p[Z+Be]=F[Be]}else p.push(F)}}class j{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function R(p){return/^[\s\xa0]*$/.test(p)}function L(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function D(p){return D[" "](p),p}D[" "]=function(){};var z=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function G(p,_,C){for(const F in p)_.call(C,p[F],F,p)}function M(p,_){for(const C in p)_.call(void 0,p[C],C,p)}function I(p){const _={};for(const C in p)_[C]=p[C];return _}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(p,_){let C,F;for(let Z=1;Z<arguments.length;Z++){F=arguments[Z];for(C in F)p[C]=F[C];for(let he=0;he<T.length;he++)C=T[he],Object.prototype.hasOwnProperty.call(F,C)&&(p[C]=F[C])}}function V(p){var _=1;p=p.split(":");const C=[];for(;0<_&&p.length;)C.push(p.shift()),_--;return p.length&&C.push(p.join(":")),C}function U(p){u.setTimeout(()=>{throw p},0)}function O(){var p=ce;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class xe{constructor(){this.h=this.g=null}add(_,C){const F=Pe.get();F.set(_,C),this.h?this.h.next=F:this.g=F,this.h=F}}var Pe=new j(()=>new We,p=>p.reset());class We{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let He,de=!1,ce=new xe,oe=()=>{const p=u.Promise.resolve(void 0);He=()=>{p.then(H)}};var H=()=>{for(var p;p=O();){try{p.h.call(p.g)}catch(C){U(C)}var _=Pe;_.j(p),100>_.h&&(_.h++,p.next=_.g,_.g=p)}de=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,_),u.removeEventListener("test",C,_)}catch{}return p}();function Te(p,_){if(Ee.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var C=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget){if(z){e:{try{D(_.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(_=null)}}else C=="mouseover"?_=p.fromElement:C=="mouseout"&&(_=p.toElement);this.relatedTarget=_,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ve[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Te.aa.h.call(this)}}k(Te,Ee);var Ve={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),rt=0;function Ke(p,_,C,F,Z){this.listener=p,this.proxy=null,this.src=_,this.type=C,this.capture=!!F,this.ha=Z,this.key=++rt,this.da=this.fa=!1}function ct(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function kt(p){this.src=p,this.g={},this.h=0}kt.prototype.add=function(p,_,C,F,Z){var he=p.toString();p=this.g[he],p||(p=this.g[he]=[],this.h++);var Be=ht(p,_,F,Z);return-1<Be?(_=p[Be],C||(_.fa=!1)):(_=new Ke(_,this.src,he,!!F,Z),_.fa=C,p.push(_)),_};function mt(p,_){var C=_.type;if(C in p.g){var F=p.g[C],Z=Array.prototype.indexOf.call(F,_,void 0),he;(he=0<=Z)&&Array.prototype.splice.call(F,Z,1),he&&(ct(_),p.g[C].length==0&&(delete p.g[C],p.h--))}}function ht(p,_,C,F){for(var Z=0;Z<p.length;++Z){var he=p[Z];if(!he.da&&he.listener==_&&he.capture==!!C&&he.ha==F)return Z}return-1}var Dt="closure_lm_"+(1e6*Math.random()|0),re={};function qe(p,_,C,F,Z){if(Array.isArray(_)){for(var he=0;he<_.length;he++)qe(p,_[he],C,F,Z);return null}return C=Y(C),p&&p[Ge]?p.K(_,C,f(F)?!!F.capture:!1,Z):Se(p,_,C,!1,F,Z)}function Se(p,_,C,F,Z,he){if(!_)throw Error("Invalid event type");var Be=f(Z)?!!Z.capture:!!Z,sn=Qe(p);if(sn||(p[Dt]=sn=new kt(p)),C=sn.add(_,C,F,Be,he),C.proxy)return C;if(F=ge(),C.proxy=F,F.src=p,F.listener=C,p.addEventListener)$e||(Z=Be),Z===void 0&&(Z=!1),p.addEventListener(_.toString(),F,Z);else if(p.attachEvent)p.attachEvent(xt(_.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ge(){function p(C){return _.call(p.src,p.listener,C)}const _=be;return p}function Je(p,_,C,F,Z){if(Array.isArray(_))for(var he=0;he<_.length;he++)Je(p,_[he],C,F,Z);else F=f(F)?!!F.capture:!!F,C=Y(C),p&&p[Ge]?(p=p.i,_=String(_).toString(),_ in p.g&&(he=p.g[_],C=ht(he,C,F,Z),-1<C&&(ct(he[C]),Array.prototype.splice.call(he,C,1),he.length==0&&(delete p.g[_],p.h--)))):p&&(p=Qe(p))&&(_=p.g[_.toString()],p=-1,_&&(p=ht(_,C,F,Z)),(C=-1<p?_[p]:null)&&te(C))}function te(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[Ge])mt(_.i,p);else{var C=p.type,F=p.proxy;_.removeEventListener?_.removeEventListener(C,F,p.capture):_.detachEvent?_.detachEvent(xt(C),F):_.addListener&&_.removeListener&&_.removeListener(F),(C=Qe(_))?(mt(C,p),C.h==0&&(C.src=null,_[Dt]=null)):ct(p)}}}function xt(p){return p in re?re[p]:re[p]="on"+p}function be(p,_){if(p.da)p=!0;else{_=new Te(_,this);var C=p.listener,F=p.ha||p.src;p.fa&&te(p),p=C.call(F,_)}return p}function Qe(p){return p=p[Dt],p instanceof kt?p:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(p){return typeof p=="function"?p:(p[_e]||(p[_e]=function(_){return p.handleEvent(_)}),p[_e])}function pe(){J.call(this),this.i=new kt(this),this.M=this,this.F=null}k(pe,J),pe.prototype[Ge]=!0,pe.prototype.removeEventListener=function(p,_,C,F){Je(this,p,_,C,F)};function Re(p,_){var C,F=p.F;if(F)for(C=[];F;F=F.F)C.push(F);if(p=p.M,F=_.type||_,typeof _=="string")_=new Ee(_,p);else if(_ instanceof Ee)_.target=_.target||p;else{var Z=_;_=new Ee(F,p),N(_,Z)}if(Z=!0,C)for(var he=C.length-1;0<=he;he--){var Be=_.g=C[he];Z=se(Be,F,!0,_)&&Z}if(Be=_.g=p,Z=se(Be,F,!0,_)&&Z,Z=se(Be,F,!1,_)&&Z,C)for(he=0;he<C.length;he++)Be=_.g=C[he],Z=se(Be,F,!1,_)&&Z}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var p=this.i,_;for(_ in p.g){for(var C=p.g[_],F=0;F<C.length;F++)ct(C[F]);delete p.g[_],p.h--}}this.F=null},pe.prototype.K=function(p,_,C,F){return this.i.add(String(p),_,!1,C,F)},pe.prototype.L=function(p,_,C,F){return this.i.add(String(p),_,!0,C,F)};function se(p,_,C,F){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();for(var Z=!0,he=0;he<_.length;++he){var Be=_[he];if(Be&&!Be.da&&Be.capture==C){var sn=Be.listener,ur=Be.ha||Be.src;Be.fa&&mt(p.i,Be),Z=sn.call(ur,F)!==!1&&Z}}return Z&&!F.defaultPrevented}function Ue(p,_,C){if(typeof p=="function")C&&(p=v(p,C));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(p,_||0)}function ke(p){p.g=Ue(()=>{p.g=null,p.i&&(p.i=!1,ke(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class pt extends J{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ke(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pt(p){J.call(this),this.h=p,this.g={}}k(Pt,J);var dt=[];function Xt(p){G(p.g,function(_,C){this.g.hasOwnProperty(C)&&te(_)},p),p.g={}}Pt.prototype.N=function(){Pt.aa.N.call(this),Xt(this)},Pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=u.JSON.stringify,jn=u.JSON.parse,Ln=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function lr(){}lr.prototype.h=null;function yr(p){return p.h||(p.h=p.i())}function W(){}var q={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function le(){Ee.call(this,"d")}k(le,Ee);function X(){Ee.call(this,"c")}k(X,Ee);var ae={},Me=null;function Oe(){return Me=Me||new pe}ae.La="serverreachability";function ye(p){Ee.call(this,ae.La,p)}k(ye,Ee);function me(p){const _=Oe();Re(_,new ye(_))}ae.STAT_EVENT="statevent";function Ae(p,_){Ee.call(this,ae.STAT_EVENT,p),this.stat=_}k(Ae,Ee);function Ze(p){const _=Oe();Re(_,new Ae(_,p))}ae.Ma="timingevent";function bt(p,_){Ee.call(this,ae.Ma,p),this.size=_}k(bt,Ee);function ot(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},_)}function je(){this.g=!0}je.prototype.xa=function(){this.g=!1};function ze(p,_,C,F,Z,he){p.info(function(){if(p.g)if(he)for(var Be="",sn=he.split("&"),ur=0;ur<sn.length;ur++){var Bt=sn[ur].split("=");if(1<Bt.length){var br=Bt[0];Bt=Bt[1];var tr=br.split("_");Be=2<=tr.length&&tr[1]=="type"?Be+(br+"="+Bt+"&"):Be+(br+"=redacted&")}}else Be=null;else Be=he;return"XMLHTTP REQ ("+F+") [attempt "+Z+"]: "+_+`
`+C+`
`+Be})}function Lt(p,_,C,F,Z,he,Be){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+Z+"]: "+_+`
`+C+`
`+he+" "+Be})}function jt(p,_,C,F){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+Wt(p,C)+(F?" "+F:"")})}function en(p,_){p.info(function(){return"TIMEOUT: "+_})}je.prototype.info=function(){};function Wt(p,_){if(!p.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(p=0;p<C.length;p++)if(Array.isArray(C[p])){var F=C[p];if(!(2>F.length)){var Z=F[1];if(Array.isArray(Z)&&!(1>Z.length)){var he=Z[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Be=1;Be<Z.length;Be++)Z[Be]=""}}}}return Cn(C)}catch{return _}}var Vn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},it={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tn;function Kt(){}k(Kt,lr),Kt.prototype.g=function(){return new XMLHttpRequest},Kt.prototype.i=function(){return{}},tn=new Kt;function cr(p,_,C,F){this.j=p,this.i=_,this.l=C,this.R=F||1,this.U=new Pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lr}function Lr(){this.i=null,this.g="",this.h=!1}var na={},si={};function ys(p,_,C){p.L=1,p.v=ws(Jr(_)),p.m=C,p.P=!0,Xi(p,null)}function Xi(p,_){p.F=Date.now(),on(p),p.A=Jr(p.v);var C=p.A,F=p.R;Array.isArray(F)||(F=[String(F)]),vr(C.i,"t",F),p.C=0,C=p.j.J,p.h=new Lr,p.g=Sh(p.j,C?_:null,!p.m),0<p.O&&(p.M=new pt(v(p.Y,p,p.g),p.O)),_=p.U,C=p.g,F=p.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(dt[0]=Z.toString()),Z=dt);for(var he=0;he<Z.length;he++){var Be=qe(C,Z[he],F||_.handleEvent,!1,_.h||_);if(!Be)break;_.g[Be.key]=Be}_=p.H?I(p.H):{},p.m?(p.u||(p.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,_)):(p.u="GET",p.g.ea(p.A,p.u,null,_)),me(),ze(p.i,p.u,p.A,p.l,p.R,p.m)}cr.prototype.ca=function(p){p=p.target;const _=this.M;_&&oi(p)==3?_.j():this.Y(p)},cr.prototype.Y=function(p){try{if(p==this.g)e:{const tr=oi(this.g);var _=this.g.Ba();const Di=this.g.Z();if(!(3>tr)&&(tr!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||tr!=4||_==7||(_==8||0>=Di?me(3):me(2)),vs(this);var C=this.g.Z();this.X=C;t:if(Vl(this)){var F=vu(this.g);p="";var Z=F.length,he=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),ai(this);var Be="";break t}this.h.i=new u.TextDecoder}for(_=0;_<Z;_++)this.h.h=!0,p+=this.h.i.decode(F[_],{stream:!(he&&_==Z-1)});F.length=0,this.h.g+=p,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=C==200,Lt(this.i,this.u,this.A,this.l,this.R,tr,C),this.o){if(this.T&&!this.K){t:{if(this.g){var sn,ur=this.g;if((sn=ur.g?ur.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(sn)){var Bt=sn;break t}}Bt=null}if(C=Bt)jt(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,La(this,C);else{this.o=!1,this.s=3,Ze(12),Qr(this),ai(this);break e}}if(this.P){C=!0;let Ei;for(;!this.J&&this.C<Be.length;)if(Ei=bh(this,Be),Ei==si){tr==4&&(this.s=4,Ze(14),C=!1),jt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ei==na){this.s=4,Ze(15),jt(this.i,this.l,Be,"[Invalid Chunk]"),C=!1;break}else jt(this.i,this.l,Ei,null),La(this,Ei);if(Vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tr!=4||Be.length!=0||this.h.h||(this.s=1,Ze(16),C=!1),this.o=this.o&&C,!C)jt(this.i,this.l,Be,"[Invalid Chunked Response]"),Qr(this),ai(this);else if(0<Be.length&&!this.W){this.W=!0;var br=this.j;br.g==this&&br.ba&&!br.M&&(br.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),bu(br),br.M=!0,Ze(11))}}else jt(this.i,this.l,Be,null),La(this,Be);tr==4&&Qr(this),this.o&&!this.J&&(tr==4?Kl(this.j,this):(this.o=!1,on(this)))}else Bl(this.g),C==400&&0<Be.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),Qr(this),ai(this)}}}catch{}finally{}};function Vl(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function bh(p,_){var C=p.C,F=_.indexOf(`
`,C);return F==-1?si:(C=Number(_.substring(C,F)),isNaN(C)?na:(F+=1,F+C>_.length?si:(_=_.slice(F,F+C),p.C=F+C,_)))}cr.prototype.cancel=function(){this.J=!0,Qr(this)};function on(p){p.S=Date.now()+p.I,Fo(p,p.I)}function Fo(p,_){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ot(v(p.ba,p),_)}function vs(p){p.B&&(u.clearTimeout(p.B),p.B=null)}cr.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(en(this.i,this.A),this.L!=2&&(me(),Ze(17)),Qr(this),this.s=2,ai(this)):Fo(this,this.S-p)};function ai(p){p.j.G==0||p.J||Kl(p.j,p)}function Qr(p){vs(p);var _=p.M;_&&typeof _.ma=="function"&&_.ma(),p.M=null,Xt(p.U),p.g&&(_=p.g,p.g=null,_.abort(),_.ma())}function La(p,_){try{var C=p.j;if(C.G!=0&&(C.g==p||Fn(C.h,p))){if(!p.K&&Fn(C.h,p)&&C.G==3){try{var F=C.Da.g.parse(_)}catch{F=null}if(Array.isArray(F)&&F.length==3){var Z=F;if(Z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<p.F)Gl(C),ns(C);else break e;ql(C),Ze(18)}}else C.za=Z[1],0<C.za-C.T&&37500>Z[2]&&C.F&&C.v==0&&!C.C&&(C.C=ot(v(C.Za,C),6e3));if(1>=er(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ca(C,11)}else if((p.K||C.g==p)&&Gl(C),!R(_))for(Z=C.Da.g.parse(_),_=0;_<Z.length;_++){let Bt=Z[_];if(C.T=Bt[0],Bt=Bt[1],C.G==2)if(Bt[0]=="c"){C.K=Bt[1],C.ia=Bt[2];const br=Bt[3];br!=null&&(C.la=br,C.j.info("VER="+C.la));const tr=Bt[4];tr!=null&&(C.Aa=tr,C.j.info("SVER="+C.Aa));const Di=Bt[5];Di!=null&&typeof Di=="number"&&0<Di&&(F=1.5*Di,C.L=F,C.j.info("backChannelRequestTimeoutMs_="+F)),F=C;const Ei=p.g;if(Ei){const Ho=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ho){var he=F.h;he.g||Ho.indexOf("spdy")==-1&&Ho.indexOf("quic")==-1&&Ho.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Va(he,he.h),he.h=null))}if(F.D){const Yl=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Yl&&(F.ya=Yl,rn(F.I,F.D,Yl))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-p.F,C.j.info("Handshake RTT: "+C.R+"ms")),F=C;var Be=p;if(F.qa=kh(F,F.J?F.ia:null,F.W),Be.K){Uo(F.h,Be);var sn=Be,ur=F.L;ur&&(sn.I=ur),sn.B&&(vs(sn),on(sn)),F.g=Be}else Bo(F);0<C.i.length&&ks(C)}else Bt[0]!="stop"&&Bt[0]!="close"||ca(C,7);else C.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?ca(C,7):Ar(C):Bt[0]!="noop"&&C.l&&C.l.ta(Bt),C.v=0)}}me(4)}catch{}}var Fl=class{constructor(p,_){this.g=p,this.map=_}};function Yr(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function er(p){return p.h?1:p.g?p.g.size:0}function Fn(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function Va(p,_){p.g?p.g.add(_):p.h=_}function Uo(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}Yr.prototype.cancel=function(){if(this.i=Ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ul(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const C of p.g.values())_=_.concat(C.D);return _}return w(p.i)}function Fa(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var _=[],C=p.length,F=0;F<C;F++)_.push(p[F]);return _}_=[],C=0;for(F in p)_[C++]=p[F];return _}function Ua(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var _=[];p=p.length;for(var C=0;C<p;C++)_.push(C);return _}_=[],C=0;for(const F in p)_[C++]=F;return _}}}function xs(p,_){if(p.forEach&&typeof p.forEach=="function")p.forEach(_,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,_,void 0);else for(var C=Ua(p),F=Fa(p),Z=F.length,he=0;he<Z;he++)_.call(void 0,F[he],C&&C[he],p)}var ra=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mu(p,_){if(p){p=p.split("&");for(var C=0;C<p.length;C++){var F=p[C].indexOf("="),Z=null;if(0<=F){var he=p[C].substring(0,F);Z=p[C].substring(F+1)}else he=p[C];_(he,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Ji(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ji){this.h=p.h,ia(this,p.j),this.o=p.o,this.g=p.g,Zi(this,p.s),this.l=p.l;var _=p.i,C=new zt;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),bs(this,C),this.m=p.m}else p&&(_=String(p).match(ra))?(this.h=!1,ia(this,_[1]||"",!0),this.o=Ot(_[2]||""),this.g=Ot(_[3]||"",!0),Zi(this,_[4]),this.l=Ot(_[5]||"",!0),bs(this,_[6]||"",!0),this.m=Ot(_[7]||"")):(this.h=!1,this.i=new zt(null,this.h))}Ji.prototype.toString=function(){var p=[],_=this.j;_&&p.push(_s(_,aa,!0),":");var C=this.g;return(C||_=="file")&&(p.push("//"),(_=this.o)&&p.push(_s(_,aa,!0),"@"),p.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&p.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(_s(C,C.charAt(0)=="/"?fe:$,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",_s(C,wt)),p.join("")};function Jr(p){return new Ji(p)}function ia(p,_,C){p.j=C?Ot(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function Zi(p,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);p.s=_}else p.s=null}function bs(p,_,C){_ instanceof zt?(p.i=_,En(p.i,p.h)):(C||(_=_s(_,Ye)),p.i=new zt(_,p.h))}function rn(p,_,C){p.i.set(_,C)}function ws(p){return rn(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Ot(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function _s(p,_,C){return typeof p=="string"?(p=encodeURI(p).replace(_,sa),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function sa(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var aa=/[#\/\?@]/g,$=/[#\?:]/g,fe=/[#\?]/g,Ye=/[#\?@]/g,wt=/#/g;function zt(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function Vt(p){p.g||(p.g=new Map,p.h=0,p.i&&mu(p.i,function(_,C){p.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=zt.prototype,t.add=function(p,_){Vt(this),this.i=null,p=$n(this,p);var C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(_),this.h+=1,this};function dn(p,_){Vt(p),_=$n(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function Un(p,_){return Vt(p),_=$n(p,_),p.g.has(_)}t.forEach=function(p,_){Vt(this),this.g.forEach(function(C,F){C.forEach(function(Z){p.call(_,Z,F,this)},this)},this)},t.na=function(){Vt(this);const p=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let F=0;F<_.length;F++){const Z=p[F];for(let he=0;he<Z.length;he++)C.push(_[F])}return C},t.V=function(p){Vt(this);let _=[];if(typeof p=="string")Un(this,p)&&(_=_.concat(this.g.get($n(this,p))));else{p=Array.from(this.g.values());for(let C=0;C<p.length;C++)_=_.concat(p[C])}return _},t.set=function(p,_){return Vt(this),this.i=null,p=$n(this,p),Un(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},t.get=function(p,_){return p?(p=this.V(p),0<p.length?String(p[0]):_):_};function vr(p,_,C){dn(p,_),0<C.length&&(p.i=null,p.g.set($n(p,_),w(C)),p.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var F=_[C];const he=encodeURIComponent(String(F)),Be=this.V(F);for(F=0;F<Be.length;F++){var Z=he;Be[F]!==""&&(Z+="="+encodeURIComponent(String(Be[F]))),p.push(Z)}}return this.i=p.join("&")};function $n(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function En(p,_){_&&!p.j&&(Vt(p),p.i=null,p.g.forEach(function(C,F){var Z=F.toLowerCase();F!=Z&&(dn(this,F),vr(this,Z,C))},p)),p.j=_}function Qt(p,_){const C=new je;if(u.Image){const F=new Image;F.onload=b(kr,C,"TestLoadImage: loaded",!0,_,F),F.onerror=b(kr,C,"TestLoadImage: error",!1,_,F),F.onabort=b(kr,C,"TestLoadImage: abort",!1,_,F),F.ontimeout=b(kr,C,"TestLoadImage: timeout",!1,_,F),u.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else _(!1)}function Es(p,_){const C=new je,F=new AbortController,Z=setTimeout(()=>{F.abort(),kr(C,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:F.signal}).then(he=>{clearTimeout(Z),he.ok?kr(C,"TestPingServer: ok",!0,_):kr(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Z),kr(C,"TestPingServer: error",!1,_)})}function kr(p,_,C,F,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),F(C)}catch{}}function ln(){this.g=new Ln}function Sr(p,_,C){const F=C||"";try{xs(p,function(Z,he){let Be=Z;f(Z)&&(Be=Cn(Z)),_.push(F+he+"="+encodeURIComponent(Be))})}catch(Z){throw _.push(F+"type="+encodeURIComponent("_badmap")),Z}}function xr(p){this.l=p.Ub||null,this.j=p.eb||!1}k(xr,lr),xr.prototype.g=function(){return new $o(this.l,this.j)},xr.prototype.i=function(p){return function(){return p}}({});function $o(p,_){pe.call(this),this.D=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k($o,pe),t=$o.prototype,t.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=_,this.readyState=1,ts(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(_.body=p),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wh(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function wh(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?es(this):ts(this),this.readyState==3&&wh(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,es(this))},t.Qa=function(p){this.g&&(this.response=p,es(this))},t.ga=function(){this.g&&es(this)};function es(p){p.readyState=4,p.l=null,p.j=null,p.v=null,ts(p)}t.setRequestHeader=function(p,_){this.u.append(p,_)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=_.next();return p.join(`\r
`)};function ts(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty($o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function oa(p){let _="";return G(p,function(C,F){_+=F,_+=":",_+=C,_+=`\r
`}),_}function $a(p,_,C){e:{for(F in C){var F=!1;break e}F=!0}F||(C=oa(C),typeof p=="string"?C!=null&&encodeURIComponent(String(C)):rn(p,_,C))}function Nn(p){pe.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Nn,pe);var Jm=/^https?$/i,gu=["POST","PUT"];t=Nn.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,_,C,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tn.g(),this.v=this.o?yr(this.o):yr(tn),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(he){zo(this,he);return}if(p=C||"",C=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var Z in F)C.set(Z,F[Z]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const he of F.keys())C.set(he,F.get(he));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(C.keys()).find(he=>he.toLowerCase()=="content-type"),Z=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(gu,_,void 0))||F||Z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Be]of C)this.g.setRequestHeader(he,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zl(this),this.u=!0,this.g.send(p),this.u=!1}catch(he){zo(this,he)}};function zo(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.m=5,$l(p),_i(p)}function $l(p){p.A||(p.A=!0,Re(p,"complete"),Re(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Re(this,"complete"),Re(this,"abort"),_i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),Nn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yu(this):this.bb())},t.bb=function(){yu(this)};function yu(p){if(p.h&&typeof c<"u"&&(!p.v[1]||oi(p)!=4||p.Z()!=2)){if(p.u&&oi(p)==4)Ue(p.Ea,0,p);else if(Re(p,"readystatechange"),oi(p)==4){p.h=!1;try{const Be=p.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var F;if(F=Be===0){var Z=String(p.D).match(ra)[1]||null;!Z&&u.self&&u.self.location&&(Z=u.self.location.protocol.slice(0,-1)),F=!Jm.test(Z?Z.toLowerCase():"")}C=F}if(C)Re(p,"complete"),Re(p,"success");else{p.m=6;try{var he=2<oi(p)?p.g.statusText:""}catch{he=""}p.l=he+" ["+p.Z()+"]",$l(p)}}finally{_i(p)}}}}function _i(p,_){if(p.g){zl(p);const C=p.g,F=p.v[0]?()=>{}:null;p.g=null,p.v=null,_||Re(p,"ready");try{C.onreadystatechange=F}catch{}}}function zl(p){p.I&&(u.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function oi(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),jn(_)}};function vu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Bl(p){const _={};p=(p.g&&2<=oi(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(R(p[F]))continue;var C=V(p[F]);const Z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const he=_[Z]||[];_[Z]=he,he.push(C)}M(_,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ns(p,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||_}function xu(p){this.Aa=0,this.i=[],this.j=new je,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ns("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ns("baseRetryDelayMs",5e3,p),this.cb=Ns("retryDelaySeedMs",1e4,p),this.Wa=Ns("forwardChannelMaxRetries",2,p),this.wa=Ns("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Yr(p&&p.concurrentRequestLimit),this.Da=new ln,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xu.prototype,t.la=8,t.G=1,t.connect=function(p,_,C,F){Ze(0),this.W=p,this.H=_||{},C&&F!==void 0&&(this.H.OSID=C,this.H.OAID=F),this.F=this.X,this.I=kh(this,null,this.W),ks(this)};function Ar(p){if(Hl(p),p.G==3){var _=p.U++,C=Jr(p.I);if(rn(C,"SID",p.K),rn(C,"RID",_),rn(C,"TYPE","terminate"),la(p,C),_=new cr(p,p.j,_),_.L=2,_.v=ws(Jr(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=_.v,C=!0),C||(_.g=Sh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),on(_)}Nh(p)}function ns(p){p.g&&(bu(p),p.g.cancel(),p.g=null)}function Hl(p){ns(p),p.u&&(u.clearTimeout(p.u),p.u=null),Gl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function ks(p){if(!Xr(p.h)&&!p.s){p.s=!0;var _=p.Ga;He||oe(),de||(He(),de=!0),ce.add(_,p),p.B=0}}function Zm(p,_){return er(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=_.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ot(v(p.Ga,p,_),Eh(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Z=new cr(this,this.j,p);let he=this.o;if(this.S&&(he?(he=I(he),N(he,this.S)):he=this.S),this.m!==null||this.O||(Z.H=he,he=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var F=this.i[C];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(_+=F,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=za(this,Z,_),C=Jr(this.I),rn(C,"RID",p),rn(C,"CVER",22),this.D&&rn(C,"X-HTTP-Session-Id",this.D),la(this,C),he&&(this.O?_="headers="+encodeURIComponent(String(oa(he)))+"&"+_:this.m&&$a(C,this.m,he)),Va(this.h,Z),this.Ua&&rn(C,"TYPE","init"),this.P?(rn(C,"$req",_),rn(C,"SID","null"),Z.T=!0,ys(Z,C,null)):ys(Z,C,_),this.G=2}}else this.G==3&&(p?Wl(this,p):this.i.length==0||Xr(this.h)||Wl(this))};function Wl(p,_){var C;_?C=_.l:C=p.U++;const F=Jr(p.I);rn(F,"SID",p.K),rn(F,"RID",C),rn(F,"AID",p.T),la(p,F),p.m&&p.o&&$a(F,p.m,p.o),C=new cr(p,p.j,C,p.B+1),p.m===null&&(C.H=p.o),_&&(p.i=_.D.concat(p.i)),_=za(p,C,1e3),C.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Va(p.h,C),ys(C,F,_)}function la(p,_){p.H&&G(p.H,function(C,F){rn(_,F,C)}),p.l&&xs({},function(C,F){rn(_,F,C)})}function za(p,_,C){C=Math.min(p.i.length,C);var F=p.l?v(p.l.Na,p.l,p):null;e:{var Z=p.i;let he=-1;for(;;){const Be=["count="+C];he==-1?0<C?(he=Z[0].g,Be.push("ofs="+he)):he=0:Be.push("ofs="+he);let sn=!0;for(let ur=0;ur<C;ur++){let Bt=Z[ur].g;const br=Z[ur].map;if(Bt-=he,0>Bt)he=Math.max(0,Z[ur].g-100),sn=!1;else try{Sr(br,Be,"req"+Bt+"_")}catch{F&&F(br)}}if(sn){F=Be.join("&");break e}}}return p=p.i.splice(0,C),_.D=p,F}function Bo(p){if(!p.g&&!p.u){p.Y=1;var _=p.Fa;He||oe(),de||(He(),de=!0),ce.add(_,p),p.v=0}}function ql(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ot(v(p.Fa,p),Eh(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,_h(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ot(v(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),ns(this),_h(this))};function bu(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function _h(p){p.g=new cr(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var _=Jr(p.qa);rn(_,"RID","rpc"),rn(_,"SID",p.K),rn(_,"AID",p.T),rn(_,"CI",p.F?"0":"1"),!p.F&&p.ja&&rn(_,"TO",p.ja),rn(_,"TYPE","xmlhttp"),la(p,_),p.m&&p.o&&$a(_,p.m,p.o),p.L&&(p.g.I=p.L);var C=p.g;p=p.ia,C.L=1,C.v=ws(Jr(_)),C.m=null,C.P=!0,Xi(C,p)}t.Za=function(){this.C!=null&&(this.C=null,ns(this),ql(this),Ze(19))};function Gl(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Kl(p,_){var C=null;if(p.g==_){Gl(p),bu(p),p.g=null;var F=2}else if(Fn(p.h,_))C=_.D,Uo(p.h,_),F=1;else return;if(p.G!=0){if(_.o)if(F==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var Z=p.B;F=Oe(),Re(F,new bt(F,C)),ks(p)}else Bo(p);else if(Z=_.s,Z==3||Z==0&&0<_.X||!(F==1&&Zm(p,_)||F==2&&ql(p)))switch(C&&0<C.length&&(_=p.h,_.i=_.i.concat(C)),Z){case 1:ca(p,5);break;case 4:ca(p,10);break;case 3:ca(p,6);break;default:ca(p,2)}}}function Eh(p,_){let C=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(C*=2),C*_}function ca(p,_){if(p.j.info("Error code "+_),_==2){var C=v(p.fb,p),F=p.Xa;const Z=!F;F=new Ji(F||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ia(F,"https"),ws(F),Z?Qt(F.toString(),C):Es(F.toString(),C)}else Ze(2);p.G=0,p.l&&p.l.sa(_),Nh(p),Hl(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Nh(p){if(p.G=0,p.ka=[],p.l){const _=Ul(p.h);(_.length!=0||p.i.length!=0)&&(A(p.ka,_),A(p.ka,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.ra()}}function kh(p,_,C){var F=C instanceof Ji?Jr(C):new Ji(C);if(F.g!="")_&&(F.g=_+"."+F.g),Zi(F,F.s);else{var Z=u.location;F=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;var he=new Ji(null);F&&ia(he,F),_&&(he.g=_),Z&&Zi(he,Z),C&&(he.l=C),F=he}return C=p.D,_=p.ya,C&&_&&rn(F,C,_),rn(F,"VER",p.la),la(p,F),F}function Sh(p,_,C){if(_&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Ca&&!p.pa?new Nn(new xr({eb:C})):new Nn(p.pa),_.Ha(p.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wu(){}t=wu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ql(){}Ql.prototype.g=function(p,_){return new Zr(p,_)};function Zr(p,_){pe.call(this),this.g=new xu(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(p?p["X-WebChannel-Client-Profile"]=_.va:p={"X-WebChannel-Client-Profile":_.va}),this.g.S=p,(p=_&&_.Sb)&&!R(p)&&(this.g.m=p),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!R(_)&&(this.g.D=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new Ss(this)}k(Zr,pe),Zr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zr.prototype.close=function(){Ar(this.g)},Zr.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.u&&(C={},C.__data__=Cn(p),p=C);_.i.push(new Fl(_.Ya++,p)),_.G==3&&ks(_)},Zr.prototype.N=function(){this.g.l=null,delete this.j,Ar(this.g),delete this.g,Zr.aa.N.call(this)};function Ah(p){le.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){e:{for(const C in _){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}k(Ah,le);function Th(){X.call(this),this.status=1}k(Th,X);function Ss(p){this.g=p}k(Ss,wu),Ss.prototype.ua=function(){Re(this.g,"a")},Ss.prototype.ta=function(p){Re(this.g,new Ah(p))},Ss.prototype.sa=function(p){Re(this.g,new Th)},Ss.prototype.ra=function(){Re(this.g,"b")},Ql.prototype.createWebChannel=Ql.prototype.g,Zr.prototype.send=Zr.prototype.o,Zr.prototype.open=Zr.prototype.m,Zr.prototype.close=Zr.prototype.close,rA=function(){return new Ql},nA=function(){return Oe()},tA=ae,Iy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,Zf=Vn,it.COMPLETE="complete",eA=it,W.EventType=q,q.OPEN="a",q.CLOSE="b",q.ERROR="c",q.MESSAGE="d",pe.prototype.listen=pe.prototype.K,Zu=W,Nn.prototype.listenOnce=Nn.prototype.L,Nn.prototype.getLastError=Nn.prototype.Ka,Nn.prototype.getLastErrorCode=Nn.prototype.Ba,Nn.prototype.getStatus=Nn.prototype.Z,Nn.prototype.getResponseJson=Nn.prototype.Oa,Nn.prototype.getResponseText=Nn.prototype.oa,Nn.prototype.send=Nn.prototype.ea,Nn.prototype.setWithCredentials=Nn.prototype.Ha,ZS=Nn}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});const r_="@firebase/firestore",i_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new Xv("@firebase/firestore");function kc(){return Sl.logLevel}function tt(t,...e){if(Sl.logLevel<=Ft.DEBUG){const n=e.map(cx);Sl.debug(`Firestore (${su}): ${t}`,...n)}}function Ta(t,...e){if(Sl.logLevel<=Ft.ERROR){const n=e.map(cx);Sl.error(`Firestore (${su}): ${t}`,...n)}}function wo(t,...e){if(Sl.logLevel<=Ft.WARN){const n=e.map(cx);Sl.warn(`Firestore (${su}): ${t}`,...n)}}function cx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iA(t,r,n)}function iA(t,e,n){let r=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ta(r),new Error(r)}function nn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||iA(e,i,r)}function Ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends ta{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Hr.UNAUTHENTICATED))}shutdown(){}}class fM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pM{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nn(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Na,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Na)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn(typeof r.accessToken=="string",31837,{l:r}),new sA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new Hr(e)}}class mM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nn(this.o===void 0,3512);const r=o=>{o.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=vM(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Rt(t,e){return t<e?-1:t>e?1:0}function Py(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Rt(r,i);{const o=aA(),c=xM(o.encode(a_(t,n)),o.encode(a_(e,n)));return c!==0?c:Rt(r,i)}}n+=r>65535?2:1}return Rt(t.length,e.length)}function a_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Rt(t[n],e[n]);return Rt(t.length,e.length)}function Wc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="__name__";class Ms{constructor(e,n,r){n===void 0?n=0:n>e.length&&Et(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Et(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Ms.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Rt(e.length,n.length)}static compareSegments(e,n){const r=Ms.isNumericId(e),i=Ms.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ms.extractNumericId(e).compare(Ms.extractNumericId(n)):Py(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yo.fromString(e.substring(4,e.length-2))}}class gn extends Ms{construct(e,n,r){return new gn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Xe(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gn(n)}static emptyPath(){return new gn([])}}const bM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Ms{construct(e,n,r){return new Mr(e,n,r)}static isValidIdentifier(e){return bM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o_}static keyField(){return new Mr([o_])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Xe(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Xe(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Xe(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(o(),i++)}if(o(),c)throw new Xe(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(n)}static emptyPath(){return new Mr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(gn.fromString(e))}static fromName(e){return new ft(gn.fromString(e).popFirst(5))}static empty(){return new ft(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new gn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e,n){if(!n)throw new Xe(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wM(t,e,n,r){if(e===!0&&r===!0)throw new Xe(we.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function l_(t){if(!ft.isDocumentKey(t))throw new Xe(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function c_(t){if(ft.isDocumentKey(t))throw new Xe(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et(12329,{type:typeof t})}function xi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xe(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=om(t);throw new Xe(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _M(t,e){if(e<=0)throw new Xe(we.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){const n={typeString:t};return e&&(n.value=e),n}function ih(t,e){if(!lA(t))throw new Xe(we.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Xe(we.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=-62135596800,d_=1e6;class wn{static now(){return wn.fromMillis(Date.now())}static fromDate(e){return wn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*d_);return new wn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Xe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<u_)throw new Xe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d_}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ih(e,wn._jsonSchema))return new wn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-u_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wn._jsonSchemaVersion="firestore/timestamp/1.0",wn._jsonSchema={type:or("string",wn._jsonSchemaVersion),seconds:or("number"),nanoseconds:or("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(e){return new At(e)}static min(){return new At(new wn(0,0))}static max(){return new At(new wn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=-1;function EM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=At.fromTimestamp(r===1e9?new wn(n+1,0):new wn(n,r));return new _o(i,ft.empty(),e)}function NM(t){return new _o(t.readTime,t.key,Sd)}class _o{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _o(At.min(),ft.empty(),Sd)}static max(){return new _o(At.max(),ft.empty(),Sd)}}function kM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ft.comparator(t.documentKey,e.documentKey),n!==0?n:Rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==SM)throw t;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ne((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.reject(n)}static resolve(e){return new Ne((n,r)=>{n(e)})}static reject(e){return new Ne((n,r)=>{r(e)})}static waitFor(e){return new Ne((n,r)=>{let i=0,o=0,c=!1;e.forEach(u=>{++i,u.next(()=>{++o,c&&o===i&&n()},h=>r(h))}),c=!0,o===i&&n()})}static or(e){let n=Ne.resolve(!1);for(const r of e)n=n.next(i=>i?Ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Ne((r,i)=>{const o=e.length,c=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(g=>{c[f]=g,++u,u===o&&r(c)},g=>i(g))}})}static doWhile(e,n){return new Ne((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function TM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ou(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}lm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=-1;function cm(t){return t==null}function kp(t){return t===0&&1/t==-1/0}function CM(t){return typeof t=="number"&&Number.isInteger(t)&&!kp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="";function jM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=h_(e)),e=IM(t.get(n),e);return h_(e)}function IM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case cA:n+="";break;default:n+=o}}return n}function h_(t){return t+cA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.comparator=e,this.root=n||Pr.EMPTY}insert(e,n){return new Dn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kf(this.root,e,this.comparator,!0)}}class kf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Pr.RED,this.left=i??Pr.EMPTY,this.right=o??Pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Pr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1;Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(e){return new p_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mr(this.comparator);return n.data=e,n}}class p_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new ji([])}unionWith(e){let n=new mr(Mr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ji(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dA("Invalid base64 string: "+o):o}}(e);return new Or(n)}static fromUint8Array(e){const n=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Or(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const PM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(t){if(nn(!!t,39018),typeof t=="string"){let e=0;const n=PM.exec(t);if(nn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(t.seconds),nanos:Yn(t.nanos)}}function Yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function No(t){return typeof t=="string"?Or.fromBase64String(t):Or.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="server_timestamp",fA="__type__",pA="__previous_value__",mA="__local_write_time__";function hx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[fA])===null||n===void 0?void 0:n.stringValue)===hA}function um(t){const e=t.mapValue.fields[pA];return hx(e)?um(e):e}function Ad(t){const e=Eo(t.mapValue.fields[mA].timestampValue);return new wn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,r,i,o,c,u,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Sp="(default)";class Td{constructor(e,n){this.projectId=e,this.database=n||Sp}static empty(){return new Td("","")}get isDefaultDatabase(){return this.database===Sp}isEqual(e){return e instanceof Td&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="__type__",MM="__max__",Sf={mapValue:{}},yA="__vector__",Ap="value";function ko(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hx(t)?4:OM(t)?9007199254740991:DM(t)?10:11:Et(28295,{value:t})}function Js(t,e){if(t===e)return!0;const n=ko(t);if(n!==ko(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ad(t).isEqual(Ad(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Eo(i.timestampValue),u=Eo(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return No(i.bytesValue).isEqual(No(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Yn(i.geoPointValue.latitude)===Yn(o.geoPointValue.latitude)&&Yn(i.geoPointValue.longitude)===Yn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Yn(i.integerValue)===Yn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=Yn(i.doubleValue),u=Yn(o.doubleValue);return c===u?kp(c)===kp(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return Wc(t.arrayValue.values||[],e.arrayValue.values||[],Js);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},u=o.mapValue.fields||{};if(f_(c)!==f_(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!Js(c[h],u[h])))return!1;return!0}(t,e);default:return Et(52216,{left:t})}}function Cd(t,e){return(t.values||[]).find(n=>Js(n,e))!==void 0}function qc(t,e){if(t===e)return 0;const n=ko(t),r=ko(e);if(n!==r)return Rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rt(t.booleanValue,e.booleanValue);case 2:return function(o,c){const u=Yn(o.integerValue||o.doubleValue),h=Yn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return m_(t.timestampValue,e.timestampValue);case 4:return m_(Ad(t),Ad(e));case 5:return Py(t.stringValue,e.stringValue);case 6:return function(o,c){const u=No(o),h=No(c);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const u=o.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=Rt(u[f],h[f]);if(g!==0)return g}return Rt(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const u=Rt(Yn(o.latitude),Yn(c.latitude));return u!==0?u:Rt(Yn(o.longitude),Yn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g_(t.arrayValue,e.arrayValue);case 10:return function(o,c){var u,h,f,g;const y=o.fields||{},v=c.fields||{},b=(u=y[Ap])===null||u===void 0?void 0:u.arrayValue,k=(h=v[Ap])===null||h===void 0?void 0:h.arrayValue,w=Rt(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0);return w!==0?w:g_(b,k)}(t.mapValue,e.mapValue);case 11:return function(o,c){if(o===Sf.mapValue&&c===Sf.mapValue)return 0;if(o===Sf.mapValue)return 1;if(c===Sf.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=Py(h[y],g[y]);if(v!==0)return v;const b=qc(u[h[y]],f[g[y]]);if(b!==0)return b}return Rt(h.length,g.length)}(t.mapValue,e.mapValue);default:throw Et(23264,{le:n})}}function m_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Rt(t,e);const n=Eo(t),r=Eo(e),i=Rt(n.seconds,r.seconds);return i!==0?i:Rt(n.nanos,r.nanos)}function g_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=qc(n[i],r[i]);if(o)return o}return Rt(n.length,r.length)}function Gc(t){return Ry(t)}function Ry(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Eo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return No(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ft.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Ry(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${Ry(n.fields[c])}`;return i+"}"}(t.mapValue):Et(61005,{value:t})}function ep(t){switch(ko(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=um(t);return e?16+ep(e):16;case 5:return 2*t.stringValue.length;case 6:return No(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ep(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Do(r.fields,(o,c)=>{i+=o.length+ep(c)}),i}(t.mapValue);default:throw Et(13486,{value:t})}}function y_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function My(t){return!!t&&"integerValue"in t}function fx(t){return!!t&&"arrayValue"in t}function v_(t){return!!t&&"nullValue"in t}function x_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tp(t){return!!t&&"mapValue"in t}function DM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[gA])===null||n===void 0?void 0:n.stringValue)===yA}function ld(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Do(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ld(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ld(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===MM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ld(n)}setAll(e){let n=Mr.emptyPath(),r={},i=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=ld(c):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());tp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Do(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new yi(ld(this.value))}}function vA(t){const e=[];return Do(t.fields,(n,r)=>{const i=new Mr([n]);if(tp(r)){const o=vA(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,i,o,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Wr(e,0,At.min(),At.min(),At.min(),yi.empty(),0)}static newFoundDocument(e,n,r,i){return new Wr(e,1,n,At.min(),r,i,0)}static newNoDocument(e,n){return new Wr(e,2,n,At.min(),At.min(),yi.empty(),0)}static newUnknownDocument(e,n){return new Wr(e,3,n,At.min(),At.min(),yi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.position=e,this.inclusive=n}}function b_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],c=t.position[i];if(o.field.isKeyField()?r=ft.comparator(ft.fromName(c.referenceValue),n.key):r=qc(c,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function w_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Js(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n="asc"){this.field=e,this.dir=n}}function LM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{}class ar extends xA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FM(e,n,r):n==="array-contains"?new zM(e,r):n==="in"?new BM(e,r):n==="not-in"?new HM(e,r):n==="array-contains-any"?new WM(e,r):new ar(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UM(e,r):new $M(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qc(n,this.value)):n!==null&&ko(this.value)===ko(n)&&this.matchesComparison(qc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends xA{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new gs(e,n)}matches(e){return bA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function bA(t){return t.op==="and"}function wA(t){return VM(t)&&bA(t)}function VM(t){for(const e of t.filters)if(e instanceof gs)return!1;return!0}function Dy(t){if(t instanceof ar)return t.field.canonicalString()+t.op.toString()+Gc(t.value);if(wA(t))return t.filters.map(e=>Dy(e)).join(",");{const e=t.filters.map(n=>Dy(n)).join(",");return`${t.op}(${e})`}}function _A(t,e){return t instanceof ar?function(r,i){return i instanceof ar&&r.op===i.op&&r.field.isEqual(i.field)&&Js(r.value,i.value)}(t,e):t instanceof gs?function(r,i){return i instanceof gs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,u)=>o&&_A(c,i.filters[u]),!0):!1}(t,e):void Et(19439)}function EA(t){return t instanceof ar?function(n){return`${n.field.canonicalString()} ${n.op} ${Gc(n.value)}`}(t):t instanceof gs?function(n){return n.op.toString()+" {"+n.getFilters().map(EA).join(" ,")+"}"}(t):"Filter"}class FM extends ar{constructor(e,n,r){super(e,n,r),this.key=ft.fromName(r.referenceValue)}matches(e){const n=ft.comparator(e.key,this.key);return this.matchesComparison(n)}}class UM extends ar{constructor(e,n){super(e,"in",n),this.keys=NA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $M extends ar{constructor(e,n){super(e,"not-in",n),this.keys=NA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ft.fromName(r.referenceValue))}class zM extends ar{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fx(n)&&Cd(n.arrayValue,this.value)}}class BM extends ar{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cd(this.value.arrayValue,n)}}class HM extends ar{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cd(this.value.arrayValue,n)}}class WM extends ar{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n=null,r=[],i=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=u,this.Pe=null}}function __(t,e=null,n=[],r=[],i=null,o=null,c=null){return new qM(t,e,n,r,i,o,c)}function px(t){const e=Ct(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gc(r)).join(",")),e.Pe=n}return e.Pe}function mx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_A(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!w_(t.startAt,e.startAt)&&w_(t.endAt,e.endAt)}function Oy(t){return ft.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n=null,r=[],i=[],o=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function GM(t,e,n,r,i,o,c,u){return new lu(t,e,n,r,i,o,c,u)}function dm(t){return new lu(t)}function E_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kA(t){return t.collectionGroup!==null}function cd(t){const e=Ct(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new mr(Mr.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new jd(o,r))}),n.has(Mr.keyField().canonicalString())||e.Te.push(new jd(Mr.keyField(),r))}return e.Te}function Bs(t){const e=Ct(t);return e.Ie||(e.Ie=KM(e,cd(t))),e.Ie}function KM(t,e){if(t.limitType==="F")return __(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new jd(i.field,o)});const n=t.endAt?new Tp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tp(t.startAt.position,t.startAt.inclusive):null;return __(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ly(t,e){const n=t.filters.concat([e]);return new lu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cp(t,e,n){return new lu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hm(t,e){return mx(Bs(t),Bs(e))&&t.limitType===e.limitType}function SA(t){return`${px(Bs(t))}|lt:${t.limitType}`}function Sc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EA(i)).join(", ")}]`),cm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Gc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Gc(i)).join(",")),`Target(${r})`}(Bs(t))}; limitType=${t.limitType})`}function fm(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ft.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of cd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,u,h){const f=b_(c,u,h);return c.inclusive?f<=0:f<0}(r.startAt,cd(r),i)||r.endAt&&!function(c,u,h){const f=b_(c,u,h);return c.inclusive?f>=0:f>0}(r.endAt,cd(r),i))}(t,e)}function QM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AA(t){return(e,n)=>{let r=!1;for(const i of cd(t)){const o=YM(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function YM(t,e,n){const r=t.field.isKeyField()?ft.comparator(e.key,n.key):function(o,c,u){const h=c.data.field(o),f=u.data.field(o);return h!==null&&f!==null?qc(h,f):Et(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return uA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new Dn(ft.comparator);function Ca(){return XM}const TA=new Dn(ft.comparator);function ed(...t){let e=TA;for(const n of t)e=e.insert(n.key,n);return e}function CA(t){let e=TA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cl(){return ud()}function jA(){return ud()}function ud(){return new Ml(t=>t.toString(),(t,e)=>t.isEqual(e))}const JM=new Dn(ft.comparator),ZM=new mr(ft.comparator);function Ut(...t){let e=ZM;for(const n of t)e=e.add(n);return e}const e8=new mr(Rt);function t8(){return e8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(e)?"-0":e}}function IA(t){return{integerValue:""+t}}function n8(t,e){return CM(e)?IA(e):gx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this._=void 0}}function r8(t,e,n){return t instanceof Id?function(i,o){const c={fields:{[fA]:{stringValue:hA},[mA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hx(o)&&(o=um(o)),o&&(c.fields[pA]=o),{mapValue:c}}(n,e):t instanceof Pd?RA(t,e):t instanceof Rd?MA(t,e):function(i,o){const c=PA(i,o),u=N_(c)+N_(i.Ee);return My(c)&&My(i.Ee)?IA(u):gx(i.serializer,u)}(t,e)}function i8(t,e,n){return t instanceof Pd?RA(t,e):t instanceof Rd?MA(t,e):n}function PA(t,e){return t instanceof jp?function(r){return My(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Id extends pm{}class Pd extends pm{constructor(e){super(),this.elements=e}}function RA(t,e){const n=DA(e);for(const r of t.elements)n.some(i=>Js(i,r))||n.push(r);return{arrayValue:{values:n}}}class Rd extends pm{constructor(e){super(),this.elements=e}}function MA(t,e){let n=DA(e);for(const r of t.elements)n=n.filter(i=>!Js(i,r));return{arrayValue:{values:n}}}class jp extends pm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function N_(t){return Yn(t.integerValue||t.doubleValue)}function DA(t){return fx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,n){this.field=e,this.transform=n}}function a8(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Pd&&i instanceof Pd||r instanceof Rd&&i instanceof Rd?Wc(r.elements,i.elements,Js):r instanceof jp&&i instanceof jp?Js(r.Ee,i.Ee):r instanceof Id&&i instanceof Id}(t.transform,e.transform)}class o8{constructor(e,n){this.version=e,this.transformResults=n}}class Ki{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function np(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mm{}function OA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yx(t.key,Ki.none()):new sh(t.key,t.data,Ki.none());{const n=t.data,r=yi.empty();let i=new mr(Mr.comparator);for(let o of e.fields)if(!i.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new Oo(t.key,r,new ji(i.toArray()),Ki.none())}}function l8(t,e,n){t instanceof sh?function(i,o,c){const u=i.value.clone(),h=S_(i.fieldTransforms,o,c.transformResults);u.setAll(h),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Oo?function(i,o,c){if(!np(i.precondition,o))return void o.convertToUnknownDocument(c.version);const u=S_(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(LA(i)),h.setAll(u),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function dd(t,e,n,r){return t instanceof sh?function(o,c,u,h){if(!np(o.precondition,c))return u;const f=o.value.clone(),g=A_(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oo?function(o,c,u,h){if(!np(o.precondition,c))return u;const f=A_(o.fieldTransforms,h,c),g=c.data;return g.setAll(LA(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,c,u){return np(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function c8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=PA(r.transform,i||null);o!=null&&(n===null&&(n=yi.empty()),n.set(r.field,o))}return n||null}function k_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wc(r,i,(o,c)=>a8(o,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sh extends mm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oo extends mm{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function LA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function S_(t,e,n){const r=new Map;nn(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],c=o.transform,u=e.data.field(o.field);r.set(o.field,i8(c,u,n[i]))}return r}function A_(t,e,n){const r=new Map;for(const i of t){const o=i.transform,c=n.data.field(i.field);r.set(i.field,r8(o,c,e))}return r}class yx extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u8 extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&l8(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jA();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=n.has(i.key)?null:u;const h=OA(c,u);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ut())}isEqual(e){return this.batchId===e.batchId&&Wc(this.mutations,e.mutations,(n,r)=>k_(n,r))&&Wc(this.baseMutations,e.baseMutations,(n,r)=>k_(n,r))}}class vx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nn(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return JM}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new vx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr,Ht;function p8(t){switch(t){case we.OK:return Et(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return Et(15467,{code:t})}}function VA(t){if(t===void 0)return Ta("GRPC error has no .code"),we.UNKNOWN;switch(t){case rr.OK:return we.OK;case rr.CANCELLED:return we.CANCELLED;case rr.UNKNOWN:return we.UNKNOWN;case rr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case rr.INTERNAL:return we.INTERNAL;case rr.UNAVAILABLE:return we.UNAVAILABLE;case rr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case rr.NOT_FOUND:return we.NOT_FOUND;case rr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case rr.ABORTED:return we.ABORTED;case rr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case rr.DATA_LOSS:return we.DATA_LOSS;default:return Et(39323,{code:t})}}(Ht=rr||(rr={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=new yo([4294967295,4294967295],0);function T_(t){const e=aA().encode(t),n=new JS;return n.update(e),new Uint8Array(n.digest())}function C_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yo([n,r],0),new yo([i,o],0)]}class xx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new td(`Invalid padding: ${n}`);if(r<0)throw new td(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new td(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new td(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=yo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(yo.fromNumber(r)));return i.compare(m8)===1&&(i=new yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=T_(e),[r,i]=C_(n);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,i,o);if(!this.ye(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new xx(o,i,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=T_(e),[r,i]=C_(n);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,i,o);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class td extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ah.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gm(At.min(),i,new Dn(Rt),Ca(),Ut())}}class ah{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ah(r,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class FA{constructor(e,n){this.targetId=e,this.De=n}}class UA{constructor(e,n,r=Or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class j_{constructor(){this.ve=0,this.Ce=I_(),this.Fe=Or.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ut(),n=Ut(),r=Ut();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Et(38017,{changeType:o})}}),new ah(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=I_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class g8{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ca(),this.je=Af(),this.Je=Af(),this.He=new Dn(Rt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Et(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(Oy(o))if(r===0){const c=new ft(o.path);this.Xe(n,c,Wr.newNoDocument(c,At.min()))}else nn(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let c,u;try{c=No(r).toUint8Array()}catch(h){if(h instanceof dA)return wo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new xx(c,i,o)}catch(h){return wo(h instanceof td?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,c)=>{const u=this.st(c);if(u){if(o.current&&Oy(u.target)){const h=new ft(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Wr.newNoDocument(h,e))}o.Ne&&(n.set(c,o.Le()),o.ke())}});let r=Ut();this.Je.forEach((o,c)=>{let u=!0;c.forEachWhile(h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(e));const i=new gm(e,n,this.He,this.ze,r);return this.ze=Ca(),this.je=Af(),this.Je=Af(),this.He=new Dn(Rt),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new j_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new mr(Rt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new mr(Rt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||tt("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new j_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Af(){return new Dn(ft.comparator)}function I_(){return new Dn(ft.comparator)}const y8={asc:"ASCENDING",desc:"DESCENDING"},v8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x8={and:"AND",or:"OR"};class b8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vy(t,e){return t.useProto3Json||cm(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $A(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w8(t,e){return Ip(t,e.toTimestamp())}function Hs(t){return nn(!!t,49232),At.fromTimestamp(function(n){const r=Eo(n);return new wn(r.seconds,r.nanos)}(t))}function bx(t,e){return Fy(t,e).canonicalString()}function Fy(t,e){const n=function(i){return new gn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zA(t){const e=gn.fromString(t);return nn(GA(e),10190,{key:e.toString()}),e}function Uy(t,e){return bx(t.databaseId,e.path)}function P0(t,e){const n=zA(e);if(n.get(1)!==t.databaseId.projectId)throw new Xe(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xe(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ft(HA(n))}function BA(t,e){return bx(t.databaseId,e)}function _8(t){const e=zA(t);return e.length===4?gn.emptyPath():HA(e)}function $y(t){return new gn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HA(t){return nn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function P_(t,e,n){return{name:Uy(t,e),fields:n.value.mapValue.fields}}function E8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Et(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(nn(g===void 0||typeof g=="string",58123),Or.fromBase64String(g||"")):(nn(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Or.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const g=f.code===void 0?we.UNKNOWN:VA(f.code);return new Xe(g,f.message||"")}(c);n=new UA(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=P0(t,r.document.name),o=Hs(r.document.updateTime),c=r.document.createTime?Hs(r.document.createTime):At.min(),u=new yi({mapValue:{fields:r.document.fields}}),h=Wr.newFoundDocument(i,o,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new rp(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=P0(t,r.document),o=r.readTime?Hs(r.readTime):At.min(),c=Wr.newNoDocument(i,o),u=r.removedTargetIds||[];n=new rp([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=P0(t,r.document),o=r.removedTargetIds||[];n=new rp([],o,i,null)}else{if(!("filter"in e))return Et(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new f8(i,o),u=r.targetId;n=new FA(u,c)}}return n}function N8(t,e){let n;if(e instanceof sh)n={update:P_(t,e.key,e.value)};else if(e instanceof yx)n={delete:Uy(t,e.key)};else if(e instanceof Oo)n={update:P_(t,e.key,e.data),updateMask:R8(e.fieldMask)};else{if(!(e instanceof u8))return Et(16599,{Rt:e.type});n={verify:Uy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const u=c.transform;if(u instanceof Id)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Pd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Rd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof jp)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Et(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:w8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Et(27497)}(t,e.precondition)),n}function k8(t,e){return t&&t.length>0?(nn(e!==void 0,14353),t.map(n=>function(i,o){let c=i.updateTime?Hs(i.updateTime):Hs(o);return c.isEqual(At.min())&&(c=Hs(o)),new o8(c,i.transformResults||[])}(n,e))):[]}function S8(t,e){return{documents:[BA(t,e.path)]}}function A8(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BA(t,i);const o=function(f){if(f.length!==0)return qA(gs.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const c=function(f){if(f.length!==0)return f.map(g=>function(v){return{field:Ac(v.field),direction:j8(v.dir)}}(g))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=Vy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:i}}function T8(t){let e=_8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nn(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const v=WA(y);return v instanceof gs&&wA(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(v=>function(k){return new jd(Tc(k.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,cm(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(y){const v=!!y.before,b=y.values||[];return new Tp(b,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,b=y.values||[];return new Tp(b,v)}(n.endAt)),GM(e,i,c,o,u,"F",h,f)}function C8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Tc(n.unaryFilter.field);return ar.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tc(n.unaryFilter.field);return ar.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tc(n.unaryFilter.field);return ar.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Tc(n.unaryFilter.field);return ar.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(t):t.fieldFilter!==void 0?function(n){return ar.create(Tc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gs.create(n.compositeFilter.filters.map(r=>WA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(n.compositeFilter.op))}(t):Et(30097,{filter:t})}function j8(t){return y8[t]}function I8(t){return v8[t]}function P8(t){return x8[t]}function Ac(t){return{fieldPath:t.canonicalString()}}function Tc(t){return Mr.fromServerFormat(t.fieldPath)}function qA(t){return t instanceof ar?function(n){if(n.op==="=="){if(x_(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NAN"}};if(v_(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x_(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NOT_NAN"}};if(v_(n.value))return{unaryFilter:{field:Ac(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ac(n.field),op:I8(n.op),value:n.value}}}(t):t instanceof gs?function(n){const r=n.getFilters().map(i=>qA(i));return r.length===1?r[0]:{compositeFilter:{op:P8(n.op),filters:r}}}(t):Et(54877,{filter:t})}function R8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,r,i,o=At.min(),c=At.min(),u=Or.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.gt=e}}function D8(t){const e=T8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(){this.Dn=new L8}addToCollectionParentIndex(e,n){return this.Dn.add(n),Ne.resolve()}getCollectionParents(e,n){return Ne.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Ne.resolve()}deleteFieldIndex(e,n){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,n){return Ne.resolve()}getDocumentsMatchingTarget(e,n){return Ne.resolve(null)}getIndexType(e,n){return Ne.resolve(0)}getFieldIndexes(e,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,n){return Ne.resolve(_o.min())}getMinOffsetFromCollectionGroup(e,n){return Ne.resolve(_o.min())}updateCollectionGroup(e,n,r){return Ne.resolve()}updateIndexEntries(e,n){return Ne.resolve()}}class L8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mr(gn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mr(gn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KA=41943040;class mi{static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(KA,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Kc(0)}static ur(){return new Kc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LruGarbageCollector",V8=1048576;function D_([t,e],[n,r]){const i=Rt(t,n);return i===0?Rt(e,r):i}class F8{constructor(e){this.Tr=e,this.buffer=new mr(D_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();D_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class U8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){tt(M_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ou(n)?tt(M_,"Ignoring IndexedDB error during garbage collection: ",n):await au(n)}await this.Rr(3e5)})}}class $8{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Ne.resolve(lm.ue);const r=new F8(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(R_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,c,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),kc()<=Ft.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function z8(t,e){return new $8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.changes=new Ml(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&dd(r.mutation,i,ji.empty(),wn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ut()){const i=cl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let c=ed();return o.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=cl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ut()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,i){let o=Ca();const c=ud(),u=function(){return ud()}();return n.forEach((h,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Oo)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),dd(g.mutation,f,g.mutation.getFieldMask(),wn.now())):c.set(f.key,ji.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new H8(g,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=ud();let i=new Dn((c,u)=>c-u),o=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let g=r.get(h)||ji.empty();g=u.applyToLocalView(f,g),r.set(h,g);const y=(i.get(u.batchId)||Ut()).add(h);i=i.insert(u.batchId,y)})}).next(()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,y=jA();g.forEach(v=>{if(!o.has(v)){const b=OA(n.get(v),r.get(v));b!==null&&y.set(v,b),o=o.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return ft.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Ne.resolve(cl());let u=Sd,h=o;return c.next(f=>Ne.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Ne.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ut())).next(g=>({batchId:u,changes:CA(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ft(n)).next(r=>{let i=ed();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let c=ed();return this.indexManager.getCollectionParents(e,o).next(u=>Ne.forEach(u,h=>{const f=function(y,v){return new lu(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(c=>{o.forEach((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Wr.newInvalidDocument(g)))});let u=ed();return c.forEach((h,f)=>{const g=o.get(h);g!==void 0&&dd(g.mutation,f,ji.empty(),wn.now()),fm(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Ne.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hs(i.createTime)}}(n)),Ne.resolve()}getNamedQuery(e,n){return Ne.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:D8(i.bundledQuery),readTime:Hs(i.readTime)}}(n)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(){this.overlays=new Dn(ft.comparator),this.kr=new Map}getOverlay(e,n){return Ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cl();return Ne.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),Ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Ne.resolve()}getOverlaysForCollection(e,n,r){const i=cl(),o=n.length+1,c=new ft(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Dn((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=cl(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=cl(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=i)););return Ne.resolve(u)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new h8(n,r));let o=this.kr.get(n);o===void 0&&(o=Ut(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(){this.sessionToken=Or.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.qr=new mr(Nr.Qr),this.$r=new mr(Nr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Nr(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Nr(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ft(new gn([])),r=new Nr(n,e),i=new Nr(n,e+1),o=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ft(new gn([])),r=new Nr(n,e),i=new Nr(n,e+1);let o=Ut();return this.$r.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new Nr(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nr{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ft.comparator(e.key,n.key)||Rt(e.Hr,n.Hr)}static Ur(e,n){return Rt(e.Hr,n.Hr)||ft.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new mr(Nr.Qr)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new d8(o,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Yr=this.Yr.add(new Nr(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ne.resolve(c)}lookupMutationBatch(e,n){return Ne.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return Ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?dx:this.er-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nr(n,0),i=new Nr(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],c=>{const u=this.Zr(c.Hr);o.push(u)}),Ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mr(Rt);return n.forEach(i=>{const o=new Nr(i,0),c=new Nr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],u=>{r=r.add(u.Hr)})}),Ne.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ft.isDocumentKey(o)||(o=o.child(""));const c=new Nr(new ft(o),0);let u=new mr(Rt);return this.Yr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Hr)),!0)},c),Ne.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){nn(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Ne.forEach(n.mutations,i=>{const o=new Nr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Nr(n,0),i=this.Yr.firstAfterOrEqual(r);return Ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){this.ni=e,this.docs=function(){return new Dn(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ne.resolve(r?r.document.mutableCopy():Wr.newInvalidDocument(n))}getEntries(e,n){let r=Ca();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Wr.newInvalidDocument(i))}),Ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ca();const c=n.path,u=new ft(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||kM(NM(g),r)<=0||(i.has(g.key)||fm(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Ne.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Et(9500)}ri(e,n){return Ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new X8(this)}getSize(e){return Ne.resolve(this.size)}}class X8 extends B8{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Ne.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.persistence=e,this.ii=new Ml(n=>px(n),mx),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.si=0,this.oi=new wx,this.targetCount=0,this._i=Kc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Ne.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Kc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Ne.resolve()}updateTargetData(e,n){return this.hr(n),Ne.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Ne.waitFor(o).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Ne.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Ne.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),Ne.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Ne.resolve(r)}containsKey(e,n){return Ne.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.ai={},this.overlays={},this.ui=new lm(0),this.ci=!1,this.ci=!0,this.li=new K8,this.referenceDelegate=e(this),this.hi=new J8(this),this.indexManager=new O8,this.remoteDocumentCache=function(i){return new Y8(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new M8(n),this.Ti=new q8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new G8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Q8(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){tt("MemoryPersistence","Starting transaction:",e);const i=new Z8(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return Ne.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Z8 extends AM{constructor(e){super(),this.currentSequenceNumber=e}}class _x{constructor(e){this.persistence=e,this.Ai=new wx,this.Ri=null}static Vi(e){return new _x(e)}get mi(){if(this.Ri)return this.Ri;throw Et(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Ne.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Ne.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.mi,r=>{const i=ft.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,At.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Ne.or([()=>Ne.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Pp{constructor(e,n){this.persistence=e,this.gi=new Ml(r=>jM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=z8(this,n)}static Vi(e,n){return new Pp(e,n)}Ii(){}di(e){return Ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Ne.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Ne.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,o.removeEntry(c,At.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Ne.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Ne.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ep(e.data.value)),n}Sr(e,n,r){return Ne.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return Ne.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Ut(),i=Ut();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ex(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return P3()?8:TM(Kr())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new e9;return this.ws(e,n,c).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(kc()<=Ft.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Sc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ne.resolve()):(kc()<=Ft.DEBUG&&tt("QueryEngine","Query:",Sc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(kc()<=Ft.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Sc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bs(n))):Ne.resolve())}ps(e,n){if(E_(n))return Ne.resolve(null);let r=Bs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Cp(n,null,"F"),r=Bs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Ut(...o);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.bs(n,u);return this.Ds(n,f,c,h.readTime)?this.ps(e,Cp(n,null,"F")):this.vs(e,f,n,h)}))})))}ys(e,n,r,i){return E_(n)||i.isEqual(At.min())?Ne.resolve(null):this.gs.getDocuments(e,r).next(o=>{const c=this.bs(n,o);return this.Ds(n,c,r,i)?Ne.resolve(null):(kc()<=Ft.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sc(n)),this.vs(e,c,n,EM(i,Sd)).next(u=>u))})}bs(e,n){let r=new mr(AA(e));return n.forEach((i,o)=>{fm(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return kc()<=Ft.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Sc(n)),this.gs.getDocumentsMatchingQuery(e,n,_o.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="LocalStore",n9=3e8;class r9{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Dn(Rt),this.Ms=new Ml(o=>px(o),mx),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W8(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function i9(t,e,n,r){return new r9(t,e,n,r)}async function YA(t,e){const n=Ct(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],u=[];let h=Ut();for(const f of i){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(r,h).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function s9(t,e){const n=Ct(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,f,g){const y=f.batch,v=y.keys();let b=Ne.resolve();return v.forEach(k=>{b=b.next(()=>g.getEntry(h,k)).next(w=>{const A=f.docVersions.get(k);nn(A!==null,48541),w.version.compareTo(A)<0&&(y.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),g.addEntry(w)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Ut();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XA(t){const e=Ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function a9(t,e){const n=Ct(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const v=i.get(y);if(!v)return;u.push(n.hi.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.hi.addMatchingKeys(o,g.addedDocuments,y)));let b=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Or.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),i=i.insert(y,b),function(w,A,j){return w.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=n9?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(v,b,g)&&u.push(n.hi.updateTargetData(o,b))});let h=Ca(),f=Ut();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(o9(o,c,e.documentUpdates).next(g=>{h=g.Ls,f=g.ks})),!r.isEqual(At.min())){const g=n.hi.getLastRemoteSnapshotVersion(o).next(y=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return Ne.waitFor(u).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Fs=i,o))}function o9(t,e,n){let r=Ut(),i=Ut();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let c=Ca();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(At.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):tt(Nx,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Ls:c,ks:i}})}function l9(t,e){const n=Ct(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function c9(t,e){const n=Ct(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,Ne.resolve(i)):n.hi.allocateTargetId(r).next(c=>(i=new fo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function zy(t,e,n){const r=Ct(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!ou(c))throw c;tt(Nx,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function O_(t,e,n){const r=Ct(t);let i=At.min(),o=Ut();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,f,g){const y=Ct(h),v=y.Ms.get(g);return v!==void 0?Ne.resolve(y.Fs.get(v)):y.hi.getTargetData(f,g)}(r,c,Bs(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{o=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:At.min(),n?o:Ut())).next(u=>(u9(r,QM(e),u),{documents:u,qs:o})))}function u9(t,e,n){let r=t.xs.get(e)||At.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}class L_{constructor(){this.activeTargetIds=t8()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d9{constructor(){this.Fo=new L_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new L_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="ConnectivityMonitor";class F_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){tt(V_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){tt(V_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf=null;function By(){return Tf===null?Tf=function(){return 268435456+Math.round(2147483648*Math.random())}():Tf++,"0x"+Tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="RestConnection",f9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class p9{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Sp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const c=By(),u=this.Go(e,n.toUriEncodedString());tt(R0,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,i,o);const{host:f}=new URL(u),g=Ro(f);return this.jo(e,u,h,r,g).then(y=>(tt(R0,`Received RPC '${e}' ${c}: `,y),y),y=>{throw wo(R0,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,o,c){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+su}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){const r=f9[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="WebChannelConnection";class g9 extends p9{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const c=By();return new Promise((u,h)=>{const f=new ZS;f.setWithCredentials(!0),f.listenOnce(eA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Zf.NO_ERROR:const y=f.getResponseJson();tt(zr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Zf.TIMEOUT:tt(zr,`RPC '${e}' ${c} timed out`),h(new Xe(we.DEADLINE_EXCEEDED,"Request time out"));break;case Zf.HTTP_ERROR:const v=f.getStatus();if(tt(zr,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const k=b==null?void 0:b.error;if(k&&k.status&&k.message){const w=function(j){const R=j.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(R)>=0?R:we.UNKNOWN}(k.status);h(new Xe(w,k.message))}else h(new Xe(we.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Xe(we.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{tt(zr,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(i);tt(zr,`RPC '${e}' ${c} sending request:`,i),f.send(n,"POST",g,r,15)})}P_(e,n,r){const i=By(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=rA(),u=nA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const g=o.join("");tt(zr,`Creating RPC '${e}' stream ${i}: ${g}`,h);const y=c.createWebChannel(g,h);this.T_(y);let v=!1,b=!1;const k=new m9({Ho:A=>{b?tt(zr,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(tt(zr,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),tt(zr,`RPC '${e}' stream ${i} sending:`,A),y.send(A))},Yo:()=>y.close()}),w=(A,j,R)=>{A.listen(j,L=>{try{R(L)}catch(D){setTimeout(()=>{throw D},0)}})};return w(y,Zu.EventType.OPEN,()=>{b||(tt(zr,`RPC '${e}' stream ${i} transport opened.`),k.s_())}),w(y,Zu.EventType.CLOSE,()=>{b||(b=!0,tt(zr,`RPC '${e}' stream ${i} transport closed`),k.__(),this.I_(y))}),w(y,Zu.EventType.ERROR,A=>{b||(b=!0,wo(zr,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),k.__(new Xe(we.UNAVAILABLE,"The operation could not be completed")))}),w(y,Zu.EventType.MESSAGE,A=>{var j;if(!b){const R=A.data[0];nn(!!R,16349);const L=R,D=(L==null?void 0:L.error)||((j=L[0])===null||j===void 0?void 0:j.error);if(D){tt(zr,`RPC '${e}' stream ${i} received error:`,D);const z=D.status;let G=function(T){const N=rr[T];if(N!==void 0)return VA(N)}(z),M=D.message;G===void 0&&(G=we.INTERNAL,M="Unknown error status: "+z+" with message "+D.message),b=!0,k.__(new Xe(G,M)),y.close()}else tt(zr,`RPC '${e}' stream ${i} received:`,R),k.a_(R)}}),w(u,tA.STAT_EVENT,A=>{A.stat===Iy.PROXY?tt(zr,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Iy.NOPROXY&&tt(zr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.o_()},0),k}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function M0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){return new b8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&tt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="PersistentStream";class ZA{constructor(e,n,r,i,o,c,u,h){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new JA(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===we.RESOURCE_EXHAUSTED?(Ta(n.toString()),Ta("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Xe(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return tt(U_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(tt(U_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y9 extends ZA{constructor(e,n,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=E8(this.serializer,e),r=function(o){if(!("targetChange"in o))return At.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?At.min():c.readTime?Hs(c.readTime):At.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=$y(this.serializer),n.addTarget=function(o,c){let u;const h=c.target;if(u=Oy(h)?{documents:S8(o,h)}:{query:A8(o,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=$A(o,c.resumeToken);const f=Vy(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(At.min())>0){u.readTime=Ip(o,c.snapshotVersion.toTimestamp());const f=Vy(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=C8(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=$y(this.serializer),n.removeTarget=e,this.k_(n)}}class v9 extends ZA{constructor(e,n,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=k8(e.writeResults,e.commitTime),r=Hs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=$y(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>N8(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{}class b9 extends x9{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Xe(we.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,Fy(n,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Xe(we.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,Fy(n,r),i,c,u,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Xe(we.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class w9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ta(n),this._a=!1):tt("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al="RemoteStore";class _9{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Dl(this)&&(tt(Al,"Restarting streams for network reachability change."),await async function(h){const f=Ct(h);f.Ia.add(4),await oh(f),f.Aa.set("Unknown"),f.Ia.delete(4),await vm(f)}(this))})}),this.Aa=new w9(r,i)}}async function vm(t){if(Dl(t))for(const e of t.da)await e(!0)}async function oh(t){for(const e of t.da)await e(!1)}function eT(t,e){const n=Ct(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Tx(n)?Ax(n):cu(n).x_()&&Sx(n,e))}function kx(t,e){const n=Ct(t),r=cu(n);n.Ta.delete(e),r.x_()&&tT(n,e),n.Ta.size===0&&(r.x_()?r.B_():Dl(n)&&n.Aa.set("Unknown"))}function Sx(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cu(t).H_(e)}function tT(t,e){t.Ra.$e(e),cu(t).Y_(e)}function Ax(t){t.Ra=new g8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),cu(t).start(),t.Aa.aa()}function Tx(t){return Dl(t)&&!cu(t).M_()&&t.Ta.size>0}function Dl(t){return Ct(t).Ia.size===0}function nT(t){t.Ra=void 0}async function E9(t){t.Aa.set("Online")}async function N9(t){t.Ta.forEach((e,n)=>{Sx(t,e)})}async function k9(t,e){nT(t),Tx(t)?(t.Aa.la(e),Ax(t)):t.Aa.set("Unknown")}async function S9(t,e,n){if(t.Aa.set("Online"),e instanceof UA&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const u of o.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ta.delete(u),i.Ra.removeTarget(u))}(t,e)}catch(r){tt(Al,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rp(t,r)}else if(e instanceof rp?t.Ra.Ye(e):e instanceof FA?t.Ra.it(e):t.Ra.et(e),!n.isEqual(At.min()))try{const r=await XA(t.localStore);n.compareTo(r)>=0&&await function(o,c){const u=o.Ra.Pt(c);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,f)=>{const g=o.Ta.get(h);if(!g)return;o.Ta.set(h,g.withResumeToken(Or.EMPTY_BYTE_STRING,g.snapshotVersion)),tT(o,h);const y=new fo(g.target,h,f,g.sequenceNumber);Sx(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){tt(Al,"Failed to raise snapshot:",r),await Rp(t,r)}}async function Rp(t,e,n){if(!ou(e))throw e;t.Ia.add(1),await oh(t),t.Aa.set("Offline"),n||(n=()=>XA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{tt(Al,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await vm(t)})}function rT(t,e){return e().catch(n=>Rp(t,n,e))}async function xm(t){const e=Ct(t),n=So(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:dx;for(;A9(e);)try{const i=await l9(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,T9(e,i)}catch(i){await Rp(e,i)}iT(e)&&sT(e)}function A9(t){return Dl(t)&&t.Pa.length<10}function T9(t,e){t.Pa.push(e);const n=So(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function iT(t){return Dl(t)&&!So(t).M_()&&t.Pa.length>0}function sT(t){So(t).start()}async function C9(t){So(t).na()}async function j9(t){const e=So(t);for(const n of t.Pa)e.X_(n.mutations)}async function I9(t,e,n){const r=t.Pa.shift(),i=vx.from(r,e,n);await rT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xm(t)}async function P9(t,e){e&&So(t).Z_&&await async function(r,i){if(function(c){return p8(c)&&c!==we.ABORTED}(i.code)){const o=r.Pa.shift();So(r).N_(),await rT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await xm(r)}}(t,e),iT(t)&&sT(t)}async function $_(t,e){const n=Ct(t);n.asyncQueue.verifyOperationInProgress(),tt(Al,"RemoteStore received new credentials");const r=Dl(n);n.Ia.add(3),await oh(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await vm(n)}async function R9(t,e){const n=Ct(t);e?(n.Ia.delete(2),await vm(n)):e||(n.Ia.add(2),await oh(n),n.Aa.set("Unknown"))}function cu(t){return t.Va||(t.Va=function(n,r,i){const o=Ct(n);return o.ia(),new y9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:E9.bind(null,t),e_:N9.bind(null,t),n_:k9.bind(null,t),J_:S9.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Tx(t)?Ax(t):t.Aa.set("Unknown")):(await t.Va.stop(),nT(t))})),t.Va}function So(t){return t.ma||(t.ma=function(n,r,i){const o=Ct(n);return o.ia(),new v9(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:C9.bind(null,t),n_:P9.bind(null,t),ea:j9.bind(null,t),ta:I9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await xm(t)):(await t.ma.stop(),t.Pa.length>0&&(tt(Al,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const c=Date.now()+r,u=new Cx(e,n,c,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jx(t,e){if(Ta("AsyncQueue",`${e}: ${t}`),ou(t))return new Xe(we.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{static emptySet(e){return new $c(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ft.comparator(n.key,r.key):(n,r)=>ft.comparator(n.key,r.key),this.keyedMap=ed(),this.sortedSet=new Dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $c)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $c;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.fa=new Dn(ft.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Et(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qc{constructor(e,n,r,i,o,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new Qc(e,n,$c.emptySet(n),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class D9{constructor(){this.queries=B_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Ct(n),o=i.queries;i.queries=B_(),o.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Xe(we.ABORTED,"Firestore shutting down"))}}function B_(){return new Ml(t=>SA(t),hm)}async function Ix(t,e){const n=Ct(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new M9,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=jx(c,`Initialization of query '${Sc(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Rx(n)}async function Px(t,e){const n=Ct(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const c=o.wa.indexOf(e);c>=0&&(o.wa.splice(c,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function O9(t,e){const n=Ct(t);let r=!1;for(const i of e){const o=i.query,c=n.queries.get(o);if(c){for(const u of c.wa)u.Ca(i)&&(r=!0);c.ya=i}}r&&Rx(n)}function L9(t,e,n){const r=Ct(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function Rx(t){t.Da.forEach(e=>{e.next()})}var Hy,H_;(H_=Hy||(Hy={})).Fa="default",H_.Cache="cache";class Mx{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.key=e}}class oT{constructor(e){this.key=e}}class V9{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ut(),this.mutatedKeys=Ut(),this.Xa=AA(e),this.eu=new $c(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new z_,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const v=i.get(g),b=fm(this.query,y)?y:null,k=!!v&&this.mutatedKeys.has(v.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let A=!1;v&&b?v.data.isEqual(b.data)?k!==w&&(r.track({type:3,doc:b}),A=!0):this.iu(v,b)||(r.track({type:2,doc:b}),A=!0,(h&&this.Xa(b,h)>0||f&&this.Xa(b,f)<0)&&(u=!0)):!v&&b?(r.track({type:0,doc:b}),A=!0):v&&!b&&(r.track({type:1,doc:v}),A=!0,(h||f)&&(u=!0)),A&&(b?(c=c.add(b),o=w?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(b,k){const w=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{At:A})}};return w(b)-w(k)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],h=this.Za.size===0&&this.current&&!i?1:0,f=h!==this.Ya;return this.Ya=h,c.length!==0||f?{snapshot:new Qc(this.query,e.eu,o,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new z_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ut(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new oT(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new aT(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ut();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Qc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Dx="SyncEngine";class F9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class U9{constructor(e){this.key=e,this.lu=!1}}class $9{constructor(e,n,r,i,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Ml(u=>SA(u),hm),this.Tu=new Map,this.Iu=new Set,this.du=new Dn(ft.comparator),this.Eu=new Map,this.Au=new wx,this.Ru={},this.Vu=new Map,this.mu=Kc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function z9(t,e,n=!0){const r=fT(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await lT(r,e,n,!0),i}async function B9(t,e){const n=fT(t);await lT(n,e,!0,!1)}async function lT(t,e,n,r){const i=await c9(t.localStore,Bs(e)),o=i.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await H9(t,e,o,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&eT(t.remoteStore,i),u}async function H9(t,e,n,r,i){t.gu=(y,v,b)=>async function(w,A,j,R){let L=A.view.nu(j);L.Ds&&(L=await O_(w.localStore,A.query,!1).then(({documents:M})=>A.view.nu(M,L)));const D=R&&R.targetChanges.get(A.targetId),z=R&&R.targetMismatches.get(A.targetId)!=null,G=A.view.applyChanges(L,w.isPrimaryClient,D,z);return q_(w,A.targetId,G._u),G.snapshot}(t,y,v,b);const o=await O_(t.localStore,e,!0),c=new V9(e,o.qs),u=c.nu(o.documents),h=ah.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=c.applyChanges(u,t.isPrimaryClient,h);q_(t,n,f._u);const g=new F9(e,n,c);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function W9(t,e,n){const r=Ct(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(c=>!hm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kx(r.remoteStore,i.targetId),Wy(r,i.targetId)}).catch(au)):(Wy(r,i.targetId),await zy(r.localStore,i.targetId,!0))}async function q9(t,e){const n=Ct(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kx(n.remoteStore,r.targetId))}async function G9(t,e,n){const r=eD(t);try{const i=await function(c,u){const h=Ct(c),f=wn.now(),g=u.reduce((b,k)=>b.add(k.key),Ut());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Ca(),w=Ut();return h.Os.getEntries(b,g).next(A=>{k=A,k.forEach((j,R)=>{R.isValidDocument()||(w=w.add(j))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,k)).next(A=>{y=A;const j=[];for(const R of u){const L=c8(R,y.get(R.key).overlayedDocument);L!=null&&j.push(new Oo(R.key,L,vA(L.value.mapValue),Ki.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,j,u)}).next(A=>{v=A;const j=A.applyToLocalDocumentSet(y,w);return h.documentOverlayCache.saveOverlays(b,A.batchId,j)})}).then(()=>({batchId:v.batchId,changes:CA(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,u,h){let f=c.Ru[c.currentUser.toKey()];f||(f=new Dn(Rt)),f=f.insert(u,h),c.Ru[c.currentUser.toKey()]=f}(r,i.batchId,n),await lh(r,i.changes),await xm(r.remoteStore)}catch(i){const o=jx(i,"Failed to persist write");n.reject(o)}}async function cT(t,e){const n=Ct(t);try{const r=await a9(n.localStore,e);e.targetChanges.forEach((i,o)=>{const c=n.Eu.get(o);c&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?nn(c.lu,14607):i.removedDocuments.size>0&&(nn(c.lu,42227),c.lu=!1))}),await lh(n,r,e)}catch(r){await au(r)}}function W_(t,e,n){const r=Ct(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((o,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(c,u){const h=Ct(c);h.onlineState=u;let f=!1;h.queries.forEach((g,y)=>{for(const v of y.wa)v.va(u)&&(f=!0)}),f&&Rx(h)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function K9(t,e,n){const r=Ct(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let c=new Dn(ft.comparator);c=c.insert(o,Wr.newNoDocument(o,At.min()));const u=Ut().add(o),h=new gm(At.min(),new Map,new Dn(Rt),c,u);await cT(r,h),r.du=r.du.remove(o),r.Eu.delete(e),Ox(r)}else await zy(r.localStore,e,!1).then(()=>Wy(r,e,n)).catch(au)}async function Q9(t,e){const n=Ct(t),r=e.batch.batchId;try{const i=await s9(n.localStore,e);dT(n,r,null),uT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lh(n,i)}catch(i){await au(i)}}async function Y9(t,e,n){const r=Ct(t);try{const i=await function(c,u){const h=Ct(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(nn(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(r.localStore,e);dT(r,e,n),uT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await lh(r,i)}catch(i){await au(i)}}function uT(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function dT(t,e,n){const r=Ct(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Wy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||hT(t,r)})}function hT(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kx(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ox(t))}function q_(t,e,n){for(const r of n)r instanceof aT?(t.Au.addReference(r.key,e),X9(t,r)):r instanceof oT?(tt(Dx,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||hT(t,r.key)):Et(19791,{yu:r})}function X9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(tt(Dx,"New document in limbo: "+n),t.Iu.add(r),Ox(t))}function Ox(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ft(gn.fromString(e)),r=t.mu.next();t.Eu.set(r,new U9(n)),t.du=t.du.insert(n,r),eT(t.remoteStore,new fo(Bs(dm(n.path)),r,"TargetPurposeLimboResolution",lm.ue))}}async function lh(t,e,n){const r=Ct(t),i=[],o=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){i.push(f);const y=Ex.Es(h.targetId,f);o.push(y)}}))}),await Promise.all(c),r.hu.J_(i),await async function(h,f){const g=Ct(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Ne.forEach(f,v=>Ne.forEach(v.Is,b=>g.persistence.referenceDelegate.addReference(y,v.targetId,b)).next(()=>Ne.forEach(v.ds,b=>g.persistence.referenceDelegate.removeReference(y,v.targetId,b)))))}catch(y){if(!ou(y))throw y;tt(Nx,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const b=g.Fs.get(v),k=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(k);g.Fs=g.Fs.insert(v,w)}}}(r.localStore,o))}async function J9(t,e){const n=Ct(t);if(!n.currentUser.isEqual(e)){tt(Dx,"User change. New user:",e.toKey());const r=await YA(n.localStore,e);n.currentUser=e,function(o,c){o.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Xe(we.CANCELLED,c))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lh(n,r.Bs)}}function Z9(t,e){const n=Ct(t),r=n.Eu.get(e);if(r&&r.lu)return Ut().add(r.key);{let i=Ut();const o=n.Tu.get(e);if(!o)return i;for(const c of o){const u=n.Pu.get(c);i=i.unionWith(u.view.tu)}return i}}function fT(t){const e=Ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K9.bind(null,e),e.hu.J_=O9.bind(null,e.eventManager),e.hu.pu=L9.bind(null,e.eventManager),e}function eD(t){const e=Ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y9.bind(null,e),e}class Mp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ym(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return i9(this.persistence,new t9,e.initialUser,this.serializer)}Du(e){return new QA(_x.Vi,this.serializer)}bu(e){return new d9}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mp.provider={build:()=>new Mp};class tD extends Mp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){nn(this.persistence.referenceDelegate instanceof Pp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new U8(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new QA(r=>Pp.Vi(r,n),this.serializer)}}class qy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>W_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=J9.bind(null,this.syncEngine),await R9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new D9}()}createDatastore(e){const n=ym(e.databaseInfo.databaseId),r=function(o){return new g9(o)}(e.databaseInfo);return function(o,c,u,h){return new b9(o,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,c,u){return new _9(r,i,o,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>W_(this.syncEngine,n,0),function(){return F_.C()?new F_:new h9}())}createSyncEngine(e,n){return function(i,o,c,u,h,f,g){const y=new $9(i,o,c,u,h,f);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Ct(i);tt(Al,"RemoteStore shutting down."),o.Ia.add(5),await oh(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}qy.provider={build:()=>new qy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ta("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="FirestoreClient";class nD{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Hr.UNAUTHENTICATED,this.clientId=ux.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{tt(Ao,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(tt(Ao,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function D0(t,e){t.asyncQueue.verifyOperationInProgress(),tt(Ao,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await YA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{wo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{tt("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{wo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function G_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rD(t);tt(Ao,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$_(e.remoteStore,i)),t._onlineComponents=e}async function rD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){tt(Ao,"Using user provided OfflineComponentProvider");try{await D0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===we.FAILED_PRECONDITION||i.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;wo("Error using user provided cache. Falling back to memory cache: "+n),await D0(t,new Mp)}}else tt(Ao,"Using default OfflineComponentProvider"),await D0(t,new tD(void 0));return t._offlineComponents}async function pT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(tt(Ao,"Using user provided OnlineComponentProvider"),await G_(t,t._uninitializedComponentsProvider._online)):(tt(Ao,"Using default OnlineComponentProvider"),await G_(t,new qy))),t._onlineComponents}function iD(t){return pT(t).then(e=>e.syncEngine)}async function Dp(t){const e=await pT(t),n=e.eventManager;return n.onListen=z9.bind(null,e.syncEngine),n.onUnlisten=W9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=B9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=q9.bind(null,e.syncEngine),n}function sD(t,e,n={}){const r=new Na;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,u,h,f){const g=new Lx({next:v=>{g.Ou(),c.enqueueAndForget(()=>Px(o,y));const b=v.docs.has(u);!b&&v.fromCache?f.reject(new Xe(we.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&h&&h.source==="server"?f.reject(new Xe(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Mx(dm(u.path),g,{includeMetadataChanges:!0,ka:!0});return Ix(o,y)}(await Dp(t),t.asyncQueue,e,n,r)),r.promise}function aD(t,e,n={}){const r=new Na;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,u,h,f){const g=new Lx({next:v=>{g.Ou(),c.enqueueAndForget(()=>Px(o,y)),v.fromCache&&h.source==="server"?f.reject(new Xe(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Mx(u,g,{includeMetadataChanges:!0,ka:!0});return Ix(o,y)}(await Dp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firestore.googleapis.com",Q_=!0;class Y_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gT,this.ssl=Q_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Q_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V8)throw new Xe(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Xe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Xe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Xe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hM;switch(r.type){case"firstParty":return new gM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xe(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=K_.get(n);r&&(tt("ComponentProvider","Removing Datastore"),K_.delete(n),r.terminate())}(this),Promise.resolve()}}function oD(t,e,n,r={}){var i;t=xi(t,bm);const o=Ro(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),h=`${e}:${n}`;o&&(Qv(`https://${h}`),Yv("Firestore",!0)),c.host!==gT&&c.host!==h&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:h,ssl:o,emulatorOptions:r});if(!_l(f,u)&&(t._setSettings(f),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Hr.MOCK_USER;else{g=hS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Xe(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Hr(v)}t._authCredentials=new fM(new sA(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oa(this.firestore,e,this._query)}}class Gn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ih(n,Gn._jsonSchema))return new Gn(e,r||null,new ft(gn.fromString(n.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:or("string",Gn._jsonSchemaVersion),referencePath:or("string")};class vo extends Oa{constructor(e,n,r){super(e,n,dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new ft(e))}withConverter(e){return new vo(this.firestore,e,this._path)}}function $t(t,e,...n){if(t=vn(t),oA("collection","path",e),t instanceof bm){const r=gn.fromString(e,...n);return c_(r),new vo(t,null,r)}{if(!(t instanceof Gn||t instanceof vo))throw new Xe(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gn.fromString(e,...n));return c_(r),new vo(t.firestore,null,r)}}function at(t,e,...n){if(t=vn(t),arguments.length===1&&(e=ux.newId()),oA("doc","path",e),t instanceof bm){const r=gn.fromString(e,...n);return l_(r),new Gn(t,null,new ft(r))}{if(!(t instanceof Gn||t instanceof vo))throw new Xe(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gn.fromString(e,...n));return l_(r),new Gn(t.firestore,t instanceof vo?t.converter:null,new ft(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="AsyncQueue";class J_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new JA(this,"async_queue_retry"),this.oc=()=>{const r=M0();r&&tt(X_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=M0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=M0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Na;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ou(e))throw e;tt(X_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ta("INTERNAL UNHANDLED ERROR: ",Z_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Cx.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Et(47125,{hc:Z_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Z_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class ja extends bm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new J_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J_(e),this._firestoreClient=void 0,await e}}}function lD(t,e){const n=typeof t=="object"?t:Zv(),r=typeof t=="string"?t:Sp,i=rm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=cS("firestore");o&&oD(i,...o)}return i}function wm(t){if(t._terminated)throw new Xe(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cD(t),t._firestoreClient}function cD(t){var e,n,r;const i=t._freezeSettings(),o=function(u,h,f,g){return new RM(u,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,mT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nD(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wi(Or.fromBase64String(e))}catch(n){throw new Xe(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wi(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ih(e,Wi._jsonSchema))return Wi.fromBase64String(e.bytes)}}Wi._jsonSchemaVersion="firestore/bytes/1.0",Wi._jsonSchema={type:or("string",Wi._jsonSchemaVersion),bytes:or("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Xe(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Xe(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Xe(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(e){if(ih(e,Ws._jsonSchema))return new Ws(e.latitude,e.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:or("string",Ws._jsonSchemaVersion),latitude:or("number"),longitude:or("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ih(e,qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new qs(e.vectorValues);throw new Xe(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:or("string",qs._jsonSchemaVersion),vectorValues:or("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=/^__.*__$/;class dD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oo(e,this.data,this.fieldMask,n,this.fieldTransforms):new sh(e,this.data,n,this.fieldTransforms)}}class yT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Oo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ec:t})}}class Vx{constructor(e,n,r,i,o,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Op(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(vT(this.Ec)&&uD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class hD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ym(e)}Dc(e,n,r,i=!1){return new Vx({Ec:e,methodName:n,bc:r,path:Mr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nm(t){const e=t._freezeSettings(),n=ym(t._databaseId);return new hD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xT(t,e,n,r,i,o={}){const c=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);Ux("Data must be an object, but it was:",c,r);const u=bT(r,c);let h,f;if(o.merge)h=new ji(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=Gy(e,y,n);if(!c.contains(v))throw new Xe(we.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);_T(g,v)||g.push(v)}h=new ji(g),f=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=c.fieldTransforms;return new dD(new yi(u),h,f)}class km extends Em{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof km}}class Fx extends Em{_toFieldTransform(e){return new s8(e.path,new Id)}isEqual(e){return e instanceof Fx}}function fD(t,e,n,r){const i=t.Dc(1,e,n);Ux("Data must be an object, but it was:",i,r);const o=[],c=yi.empty();Do(r,(h,f)=>{const g=$x(e,h,n);f=vn(f);const y=i.gc(g);if(f instanceof km)o.push(g);else{const v=ch(f,y);v!=null&&(o.push(g),c.set(g,v))}});const u=new ji(o);return new yT(c,u,i.fieldTransforms)}function pD(t,e,n,r,i,o){const c=t.Dc(1,e,n),u=[Gy(e,r,n)],h=[i];if(o.length%2!=0)throw new Xe(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(Gy(e,o[v])),h.push(o[v+1]);const f=[],g=yi.empty();for(let v=u.length-1;v>=0;--v)if(!_T(f,u[v])){const b=u[v];let k=h[v];k=vn(k);const w=c.gc(b);if(k instanceof km)f.push(b);else{const A=ch(k,w);A!=null&&(f.push(b),g.set(b,A))}}const y=new ji(f);return new yT(g,y,c.fieldTransforms)}function mD(t,e,n,r=!1){return ch(n,t.Dc(r?4:3,e))}function ch(t,e){if(wT(t=vn(t)))return Ux("Unsupported field value:",e,t),bT(t,e);if(t instanceof Em)return function(r,i){if(!vT(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const u of r){let h=ch(u,i.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wn.fromDate(r);return{timestampValue:Ip(i.serializer,o)}}if(r instanceof wn){const o=new wn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ip(i.serializer,o)}}if(r instanceof Ws)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wi)return{bytesValue:$A(i.serializer,r._byteString)};if(r instanceof Gn){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qs)return function(c,u){return{mapValue:{fields:{[gA]:{stringValue:yA},[Ap]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return gx(u.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${om(r)}`)}(t,e)}function bT(t,e){const n={};return uA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(r,i)=>{const o=ch(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function wT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wn||t instanceof Ws||t instanceof Wi||t instanceof Gn||t instanceof Em||t instanceof qs)}function Ux(t,e,n){if(!wT(n)||!lA(n)){const r=om(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Gy(t,e,n){if((e=vn(e))instanceof _m)return e._internalPath;if(typeof e=="string")return $x(t,e);throw Op("Field path arguments must be of type string or ",t,!1,void 0,n)}const gD=new RegExp("[~\\*/\\[\\]]");function $x(t,e,n){if(e.search(gD)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _m(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Op(t,e,n,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new Xe(we.INVALID_ARGUMENT,u+t+h)}function _T(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yD extends ET{data(){return super.data()}}function Sm(t,e){return typeof e=="string"?$x(t,e):e instanceof _m?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Xe(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zx{}class Bx extends zx{}function yn(t,e,...n){let r=[];e instanceof zx&&r.push(e),r=r.concat(n),function(o){const c=o.filter(h=>h instanceof Hx).length,u=o.filter(h=>h instanceof Am).length;if(c>1||c>0&&u>0)throw new Xe(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Am extends Bx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Am(e,n,r)}_apply(e){const n=this._parse(e);return kT(e._query,n),new Oa(e.firestore,e.converter,Ly(e._query,n))}_parse(e){const n=Nm(e.firestore);return function(o,c,u,h,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Xe(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){nE(y,g);const k=[];for(const w of y)k.push(tE(h,o,w));v={arrayValue:{values:k}}}else v=tE(h,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||nE(y,g),v=mD(u,c,y,g==="in"||g==="not-in");return ar.create(f,g,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Dr(t,e,n){const r=e,i=Sm("where",t);return Am._create(i,r,n)}class Hx extends zx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let c=i;const u=o.getFlattenedFilters();for(const h of u)kT(c,h),c=Ly(c,h)}(e._query,n),new Oa(e.firestore,e.converter,Ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wx extends Bx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wx(e,n)}_apply(e){const n=function(i,o,c){if(i.startAt!==null)throw new Xe(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Xe(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jd(o,c)}(e._query,this._field,this._direction);return new Oa(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new lu(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Zs(t,e="asc"){const n=e,r=Sm("orderBy",t);return Wx._create(r,n)}class qx extends Bx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new qx(e,n,r)}_apply(e){return new Oa(e.firestore,e.converter,Cp(e._query,this._limit,this._limitType))}}function Tm(t){return _M("limit",t),qx._create("limit",t,"F")}function tE(t,e,n){if(typeof(n=vn(n))=="string"){if(n==="")throw new Xe(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kA(e)&&n.indexOf("/")!==-1)throw new Xe(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gn.fromString(n));if(!ft.isDocumentKey(r))throw new Xe(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return y_(t,new ft(r))}if(n instanceof Gn)return y_(t,n._key);throw new Xe(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${om(n)}.`)}function nE(t,e){if(!Array.isArray(t)||t.length===0)throw new Xe(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kT(t,e){const n=function(i,o){for(const c of i)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Xe(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xe(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vD{convertValue(e,n="none"){switch(ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Do(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ap].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>Yn(c.doubleValue));return new qs(o)}convertGeoPoint(e){return new Ws(Yn(e.latitude),Yn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=um(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ad(e));default:return null}}convertTimestamp(e){const n=Eo(e);return new wn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gn.fromString(e);nn(GA(r),9688,{name:e});const i=new Td(r.get(1),r.get(3)),o=new ft(r.popFirst(5));return i.isEqual(n)||Ta(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class nd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ml extends ET{constructor(e,n,r,i,o,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ip(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ml._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ml._jsonSchemaVersion="firestore/documentSnapshot/1.0",ml._jsonSchema={type:or("string",ml._jsonSchemaVersion),bundleSource:or("string","DocumentSnapshot"),bundleName:or("string"),bundle:or("string")};class ip extends ml{data(e={}){return super.data(e)}}class gl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new nd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ip(this._firestore,this._userDataWriter,r.key,r,new nd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Xe(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(u=>{const h=new ip(i._firestore,i._userDataWriter,u.doc.key,u.doc,new nd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new ip(i._firestore,i._userDataWriter,u.doc.key,u.doc,new nd(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:xD(u.type),doc:h,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ux.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t){t=xi(t,Gn);const e=xi(t.firestore,ja);return sD(wm(e),t._key).then(n=>AT(e,t,n))}gl._jsonSchemaVersion="firestore/querySnapshot/1.0",gl._jsonSchema={type:or("string",gl._jsonSchemaVersion),bundleSource:or("string","QuerySnapshot"),bundleName:or("string"),bundle:or("string")};class Gx extends vD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}function qr(t){t=xi(t,Oa);const e=xi(t.firestore,ja),n=wm(e),r=new Gx(e);return NT(t._query),aD(n,t._query).then(i=>new gl(e,r,t,i))}function Xn(t,e,n){t=xi(t,Gn);const r=xi(t.firestore,ja),i=ST(t.converter,e,n);return Im(r,[xT(Nm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ki.none())])}function An(t,e,n,...r){t=xi(t,Gn);const i=xi(t.firestore,ja),o=Nm(i);let c;return c=typeof(e=vn(e))=="string"||e instanceof _m?pD(o,"updateDoc",t._key,e,n,r):fD(o,"updateDoc",t._key,e),Im(i,[c.toMutation(t._key,Ki.exists(!0))])}function Cm(t){return Im(xi(t.firestore,ja),[new yx(t._key,Ki.none())])}function jm(t,e){const n=xi(t.firestore,ja),r=at(t),i=ST(t.converter,e);return Im(n,[xT(Nm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ki.exists(!1))]).then(()=>r)}function gr(t,...e){var n,r,i;t=vn(t);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||eE(e[c])||(o=e[c++]);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(eE(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let h,f,g;if(t instanceof Gn)f=xi(t.firestore,ja),g=dm(t._key.path),h={next:y=>{e[c]&&e[c](AT(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=xi(t,Oa);f=xi(y.firestore,ja),g=y._query;const v=new Gx(f);h={next:b=>{e[c]&&e[c](new gl(f,v,y,b))},error:e[c+1],complete:e[c+2]},NT(t._query)}return function(v,b,k,w){const A=new Lx(w),j=new Mx(b,A,k);return v.asyncQueue.enqueueAndForget(async()=>Ix(await Dp(v),j)),()=>{A.Ou(),v.asyncQueue.enqueueAndForget(async()=>Px(await Dp(v),j))}}(wm(f),g,u,h)}function Im(t,e){return function(r,i){const o=new Na;return r.asyncQueue.enqueueAndForget(async()=>G9(await iD(r),i,o)),o.promise}(wm(t),e)}function AT(t,e,n){const r=n.docs.get(e._key),i=new Gx(t);return new ml(t,i,e._key,r,new nd(n.hasPendingWrites,n.fromCache),e.converter)}function Ic(){return new Fx("serverTimestamp")}(function(e,n=!0){(function(i){su=i})(Il),El(new bo("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new ja(new pM(r.getProvider("auth-internal")),new yM(c,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Xe(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(f.options.projectId,g)}(c,i),c);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Us(r_,i_,e),Us(r_,i_,"esm2017")})();var bD="firebase",wD="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(bD,wD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firebasestorage.googleapis.com",CT="storageBucket",_D=2*60*1e3,ED=10*60*1e3,ND=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends ta{constructor(e,n,r=0){super(O0(e),`Firebase Storage: ${n} (${O0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,On.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return O0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _n;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_n||(_n={}));function O0(t){return"storage/"+t}function Kx(){const t="An unknown error occurred, please check the error payload for server response.";return new On(_n.UNKNOWN,t)}function kD(t){return new On(_n.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function SD(t){return new On(_n.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new On(_n.UNAUTHENTICATED,t)}function TD(){return new On(_n.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CD(t){return new On(_n.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jT(){return new On(_n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IT(){return new On(_n.CANCELED,"User canceled the upload/download.")}function jD(t){return new On(_n.INVALID_URL,"Invalid URL '"+t+"'.")}function ID(t){return new On(_n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PD(){return new On(_n.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CT+"' property when initializing the app?")}function PT(){return new On(_n.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RD(){return new On(_n.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function MD(){return new On(_n.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DD(t){return new On(_n.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ky(t){return new On(_n.INVALID_ARGUMENT,t)}function RT(){return new On(_n.APP_DELETED,"The Firebase app was deleted.")}function OD(t){return new On(_n.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hd(t,e){return new On(_n.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function qu(t){throw new On(_n.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ii.makeFromUrl(e,n)}catch{return new Ii(e,"")}if(r.path==="")return r;throw ID(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),h={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const g="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${g}/b/${i}/o${v}`,"i"),k={bucket:1,path:3},w=n===TT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",j=new RegExp(`^https?://${w}/${i}/${A}`,"i"),L=[{regex:u,indices:h,postModify:o},{regex:b,indices:k,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<L.length;D++){const z=L[D],G=z.regex.exec(e);if(G){const M=G[z.indices.bucket];let I=G[z.indices.path];I||(I=""),r=new Ii(M,I),z.postModify(r);break}}if(r==null)throw jD(e);return r}}class LD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e,n){let r=1,i=null,o=null,c=!1,u=0;function h(){return u===2}let f=!1;function g(...A){f||(f=!0,e.apply(null,A))}function y(A){i=setTimeout(()=>{i=null,t(b,h())},A)}function v(){o&&clearTimeout(o)}function b(A,...j){if(f){v();return}if(A){v(),g.call(null,A,...j);return}if(h()||c){v(),g.call(null,A,...j);return}r<64&&(r*=2);let L;u===1?(u=2,L=0):L=(r+Math.random())*1e3,y(L)}let k=!1;function w(A){k||(k=!0,v(),!f&&(i!==null?(A||(u=2),clearTimeout(i),y(0)):A||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,w(!0)},n),w}function FD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return t!==void 0}function $D(t){return typeof t=="function"}function zD(t){return typeof t=="object"&&!Array.isArray(t)}function Pm(t){return typeof t=="string"||t instanceof String}function rE(t){return Qx()&&t instanceof Blob}function Qx(){return typeof Blob<"u"}function iE(t,e,n,r){if(r<e)throw Ky(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ky(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var yl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yl||(yl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,r,i,o,c,u,h,f,g,y,v=!0,b=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,w)=>{this.resolve_=k,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Cf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===yl.NO_ERROR,h=o.getStatus();if(!u||DT(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===yl.ABORT;r(!1,new Cf(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Cf(f,o))})},n=(r,i)=>{const o=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());UD(h)?o(h):o()}catch(h){c(h)}else if(u!==null){const h=Kx();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(i.canceled){const h=this.appDelete_?RT():IT();c(h)}else{const h=jT();c(h)}};this.canceled_?n(!1,new Cf(!1,null,!0)):this.backoffId_=VD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function HD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KD(t,e,n,r,i,o,c=!0,u=!1){const h=MT(t.urlParams),f=t.url+h,g=Object.assign({},t.headers);return qD(g,e),HD(g,n),WD(g,o),GD(g,r),new BD(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YD(...t){const e=QD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qx())return new Blob(t);throw new On(_n.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function XD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){if(typeof atob>"u")throw DD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class L0{constructor(e,n){this.data=e,this.contentType=n||null}}function ZD(t,e){switch(t){case Fs.RAW:return new L0(OT(e));case Fs.BASE64:case Fs.BASE64URL:return new L0(LT(t,e));case Fs.DATA_URL:return new L0(tO(e),nO(e))}throw Kx()}function OT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=t.charCodeAt(++n);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function eO(t){let e;try{e=decodeURIComponent(t)}catch{throw hd(Fs.DATA_URL,"Malformed data URL.")}return OT(e)}function LT(t,e){switch(t){case Fs.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw hd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fs.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw hd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=JD(e)}catch(i){throw i.message.includes("polyfill")?i:hd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class VT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw hd(Fs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=rO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function tO(t){const e=new VT(t);return e.base64?LT(Fs.BASE64,e.rest):eO(e.rest)}function nO(t){return new VT(t).contentType}function rO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){let r=0,i="";rE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(rE(this.data_)){const r=this.data_,i=XD(r,e,n);return i===null?null:new ba(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ba(r,!0)}}static getBlob(...e){if(Qx()){const n=e.map(r=>r instanceof ba?r.data_:r);return new ba(YD.apply(null,n))}else{const n=e.map(c=>Pm(c)?ZD(Fs.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[o++]=c[u]}),new ba(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){let e;try{e=JSON.parse(t)}catch{return null}return zD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function sO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function UT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t,e){return e}class ni{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||aO}}let jf=null;function oO(t){return!Pm(t)||t.length<2?t:UT(t)}function Yx(){if(jf)return jf;const t=[];t.push(new ni("bucket")),t.push(new ni("generation")),t.push(new ni("metageneration")),t.push(new ni("name","fullPath",!0));function e(o,c){return oO(c)}const n=new ni("name");n.xform=e,t.push(n);function r(o,c){return c!==void 0?Number(c):c}const i=new ni("size");return i.xform=r,t.push(i),t.push(new ni("timeCreated")),t.push(new ni("updated")),t.push(new ni("md5Hash",null,!0)),t.push(new ni("cacheControl",null,!0)),t.push(new ni("contentDisposition",null,!0)),t.push(new ni("contentEncoding",null,!0)),t.push(new ni("contentLanguage",null,!0)),t.push(new ni("contentType",null,!0)),t.push(new ni("metadata","customMetadata",!0)),jf=t,jf}function lO(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Ii(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function cO(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const c=n[o];r[c.local]=c.xform(r,e[c.server])}return lO(r,t),r}function $T(t,e,n){const r=FT(e);return r===null?null:cO(t,r,n)}function uO(t,e,n,r){const i=FT(e);if(i===null||!Pm(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(f=>{const g=t.bucket,y=t.fullPath,v="/b/"+c(g)+"/o/"+c(y),b=uu(v,n,r),k=MT({alt:"media",token:f});return b+k})[0]}function zT(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Ol{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){if(!t)throw Kx()}function Xx(t,e){function n(r,i){const o=$T(t,i,e);return ka(o!==null),o}return n}function dO(t,e){function n(r,i){const o=$T(t,i,e);return ka(o!==null),uO(o,i,t.host,t._protocol)}return n}function uh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=TD():i=AD():n.getStatus()===402?i=SD(t.bucket):n.getStatus()===403?i=CD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Jx(t){const e=uh(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=kD(t.path)),o.serverResponse=i.serverResponse,o}return n}function hO(t,e,n){const r=e.fullServerUrl(),i=uu(r,t.host,t._protocol),o="GET",c=t.maxOperationRetryTime,u=new Ol(i,o,Xx(t,n),c);return u.errorHandler=Jx(e),u}function fO(t,e,n){const r=e.fullServerUrl(),i=uu(r,t.host,t._protocol),o="GET",c=t.maxOperationRetryTime,u=new Ol(i,o,dO(t,n),c);return u.errorHandler=Jx(e),u}function pO(t,e){const n=e.fullServerUrl(),r=uu(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function c(h,f){}const u=new Ol(r,i,c,o);return u.successCodes=[200,204],u.errorHandler=Jx(e),u}function mO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BT(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mO(null,e)),r}function HT(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let L="";for(let D=0;D<2;D++)L=L+Math.random().toString().slice(2);return L}const h=u();c["Content-Type"]="multipart/related; boundary="+h;const f=BT(e,r,i),g=zT(f,n),y="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",b=ba.getBlob(y,r,v);if(b===null)throw PT();const k={name:f.fullPath},w=uu(o,t.host,t._protocol),A="POST",j=t.maxUploadRetryTime,R=new Ol(w,A,Xx(t,n),j);return R.urlParams=k,R.headers=c,R.body=b.uploadData(),R.errorHandler=uh(e),R}class Lp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Zx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ka(!1)}return ka(!!n&&(e||["active"]).indexOf(n)!==-1),n}function gO(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),c=BT(e,r,i),u={name:c.fullPath},h=uu(o,t.host,t._protocol),f="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},y=zT(c,n),v=t.maxUploadRetryTime;function b(w){Zx(w);let A;try{A=w.getResponseHeader("X-Goog-Upload-URL")}catch{ka(!1)}return ka(Pm(A)),A}const k=new Ol(h,f,b,v);return k.urlParams=u,k.headers=g,k.body=y,k.errorHandler=uh(e),k}function yO(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(f){const g=Zx(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ka(!1)}y||ka(!1);const v=Number(y);return ka(!isNaN(v)),new Lp(v,r.size(),g==="final")}const c="POST",u=t.maxUploadRetryTime,h=new Ol(n,c,o,u);return h.headers=i,h.errorHandler=uh(e),h}const sE=256*1024;function vO(t,e,n,r,i,o,c,u){const h=new Lp(0,0);if(c?(h.current=c.current,h.total=c.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw RD();const f=h.total-h.current;let g=f;i>0&&(g=Math.min(g,i));const y=h.current,v=y+g;let b="";g===0?b="finalize":f===g?b="upload, finalize":b="upload";const k={"X-Goog-Upload-Command":b,"X-Goog-Upload-Offset":`${h.current}`},w=r.slice(y,v);if(w===null)throw PT();function A(D,z){const G=Zx(D,["active","final"]),M=h.current+g,I=r.size();let T;return G==="final"?T=Xx(e,o)(D,z):T=null,new Lp(M,I,G==="final",T)}const j="POST",R=e.maxUploadRetryTime,L=new Ol(n,j,A,R);return L.headers=k,L.body=w.uploadData(),L.progressCallback=u||null,L.errorHandler=uh(t),L}const gi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function V0(t){switch(t){case"running":case"pausing":case"canceling":return gi.RUNNING;case"paused":return gi.PAUSED;case"success":return gi.SUCCESS;case"canceled":return gi.CANCELED;case"error":return gi.ERROR;default:return gi.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n,r){if($D(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class bO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw qu("cannot .send() more than once");if(Ro(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wO extends bO{initXhr(){this.xhr_.responseType="text"}}function uo(){return new wO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Yx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(_n.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(DT(i.status,[]))if(o)i=jT();else{this.sleepTime=Math.max(this.sleepTime*2,ND),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(_n.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=gO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=yO(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,uo,n,r);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=sE*this._chunkMultiplier,n=new Lp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=vO(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const u=this._ref.storage._makeRequest(c,uo,i,o,!1);this._request=u,u.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){sE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=hO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=HT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=IT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=V0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new xO(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(V0(this._state)){case gi.SUCCESS:yc(this._resolve.bind(null,this.snapshot))();break;case gi.CANCELED:case gi.ERROR:const n=this._reject;yc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(V0(this._state)){case gi.RUNNING:case gi.PAUSED:e.next&&yc(e.next.bind(e,this.snapshot))();break;case gi.SUCCESS:e.complete&&yc(e.complete.bind(e))();break;case gi.CANCELED:case gi.ERROR:e.error&&yc(e.error.bind(e,this._error))();break;default:e.error&&yc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this._service=e,n instanceof Ii?this._location=n:this._location=Ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Tl(e,n)}get root(){const e=new Ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UT(this._location.path)}get storage(){return this._service}get parent(){const e=iO(this._location.path);if(e===null)return null;const n=new Ii(this._location.bucket,e);return new Tl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OD(e)}}function EO(t,e,n){t._throwIfRoot("uploadBytes");const r=HT(t.storage,t._location,Yx(),new ba(e,!0),n);return t.storage.makeRequestWithTokens(r,uo).then(i=>({metadata:i,ref:t}))}function NO(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _O(t,new ba(e),n)}function kO(t){t._throwIfRoot("getDownloadURL");const e=fO(t.storage,t._location,Yx());return t.storage.makeRequestWithTokens(e,uo).then(n=>{if(n===null)throw MD();return n})}function SO(t){t._throwIfRoot("deleteObject");const e=pO(t.storage,t._location);return t.storage.makeRequestWithTokens(e,uo)}function AO(t,e){const n=sO(t._location.path,e),r=new Ii(t._location.bucket,n);return new Tl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){return/^[A-Za-z]+:\/\//.test(t)}function CO(t,e){return new Tl(t,e)}function WT(t,e){if(t instanceof e1){const n=t;if(n._bucket==null)throw PD();const r=new Tl(n,n._bucket);return e!=null?WT(r,e):r}else return e!==void 0?AO(t,e):t}function jO(t,e){if(e&&TO(e)){if(t instanceof e1)return CO(t,e);throw Ky("To use ref(service, url), the first argument must be a Storage instance.")}else return WT(t,e)}function aE(t,e){const n=e==null?void 0:e[CT];return n==null?null:Ii.makeFromBucketSpec(n,t)}function IO(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ro(e);i&&(Qv(`https://${t.host}/b`),Yv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:hS(o,t.app.options.projectId))}class e1{constructor(e,n,r,i,o,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=TT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_D,this._maxUploadRetryTime=ED,this._requests=new Set,i!=null?this._bucket=Ii.makeFromBucketSpec(i,this._host):this._bucket=aE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ii.makeFromBucketSpec(this._url,e):this._bucket=aE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tl(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new LD(RT());{const c=KD(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const oE="@firebase/storage",lE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="storage";function t1(t,e,n){return t=vn(t),EO(t,e,n)}function cE(t,e,n){return t=vn(t),NO(t,e,n)}function ul(t){return t=vn(t),kO(t)}function PO(t){return t=vn(t),SO(t)}function ds(t,e){return t=vn(t),jO(t,e)}function RO(t=Zv(),e){t=vn(t);const r=rm(t,qT).getImmediate({identifier:e}),i=cS("storage");return i&&MO(r,...i),r}function MO(t,e,n,r={}){IO(t,e,n,r)}function DO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new e1(n,r,i,e,Il)}function OO(){El(new bo(qT,DO,"PUBLIC").setMultipleInstances(!0)),Us(oE,lE,""),Us(oE,lE,"esm2017")}OO();const LO={apiKey:"AIzaSyCraPDyyhOJs9IJtVMCe2b1VNFYkbtqWEg",authDomain:"playcenter-universal.firebaseapp.com",projectId:"playcenter-universal",storageBucket:"playcenter-universal.appspot.com",messagingSenderId:"876884906641",appId:"1:876884906641:web:a0a5b7526b7f4161452530",measurementId:"G-4MPL62WSKW"},n1=mS(LO),De=lD(n1),rl=uM(n1),hs=RO(n1);function uE(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e="0123456789";let n="USER-";for(let r=0;r<3;r++)n+=t.charAt(Math.floor(Math.random()*t.length));for(let r=0;r<3;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}const GT=S.createContext();function ii(){return S.useContext(GT)}function KT({children:t}){const[e,n]=S.useState(null),[r,i]=S.useState(null),[o,c]=S.useState(!0);S.useEffect(()=>{let w=null;const A=J6(rl,async j=>{if(w){try{w()}catch{}w=null}if(n(j),!j){i(null),c(!1);return}try{const R=at(De,"users",j.uid),L=at(De,"usuarios",j.uid),[D,z]=await Promise.all([ps(R),ps(L)]);let G=null;if(D.exists())G=R;else if(z.exists())G=L;else{const I={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:uE(),displayName:j.displayName||"",email:j.email||"",createdAt:new Date};try{await Xn(R,I,{merge:!0})}catch(T){console.warn("No fue posible crear users/{uid} automáticamente:",T)}G=R}w=gr(G,M=>{if(M.exists()){const I=M.data()||{},T={uid:j.uid,...I,displayName:j.displayName||I.displayName||"",email:j.email||I.email||"",isAdmin:I.admin===!0,role:I.role||"buyer",isSeller:I.isSeller===!0||I.role==="seller",storeName:I.storeName||"",storeDescription:I.storeDescription||"",storeImage:I.storeImage||"",storePhone:I.storePhone||"",storeAddress:I.storeAddress||""};i(T)}else{const I={uid:j.uid,telefono:"",direccion:"",admin:!1,codigo:"",displayName:j.displayName||"",email:j.email||j.email,isAdmin:!1};i(I)}c(!1)},M=>{console.error("onSnapshot usuario error:",M),c(!1)})}catch(R){console.error("Error inicializando listener de usuario:",R);try{const L=at(De,"users",j.uid),D=await ps(L),z=D.exists()?D.data():{},G={uid:j.uid,...z,displayName:j.displayName||z.displayName||"",email:j.email||z.email||"",isAdmin:z.admin===!0};i(G)}catch(L){console.error("Fallback read error:",L),i({uid:j.uid,displayName:j.displayName||"",email:j.email||"",telefono:"",direccion:"",isAdmin:!1,codigo:""})}finally{c(!1)}}});return()=>{try{A()}catch{}if(w)try{w()}catch{}}},[]);async function u(w,A,j){const R=await G6(rl,w,A);await Uc(R.user,{displayName:j});const L=uE(),D={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:L,displayName:j,email:w,createdAt:new Date};await Xn(at(De,"users",R.user.uid),D,{merge:!0}),n(rl.currentUser),i({uid:R.user.uid,telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:L,displayName:j,email:w,isAdmin:!1})}function h(w,A){return K6(rl,w,A)}function f(){return Z6(rl)}async function g(w){if(!e)throw new Error("No user logged in");const A=at(De,"users",e.uid);try{await Xn(A,w,{merge:!0});const j=await ps(A),R=j.exists()?j.data():{},L={uid:e.uid,...R,displayName:e.displayName||R.displayName||"",email:e.email||R.email||"",isAdmin:R.admin===!0};if(i(L),w.displayName&&e.displayName!==w.displayName)try{await Uc(e,{displayName:w.displayName}),n(rl.currentUser)}catch(D){console.warn("Error actualizando displayName en auth:",D)}return L}catch(j){throw console.error("actualizarUsuarioInfo error:",j),j}}async function y(w){if(!e)throw new Error("No user logged in");const A=ds(hs,`usuarios/${e.uid}/perfil.jpg`);await t1(A,w);const j=await ul(A);await Uc(e,{photoURL:j}),n(rl.currentUser);try{await Xn(at(De,"users",e.uid),{fotoURL:j},{merge:!0}),i(R=>({...R,fotoURL:j}))}catch(R){console.warn("No se pudo persistir fotoURL en users/{uid}:",R)}return j}async function v(w){if(!e)throw new Error("No user logged in");const A=at(De,"users",e.uid);try{const j={role:"seller",isSeller:!0,storeName:w.storeName||"",storeDescription:w.storeDescription||"",storeImage:w.storeImage||"",storePhone:w.storePhone||"",storeAddress:w.storeAddress||"",sellerActivatedAt:new Date};return await Xn(A,j,{merge:!0}),i(R=>({...R,...j})),!0}catch(j){throw console.error("Error al convertirse en vendedor:",j),j}}async function b(w){if(!e)throw new Error("No user logged in");if(!(r!=null&&r.isSeller))throw new Error("User is not a seller");const A=at(De,"users",e.uid);try{return await Xn(A,w,{merge:!0}),i(j=>({...j,...w})),!0}catch(j){throw console.error("Error al actualizar tienda:",j),j}}const k={usuario:e,usuarioInfo:r,login:h,signup:u,logout:f,actualizarUsuarioInfo:g,subirImagen:y,convertirseEnVendedor:v,actualizarTienda:b};return a.jsx(GT.Provider,{value:k,children:!o&&t})}const QT=S.createContext(),r1=()=>{const t=S.useContext(QT);if(!t)throw new Error("useTheme debe usarse dentro de ThemeProvider");return t},VO=({children:t})=>{const[e,n]=S.useState(()=>{try{return localStorage.getItem("pcu-theme")||"light"}catch{return"light"}});S.useEffect(()=>{const o=document.documentElement;e==="dark"?(o.classList.add("dark"),o.classList.add("dark-theme")):(o.classList.remove("dark"),o.classList.remove("dark-theme"));try{localStorage.setItem("pcu-theme",e)}catch(c){console.error("Error guardando tema:",c)}},[e]);const i={theme:e,toggleTheme:()=>{n(o=>o==="light"?"dark":"light")},isDark:e==="dark",isLight:e==="light"};return a.jsx(QT.Provider,{value:i,children:t})},FO=(t=!1)=>{const[e,n]=S.useState([]),[r,i]=S.useState(!0),[o,c]=S.useState(null);return S.useEffect(()=>{(async()=>{try{let h;return t?h=yn($t(De,"productos"),Zs("fechaCreacion","desc")):h=yn($t(De,"productos"),Dr("activo","==",!0),Zs("fechaCreacion","desc")),gr(h,g=>{const y=g.docs.map(v=>({id:v.id,...v.data()}));n(y),i(!1)},g=>{console.error("Error fetching products:",g),c(g.message),i(!1)})}catch(h){console.error("Error setting up products listener:",h),c(h.message),i(!1)}})()},[t]),{products:e,loading:r,error:o}},YT=t=>{const[e,n]=S.useState([]),[r,i]=S.useState(!0),[o,c]=S.useState(null);return S.useEffect(()=>{(async()=>{try{let h;return!t||t===""||t==="todos"?h=yn($t(De,"productos"),Dr("activo","==",!0),Zs("fechaCreacion","desc")):h=yn($t(De,"productos"),Dr("categoria","==",t),Dr("activo","==",!0),Zs("fechaCreacion","desc")),gr(h,g=>{const y=g.docs.map(v=>({id:v.id,...v.data()}));n(y),i(!1)},g=>{console.error("Error fetching products by category:",g),c(g.message),i(!1)})}catch(h){console.error("Error setting up products by category listener:",h),c(h.message),i(!1)}})()},[t]),{products:e,loading:r,error:o}},UO=t=>{const[e,n]=S.useState(null),[r,i]=S.useState(!0),[o,c]=S.useState(null);return S.useEffect(()=>{if(!t){n(null),i(!1);return}let u=null,h=null,f=!1;i(!0),c(null);const g=b=>(b||"").toLowerCase().replace(/[^a-z0-9]/g,""),y=b=>{try{const k=at(De,"productos",b);return gr(k,w=>{w.exists()?(n({id:w.id,...w.data()}),c(null),i(!1)):(c("Producto no encontrado"),n(null),i(!1))},w=>{c((w==null?void 0:w.message)||"Error al cargar el producto"),i(!1)})}catch{return c("Error al suscribirse al producto"),i(!1),null}},v=async()=>{if(!f){f=!0;try{const b=yn($t(De,"productos"),Dr("slug","==",t),Tm(1)),k=await qr(b);if(!k.empty){const L=k.docs[0].id;h=y(L);return}const A=(await qr($t(De,"productos"))).docs.map(L=>({id:L.id,...L.data()})),j=g(t),R=A.find(L=>g(L.slug||"")===j||g(L.nombre||"")===j||L.id===t);R?h=y(R.id):(c("Producto no encontrado"),n(null),i(!1))}catch{c("Error al cargar el producto"),n(null),i(!1)}}};try{const b=at(De,"productos",t);u=gr(b,k=>{k.exists()?(n({id:k.id,...k.data()}),c(null),i(!1)):v()},k=>{v()})}catch{v()}return()=>{typeof u=="function"&&u(),typeof h=="function"&&h()}},[t]),{product:e,loading:r,error:o}},i1=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[i,o]=S.useState(null);return S.useEffect(()=>{(async()=>{try{const u=yn($t(De,"categorias"),Dr("activa","==",!0),Zs("orden","asc"));return gr(u,f=>{const g=f.docs.map(y=>({id:y.id,...y.data()}));e(g),r(!1)},f=>{console.error("Error fetching categories:",f),o(f.message),r(!1)})}catch(u){console.error("Error setting up categories listener:",u),o(u.message),r(!1)}})()},[]),{categories:t,loading:n,error:i}},$O=()=>{const[t,e]=S.useState({}),[n,r]=S.useState([]),[i,o]=S.useState(!0),[c,u]=S.useState(null);return S.useEffect(()=>{let h=null,f=null,g=[],y=[],v=!1,b=!1;const k=()=>{if(!(!v||!b))try{const w={};g.forEach(A=>{w[A.id]=y.filter(j=>j.categoria===A.id)}),e(w),o(!1)}catch(w){console.error("Error grouping products by categories:",w),u(w.message||"Error agrupando productos"),o(!1)}};try{const w=yn($t(De,"categorias"),Dr("activa","==",!0),Zs("orden","asc"));h=gr(w,j=>{g=j.docs.map(R=>({id:R.id,...R.data()})),r(g),v=!0,k()},j=>{console.error("Error fetching categories (rt):",j),u(j.message),o(!1)});const A=yn($t(De,"productos"),Dr("activo","==",!0),Zs("fechaCreacion","desc"));f=gr(A,j=>{y=j.docs.map(R=>({id:R.id,...R.data()})),b=!0,k()},j=>{console.error("Error fetching products (rt):",j),u(j.message),o(!1)})}catch(w){console.error("Error setting up realtime listeners:",w),u(w.message),o(!1)}return()=>{typeof h=="function"&&h(),typeof f=="function"&&f()}},[]),{productsByCategory:t,categories:n,loading:i,error:c}},zO=(t,e="")=>{const[n,r]=S.useState([]),[i,o]=S.useState(!1),[c,u]=S.useState(null);return S.useEffect(()=>{if(!t||t.length<2){r([]);return}const f=setTimeout(async()=>{o(!0);try{let g=yn($t(De,"productos"),Dr("activo","==",!0));e&&(g=yn(g,Dr("categoria","==",e)));const v=(await qr(g)).docs.map(w=>({id:w.id,...w.data()})),b=t.toLowerCase(),k=v.filter(w=>{var A,j,R,L;return((A=w.nombre)==null?void 0:A.toLowerCase().includes(b))||((j=w.descripcion)==null?void 0:j.toLowerCase().includes(b))||((R=w.empresa)==null?void 0:R.toLowerCase().includes(b))||((L=w.etiquetas)==null?void 0:L.some(D=>D.toLowerCase().includes(b)))});r(k)}catch(g){console.error("Error searching products:",g),u(g.message)}finally{o(!1)}},300);return()=>clearTimeout(f)},[t,e]),{results:n,loading:i,error:c}},dE=S.forwardRef(({onClose:t,placeholder:e="Buscar en pcu.com.do"},n)=>{const[r,i]=S.useState(""),[o,c]=S.useState([]),[u,h]=S.useState(!1),f=S.useRef(null),g=wi(),{results:y,loading:v}=zO(r);S.useEffect(()=>{if(!r.trim()){c([]),h(!1);return}c(y),h(!0)},[r,y]),S.useEffect(()=>{const w=A=>{f.current&&!f.current.contains(A.target)&&h(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const b=w=>{w.preventDefault(),r.trim()&&(g(`/buscar?q=${encodeURIComponent(r.trim())}`),i(""),c([]),h(!1),t&&t())},k=w=>{const A=w.nombre.trim();g(`/buscar?q=${encodeURIComponent(A)}`),i(""),c([]),h(!1),t&&t()};return a.jsxs("div",{className:"relative w-full",ref:f,children:[a.jsxs("form",{onSubmit:b,className:"flex w-full",children:[a.jsx("input",{type:"text",ref:n,value:r,onChange:w=>i(w.target.value),placeholder:e,className:"flex-grow border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-300",autoComplete:"off"}),a.jsx("button",{type:"submit",className:"ml-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-md text-sm font-semibold transition",children:"Buscar"})]}),u&&a.jsxs("ul",{className:"absolute z-10 w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 mt-1 rounded-md shadow-md max-h-72 overflow-y-auto transition-colors duration-300",children:[v&&a.jsx("li",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"Buscando..."}),!v&&o.length===0&&a.jsx("li",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"Sin resultados"}),!v&&o.map(w=>a.jsxs("li",{onClick:()=>k(w),className:"px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition",title:`${w.nombre} ${w.empresa?"- "+w.empresa:""}`,children:[a.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:w.nombre}),w.empresa&&a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.empresa})]},w.id))]})]})}),s1=S.createContext({});function a1(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const o1=typeof window<"u",XT=o1?S.useLayoutEffect:S.useEffect,Rm=S.createContext(null);function l1(t,e){t.indexOf(e)===-1&&t.push(e)}function c1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ia=(t,e,n)=>n>e?e:n<t?t:n;let u1=()=>{};const Pa={},JT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ZT(t){return typeof t=="object"&&t!==null}const e4=t=>/^0[^.\s]+$/u.test(t);function d1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Qi=t=>t,BO=(t,e)=>n=>e(t(n)),dh=(...t)=>t.reduce(BO),Md=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class h1{constructor(){this.subscriptions=[]}add(e){return l1(this.subscriptions,e),()=>c1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gs=t=>t*1e3,Ks=t=>t/1e3;function t4(t,e){return e?t*(1e3/e):0}const n4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,HO=1e-7,WO=12;function qO(t,e,n,r,i){let o,c,u=0;do c=e+(n-e)/2,o=n4(c,r,i)-t,o>0?n=c:e=c;while(Math.abs(o)>HO&&++u<WO);return c}function hh(t,e,n,r){if(t===e&&n===r)return Qi;const i=o=>qO(o,0,1,t,n);return o=>o===0||o===1?o:n4(i(o),e,r)}const r4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,i4=t=>e=>1-t(1-e),s4=hh(.33,1.53,.69,.99),f1=i4(s4),a4=r4(f1),o4=t=>(t*=2)<1?.5*f1(t):.5*(2-Math.pow(2,-10*(t-1))),p1=t=>1-Math.sin(Math.acos(t)),l4=i4(p1),c4=r4(p1),GO=hh(.42,0,1,1),KO=hh(0,0,.58,1),u4=hh(.42,0,.58,1),QO=t=>Array.isArray(t)&&typeof t[0]!="number",d4=t=>Array.isArray(t)&&typeof t[0]=="number",YO={linear:Qi,easeIn:GO,easeInOut:u4,easeOut:KO,circIn:p1,circInOut:c4,circOut:l4,backIn:f1,backInOut:a4,backOut:s4,anticipate:o4},XO=t=>typeof t=="string",hE=t=>{if(d4(t)){u1(t.length===4);const[e,n,r,i]=t;return hh(e,n,r,i)}else if(XO(t))return YO[t];return t},If=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],fE={value:null};function JO(t,e){let n=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},h=0;function f(y){c.has(y)&&(g.schedule(y),t()),h++,y(u)}const g={schedule:(y,v=!1,b=!1)=>{const w=b&&i?n:r;return v&&c.add(y),w.has(y)||w.add(y),y},cancel:y=>{r.delete(y),c.delete(y)},process:y=>{if(u=y,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(f),e&&fE.value&&fE.value.frameloop[e].push(h),h=0,n.clear(),i=!1,o&&(o=!1,g.process(y))}};return g}const ZO=40;function h4(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=If.reduce((L,D)=>(L[D]=JO(o,e?D:void 0),L),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:g,update:y,preRender:v,render:b,postRender:k}=c,w=()=>{const L=Pa.useManualTiming?i.timestamp:performance.now();n=!1,Pa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(L-i.timestamp,ZO),1)),i.timestamp=L,i.isProcessing=!0,u.process(i),h.process(i),f.process(i),g.process(i),y.process(i),v.process(i),b.process(i),k.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},A=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:If.reduce((L,D)=>{const z=c[D];return L[D]=(G,M=!1,I=!1)=>(n||A(),z.schedule(G,M,I)),L},{}),cancel:L=>{for(let D=0;D<If.length;D++)c[If[D]].cancel(L)},state:i,steps:c}}const{schedule:Tn,cancel:To,state:Ir,steps:F0}=h4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qi,!0);let sp;function eL(){sp=void 0}const vi={now:()=>(sp===void 0&&vi.set(Ir.isProcessing||Pa.useManualTiming?Ir.timestamp:performance.now()),sp),set:t=>{sp=t,queueMicrotask(eL)}},f4=t=>e=>typeof e=="string"&&e.startsWith(t),m1=f4("--"),tL=f4("var(--"),g1=t=>tL(t)?nL.test(t.split("/*")[0].trim()):!1,nL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,du={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Dd={...du,transform:t=>Ia(0,1,t)},Pf={...du,default:1},fd=t=>Math.round(t*1e5)/1e5,y1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rL(t){return t==null}const iL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,v1=(t,e)=>n=>!!(typeof n=="string"&&iL.test(n)&&n.startsWith(t)||e&&!rL(n)&&Object.prototype.hasOwnProperty.call(n,e)),p4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,c,u]=r.match(y1);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},sL=t=>Ia(0,255,t),U0={...du,transform:t=>Math.round(sL(t))},dl={test:v1("rgb","red"),parse:p4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+U0.transform(t)+", "+U0.transform(e)+", "+U0.transform(n)+", "+fd(Dd.transform(r))+")"};function aL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Qy={test:v1("#"),parse:aL,transform:dl.transform},fh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),so=fh("deg"),Qs=fh("%"),Nt=fh("px"),oL=fh("vh"),lL=fh("vw"),pE={...Qs,parse:t=>Qs.parse(t)/100,transform:t=>Qs.transform(t*100)},Pc={test:v1("hsl","hue"),parse:p4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Qs.transform(fd(e))+", "+Qs.transform(fd(n))+", "+fd(Dd.transform(r))+")"},ir={test:t=>dl.test(t)||Qy.test(t)||Pc.test(t),parse:t=>dl.test(t)?dl.parse(t):Pc.test(t)?Pc.parse(t):Qy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?dl.transform(t):Pc.transform(t),getAnimatableNone:t=>{const e=ir.parse(t);return e.alpha=0,ir.transform(e)}},cL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uL(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(y1))==null?void 0:e.length)||0)+(((n=t.match(cL))==null?void 0:n.length)||0)>0}const m4="number",g4="color",dL="var",hL="var(",mE="${}",fL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Od(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(fL,h=>(ir.test(h)?(r.color.push(o),i.push(g4),n.push(ir.parse(h))):h.startsWith(hL)?(r.var.push(o),i.push(dL),n.push(h)):(r.number.push(o),i.push(m4),n.push(parseFloat(h))),++o,mE)).split(mE);return{values:n,split:u,indexes:r,types:i}}function y4(t){return Od(t).values}function v4(t){const{split:e,types:n}=Od(t),r=e.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],i[c]!==void 0){const u=n[c];u===m4?o+=fd(i[c]):u===g4?o+=ir.transform(i[c]):o+=i[c]}return o}}const pL=t=>typeof t=="number"?0:ir.test(t)?ir.getAnimatableNone(t):t;function mL(t){const e=y4(t);return v4(t)(e.map(pL))}const Co={test:uL,parse:y4,createTransformer:v4,getAnimatableNone:mL};function $0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,c=0;if(!e)i=o=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;i=$0(h,u,t+1/3),o=$0(h,u,t),c=$0(h,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function Vp(t,e){return n=>n>0?e:t}const Mn=(t,e,n)=>t+(e-t)*n,z0=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},yL=[Qy,dl,Pc],vL=t=>yL.find(e=>e.test(t));function gE(t){const e=vL(t);if(!e)return!1;let n=e.parse(t);return e===Pc&&(n=gL(n)),n}const yE=(t,e)=>{const n=gE(t),r=gE(e);if(!n||!r)return Vp(t,e);const i={...n};return o=>(i.red=z0(n.red,r.red,o),i.green=z0(n.green,r.green,o),i.blue=z0(n.blue,r.blue,o),i.alpha=Mn(n.alpha,r.alpha,o),dl.transform(i))},Yy=new Set(["none","hidden"]);function xL(t,e){return Yy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function bL(t,e){return n=>Mn(t,e,n)}function x1(t){return typeof t=="number"?bL:typeof t=="string"?g1(t)?Vp:ir.test(t)?yE:EL:Array.isArray(t)?x4:typeof t=="object"?ir.test(t)?yE:wL:Vp}function x4(t,e){const n=[...t],r=n.length,i=t.map((o,c)=>x1(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)n[c]=i[c](o);return n}}function wL(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=x1(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function _L(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],c=t.indexes[o][r[o]],u=t.values[c]??0;n[i]=u,r[o]++}return n}const EL=(t,e)=>{const n=Co.createTransformer(e),r=Od(t),i=Od(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Yy.has(t)&&!i.values.length||Yy.has(e)&&!r.values.length?xL(t,e):dh(x4(_L(r,i),i.values),n):Vp(t,e)};function b4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mn(t,e,n):x1(t)(t,e)}const NL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Tn.update(e,n),stop:()=>To(e),now:()=>Ir.isProcessing?Ir.timestamp:vi.now()}},w4=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Fp=2e4;function b1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Fp;)e+=n,r=t.next(e);return e>=Fp?1/0:e}function kL(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(b1(r),Fp);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:Ks(i)}}const SL=5;function _4(t,e,n){const r=Math.max(e-SL,0);return t4(n-t(r),e-r)}const qn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},B0=.001;function AL({duration:t=qn.duration,bounce:e=qn.bounce,velocity:n=qn.velocity,mass:r=qn.mass}){let i,o,c=1-e;c=Ia(qn.minDamping,qn.maxDamping,c),t=Ia(qn.minDuration,qn.maxDuration,Ks(t)),c<1?(i=f=>{const g=f*c,y=g*t,v=g-n,b=Xy(f,c),k=Math.exp(-y);return B0-v/b*k},o=f=>{const y=f*c*t,v=y*n+n,b=Math.pow(c,2)*Math.pow(f,2)*t,k=Math.exp(-y),w=Xy(Math.pow(f,2),c);return(-i(f)+B0>0?-1:1)*((v-b)*k)/w}):(i=f=>{const g=Math.exp(-f*t),y=(f-n)*t+1;return-B0+g*y},o=f=>{const g=Math.exp(-f*t),y=(n-f)*(t*t);return g*y});const u=5/t,h=CL(i,o,u);if(t=Gs(t),isNaN(h))return{stiffness:qn.stiffness,damping:qn.damping,duration:t};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:c*2*Math.sqrt(r*f),duration:t}}}const TL=12;function CL(t,e,n){let r=n;for(let i=1;i<TL;i++)r=r-t(r)/e(r);return r}function Xy(t,e){return t*Math.sqrt(1-e*e)}const jL=["duration","bounce"],IL=["stiffness","damping","mass"];function vE(t,e){return e.some(n=>t[n]!==void 0)}function PL(t){let e={velocity:qn.velocity,stiffness:qn.stiffness,damping:qn.damping,mass:qn.mass,isResolvedFromDuration:!1,...t};if(!vE(t,IL)&&vE(t,jL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*Ia(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:qn.mass,stiffness:i,damping:o}}else{const n=AL(t);e={...e,...n,mass:qn.mass},e.isResolvedFromDuration=!0}return e}function Up(t=qn.visualDuration,e=qn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:g,duration:y,velocity:v,isResolvedFromDuration:b}=PL({...n,velocity:-Ks(n.velocity||0)}),k=v||0,w=f/(2*Math.sqrt(h*g)),A=c-o,j=Ks(Math.sqrt(h/g)),R=Math.abs(A)<5;r||(r=R?qn.restSpeed.granular:qn.restSpeed.default),i||(i=R?qn.restDelta.granular:qn.restDelta.default);let L;if(w<1){const z=Xy(j,w);L=G=>{const M=Math.exp(-w*j*G);return c-M*((k+w*j*A)/z*Math.sin(z*G)+A*Math.cos(z*G))}}else if(w===1)L=z=>c-Math.exp(-j*z)*(A+(k+j*A)*z);else{const z=j*Math.sqrt(w*w-1);L=G=>{const M=Math.exp(-w*j*G),I=Math.min(z*G,300);return c-M*((k+w*j*A)*Math.sinh(I)+z*A*Math.cosh(I))/z}}const D={calculatedDuration:b&&y||null,next:z=>{const G=L(z);if(b)u.done=z>=y;else{let M=z===0?k:0;w<1&&(M=z===0?Gs(k):_4(L,z,G));const I=Math.abs(M)<=r,T=Math.abs(c-G)<=i;u.done=I&&T}return u.value=u.done?c:G,u},toString:()=>{const z=Math.min(b1(D),Fp),G=w4(M=>D.next(z*M).value,z,30);return z+"ms "+G},toTransition:()=>{}};return D}Up.applyToOptions=t=>{const e=kL(t,100,Up);return t.ease=e.ease,t.duration=Gs(e.duration),t.type="keyframes",t};function Jy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:u,max:h,restDelta:f=.5,restSpeed:g}){const y=t[0],v={done:!1,value:y},b=I=>u!==void 0&&I<u||h!==void 0&&I>h,k=I=>u===void 0?h:h===void 0||Math.abs(u-I)<Math.abs(h-I)?u:h;let w=n*e;const A=y+w,j=c===void 0?A:c(A);j!==A&&(w=j-y);const R=I=>-w*Math.exp(-I/r),L=I=>j+R(I),D=I=>{const T=R(I),N=L(I);v.done=Math.abs(T)<=f,v.value=v.done?j:N};let z,G;const M=I=>{b(v.value)&&(z=I,G=Up({keyframes:[v.value,k(v.value)],velocity:_4(L,I,v.value),damping:i,stiffness:o,restDelta:f,restSpeed:g}))};return M(0),{calculatedDuration:null,next:I=>{let T=!1;return!G&&z===void 0&&(T=!0,D(I),M(I)),z!==void 0&&I>=z?G.next(I-z):(!T&&D(I),v)}}}function RL(t,e,n){const r=[],i=n||Pa.mix||b4,o=t.length-1;for(let c=0;c<o;c++){let u=i(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||Qi:e;u=dh(h,u)}r.push(u)}return r}function ML(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(u1(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=RL(e,r,i),h=u.length,f=g=>{if(c&&g<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const v=Md(t[y],t[y+1],g);return u[y](v)};return n?g=>f(Ia(t[0],t[o-1],g)):f}function DL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Md(0,e,r);t.push(Mn(n,1,i))}}function OL(t){const e=[0];return DL(e,t.length-1),e}function LL(t,e){return t.map(n=>n*e)}function VL(t,e){return t.map(()=>e||u4).splice(0,t.length-1)}function pd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=QO(r)?r.map(hE):hE(r),o={done:!1,value:e[0]},c=LL(n&&n.length===e.length?n:OL(e),t),u=ML(c,e,{ease:Array.isArray(i)?i:VL(e,i)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}const FL=t=>t!==null;function w1(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(FL),u=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const UL={decay:Jy,inertia:Jy,tween:pd,keyframes:pd,spring:Up};function E4(t){typeof t.type=="string"&&(t.type=UL[t.type])}class _1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const $L=t=>t/100;class E1 extends _1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==vi.now()&&this.tick(vi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;E4(e);const{type:n=pd,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=e;let{keyframes:u}=e;const h=n||pd;h!==pd&&typeof u[0]!="number"&&(this.mixKeyframes=dh($L,b4(u[0],u[1])),u=[0,100]);const f=h({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=b1(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:g,repeat:y,repeatType:v,repeatDelay:b,type:k,onUpdate:w,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?j<0:j>i;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let L=this.currentTime,D=r;if(y){const I=Math.min(this.currentTime,i)/u;let T=Math.floor(I),N=I%1;!N&&I>=1&&(N=1),N===1&&T--,T=Math.min(T,y+1),!!(T%2)&&(v==="reverse"?(N=1-N,b&&(N-=b/u)):v==="mirror"&&(D=c)),L=Ia(0,1,N)*u}const z=R?{done:!1,value:g[0]}:D.next(L);o&&(z.value=o(z.value));let{done:G}=z;!R&&h!==null&&(G=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return M&&k!==Jy&&(z.value=w1(g,this.options,A,this.speed)),w&&w(z.value),M&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return Ks(this.calculatedDuration)}get time(){return Ks(this.currentTime)}set time(e){var n;e=Gs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ks(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=NL,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function zL(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const hl=t=>t*180/Math.PI,Zy=t=>{const e=hl(Math.atan2(t[1],t[0]));return ev(e)},BL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Zy,rotateZ:Zy,skewX:t=>hl(Math.atan(t[1])),skewY:t=>hl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ev=t=>(t=t%360,t<0&&(t+=360),t),xE=Zy,bE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),HL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:bE,scaleY:wE,scale:t=>(bE(t)+wE(t))/2,rotateX:t=>ev(hl(Math.atan2(t[6],t[5]))),rotateY:t=>ev(hl(Math.atan2(-t[2],t[0]))),rotateZ:xE,rotate:xE,skewX:t=>hl(Math.atan(t[4])),skewY:t=>hl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function tv(t){return t.includes("scale")?1:0}function nv(t,e){if(!t||t==="none")return tv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=HL,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=BL,i=u}if(!i)return tv(e);const o=r[e],c=i[1].split(",").map(qL);return typeof o=="function"?o(c):c[o]}const WL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return nv(n,e)};function qL(t){return parseFloat(t.trim())}const hu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fu=new Set(hu),_E=t=>t===du||t===Nt,GL=new Set(["x","y","z"]),KL=hu.filter(t=>!GL.has(t));function QL(t){const e=[];return KL.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const vl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>nv(e,"x"),y:(t,{transform:e})=>nv(e,"y")};vl.translateX=vl.x;vl.translateY=vl.y;const xl=new Set;let rv=!1,iv=!1,sv=!1;function N4(){if(iv){const t=Array.from(xl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=QL(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,c])=>{var u;(u=r.getValue(o))==null||u.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}iv=!1,rv=!1,xl.forEach(t=>t.complete(sv)),xl.clear()}function k4(){xl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(iv=!0)})}function YL(){sv=!0,k4(),N4(),sv=!1}class N1{constructor(e,n,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(xl.add(this),rv||(rv=!0,Tn.read(k4),Tn.resolveKeyframes(N4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}zL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),xl.delete(this)}cancel(){this.state==="scheduled"&&(xl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const XL=t=>t.startsWith("--");function JL(t,e,n){XL(e)?t.style.setProperty(e,n):t.style[e]=n}const ZL=d1(()=>window.ScrollTimeline!==void 0),e7={};function t7(t,e){const n=d1(t);return()=>e7[e]??n()}const S4=t7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,EE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rd([0,.65,.55,1]),circOut:rd([.55,0,1,.45]),backIn:rd([.31,.01,.66,-.59]),backOut:rd([.33,1.53,.69,.99])};function A4(t,e){if(t)return typeof t=="function"?S4()?w4(t,e):"ease-out":d4(t)?rd(t):Array.isArray(t)?t.map(n=>A4(n,e)||EE.easeOut):EE[t]}function n7(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:u="easeOut",times:h}={},f=void 0){const g={[e]:n};h&&(g.offset=h);const y=A4(u,i);Array.isArray(y)&&(g.easing=y);const v={delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(g,v)}function T4(t){return typeof t=="function"&&"applyToOptions"in t}function r7({type:t,...e}){return T4(t)&&S4()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class i7 extends _1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,u1(typeof e.type!="string");const f=r7(e);this.animation=n7(n,r,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=w1(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):JL(n,r,g),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ks(Number(e))}get time(){return Ks(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Gs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&ZL()?(this.animation.timeline=e,Qi):n(this)}}const C4={anticipate:o4,backInOut:a4,circInOut:c4};function s7(t){return t in C4}function a7(t){typeof t.ease=="string"&&s7(t.ease)&&(t.ease=C4[t.ease])}const NE=10;class o7 extends i7{constructor(e){a7(e),E4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new E1({...c,autoplay:!1}),h=Gs(this.finishedTime??this.time);n.setWithVelocity(u.sample(h-NE).value,u.sample(h).value,NE),u.stop()}}const kE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Co.test(t)||t==="0")&&!t.startsWith("url("));function l7(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function c7(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=kE(i,e),u=kE(o,e);return!c||!u?!1:l7(t)||(n==="spring"||T4(n))&&r}function k1(t){return ZT(t)&&"offsetHeight"in t}const u7=new Set(["opacity","clipPath","filter","transform"]),d7=d1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h7(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:c}=t;if(!k1((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return d7()&&n&&u7.has(n)&&(n!=="transform"||!h)&&!u&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const f7=40;class p7 extends _1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:u,name:h,motionValue:f,element:g,...y}){var k;super(),this.stop=()=>{var w,A;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=vi.now();const v={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:c,name:h,motionValue:f,element:g,...y},b=(g==null?void 0:g.KeyframeResolver)||N1;this.keyframeResolver=new b(u,(w,A,j)=>this.onKeyframesResolved(w,A,v,!j),h,f,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:u,delay:h,isHandoff:f,onUpdate:g}=r;this.resolvedAt=vi.now(),c7(e,o,c,u)||((Pa.instantAnimations||!h)&&(g==null||g(w1(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>f7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!f&&h7(v)?new o7({...v,element:v.motionValue.owner.current}):new E1(v);b.finished.then(()=>this.notifyFinished()).catch(Qi),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),YL()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const m7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g7(t){const e=m7.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function j4(t,e,n=1){const[r,i]=g7(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return JT(c)?parseFloat(c):c}return g1(i)?j4(i,e,n+1):i}function S1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const I4=new Set(["width","height","top","left","right","bottom",...hu]),y7={test:t=>t==="auto",parse:t=>t},P4=t=>e=>e.test(t),R4=[du,Nt,Qs,so,lL,oL,y7],SE=t=>R4.find(P4(t));function v7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||e4(t):!0}const x7=new Set(["brightness","contrast","saturate","opacity"]);function b7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(y1)||[];if(!r)return t;const i=n.replace(r,"");let o=x7.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const w7=/\b([a-z-]*)\(.*?\)/gu,av={...Co,getAnimatableNone:t=>{const e=t.match(w7);return e?e.map(b7).join(" "):t}},AE={...du,transform:Math.round},_7={rotate:so,rotateX:so,rotateY:so,rotateZ:so,scale:Pf,scaleX:Pf,scaleY:Pf,scaleZ:Pf,skew:so,skewX:so,skewY:so,distance:Nt,translateX:Nt,translateY:Nt,translateZ:Nt,x:Nt,y:Nt,z:Nt,perspective:Nt,transformPerspective:Nt,opacity:Dd,originX:pE,originY:pE,originZ:Nt},A1={borderWidth:Nt,borderTopWidth:Nt,borderRightWidth:Nt,borderBottomWidth:Nt,borderLeftWidth:Nt,borderRadius:Nt,radius:Nt,borderTopLeftRadius:Nt,borderTopRightRadius:Nt,borderBottomRightRadius:Nt,borderBottomLeftRadius:Nt,width:Nt,maxWidth:Nt,height:Nt,maxHeight:Nt,top:Nt,right:Nt,bottom:Nt,left:Nt,padding:Nt,paddingTop:Nt,paddingRight:Nt,paddingBottom:Nt,paddingLeft:Nt,margin:Nt,marginTop:Nt,marginRight:Nt,marginBottom:Nt,marginLeft:Nt,backgroundPositionX:Nt,backgroundPositionY:Nt,..._7,zIndex:AE,fillOpacity:Dd,strokeOpacity:Dd,numOctaves:AE},E7={...A1,color:ir,backgroundColor:ir,outlineColor:ir,fill:ir,stroke:ir,borderColor:ir,borderTopColor:ir,borderRightColor:ir,borderBottomColor:ir,borderLeftColor:ir,filter:av,WebkitFilter:av},M4=t=>E7[t];function D4(t,e){let n=M4(t);return n!==av&&(n=Co),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const N7=new Set(["auto","none","0"]);function k7(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!N7.has(o)&&Od(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=D4(n,i)}class S7 extends N1{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),g1(f))){const g=j4(f,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!I4.has(r)||e.length!==2)return;const[i,o]=e,c=SE(i),u=SE(o);if(c!==u)if(_E(c)&&_E(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else vl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||v7(e[i]))&&r.push(i);r.length&&k7(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=vl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function A7(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const O4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,TE=30,T7=t=>!isNaN(parseFloat(t));class C7{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var c,u;const o=vi.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty();i&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=vi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=T7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new h1);const r=this.events[e].add(n);return e==="change"?()=>{r(),Tn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=vi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>TE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,TE);return t4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yc(t,e){return new C7(t,e)}const{schedule:T1}=h4(queueMicrotask,!1),us={x:!1,y:!1};function L4(){return us.x||us.y}function j7(t){return t==="x"||t==="y"?us[t]?null:(us[t]=!0,()=>{us[t]=!1}):us.x||us.y?null:(us.x=us.y=!0,()=>{us.x=us.y=!1})}function V4(t,e){const n=A7(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function CE(t){return!(t.pointerType==="touch"||L4())}function I7(t,e,n={}){const[r,i,o]=V4(t,n),c=u=>{if(!CE(u))return;const{target:h}=u,f=e(h,u);if(typeof f!="function"||!h)return;const g=y=>{CE(y)&&(f(y),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,i)};return r.forEach(u=>{u.addEventListener("pointerenter",c,i)}),o}const F4=(t,e)=>e?t===e?!0:F4(t,e.parentElement):!1,C1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,P7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function R7(t){return P7.has(t.tagName)||t.tabIndex!==-1}const ap=new WeakSet;function jE(t){return e=>{e.key==="Enter"&&t(e)}}function H0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const M7=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=jE(()=>{if(ap.has(n))return;H0(n,"down");const i=jE(()=>{H0(n,"up")}),o=()=>H0(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function IE(t){return C1(t)&&!L4()}function D7(t,e,n={}){const[r,i,o]=V4(t,n),c=u=>{const h=u.currentTarget;if(!IE(u))return;ap.add(h);const f=e(h,u),g=(b,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),ap.has(h)&&ap.delete(h),IE(b)&&typeof f=="function"&&f(b,{success:k})},y=b=>{g(b,h===window||h===document||n.useGlobalTarget||F4(h,b.target))},v=b=>{g(b,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",v,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),k1(u)&&(u.addEventListener("focus",f=>M7(f,i)),!R7(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function U4(t){return ZT(t)&&"ownerSVGElement"in t}function O7(t){return U4(t)&&t.tagName==="svg"}const Gr=t=>!!(t&&t.getVelocity),L7=[...R4,ir,Co],V7=t=>L7.find(P4(t)),j1=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class F7 extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=k1(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function U7({children:t,isPresent:e,anchorX:n,root:r}){const i=S.useId(),o=S.useRef(null),c=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=S.useContext(j1);return S.useInsertionEffect(()=>{const{width:h,height:f,top:g,left:y,right:v}=c.current;if(e||!o.current||!h||!f)return;const b=n==="left"?`left: ${y}`:`right: ${v}`;o.current.dataset.motionPopId=i;const k=document.createElement("style");u&&(k.nonce=u);const w=r??document.head;return w.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${g}px !important;
          }
        `),()=>{w.removeChild(k),w.contains(k)&&w.removeChild(k)}},[e]),a.jsx(F7,{isPresent:e,childRef:o,sizeRef:c,children:S.cloneElement(t,{ref:o})})}const $7=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:u,root:h})=>{const f=a1(z7),g=S.useId();let y=!0,v=S.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:i,onExitComplete:b=>{f.set(b,!0);for(const k of f.values())if(!k)return;r&&r()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,r]);return o&&y&&(v={...v}),S.useMemo(()=>{f.forEach((b,k)=>f.set(k,!1))},[n]),S.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=a.jsx(U7,{isPresent:n,anchorX:u,root:h,children:t})),a.jsx(Rm.Provider,{value:v,children:t})};function z7(){return new Map}function $4(t=!0){const e=S.useContext(Rm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=S.useId();S.useEffect(()=>{if(t)return i(o)},[t]);const c=S.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,c]:[!0]}const Rf=t=>t.key||"";function PE(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const Gt=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:u="left",root:h})=>{const[f,g]=$4(c),y=S.useMemo(()=>PE(t),[t]),v=c&&!f?[]:y.map(Rf),b=S.useRef(!0),k=S.useRef(y),w=a1(()=>new Map),[A,j]=S.useState(y),[R,L]=S.useState(y);XT(()=>{b.current=!1,k.current=y;for(let G=0;G<R.length;G++){const M=Rf(R[G]);v.includes(M)?w.delete(M):w.get(M)!==!0&&w.set(M,!1)}},[R,v.length,v.join("-")]);const D=[];if(y!==A){let G=[...y];for(let M=0;M<R.length;M++){const I=R[M],T=Rf(I);v.includes(T)||(G.splice(M,0,I),D.push(I))}return o==="wait"&&D.length&&(G=D),L(PE(G)),j(y),null}const{forceRender:z}=S.useContext(s1);return a.jsx(a.Fragment,{children:R.map(G=>{const M=Rf(G),I=c&&!f?!1:y===R||v.includes(M),T=()=>{if(w.has(M))w.set(M,!0);else return;let N=!0;w.forEach(V=>{V||(N=!1)}),N&&(z==null||z(),L(k.current),c&&(g==null||g()),r&&r())};return a.jsx($7,{isPresent:I,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:h,onExitComplete:I?void 0:T,anchorX:u,children:G},M)})})},z4=S.createContext({strict:!1}),RE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xc={};for(const t in RE)Xc[t]={isEnabled:e=>RE[t].some(n=>!!e[n])};function B7(t){for(const e in t)Xc[e]={...Xc[e],...t[e]}}const H7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $p(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||H7.has(t)}let B4=t=>!$p(t);function W7(t){typeof t=="function"&&(B4=e=>e.startsWith("on")?!$p(e):t(e))}try{W7(require("@emotion/is-prop-valid").default)}catch{}function q7(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(B4(i)||n===!0&&$p(i)||!e&&!$p(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function G7(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Mm=S.createContext({});function Dm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ld(t){return typeof t=="string"||Array.isArray(t)}const I1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],P1=["initial",...I1];function Om(t){return Dm(t.animate)||P1.some(e=>Ld(t[e]))}function H4(t){return!!(Om(t)||t.variants)}function K7(t,e){if(Om(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ld(n)?n:void 0,animate:Ld(r)?r:void 0}}return t.inherit!==!1?e:{}}function Q7(t){const{initial:e,animate:n}=K7(t,S.useContext(Mm));return S.useMemo(()=>({initial:e,animate:n}),[ME(e),ME(n)])}function ME(t){return Array.isArray(t)?t.join(" "):t}const Y7=Symbol.for("motionComponentSymbol");function Rc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function X7(t,e,n){return S.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Rc(n)&&(n.current=r))},[e])}const R1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),J7="framerAppearId",W4="data-"+R1(J7),q4=S.createContext({});function Z7(t,e,n,r,i){var w,A;const{visualElement:o}=S.useContext(Mm),c=S.useContext(z4),u=S.useContext(Rm),h=S.useContext(j1).reducedMotion,f=S.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,y=S.useContext(q4);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&eV(f.current,n,i,y);const v=S.useRef(!1);S.useInsertionEffect(()=>{g&&v.current&&g.update(n,u)});const b=n[W4],k=S.useRef(!!b&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,b))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,b)));return XT(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),T1.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),S.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,b)}),k.current=!1))}),g}function eV(t,e,n,r){const{layoutId:i,layout:o,drag:c,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:G4(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||u&&Rc(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:h,layoutRoot:f})}function G4(t){if(t)return t.options.allowProjection!==!1?t.projection:G4(t.parent)}function tV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&B7(t);function o(u,h){let f;const g={...S.useContext(j1),...u,layoutId:nV(u)},{isStatic:y}=g,v=Q7(u),b=r(u,y);if(!y&&o1){rV();const k=iV(g);f=k.MeasureLayout,v.visualElement=Z7(i,b,g,e,k.ProjectionNode)}return a.jsxs(Mm.Provider,{value:v,children:[f&&v.visualElement?a.jsx(f,{visualElement:v.visualElement,...g}):null,n(i,u,X7(b,v.visualElement,h),b,y,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const c=S.forwardRef(o);return c[Y7]=i,c}function nV({layoutId:t}){const e=S.useContext(s1).id;return e&&t!==void 0?e+"-"+t:t}function rV(t,e){S.useContext(z4).strict}function iV(t){const{drag:e,layout:n}=Xc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Vd={};function sV(t){for(const e in t)Vd[e]=t[e],m1(e)&&(Vd[e].isCSSVariable=!0)}function K4(t,{layout:e,layoutId:n}){return fu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Vd[t]||t==="opacity")}const aV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oV=hu.length;function lV(t,e,n){let r="",i=!0;for(let o=0;o<oV;o++){const c=hu[o],u=t[c];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(c.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const f=O4(u,A1[c]);if(!h){i=!1;const g=aV[c]||c;r+=`${g}(${f}) `}n&&(e[c]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function M1(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let c=!1,u=!1;for(const h in e){const f=e[h];if(fu.has(h)){c=!0;continue}else if(m1(h)){i[h]=f;continue}else{const g=O4(f,A1[h]);h.startsWith("origin")?(u=!0,o[h]=g):r[h]=g}}if(e.transform||(c||n?r.transform=lV(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:g=0}=o;r.transformOrigin=`${h} ${f} ${g}`}}const D1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Q4(t,e,n){for(const r in e)!Gr(e[r])&&!K4(r,n)&&(t[r]=e[r])}function cV({transformTemplate:t},e){return S.useMemo(()=>{const n=D1();return M1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function uV(t,e){const n=t.style||{},r={};return Q4(r,n,t),Object.assign(r,cV(t,e)),r}function dV(t,e){const n={},r=uV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const hV={offset:"stroke-dashoffset",array:"stroke-dasharray"},fV={offset:"strokeDashoffset",array:"strokeDasharray"};function pV(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?hV:fV;t[o.offset]=Nt.transform(-r);const c=Nt.transform(e),u=Nt.transform(n);t[o.array]=`${c} ${u}`}function Y4(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...u},h,f,g){if(M1(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),i!==void 0&&pV(y,i,o,c,!1)}const X4=()=>({...D1(),attrs:{}}),J4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mV(t,e,n,r){const i=S.useMemo(()=>{const o=X4();return Y4(o,e,J4(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Q4(o,t.style,t),i.style={...o,...i.style}}return i}const gV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function O1(t){return typeof t!="string"||t.includes("-")?!1:!!(gV.indexOf(t)>-1||/[A-Z]/u.test(t))}function yV(t=!1){return(n,r,i,{latestValues:o},c)=>{const h=(O1(n)?mV:dV)(r,o,c,n),f=q7(r,typeof n=="string",t),g=n!==S.Fragment?{...f,...h,ref:i}:{},{children:y}=r,v=S.useMemo(()=>Gr(y)?y.get():y,[y]);return S.createElement(n,{...g,children:v})}}function DE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function L1(t,e,n,r){if(typeof e=="function"){const[i,o]=DE(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=DE(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function op(t){return Gr(t)?t.get():t}function vV({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:xV(n,r,i,t),renderState:e()}}const Z4=t=>(e,n)=>{const r=S.useContext(Mm),i=S.useContext(Rm),o=()=>vV(t,e,r,i);return n?o():a1(o)};function xV(t,e,n,r){const i={},o=r(t,{});for(const v in o)i[v]=op(o[v]);let{initial:c,animate:u}=t;const h=Om(t),f=H4(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const y=g?u:c;if(y&&typeof y!="boolean"&&!Dm(y)){const v=Array.isArray(y)?y:[y];for(let b=0;b<v.length;b++){const k=L1(t,v[b]);if(k){const{transitionEnd:w,transition:A,...j}=k;for(const R in j){let L=j[R];if(Array.isArray(L)){const D=g?L.length-1:0;L=L[D]}L!==null&&(i[R]=L)}for(const R in w)i[R]=w[R]}}}return i}function V1(t,e,n){var o;const{style:r}=t,i={};for(const c in r)(Gr(r[c])||e.style&&Gr(e.style[c])||K4(c,t)||((o=n==null?void 0:n.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const bV={useVisualState:Z4({scrapeMotionValuesFromProps:V1,createRenderState:D1})};function eC(t,e,n){const r=V1(t,e,n);for(const i in t)if(Gr(t[i])||Gr(e[i])){const o=hu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const wV={useVisualState:Z4({scrapeMotionValuesFromProps:eC,createRenderState:X4})};function _V(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const c={...O1(r)?wV:bV,preloadedFeatures:t,useRender:yV(i),createVisualElement:e,Component:r};return tV(c)}}function Fd(t,e,n){const r=t.getProps();return L1(r,e,n!==void 0?n:r.custom,t)}const ov=t=>Array.isArray(t);function EV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yc(n))}function NV(t){return ov(t)?t[t.length-1]||0:t}function kV(t,e){const n=Fd(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const c in o){const u=NV(o[c]);EV(t,c,u)}}function SV(t){return!!(Gr(t)&&t.add)}function lv(t,e){const n=t.getValue("willChange");if(SV(n))return n.add(e);if(!n&&Pa.WillChange){const r=new Pa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function tC(t){return t.props[W4]}const AV=t=>t!==null;function TV(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(AV),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const CV={type:"spring",stiffness:500,damping:25,restSpeed:10},jV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IV={type:"keyframes",duration:.8},PV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RV=(t,{keyframes:e})=>e.length>2?IV:fu.has(t)?t.startsWith("scale")?jV(e[1]):CV:PV;function MV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:u,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const F1=(t,e,n,r={},i,o)=>c=>{const u=S1(r,t)||{},h=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Gs(h);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:i};MV(u)||Object.assign(g,RV(t,g)),g.duration&&(g.duration=Gs(g.duration)),g.repeatDelay&&(g.repeatDelay=Gs(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),(Pa.instantAnimations||Pa.skipAnimations)&&(y=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!o&&e.get()!==void 0){const v=TV(g.keyframes,u);if(v!==void 0){Tn.update(()=>{g.onUpdate(v),g.onComplete()});return}}return u.isSync?new E1(g):new p7(g)};function DV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function nC(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(o=r);const h=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const y=t.getValue(g,t.latestValues[g]??null),v=u[g];if(v===void 0||f&&DV(f,g))continue;const b={delay:n,...S1(o||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===k&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const j=tC(t);if(j){const R=window.MotionHandoffAnimation(j,g,Tn);R!==null&&(b.startTime=R,w=!0)}}lv(t,g),y.start(F1(g,y,v,t.shouldReduceMotion&&I4.has(g)?{type:!1}:b,t,w));const A=y.animation;A&&h.push(A)}return c&&Promise.all(h).then(()=>{Tn.update(()=>{c&&kV(t,c)})}),h}function cv(t,e,n={}){var h;const r=Fd(t,e,n.type==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(nC(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=i;return OV(t,e,f,g,y,v,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,g]=u==="beforeChildren"?[o,c]:[c,o];return f().then(()=>g())}else return Promise.all([o(),c(n.delay)])}function OV(t,e,n=0,r=0,i=0,o=1,c){const u=[],h=t.variantChildren.size,f=(h-1)*i,g=typeof r=="function",y=g?v=>r(v,h):o===1?(v=0)=>v*i:(v=0)=>f-v*i;return Array.from(t.variantChildren).sort(LV).forEach((v,b)=>{v.notify("AnimationStart",e),u.push(cv(v,e,{...c,delay:n+(g?0:r)+y(b)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(u)}function LV(t,e){return t.sortNodePosition(e)}function VV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>cv(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=cv(t,e,n);else{const i=typeof e=="function"?Fd(t,e,n.custom):e;r=Promise.all(nC(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function rC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const FV=P1.length;function iC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?iC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<FV;n++){const r=P1[n],i=t.props[r];(Ld(i)||i===!1)&&(e[r]=i)}return e}const UV=[...I1].reverse(),$V=I1.length;function zV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>VV(t,n,r)))}function BV(t){let e=zV(t),n=OE(),r=!0;const i=h=>(f,g)=>{var v;const y=Fd(t,g,h==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:b,transitionEnd:k,...w}=y;f={...f,...w,...k}}return f};function o(h){e=h(t)}function c(h){const{props:f}=t,g=iC(t.parent)||{},y=[],v=new Set;let b={},k=1/0;for(let A=0;A<$V;A++){const j=UV[A],R=n[j],L=f[j]!==void 0?f[j]:g[j],D=Ld(L),z=j===h?R.isActive:null;z===!1&&(k=A);let G=L===g[j]&&L!==f[j]&&D;if(G&&r&&t.manuallyAnimateOnMount&&(G=!1),R.protectedKeys={...b},!R.isActive&&z===null||!L&&!R.prevProp||Dm(L)||typeof L=="boolean")continue;const M=HV(R.prevProp,L);let I=M||j===h&&R.isActive&&!G&&D||A>k&&D,T=!1;const N=Array.isArray(L)?L:[L];let V=N.reduce(i(j),{});z===!1&&(V={});const{prevResolvedValues:U={}}=R,O={...U,...V},xe=He=>{I=!0,v.has(He)&&(T=!0,v.delete(He)),R.needsAnimating[He]=!0;const de=t.getValue(He);de&&(de.liveStyle=!1)};for(const He in O){const de=V[He],ce=U[He];if(b.hasOwnProperty(He))continue;let oe=!1;ov(de)&&ov(ce)?oe=!rC(de,ce):oe=de!==ce,oe?de!=null?xe(He):v.add(He):de!==void 0&&v.has(He)?xe(He):R.protectedKeys[He]=!0}R.prevProp=L,R.prevResolvedValues=V,R.isActive&&(b={...b,...V}),r&&t.blockInitialAnimation&&(I=!1),I&&(!(G&&M)||T)&&y.push(...N.map(He=>({animation:He,options:{type:j}})))}if(v.size){const A={};if(typeof f.initial!="boolean"){const j=Fd(t,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(A.transition=j.transition)}v.forEach(j=>{const R=t.getBaseTarget(j),L=t.getValue(j);L&&(L.liveStyle=!0),A[j]=R??null}),y.push({animation:A})}let w=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(y):Promise.resolve()}function u(h,f){var y;if(n[h].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(v=>{var b;return(b=v.animationState)==null?void 0:b.setActive(h,f)}),n[h].isActive=f;const g=c(h);for(const v in n)n[v].protectedKeys={};return g}return{animateChanges:c,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=OE(),r=!0}}}function HV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!rC(e,t):!1}function il(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OE(){return{animate:il(!0),whileInView:il(),whileHover:il(),whileTap:il(),whileDrag:il(),whileFocus:il(),exit:il()}}class Lo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class WV extends Lo{constructor(e){super(e),e.animationState||(e.animationState=BV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Dm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let qV=0;class GV extends Lo{constructor(){super(...arguments),this.id=qV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const KV={animation:{Feature:WV},exit:{Feature:GV}};function Ud(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ph(t){return{point:{x:t.pageX,y:t.pageY}}}const QV=t=>e=>C1(e)&&t(e,ph(e));function md(t,e,n,r){return Ud(t,e,QV(n),r)}function sC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function YV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function XV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const aC=1e-4,JV=1-aC,ZV=1+aC,oC=.01,eF=0-oC,tF=0+oC;function ri(t){return t.max-t.min}function nF(t,e,n){return Math.abs(t-e)<=n}function LE(t,e,n,r=.5){t.origin=r,t.originPoint=Mn(e.min,e.max,t.origin),t.scale=ri(n)/ri(e),t.translate=Mn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=JV&&t.scale<=ZV||isNaN(t.scale))&&(t.scale=1),(t.translate>=eF&&t.translate<=tF||isNaN(t.translate))&&(t.translate=0)}function gd(t,e,n,r){LE(t.x,e.x,n.x,r?r.originX:void 0),LE(t.y,e.y,n.y,r?r.originY:void 0)}function VE(t,e,n){t.min=n.min+e.min,t.max=t.min+ri(e)}function rF(t,e,n){VE(t.x,e.x,n.x),VE(t.y,e.y,n.y)}function FE(t,e,n){t.min=e.min-n.min,t.max=t.min+ri(e)}function yd(t,e,n){FE(t.x,e.x,n.x),FE(t.y,e.y,n.y)}const UE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mc=()=>({x:UE(),y:UE()}),$E=()=>({min:0,max:0}),Qn=()=>({x:$E(),y:$E()});function Bi(t){return[t("x"),t("y")]}function W0(t){return t===void 0||t===1}function uv({scale:t,scaleX:e,scaleY:n}){return!W0(t)||!W0(e)||!W0(n)}function ol(t){return uv(t)||lC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function lC(t){return zE(t.x)||zE(t.y)}function zE(t){return t&&t!=="0%"}function zp(t,e,n){const r=t-n,i=e*r;return n+i}function BE(t,e,n,r,i){return i!==void 0&&(t=zp(t,i,r)),zp(t,n,r)+e}function dv(t,e=0,n=1,r,i){t.min=BE(t.min,e,n,r,i),t.max=BE(t.max,e,n,r,i)}function cC(t,{x:e,y:n}){dv(t.x,e.translate,e.scale,e.originPoint),dv(t.y,n.translate,n.scale,n.originPoint)}const HE=.999999999999,WE=1.0000000000001;function iF(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,c;for(let u=0;u<i;u++){o=n[u],c=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Oc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,cC(t,c)),r&&ol(o.latestValues)&&Oc(t,o.latestValues))}e.x<WE&&e.x>HE&&(e.x=1),e.y<WE&&e.y>HE&&(e.y=1)}function Dc(t,e){t.min=t.min+e,t.max=t.max+e}function qE(t,e,n,r,i=.5){const o=Mn(t.min,t.max,i);dv(t,e,n,o,r)}function Oc(t,e){qE(t.x,e.x,e.scaleX,e.scale,e.originX),qE(t.y,e.y,e.scaleY,e.scale,e.originY)}function uC(t,e){return sC(XV(t.getBoundingClientRect(),e))}function sF(t,e,n){const r=uC(t,n),{scroll:i}=e;return i&&(Dc(r.x,i.offset.x),Dc(r.y,i.offset.y)),r}const dC=({current:t})=>t?t.ownerDocument.defaultView:null,GE=(t,e)=>Math.abs(t-e);function aF(t,e){const n=GE(t.x,e.x),r=GE(t.y,e.y);return Math.sqrt(n**2+r**2)}class hC{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=G0(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,k=aF(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!k)return;const{point:w}=v,{timestamp:A}=Ir;this.history.push({...w,timestamp:A});const{onStart:j,onMove:R}=this.handlers;b||(j&&j(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=q0(b,this.transformPagePoint),Tn.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:k,onSessionEnd:w,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=G0(v.type==="pointercancel"?this.lastMoveEventInfo:q0(b,this.transformPagePoint),this.history);this.startEvent&&k&&k(v,j),w&&w(v,j)},!C1(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const u=ph(e),h=q0(u,this.transformPagePoint),{point:f}=h,{timestamp:g}=Ir;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,G0(h,this.history)),this.removeListeners=dh(md(this.contextWindow,"pointermove",this.handlePointerMove),md(this.contextWindow,"pointerup",this.handlePointerUp),md(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),To(this.updatePoint)}}function q0(t,e){return e?{point:e(t.point)}:t}function KE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function G0({point:t},e){return{point:t,delta:KE(t,fC(e)),offset:KE(t,oF(e)),velocity:lF(e,.1)}}function oF(t){return t[0]}function fC(t){return t[t.length-1]}function lF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=fC(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Gs(e)));)n--;if(!r)return{x:0,y:0};const o=Ks(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function cF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Mn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Mn(n,t,r.max):Math.min(t,n)),t}function QE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uF(t,{top:e,left:n,bottom:r,right:i}){return{x:QE(t.x,n,i),y:QE(t.y,e,r)}}function YE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function dF(t,e){return{x:YE(t.x,e.x),y:YE(t.y,e.y)}}function hF(t,e){let n=.5;const r=ri(t),i=ri(e);return i>r?n=Md(e.min,e.max-r,t.min):r>i&&(n=Md(t.min,t.max-i,e.min)),Ia(0,1,n)}function fF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hv=.35;function pF(t=hv){return t===!1?t=0:t===!0&&(t=hv),{x:XE(t,"left","right"),y:XE(t,"top","bottom")}}function XE(t,e,n){return{min:JE(t,e),max:JE(t,n)}}function JE(t,e){return typeof t=="number"?t:t[e]||0}const mF=new WeakMap;class gF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ph(y).point)},c=(y,v)=>{const{drag:b,dragPropagation:k,onDragStart:w}=this.getProps();if(b&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=j7(b),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bi(j=>{let R=this.getAxisMotionValue(j).get()||0;if(Qs.test(R)){const{projection:L}=this.visualElement;if(L&&L.layout){const D=L.layout.layoutBox[j];D&&(R=ri(D)*(parseFloat(R)/100))}}this.originPoint[j]=R}),w&&Tn.postRender(()=>w(y,v)),lv(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},u=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:k,onDirectionLock:w,onDrag:A}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:j}=v;if(k&&this.currentDirection===null){this.currentDirection=yF(j),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",v.point,j),this.updateAxis("y",v.point,j),this.visualElement.render(),A&&A(y,v)},h=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Bi(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)==null?void 0:v.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new hC(e,{onSessionStart:o,onStart:c,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:dC(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&Tn.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Mf(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=cF(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Rc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=uF(r.layoutBox,e):this.constraints=!1,this.elastic=pF(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Bi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=fF(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Rc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=sF(r,i.root,this.visualElement.getTransformPagePoint());let c=dF(i.layout.layoutBox,o);if(n){const u=n(YV(c));this.hasMutatedConstraints=!!u,u&&(c=sC(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Bi(g=>{if(!Mf(g,n,this.currentDirection))return;let y=h&&h[g]||{};c&&(y={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return lv(this.visualElement,e),r.start(F1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Bi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Bi(n=>{const{drag:r}=this.getProps();if(!Mf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[n];o.set(e[n]-Mn(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Rc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Bi(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const h=u.get();i[c]=hF({min:h,max:h},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Bi(c=>{if(!Mf(c,e,null))return;const u=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];u.set(Mn(h,f,i[c]))})}addListeners(){if(!this.visualElement.current)return;mF.set(this.visualElement,this);const e=this.visualElement.current,n=md(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Rc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Tn.read(r);const c=Ud(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Bi(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=h[g].translate,y.set(y.get()+h[g].translate))}),this.visualElement.render())});return()=>{c(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=hv,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:u}}}function Mf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function yF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class vF extends Lo{constructor(e){super(e),this.removeGroupControls=Qi,this.removeListeners=Qi,this.controls=new gF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qi}unmount(){this.removeGroupControls(),this.removeListeners()}}const ZE=t=>(e,n)=>{t&&Tn.postRender(()=>t(e,n))};class xF extends Lo{constructor(){super(...arguments),this.removePointerDownListener=Qi}onPointerDown(e){this.session=new hC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ZE(e),onStart:ZE(n),onMove:r,onEnd:(o,c)=>{delete this.session,i&&Tn.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=md(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Gu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Nt.test(t))t=parseFloat(t);else return t;const n=eN(t,e.target.x),r=eN(t,e.target.y);return`${n}% ${r}%`}},bF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Co.parse(t);if(i.length>5)return r;const o=Co.createTransformer(t),c=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;i[0+c]/=u,i[1+c]/=h;const f=Mn(u,h,.5);return typeof i[2+c]=="number"&&(i[2+c]/=f),typeof i[3+c]=="number"&&(i[3+c]/=f),o(i)}};let tN=!1;class wF extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;sV(_F),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),tN&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),lp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,tN=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||Tn.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),T1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pC(t){const[e,n]=$4(),r=S.useContext(s1);return a.jsx(wF,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(q4),isPresent:e,safeToRemove:n})}const _F={borderRadius:{...Gu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gu,borderTopRightRadius:Gu,borderBottomLeftRadius:Gu,borderBottomRightRadius:Gu,boxShadow:bF};function EF(t,e,n){const r=Gr(t)?t:Yc(t);return r.start(F1("",r,e,n)),r.animation}const NF=(t,e)=>t.depth-e.depth;class kF{constructor(){this.children=[],this.isDirty=!1}add(e){l1(this.children,e),this.isDirty=!0}remove(e){c1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NF),this.isDirty=!1,this.children.forEach(e)}}function SF(t,e){const n=vi.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(To(r),t(o-e))};return Tn.setup(r,!0),()=>To(r)}const mC=["TopLeft","TopRight","BottomLeft","BottomRight"],AF=mC.length,nN=t=>typeof t=="string"?parseFloat(t):t,rN=t=>typeof t=="number"||Nt.test(t);function TF(t,e,n,r,i,o){i?(t.opacity=Mn(0,n.opacity??1,CF(r)),t.opacityExit=Mn(e.opacity??1,0,jF(r))):o&&(t.opacity=Mn(e.opacity??1,n.opacity??1,r));for(let c=0;c<AF;c++){const u=`border${mC[c]}Radius`;let h=iN(e,u),f=iN(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||rN(h)===rN(f)?(t[u]=Math.max(Mn(nN(h),nN(f),r),0),(Qs.test(f)||Qs.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Mn(e.rotate||0,n.rotate||0,r))}function iN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const CF=gC(0,.5,l4),jF=gC(.5,.95,Qi);function gC(t,e,n){return r=>r<t?0:r>e?1:n(Md(t,e,r))}function sN(t,e){t.min=e.min,t.max=e.max}function zi(t,e){sN(t.x,e.x),sN(t.y,e.y)}function aN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function oN(t,e,n,r,i){return t-=e,t=zp(t,1/n,r),i!==void 0&&(t=zp(t,1/i,r)),t}function IF(t,e=0,n=1,r=.5,i,o=t,c=t){if(Qs.test(e)&&(e=parseFloat(e),e=Mn(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=Mn(o.min,o.max,r);t===o&&(u-=e),t.min=oN(t.min,e,n,u,i),t.max=oN(t.max,e,n,u,i)}function lN(t,e,[n,r,i],o,c){IF(t,e[n],e[r],e[i],e.scale,o,c)}const PF=["x","scaleX","originX"],RF=["y","scaleY","originY"];function cN(t,e,n,r){lN(t.x,e,PF,n?n.x:void 0,r?r.x:void 0),lN(t.y,e,RF,n?n.y:void 0,r?r.y:void 0)}function uN(t){return t.translate===0&&t.scale===1}function yC(t){return uN(t.x)&&uN(t.y)}function dN(t,e){return t.min===e.min&&t.max===e.max}function MF(t,e){return dN(t.x,e.x)&&dN(t.y,e.y)}function hN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function vC(t,e){return hN(t.x,e.x)&&hN(t.y,e.y)}function fN(t){return ri(t.x)/ri(t.y)}function pN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class DF{constructor(){this.members=[]}add(e){l1(this.members,e),e.scheduleRender()}remove(e){if(c1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function OF(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:v,skewX:b,skewY:k}=n;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),v&&(r+=`rotateY(${v}deg) `),b&&(r+=`skewX(${b}deg) `),k&&(r+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const K0=["","X","Y","Z"],LF=1e3;let VF=0;function Q0(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function xC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=tC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Tn,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&xC(r)}function bC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},u=e==null?void 0:e()){this.id=VF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($F),this.nodes.forEach(WF),this.nodes.forEach(qF),this.nodes.forEach(zF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new kF)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new h1),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const h=this.eventHandlers.get(c);h&&h.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=U4(c)&&!O7(c),this.instance=c;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),t){let g,y=0;const v=()=>this.root.updateBlockedByResize=!1;Tn.read(()=>{y=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==y&&(y=b,this.root.updateBlockedByResize=!0,g&&g(),g=SF(v,250),lp.hasAnimatedSinceResize&&(lp.hasAnimatedSinceResize=!1,this.nodes.forEach(yN)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||f.getDefaultTransition()||XF,{onLayoutAnimationStart:w,onLayoutAnimationComplete:A}=f.getProps(),j=!this.targetLayout||!vC(this.targetLayout,b),R=!y&&v;if(this.options.layoutRoot||this.resumeFrom||R||y&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...S1(k,"layout"),onPlay:w,onComplete:A};(f.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(g,R)}else y||yN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),To(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GF),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(gN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(HF),this.nodes.forEach(FF),this.nodes.forEach(UF)):this.nodes.forEach(gN),this.clearAllSnapshots();const u=vi.now();Ir.delta=Ia(0,1e3/60,u-Ir.timestamp),Ir.timestamp=u,Ir.isProcessing=!0,F0.update.process(Ir),F0.preRender.process(Ir),F0.render.process(Ir),Ir.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,T1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BF),this.sharedNodes.forEach(KF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ri(this.snapshot.measuredBox.x)&&!ri(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!yC(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||ol(this.latestValues)||g)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return c&&(h=this.removeTransform(h)),JF(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:c}=this.options;if(!c)return Qn();const u=c.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(ZF))){const{scroll:g}=this.root;g&&(Dc(u.x,g.offset.x),Dc(u.y,g.offset.y))}return u}removeElementScroll(c){var h;const u=Qn();if(zi(u,c),(h=this.scroll)!=null&&h.wasRoot)return u;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&zi(u,c),Dc(u.x,y.offset.x),Dc(u.y,y.offset.y))}return u}applyTransform(c,u=!1){const h=Qn();zi(h,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Oc(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),ol(g.latestValues)&&Oc(h,g.latestValues)}return ol(this.latestValues)&&Oc(h,this.latestValues),h}removeTransform(c){const u=Qn();zi(u,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!ol(f.latestValues))continue;uv(f.latestValues)&&f.updateSnapshot();const g=Qn(),y=f.measurePageBox();zi(g,y),cN(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return ol(this.latestValues)&&cN(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ir.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var v;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Ir.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),yd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Qn(),this.targetWithTransforms=Qn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zi(this.target,this.layout.layoutBox),cC(this.target,this.targetDelta)):zi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),yd(this.relativeTargetOrigin,this.target,b.target),zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||uv(this.parent.latestValues)||lC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ir.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;zi(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;iF(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Qn());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aN(this.prevProjectionDelta.x,this.projectionDelta.x),aN(this.prevProjectionDelta.y,this.projectionDelta.y)),gd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!pN(this.projectionDelta.x,this.prevProjectionDelta.x)||!pN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mc(),this.projectionDelta=Mc(),this.projectionDeltaWithTransform=Mc()}setAnimationOrigin(c,u=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},y=Mc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=Qn(),b=h?h.source:void 0,k=this.layout?this.layout.source:void 0,w=b!==k,A=this.getStack(),j=!A||A.members.length<=1,R=!!(w&&!j&&this.options.crossfade===!0&&!this.path.some(YF));this.animationProgress=0;let L;this.mixTargetDelta=D=>{const z=D/1e3;vN(y.x,c.x,z),vN(y.y,c.y,z),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yd(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QF(this.relativeTarget,this.relativeTargetOrigin,v,z),L&&MF(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=Qn()),zi(L,this.relativeTarget)),w&&(this.animationValues=g,TF(g,f,this.latestValues,z,R,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,h,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(To(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tn.update(()=>{lp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yc(0)),this.currentAnimation=EF(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(LF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:g}=c;if(!(!u||!h||!f)){if(this!==c&&this.layout&&f&&wC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Qn();const y=ri(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+y;const v=ri(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+v}zi(u,h),Oc(u,g),gd(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new DF),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&Q0("z",c,f,this.animationValues);for(let g=0;g<K0.length;g++)Q0(`rotate${K0[g]}`,c,f,this.animationValues),Q0(`skew${K0[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=op(u==null?void 0:u.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=op(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!ol(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=OF(this.projectionDeltaWithTransform,this.treeScale,g);h&&(y=h(g,y)),c.transform=y;const{x:v,y:b}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Vd){if(g[k]===void 0)continue;const{correct:w,applyTo:A,isCSSVariable:j}=Vd[k],R=y==="none"?g[k]:w(g[k],f);if(A){const L=A.length;for(let D=0;D<L;D++)c[A[D]]=R}else j?this.options.visualElement.renderState.vars[k]=R:c[k]=R}this.options.layoutId&&(c.pointerEvents=f===this?op(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(mN),this.root.sharedNodes.clear()}}}function FF(t){t.updateLayout()}function UF(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,c=e.source!==t.layout.source;o==="size"?Bi(y=>{const v=c?e.measuredBox[y]:e.layoutBox[y],b=ri(v);v.min=r[y].min,v.max=v.min+b}):wC(o,e.layoutBox,r)&&Bi(y=>{const v=c?e.measuredBox[y]:e.layoutBox[y],b=ri(r[y]);v.max=v.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+b)});const u=Mc();gd(u,r,e.layoutBox);const h=Mc();c?gd(h,t.applyTransform(i,!0),e.measuredBox):gd(h,r,e.layoutBox);const f=!yC(u);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:b}=y;if(v&&b){const k=Qn();yd(k,e.layoutBox,v.layoutBox);const w=Qn();yd(w,r,b.layoutBox),vC(k,w)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=k,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function $F(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function zF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function BF(t){t.clearSnapshot()}function mN(t){t.clearMeasurements()}function gN(t){t.isLayoutDirty=!1}function HF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function yN(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WF(t){t.resolveTargetDelta()}function qF(t){t.calcProjection()}function GF(t){t.resetSkewAndRotation()}function KF(t){t.removeLeadSnapshot()}function vN(t,e,n){t.translate=Mn(e.translate,0,n),t.scale=Mn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function xN(t,e,n,r){t.min=Mn(e.min,n.min,r),t.max=Mn(e.max,n.max,r)}function QF(t,e,n,r){xN(t.x,e.x,n.x,r),xN(t.y,e.y,n.y,r)}function YF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const XF={duration:.45,ease:[.4,0,.1,1]},bN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wN=bN("applewebkit/")&&!bN("chrome/")?Math.round:Qi;function _N(t){t.min=wN(t.min),t.max=wN(t.max)}function JF(t){_N(t.x),_N(t.y)}function wC(t,e,n){return t==="position"||t==="preserve-aspect"&&!nF(fN(e),fN(n),.2)}function ZF(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const eU=bC({attachResizeListener:(t,e)=>Ud(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Y0={current:void 0},_C=bC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Y0.current){const t=new eU({});t.mount(window),t.setOptions({layoutScroll:!0}),Y0.current=t}return Y0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tU={pan:{Feature:xF},drag:{Feature:vF,ProjectionNode:_C,MeasureLayout:pC}};function EN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Tn.postRender(()=>o(e,ph(e)))}class nU extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=I7(e,(n,r)=>(EN(this.node,r,"Start"),i=>EN(this.node,i,"End"))))}unmount(){}}class rU extends Lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dh(Ud(this.node.current,"focus",()=>this.onFocus()),Ud(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NN(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Tn.postRender(()=>o(e,ph(e)))}class iU extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=D7(e,(n,r)=>(NN(this.node,r,"Start"),(i,{success:o})=>NN(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fv=new WeakMap,X0=new WeakMap,sU=t=>{const e=fv.get(t.target);e&&e(t)},aU=t=>{t.forEach(sU)};function oU({root:t,...e}){const n=t||document;X0.has(n)||X0.set(n,{});const r=X0.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(aU,{root:t,...e})),r[i]}function lU(t,e,n){const r=oU(e);return fv.set(t,n),r.observe(t),()=>{fv.delete(t),r.unobserve(t)}}const cU={some:0,all:1};class uU extends Lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:cU[i]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),v=f?g:y;v&&v(h)};return lU(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(dU(e,n))&&this.startObserver()}unmount(){}}function dU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const hU={inView:{Feature:uU},tap:{Feature:iU},focus:{Feature:rU},hover:{Feature:nU}},fU={layout:{ProjectionNode:_C,MeasureLayout:pC}},pv={current:null},EC={current:!1};function pU(){if(EC.current=!0,!!o1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>pv.current=t.matches;t.addEventListener("change",e),e()}else pv.current=!1}const mU=new WeakMap;function gU(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Gr(i))t.addValue(r,i);else if(Gr(o))t.addValue(r,Yc(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,Yc(c!==void 0?c:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const kN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yU{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=N1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=vi.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Tn.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Om(n),this.isVariantNode=H4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const b=y[v];h[v]!==void 0&&Gr(b)&&b.set(h[v],!1)}}mount(e){this.current=e,mU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),EC.current||pU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),To(this.notifyUpdate),To(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=fu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Tn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xc){const n=Xc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<kN.length;r++){const i=kN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=e[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=gU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Yc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(JT(r)||e4(r))?r=parseFloat(r):!V7(r)&&Co.test(n)&&(r=D4(e,n)),this.setBaseTarget(e,Gr(r)?r.get():r)),Gr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=L1(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);c&&(r=c[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Gr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new h1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NC extends yU{constructor(){super(...arguments),this.KeyframeResolver=S7}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function kC(t,{style:e,vars:n},r,i){const o=t.style;let c;for(c in e)o[c]=e[c];i==null||i.applyProjectionStyles(o,r);for(c in n)o.setProperty(c,n[c])}function vU(t){return window.getComputedStyle(t)}class xU extends NC{constructor(){super(...arguments),this.type="html",this.renderInstance=kC}readValueFromInstance(e,n){var r;if(fu.has(n))return(r=this.projection)!=null&&r.isProjecting?tv(n):WL(e,n);{const i=vU(e),o=(m1(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return uC(e,n)}build(e,n,r){M1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return V1(e,n,r)}}const SC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bU(t,e,n,r){kC(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(SC.has(i)?i:R1(i),e.attrs[i])}class wU extends NC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(fu.has(n)){const r=M4(n);return r&&r.default||0}return n=SC.has(n)?n:R1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return eC(e,n,r)}build(e,n,r){Y4(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){bU(e,n,r,i)}mount(e){this.isSVGTag=J4(e.tagName),super.mount(e)}}const _U=(t,e)=>O1(t)?new wU(e):new xU(e,{allowProjection:t!==S.Fragment}),EU=_V({...KV,...hU,...tU,...fU},_U),ne=G7(EU);var AC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SN=Gi.createContext&&Gi.createContext(AC),NU=["attr","size","title"];function kU(t,e){if(t==null)return{};var n=SU(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SU(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Bp(){return Bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bp.apply(this,arguments)}function AN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AN(Object(n),!0).forEach(function(r){AU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AU(t,e,n){return e=TU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TU(t){var e=CU(t,"string");return typeof e=="symbol"?e:e+""}function CU(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TC(t){return t&&t.map((e,n)=>Gi.createElement(e.tag,Hp({key:n},e.attr),TC(e.child)))}function vt(t){return e=>Gi.createElement(jU,Bp({attr:Hp({},t.attr)},e),TC(t.child))}function jU(t){var e=n=>{var{attr:r,size:i,title:o}=t,c=kU(t,NU),u=i||n.size||"1em",h;return n.className&&(h=n.className),t.className&&(h=(h?h+" ":"")+t.className),Gi.createElement("svg",Bp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:h,style:Hp(Hp({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Gi.createElement("title",null,o),t.children)};return SN!==void 0?Gi.createElement(SN.Consumer,null,n=>e(n)):e(AC)}function Wp(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(t)}function J0(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function IU(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(t)}function PU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function mv(t){return vt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function gv(t){return vt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function U1(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function RU(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function MU(t){return vt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function DU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"},child:[]}]})(t)}function mh(t){return vt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function OU(t){return vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 32H32C14.33 32 0 46.33 0 64v384c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM176 327.88V344c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-16.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V152c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v16.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07zM416 312c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h112c4.42 0 8 3.58 8 8v16zm160 0c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-96c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h272c4.42 0 8 3.58 8 8v16z"},child:[]}]})(t)}function LU(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(t)}function yv(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(t)}function qp(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function Z0(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function VU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(t)}function FU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"},child:[]}]})(t)}function UU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"},child:[]}]})(t)}function CC(t){return vt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function $U(t){return vt({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(t)}function zU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 216v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-80c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zM125.333 32H24C10.745 32 0 42.745 0 56v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zm80 448H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm-24-424v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24zm24 264H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24z"},child:[]}]})(t)}function vv(t){return vt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function jC(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function TN(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function BU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(t)}function HU(t){return vt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function IC(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function WU(t){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function qU(t){return vt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}function GU(t){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"},child:[]}]})(t)}/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),CN=t=>{const e=QU(t);return e.charAt(0).toUpperCase()+e.slice(1)},PC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),YU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...u},h)=>S.createElement("svg",{ref:h,...XU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:PC("lucide",i),...!o&&!YU(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>S.createElement(f,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=(t,e)=>{const n=S.forwardRef(({className:r,...i},o)=>S.createElement(JU,{ref:o,iconNode:e,className:PC(`lucide-${KU(CN(t))}`,`lucide-${t}`,r),...i}));return n.displayName=CN(t),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],jN=It("arrow-right",ZU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],IN=It("calendar",e$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ls=It("check",t$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],r$=It("chevron-down",n$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],s$=It("chevron-left",i$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],o$=It("chevron-right",a$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$d=It("circle-check-big",l$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],u$=It("circle-dollar-sign",c$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xo=It("circle-x",d$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Lm=It("clock",h$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],p$=It("credit-card",f$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],g$=It("download",m$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xv=It("eye",y$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],x$=It("gift",v$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],w$=It("heart",b$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],E$=It("hourglass",_$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],vd=It("house",N$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ey=It("info",k$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A$=It("locate-fixed",S$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Df=It("map",T$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],j$=It("message-circle",C$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M5 12h14",key:"1ays0h"}]],PN=It("minus",I$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],xd=It("package",P$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],RC=It("pencil",R$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],RN=It("plus",M$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],O$=It("refresh-cw",D$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],V$=It("share-2",L$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zd=It("shield",F$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],$$=It("shopping-bag",U$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],$1=It("shopping-cart",z$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],H$=It("sparkles",B$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],q$=It("star",W$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],ty=It("store",G$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],MC=It("trash-2",K$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bl=It("triangle-alert",Q$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],X$=It("trophy",Y$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],DC=It("truck",J$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ez=It("upload",Z$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bv=It("x",tz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],OC=It("zap",nz),MN=["Distrito Nacional","Santo Domingo","Santiago","La Vega","Puerto Plata","San Cristóbal","Duarte","La Romana","San Pedro de Macorís","Espaillat","Hermanas Mirabal","Monte Plata","San Juan","Azua","Peravia","Monseñor Nouel","Barahona","Sánchez Ramírez","Valverde","María Trinidad Sánchez","Monte Cristi","Samaná","El Seibo","Hato Mayor","Independencia","Pedernales","Elías Piña","Dajabón","Baoruco"],va={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, República Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"};function rz({abierto:t,onClose:e,onPick:n,valorActual:r}){const[i,o]=S.useState(""),c=S.useMemo(()=>{if(!i)return MN;const u=i.toLowerCase();return MN.filter(h=>h.toLowerCase().includes(u))},[i]);return S.useEffect(()=>{t||o("")},[t]),typeof document>"u"?null:zv.createPortal(a.jsx(Gt,{children:t&&a.jsxs(a.Fragment,{children:[a.jsx(ne.div,{className:"prov-picker-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),a.jsx(ne.div,{className:"prov-picker-modal",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},onClick:u=>u.stopPropagation(),children:a.jsxs("div",{className:"prov-dark-card",children:[a.jsxs("div",{className:"prov-dark-header",children:[a.jsx("h3",{className:"prov-dark-title",children:"Seleccionar Provincia"}),a.jsx("button",{onClick:e,className:"prov-close-white",children:"✕"})]}),a.jsx("div",{className:"prov-search-dark",children:a.jsx("input",{type:"text",placeholder:"Buscar provincia...",value:i,onChange:u=>o(u.target.value),className:"prov-input-dark",autoFocus:!0})}),a.jsx("div",{className:"prov-list-dark",children:c.length>0?c.map(u=>a.jsx("div",{className:`prov-item-dark ${r===u?"active":""}`,onClick:()=>{n(u),e()},children:u},u)):a.jsx("div",{className:"prov-empty-dark",children:"No se encontraron provincias"})})]})})]})}),document.body)}function LC({abierto:t,onClose:e,actualizarUsuarioInfo:n,actualizarLista:r,direccionEditar:i,usuarioId:o}){const{uid:c,usuario:u}=ii(),[h,f]=S.useState("domicilio"),[g,y]=S.useState([]),[v,b]=S.useState(!1),[k,w]=S.useState(null),[A,j]=S.useState(""),[R,L]=S.useState(""),[D,z]=S.useState(""),[G,M]=S.useState(""),[I,T]=S.useState(""),[N,V]=S.useState(""),[U,O]=S.useState(""),[xe,Pe]=S.useState(!1),[We,He]=S.useState(!1),[de,ce]=S.useState(!1),[oe,H]=S.useState(null),[J,Ee]=S.useState(""),[$e,Te]=S.useState(!1),Ve=se=>se||"",[Ge,rt]=S.useState(""),[Ke,ct]=S.useState(null),[kt,mt]=S.useState(!1),[ht,Dt]=S.useState(!1),re=async()=>{const se=o||c||(u==null?void 0:u.uid);if(!se){y([]);return}b(!0);try{const Ue=yn($t(De,"direcciones"),Dr("usuarioId","==",se)),pt=(await qr(Ue)).docs.map(Pt=>({id:Pt.id,...Pt.data()}));y(pt)}catch(Ue){console.error("fetchDirecciones error:",Ue),y([])}finally{b(!1)}};S.useEffect(()=>{const se=o||c||(u==null?void 0:u.uid);t&&se&&re()},[t,c,u,o]),S.useEffect(()=>{t&&(re(),i?(w(i.id),f(i.metodoEntrega||"domicilio"),j(i.provincia||""),L(i.ciudad||""),z(i.sector||""),M(i.numeroCalle||""),T(i.numeroCasa||""),V(i.telefono||""),O(i.referencia||""),rt(i.ubicacion||""),Dt(i.metodoEntrega==="tienda")):(w(null),f("domicilio"),j(""),L(""),z(""),M(""),T(""),V(""),O(""),rt(""),ct(null),Dt(!1)))},[t,i]),S.useEffect(()=>{if(!t)return;const se=Ue=>{Ue.key==="Escape"&&e&&e()};return document.body.style.overflow="hidden",document.addEventListener("keydown",se),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",se)}},[t,e]);const qe=se=>{if(se==="tienda"){f("tienda"),j(va.provincia),L(va.ciudad),M(va.numeroCalle),z(""),T(""),O(""),w(null),rt(""),ct(null),Dt(!0);return}if(se==="domicilio"){f("domicilio"),ht&&(j(""),L(""),k||(M(""),z(""),T(""),O("")),Dt(!1));return}f(se)},Se=()=>[G,I?`Casa ${I}`:"",D,R,A,U?`Ref: ${U}`:""].filter(Boolean).join(", ").trim(),ge=async()=>{const se=c||(u==null?void 0:u.uid);if(console.log("Auth check:",{uid:c,usuario:u==null?void 0:u.uid,currentUid:se}),!se){alert("Error de autenticación. Recarga la página e intenta de nuevo.");return}Pe(!0);try{if(h==="tienda"){if(!N||N.trim()===""){Ee("El número de teléfono es obligatorio para recoger en tienda"),Pe(!1);return}typeof n=="function"&&await n({direccion:Ve(va.direccionCompleta),metodoEntrega:"tienda",telefono:N}),e&&e(),typeof r=="function"&&r(),Pe(!1);return}if(!N||N.trim()===""){Ee("El número de teléfono es obligatorio"),Pe(!1);return}const Ue=!!Ke;if(!Ue&&!Se()){alert("Completa provincia, ciudad y calle/número."),Pe(!1);return}const ke=Ue?`${Se()?Se()+", ":""}Ubicación: ${Ge} (${Ke==null?void 0:Ke.lat}, ${Ke==null?void 0:Ke.lon})`:Se(),pt={metodoEntrega:"domicilio",provincia:A||null,ciudad:R||null,numeroCalle:G||null,numeroCasa:I||null,sector:D||null,referencia:U||null,telefono:N||null,direccionCompleta:ke,ubicacion:Ge||null,coords:Ke||null,usuarioId:se,updatedAt:new Date};if(k){const dt=at(De,"direcciones",k);await An(dt,{...pt})}else await jm($t(De,"direcciones"),{...pt,createdAt:new Date});typeof n=="function"&&await n({direccion:Ve(ke),metodoEntrega:"domicilio"}),He(!0);const Pt={direccion:Ve(ke),metodoEntrega:"domicilio",telefono:N,updatedAt:new Date};try{await Xn(at(De,"users",se),Pt,{merge:!0})}catch(dt){console.warn("No se pudo escribir users/{uid}:",dt)}try{await Xn(at(De,"usuarios",se),Pt,{merge:!0})}catch(dt){console.warn("No se pudo escribir usuarios/{uid}:",dt)}typeof n=="function"&&await n({telefono:N}),await re(),typeof r=="function"&&r(),w(null),e&&e(),window.location.reload()}catch(Ue){console.error("handleGuardarDireccion error:",Ue),alert(`Error guardando dirección: ${(Ue==null?void 0:Ue.message)||Ue}`)}finally{Pe(!1)}},Je=async se=>{try{const Ue=typeof se=="string"?se:(se==null?void 0:se.direccionCompleta)||"",ke=se&&se.metodoEntrega?se.metodoEntrega:"domicilio",pt=c||(u==null?void 0:u.uid);He(!0),typeof n=="function"&&await n({direccion:Ue,metodoEntrega:ke,telefono:N});const Pt={direccion:Ue,metodoEntrega:ke,telefono:N,updatedAt:new Date};try{await Xn(at(De,"users",pt),Pt,{merge:!0})}catch(dt){console.warn("No se pudo escribir users/{uid}:",dt)}try{await Xn(at(De,"usuarios",pt),Pt,{merge:!0})}catch(dt){console.warn("No se pudo escribir usuarios/{uid}:",dt)}try{let dt=await ps(at(De,"users",pt));if(dt.exists()||(dt=await ps(at(De,"usuarios",pt))),dt&&dt.exists()){const Xt=dt.data()||{};typeof n=="function"&&await n({direccion:Xt.direccion||Ue,metodoEntrega:Xt.metodoEntrega||ke})}}catch(dt){console.warn("No se pudo releer documento de usuario:",dt)}await re(),typeof r=="function"&&r(),e&&e(),window.location.reload()}catch(Ue){console.error("handleSeleccionarDireccion error:",Ue),He(!1),alert(`Error seleccionando dirección: ${(Ue==null?void 0:Ue.message)||Ue}`)}},te=async se=>{try{await Cm(at(De,"direcciones",se)),await re(),typeof r=="function"&&r(),alert("Dirección eliminada correctamente.")}catch(Ue){console.error("eliminarDireccion:",Ue),alert(`Error eliminando dirección: ${(Ue==null?void 0:Ue.message)||Ue}`)}},xt=se=>{H(se),ce(!0)},be=()=>{ce(!1),H(null)},Qe=()=>{oe&&(te(oe),ce(!1),H(null))},_e=se=>{!se||se.metodoEntrega==="tienda"||(w(se.id),f("domicilio"),j(se.provincia||""),L(se.ciudad||""),z(se.sector||""),M(se.numeroCalle||""),T(se.numeroCasa||""),V(se.telefono||""),O(se.referencia||""),rt(se.ubicacion||""),ct(se.coords||null),Dt(!1))},Y=()=>{if(!navigator.geolocation){alert("Geolocalización no soportada en este navegador.");return}mt(!0),navigator.geolocation.getCurrentPosition(se=>{const Ue=se.coords.latitude.toFixed(6),ke=se.coords.longitude.toFixed(6),pt=`https://www.google.com/maps?q=${Ue},${ke}`;rt(pt),ct({lat:Ue,lon:ke}),M(`${Ue}, ${ke}`),mt(!1)},se=>{console.error("Error geolocalización:",se);let Ue="No se pudo obtener la ubicación.";switch(se.code){case se.PERMISSION_DENIED:Ue="Permisos denegados. Haz clic en el candado 🔒 junto a la URL y permite la ubicación.";break;case se.POSITION_UNAVAILABLE:Ue="Ubicación no disponible. Asegúrate de estar conectado a internet y tener servicios de ubicación activados.";break;case se.TIMEOUT:Ue="Tiempo agotado. Intenta de nuevo.";break;default:Ue="Error desconocido. Verifica permisos del navegador."}alert(Ue),mt(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},pe=()=>{rt(""),ct(null),G&&/^\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?\s*$/.test(G)&&M("")};if(!t)return null;const Re=g.filter(se=>se.metodoEntrega!=="tienda");return zv.createPortal(a.jsxs(a.Fragment,{children:[a.jsx(ne.div,{className:"entrega-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),a.jsx(ne.div,{className:"entrega-slider",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:200},role:"dialog","aria-modal":"true",onClick:se=>se.stopPropagation(),children:a.jsxs("div",{className:"entrega-slider-content","aria-labelledby":"entrega-title",children:[a.jsx("div",{className:"entrega-drag-handle"}),a.jsxs("div",{className:"entrega-header",children:[a.jsxs("div",{className:"entrega-header-content",children:[a.jsx("div",{className:"entrega-icon-wrapper",children:a.jsx("div",{className:"entrega-icon",children:"🚚"})}),a.jsxs("div",{className:"entrega-title-section",children:[a.jsx("h3",{id:"entrega-title",className:"entrega-title",children:"Método de entrega"}),a.jsx("p",{className:"entrega-subtitle",children:"Elige cómo quieres recibir tu pedido"})]})]}),a.jsx("button",{onClick:e,className:"entrega-close-btn","aria-label":"Cerrar",children:a.jsx(xo,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"entrega-methods",children:[a.jsxs(ne.button,{type:"button",onClick:()=>qe("domicilio"),className:`method-card ${h==="domicilio"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":h==="domicilio",children:[a.jsx("div",{className:"method-icon domicilio-icon",children:a.jsx(vd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"method-info",children:[a.jsx("h4",{className:"method-title",children:"A domicilio"}),a.jsx("p",{className:"method-desc",children:"Entrega en tu dirección"})]}),h==="domicilio"&&a.jsx(ne.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:a.jsx(Ls,{className:"w-5 h-5"})})]}),a.jsxs(ne.button,{type:"button",onClick:()=>qe("tienda"),className:`method-card ${h==="tienda"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":h==="tienda",children:[a.jsx("div",{className:"method-icon tienda-icon",children:a.jsx(ty,{className:"w-6 h-6"})}),a.jsxs("div",{className:"method-info",children:[a.jsx("h4",{className:"method-title",children:"Recoger en tienda"}),a.jsx("p",{className:"method-desc",children:"Playcenter Universal"})]}),h==="tienda"&&a.jsx(ne.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:a.jsx(Ls,{className:"w-5 h-5"})})]})]}),h==="domicilio"&&a.jsxs(ne.button,{type:"button",onClick:Y,className:`location-btn ${kt?"loading":""}`,disabled:kt,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[a.jsx(A$,{className:`w-5 h-5 ${kt?"animate-pulse":""}`}),a.jsx("span",{children:kt?"Obteniendo ubicación...":"Usar mi ubicación actual"})]}),h==="tienda"&&a.jsx(ne.div,{className:"tienda-phone-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Teléfono de contacto *"}),a.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:N,onChange:se=>{V(se.target.value),J&&Ee("")},className:"form-input",required:!0}),J&&a.jsx("div",{className:"phone-error-message",children:a.jsxs("span",{children:["⚠️ ",J]})}),a.jsx("p",{className:"form-note",children:"📞 Te contactaremos cuando tu pedido esté listo para recoger"})]})}),a.jsxs("div",{className:"entrega-form",children:[a.jsx(Gt,{children:Ke&&a.jsxs(ne.div,{className:"coords-display",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[a.jsxs("div",{className:"coords-header",children:[a.jsx(Df,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"coords-title",children:"Ubicación detectada"}),a.jsx("button",{onClick:pe,className:"coords-remove","aria-label":"Quitar ubicación",children:a.jsx(xo,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"coords-info",children:[a.jsxs("div",{className:"coord-item",children:[a.jsx("span",{className:"coord-label",children:"Lat:"}),a.jsx("span",{className:"coord-value",children:Ke.lat})]}),a.jsxs("div",{className:"coord-item",children:[a.jsx("span",{className:"coord-label",children:"Lng:"}),a.jsx("span",{className:"coord-value",children:Ke.lon})]})]})]})}),a.jsx(Gt,{mode:"wait",children:h==="domicilio"?a.jsxs(ne.div,{className:"address-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[a.jsxs("div",{className:"form-section",children:[a.jsx("label",{className:"form-label",children:"Provincia *"}),a.jsxs("button",{type:"button",onClick:()=>Te(!0),className:"province-selector","aria-haspopup":"dialog","aria-expanded":$e,children:[a.jsx("span",{className:`province-text ${A?"":"placeholder"}`,children:A||"Selecciona tu provincia"}),a.jsx(r$,{className:"province-chevron"})]})]}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Ciudad *"}),a.jsx("input",{placeholder:"Ej: Santiago",value:R,onChange:se=>L(se.target.value),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Sector"}),a.jsx("input",{placeholder:"Ej: Los Jardines",value:D,onChange:se=>z(se.target.value),className:"form-input"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Calle y número *"}),a.jsx("input",{placeholder:"Ej: Av. Juan Pablo Duarte #123",value:G,onChange:se=>M(se.target.value),className:"form-input"})]}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Número de casa"}),a.jsx("input",{placeholder:"Ej: 45-B",value:I,onChange:se=>T(se.target.value),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Teléfono *"}),a.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:N,onChange:se=>{V(se.target.value),J&&Ee("")},className:"form-input",required:!0}),J&&a.jsx("div",{className:"phone-error-message",children:a.jsxs("span",{children:["⚠️ ",J]})})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Referencia"}),a.jsx("input",{placeholder:"Ej: Casa azul",value:U,onChange:se=>O(se.target.value),className:"form-input"})]}),!Ke&&a.jsxs("div",{className:"form-note",children:["💡 ",a.jsx("strong",{children:"Tip:"}),' Usa "Mi ubicación actual" para completar automáticamente las coordenadas']})]},"domicilio-form"):a.jsxs(ne.div,{className:"store-info",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[a.jsxs("div",{className:"store-header",children:[a.jsx(ty,{className:"w-6 h-6 text-orange-500"}),a.jsx("h4",{className:"store-title",children:"Playcenter Universal"})]}),a.jsx("p",{className:"store-address",children:va.direccionCompleta}),a.jsxs("a",{href:va.ubicacion,target:"_blank",rel:"noreferrer",className:"store-map-link",children:[a.jsx(Df,{className:"w-4 h-4"}),"Ver en Google Maps"]})]},"tienda-info")}),a.jsx(ne.button,{onClick:ge,disabled:xe,className:`save-btn ${xe?"loading":""}`,whileHover:{scale:xe?1:1.02},whileTap:{scale:xe?1:.98},children:xe?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("span",{children:"Guardando..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ls,{className:"w-5 h-5"}),a.jsx("span",{children:h==="tienda"?"Seleccionar Playcenter":k?"Actualizar dirección":"Guardar dirección"})]})})]}),a.jsxs("div",{className:"saved-addresses",children:[a.jsx("h4",{className:"saved-title",children:"Direcciones guardadas"}),v?a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("span",{children:"Cargando direcciones..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs(ne.div,{className:"address-card store-card",whileHover:{scale:1.01},whileTap:{scale:.99},children:[a.jsxs("div",{className:"address-info",children:[a.jsxs("div",{className:"address-header",children:[a.jsx(ty,{className:"w-5 h-5 text-orange-500"}),a.jsx("span",{className:"address-type",children:"Recoger en tienda"})]}),a.jsx("p",{className:"address-name",children:"Playcenter Universal"}),a.jsx("p",{className:"address-details",children:va.direccionCompleta}),a.jsxs("a",{href:va.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[a.jsx(Df,{className:"w-4 h-4"}),"Ver ubicación"]})]}),a.jsxs("button",{onClick:()=>Je(va),className:"address-select-btn store-select",children:[a.jsx(Ls,{className:"w-4 h-4"}),"Seleccionar"]})]}),a.jsx(Gt,{children:Re.length===0?a.jsxs(ne.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[a.jsx(vd,{className:"w-12 h-12 text-gray-300"}),a.jsx("p",{className:"empty-text",children:"No tienes direcciones guardadas"}),a.jsx("p",{className:"empty-subtext",children:"Agrega una dirección para entregas futuras"})]}):a.jsx("div",{className:"addresses-list",children:Re.map((se,Ue)=>a.jsxs(ne.div,{className:"address-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:Ue*.1},whileHover:{scale:1.01},children:[a.jsxs("div",{className:"address-info",children:[a.jsxs("div",{className:"address-header",children:[a.jsx(vd,{className:"w-5 h-5 text-blue-500"}),a.jsx("span",{className:"address-type",children:"Domicilio"})]}),a.jsx("p",{className:"address-details",children:se.direccionCompleta}),se.ubicacion&&a.jsxs("a",{href:se.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[a.jsx(Df,{className:"w-4 h-4"}),"Ver ubicación"]})]}),a.jsxs("div",{className:"address-actions",children:[a.jsx("button",{onClick:()=>_e(se),className:"address-action-btn edit-btn","aria-label":"Editar dirección",children:a.jsx(RC,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Je(se),className:"address-action-btn select-btn","aria-label":"Seleccionar dirección",children:a.jsx(Ls,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>xt(se.id),className:"address-action-btn delete-btn","aria-label":"Eliminar dirección",children:a.jsx(MC,{className:"w-4 h-4"})})]})]},se.id))})})]})]})]})}),a.jsx(Gt,{children:We&&a.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"loaderInner",children:[a.jsx("div",{className:"loader",children:a.jsxs("div",{className:"truckWrapper",children:[a.jsx("div",{className:"truckBody",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 198 93",className:"trucksvg",children:[a.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#F83D3D",d:"M135 22.5H177.264C178.295 22.5 179.22 23.133 179.594 24.0939L192.33 56.8443C192.442 57.1332 192.5 57.4404 192.5 57.7504V89C192.5 90.3807 191.381 91.5 190 91.5H135C133.619 91.5 132.5 90.3807 132.5 89V25C132.5 23.6193 133.619 22.5 135 22.5Z"}),a.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#7D7C7C",d:"M146 33.5H181.741C182.779 33.5 183.709 34.1415 184.078 35.112L190.538 52.112C191.16 53.748 189.951 55.5 188.201 55.5H146C144.619 55.5 143.5 54.3807 143.5 53V36C143.5 34.6193 144.619 33.5 146 33.5Z"}),a.jsx("path",{strokeWidth:"2",stroke:"#282828",fill:"#282828",d:"M150 65C150 65.39 149.763 65.8656 149.127 66.2893C148.499 66.7083 147.573 67 146.5 67C145.427 67 144.501 66.7083 143.873 66.2893C143.237 65.8656 143 65.39 143 65C143 64.61 143.237 64.1344 143.873 63.7107C144.501 63.2917 145.427 63 146.5 63C147.573 63 148.499 63.2917 149.127 63.7107C149.763 64.1344 150 64.61 150 65Z"}),a.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#FFFCAB",rx:"1",height:"7",width:"5",y:"63",x:"187"}),a.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#282828",rx:"1",height:"11",width:"4",y:"81",x:"193"}),a.jsx("rect",{strokeWidth:"3",stroke:"#282828",fill:"#DFDFDF",rx:"2.5",height:"90",width:"121",y:"1.5",x:"6.5"}),a.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#DFDFDF",rx:"2",height:"4",width:"6",y:"84",x:"1"})]})}),a.jsxs("div",{className:"truckTires",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[a.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),a.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]}),a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[a.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),a.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]})]}),a.jsx("div",{className:"road"}),a.jsx("svg",{xmlSpace:"preserve",viewBox:"0 0 453.459 453.459",xmlns:"http://www.w3.org/2000/svg",className:"lampPost",fill:"#000000",children:a.jsx("path",{d:`M252.882,0c-37.781,0-68.686,29.953-70.245,67.358h-6.917v8.954c-26.109,2.163-45.463,10.011-45.463,19.366h9.993
c-1.65,5.146-2.507,10.54-2.507,16.017c0,28.956,23.558,52.514,52.514,52.514c28.956,0,52.514-23.558,52.514-52.514
c0-5.478-0.856-10.872-2.506-16.017h9.992c0-9.354-19.352-17.204-45.463-19.366v-8.954h-6.149C200.189,38.779,223.924,16,252.882,16
c29.952,0,54.32,24.368,54.32,54.32c0,28.774-11.078,37.009-25.105,47.437c-17.444,12.968-37.216,27.667-37.216,78.884v113.914
h-0.797c-5.068,0-9.174,4.108-9.174,9.177c0,2.844,1.293,5.383,3.321,7.066c-3.432,27.933-26.851,95.744-8.226,115.459v11.202h45.75
v-11.202c18.625-19.715-4.794-87.527-8.227-115.459c2.029-1.683,3.322-4.223,3.322-7.066c0-5.068-4.107-9.177-9.176-9.177h-0.795
V196.641c0-43.174,14.942-54.283,30.762-66.043c14.793-10.997,31.559-23.461,31.559-60.277C323.202,31.545,291.656,0,252.882,0z
M232.77,111.694c0,23.442-19.071,42.514-42.514,42.514c-23.442,0-42.514-19.072-42.514-42.514c0-5.531,1.078-10.957,3.141-16.017
h78.747C231.693,100.736,232.77,106.162,232.77,111.694z`})})]})}),a.jsx("div",{className:"loaderText",children:"¡Dirección seleccionada!"})]})})}),a.jsx(Gt,{children:de&&a.jsx(ne.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:a.jsxs(ne.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[a.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"¿Eliminar dirección?"}),a.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"¿Estás seguro que quieres eliminar esta dirección? Esta acción no se puede deshacer."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:be,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:se=>se.target.style.backgroundColor="#f9fafb",onMouseOut:se=>se.target.style.backgroundColor="white",children:"Cancelar"}),a.jsx("button",{onClick:Qe,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:se=>se.target.style.backgroundColor="#dc2626",onMouseOut:se=>se.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),We&&a.jsxs("div",{className:"truck-loader-overlay",children:[a.jsxs("div",{className:"spinner",children:[a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{})]}),a.jsx("div",{className:"truck-loader-text",children:"Procesando entrega..."})]}),a.jsx(rz,{abierto:$e,onClose:()=>Te(!1),onPick:se=>j(se),valorActual:A})]}),document.body)}const iz=()=>{var h;const{usuario:t,usuarioInfo:e,logout:n}=ii(),{setModalAbierto:r}=ru(),i=S.useRef(null);wi();const[o,c]=S.useState(!1),u=(()=>{try{if(!t||!e||!e.metodoEntrega)return"Selecciona método de entrega";if((e.metodoEntrega||"").toLowerCase()==="tienda")return"Recoger en tienda";const g=(e.direccion||"").trim();return g?/maps\.|google\.com\/maps|Ubicación:/i.test(g)?"Dirección de Google Maps":g:"Selecciona método de entrega"}catch{return"Selecciona método de entrega"}})();return S.useEffect(()=>{i.current&&i.current.focus()},[]),S.useEffect(()=>{function f(){}return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]),a.jsxs(a.Fragment,{children:[a.jsx(ne.header,{initial:{y:-120,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,ease:"easeOut"},className:"fixed top-0 left-0 w-full bg-white dark:bg-gray-800 shadow-md z-[9999] pl-0 pr-4 py-3 transition-colors duration-300",style:{backdropFilter:"saturate(180%) blur(15px)",maxWidth:"100vw",overflowX:"hidden"},children:a.jsxs("div",{className:"flex items-center justify-between w-full gap-3",children:[a.jsx("div",{id:"search-bar-container",className:"flex-grow max-w-full px-2 xl:hidden",children:a.jsx(dE,{onClose:()=>{},ref:i,placeholder:"Buscar en pcu.com.do"})}),a.jsxs("div",{className:"hidden xl:flex w-full items-center justify-between gap-6",children:[a.jsxs(Tt,{to:"/",className:"flex items-center gap-3 min-w-0 flex-shrink-0",children:[a.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal",className:"h-10 object-contain"}),a.jsxs("button",{type:"button",onClick:()=>{if(!t)return r(!0);c(!0)},className:"flex flex-col leading-tight text-left text-xs text-gray-700 dark:text-white font-medium hover:text-[#0ea5e9] dark:hover:text-[#60a5fa] transition",children:[a.jsxs("span",{className:"flex items-center gap-1 text-[11px] text-gray-500 dark:text-gray-300",children:[a.jsx(mh,{className:"text-[#4FC3F7]"}),"Método de entrega"]}),a.jsx("strong",{className:"block text-[12px] font-semibold text-gray-700 dark:text-white tracking-wide truncate max-w-[120px] sm:max-w-[160px] md:max-w-[200px] lg:max-w-[220px]",title:u,children:u})]})]}),a.jsx("div",{className:"flex-grow max-w-xl",children:a.jsx(dE,{onClose:()=>{},ref:i,placeholder:"Buscar en pcu.com.do"})}),a.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium text-gray-700 dark:text-white",children:[a.jsx(Tt,{to:"/",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Inicio"}),a.jsx(Tt,{to:"/categorias",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Categorías"}),a.jsx(Tt,{to:"/tiendas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Tiendas"}),a.jsx(Tt,{to:"/vender",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Vender"}),a.jsx(Tt,{to:"/nosotros",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Nosotros"}),a.jsx(Tt,{to:"/contacto",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Contáctanos"}),a.jsx(Tt,{to:"/estafetas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Estafetas"}),a.jsx(Tt,{to:"/carrito",className:"nav-link text-xl hover:scale-110 transition",children:"🛒"}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&a.jsx(Tt,{to:"/admin",className:"px-3 py-2 rounded bg-[#4FC3F7] text-white hover:bg-[#3BB0F3] shadow transition",children:"Panel Admin"}),t?a.jsx(ne.div,{className:"relative",whileTap:{scale:.95},children:a.jsx(Tt,{to:"/profile",children:a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[#4FC3F7] shadow hover:shadow-lg transition cursor-pointer bg-white dark:bg-gray-700",children:t.photoURL?a.jsx("img",{src:t.photoURL,alt:"Perfil",className:"w-full h-full object-cover rounded-full"}):a.jsx("div",{className:"w-full h-full bg-[#4FC3F7] text-white flex items-center justify-center font-bold text-base",children:((h=t.displayName)==null?void 0:h.charAt(0).toUpperCase())||"U"})})})}):a.jsx(ne.button,{onClick:()=>r(!0),className:"px-4 py-2 text-sm bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white rounded-lg font-semibold shadow transition",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Iniciar sesión"})]})]})]})}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&a.jsx("div",{className:"xl:hidden fixed bottom-[80px] right-4 z-[9999]",children:a.jsx(Tt,{to:"/admin",className:"bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white px-5 py-3 rounded-full shadow-xl font-semibold text-base",children:"Panel Admin"})}),o&&t&&a.jsx(LC,{abierto:o,onClose:()=>c(!1),usuarioId:(e==null?void 0:e.uid)||(t==null?void 0:t.uid),direccionEditar:null,actualizarLista:()=>{}})]})};function Vm({isOpen:t,onClose:e,onIniciarSesion:n}){return t?cI.createPortal(a.jsx("div",{onClick:e,className:"fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-[11000] flex items-center justify-center p-4",style:{top:0,left:0},children:a.jsxs(ne.div,{onClick:r=>r.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40 z-[11001]",children:[a.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold","aria-label":"Cerrar modal",children:"×"}),a.jsxs("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-[#3b82f6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A11.955 11.955 0 0112 15c2.32 0 4.47.66 6.264 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})}),"Inicia sesión"]}),a.jsx("p",{className:"mb-6 text-center text-gray-300",children:"Necesitas iniciar sesión para acceder a esta función"}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:()=>{e(),n()},className:"w-full max-w-[120px] px-5 py-2 bg-[#3b82f6] hover:bg-[#2563eb] rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Iniciar sesión"}),a.jsx("button",{onClick:e,className:"w-full max-w-[120px] px-5 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Cancelar"})]})]})}),document.body):null}function sz(){const{usuario:t}=ii(),e=wi(),{abrirModal:n}=ru(),[r,i]=S.useState(!1),o=(h,f)=>{!t&&(f==="/carrito"||f==="/Profile")?(h.preventDefault(),i(!0)):e(f)},c=()=>i(!1),u=()=>{c(),n()};return a.jsx("div",{className:"footer-block",children:a.jsxs("footer",{className:"footer futuristic-footer relative bg-black text-gray-300 py-12 text-sm sm:text-base",children:[a.jsx("div",{className:"footer-bg-animated"}),a.jsx("div",{className:"w-full flex justify-center mb-10 relative z-20",children:a.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal Logo",className:"footer-logo-glow w-32 sm:w-44 xl:w-64 transition-transform duration-300 hover:scale-105"})}),a.jsxs("div",{className:"footer-cols-wrapper relative z-20 max-w-7xl mx-auto px-4 sm:px-6 xl:px-8 grid grid-cols-2 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Playcenter Universal"}),a.jsx("p",{children:"Tu universo de tecnología y gaming en Santiago, R.D."}),a.jsxs("p",{className:"mt-3 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(mh,{})," Av. Estrella Sadhalá #55, frente a la doble vía"]}),a.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(yv,{})," +1 (809) 582-1212 (Internet)"]}),a.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(yv,{})," +1 (849) 635-7000 (Tienda)"]}),a.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(U1,{})," playcenter121@gmail.com"]})]}),a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Navegación"}),a.jsx("ul",{className:"footer-nav-list",children:[["Categorías","/categorias",!1],["Nosotros","/nosotros",!1],["Contáctanos","/contacto",!1],["Estafetas","/estafetas",!1],["Tiendas","/tiendas",!1],["Vender","/vender",!1],["Carrito","/carrito",!0],["Mi perfil","/Profile",!0]].map(([h,f,g])=>a.jsx("li",{children:g?a.jsx("a",{href:f,onClick:y=>o(y,f),className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm cursor-pointer",children:h}):a.jsx("a",{href:f,className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm",children:h})},h))})]}),a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Horario"}),a.jsx("p",{children:"Lunes a Viernes: 8:30am - 5:30pm"}),a.jsx("p",{children:"Sábados: 8:30am - 12:30pm"}),a.jsx("p",{children:"Domingos: Cerrado"})]}),a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Conéctate con nosotros"}),a.jsx("div",{className:"grid grid-cols-2 gap-4 justify-items-center sm:justify-items-start",children:[["https://www.facebook.com/pcu12","/Facebook.png","Facebook"],["https://www.instagram.com/playcenter_universal/?hl=es","/Instagram.png","Instagram"],["https://www.tiktok.com/@playcenter_universal?lang=es","/tiktok.png","TikTok"],["https://youtube.com/@playcenteruniversal1916","/Youtube.png","YouTube"]].map(([h,f,g])=>a.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"relative group",children:a.jsx("img",{src:f,alt:g,className:"footer-social-icon-neon w-12 h-12 sm:w-16 sm:h-16 rounded-full transition-transform duration-300 transform group-hover:scale-110"})},g))})]})]}),a.jsxs("p",{className:"footer-copyright text-center text-gray-500 text-[11px] sm:text-xs mt-10 relative z-20",children:["© ",new Date().getFullYear()," Playcenter Universal. Todos los derechos reservados."]}),a.jsx(Vm,{isOpen:r,onClose:c,onIniciarSesion:u})]})})}const wv=({mediaItems:t=[],productName:e="",onMediaChange:n=null,className:r="",showThumbnails:i=!0,showControls:o=!0,autoPlay:c=!1,enableZoom:u=!0,enableFullscreen:h=!0,initialIndex:f=0,forceControls:g=!1})=>{const[y,v]=S.useState(f||0),[b,k]=S.useState(!1),[w,A]=S.useState(!1),[j,R]=S.useState(!0),[L,D]=S.useState(!1),[z,G]=S.useState(1),[M,I]=S.useState({x:50,y:50}),[T,N]=S.useState(!1),[V,U]=S.useState({x:0,y:0}),O=S.useRef(null),xe=S.useRef(null),Pe=S.useRef(null),[We,He]=S.useState(null),[de,ce]=S.useState(null),oe=t[y];S.useEffect(()=>{const be=Math.max(0,Math.min(f||0,Math.max(0,t.length-1)));v(be),D(!1),G(1)},[f,t.length]);const H=(be="")=>{const Qe=String(be||"").toLowerCase();return Qe.includes("youtube.com/watch")||Qe.includes("youtu.be/")},J=(be="")=>{try{const Qe=String(be||"");if(Qe.includes("youtu.be/"))return Qe.split("youtu.be/")[1].split(/[?&#]/)[0]||null;const _e=Qe.match(/[?&]v=([^&#]+)/);return _e&&_e[1]?_e[1]:null}catch{return null}},Ee=(be="")=>{const Qe=J(be);return Qe?`https://www.youtube.com/embed/${Qe}`:null},$e=(be="")=>{const Qe=J(be);return Qe?`https://img.youtube.com/vi/${Qe}/hqdefault.jpg`:null},Te=(be="")=>String(be||"").toLowerCase().includes("vimeo.com/"),Ve=(be="")=>{try{const pe=(String(be||"").split("/").filter(Boolean).pop()||"").split(/[?#]/)[0];return pe&&/\d+/.test(pe)?pe:null}catch{return null}},Ge=(be="")=>{const Qe=Ve(be);return Qe?`https://player.vimeo.com/video/${Qe}`:null},rt=(be="")=>null,Ke=S.useCallback(()=>{v(be=>(be+1)%t.length),D(!1),G(1)},[t.length]),ct=S.useCallback(()=>{v(be=>(be-1+t.length)%t.length),D(!1),G(1)},[t.length]),kt=S.useCallback(be=>{v(be),D(!1),G(1),n&&n(be)},[n]),mt=()=>{O.current&&(oe==null?void 0:oe.type)==="video"&&(w?O.current.pause():O.current.play(),A(!w))},ht=()=>{O.current&&(oe==null?void 0:oe.type)==="video"&&(O.current.muted=!j,R(!j))},Dt=()=>{(oe==null?void 0:oe.type)==="image"&&u&&(G(be=>Math.min(be+.5,3)),D(!0))},re=()=>{if((oe==null?void 0:oe.type)==="image"&&u){const be=Math.max(z-.5,1);G(be),be===1&&(D(!1),I({x:50,y:50}))}},qe=()=>{G(1),D(!1),I({x:50,y:50})},Se=be=>{if(L&&(oe==null?void 0:oe.type)==="image"){const Qe=be.currentTarget.getBoundingClientRect(),_e=(be.clientX-Qe.left)/Qe.width*100,Y=(be.clientY-Qe.top)/Qe.height*100;I({x:Math.max(0,Math.min(100,_e)),y:Math.max(0,Math.min(100,Y))})}},ge=be=>{ce(null),He(be.targetTouches[0].clientX)},Je=be=>{ce(be.targetTouches[0].clientX)},te=()=>{if(!We||!de)return;const be=We-de,Qe=be>50,_e=be<-50;Qe&&t.length>1&&Ke(),_e&&t.length>1&&ct()};if(S.useEffect(()=>{const be=Qe=>{if(b)switch(Qe.key){case"ArrowLeft":ct();break;case"ArrowRight":Ke();break;case"Escape":k(!1);break;case" ":Qe.preventDefault(),(oe==null?void 0:oe.type)==="video"&&mt();break;case"+":case"=":Dt();break;case"-":re();break}};return window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)},[b,oe,Ke,ct]),S.useEffect(()=>{if(Pe.current&&i){const be=Pe.current.children[y];be&&be.scrollIntoView({behavior:"smooth",inline:"center"})}},[y,i]),!t.length)return a.jsx("div",{className:`advanced-media-gallery ${r}`,children:a.jsx("div",{className:"flex items-center justify-center h-96 bg-white rounded-lg",children:a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx(DU,{className:"mx-auto text-4xl mb-2"}),a.jsx("p",{children:"No hay medios disponibles"})]})})});const xt=()=>{if(!oe)return null;if(oe.type==="video"){const be=oe.url||"",Qe=H(be)?Ee(be):null,_e=!Qe&&Te(be)?Ge(be):null;if(Qe||_e){const Y=Qe||_e;return a.jsx("div",{className:"relative w-full h-full group",children:a.jsx("iframe",{src:Y,className:"w-full h-full",style:{aspectRatio:"16/9",border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,title:e||"Video"})})}return a.jsxs("div",{className:"relative w-full h-full group",children:[a.jsx("video",{ref:O,src:be,className:"w-full h-full object-contain",controls:b||g,muted:j,onPlay:()=>A(!0),onPause:()=>A(!1),onLoadedData:()=>{c&&O.current&&O.current.play()},preload:"metadata"}),o&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsxs("div",{className:"flex items-center gap-4 bg-black/50 rounded-lg p-4",children:[a.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),mt()},className:"text-white hover:text-blue-400 transition-colors",title:w?"Pausar":"Reproducir",children:w?a.jsx(LU,{size:24}):a.jsx(Z0,{size:24})}),a.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),ht()},className:"text-white hover:text-blue-400 transition-colors",title:j?"Activar sonido":"Silenciar",children:j?a.jsx(WU,{size:20}):a.jsx(qU,{size:20})})]})})]})}return a.jsxs("div",{className:"relative w-full h-full cursor-pointer",onMouseMove:Se,onClick:L?qe:void 0,children:[a.jsx("img",{ref:O,src:oe.url,alt:oe.title||`${e} - Imagen ${y+1}`,className:"w-full h-full object-contain transition-transform duration-300",style:{transform:L?`scale(${z})`:"scale(1)",transformOrigin:L?`${M.x}% ${M.y}%`:"center"},draggable:!1}),u&&oe.type==="image"&&o&&a.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),Dt()},className:"bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",title:"Acercar",disabled:z>=3,children:a.jsx(UU,{})}),a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),re()},className:"bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",title:"Alejar",disabled:z<=1,children:a.jsx(FU,{})})]})]})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`advanced-media-gallery ${r}`,ref:xe,children:[a.jsx("div",{className:"relative amg-surface rounded-lg overflow-hidden aspect-square md:aspect-video",children:a.jsxs("div",{className:"w-full h-full group",onTouchStart:ge,onTouchMove:Je,onTouchEnd:te,children:[a.jsx(Gt,{mode:"wait",children:a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"w-full h-full",children:xt()},y)}),t.length>1&&o&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),ct()},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100",title:"Anterior",children:a.jsx(mv,{})}),a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),Ke()},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100",title:"Siguiente",children:a.jsx(gv,{})})]}),t.length>1&&a.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded-full text-sm",children:[y+1," / ",t.length]}),h&&o&&a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),k(!0)},className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-all opacity-0 group-hover:opacity-100",title:"Pantalla completa",children:a.jsx(RU,{})})]})}),i&&t.length>1&&a.jsx("div",{className:"mt-4",children:a.jsx("div",{ref:Pe,className:"flex gap-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-gray-300",children:t.map((be,Qe)=>a.jsxs("button",{type:"button",onClick:_e=>{_e.stopPropagation(),kt(Qe)},className:`
                    relative flex-shrink-0 w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden border-2 transition-all
                    ${Qe===y?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"}
                  `,children:[be.type==="video"?(()=>{const _e=be.url||"",Y=H(_e)?$e(_e):null,pe=!Y&&Te(_e)?rt(_e):null;return Y||pe?a.jsxs("div",{className:"relative w-full h-full",children:[a.jsx("img",{src:Y||pe,alt:`Video ${Qe+1}`,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:a.jsx(Z0,{className:"text-white text-sm"})})]}):a.jsxs("div",{className:"relative w-full h-full",children:[a.jsx("video",{src:_e,className:"w-full h-full object-contain",muted:!0,preload:"metadata"}),a.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:a.jsx(Z0,{className:"text-white text-sm"})})]})})():a.jsx("img",{src:be.url,alt:`Thumbnail ${Qe+1}`,className:"w-full h-full object-contain"}),Qe===y&&a.jsx("div",{className:"absolute inset-0 bg-blue-500/20 border border-blue-500 rounded-lg"})]},Qe))})})]}),a.jsx(Gt,{children:b&&a.jsx(ne.div,{initial:{opacity:0},exit:{opacity:0},className:"fixed inset-0 bg-black flex items-center justify-center",style:{zIndex:2147483647},onClick:()=>k(!1),children:a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",onClick:be=>be.stopPropagation(),children:[a.jsx("div",{className:"w-full h-full max-w-7xl max-h-full p-4",children:xt()}),a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),k(!1)},className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-colors z-10",title:"Cerrar",children:a.jsx(vv,{size:20})}),t.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),ct()},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-4 rounded-full transition-colors",title:"Anterior",children:a.jsx(mv,{size:24})}),a.jsx("button",{type:"button",onClick:be=>{be.stopPropagation(),Ke()},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-4 rounded-full transition-colors",title:"Siguiente",children:a.jsx(gv,{size:24})})]}),t.length>1&&a.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 max-w-4xl",children:a.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:t.map((be,Qe)=>a.jsx("button",{type:"button",onClick:_e=>{_e.stopPropagation(),kt(Qe)},className:`
                          relative flex-shrink-0 w-12 h-12 rounded overflow-hidden border-2 transition-all
                          ${Qe===y?"border-white":"border-gray-500 hover:border-gray-300"}
                        `,children:be.type==="video"?a.jsx("video",{src:be.url,className:"w-full h-full object-contain",muted:!0,preload:"metadata"}):a.jsx("img",{src:be.url,alt:`Thumbnail ${Qe+1}`,className:"w-full h-full object-contain"})},Qe))})}),a.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-4 py-2 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium",children:e}),a.jsxs("p",{className:"text-xs opacity-75",children:[y+1," de ",t.length]})]})]})})})]})},_v=t=>t?String(t).split("?")[0].split("#")[0].trim().toLowerCase():"",VC=t=>/\.(mp4|mov|avi|mkv|webm|m4v)$/i.test(_v(t)),DN=t=>t?{type:VC(t)?"video":"image",url:t}:null,az=(t,e)=>{const[n,r]=S.useState(null);return S.useEffect(()=>{if(!t){r(null);return}const o=at(De,"productos",t),c=gr(o,u=>{u.exists()&&r({id:u.id,...u.data()})});return()=>c()},[t]),S.useMemo(()=>{const o=n||e||{},c=o.mainImage||o.imagen||"",u=Array.isArray(o.gallery)?o.gallery:Array.isArray(o.imagenes)?o.imagenes:[],h=Array.isArray(o.productVideos)?o.productVideos:Array.isArray(o.videoUrls)?o.videoUrls:o.videoUrl?[o.videoUrl]:[],f=Array.isArray(o.extraMedia)?o.extraMedia:Array.isArray(o.imagenesExtra)?o.imagenesExtra:[],y=(Array.isArray(o.variants)?o.variants:Array.isArray(o.variantes)?o.variantes:[]).map((v,b)=>({id:v.id||`var_${b}`,name:v.name||v.color||`Variante ${b+1}`,price:v.price??v.precio??null,stock:v.stock??v.cantidad??null,mainImage:v.mainImage||v.imagen||"",gallery:Array.isArray(v.gallery)?v.gallery:Array.isArray(v.imagenes)?v.imagenes:[],videos:Array.isArray(v.videos)?v.videos:Array.isArray(v.videoUrls)?v.videoUrls:v.video?[v.video]:[]}));return{...o,mainImage:c,gallery:u,productVideos:h,extraMedia:f,variants:y}},[n,e])},oz=({productId:t,draftData:e,className:n=""})=>{var L;const r=az(t,e),[i,o]=S.useState(0);S.useEffect(()=>{o(0)},[r==null?void 0:r.id]);const c=((L=r==null?void 0:r.variants)==null?void 0:L[i])||null,u=c&&(c.mainImage||(c.gallery||[]).length)?c:r,h=(u==null?void 0:u.mainImage)||"",f=Array.isArray(u==null?void 0:u.gallery)?u.gallery:[],g=Array.isArray(c==null?void 0:c.videos)?c.videos:[],y=[...f,...g],v=[];if(h){const D=_v(h);y.some(z=>_v(z)===D)||v.push(DN(h))}y.forEach(D=>v.push(DN(D)));const k=(Array.isArray(r==null?void 0:r.videoAcercaArticulo)?r.videoAcercaArticulo:r!=null&&r.videoUrl?[r.videoUrl]:(r==null?void 0:r.productVideos)||[]).map(D=>({type:"video",url:D})).filter(Boolean),w=((r==null?void 0:r.extraMedia)||[]).slice(0,3),A=(r==null?void 0:r.name)||(r==null?void 0:r.nombre)||"Producto",j=(r==null?void 0:r.price)??(r==null?void 0:r.precio)??0,R=(r==null?void 0:r.stock)??(r==null?void 0:r.cantidad)??null;return a.jsxs("div",{className:`vista-producto-mini ${n}`,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Vista previa"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Sin relacionados. Refleja cambios al instante."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.filter(Boolean).length>0&&a.jsx(wv,{mediaItems:v.filter(Boolean),productName:A,className:"",showThumbnails:!0,showControls:!0,autoPlay:!1,enableZoom:!0,enableFullscreen:!1}),a.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-4",children:[a.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:A}),a.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[a.jsxs("span",{className:"text-2xl font-semibold text-blue-700",children:["RD$ ",Number(j||0).toLocaleString("es-DO")]}),typeof R=="number"&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${R>0?"bg-green-50 text-green-700":"bg-red-50 text-red-600"}`,children:R>0?"En stock":"Agotado"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",className:"flex-1 bg-blue-600 text-white rounded-lg py-2 text-sm shadow hover:bg-blue-700 transition-colors",disabled:!0,onClick:D=>D.stopPropagation(),children:"Agregar al carrito"}),a.jsx("button",{type:"button",className:"flex-1 bg-emerald-600 text-white rounded-lg py-2 text-sm shadow hover:bg-emerald-700 transition-colors",disabled:!0,onClick:D=>D.stopPropagation(),children:"Comprar ahora"})]})]})]}),Array.isArray(r==null?void 0:r.variants)&&r.variants.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Variantes"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.variants.map((D,z)=>a.jsxs("button",{type:"button",onClick:G=>{G.stopPropagation(),o(z)},className:`flex items-center gap-2 px-3 py-2 rounded-lg border shadow-sm hover:shadow transition-all ${z===i?"border-blue-500 ring-2 ring-blue-200":"border-gray-200"}`,children:[D.mainImage?a.jsx("img",{src:D.mainImage,alt:D.name,className:"w-8 h-8 object-contain rounded"}):a.jsx("div",{className:"w-8 h-8 rounded bg-gray-100"}),a.jsx("span",{className:"text-sm text-gray-800",children:D.name})]},D.id||z))})]}),k.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Acerca de este artículo"}),a.jsx(wv,{mediaItems:k,productName:A,className:"",showThumbnails:k.length>1,showControls:!0,autoPlay:!1,enableZoom:!1,enableFullscreen:!1})]}),w.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-800 mb-2",children:"Extras"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:w.map((D,z)=>{const G=VC(D);return a.jsx("div",{className:"rounded-lg border bg-white p-2 shadow-sm",children:G?a.jsx("video",{src:D,className:"w-full h-40 object-contain rounded",controls:!0,preload:"metadata"}):a.jsx("img",{src:D,className:"w-full h-40 object-contain rounded",alt:`extra-${z+1}`})},z)})})]})]})};var ny={exports:{}},ry,ON;function lz(){if(ON)return ry;ON=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ry=t,ry}var iy,LN;function cz(){if(LN)return iy;LN=1;var t=lz();function e(){}function n(){}return n.resetWarningCache=e,iy=function(){function r(c,u,h,f,g,y){if(y!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},iy}var VN;function uz(){return VN||(VN=1,ny.exports=cz()()),ny.exports}var dz=uz();const hn=Yd(dz),hz=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Jc(t,e,n){const r=fz(t),{webkitRelativePath:i}=t,o=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&FN(r,"path",o),FN(r,"relativePath",o),r}function fz(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=hz.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function FN(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const pz=[".DS_Store","Thumbs.db"];function mz(t){return Pl(this,void 0,void 0,function*(){return Gp(t)&&gz(t.dataTransfer)?bz(t.dataTransfer,t.type):yz(t)?vz(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?xz(t):[]})}function gz(t){return Gp(t)}function yz(t){return Gp(t)&&Gp(t.target)}function Gp(t){return typeof t=="object"&&t!==null}function vz(t){return Ev(t.target.files).map(e=>Jc(e))}function xz(t){return Pl(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Jc(n))})}function bz(t,e){return Pl(this,void 0,void 0,function*(){if(t.items){const n=Ev(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(wz));return UN(FC(r))}return UN(Ev(t.files).map(n=>Jc(n)))})}function UN(t){return t.filter(e=>pz.indexOf(e.name)===-1)}function Ev(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function wz(t){if(typeof t.webkitGetAsEntry!="function")return $N(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?UC(e):$N(t,e)}function FC(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?FC(n):[n]],[])}function $N(t,e){return Pl(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const o=yield t.getAsFileSystemHandle();if(o===null)throw new Error(`${t} is not a File`);if(o!==void 0){const c=yield o.getFile();return c.handle=o,Jc(c)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Jc(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function _z(t){return Pl(this,void 0,void 0,function*(){return t.isDirectory?UC(t):Ez(t)})}function UC(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function o(){e.readEntries(c=>Pl(this,void 0,void 0,function*(){if(c.length){const u=Promise.all(c.map(_z));i.push(u),o()}else try{const u=yield Promise.all(i);n(u)}catch(u){r(u)}}),c=>{r(c)})}o()})}function Ez(t){return Pl(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Jc(r,t.fullPath);e(i)},r=>{n(r)})})})}var Of={},zN;function Nz(){return zN||(zN=1,Of.__esModule=!0,Of.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?o===u.replace(/\/.*$/,""):i===u})}return!0}),Of}var kz=Nz();const sy=Yd(kz);function BN(t){return Tz(t)||Az(t)||zC(t)||Sz()}function Sz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Az(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tz(t){if(Array.isArray(t))return Nv(t)}function HN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(n),!0).forEach(function(r){$C(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bd(t,e){return Iz(t)||jz(t,e)||zC(t,e)||Cz()}function Cz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zC(t,e){if(t){if(typeof t=="string")return Nv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nv(t,e)}}function Nv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(h){o=!0,u=h}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function Iz(t){if(Array.isArray(t))return t}var Pz=typeof sy=="function"?sy:sy.default,Rz="file-invalid-type",Mz="file-too-large",Dz="file-too-small",Oz="too-many-files",Lz=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:Rz,message:"File type must be ".concat(r)}},qN=function(e){return{code:Mz,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},GN=function(e){return{code:Dz,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Vz={code:Oz,message:"Too many files"};function BC(t,e){var n=t.type==="application/x-moz-file"||Pz(t,e);return[n,n?null:Lz(e)]}function HC(t,e,n){if(ll(t.size))if(ll(e)&&ll(n)){if(t.size>n)return[!1,qN(n)];if(t.size<e)return[!1,GN(e)]}else{if(ll(e)&&t.size<e)return[!1,GN(e)];if(ll(n)&&t.size>n)return[!1,qN(n)]}return[!0,null]}function ll(t){return t!=null}function Fz(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,o=t.multiple,c=t.maxFiles,u=t.validator;return!o&&e.length>1||o&&c>=1&&e.length>c?!1:e.every(function(h){var f=BC(h,n),g=Bd(f,1),y=g[0],v=HC(h,r,i),b=Bd(v,1),k=b[0],w=u?u(h):null;return y&&k&&!w})}function Kp(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Lf(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function KN(t){t.preventDefault()}function Uz(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function $z(t){return t.indexOf("Edge/")!==-1}function zz(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Uz(t)||$z(t)}function Is(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return e.some(function(u){return!Kp(r)&&u&&u.apply(void 0,[r].concat(o)),Kp(r)})}}function Bz(){return"showOpenFilePicker"in window}function Hz(t){if(ll(t)){var e=Object.entries(t).filter(function(n){var r=Bd(n,2),i=r[0],o=r[1],c=!0;return WC(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(o)||!o.every(qC))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(n,r){var i=Bd(r,2),o=i[0],c=i[1];return WN(WN({},n),{},$C({},o,c))},{});return[{description:"Files",accept:e}]}return t}function Wz(t){if(ll(t))return Object.entries(t).reduce(function(e,n){var r=Bd(n,2),i=r[0],o=r[1];return[].concat(BN(e),[i],BN(o))},[]).filter(function(e){return WC(e)||qC(e)}).join(",")}function qz(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Gz(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function WC(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function qC(t){return/^.*\.[\w]+$/.test(t)}var Kz=["children"],Qz=["open"],Yz=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Xz=["refKey","onChange","onClick"];function Jz(t){return tB(t)||eB(t)||GC(t)||Zz()}function Zz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tB(t){if(Array.isArray(t))return kv(t)}function ay(t,e){return iB(t)||rB(t,e)||GC(t,e)||nB()}function nB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GC(t,e){if(t){if(typeof t=="string")return kv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kv(t,e)}}function kv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rB(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(h){o=!0,u=h}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function iB(t){if(Array.isArray(t))return t}function QN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QN(Object(n),!0).forEach(function(r){Sv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qp(t,e){if(t==null)return{};var n=sB(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var z1=S.forwardRef(function(t,e){var n=t.children,r=Qp(t,Kz),i=QC(r),o=i.open,c=Qp(i,Qz);return S.useImperativeHandle(e,function(){return{open:o}},[o]),Gi.createElement(S.Fragment,null,n(Rn(Rn({},c),{},{open:o})))});z1.displayName="Dropzone";var KC={disabled:!1,getFilesFromEvent:mz,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};z1.defaultProps=KC;z1.propTypes={children:hn.func,accept:hn.objectOf(hn.arrayOf(hn.string)),multiple:hn.bool,preventDropOnDocument:hn.bool,noClick:hn.bool,noKeyboard:hn.bool,noDrag:hn.bool,noDragEventsBubbling:hn.bool,minSize:hn.number,maxSize:hn.number,maxFiles:hn.number,disabled:hn.bool,getFilesFromEvent:hn.func,onFileDialogCancel:hn.func,onFileDialogOpen:hn.func,useFsAccessApi:hn.bool,autoFocus:hn.bool,onDragEnter:hn.func,onDragLeave:hn.func,onDragOver:hn.func,onDrop:hn.func,onDropAccepted:hn.func,onDropRejected:hn.func,onError:hn.func,validator:hn.func};var Av={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function QC(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Rn(Rn({},KC),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,o=e.maxSize,c=e.minSize,u=e.multiple,h=e.maxFiles,f=e.onDragEnter,g=e.onDragLeave,y=e.onDragOver,v=e.onDrop,b=e.onDropAccepted,k=e.onDropRejected,w=e.onFileDialogCancel,A=e.onFileDialogOpen,j=e.useFsAccessApi,R=e.autoFocus,L=e.preventDropOnDocument,D=e.noClick,z=e.noKeyboard,G=e.noDrag,M=e.noDragEventsBubbling,I=e.onError,T=e.validator,N=S.useMemo(function(){return Wz(n)},[n]),V=S.useMemo(function(){return Hz(n)},[n]),U=S.useMemo(function(){return typeof A=="function"?A:YN},[A]),O=S.useMemo(function(){return typeof w=="function"?w:YN},[w]),xe=S.useRef(null),Pe=S.useRef(null),We=S.useReducer(aB,Av),He=ay(We,2),de=He[0],ce=He[1],oe=de.isFocused,H=de.isFileDialogActive,J=S.useRef(typeof window<"u"&&window.isSecureContext&&j&&Bz()),Ee=function(){!J.current&&H&&setTimeout(function(){if(Pe.current){var Y=Pe.current.files;Y.length||(ce({type:"closeDialog"}),O())}},300)};S.useEffect(function(){return window.addEventListener("focus",Ee,!1),function(){window.removeEventListener("focus",Ee,!1)}},[Pe,H,O,J]);var $e=S.useRef([]),Te=function(Y){xe.current&&xe.current.contains(Y.target)||(Y.preventDefault(),$e.current=[])};S.useEffect(function(){return L&&(document.addEventListener("dragover",KN,!1),document.addEventListener("drop",Te,!1)),function(){L&&(document.removeEventListener("dragover",KN),document.removeEventListener("drop",Te))}},[xe,L]),S.useEffect(function(){return!r&&R&&xe.current&&xe.current.focus(),function(){}},[xe,R,r]);var Ve=S.useCallback(function(_e){I?I(_e):console.error(_e)},[I]),Ge=S.useCallback(function(_e){_e.preventDefault(),_e.persist(),te(_e),$e.current=[].concat(Jz($e.current),[_e.target]),Lf(_e)&&Promise.resolve(i(_e)).then(function(Y){if(!(Kp(_e)&&!M)){var pe=Y.length,Re=pe>0&&Fz({files:Y,accept:N,minSize:c,maxSize:o,multiple:u,maxFiles:h,validator:T}),se=pe>0&&!Re;ce({isDragAccept:Re,isDragReject:se,isDragActive:!0,type:"setDraggedFiles"}),f&&f(_e)}}).catch(function(Y){return Ve(Y)})},[i,f,Ve,M,N,c,o,u,h,T]),rt=S.useCallback(function(_e){_e.preventDefault(),_e.persist(),te(_e);var Y=Lf(_e);if(Y&&_e.dataTransfer)try{_e.dataTransfer.dropEffect="copy"}catch{}return Y&&y&&y(_e),!1},[y,M]),Ke=S.useCallback(function(_e){_e.preventDefault(),_e.persist(),te(_e);var Y=$e.current.filter(function(Re){return xe.current&&xe.current.contains(Re)}),pe=Y.indexOf(_e.target);pe!==-1&&Y.splice(pe,1),$e.current=Y,!(Y.length>0)&&(ce({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Lf(_e)&&g&&g(_e))},[xe,g,M]),ct=S.useCallback(function(_e,Y){var pe=[],Re=[];_e.forEach(function(se){var Ue=BC(se,N),ke=ay(Ue,2),pt=ke[0],Pt=ke[1],dt=HC(se,c,o),Xt=ay(dt,2),Cn=Xt[0],jn=Xt[1],Ln=T?T(se):null;if(pt&&Cn&&!Ln)pe.push(se);else{var lr=[Pt,jn];Ln&&(lr=lr.concat(Ln)),Re.push({file:se,errors:lr.filter(function(yr){return yr})})}}),(!u&&pe.length>1||u&&h>=1&&pe.length>h)&&(pe.forEach(function(se){Re.push({file:se,errors:[Vz]})}),pe.splice(0)),ce({acceptedFiles:pe,fileRejections:Re,isDragReject:Re.length>0,type:"setFiles"}),v&&v(pe,Re,Y),Re.length>0&&k&&k(Re,Y),pe.length>0&&b&&b(pe,Y)},[ce,u,N,c,o,h,v,b,k,T]),kt=S.useCallback(function(_e){_e.preventDefault(),_e.persist(),te(_e),$e.current=[],Lf(_e)&&Promise.resolve(i(_e)).then(function(Y){Kp(_e)&&!M||ct(Y,_e)}).catch(function(Y){return Ve(Y)}),ce({type:"reset"})},[i,ct,Ve,M]),mt=S.useCallback(function(){if(J.current){ce({type:"openDialog"}),U();var _e={multiple:u,types:V};window.showOpenFilePicker(_e).then(function(Y){return i(Y)}).then(function(Y){ct(Y,null),ce({type:"closeDialog"})}).catch(function(Y){qz(Y)?(O(Y),ce({type:"closeDialog"})):Gz(Y)?(J.current=!1,Pe.current?(Pe.current.value=null,Pe.current.click()):Ve(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ve(Y)});return}Pe.current&&(ce({type:"openDialog"}),U(),Pe.current.value=null,Pe.current.click())},[ce,U,O,j,ct,Ve,V,u]),ht=S.useCallback(function(_e){!xe.current||!xe.current.isEqualNode(_e.target)||(_e.key===" "||_e.key==="Enter"||_e.keyCode===32||_e.keyCode===13)&&(_e.preventDefault(),mt())},[xe,mt]),Dt=S.useCallback(function(){ce({type:"focus"})},[]),re=S.useCallback(function(){ce({type:"blur"})},[]),qe=S.useCallback(function(){D||(zz()?setTimeout(mt,0):mt())},[D,mt]),Se=function(Y){return r?null:Y},ge=function(Y){return z?null:Se(Y)},Je=function(Y){return G?null:Se(Y)},te=function(Y){M&&Y.stopPropagation()},xt=S.useMemo(function(){return function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=_e.refKey,pe=Y===void 0?"ref":Y,Re=_e.role,se=_e.onKeyDown,Ue=_e.onFocus,ke=_e.onBlur,pt=_e.onClick,Pt=_e.onDragEnter,dt=_e.onDragOver,Xt=_e.onDragLeave,Cn=_e.onDrop,jn=Qp(_e,Yz);return Rn(Rn(Sv({onKeyDown:ge(Is(se,ht)),onFocus:ge(Is(Ue,Dt)),onBlur:ge(Is(ke,re)),onClick:Se(Is(pt,qe)),onDragEnter:Je(Is(Pt,Ge)),onDragOver:Je(Is(dt,rt)),onDragLeave:Je(Is(Xt,Ke)),onDrop:Je(Is(Cn,kt)),role:typeof Re=="string"&&Re!==""?Re:"presentation"},pe,xe),!r&&!z?{tabIndex:0}:{}),jn)}},[xe,ht,Dt,re,qe,Ge,rt,Ke,kt,z,G,r]),be=S.useCallback(function(_e){_e.stopPropagation()},[]),Qe=S.useMemo(function(){return function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=_e.refKey,pe=Y===void 0?"ref":Y,Re=_e.onChange,se=_e.onClick,Ue=Qp(_e,Xz),ke=Sv({accept:N,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Se(Is(Re,kt)),onClick:Se(Is(se,be)),tabIndex:-1},pe,Pe);return Rn(Rn({},ke),Ue)}},[Pe,n,u,kt,r]);return Rn(Rn({},de),{},{isFocused:oe&&!r,getRootProps:xt,getInputProps:Qe,rootRef:xe,inputRef:Pe,open:Se(mt)})}function aB(t,e){switch(e.type){case"focus":return Rn(Rn({},t),{},{isFocused:!0});case"blur":return Rn(Rn({},t),{},{isFocused:!1});case"openDialog":return Rn(Rn({},Av),{},{isFileDialogActive:!0});case"closeDialog":return Rn(Rn({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Rn(Rn({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Rn(Rn({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Rn({},Av);default:return t}}function YN(){}const oB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"ufu-dropzone-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z"})}),lB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),cB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:a.jsx("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z"})}),uB=()=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 100-12 6 6 0 000 12zM12 14.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.5h13.628a2.31 2.31 0 011.642 3.953l-.837 1.172-3.44-3.44-3.44 3.44-.837-1.172a2.31 2.31 0 01-1.642-3.953H6.827z"})]}),dB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"})}),hB=({file:t,onRemove:e,onSetMain:n,onMove:r,index:i,fileCount:o})=>{const{url:c,type:u,name:h,size:f,progress:g,error:y,isMain:v}=t,[b,k]=S.useState(!1),w=S.useRef(null),A=(j,R=2)=>{if(!j||j===0)return"0 Bytes";const L=1024,D=R<0?0:R,z=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(j)/Math.log(L));return parseFloat((j/Math.pow(L,G)).toFixed(D))+" "+z[G]};return S.useEffect(()=>{if(u==="video"&&w.current){const j=()=>k(!0);return w.current.addEventListener("loadedmetadata",j),()=>{w.current&&w.current.removeEventListener("loadedmetadata",j)}}},[u]),a.jsxs(ne.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`ufu-preview-item ${v?"ufu-main-item":""}`,children:[a.jsx("div",{className:"ufu-preview-media",children:u==="image"?a.jsx("img",{src:c,alt:h,className:"object-contain w-full h-full",loading:"eager",onLoad:()=>console.log("✅ Imagen cargada:",h,c),onError:j=>{j.target.onerror=null,j.target.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}):u==="video"?a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:w,src:c,preload:"metadata",muted:!0,className:`object-contain w-full h-full ${b?"opacity-100":"opacity-0"}`,onError:j=>{j.target.onerror=null,k(!0)}}),a.jsx("div",{className:`video-overlay ${b?"with-thumbnail":""}`,children:a.jsx(cB,{})})]}):a.jsxs("div",{className:"document-preview",children:[a.jsx(lB,{}),a.jsx("span",{className:"document-ext",children:h.split(".").pop().toUpperCase()})]})}),a.jsxs("div",{className:"ufu-preview-item-info",children:[a.jsx("p",{className:"ufu-preview-item-name",title:h,children:h.length>20?h.substring(0,18)+"...":h}),a.jsx("p",{className:"ufu-preview-item-size",children:A(f)})]}),a.jsx(Gt,{}),a.jsxs("div",{className:"ufu-controls-overlay",children:[a.jsx("button",{type:"button",onClick:j=>{if(j.stopPropagation(),u==="image"){const R=document.createElement("div");R.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const L=document.createElement("img");L.src=c,L.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                object-fit: contain;
                border-radius: 8px;
                cursor: default;
              `;const D=document.createElement("button");D.innerHTML="×",D.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,R.appendChild(L),R.appendChild(D),document.body.appendChild(R);const z=()=>{document.body.removeChild(R)};R.addEventListener("click",z),D.addEventListener("click",z);const G=M=>{M.key==="Escape"&&(z(),document.removeEventListener("keydown",G))};document.addEventListener("keydown",G),L.addEventListener("click",M=>M.stopPropagation())}else if(u==="video"){const R=document.createElement("div");R.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const L=document.createElement("video");L.src=c,L.controls=!0,L.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                border-radius: 8px;
                cursor: default;
              `;const D=document.createElement("button");D.innerHTML="×",D.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,R.appendChild(L),R.appendChild(D),document.body.appendChild(R);const z=()=>{L.pause(),document.body.removeChild(R)};R.addEventListener("click",z),D.addEventListener("click",z),L.addEventListener("click",G=>G.stopPropagation())}else{const R=document.createElement("a");R.href=c,R.download=h,R.click()}},className:"ufu-control-button ufu-preview-button",title:"Ver archivo","aria-label":"Ver archivo en pantalla completa",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),a.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),e(t.id)},className:"ufu-control-button ufu-delete-button",title:"Eliminar","aria-label":"Eliminar archivo",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),n&&!v&&a.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),n(t.id)},className:"ufu-control-button ufu-set-main-button",title:"Establecer como principal","aria-label":"Establecer como imagen principal",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.622l1.208 5.273a.563.563 0 01-.841.589l-4.743-2.85a.563.563 0 00-.586 0l-4.743 2.85a.563.563 0 01-.841-.589l1.208-5.273a.563.563 0 00-.182-.622l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),r&&o>1&&a.jsxs("div",{className:"ufu-reorder-buttons",children:[a.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),r(i,"up")},disabled:i===0,className:"ufu-control-button",title:"Mover arriba","aria-label":"Mover archivo hacia arriba",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})}),a.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),r(i,"down")},disabled:i===o-1,className:"ufu-control-button",title:"Mover abajo","aria-label":"Mover archivo hacia abajo",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]})]}),v&&a.jsxs("div",{className:"ufu-main-badge",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:a.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c.321-.772 1.415-.772 1.736 0l1.681 4.06c.064.155.24.263.415.284l4.473.65c.803.117 1.125 1.106.547 1.65l-3.238 3.153a.477.477 0 00-.137.53l.764 4.456c.138.806-.702 1.425-1.425 1.053l-3.992-2.1a.498.498 0 00-.465 0l-3.992 2.1c-.723.372-1.563-.247-1.425-1.053l.764-4.456a.477.477 0 00-.137-.53L2.24 9.667c-.578-.544-.256-1.533.547-1.65l4.473-.65a.476.476 0 00.415-.284l1.681-4.06z",clipRule:"evenodd"})}),a.jsx("span",{children:"Principal"})]})]})},sl=({files:t=[],onFilesChange:e,acceptedTypes:n="image/*,video/*,application/pdf",multiple:r=!0,maxSize:i=100*1024*1024,maxFiles:o=null,label:c="Medios del Producto",placeholder:u="Arrastra archivos o haz clic para seleccionar",className:h="",showPreview:f=!0,allowReorder:g=!0,allowSetMain:y=!0})=>{const[v,b]=S.useState([]),[k,w]=S.useState(null),[A,j]=S.useState(!1),[R,L]=S.useState(void 0),D=S.useRef(null),[z,G]=S.useState([]),M=S.useRef(!1);S.useEffect(()=>{if(console.log("🔄 useEffect initialFiles ejecutado:",t),!t||t.length===0){console.log("📭 No hay archivos iniciales, limpiando estado"),b(oe=>(oe.length>0&&(M.current=!0),[]));return}const ce=t.map((oe,H)=>{if(typeof oe=="string"){const J=oe.split(".").pop().toLowerCase(),Ee=["mp4","mov","webm","avi","mkv","m4v"].includes(J);return{id:`existing-${H}-${oe}`,url:oe,type:Ee?"video":"image",name:oe.split("/").pop().split("?")[0],size:0,isMain:H===0,isUploaded:!0}}return oe});console.log("✅ Archivos procesados:",ce),b(oe=>(JSON.stringify(oe.map(J=>J.id))!==JSON.stringify(ce.map(J=>J.id))&&(M.current=!0),ce))},[t.length,t.map(ce=>typeof ce=="string"?ce:(ce==null?void 0:ce.id)||(ce==null?void 0:ce.url)).join("|")]);const I=S.useCallback((ce,oe)=>{console.log("📁 onDrop llamado con archivos:",ce);const H=ce.map(J=>{console.log("📄 Procesando archivo:",J.name,J.type);let Ee="document";J.type.startsWith("image/")?Ee="image":J.type.startsWith("video/")&&(Ee="video");const $e=URL.createObjectURL(J);console.log("🔗 URL de vista previa creada:",$e);const Te={id:`${J.name}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,file:J,url:$e,type:Ee,name:J.name,size:J.size,progress:0,error:null,isMain:!1,isUploading:!1,isUploaded:!1};return console.log("✅ Objeto de archivo creado:",Te),Te});oe.length>0&&(console.error("Archivos rechazados:",oe),G(oe.map(({file:J,errors:Ee})=>({name:(J==null?void 0:J.name)||"Archivo",messages:(Ee||[]).map($e=>$e.message)})))),b(J=>{let Ee;if(r){const $e=[...J,...H];Ee=o?$e.slice(0,o):$e,console.log("🔄 Actualizando archivos (múltiple):",Ee),o&&$e.length>o&&(console.warn(`Límite de ${o} archivos alcanzado. Solo se mantuvieron los primeros ${o}.`),G(Te=>[...Te,{name:"Límite de archivos",messages:[`Límite de ${o} archivos alcanzado. Solo se mantuvieron los primeros ${o}.`]}]))}else Ee=H,console.log("🔄 Actualizando archivos (single):",Ee);return M.current=!0,Ee})},[r,o,e]),T=S.useMemo(()=>{const ce=(n||"").trim();if(!ce||ce==="*/*")return;const oe=ce.split(",").reduce((H,J)=>{const Ee=J.trim();return Ee&&(H[Ee]=[]),H},{});return Object.keys(oe).length?oe:void 0},[n]),{getRootProps:N,getInputProps:V,isDragActive:U,open:O}=QC({onDrop:I,accept:T,maxSize:i,multiple:r,noClick:!1,noKeyboard:!1,preventDropOnDocument:!0}),xe=ce=>{b(oe=>{const H=oe.find(Ee=>Ee.id===ce);H&&H.url&&H.url.startsWith("blob:")&&URL.revokeObjectURL(H.url);const J=oe.filter(Ee=>Ee.id!==ce).map((Ee,$e)=>({...Ee,isMain:$e===0}));return M.current=!0,J})},Pe=ce=>{y&&b(oe=>{const H=oe.find($e=>$e.id===ce);if(!H)return oe;const J=oe.filter($e=>$e.id!==ce),Ee=[H,...J].map(($e,Te)=>({...$e,isMain:Te===0}));return M.current=!0,Ee})},We=(ce,oe)=>{g&&b(H=>{const J=oe==="up"?ce-1:ce+1;if(J<0||J>=H.length)return H;const Ee=[...H];[Ee[ce],Ee[J]]=[Ee[J],Ee[ce]];const $e=Ee.map((Te,Ve)=>({...Te,isMain:Ve===0}));return M.current=!0,$e})};S.useEffect(()=>{M.current&&(M.current=!1,console.log("📤 Notificando cambios al padre:",v),typeof e=="function"?e(v):console.warn("⚠️ onFilesChange no es una función"))},[v,e]);const He=ce=>{ce.stopPropagation(),L("environment"),setTimeout(()=>{O(),setTimeout(()=>L(void 0),0)},30)},de=ce=>{ce.stopPropagation(),L(void 0),setTimeout(()=>{O()},0)};return a.jsxs("div",{className:`universal-file-uploader ${h}`,children:[a.jsxs("div",{...N({className:`ufu-dropzone ${U?"dragging":""} ${A?"drag-over":""}`}),ref:D,onDragEnter:()=>j(!0),onDragLeave:()=>j(!1),onDrop:()=>j(!1),children:[a.jsx("input",{...V({style:{display:"none"},multiple:r,capture:R})}),a.jsxs("div",{className:"ufu-dropzone-content",children:[a.jsx(oB,{}),a.jsxs("div",{className:"ufu-dropzone-desktop-text",children:[a.jsx("p",{className:"ufu-dropzone-text-main",children:c}),a.jsx("p",{className:"ufu-dropzone-text-sub",children:u}),a.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),O()},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Seleccionar Archivos"})]}),a.jsxs("div",{className:"ufu-mobile-buttons",children:[a.jsxs("button",{type:"button",onClick:He,className:"ufu-mobile-button","aria-label":"Abrir cámara",children:[a.jsx(uB,{}),a.jsx("span",{children:"Cámara"})]}),a.jsxs("button",{type:"button",onClick:de,className:"ufu-mobile-button","aria-label":"Abrir galería",children:[a.jsx(dB,{}),a.jsx("span",{children:"Galería"})]})]})]})]}),z.length>0&&a.jsxs("div",{className:"mt-3 p-3 rounded-md bg-red-50 border border-red-200 text-red-700 text-sm",role:"alert",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Algunos archivos fueron rechazados"}),a.jsx("button",{type:"button",onClick:()=>G([]),className:"ml-3 text-red-600 hover:text-red-800","aria-label":"Cerrar",title:"Cerrar",children:"×"})]}),a.jsx("ul",{className:"list-disc ml-5 mt-2",children:z.map((ce,oe)=>a.jsxs("li",{children:[ce.name?a.jsxs("span",{className:"font-medium",children:[ce.name,": "]}):null,Array.isArray(ce.messages)?ce.messages.join(", "):String(ce)]},oe))})]}),v.length>0?a.jsx("div",{className:"ufu-preview-grid",children:a.jsx(Gt,{children:v.map((ce,oe)=>(console.log(`🖼️ Renderizando archivo ${oe+1}:`,ce.name,ce.url),a.jsx(hB,{file:ce,onRemove:xe,onSetMain:y?Pe:null,onMove:g?We:null,index:oe,fileCount:v.length},ce.id)))})}):a.jsx("div",{className:"text-center text-gray-500 text-sm mt-4 p-4 border-2 border-dashed border-gray-200 rounded",children:"📁 No hay archivos subidos aún - Arrastra o selecciona archivos arriba"})]})},an={REQUIRED_FIELDS:["nombre","precio","categoria","descripcion"],MIN_TITLE_LENGTH:10,MAX_TITLE_LENGTH:200,MIN_DESCRIPTION_LENGTH:20,MAX_DESCRIPTION_LENGTH:5e3,MIN_PRICE:.01,MAX_PRICE:999999,MIN_STOCK:0,MAX_STOCK:999999,MAX_IMAGES:20,MAX_VIDEOS:10,MAX_EXTRAS:3,MAX_VARIANTS:50,MIN_VARIANT_NAME_LENGTH:2,MAX_VARIANT_NAME_LENGTH:100},pr={MISSING_TITLE:"El título del producto es obligatorio",MISSING_PRICE:"El precio del producto es obligatorio",MISSING_CATEGORY:"Debe seleccionar una categoría",MISSING_DESCRIPTION:"La descripción del producto es obligatoria",MISSING_MAIN_IMAGE:"Debe subir al menos una imagen principal",TITLE_TOO_SHORT:`El título debe tener al menos ${an.MIN_TITLE_LENGTH} caracteres`,TITLE_TOO_LONG:`El título no puede exceder ${an.MAX_TITLE_LENGTH} caracteres`,DESCRIPTION_TOO_SHORT:`La descripción debe tener al menos ${an.MIN_DESCRIPTION_LENGTH} caracteres`,DESCRIPTION_TOO_LONG:`La descripción no puede exceder ${an.MAX_DESCRIPTION_LENGTH} caracteres`,INVALID_PRICE:`El precio debe estar entre $${an.MIN_PRICE} y $${an.MAX_PRICE}`,INVALID_STOCK:`El stock debe estar entre ${an.MIN_STOCK} y ${an.MAX_STOCK}`,TOO_MANY_IMAGES:`Máximo ${an.MAX_IMAGES} imágenes permitidas`,TOO_MANY_VIDEOS:`Máximo ${an.MAX_VIDEOS} videos permitidos`,TOO_MANY_EXTRAS:`Máximo ${an.MAX_EXTRAS} archivos extras permitidos`,TOO_MANY_VARIANTS:`Máximo ${an.MAX_VARIANTS} variantes permitidas`,VARIANT_NAME_TOO_SHORT:`El nombre de la variante debe tener al menos ${an.MIN_VARIANT_NAME_LENGTH} caracteres`,VARIANT_NAME_TOO_LONG:`El nombre de la variante no puede exceder ${an.MAX_VARIANT_NAME_LENGTH} caracteres`,DUPLICATE_VARIANT_NAMES:"No puede haber variantes con el mismo nombre",VARIANT_MISSING_STOCK:"Todas las variantes deben tener stock definido"},un={ERROR:"error",WARNING:"warning",INFO:"info"},XN=(t,e,n={})=>{const r=[];switch(t){case"nombre":if(!e||!e.trim())r.push({field:"nombre",message:pr.MISSING_TITLE,severity:un.ERROR});else{const i=e.trim();i.length<an.MIN_TITLE_LENGTH&&r.push({field:"nombre",message:pr.TITLE_TOO_SHORT,severity:un.ERROR}),i.length>an.MAX_TITLE_LENGTH&&r.push({field:"nombre",message:pr.TITLE_TOO_LONG,severity:un.ERROR})}break;case"precio":if(!e&&e!==0)r.push({field:"precio",message:pr.MISSING_PRICE,severity:un.ERROR});else{const i=parseFloat(e);(isNaN(i)||i<an.MIN_PRICE||i>an.MAX_PRICE)&&r.push({field:"precio",message:pr.INVALID_PRICE,severity:un.ERROR})}break;case"categoria":(!e||!e.trim())&&r.push({field:"categoria",message:pr.MISSING_CATEGORY,severity:un.ERROR});break;case"descripcion":if(!e||!e.trim())r.push({field:"descripcion",message:pr.MISSING_DESCRIPTION,severity:un.ERROR});else{const i=e.trim();i.length<an.MIN_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:pr.DESCRIPTION_TOO_SHORT,severity:un.ERROR}),i.length>an.MAX_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:pr.DESCRIPTION_TOO_LONG,severity:un.WARNING})}break;case"cantidad":if(e!=null){const i=parseInt(e);(isNaN(i)||i<an.MIN_STOCK||i>an.MAX_STOCK)&&r.push({field:"cantidad",message:pr.INVALID_STOCK,severity:un.ERROR})}break}return r},fB=(t=[])=>{const e=[];t.length>an.MAX_VARIANTS&&e.push({field:"variantes",message:pr.TOO_MANY_VARIANTS,severity:un.ERROR});const n=[];return t.forEach((r,i)=>{const o=r.color||r.name||"";o.trim().length<an.MIN_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:pr.VARIANT_NAME_TOO_SHORT,severity:un.ERROR}),o.trim().length>an.MAX_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:pr.VARIANT_NAME_TOO_LONG,severity:un.ERROR}),n.includes(o.trim().toLowerCase())?e.push({field:`variantes[${i}].color`,message:pr.DUPLICATE_VARIANT_NAMES,severity:un.ERROR}):n.push(o.trim().toLowerCase());const c=parseInt(r.cantidad);(isNaN(c)||c<0)&&e.push({field:`variantes[${i}].cantidad`,message:pr.VARIANT_MISSING_STOCK,severity:un.ERROR})}),e},pB=t=>{const e=[];return t.imagen||t.imagenPrincipal&&t.imagenPrincipal.length>0||e.push({field:"imagen",message:pr.MISSING_MAIN_IMAGE,severity:un.ERROR}),(t.imagenes||[]).length+(t.imagenesExtra||[]).length>an.MAX_IMAGES&&e.push({field:"imagenes",message:pr.TOO_MANY_IMAGES,severity:un.ERROR}),(t.videoUrls||[]).length+(t.videoAcercaArticulo||[]).length>an.MAX_VIDEOS&&e.push({field:"videos",message:pr.TOO_MANY_VIDEOS,severity:un.ERROR}),(t.imagenesExtra||[]).length>an.MAX_EXTRAS&&e.push({field:"imagenesExtra",message:pr.TOO_MANY_EXTRAS,severity:un.ERROR}),e},Fm=t=>{let e=[];return an.REQUIRED_FIELDS.forEach(n=>{e=e.concat(XN(n,t[n],t))}),t.cantidad!==void 0&&(e=e.concat(XN("cantidad",t.cantidad,t))),e=e.concat(pB(t)),t.variantes&&t.variantes.length>0&&(e=e.concat(fB(t.variantes))),e},mB=t=>Fm(t).filter(r=>r.severity===un.ERROR).length===0,YC=t=>{const e=Fm(t),n=e.filter(o=>o.severity===un.ERROR).length,r=e.filter(o=>o.severity===un.WARNING).length,i=n===0;return{isReady:i,errorCount:n,warningCount:r,errors:e,canPublish:i,status:i?"ready":"incomplete"}},gB=t=>{const[e,n]=React.useState({isReady:!1,errorCount:0,warningCount:0,errors:[],canPublish:!1,status:"incomplete"});return React.useEffect(()=>{const r=YC(t);n(r)},[t]),e},yB=({formData:t,onPublish:e,onSaveDraft:n,onPreview:r,isPublishing:i=!1,isSaving:o=!1})=>{const c=YC(t),u=y=>{switch(y){case un.ERROR:return a.jsx(xo,{className:"w-4 h-4 text-red-500"});case un.WARNING:return a.jsx(bl,{className:"w-4 h-4 text-yellow-500"});case un.INFO:return a.jsx(ey,{className:"w-4 h-4 text-blue-500"});default:return a.jsx(ey,{className:"w-4 h-4 text-gray-500"})}},h=y=>{switch(y){case un.ERROR:return"border-red-200 bg-red-50";case un.WARNING:return"border-yellow-200 bg-yellow-50";case un.INFO:return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},f=()=>c.isReady?"text-green-600 bg-green-100":c.errorCount>0?"text-red-600 bg-red-100":"text-yellow-600 bg-yellow-100",g=()=>c.isReady?a.jsx($d,{className:"w-5 h-5"}):c.errorCount>0?a.jsx(xo,{className:"w-5 h-5"}):a.jsx(bl,{className:"w-5 h-5"});return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ${f()}`,children:[g(),a.jsx("span",{children:c.isReady?"Listo para publicar":c.errorCount>0?"Requiere correcciones":"En progreso"})]}),(c.errorCount>0||c.warningCount>0)&&a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[c.errorCount>0&&a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(xo,{className:"w-4 h-4 text-red-500"}),a.jsxs("span",{children:[c.errorCount," error",c.errorCount!==1?"es":""]})]}),c.warningCount>0&&a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(bl,{className:"w-4 h-4 text-yellow-500"}),a.jsxs("span",{children:[c.warningCount," advertencia",c.warningCount!==1?"s":""]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Completado: ",Math.round((1-c.errorCount/Math.max(c.errors.length,1))*100),"%"]}),a.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx(ne.div,{className:`h-full ${c.isReady?"bg-green-500":"bg-blue-500"}`,initial:{width:0},animate:{width:`${Math.round((1-c.errorCount/Math.max(c.errors.length,1))*100)}%`},transition:{duration:.5}})})]})]})}),a.jsx(Gt,{children:c.errors.length>0&&a.jsx(ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-b border-gray-200",children:a.jsxs("div",{className:"p-4 max-h-60 overflow-y-auto",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Elementos que requieren atención:"}),a.jsx("div",{className:"space-y-2",children:c.errors.map((y,v)=>a.jsxs(ne.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:v*.1},className:`flex items-start space-x-3 p-3 rounded-lg border ${h(y.severity)}`,children:[u(y.severity),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-900",children:y.message}),y.field&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Campo: ",y.field]})]})]},`${y.field}-${v}`))})]})})}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[a.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[a.jsx(xv,{className:"w-4 h-4"}),a.jsx("span",{children:"Vista Previa"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:n,disabled:o,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ez,{className:"w-4 h-4"}),a.jsx("span",{children:o?"Guardando...":"Guardar Borrador"})]}),a.jsxs("button",{onClick:e,disabled:!c.canPublish||i,className:`flex items-center space-x-2 px-6 py-2 rounded-lg font-medium transition-all ${c.canPublish?"text-white bg-green-600 hover:bg-green-700 shadow-sm hover:shadow-md":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,children:[a.jsx($1,{className:"w-4 h-4"}),a.jsx("span",{children:i?"Publicando...":c.canPublish?"Publicar Producto":"Completar Información"})]})]})]}),!c.isReady&&a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(ey,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-blue-700",children:[a.jsx("p",{className:"font-medium mb-1",children:"Para publicar tu producto:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[a.jsx("li",{children:"Completa todos los campos obligatorios"}),a.jsx("li",{children:"Sube al menos una imagen principal"}),a.jsx("li",{children:"Verifica que el precio sea válido"}),a.jsx("li",{children:"Selecciona una categoría apropiada"}),a.jsx("li",{children:"Agrega una descripción detallada"})]})]})]})})]})]})},XC=({variants:t=[],selectedIndex:e=0,onVariantChange:n,productMainImage:r=null,showPrices:i=!0,showStock:o=!0,className:c=""})=>{const[u,h]=S.useState(null);S.useEffect(()=>{(e>=t.length||e<0)&&(n==null||n(0))},[t.length,e,n]);const f=b=>{var k,w;return b.imagen&&b.imagen.trim()?b.imagen:b.imagenPrincipal&&((k=b.imagenPrincipal[0])!=null&&k.url)?b.imagenPrincipal[0].url:b.imagenes&&b.imagenes[0]?b.imagenes[0]:b.media&&((w=b.media[0])!=null&&w.url)?b.media[0].url:r},g=b=>{const k=parseInt(b.cantidad||b.stock||0);return k<=0?{status:"out_of_stock",label:"Agotado",color:"text-red-600",bgColor:"bg-red-50",icon:bv}:k<=5?{status:"low_stock",label:`Quedan ${k}`,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:bl}:k<=20?{status:"medium_stock",label:`${k} disponibles`,color:"text-blue-600",bgColor:"bg-blue-50",icon:xd}:{status:"in_stock",label:"En stock",color:"text-green-600",bgColor:"bg-green-50",icon:Ls}},y=(b,k=0)=>{const w=parseFloat(b.precio||b.price||0),A=parseFloat(k);if(w>0){const j=w-A;return{price:w,difference:j,hasCustomPrice:!0}}return{price:A,difference:0,hasCustomPrice:!1}},v=b=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:0,maximumFractionDigits:2}).format(b);return t.length?a.jsxs("div",{className:`space-y-4 ${c}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Variantes disponibles"}),a.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," opcion",t.length!==1?"es":""]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-2 2xl:grid-cols-3 gap-3",children:t.map((b,k)=>{const w=k===e,A=k===u,j=g(b),R=y(b),L=f(b),D=j.status==="out_of_stock";return a.jsxs(ne.button,{onClick:()=>!D&&(n==null?void 0:n(k)),onMouseEnter:()=>h(k),onMouseLeave:()=>h(null),disabled:D,className:`
                relative p-3 rounded-xl border-2 transition-all duration-200 text-left
                ${w?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":D?"border-gray-200 bg-gray-50 cursor-not-allowed opacity-60":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md"}
                ${A&&!w&&!D?"transform scale-[1.02]":""}
              `,whileTap:D?{}:{scale:.98},children:[w&&a.jsx(ne.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx(Ls,{className:"w-4 h-4 text-white"})}),D&&a.jsx("div",{className:"absolute inset-0 bg-gray-900/20 rounded-xl flex items-center justify-center",children:a.jsx("div",{className:"bg-white px-3 py-1 rounded-full text-sm font-medium text-gray-600",children:"Agotado"})}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:L?a.jsx("img",{src:L,alt:b.color||b.name||`Variante ${k+1}`,className:"w-full h-full object-contain",loading:"lazy"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(xd,{className:"w-6 h-6 text-gray-400"})})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 truncate",children:b.color||b.name||`Variante ${k+1}`}),b.descripcion&&a.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:b.descripcion}),i&&R.price>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-lg font-bold text-gray-900",children:v(R.price)}),R.hasCustomPrice&&R.difference!==0&&a.jsxs("span",{className:`ml-2 text-sm ${R.difference>0?"text-red-600":"text-green-600"}`,children:["(",R.difference>0?"+":"",v(R.difference),")"]})]}),o&&a.jsxs("div",{className:`inline-flex items-center space-x-1 mt-2 px-2 py-1 rounded-full text-xs font-medium ${j.bgColor} ${j.color}`,children:[a.jsx(j.icon,{className:"w-3 h-3"}),a.jsx("span",{children:j.label})]})]})]}),a.jsx(Gt,{children:A&&!w&&!D&&a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-blue-500/5 rounded-xl pointer-events-none"})})]},b.id||k)})}),a.jsx(Gt,{children:t[e]&&a.jsx(ne.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-white border border-blue-200",children:f(t[e])?a.jsx("img",{src:f(t[e]),alt:"Variante seleccionada",className:"w-full h-full object-contain"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(xd,{className:"w-5 h-5 text-blue-400"})})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900",children:t[e].color||t[e].name||`Variante ${e+1}`}),a.jsx("p",{className:"text-sm text-blue-700",children:"Seleccionado actualmente"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[g(t[e]).status==="in_stock"&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(DC,{className:"w-4 h-4"}),a.jsx("span",{children:"Envío disponible"})]}),g(t[e]).status==="low_stock"&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Lm,{className:"w-4 h-4"}),a.jsx("span",{children:"¡Últimas unidades!"})]})]})]})})}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-600",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Ls,{className:"w-2 h-2 text-green-600"})}),a.jsx("span",{children:"En stock"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full flex items-center justify-center",children:a.jsx(bl,{className:"w-2 h-2 text-yellow-600"})}),a.jsx("span",{children:"Pocas unidades"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(bv,{className:"w-2 h-2 text-red-600"})}),a.jsx("span",{children:"Agotado"})]})]})]}):null},Ti={DRAFT:"draft",PENDING:"pending",ACTIVE:"active",INACTIVE:"inactive",REJECTED:"rejected",ARCHIVED:"archived"},JN={MIN_DESCRIPTION_QUALITY_SCORE:.7,MAX_DUPLICATE_CONTENT_THRESHOLD:.8,MIN_IMAGE_QUALITY_SCORE:.6,REQUIRE_MAIN_IMAGE:!0,PRICE_ANOMALY_THRESHOLD:.1,MIN_SELLER_RATING:3,REQUIRE_CATEGORY_MATCH:!0},vB=async t=>{const e={passed:!1,score:0,issues:[],warnings:[],recommendations:[]};try{const r=Fm(t).filter(y=>y.severity==="error");if(r.length>0)return e.issues.push({type:"validation",message:"El producto no cumple con los requisitos básicos de validación",details:r}),e;let i=0;const o=100,c=xB(t);i+=c*.3,c<JN.MIN_DESCRIPTION_QUALITY_SCORE*100&&e.warnings.push({type:"content_quality",message:"La descripción del producto podría ser más detallada",suggestion:"Agrega más información sobre características, beneficios y especificaciones"});const u=bB(t);i+=u*.25,u<JN.MIN_IMAGE_QUALITY_SCORE*100&&e.warnings.push({type:"image_quality",message:"Las imágenes podrían ser de mejor calidad",suggestion:"Usa imágenes de alta resolución con buena iluminación"});const h=await wB(t);i+=h*.2;const f=_B(t);i+=f*.15;const g=EB(t);i+=g*.1,e.score=Math.round(i),e.passed=i>=70,i<85&&e.recommendations.push({type:"improvement",message:"Considera mejorar la calidad del producto para mejor visibilidad",actions:["Agrega más imágenes de diferentes ángulos","Mejora la descripción con más detalles","Verifica que el precio sea competitivo","Asegúrate de que la categoría sea la correcta"]})}catch(n){console.error("Error in automated verification:",n),e.issues.push({type:"system_error",message:"Error en la verificación automática",details:n.message})}return e},xB=t=>{let e=0;const n=t.nombre||"";n.length>=20&&(e+=10),n.length>=50&&(e+=5),/[A-Z]/.test(n)&&/[a-z]/.test(n)&&(e+=5);const r=t.descripcion||"";return r.length>=100&&(e+=15),r.length>=300&&(e+=10),r.length>=500&&(e+=10),(r.includes(`
`)||r.includes("•"))&&(e+=5),t.acerca&&t.acerca.length>0&&(e+=10),t.etiquetas&&t.etiquetas.length>0&&(e+=5),(t.peso||t.dimensiones)&&(e+=5),t.variantes&&t.variantes.length>1&&(e+=10),t.variantes&&t.variantes.some(i=>i.descripcion)&&(e+=10),Math.min(e,100)},bB=t=>{let e=0;(t.imagen||t.imagenPrincipal&&t.imagenPrincipal.length>0)&&(e+=30);const n=(t.imagenes||[]).length;return n>=1&&(e+=10),n>=3&&(e+=15),n>=5&&(e+=15),t.imagenesExtra&&t.imagenesExtra.length>0&&(e+=15),(t.videoUrl||t.videoUrls&&t.videoUrls.length>0||t.videoAcercaArticulo&&t.videoAcercaArticulo.length>0)&&(e+=15),Math.min(e,100)},wB=async t=>{let e=50;const n=parseFloat(t.precio);if(isNaN(n)||n<=0)return 0;if(n>=1&&n<=1e4&&(e+=25),t.oferta&&t.precioOferta){const r=(n-parseFloat(t.precioOferta))/n*100;r>=5&&r<=50&&(e+=25)}return Math.min(e,100)},_B=t=>{let e=0;return t.categoria&&t.categoria.trim()&&(e+=50),t.categoria&&(e+=50),Math.min(e,100)},EB=t=>{let e=0;const n=["nombre","descripcion","precio","categoria","cantidad","imagen","empresa","estado"];return e=n.filter(i=>{const o=t[i];return o!=null&&o!==""}).length/n.length*100,Math.round(e)},ZN=async(t,e,n="",r=null)=>{try{const i={estado:e,fechaActualizacion:Ic(),statusHistory:{status:e,timestamp:Ic(),reason:n,userId:r}};switch(e){case Ti.PENDING:i.fechaEnvioRevision=Ic();break;case Ti.ACTIVE:i.fechaPublicacion=Ic(),i.activo=!0;break;case Ti.INACTIVE:case Ti.REJECTED:case Ti.ARCHIVED:i.activo=!1;break}return await An(at(De,"productos",t),i),{success:!0,status:e}}catch(i){return console.error("Error transitioning product status:",i),{success:!1,error:i.message}}},NB=async(t,e,n)=>{try{if(!mB(e))return{success:!1,error:"El producto no cumple con todos los requisitos para publicación"};const r=await vB(e);return r.passed?(await ZN(t,Ti.ACTIVE,"Aprobado automáticamente tras verificación exitosa",n),{success:!0,status:Ti.ACTIVE,message:"¡Producto publicado exitosamente!",verification:r}):(await ZN(t,Ti.PENDING,"Enviado para revisión manual",n),{success:!0,status:Ti.PENDING,message:"Producto enviado para revisión. Te notificaremos cuando esté aprobado.",verification:r})}catch(r){return console.error("Error submitting product for publication:",r),{success:!1,error:"Error al enviar el producto para publicación"}}},Zc={INTERSECTION_THRESHOLD:.1,INTERSECTION_ROOT_MARGIN:"50px",WEBP_SUPPORT:null,AVIF_SUPPORT:null},kB=()=>new Promise(t=>{const e={webp:!1,avif:!1};let n=2;const r=()=>{n--,n===0&&(Zc.WEBP_SUPPORT=e.webp,Zc.AVIF_SUPPORT=e.avif,t(e))},i=new Image;i.onload=i.onerror=()=>{e.webp=i.height===2,r()},i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";const o=new Image;o.onload=o.onerror=()=>{e.avif=o.height===2,r()},o.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A="});class SB{constructor(){this.observer=null,this.loadedImages=new Set,this.init()}init(){"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(this.handleIntersection.bind(this),{threshold:Zc.INTERSECTION_THRESHOLD,rootMargin:Zc.INTERSECTION_ROOT_MARGIN}))}handleIntersection(e){e.forEach(n=>{n.isIntersecting&&(this.loadImage(n.target),this.observer.unobserve(n.target))})}loadImage(e){if(this.loadedImages.has(e))return;const n=e.dataset.src,r=e.dataset.srcset;n&&(e.src=n),r&&(e.srcset=r),e.classList.remove("lazy-loading"),e.classList.add("lazy-loaded"),this.loadedImages.add(e),e.dispatchEvent(new CustomEvent("lazyloaded",{detail:{src:n,srcSet:r}}))}observe(e){this.observer&&e?(e.classList.add("lazy-loading"),this.observer.observe(e)):this.loadImage(e)}unobserve(e){this.observer&&e&&this.observer.unobserve(e)}disconnect(){this.observer&&this.observer.disconnect()}}new SB;const AB=(t,e="prefetch")=>{Array.isArray(t)&&t.forEach(n=>{const r=document.createElement("link");r.rel=e,r.href=n,e==="preload"&&(r.as="image"),document.head.appendChild(r)})},TB=async()=>{await kB(),AB(["https://firebasestorage.googleapis.com","https://fonts.googleapis.com","https://fonts.gstatic.com"],"preconnect"),console.log("Performance optimizations initialized",{webpSupport:Zc.WEBP_SUPPORT,avifSupport:Zc.AVIF_SUPPORT,cdnEnabled:!1})},JC=({product:t,onClose:e,onSave:n,sellerId:r})=>{var lr,yr;const{usuario:i,usuarioInfo:o}=ii(),{validation:c,isValid:u,getFieldError:h}=gB(),[f,g]=S.useState({nombre:"",empresa:"",precio:"",cantidad:0,descripcion:"",categoria:"",nuevaCategoria:"",imagen:"",imagenes:[],imagenesExtra:[],videoUrl:"",videoUrls:[],videoAcercaArticulo:[],oferta:!1,precioOferta:"",estado:"Nuevo",acerca:[""],variantes:[{color:"",imagen:"",imagenes:[],cantidad:0,descripcion:"",precio:""}],etiquetas:[""],activo:!0,fechaPublicacion:new Date().toISOString().split("T")[0],peso:"",dimensiones:"",imagenPrincipal:[],galeriaImagenes:[],tresArchivosExtras:[],productStatus:Ti.DRAFT,validationScore:0,lastValidated:null}),[y,v]=S.useState([]),[b,k]=S.useState([]),[w,A]=S.useState(!1),[j,R]=S.useState((t==null?void 0:t.id)||null),[L,D]=S.useState(!1),[z,G]=S.useState(null),[M,I]=S.useState(!1),[T,N]=S.useState({imagen:"",imagenes:[],productVideos:[],acercaVideos:[],variantes:{},extras:[]}),[V,U]=S.useState([]),[O,xe]=S.useState(!1),[Pe,We]=S.useState(!0),[He,de]=S.useState([]),[ce,oe]=S.useState(!1),[H,J]=S.useState(0);S.useEffect(()=>{var W;TB(),re(),qe(),t&&g({...t,precio:((W=t.precio)==null?void 0:W.toString())||"",fechaPublicacion:t.fechaPublicacion||new Date().toISOString().split("T")[0],acerca:t.acerca||[""],etiquetas:t.etiquetas||[""],variantes:t.variantes||[{color:"",imagen:"",imagenes:[],cantidad:0}],videoUrl:t.videoUrl||"",videoUrls:t.videoUrls||[],videoAcercaArticulo:t.videoAcercaArticulo||[],imagenPrincipal:t.imagenPrincipal||(t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:t.galeriaImagenes||t.imagenes||[],tresArchivosExtras:t.tresArchivosExtras||t.imagenesExtra||[],productStatus:t.productStatus||t.estado||Ti.DRAFT})},[t]),S.useEffect(()=>{t!=null&&t.id&&j!==t.id&&R(t.id)},[t==null?void 0:t.id]),S.useEffect(()=>{const W=q=>{var X;if((X=V==null?void 0:V.some)==null?void 0:X.call(V,ae=>(ae==null?void 0:ae.status)==="uploading"))return q.preventDefault(),q.returnValue="",""};return window.addEventListener("beforeunload",W),()=>window.removeEventListener("beforeunload",W)},[V]),S.useEffect(()=>{const W=j||(t==null?void 0:t.id);if(!W)return;const q=gr(at(De,"productos",W),le=>{if(!le.exists())return;const X=le.data();g(ae=>{var Me,Oe;return{...ae,id:X.id||W,nombre:X.nombre??ae.nombre,descripcion:X.descripcion??ae.descripcion,empresa:X.empresa??ae.empresa,categoria:X.categoria??ae.categoria,precio:((Oe=(Me=X.precio??ae.precio)==null?void 0:Me.toString)==null?void 0:Oe.call(Me))||String(X.precio??ae.precio??""),cantidad:X.cantidad??ae.cantidad,etiquetas:Array.isArray(X.etiquetas)?X.etiquetas:ae.etiquetas||[],acerca:Array.isArray(X.acerca)?X.acerca:ae.acerca||[],imagen:X.imagen??ae.imagen,imagenes:Array.isArray(X.imagenes)?X.imagenes:ae.imagenes||[],videoUrl:X.videoUrl??ae.videoUrl,videoUrls:Array.isArray(X.videoUrls)?X.videoUrls:ae.videoUrls||[],videoAcercaArticulo:Array.isArray(X.videoAcercaArticulo)?X.videoAcercaArticulo:ae.videoAcercaArticulo||[],variantes:Array.isArray(X.variantes)?X.variantes:ae.variantes||[],activo:X.activo??ae.activo}}),(async()=>{var jt,en,Wt,Vn;const ae=it=>{try{if(!it)return null;const tn=String(it);if(tn.includes("firebasestorage.googleapis.com")){const Kt=tn.match(/\/o\/([^?]+)/);if(Kt&&Kt[1]){const cr=decodeURIComponent(Kt[1]);return ds(hs,cr)}}return ds(hs,tn)}catch{return null}},Me=it=>{try{return it?typeof it=="string"?it:typeof it=="object"&&it!==null&&typeof it.url=="string"?it.url:String(it||"").trim():""}catch{return""}},Oe=async it=>{try{if(!it)return it;const tn=Me(it),Kt=String(tn).trim();if(Kt.startsWith("blob:"))return Kt;if(/^https?:\/\//i.test(Kt)){if(Kt.includes("firebasestorage.googleapis.com")){const Lr=ae(Kt);if(Lr)try{return await ul(Lr)}catch{}return Kt}return Kt}const cr=ds(hs,Kt);return await ul(cr)}catch{return it}},ye=async it=>Array.isArray(it)?Promise.all(it.map(Oe)):[],[me,Ae,Ze,bt,ot,je]=await Promise.all([Oe(X.imagen??((en=(jt=X.imagenPrincipal)==null?void 0:jt[0])==null?void 0:en.url)),ye(X.imagenes??X.galeriaImagenes),Oe(X.videoUrl??((Vn=(Wt=X.videoAcercaArticulo)==null?void 0:Wt[0])==null?void 0:Vn.url)??X.video),ye(X.videoUrls),ye(X.imagenesExtra??X.tresArchivosExtras),ye(X.videoAcercaArticulo)]),ze=it=>{var na,si;const tn=(it==null?void 0:it.imagen)??((si=(na=it==null?void 0:it.imagenPrincipal)==null?void 0:na[0])==null?void 0:si.url)??"",Kt=Array.isArray(it==null?void 0:it.imagenes)?it.imagenes:Array.isArray(it==null?void 0:it.galeriaImagenes)?it.galeriaImagenes:[],cr=Array.isArray(it==null?void 0:it.videoUrls)?it.videoUrls:[],Lr=ys=>Me(ys);return{...it,imagen:Lr(tn),imagenes:Kt.map(Lr).filter(Boolean),videoUrls:cr.map(Lr).filter(Boolean)}},Lt=Array.isArray(X.variantes)?X.variantes.map(ze):prev.variantes||[];g(it=>({...it,imagen:me||it.imagen,imagenes:Ae!=null&&Ae.length?Ae:it.imagenes,videoUrl:Ze||it.videoUrl,videoUrls:bt!=null&&bt.length?bt:it.videoUrls,imagenesExtra:ot!=null&&ot.length?ot:it.imagenesExtra,videoAcercaArticulo:je!=null&&je.length?je:it.videoAcercaArticulo,variantes:Lt}))})()});return()=>q()},[j,t==null?void 0:t.id]);const Ee=S.useRef(!1);S.useEffect(()=>{if(!Ee.current){try{const W="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",q=Array.isArray(f.videoAcercaArticulo)?f.videoAcercaArticulo:[];if(q.some(X=>String(X).trim()===W)){const X=q.filter(Me=>String(Me).trim()!==W);g(Me=>({...Me,videoAcercaArticulo:X}));const ae=j||(t==null?void 0:t.id);ae&&An(at(De,"productos",ae),{videoAcercaArticulo:X,fechaActualizacion:new Date}).catch(()=>{})}}catch{}Ee.current=!0}},[f.videoAcercaArticulo,j,t==null?void 0:t.id]),S.useEffect(()=>{const q=setTimeout(async()=>{const le=await Fm(f);de(le.errors||[]),g(X=>({...X,validationScore:le.score||0,lastValidated:new Date().toISOString()}))},500);return()=>clearTimeout(q)},[f.nombre,f.precio,f.categoria,f.descripcion,f.imagenPrincipal,f.galeriaImagenes]);const $e=j||(t==null?void 0:t.id)||null,Te=S.useMemo(()=>{var q,le;const W={};return W.id=$e||"draft",W.name=f.nombre||"",W.price=parseFloat(f.precio)||0,W.stock=Number(f.cantidad)||0,W.mainImage=(T.imagen||((le=(q=f.imagenPrincipal)==null?void 0:q[0])==null?void 0:le.url)||f.imagen||"").trim(),W.gallery=[...Array.isArray(T.imagenes)?T.imagenes:[],...Array.isArray(f.galeriaImagenes)?f.galeriaImagenes.map(X=>X.url||X):[],...Array.isArray(f.imagenes)?f.imagenes:[]],W.productVideos=[...Array.isArray(T.productVideos)?T.productVideos:[],...Array.isArray(f.videoUrls)?f.videoUrls:[]],W.videoAcercaArticulo=[...Array.isArray(T.acercaVideos)?T.acercaVideos:[],...Array.isArray(f.videoAcercaArticulo)?f.videoAcercaArticulo:f.videoUrl?[f.videoUrl]:[]],W.extraMedia=[...Array.isArray(T.extras)?T.extras:[],...Array.isArray(f.tresArchivosExtras)?f.tresArchivosExtras.map(X=>X.url||X):[],...Array.isArray(f.imagenesExtra)?f.imagenesExtra:[]],W.variants=(Array.isArray(f.variantes)?f.variantes:[]).map((X,ae)=>{var Me,Oe,ye,me,Ae,Ze,bt,ot;return{id:X.id||`var_${ae}`,name:X.name||X.color||`Variante ${ae+1}`,price:X.precio??X.price??null,stock:X.cantidad??X.stock??null,mainImage:(((Oe=(Me=T.variantes)==null?void 0:Me[ae])==null?void 0:Oe.imagen)||((me=(ye=X.imagenPrincipal)==null?void 0:ye[0])==null?void 0:me.url)||X.imagen||"").trim(),gallery:[...((Ze=(Ae=T.variantes)==null?void 0:Ae[ae])==null?void 0:Ze.imagenes)||[],...Array.isArray(X.galeriaImagenes)?X.galeriaImagenes.map(je=>je.url||je):[],...Array.isArray(X.imagenes)?X.imagenes:[]],videos:[...((ot=(bt=T.variantes)==null?void 0:bt[ae])==null?void 0:ot.videos)||[],...Array.isArray(X.videoUrls)?X.videoUrls:[]]}}),W},[$e,f,T]),Ve=async()=>{if(t!=null&&t.id)return t.id;if(f!=null&&f.id)return f.id;if(j)return j;try{const W=`prod_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,q={id:W,nombre:(f==null?void 0:f.nombre)||"",descripcion:(f==null?void 0:f.descripcion)||"",empresa:(f==null?void 0:f.empresa)||"",categoria:(f==null?void 0:f.categoria)||"",precio:parseFloat(f==null?void 0:f.precio)||0,cantidad:Number(f==null?void 0:f.cantidad)||0,etiquetas:Array.isArray(f==null?void 0:f.etiquetas)?f.etiquetas:[],acerca:Array.isArray(f==null?void 0:f.acerca)?f.acerca:[],variantes:Array.isArray(f==null?void 0:f.variantes)?f.variantes:[],imagen:"",imagenPrincipal:[],imagenes:[],videoUrls:[],videoAcercaArticulo:[],imagenesExtra:[],activo:!1,ownerUid:(i==null?void 0:i.uid)||null,ownerName:(o==null?void 0:o.displayName)||(i==null?void 0:i.displayName)||"",sellerId:r||(i==null?void 0:i.uid)||null,sellerName:r&&((o==null?void 0:o.storeName)||(o==null?void 0:o.displayName))||"",fechaCreacion:new Date,fechaActualizacion:new Date};return await Xn(at(De,"productos",W),q),R(W),g(le=>({...le,id:W})),W}catch{return null}},Ge=async(W,q)=>{if(!["nuevaCategoria","_tempVideoUrl"].includes(W))try{const le=(t==null?void 0:t.id)||(f==null?void 0:f.id)||j,X=!!le;let ae=le;if(!ae&&(X||(ae=await Ve(),!ae)))return;await An(at(De,"productos",ae),{[W]:q,fechaActualizacion:new Date})}catch{}},rt=W=>String(W||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").slice(0,80),Ke=W=>{const q=((W==null?void 0:W.name)||"file").replace(/[^a-zA-Z0-9_.-]/g,"_");return`${Date.now()}-${Math.random().toString(36).slice(2,8)}-${q}`},ct=({productId:W,section:q,file:le,variantId:X=null})=>{const ae=Ke(le);if(X){if(q==="main")return`products/${W}/variants/${X}/main/${ae}`;if(q==="gallery")return`products/${W}/variants/${X}/gallery/${ae}`}else{if(q==="main")return`products/${W}/main/${ae}`;if(q==="gallery")return`products/${W}/gallery/${ae}`;if(q==="videos")return`products/${W}/videos/${ae}`;if(q==="extras")return`products/${W}/extras/${ae}`}return`products/${W}/misc/${ae}`},kt=W=>{const q=(f.variantes||[])[W]||{};if(q.id)return q.id;const le=`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`;return g(X=>{const ae=[...X.variantes||[]];ae[W]={...ae[W]||{},id:le};const Me={...X,variantes:ae},Oe=j||(t==null?void 0:t.id);return Oe&&An(at(De,"productos",Oe),{variantes:ae,fechaActualizacion:new Date}).catch(()=>{}),Me}),le},mt=async()=>{const W={...f};W.acerca=(W.acerca||[]).filter(q=>(q||"").trim()),W.etiquetas=(W.etiquetas||[]).filter(q=>(q||"").trim()),W.activo=!1,W.productStatus=Ti.DRAFT,W.fechaActualizacion=new Date,delete W.nuevaCategoria,delete W._tempVideoUrl;try{let q=(t==null?void 0:t.id)||j;q?await An(at(De,"productos",q),W):(q=`prod_${Date.now()}`,W.id=q,W.fechaCreacion=new Date,W.sellerId=r||(i==null?void 0:i.uid)||null,W.sellerName=r&&((o==null?void 0:o.storeName)||(o==null?void 0:o.displayName))||"",await Xn(at(De,"productos",q),W),R(q)),n&&n(W),e&&e()}catch(q){console.error("Error al guardar borrador:",q);const le=q.code==="permission-denied"?"No tienes permisos para guardar este producto":q.code==="network-request-failed"?"Error de conexión. Verifica tu internet":`Error al guardar: ${q.message}`;alert(le)}},ht=async()=>{xe(!0);try{const W={...f},q=await NB(j||(t==null?void 0:t.id),W,i==null?void 0:i.uid);q.success?(g(le=>({...le,productStatus:q.status})),n&&n({...W,productStatus:q.status}),q.status===Ti.ACTIVE&&e&&e()):alert(q.message||"Error al publicar el producto")}catch(W){console.error("Error publishing product:",W),alert("Error al publicar el producto. Intenta nuevamente.")}finally{xe(!1)}},Dt=()=>{console.log("Preview product:",Te)},re=async()=>{try{const q=(await qr($t(De,"categorias"))).docs.map(le=>({id:le.id,...le.data()}));v(q)}catch(W){console.error("Error loading categories:",W)}},qe=async()=>{try{const q=(await qr($t(De,"productos"))).docs.map(X=>{var ae;return(ae=X.data())==null?void 0:ae.empresa}).filter(Boolean),le=Array.from(new Set(q)).sort((X,ae)=>X.localeCompare(ae));k(le)}catch{}},Se=(W,q)=>{g(le=>({...le,[W]:q})),Ge(W,q)},ge=(W,q,le)=>{g(X=>{const ae=X[W].map((Oe,ye)=>ye===q?le:Oe),Me={...X,[W]:ae};return Ge(W,ae),Me})},Je=W=>{g(q=>{const le=[...q[W],W==="variantes"?{color:"",imagen:"",imagenes:[],cantidad:0,descripcion:"",precio:""}:""],X={...q,[W]:le};return Ge(W,le),X})},te=(W,q)=>{g(le=>{const X=le[W].filter((Me,Oe)=>Oe!==q),ae={...le,[W]:X};return Ge(W,X),ae})},xt=(W,q,le)=>{g(ae=>({...ae,variantes:ae.variantes.map((Me,Oe)=>Oe===W?{...Me,[q]:le}:Me)}));const X=j||(t==null?void 0:t.id);if(X)try{g(ae=>{const Me=ae.variantes.map((Oe,ye)=>ye===W?{...Oe,[q]:le}:Oe);return An(at(De,"productos",X),{variantes:Me,fechaActualizacion:new Date}).catch(()=>{}),{...ae,variantes:Me}})}catch{}},be=W=>{J(W)},Qe=async(W,q,le)=>new Promise((X,ae)=>{try{const Me=ds(hs,q),Oe=cE(Me,W);U(ye=>ye.map(me=>me.id===le?{...me,task:Oe}:me)),Oe.on("state_changed",ye=>{const me=Math.round(ye.bytesTransferred/ye.totalBytes*100);G(me),U(Ae=>Ae.map(Ze=>Ze.id===le?{...Ze,progress:me}:Ze)),setTimeout(()=>{U(Ae=>{const Ze=Ae.find(bt=>bt.id===le);if(Ze&&Ze.status==="uploading"&&(!Ze.progress||Ze.progress===0)&&Ze.task){try{Ze.task.cancel()}catch{}return Ae.map(bt=>bt.id===le?{...bt,status:"error"}:bt)}return Ae})},6e3)},ye=>{U(me=>me.map(Ae=>Ae.id===le?{...Ae,status:"error"}:Ae)),ae(ye)},async()=>{const ye=await ul(Oe.snapshot.ref);U(me=>me.map(Ae=>Ae.id===le?{...Ae,status:"done"}:Ae)),X(ye)})}catch(Me){U(Oe=>Oe.map(ye=>ye.id===le?{...ye,status:"error"}:ye)),ae(Me)}}),_e=async(W,q,le)=>new Promise((X,ae)=>{try{const Me=ds(hs,q),Oe=cE(Me,W);U(ye=>ye.map(me=>me.id===le?{...me,task:Oe}:me)),Oe.on("state_changed",ye=>{const me=Math.round(ye.bytesTransferred/ye.totalBytes*100);G(me),U(Ae=>Ae.map(Ze=>Ze.id===le?{...Ze,progress:me}:Ze))},ye=>{U(me=>me.map(Ae=>Ae.id===le?{...Ae,status:"error"}:Ae)),ae(ye)},async()=>{const ye=await ul(Oe.snapshot.ref);U(me=>me.map(Ae=>Ae.id===le?{...Ae,status:"done"}:Ae)),X(ye)})}catch(Me){U(Oe=>Oe.map(ye=>ye.id===le?{...ye,status:"error"}:ye)),ae(Me)}}),Y=async(W,q,le,X,ae=2)=>{let Me;for(let Oe=0;Oe<=ae;Oe++)try{return await W(q,le,X)}catch(ye){Me=ye,await new Promise(me=>setTimeout(me,500*(Oe+1)))}throw Me},pe=async W=>{if(W)try{const le=(X=>{try{const ae=String(X);if(ae.startsWith("gs://"))return ds(hs,ae);if(ae.includes("firebasestorage.googleapis.com")){const Me=ae.match(/\/o\/([^?]+)/);if(Me&&Me[1]){const Oe=decodeURIComponent(Me[1]);return ds(hs,Oe)}}return ds(hs,ae)}catch{return null}})(W);le&&await PO(le)}catch{}},Re=W=>{try{const q=String(W).trim().toLowerCase();if(q.includes("youtube.com")||q.includes("youtu.be")||q.includes("vimeo.com"))return"video";const X=q.split("?")[0].split("#")[0].split(".").pop()||"";return["jpg","jpeg","png","gif","webp","bmp","svg"].includes(X)?"image":["mp4","mov","avi","mkv","webm","m4v"].includes(X)?"video":"document"}catch{return"document"}},se=async()=>{f.imagen&&await pe(f.imagen),Se("imagen",""),Se("imagenPrincipal",[])},Ue=async W=>{console.log("🎯 handleMainImageUFU llamado con:",W);try{D(!0);const q=Array.isArray(W)?W:[];if(console.log("📋 Array procesado:",q),q.length===0){console.log("📭 No hay archivos, limpiando imagen principal"),N(ae=>({...ae,imagen:""})),await se();return}const le=q[0];console.log("📄 Primer archivo:",le);const X=(le==null?void 0:le.url)||"";if(console.log("🔗 URL del primer archivo:",X),le!=null&&le.file){console.log("📦 Archivo detectado, procesando subida..."),console.log("👁️ Mostrando preview local:",X),N(me=>({...me,imagen:X}));let ae=j||(t==null?void 0:t.id);if(console.log("🆔 Target ID:",ae),ae||(console.log("🆕 No hay ID, creando uno..."),ae=await Ve()),!ae){console.warn("⚠️ No se pudo obtener ID, abortando subida");return}console.log("✅ ID confirmado:",ae);const Me=`${Date.now()}_${le.file.name}_${Math.random().toString(36).slice(2,7)}`,Oe=ct({productId:ae,section:"main",file:le.file});console.log("⬆️ Iniciando subida a Firebase Storage...");const ye=await Y(Qe,le.file,Oe,Me);console.log("✅ Imagen subida exitosamente! URL:",ye),g(me=>{const Ae=Array.isArray(me.imagenes)?[...me.imagenes]:[];Ae.includes(ye)||Ae.unshift(ye);const Ze=[{url:ye}],bt={...me,imagen:ye,imagenPrincipal:Ze,imagenes:Ae};return console.log("💾 Guardando en Firestore y actualizando formData...",bt),An(at(De,"productos",ae),{imagen:ye,imagenPrincipal:Ze,imagenes:Ae,fechaActualizacion:new Date}).then(()=>{console.log("✅ Documento actualizado en Firestore")}).catch(ot=>{console.error("❌ Error actualizando Firestore:",ot)}),bt})}else X&&!X.startsWith("blob:")&&(Se("imagen",X),Se("imagenPrincipal",[{url:X}]),N(ae=>({...ae,imagen:""})))}catch(q){console.error("handleMainImageUFU error",q)}finally{D(!1),G(null)}},ke=async W=>{var q,le,X,ae;try{D(!0);const Me=Array.isArray(W)?W:[],Oe=Me.filter(ze=>{var Lt,jt;return(ze==null?void 0:ze.file)&&((jt=(Lt=ze.file.type)==null?void 0:Lt.startsWith)==null?void 0:jt.call(Lt,"image/"))}).map(ze=>ze.url).filter(Boolean),ye=Me.filter(ze=>{var Lt,jt;return(ze==null?void 0:ze.file)&&((jt=(Lt=ze.file.type)==null?void 0:Lt.startsWith)==null?void 0:jt.call(Lt,"video/"))}).map(ze=>ze.url).filter(Boolean);N(ze=>({...ze,imagenes:Oe,productVideos:ye}));const me=Me.filter(ze=>!(ze!=null&&ze.file)&&(ze==null?void 0:ze.url)&&!ze.url.startsWith("blob:")).map(ze=>ze.url),Ae=me.filter(ze=>Re(ze)==="image"),Ze=me.filter(ze=>Re(ze)==="video"),bt=Array.isArray(f.imagenes)?f.imagenes:[],ot=Array.isArray(f.videoUrls)?f.videoUrls:[];if(JSON.stringify(Ae)!==JSON.stringify(bt)){const ze=j||(t==null?void 0:t.id);g(Lt=>{const jt={...Lt,imagenes:Ae};return ze&&An(at(De,"productos",ze),{imagenes:Ae,fechaActualizacion:new Date}).catch(()=>{}),jt})}if(JSON.stringify(Ze)!==JSON.stringify(ot)){const ze=j||(t==null?void 0:t.id);g(Lt=>{const jt={...Lt,videoUrls:Ze};return ze&&An(at(De,"productos",ze),{videoUrls:Ze,fechaActualizacion:new Date}).catch(()=>{}),jt})}let je=j||(t==null?void 0:t.id);if(je||(je=await Ve()),!je)return;for(const ze of Me)if(ze!=null&&ze.file&&((le=(q=ze.file.type)==null?void 0:q.startsWith)!=null&&le.call(q,"image/"))){const Lt=`${Date.now()}_${ze.file.name}_${Math.random().toString(36).slice(2,7)}`,jt=ct({productId:je,section:"gallery",file:ze.file});try{const en=await Y(Qe,ze.file,jt,Lt);g(Wt=>{const Vn=Array.isArray(Wt.imagenes)?[...Wt.imagenes,en]:[en],it=!Wt.imagen&&(!Array.isArray(Wt.imagenPrincipal)||Wt.imagenPrincipal.length===0),tn={...Wt,imagenes:Vn,...it?{imagen:en,imagenPrincipal:[{url:en}]}:{}},Kt=it?{imagenes:Vn,imagen:en,imagenPrincipal:[{url:en}],fechaActualizacion:new Date}:{imagenes:Vn,fechaActualizacion:new Date};return An(at(De,"productos",je),Kt).catch(()=>{}),tn})}catch(en){console.error("Gallery image upload error",en)}}else if(ze!=null&&ze.file&&((ae=(X=ze.file.type)==null?void 0:X.startsWith)!=null&&ae.call(X,"video/"))){const Lt=`${Date.now()}_${ze.file.name}_${Math.random().toString(36).slice(2,7)}`,jt=ct({productId:je,section:"videos",file:ze.file});try{const en=await Y(_e,ze.file,jt,Lt);g(Wt=>{const Vn=Array.isArray(Wt.videoUrls)?[...Wt.videoUrls,en]:[en],it={...Wt,videoUrls:Vn};return An(at(De,"productos",je),{videoUrls:Vn,fechaActualizacion:new Date}).catch(()=>{}),it})}catch(en){console.error("Gallery video upload error",en)}}}catch(Me){console.error("handleGalleryUFU error",Me)}finally{D(!1),G(null)}},pt=async W=>{var q,le;try{D(!0);const X=Array.isArray(W)?W:[],ae=X.filter(Ae=>Ae==null?void 0:Ae.file).map(Ae=>Ae.url).filter(Boolean);N(Ae=>({...Ae,acercaVideos:ae}));const Me=X.filter(Ae=>!(Ae!=null&&Ae.file)&&(Ae==null?void 0:Ae.url)&&!Ae.url.startsWith("blob:")).map(Ae=>Ae.url),Oe=Array.isArray(f.videoAcercaArticulo)?f.videoAcercaArticulo:[],ye=Oe.filter(Ae=>!Me.includes(Ae));for(const Ae of ye)await pe(Ae);JSON.stringify(Me)!==JSON.stringify(Oe)&&g(Ae=>{const Ze={...Ae,videoAcercaArticulo:Me},bt=j||(t==null?void 0:t.id);return bt&&An(at(De,"productos",bt),{videoAcercaArticulo:Me,fechaActualizacion:new Date}).catch(()=>{}),Ze});let me=j||(t==null?void 0:t.id);if(me||(me=await Ve()),!me)return;for(const Ae of X)if(Ae!=null&&Ae.file&&((le=(q=Ae.file.type)==null?void 0:q.startsWith)!=null&&le.call(q,"video/"))){const Ze=`${Date.now()}_${Ae.file.name}_${Math.random().toString(36).slice(2,7)}`,bt=ct({productId:me,section:"videos",file:Ae.file});try{const ot=await Y(_e,Ae.file,bt,Ze);g(je=>{const ze=Array.isArray(je.videoAcercaArticulo)?[...je.videoAcercaArticulo,ot]:[ot],Lt={...je,videoAcercaArticulo:ze};return An(at(De,"productos",me),{videoAcercaArticulo:ze,fechaActualizacion:new Date}).catch(()=>{}),Lt})}catch(ot){console.error("Acerca video upload error",ot)}}}catch(X){console.error("handleAcercaVideosUFU error",X)}finally{D(!1),G(null)}},Pt=async W=>{try{D(!0);const q=Array.isArray(W)?W.slice(0,3):[],le=q.filter(ye=>ye==null?void 0:ye.file).map(ye=>ye.url).filter(Boolean);N(ye=>({...ye,extras:le}));const X=q.filter(ye=>!(ye!=null&&ye.file)&&(ye==null?void 0:ye.url)&&!ye.url.startsWith("blob:")).map(ye=>ye.url),ae=Array.isArray(f.imagenesExtra)?f.imagenesExtra:[],Me=ae.filter(ye=>!X.includes(ye));for(const ye of Me)await pe(ye);JSON.stringify(X)!==JSON.stringify(ae)&&g(ye=>{const me={...ye,imagenesExtra:X},Ae=j||(t==null?void 0:t.id);return Ae&&An(at(De,"productos",Ae),{imagenesExtra:X,fechaActualizacion:new Date}).catch(()=>{}),me});let Oe=j||(t==null?void 0:t.id);if(Oe||(Oe=await Ve()),!Oe)return;for(const ye of q)if(ye!=null&&ye.file){const me=`${Date.now()}_${ye.file.name}_${Math.random().toString(36).slice(2,7)}`,Ae=ct({productId:Oe,section:"extras",file:ye.file});try{const Ze=await Y(Qe,ye.file,Ae,me);g(bt=>{const ot=Array.isArray(bt.imagenesExtra)?[...bt.imagenesExtra,Ze]:[Ze],je={...bt,imagenesExtra:ot};return An(at(De,"productos",Oe),{imagenesExtra:ot,fechaActualizacion:new Date}).catch(()=>{}),je})}catch(Ze){console.error("Extra file upload error",Ze)}}}catch(q){console.error("handleExtrasUFU error",q)}finally{D(!1),G(null)}},dt=async(W,q)=>{try{D(!0);const le=Array.isArray(W)?W:[];if(le.length===0){N(ae=>{var Me;return{...ae,variantes:{...ae.variantes,[q]:{...((Me=ae.variantes)==null?void 0:Me[q])||{},imagen:""}}}}),xt(q,"imagen","");return}const X=le[0];if(X!=null&&X.file){N(Ae=>{var Ze;return{...Ae,variantes:{...Ae.variantes,[q]:{...((Ze=Ae.variantes)==null?void 0:Ze[q])||{},imagen:X.url}}}});let ae=j||(t==null?void 0:t.id);if(ae||(ae=await Ve()),!ae)return;const Me=kt(q),Oe=`${Date.now()}_${X.file.name}_${Math.random().toString(36).slice(2,7)}`,ye=ct({productId:ae,section:"main",file:X.file,variantId:Me}),me=await Y(Qe,X.file,ye,Oe);xt(q,"imagen",me)}else X!=null&&X.url&&!X.url.startsWith("blob:")&&(xt(q,"imagen",X.url),N(ae=>{var Me;return{...ae,variantes:{...ae.variantes,[q]:{...((Me=ae.variantes)==null?void 0:Me[q])||{},imagen:""}}}}))}catch(le){console.error("handleVariantMainUFU error",le)}finally{D(!1),G(null)}},Xt=async(W,q)=>{var le,X,ae,Me;try{D(!0);const Oe=Array.isArray(W)?W:[],ye=Oe.filter(je=>je==null?void 0:je.file).map(je=>je.url).filter(Boolean);N(je=>{var ze;return{...je,variantes:{...je.variantes,[q]:{...((ze=je.variantes)==null?void 0:ze[q])||{},imagenes:ye}}}});const me=Oe.filter(je=>!(je!=null&&je.file)&&(je==null?void 0:je.url)&&!je.url.startsWith("blob:")).map(je=>je.url),Ae=Array.isArray((X=(le=f.variantes)==null?void 0:le[q])==null?void 0:X.imagenes)?f.variantes[q].imagenes:[],Ze=Ae.filter(je=>!me.includes(je));for(const je of Ze)await pe(je);JSON.stringify(me)!==JSON.stringify(Ae)&&xt(q,"imagenes",me);let bt=j||(t==null?void 0:t.id);if(bt||(bt=await Ve()),!bt)return;const ot=kt(q);for(const je of Oe)if(je!=null&&je.file&&((Me=(ae=je.file.type)==null?void 0:ae.startsWith)!=null&&Me.call(ae,"image/"))){const ze=`${Date.now()}_${je.file.name}_${Math.random().toString(36).slice(2,7)}`,Lt=ct({productId:bt,section:"gallery",file:je.file,variantId:ot});try{const jt=await Y(Qe,je.file,Lt,ze);g(en=>{var Kt;const Wt=[...en.variantes||[]],Vn=Array.isArray((Kt=Wt[q])==null?void 0:Kt.imagenes)?Wt[q].imagenes:[];Wt[q]={...Wt[q]||{},imagenes:[...Vn,jt]};const it={...en,variantes:Wt},tn=j||(t==null?void 0:t.id);return tn&&An(at(De,"productos",tn),{variantes:Wt,fechaActualizacion:new Date}).catch(()=>{}),it})}catch(jt){console.error("Variant gallery upload error",jt)}}}catch(Oe){console.error("handleVariantGalleryUFU error",Oe)}finally{D(!1),G(null)}},Cn=async(W,q)=>{var le,X,ae,Me;try{const Oe=Array.isArray(W)?W:[],ye=Oe.filter(je=>je==null?void 0:je.file).map(je=>je.url).filter(Boolean);N(je=>{var ze;return{...je,variantes:{...je.variantes,[q]:{...((ze=je.variantes)==null?void 0:ze[q])||{},videos:ye}}}});const me=Oe.filter(je=>!(je!=null&&je.file)&&(je==null?void 0:je.url)&&!je.url.startsWith("blob:")).map(je=>je.url),Ae=Array.isArray((X=(le=f.variantes)==null?void 0:le[q])==null?void 0:X.videoUrls)?f.variantes[q].videoUrls:[],Ze=Ae.filter(je=>!me.includes(je));for(const je of Ze)await pe(je);JSON.stringify(me)!==JSON.stringify(Ae)&&xt(q,"videoUrls",me);let bt=j||(t==null?void 0:t.id);if(bt||(bt=await Ve()),!bt)return;const ot=kt(q);for(const je of Oe)if(je!=null&&je.file&&((Me=(ae=je.file.type)==null?void 0:ae.startsWith)!=null&&Me.call(ae,"video/"))){const ze=`${Date.now()}_${je.file.name}_${Math.random().toString(36).slice(2,7)}`,Lt=ct({productId:bt,section:"gallery",file:je.file,variantId:ot});try{const jt=await Y(_e,je.file,Lt,ze);g(en=>{var Kt;const Wt=[...en.variantes||[]],Vn=Array.isArray((Kt=Wt[q])==null?void 0:Kt.videoUrls)?Wt[q].videoUrls:[];Wt[q]={...Wt[q]||{},videoUrls:[...Vn,jt]};const it={...en,variantes:Wt},tn=j||(t==null?void 0:t.id);return tn&&An(at(De,"productos",tn),{variantes:Wt,fechaActualizacion:new Date}).catch(()=>{}),it})}catch(jt){console.error("Variant video upload error",jt)}}}catch(Oe){console.error("handleVariantVideosUFU error",Oe)}},jn=async W=>{try{const q={nombre:W,ruta:W.toLowerCase().replace(/\s+/g,"-"),activa:!0,fechaCreacion:new Date,productCount:0};return await Xn(at(De,"categorias",q.ruta),q),v(le=>[...le,{id:q.ruta,...q}]),q.ruta}catch(q){throw console.error("Error creating category:",q),q}},Ln=async W=>{W.preventDefault();const q=[];String(f.nombre||"").trim()||q.push("El nombre del producto es obligatorio"),String(f.empresa||"").trim();const X=ye=>{if(typeof ye=="number")return ye;let me=String(ye??"").trim();if(!me)return NaN;me=me.replace(/\s/g,""),me.includes(",")&&/,\d{1,2}$/.test(me)?me=me.replace(/\./g,"").replace(",","."):me=me.replace(/,/g,"");const Ae=parseFloat(me);return Number.isFinite(Ae)?Ae:NaN},ae=X(f.precio);(!Number.isFinite(ae)||ae<0)&&q.push("Precio inválido");const Me=parseInt(f.cantidad);(!Number.isFinite(Me)||Me<0)&&q.push("Cantidad inválida"),M&&(String(f.nuevaCategoria||"").trim()||q.push("Escribe el nombre de la nueva categoría"));let Oe=!1;if(f.oferta){const ye=String(f.precioOferta??"").trim();if(!ye)Oe=!0;else{const me=X(ye);(!Number.isFinite(me)||me<0||Number.isFinite(ae)&&me>=ae)&&(Oe=!0)}}if(q.length){alert(`Corrige los siguientes campos antes de guardar:
- `+q.join(`
- `));return}A(!0);try{let ye=f.categoria;M&&f.nuevaCategoria.trim()&&(ye=await jn(f.nuevaCategoria.trim()));let me={...f,categoria:ye,precio:Number.isFinite(ae)?ae:0,fechaActualizacion:new Date,acerca:(Array.isArray(f.acerca)?f.acerca:[]).filter(ot=>String(ot||"").trim()),etiquetas:(Array.isArray(f.etiquetas)?f.etiquetas:[]).filter(ot=>String(ot||"").trim()),variantes:(Array.isArray(f.variantes)?f.variantes:[]).map(ot=>{const je=Number.isFinite(parseInt(ot==null?void 0:ot.cantidad))?parseInt(ot.cantidad):0,ze=(ot==null?void 0:ot.precio)!==void 0&&(ot==null?void 0:ot.precio)!==null&&String(ot.precio).trim()!=="",Lt=ze?X(ot.precio)||0:void 0;return{...ot,cantidad:je,...ze?{precio:Lt}:{}}})};if(Oe&&(me.oferta=!1,delete me.precioOferta),me.activo=!!me.activo,delete me.nuevaCategoria,delete me._tempVideoUrl,L){const ot=["imagen","imagenPrincipal","imagenes","media","videoAcercaArticulo","video","videoUrls","imagenesExtra","tresArchivosExtras"];for(const je of ot)delete me[je];Array.isArray(me.variantes)&&(me.variantes=me.variantes.map(je=>{const ze={...je};return delete ze.media,delete ze.videoUrls,delete ze.imagenes,delete ze.imagen,delete ze.imagenPrincipal,ze}))}me.empresa&&(me.empresa=me.empresa.trim(),me.empresaNorm=me.empresa.toLowerCase());const Ae=(t==null?void 0:t.id)||j||(f==null?void 0:f.id)||null;if(t&&!t.id)throw new Error("Producto en edición sin ID válido. No se guardó para evitar duplicados.");const Ze=!Ae,bt=Ze?`prod_${Date.now()}`:Ae;me.id=bt,me.nombre&&!me.slug&&(me.slug=rt(me.nombre)),Ze&&(me.fechaCreacion=new Date,me.ownerUid||(me.ownerUid=(i==null?void 0:i.uid)||(o==null?void 0:o.uid)||null),me.ownerName||(me.ownerName=((o==null?void 0:o.displayName)||(i==null?void 0:i.email)||"").toString())),await Xn(at(De,"productos",bt),{...me,fechaActualizacion:new Date},{merge:!0}),Ze&&R(bt),typeof n=="function"&&n(),typeof e=="function"&&e()}catch(ye){console.error("Error saving product:",ye);let me="Error al guardar el producto";(ye==null?void 0:ye.code)==="permission-denied"?me="No tienes permisos para guardar este producto":(ye==null?void 0:ye.code)==="network-request-failed"?me="Error de conexión. Verifica tu internet e inténtalo de nuevo":typeof(ye==null?void 0:ye.message)=="string"&&ye.message&&(me=ye.message),alert(me)}finally{A(!1)}};return a.jsx(ne.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-stretch justify-stretch",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsxs(ne.div,{className:"bg-white w-screen h-screen overflow-hidden flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[a.jsxs("div",{className:"bg-blue-700 text-white p-4 md:p-6 flex justify-between items-center sticky top-0 z-10 shadow",children:[a.jsx("h2",{className:"text-2xl font-bold",children:t?"Editar Producto":"Agregar Producto"}),a.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 text-2xl font-bold",children:"×"})]}),a.jsxs("form",{onSubmit:Ln,className:"flex-1 overflow-y-auto p-4 md:p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Información Básica"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Producto *"}),a.jsx("input",{type:"text",required:!0,value:f.nombre,onChange:W=>Se("nombre",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marca / Empresa"}),a.jsx("input",{type:"text",list:"brands-list",value:f.empresa||"",onChange:W=>Se("empresa",W.target.value),placeholder:"Ej. Xbox, PlayStation, Nintendo... (puedes escribir una nueva)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),a.jsx("datalist",{id:"brands-list",children:b.map(W=>a.jsx("option",{value:W},W))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sugerencias basadas en tus marcas guardadas. Se guardará sin importar mayúsculas/minúsculas."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio *"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:f.precio,onChange:W=>Se("precio",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad en Stock *"}),a.jsx("input",{type:"number",min:"0",required:!0,value:f.cantidad,onChange:W=>Se("cantidad",parseInt(W.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),a.jsx("textarea",{value:f.descripcion||"",onChange:W=>Se("descripcion",W.target.value),placeholder:"Escribe la descripción del producto...",className:"w-full min-h-[140px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Categoría y Estado"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{value:M?"":f.categoria,onChange:W=>{W.target.value==="nueva"?I(!0):(I(!1),Se("categoria",W.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Seleccionar categoría"}),y.map(W=>a.jsx("option",{value:W.id,children:W.nombre},W.id)),a.jsx("option",{value:"nueva",children:"+ Crear nueva categoría"})]}),M&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Nombre de la nueva categoría",value:f.nuevaCategoria,onChange:W=>Se("nuevaCategoria",W.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),a.jsx("button",{type:"button",onClick:()=>{I(!1),Se("nuevaCategoria","")},className:"px-3 py-2 text-gray-500 hover:text-gray-700",children:"Cancelar"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),a.jsxs("select",{value:f.estado,onChange:W=>Se("estado",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"Nuevo",children:"Nuevo"}),a.jsx("option",{value:"Usado",children:"Usado"}),a.jsx("option",{value:"Reacondicionado",children:"Reacondicionado"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Publicación"}),a.jsx("input",{type:"date",value:f.fechaPublicacion,onChange:W=>Se("fechaPublicacion",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:f.oferta,onChange:W=>Se("oferta",W.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"En oferta"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:f.activo,onChange:W=>Se("activo",W.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Producto activo"]})]}),f.oferta&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de Oferta"}),a.jsx("input",{type:"number",step:"0.01",value:f.precioOferta,onChange:W=>Se("precioOferta",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Precio con descuento"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (opcional)"}),a.jsx("input",{type:"text",value:f.peso,onChange:W=>Se("peso",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 1.5 kg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensiones (opcional)"}),a.jsx("input",{type:"text",value:f.dimensiones,onChange:W=>Se("dimensiones",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 30x20x10 cm"})]})]})]})]}),a.jsx("div",{className:"xl:col-span-1",children:a.jsx(oz,{productId:j||(t==null?void 0:t.id)||null,draftData:Te,className:"sticky top-20"})})]}),a.jsxs("div",{className:"mt-8 space-y-4",children:[a.jsx("h3",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-fuchsia-600 via-pink-600 to-rose-600 border-b-4 border-rose-200 pb-2",children:"Imágenes y Multimedia"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"rounded-2xl border-2 border-rose-200/70 bg-gradient-to-br from-rose-50 via-pink-50 to-fuchsia-50 p-4 shadow-sm",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen Principal *"}),a.jsx(sl,{files:[...T.imagen?[{id:"temp-main",url:T.imagen,type:"image",name:"imagen-principal",size:0,isUploaded:!1}]:[],...f.imagen?[f.imagen]:[]],onFilesChange:Ue,acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen principal",allowReorder:!1,allowSetMain:!1})]}),a.jsxs("div",{className:"rounded-2xl border-2 border-pink-200/70 bg-gradient-to-br from-pink-50 via-rose-50 to-fuchsia-50 p-4 shadow-sm",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Galería (Imágenes y Videos)"}),a.jsx(sl,{files:[...Array.isArray(f.imagenes)?f.imagenes:[],...Array.isArray(f.videoUrls)?f.videoUrls:[],...Array.isArray(T.imagenes)?T.imagenes.map((W,q)=>({id:`temp-gallery-img-${q}`,url:W,type:"image",name:`imagen-${q+1}`,size:0,isUploaded:!1})):[],...Array.isArray(T.productVideos)?T.productVideos.map((W,q)=>({id:`temp-gallery-vid-${q}`,url:W,type:"video",name:`video-${q+1}`,size:0,isUploaded:!1})):[]],onFilesChange:ke,acceptedTypes:"image/*,video/*",multiple:!0,label:"Galería (Imágenes y Videos)",placeholder:"Arrastra o selecciona imágenes o videos",allowReorder:!0,allowSetMain:!0})]})]})]}),a.jsxs("div",{className:"mt-8 space-y-4",children:[a.jsx("h3",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-sky-600 via-blue-600 to-indigo-600 border-b-4 border-blue-200 pb-2",children:"Detalles del Producto"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Características (Acerca de)"}),f.acerca.map((W,q)=>a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("input",{type:"text",value:W,onChange:le=>ge("acerca",q,le.target.value),placeholder:"Característica del producto",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("button",{type:"button",onClick:()=>te("acerca",q),className:"px-3 py-2 text-red-500 hover:text-red-700",children:"×"})]},q)),a.jsx("button",{type:"button",onClick:()=>Je("acerca"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar característica"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiquetas (para búsqueda)"}),f.etiquetas.map((W,q)=>a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("input",{type:"text",value:W,onChange:le=>ge("etiquetas",q,le.target.value),placeholder:"Etiqueta",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("button",{type:"button",onClick:()=>te("etiquetas",q),className:"px-3 py-2 text-red-500 hover:text-red-700",children:"×"})]},q)),a.jsx("button",{type:"button",onClick:()=>Je("etiquetas"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar etiqueta"})]})]}),a.jsxs("div",{className:"mt-8 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Variantes del Producto"}),f.variantes&&f.variantes.length>1&&a.jsx("div",{className:"mb-4",children:a.jsx(XC,{variants:f.variantes.map((W,q)=>{var le,X;return{id:W.id||`var_${q}`,name:W.color||`Variante ${q+1}`,price:W.precio,stock:W.cantidad,image:((X=(le=W.imagenPrincipal)==null?void 0:le[0])==null?void 0:X.url)||W.imagen,isSelected:H===q}}),productMainImage:((yr=(lr=f.imagenPrincipal)==null?void 0:lr[0])==null?void 0:yr.url)||f.imagen,onVariantChange:be,className:"max-w-md"})})]}),f.variantes.map((W,q)=>{var le,X,ae,Me,Oe,ye;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h4",{className:"font-medium",children:["Variante ",q+1]}),a.jsx("button",{type:"button",onClick:()=>te("variantes",q),className:"text-red-500 hover:text-red-700",children:"Eliminar"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color/Tipo"}),a.jsx("input",{type:"text",value:W.color,onChange:me=>xt(q,"color",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),a.jsx("input",{type:"number",min:"0",value:W.cantidad,onChange:me=>xt(q,"cantidad",parseInt(me.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción de la variante"}),a.jsx("textarea",{rows:2,value:W.descripcion||"",onChange:me=>xt(q,"descripcion",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. Color neón, control edición especial, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio de la variante (opcional)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:W.precio??"",onChange:me=>xt(q,"precio",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. 1999.99"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen de Variante"}),a.jsx(sl,{files:[...(X=(le=T.variantes)==null?void 0:le[q])!=null&&X.imagen?[{id:`temp-var${q}-main`,url:T.variantes[q].imagen,type:"image",name:`var${q}-imagen`,size:0,isUploaded:!1}]:[],...W.imagen?[W.imagen]:[]],onFilesChange:me=>dt(me,q),acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen de Variante",placeholder:"Arrastra o selecciona una imagen",allowReorder:!1,allowSetMain:!1})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imágenes adicionales de la variante"}),a.jsx(sl,{files:[...W.imagenes||[],...(((Me=(ae=T.variantes)==null?void 0:ae[q])==null?void 0:Me.imagenes)||[]).map((me,Ae)=>({id:`temp-var${q}-img-${Ae}`,url:me,type:"image",name:`var${q}-img-${Ae+1}`,size:0,isUploaded:!1}))],onFilesChange:me=>Xt(me,q),acceptedTypes:"image/*",multiple:!0,label:"Imágenes adicionales de la variante",placeholder:"Arrastra o selecciona imágenes",allowReorder:!0,allowSetMain:!0})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Videos de la variante"}),a.jsx(sl,{files:[...W.videoUrls||[],...(((ye=(Oe=T.variantes)==null?void 0:Oe[q])==null?void 0:ye.videos)||[]).map((me,Ae)=>({id:`temp-var${q}-video-${Ae}`,url:me,type:"video",name:`video-${Ae+1}`,size:0,isUploaded:!1}))],onFilesChange:me=>Cn(me,q),acceptedTypes:"video/*",multiple:!0,label:"Videos de la variante",placeholder:"Arrastra o selecciona videos",allowReorder:!0,allowSetMain:!0})]})]},q)}),a.jsx("button",{type:"button",onClick:()=>Je("variantes"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar variante"})]}),a.jsxs("div",{className:"mt-8 space-y-4 rounded-2xl border-2 border-rose-200/70 bg-gradient-to-br from-rose-50 via-pink-50 to-fuchsia-50 p-4 shadow-sm",children:[a.jsx("h3",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-rose-600 via-pink-600 to-fuchsia-600 border-b-4 border-rose-200 pb-2",children:"Video principal (Acerca de este artículo)"}),a.jsx(sl,{files:[...Array.isArray(f.videoAcercaArticulo)?f.videoAcercaArticulo:[],...Array.isArray(T.acercaVideos)?T.acercaVideos.map((W,q)=>({id:`temp-acerca-video-${q}`,url:W,type:"video",name:`acerca-${q+1}`,size:0,isUploaded:!1})):[]],onFilesChange:pt,acceptedTypes:"video/*",multiple:!0,label:"Videos de 'Acerca de este artículo'",placeholder:"Arrastra o selecciona videos para 'Acerca de este artículo'",allowReorder:!0,allowSetMain:!1})]}),a.jsxs("div",{className:"mt-8 space-y-4 rounded-2xl border-2 border-violet-200/70 bg-gradient-to-br from-violet-50 via-indigo-50 to-fuchsia-50 p-4 shadow-sm",children:[a.jsx("h3",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-violet-600 via-indigo-600 to-fuchsia-600 border-b-4 border-violet-200 pb-2",children:"Tres Archivos Extras"}),a.jsx(sl,{files:[...(f.imagenesExtra||[]).map((W,q)=>({id:`saved-extra-${q}`,url:W,type:Re(W),name:(String(W).split("/").pop()||`extra-${q+1}`).split("?")[0],size:0,isUploaded:!0})),...(T.extras||[]).map((W,q)=>({id:`temp-extra-${q}`,url:W,type:"document",name:`extra-${q+1}`,size:0,isUploaded:!1}))],onFilesChange:Pt,acceptedTypes:"image/*,video/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/zip,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,text/plain",multiple:!0,maxFiles:3,label:"Tres Archivos Extras",placeholder:"Sube hasta 3 archivos (imágenes, videos, documentos)",allowReorder:!0,allowSetMain:!1})]}),Pe&&a.jsx("div",{className:"mt-8",children:a.jsx(yB,{formData:f,onPublish:ht,onSaveDraft:mt,onPreview:Dt,isPublishing:O,isSaving:w})}),a.jsxs("div",{className:"mt-8 flex justify-end space-x-4 pt-6 border-t",children:[a.jsx("button",{type:"button",onClick:async()=>{try{await mt()}catch{}},className:"px-6 py-2 border border-amber-300 rounded-lg text-amber-700 hover:bg-amber-50",title:"Guardar para más tarde",children:"Guardar para más tarde"}),a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{type:"button",onClick:ht,disabled:w||O||He.length>0,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:O?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Publicando..."})]}):a.jsx("span",{children:"Publicar Producto"})}),a.jsx("button",{type:"submit",disabled:w,className:"px-6 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Guardando...":"Guardar Producto"})]})]})]})})},Yp=({size:t="medium",color:e="blue",className:n="",fullScreen:r=!1,text:i=null})=>{const o={small:"loading-spinner-small",medium:"loading-spinner-medium",large:"loading-spinner-large",xlarge:"loading-spinner-xlarge"},c={blue:"loading-spinner-blue",white:"loading-spinner-white",gray:"loading-spinner-gray",green:"loading-spinner-green",red:"loading-spinner-red"};return r?a.jsx("div",{className:"loading-spinner-fullscreen",children:a.jsxs("div",{className:"loading-spinner-container",children:[a.jsx("div",{className:`loading-spinner ${o[t]} ${c[e]} ${n}`}),i&&a.jsx("p",{className:"loading-spinner-text",children:i})]})}):a.jsxs("div",{className:`loading-spinner-inline ${n}`,children:[a.jsx("div",{className:`loading-spinner ${o[t]} ${c[e]}`}),i&&a.jsx("span",{className:"loading-spinner-text-inline",children:i})]})};function CB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function jB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function IB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function PB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function RB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function MB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function ZC(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function B1(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function DB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function OB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function ek(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function ej(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function LB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function VB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function tk(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function FB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function tj(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function UB(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Tv(t){return vt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}const $B="ZeiFzBgosCd0apv9cXL6aQZCYyu2",nj=({onAddProduct:t,onEditProduct:e})=>{const{usuario:n}=ii(),r=(n==null?void 0:n.uid)===$B,[i,o]=S.useState([]),[c,u]=S.useState([]),[h,f]=S.useState(!0),[g,y]=S.useState(""),[v,b]=S.useState(""),[k,w]=S.useState("fechaCreacion"),[A,j]=S.useState("desc"),[R,L]=S.useState(!1),[D,z]=S.useState(null),[G,M]=S.useState(null),[I,T]=S.useState(null),[N,V]=S.useState(""),[U,O]=S.useState(""),[xe,Pe]=S.useState(""),[We,He]=S.useState(""),[de,ce]=S.useState(""),[oe,H]=S.useState(""),[J,Ee]=S.useState("");S.useEffect(()=>{$e()},[]),S.useEffect(()=>{const re=Te();return()=>{typeof re=="function"&&re()}},[n==null?void 0:n.uid]);const $e=async()=>{try{const qe=(await qr($t(De,"categorias"))).docs.map(Se=>({id:Se.id,...Se.data()}));u(qe)}catch(re){console.error("Error loading categories:",re)}},Te=()=>{try{let re;return r?re=yn($t(De,"productos"),Zs("fechaCreacion","desc")):n!=null&&n.uid?re=yn($t(De,"productos"),Dr("ownerUid","==",n.uid)):re=yn($t(De,"productos"),Dr("activo","==",!0)),gr(re,Se=>{const ge=Se.docs.map(Je=>({id:Je.id,...Je.data()}));o(ge),f(!1)},()=>f(!1))}catch(re){return console.error("Error loading products:",re),f(!1),null}};S.useMemo(()=>{if(!r)return[];const re=new Set;return i.forEach(qe=>{const Se=(qe.ownerName||qe.empresa||"").trim();Se&&re.add(Se)}),Array.from(re).sort((qe,Se)=>qe.localeCompare(Se))},[r,i]);const Ve=re=>{try{return typeof(re==null?void 0:re.cantidad)=="number"?Number(re.cantidad)||0:Array.isArray(re==null?void 0:re.variantes)&&re.variantes.length?re.variantes.reduce((qe,Se)=>qe+(parseInt(Se==null?void 0:Se.cantidad)||0),0):Number.POSITIVE_INFINITY}catch{return Number.POSITIVE_INFINITY}},Ge=async(re,qe)=>{try{console.log(`🔄 Cambiando estado del producto ${re}: ${qe} -> ${!qe}`);const Se=at(De,"productos",re);if(!(await ps(Se)).exists())throw new Error("El producto no existe en la base de datos");await An(Se,{activo:!qe,fechaActualizacion:new Date}),console.log("✅ Estado actualizado exitosamente")}catch(Se){console.error("❌ Error updating product status:",Se),alert(`Error al actualizar el estado del producto: ${Se.message}`)}},rt=async re=>{try{console.log("🔄 Iniciando duplicación de producto:",re.id);const qe=at(De,"productos",re.id),Se=await ps(qe);if(!Se.exists())throw new Error("El producto original no existe en la base de datos");const ge=Se.data(),Je=`prod_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,te=JSON.parse(JSON.stringify(ge));te.nombre=`${ge.nombre} (Copia)`,te.fechaCreacion=new Date,te.fechaActualizacion=new Date,!te.categoria&&ge.categoria&&(te.categoria=ge.categoria),te.activo=!0,te.estado||(te.estado="activo"),Array.isArray(te.variantes)&&te.variantes.length>0&&(te.variantes=te.variantes.map(xt=>{const be={...xt};return be.id=`var_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,Array.isArray(be.media)&&be.media.length>0&&(be.media=be.media.map(Qe=>({...Qe,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),be})),Array.isArray(te.media)&&te.media.length>0&&(te.media=te.media.map(xt=>({...xt,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),Array.isArray(te.imagenes)&&te.imagenes.length>0&&(te.imagenes=[...te.imagenes]),console.log(`✅ Producto duplicado creado con ID: ${Je}`),console.log("📋 Datos del producto duplicado:",{id:Je,nombre:te.nombre,categoria:te.categoria,activo:te.activo,estado:te.estado,fechaCreacion:te.fechaCreacion}),await Xn(at(De,"productos",Je),te),console.log("✅ Producto guardado en Firestore con ID:",Je),await new Promise(xt=>setTimeout(xt,500)),alert(`Producto duplicado exitosamente con ID: ${Je}`)}catch(qe){console.error("❌ Error duplicating product:",qe),alert(`Error al duplicar el producto: ${qe.message}`)}},Ke=async(re,qe,Se)=>{try{console.log(`📝 Actualizando ${qe} del producto ${re}:`,Se);const ge=at(De,"productos",re);if(!(await ps(ge)).exists())throw new Error("El producto no existe en la base de datos");await An(ge,{[qe]:Se,fechaActualizacion:new Date}),console.log(`✅ Campo ${qe} actualizado exitosamente`)}catch(ge){console.error(`❌ Error updating ${qe}:`,ge),alert(`Error al actualizar ${qe}: ${ge.message}`)}},ct=async()=>{if(D)try{await Cm(at(De,"productos",D.id)),L(!1),z(null),alert("Producto eliminado exitosamente")}catch(re){console.error("Error deleting product:",re),alert("Error al eliminar el producto")}},kt=i.filter(re=>{var qe;try{const Se=g.toLowerCase(),ge=(re.nombre||"").toLowerCase().includes(Se)||(re.descripcion||"").toLowerCase().includes(Se)||(re.empresa||"").toLowerCase().includes(Se)||(re.categoria||"").toLowerCase().includes(Se),Je=!v||re.categoria===v,te=!N||(N==="activo"?re.activo!==!1:re.activo===!1),xt=Ve(re),be=Number.isFinite(xt)?xt<=0?"agotado":xt<=5?"bajo":"disponible":"disponible",Qe=!U||be===U,_e=parseFloat(re.precio)||0,Y=(xe===""||_e>=parseFloat(xe))&&(We===""||_e<=parseFloat(We)),pe=(qe=re==null?void 0:re.fechaCreacion)!=null&&qe.seconds?re.fechaCreacion.seconds*1e3:re!=null&&re.fechaCreacion?new Date(re.fechaCreacion).getTime():null,Re=!de||pe&&pe>=new Date(de).setHours(0,0,0,0),se=!oe||pe&&pe<=new Date(oe).setHours(23,59,59,999),Ue=Re&&se,ke=!r||!J||(re.ownerName||re.empresa||"")===J;return ge&&Je&&te&&Qe&&Y&&Ue&&ke}catch(Se){return console.warn("Error filtrando producto:",re==null?void 0:re.id,Se),!1}}).sort((re,qe)=>{let Se=re[k],ge=qe[k];return k==="precio"?(Se=parseFloat(Se)||0,ge=parseFloat(ge)||0):(k==="fechaCreacion"||k==="fechaActualizacion")&&(Se=new Date(Se!=null&&Se.seconds?Se.seconds*1e3:Se),ge=new Date(ge!=null&&ge.seconds?ge.seconds*1e3:ge)),A==="asc"?Se>ge?1:-1:Se<ge?1:-1}),mt=re=>{const qe=c.find(Se=>Se.id===re);return(qe==null?void 0:qe.nombre)||re},ht=re=>re?(re.seconds?new Date(re.seconds*1e3):new Date(re)).toLocaleDateString("es-ES"):"N/A",Dt=re=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(re||0);return h?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(Yp,{size:"large",color:"blue",text:"Cargando productos..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestión de Productos"}),a.jsxs("p",{className:"text-gray-600",children:[i.length," productos en total"]})]}),a.jsxs("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:"+"}),"Agregar Producto"]})]}),a.jsx("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm border",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{children:a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",placeholder:"Buscar productos...",value:g,onChange:re=>y(re.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})})})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría"}),a.jsxs("select",{value:v,onChange:re=>b(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todas las categorías"}),c.map(re=>a.jsx("option",{value:re.id,children:re.nombre},re.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordenar por"}),a.jsxs("select",{value:k,onChange:re=>w(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"fechaCreacion",children:"Fecha de creación"}),a.jsx("option",{value:"fechaActualizacion",children:"Última actualización"}),a.jsx("option",{value:"nombre",children:"Nombre"}),a.jsx("option",{value:"precio",children:"Precio"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),a.jsxs("select",{value:A,onChange:re=>j(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"desc",children:"Descendente"}),a.jsx("option",{value:"asc",children:"Ascendente"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 md:gap-6",children:a.jsx(Gt,{children:kt.map(re=>a.jsxs(ne.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"relative h-48 bg-white rounded-t-lg overflow-hidden flex items-center justify-center",children:[(()=>{try{const qe=re.imagen||(Array.isArray(re.imagenes)&&re.imagenes.length>0?re.imagenes[0]:null)||(Array.isArray(re.variantes)&&re.variantes.length>0&&re.variantes[0].imagen?re.variantes[0].imagen:null);return qe?a.jsx("img",{src:qe,alt:re.nombre||"Producto",className:"w-full h-full object-contain",onError:Se=>{Se.target.style.display="none",Se.target.nextSibling.style.display="flex"}}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:a.jsx("span",{className:"text-sm",children:"Sin imagen"})})}catch(qe){return console.warn("Error renderizando imagen del producto:",re.id,qe),a.jsx("div",{className:"w-full h-full flex items-center justify-center text-red-400 bg-red-50",children:a.jsx("span",{className:"text-sm",children:"Error en imagen"})})}})(),a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 bg-gray-50",style:{display:"none"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("span",{className:"text-sm",children:"Sin imagen"})]})}),a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:re.activo?"Activo":"Inactivo"})}),re.oferta&&a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Oferta"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:re.nombre}),a.jsx("button",{onClick:()=>Ge(re.id,re.activo),className:`ml-2 p-1 rounded ${re.activo?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:re.activo?"Desactivar":"Activar",children:re.activo?a.jsx(B1,{}):a.jsx(ZC,{})})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:mt(re.categoria)}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[I===re.id?a.jsx("input",{type:"number",step:"0.01",defaultValue:re.precio,onBlur:qe=>{Ke(re.id,"precio",parseFloat(qe.target.value)||0),T(null)},onKeyDown:qe=>{qe.key==="Enter"&&(Ke(re.id,"precio",parseFloat(qe.target.value)||0),T(null)),qe.key==="Escape"&&T(null)},className:"text-lg font-bold text-blue-700 bg-blue-50 border border-blue-200 rounded px-2 py-1 w-24",autoFocus:!0}):a.jsx("p",{className:"text-lg font-bold text-blue-700 cursor-pointer hover:bg-blue-50 px-2 py-1 rounded",onClick:()=>T(re.id),title:"Click para editar precio",children:Dt(re.precio)}),re.cantidad!==void 0&&a.jsx("div",{className:"text-sm",children:G===re.id?a.jsx("input",{type:"number",min:"0",defaultValue:re.cantidad,onBlur:qe=>{Ke(re.id,"cantidad",parseInt(qe.target.value)||0),M(null)},onKeyDown:qe=>{qe.key==="Enter"&&(Ke(re.id,"cantidad",parseInt(qe.target.value)||0),M(null)),qe.key==="Escape"&&M(null)},className:"bg-gray-50 border border-gray-200 rounded px-2 py-1 w-16 text-center",autoFocus:!0}):a.jsxs("span",{className:`cursor-pointer hover:bg-gray-50 px-2 py-1 rounded ${re.cantidad<=5?"text-red-600 font-semibold":re.cantidad<=20?"text-yellow-600":"text-green-600"}`,onClick:()=>M(re.id),title:"Click para editar cantidad",children:["Stock: ",re.cantidad]})})]}),a.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3",children:re.descripcion}),a.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[a.jsxs("p",{children:["Creado: ",ht(re.fechaCreacion)]}),re.fechaActualizacion&&a.jsxs("p",{children:["Actualizado: ",ht(re.fechaActualizacion)]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:()=>e(re),className:"px-3 py-2 border border-blue-300 text-blue-600 rounded text-sm hover:bg-blue-50 transition-colors",title:"Editar",children:"Editar"}),a.jsx("button",{onClick:()=>rt(re),className:"px-3 py-2 border border-green-300 text-green-600 rounded text-sm hover:bg-green-50 transition-colors",title:"Duplicar",children:a.jsx(RB,{})}),a.jsx("button",{onClick:()=>{z(re),L(!0)},className:"px-3 py-2 border border-red-300 text-red-600 rounded text-sm hover:bg-red-50 transition-colors",title:"Eliminar",children:a.jsx(tj,{})})]})]})]},re.id))})}),kt.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-6xl mb-4 flex justify-center",children:a.jsx(ej,{})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron productos"}),a.jsx("p",{className:"text-gray-500 mb-4",children:g||v?"Intenta ajustar los filtros de búsqueda":"Comienza agregando tu primer producto"}),!g&&!v&&a.jsx("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Agregar Primer Producto"})]}),a.jsx(Gt,{children:R&&a.jsx(ne.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(ne.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:a.jsx("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),a.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminación"}),a.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['¿Estás seguro de que deseas eliminar el producto "',D==null?void 0:D.nombre,'"? Esta acción no se puede deshacer.']}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{L(!1),z(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:ct,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},zB=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[i,o]=S.useState(!1),[c,u]=S.useState(null),[h,f]=S.useState(!1),[g,y]=S.useState(null),[v,b]=S.useState({nombre:"",descripcion:"",imagen:"",activa:!0,orden:0}),[k,w]=S.useState(!1);S.useEffect(()=>{A()},[]);const A=()=>{try{return gr($t(De,"categorias"),N=>{const V=N.docs.map(U=>({id:U.id,...U.data()})).sort((U,O)=>(U.orden||0)-(O.orden||0));e(V),r(!1)})}catch(T){console.error("Error loading categories:",T),r(!1)}},j=()=>{b({nombre:"",descripcion:"",imagen:"",activa:!0,orden:t.length}),u(null)},R=T=>{u(T),b({nombre:T.nombre||"",descripcion:T.descripcion||"",imagen:T.imagen||"",activa:T.activa!==!1,orden:T.orden||0}),o(!0)},L=async T=>{w(!0);try{const N=ds(hs,`categorias/${Date.now()}_${T.name}`);await t1(N,T);const V=await ul(N);b(U=>({...U,imagen:V}))}catch(N){console.error("Error uploading image:",N),alert("Error al subir la imagen")}finally{w(!1)}},D=async T=>{T.preventDefault(),r(!0);try{const N={...v,ruta:v.nombre.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),fechaActualizacion:new Date};if(c)await An(at(De,"categorias",c.id),N);else{N.fechaCreacion=new Date,N.productCount=0;const V=N.ruta;await jm($t(De,"categorias"),N)}o(!1),j()}catch(N){console.error("Error saving category:",N),alert("Error al guardar la categoría")}finally{r(!1)}},z=async(T,N)=>{try{await An(at(De,"categorias",T),{activa:!N,fechaActualizacion:new Date})}catch(V){console.error("Error updating category status:",V),alert("Error al actualizar el estado de la categoría")}},G=async()=>{if(g)try{await Cm(at(De,"categorias",g.id)),f(!1),y(null),alert("Categoría eliminada exitosamente")}catch(T){console.error("Error deleting category:",T),alert("Error al eliminar la categoría")}},M=async(T,N)=>{const V=t.findIndex(O=>O.id===T);if(V===-1)return;const U=N==="up"?V-1:V+1;if(!(U<0||U>=t.length))try{const O=[],xe=t[V],Pe=t[U];O.push(An(at(De,"categorias",xe.id),{orden:U}),An(at(De,"categorias",Pe.id),{orden:V})),await Promise.all(O)}catch(O){console.error("Error reordering categories:",O),alert("Error al reordenar las categorías")}},I=T=>T?(T.seconds?new Date(T.seconds*1e3):new Date(T)).toLocaleDateString("es-ES"):"N/A";return n&&t.length===0?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(Yp,{size:"large",color:"blue",text:"Cargando categorías..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestión de Categorías"}),a.jsxs("p",{className:"text-gray-600",children:[t.length," categorías en total"]})]}),a.jsxs("button",{onClick:()=>{j(),o(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:"+"}),"Agregar Categoría"]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📁"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categorías"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Comienza creando tu primera categoría de productos"}),a.jsx("button",{onClick:()=>{j(),o(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Crear Primera Categoría"})]}):a.jsx("div",{className:"divide-y divide-gray-200",children:a.jsx(Gt,{children:t.map((T,N)=>a.jsx(ne.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center",children:T.imagen?a.jsx("img",{src:T.imagen,alt:T.nombre,className:"w-full h-full object-cover"}):a.jsx(DB,{className:"text-gray-400 text-2xl"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:T.nombre}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.activa?"Activa":"Inactiva"})]}),T.descripcion&&a.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:T.descripcion}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("span",{children:["Ruta: /",T.ruta]}),a.jsxs("span",{children:["Productos: ",T.productCount||0]}),a.jsxs("span",{children:["Creada: ",I(T.fechaCreacion)]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{onClick:()=>M(T.id,"up"),disabled:N===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover arriba",children:a.jsx(PB,{})}),a.jsx("button",{onClick:()=>M(T.id,"down"),disabled:N===t.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover abajo",children:a.jsx(IB,{})})]}),a.jsx("button",{onClick:()=>z(T.id,T.activa),className:`p-2 rounded ${T.activa?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:T.activa?"Desactivar":"Activar",children:T.activa?a.jsx(B1,{}):a.jsx(ZC,{})}),a.jsx("button",{onClick:()=>R(T),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:a.jsx(MB,{})}),a.jsx("button",{onClick:()=>{y(T),f(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:a.jsx(tj,{})})]})]})},T.id))})})}),a.jsx(Gt,{children:i&&a.jsx(ne.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsxs(ne.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[a.jsxs("div",{className:"bg-blue-700 text-white p-6 flex justify-between items-center rounded-t-2xl",children:[a.jsx("h2",{className:"text-xl font-bold",children:c?"Editar Categoría":"Agregar Categoría"}),a.jsx("button",{onClick:()=>{o(!1),j()},className:"text-white hover:text-gray-200 text-2xl font-bold",children:"×"})]}),a.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Categoría *"}),a.jsx("input",{type:"text",required:!0,value:v.nombre,onChange:T=>b(N=>({...N,nombre:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Videojuegos"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),a.jsx("input",{type:"number",min:"0",value:v.orden,onChange:T=>b(N=>({...N,orden:parseInt(T.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),a.jsx("textarea",{rows:3,value:v.descripcion,onChange:T=>b(N=>({...N,descripcion:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción opcional de la categoría"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen de la Categoría"}),a.jsx("input",{type:"file",accept:"image/*",onChange:T=>{var N;return((N=T.target.files)==null?void 0:N[0])&&L(T.target.files[0])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),v.imagen&&a.jsx("div",{className:"mt-3",children:a.jsx("img",{src:v.imagen,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:v.activa,onChange:T=>b(N=>({...N,activa:T.target.checked})),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Categoría activa"]})}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[a.jsx("button",{type:"button",onClick:()=>{o(!1),j()},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:k,className:"px-6 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[k?a.jsx(Yp,{size:"small",color:"white",className:"mr-2"}):null,k?"Subiendo imagen...":c?"Actualizar":"Crear Categoría"]})]})]})]})})}),a.jsx(Gt,{children:h&&a.jsx(ne.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(ne.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:a.jsx("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),a.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminación"}),a.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['¿Estás seguro de que deseas eliminar la categoría "',g==null?void 0:g.nombre,'"? Esta acción no se puede deshacer y puede afectar los productos asociados.']}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{f(!1),y(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:G,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},nk=()=>{const[t,e]=S.useState({productos:0,categorias:0,usuarios:0,pedidos:0}),[n,r]=S.useState([]),[i,o]=S.useState(!0);return S.useEffect(()=>{const c=async()=>{try{const f=yn($t(De,"productos")),g=await qr(f),y=yn($t(De,"categorias")),v=await qr(y),b=yn($t(De,"usuarios")),k=await qr(b);let w=0;try{const A=yn($t(De,"pedidos"));w=(await qr(A)).size}catch(A){console.log("No pedidos collection or other error:",A)}e({productos:g.size,categorias:v.size,usuarios:k.size,pedidos:w})}catch(f){console.error("Error fetching stats:",f)}},u=()=>{try{const f=yn($t(De,"productos"),Zs("fechaCreacion","desc"),Tm(5));return gr(f,y=>{const v=y.docs.map(b=>({id:b.id,...b.data()}));r(v),o(!1)},y=>{console.error("Error fetching recent products:",y),o(!1)})}catch(f){console.error("Error setting up recent products listener:",f),o(!1)}};c();const h=u();return()=>{h&&h()}},[]),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Bienvenido al panel de administración"})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Vf,{title:"Productos",count:t.productos,icon:a.jsx(ej,{className:"text-blue-500",size:24}),linkTo:"/admin/productos"}),a.jsx(Vf,{title:"Categorías",count:t.categorias,icon:a.jsx(OB,{className:"text-green-500",size:24}),linkTo:"/admin/categorias"}),a.jsx(Vf,{title:"Usuarios",count:t.usuarios,icon:a.jsx(Tv,{className:"text-purple-500",size:24}),linkTo:"/admin/usuarios"}),a.jsx(Vf,{title:"Pedidos",count:t.pedidos,icon:a.jsx(VB,{className:"text-orange-500",size:24}),linkTo:"/admin/pedidos"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Productos Recientes"}),i?a.jsx("div",{className:"flex justify-center items-center h-32",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):n.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(c=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex-shrink-0 h-10 w-10 relative",children:[(()=>{try{const u=c.imagen||(Array.isArray(c.imagenes)&&c.imagenes.length>0?c.imagenes[0]:null)||(Array.isArray(c.variantes)&&c.variantes.length>0&&c.variantes[0].imagen?c.variantes[0].imagen:null)||(Array.isArray(c.media)&&c.media.length>0?c.media[0].url:null)||(Array.isArray(c.variantes)&&c.variantes.length>0&&Array.isArray(c.variantes[0].media)&&c.variantes[0].media.length>0?c.variantes[0].media[0].url:null);return u?a.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:u,alt:"",onError:h=>{h.target.style.display="none",h.target.nextSibling.style.display="flex"}}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"N/A"})}catch{return a.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-500 text-xs",children:"Error"})}})(),a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",style:{display:"none"},children:"N/A"})]}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.nombre||"Sin nombre"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",c.id.substring(0,8),"..."]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(c.precio||0)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${c.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.activo?"Activo":"Inactivo"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx(Tt,{to:`/admin/productos/editar/${c.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",children:"Editar"}),a.jsx(Tt,{to:`/producto/${c.id}`,className:"text-green-600 hover:text-green-900",target:"_blank",rel:"noopener noreferrer",children:"Ver"})]})]},c.id))})]})}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"No hay productos recientes"})}),a.jsx("div",{className:"mt-4 text-right",children:a.jsx(Tt,{to:"/admin/productos",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Ver todos los productos →"})})]})]})},Vf=({title:t,count:e,icon:n,linkTo:r})=>a.jsx(ne.div,{whileHover:{y:-5,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},className:"bg-white p-6 rounded-lg shadow-sm border transition-all",children:a.jsx(Tt,{to:r,className:"block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e})]}),a.jsx("div",{className:"p-3 bg-gray-50 rounded-full",children:n})]})})}),BB=/\/(Productos|productospcu)\//i;function jo(t){return typeof t=="string"&&t.startsWith("/")&&BB.test(t)}function HB(t=""){try{const e=t.indexOf("?"),n=e>=0?t.slice(0,e):t,r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}catch{return String(t||"")}}async function WB(t){const e=await fetch(t);if(!e.ok)throw new Error(`No se pudo leer ${t} (${e.status})`);return await e.blob()}async function rk(t,e){const n=await WB(e),r=HB(e)||`file-${Date.now()}`,i=`productos/${t}/${Date.now()}-${r}`,o=ds(hs,i);return await t1(o,n,{contentType:n.type||void 0}),await ul(o)}function ik(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t||null))}}async function Cv(t,e){if(!e)return e;if(typeof e=="string")return jo(e)?await rk(t,e):e;if(typeof e=="object"){if(e.url&&jo(e.url)){const n=await rk(t,e.url);return{...e,url:n}}return e}return e}async function cs(t,e){const n=Array.isArray(e)?e:[],r=[];for(const i of n)r.push(await Cv(t,i));return r}function Wn(t){return(Array.isArray(t)?t:[]).some(e=>typeof e=="string"?jo(e):e&&typeof e=="object"?jo(e.url):!1)}function qB(t){if(!t)return!1;if(jo(t.imagen)||Wn(t.imagenPrincipal)||Wn(t.imagenes)||Wn(t.media)||Wn(t.galeriaImagenes)||Wn(t.imagenesExtra)||Wn(t.tresArchivosExtras)||Wn(t.videoAcercaArticulo))return!0;if(Array.isArray(t.variantes)){for(const e of t.variantes)if(e&&(jo(e.imagen)||Wn(e.imagenPrincipal)||Wn(e.imagenes)||Wn(e.media)||Wn(e.galeriaImagenes)))return!0}return!1}async function GB(t){const n=(await qr($t(De,"productos"))).docs.map(o=>({id:o.id,data:o.data()}));let r=0,i=n.length;for(let o=0;o<n.length;o++){const{id:c,data:u}=n[o];if(!qB(u)){t==null||t({type:"skip",id:c,index:o+1,total:i});continue}const h=ik({});if(jo(u.imagen)&&(h.imagen=await Cv(c,u.imagen)),Wn(u.imagenPrincipal)&&(h.imagenPrincipal=await cs(c,u.imagenPrincipal)),Wn(u.imagenes)&&(h.imagenes=await cs(c,u.imagenes)),Wn(u.media)&&(h.media=await cs(c,u.media)),Wn(u.galeriaImagenes)&&(h.galeriaImagenes=await cs(c,u.galeriaImagenes)),Wn(u.imagenesExtra)&&(h.imagenesExtra=await cs(c,u.imagenesExtra)),Wn(u.tresArchivosExtras)&&(h.tresArchivosExtras=await cs(c,u.tresArchivosExtras)),Wn(u.videoAcercaArticulo)&&(h.videoAcercaArticulo=await cs(c,u.videoAcercaArticulo)),Array.isArray(u.variantes)){const f=[];for(const g of u.variantes){const y=ik(g)||{};jo(y.imagen)&&(y.imagen=await Cv(c,y.imagen)),Wn(y.imagenPrincipal)&&(y.imagenPrincipal=await cs(c,y.imagenPrincipal)),Wn(y.imagenes)&&(y.imagenes=await cs(c,y.imagenes)),Wn(y.media)&&(y.media=await cs(c,y.media)),Wn(y.galeriaImagenes)&&(y.galeriaImagenes=await cs(c,y.galeriaImagenes)),f.push(y)}h.variantes=f}h.fechaActualizacion=new Date,await Xn(at(De,"productos",c),h,{merge:!0}),r++,t==null||t({type:"migrated",id:c,index:o+1,total:i})}return t==null||t({type:"done",migratedCount:r,total:i}),{migratedCount:r,total:i}}const oy="text-blue-900",KB="bg-blue-800",fl="ZeiFzBgosCd0apv9cXL6aQZCYyu2";function QB(t=""){var n,r;if(!t)return"US";const e=t.trim().split(" ");return((((n=e[0])==null?void 0:n[0])||"")+(((r=e[1])==null?void 0:r[0])||"")).toUpperCase()}function YB(t=""){if(!t)return null;const e=t.match(/(https?:\/\/[^\s]+)/i);if(e)return e[1];const n=t.match(/(maps\.app\.[^\s]+|goo\.gl\/[^\s]+|google\.com\/maps[^\s]*)/i);if(n){const r=n[0];return r.startsWith("http")?r:`https://${r}`}return null}function jv(t){if(!t)return null;if(typeof t=="object"&&t.seconds)return new Date(t.seconds*1e3).toLocaleString();const e=new Date(t);return isNaN(e.getTime())?String(t):e.toLocaleString()}function XB({usuario:t,onClose:e}){const[n,r]=S.useState([]),[i,o]=S.useState(!0),[c,u]=S.useState(t),[h,f]=S.useState(null);S.useEffect(()=>{if(!(t!=null&&t.id))return;const v=gr(at(De,"users",t.id),k=>{k.exists()&&u(w=>({...w,...k.data()}))}),b=gr(at(De,"usuarios",t.id),k=>{k.exists()&&u(w=>({...w,...k.data()}))});return()=>{v(),b()}},[t==null?void 0:t.id]),S.useEffect(()=>{if(!t)return;const v=yn($t(De,"orders")),b=gr(v,k=>{const w=k.docs.map(A=>({id:A.id,...A.data()})).filter(A=>String(A.userId)===String(t.id));r(w.sort((A,j)=>{var D,z;const R=((D=A.fecha)==null?void 0:D.seconds)||0;return(((z=j.fecha)==null?void 0:z.seconds)||0)-R})),o(!1)},()=>{r([]),o(!1)});return()=>b()},[t]),S.useEffect(()=>{!t||t.uid!==fl||migrationRanRef.current||(migrationRanRef.current=!0,(async()=>{try{console.log("[Migración] Iniciando migración de medios legacy a Firebase Storage..."),await GB(v=>{v&&(v.type==="skip"?console.log(`[Migración] (${v.index}/${v.total}) Sin cambios:`,v.id):v.type==="migrated"?console.log(`[Migración] (${v.index}/${v.total}) Migrado:`,v.id):v.type==="done"&&console.log(`[Migración] Completada. Migrados: ${v.migratedCount}/${v.total}`))})}catch(v){console.error("[Migración] Error ejecutando migración:",v)}})())},[t]),S.useEffect(()=>{const v=b=>{b.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[e]);const g=(c==null?void 0:c.direccion)||(c==null?void 0:c.direccionCompleta)||"",y=(c==null?void 0:c.ubicacion)||YB(g);return a.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),a.jsxs("div",{role:"dialog","aria-modal":"true",className:"fixed top-0 left-0 w-full h-full max-h-none !rounded-none !shadow-none bg-white overflow-y-auto flex flex-col",style:{zIndex:1e4},onClick:v=>v.stopPropagation(),children:[a.jsxs("header",{className:`flex justify-between items-center px-6 py-4 shadow ${KB}`,children:[a.jsxs("div",{className:"admin-user-header",children:[a.jsx("div",{className:"admin-user-avatar",children:QB((c==null?void 0:c.displayName)||(c==null?void 0:c.nombre))}),a.jsxs("div",{className:"admin-user-info",children:[a.jsx("h2",{className:"admin-user-name",children:(c==null?void 0:c.displayName)||(c==null?void 0:c.nombre)||"Usuario"}),a.jsx("p",{className:"admin-user-email",children:c==null?void 0:c.email}),a.jsx("div",{className:"admin-user-badges",children:a.jsx("span",{className:t.id===fl?"badge-admin":"badge-user",children:t.id===fl?"Admin":"Usuario"})})]})]}),a.jsx("button",{onClick:e,"aria-label":"Cerrar",className:"admin-close-btn",children:"×"})]}),a.jsxs("div",{className:"flex-1 px-2 sm:px-8 py-4 sm:py-8 space-y-7 bg-gray-50",children:[a.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:a.jsx(UB,{})}),a.jsx("h3",{className:`text-xl font-bold ${oy}`,children:"Información Personal"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[a.jsx(vc,{label:"Nombre Completo",value:c.displayName||"No especificado"}),a.jsx(vc,{label:"Email",value:c.email||"No especificado"}),a.jsx(vc,{label:"Teléfono",value:c.telefono||"No especificado"}),a.jsx(vc,{label:"Código de Usuario",value:c.codigo||"No asignado"}),a.jsx(vc,{label:"Método de Entrega",value:c.metodoEntrega||"No especificado"}),a.jsx(vc,{label:"Fecha de Registro",value:c.createdAt?jv(c.createdAt):"No disponible"})]})]}),a.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:a.jsx(ek,{})}),a.jsx("h3",{className:`text-xl font-bold ${oy}`,children:"Dirección y Ubicación"})]}),a.jsx("p",{className:"text-base text-blue-900 mb-4",children:g||"No se ha registrado dirección"}),y&&a.jsxs("a",{href:y,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors",children:[a.jsx(ek,{})," Ver en Google Maps"]})]}),a.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:a.jsx(tk,{})}),a.jsx("h3",{className:`text-xl font-bold ${oy}`,children:"Historial de Compras"}),a.jsxs("span",{className:"bg-blue-100 text-blue-900 px-3 py-1 rounded-full text-sm font-bold",children:[n.length," ",n.length===1?"compra":"compras"]})]}),i?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Yp,{size:"medium",color:"blue",text:"Cargando compras..."})}):n.length===0?a.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-xl",children:[a.jsx("div",{className:"text-6xl mb-4 text-blue-700 flex items-center justify-center",children:a.jsx(tk,{})}),a.jsx("p",{className:"text-xl text-blue-700 font-medium",children:"No hay compras registradas"})]}):a.jsx("div",{className:"admin-orders-grid",children:n.map(v=>{var b,k;return a.jsxs("div",{className:"admin-order-card",children:[a.jsxs("div",{className:"admin-order-header",children:[a.jsxs("div",{className:"order-info",children:[a.jsx("h4",{className:"order-number",children:v.numeroOrden||`#${v.id.slice(-8)}`}),a.jsx("p",{className:"order-date",children:jv(v.fecha)})]}),a.jsxs("div",{className:"order-status-price",children:[a.jsx("span",{className:`admin-status-badge ${v.estado||"pendiente"}`,children:v.estado==="completado"?"✓ Completado":v.estado==="cancelado"?"✗ Cancelado":"⏳ Pendiente"}),a.jsx("div",{className:"order-total",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(v.total||0)})]})]}),a.jsx("div",{className:"admin-order-customer",children:a.jsxs("div",{className:"customer-info",children:[a.jsx("span",{className:"customer-name",children:v.userName||"Usuario"}),a.jsx("span",{className:"customer-email",children:v.userEmail})]})}),a.jsxs("div",{className:"admin-products-preview",children:[(b=v.productos)==null?void 0:b.slice(0,3).map((w,A)=>a.jsx("div",{className:"admin-product-item",children:a.jsxs("div",{className:"admin-product-info",children:[a.jsx("span",{className:"product-name",children:w.nombre}),a.jsxs("span",{className:"product-quantity",children:["Cantidad: ",w.cantidad," • ",new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(w.precio)]}),a.jsx("button",{className:"btn-view-product",onClick:j=>{j.stopPropagation(),window.location.href=`/producto/${w.id}`},title:"Ver producto",children:a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(B1,{})," Ver producto"]})})]})},A)),((k=v.productos)==null?void 0:k.length)>3&&a.jsxs("div",{className:"more-products-admin",children:["+",v.productos.length-3," más productos"]})]}),a.jsxs("div",{className:"admin-order-actions",children:[a.jsx("button",{className:"btn-admin btn-view",onClick:()=>f(v),children:"Ver detalles"}),v.metodoPago&&a.jsx("span",{className:"payment-method",children:v.metodoPago})]})]},v.id)})})]})]}),a.jsx(Gt,{children:h&&a.jsx(rj,{order:h,onClose:()=>f(null)})})]})]})}function vc({label:t,value:e}){return a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[a.jsx("p",{className:"font-semibold text-blue-700 text-xs mb-1",children:t}),a.jsx("p",{className:"text-base font-medium text-blue-900 break-all",children:e})]})}function JB(){const{usuario:t,usuarioInfo:e}=ii(),[n,r]=S.useState(!1),[i,o]=S.useState(null);return a.jsx("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel del Vendedor"}),a.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestiona tus productos en tiempo real"}),(e==null?void 0:e.empresa)&&a.jsx("div",{className:"mt-3 inline-flex items-center gap-2 bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold",children:e.empresa})]}),a.jsx(nj,{onAddProduct:()=>{o(null),r(!0)},onEditProduct:c=>{o(c),r(!0)}}),n&&a.jsx(JC,{product:i,onClose:()=>{r(!1),o(null)},onSave:()=>{r(!1),o(null)}})]})})}function ZB(){const{usuario:t,usuarioInfo:e}=ii(),[n,r]=S.useState([]),[i,o]=S.useState(""),[c,u]=S.useState(null),[h,f]=S.useState(null),[g,y]=S.useState("dashboard"),[v,b]=S.useState(!1),[k,w]=S.useState(null);if(S.useRef(!1),S.useEffect(()=>{if(!t||t.uid!==fl)return;const D=gr(yn($t(De,"users")),G=>{const M=G.docs.map(I=>({id:I.id,...I.data()}));r(I=>{const T=[...M];return I.forEach(N=>{const V=T.findIndex(U=>U.id===N.id);V>=0&&(T[V]={...T[V],...N})}),T})}),z=gr(yn($t(De,"usuarios")),G=>{const M=G.docs.map(I=>({id:I.id,...I.data()}));r(I=>{const T=[...I];return M.forEach(N=>{const V=T.findIndex(U=>U.id===N.id);V>=0?T[V]={...T[V],...N}:T.push(N)}),T})});return()=>{D(),z()}},[t]),!t)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Inicia sesión"});const A=(t==null?void 0:t.uid)===fl||(e==null?void 0:e.isAdmin)===!0,j=!!(e!=null&&e.isSeller||e!=null&&e.empresa||e!=null&&e.empresaId);if(!A&&j)return a.jsx(JB,{});if(!A)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Sin acceso"});const R=n.filter(D=>{const z=i.toLowerCase();return(D.displayName||"").toLowerCase().includes(z)||(D.email||"").toLowerCase().includes(z)||(D.telefono||"").toLowerCase().includes(z)||(D.direccion||"").toLowerCase().includes(z)||(D.codigo||"").toLowerCase().includes(z)}),L=()=>{switch(g){case"dashboard":return a.jsx(nk,{onAddProduct:()=>{w(null),b(!0),y("products")},onOpenCategories:()=>y("categories"),onViewAllProducts:()=>y("products"),onViewAllOrders:()=>y("orders")});case"products":return a.jsx(nj,{onAddProduct:()=>{w(null),b(!0)},onEditProduct:D=>{w(D),b(!0)}});case"categories":return a.jsx(zB,{});case"users":return a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Usuarios"}),a.jsx("input",{type:"text",value:i,onChange:D=>o(D.target.value),placeholder:"Buscar por nombre, email, teléfono, dirección o código",className:"w-full sm:w-80 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"})]}),R.length===0?a.jsx("div",{className:"text-gray-600",children:"No hay usuarios que coincidan con la búsqueda."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teléfono"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registrado"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(D=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>u(D),children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 font-medium",children:D.displayName||D.nombre||"Usuario"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:D.email||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:D.telefono||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:D.codigo||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:jv(D.createdAt)||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D.id===fl?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:D.id===fl?"Admin":"Usuario"})})]},D.id))})]})})]});default:return a.jsx(nk,{})}};return a.jsxs("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel Administrativo"}),a.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestión Completa del Sistema"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-center gap-3",children:[a.jsxs("span",{className:"bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2",children:[a.jsx(Tv,{})," ",n.length," ",n.length===1?"usuario":"usuarios"," registrados"]}),a.jsx("span",{className:"bg-green-100 text-green-900 px-4 py-2 rounded-full text-sm font-bold",children:"Sincronización en tiempo real"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-1 mb-8 border border-blue-100",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:[{id:"dashboard",label:"Dashboard",icon:a.jsx(CB,{})},{id:"products",label:"Productos",icon:a.jsx(jB,{})},{id:"categories",label:"Categorías",icon:a.jsx(FB,{})},{id:"orders",label:"Pedidos",icon:a.jsx(LB,{})},{id:"users",label:"Usuarios",icon:a.jsx(Tv,{})}].map(D=>a.jsx("button",{onClick:()=>y(D.id),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-medium transition-all duration-200 ${g===D.id?"bg-blue-700 text-white shadow-md":"text-blue-700 hover:bg-blue-50"}`,children:a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:D.icon}),a.jsx("span",{className:"hidden sm:inline",children:D.label})]})},D.id))})}),a.jsx(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:L()},g),c&&a.jsx(XB,{usuario:c,onClose:()=>u(null)}),v&&a.jsx(JC,{product:k,onClose:()=>{b(!1),w(null)},onSave:()=>{b(!1),w(null)}})]}),a.jsx(Gt,{children:h&&a.jsx(rj,{order:h,onClose:()=>f(null)})})]})}function rj({order:t,onClose:e}){var c,u;const n=h=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(h||0),r=h=>{if(!h)return"Fecha no disponible";let f;return typeof h=="object"&&h.seconds?f=new Date(h.seconds*1e3):f=new Date(h),f.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},i=h=>{switch(h){case"completado":return"status-completed";case"cancelado":return"status-cancelled";case"pendiente":return"status-pending";default:return"status-pending"}},o=h=>{switch(h){case"completado":return"✓ Completado";case"cancelado":return"✗ Cancelado";case"pendiente":return"⏳ Pendiente";default:return"⏳ Pendiente"}};return Gi.useEffect(()=>{const h=f=>{f.key==="Escape"&&e()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e]),a.jsx(ne.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:a.jsxs(ne.div,{className:"order-details-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:t.numeroOrden||`Orden #${t.id.slice(-8)}`}),a.jsx("p",{className:"order-date-detail",children:r(t.fecha)})]}),a.jsx("button",{className:"close-btn",onClick:e,children:"×"})]}),a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"order-status-section",children:[a.jsx("span",{className:`status-badge large ${i(t.estado)}`,children:o(t.estado)}),t.estadoPago&&a.jsxs("span",{className:"payment-status",children:["Pago: ",t.estadoPago==="pagado"?"✓ Pagado":"✗ Fallido"]})]}),a.jsxs("div",{className:"order-summary",children:[a.jsx("h3",{children:"Resumen de la orden"}),a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{children:"Total pagado:"}),a.jsx("span",{children:n(t.total)})]})]}),a.jsxs("div",{className:"products-section",children:[a.jsxs("h3",{children:["Productos (",((c=t.productos)==null?void 0:c.length)||0,")"]}),a.jsx("div",{className:"products-list",children:(u=t.productos)==null?void 0:u.map((h,f)=>a.jsx("div",{className:"product-detail-item",children:a.jsxs("div",{className:"product-detail-info",children:[a.jsx("h4",{children:h.nombre}),a.jsx("p",{className:"product-company",children:h.empresa||"N/A"}),a.jsxs("div",{className:"product-pricing",children:[a.jsxs("span",{className:"quantity",children:["Cantidad: ",h.cantidad]}),a.jsxs("span",{className:"price",children:["Precio unitario: ",n(h.precio)]}),a.jsxs("span",{className:"subtotal",children:["Subtotal: ",n(h.subtotal||h.precio*h.cantidad)]})]}),a.jsx("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${h.id}`,title:"Ver producto",children:"👁️ Ver producto"})]})},f))})]}),t.direccionEntrega&&a.jsxs("div",{className:"delivery-section",children:[a.jsx("h3",{children:"Información de entrega"}),a.jsx("p",{children:t.direccionEntrega}),t.telefonoContacto&&a.jsxs("p",{children:["Teléfono: ",t.telefonoContacto]})]}),t.metodoPago&&a.jsxs("div",{className:"payment-section",children:[a.jsx("h3",{children:"Información de pago"}),a.jsxs("p",{children:["Método: ",t.metodoPago]})]})]})]})})}const Ps=[{id:1,img:"/ads/1.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/6.png",link:"https://playcenterwisp.com",isExternal:!0},{id:2,img:"/ads/2.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0},{id:3,img:"/ads/3.png",link:"/Productos/videojuegos",isExternal:!1},{id:4,img:"/ads/5.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:5,img:"/ads/4.png",link:"/Productos",isExternal:!1}];function eH(){const[t,e]=S.useState(0),n=S.useRef(null),r=6e3,[i,o]=S.useState(!1),c=S.useCallback(()=>{clearTimeout(n.current),!i&&(n.current=setTimeout(()=>{e(k=>(k+1)%Ps.length)},r))},[i]);S.useEffect(()=>(c(),()=>clearTimeout(n.current)),[t,c]),S.useEffect(()=>{const k=w=>{var A;try{const j=!!((A=w==null?void 0:w.detail)!=null&&A.paused);o(j),clearTimeout(n.current),j||(n.current=setTimeout(()=>{e(R=>(R+1)%Ps.length)},r))}catch{}};return window.addEventListener("pcu:main-slider-toggle",k),()=>window.removeEventListener("pcu:main-slider-toggle",k)},[]);const u=()=>{clearTimeout(n.current),e(k=>k===0?Ps.length-1:k-1)},h=()=>{clearTimeout(n.current),e(k=>(k+1)%Ps.length)},f=S.useRef(0),g=S.useRef(0),y=k=>{f.current=k.touches[0].clientX},v=k=>{g.current=k.touches[0].clientX},b=()=>{const k=g.current-f.current;Math.abs(k)>50&&(k>0?u():h())};return a.jsxs("div",{onTouchStart:y,onTouchMove:v,onTouchEnd:b,className:`relative w-full max-w-[1600px] mx-auto overflow-hidden rounded-xl shadow-xl
        h-[140px] sm:h-[180px] md:h-[260px] lg:h-[400px]`,children:[a.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{width:`${Ps.length*100}%`,transform:`translateX(-${t*(100/Ps.length)}%)`},children:Ps.map(k=>k.isExternal?a.jsx("a",{href:k.link,target:"_blank",rel:"noopener noreferrer",className:"w-full h-full flex-shrink-0",style:{width:`${100/Ps.length}%`},children:a.jsx("img",{src:k.img,alt:`Anuncio ${k.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},k.id):a.jsx(Tt,{to:k.link,className:"w-full h-full flex-shrink-0",style:{width:`${100/Ps.length}%`},children:a.jsx("img",{src:k.img,alt:`Anuncio ${k.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},k.id))}),a.jsx("button",{onClick:u,className:"absolute top-1/2 left-2 sm:left-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Anterior",children:a.jsx(s$,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),a.jsx("button",{onClick:h,className:"absolute top-1/2 right-2 sm:right-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Siguiente",children:a.jsx(o$,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),a.jsx("div",{className:"absolute bottom-3 sm:bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-20",children:Ps.map((k,w)=>a.jsx("button",{onClick:()=>{clearTimeout(n.current),e(w)},"aria-label":`Ir al slide ${w+1}`,className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${w===t?"bg-white opacity-90 scale-110":"bg-white opacity-40"} transition`},w))})]})}const tH=[{id:1,img:"/ads/movil/aficionados-movil.png",link:"/Productos/coleccionables",isExternal:!1},{id:2,img:"/ads/movil/articulosads.png",link:"/Productos/videojuegos",isExternal:!1},{id:3,img:"/ads/movil/internetads.png",link:"https://playcenterwisp.com",isExternal:!0},{id:4,img:"/ads/movil/camarasads.png",link:"/Productos/camaras",isExternal:!1},{id:5,img:"/ads/movil/consolaads.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/movil/ofertas.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:7,img:"/ads/movil/productosads.png",link:"/Productos",isExternal:!1},{id:8,img:"/ads/movil/retroads.png",link:"/Productos/retro-juegos",isExternal:!1},{id:9,img:"/ads/movil/nuestras-estafetas.png",link:"/estafetas",isExternal:!1},{id:10,img:"/ads/movil/ubicacionads.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0}];function nH(){return a.jsx("div",{className:"block sm:hidden w-full max-w-[600px] mx-auto px-3 py-4",children:a.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide space-x-3",style:{scrollPaddingLeft:"12px",scrollPaddingRight:"12px"},children:tH.map(t=>a.jsx("a",{href:t.link,target:t.isExternal?"_blank":"_self",rel:"noreferrer",className:"flex-shrink-0 w-[300px] h-[420px] rounded-xl overflow-hidden shadow-lg bg-white snap-center",children:a.jsx("img",{src:t.img,alt:`Anuncio ${t.id}`,className:"w-full h-full object-cover",draggable:!1})},t.id))})})}const sk=["/animacion/img1.png","/animacion/img2.png","/animacion/img3.png","/animacion/img4.png","/animacion/img5.png","/animacion/img6.png","/animacion/img7.png","/animacion/img8.png","/animacion/img9.png","/animacion/img10.png"],rH=[...sk,...sk.slice(0,5)],iH=()=>a.jsx("div",{className:"loader",role:"presentation","aria-hidden":"true",children:rH.map((t,e)=>a.jsx("img",{src:t,alt:`Animación ${e+1}`},e))}),pi={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7}}};Array.from({length:17},(t,e)=>`/animacion/${e+1}.png`);function sH(){const{productsByCategory:t,categories:e,loading:n,error:r}=$O(),{theme:i}=r1();if(Gi.useEffect(()=>{e.length>0&&(console.log("🎯 CATEGORÍAS DISPONIBLES EN INICIO:"),console.log("════════════════════════════════════════════════════════"),console.table(e.map(f=>({"📌 Nombre":f.nombre,"🔗 Ruta":f.ruta,"🆔 ID":f.id,"📦 Productos":(t[f.id]||[]).length}))),console.log("════════════════════════════════════════════════════════"),console.log("💡 COPIA las rutas exactas de arriba para usarlas en getProductsByRoute()"),console.log("════════════════════════════════════════════════════════"))},[e,t]),n)return null;if(r)return a.jsx("div",{className:"bg-gradient-to-br from-indigo-50 via-white to-blue-100 min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx("p",{className:"text-lg",children:"Error cargando productos"}),a.jsx("p",{className:"text-sm",children:r})]})});const o=f=>{try{return f?typeof f=="string"?f:typeof f=="object"&&f!==null?f.url||"":String(f||""):""}catch{return""}},c=f=>{var R,L;const g=o((R=f==null?void 0:f.imagenPrincipal)==null?void 0:R[0]);if(g)return g;const y=o(f==null?void 0:f.imagen);if(y)return y;const b=(Array.isArray(f==null?void 0:f.media)?f.media:[]).find(D=>{const z=((D==null?void 0:D.type)||"").toLowerCase();return o(D)&&(!z||z.includes("image")||z==="img"||z==="photo")});if(b)return o(b);const w=(Array.isArray(f==null?void 0:f.galeriaImagenes)?f.galeriaImagenes:[]).find(D=>{const z=((D==null?void 0:D.type)||"").toLowerCase();return o(D)&&(!z||z.includes("image")||z==="img"||z==="photo")});if(w)return o(w);const A=Array.isArray(f==null?void 0:f.imagenes)?f.imagenes:[];if(A.length>0)return o(A[0]);const j=Array.isArray(f==null?void 0:f.variantes)?f.variantes:[];for(const D of j){const z=o((L=D==null?void 0:D.imagenPrincipal)==null?void 0:L[0]);if(z)return z;const G=o(D==null?void 0:D.imagen);if(G)return G;const I=(Array.isArray(D==null?void 0:D.media)?D.media:[]).find(V=>{const U=((V==null?void 0:V.type)||"").toLowerCase();return o(V)&&(!U||U.includes("image")||U==="img"||U==="photo")});if(I)return o(I);const N=(Array.isArray(D==null?void 0:D.galeriaImagenes)?D.galeriaImagenes:[]).find(V=>{const U=((V==null?void 0:V.type)||"").toLowerCase();return o(V)&&(!U||U.includes("image")||U==="img"||U==="photo")});if(N)return o(N)}return""},u=f=>{let g=e.find(b=>((b==null?void 0:b.ruta)||"")===f);if(g)return g;const y=b=>(b||"").toLowerCase().replace(/á/g,"a").replace(/é/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n").replace(/[^a-z0-9]/g,""),v=y(f);return g=e.find(b=>{const k=y(b.nombre),w=y(b.ruta);return k===v||w===v||k.includes(v)||v.includes(k)}),g},h=f=>{const g=u(f);return g?t[g.id]||[]:(console.warn(`❌ Categoría no encontrada para ruta: "${f}"`),console.log("💡 Sugerencia: Verifica las categorías disponibles en la tabla arriba"),[])};return a.jsxs("div",{className:"bg-white dark:!bg-black min-h-screen transition-colors duration-300",style:{paddingTop:"var(--content-offset, 100px)",margin:0},children:[a.jsx(ne.div,{className:"block sm:hidden w-full max-w-[95%] mx-auto",style:{marginTop:0,marginBottom:0,padding:"0 0.5rem"},variants:pi,initial:"hidden",animate:"visible",children:a.jsx(nH,{})}),a.jsx("div",{className:"hidden sm:block w-full",style:{marginTop:0,marginBottom:0,padding:0},children:a.jsx("video",{src:i==="dark"?"/videos/pcu-intro-negro.mp4":"/videos/pcu-intro-blanco.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-auto object-cover",style:{marginTop:0,marginBottom:0,padding:0,display:"block",verticalAlign:"top"}},i)}),a.jsx(ne.div,{className:"hidden sm:block w-full max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-12",variants:pi,initial:"hidden",animate:"visible",children:a.jsx("div",{className:"rounded-2xl overflow-hidden shadow-2xl ring-1 ring-indigo-100 dark:ring-gray-900",children:a.jsx(eH,{})})}),a.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-14",children:e.slice(0,4).map((f,g)=>{const v=(t[f.id]||[]).slice(0,4);return a.jsxs(ne.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 group border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",transition:{delay:.1*g},children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:f.nombre}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:v.map((b,k)=>{const w=c(b)||"/placeholder-product.svg";return a.jsx(Tt,{to:`/producto/${b.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:w,alt:b.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:A=>{A.target.onerror=null,A.target.src="/placeholder-product.svg"}})})},b.id)})}),a.jsxs(Tt,{to:`/Productos/${f.ruta}`,className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:["Explora ",f.nombre," →"]})]},f.id)})}),a.jsx(ne.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:pi,initial:"hidden",animate:"visible",children:a.jsx(Tt,{to:"/Productos/coleccionables",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:a.jsx("img",{src:"/ads/aficionados.png",alt:"Ver Nuestras colecciones",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),a.jsx("section",{className:"hidden xl:grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-14",children:[{to:"/Productos/retro-consolas",src:"/ads/retro.png",alt:"Retro Consolas"},{to:"/Productos/camaras",src:"/ads/camaras.png",alt:"Cámaras"}].map((f,g)=>a.jsx(ne.div,{className:"overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition h-[220px] sm:h-[300px] md:h-[400px] group",whileHover:{scale:1.01},children:a.jsx(Tt,{to:f.to,className:"block w-full h-full",children:a.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-cover object-center group-hover:scale-110 transition-transform duration-400"})})},g))}),a.jsx(ne.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Explora nuestras categorías"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:[{to:"/Productos/audifonos",src:"/ads/audifonoscate.png",alt:"Audífonos"},{to:"/Productos/mouses",src:"/ads/mousecate.png",alt:"Mouses"},{to:"/Productos/teclados",src:"/ads/tecladocate.png",alt:"Teclados"},{to:"/Productos/camaras",src:"/ads/camaracate.png",alt:"Cámaras"},{to:"/Productos/discos-duros",src:"/ads/discodurocate.png",alt:"Discos Duros"},{to:"/Productos/controles",src:"/ads/controlcate.png",alt:"Controles"}].map((f,g)=>a.jsx(Tt,{to:f.to,children:a.jsx("img",{src:f.src,alt:f.alt,className:"rounded-xl hover:scale-110 transition object-cover w-full aspect-[1/1] shadow-sm"})},f.alt))}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(Tt,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Ver todas las categorías →"})})]})}),a.jsx(ne.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:pi,initial:"hidden",animate:"visible",children:a.jsx(Tt,{to:"/estafetas",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:a.jsx("img",{src:"/ads/ESTAFETAS.png",alt:"Ver Nuestras Estafetas",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),a.jsx(ne.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Descubre nuestros productos"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:Object.values(t).flat().slice(0,6).map(f=>a.jsx(Tt,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"bg-white dark:bg-black rounded-xl overflow-hidden shadow hover:shadow-md transition border border-gray-200 dark:border-gray-800",children:a.jsx("div",{className:"w-full aspect-[1/1] flex items-center justify-center p-2 overflow-hidden",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})})},f.id))}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(Tt,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestros productos →"})})]})}),a.jsx(ne.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Hogar Inteligente en Oferta"}),a.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:h("hogar-inteligente").slice(0,10).map(f=>{const g=c(f)||"/placeholder-product.svg";return a.jsx(Tt,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",children:a.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:a.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(Tt,{to:"/Productos/hogar-inteligente",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Descubre cómo transformar tu casa en un hogar inteligente →"})})]})}),a.jsx(ne.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Tu Rincón Variado"}),a.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:h("tu-rincon-variado").slice(0,12).map(f=>{const g=c(f)||"/placeholder-product.svg";return a.jsx(Tt,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",title:f.nombre,children:a.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:a.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition-transform duration-300",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(Tt,{to:"/Productos/tu-rincon-variado",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestro Rincón Variado →"})})]})}),a.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-16",children:[{to:"/Productos/consolas",src:"/ads/nintendoswtitchads.png",alt:"Consolas"},{to:"/Productos/controles",src:"/ads/controlads.png",alt:"Controles"}].map((f,g)=>a.jsx(ne.div,{className:"overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition aspect-[16/9]",whileHover:{scale:1.01},children:a.jsx(Tt,{to:f.to,className:"block w-full h-full",children:a.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-contain object-center hover:scale-105 transition-transform duration-400 bg-black"})})},f.alt))}),a.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-16",children:[a.jsxs(ne.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cámaras de Vigilancia"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("camaras").slice(0,4).map(f=>a.jsx(Tt,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(Tt,{to:"/Productos/camaras",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Cámaras de Vigilancia →"})]}),a.jsxs(ne.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Discos Duros"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("discos-duros").slice(0,4).map(f=>a.jsx(Tt,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(Tt,{to:"/Productos/discos-duros",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Discos Duros →"})]}),a.jsxs(ne.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Memorias USB"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("memorias-usb").slice(0,4).map(f=>a.jsx(Tt,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(Tt,{to:"/Productos/memorias-usb",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Memorias USB →"})]}),a.jsxs(ne.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cables"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("cables").slice(0,4).map(f=>a.jsx(Tt,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre||"Cable",className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(Tt,{to:"/Productos/cables",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Cables →"})]})]}),a.jsx("div",{className:"max-w-[1600px] mx-auto mt-20 px-4",children:a.jsx(iH,{})}),a.jsxs(ne.section,{className:"max-w-4xl mx-auto px-6 py-20 text-center mt-10",variants:pi,initial:"hidden",animate:"visible",children:[a.jsxs("h2",{className:"text-3xl sm:text-4xl font-extrabold mb-6 text-gray-800 dark:text-gray-100",children:["¿Tienes dudas?"," ",a.jsx("span",{className:"text-indigo-700",children:"Contáctanos ahora"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-10 max-w-xl mx-auto",children:"Nuestro equipo está listo para ayudarte por WhatsApp, teléfono o correo. Atención rápida y profesional."}),a.jsxs("div",{className:"bg-white dark:bg-black shadow-2xl rounded-2xl p-10 max-w-3xl mx-auto flex flex-col gap-6 border border-indigo-100 dark:border-gray-800 transition-colors duration-300",children:[a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(mh,{className:"text-indigo-700"}),a.jsx("span",{children:"Av. Estrella Sadhalá, Santiago, República Dominicana"})]}),a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(qp,{className:"text-indigo-700"}),a.jsx("span",{children:"+1 (849)-635-7000 (Tienda)"})]}),a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(qp,{className:"text-indigo-700"}),a.jsx("span",{children:"+1 (809)-582-1212 (Internet)"})]}),a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(U1,{className:"text-indigo-700"}),a.jsx("span",{children:"playcenter121@gmail.com"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center mt-4",children:[a.jsxs("a",{href:"https://wa.me/18496357000?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20página.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-700 text-white rounded-lg shadow-md hover:bg-indigo-800 transition w-full sm:w-auto",children:[a.jsx(Wp,{className:"text-xl"}),"WhatsApp Tienda"]}),a.jsxs("a",{href:"https://wa.me/18095821212?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20página.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-700 text-white rounded-lg shadow-md hover:bg-gray-800 transition w-full sm:w-auto",children:[a.jsx(Wp,{className:"text-xl"}),"WhatsApp Internet"]})]})]})]})]})}async function aH(t){const e="https://api.cloudinary.com/v1_1/dprojkgqf/image/upload",n=new FormData;n.append("file",t),n.append("upload_preset","perfil_usuarios"),n.append("folder","muestras/comercio electrónico"),console.log("Archivo que se va a subir:",t),console.log("Preset usado:","perfil_usuarios"),console.log("Carpeta folder usada:","muestras/comercio electrónico");const r=await fetch(e,{method:"POST",body:n});if(!r.ok){const o=await r.text();throw console.error("Error Cloudinary:",o),new Error("❌ Error al subir la imagen a Cloudinary")}const i=await r.json();return console.log("Respuesta de Cloudinary:",i),i.secure_url}const ly={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, República Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"},oH=(t="")=>String(t||"").trim()?String(t).trim().charAt(0).toUpperCase():"?",lH=(t="")=>{let e=0;for(let o=0;o<t.length;o++)e=t.charCodeAt(o)+((e<<5)-e),e=e&e;const n=e>>0&255,r=e>>8&255,i=e>>16&255;return`#${[n,r,i].map(o=>o.toString(16).padStart(2,"0")).join("")}`},cH=(t="",e=512)=>{const n=oH(t),r=lH(t||n),i=`<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${e}' viewBox='0 0 ${e} ${e}'>
    <rect width='100%' height='100%' fill='${r}' rx='${Math.floor(e*.12)}' />
    <text x='50%' y='50%' dy='.04em' font-family='Inter, system-ui, Arial' font-size='${Math.floor(e*.42)}' fill='#fff' text-anchor='middle' alignment-baseline='middle'>${n}</text>
  </svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`},uH={hidden:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{duration:.36,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:-8,transition:{duration:.25}}},bd={hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.26}}};function dH({historial:t}){var g,y;const[e,n]=S.useState(null),[r,i]=S.useState("all"),o=!1;if(!(t!=null&&t.length))return a.jsxs(ne.div,{variants:bd,className:"empty-state-beautiful",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"empty-illustration",children:a.jsx(ne.div,{className:"empty-box",animate:{y:[0,-10,0],rotateY:[0,5,0,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},"aria-hidden":!0,children:a.jsx(xd,{size:56})})}),a.jsx(ne.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"¡Tu historial está esperando!"}),a.jsx(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Cuando realices tu primera compra, aparecerá aquí."}),a.jsx(ne.div,{className:"empty-cta",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7},children:a.jsx("button",{className:"btn-beautiful-primary",children:"Explorar productos"})})]});const c=v=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(v||0),u=v=>{if(!v)return"—";let b;return v!=null&&v.seconds?b=new Date(v.seconds*1e3):b=new Date(v),isNaN(b)?"—":b.toLocaleString("es-DO",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},h=v=>{switch(v){case"completado":return{color:"status-completed",Icon:$d,text:"Completado",gradient:"linear-gradient(135deg, #10b981, #059669)"};case"cancelado":return{color:"status-cancelled",Icon:xo,text:"Cancelado",gradient:"linear-gradient(135deg, #ef4444, #dc2626)"};case"pendiente":default:return{color:"status-pending",Icon:E$,text:"Pendiente",gradient:"linear-gradient(135deg, #f59e0b, #d97706)"}}},f=t.filter(v=>r==="all"?!0:v.estado===r);return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        .history-compact { --fs-1:.95rem; --fs-2:.9rem; --fs-3:.85rem; --pad-1:.55rem; --pad-2:.8rem; --radius:12px; }
        .history-compact .order-card-beautiful { padding: var(--pad-2); border-radius: var(--radius); }
        .history-compact .order-number-beautiful { font-size: var(--fs-1); }
        .history-compact .order-date-beautiful { font-size: var(--fs-3); opacity:.8; }
        .history-compact .status-badge-beautiful { padding:.35rem .55rem; border-radius:999px; font-size: var(--fs-3); }
        .history-compact .order-total-beautiful { font-size: var(--fs-1); }
        .history-compact .products-grid { gap:.5rem; }
        .history-compact .product-preview-beautiful { padding: var(--pad-1); border-radius:10px; }
        .history-compact .product-name-beautiful { font-size: var(--fs-2); }
        .history-compact .product-details-beautiful { font-size: var(--fs-3); opacity:.85; }
      `}),o,a.jsx(ne.div,{variants:bd,className:"orders-container-beautiful history-compact",layout:!0,children:a.jsx(Gt,{children:f.map((v,b)=>{var A,j;const k=h(v.estado),w=k.Icon;return a.jsxs(ne.div,{className:"order-card-beautiful",onClick:()=>n(v),initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,delay:b*.05,type:"spring",stiffness:120},whileHover:{scale:1.01,y:-3,boxShadow:"0 16px 32px rgba(0,0,0,0.08)"},whileTap:{scale:.99},layout:!0,children:[a.jsx("div",{className:"order-card-glow",style:{background:k.gradient}}),a.jsxs("div",{className:"order-header-beautiful",style:{display:"flex",justifyContent:"space-between",gap:"0.6rem"},children:[a.jsxs("div",{className:"order-info-beautiful",children:[a.jsx(ne.h4,{className:"order-number-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:v.numeroOrden||`Orden #${v.id.slice(-8)}`}),a.jsx(ne.p,{className:"order-date-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[a.jsx(IN,{size:14})," ",u(v.fecha)]})})]}),a.jsxs("div",{className:"order-status-beautiful",style:{display:"flex",alignItems:"center",gap:".5rem"},children:[a.jsxs(ne.div,{className:`status-badge-beautiful ${k.color}`,style:{background:k.gradient,display:"inline-flex",alignItems:"center",gap:6},whileHover:{scale:1.05},initial:{scale:0},animate:{scale:1},transition:{delay:.35,type:"spring"},children:[a.jsx(w,{size:14}),a.jsx("span",{className:"status-text",children:k.text})]}),a.jsx(ne.div,{className:"order-total-beautiful",initial:{opacity:0,x:12},animate:{opacity:1,x:0},transition:{delay:.4},children:c(v.total)})]})]}),a.jsxs(ne.div,{className:"order-products-preview-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.45},children:[a.jsx("div",{className:"products-grid",children:(A=v.productos)==null?void 0:A.slice(0,3).map((R,L)=>a.jsxs(ne.div,{className:"product-preview-beautiful",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5+L*.08},whileHover:{scale:1.03},children:[a.jsx("div",{className:"product-image-placeholder","aria-hidden":!0,style:{display:"flex",alignItems:"center"},children:a.jsx(xd,{size:18})}),a.jsxs("div",{className:"product-preview-info-beautiful",children:[a.jsx("span",{className:"product-name-beautiful",children:R.nombre}),a.jsxs("span",{className:"product-details-beautiful",children:[R.cantidad,"x •"," ",c(R.precio)]}),(R==null?void 0:R.id)&&a.jsxs("button",{className:"product-view-link",onClick:D=>{D.stopPropagation(),window.location.href=`/producto/${R.id}`},title:"Ver producto","aria-label":`Ver producto ${R.nombre}`,children:[a.jsx(xv,{size:14}),"Ver producto",a.jsx(ne.span,{className:"pv-arrow",animate:{x:[0,4,0]},transition:{duration:1.6,repeat:1/0},children:a.jsx(jN,{size:14})})]})]})]},L))}),((j=v.productos)==null?void 0:j.length)>3&&a.jsxs(ne.div,{className:"more-products-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},whileHover:{scale:1.06},children:[a.jsxs("span",{className:"more-count",children:["+",v.productos.length-3]}),a.jsx("span",{className:"more-text",children:"más productos"})]})]}),a.jsx(ne.div,{className:"order-card-footer",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:a.jsxs("div",{className:"view-details-hint",children:[a.jsx("span",{children:"Toque para ver detalles"}),a.jsx(ne.span,{className:"arrow-icon",animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},"aria-hidden":!0,children:a.jsx(jN,{size:16})})]})})]},v.id)})})}),a.jsx(Gt,{children:e&&a.jsx(ne.div,{className:"order-modal-overlay-beautiful",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(null),children:a.jsxs(ne.div,{className:"order-modal-beautiful",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:v=>v.stopPropagation(),children:[a.jsxs("div",{className:"modal-header-beautiful",children:[a.jsxs("div",{className:"modal-title-section",children:[a.jsx("h3",{className:"modal-title",children:e.numeroOrden||`Orden #${e.id.slice(-8)}`}),a.jsx("div",{className:"modal-subtitle",children:"Detalles de tu compra"})]}),a.jsx("button",{className:"close-modal-beautiful",onClick:()=>n(null),children:"×"})]}),a.jsxs("div",{className:"modal-content-beautiful",children:[a.jsx("div",{className:"order-summary-beautiful",children:a.jsxs("div",{className:"summary-card",children:[a.jsxs("div",{className:"summary-item",children:[a.jsxs("span",{className:"summary-label",children:[a.jsx(IN,{size:14})," Fecha"]}),a.jsx("span",{className:"summary-value",children:new Date((g=e.fecha)!=null&&g.seconds?e.fecha.seconds*1e3:e.fecha).toLocaleString("es-DO")})]}),a.jsxs("div",{className:"summary-item",children:[a.jsxs("span",{className:"summary-label",children:[a.jsx($$,{size:14})," Estado"]}),a.jsx("span",{className:"summary-status",children:e.estado})]}),a.jsxs("div",{className:"summary-item",children:[a.jsxs("span",{className:"summary-label",children:[a.jsx(u$,{size:14})," Total"]}),a.jsxs("span",{className:"summary-total",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(e.total)]})]})]})}),a.jsx("div",{className:"products-grid-modal",children:(y=e.productos)==null?void 0:y.map((v,b)=>a.jsxs("div",{className:"product-item-beautiful",children:[a.jsxs("div",{className:"product-info-modal",children:[a.jsx("span",{className:"product-name-modal",children:v.nombre}),a.jsxs("span",{className:"product-details-modal",children:[v.cantidad," × DOP"," ",new Intl.NumberFormat("es-DO").format(v.precio)]})]}),a.jsxs("div",{className:"product-subtotal-beautiful",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(v.cantidad*v.precio)]}),a.jsxs("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${v.id}`,children:[a.jsx(xv,{size:16})," Ver producto"]})]},b))})]})]})})})]})}function Ff({name:t}){const e={perfil:a.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),historial:a.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[a.jsx("path",{d:"M21 12a9 9 0 1 1-3-6.7L21 7"}),a.jsx("path",{d:"M12 7v6l4 2"})]}),direcciones:a.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),logout:a.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("path",{d:"M16 17l5-5-5-5"}),a.jsx("path",{d:"M21 12H9"})]})};return a.jsx("span",{className:"icon",children:e[t]})}function hH({visible:t,text:e="Cargando..."}){return t?a.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"loaderInner",children:[a.jsx("div",{className:"loader",children:a.jsxs("div",{className:"spinner",children:[a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{})]})}),a.jsx("p",{className:"loaderText",children:e})]})}):null}function ak({abierto:t,titulo:e,descripcion:n,onCancel:r,onConfirm:i,dangerText:o="Confirmar"}){return t?a.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:a.jsxs(ne.div,{className:"modal-card card",initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},children:[a.jsx("h3",{id:"modal-title",className:"modal-title",children:e}),a.jsx("p",{className:"modal-desc",children:n}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"btn btn-ghost",onClick:r,children:"Cancelar"}),a.jsx("button",{className:"btn btn-danger",onClick:i,children:o})]})]})}):null}function fH(){const{usuario:t,usuarioInfo:e,actualizarUsuarioInfo:n,logout:r}=ii(),i=wi(),[o,c]=S.useState("perfil"),[u,h]=S.useState(!1),[f,g]=S.useState(!1),[y,v]=S.useState({text:"",tipo:""}),[b,k]=S.useState({nombre:(t==null?void 0:t.displayName)||"",email:(t==null?void 0:t.email)||"",telefono:"",direccion:"",fotoURL:(t==null?void 0:t.photoURL)||""}),[w,A]=S.useState(null),[j,R]=S.useState(null),[L,D]=S.useState([]),[z,G]=S.useState([]),[M,I]=S.useState(!1),[T,N]=S.useState(null),[V,U]=S.useState(!1),[O,xe]=S.useState(!1),[Pe,We]=S.useState(!1),[He,de]=S.useState(!1),[ce,oe]=S.useState(null);S.useEffect(()=>{k(e?ge=>({...ge,telefono:e.telefono||"",direccion:e.direccion||"",fotoURL:e.fotoURL||(t==null?void 0:t.photoURL)||""}):ge=>({...ge,fotoURL:(t==null?void 0:t.photoURL)||""}))},[e,t==null?void 0:t.photoURL]),S.useEffect(()=>{t&&(H(),J())},[t]);const H=async()=>{try{const ge=yn($t(De,"orders"),Dr("userId","==",t.uid)),Je=await qr(ge);D(Je.docs.map(te=>({id:te.id,...te.data()})))}catch(ge){console.error("fetchHistorial:",ge)}},J=async()=>{try{const ge=yn($t(De,"direcciones"),Dr("usuarioId","==",t.uid)),Je=await qr(ge);G(Je.docs.map(te=>({id:te.id,...te.data()})))}catch(ge){console.error("fetchDirecciones:",ge)}},Ee=S.useMemo(()=>{if(j)return j;if(b.fotoURL)return b.fotoURL;const ge=b.nombre||b.email||(t==null?void 0:t.email)||"U";return cH(ge,512)},[j,b.fotoURL,b.nombre,b.email,t==null?void 0:t.email]),$e=S.useMemo(()=>{if(b.nombre&&b.nombre.trim())return b.nombre;const Je=(b.email||(t==null?void 0:t.email)||"").split("@")[0]||"Usuario";return Je.charAt(0).toUpperCase()+Je.slice(1)},[b.nombre,b.email,t==null?void 0:t.email]),Te=(ge,Je="info",te=3500)=>{v({text:ge,tipo:Je}),te&&setTimeout(()=>v({text:"",tipo:""}),te)},Ve=async()=>{try{xe(!1),await r(),i("/")}catch(ge){console.error("logout:",ge),Te("Error cerrando sesión.","error",5e3)}},Ge=ge=>k(Je=>({...Je,[ge.target.name]:ge.target.value})),rt=ge=>{var xt;const Je=(xt=ge.target.files)==null?void 0:xt[0];if(!Je)return;A(Je);const te=URL.createObjectURL(Je);R(te)},Ke=()=>{j&&URL.revokeObjectURL(j),A(null),R(null)},ct=async()=>{if(!w)return Te("Selecciona una imagen primero.","error");g(!0);try{const ge=await aH(w);await n({fotoURL:ge}),await Uc(t,{photoURL:ge}),k(Je=>({...Je,fotoURL:ge})),Ke(),Te("Foto actualizada.","success")}catch(ge){console.error("uploadLocalImage:",ge),Te("Error subiendo imagen.","error",5e3)}finally{g(!1)}},kt=async()=>{g(!0);try{await n({telefono:b.telefono,direccion:b.direccion,displayName:b.nombre});const ge={telefono:b.telefono,direccion:b.direccion,displayName:b.nombre,updatedAt:new Date};try{await Xn(at(De,"users",t.uid),ge,{merge:!0})}catch(te){console.warn("No se pudo escribir users/{uid}:",te)}try{await Xn(at(De,"usuarios",t.uid),ge,{merge:!0})}catch(te){console.warn("No se pudo escribir usuarios/{uid}:",te)}const Je={};t.displayName!==b.nombre&&(Je.displayName=b.nombre),Object.keys(Je).length&&await Uc(t,Je),h(!1),Te("Perfil guardado.","success")}catch(ge){console.error("Error guardando perfil:",ge),Te("Error guardando perfil.","error")}finally{g(!1)}},mt=async()=>{g(!0);try{await Uc(t,{photoURL:""}),await n({fotoURL:""}),k(ge=>({...ge,fotoURL:""})),Ke(),Te("Imagen de perfil removida.","success")}catch(ge){console.error("confirmRemoveImage:",ge),Te("Error removiendo imagen.","error")}finally{g(!1),U(!1)}},ht=async ge=>{try{const Je=typeof ge=="string"?ge:(ge==null?void 0:ge.direccionCompleta)||"",te=ge&&ge.metodoEntrega?ge.metodoEntrega:"domicilio";We(!0),await n({direccion:Je,metodoEntrega:te});const xt={direccion:Je,metodoEntrega:te,updatedAt:new Date};try{await Xn(at(De,"users",t.uid),xt,{merge:!0})}catch(be){console.warn("No se pudo escribir users/{uid}:",be)}try{await Xn(at(De,"usuarios",t.uid),xt,{merge:!0})}catch(be){console.warn("No se pudo escribir usuarios/{uid}:",be)}try{let be=await ps(at(De,"users",t.uid));if(be.exists()||(be=await ps(at(De,"usuarios",t.uid))),be&&be.exists()){const Qe=be.data()||{};await n({direccion:Qe.direccion||Je,metodoEntrega:Qe.metodoEntrega||te})}}catch(be){console.warn("No se pudo releer documento de usuario:",be)}M&&I(!1),await J(),k(be=>({...be,direccion:Je})),Te("Dirección seleccionada y guardada.","success"),window.location.reload()}catch(Je){console.error("handleSeleccionarDireccion error:",Je),We(!1),Te("Error seleccionando dirección.","error",5e3)}},Dt=async ge=>{try{if(await Cm(at(De,"direcciones",ge)),t!=null&&t.direccion){const Je=z.find(te=>te.id===ge);Je&&t.direccion===Je.direccionCompleta&&(await n({direccion:"",metodoEntrega:"",selectedDeliveryMethod:""}),setTimeout(()=>{window.location.reload()},1e3))}await J(),Te("Dirección eliminada correctamente.","success")}catch(Je){console.error("eliminarDireccion:",Je),Te("Error eliminando dirección.","error")}},re=ge=>{oe(ge),de(!0)},qe=()=>{de(!1),oe(null)},Se=()=>{ce&&(Dt(ce),de(!1),oe(null))};return!t||!e?a.jsx("main",{className:"min-h-screen flex items-start justify-center bg-slate-50",style:{paddingTop:"var(--content-offset, 100px)"},children:a.jsx("p",{className:"text-lg animate-pulse",children:"Cargando perfil..."})}):a.jsxs(ne.main,{className:"profile-page",variants:uH,initial:"hidden",animate:"enter",exit:"exit",children:[a.jsx("div",{className:"navigation-container",children:a.jsxs("nav",{className:"profile-dock","aria-label":"Navegación de perfil",children:[a.jsxs("button",{className:`dock-btn ${o==="perfil"?"active":""}`,onClick:()=>c("perfil"),"aria-label":"Perfil",children:[a.jsx(Ff,{name:"perfil"}),a.jsx("span",{children:"Perfil"})]}),a.jsxs("button",{className:`dock-btn ${o==="historial"?"active":""}`,onClick:()=>c("historial"),"aria-label":"Historial",children:[a.jsx(Ff,{name:"historial"}),a.jsx("span",{children:"Historial"})]}),a.jsxs("button",{className:`dock-btn ${o==="direcciones"?"active":""}`,onClick:()=>c("direcciones"),"aria-label":"Direcciones",children:[a.jsx(Ff,{name:"direcciones"}),a.jsx("span",{children:"Direcciones"})]}),a.jsxs("button",{className:"dock-btn danger",onClick:()=>xe(!0),"aria-label":"Cerrar sesión",children:[a.jsx(Ff,{name:"logout"}),a.jsx("span",{children:"Salir"})]})]})}),a.jsx("main",{className:"main-content",children:a.jsx("div",{className:"main-card",children:a.jsxs(Gt,{mode:"wait",children:[o==="perfil"&&a.jsxs(ne.section,{variants:bd,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsxs("div",{className:"profile-header big",children:[a.jsx("div",{className:"avatar-block large",children:a.jsx("img",{src:Ee,alt:"Avatar",className:"avatar-img"})}),a.jsxs("div",{className:"profile-meta big",children:[a.jsx("h1",{className:"profile-name",children:$e}),a.jsx("p",{className:"profile-email",children:b.email}),a.jsxs("p",{className:"muted small",children:["UID: ",a.jsx("span",{className:"mono",children:t.uid})]}),a.jsxs("div",{className:"profile-actions",children:[a.jsxs("label",{className:"btn btn-primary upload-btn",children:["Subir foto",a.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:rt,className:"hidden","aria-label":"Subir foto"})]}),a.jsx("button",{className:"btn btn-ghost",onClick:()=>U(!0),children:"Quitar"}),j&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-success",onClick:ct,disabled:f,children:"Guardar foto"}),a.jsx("button",{className:"btn btn-outline",onClick:Ke,children:"Cancelar"})]})]})]})]}),a.jsxs("div",{className:"form-grid big",children:[a.jsxs("div",{className:"form-row",children:[a.jsx("label",{children:"Nombre"}),a.jsx("input",{name:"nombre",value:b.nombre,onChange:Ge,disabled:!u})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("label",{children:"Email"}),a.jsx("input",{name:"email",value:b.email,disabled:!0})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("label",{children:"Teléfono"}),a.jsx("input",{name:"telefono",value:b.telefono,onChange:Ge,disabled:!u})]}),a.jsxs("div",{className:"form-row full",children:[a.jsx("label",{children:"Dirección completa"}),a.jsx("textarea",{name:"direccion",value:b.direccion,onChange:Ge,disabled:!u,rows:4}),a.jsx("p",{className:"muted hint",children:'Pulsa "Editar" para modificar.'})]}),a.jsx("div",{className:"form-actions",children:u?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:kt,className:"btn btn-success",disabled:f,children:"Guardar"}),a.jsx("button",{onClick:()=>{h(!1),Ke()},className:"btn btn-ghost",children:"Cancelar"})]}):a.jsx("button",{onClick:()=>h(!0),className:"btn btn-primary",children:"Editar perfil"})})]})]},"perfil"),o==="historial"&&a.jsxs(ne.section,{variants:bd,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsx("h2",{className:"section-title large",children:"Historial de compras"}),a.jsx(dH,{historial:L})]},"historial"),o==="direcciones"&&a.jsxs(ne.section,{variants:bd,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsxs("div",{className:"direcciones-head",children:[a.jsx("h2",{className:"section-title large",children:"Direcciones"}),a.jsx("div",{children:a.jsx("button",{className:"btn btn-primary",onClick:()=>{N(null),I(!0)},children:"Añadir dirección"})})]}),a.jsxs("div",{className:"cards-list",children:[a.jsxs("div",{className:"address-card large",children:[a.jsxs("div",{className:"address-content",children:[a.jsx("div",{className:"address-title",children:"Recoger en: Playcenter Universal Santiago"}),a.jsx("div",{className:"muted break-words",children:ly.direccionCompleta}),a.jsx("a",{href:ly.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),a.jsx("div",{className:"address-actions",children:a.jsx("button",{onClick:()=>ht(ly),className:"btn btn-success",children:"Seleccionar"})})]}),z.length===0?a.jsx("div",{className:"empty",children:"No tienes direcciones guardadas."}):z.map(ge=>a.jsxs("div",{className:"address-card large",children:[a.jsxs("div",{className:"address-content",children:[a.jsx("div",{className:"address-title break-words",children:ge.direccionCompleta||`${ge.numeroCalle||""} ${ge.numeroCasa?"Casa "+ge.numeroCasa:""}, ${ge.ciudad||""}, ${ge.provincia||""}`}),a.jsxs("div",{className:"muted",children:["Método: ",ge.metodoEntrega||"domicilio"]}),ge.referencia&&a.jsxs("div",{className:"muted",children:["Ref: ",ge.referencia]}),ge.ubicacion&&a.jsx("a",{href:ge.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),a.jsxs("div",{className:"address-actions",children:[a.jsx("button",{onClick:()=>{N(ge),I(!0)},className:"address-action-btn edit-btn","aria-label":"Editar dirección",children:a.jsx(RC,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ht(ge),className:"address-action-btn select-btn","aria-label":"Seleccionar dirección",children:a.jsx(Ls,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>re(ge.id),className:"address-action-btn delete-btn","aria-label":"Eliminar dirección",children:a.jsx(MC,{className:"w-4 h-4"})})]})]},ge.id))]}),M&&a.jsx(LC,{abierto:M,onClose:async()=>{I(!1),N(null),await J()},usuarioId:t.uid,direccionEditar:T,actualizarLista:J})]},"direcciones")]})})}),a.jsx(ak,{abierto:V,titulo:"Quitar imagen de perfil",descripcion:"Se quitará la URL de tu perfil (no borra el archivo en Cloudinary).",onCancel:()=>U(!1),onConfirm:mt,dangerText:"Quitar imagen"}),a.jsx(ak,{abierto:O,titulo:"Cerrar sesión",descripcion:"¿Estás seguro que quieres cerrar sesión?",onCancel:()=>xe(!1),onConfirm:Ve,dangerText:"Cerrar sesión"}),a.jsx(hH,{visible:Pe,text:"Guardando..."}),a.jsx(Gt,{children:He&&a.jsx(ne.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:a.jsxs(ne.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[a.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"¿Eliminar dirección?"}),a.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"¿Estás seguro que quieres eliminar esta dirección? Esta acción no se puede deshacer."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:qe,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:ge=>ge.target.style.backgroundColor="#f9fafb",onMouseOut:ge=>ge.target.style.backgroundColor="white",children:"Cancelar"}),a.jsx("button",{onClick:Se,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:ge=>ge.target.style.backgroundColor="#dc2626",onMouseOut:ge=>ge.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),y.text&&a.jsx(ne.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`toast ${y.tipo==="success"?"toast-success":y.tipo==="error"?"toast-error":"toast-info"}`,children:y.text})]})}function pH({productoActual:t,onProductoClick:e}){const{products:n,loading:r}=YT(t==null?void 0:t.categoria),i=S.useRef(null),o=S.useRef(null),c=S.useRef(!1),u=S.useRef(!1),h=S.useCallback(()=>{const R=i.current;if(!R)return 0;const L=R.querySelector(".prl-card");if(!L)return 0;const D=getComputedStyle(R),z=parseInt(D.getPropertyValue("--gap")||"16",10)||16;return L.getBoundingClientRect().width+z},[]),f=S.useCallback(()=>{const R=i.current;if(!R)return;const L=h();if(!L)return;const z=Math.round(R.scrollLeft/L)*L;R.classList.add("no-smooth"),R.scrollTo({left:z}),setTimeout(()=>R.classList.remove("no-smooth"),40)},[h]),g=()=>{c.current||(o.current&&clearTimeout(o.current),o.current=setTimeout(f,90))},y=()=>{var R;c.current=!0,u.current=!1,(R=i.current)==null||R.classList.add("no-smooth")},v=R=>{c.current&&(Math.abs(R.movementX)>2||Math.abs(R.movementY)>2)&&(u.current=!0)},b=()=>{c.current=!1,f()};S.useEffect(()=>()=>o.current&&clearTimeout(o.current),[]);const k=R=>{R&&(e?e(R):window.location.href=`/producto/${R}`)},w=R=>{const L=i.current;if(L&&L.firstChild){const D=L.firstChild.getBoundingClientRect().width,z=parseInt(getComputedStyle(L).getPropertyValue("--gap")||"16",10)||16,G=R*(D+z);L.scrollBy({left:G,behavior:"smooth"})}},A=S.useMemo(()=>!t||!n?[]:n.filter(R=>(R==null?void 0:R.id)!==(t==null?void 0:t.id)).slice(0,20),[n,t==null?void 0:t.id]),j=R=>{const L=Math.round(Number(R)||0);try{return new Intl.NumberFormat("es-DO").format(L)}catch{return String(L)}};return r?a.jsxs("div",{className:"productos-relacionados-container",children:[a.jsx("h3",{className:"prl-title",children:"Productos Relacionados"}),a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})]}):a.jsx("section",{className:"prl-section","aria-label":"Productos relacionados",style:{overflow:"visible"},children:a.jsxs("div",{className:"prl-container",style:{overflow:"visible"},children:[a.jsx("h2",{className:"prl-title",children:"Productos relacionados"}),a.jsxs("div",{className:"prl-wrapper","aria-roledescription":"carrusel",style:{overflow:"visible"},children:[a.jsx("button",{className:"prl-arrow left",onClick:()=>w(-1),"aria-label":"Anterior",type:"button",children:a.jsx(mv,{size:16})}),a.jsx("div",{ref:i,className:"prl-rail",style:{overflowY:"visible"},onScroll:g,onPointerDown:y,onPointerMove:v,onPointerUp:b,onPointerCancel:b,onPointerLeave:b,children:A.length>0?A.map(R=>{var G;const L=(R==null?void 0:R.imagen)||((G=R==null?void 0:R.imagenes)==null?void 0:G[0])||"",D=(R==null?void 0:R.nombre)||"Producto",z=Number(R==null?void 0:R.precio)||0;return a.jsxs("article",{className:"prl-card",role:"group","aria-label":D,onClick:()=>{u.current||k(R.slug||R.id)},children:[a.jsx("div",{className:"prl-imgbox",children:L?a.jsx("img",{src:L,alt:D,className:"prl-img",loading:"lazy",draggable:"false",decoding:"async"}):a.jsx("div",{className:"prl-img-fallback","aria-hidden":!0})}),a.jsxs("div",{className:"prl-meta",children:[a.jsx("h3",{className:"prl-name",title:D,children:D}),a.jsx("div",{className:"prl-price",children:z>0?a.jsxs("span",{children:["DOP ",a.jsx("strong",{children:j(z)})]}):a.jsx("span",{className:"prl-price-muted",children:"Sin precio"})})]})]},R==null?void 0:R.id)}):a.jsx("div",{className:"prl-empty",children:"No hay productos relacionados."})}),a.jsx("button",{className:"prl-arrow right",onClick:()=>w(1),"aria-label":"Siguiente",type:"button",children:a.jsx(gv,{size:16})})]})]})})}const mH="https://playcenter-universal.onrender.com",gH="https://ecommerce.cardnet.com.do/authorize";function Iv({className:t,total:e,label:n}){const[r,i]=S.useState(null),o=typeof e=="number"?e/100:null,c=Number.isFinite(o)?new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(o):null,u=n||(c?`Comprar ahora • ${c}`:"Comprar ahora"),h=async()=>{try{const f=document.querySelector(".pay-btn");f&&(f.disabled=!0,f.classList.add("loading"));const y=await(await fetch(`${mH}/cardnet/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({total:e})})).json();if(!y.SESSION){alert("❌ No se pudo crear la sesión de pago"),f&&(f.disabled=!1,f.classList.remove("loading"));return}i(y.SESSION),document.getElementById("cardnetForm").submit()}catch{alert("❌ No se pudo conectar al backend");const g=document.querySelector(".pay-btn");g&&(g.disabled=!1,g.classList.remove("loading"))}};return a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:h,className:`pay-btn ${t||""}`,children:[a.jsx("span",{className:"btn-text",children:u}),a.jsxs("div",{className:"icon-container",children:[a.jsx("svg",{viewBox:"0 0 24 24",className:"icon card-icon",children:a.jsx("path",{d:"M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18C2,19.11 2.89,20 4,20H20C21.11,20 22,19.11 22,18V6C22,4.89 21.11,4 20,4Z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon payment-icon",children:a.jsx("path",{d:"M2,17H22V21H2V17M6.25,7H9V6H6V3H18V6H15V7H17.75L19,17H5L6.25,7M9,10H15V8H9V10M9,13H15V11H9V13Z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon dollar-icon",children:a.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon wallet-icon default-icon",children:a.jsx("path",{d:"M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.9 10,8V16A2,2 0 0,0 12,18M12,16H22V8H12M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon check-icon",children:a.jsx("path",{d:"M9,16.17L4.83,12L3.41,13.41L9,19L21,7L19.59,5.59L9,16.17Z",fill:"currentColor"})})]})]}),r&&a.jsx("form",{id:"cardnetForm",action:gH,method:"post",children:a.jsx("input",{type:"hidden",name:"SESSION",value:r})})]})}const yH=({product:t,selectedVariant:e=null,cartQuantity:n=0,isFavorite:r=!1,isInStock:i=!0,onAddToCart:o,onRemoveFromCart:c,onToggleFavorite:u,onShare:h,onContact:f,onBuyNow:g,className:y=""})=>{const[v,b]=S.useState(!1),[k,w]=S.useState(1),[A,j]=S.useState(!1),[R,L]=S.useState(!0),[D,z]=S.useState(0);S.useEffect(()=>{const Pe=()=>{const We=window.scrollY;We>D&&We>100?L(!1):L(!0),z(We)};return window.addEventListener("scroll",Pe,{passive:!0}),()=>window.removeEventListener("scroll",Pe)},[D]);const G=()=>e&&e.precio?parseFloat(e.precio):parseFloat(t.precio)||0,M=Pe=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:0,maximumFractionDigits:2}).format(Pe),I=()=>{o==null||o(t,e,k),j(!0),setTimeout(()=>j(!1),2e3),b(!1)},T=()=>{const Pe=(e==null?void 0:e.cantidad)||t.cantidad||99;w(We=>Math.min(We+1,Pe))},N=()=>{w(Pe=>Math.max(Pe-1,1))},V=async()=>{if(navigator.share)try{await navigator.share({title:t.nombre,text:`Mira este producto: ${t.nombre}`,url:window.location.href})}catch{h==null||h(t)}else h==null||h(t)},U=G(),O=t.oferta&&t.precioOferta,xe=O?parseFloat(t.precioOferta):null;return a.jsxs(a.Fragment,{children:[a.jsx(Gt,{children:R&&a.jsxs(ne.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:`
              fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-gray-200 
              shadow-lg safe-area-pb ${y}
            `,children:[a.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-2",children:O?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-lg font-bold text-red-600",children:M(xe)}),a.jsx("span",{className:"text-sm text-gray-500 line-through",children:M(U)}),a.jsxs("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full font-medium",children:["-",Math.round((U-xe)/U*100),"%"]})]}):a.jsx("span",{className:"text-lg font-bold text-gray-900",children:M(U)})}),a.jsx("div",{className:"flex items-center space-x-1 text-xs",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-green-600",children:"En stock"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{className:"text-red-600",children:"Agotado"})]})})]})}),a.jsx("div",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>u==null?void 0:u(t),className:`
                      p-3 rounded-full border-2 transition-all
                      ${r?"border-red-500 bg-red-50 text-red-500":"border-gray-300 bg-white text-gray-600 hover:border-red-300 hover:text-red-500"}
                    `,children:a.jsx(w$,{className:`w-5 h-5 ${r?"fill-current":""}`})}),a.jsx("button",{onClick:V,className:"p-3 rounded-full border-2 border-gray-300 bg-white text-gray-600 hover:border-blue-300 hover:text-blue-500 transition-all",children:a.jsx(V$,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>f==null?void 0:f(t),className:"p-3 rounded-full border-2 border-gray-300 bg-white text-gray-600 hover:border-green-300 hover:text-green-500 transition-all",children:a.jsx(j$,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 flex space-x-2",children:[n>0?a.jsxs("div",{className:"flex-1 flex items-center bg-gray-100 rounded-lg",children:[a.jsx("button",{onClick:()=>c==null?void 0:c(t,e),className:"p-3 text-gray-600 hover:text-red-500 transition-colors",children:a.jsx(PN,{className:"w-5 h-5"})}),a.jsx("span",{className:"flex-1 text-center font-medium text-gray-900",children:n}),a.jsx("button",{onClick:()=>o==null?void 0:o(t,e,1),className:"p-3 text-gray-600 hover:text-blue-500 transition-colors",children:a.jsx(RN,{className:"w-5 h-5"})})]}):a.jsxs("button",{onClick:()=>b(!0),disabled:!i,className:`
                        flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg font-medium transition-all
                        ${i?"bg-blue-500 hover:bg-blue-600 text-white shadow-md hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"}
                      `,children:[a.jsx($1,{className:"w-5 h-5"}),a.jsx("span",{children:i?"Agregar":"Agotado"})]}),i&&a.jsx("button",{onClick:()=>g==null?void 0:g(t,e,1),className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-all shadow-md hover:shadow-lg",children:"Comprar"})]})]})}),a.jsx("div",{className:"px-4 pb-2",children:a.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-600",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(DC,{className:"w-3 h-3"}),a.jsx("span",{children:"Envío gratis"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(zd,{className:"w-3 h-3"}),a.jsx("span",{children:"Compra segura"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Lm,{className:"w-3 h-3"}),a.jsx("span",{children:"Entrega rápida"})]})]})})]})}),a.jsx(Gt,{children:v&&a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-end",onClick:()=>b(!1),children:a.jsxs(ne.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"w-full bg-white rounded-t-2xl p-6 safe-area-pb",onClick:Pe=>Pe.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Seleccionar cantidad"}),a.jsx("button",{onClick:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full",children:a.jsx(bv,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex items-center space-x-3 mb-6 p-3 bg-gray-50 rounded-lg",children:[a.jsx("img",{src:t.imagen||"/placeholder.jpg",alt:t.nombre,className:"w-12 h-12 object-contain rounded-lg bg-white"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-1",children:t.nombre}),e&&a.jsx("p",{className:"text-xs text-gray-600",children:e.color||e.name}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:M(U)})]})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[a.jsx("button",{onClick:N,disabled:k<=1,className:"w-12 h-12 rounded-full border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:border-blue-500 hover:text-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:a.jsx(PN,{className:"w-5 h-5"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:k}),a.jsx("div",{className:"text-xs text-gray-500",children:k===1?"unidad":"unidades"})]}),a.jsx("button",{onClick:T,className:"w-12 h-12 rounded-full border-2 border-gray-300 flex items-center justify-center text-gray-600 hover:border-blue-500 hover:text-blue-500 transition-all",children:a.jsx(RN,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M(U*k)})]}),a.jsx("button",{onClick:I,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-4 rounded-lg font-medium text-lg transition-all shadow-md hover:shadow-lg",children:"Agregar al carrito"})]})})}),a.jsx(Gt,{children:A&&a.jsx(ne.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 left-4 right-4 z-50 bg-green-500 text-white p-4 rounded-lg shadow-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(Ls,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:"¡Agregado al carrito!"}),a.jsxs("div",{className:"text-sm opacity-90",children:[k," ",k===1?"unidad":"unidades"," de ",t.nombre]})]})]})})}),a.jsx("style",{jsx:!0,children:`
        .safe-area-pb {
          padding-bottom: env(safe-area-inset-bottom);
        }
      `})]})};function ok(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function vH(t){try{let e=String(t);return e=e.replace(/<\/(?:script|style)>/gi,"").replace(/<(?:script|style)[^>]*>[\s\S]*?<\/(?:script|style)>/gi,""),e=e.replace(/ on[a-z]+\s*=\s*"[^"]*"/gi,""),e=e.replace(/ on[a-z]+\s*=\s*'[^']*'/gi,""),e=e.replace(/ on[a-z]+\s*=\s*[^\s>]+/gi,""),e=e.replace(/javascript:\s*/gi,""),e}catch{return String(t)}}function lk(t,e,n){try{const r={mode:t,items:e,total:n,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(r))}catch{}}function xH(){var aa;const{carrito:t,agregarAlCarrito:e,quitarDelCarrito:n,eliminarUnidadDelCarrito:r}=Xd(),{usuario:i}=ii(),{abrirModal:o}=ru(),{id:c}=Gv(),u=wi(),[h,f]=S.useState(!1),[g,y]=S.useState(0),[v,b]=S.useState(0),[k,w]=S.useState(!1),[A,j]=S.useState(0),[R,L]=S.useState(!1),[D,z]=S.useState(!0),[G,M]=S.useState(0),[I,T]=S.useState(!1),[N,V]=S.useState(!1),[U,O]=S.useState(!1),[xe,Pe]=S.useState("images"),[We,He]=S.useState(0),[de,ce]=S.useState(1),[oe,H]=S.useState({x:0,y:0}),[J,Ee]=S.useState(0),[$e,Te]=S.useState(1),Ve=S.useRef(0),Ge=S.useRef(0),rt=S.useRef(null),Ke=S.useRef(null),ct=S.useRef(null),kt=S.useRef(null),mt=S.useRef(!1),ht=S.useRef({x:50,y:50}),[Dt,re]=S.useState(!1),[qe,Se]=S.useState(""),[ge,Je]=S.useState({w:200,h:200}),{product:te,loading:xt,error:be}=UO(c),Qe=()=>{var $,fe,Ye,wt;return(fe=($=pt==null?void 0:pt.imagenPrincipal)==null?void 0:$[0])!=null&&fe.url?pt.imagenPrincipal[0].url:(wt=(Ye=te.imagenPrincipal)==null?void 0:Ye[0])!=null&&wt.url?te.imagenPrincipal[0].url:pt!=null&&pt.imagen?pt.imagen:te.imagen?te.imagen:null},Y=(Array.isArray(te==null?void 0:te.variantes)?te.variantes:[]).filter($=>$&&typeof $.color=="string"&&$.color.trim());S.useEffect(()=>{Y.length>0&&(A<0||A>=Y.length)&&j(0)},[Y.length]),S.useEffect(()=>{ce(1),H({x:0,y:0})},[We,xe]),S.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<1280){const $=document.querySelector(".mobile-tablet-thumbs"),fe=$&&$.querySelector(".mt-thumb.active");$&&fe&&typeof fe.scrollIntoView=="function"&&fe.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[v]),S.useEffect(()=>{let $=window.scrollY;const fe=()=>{const Ye=window.scrollY;Ye>$&&Ye>100?z(!1):z(!0),$=Ye};return window.addEventListener("scroll",fe,{passive:!0}),()=>window.removeEventListener("scroll",fe)},[]);const pe=()=>{window.history&&window.history.length>1?u(-1):u("/productos")},Re=($,fe=null,Ye=1)=>{if(!i){o();return}const wt=fe||ke;e($,wt,Ye);const zt=t.find(Vt=>{var dn;return Vt.id===$.id&&(!wt||((dn=Vt.variante)==null?void 0:dn.color)===(wt==null?void 0:wt.color))});M(((zt==null?void 0:zt.cantidad)||0)+Ye)},se=$=>{L(!R),console.log("Toggled favorite for:",$.nombre)},Ue=$=>{j($),y(0),b(0)};if(xt)return null;if(be||!te)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-700 p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"mb-4",children:a.jsx("svg",{className:"mx-auto h-16 w-16 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("p",{className:"text-lg sm:text-xl font-semibold mb-2 text-red-600",children:be?"Error al cargar el producto":"Producto no encontrado"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:be?`Error: ${be}`:`No se pudo encontrar el producto con ID: ${c}`}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx("button",{onClick:pe,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver"}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Recargar"})]})]})});const ke=Y[A]||null,pt=ke;S.useEffect(()=>{if(te){const $=t.find(fe=>{var Ye;return fe.id===te.id&&(!ke||((Ye=fe.variante)==null?void 0:Ye.color)===(ke==null?void 0:ke.color))});M(($==null?void 0:$.cantidad)||0)}},[t,te,ke]);const dt=($=>{var fe;try{if(!$)return!1;const Ye=Array.isArray($.imagenPrincipal)&&((fe=$.imagenPrincipal[0])==null?void 0:fe.url)||$.imagen,wt=Array.isArray($.galeriaImagenes)&&$.galeriaImagenes.length>0||Array.isArray($.imagenes)&&$.imagenes.length>0,zt=Array.isArray($.media)?$.media.some(Vt=>Vt&&Vt.type==="image"&&Vt.url):!1;return!!(Ye||wt||zt)}catch{return!1}})(ke)?ke:null,Xt=$=>{try{const fe=($??"").toString().trim();return fe||null}catch{return null}},Cn=Xt(ke==null?void 0:ke.color),jn=t.find($=>$.id===te.id&&Xt($.colorSeleccionado)===Cn),Ln=(jn==null?void 0:jn.cantidad)||0,lr=()=>{if(!i){f(!0);return}if(!jn){const $={...te,cantidad:1,precio:ke&&Number(ke.precio)?Number(ke.precio):Number(te.precio)||0,cantidadProducto:Number.isFinite(le)?le:void 0};e($,Cn)}},yr=()=>{if(!i){f(!0);return}const $={...te,precio:ke&&Number(ke.precio)?Number(ke.precio):Number(te.precio)||0,cantidadProducto:Number.isFinite(le)?le:void 0};e($,Cn)},W=()=>{if(!i){f(!0);return}r(te.id,Cn)},q=()=>{if(!i){f(!0);return}n(te.id,Cn)},le=(ke==null?void 0:ke.cantidad)!==void 0?Number(ke.cantidad)||0:te.cantidad!==void 0?Number(te.cantidad)||0:1/0,ae=(te==null?void 0:te.activo)!==!1&&le>0,Me=Number.isFinite(le)?Math.max(0,le-((jn==null?void 0:jn.cantidad)||0)):1/0,Oe=ke&&ke.precio!==void 0?Number(ke.precio):NaN,ye=Number.isFinite(Oe)&&Oe>0?Oe:Number(te.precio)||0,me=[{id:te.id,nombre:te.nombre,precio:ye,cantidad:1}],Ae=$=>{y($),w(!0)},Ze=()=>{w(!1)},ot=(($,fe)=>{var Es,kr;const Ye=ln=>ln?String(ln).split("?")[0].split("#")[0].trim():"",wt=ln=>{try{if(!ln)return"";if(typeof ln=="string"){const xr=String(ln).trim();return/^(https?:|blob:|data:|\/)/i.test(xr)?xr:`/${xr}`}if(typeof ln=="object"&&ln!==null){const xr=String(ln.url||"").trim();return xr?/^(https?:|blob:|data:|\/)/i.test(xr)?xr:`/${xr}`:""}const Sr=String(ln||"").trim();return/^(https?:|blob:|data:|\/)/i.test(Sr)?Sr:`/${Sr}`}catch{return""}},zt=ln=>(Array.isArray(ln)?ln:[]).map(wt).filter(Boolean).filter(Sr=>!/\.(mp4|mov|avi|mkv|webm|m4v)$/i.test(Sr.split("?")[0])).map(Sr=>Sr),Vt=[],dn=wt((Es=fe==null?void 0:fe.imagenPrincipal)==null?void 0:Es[0])||wt(fe==null?void 0:fe.imagen),Un=dn?"":wt((kr=$==null?void 0:$.imagenPrincipal)==null?void 0:kr[0])||wt($==null?void 0:$.imagen),vr=zt(Array.isArray(fe==null?void 0:fe.galeriaImagenes)&&fe.galeriaImagenes.length?fe.galeriaImagenes:Array.isArray(fe==null?void 0:fe.media)&&fe.media.length?fe.media.filter(ln=>(ln==null?void 0:ln.type)==="image"):fe==null?void 0:fe.imagenes),$n=vr.length?[]:zt(Array.isArray($==null?void 0:$.galeriaImagenes)&&$.galeriaImagenes.length?$.galeriaImagenes:Array.isArray($==null?void 0:$.media)&&$.media.length?$.media.filter(ln=>(ln==null?void 0:ln.type)==="image"):$==null?void 0:$.imagenes),En=[dn,Un,...vr,...$n].filter(Boolean),Qt=new Set;for(const ln of En){const Sr=Ye(ln).toLowerCase();!Sr||Qt.has(Sr)||(Qt.add(Sr),!/\.(mp4|mov|avi|mkv|webm|m4v)$/i.test(Sr)&&Vt.push(ln))}return Vt})(te,dt),je=ot.length>0,ze=!!(Y&&Y.length>1),Lt=je||ze,jt=($,fe=null)=>{const Ye=$||"",wt=/(\.mp4|\.mov|\.avi|\.mkv|\.webm|\.m4v)$/i.test(Ye.split("?")[0]);return{type:fe||(wt?"video":"image"),url:Ye}},en=[...Array.isArray(dt==null?void 0:dt.videoUrls)?dt.videoUrls:[],...((dt==null?void 0:dt.media)||[]).filter($=>$&&$.type==="video"&&$.url).map($=>$.url)],Wt=[...Array.isArray(te==null?void 0:te.videoUrls)?te.videoUrls:[],...((te==null?void 0:te.media)||[]).filter($=>$&&$.type==="video"&&$.url).map($=>$.url)],Vn=[...ot.map($=>jt($,"image")),...en.map($=>jt($,"video")),...Wt.map($=>jt($,"video"))].filter($=>$&&$.url),it=new Set,tn=Vn.filter($=>{const fe=($.url||"").split("?")[0].split("#")[0].trim().toLowerCase();return!fe||it.has(fe)?!1:(it.add(fe),!0)}),Kt=tn.filter($=>$.type==="image"),cr=tn.filter($=>$.type==="video"),Lr=te.videoUrl||Array.isArray(te.videoAcercaArticulo)&&((aa=te.videoAcercaArticulo[0])==null?void 0:aa.url)||te.video||null,si=(Array.isArray(te==null?void 0:te.videoAcercaArticulo)?te.videoAcercaArticulo.map($=>typeof $=="string"?$:$&&$.url?$.url:"").filter(Boolean):Lr?[Lr]:[]).map($=>({type:"video",url:$})),ys=si.length>0,Xi=$=>$?String($).split("?")[0].split("#")[0].trim().toLowerCase():"",Vl=new Set(ot.map(Xi)),on=(Array.isArray(te.imagenesExtra)?te.imagenesExtra:[]).map($=>typeof $=="string"?$:$&&$.url?$.url:"").filter(Boolean),Fo=Lr?Xi(Lr):null,vs=new Set,ai=on.filter(Boolean).filter($=>{const fe=Xi($);return Vl.has(fe)||Fo&&fe===Fo||vs.has(fe)?!1:(vs.add(fe),!0)}),Qr=ai.filter($=>{var Ye;const fe=((Ye=$.split(".").pop())==null?void 0:Ye.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","bmp","svg"].includes(fe)});ai.filter($=>{var Ye;const fe=((Ye=$.split(".").pop())==null?void 0:Ye.toLowerCase())||"";return["mp4","mov","avi","mkv","webm","m4v"].includes(fe)}),ai.filter($=>{var Ye;const fe=((Ye=$.split(".").pop())==null?void 0:Ye.toLowerCase())||"";return!["jpg","jpeg","png","gif","webp","bmp","svg","mp4","mov","avi","mkv","webm","m4v"].includes(fe)}),ai.length>0;const La=ai.slice(0,3),Fl=La.length>0,Yr=[...ot,...Qr.slice(0,3)],Xr=(()=>{const $=new Set;return[...cr,...si].filter(Ye=>{const wt=(Ye.url||"").split("?")[0].split("#")[0].trim().toLowerCase();return!wt||$.has(wt)?!1:($.add(wt),!0)})})(),er=[...Kt,...Xr],Fn=Math.max(0,Math.min(v,Math.max(0,er.length-1))),Va=()=>{y($=>$===Yr.length-1?0:$+1)},Uo=()=>{y($=>$===0?Yr.length-1:$-1)},Ul=$=>{Ve.current=$.touches[0].clientX,Ge.current=0},Fa=$=>{Ge.current=$.touches[0].clientX-Ve.current},Ua=()=>{Ge.current>40?Uo():Ge.current<-40&&Va(),Ve.current=0,Ge.current=0},xs=()=>{if(typeof window>"u"||window.innerWidth<1280)return;const $=er&&er[Fn]||null;if(!$||$.type!=="image")return;const fe=$.url;Se(fe);const Ye=Ke.current;if(Ye&&Ye.naturalWidth&&Ye.naturalHeight){const wt=Ye.getBoundingClientRect(),zt=wt.width||Ye.clientWidth||0,Vt=wt.height||Ye.clientHeight||0,dn=Ye.naturalWidth,Un=Ye.naturalHeight,vr=dn/Math.max(1,zt),$n=Un/Math.max(1,Vt),En=Math.min(vr,$n),Qt=Math.min(4,Math.max(2,En)),Es=En>0?Qt/En:2;Je({w:Math.round(dn*Es),h:Math.round(Un*Es)}),kt.current=wt}else Je({w:1e3,h:1e3}),kt.current=rt.current?rt.current.getBoundingClientRect():null;ht.current={x:50,y:50},re(!0),requestAnimationFrame(()=>{const wt=ct.current;wt&&(wt.style.backgroundPosition="50% 50%")})},ra=$=>{if(!Dt||typeof window<"u"&&window.innerWidth<1280)return;const fe=kt.current||Ke.current&&Ke.current.getBoundingClientRect()||rt.current&&rt.current.getBoundingClientRect();if(!fe)return;const Ye=Math.max(0,Math.min(100,($.clientX-fe.left)/fe.width*100)),wt=Math.max(0,Math.min(100,($.clientY-fe.top)/fe.height*100));ht.current={x:Ye,y:wt},mt.current||(mt.current=!0,requestAnimationFrame(()=>{mt.current=!1;const zt=ct.current;zt&&(zt.style.backgroundPosition=`${ht.current.x}% ${ht.current.y}%`)}))},mu=()=>{re(!1),kt.current=null},Ji=$=>{window.innerWidth>=1280||(Ve.current=$.touches[0].clientX,Ge.current=0)},Jr=$=>{if(window.innerWidth>=1280||Ve.current===0)return;const fe=$.touches[0].clientX-Ve.current;Ge.current=fe,Math.abs(fe)>10&&$.preventDefault()},ia=$=>{if(window.innerWidth>=1280)return;Math.abs(Ge.current)>50&&(Ge.current>0&&g>0?y(g-1):Ge.current<0&&g<ot.length-1&&y(g+1)),Ve.current=0,Ge.current=0},Zi=($,fe)=>Math.sqrt(Math.pow(fe.clientX-$.clientX,2)+Math.pow(fe.clientY-$.clientY,2)),bs=$=>{if($.touches.length===2){const fe=Zi($.touches[0],$.touches[1]);Ee(fe),Te(de)}else $.touches.length===1&&(Ve.current=$.touches[0].clientX,Ge.current=0)},rn=$=>{if($.preventDefault(),$.touches.length===2){const Ye=Zi($.touches[0],$.touches[1])/J,wt=Math.min(Math.max($e*Ye,1),4);ce(wt)}else if($.touches.length===1)if(de>1){const fe=$.touches[0].clientX-Ve.current,Ye=$.touches[0].clientY-(Ve.current||0);H({x:fe,y:Ye})}else{const fe=$.touches[0].clientX-Ve.current;Ge.current=fe}},ws=$=>{if($.touches.length===0&&(de<1.1&&(ce(1),H({x:0,y:0})),de===1)){const Ye=er;Math.abs(Ge.current)>50&&(Ge.current>0&&We>0?He(We-1):Ge.current<0&&We<Ye.length-1&&He(We+1)),Ve.current=0,Ge.current=0}},Ot=async()=>{try{const $=typeof window<"u"?window.location.href:"",fe={title:(te==null?void 0:te.nombre)||"Producto",text:`Mira este producto: ${(te==null?void 0:te.nombre)||""}`,url:$};navigator.share?await navigator.share(fe):(await navigator.clipboard.writeText($),alert("Enlace copiado al portapapeles"))}catch($){console.log("Error al compartir:",$)}},_s=($,fe=0)=>{Pe($),He(Math.max(0,fe||0)),O(!0)},sa=()=>O(!1);return a.jsxs(a.Fragment,{children:[a.jsxs("main",{className:"vp-main min-h-screen bg-white px-4 sm:px-6 pb-16 text-gray-800 flex flex-col items-stretch overflow-visible",children:[a.jsx("div",{className:"hidden xl:flex w-full mb-3",children:a.jsxs("button",{type:"button",className:"vp-back-top-btn",onClick:pe,"aria-label":"Volver",children:[a.jsx(J0,{size:14}),a.jsx("span",{children:"Volver"})]})}),a.jsxs("section",{className:"w-full xl:grid xl:grid-cols-12 xl:gap-6 flex flex-col gap-8 overflow-visible",children:[Lt&&a.jsxs(ne.div,{className:"relative flex flex-col items-start w-full xl:col-span-6 overflow-visible",children:[er.length>0&&a.jsxs("div",{className:"amazon-gallery-layout flex",children:[a.jsx("div",{className:"amazon-thumbs-sidebar",children:er.map(($,fe)=>a.jsx("button",{type:"button",className:`amazon-thumb ${fe===Fn?"active":""}`,onClick:()=>{if(b(fe),$.type==="image"){const Ye=zt=>zt?String(zt).split("?")[0].split("#")[0].trim().toLowerCase():"",wt=ot.findIndex(zt=>Ye(zt)===Ye($.url));wt>=0&&y(wt)}},"aria-label":`Miniatura ${fe+1}`,children:$.type==="video"?a.jsxs("div",{className:"relative w-full h-full",children:[a.jsx("video",{src:$.url,className:"w-full h-full object-contain",muted:!0,preload:"metadata"}),a.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})})})]}):a.jsx("img",{src:$.url,alt:`Miniatura ${fe+1}`,className:"w-full h-full object-contain",loading:"lazy",onError:Ye=>{Ye.currentTarget.onerror=null,Ye.currentTarget.src="/Productos/N.jpg"}})},`thumb-${fe}`))}),a.jsxs("div",{className:"amazon-main-image-container",children:[a.jsx("button",{className:"vp-back-fab xl:hidden",onClick:pe,"aria-label":"Volver",type:"button",children:a.jsx(J0,{size:18})}),a.jsx("div",{ref:rt,className:`amazon-main-image-wrap ${Dt?"zooming":""}`,onMouseEnter:xs,onMouseMove:ra,onMouseLeave:mu,onClick:()=>{_s("images",Fn)},onTouchStart:Ji,onTouchMove:Jr,onTouchEnd:ia,role:"button","aria-label":"Ver imagen en pantalla completa",tabIndex:0,children:(()=>{const $=er[Fn];return $?$.type==="video"?a.jsx("video",{src:$.url,className:"w-full h-full object-contain",controls:!0,preload:"metadata"}):a.jsx("img",{ref:Ke,src:$.url,alt:te.nombre,className:"w-full h-full object-contain transition-opacity duration-300",draggable:!1,onError:fe=>{fe.currentTarget.onerror=null,fe.currentTarget.src="/Productos/N.jpg"}},`main-img-${Fn}`):null})()}),a.jsx("div",{ref:ct,className:"vp-zoom-float vp-zoom-stage",style:{display:Dt?"block":"none",backgroundImage:qe?`url(${qe})`:"none",backgroundRepeat:"no-repeat",backgroundSize:`${ge.w}px ${ge.h}px`,backgroundPosition:`${ht.current.x}% ${ht.current.y}%`}})]})]}),er.length>1&&a.jsx("div",{className:"xl:hidden w-full mt-3",children:a.jsx("div",{className:"mobile-tablet-thumbs flex gap-3 overflow-x-auto pb-2",children:er.map(($,fe)=>a.jsx("button",{type:"button",className:`mt-thumb ${fe===Fn?"active":""}`,onClick:()=>b(fe),"aria-label":`Vista ${fe+1}`,children:$.type==="video"?a.jsxs("div",{className:"relative w-full h-full",children:[a.jsx("video",{src:$.url,className:"w-full h-full object-contain",muted:!0,preload:"metadata"}),a.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})})})]}):a.jsx("img",{src:$.url,alt:`Miniatura ${fe+1}`,className:"w-full h-full object-contain",loading:"lazy",onError:Ye=>{Ye.currentTarget.onerror=null,Ye.currentTarget.src="/Productos/N.jpg"}})},`mt-thumb-${fe}`))})}),a.jsxs("div",{className:`vp-variants mt-6 ${!Y||Y.length<=1?"hidden":""}`,children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Variantes disponibles:"}),a.jsx(XC,{variants:Y?Y.map(($,fe)=>{var Ye,wt;return{id:$.id||`var_${fe}`,name:$.color||`Variante ${fe+1}`,price:$.precio,stock:$.cantidad||0,image:((wt=(Ye=$.imagenPrincipal)==null?void 0:Ye[0])==null?void 0:wt.url)||$.imagen,isSelected:A===fe}}):[],productMainImage:Qe(),onVariantChange:Ue,className:"w-full"}),a.jsx("div",{className:"flex flex-wrap gap-3 hidden",children:Y.map(($,fe)=>{var Un,vr,$n,En;const Ye=Qt=>{try{return Qt?typeof Qt=="string"?Qt:typeof Qt=="object"&&Qt!==null?Qt.url||"":String(Qt||""):""}catch{return""}},zt=((Un=(Array.isArray($==null?void 0:$.media)&&$.media.length>0?$.media:[]).find(Qt=>(Qt==null?void 0:Qt.type)==="image"&&(Qt==null?void 0:Qt.url)))==null?void 0:Un.url)||Ye((vr=$==null?void 0:$.imagenPrincipal)==null?void 0:vr[0])||($==null?void 0:$.imagen)||Array.isArray($==null?void 0:$.imagenes)&&$.imagenes[0]||Array.isArray(te==null?void 0:te.media)&&(($n=te.media.find(Qt=>(Qt==null?void 0:Qt.type)==="image"))==null?void 0:$n.url)||Ye((En=te==null?void 0:te.imagenPrincipal)==null?void 0:En[0])||(te==null?void 0:te.imagen)||Array.isArray(te==null?void 0:te.imagenes)&&te.imagenes[0]||null,Vt=$.cantidad>0,dn=A===fe;return a.jsxs("button",{className:`relative flex items-center gap-3 p-2 rounded-lg border-2 transition-all ${dn?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${Vt?"":"opacity-70"}`,onClick:()=>j(fe),"aria-label":`Seleccionar variante ${$.color}${Vt?"":" (Agotado)"}`,disabled:!Vt&&!dn,children:[a.jsxs("div",{className:"relative w-12 h-12 rounded-md overflow-hidden flex-shrink-0",children:[zt?a.jsx("img",{src:zt,alt:`${$.color}`,className:"w-full h-full object-contain",onError:Qt=>{Qt.target.onerror=null,Qt.target.src="https://via.placeholder.com/50?text=No+imagen"}}):a.jsx("div",{className:"w-full h-full",style:{backgroundColor:$.colorHex||"#ccc"}}),!Vt&&a.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-medium text-red-600",children:"Agotado"})})]}),a.jsxs("div",{className:"text-left",children:[a.jsx("span",{className:"block font-medium text-gray-900",children:$.color}),$.cantidad!==void 0&&a.jsx("span",{className:`text-xs ${$.cantidad>0?"text-green-600":"text-red-600"}`,children:$.cantidad>0?`${$.cantidad} disponible${$.cantidad!==1?"s":""}`:"Agotado"})]}),dn&&a.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center shadow-sm",children:a.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},`${$.color}-${fe}`)})})]})]}),a.jsxs(ne.div,{className:"flex flex-col gap-4 sm:gap-5 w-full xl:col-span-4 overflow-visible",children:[a.jsx("h1",{className:"vp-title",children:te.nombre}),a.jsx("div",{className:"vp-desc prose max-w-none",dangerouslySetInnerHTML:{__html:vH(te.descripcion||"<p>Contáctanos para más detalles.</p>")}}),a.jsxs("p",{className:"vp-price",children:["DOP ",ok(ye)]}),te.sellerId&&a.jsx("div",{className:"vp-seller-info",children:a.jsxs("div",{className:"seller-content",children:[a.jsx("span",{className:"seller-label",children:"Vendido por:"}),a.jsx("button",{className:"seller-name",onClick:()=>u(`/tienda/${te.sellerId}`),children:te.sellerName||"Ver Tienda"})]})}),a.jsxs("div",{className:"xl:hidden flex flex-col gap-3 overflow-visible",children:[a.jsx("div",{className:`vp-stock ${Me===0?"vp-stock-out":Me<=2?"vp-stock-low":"vp-stock-ok"}`,children:Me===0?"No disponible":Number.isFinite(Me)?`Quedan ${Me} disponibles`:"Disponible"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 overflow-visible",children:[jn?a.jsxs("div",{className:"vp-qty-row w-full sm:w-1/2",children:[a.jsx("button",{onClick:W,className:"vp-qty-btn",children:"−"}),a.jsx("span",{className:"vp-qty",children:Ln}),a.jsx("button",{onClick:yr,className:"vp-qty-btn",disabled:Ln>=le,title:Ln>=le?"Has alcanzado el máximo disponible":"Agregar una unidad",children:"+"}),a.jsx("button",{onClick:q,className:"vp-remove",children:a.jsx(TN,{})})]}):a.jsx("button",{className:`button w-full sm:w-1/2 ${ae?"":"opacity-60 cursor-not-allowed"}`,onClick:lr,disabled:!ae,title:ae?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),a.jsx("div",{className:"w-full sm:w-1/2",onClick:()=>lk("single",me,ye),children:a.jsx(Iv,{className:"w-full",total:ye*100,label:"Comprar ahora"})})]})]}),Array.isArray(te.acerca)&&te.acerca.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"vp-subtitle",children:"Acerca de este artículo"}),a.jsx("ul",{className:"vp-bullets",children:te.acerca.map(($,fe)=>a.jsx("li",{children:$},fe))})]})]}),a.jsx("aside",{className:"vp-buy-card w-full xl:col-span-2 hidden xl:block",children:a.jsxs("div",{className:"vp-buy-inner",children:[a.jsxs("div",{className:"vp-buy-price",children:["DOP ",ok(ye)]}),a.jsx("div",{className:`vp-stock ${Me===0?"vp-stock-out":Me<=2?"vp-stock-low":"vp-stock-ok"}`,children:Me===0?"No disponible":Number.isFinite(Me)?`Quedan ${Me} disponibles`:"Disponible"}),a.jsxs("div",{className:"flex flex-col gap-3",children:[jn?a.jsxs("div",{className:"vp-qty-row",children:[a.jsx("button",{onClick:W,className:"vp-qty-btn",children:"−"}),a.jsx("span",{className:"vp-qty",children:Ln}),a.jsx("button",{onClick:yr,className:"vp-qty-btn",disabled:Ln>=le,title:Ln>=le?"Has alcanzado el máximo disponible":"Agregar una unidad",children:"+"}),a.jsx("button",{onClick:q,className:"vp-remove",children:a.jsx(TN,{})})]}):a.jsx("button",{className:`button w-full ${ae?"":"opacity-60 cursor-not-allowed"}`,onClick:lr,disabled:!ae,title:ae?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),a.jsx("div",{onClick:()=>lk("single",me,ye),children:a.jsx(Iv,{className:"w-full",total:ye*100,label:"Comprar ahora"})})]})]})})]}),a.jsxs("section",{className:"w-full mt-8 flex flex-col items-stretch",children:[a.jsx("div",{className:"w-full",children:a.jsx(pH,{productoActual:te,onProductoClick:$=>u(`/producto/${$}`)})}),ys&&a.jsxs("div",{className:"vp-featured-section w-full mt-8",children:[a.jsx("h4",{className:"vp-featured-title text-center",children:"Acerca de este artículo"}),a.jsx("div",{className:"vp-featured-container",children:a.jsx(wv,{mediaItems:si,productName:te.nombre,className:"",showThumbnails:si.length>1,showControls:!0,autoPlay:!1,enableZoom:!1,enableFullscreen:!0})})]}),Fl&&a.jsxs("div",{className:"vp-secondary-row mt-6 w-full",children:[a.jsx("h4",{className:"vp-moreinfo-title",children:"Más información del producto"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 justify-items-center",children:La.map(($,fe)=>{var dn,Un;const Ye=((dn=$.split("/").pop())==null?void 0:dn.split("?")[0])||`archivo-${fe+1}`,wt=((Un=Ye.split(".").pop())==null?void 0:Un.toLowerCase())||"",zt=["jpg","jpeg","png","gif","webp","bmp","svg"].includes(wt),Vt=["mp4","mov","avi","mkv","webm","m4v"].includes(wt);if(zt){const vr=Xi($),$n=Qr.findIndex(En=>Xi(En)===vr);return a.jsx("button",{type:"button",className:"vp-secondary-item","aria-label":`Vista adicional ${fe+1}`,onClick:()=>{const En=ot.length,Qt=$n>=0?En+Math.min($n,2):En;Ae(Math.min(Qt,Yr.length-1))},children:a.jsx("img",{src:$,alt:`Vista extra ${fe+1}`,className:"w-full h-full object-contain rounded",loading:"lazy",decoding:"async"})},fe)}else return Vt?a.jsxs("div",{className:"vp-secondary-item",children:[a.jsx("video",{src:$,controls:!0,className:"w-full h-full object-contain rounded",preload:"metadata"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:Ye})]},fe):a.jsxs("a",{href:$,target:"_blank",rel:"noopener noreferrer",className:"vp-secondary-item flex flex-col items-center justify-center p-4 bg-gray-100 hover:bg-gray-200 transition-colors",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📄"}),a.jsx("p",{className:"text-xs text-gray-700 text-center truncate w-full",children:Ye}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Descargar"})]},fe)})})]})]})]}),U&&a.jsx("div",{className:"vp-media-overlay",onClick:sa,children:a.jsxs("div",{className:"vp-media-container ebay-overlay",onClick:$=>$.stopPropagation(),children:[a.jsxs("div",{className:"ebay-header",children:[a.jsxs("div",{className:"ebay-header-title",children:["Galería (",We+1," de ",er.length,")"]}),a.jsx("button",{type:"button",className:"ebay-header-close","aria-label":"Cerrar",onClick:sa,children:"×"})]}),a.jsxs("div",{className:"ebay-body",children:[a.jsxs("div",{className:"ebay-main",children:[a.jsx("button",{type:"button",className:"overlay-back-fab xl:hidden","aria-label":"Cerrar galería",onClick:sa,children:a.jsx(J0,{size:18})}),a.jsx("button",{type:"button",className:"overlay-close-fab xl:hidden","aria-label":"Cerrar galería",onClick:sa,children:a.jsx(vv,{size:18})}),a.jsx("button",{type:"button",className:"ebay-arrow left","aria-label":"Anterior",onClick:()=>He($=>($-1+er.length)%er.length),children:"‹"}),(()=>{const $=er[We];return $?$.type==="video"?a.jsx("video",{src:$.url,className:"ebay-main-media",controls:!0,autoPlay:!0,preload:"metadata"}):a.jsx("img",{src:$.url,alt:`${(te==null?void 0:te.nombre)||"Imagen"}`,className:"ebay-main-media",onTouchStart:bs,onTouchMove:rn,onTouchEnd:ws}):null})(),a.jsx("button",{type:"button",className:"ebay-arrow right","aria-label":"Siguiente",onClick:()=>He($=>($+1)%er.length),children:"›"})]}),a.jsx("div",{className:"ebay-thumbs",children:er.map(($,fe)=>a.jsx("button",{type:"button",className:`ebay-thumb ${fe===We?"active":""}`,onClick:()=>He(fe),"aria-label":`Vista ${fe+1}`,children:$.type==="video"?a.jsxs("div",{className:"relative w-full h-full",children:[a.jsx("video",{src:$.url,className:"w-full h-full object-contain",muted:!0,preload:"metadata"}),a.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})})})]}):a.jsx("img",{src:$.url,alt:`Miniatura ${fe+1}`,className:"w-full h-full object-contain"})},`ov-thumb-${fe}`))})]})]})}),a.jsx(Vm,{isOpen:h,onClose:()=>f(!1),onIniciarSesion:()=>{try{o()}catch{}}}),k&&a.jsx("div",{className:"imagen-modal-overlay",onClick:Ze,children:a.jsxs("div",{className:"imagen-modal-container",onClick:$=>$.stopPropagation(),onTouchStart:Ul,onTouchMove:Fa,onTouchEnd:Ua,children:[a.jsx("button",{className:"imagen-modal-close",onClick:Ze,"aria-label":"Cerrar",children:a.jsx(vv,{size:22})}),a.jsx("div",{className:"imagen-modal-main",children:a.jsx("img",{src:Yr[g],alt:`${te==null?void 0:te.nombre}`,className:"imagen-modal-img",draggable:!1,onError:$=>{$.currentTarget.onerror=null,$.currentTarget.src="/Productos/N.jpg"}})}),Yr.length>1&&a.jsx("div",{className:"imagen-modal-thumbnails",children:Yr.map(($,fe)=>a.jsx("button",{className:`thumbnail-btn ${fe===g?"active":""}`,onClick:()=>y(fe),"aria-label":`Miniatura ${fe+1}`,children:a.jsx("img",{src:$,alt:`Miniatura ${fe+1}`,loading:"lazy",decoding:"async",onError:Ye=>{Ye.currentTarget.onerror=null,Ye.currentTarget.src="/Productos/N.jpg"}})},fe))}),Yr.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-colors z-10",onClick:$=>{$.stopPropagation(),Uo()},"aria-label":"Imagen anterior",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-colors z-10",onClick:$=>{$.stopPropagation(),Va()},"aria-label":"Siguiente imagen",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}),a.jsx(yH,{product:te,cartQuantity:G,isFavorite:R,isInStock:((ke==null?void 0:ke.cantidad)||te.cantidad||0)>0,onAddToCart:($,fe)=>Re($,ke,fe),onToggleFavorite:()=>se(te),onShare:()=>Ot(),isVisible:D,className:"fixed bottom-0 left-0 right-0 z-40 sm:hidden"})]})}function bH(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function wH(t,e){if(!e)return Pv(t);if(Array.isArray(e.variantes)&&t.colorSeleccionado){const n=e.variantes.find(r=>r.color===t.colorSeleccionado);if(n&&n.cantidad!==void 0)return Number(n.cantidad)||0}return e.cantidad!==void 0?Number(e.cantidad)||0:Pv(t)}function Pv(t){if(t.maxStock!==void 0&&t.maxStock!==null){const e=Number(t.maxStock);if(!Number.isNaN(e))return e}if(Array.isArray(t.variantes)&&t.colorSeleccionado){const e=t.variantes.find(n=>n.color===t.colorSeleccionado);if(e&&e.cantidad!==void 0)return Number(e.cantidad)||0}if(t.cantidadProducto!==void 0){const e=Number(t.cantidadProducto);if(!Number.isNaN(e))return e}return t.cantidad!==void 0&&t.cantidad,Number.POSITIVE_INFINITY}function _H(t,e){try{const n={mode:"cart",items:t,total:e,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(n))}catch{}}function EH(){const{carrito:t,agregarAlCarrito:e,eliminarUnidadDelCarrito:n,quitarDelCarrito:r}=Xd(),i=wi(),[o,c]=S.useState(null),[u,h]=S.useState({});S.useEffect(()=>{const y=[],v=new Set;return t.forEach(b=>{if(b!=null&&b.id&&!v.has(b.id)){v.add(b.id);const k=at(De,"productos",b.id),w=gr(k,A=>{A.exists()&&h(j=>({...j,[b.id]:A.data()}))});y.push(w)}}),()=>{y.forEach(b=>b&&b())}},[t]);const f=t.reduce((y,v)=>y+(Number(v.precio)||0)*v.cantidad,0),g=t.map(y=>({id:y.id,nombre:y.nombre,precio:Number(y.precio)||0,cantidad:y.cantidad}));return a.jsxs("main",{className:"carrito-page",style:{paddingTop:"var(--content-offset, 100px)"},children:[t.length===0?a.jsx("p",{className:"carrito-empty",children:"Tu carrito está vacío."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"carrito-grid",children:t.map(y=>{const v=u[y.id];Pv(y);const b=wH(y,v),k=Number.isFinite(b)?Math.max(0,b-(Number(y.cantidad)||0)):b,w=`${y.id}__${y.colorSeleccionado??""}`;return a.jsxs("div",{className:"carrito-card",onClick:()=>i(`/producto/${y.id}`),children:[(()=>{var G;const A=M=>{try{return M?typeof M=="string"?M:typeof M=="object"&&M!==null?M.url||"":String(M||""):""}catch{return""}},j=u[y.id]||y,R=()=>{var I;const M=Array.isArray(j.variantes)?j.variantes:[];for(const T of M){const N=A((I=T==null?void 0:T.imagenPrincipal)==null?void 0:I[0]);if(N)return N;if(T!=null&&T.imagen)return T.imagen;const U=(Array.isArray(T==null?void 0:T.media)?T.media:[]).find(O=>{const xe=((O==null?void 0:O.type)||"").toLowerCase();return A(O)&&(!xe||xe.includes("image")||xe==="img"||xe==="photo")});if(U)return A(U)}return""},D=(Array.isArray(j.media)?j.media:[]).find(M=>{const I=((M==null?void 0:M.type)||"").toLowerCase();return A(M)&&(!I||I.includes("image")||I==="img"||I==="photo")}),z=A((G=j==null?void 0:j.imagenPrincipal)==null?void 0:G[0])||(j==null?void 0:j.imagen)||(D?A(D):"")||A(Array.isArray(j==null?void 0:j.galeriaImagenes)&&j.galeriaImagenes[0])||A(Array.isArray(j==null?void 0:j.imagenes)&&j.imagenes[0])||R()||"";return a.jsx("img",{src:z,alt:y.nombre,className:"carrito-img"})})(),a.jsxs("div",{className:"carrito-info",children:[a.jsx("h2",{className:"carrito-nombre",children:y.nombre}),a.jsx("p",{className:`carrito-stock ${k===0?"stock-out":Number.isFinite(k)&&k<=2?"stock-low":"stock-ok"}`,children:k===0?"No disponible":Number.isFinite(k)&&k<=2?`Casi agotado (${k})`:Number.isFinite(k)?`Disponible (${k})`:"Disponible"}),a.jsxs("div",{className:"carrito-actions",children:[a.jsx("button",{onClick:A=>{A.stopPropagation(),n(y.id,y.colorSeleccionado??null)},className:"vp-qty-btn",children:"−"}),a.jsx("span",{className:"vp-qty",children:y.cantidad}),a.jsx("button",{onClick:A=>{A.stopPropagation(),(!Number.isFinite(b)||y.cantidad<b)&&e(y,y.colorSeleccionado??null)},className:"vp-qty-btn",disabled:Number.isFinite(b)&&y.cantidad>=b,children:"+"}),a.jsx("button",{onClick:A=>{A.stopPropagation(),c(y)},className:"vp-remove",title:"Quitar",children:a.jsx(jC,{})})]})]}),a.jsxs("div",{className:"carrito-subtotal",children:["DOP"," ",bH((Number(y.precio)||0)*y.cantidad)]})]},w)})}),a.jsx("div",{className:"carrito-footer",children:a.jsx("div",{className:"carrito-pay-wrap",onClick:()=>_H(g,f),children:a.jsx(Iv,{className:"carrito-cardnet-btn w-full",total:f*100})})})]}),o&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal",children:[a.jsx("h2",{children:"¿Eliminar producto?"}),a.jsxs("p",{children:["¿Seguro que quieres quitar"," ",a.jsx("strong",{children:o.nombre})," del carrito?"]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"btn-cancel",onClick:()=>c(null),children:"Cancelar"}),a.jsx("button",{className:"btn-confirm",onClick:()=>{r(o.id,o.colorSeleccionado??null),c(null)},children:"Sí, eliminar"})]})]})})]})}function ij(){return a.jsx("div",{className:"waves-container"})}function NH(){return a.jsxs("div",{className:"relative min-h-screen flex flex-col items-center px-4 sm:px-8 pb-20 font-sans text-gray-800 bg-transparent overflow-hidden",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx(ij,{}),a.jsx("h1",{className:"text-2xl sm:text-5xl font-extrabold mb-4 text-center text-gray-800 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"CONTÁCTANOS"}),a.jsx("h2",{className:"text-lg sm:text-2xl font-semibold mb-10 text-center text-gray-600 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),a.jsxs("div",{className:"relative w-full max-w-3xl flex flex-col items-center gap-4 sm:gap-6 text-sm sm:text-lg z-10 px-4 py-4 sm:px-8 sm:py-6",style:{background:"rgba(255, 255, 255, 0.25)",borderRadius:"1rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[a.jsx("img",{src:"/toy/asoma.png",alt:"Muñeco asomándose",className:"hidden sm:block absolute z-20 pointer-events-none w-[300px]",style:{top:"-160px",right:"-80px",height:"auto"}}),a.jsx(Uf,{icon:a.jsx(mh,{}),label:"Dirección",text:"Av. Estrella Sadhalá #55, Santiago, República Dominicana"}),a.jsx(Uf,{icon:a.jsx(qp,{}),label:"Teléfono Tienda",text:"+1 (849)-635-7000"}),a.jsx(Uf,{icon:a.jsx(qp,{}),label:"Teléfono Internet",text:"+1 (809)-582-1212"}),a.jsx(Uf,{icon:a.jsx(U1,{}),label:"Correo",text:"playcenter121@gmail.com"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-6 justify-center mt-4 w-full",children:[a.jsx(ck,{href:"https://wa.me/18496357000",text:"WhatsApp Tienda"}),a.jsx(ck,{href:"https://wa.me/18095821212",text:"WhatsApp Internet"})]})]})]})}const Uf=({icon:t,label:e,text:n})=>a.jsxs("div",{className:"flex items-start gap-3 w-full z-10",children:[a.jsx("div",{className:"text-xl sm:text-2xl text-gray-400",children:t}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-sm sm:text-base text-gray-700",children:[e,":"]}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base break-words",children:n})]})]}),ck=({href:t,text:e})=>a.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 sm:gap-3 px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base font-bold rounded-xl transition-transform z-10 w-full sm:w-auto",style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:n=>{n.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",n.currentTarget.style.transform="scale(1.05)"},onMouseLeave:n=>{n.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",n.currentTarget.style.transform="scale(1)"},children:[a.jsx(Wp,{className:"text-lg sm:text-xl text-cyan-500"}),e]});function kH(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:a.jsx("div",{className:"max-w-2xl w-full text-center",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[a.jsx("div",{className:"mb-6",children:a.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Función No Disponible"}),a.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opción de ",a.jsx("strong",{children:"Vender"})," no está disponible en este momento."]}),a.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva más tarde. Estamos trabajando para habilitarla pronto."}),a.jsx("div",{className:"mt-10",children:a.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function SH(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:a.jsx("div",{className:"max-w-2xl w-full text-center",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[a.jsx("div",{className:"mb-6",children:a.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Función No Disponible"}),a.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opción de ",a.jsx("strong",{children:"Tiendas"})," no está disponible en este momento."]}),a.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva más tarde. Estamos trabajando para habilitarla pronto."}),a.jsx("div",{className:"mt-10",children:a.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function AH(){return a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-gray-800 mb-6",children:"Historial"}),a.jsx("p",{className:"text-gray-600",children:"Aquí verás tu historial de navegación o compras próximamente."})]})}function TH(){return a.jsxs("div",{className:`relative min-h-screen flex flex-col items-center px-4 pb-20 font-sans text-gray-800
                 bg-transparent overflow-hidden`,style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx(ij,{}),a.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-center text-gray-800 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"NOSOTROS"}),a.jsx("h2",{className:"text-2xl font-semibold mb-10 text-center text-gray-600 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),a.jsxs("div",{className:"relative w-full max-w-3xl flex flex-col items-center gap-6 text-lg z-10",style:{background:"rgba(255, 255, 255, 0.25)",borderRadius:"1rem",padding:"2rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[a.jsx("img",{src:"/toy/asoman.png",alt:"Muñeco asomándose",className:"hidden xl:block absolute z-20",style:{top:"-160px",right:"-230px",width:"300px",height:"auto"}}),a.jsx(cy,{icon:a.jsx(IU,{className:"text-yellow-400"}),label:"Quiénes somos",text:"Somos una empresa dominicana ubicada en Santiago, especializada en brindar lo último en tecnología, innovación y productos para el estilo de vida moderno."}),a.jsx(cy,{icon:a.jsx(VU,{className:"text-cyan-500"}),label:"Nuestra misión",text:"Superar las expectativas de nuestros clientes ofreciendo artículos de calidad como consolas, videojuegos, tablets, móviles, accesorios y más, con un servicio humano, eficiente y profesional."}),a.jsx(cy,{icon:a.jsx(mh,{className:"text-green-500"}),label:"Nuestro compromiso",text:"PlayCenter Universal no solo vende productos, crea experiencias memorables con cada compra. ¡Gracias por confiar en nosotros!"}),a.jsx("div",{className:"flex justify-center mt-6",children:a.jsxs(Tt,{to:"/contacto",className:`flex items-center gap-3 px-6 py-3 text-base font-bold
                       rounded-xl transition-transform z-10 animate-fade-in`,style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:t=>{t.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",t.currentTarget.style.transform="scale(1.05)"},onMouseLeave:t=>{t.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",t.currentTarget.style.transform="scale(1)"},children:[a.jsx(yv,{className:"text-xl text-cyan-500"}),"Contáctanos"]})})]})]})}const cy=({icon:t,label:e,text:n})=>a.jsxs("div",{className:"flex items-start gap-4 w-full z-10",children:[a.jsx("div",{className:"text-2xl text-gray-400",children:t}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-gray-700",children:[e,":"]}),a.jsx("p",{className:"text-gray-600 break-words",children:n})]})]}),CH=[{id:1,nombre:"Audífonos Sony WH-1000XM5",imagen:"/products/sony-wh1000xm5.png",precio:349.99,descripcion:"Cancelación de ruido líder, hasta 30h de batería, diseño premium."},{id:2,nombre:"AirPods Pro 2da Gen",imagen:"/products/airpods-pro-2.png",precio:249.99,descripcion:"Audio espacial personalizado, chip H2 de Apple, resistente al agua."}];function jH(){const{id:t}=Gv(),e=CH.find(n=>n.id===parseInt(t));return e?a.jsxs("div",{className:"px-4 xl:px-20 py-10 bg-white min-h-screen flex flex-col xl:flex-row gap-10 items-start",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx("div",{className:"w-full xl:w-1/2 flex justify-center",children:a.jsx("img",{src:e.imagen,alt:e.nombre,className:"w-[300px] sm:w-[400px] xl:w-[500px] object-contain border p-4 rounded-lg shadow"})}),a.jsxs("div",{className:"w-full xl:w-1/2 space-y-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:e.nombre}),a.jsx("p",{className:"text-gray-700 text-lg",children:e.descripcion}),a.jsxs("p",{className:"text-2xl font-bold text-pink-600",children:["$",e.precio]}),a.jsxs("div",{className:"flex gap-4 mt-6",children:[a.jsx("button",{className:"bg-yellow-400 hover:bg-yellow-500 text-black px-6 py-2 rounded shadow",children:"Agregar al carrito"}),a.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded shadow",children:"Añadir a favoritos ❤️"})]})]})]}):a.jsx("div",{className:"pt-24 text-center text-red-600 font-semibold",children:"Producto no encontrado"})}function uy(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").trim()}function sj(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function IH(t){const n=(Number(t)||0).toFixed(2),[r,i]=n.split("."),o=Number(r);return{wholeFormatted:sj(o),fraction:i}}function PH(t,e=140){try{if(!t)return"Descripción del producto.";const n=document.createElement("div");n.innerHTML=String(t);const r=(n.textContent||n.innerText||"").replace(/\s+/g," ").trim();return r.length<=e?r:r.slice(0,e-1)+"…"}catch{return typeof t=="string"?t:"Descripción del producto."}}function aj({producto:t}){const{carrito:e,agregarAlCarrito:n,eliminarUnidadDelCarrito:r,quitarDelCarrito:i}=Xd(),{usuario:o,usuarioInfo:c}=ii(),{abrirModal:u}=ru(),h=wi(),[f,g]=S.useState(!1),[y,v]=S.useState(!1);S.useEffect(()=>{v(!1)},[t==null?void 0:t.id,t==null?void 0:t.imagen,t==null?void 0:t.imagenPrincipal]);const b=!!(t!=null&&t.oferta&&(t!=null&&t.precioOferta)),k=b?Number(t==null?void 0:t.precioOferta)||Number(t==null?void 0:t.precio)||0:Number(t==null?void 0:t.precio)||0,w=IH(k),j=(t==null?void 0:t.activo)!==!1&&(t.cantidad===void 0||t.cantidad>0),R=e.find(V=>V.id===t.id),L=(R==null?void 0:R.cantidad)||0,D=t.cantidad!==void 0?Number(t.cantidad)||0:1/0,z=Number.isFinite(D)?Math.max(0,D-L):1/0,G=V=>{if(V.stopPropagation(),!o){g(!0);return}if(!R){const U={...t,cantidad:1,cantidadProducto:Number.isFinite(D)?D:void 0};n(U)}},M=V=>{if(V.stopPropagation(),!o){g(!0);return}const U=Number.isFinite(D)?D:1/0;L<U&&n(t)},I=V=>{if(V.stopPropagation(),!o){g(!0);return}r(t.id)},T=V=>{if(V.stopPropagation(),!o){g(!0);return}i(t.id)},N=()=>{const V=t.slug||t.id;h(`/producto/${V}`)};return a.jsx(a.Fragment,{children:a.jsxs("div",{onClick:V=>{V.target.closest("button")||N()},className:"tarjeta-producto group",children:[a.jsx("div",{className:"tarjeta-img-zone relative",children:(()=>{const V=Pe=>{try{return Pe?typeof Pe=="string"?Pe:typeof Pe=="object"&&Pe!==null?Pe.url||"":String(Pe||""):""}catch{return""}},O=(()=>{var Ee,$e;const Pe=V((Ee=t==null?void 0:t.imagenPrincipal)==null?void 0:Ee[0]);if(Pe)return Pe;const We=V(t==null?void 0:t.imagen);if(We)return We;const de=(Array.isArray(t==null?void 0:t.media)?t.media:[]).find(Te=>{const Ve=((Te==null?void 0:Te.type)||"").toLowerCase();return V(Te)&&(!Ve||Ve.includes("image")||Ve==="img"||Ve==="photo")});if(de)return V(de);const oe=(Array.isArray(t==null?void 0:t.galeriaImagenes)?t.galeriaImagenes:[]).find(Te=>{const Ve=((Te==null?void 0:Te.type)||"").toLowerCase();return V(Te)&&(!Ve||Ve.includes("image")||Ve==="img"||Ve==="photo")});if(oe)return V(oe);const H=Array.isArray(t==null?void 0:t.imagenes)?t.imagenes:[];if(H.length>0)return V(H[0]);const J=Array.isArray(t==null?void 0:t.variantes)?t.variantes:[];for(const Te of J){const Ve=V(($e=Te==null?void 0:Te.imagenPrincipal)==null?void 0:$e[0]);if(Ve)return Ve;const Ge=V(Te==null?void 0:Te.imagen);if(Ge)return Ge;const Ke=(Array.isArray(Te==null?void 0:Te.media)?Te.media:[]).find(mt=>{const ht=((mt==null?void 0:mt.type)||"").toLowerCase();return V(mt)&&(!ht||ht.includes("image")||ht==="img"||ht==="photo")});if(Ke)return V(Ke);const kt=(Array.isArray(Te==null?void 0:Te.galeriaImagenes)?Te.galeriaImagenes:[]).find(mt=>{const ht=((mt==null?void 0:mt.type)||"").toLowerCase();return V(mt)&&(!ht||ht.includes("image")||ht==="img"||ht==="photo")});if(kt)return V(kt)}return null})(),xe=()=>a.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f9fafb 0%, #e5e7eb 100%)"},"aria-label":"Imagen no disponible",children:a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",style:{color:"#9ca3af"},children:[a.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",ry:"2"}),a.jsx("circle",{cx:"8.5",cy:"10.5",r:"1.5"}),a.jsx("path",{d:"M21 19l-5.5-5.5a2 2 0 00-2.9 0L7 19"})]})});return O&&!y?a.jsx("img",{src:O,alt:t.nombre,className:"tarjeta-img",onError:()=>{v(!0)}},O):a.jsx(xe,{})})()}),a.jsxs("div",{className:"tarjeta-info-zone",children:[a.jsx("h2",{className:"tarjeta-nombre",children:t.nombre}),a.jsx("p",{className:"tarjeta-descripcion",children:PH(t.descripcion)}),Number.isFinite(z)&&z>0&&z<=10&&a.jsx("div",{className:"tarjeta-stock-info",children:z<=3?a.jsxs("span",{className:"stock-bajo",children:["Solo quedan ",z," unidades"]}):a.jsxs("span",{className:"stock-medio",children:["Quedan ",z," unidades"]})}),Number.isFinite(z)&&z>10&&a.jsx("div",{className:"tarjeta-stock-info",children:a.jsx("span",{className:"stock-alto",children:"Disponible"})}),a.jsxs("div",{className:"tarjeta-price-row",children:[a.jsxs("div",{className:"tarjeta-precio amazon-price",children:[a.jsx("span",{className:"currency",children:"DOP"}),a.jsx("span",{className:"whole",children:w.wholeFormatted}),a.jsxs("span",{className:"fraction",children:[".",w.fraction]})]}),b&&a.jsxs("span",{className:"tarjeta-precio-old",children:["DOP ",sj(t.precio)]})]}),a.jsx("div",{className:"botones-wrapper",children:R?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:I,className:"carrito-btn",children:"−"}),a.jsx("span",{className:"font-semibold",children:L}),a.jsx("button",{onClick:M,className:"carrito-btn",disabled:Number.isFinite(D)&&L>=D,title:Number.isFinite(D)&&L>=D?"Has alcanzado el máximo disponible":"Agregar una unidad",children:"+"}),a.jsx("button",{onClick:T,type:"button",className:"carrito-quitar",title:"Quitar del carrito","aria-label":"Quitar del carrito",children:a.jsx(jC,{})})]}):a.jsxs("button",{onClick:G,className:`carrito-main-btn ${j?"":"opacity-60 cursor-not-allowed bg-gray-300 text-gray-600 hover:bg-gray-300"}`,disabled:!j,title:j?"Agregar al carrito":"No quedan productos","aria-label":"Agregar al carrito",children:[a.jsx(CC,{"aria-hidden":"true"}),a.jsx("span",{children:"Agregar al carrito"})]})}),a.jsx(Vm,{isOpen:f,onClose:()=>g(!1),onIniciarSesion:()=>{g(!1),u()}})]})]})})}function oj(){return a.jsxs("div",{className:"wave-background",children:[a.jsx("div",{className:"wave wave1"}),a.jsx("div",{className:"wave wave2"}),a.jsx("div",{className:"wave wave3"})]})}const uk={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.2)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 4px rgba(60, 80, 120, 0.4)"}},RH={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.4)","0 0 10px rgba(80, 100, 140, 0.6)","0 0 4px rgba(80, 100, 140, 0.4)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function Xp({categoriaActiva:t,mostrarEnMovil:e,setMostrarEnMovil:n}){const r=wi(),{categories:i,loading:o,error:c}=i1(),u=g=>{r(`/Productos/${g.ruta}`),n&&n(!1)},h=g=>g===t,f=[{nombre:"Todos",ruta:"",id:"todos"},...i];return o?a.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})}):c?a.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:a.jsx("div",{className:"text-red-500 text-sm p-4",children:"Error cargando categorías"})}):a.jsxs(a.Fragment,{children:[a.jsxs("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",style:{height:"100vh",paddingTop:0,backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Categorías",children:[a.jsx("div",{className:"absolute inset-0 z-0",style:{overflow:"visible",minHeight:"2000px",backgroundColor:"transparent",pointerEvents:"none"},children:a.jsx(oj,{})}),a.jsxs("div",{className:"scrollbar-light relative z-10 flex-1",style:{overflowY:"auto",backgroundColor:"transparent",paddingRight:"0.25rem"},children:[a.jsx(ne.h2,{className:"text-lg font-semibold mb-4 text-center tracking-wide text-blue-700 dark:text-blue-400 select-none",variants:RH,animate:"animate",children:"Categorías"}),a.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>a.jsx(ne.li,{whileHover:{scale:1.02},children:a.jsx(ne.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:uk,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${h(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))})]})]}),a.jsx(Gt,{children:e&&a.jsxs(a.Fragment,{children:[a.jsx(ne.div,{className:"fixed inset-0 bg-gray-200 dark:bg-gray-900 bg-opacity-40 backdrop-blur-sm z-[9998]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1)}),a.jsxs(ne.nav,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",stiffness:250,damping:30},className:"fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-300 dark:border-gray-700 z-[9999] flex flex-col shadow-md transition-colors duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-400 tracking-wide select-none",children:"Categorías"}),a.jsx("button",{onClick:()=>n(!1),className:"text-red-500 font-bold text-2xl hover:text-red-700","aria-label":"Cerrar categorías",children:"✕"})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-2 scrollbar-light",children:a.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>a.jsx(ne.li,{whileHover:{scale:1.02},children:a.jsx(ne.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:uk,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${h(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))})})]})]})})]})}function lj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=lj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ys(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=lj(t))&&(r&&(r+=" "),r+=e);return r}function cj(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let c="",u=!0;for(let h=0;h<o.length;h+=1){const f=o[h];f&&(c+=(u===!0?"":" ")+e(f),u=!1,n&&n[f]&&(c+=" "+n[f]))}r[i]=c}return r}function Cl(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function Cc(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function H1(t,e=0,n=1){return Cc(t,e,n)}function MH(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Io(t){if(t.type)return t;if(t.charAt(0)==="#")return Io(MH(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Cl(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Cl(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const DH=t=>{const e=Io(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},id=(t,e)=>{try{return DH(t)}catch{return t}};function Um(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function uj(t){t=Io(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),c=(f,g=(f+n/30)%12)=>i-o*Math.max(Math.min(g-3,9-g,1),-1);let u="rgb";const h=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return t.type==="hsla"&&(u+="a",h.push(e[3])),Um({type:u,values:h})}function Rv(t){t=Io(t);let e=t.type==="hsl"||t.type==="hsla"?Io(uj(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function OH(t,e){const n=Rv(t),r=Rv(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Mv(t,e){return t=Io(t),e=H1(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Um(t)}function $f(t,e,n){try{return Mv(t,e)}catch{return t}}function Hd(t,e){if(t=Io(t),e=H1(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Um(t)}function fn(t,e,n){try{return Hd(t,e)}catch{return t}}function Wd(t,e){if(t=Io(t),e=H1(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Um(t)}function pn(t,e,n){try{return Wd(t,e)}catch{return t}}function LH(t,e=.15){return Rv(t)>.5?Hd(t,e):Wd(t,e)}function zf(t,e,n){try{return LH(t,e)}catch{return t}}const VH=S.createContext(),FH=()=>S.useContext(VH)??!1;function dj(...t){const e=S.useRef(void 0),n=S.useCallback(r=>{const i=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const c=o,u=c(r);return typeof u=="function"?u:()=>{c(null)}}return o.current=r,()=>{o.current=null}});return()=>{i.forEach(o=>o==null?void 0:o())}},t);return S.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function UH(t){return typeof t=="string"}function $H(t,e,n){return t===void 0||UH(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function cp(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function dk(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function zH(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const b=Ys(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),k={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},w={...n,...i,...r};return b.length>0&&(w.className=b),Object.keys(k).length>0&&(w.style=k),{props:w,internalRef:void 0}}const c=cp({...i,...r}),u=dk(r),h=dk(i),f=e(c),g=Ys(f==null?void 0:f.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),y={...f==null?void 0:f.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},v={...f,...n,...h,...u};return g.length>0&&(v.className=g),Object.keys(y).length>0&&(v.style=y),{props:v,internalRef:f.ref}}function BH(t,e,n){return typeof t=="function"?t(e,n):t}function io(t){var y;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=t,c=i?{}:BH(n,r),{props:u,internalRef:h}=zH({...o,externalSlotProps:c}),f=dj(h,c==null?void 0:c.ref,(y=t.additionalProps)==null?void 0:y.ref);return $H(e,{...u,ref:f},r)}function up(t){return t&&t.ownerDocument||document}function HH(t){const{controlled:e,default:n}=t,{current:r}=S.useRef(e!==void 0),[i,o]=S.useState(n),c=r?e:i,u=S.useCallback(h=>{r||o(h)},[]);return[c,u]}const hj=typeof window<"u"?S.useLayoutEffect:S.useEffect;function dy(t){const e=S.useRef(t);return hj(()=>{e.current=t}),S.useRef((...n)=>(0,e.current)(...n)).current}function hk(t){try{return t.matches(":focus-visible")}catch{}return!1}const WH={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function qH(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const GH=2;function xc(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function fj(t,e){return t-e}function fk(t,e){const{index:n}=t.reduce((r,i,o)=>{const c=Math.abs(e-i);return r===null||c<r.distance||c===r.distance?{distance:c,index:o}:r},null)??{};return n}function Bf(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Jp(t,e,n){return(t-e)*100/(n-e)}function KH(t,e,n){return(n-e)*t+e}function QH(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function YH(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(QH(e)))}function pk({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(fj)}function Hf({sliderRef:t,activeIndex:e,setActive:n}){var i,o,c;const r=up(t.current);(!((i=t.current)!=null&&i.contains(r.activeElement))||Number((o=r==null?void 0:r.activeElement)==null?void 0:o.getAttribute("data-index"))!==e)&&((c=t.current)==null||c.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function Wf(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?qH(t,e):!1}const XH={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},JH=t=>t;let qf;function mk(){return qf===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?qf=CSS.supports("touch-action","none"):qf=!0),qf}function ZH(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:c=!1,max:u=100,min:h=0,name:f,onChange:g,onChangeCommitted:y,orientation:v="horizontal",rootRef:b,scale:k=JH,step:w=1,shiftStep:A=10,tabIndex:j,value:R}=t,L=S.useRef(void 0),[D,z]=S.useState(-1),[G,M]=S.useState(-1),[I,T]=S.useState(!1),N=S.useRef(0),V=S.useRef(null),[U,O]=HH({controlled:R,default:n??h}),xe=g&&((Y,pe,Re)=>{const se=Y.nativeEvent||Y,Ue=new se.constructor(se.type,se);Object.defineProperty(Ue,"target",{writable:!0,value:{value:pe,name:f}}),V.current=pe,g(Ue,pe,Re)}),Pe=Array.isArray(U);let We=Pe?U.slice().sort(fj):[U];We=We.map(Y=>Y==null?h:Cc(Y,h,u));const He=c===!0&&w!==null?[...Array(Math.floor((u-h)/w)+1)].map((Y,pe)=>({value:h+w*pe})):c||[],de=He.map(Y=>Y.value),[ce,oe]=S.useState(-1),H=S.useRef(null),J=dj(b,H),Ee=Y=>pe=>{var se;const Re=Number(pe.currentTarget.getAttribute("data-index"));hk(pe.target)&&oe(Re),M(Re),(se=Y==null?void 0:Y.onFocus)==null||se.call(Y,pe)},$e=Y=>pe=>{var Re;hk(pe.target)||oe(-1),M(-1),(Re=Y==null?void 0:Y.onBlur)==null||Re.call(Y,pe)},Te=(Y,pe)=>{const Re=Number(Y.currentTarget.getAttribute("data-index")),se=We[Re],Ue=de.indexOf(se);let ke=pe;if(He&&w==null){const pt=de[de.length-1];ke>=pt?ke=pt:ke<=de[0]?ke=de[0]:ke=ke<se?de[Ue-1]:de[Ue+1]}if(ke=Cc(ke,h,u),Pe){i&&(ke=Cc(ke,We[Re-1]||-1/0,We[Re+1]||1/0));const pt=ke;ke=pk({values:We,newValue:ke,index:Re});let Pt=Re;i||(Pt=ke.indexOf(pt)),Hf({sliderRef:H,activeIndex:Pt})}O(ke),oe(Re),xe&&!Wf(ke,U)&&xe(Y,ke,Re),y&&y(Y,V.current??ke)},Ve=Y=>pe=>{var Re;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(pe.key)){pe.preventDefault();const se=Number(pe.currentTarget.getAttribute("data-index")),Ue=We[se];let ke=null;if(w!=null){const pt=pe.shiftKey?A:w;switch(pe.key){case"ArrowUp":ke=xc(Ue,pt,1,h,u);break;case"ArrowRight":ke=xc(Ue,pt,o?-1:1,h,u);break;case"ArrowDown":ke=xc(Ue,pt,-1,h,u);break;case"ArrowLeft":ke=xc(Ue,pt,o?1:-1,h,u);break;case"PageUp":ke=xc(Ue,A,1,h,u);break;case"PageDown":ke=xc(Ue,A,-1,h,u);break;case"Home":ke=h;break;case"End":ke=u;break}}else if(He){const pt=de[de.length-1],Pt=de.indexOf(Ue),dt=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Xt=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];dt.includes(pe.key)?Pt===0?ke=de[0]:ke=de[Pt-1]:Xt.includes(pe.key)&&(Pt===de.length-1?ke=pt:ke=de[Pt+1])}ke!=null&&Te(pe,ke)}(Re=Y==null?void 0:Y.onKeyDown)==null||Re.call(Y,pe)};hj(()=>{var Y;r&&H.current.contains(document.activeElement)&&((Y=document.activeElement)==null||Y.blur())},[r]),r&&D!==-1&&z(-1),r&&ce!==-1&&oe(-1);const Ge=Y=>pe=>{var Re;(Re=Y.onChange)==null||Re.call(Y,pe),Te(pe,pe.target.valueAsNumber)},rt=S.useRef(void 0);let Ke=v;o&&v==="horizontal"&&(Ke+="-reverse");const ct=({finger:Y,move:pe=!1})=>{const{current:Re}=H,{width:se,height:Ue,bottom:ke,left:pt}=Re.getBoundingClientRect();let Pt;Ke.startsWith("vertical")?Pt=(ke-Y.y)/Ue:Pt=(Y.x-pt)/se,Ke.includes("-reverse")&&(Pt=1-Pt);let dt;if(dt=KH(Pt,h,u),w)dt=YH(dt,w,h);else{const Cn=fk(de,dt);dt=de[Cn]}dt=Cc(dt,h,u);let Xt=0;if(Pe){pe?Xt=rt.current:Xt=fk(We,dt),i&&(dt=Cc(dt,We[Xt-1]||-1/0,We[Xt+1]||1/0));const Cn=dt;dt=pk({values:We,newValue:dt,index:Xt}),i&&pe||(Xt=dt.indexOf(Cn),rt.current=Xt)}return{newValue:dt,activeIndex:Xt}},kt=dy(Y=>{const pe=Bf(Y,L);if(!pe)return;if(N.current+=1,Y.type==="mousemove"&&Y.buttons===0){mt(Y);return}const{newValue:Re,activeIndex:se}=ct({finger:pe,move:!0});Hf({sliderRef:H,activeIndex:se,setActive:z}),O(Re),!I&&N.current>GH&&T(!0),xe&&!Wf(Re,U)&&xe(Y,Re,se)}),mt=dy(Y=>{const pe=Bf(Y,L);if(T(!1),!pe)return;const{newValue:Re}=ct({finger:pe,move:!0});z(-1),Y.type==="touchend"&&M(-1),y&&y(Y,V.current??Re),L.current=void 0,Dt()}),ht=dy(Y=>{if(r)return;mk()||Y.preventDefault();const pe=Y.changedTouches[0];pe!=null&&(L.current=pe.identifier);const Re=Bf(Y,L);if(Re!==!1){const{newValue:Ue,activeIndex:ke}=ct({finger:Re});Hf({sliderRef:H,activeIndex:ke,setActive:z}),O(Ue),xe&&!Wf(Ue,U)&&xe(Y,Ue,ke)}N.current=0;const se=up(H.current);se.addEventListener("touchmove",kt,{passive:!0}),se.addEventListener("touchend",mt,{passive:!0})}),Dt=S.useCallback(()=>{const Y=up(H.current);Y.removeEventListener("mousemove",kt),Y.removeEventListener("mouseup",mt),Y.removeEventListener("touchmove",kt),Y.removeEventListener("touchend",mt)},[mt,kt]);S.useEffect(()=>{const{current:Y}=H;return Y.addEventListener("touchstart",ht,{passive:mk()}),()=>{Y.removeEventListener("touchstart",ht),Dt()}},[Dt,ht]),S.useEffect(()=>{r&&Dt()},[r,Dt]);const re=Y=>pe=>{var Ue;if((Ue=Y.onMouseDown)==null||Ue.call(Y,pe),r||pe.defaultPrevented||pe.button!==0)return;pe.preventDefault();const Re=Bf(pe,L);if(Re!==!1){const{newValue:ke,activeIndex:pt}=ct({finger:Re});Hf({sliderRef:H,activeIndex:pt,setActive:z}),O(ke),xe&&!Wf(ke,U)&&xe(pe,ke,pt)}N.current=0;const se=up(H.current);se.addEventListener("mousemove",kt,{passive:!0}),se.addEventListener("mouseup",mt)},qe=Jp(Pe?We[0]:h,h,u),Se=Jp(We[We.length-1],h,u)-qe,ge=(Y={})=>{const pe=cp(Y),Re={onMouseDown:re(pe||{})},se={...pe,...Re};return{...Y,ref:J,...se}},Je=Y=>pe=>{var se;(se=Y.onMouseOver)==null||se.call(Y,pe);const Re=Number(pe.currentTarget.getAttribute("data-index"));M(Re)},te=Y=>pe=>{var Re;(Re=Y.onMouseLeave)==null||Re.call(Y,pe),M(-1)},xt=(Y={})=>{const pe=cp(Y),Re={onMouseOver:Je(pe||{}),onMouseLeave:te(pe||{})};return{...Y,...pe,...Re}},be=Y=>({pointerEvents:D!==-1&&D!==Y?"none":void 0});let Qe;return v==="vertical"&&(Qe=o?"vertical-rl":"vertical-lr"),{active:D,axis:Ke,axisProps:XH,dragging:I,focusedThumbIndex:ce,getHiddenInputProps:(Y={})=>{const pe=cp(Y),Re={onChange:Ge(pe||{}),onFocus:Ee(pe||{}),onBlur:$e(pe||{}),onKeyDown:Ve(pe||{})},se={...pe,...Re};return{tabIndex:j,"aria-labelledby":e,"aria-orientation":v,"aria-valuemax":k(u),"aria-valuemin":k(h),name:f,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...Y,...se,style:{...WH,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:Qe}}},getRootProps:ge,getThumbProps:xt,marks:He,open:G,range:Pe,rootRef:J,trackLeap:Se,trackOffset:qe,values:We,getThumbStyle:be}}function dp(t){return typeof t=="string"}function Pi(t){if(typeof t!="string")throw new Error(Cl(7));return t.charAt(0).toUpperCase()+t.slice(1)}var hy={exports:{}},cn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk;function eW(){if(gk)return cn;gk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function k(w){if(typeof w=="object"&&w!==null){var A=w.$$typeof;switch(A){case t:switch(w=w.type,w){case n:case i:case r:case h:case f:case v:return w;default:switch(w=w&&w.$$typeof,w){case c:case u:case y:case g:return w;case o:return w;default:return A}}case e:return A}}}return cn.ContextConsumer=o,cn.ContextProvider=c,cn.Element=t,cn.ForwardRef=u,cn.Fragment=n,cn.Lazy=y,cn.Memo=g,cn.Portal=e,cn.Profiler=i,cn.StrictMode=r,cn.Suspense=h,cn.SuspenseList=f,cn.isContextConsumer=function(w){return k(w)===o},cn.isContextProvider=function(w){return k(w)===c},cn.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},cn.isForwardRef=function(w){return k(w)===u},cn.isFragment=function(w){return k(w)===n},cn.isLazy=function(w){return k(w)===y},cn.isMemo=function(w){return k(w)===g},cn.isPortal=function(w){return k(w)===e},cn.isProfiler=function(w){return k(w)===i},cn.isStrictMode=function(w){return k(w)===r},cn.isSuspense=function(w){return k(w)===h},cn.isSuspenseList=function(w){return k(w)===f},cn.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===i||w===r||w===h||w===f||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===g||w.$$typeof===c||w.$$typeof===o||w.$$typeof===u||w.$$typeof===b||w.getModuleId!==void 0)},cn.typeOf=k,cn}var yk;function tW(){return yk||(yk=1,hy.exports=eW()),hy.exports}var pj=tW();function Vs(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function mj(t){if(S.isValidElement(t)||pj.isValidElementType(t)||!Vs(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=mj(t[n])}),e}function Ri(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Vs(t)&&Vs(e)&&Object.keys(e).forEach(i=>{S.isValidElement(e[i])||pj.isValidElementType(e[i])?r[i]=e[i]:Vs(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Vs(t[i])?r[i]=Ri(t[i],e[i],n):n.clone?r[i]=Vs(e[i])?mj(e[i]):e[i]:r[i]=e[i]}),r}function wd(t,e){return e?Ri(t,e,{clone:!1}):t}function vk(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var c,u;const o=/min-width:\s*([0-9.]+)/;return+(((c=r.match(o))==null?void 0:c[1])||0)-+(((u=i.match(o))==null?void 0:u[1])||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function nW(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function rW(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function iW(t){const e=(o,c)=>o.replace("@media",c?`@container ${c}`:"@container");function n(o,c){o.up=(...u)=>e(t.breakpoints.up(...u),c),o.down=(...u)=>e(t.breakpoints.down(...u),c),o.between=(...u)=>e(t.breakpoints.between(...u),c),o.only=(...u)=>e(t.breakpoints.only(...u),c),o.not=(...u)=>{const h=e(t.breakpoints.not(...u),c);return h.includes("not all and")?h.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):h}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const $m={xs:0,sm:600,md:900,lg:1200,xl:1536},xk={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${$m[t]}px)`},sW={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:$m[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Ra(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||xk;return e.reduce((c,u,h)=>(c[o.up(o.keys[h])]=n(e[h]),c),{})}if(typeof e=="object"){const o=r.breakpoints||xk;return Object.keys(e).reduce((c,u)=>{if(nW(o.keys,u)){const h=rW(r.containerQueries?r:sW,u);h&&(c[h]=n(e[u],u))}else if(Object.keys(o.values||$m).includes(u)){const h=o.up(u);c[h]=n(e[u],u)}else{const h=u;c[h]=e[h]}return c},{})}return n(e)}function aW(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function bk(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function zm(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Zp(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=zm(t,n)||r,e&&(i=e(i,r,t)),i}function Zn(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=c=>{if(c[e]==null)return null;const u=c[e],h=c.theme,f=zm(h,r)||{};return Ra(c,u,y=>{let v=Zp(f,i,y);return y===v&&typeof y=="string"&&(v=Zp(f,i,`${e}${y==="default"?"":Pi(y)}`,y)),n===!1?v:{[n]:v}})};return o.propTypes={},o.filterProps=[e],o}function oW(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const lW={m:"margin",p:"padding"},cW={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},wk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},uW=oW(t=>{if(t.length>2)if(wk[t])t=wk[t];else return[t];const[e,n]=t.split(""),r=lW[e],i=cW[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),W1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],q1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...W1,...q1];function gh(t,e,n,r){const i=zm(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const c=Math.abs(o),u=i[c];return o>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof i=="function"?i:()=>{}}function G1(t){return gh(t,"spacing",8)}function yh(t,e){return typeof e=="string"||e==null?e:t(e)}function dW(t,e){return n=>t.reduce((r,i)=>(r[i]=yh(e,n),r),{})}function hW(t,e,n,r){if(!e.includes(n))return null;const i=uW(n),o=dW(i,r),c=t[n];return Ra(t,c,o)}function gj(t,e){const n=G1(t.theme);return Object.keys(t).map(r=>hW(t,e,r,n)).reduce(wd,{})}function Bn(t){return gj(t,W1)}Bn.propTypes={};Bn.filterProps=W1;function Hn(t){return gj(t,q1)}Hn.propTypes={};Hn.filterProps=q1;function Bm(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?wd(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Hi(t){return typeof t!="number"?t:`${t}px solid`}function Yi(t,e){return Zn({prop:t,themeKey:"borders",transform:e})}const fW=Yi("border",Hi),pW=Yi("borderTop",Hi),mW=Yi("borderRight",Hi),gW=Yi("borderBottom",Hi),yW=Yi("borderLeft",Hi),vW=Yi("borderColor"),xW=Yi("borderTopColor"),bW=Yi("borderRightColor"),wW=Yi("borderBottomColor"),_W=Yi("borderLeftColor"),EW=Yi("outline",Hi),NW=Yi("outlineColor"),Hm=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=gh(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:yh(e,r)});return Ra(t,t.borderRadius,n)}return null};Hm.propTypes={};Hm.filterProps=["borderRadius"];Bm(fW,pW,mW,gW,yW,vW,xW,bW,wW,_W,Hm,EW,NW);const Wm=t=>{if(t.gap!==void 0&&t.gap!==null){const e=gh(t.theme,"spacing",8),n=r=>({gap:yh(e,r)});return Ra(t,t.gap,n)}return null};Wm.propTypes={};Wm.filterProps=["gap"];const qm=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=gh(t.theme,"spacing",8),n=r=>({columnGap:yh(e,r)});return Ra(t,t.columnGap,n)}return null};qm.propTypes={};qm.filterProps=["columnGap"];const Gm=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=gh(t.theme,"spacing",8),n=r=>({rowGap:yh(e,r)});return Ra(t,t.rowGap,n)}return null};Gm.propTypes={};Gm.filterProps=["rowGap"];const kW=Zn({prop:"gridColumn"}),SW=Zn({prop:"gridRow"}),AW=Zn({prop:"gridAutoFlow"}),TW=Zn({prop:"gridAutoColumns"}),CW=Zn({prop:"gridAutoRows"}),jW=Zn({prop:"gridTemplateColumns"}),IW=Zn({prop:"gridTemplateRows"}),PW=Zn({prop:"gridTemplateAreas"}),RW=Zn({prop:"gridArea"});Bm(Wm,qm,Gm,kW,SW,AW,TW,CW,jW,IW,PW,RW);function zc(t,e){return e==="grey"?e:t}const MW=Zn({prop:"color",themeKey:"palette",transform:zc}),DW=Zn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:zc}),OW=Zn({prop:"backgroundColor",themeKey:"palette",transform:zc});Bm(MW,DW,OW);function Ci(t){return t<=1&&t!==0?`${t*100}%`:t}const LW=Zn({prop:"width",transform:Ci}),K1=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,o,c,u,h;const r=((c=(o=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:c[n])||$m[n];return r?((h=(u=t.theme)==null?void 0:u.breakpoints)==null?void 0:h.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Ci(n)}};return Ra(t,t.maxWidth,e)}return null};K1.filterProps=["maxWidth"];const VW=Zn({prop:"minWidth",transform:Ci}),FW=Zn({prop:"height",transform:Ci}),UW=Zn({prop:"maxHeight",transform:Ci}),$W=Zn({prop:"minHeight",transform:Ci});Zn({prop:"size",cssProperty:"width",transform:Ci});Zn({prop:"size",cssProperty:"height",transform:Ci});const zW=Zn({prop:"boxSizing"});Bm(LW,K1,VW,FW,UW,$W,zW);const vh={border:{themeKey:"borders",transform:Hi},borderTop:{themeKey:"borders",transform:Hi},borderRight:{themeKey:"borders",transform:Hi},borderBottom:{themeKey:"borders",transform:Hi},borderLeft:{themeKey:"borders",transform:Hi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Hi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Hm},color:{themeKey:"palette",transform:zc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:zc},backgroundColor:{themeKey:"palette",transform:zc},p:{style:Hn},pt:{style:Hn},pr:{style:Hn},pb:{style:Hn},pl:{style:Hn},px:{style:Hn},py:{style:Hn},padding:{style:Hn},paddingTop:{style:Hn},paddingRight:{style:Hn},paddingBottom:{style:Hn},paddingLeft:{style:Hn},paddingX:{style:Hn},paddingY:{style:Hn},paddingInline:{style:Hn},paddingInlineStart:{style:Hn},paddingInlineEnd:{style:Hn},paddingBlock:{style:Hn},paddingBlockStart:{style:Hn},paddingBlockEnd:{style:Hn},m:{style:Bn},mt:{style:Bn},mr:{style:Bn},mb:{style:Bn},ml:{style:Bn},mx:{style:Bn},my:{style:Bn},margin:{style:Bn},marginTop:{style:Bn},marginRight:{style:Bn},marginBottom:{style:Bn},marginLeft:{style:Bn},marginX:{style:Bn},marginY:{style:Bn},marginInline:{style:Bn},marginInlineStart:{style:Bn},marginInlineEnd:{style:Bn},marginBlock:{style:Bn},marginBlockStart:{style:Bn},marginBlockEnd:{style:Bn},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Wm},rowGap:{style:Gm},columnGap:{style:qm},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ci},maxWidth:{style:K1},minWidth:{transform:Ci},height:{transform:Ci},maxHeight:{transform:Ci},minHeight:{transform:Ci},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function BW(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function HW(t,e){return typeof t=="function"?t(e):t}function WW(){function t(n,r,i,o){const c={[n]:r,theme:i},u=o[n];if(!u)return{[n]:r};const{cssProperty:h=n,themeKey:f,transform:g,style:y}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const v=zm(i,f)||{};return y?y(c):Ra(c,r,k=>{let w=Zp(v,g,k);return k===w&&typeof k=="string"&&(w=Zp(v,g,`${n}${k==="default"?"":Pi(k)}`,k)),h===!1?w:{[h]:w}})}function e(n){const{sx:r,theme:i={},nested:o}=n||{};if(!r)return null;const c=i.unstable_sxConfig??vh;function u(h){let f=h;if(typeof h=="function")f=h(i);else if(typeof h!="object")return h;if(!f)return null;const g=aW(i.breakpoints),y=Object.keys(g);let v=g;return Object.keys(f).forEach(b=>{const k=HW(f[b],i);if(k!=null)if(typeof k=="object")if(c[b])v=wd(v,t(b,k,i,c));else{const w=Ra({theme:i},k,A=>({[b]:A}));BW(w,k)?v[b]=e({sx:k,theme:i,nested:!0}):v=wd(v,w)}else v=wd(v,t(b,k,i,c))}),!o&&i.modularCssLayers?{"@layer sx":vk(i,bk(y,v))}:vk(i,bk(y,v))}return Array.isArray(r)?r.map(u):u(r)}return e}const jl=WW();jl.filterProps=["sx"];const qW=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??vh;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function yj(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=qW(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...c)=>{const u=e(...c);return Vs(u)?{...r,...u}:r}:o={...r,...e},{...i,sx:o}}function Dv(){return Dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dv.apply(null,arguments)}function GW(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function KW(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var QW=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(KW(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=GW(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Br="-ms-",em="-moz-",Jt="-webkit-",vj="comm",Q1="rule",Y1="decl",YW="@import",xj="@keyframes",XW="@layer",JW=Math.abs,Km=String.fromCharCode,ZW=Object.assign;function eq(t,e){return Rr(t,0)^45?(((e<<2^Rr(t,0))<<2^Rr(t,1))<<2^Rr(t,2))<<2^Rr(t,3):0}function bj(t){return t.trim()}function tq(t,e){return(t=e.exec(t))?t[0]:t}function Zt(t,e,n){return t.replace(e,n)}function Ov(t,e){return t.indexOf(e)}function Rr(t,e){return t.charCodeAt(e)|0}function qd(t,e,n){return t.slice(e,n)}function Ds(t){return t.length}function X1(t){return t.length}function Gf(t,e){return e.push(t),t}function nq(t,e){return t.map(e).join("")}var Qm=1,eu=1,wj=0,bi=0,sr=0,pu="";function Ym(t,e,n,r,i,o,c){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Qm,column:eu,length:c,return:""}}function Ku(t,e){return ZW(Ym("",null,null,"",null,null,0),t,{length:-t.length},e)}function rq(){return sr}function iq(){return sr=bi>0?Rr(pu,--bi):0,eu--,sr===10&&(eu=1,Qm--),sr}function Mi(){return sr=bi<wj?Rr(pu,bi++):0,eu++,sr===10&&(eu=1,Qm++),sr}function Xs(){return Rr(pu,bi)}function hp(){return bi}function xh(t,e){return qd(pu,t,e)}function Gd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _j(t){return Qm=eu=1,wj=Ds(pu=t),bi=0,[]}function Ej(t){return pu="",t}function fp(t){return bj(xh(bi-1,Lv(t===91?t+2:t===40?t+1:t)))}function sq(t){for(;(sr=Xs())&&sr<33;)Mi();return Gd(t)>2||Gd(sr)>3?"":" "}function aq(t,e){for(;--e&&Mi()&&!(sr<48||sr>102||sr>57&&sr<65||sr>70&&sr<97););return xh(t,hp()+(e<6&&Xs()==32&&Mi()==32))}function Lv(t){for(;Mi();)switch(sr){case t:return bi;case 34:case 39:t!==34&&t!==39&&Lv(sr);break;case 40:t===41&&Lv(t);break;case 92:Mi();break}return bi}function oq(t,e){for(;Mi()&&t+sr!==57;)if(t+sr===84&&Xs()===47)break;return"/*"+xh(e,bi-1)+"*"+Km(t===47?t:Mi())}function lq(t){for(;!Gd(Xs());)Mi();return xh(t,bi)}function cq(t){return Ej(pp("",null,null,null,[""],t=_j(t),0,[0],t))}function pp(t,e,n,r,i,o,c,u,h){for(var f=0,g=0,y=c,v=0,b=0,k=0,w=1,A=1,j=1,R=0,L="",D=i,z=o,G=r,M=L;A;)switch(k=R,R=Mi()){case 40:if(k!=108&&Rr(M,y-1)==58){Ov(M+=Zt(fp(R),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:M+=fp(R);break;case 9:case 10:case 13:case 32:M+=sq(k);break;case 92:M+=aq(hp()-1,7);continue;case 47:switch(Xs()){case 42:case 47:Gf(uq(oq(Mi(),hp()),e,n),h);break;default:M+="/"}break;case 123*w:u[f++]=Ds(M)*j;case 125*w:case 59:case 0:switch(R){case 0:case 125:A=0;case 59+g:j==-1&&(M=Zt(M,/\f/g,"")),b>0&&Ds(M)-y&&Gf(b>32?Ek(M+";",r,n,y-1):Ek(Zt(M," ","")+";",r,n,y-2),h);break;case 59:M+=";";default:if(Gf(G=_k(M,e,n,f,g,i,u,L,D=[],z=[],y),o),R===123)if(g===0)pp(M,e,G,G,D,o,y,u,z);else switch(v===99&&Rr(M,3)===110?100:v){case 100:case 108:case 109:case 115:pp(t,G,G,r&&Gf(_k(t,G,G,0,0,i,u,L,i,D=[],y),z),i,z,y,u,r?D:z);break;default:pp(M,G,G,G,[""],z,0,u,z)}}f=g=b=0,w=j=1,L=M="",y=c;break;case 58:y=1+Ds(M),b=k;default:if(w<1){if(R==123)--w;else if(R==125&&w++==0&&iq()==125)continue}switch(M+=Km(R),R*w){case 38:j=g>0?1:(M+="\f",-1);break;case 44:u[f++]=(Ds(M)-1)*j,j=1;break;case 64:Xs()===45&&(M+=fp(Mi())),v=Xs(),g=y=Ds(L=M+=lq(hp())),R++;break;case 45:k===45&&Ds(M)==2&&(w=0)}}return o}function _k(t,e,n,r,i,o,c,u,h,f,g){for(var y=i-1,v=i===0?o:[""],b=X1(v),k=0,w=0,A=0;k<r;++k)for(var j=0,R=qd(t,y+1,y=JW(w=c[k])),L=t;j<b;++j)(L=bj(w>0?v[j]+" "+R:Zt(R,/&\f/g,v[j])))&&(h[A++]=L);return Ym(t,e,n,i===0?Q1:u,h,f,g)}function uq(t,e,n){return Ym(t,e,n,vj,Km(rq()),qd(t,2,-2),0)}function Ek(t,e,n,r){return Ym(t,e,n,Y1,qd(t,0,r),qd(t,r+1,-1),r)}function Bc(t,e){for(var n="",r=X1(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function dq(t,e,n,r){switch(t.type){case XW:if(t.children.length)break;case YW:case Y1:return t.return=t.return||t.value;case vj:return"";case xj:return t.return=t.value+"{"+Bc(t.children,r)+"}";case Q1:t.value=t.props.join(",")}return Ds(n=Bc(t.children,r))?t.return=t.value+"{"+n+"}":""}function hq(t){var e=X1(t);return function(n,r,i,o){for(var c="",u=0;u<e;u++)c+=t[u](n,r,i,o)||"";return c}}function fq(t){return function(e){e.root||(e=e.return)&&t(e)}}function Nj(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var pq=function(e,n,r){for(var i=0,o=0;i=o,o=Xs(),i===38&&o===12&&(n[r]=1),!Gd(o);)Mi();return xh(e,bi)},mq=function(e,n){var r=-1,i=44;do switch(Gd(i)){case 0:i===38&&Xs()===12&&(n[r]=1),e[r]+=pq(bi-1,n,r);break;case 2:e[r]+=fp(i);break;case 4:if(i===44){e[++r]=Xs()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Km(i)}while(i=Mi());return e},gq=function(e,n){return Ej(mq(_j(e),n))},Nk=new WeakMap,yq=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Nk.get(r))&&!i){Nk.set(e,!0);for(var o=[],c=gq(n,o),u=r.props,h=0,f=0;h<c.length;h++)for(var g=0;g<u.length;g++,f++)e.props[f]=o[h]?c[h].replace(/&\f/g,u[g]):u[g]+" "+c[h]}}},vq=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function kj(t,e){switch(eq(t,e)){case 5103:return Jt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Jt+t+em+t+Br+t+t;case 6828:case 4268:return Jt+t+Br+t+t;case 6165:return Jt+t+Br+"flex-"+t+t;case 5187:return Jt+t+Zt(t,/(\w+).+(:[^]+)/,Jt+"box-$1$2"+Br+"flex-$1$2")+t;case 5443:return Jt+t+Br+"flex-item-"+Zt(t,/flex-|-self/,"")+t;case 4675:return Jt+t+Br+"flex-line-pack"+Zt(t,/align-content|flex-|-self/,"")+t;case 5548:return Jt+t+Br+Zt(t,"shrink","negative")+t;case 5292:return Jt+t+Br+Zt(t,"basis","preferred-size")+t;case 6060:return Jt+"box-"+Zt(t,"-grow","")+Jt+t+Br+Zt(t,"grow","positive")+t;case 4554:return Jt+Zt(t,/([^-])(transform)/g,"$1"+Jt+"$2")+t;case 6187:return Zt(Zt(Zt(t,/(zoom-|grab)/,Jt+"$1"),/(image-set)/,Jt+"$1"),t,"")+t;case 5495:case 3959:return Zt(t,/(image-set\([^]*)/,Jt+"$1$`$1");case 4968:return Zt(Zt(t,/(.+:)(flex-)?(.*)/,Jt+"box-pack:$3"+Br+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jt+t+t;case 4095:case 3583:case 4068:case 2532:return Zt(t,/(.+)-inline(.+)/,Jt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ds(t)-1-e>6)switch(Rr(t,e+1)){case 109:if(Rr(t,e+4)!==45)break;case 102:return Zt(t,/(.+:)(.+)-([^]+)/,"$1"+Jt+"$2-$3$1"+em+(Rr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Ov(t,"stretch")?kj(Zt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Rr(t,e+1)!==115)break;case 6444:switch(Rr(t,Ds(t)-3-(~Ov(t,"!important")&&10))){case 107:return Zt(t,":",":"+Jt)+t;case 101:return Zt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jt+(Rr(t,14)===45?"inline-":"")+"box$3$1"+Jt+"$2$3$1"+Br+"$2box$3")+t}break;case 5936:switch(Rr(t,e+11)){case 114:return Jt+t+Br+Zt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Jt+t+Br+Zt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Jt+t+Br+Zt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Jt+t+Br+t+t}return t}var xq=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case Y1:e.return=kj(e.value,e.length);break;case xj:return Bc([Ku(e,{value:Zt(e.value,"@","@"+Jt)})],i);case Q1:if(e.length)return nq(e.props,function(o){switch(tq(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Bc([Ku(e,{props:[Zt(o,/:(read-\w+)/,":"+em+"$1")]})],i);case"::placeholder":return Bc([Ku(e,{props:[Zt(o,/:(plac\w+)/,":"+Jt+"input-$1")]}),Ku(e,{props:[Zt(o,/:(plac\w+)/,":"+em+"$1")]}),Ku(e,{props:[Zt(o,/:(plac\w+)/,Br+"input-$1")]})],i)}return""})}},bq=[xq],wq=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(w){var A=w.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var i=e.stylisPlugins||bq,o={},c,u=[];c=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(w){for(var A=w.getAttribute("data-emotion").split(" "),j=1;j<A.length;j++)o[A[j]]=!0;u.push(w)});var h,f=[yq,vq];{var g,y=[dq,fq(function(w){g.insert(w)})],v=hq(f.concat(i,y)),b=function(A){return Bc(cq(A),v)};h=function(A,j,R,L){g=R,b(A?A+"{"+j.styles+"}":j.styles),L&&(k.inserted[j.name]=!0)}}var k={key:n,sheet:new QW({key:n,container:c,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return k.sheet.hydrate(u),k},_q=!0;function Eq(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var Sj=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||_q===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Nq=function(e,n,r){Sj(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function kq(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Sq={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Aq=/[A-Z]|^ms/g,Tq=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Aj=function(e){return e.charCodeAt(1)===45},kk=function(e){return e!=null&&typeof e!="boolean"},fy=Nj(function(t){return Aj(t)?t:t.replace(Aq,"-$&").toLowerCase()}),Sk=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Tq,function(r,i,o){return Os={name:i,styles:o,next:Os},i})}return Sq[e]!==1&&!Aj(e)&&typeof n=="number"&&n!==0?n+"px":n};function Kd(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Os={name:i.name,styles:i.styles,next:Os},i.name;var o=n;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)Os={name:c.name,styles:c.styles,next:Os},c=c.next;var u=o.styles+";";return u}return Cq(t,e,n)}case"function":{if(t!==void 0){var h=Os,f=n(t);return Os=h,Kd(t,e,f)}break}}var g=n;if(e==null)return g;var y=e[g];return y!==void 0?y:g}function Cq(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Kd(t,e,n[i])+";";else for(var o in n){var c=n[o];if(typeof c!="object"){var u=c;e!=null&&e[u]!==void 0?r+=o+"{"+e[u]+"}":kk(u)&&(r+=fy(o)+":"+Sk(o,u)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(e==null||e[c[0]]===void 0))for(var h=0;h<c.length;h++)kk(c[h])&&(r+=fy(o)+":"+Sk(o,c[h])+";");else{var f=Kd(t,e,c);switch(o){case"animation":case"animationName":{r+=fy(o)+":"+f+";";break}default:r+=o+"{"+f+"}"}}}return r}var Ak=/label:\s*([^\s;{]+)\s*(;|$)/g,Os;function Tj(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Os=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Kd(n,e,o);else{var c=o;i+=c[0]}for(var u=1;u<t.length;u++)if(i+=Kd(n,e,t[u]),r){var h=o;i+=h[u]}Ak.lastIndex=0;for(var f="",g;(g=Ak.exec(i))!==null;)f+="-"+g[1];var y=kq(i)+f;return{name:y,styles:i,next:Os}}var jq=function(e){return e()},Iq=yy.useInsertionEffect?yy.useInsertionEffect:!1,Pq=Iq||jq,Cj=S.createContext(typeof HTMLElement<"u"?wq({key:"css"}):null);Cj.Provider;var Rq=function(e){return S.forwardRef(function(n,r){var i=S.useContext(Cj);return e(n,i,r)})},jj=S.createContext({}),Mq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Dq=Nj(function(t){return Mq.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Oq=Dq,Lq=function(e){return e!=="theme"},Tk=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Oq:Lq},Ck=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(c){return e.__emotion_forwardProp(c)&&o(c)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Vq=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return Sj(n,r,i),Pq(function(){return Nq(n,r,i)}),null},Fq=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,c;n!==void 0&&(o=n.label,c=n.target);var u=Ck(e,n,r),h=u||Tk(i),f=!h("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&y.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{var v=g[0];y.push(v[0]);for(var b=g.length,k=1;k<b;k++)y.push(g[k],v[k])}var w=Rq(function(A,j,R){var L=f&&A.as||i,D="",z=[],G=A;if(A.theme==null){G={};for(var M in A)G[M]=A[M];G.theme=S.useContext(jj)}typeof A.className=="string"?D=Eq(j.registered,z,A.className):A.className!=null&&(D=A.className+" ");var I=Tj(y.concat(z),j.registered,G);D+=j.key+"-"+I.name,c!==void 0&&(D+=" "+c);var T=f&&u===void 0?Tk(L):h,N={};for(var V in A)f&&V==="as"||T(V)&&(N[V]=A[V]);return N.className=D,R&&(N.ref=R),S.createElement(S.Fragment,null,S.createElement(Vq,{cache:j,serialized:I,isStringTag:typeof L=="string"}),S.createElement(L,N))});return w.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=i,w.__emotion_styles=y,w.__emotion_forwardProp=u,Object.defineProperty(w,"toString",{value:function(){return"."+c}}),w.withComponent=function(A,j){var R=t(A,Dv({},n,j,{shouldForwardProp:Ck(w,j,!0)}));return R.apply(void 0,y)},w}},Uq=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Vv=Fq.bind(null);Uq.forEach(function(t){Vv[t]=Vv(t)});function Ij(t,e){return Vv(t,e)}function $q(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const jk=[];function wl(t){return jk[0]=t,Tj(jk)}const zq=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Bq(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=zq(e),c=Object.keys(o);function u(v){return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${n})`}function h(v){return`@media (max-width:${(typeof e[v]=="number"?e[v]:v)-r/100}${n})`}function f(v,b){const k=c.indexOf(b);return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${n}) and (max-width:${(k!==-1&&typeof e[c[k]]=="number"?e[c[k]]:b)-r/100}${n})`}function g(v){return c.indexOf(v)+1<c.length?f(v,c[c.indexOf(v)+1]):u(v)}function y(v){const b=c.indexOf(v);return b===0?u(c[1]):b===c.length-1?h(c[b]):f(v,c[c.indexOf(v)+1]).replace("@media","@media not all and")}return{keys:c,values:o,up:u,down:h,between:f,only:g,not:y,unit:n,...i}}const Hq={borderRadius:4};function Pj(t=8,e=G1({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const c=e(o);return typeof c=="number"?`${c}px`:c}).join(" ");return n.mui=!0,n}function Wq(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function J1(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...c}=t,u=Bq(n),h=Pj(i);let f=Ri({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:h,shape:{...Hq,...o}},c);return f=iW(f),f.applyStyles=Wq,f=e.reduce((g,y)=>Ri(g,y),f),f.unstable_sxConfig={...vh,...c==null?void 0:c.unstable_sxConfig},f.unstable_sx=function(y){return jl({sx:y,theme:this})},f}function qq(t){return Object.keys(t).length===0}function Gq(t=null){const e=S.useContext(jj);return!e||qq(e)?t:e}const Kq=J1();function Qq(t=Kq){return Gq(t)}const Ik=t=>t,Yq=()=>{let t=Ik;return{configure(e){t=e},generate(e){return t(e)},reset(){t=Ik}}},Rj=Yq();function Xq(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=Ij("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(jl);return S.forwardRef(function(h,f){const g=Qq(n),{className:y,component:v="div",...b}=yj(h);return a.jsx(o,{as:v,ref:f,className:Ys(y,i?i(r):r),theme:e&&g[e]||g,...b})})}const Jq={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Z1(t,e,n="Mui"){const r=Jq[e];return r?`${n}-${r}`:`${Rj.generate(t)}-${e}`}function eb(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Z1(t,i,n)}),r}function Mj(t){const{variants:e,...n}=t,r={variants:e,style:wl(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=wl(i.style))}),r}const Zq=J1();function py(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function pl(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function eG(t){return t?(e,n)=>n[t]:null}function tG(t,e,n){t.theme=iG(t.theme)?n:t.theme[e]||t.theme}function mp(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>mp(t,i,n));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=n?pl(r.style,n):r.style;else{const{variants:o,...c}=r;i=n?pl(wl(c),n):c}return Dj(t,r.variants,[i],n)}return r!=null&&r.isProcessed?n?pl(wl(r.style),n):r.style:n?pl(wl(r),n):r}function Dj(t,e,n=[],r=void 0){var o;let i;e:for(let c=0;c<e.length;c+=1){const u=e[c];if(typeof u.props=="function"){if(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),!u.props(i))continue}else for(const h in u.props)if(t[h]!==u.props[h]&&((o=t.ownerState)==null?void 0:o[h])!==u.props[h])continue e;typeof u.style=="function"?(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),n.push(r?pl(wl(u.style(i)),r):u.style(i))):n.push(r?pl(wl(u.style),r):u.style)}return n}function nG(t={}){const{themeId:e,defaultTheme:n=Zq,rootShouldForwardProp:r=py,slotShouldForwardProp:i=py}=t;function o(u){tG(u,e,n)}return(u,h={})=>{$q(u,G=>G.filter(M=>M!==jl));const{name:f,slot:g,skipVariantsResolver:y,skipSx:v,overridesResolver:b=eG(aG(g)),...k}=h,w=f&&f.startsWith("Mui")||g?"components":"custom",A=y!==void 0?y:g&&g!=="Root"&&g!=="root"||!1,j=v||!1;let R=py;g==="Root"||g==="root"?R=r:g?R=i:sG(u)&&(R=void 0);const L=Ij(u,{shouldForwardProp:R,label:rG(),...k}),D=G=>{if(G.__emotion_real===G)return G;if(typeof G=="function")return function(I){return mp(I,G,I.theme.modularCssLayers?w:void 0)};if(Vs(G)){const M=Mj(G);return function(T){return M.variants?mp(T,M,T.theme.modularCssLayers?w:void 0):T.theme.modularCssLayers?pl(M.style,w):M.style}}return G},z=(...G)=>{const M=[],I=G.map(D),T=[];if(M.push(o),f&&b&&T.push(function(O){var He,de;const Pe=(de=(He=O.theme.components)==null?void 0:He[f])==null?void 0:de.styleOverrides;if(!Pe)return null;const We={};for(const ce in Pe)We[ce]=mp(O,Pe[ce],O.theme.modularCssLayers?"theme":void 0);return b(O,We)}),f&&!A&&T.push(function(O){var We,He;const xe=O.theme,Pe=(He=(We=xe==null?void 0:xe.components)==null?void 0:We[f])==null?void 0:He.variants;return Pe?Dj(O,Pe,[],O.theme.modularCssLayers?"theme":void 0):null}),j||T.push(jl),Array.isArray(I[0])){const U=I.shift(),O=new Array(M.length).fill(""),xe=new Array(T.length).fill("");let Pe;Pe=[...O,...U,...xe],Pe.raw=[...O,...U.raw,...xe],M.unshift(Pe)}const N=[...M,...I,...T],V=L(...N);return u.muiName&&(V.muiName=u.muiName),V};return L.withConfig&&(z.withConfig=L.withConfig),z}}function rG(t,e){return void 0}function iG(t){for(const e in t)return!1;return!0}function sG(t){return typeof t=="string"&&t.charCodeAt(0)>96}function aG(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Fv(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=i;if(o==="components"||o==="slots")r[o]={...t[o],...r[o]};else if(o==="componentsProps"||o==="slotProps"){const c=t[o],u=e[o];if(!u)r[o]=c||{};else if(!c)r[o]=u;else{r[o]={...u};for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h)){const f=h;r[o][f]=Fv(c[f],u[f],n)}}}else o==="className"&&n&&e.className?r.className=Ys(t==null?void 0:t.className,e==null?void 0:e.className):o==="style"&&n&&e.style?r.style={...t==null?void 0:t.style,...e==null?void 0:e.style}:r[o]===void 0&&(r[o]=t[o])}return r}const oG=S.createContext(void 0);function lG(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Fv(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?Fv(i,r,e.components.mergeClassNameAndStyle):r}function cG({props:t,name:e}){const n=S.useContext(oG);return lG({props:t,name:e,theme:{components:n}})}const Pk={theme:void 0};function uG(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(Pk.theme=i.theme,o=Mj(t(Pk)),e=o,n=i.theme),o}}function dG(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const Rk=(t,e,n,r=[])=>{let i=t;e.forEach((o,c)=>{c===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},hG=(t,e,n)=>{function r(i,o=[],c=[]){Object.entries(i).forEach(([u,h])=>{(!n||n&&!n([...o,u]))&&h!=null&&(typeof h=="object"&&Object.keys(h).length>0?r(h,[...o,u],Array.isArray(h)?[...c,u]:c):e([...o,u],h,c))})}r(t)},fG=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function my(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},c={};return hG(t,(u,h,f)=>{if((typeof h=="string"||typeof h=="number")&&(!r||!r(u,h))){const g=`--${n?`${n}-`:""}${u.join("-")}`,y=fG(u,h);Object.assign(i,{[g]:y}),Rk(o,u,`var(${g})`,f),Rk(c,u,`var(${g}, ${y})`,f)}},u=>u[0]==="vars"),{css:i,vars:o,varsWithDefaults:c}}function pG(t,e={}){const{getSelector:n=A,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:o={},components:c,defaultColorScheme:u="light",...h}=t,{vars:f,css:g,varsWithDefaults:y}=my(h,e);let v=y;const b={},{[u]:k,...w}=o;if(Object.entries(w||{}).forEach(([L,D])=>{const{vars:z,css:G,varsWithDefaults:M}=my(D,e);v=Ri(v,M),b[L]={css:G,vars:z}}),k){const{css:L,vars:D,varsWithDefaults:z}=my(k,e);v=Ri(v,z),b[u]={css:L,vars:D}}function A(L,D){var G,M;let z=i;if(i==="class"&&(z=".%s"),i==="data"&&(z="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(z=`[${i}="%s"]`),L){if(z==="media")return t.defaultColorScheme===L?":root":{[`@media (prefers-color-scheme: ${((M=(G=o[L])==null?void 0:G.palette)==null?void 0:M.mode)||L})`]:{":root":D}};if(z)return t.defaultColorScheme===L?`:root, ${z.replace("%s",String(L))}`:z.replace("%s",String(L))}return":root"}return{vars:v,generateThemeVars:()=>{let L={...f};return Object.entries(b).forEach(([,{vars:D}])=>{L=Ri(L,D)}),L},generateStyleSheets:()=>{var I,T;const L=[],D=t.defaultColorScheme||"light";function z(N,V){Object.keys(V).length&&L.push(typeof N=="string"?{[N]:{...V}}:N)}z(n(void 0,{...g}),g);const{[D]:G,...M}=b;if(G){const{css:N}=G,V=(T=(I=o[D])==null?void 0:I.palette)==null?void 0:T.mode,U=!r&&V?{colorScheme:V,...N}:{...N};z(n(D,{...U}),U)}return Object.entries(M).forEach(([N,{css:V}])=>{var xe,Pe;const U=(Pe=(xe=o[N])==null?void 0:xe.palette)==null?void 0:Pe.mode,O=!r&&U?{colorScheme:U,...V}:{...V};z(n(N,{...O}),O)}),L}}}function mG(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const Qd={black:"#000",white:"#fff"},gG={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},bc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},wc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Qu={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},_c={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ec={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Nc={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Oj(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qd.white,default:Qd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const yG=Oj();function Lj(){return{text:{primary:Qd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Mk=Lj();function Dk(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Wd(t.main,i):e==="dark"&&(t.dark=Hd(t.main,o)))}function vG(t="light"){return t==="dark"?{main:_c[200],light:_c[50],dark:_c[400]}:{main:_c[700],light:_c[400],dark:_c[800]}}function xG(t="light"){return t==="dark"?{main:bc[200],light:bc[50],dark:bc[400]}:{main:bc[500],light:bc[300],dark:bc[700]}}function bG(t="light"){return t==="dark"?{main:wc[500],light:wc[300],dark:wc[700]}:{main:wc[700],light:wc[400],dark:wc[800]}}function wG(t="light"){return t==="dark"?{main:Ec[400],light:Ec[300],dark:Ec[700]}:{main:Ec[700],light:Ec[500],dark:Ec[900]}}function _G(t="light"){return t==="dark"?{main:Nc[400],light:Nc[300],dark:Nc[700]}:{main:Nc[800],light:Nc[500],dark:Nc[900]}}function EG(t="light"){return t==="dark"?{main:Qu[400],light:Qu[300],dark:Qu[700]}:{main:"#ed6c02",light:Qu[500],dark:Qu[900]}}function tb(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,o=t.primary||vG(e),c=t.secondary||xG(e),u=t.error||bG(e),h=t.info||wG(e),f=t.success||_G(e),g=t.warning||EG(e);function y(w){return OH(w,Mk.text.primary)>=n?Mk.text.primary:yG.text.primary}const v=({color:w,name:A,mainShade:j=500,lightShade:R=300,darkShade:L=700})=>{if(w={...w},!w.main&&w[j]&&(w.main=w[j]),!w.hasOwnProperty("main"))throw new Error(Cl(11,A?` (${A})`:"",j));if(typeof w.main!="string")throw new Error(Cl(12,A?` (${A})`:"",JSON.stringify(w.main)));return Dk(w,"light",R,r),Dk(w,"dark",L,r),w.contrastText||(w.contrastText=y(w.main)),w};let b;return e==="light"?b=Oj():e==="dark"&&(b=Lj()),Ri({common:{...Qd},mode:e,primary:v({color:o,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:u,name:"error"}),warning:v({color:g,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:f,name:"success"}),grey:gG,contrastThreshold:n,getContrastText:y,augmentColor:v,tonalOffset:r,...b},i)}function NG(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function kG(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function SG(t){return Math.round(t*1e5)/1e5}const Ok={textTransform:"uppercase"},Lk='"Roboto", "Helvetica", "Arial", sans-serif';function AG(t,e){const{fontFamily:n=Lk,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:h=16,allVariants:f,pxToRem:g,...y}=typeof e=="function"?e(t):e,v=r/14,b=g||(A=>`${A/h*v}rem`),k=(A,j,R,L,D)=>({fontFamily:n,fontWeight:A,fontSize:b(j),lineHeight:R,...n===Lk?{letterSpacing:`${SG(L/j)}em`}:{},...D,...f}),w={h1:k(i,96,1.167,-1.5),h2:k(i,60,1.2,-.5),h3:k(o,48,1.167,0),h4:k(o,34,1.235,.25),h5:k(o,24,1.334,0),h6:k(c,20,1.6,.15),subtitle1:k(o,16,1.75,.15),subtitle2:k(c,14,1.57,.1),body1:k(o,16,1.5,.15),body2:k(o,14,1.43,.15),button:k(c,14,1.75,.4,Ok),caption:k(o,12,1.66,.4),overline:k(o,12,2.66,1,Ok),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ri({htmlFontSize:h,pxToRem:b,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:c,fontWeightBold:u,...w},y,{clone:!1})}const TG=.2,CG=.14,jG=.12;function Sn(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${TG})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${CG})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${jG})`].join(",")}const IG=["none",Sn(0,2,1,-1,0,1,1,0,0,1,3,0),Sn(0,3,1,-2,0,2,2,0,0,1,5,0),Sn(0,3,3,-2,0,3,4,0,0,1,8,0),Sn(0,2,4,-1,0,4,5,0,0,1,10,0),Sn(0,3,5,-1,0,5,8,0,0,1,14,0),Sn(0,3,5,-1,0,6,10,0,0,1,18,0),Sn(0,4,5,-2,0,7,10,1,0,2,16,1),Sn(0,5,5,-3,0,8,10,1,0,3,14,2),Sn(0,5,6,-3,0,9,12,1,0,3,16,2),Sn(0,6,6,-3,0,10,14,1,0,4,18,3),Sn(0,6,7,-4,0,11,15,1,0,4,20,3),Sn(0,7,8,-4,0,12,17,2,0,5,22,4),Sn(0,7,8,-4,0,13,19,2,0,5,24,4),Sn(0,7,9,-4,0,14,21,2,0,5,26,4),Sn(0,8,9,-5,0,15,22,2,0,6,28,5),Sn(0,8,10,-5,0,16,24,2,0,6,30,5),Sn(0,8,11,-5,0,17,26,2,0,6,32,5),Sn(0,9,11,-5,0,18,28,2,0,7,34,6),Sn(0,9,12,-6,0,19,29,2,0,7,36,6),Sn(0,10,13,-6,0,20,31,3,0,8,38,7),Sn(0,10,13,-6,0,21,33,3,0,8,40,7),Sn(0,10,14,-6,0,22,35,3,0,8,42,7),Sn(0,11,14,-7,0,23,36,3,0,9,44,8),Sn(0,11,15,-7,0,24,38,3,0,9,46,8)],PG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},RG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Vk(t){return`${Math.round(t)}ms`}function MG(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function DG(t){const e={...PG,...t.easing},n={...RG,...t.duration};return{getAutoHeightDuration:MG,create:(i=["all"],o={})=>{const{duration:c=n.standard,easing:u=e.easeInOut,delay:h=0,...f}=o;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof c=="string"?c:Vk(c)} ${u} ${typeof h=="string"?h:Vk(h)}`).join(",")},...t,easing:e,duration:n}}const OG={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function LG(t){return Vs(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function Vj(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[c,u]=i[o];!LG(u)||c.startsWith("unstable_")?delete r[c]:Vs(u)&&(r[c]={...u},n(r[c]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Uv(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:c={},typography:u={},shape:h,...f}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Cl(20));const g=tb(o),y=J1(t);let v=Ri(y,{mixins:kG(y.breakpoints,r),palette:g,shadows:IG.slice(),typography:AG(g,u),transitions:DG(c),zIndex:{...OG}});return v=Ri(v,f),v=e.reduce((b,k)=>Ri(b,k),v),v.unstable_sxConfig={...vh,...f==null?void 0:f.unstable_sxConfig},v.unstable_sx=function(k){return jl({sx:k,theme:this})},v.toRuntimeSource=Vj,v}function VG(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const FG=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=VG(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function Fj(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function Uj(t){return t==="dark"?FG:[]}function UG(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,o=tb(e);return{palette:o,opacity:{...Fj(o.mode),...n},overlays:r||Uj(o.mode),...i}}function $G(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const zG=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],BG=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const c={};return zG(t.cssVarPrefix).forEach(u=>{c[u]=n[u],delete n[u]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:c}}:o?{[o.replace("%s",e)]:c,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...c}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function HG(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function ve(t,e,n){!t[e]&&n&&(t[e]=n)}function sd(t){return typeof t!="string"||!t.startsWith("hsl")?t:uj(t)}function xa(t,e){`${e}Channel`in t||(t[`${e}Channel`]=id(sd(t[e])))}function WG(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Rs=t=>{try{return t()}catch{}},qG=(t="mui")=>dG(t);function gy(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=UG({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:o,...c}=Uv({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...Fj(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Uj(i)},c}function GG(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:c=$G,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:h=":root",...f}=t,g=Object.keys(n)[0],y=r||(n.light&&g!=="light"?"light":g),v=qG(o),{[y]:b,light:k,dark:w,...A}=n,j={...A};let R=b;if((y==="dark"&&!("dark"in n)||y==="light"&&!("light"in n))&&(R=!0),!R)throw new Error(Cl(21,y));const L=gy(j,R,f,y);k&&!j.light&&gy(j,k,void 0,"light"),w&&!j.dark&&gy(j,w,void 0,"dark");let D={defaultColorScheme:y,...L,cssVarPrefix:o,colorSchemeSelector:u,rootSelector:h,getCssVar:v,colorSchemes:j,font:{...NG(L.typography),...L.font},spacing:WG(f.spacing)};Object.keys(D.colorSchemes).forEach(T=>{const N=D.colorSchemes[T].palette,V=U=>{const O=U.split("-"),xe=O[1],Pe=O[2];return v(U,N[xe][Pe])};if(N.mode==="light"&&(ve(N.common,"background","#fff"),ve(N.common,"onBackground","#000")),N.mode==="dark"&&(ve(N.common,"background","#000"),ve(N.common,"onBackground","#fff")),HG(N,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),N.mode==="light"){ve(N.Alert,"errorColor",fn(N.error.light,.6)),ve(N.Alert,"infoColor",fn(N.info.light,.6)),ve(N.Alert,"successColor",fn(N.success.light,.6)),ve(N.Alert,"warningColor",fn(N.warning.light,.6)),ve(N.Alert,"errorFilledBg",V("palette-error-main")),ve(N.Alert,"infoFilledBg",V("palette-info-main")),ve(N.Alert,"successFilledBg",V("palette-success-main")),ve(N.Alert,"warningFilledBg",V("palette-warning-main")),ve(N.Alert,"errorFilledColor",Rs(()=>N.getContrastText(N.error.main))),ve(N.Alert,"infoFilledColor",Rs(()=>N.getContrastText(N.info.main))),ve(N.Alert,"successFilledColor",Rs(()=>N.getContrastText(N.success.main))),ve(N.Alert,"warningFilledColor",Rs(()=>N.getContrastText(N.warning.main))),ve(N.Alert,"errorStandardBg",pn(N.error.light,.9)),ve(N.Alert,"infoStandardBg",pn(N.info.light,.9)),ve(N.Alert,"successStandardBg",pn(N.success.light,.9)),ve(N.Alert,"warningStandardBg",pn(N.warning.light,.9)),ve(N.Alert,"errorIconColor",V("palette-error-main")),ve(N.Alert,"infoIconColor",V("palette-info-main")),ve(N.Alert,"successIconColor",V("palette-success-main")),ve(N.Alert,"warningIconColor",V("palette-warning-main")),ve(N.AppBar,"defaultBg",V("palette-grey-100")),ve(N.Avatar,"defaultBg",V("palette-grey-400")),ve(N.Button,"inheritContainedBg",V("palette-grey-300")),ve(N.Button,"inheritContainedHoverBg",V("palette-grey-A100")),ve(N.Chip,"defaultBorder",V("palette-grey-400")),ve(N.Chip,"defaultAvatarColor",V("palette-grey-700")),ve(N.Chip,"defaultIconColor",V("palette-grey-700")),ve(N.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ve(N.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ve(N.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ve(N.LinearProgress,"primaryBg",pn(N.primary.main,.62)),ve(N.LinearProgress,"secondaryBg",pn(N.secondary.main,.62)),ve(N.LinearProgress,"errorBg",pn(N.error.main,.62)),ve(N.LinearProgress,"infoBg",pn(N.info.main,.62)),ve(N.LinearProgress,"successBg",pn(N.success.main,.62)),ve(N.LinearProgress,"warningBg",pn(N.warning.main,.62)),ve(N.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.11)`),ve(N.Slider,"primaryTrack",pn(N.primary.main,.62)),ve(N.Slider,"secondaryTrack",pn(N.secondary.main,.62)),ve(N.Slider,"errorTrack",pn(N.error.main,.62)),ve(N.Slider,"infoTrack",pn(N.info.main,.62)),ve(N.Slider,"successTrack",pn(N.success.main,.62)),ve(N.Slider,"warningTrack",pn(N.warning.main,.62));const U=zf(N.background.default,.8);ve(N.SnackbarContent,"bg",U),ve(N.SnackbarContent,"color",Rs(()=>N.getContrastText(U))),ve(N.SpeedDialAction,"fabHoverBg",zf(N.background.paper,.15)),ve(N.StepConnector,"border",V("palette-grey-400")),ve(N.StepContent,"border",V("palette-grey-400")),ve(N.Switch,"defaultColor",V("palette-common-white")),ve(N.Switch,"defaultDisabledColor",V("palette-grey-100")),ve(N.Switch,"primaryDisabledColor",pn(N.primary.main,.62)),ve(N.Switch,"secondaryDisabledColor",pn(N.secondary.main,.62)),ve(N.Switch,"errorDisabledColor",pn(N.error.main,.62)),ve(N.Switch,"infoDisabledColor",pn(N.info.main,.62)),ve(N.Switch,"successDisabledColor",pn(N.success.main,.62)),ve(N.Switch,"warningDisabledColor",pn(N.warning.main,.62)),ve(N.TableCell,"border",pn($f(N.divider,1),.88)),ve(N.Tooltip,"bg",$f(N.grey[700],.92))}if(N.mode==="dark"){ve(N.Alert,"errorColor",pn(N.error.light,.6)),ve(N.Alert,"infoColor",pn(N.info.light,.6)),ve(N.Alert,"successColor",pn(N.success.light,.6)),ve(N.Alert,"warningColor",pn(N.warning.light,.6)),ve(N.Alert,"errorFilledBg",V("palette-error-dark")),ve(N.Alert,"infoFilledBg",V("palette-info-dark")),ve(N.Alert,"successFilledBg",V("palette-success-dark")),ve(N.Alert,"warningFilledBg",V("palette-warning-dark")),ve(N.Alert,"errorFilledColor",Rs(()=>N.getContrastText(N.error.dark))),ve(N.Alert,"infoFilledColor",Rs(()=>N.getContrastText(N.info.dark))),ve(N.Alert,"successFilledColor",Rs(()=>N.getContrastText(N.success.dark))),ve(N.Alert,"warningFilledColor",Rs(()=>N.getContrastText(N.warning.dark))),ve(N.Alert,"errorStandardBg",fn(N.error.light,.9)),ve(N.Alert,"infoStandardBg",fn(N.info.light,.9)),ve(N.Alert,"successStandardBg",fn(N.success.light,.9)),ve(N.Alert,"warningStandardBg",fn(N.warning.light,.9)),ve(N.Alert,"errorIconColor",V("palette-error-main")),ve(N.Alert,"infoIconColor",V("palette-info-main")),ve(N.Alert,"successIconColor",V("palette-success-main")),ve(N.Alert,"warningIconColor",V("palette-warning-main")),ve(N.AppBar,"defaultBg",V("palette-grey-900")),ve(N.AppBar,"darkBg",V("palette-background-paper")),ve(N.AppBar,"darkColor",V("palette-text-primary")),ve(N.Avatar,"defaultBg",V("palette-grey-600")),ve(N.Button,"inheritContainedBg",V("palette-grey-800")),ve(N.Button,"inheritContainedHoverBg",V("palette-grey-700")),ve(N.Chip,"defaultBorder",V("palette-grey-700")),ve(N.Chip,"defaultAvatarColor",V("palette-grey-300")),ve(N.Chip,"defaultIconColor",V("palette-grey-300")),ve(N.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ve(N.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ve(N.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ve(N.LinearProgress,"primaryBg",fn(N.primary.main,.5)),ve(N.LinearProgress,"secondaryBg",fn(N.secondary.main,.5)),ve(N.LinearProgress,"errorBg",fn(N.error.main,.5)),ve(N.LinearProgress,"infoBg",fn(N.info.main,.5)),ve(N.LinearProgress,"successBg",fn(N.success.main,.5)),ve(N.LinearProgress,"warningBg",fn(N.warning.main,.5)),ve(N.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.13)`),ve(N.Slider,"primaryTrack",fn(N.primary.main,.5)),ve(N.Slider,"secondaryTrack",fn(N.secondary.main,.5)),ve(N.Slider,"errorTrack",fn(N.error.main,.5)),ve(N.Slider,"infoTrack",fn(N.info.main,.5)),ve(N.Slider,"successTrack",fn(N.success.main,.5)),ve(N.Slider,"warningTrack",fn(N.warning.main,.5));const U=zf(N.background.default,.98);ve(N.SnackbarContent,"bg",U),ve(N.SnackbarContent,"color",Rs(()=>N.getContrastText(U))),ve(N.SpeedDialAction,"fabHoverBg",zf(N.background.paper,.15)),ve(N.StepConnector,"border",V("palette-grey-600")),ve(N.StepContent,"border",V("palette-grey-600")),ve(N.Switch,"defaultColor",V("palette-grey-300")),ve(N.Switch,"defaultDisabledColor",V("palette-grey-600")),ve(N.Switch,"primaryDisabledColor",fn(N.primary.main,.55)),ve(N.Switch,"secondaryDisabledColor",fn(N.secondary.main,.55)),ve(N.Switch,"errorDisabledColor",fn(N.error.main,.55)),ve(N.Switch,"infoDisabledColor",fn(N.info.main,.55)),ve(N.Switch,"successDisabledColor",fn(N.success.main,.55)),ve(N.Switch,"warningDisabledColor",fn(N.warning.main,.55)),ve(N.TableCell,"border",fn($f(N.divider,1),.68)),ve(N.Tooltip,"bg",$f(N.grey[700],.92))}xa(N.background,"default"),xa(N.background,"paper"),xa(N.common,"background"),xa(N.common,"onBackground"),xa(N,"divider"),Object.keys(N).forEach(U=>{const O=N[U];U!=="tonalOffset"&&O&&typeof O=="object"&&(O.main&&ve(N[U],"mainChannel",id(sd(O.main))),O.light&&ve(N[U],"lightChannel",id(sd(O.light))),O.dark&&ve(N[U],"darkChannel",id(sd(O.dark))),O.contrastText&&ve(N[U],"contrastTextChannel",id(sd(O.contrastText))),U==="text"&&(xa(N[U],"primary"),xa(N[U],"secondary")),U==="action"&&(O.active&&xa(N[U],"active"),O.selected&&xa(N[U],"selected")))})}),D=e.reduce((T,N)=>Ri(T,N),D);const z={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:c,getSelector:BG(D)},{vars:G,generateThemeVars:M,generateStyleSheets:I}=pG(D,z);return D.vars=G,Object.entries(D.colorSchemes[D.defaultColorScheme]).forEach(([T,N])=>{D[T]=N}),D.generateThemeVars=M,D.generateStyleSheets=I,D.generateSpacing=function(){return Pj(f.spacing,G1(this))},D.getColorSchemeSelector=mG(u),D.spacing=D.generateSpacing(),D.shouldSkipGeneratingVar=c,D.unstable_sxConfig={...vh,...f==null?void 0:f.unstable_sxConfig},D.unstable_sx=function(N){return jl({sx:N,theme:this})},D.toRuntimeSource=Vj,D}function Fk(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:tb({...n===!0?{}:n.palette,mode:e})})}function $j(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...c}=t,u=o||"light",h=i==null?void 0:i[u],f={...i,...n?{[u]:{...typeof h!="boolean"&&h,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return Uv(t,...e);let g=n;"palette"in t||f[u]&&(f[u]!==!0?g=f[u].palette:u==="dark"&&(g={mode:"dark"}));const y=Uv({...t,palette:g},...e);return y.defaultColorScheme=u,y.colorSchemes=f,y.palette.mode==="light"&&(y.colorSchemes.light={...f.light!==!0&&f.light,palette:y.palette},Fk(y,"dark",f.dark)),y.palette.mode==="dark"&&(y.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:y.palette},Fk(y,"light",f.light)),y}return!n&&!("light"in f)&&u==="light"&&(f.light=!0),GG({...c,colorSchemes:f,defaultColorScheme:u,...typeof r!="boolean"&&r},...e)}const KG=$j(),zj="$$material";function nb(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const QG=t=>nb(t)&&t!=="classes",Vo=nG({themeId:zj,defaultTheme:KG,rootShouldForwardProp:QG});function YG(){return yj}const Ll=uG;function Bj(t){return cG(t)}const XG=t=>!t||!dp(t);function JG(t){return typeof t.main=="string"}function ZG(t,e=[]){if(!JG(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Xm(t=[]){return([,e])=>e&&ZG(e,t)}function eK(t){return Z1("MuiSlider",t)}const qi=eb("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),tK=t=>{const{open:e}=t;return{offset:Ys(e&&qi.valueLabelOpen),circle:qi.valueLabelCircle,label:qi.valueLabelLabel}};function nK(t){const{children:e,className:n,value:r}=t,i=tK(t);return e?S.cloneElement(e,{className:e.props.className},a.jsxs(S.Fragment,{children:[e.props.children,a.jsx("span",{className:Ys(i.offset,n),"aria-hidden":!0,children:a.jsx("span",{className:i.circle,children:a.jsx("span",{className:i.label,children:r})})})]})):null}function Uk(t){return t}const rK=Vo("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Pi(n.color)}`],n.size!=="medium"&&e[`size${Pi(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(Ll(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${qi.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${qi.dragging}`]:{[`& .${qi.thumb}, & .${qi.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(Xm()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),iK=Vo("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),sK=Vo("span",{name:"MuiSlider",slot:"Track"})(Ll(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(Xm()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:Wd(t.palette[e].main,.62),borderColor:Wd(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:Hd(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:Hd(t.palette[e].main,.5)})}}}))]}))),aK=Vo("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Pi(n.color)}`],n.size!=="medium"&&e[`thumbSize${Pi(n.size)}`]]}})(Ll(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${qi.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(Xm()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${qi.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Mv(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${qi.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Mv(t.palette[e].main,.16)}`}}}}))]}))),oK=Vo(nK,{name:"MuiSlider",slot:"ValueLabel"})(Ll(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${qi.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${qi.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),lK=Vo("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>nb(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(Ll(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),cK=Vo("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>nb(t)&&t!=="markLabelActive"})(Ll(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),uK=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:o,classes:c,color:u,size:h}=t,f={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",u&&`color${Pi(u)}`,h&&`size${Pi(h)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",h&&`thumbSize${Pi(h)}`,u&&`thumbColor${Pi(u)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return cj(f,eK,c)},dK=({children:t})=>t,Hj=S.forwardRef(function(e,n){const r=Bj({props:e,name:"MuiSlider"}),i=FH(),{"aria-label":o,"aria-valuetext":c,"aria-labelledby":u,component:h="span",components:f={},componentsProps:g={},color:y="primary",classes:v,className:b,disableSwap:k=!1,disabled:w=!1,getAriaLabel:A,getAriaValueText:j,marks:R=!1,max:L=100,min:D=0,name:z,onChange:G,onChangeCommitted:M,orientation:I="horizontal",shiftStep:T=10,size:N="medium",step:V=1,scale:U=Uk,slotProps:O,slots:xe,tabIndex:Pe,track:We="normal",value:He,valueLabelDisplay:de="off",valueLabelFormat:ce=Uk,...oe}=r,H={...r,isRtl:i,max:L,min:D,classes:v,disabled:w,disableSwap:k,orientation:I,marks:R,color:y,size:N,step:V,shiftStep:T,scale:U,track:We,valueLabelDisplay:de,valueLabelFormat:ce},{axisProps:J,getRootProps:Ee,getHiddenInputProps:$e,getThumbProps:Te,open:Ve,active:Ge,axis:rt,focusedThumbIndex:Ke,range:ct,dragging:kt,marks:mt,values:ht,trackOffset:Dt,trackLeap:re,getThumbStyle:qe}=ZH({...H,rootRef:n});H.marked=mt.length>0&&mt.some(le=>le.label),H.dragging=kt,H.focusedThumbIndex=Ke;const Se=uK(H),ge=(xe==null?void 0:xe.root)??f.Root??rK,Je=(xe==null?void 0:xe.rail)??f.Rail??iK,te=(xe==null?void 0:xe.track)??f.Track??sK,xt=(xe==null?void 0:xe.thumb)??f.Thumb??aK,be=(xe==null?void 0:xe.valueLabel)??f.ValueLabel??oK,Qe=(xe==null?void 0:xe.mark)??f.Mark??lK,_e=(xe==null?void 0:xe.markLabel)??f.MarkLabel??cK,Y=(xe==null?void 0:xe.input)??f.Input??"input",pe=(O==null?void 0:O.root)??g.root,Re=(O==null?void 0:O.rail)??g.rail,se=(O==null?void 0:O.track)??g.track,Ue=(O==null?void 0:O.thumb)??g.thumb,ke=(O==null?void 0:O.valueLabel)??g.valueLabel,pt=(O==null?void 0:O.mark)??g.mark,Pt=(O==null?void 0:O.markLabel)??g.markLabel,dt=(O==null?void 0:O.input)??g.input,Xt=io({elementType:ge,getSlotProps:Ee,externalSlotProps:pe,externalForwardedProps:oe,additionalProps:{...XG(ge)&&{as:h}},ownerState:{...H,...pe==null?void 0:pe.ownerState},className:[Se.root,b]}),Cn=io({elementType:Je,externalSlotProps:Re,ownerState:H,className:Se.rail}),jn=io({elementType:te,externalSlotProps:se,additionalProps:{style:{...J[rt].offset(Dt),...J[rt].leap(re)}},ownerState:{...H,...se==null?void 0:se.ownerState},className:Se.track}),Ln=io({elementType:xt,getSlotProps:Te,externalSlotProps:Ue,ownerState:{...H,...Ue==null?void 0:Ue.ownerState},className:Se.thumb}),lr=io({elementType:be,externalSlotProps:ke,ownerState:{...H,...ke==null?void 0:ke.ownerState},className:Se.valueLabel}),yr=io({elementType:Qe,externalSlotProps:pt,ownerState:H,className:Se.mark}),W=io({elementType:_e,externalSlotProps:Pt,ownerState:H,className:Se.markLabel}),q=io({elementType:Y,getSlotProps:$e,externalSlotProps:dt,ownerState:H});return a.jsxs(ge,{...Xt,children:[a.jsx(Je,{...Cn}),a.jsx(te,{...jn}),mt.filter(le=>le.value>=D&&le.value<=L).map((le,X)=>{const ae=Jp(le.value,D,L),Me=J[rt].offset(ae);let Oe;return We===!1?Oe=ht.includes(le.value):Oe=We==="normal"&&(ct?le.value>=ht[0]&&le.value<=ht[ht.length-1]:le.value<=ht[0])||We==="inverted"&&(ct?le.value<=ht[0]||le.value>=ht[ht.length-1]:le.value>=ht[0]),a.jsxs(S.Fragment,{children:[a.jsx(Qe,{"data-index":X,...yr,...!dp(Qe)&&{markActive:Oe},style:{...Me,...yr.style},className:Ys(yr.className,Oe&&Se.markActive)}),le.label!=null?a.jsx(_e,{"aria-hidden":!0,"data-index":X,...W,...!dp(_e)&&{markLabelActive:Oe},style:{...Me,...W.style},className:Ys(Se.markLabel,W.className,Oe&&Se.markLabelActive),children:le.label}):null]},X)}),ht.map((le,X)=>{const ae=Jp(le,D,L),Me=J[rt].offset(ae),Oe=de==="off"?dK:be;return a.jsx(Oe,{...!dp(Oe)&&{valueLabelFormat:ce,valueLabelDisplay:de,value:typeof ce=="function"?ce(U(le),X):ce,index:X,open:Ve===X||Ge===X||de==="on",disabled:w},...lr,children:a.jsx(xt,{"data-index":X,...Ln,className:Ys(Se.thumb,Ln.className,Ge===X&&Se.active,Ke===X&&Se.focusVisible),style:{...Me,...qe(X),...Ln.style},children:a.jsx(Y,{"data-index":X,"aria-label":A?A(X):o,"aria-valuenow":U(le),"aria-labelledby":u,"aria-valuetext":j?j(U(le),X):c,value:ht[X],...q})})},X)})]})});function hK(t){return Z1("MuiTypography",t)}eb("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const fK={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},pK=YG(),mK=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:c}=t,u={root:["root",o,t.align!=="inherit"&&`align${Pi(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return cj(u,hK,c)},gK=Vo("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Pi(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Ll(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(Xm()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Pi(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),$k={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Wj=S.forwardRef(function(e,n){const{color:r,...i}=Bj({props:e,name:"MuiTypography"}),o=!fK[r],c=pK({...i,...o&&{color:r}}),{align:u="inherit",className:h,component:f,gutterBottom:g=!1,noWrap:y=!1,paragraph:v=!1,variant:b="body1",variantMapping:k=$k,...w}=c,A={...c,align:u,color:r,className:h,component:f,gutterBottom:g,noWrap:y,paragraph:v,variant:b,variantMapping:k},j=f||(v?"p":k[b]||$k[b])||"span",R=mK(A);return a.jsx(gK,{as:j,ref:n,className:Ys(R.root,h),...w,ownerState:A,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...w.style}})}),yK=eb("MuiBox",["root"]),vK=$j(),qj=Xq({themeId:zj,defaultTheme:vK,defaultClassName:yK.root,generateClassName:Rj.generate}),xK={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.3)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 6px rgba(60, 80, 120, 0.5)"}},bK={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.6)","0 0 10px rgba(80, 100, 140, 0.9)","0 0 4px rgba(80, 100, 140, 0.6)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function Gj({filtros:t,setFiltros:e,productosOriginales:n}){const[r,i]=S.useState([]);S.useEffect(()=>{let u=n;(t.estado.nuevo||t.estado.usado)&&(u=u.filter(g=>t.estado.nuevo&&t.estado.usado?!0:t.estado.nuevo?g.estado==="Nuevo":t.estado.usado?g.estado==="Usado":!0));const h=t.precio.min!==""?Number(t.precio.min):0,f=t.precio.max!==""?Number(t.precio.max):1/0;u=u.filter(g=>g.precio>=h&&g.precio<=f),i(u)},[t,n]);const o=(u,h)=>{e(f=>({...f,precio:{min:h[0],max:h[1]}}))},c=()=>{e({estado:{nuevo:!1,usado:!1},precio:{min:0,max:1e3}})};return a.jsxs("aside",{className:"hidden xl:block w-56 max-w-[240px] relative z-40",style:{height:"100vh",paddingTop:0,overflow:"hidden",backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Filtros",children:[a.jsx(oj,{}),a.jsxs("div",{style:{position:"relative",zIndex:1,height:"100%",overflowY:"auto",padding:"1rem",backgroundColor:"transparent",border:"none",boxShadow:"none"},children:[a.jsx(ne.h2,{className:"text-lg font-semibold mb-4 text-blue-800 dark:text-blue-400",variants:bK,animate:"animate",children:"Filtros"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-medium mb-2 text-gray-800 dark:text-gray-200",children:"Estado"}),a.jsxs("label",{className:"switch-container",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:t.estado.nuevo,onChange:()=>e(u=>({...u,estado:{...u.estado,nuevo:!u.estado.nuevo}}))}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2",children:"Nuevo"})]}),a.jsxs("label",{className:"switch-container mt-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:t.estado.usado,onChange:()=>e(u=>({...u,estado:{...u.estado,usado:!u.estado.usado}}))}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2",children:"Usado"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx(Wj,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),a.jsx(qj,{sx:{px:1,"& .MuiSlider-thumb":{width:14,height:14,bgcolor:"#1976d2",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 8px rgba(25, 118, 210, 0.16)"}},"& .MuiSlider-rail":{height:6,opacity:.5,bgcolor:"#bfbfbf",borderRadius:3},"& .MuiSlider-track":{height:6,borderRadius:3},"& .MuiSlider-root":{padding:"15px 0"}},children:a.jsx(Hj,{value:[typeof t.precio.min=="number"?t.precio.min:0,typeof t.precio.max=="number"?t.precio.max:1e3],onChange:o,valueLabelDisplay:"auto",min:0,max:1e3})}),a.jsxs("div",{className:"flex justify-between text-sm mt-2 text-gray-700 dark:text-gray-300",children:[a.jsxs("span",{children:["RD$",t.precio.min]}),a.jsxs("span",{children:["RD$",t.precio.max]})]})]}),a.jsx(ne.button,{onClick:c,variants:xK,initial:"initial",whileHover:"hover",whileTap:"tap",className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white text-sm px-3 py-2 rounded w-full",children:"Restablecer filtros"}),a.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:r.length===0?"No hay productos que coincidan con los filtros.":`Mostrando ${r.length} producto${r.length>1?"s":""}`})]})]})}function Kj({filtros:t,setFiltros:e,onReset:n,visible:r,onClose:i}){var y,v;const[o,c]=S.useState(t);S.useEffect(()=>{var k,w;const b={...t,precio:{min:((k=t.precio)==null?void 0:k.min)??0,max:((w=t.precio)==null?void 0:w.max)??1e3}};c(b)},[t,r]);const u=(b,k)=>{c(w=>({...w,precio:{min:k[0],max:k[1]}}))},h=Number.isFinite((y=o.precio)==null?void 0:y.min)?o.precio.min:0,f=Number.isFinite((v=o.precio)==null?void 0:v.max)?o.precio.max:1e4,g=[h,f];return a.jsxs("div",{className:`fixed top-0 right-0 h-full w-72 bg-white dark:bg-slate-900 border-l border-gray-300 dark:border-gray-700 shadow-lg z-[9999] transform transition-transform duration-300 ${r?"translate-x-0":"translate-x-full"}`,children:[a.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:"Filtros"}),a.jsx("button",{onClick:i,className:"text-blue-600 dark:text-blue-400 font-extrabold text-xl hover:text-blue-800 dark:hover:text-blue-300 transition-colors","aria-label":"Cerrar filtro",children:"✕"})]}),a.jsxs("div",{className:"p-4 pt-6 flex flex-col gap-6 overflow-y-auto text-gray-900 dark:text-gray-100",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-3 text-blue-700 dark:text-blue-300",children:"Estado"}),a.jsxs("label",{className:"switch-container mb-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:o.estado.nuevo,onChange:()=>c(b=>({...b,estado:{...b.estado,nuevo:!b.estado.nuevo}}))}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Nuevo"})]}),a.jsxs("label",{className:"switch-container",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:o.estado.usado,onChange:()=>c(b=>({...b,estado:{...b.estado,usado:!b.estado.usado}}))}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Usado"})]})]}),a.jsxs("div",{children:[a.jsx(Wj,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),a.jsx(qj,{sx:{px:1,"& .MuiSlider-thumb":{width:16,height:16,bgcolor:"#1d4ed8",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 10px rgba(29, 78, 216, 0.2)"}},"& .MuiSlider-rail":{height:8,opacity:.3,bgcolor:"#cbd5e1",borderRadius:4},"& .MuiSlider-track":{height:8,borderRadius:4,bgcolor:"#1d4ed8"},"& .MuiSlider-root":{padding:"20px 0"}},children:a.jsx(Hj,{value:g,onChange:u,valueLabelDisplay:"auto",min:0,max:1e4})}),a.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 mt-1 font-semibold",children:[a.jsxs("span",{children:["RD$",g[0]]}),a.jsxs("span",{children:["RD$",g[1]]})]})]})]}),a.jsxs("div",{className:"flex justify-between gap-3 border-t border-gray-300 dark:border-gray-700 p-4 mt-4",children:[a.jsx("button",{onClick:()=>{n(),i()},className:"w-1/2 bg-blue-100 hover:bg-blue-200 text-blue-800 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-blue-300 font-semibold text-sm py-2 rounded transition-colors",children:"Restablecer"}),a.jsx("button",{onClick:()=>{e(o),i()},className:"w-1/2 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 rounded transition-colors",children:"Aplicar filtros"})]})]})}function Qj({onClick:t}){return a.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-900 dark:bg-slate-800 dark:text-blue-300 rounded-full text-sm font-medium hover:bg-gray-300 dark:hover:bg-slate-700 transition-colors",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Filtros"]})}function wK(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let n=[];for(let r=0;r<=e.length;r++)n[r]=[r];for(let r=0;r<=t.length;r++)n[0][r]=r;for(let r=1;r<=e.length;r++)for(let i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,n[r][i-1]+1,n[r-1][i]+1);return n[e.length][t.length]}function Kf(t,e){return!t||!e?!1:wK(t,e)<=2||t.includes(e)||e.includes(t)}function _K(){const t=ea(),{products:e,loading:n}=FO(),[r,i]=S.useState({precio:{min:"",max:""},estado:{nuevo:!1,usado:!1}}),[o,c]=S.useState(!1),[u,h]=S.useState(!1),g=new URLSearchParams(t.search).get("q")||"",y=uy(g),v=S.useMemo(()=>(e||[]).filter(w=>{const A=uy(w.nombre),j=uy(w.empresa||"");return y.split(" ").filter(Boolean).some(L=>Kf(A,L)||Kf(j,L))||Kf(A,y)||Kf(j,y)}),[e,y]),b=S.useMemo(()=>v.filter(w=>{const A=r.precio.min===""||w.precio>=Number(r.precio.min),j=r.precio.max===""||w.precio<=Number(r.precio.max),R=!r.estado.nuevo&&!r.estado.usado||r.estado.nuevo&&w.estado==="Nuevo"||r.estado.usado&&w.estado==="Usado";return A&&j&&R}),[v,r]),k=()=>{i({precio:{min:"",max:""},estado:{nuevo:!1,usado:!1}})};return a.jsxs("div",{className:"flex flex-col xl:flex-row min-h-screen bg-white dark:bg-slate-900 dark:text-gray-100 pt-0",style:{paddingTop:"var(--content-offset, 100px)",margin:0},children:[a.jsx("aside",{className:"hidden xl:block w-64 bg-white dark:bg-slate-900 border-r border-gray-200 dark:border-gray-700 sticky h-screen overflow-y-auto",style:{top:"var(--content-offset, 100px)",margin:0},children:a.jsx(Xp,{categoriaActiva:null,setMostrarEnMovil:h})}),a.jsxs("main",{className:"flex-1 p-4 overflow-y-auto relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 px-2 xl:hidden",children:[a.jsx("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-800 dark:bg-slate-800 dark:text-blue-300 rounded-full text-sm font-medium",children:"📂 Categorías"}),a.jsx(Qj,{onClick:()=>c(!0)})]}),a.jsx("h2",{className:"text-2xl font-bold mb-4 text-blue-800 dark:text-blue-400",children:"Resultados de búsqueda"}),n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-700"})}):b.length===0?a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["No se encontraron productos relacionados con ",a.jsx("span",{className:"font-bold",children:g}),"."]}):a.jsx("div",{className:"productos-grid",children:b.map(w=>a.jsx(aj,{producto:w},w.id))})]}),a.jsx("aside",{className:"hidden xl:block w-64 bg-white dark:bg-slate-900 border-l border-gray-200 dark:border-gray-700 sticky top-14 h-[calc(100vh-56px)] overflow-y-auto px-4 py-4",children:a.jsx(Gj,{filtros:r,setFiltros:i,productosOriginales:v})}),u&&a.jsx(Xp,{categoriaActiva:null,mostrarEnMovil:u,setMostrarEnMovil:h}),a.jsx("div",{className:"xl:hidden",children:a.jsx(Kj,{filtros:r,setFiltros:i,visible:o,onClose:()=>c(!1),onReset:k})})]})}function zk(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")}function Bk(){const{categoria:t}=Gv(),e=wi(),{categories:n,loading:r}=i1(),i=t&&t!=="todos"?t:"",{products:o,loading:c}=YT(i),[u,h]=S.useState({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),[f,g]=S.useState({norm:"",display:""}),[y,v]=S.useState(!1),[b,k]=S.useState(!1),[w,A]=S.useState("Todos"),[j,R]=S.useState(0);S.useEffect(()=>{function T(){const V=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),U=V?Math.ceil(V.getBoundingClientRect().height):0;R(U),document.documentElement.style.setProperty("--topbar-height",`${U}px`)}T(),window.addEventListener("resize",T);const N=new MutationObserver(T);return N.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",T),N.disconnect()}},[]),S.useEffect(()=>{if(!t||t==="todos")A("Todos");else{const T=n.find(N=>zk(N.ruta)===zk(t));A(T?T.nombre:"Todos")}},[t,n]);const L=S.useMemo(()=>w==="Todos"?o:o.filter(T=>T==null?void 0:T.id),[o,w]),D=S.useMemo(()=>(L||[]).filter(T=>{const N=T.precio>=u.precio.min,V=T.precio<=u.precio.max,U=!u.estado.nuevo&&!u.estado.usado||u.estado.nuevo&&T.estado==="Nuevo"||u.estado.usado&&T.estado==="Usado",O=T.empresaNorm||(T.empresa||"").toString().trim().toLowerCase(),xe=!f.norm||O===f.norm;return N&&V&&U&&xe}),[L,u,f]),z=(T,N)=>{e(`/productos/${N}`),v(!1),k(!1),g({norm:"",display:""})},G=()=>{h({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),g({norm:"",display:""})},M=[{nombre:"PlayStation",norm:"playstation",imagen:"/logos/PlayStation_logo.svg.png"},{nombre:"Xbox",norm:"xbox",imagen:"/logos/xbox-logo.png"},{nombre:"Nintendo",norm:"nintendo",imagen:"/logos/nintendo-logo.png"}],I=r||c;return a.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"var(--content-offset, 100px)",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[a.jsxs("div",{className:"flex-1 flex flex-col xl:flex-row w-full",style:{margin:0},children:[a.jsx(Xp,{categoriaActiva:w,onCategoriaClick:z,className:"bg-transparent border-none shadow-none"}),a.jsxs("main",{className:"flex-1 p-0 xl:p-4 relative pb-32",children:[a.jsxs("div",{className:"flex justify-between items-center px-3 py-2 xl:hidden bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 sticky transition-colors duration-300",style:{top:"var(--content-offset, 100px)",zIndex:40,marginTop:0,paddingTop:0},children:[a.jsx("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium transition-colors duration-300",children:"📂 Categorías"}),a.jsx(Qj,{onClick:()=>v(!0)})]}),a.jsxs("div",{className:"px-4 xl:px-0 mb-2 mt-0 animate-fadeIn",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:w==="Todos"?"Todos los productos":w}),w!=="Todos"&&a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base mt-1",children:["Encuentra lo mejor en"," ",a.jsx("span",{className:"font-semibold text-blue-700 dark:text-blue-400",children:w})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 px-4 xl:px-0 mb-4 justify-center sm:justify-start",children:[M.map(T=>{const N=f.norm===T.norm;return a.jsxs("button",{onClick:()=>g({norm:T.norm,display:T.nombre}),className:`group relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white dark:bg-gray-800 border-4 flex items-center justify-center shadow-xl hover:scale-110 transition-all duration-300 ${N?"border-blue-700 ring-4 ring-offset-2 ring-blue-500 animate-spin-slow":"border-gray-300 hover:border-blue-400"}`,title:T.nombre,children:[a.jsx("img",{src:T.imagen,alt:T.nombre,className:"w-8 h-8 sm:w-10 sm:h-10 object-contain z-10"}),N&&a.jsx("span",{className:"absolute inset-0 rounded-full border-4 border-blue-500 animate-pulse z-0"})]},T.norm)}),a.jsx("button",{onClick:()=>g({norm:"",display:""}),className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 flex items-center justify-center text-lg sm:text-xl font-bold bg-gradient-to-br from-red-100 to-red-300 text-red-700 border-red-600 shadow-lg hover:scale-110 transition-all duration-300",title:"Quitar filtro",children:"❌"})]}),I?null:D.length===0?a.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:"No hay productos que coincidan con tus filtros."}):a.jsx("div",{className:"productos-grid px-4 xl:px-0",children:D.map(T=>a.jsx(aj,{producto:T},T.id))})]}),a.jsx(Gj,{filtros:u,setFiltros:h,productosOriginales:L,className:"bg-transparent border-none shadow-none"})]}),b&&a.jsx(Xp,{categoriaActiva:w,onCategoriaClick:z,mostrarEnMovil:b,setMostrarEnMovil:k,className:"bg-transparent border-none shadow-none"}),a.jsx("div",{className:"xl:hidden",children:a.jsx(Kj,{filtros:u,setFiltros:h,visible:y,onClose:()=>v(!1),onReset:G})})]})}const EK=[{id:0,nombre:"Estafeta Principal (Oficina)",descripcion:"Playcenter Universal",direccion:"Av Estrella Sadhala Nº 55, Frente a la doble vía, Santiago",telefono:"809-582-1212",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'13.2%22N+70%C2%B041'23.3%22W/@19.436998,-70.689812,17z/data=!4m4!3m3!8m2!3d19.437!4d-70.6898056",imagen:"/estafetas/oficina.png"},{id:1,nombre:"Estafeta Villa-Olímpica",descripcion:"Minimarket Los Hermanos",direccion:"Calle Penetración Nº 1, Suburbanización Mare López, La villa-Olímpica, Próximo a la calle 1",telefono:"809-626-3262",ubicacionLink:"https://www.google.com/maps/place/19%C2%B025'43.1%22N+70%C2%B041'12.7%22W/@19.4286338,-70.6894342,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.4286338!4d-70.6868593?hl=es&entry=ttu",imagen:"/estafetas/loshermanos.png"},{id:2,nombre:"Estafeta Nibaje",descripcion:"Cafetería Guido",direccion:"Avenida Franco Vido, Nº 148, Nibaje",telefono:"829-324-2318",ubicacionLink:"https://www.google.com/maps/place//@19.420887,-70.6811611,3857m/data=!3m2!1e3!4b1?entry=ttu",imagen:"/estafetas/cafeteria-guido.png"},{id:3,nombre:"Estafeta El Ensueño",descripcion:"Salón y Cafetería Marais",direccion:"Calle Paseo de los Locutores, Esquina 11, El Ensueño",telefono:"829-755-3636",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'22.4%22N+70%C2%B041'26.1%22W/@19.439565,-70.690574,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.439565!4d-70.690574?entry=ttu",imagen:"/estafetas/salon-y-cafeteria-maraez.png"},{id:4,nombre:"Estafeta La Lotería",descripcion:"Colmado Espinal",direccion:"La Lotería, calle Salcedo, Nº 10",telefono:"829-288-9168",ubicacionLink:"https://www.google.com/maps/place/19.439565,-70.690574/data=!4m6!3m5!1s0!7e2!8m2!3d19.439564999999998!4d-70.690574",imagen:"/estafetas/colmado-espinal.png"},{id:5,nombre:"Estafeta La Villa-Olímpica",descripcion:"Palmatec Solutions",direccion:"Villa-Olímpica, frente Manzana F, al lado del antiguo Colegio Génesis",telefono:"809-785-3354",ubicacionLink:"https://www.google.com/maps/place/19.435309,-70.685961/data=!4m6!3m5!1s0!7e2!8m2!3d19.435309!4d-70.68596099999999",imagen:"/estafetas/palmatech-solution.png"},{id:6,nombre:"Estafeta Ensanche Bermúdez",descripcion:"St Electronics",direccion:"Calle 11, número 27, Ensanche Bermúdez",telefono:"849-437-3100",ubicacionLink:"https://www.google.com/maps/place/Espailla,+51000+Santiago+de+los+Caballeros/@19.4717075,-70.7148707,964m/data=!3m2!1e3!4b1!4m6!3m5!1s0x8eb1c5e2c3c79d7d:0x3a75c6d5f2312708!8m2!3d19.4717075!4d-70.7148707",imagen:"/estafetas/St electronics.png"},{id:7,nombre:"Estafeta Los Guandules",descripcion:"Mini Market El Vecino",direccion:"Estafeta de pago Los Guandules, próximo al puente",telefono:"+1 829 218 1889",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'15.3%22N+70%C2%B041'22.2%22W/@19.4381999,-70.6893169,526m/data=!3m1!1e3!4m4!3m3!8m2!3d19.437576!4d-70.689512?entry=ttu",imagen:"/estafetas/losguandules.png"}],NK=[{banco:"BANRESERVAS",numero:"9600153322",tipo:"Cuenta Corriente",titular:"PLAYCENTER"},{banco:"POPULAR",numero:"0798928750",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"BHD",numero:"18673320016",tipo:"Cuenta Corriente",titular:"FRANKLYN SANTOS"},{banco:"SantaCruz",numero:"11142010011632",tipo:"Cuenta Ahorro",titular:"PLAYCENTER"},{banco:"Scotiabank",numero:"12010008845",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"ASOC. CIBAO",numero:"100090238474",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"}];function kK(){const[t,e]=S.useState(null),n=(r,i)=>{navigator.clipboard.writeText(r),e(i),setTimeout(()=>e(null),2e3)};return a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-10",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-center mb-2 text-gray-800 tracking-tight",children:"Estafetas de Pago y Métodos de Pago"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Puedes pagar tu factura en cualquiera de nuestros puntos autorizados o mediante transferencia bancaria."}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-2xl p-7 mb-12 shadow-lg",children:[a.jsxs("h2",{className:"text-2xl font-semibold text-blue-700 flex items-center gap-2 mb-3",children:[a.jsx(OU,{className:"text-blue-500"}),"Cuentas Bancarias para Transferencias"]}),a.jsxs("p",{className:"text-red-600 font-semibold mb-2",children:["⚠️ Incluye tu ",a.jsx("span",{className:"underline",children:"código de cliente"})," o",a.jsx("span",{className:"underline",children:" nombre completo"})," en la descripción del pago."]}),a.jsxs("p",{className:"text-gray-700 mb-4 text-[15px]",children:["Es indispensable enviar el comprobante de pago al 809-582-1212 para poder aplicarlo.",a.jsx("br",{}),a.jsx("span",{className:"text-red-500 font-bold",children:"Sin el comprobante no podremos procesar tu pago."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:NK.map((r,i)=>a.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-5 flex flex-col shadow group hover:shadow-xl transition",children:[a.jsxs("h3",{className:"text-lg font-bold text-indigo-700 flex items-center gap-2 mb-2",children:[a.jsx(BU,{className:"text-indigo-500"}),r.banco]}),a.jsxs("p",{className:"text-gray-700 mb-1 flex items-center",children:[a.jsx("span",{className:"font-semibold mr-1",children:"Número: "}),a.jsxs("span",{className:"text-gray-900 font-mono flex items-center",children:[r.numero,a.jsx("button",{onClick:()=>n(r.numero,i),className:"text-indigo-600 hover:text-indigo-800 ml-1",title:"Copiar número",children:t===i?a.jsx(PU,{}):a.jsx(GU,{})})]})]}),a.jsxs("p",{className:"text-gray-700 mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Tipo: "}),r.tipo]}),a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-semibold",children:"Titular: "}),r.titular]})]},i))})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:EK.map(r=>a.jsxs("div",{className:"flex flex-col md:flex-row bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 hover:shadow-2xl transition",children:[a.jsx("div",{className:"w-full md:w-1/2 h-64 md:h-auto bg-blue-50 flex items-center justify-center p-3",children:a.jsx("img",{src:r.imagen,alt:r.nombre,className:"w-full h-full object-contain rounded-xl"})}),a.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-1",children:r.nombre}),a.jsx("p",{className:"text-gray-700 text-lg font-medium mb-1",children:r.descripcion}),a.jsx("p",{className:"text-gray-600 mb-1",children:r.direccion}),a.jsxs("p",{className:"text-green-600 flex items-center gap-2 mb-2",children:[a.jsx(Wp,{className:"text-green-500"}),r.telefono]})]}),a.jsxs("a",{href:r.ubicacionLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline mt-3 font-semibold flex items-center gap-2",children:[a.jsx("span",{role:"img","aria-label":"location",children:"📍"}),"Ver Ubicación"]})]})]},r.id))}),a.jsx("p",{className:"text-center text-gray-500 mt-12 text-lg",children:"¡Agradecemos su preferencia! Estamos para servirle."})]})}function SK({children:t}){const{usuario:e}=ii();return e?t:a.jsx(ZI,{to:"/login",replace:!0})}const Hk="https://playcenter-universal.onrender.com";function AK(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function TK(){const[t]=Kv(),e=wi(),{usuario:n,usuarioInfo:r}=ii(),{carrito:i,vaciarCarrito:o}=Xd(),[c,u]=S.useState(1),[h,f]=S.useState(0);S.useEffect(()=>{const y=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=y}},[]),S.useEffect(()=>{const y=t.get("session"),v=AK(),b=setInterval(()=>{f(j=>j>=90?j:Math.min(90,j+Math.random()*15))},200),k=setTimeout(()=>u(2),900),w=setTimeout(()=>u(3),1600),A=async()=>{var j;try{if(!y){e("/payment/cancel");return}const R=await fetch(`${Hk}/cardnet/get-sk/${y}`),{sk:L}=await R.json();if(!L){e(`/payment/cancel?session=${y}`);return}const z=await(await fetch(`${Hk}/cardnet/verify/${y}/${L}`)).json(),G=(j=v==null?void 0:v.items)!=null&&j.length?v.items.map(T=>({id:T.id,nombre:T.nombre,precio:Number(T.precio)||0,cantidad:T.cantidad,imagen:T.imagen||"/Productos/default.jpg",empresa:T.empresa||"N/A",subtotal:(Number(T.precio)||0)*T.cantidad})):(i||[]).map(T=>({id:T.id,nombre:T.nombre,precio:Number(T.precio)||0,cantidad:T.cantidad,imagen:T.imagen||"/Productos/default.jpg",empresa:T.empresa||"N/A",subtotal:(Number(T.precio)||0)*T.cantidad})),M=(v==null?void 0:v.total)??(i||[]).reduce((T,N)=>T+(Number(N.precio)||0)*N.cantidad,0),I={userId:(n==null?void 0:n.uid)||null,userEmail:(r==null?void 0:r.email)||(n==null?void 0:n.email)||null,userName:(r==null?void 0:r.displayName)||null,userPhone:(r==null?void 0:r.telefono)||null,productos:G,total:M,subtotal:G.reduce((T,N)=>T+N.subtotal,0),impuestos:0,envio:0,estado:(z==null?void 0:z.ResponseCode)==="00"?"completado":"cancelado",estadoPago:(z==null?void 0:z.ResponseCode)==="00"?"pagado":"fallido",metodoPago:"CardNet",fecha:Ic(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(v==null?void 0:v.mode)||(v?"unknown":"cart"),direccionEntrega:(r==null?void 0:r.direccionCompleta)||null,telefonoContacto:(r==null?void 0:r.telefono)||null,notasEspeciales:null,raw:{...z,SESSION:y}};try{await jm($t(De,"orders"),I)}catch(T){console.error("❌ Error guardando orden:",T)}try{sessionStorage.removeItem("checkoutPayload")}catch{}f(100),u(4),setTimeout(()=>{(z==null?void 0:z.ResponseCode)==="00"?(((v==null?void 0:v.mode)||"cart")==="cart"&&o(),e(`/payment/success?session=${y}`)):e(`/payment/cancel?session=${y}`)},900)}catch(R){console.error("❌ Error verificando pago:",R),e("/payment/cancel")}};if(y){const j=setTimeout(A,9e3);return()=>{clearTimeout(j),clearInterval(b),clearTimeout(k),clearTimeout(w)}}else e("/payment/cancel")},[t,e,n,r,i,o]);const g=[{id:1,icon:p$,title:"Conectando con CardNet",description:"Estableciendo conexión segura"},{id:2,icon:zd,title:"Verificando seguridad",description:"Validando datos de pago"},{id:3,icon:OC,title:"Procesando transacción",description:"Confirmando tu compra"},{id:4,icon:$d,title:"¡Completado!",description:"Redirigiendo..."}];return a.jsxs(ne.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-3 sm:px-6 overflow-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((y,v)=>a.jsx(ne.div,{className:"absolute w-2 h-2 bg-blue-200 rounded-full opacity-30",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*12+12,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},v))}),a.jsxs(ne.div,{className:"bg-white/95 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 lg:p-10 max-w-lg sm:max-w-2xl w-full text-center relative overflow-hidden border border-white/30 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 rounded-2xl sm:rounded-3xl"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Progreso"}),a.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[Math.round(h),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:a.jsx(ne.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",initial:{width:0},animate:{width:`${h}%`},transition:{duration:.5,ease:"easeOut"}})})]}),a.jsx("div",{className:"mb-8",children:a.jsx(Gt,{mode:"wait",children:g.map(y=>c>=y.id&&a.jsxs(ne.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.98},transition:{duration:.35,type:"spring"},className:`flex items-center gap-4 p-4 rounded-2xl mb-3 ${c===y.id?"bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[a.jsx(ne.div,{className:`p-3 rounded-xl ${c===y.id?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-green-100 text-green-600"}`,animate:c===y.id?{scale:[1,1.08,1],rotate:[0,5,-5,0]}:{},transition:{duration:2,repeat:1/0},children:a.jsx(y.icon,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:y.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:y.description})]}),c>y.id&&a.jsx(ne.div,{initial:{scale:0},animate:{scale:1},className:"text-green-500",children:a.jsx($d,{className:"w-6 h-6"})})]},y.id))})}),a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"loader mx-auto",children:[a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__ball"})]})}),a.jsx(ne.h1,{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",animate:{opacity:[.85,1,.85]},transition:{duration:2,repeat:1/0},children:"Procesando tu pago"}),a.jsxs(ne.p,{className:"text-gray-600 mb-8 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Estamos verificando tu transacción con CardNet de forma segura.",a.jsx("br",{}),a.jsx("span",{className:"font-semibold text-blue-600",children:"Por favor, no cierres esta ventana."})]}),a.jsxs(ne.div,{className:"flex justify-center items-center gap-4 text-sm text-gray-500",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.6},children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zd,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Conexión segura"})]}),a.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Lm,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{children:"Tiempo real"})]})]})]})]})]})}const Wk="https://playcenter-universal.onrender.com";function CK(){var y,v;const[t]=Kv(),[e,n]=S.useState(null),[r,i]=S.useState(null),[o,c]=S.useState(!0),[u,h]=S.useState(!1);S.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=b}},[]),S.useEffect(()=>{const b=t.get("session");b&&(async()=>{try{const A=yn($t(De,"orders"),Dr("raw.SESSION","==",b),Zs("fecha","desc"),Tm(1)),j=await qr(A);j.empty||n({id:j.docs[0].id,...j.docs[0].data()});const R=await fetch(`${Wk}/cardnet/get-sk/${b}`),{sk:L}=await R.json();if(L){const z=await(await fetch(`${Wk}/cardnet/verify/${b}/${L}`)).json();i(z)}}catch(A){console.error("Error cargando datos:",A)}})();const w=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(w)},[t]);const f=b=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(b||0),g=b=>{if(!b)return"Fecha no disponible";let k;return typeof b=="object"&&(b!=null&&b.seconds)?k=new Date(b.seconds*1e3):k=new Date(b),k.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return a.jsxs(ne.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 px-3 sm:px-6 overflow-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[a.jsx(Gt,{children:o&&a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((b,k)=>a.jsx(ne.div,{className:"absolute w-3 h-3 rounded-full",style:{backgroundColor:["#10b981","#059669","#34d399","#6ee7b7","#a7f3d0"][Math.floor(Math.random()*5)],left:Math.random()*100+"%",top:-10},animate:{y:window.innerHeight+50,x:[0,Math.random()*200-100,Math.random()*200-100],rotate:[0,360,720],scale:[1,.5,1]},transition:{duration:Math.random()*3+2,ease:"easeOut",delay:Math.random()*2},exit:{opacity:0}},k))})}),a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((b,k)=>a.jsx(ne.div,{className:"absolute w-2 h-2 bg-green-200 rounded-full opacity-30",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*15+15,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},k))}),a.jsxs(ne.div,{className:"bg-white/95 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 lg:p-10 max-w-lg sm:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-emerald-500/5 rounded-3xl"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx(ne.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:a.jsxs(ne.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[a.jsx($d,{className:"w-28 h-28 text-green-500 mx-auto drop-shadow-lg"}),a.jsx(ne.div,{className:"absolute -top-3 -right-3 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.25,1],rotate:[0,12,-12,0]},transition:{duration:2,repeat:1/0},children:a.jsx(X$,{className:"w-5 h-5 text-yellow-600"})}),a.jsx(ne.div,{className:"absolute -bottom-2 -left-2 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0,delay:.5},children:a.jsx(H$,{className:"w-4 h-4 text-green-600"})})]})}),a.jsxs(ne.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:[a.jsx(ne.h1,{className:"text-5xl font-extrabold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-4",animate:{scale:[1,1.04,1]},transition:{duration:2,repeat:1/0},children:"¡Pago exitoso!"}),a.jsx(ne.div,{className:"flex items-center justify-center gap-2 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[...Array(5)].map((b,k)=>a.jsx(ne.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+k*.08,type:"spring"},children:a.jsx(q$,{className:"w-6 h-6 text-yellow-400 fill-current"})},k))}),a.jsxs(ne.p,{className:"text-gray-700 text-lg leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:["Tu transacción fue procesada correctamente.",a.jsx("br",{}),"¡Gracias por tu compra en ",a.jsx("span",{className:"font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PlayCenter Universal"}),"!"]})]}),e?a.jsx(ne.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(x$,{className:"w-6 h-6 text-green-600"}),"Resumen de tu compra"]}),a.jsx(ne.div,{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold",whileHover:{scale:1.05},children:"✓ Completado"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Orden ID:"}),a.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:e.numeroOrden||((y=e.id)==null?void 0:y.slice(-8))})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-medium",children:e.userEmail})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Fecha:"}),a.jsx("span",{className:"font-medium",children:g(e.fecha)})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Método de pago:"}),a.jsxs("span",{className:"font-medium flex items-center gap-2",children:[a.jsx(OC,{className:"w-4 h-4 text-blue-500"}),"CardNet"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Total:"}),a.jsx("span",{className:"text-2xl font-bold text-green-600",children:f(e.total)})]})]})]}),((v=e.productos)==null?void 0:v.length)>0&&a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>h(b=>!b),className:"flex items-center gap-2 text-green-600 hover:text-green-800 font-medium mb-4 transition-colors",type:"button",children:[a.jsxs("span",{children:["Ver productos (",e.productos.length,")"]}),a.jsx(ne.div,{animate:{rotate:u?180:0},transition:{duration:.25},children:"▼"})]}),a.jsx(Gt,{children:u&&a.jsx(ne.div,{className:"space-y-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:e.productos.map((b,k)=>a.jsxs(ne.div,{className:"flex items-center justify-between bg-white rounded-xl p-4 border border-green-100",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:k*.06},whileHover:{scale:1.02},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold",children:"🎮"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-gray-800",children:b.nombre}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Cantidad: ",b.cantidad," × ",f(b.precio)]})]})]}),a.jsx("span",{className:"font-bold text-green-600",children:f((Number(b.precio)||0)*b.cantidad)})]},`${b.id}-${k}`))})})]})]})}):null,a.jsxs(ne.div,{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:1.2},children:[a.jsx(ne.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(Tt,{to:"/",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx(vd,{className:"w-5 h-5"}),a.jsx("span",{children:"Seguir comprando"})]})}),a.jsx(ne.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(Tt,{to:"/profile",className:"inline-flex items-center gap-3 px-8 py-4 bg-white text-gray-700 rounded-xl font-bold shadow-lg border-2 border-gray-200 hover:border-gray-300 hover:shadow-xl transition-all duration-300",children:[a.jsx(g$,{className:"w-5 h-5"}),a.jsx("span",{children:"Ver historial"})]})})]}),r&&a.jsxs(ne.details,{className:"mt-2 text-left",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},children:[a.jsx("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-800 font-medium mb-2",children:"Detalles técnicos de la transacción"}),a.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200 max-h-64 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-gray-600 text-xs font-mono",children:JSON.stringify(r,null,2)})})]})]})]})]})}function jK(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function IK(){const[t]=Kv(),{usuarioInfo:e}=ii(),{carrito:n}=Xd(),[r,i]=S.useState(!1),[o,c]=S.useState(!1);S.useEffect(()=>{const h=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=h}},[]),S.useEffect(()=>{const f=setTimeout(async()=>{var k;if(r)return;const g=t.get("session"),y=jK(),v=(k=y==null?void 0:y.items)!=null&&k.length?y.items:(n||[]).map(w=>({id:w.id,nombre:w.nombre,precio:Number(w.precio)||0,cantidad:w.cantidad})),b=(y==null?void 0:y.total)??(n||[]).reduce((w,A)=>w+(Number(A.precio)||0)*A.cantidad,0);try{if(g){const w=yn($t(De,"orders"),Dr("raw.SESSION","==",g),Tm(1));if(!(await qr(w)).empty){try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0);return}}if(e&&(v.length>0||b>=0)){const w=v.map(A=>({id:A.id,nombre:A.nombre,precio:Number(A.precio)||0,cantidad:A.cantidad,imagen:A.imagen||"/Productos/default.jpg",empresa:A.empresa||"N/A",subtotal:(Number(A.precio)||0)*A.cantidad}));await jm($t(De,"orders"),{userId:e.uid,userEmail:e.email,userName:e.displayName,userPhone:(e==null?void 0:e.telefono)||null,productos:w,total:b,subtotal:w.reduce((A,j)=>A+j.subtotal,0),impuestos:0,envio:0,estado:"cancelado",estadoPago:"fallido",metodoPago:"CardNet",fecha:Ic(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(y==null?void 0:y.mode)||(y?"unknown":"cart"),direccionEntrega:(e==null?void 0:e.direccionCompleta)||null,telefonoContacto:(e==null?void 0:e.telefono)||null,notasEspeciales:null,raw:{SESSION:g||null}});try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0)}}catch(w){console.error("Error guardando orden cancelada:",w)}},600);return()=>clearTimeout(f)},[e,n,r,t]);const u=[{icon:zd,title:"Datos incorrectos",desc:"Verifica la información de tu tarjeta"},{icon:Lm,title:"Sesión expirada",desc:"El tiempo límite para el pago se agotó"},{icon:bl,title:"Fondos insuficientes",desc:"Tu tarjeta no tiene saldo disponible"},{icon:xo,title:"Cancelado por el usuario",desc:"El pago fue cancelado manualmente"}];return a.jsxs(ne.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-rose-50 via-red-50 to-pink-50 px-3 sm:px-6 overflow-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(16)].map((h,f)=>a.jsx(ne.div,{className:"absolute w-3 h-3 bg-red-200 rounded-full opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight],rotate:[0,360]},transition:{duration:Math.random()*14+14,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},f))}),a.jsxs(ne.div,{className:"bg-white/95 backdrop-blur-xl rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 lg:p-10 max-w-lg sm:max-w-2xl w-full text-center relative overflow-hidden border border-white/30 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-pink-500/5 rounded-3xl"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx(ne.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:a.jsxs(ne.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[a.jsx(xo,{className:"w-24 h-24 text-red-500 mx-auto drop-shadow-lg"}),a.jsx(ne.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:a.jsx(bl,{className:"w-4 h-4 text-red-600"})})]})}),a.jsx(ne.h1,{className:"text-4xl font-extrabold bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent mb-6",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:"Pago cancelado"}),a.jsxs(ne.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.45},children:[a.jsx("p",{className:"text-gray-700 text-lg leading-relaxed mb-4",children:"Tu transacción no pudo ser completada."}),a.jsxs(ne.div,{className:"inline-flex items-center gap-2 bg-green-50 text-green-700 px-4 py-2 rounded-full border border-green-200",initial:{scale:0},animate:{scale:1},transition:{delay:.65,type:"spring"},children:[a.jsx(zd,{className:"w-4 h-4"}),a.jsx("span",{className:"font-semibold",children:"No se realizó ningún cargo a tu tarjeta"})]})]}),a.jsxs(ne.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.6},children:[a.jsxs("button",{onClick:()=>c(h=>!h),className:"flex items-center gap-2 mx-auto text-gray-600 hover:text-gray-800 transition-colors",type:"button",children:[a.jsx("span",{className:"font-medium",children:"¿Por qué falló mi pago?"}),a.jsx(ne.div,{animate:{rotate:o?180:0},transition:{duration:.25},children:a.jsx(O$,{className:"w-4 h-4"})})]}),a.jsx(Gt,{children:o&&a.jsx(ne.div,{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:u.map((h,f)=>a.jsx(ne.div,{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:f*.08},whileHover:{scale:1.02,backgroundColor:"#f8fafc"},children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:a.jsx(h.icon,{className:"w-5 h-5 text-red-600"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:h.title}),a.jsx("p",{className:"text-sm text-gray-600",children:h.desc})]})]})},f))})})]}),a.jsxs(ne.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.8},children:[a.jsx(ne.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(Tt,{to:"/carrito",className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300",children:[a.jsx($1,{className:"w-5 h-5"}),a.jsx("span",{children:"Intentar de nuevo"})]})}),a.jsx(ne.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(Tt,{to:"/",className:"inline-flex items-center gap-3 px-8 py-4 bg-white text-gray-700 rounded-xl font-bold shadow-lg border-2 border-gray-200 hover:border-gray-300 hover:shadow-xl transition-all duration-300",children:[a.jsx(vd,{className:"w-5 h-5"}),a.jsx("span",{children:"Ir al inicio"})]})})]}),a.jsxs(ne.div,{className:"mt-8 p-4 bg-blue-50 rounded-xl border border-blue-200",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"¿Necesitas ayuda?"}),a.jsx("p",{className:"text-blue-700 text-sm",children:"Si el problema persiste, contacta a nuestro equipo de soporte. Estamos aquí para ayudarte a completar tu compra."}),a.jsx(ne.a,{href:"/contacto",className:"mt-3 inline-block text-blue-600 font-semibold hover:text-blue-800 transition-colors",whileHover:{scale:1.03},children:"Contactar soporte →"})]})]})]})]})}function PK(){const t=ea();return a.jsx(KT,{children:a.jsx(Gt,{mode:"wait",children:a.jsxs(t3,{location:t,children:[a.jsx(fr,{path:"/",element:a.jsx(jr,{children:a.jsx(sH,{})})}),a.jsx(fr,{path:"/profile",element:a.jsx(SK,{children:a.jsx(jr,{children:a.jsx(fH,{})})})}),a.jsx(fr,{path:"/admin",element:a.jsx(ZB,{})}),a.jsx(fr,{path:"/producto/:id",element:a.jsx(jr,{children:a.jsx(xH,{})})}),a.jsx(fr,{path:"/producto/:id/detalle",element:a.jsx(jr,{children:a.jsx(jH,{})})}),a.jsx(fr,{path:"/carrito",element:a.jsx(jr,{children:a.jsx(EH,{})})}),a.jsx(fr,{path:"/contacto",element:a.jsx(jr,{children:a.jsx(NH,{})})}),a.jsx(fr,{path:"/nosotros",element:a.jsx(jr,{children:a.jsx(TH,{})})}),a.jsx(fr,{path:"/buscar",element:a.jsx(jr,{children:a.jsx(_K,{})})}),a.jsx(fr,{path:"/categorias",element:a.jsx(jr,{children:a.jsx(Bk,{})})}),a.jsx(fr,{path:"/Productos/:categoria?",element:a.jsx(jr,{children:a.jsx(Bk,{})})}),a.jsx(fr,{path:"/estafetas",element:a.jsx(jr,{children:a.jsx(kK,{})})}),a.jsx(fr,{path:"/vender",element:a.jsx(jr,{children:a.jsx(kH,{})})}),a.jsx(fr,{path:"/tiendas",element:a.jsx(jr,{children:a.jsx(SH,{})})}),a.jsx(fr,{path:"/historial",element:a.jsx(jr,{children:a.jsx(AH,{})})}),a.jsx(fr,{path:"/payment/pending",element:a.jsx(jr,{children:a.jsx(TK,{})})}),a.jsx(fr,{path:"/payment/success",element:a.jsx(jr,{children:a.jsx(CK,{})})}),a.jsx(fr,{path:"/payment/cancel",element:a.jsx(jr,{children:a.jsx(IK,{})})})]},t.pathname)})})}function jr({children:t}){return a.jsx(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:t})}function RK(){const{pathname:t}=ea(),e=wi(),{usuario:n}=ii(),{abrirModal:r}=ru(),[i,o]=S.useState(!1),c=h=>t===h,u=h=>{(h==="/profile"||h==="/carrito")&&!n?o(!0):e(h)};return a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-md flex justify-around items-center h-14 text-sm xl:hidden transition-colors duration-300",children:[a.jsx(Yu,{onClick:()=>u("/"),icon:a.jsx(MU,{}),label:"Inicio",active:c("/")}),a.jsx(Yu,{onClick:()=>u("/tiendas"),icon:a.jsx($U,{}),label:"Tiendas",active:c("/tiendas")}),a.jsx(Yu,{onClick:()=>u("/categorias"),icon:a.jsx(zU,{}),label:"Categorías",active:c("/categorias")}),a.jsx(Yu,{onClick:()=>u("/carrito"),icon:a.jsx(CC,{}),label:"Carrito",active:c("/carrito")}),a.jsx(Yu,{onClick:()=>u("/profile"),icon:a.jsx(IC,{}),label:"Perfil",active:c("/profile")})]}),a.jsx(Vm,{isOpen:i,onClose:()=>o(!1),onIniciarSesion:()=>{o(!1),r()}})]})}function Yu({onClick:t,icon:e,label:n,active:r}){return a.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center w-full h-full transition-colors ${r?"text-[#4FC3F7] font-semibold":"text-gray-600 dark:text-gray-300 hover:text-[#4FC3F7] dark:hover:text-[#60a5fa]"}`,"aria-label":n,type:"button",children:[a.jsx("div",{className:"text-lg",children:e}),a.jsx("div",{children:n})]})}function MK(){const{modalAbierto:t,setModalAbierto:e,modo:n,setModo:r}=ru(),{login:i,signup:o,usuario:c}=ii(),[u,h]=S.useState(n),[f,g]=S.useState(""),[y,v]=S.useState(""),[b,k]=S.useState(""),[w,A]=S.useState("");S.useEffect(()=>{h(n),A(""),g(""),v(""),k("")},[t,n]);async function j(R){R.preventDefault(),A("");try{if(u==="login")await i(f,y);else{const L=await o(f,y);await Xn(at(De,"users",L.uid),{displayName:b||"Usuario",email:f,telefono:"",direccion:"",codigo:"",metodoEntrega:"",admin:!1,createdAt:new Date}),b&&await updateProfile(L,{displayName:b})}e(!1)}catch(L){A("Error: "+L.message)}}return t?a.jsx("div",{onClick:()=>e(!1),className:"fixed inset-0 bg-gradient-to-br from-black/90 to-gray-900/90 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:a.jsxs(ne.div,{onClick:R=>R.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40",children:[a.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold",children:"×"}),a.jsx("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:u==="login"?a.jsxs(a.Fragment,{children:[a.jsx(IC,{className:"text-[#3b82f6]"})," Iniciar Sesión"]}):a.jsxs(a.Fragment,{children:[a.jsx(HU,{className:"text-[#3b82f6]"})," Registrarse"]})}),w&&a.jsx("p",{className:"text-red-400 mb-4 text-center font-semibold",children:w}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[u==="signup"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Nombre de usuario"}),a.jsx("input",{type:"text",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:b,onChange:R=>k(R.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Correo electrónico"}),a.jsx("input",{type:"email",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:f,onChange:R=>g(R.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Contraseña"}),a.jsx("input",{type:"password",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:y,onChange:R=>v(R.target.value)})]}),a.jsx("button",{type:"submit",className:"w-full bg-[#3b82f6] hover:bg-[#2563eb] text-white font-semibold py-2 rounded-lg shadow-lg transition transform hover:scale-105",children:u==="login"?"Iniciar sesión":"Registrarse"})]}),a.jsx("p",{className:"mt-4 text-center text-sm cursor-pointer text-[#3b82f6] hover:underline select-none",onClick:()=>{A("");const R=u==="login"?"signup":"login";h(R),r(R)},children:u==="login"?"¿No tienes una cuenta? Regístrate":"¿Ya tienes cuenta? Inicia sesión"})]})}):null}const DK=()=>{const{pathname:t}=ea();return S.useEffect(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0;const e=document.querySelector("main");e&&(e.scrollTop=0)},[t]),null};function OK(){i1();const{theme:t,toggleTheme:e}=r1(),[n,r]=S.useState(0),i=S.useRef(null),[o,c]=S.useState(!0),u=S.useRef(typeof window<"u"?window.scrollY:0),h=S.useRef(!1),[f,g]=S.useState(!0);S.useEffect(()=>{const v=()=>{const w=document.querySelector("header"),A=w?Math.ceil(w.getBoundingClientRect().height):0;r(A);try{const j=i.current,R=j?Math.ceil(j.getBoundingClientRect().height):0;document.documentElement.style.setProperty("--topbar-height",`${R}px`);const L=A+R;document.documentElement.style.setProperty("--content-offset",`${L}px`),console.log(`🔧 Content offset calculado: Header=${A}px + TopBar=${R}px = ${L}px`)}catch{}};v();const b=()=>{try{typeof window<"u"&&g(window.innerWidth>=1280)}catch{}v()};let k=null;try{if(typeof window<"u"&&"ResizeObserver"in window){k=new ResizeObserver(()=>v());const w=document.querySelector("header");w&&k.observe(w),i.current&&k.observe(i.current)}else window.addEventListener("resize",b)}catch{window.addEventListener("resize",b)}return()=>{if(k)try{k.disconnect()}catch{}window.removeEventListener("resize",b)}},[]),S.useEffect(()=>{const v=()=>{h.current||(h.current=!0,requestAnimationFrame(()=>{const b=window.scrollY,k=u.current,w=b-k;b<=0?c(!0):Math.abs(w)<5||(w>0&&b>60?c(!1):w<0&&c(!0)),u.current=b,h.current=!1}))};return window.addEventListener("scroll",v,{passive:!0}),()=>window.removeEventListener("scroll",v)},[]);const y={position:"fixed",left:0,right:0,top:`${n}px`,zIndex:9990,transform:o?"translateY(0)":"translateY(-110%)",transition:"transform 220ms ease, opacity 220ms ease",pointerEvents:o?"auto":"none",display:"flex",margin:0,padding:0};return a.jsxs("div",{ref:i,style:{...y,padding:"0.25rem 0.5rem",margin:0},className:"flex topbar-base topbar-tech bg-white dark:bg-gray-800 shadow-md justify-between items-center transition-colors duration-300",role:"region","aria-label":"Top bar",children:[a.jsx("div",{className:"flex items-center text-[10px] sm:text-xs md:text-sm whitespace-nowrap theme-text text-gray-700 dark:text-gray-200",children:a.jsx("span",{children:"Sitio oficial de las tiendas de videojuegos de RD"})}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"theme-toggle",children:[a.jsx("input",{type:"checkbox",checked:t==="dark",onChange:e,className:"theme-toggle__input","aria-label":"Cambiar tema"}),a.jsxs("svg",{className:"theme-toggle__icon theme-toggle__icon--sun",fill:"none",height:"18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"18",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("line",{x1:"12",x2:"12",y1:"1",y2:"3"}),a.jsx("line",{x1:"12",x2:"12",y1:"21",y2:"23"}),a.jsx("line",{x1:"4.22",x2:"5.64",y1:"4.22",y2:"5.64"}),a.jsx("line",{x1:"18.36",x2:"19.78",y1:"18.36",y2:"19.78"}),a.jsx("line",{x1:"1",x2:"3",y1:"12",y2:"12"}),a.jsx("line",{x1:"21",x2:"23",y1:"12",y2:"12"}),a.jsx("line",{x1:"4.22",x2:"5.64",y1:"19.78",y2:"18.36"}),a.jsx("line",{x1:"18.36",x2:"19.78",y1:"5.64",y2:"4.22"})]}),a.jsx("svg",{className:"theme-toggle__icon theme-toggle__icon--moon",viewBox:"0 0 24 24",children:a.jsx("path",{d:"m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z"})})]})})]})}function LK(){const{theme:t}=r1();return a.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-300",children:[a.jsx(iz,{}),a.jsx(OK,{}),a.jsxs("main",{className:"flex-grow",children:[a.jsx(DK,{}),a.jsx(PK,{})]}),a.jsx(sz,{}),a.jsx(RK,{}),a.jsx(MK,{})]})}function VK(){return a.jsx(VO,{children:a.jsx(LK,{})})}lI.createRoot(document.getElementById("root")).render(a.jsx(Gi.StrictMode,{children:a.jsx(c3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(KT,{children:a.jsx(f3,{children:a.jsx(p3,{children:a.jsx(VK,{})})})})})}));
