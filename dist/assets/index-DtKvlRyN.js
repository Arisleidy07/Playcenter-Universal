function FI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Gd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g0={exports:{}},Hu={},y0={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function UI(){if(Qw)return Dt;Qw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function N(B,Z,be){this.props=B,this.context=Z,this.refs=b,this.updater=be||w}N.prototype.isReactComponent={},N.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},N.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=N.prototype;function O(B,Z,be){this.props=B,this.context=Z,this.refs=b,this.updater=be||w}var I=O.prototype=new j;I.constructor=O,S(I,N.prototype),I.isPureReactComponent=!0;var V=Array.isArray,$=Object.prototype.hasOwnProperty,q={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function R(B,Z,be){var Ve,We={},et=null,ht=null;if(Z!=null)for(Ve in Z.ref!==void 0&&(ht=Z.ref),Z.key!==void 0&&(et=""+Z.key),Z)$.call(Z,Ve)&&!D.hasOwnProperty(Ve)&&(We[Ve]=Z[Ve]);var Xe=arguments.length-2;if(Xe===1)We.children=be;else if(1<Xe){for(var nt=Array(Xe),St=0;St<Xe;St++)nt[St]=arguments[St+2];We.children=nt}if(B&&B.defaultProps)for(Ve in Xe=B.defaultProps,Xe)We[Ve]===void 0&&(We[Ve]=Xe[Ve]);return{$$typeof:t,type:B,key:et,ref:ht,props:We,_owner:q.current}}function P(B,Z){return{$$typeof:t,type:B.type,key:Z,ref:B.ref,props:B.props,_owner:B._owner}}function T(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function L(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(be){return Z[be]})}var U=/\/+/g;function A(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):Z.toString(36)}function oe(B,Z,be,Ve,We){var et=typeof B;(et==="undefined"||et==="boolean")&&(B=null);var ht=!1;if(B===null)ht=!0;else switch(et){case"string":case"number":ht=!0;break;case"object":switch(B.$$typeof){case t:case e:ht=!0}}if(ht)return ht=B,We=We(ht),B=Ve===""?"."+A(ht,0):Ve,V(We)?(be="",B!=null&&(be=B.replace(U,"$&/")+"/"),oe(We,Z,be,"",function(St){return St})):We!=null&&(T(We)&&(We=P(We,be+(!We.key||ht&&ht.key===We.key?"":(""+We.key).replace(U,"$&/")+"/")+B)),Z.push(We)),1;if(ht=0,Ve=Ve===""?".":Ve+":",V(B))for(var Xe=0;Xe<B.length;Xe++){et=B[Xe];var nt=Ve+A(et,Xe);ht+=oe(et,Z,be,nt,We)}else if(nt=x(B),typeof nt=="function")for(B=nt.call(B),Xe=0;!(et=B.next()).done;)et=et.value,nt=Ve+A(et,Xe++),ht+=oe(et,Z,be,nt,We);else if(et==="object")throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ht}function ae(B,Z,be){if(B==null)return B;var Ve=[],We=0;return oe(B,Ve,"","",function(et){return Z.call(be,et,We++)}),Ve}function Ce(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(be){(B._status===0||B._status===-1)&&(B._status=1,B._result=be)},function(be){(B._status===0||B._status===-1)&&(B._status=2,B._result=be)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var Pe={current:null},ee={transition:null},ie={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ee,ReactCurrentOwner:q};function ye(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:ae,forEach:function(B,Z,be){ae(B,function(){Z.apply(this,arguments)},be)},count:function(B){var Z=0;return ae(B,function(){Z++}),Z},toArray:function(B){return ae(B,function(Z){return Z})||[]},only:function(B){if(!T(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Dt.Component=N,Dt.Fragment=n,Dt.Profiler=i,Dt.PureComponent=O,Dt.StrictMode=r,Dt.Suspense=d,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Dt.act=ye,Dt.cloneElement=function(B,Z,be){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ve=S({},B.props),We=B.key,et=B.ref,ht=B._owner;if(Z!=null){if(Z.ref!==void 0&&(et=Z.ref,ht=q.current),Z.key!==void 0&&(We=""+Z.key),B.type&&B.type.defaultProps)var Xe=B.type.defaultProps;for(nt in Z)$.call(Z,nt)&&!D.hasOwnProperty(nt)&&(Ve[nt]=Z[nt]===void 0&&Xe!==void 0?Xe[nt]:Z[nt])}var nt=arguments.length-2;if(nt===1)Ve.children=be;else if(1<nt){Xe=Array(nt);for(var St=0;St<nt;St++)Xe[St]=arguments[St+2];Ve.children=Xe}return{$$typeof:t,type:B.type,key:We,ref:et,props:Ve,_owner:ht}},Dt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Dt.createElement=R,Dt.createFactory=function(B){var Z=R.bind(null,B);return Z.type=B,Z},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(B){return{$$typeof:u,render:B}},Dt.isValidElement=T,Dt.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:Ce}},Dt.memo=function(B,Z){return{$$typeof:f,type:B,compare:Z===void 0?null:Z}},Dt.startTransition=function(B){var Z=ee.transition;ee.transition={};try{B()}finally{ee.transition=Z}},Dt.unstable_act=ye,Dt.useCallback=function(B,Z){return Pe.current.useCallback(B,Z)},Dt.useContext=function(B){return Pe.current.useContext(B)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(B){return Pe.current.useDeferredValue(B)},Dt.useEffect=function(B,Z){return Pe.current.useEffect(B,Z)},Dt.useId=function(){return Pe.current.useId()},Dt.useImperativeHandle=function(B,Z,be){return Pe.current.useImperativeHandle(B,Z,be)},Dt.useInsertionEffect=function(B,Z){return Pe.current.useInsertionEffect(B,Z)},Dt.useLayoutEffect=function(B,Z){return Pe.current.useLayoutEffect(B,Z)},Dt.useMemo=function(B,Z){return Pe.current.useMemo(B,Z)},Dt.useReducer=function(B,Z,be){return Pe.current.useReducer(B,Z,be)},Dt.useRef=function(B){return Pe.current.useRef(B)},Dt.useState=function(B){return Pe.current.useState(B)},Dt.useSyncExternalStore=function(B,Z,be){return Pe.current.useSyncExternalStore(B,Z,be)},Dt.useTransition=function(){return Pe.current.useTransition()},Dt.version="18.3.1",Dt}var Jw;function Ax(){return Jw||(Jw=1,y0.exports=UI()),y0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function $I(){if(Zw)return Hu;Zw=1;var t=Ax(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,f){var g,y={},x=null,w=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(w=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:u,key:x,ref:w,props:y,_owner:i.current}}return Hu.Fragment=n,Hu.jsx=c,Hu.jsxs=c,Hu}var e2;function zI(){return e2||(e2=1,g0.exports=$I()),g0.exports}var o=zI(),k=Ax();const Yr=Gd(k),dy=FI({__proto__:null,default:Yr},[k]);var vf={},x0={exports:{}},ai={},v0={exports:{}},b0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2;function BI(){return t2||(t2=1,function(t){function e(ee,ie){var ye=ee.length;ee.push(ie);e:for(;0<ye;){var B=ye-1>>>1,Z=ee[B];if(0<i(Z,ie))ee[B]=ie,ee[ye]=Z,ye=B;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ie=ee[0],ye=ee.pop();if(ye!==ie){ee[0]=ye;e:for(var B=0,Z=ee.length,be=Z>>>1;B<be;){var Ve=2*(B+1)-1,We=ee[Ve],et=Ve+1,ht=ee[et];if(0>i(We,ye))et<Z&&0>i(ht,We)?(ee[B]=ht,ee[et]=ye,B=et):(ee[B]=We,ee[Ve]=ye,B=Ve);else if(et<Z&&0>i(ht,ye))ee[B]=ht,ee[et]=ye,B=et;else break e}}return ie}function i(ee,ie){var ye=ee.sortIndex-ie.sortIndex;return ye!==0?ye:ee.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,x=3,w=!1,S=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ee){for(var ie=n(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=ee)r(f),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=n(f)}}function V(ee){if(b=!1,I(ee),!S)if(n(d)!==null)S=!0,Ce($);else{var ie=n(f);ie!==null&&Pe(V,ie.startTime-ee)}}function $(ee,ie){S=!1,b&&(b=!1,j(R),R=-1),w=!0;var ye=x;try{for(I(ie),y=n(d);y!==null&&(!(y.expirationTime>ie)||ee&&!L());){var B=y.callback;if(typeof B=="function"){y.callback=null,x=y.priorityLevel;var Z=B(y.expirationTime<=ie);ie=t.unstable_now(),typeof Z=="function"?y.callback=Z:y===n(d)&&r(d),I(ie)}else r(d);y=n(d)}if(y!==null)var be=!0;else{var Ve=n(f);Ve!==null&&Pe(V,Ve.startTime-ie),be=!1}return be}finally{y=null,x=ye,w=!1}}var q=!1,D=null,R=-1,P=5,T=-1;function L(){return!(t.unstable_now()-T<P)}function U(){if(D!==null){var ee=t.unstable_now();T=ee;var ie=!0;try{ie=D(!0,ee)}finally{ie?A():(q=!1,D=null)}}else q=!1}var A;if(typeof O=="function")A=function(){O(U)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ae=oe.port2;oe.port1.onmessage=U,A=function(){ae.postMessage(null)}}else A=function(){N(U,0)};function Ce(ee){D=ee,q||(q=!0,A())}function Pe(ee,ie){R=N(function(){ee(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,Ce($))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(ee){switch(x){case 1:case 2:case 3:var ie=3;break;default:ie=x}var ye=x;x=ie;try{return ee()}finally{x=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ie){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ye=x;x=ee;try{return ie()}finally{x=ye}},t.unstable_scheduleCallback=function(ee,ie,ye){var B=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?B+ye:B):ye=B,ee){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ye+Z,ee={id:g++,callback:ie,priorityLevel:ee,startTime:ye,expirationTime:Z,sortIndex:-1},ye>B?(ee.sortIndex=ye,e(f,ee),n(d)===null&&ee===n(f)&&(b?(j(R),R=-1):b=!0,Pe(V,ye-B))):(ee.sortIndex=Z,e(d,ee),S||w||(S=!0,Ce($))),ee},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(ee){var ie=x;return function(){var ye=x;x=ie;try{return ee.apply(this,arguments)}finally{x=ye}}}}(b0)),b0}var n2;function HI(){return n2||(n2=1,v0.exports=BI()),v0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2;function WI(){if(r2)return ai;r2=1;var t=Ax(),e=HI();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,l){c(s,l),c(s+"Capture",l)}function c(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(s){return d.call(y,s)?!0:d.call(g,s)?!1:f.test(s)?y[s]=!0:(g[s]=!0,!1)}function w(s,l,h,p){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,l,h,p){if(l===null||typeof l>"u"||w(s,l,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(s,l,h,p,v,E,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=s,this.type=l,this.sanitizeURL=E,this.removeEmptyString=M}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];N[l]=new b(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function O(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(j,O);N[l]=new b(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(j,O);N[l]=new b(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(j,O);N[l]=new b(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function I(s,l,h,p){var v=N.hasOwnProperty(l)?N[l]:null;(v!==null?v.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(S(l,h,v,p)&&(h=null),p||v===null?x(l)&&(h===null?s.removeAttribute(l):s.setAttribute(l,""+h)):v.mustUseProperty?s[v.propertyName]=h===null?v.type===3?!1:"":h:(l=v.attributeName,p=v.attributeNamespace,h===null?s.removeAttribute(l):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,p?s.setAttributeNS(p,l,h):s.setAttribute(l,h))))}var V=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),q=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),ee=Symbol.iterator;function ie(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var ye=Object.assign,B;function Z(s){if(B===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+s}var be=!1;function Ve(s,l){if(!s||be)return"";be=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(fe){var p=fe}Reflect.construct(s,[],l)}else{try{l.call()}catch(fe){p=fe}s.call(l.prototype)}else{try{throw Error()}catch(fe){p=fe}s()}}catch(fe){if(fe&&p&&typeof fe.stack=="string"){for(var v=fe.stack.split(`
`),E=p.stack.split(`
`),M=v.length-1,z=E.length-1;1<=M&&0<=z&&v[M]!==E[z];)z--;for(;1<=M&&0<=z;M--,z--)if(v[M]!==E[z]){if(M!==1||z!==1)do if(M--,z--,0>z||v[M]!==E[z]){var K=`
`+v[M].replace(" at new "," at ");return s.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",s.displayName)),K}while(1<=M&&0<=z);break}}}finally{be=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?Z(s):""}function We(s){switch(s.tag){case 5:return Z(s.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return s=Ve(s.type,!1),s;case 11:return s=Ve(s.type.render,!1),s;case 1:return s=Ve(s.type,!0),s;default:return""}}function et(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case q:return"Portal";case P:return"Profiler";case R:return"StrictMode";case A:return"Suspense";case oe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case T:return(s._context.displayName||"Context")+".Provider";case U:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ae:return l=s.displayName||null,l!==null?l:et(s.type)||"Memo";case Ce:l=s._payload,s=s._init;try{return et(s(l))}catch{}}return null}function ht(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return et(l);case 8:return l===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Xe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function nt(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function St(s){var l=nt(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),p=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,E=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return v.call(this)},set:function(M){p=""+M,E.call(this,M)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(M){p=""+M},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function xt(s){s._valueTracker||(s._valueTracker=St(s))}function Tt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),p="";return s&&(p=nt(s)?s.checked?"true":"false":s.value),s=p,s!==h?(l.setValue(s),!0):!1}function Ze(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Rt(s,l){var h=l.checked;return ye({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function At(s,l){var h=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;h=Xe(l.value!=null?l.value:h),s._wrapperState={initialChecked:p,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function pn(s,l){l=l.checked,l!=null&&I(s,"checked",l,!1)}function J(s,l){pn(s,l);var h=Xe(l.value),p=l.type;if(h!=null)p==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?De(s,l.type,h):l.hasOwnProperty("defaultValue")&&De(s,l.type,Xe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function He(s,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,h||l===s.value||(s.value=l),s.defaultValue=l}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function De(s,l,h){(l!=="number"||Ze(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var st=Array.isArray;function wt(s,l,h,p){if(s=s.options,l){l={};for(var v=0;v<h.length;v++)l["$"+h[v]]=!0;for(h=0;h<s.length;h++)v=l.hasOwnProperty("$"+s[h].value),s[h].selected!==v&&(s[h].selected=v),v&&p&&(s[h].defaultSelected=!0)}else{for(h=""+Xe(h),l=null,v=0;v<s.length;v++){if(s[v].value===h){s[v].selected=!0,p&&(s[v].defaultSelected=!0);return}l!==null||s[v].disabled||(l=s[v])}l!==null&&(l.selected=!0)}}function Qe(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ye({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function dt(s,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(n(92));if(st(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),h=l}s._wrapperState={initialValue:Xe(h)}}function W(s,l){var h=Xe(l.value),p=Xe(l.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),l.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),p!=null&&(s.defaultValue=""+p)}function X(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function me(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?me(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var te,ke=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,p,v){MSApp.execUnsafeLocalFunction(function(){return s(l,h,p,v)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(te=te||document.createElement("div"),te.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=te.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Se(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jt=["Webkit","ms","Moz","O"];Object.keys(vt).forEach(function(s){jt.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),vt[l]=vt[s]})});function ct(s,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||vt.hasOwnProperty(s)&&vt[s]?(""+l).trim():l+"px"}function Ot(s,l){s=s.style;for(var h in l)if(l.hasOwnProperty(h)){var p=h.indexOf("--")===0,v=ct(h,l[h],p);h==="float"&&(h="cssFloat"),p?s.setProperty(h,v):s[h]=v}}var H=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G(s,l){if(l){if(H[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function pe(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ce=null;function he(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Fe=null,Te=null,xe=null;function se(s){if(s=ju(s)){if(typeof Fe!="function")throw Error(n(280));var l=s.stateNode;l&&(l=Rh(l),Fe(s.stateNode,s.type,l))}}function Le(s){Te?xe?xe.push(s):xe=[s]:Te=s}function Me(){if(Te){var s=Te,l=xe;if(xe=Te=null,se(s),l)for(s=0;s<l.length;s++)se(l[s])}}function ue(s,l){return s(l)}function at(){}var ze=!1;function kn(s,l,h){if(ze)return s(l,h);ze=!0;try{return ue(s,l,h)}finally{ze=!1,(Te!==null||xe!==null)&&(at(),Me())}}function Lt(s,l){var h=s.stateNode;if(h===null)return null;var p=Rh(h);if(p===null)return null;h=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var Vt=!1;if(u)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{Vt=!1}function Wt(s,l,h,p,v,E,M,z,K){var fe=Array.prototype.slice.call(arguments,3);try{l.apply(h,fe)}catch(Ae){this.onError(Ae)}}var ir=!1,Mn=null,Et=!1,zn=null,Xn={onError:function(s){ir=!0,Mn=s}};function cs(s,l,h,p,v,E,M,z,K){ir=!1,Mn=null,Wt.apply(Xn,arguments)}function Do(s,l,h,p,v,E,M,z,K){if(cs.apply(this,arguments),ir){if(ir){var fe=Mn;ir=!1,Mn=null}else throw Error(n(198));Et||(Et=!0,zn=fe)}}function Zr(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function mi(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Bn(s){if(Zr(s)!==s)throw Error(n(188))}function Hi(s){var l=s.alternate;if(!l){if(l=Zr(s),l===null)throw Error(n(188));return l!==s?null:s}for(var h=s,p=l;;){var v=h.return;if(v===null)break;var E=v.alternate;if(E===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===h)return Bn(v),s;if(E===p)return Bn(v),l;E=E.sibling}throw Error(n(188))}if(h.return!==p.return)h=v,p=E;else{for(var M=!1,z=v.child;z;){if(z===h){M=!0,h=v,p=E;break}if(z===p){M=!0,p=v,h=E;break}z=z.sibling}if(!M){for(z=E.child;z;){if(z===h){M=!0,h=E,p=v;break}if(z===p){M=!0,p=E,h=v;break}z=z.sibling}if(!M)throw Error(n(189))}}if(h.alternate!==p)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?s:l}function Aa(s){return s=Hi(s),s!==null?qs(s):null}function qs(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=qs(s);if(l!==null)return l;s=s.sibling}return null}var Gs=e.unstable_scheduleCallback,Ia=e.unstable_cancelCallback,Nr=e.unstable_shouldYield,yh=e.unstable_requestPaint,qt=e.unstable_now,$r=e.unstable_getCurrentPriorityLevel,Wi=e.unstable_ImmediatePriority,gr=e.unstable_UserBlockingPriority,zr=e.unstable_NormalPriority,Pa=e.unstable_LowPriority,Ol=e.unstable_IdlePriority,Ks=null,Br=null;function Ra(s){if(Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(Ks,s,void 0,(s.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:Ll,Ma=Math.log,Xs=Math.LN2;function Ll(s){return s>>>=0,s===0?32:31-(Ma(s)/Xs|0)|0}var Da=64,Oa=4194304;function us(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ys(s,l){var h=s.pendingLanes;if(h===0)return 0;var p=0,v=s.suspendedLanes,E=s.pingedLanes,M=h&268435455;if(M!==0){var z=M&~v;z!==0?p=us(z):(E&=M,E!==0&&(p=us(E)))}else M=h&~v,M!==0?p=us(M):E!==0&&(p=us(E));if(p===0)return 0;if(l!==0&&l!==p&&(l&v)===0&&(v=p&-p,E=l&-l,v>=E||v===16&&(E&4194240)!==0))return l;if((p&4)!==0&&(p|=h&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=p;0<l;)h=31-yr(l),v=1<<h,p|=s[h],l&=~v;return p}function mu(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cr(s,l){for(var h=s.suspendedLanes,p=s.pingedLanes,v=s.expirationTimes,E=s.pendingLanes;0<E;){var M=31-yr(E),z=1<<M,K=v[M];K===-1?((z&h)===0||(z&p)!==0)&&(v[M]=mu(z,l)):K<=l&&(s.expiredLanes|=z),E&=~z}}function Hr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Qs(){var s=Da;return Da<<=1,(Da&4194240)===0&&(Da=64),s}function ds(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function hs(s,l,h){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-yr(l),s[l]=h}function en(s,l){var h=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<h;){var v=31-yr(h),E=1<<v;l[v]=0,p[v]=-1,s[v]=-1,h&=~E}}function fs(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var p=31-yr(h),v=1<<p;v&l|s[p]&l&&(s[p]|=l),h&=~v}}var Ft=0;function ms(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Vl,Js,Fl,Y,we,Be=!1,Ie=[],qe=null,rt=null,lt=null,rn=new Map,Jt=new Map,Sn=[],qi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ci(s,l){switch(s){case"focusin":case"focusout":qe=null;break;case"dragenter":case"dragleave":rt=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":rn.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jt.delete(l.pointerId)}}function Tn(s,l,h,p,v,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:h,eventSystemFlags:p,nativeEvent:E,targetContainers:[v]},l!==null&&(l=ju(l),l!==null&&Js(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),s)}function ps(s,l,h,p,v){switch(l){case"focusin":return qe=Tn(qe,s,l,h,p,v),!0;case"dragenter":return rt=Tn(rt,s,l,h,p,v),!0;case"mouseover":return lt=Tn(lt,s,l,h,p,v),!0;case"pointerover":var E=v.pointerId;return rn.set(E,Tn(rn.get(E)||null,s,l,h,p,v)),!0;case"gotpointercapture":return E=v.pointerId,Jt.set(E,Tn(Jt.get(E)||null,s,l,h,p,v)),!0}return!1}function un(s){var l=Uo(s.target);if(l!==null){var h=Zr(l);if(h!==null){if(l=h.tag,l===13){if(l=mi(h),l!==null){s.blockedOn=l,we(s.priority,function(){Fl(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Zs(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=Ul(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var p=new h.constructor(h.type,h);ce=p,h.target.dispatchEvent(p),ce=null}else return l=ju(h),l!==null&&Js(l),s.blockedOn=h,!1;l.shift()}return!0}function Oo(s,l,h){Zs(s)&&h.delete(l)}function xh(){Be=!1,qe!==null&&Zs(qe)&&(qe=null),rt!==null&&Zs(rt)&&(rt=null),lt!==null&&Zs(lt)&&(lt=null),rn.forEach(Oo),Jt.forEach(Oo)}function Gi(s,l){s.blockedOn===l&&(s.blockedOn=null,Be||(Be=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xh)))}function Ki(s){function l(v){return Gi(v,s)}if(0<Ie.length){Gi(Ie[0],s);for(var h=1;h<Ie.length;h++){var p=Ie[h];p.blockedOn===s&&(p.blockedOn=null)}}for(qe!==null&&Gi(qe,s),rt!==null&&Gi(rt,s),lt!==null&&Gi(lt,s),rn.forEach(l),Jt.forEach(l),h=0;h<Sn.length;h++)p=Sn[h],p.blockedOn===s&&(p.blockedOn=null);for(;0<Sn.length&&(h=Sn[0],h.blockedOn===null);)un(h),h.blockedOn===null&&Sn.shift()}var ea=V.ReactCurrentBatchConfig,La=!0;function bn(s,l,h,p){var v=Ft,E=ea.transition;ea.transition=null;try{Ft=1,pu(s,l,h,p)}finally{Ft=v,ea.transition=E}}function Xp(s,l,h,p){var v=Ft,E=ea.transition;ea.transition=null;try{Ft=4,pu(s,l,h,p)}finally{Ft=v,ea.transition=E}}function pu(s,l,h,p){if(La){var v=Ul(s,l,h,p);if(v===null)ag(s,l,p,Lo,h),Ci(s,p);else if(ps(v,s,l,h,p))p.stopPropagation();else if(Ci(s,p),l&4&&-1<qi.indexOf(s)){for(;v!==null;){var E=ju(v);if(E!==null&&Vl(E),E=Ul(s,l,h,p),E===null&&ag(s,l,p,Lo,h),E===v)break;v=E}v!==null&&p.stopPropagation()}else ag(s,l,p,null,h)}}var Lo=null;function Ul(s,l,h,p){if(Lo=null,s=he(p),s=Uo(s),s!==null)if(l=Zr(s),l===null)s=null;else if(h=l.tag,h===13){if(s=mi(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Lo=s,null}function gu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($r()){case Wi:return 1;case gr:return 4;case zr:case Pa:return 16;case Ol:return 536870912;default:return 16}default:return 16}}var pi=null,$l=null,ei=null;function yu(){if(ei)return ei;var s,l=$l,h=l.length,p,v="value"in pi?pi.value:pi.textContent,E=v.length;for(s=0;s<h&&l[s]===v[s];s++);var M=h-s;for(p=1;p<=M&&l[h-p]===v[E-p];p++);return ei=v.slice(s,1<p?1-p:void 0)}function zl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function gs(){return!0}function xu(){return!1}function xr(s){function l(h,p,v,E,M){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var z in s)s.hasOwnProperty(z)&&(h=s[z],this[z]=h?h(E):E[z]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?gs:xu,this.isPropagationStopped=xu,this}return ye(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),l}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=xr(Xi),ys=ye({},Xi,{view:0,detail:0}),Yp=xr(ys),Hl,ta,Va,Vo=ye({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Va&&(Va&&s.type==="mousemove"?(Hl=s.screenX-Va.screenX,ta=s.screenY-Va.screenY):ta=Hl=0,Va=s),Hl)},movementY:function(s){return"movementY"in s?s.movementY:ta}}),Wl=xr(Vo),vu=ye({},Vo,{dataTransfer:0}),vh=xr(vu),ql=ye({},ys,{relatedTarget:0}),Gl=xr(ql),bh=ye({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),na=xr(bh),wh=ye({},Xi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_h=xr(wh),Eh=ye({},Xi,{data:0}),bu=xr(Eh),Kl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=kh[s])?!!l[s]:!1}function xs(){return Sh}var m=ye({},ys,{key:function(s){if(s.key){var l=Kl[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=zl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Wr[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(s){return s.type==="keypress"?zl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?zl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=xr(m),C=ye({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=xr(C),ne=ye({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),ge=xr(ne),$e=ye({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),tn=xr($e),sr=ye({},Vo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),zt=xr(sr),ur=[9,13,27,32],Yn=u&&"CompositionEvent"in window,ji=null;u&&"documentMode"in document&&(ji=document.documentMode);var gi=u&&"TextEvent"in window&&!ji,Fo=u&&(!Yn||ji&&8<ji&&11>=ji),Xl=" ",W1=!1;function q1(s,l){switch(s){case"keyup":return ur.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G1(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Yl=!1;function OA(s,l){switch(s){case"compositionend":return G1(l);case"keypress":return l.which!==32?null:(W1=!0,Xl);case"textInput":return s=l.data,s===Xl&&W1?null:s;default:return null}}function LA(s,l){if(Yl)return s==="compositionend"||!Yn&&q1(s,l)?(s=yu(),ei=$l=pi=null,Yl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Fo&&l.locale!=="ko"?null:l.data;default:return null}}var VA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!VA[s.type]:l==="textarea"}function X1(s,l,h,p){Le(p),l=Ah(l,"onChange"),0<l.length&&(h=new Bl("onChange","change",null,h,p),s.push({event:h,listeners:l}))}var wu=null,_u=null;function FA(s){fb(s,0)}function Th(s){var l=tc(s);if(Tt(l))return s}function UA(s,l){if(s==="change")return l}var Y1=!1;if(u){var Qp;if(u){var Jp="oninput"in document;if(!Jp){var Q1=document.createElement("div");Q1.setAttribute("oninput","return;"),Jp=typeof Q1.oninput=="function"}Qp=Jp}else Qp=!1;Y1=Qp&&(!document.documentMode||9<document.documentMode)}function J1(){wu&&(wu.detachEvent("onpropertychange",Z1),_u=wu=null)}function Z1(s){if(s.propertyName==="value"&&Th(_u)){var l=[];X1(l,_u,s,he(s)),kn(FA,l)}}function $A(s,l,h){s==="focusin"?(J1(),wu=l,_u=h,wu.attachEvent("onpropertychange",Z1)):s==="focusout"&&J1()}function zA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Th(_u)}function BA(s,l){if(s==="click")return Th(l)}function HA(s,l){if(s==="input"||s==="change")return Th(l)}function WA(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Yi=typeof Object.is=="function"?Object.is:WA;function Eu(s,l){if(Yi(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),p=Object.keys(l);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!d.call(l,v)||!Yi(s[v],l[v]))return!1}return!0}function eb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tb(s,l){var h=eb(s);s=0;for(var p;h;){if(h.nodeType===3){if(p=s+h.textContent.length,s<=l&&p>=l)return{node:h,offset:l-s};s=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=eb(h)}}function nb(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?nb(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function rb(){for(var s=window,l=Ze();l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Ze(s.document)}return l}function Zp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function qA(s){var l=rb(),h=s.focusedElem,p=s.selectionRange;if(l!==h&&h&&h.ownerDocument&&nb(h.ownerDocument.documentElement,h)){if(p!==null&&Zp(h)){if(l=p.start,s=p.end,s===void 0&&(s=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(s,h.value.length);else if(s=(l=h.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var v=h.textContent.length,E=Math.min(p.start,v);p=p.end===void 0?E:Math.min(p.end,v),!s.extend&&E>p&&(v=p,p=E,E=v),v=tb(h,E);var M=tb(h,p);v&&M&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==M.node||s.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),s.removeAllRanges(),E>p?(s.addRange(l),s.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),s.addRange(l)))}}for(l=[],s=h;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)s=l[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var GA=u&&"documentMode"in document&&11>=document.documentMode,Ql=null,eg=null,ku=null,tg=!1;function ib(s,l,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;tg||Ql==null||Ql!==Ze(p)||(p=Ql,"selectionStart"in p&&Zp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ku&&Eu(ku,p)||(ku=p,p=Ah(eg,"onSelect"),0<p.length&&(l=new Bl("onSelect","select",null,l,h),s.push({event:l,listeners:p}),l.target=Ql)))}function Nh(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var Jl={animationend:Nh("Animation","AnimationEnd"),animationiteration:Nh("Animation","AnimationIteration"),animationstart:Nh("Animation","AnimationStart"),transitionend:Nh("Transition","TransitionEnd")},ng={},sb={};u&&(sb=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function Ch(s){if(ng[s])return ng[s];if(!Jl[s])return s;var l=Jl[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in sb)return ng[s]=l[h];return s}var ab=Ch("animationend"),ob=Ch("animationiteration"),lb=Ch("animationstart"),cb=Ch("transitionend"),ub=new Map,db="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(s,l){ub.set(s,l),a(l,[s])}for(var rg=0;rg<db.length;rg++){var ig=db[rg],KA=ig.toLowerCase(),XA=ig[0].toUpperCase()+ig.slice(1);Fa(KA,"on"+XA)}Fa(ab,"onAnimationEnd"),Fa(ob,"onAnimationIteration"),Fa(lb,"onAnimationStart"),Fa("dblclick","onDoubleClick"),Fa("focusin","onFocus"),Fa("focusout","onBlur"),Fa(cb,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function hb(s,l,h){var p=s.type||"unknown-event";s.currentTarget=h,Do(p,l,void 0,s),s.currentTarget=null}function fb(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var p=s[h],v=p.event;p=p.listeners;e:{var E=void 0;if(l)for(var M=p.length-1;0<=M;M--){var z=p[M],K=z.instance,fe=z.currentTarget;if(z=z.listener,K!==E&&v.isPropagationStopped())break e;hb(v,z,fe),E=K}else for(M=0;M<p.length;M++){if(z=p[M],K=z.instance,fe=z.currentTarget,z=z.listener,K!==E&&v.isPropagationStopped())break e;hb(v,z,fe),E=K}}}if(Et)throw s=zn,Et=!1,zn=null,s}function gn(s,l){var h=l[hg];h===void 0&&(h=l[hg]=new Set);var p=s+"__bubble";h.has(p)||(mb(l,s,2,!1),h.add(p))}function sg(s,l,h){var p=0;l&&(p|=4),mb(h,s,p,l)}var jh="_reactListening"+Math.random().toString(36).slice(2);function Tu(s){if(!s[jh]){s[jh]=!0,r.forEach(function(h){h!=="selectionchange"&&(YA.has(h)||sg(h,!1,s),sg(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[jh]||(l[jh]=!0,sg("selectionchange",!1,l))}}function mb(s,l,h,p){switch(gu(l)){case 1:var v=bn;break;case 4:v=Xp;break;default:v=pu}h=v.bind(null,l,h,s),v=void 0,!Vt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),p?v!==void 0?s.addEventListener(l,h,{capture:!0,passive:v}):s.addEventListener(l,h,!0):v!==void 0?s.addEventListener(l,h,{passive:v}):s.addEventListener(l,h,!1)}function ag(s,l,h,p,v){var E=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var M=p.tag;if(M===3||M===4){var z=p.stateNode.containerInfo;if(z===v||z.nodeType===8&&z.parentNode===v)break;if(M===4)for(M=p.return;M!==null;){var K=M.tag;if((K===3||K===4)&&(K=M.stateNode.containerInfo,K===v||K.nodeType===8&&K.parentNode===v))return;M=M.return}for(;z!==null;){if(M=Uo(z),M===null)return;if(K=M.tag,K===5||K===6){p=E=M;continue e}z=z.parentNode}}p=p.return}kn(function(){var fe=E,Ae=he(h),Re=[];e:{var Ne=ub.get(s);if(Ne!==void 0){var Ke=Bl,tt=s;switch(s){case"keypress":if(zl(h)===0)break e;case"keydown":case"keyup":Ke=_;break;case"focusin":tt="focus",Ke=Gl;break;case"focusout":tt="blur",Ke=Gl;break;case"beforeblur":case"afterblur":Ke=Gl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=Wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=ge;break;case ab:case ob:case lb:Ke=na;break;case cb:Ke=tn;break;case"scroll":Ke=Yp;break;case"wheel":Ke=zt;break;case"copy":case"cut":case"paste":Ke=_h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=F}var it=(l&4)!==0,Hn=!it&&s==="scroll",re=it?Ne!==null?Ne+"Capture":null:Ne;it=[];for(var Q=fe,le;Q!==null;){le=Q;var Oe=le.stateNode;if(le.tag===5&&Oe!==null&&(le=Oe,re!==null&&(Oe=Lt(Q,re),Oe!=null&&it.push(Nu(Q,Oe,le)))),Hn)break;Q=Q.return}0<it.length&&(Ne=new Ke(Ne,tt,null,h,Ae),Re.push({event:Ne,listeners:it}))}}if((l&7)===0){e:{if(Ne=s==="mouseover"||s==="pointerover",Ke=s==="mouseout"||s==="pointerout",Ne&&h!==ce&&(tt=h.relatedTarget||h.fromElement)&&(Uo(tt)||tt[ra]))break e;if((Ke||Ne)&&(Ne=Ae.window===Ae?Ae:(Ne=Ae.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Ke?(tt=h.relatedTarget||h.toElement,Ke=fe,tt=tt?Uo(tt):null,tt!==null&&(Hn=Zr(tt),tt!==Hn||tt.tag!==5&&tt.tag!==6)&&(tt=null)):(Ke=null,tt=fe),Ke!==tt)){if(it=Wl,Oe="onMouseLeave",re="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(it=F,Oe="onPointerLeave",re="onPointerEnter",Q="pointer"),Hn=Ke==null?Ne:tc(Ke),le=tt==null?Ne:tc(tt),Ne=new it(Oe,Q+"leave",Ke,h,Ae),Ne.target=Hn,Ne.relatedTarget=le,Oe=null,Uo(Ae)===fe&&(it=new it(re,Q+"enter",tt,h,Ae),it.target=le,it.relatedTarget=Hn,Oe=it),Hn=Oe,Ke&&tt)t:{for(it=Ke,re=tt,Q=0,le=it;le;le=Zl(le))Q++;for(le=0,Oe=re;Oe;Oe=Zl(Oe))le++;for(;0<Q-le;)it=Zl(it),Q--;for(;0<le-Q;)re=Zl(re),le--;for(;Q--;){if(it===re||re!==null&&it===re.alternate)break t;it=Zl(it),re=Zl(re)}it=null}else it=null;Ke!==null&&pb(Re,Ne,Ke,it,!1),tt!==null&&Hn!==null&&pb(Re,Hn,tt,it,!0)}}e:{if(Ne=fe?tc(fe):window,Ke=Ne.nodeName&&Ne.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Ne.type==="file")var ot=UA;else if(K1(Ne))if(Y1)ot=HA;else{ot=zA;var ft=$A}else(Ke=Ne.nodeName)&&Ke.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(ot=BA);if(ot&&(ot=ot(s,fe))){X1(Re,ot,h,Ae);break e}ft&&ft(s,Ne,fe),s==="focusout"&&(ft=Ne._wrapperState)&&ft.controlled&&Ne.type==="number"&&De(Ne,"number",Ne.value)}switch(ft=fe?tc(fe):window,s){case"focusin":(K1(ft)||ft.contentEditable==="true")&&(Ql=ft,eg=fe,ku=null);break;case"focusout":ku=eg=Ql=null;break;case"mousedown":tg=!0;break;case"contextmenu":case"mouseup":case"dragend":tg=!1,ib(Re,h,Ae);break;case"selectionchange":if(GA)break;case"keydown":case"keyup":ib(Re,h,Ae)}var mt;if(Yn)e:{switch(s){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else Yl?q1(s,h)&&(_t="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(_t="onCompositionStart");_t&&(Fo&&h.locale!=="ko"&&(Yl||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Yl&&(mt=yu()):(pi=Ae,$l="value"in pi?pi.value:pi.textContent,Yl=!0)),ft=Ah(fe,_t),0<ft.length&&(_t=new bu(_t,s,null,h,Ae),Re.push({event:_t,listeners:ft}),mt?_t.data=mt:(mt=G1(h),mt!==null&&(_t.data=mt)))),(mt=gi?OA(s,h):LA(s,h))&&(fe=Ah(fe,"onBeforeInput"),0<fe.length&&(Ae=new bu("onBeforeInput","beforeinput",null,h,Ae),Re.push({event:Ae,listeners:fe}),Ae.data=mt))}fb(Re,l)})}function Nu(s,l,h){return{instance:s,listener:l,currentTarget:h}}function Ah(s,l){for(var h=l+"Capture",p=[];s!==null;){var v=s,E=v.stateNode;v.tag===5&&E!==null&&(v=E,E=Lt(s,h),E!=null&&p.unshift(Nu(s,E,v)),E=Lt(s,l),E!=null&&p.push(Nu(s,E,v))),s=s.return}return p}function Zl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function pb(s,l,h,p,v){for(var E=l._reactName,M=[];h!==null&&h!==p;){var z=h,K=z.alternate,fe=z.stateNode;if(K!==null&&K===p)break;z.tag===5&&fe!==null&&(z=fe,v?(K=Lt(h,E),K!=null&&M.unshift(Nu(h,K,z))):v||(K=Lt(h,E),K!=null&&M.push(Nu(h,K,z)))),h=h.return}M.length!==0&&s.push({event:l,listeners:M})}var QA=/\r\n?/g,JA=/\u0000|\uFFFD/g;function gb(s){return(typeof s=="string"?s:""+s).replace(QA,`
`).replace(JA,"")}function Ih(s,l,h){if(l=gb(l),gb(s)!==l&&h)throw Error(n(425))}function Ph(){}var og=null,lg=null;function cg(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ug=typeof setTimeout=="function"?setTimeout:void 0,ZA=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,eI=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(s){return yb.resolve(null).then(s).catch(tI)}:ug;function tI(s){setTimeout(function(){throw s})}function dg(s,l){var h=l,p=0;do{var v=h.nextSibling;if(s.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(p===0){s.removeChild(v),Ki(l);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=v}while(h);Ki(l)}function Ua(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function xb(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}var ec=Math.random().toString(36).slice(2),vs="__reactFiber$"+ec,Cu="__reactProps$"+ec,ra="__reactContainer$"+ec,hg="__reactEvents$"+ec,nI="__reactListeners$"+ec,rI="__reactHandles$"+ec;function Uo(s){var l=s[vs];if(l)return l;for(var h=s.parentNode;h;){if(l=h[ra]||h[vs]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=xb(s);s!==null;){if(h=s[vs])return h;s=xb(s)}return l}s=h,h=s.parentNode}return null}function ju(s){return s=s[vs]||s[ra],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function tc(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Rh(s){return s[Cu]||null}var fg=[],nc=-1;function $a(s){return{current:s}}function yn(s){0>nc||(s.current=fg[nc],fg[nc]=null,nc--)}function dn(s,l){nc++,fg[nc]=s.current,s.current=l}var za={},jr=$a(za),ti=$a(!1),$o=za;function rc(s,l){var h=s.type.contextTypes;if(!h)return za;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var v={},E;for(E in h)v[E]=l[E];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=v),v}function ni(s){return s=s.childContextTypes,s!=null}function Mh(){yn(ti),yn(jr)}function vb(s,l,h){if(jr.current!==za)throw Error(n(168));dn(jr,l),dn(ti,h)}function bb(s,l,h){var p=s.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var v in p)if(!(v in l))throw Error(n(108,ht(s)||"Unknown",v));return ye({},h,p)}function Dh(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||za,$o=jr.current,dn(jr,s),dn(ti,ti.current),!0}function wb(s,l,h){var p=s.stateNode;if(!p)throw Error(n(169));h?(s=bb(s,l,$o),p.__reactInternalMemoizedMergedChildContext=s,yn(ti),yn(jr),dn(jr,s)):yn(ti),dn(ti,h)}var ia=null,Oh=!1,mg=!1;function _b(s){ia===null?ia=[s]:ia.push(s)}function iI(s){Oh=!0,_b(s)}function Ba(){if(!mg&&ia!==null){mg=!0;var s=0,l=Ft;try{var h=ia;for(Ft=1;s<h.length;s++){var p=h[s];do p=p(!0);while(p!==null)}ia=null,Oh=!1}catch(v){throw ia!==null&&(ia=ia.slice(s+1)),Gs(Wi,Ba),v}finally{Ft=l,mg=!1}}return null}var ic=[],sc=0,Lh=null,Vh=0,Ai=[],Ii=0,zo=null,sa=1,aa="";function Bo(s,l){ic[sc++]=Vh,ic[sc++]=Lh,Lh=s,Vh=l}function Eb(s,l,h){Ai[Ii++]=sa,Ai[Ii++]=aa,Ai[Ii++]=zo,zo=s;var p=sa;s=aa;var v=32-yr(p)-1;p&=~(1<<v),h+=1;var E=32-yr(l)+v;if(30<E){var M=v-v%5;E=(p&(1<<M)-1).toString(32),p>>=M,v-=M,sa=1<<32-yr(l)+v|h<<v|p,aa=E+s}else sa=1<<E|h<<v|p,aa=s}function pg(s){s.return!==null&&(Bo(s,1),Eb(s,1,0))}function gg(s){for(;s===Lh;)Lh=ic[--sc],ic[sc]=null,Vh=ic[--sc],ic[sc]=null;for(;s===zo;)zo=Ai[--Ii],Ai[Ii]=null,aa=Ai[--Ii],Ai[Ii]=null,sa=Ai[--Ii],Ai[Ii]=null}var yi=null,xi=null,wn=!1,Qi=null;function kb(s,l){var h=Di(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=s,l=s.deletions,l===null?(s.deletions=[h],s.flags|=16):l.push(h)}function Sb(s,l){switch(s.tag){case 5:var h=s.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,yi=s,xi=Ua(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,yi=s,xi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=zo!==null?{id:sa,overflow:aa}:null,s.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Di(18,null,null,0),h.stateNode=l,h.return=s,s.child=h,yi=s,xi=null,!0):!1;default:return!1}}function yg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function xg(s){if(wn){var l=xi;if(l){var h=l;if(!Sb(s,l)){if(yg(s))throw Error(n(418));l=Ua(h.nextSibling);var p=yi;l&&Sb(s,l)?kb(p,h):(s.flags=s.flags&-4097|2,wn=!1,yi=s)}}else{if(yg(s))throw Error(n(418));s.flags=s.flags&-4097|2,wn=!1,yi=s}}}function Tb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;yi=s}function Fh(s){if(s!==yi)return!1;if(!wn)return Tb(s),wn=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!cg(s.type,s.memoizedProps)),l&&(l=xi)){if(yg(s))throw Nb(),Error(n(418));for(;l;)kb(s,l),l=Ua(l.nextSibling)}if(Tb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(l===0){xi=Ua(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}s=s.nextSibling}xi=null}}else xi=yi?Ua(s.stateNode.nextSibling):null;return!0}function Nb(){for(var s=xi;s;)s=Ua(s.nextSibling)}function ac(){xi=yi=null,wn=!1}function vg(s){Qi===null?Qi=[s]:Qi.push(s)}var sI=V.ReactCurrentBatchConfig;function Au(s,l,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var p=h.stateNode}if(!p)throw Error(n(147,s));var v=p,E=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(M){var z=v.refs;M===null?delete z[E]:z[E]=M},l._stringRef=E,l)}if(typeof s!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,s))}return s}function Uh(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Cb(s){var l=s._init;return l(s._payload)}function jb(s){function l(re,Q){if(s){var le=re.deletions;le===null?(re.deletions=[Q],re.flags|=16):le.push(Q)}}function h(re,Q){if(!s)return null;for(;Q!==null;)l(re,Q),Q=Q.sibling;return null}function p(re,Q){for(re=new Map;Q!==null;)Q.key!==null?re.set(Q.key,Q):re.set(Q.index,Q),Q=Q.sibling;return re}function v(re,Q){return re=Qa(re,Q),re.index=0,re.sibling=null,re}function E(re,Q,le){return re.index=le,s?(le=re.alternate,le!==null?(le=le.index,le<Q?(re.flags|=2,Q):le):(re.flags|=2,Q)):(re.flags|=1048576,Q)}function M(re){return s&&re.alternate===null&&(re.flags|=2),re}function z(re,Q,le,Oe){return Q===null||Q.tag!==6?(Q=u0(le,re.mode,Oe),Q.return=re,Q):(Q=v(Q,le),Q.return=re,Q)}function K(re,Q,le,Oe){var ot=le.type;return ot===D?Ae(re,Q,le.props.children,Oe,le.key):Q!==null&&(Q.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ce&&Cb(ot)===Q.type)?(Oe=v(Q,le.props),Oe.ref=Au(re,Q,le),Oe.return=re,Oe):(Oe=df(le.type,le.key,le.props,null,re.mode,Oe),Oe.ref=Au(re,Q,le),Oe.return=re,Oe)}function fe(re,Q,le,Oe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==le.containerInfo||Q.stateNode.implementation!==le.implementation?(Q=d0(le,re.mode,Oe),Q.return=re,Q):(Q=v(Q,le.children||[]),Q.return=re,Q)}function Ae(re,Q,le,Oe,ot){return Q===null||Q.tag!==7?(Q=Qo(le,re.mode,Oe,ot),Q.return=re,Q):(Q=v(Q,le),Q.return=re,Q)}function Re(re,Q,le){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=u0(""+Q,re.mode,le),Q.return=re,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return le=df(Q.type,Q.key,Q.props,null,re.mode,le),le.ref=Au(re,null,Q),le.return=re,le;case q:return Q=d0(Q,re.mode,le),Q.return=re,Q;case Ce:var Oe=Q._init;return Re(re,Oe(Q._payload),le)}if(st(Q)||ie(Q))return Q=Qo(Q,re.mode,le,null),Q.return=re,Q;Uh(re,Q)}return null}function Ne(re,Q,le,Oe){var ot=Q!==null?Q.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return ot!==null?null:z(re,Q,""+le,Oe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case $:return le.key===ot?K(re,Q,le,Oe):null;case q:return le.key===ot?fe(re,Q,le,Oe):null;case Ce:return ot=le._init,Ne(re,Q,ot(le._payload),Oe)}if(st(le)||ie(le))return ot!==null?null:Ae(re,Q,le,Oe,null);Uh(re,le)}return null}function Ke(re,Q,le,Oe,ot){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return re=re.get(le)||null,z(Q,re,""+Oe,ot);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case $:return re=re.get(Oe.key===null?le:Oe.key)||null,K(Q,re,Oe,ot);case q:return re=re.get(Oe.key===null?le:Oe.key)||null,fe(Q,re,Oe,ot);case Ce:var ft=Oe._init;return Ke(re,Q,le,ft(Oe._payload),ot)}if(st(Oe)||ie(Oe))return re=re.get(le)||null,Ae(Q,re,Oe,ot,null);Uh(Q,Oe)}return null}function tt(re,Q,le,Oe){for(var ot=null,ft=null,mt=Q,_t=Q=0,fr=null;mt!==null&&_t<le.length;_t++){mt.index>_t?(fr=mt,mt=null):fr=mt.sibling;var Kt=Ne(re,mt,le[_t],Oe);if(Kt===null){mt===null&&(mt=fr);break}s&&mt&&Kt.alternate===null&&l(re,mt),Q=E(Kt,Q,_t),ft===null?ot=Kt:ft.sibling=Kt,ft=Kt,mt=fr}if(_t===le.length)return h(re,mt),wn&&Bo(re,_t),ot;if(mt===null){for(;_t<le.length;_t++)mt=Re(re,le[_t],Oe),mt!==null&&(Q=E(mt,Q,_t),ft===null?ot=mt:ft.sibling=mt,ft=mt);return wn&&Bo(re,_t),ot}for(mt=p(re,mt);_t<le.length;_t++)fr=Ke(mt,re,_t,le[_t],Oe),fr!==null&&(s&&fr.alternate!==null&&mt.delete(fr.key===null?_t:fr.key),Q=E(fr,Q,_t),ft===null?ot=fr:ft.sibling=fr,ft=fr);return s&&mt.forEach(function(Ja){return l(re,Ja)}),wn&&Bo(re,_t),ot}function it(re,Q,le,Oe){var ot=ie(le);if(typeof ot!="function")throw Error(n(150));if(le=ot.call(le),le==null)throw Error(n(151));for(var ft=ot=null,mt=Q,_t=Q=0,fr=null,Kt=le.next();mt!==null&&!Kt.done;_t++,Kt=le.next()){mt.index>_t?(fr=mt,mt=null):fr=mt.sibling;var Ja=Ne(re,mt,Kt.value,Oe);if(Ja===null){mt===null&&(mt=fr);break}s&&mt&&Ja.alternate===null&&l(re,mt),Q=E(Ja,Q,_t),ft===null?ot=Ja:ft.sibling=Ja,ft=Ja,mt=fr}if(Kt.done)return h(re,mt),wn&&Bo(re,_t),ot;if(mt===null){for(;!Kt.done;_t++,Kt=le.next())Kt=Re(re,Kt.value,Oe),Kt!==null&&(Q=E(Kt,Q,_t),ft===null?ot=Kt:ft.sibling=Kt,ft=Kt);return wn&&Bo(re,_t),ot}for(mt=p(re,mt);!Kt.done;_t++,Kt=le.next())Kt=Ke(mt,re,_t,Kt.value,Oe),Kt!==null&&(s&&Kt.alternate!==null&&mt.delete(Kt.key===null?_t:Kt.key),Q=E(Kt,Q,_t),ft===null?ot=Kt:ft.sibling=Kt,ft=Kt);return s&&mt.forEach(function(VI){return l(re,VI)}),wn&&Bo(re,_t),ot}function Hn(re,Q,le,Oe){if(typeof le=="object"&&le!==null&&le.type===D&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case $:e:{for(var ot=le.key,ft=Q;ft!==null;){if(ft.key===ot){if(ot=le.type,ot===D){if(ft.tag===7){h(re,ft.sibling),Q=v(ft,le.props.children),Q.return=re,re=Q;break e}}else if(ft.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ce&&Cb(ot)===ft.type){h(re,ft.sibling),Q=v(ft,le.props),Q.ref=Au(re,ft,le),Q.return=re,re=Q;break e}h(re,ft);break}else l(re,ft);ft=ft.sibling}le.type===D?(Q=Qo(le.props.children,re.mode,Oe,le.key),Q.return=re,re=Q):(Oe=df(le.type,le.key,le.props,null,re.mode,Oe),Oe.ref=Au(re,Q,le),Oe.return=re,re=Oe)}return M(re);case q:e:{for(ft=le.key;Q!==null;){if(Q.key===ft)if(Q.tag===4&&Q.stateNode.containerInfo===le.containerInfo&&Q.stateNode.implementation===le.implementation){h(re,Q.sibling),Q=v(Q,le.children||[]),Q.return=re,re=Q;break e}else{h(re,Q);break}else l(re,Q);Q=Q.sibling}Q=d0(le,re.mode,Oe),Q.return=re,re=Q}return M(re);case Ce:return ft=le._init,Hn(re,Q,ft(le._payload),Oe)}if(st(le))return tt(re,Q,le,Oe);if(ie(le))return it(re,Q,le,Oe);Uh(re,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,Q!==null&&Q.tag===6?(h(re,Q.sibling),Q=v(Q,le),Q.return=re,re=Q):(h(re,Q),Q=u0(le,re.mode,Oe),Q.return=re,re=Q),M(re)):h(re,Q)}return Hn}var oc=jb(!0),Ab=jb(!1),$h=$a(null),zh=null,lc=null,bg=null;function wg(){bg=lc=zh=null}function _g(s){var l=$h.current;yn($h),s._currentValue=l}function Eg(s,l,h){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===h)break;s=s.return}}function cc(s,l){zh=s,bg=lc=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(ri=!0),s.firstContext=null)}function Pi(s){var l=s._currentValue;if(bg!==s)if(s={context:s,memoizedValue:l,next:null},lc===null){if(zh===null)throw Error(n(308));lc=s,zh.dependencies={lanes:0,firstContext:s}}else lc=lc.next=s;return l}var Ho=null;function kg(s){Ho===null?Ho=[s]:Ho.push(s)}function Ib(s,l,h,p){var v=l.interleaved;return v===null?(h.next=h,kg(l)):(h.next=v.next,v.next=h),l.interleaved=h,oa(s,p)}function oa(s,l){s.lanes|=l;var h=s.alternate;for(h!==null&&(h.lanes|=l),h=s,s=s.return;s!==null;)s.childLanes|=l,h=s.alternate,h!==null&&(h.childLanes|=l),h=s,s=s.return;return h.tag===3?h.stateNode:null}var Ha=!1;function Sg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pb(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function la(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Wa(s,l,h){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Gt&2)!==0){var v=p.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),p.pending=l,oa(s,h)}return v=p.interleaved,v===null?(l.next=l,kg(p)):(l.next=v.next,v.next=l),p.interleaved=l,oa(s,h)}function Bh(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var p=l.lanes;p&=s.pendingLanes,h|=p,l.lanes=h,fs(s,h)}}function Rb(s,l){var h=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var M={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};E===null?v=E=M:E=E.next=M,h=h.next}while(h!==null);E===null?v=E=l:E=E.next=l}else v=E=l;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:p.shared,effects:p.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}function Hh(s,l,h,p){var v=s.updateQueue;Ha=!1;var E=v.firstBaseUpdate,M=v.lastBaseUpdate,z=v.shared.pending;if(z!==null){v.shared.pending=null;var K=z,fe=K.next;K.next=null,M===null?E=fe:M.next=fe,M=K;var Ae=s.alternate;Ae!==null&&(Ae=Ae.updateQueue,z=Ae.lastBaseUpdate,z!==M&&(z===null?Ae.firstBaseUpdate=fe:z.next=fe,Ae.lastBaseUpdate=K))}if(E!==null){var Re=v.baseState;M=0,Ae=fe=K=null,z=E;do{var Ne=z.lane,Ke=z.eventTime;if((p&Ne)===Ne){Ae!==null&&(Ae=Ae.next={eventTime:Ke,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var tt=s,it=z;switch(Ne=l,Ke=h,it.tag){case 1:if(tt=it.payload,typeof tt=="function"){Re=tt.call(Ke,Re,Ne);break e}Re=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=it.payload,Ne=typeof tt=="function"?tt.call(Ke,Re,Ne):tt,Ne==null)break e;Re=ye({},Re,Ne);break e;case 2:Ha=!0}}z.callback!==null&&z.lane!==0&&(s.flags|=64,Ne=v.effects,Ne===null?v.effects=[z]:Ne.push(z))}else Ke={eventTime:Ke,lane:Ne,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ae===null?(fe=Ae=Ke,K=Re):Ae=Ae.next=Ke,M|=Ne;if(z=z.next,z===null){if(z=v.shared.pending,z===null)break;Ne=z,z=Ne.next,Ne.next=null,v.lastBaseUpdate=Ne,v.shared.pending=null}}while(!0);if(Ae===null&&(K=Re),v.baseState=K,v.firstBaseUpdate=fe,v.lastBaseUpdate=Ae,l=v.shared.interleaved,l!==null){v=l;do M|=v.lane,v=v.next;while(v!==l)}else E===null&&(v.shared.lanes=0);Go|=M,s.lanes=M,s.memoizedState=Re}}function Mb(s,l,h){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var p=s[l],v=p.callback;if(v!==null){if(p.callback=null,p=h,typeof v!="function")throw Error(n(191,v));v.call(p)}}}var Iu={},bs=$a(Iu),Pu=$a(Iu),Ru=$a(Iu);function Wo(s){if(s===Iu)throw Error(n(174));return s}function Tg(s,l){switch(dn(Ru,l),dn(Pu,s),dn(bs,Iu),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:je(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=je(l,s)}yn(bs),dn(bs,l)}function uc(){yn(bs),yn(Pu),yn(Ru)}function Db(s){Wo(Ru.current);var l=Wo(bs.current),h=je(l,s.type);l!==h&&(dn(Pu,s),dn(bs,h))}function Ng(s){Pu.current===s&&(yn(bs),yn(Pu))}var Nn=$a(0);function Wh(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Cg=[];function jg(){for(var s=0;s<Cg.length;s++)Cg[s]._workInProgressVersionPrimary=null;Cg.length=0}var qh=V.ReactCurrentDispatcher,Ag=V.ReactCurrentBatchConfig,qo=0,Cn=null,ar=null,dr=null,Gh=!1,Mu=!1,Du=0,aI=0;function Ar(){throw Error(n(321))}function Ig(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!Yi(s[h],l[h]))return!1;return!0}function Pg(s,l,h,p,v,E){if(qo=E,Cn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,qh.current=s===null||s.memoizedState===null?uI:dI,s=h(p,v),Mu){E=0;do{if(Mu=!1,Du=0,25<=E)throw Error(n(301));E+=1,dr=ar=null,l.updateQueue=null,qh.current=hI,s=h(p,v)}while(Mu)}if(qh.current=Yh,l=ar!==null&&ar.next!==null,qo=0,dr=ar=Cn=null,Gh=!1,l)throw Error(n(300));return s}function Rg(){var s=Du!==0;return Du=0,s}function ws(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Cn.memoizedState=dr=s:dr=dr.next=s,dr}function Ri(){if(ar===null){var s=Cn.alternate;s=s!==null?s.memoizedState:null}else s=ar.next;var l=dr===null?Cn.memoizedState:dr.next;if(l!==null)dr=l,ar=s;else{if(s===null)throw Error(n(310));ar=s,s={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},dr===null?Cn.memoizedState=dr=s:dr=dr.next=s}return dr}function Ou(s,l){return typeof l=="function"?l(s):l}function Mg(s){var l=Ri(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var p=ar,v=p.baseQueue,E=h.pending;if(E!==null){if(v!==null){var M=v.next;v.next=E.next,E.next=M}p.baseQueue=v=E,h.pending=null}if(v!==null){E=v.next,p=p.baseState;var z=M=null,K=null,fe=E;do{var Ae=fe.lane;if((qo&Ae)===Ae)K!==null&&(K=K.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),p=fe.hasEagerState?fe.eagerState:s(p,fe.action);else{var Re={lane:Ae,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};K===null?(z=K=Re,M=p):K=K.next=Re,Cn.lanes|=Ae,Go|=Ae}fe=fe.next}while(fe!==null&&fe!==E);K===null?M=p:K.next=z,Yi(p,l.memoizedState)||(ri=!0),l.memoizedState=p,l.baseState=M,l.baseQueue=K,h.lastRenderedState=p}if(s=h.interleaved,s!==null){v=s;do E=v.lane,Cn.lanes|=E,Go|=E,v=v.next;while(v!==s)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Dg(s){var l=Ri(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var p=h.dispatch,v=h.pending,E=l.memoizedState;if(v!==null){h.pending=null;var M=v=v.next;do E=s(E,M.action),M=M.next;while(M!==v);Yi(E,l.memoizedState)||(ri=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,p]}function Ob(){}function Lb(s,l){var h=Cn,p=Ri(),v=l(),E=!Yi(p.memoizedState,v);if(E&&(p.memoizedState=v,ri=!0),p=p.queue,Og(Ub.bind(null,h,p,s),[s]),p.getSnapshot!==l||E||dr!==null&&dr.memoizedState.tag&1){if(h.flags|=2048,Lu(9,Fb.bind(null,h,p,v,l),void 0,null),hr===null)throw Error(n(349));(qo&30)!==0||Vb(h,l,v)}return v}function Vb(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=Cn.updateQueue,l===null?(l={lastEffect:null,stores:null},Cn.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function Fb(s,l,h,p){l.value=h,l.getSnapshot=p,$b(l)&&zb(s)}function Ub(s,l,h){return h(function(){$b(l)&&zb(s)})}function $b(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!Yi(s,h)}catch{return!0}}function zb(s){var l=oa(s,1);l!==null&&ts(l,s,1,-1)}function Bb(s){var l=ws();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:s},l.queue=s,s=s.dispatch=cI.bind(null,Cn,s),[l.memoizedState,s]}function Lu(s,l,h,p){return s={tag:s,create:l,destroy:h,deps:p,next:null},l=Cn.updateQueue,l===null?(l={lastEffect:null,stores:null},Cn.updateQueue=l,l.lastEffect=s.next=s):(h=l.lastEffect,h===null?l.lastEffect=s.next=s:(p=h.next,h.next=s,s.next=p,l.lastEffect=s)),s}function Hb(){return Ri().memoizedState}function Kh(s,l,h,p){var v=ws();Cn.flags|=s,v.memoizedState=Lu(1|l,h,void 0,p===void 0?null:p)}function Xh(s,l,h,p){var v=Ri();p=p===void 0?null:p;var E=void 0;if(ar!==null){var M=ar.memoizedState;if(E=M.destroy,p!==null&&Ig(p,M.deps)){v.memoizedState=Lu(l,h,E,p);return}}Cn.flags|=s,v.memoizedState=Lu(1|l,h,E,p)}function Wb(s,l){return Kh(8390656,8,s,l)}function Og(s,l){return Xh(2048,8,s,l)}function qb(s,l){return Xh(4,2,s,l)}function Gb(s,l){return Xh(4,4,s,l)}function Kb(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Xb(s,l,h){return h=h!=null?h.concat([s]):null,Xh(4,4,Kb.bind(null,l,s),h)}function Lg(){}function Yb(s,l){var h=Ri();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&Ig(l,p[1])?p[0]:(h.memoizedState=[s,l],s)}function Qb(s,l){var h=Ri();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&Ig(l,p[1])?p[0]:(s=s(),h.memoizedState=[s,l],s)}function Jb(s,l,h){return(qo&21)===0?(s.baseState&&(s.baseState=!1,ri=!0),s.memoizedState=h):(Yi(h,l)||(h=Qs(),Cn.lanes|=h,Go|=h,s.baseState=!0),l)}function oI(s,l){var h=Ft;Ft=h!==0&&4>h?h:4,s(!0);var p=Ag.transition;Ag.transition={};try{s(!1),l()}finally{Ft=h,Ag.transition=p}}function Zb(){return Ri().memoizedState}function lI(s,l,h){var p=Xa(s);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},ew(s))tw(l,h);else if(h=Ib(s,l,h,p),h!==null){var v=Gr();ts(h,s,p,v),nw(h,l,p)}}function cI(s,l,h){var p=Xa(s),v={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(ew(s))tw(l,v);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var M=l.lastRenderedState,z=E(M,h);if(v.hasEagerState=!0,v.eagerState=z,Yi(z,M)){var K=l.interleaved;K===null?(v.next=v,kg(l)):(v.next=K.next,K.next=v),l.interleaved=v;return}}catch{}finally{}h=Ib(s,l,v,p),h!==null&&(v=Gr(),ts(h,s,p,v),nw(h,l,p))}}function ew(s){var l=s.alternate;return s===Cn||l!==null&&l===Cn}function tw(s,l){Mu=Gh=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function nw(s,l,h){if((h&4194240)!==0){var p=l.lanes;p&=s.pendingLanes,h|=p,l.lanes=h,fs(s,h)}}var Yh={readContext:Pi,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},uI={readContext:Pi,useCallback:function(s,l){return ws().memoizedState=[s,l===void 0?null:l],s},useContext:Pi,useEffect:Wb,useImperativeHandle:function(s,l,h){return h=h!=null?h.concat([s]):null,Kh(4194308,4,Kb.bind(null,l,s),h)},useLayoutEffect:function(s,l){return Kh(4194308,4,s,l)},useInsertionEffect:function(s,l){return Kh(4,2,s,l)},useMemo:function(s,l){var h=ws();return l=l===void 0?null:l,s=s(),h.memoizedState=[s,l],s},useReducer:function(s,l,h){var p=ws();return l=h!==void 0?h(l):l,p.memoizedState=p.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},p.queue=s,s=s.dispatch=lI.bind(null,Cn,s),[p.memoizedState,s]},useRef:function(s){var l=ws();return s={current:s},l.memoizedState=s},useState:Bb,useDebugValue:Lg,useDeferredValue:function(s){return ws().memoizedState=s},useTransition:function(){var s=Bb(!1),l=s[0];return s=oI.bind(null,s[1]),ws().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,h){var p=Cn,v=ws();if(wn){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),hr===null)throw Error(n(349));(qo&30)!==0||Vb(p,l,h)}v.memoizedState=h;var E={value:h,getSnapshot:l};return v.queue=E,Wb(Ub.bind(null,p,E,s),[s]),p.flags|=2048,Lu(9,Fb.bind(null,p,E,h,l),void 0,null),h},useId:function(){var s=ws(),l=hr.identifierPrefix;if(wn){var h=aa,p=sa;h=(p&~(1<<32-yr(p)-1)).toString(32)+h,l=":"+l+"R"+h,h=Du++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=aI++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},dI={readContext:Pi,useCallback:Yb,useContext:Pi,useEffect:Og,useImperativeHandle:Xb,useInsertionEffect:qb,useLayoutEffect:Gb,useMemo:Qb,useReducer:Mg,useRef:Hb,useState:function(){return Mg(Ou)},useDebugValue:Lg,useDeferredValue:function(s){var l=Ri();return Jb(l,ar.memoizedState,s)},useTransition:function(){var s=Mg(Ou)[0],l=Ri().memoizedState;return[s,l]},useMutableSource:Ob,useSyncExternalStore:Lb,useId:Zb,unstable_isNewReconciler:!1},hI={readContext:Pi,useCallback:Yb,useContext:Pi,useEffect:Og,useImperativeHandle:Xb,useInsertionEffect:qb,useLayoutEffect:Gb,useMemo:Qb,useReducer:Dg,useRef:Hb,useState:function(){return Dg(Ou)},useDebugValue:Lg,useDeferredValue:function(s){var l=Ri();return ar===null?l.memoizedState=s:Jb(l,ar.memoizedState,s)},useTransition:function(){var s=Dg(Ou)[0],l=Ri().memoizedState;return[s,l]},useMutableSource:Ob,useSyncExternalStore:Lb,useId:Zb,unstable_isNewReconciler:!1};function Ji(s,l){if(s&&s.defaultProps){l=ye({},l),s=s.defaultProps;for(var h in s)l[h]===void 0&&(l[h]=s[h]);return l}return l}function Vg(s,l,h,p){l=s.memoizedState,h=h(p,l),h=h==null?l:ye({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Qh={isMounted:function(s){return(s=s._reactInternals)?Zr(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var p=Gr(),v=Xa(s),E=la(p,v);E.payload=l,h!=null&&(E.callback=h),l=Wa(s,E,v),l!==null&&(ts(l,s,v,p),Bh(l,s,v))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var p=Gr(),v=Xa(s),E=la(p,v);E.tag=1,E.payload=l,h!=null&&(E.callback=h),l=Wa(s,E,v),l!==null&&(ts(l,s,v,p),Bh(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=Gr(),p=Xa(s),v=la(h,p);v.tag=2,l!=null&&(v.callback=l),l=Wa(s,v,p),l!==null&&(ts(l,s,p,h),Bh(l,s,p))}};function rw(s,l,h,p,v,E,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,E,M):l.prototype&&l.prototype.isPureReactComponent?!Eu(h,p)||!Eu(v,E):!0}function iw(s,l,h){var p=!1,v=za,E=l.contextType;return typeof E=="object"&&E!==null?E=Pi(E):(v=ni(l)?$o:jr.current,p=l.contextTypes,E=(p=p!=null)?rc(s,v):za),l=new l(h,E),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Qh,s.stateNode=l,l._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=E),l}function sw(s,l,h,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,p),l.state!==s&&Qh.enqueueReplaceState(l,l.state,null)}function Fg(s,l,h,p){var v=s.stateNode;v.props=h,v.state=s.memoizedState,v.refs={},Sg(s);var E=l.contextType;typeof E=="object"&&E!==null?v.context=Pi(E):(E=ni(l)?$o:jr.current,v.context=rc(s,E)),v.state=s.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(Vg(s,l,E,h),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Qh.enqueueReplaceState(v,v.state,null),Hh(s,h,v,p),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function dc(s,l){try{var h="",p=l;do h+=We(p),p=p.return;while(p);var v=h}catch(E){v=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:l,stack:v,digest:null}}function Ug(s,l,h){return{value:s,source:null,stack:h??null,digest:l??null}}function $g(s,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var fI=typeof WeakMap=="function"?WeakMap:Map;function aw(s,l,h){h=la(-1,h),h.tag=3,h.payload={element:null};var p=l.value;return h.callback=function(){sf||(sf=!0,n0=p),$g(s,l)},h}function ow(s,l,h){h=la(-1,h),h.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var v=l.value;h.payload=function(){return p(v)},h.callback=function(){$g(s,l)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(h.callback=function(){$g(s,l),typeof p!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),h}function lw(s,l,h){var p=s.pingCache;if(p===null){p=s.pingCache=new fI;var v=new Set;p.set(l,v)}else v=p.get(l),v===void 0&&(v=new Set,p.set(l,v));v.has(h)||(v.add(h),s=NI.bind(null,s,l,h),l.then(s,s))}function cw(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function uw(s,l,h,p,v){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=la(-1,1),l.tag=2,Wa(h,l,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var mI=V.ReactCurrentOwner,ri=!1;function qr(s,l,h,p){l.child=s===null?Ab(l,null,h,p):oc(l,s.child,h,p)}function dw(s,l,h,p,v){h=h.render;var E=l.ref;return cc(l,v),p=Pg(s,l,h,p,E,v),h=Rg(),s!==null&&!ri?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,ca(s,l,v)):(wn&&h&&pg(l),l.flags|=1,qr(s,l,p,v),l.child)}function hw(s,l,h,p,v){if(s===null){var E=h.type;return typeof E=="function"&&!c0(E)&&E.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=E,fw(s,l,E,p,v)):(s=df(h.type,null,p,l,l.mode,v),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,(s.lanes&v)===0){var M=E.memoizedProps;if(h=h.compare,h=h!==null?h:Eu,h(M,p)&&s.ref===l.ref)return ca(s,l,v)}return l.flags|=1,s=Qa(E,p),s.ref=l.ref,s.return=l,l.child=s}function fw(s,l,h,p,v){if(s!==null){var E=s.memoizedProps;if(Eu(E,p)&&s.ref===l.ref)if(ri=!1,l.pendingProps=p=E,(s.lanes&v)!==0)(s.flags&131072)!==0&&(ri=!0);else return l.lanes=s.lanes,ca(s,l,v)}return zg(s,l,h,p,v)}function mw(s,l,h){var p=l.pendingProps,v=p.children,E=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(fc,vi),vi|=h;else{if((h&1073741824)===0)return s=E!==null?E.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,dn(fc,vi),vi|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=E!==null?E.baseLanes:h,dn(fc,vi),vi|=p}else E!==null?(p=E.baseLanes|h,l.memoizedState=null):p=h,dn(fc,vi),vi|=p;return qr(s,l,v,h),l.child}function pw(s,l){var h=l.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function zg(s,l,h,p,v){var E=ni(h)?$o:jr.current;return E=rc(l,E),cc(l,v),h=Pg(s,l,h,p,E,v),p=Rg(),s!==null&&!ri?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,ca(s,l,v)):(wn&&p&&pg(l),l.flags|=1,qr(s,l,h,v),l.child)}function gw(s,l,h,p,v){if(ni(h)){var E=!0;Dh(l)}else E=!1;if(cc(l,v),l.stateNode===null)Zh(s,l),iw(l,h,p),Fg(l,h,p,v),p=!0;else if(s===null){var M=l.stateNode,z=l.memoizedProps;M.props=z;var K=M.context,fe=h.contextType;typeof fe=="object"&&fe!==null?fe=Pi(fe):(fe=ni(h)?$o:jr.current,fe=rc(l,fe));var Ae=h.getDerivedStateFromProps,Re=typeof Ae=="function"||typeof M.getSnapshotBeforeUpdate=="function";Re||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==p||K!==fe)&&sw(l,M,p,fe),Ha=!1;var Ne=l.memoizedState;M.state=Ne,Hh(l,p,M,v),K=l.memoizedState,z!==p||Ne!==K||ti.current||Ha?(typeof Ae=="function"&&(Vg(l,h,Ae,p),K=l.memoizedState),(z=Ha||rw(l,h,z,p,Ne,K,fe))?(Re||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=K),M.props=p,M.state=K,M.context=fe,p=z):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{M=l.stateNode,Pb(s,l),z=l.memoizedProps,fe=l.type===l.elementType?z:Ji(l.type,z),M.props=fe,Re=l.pendingProps,Ne=M.context,K=h.contextType,typeof K=="object"&&K!==null?K=Pi(K):(K=ni(h)?$o:jr.current,K=rc(l,K));var Ke=h.getDerivedStateFromProps;(Ae=typeof Ke=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(z!==Re||Ne!==K)&&sw(l,M,p,K),Ha=!1,Ne=l.memoizedState,M.state=Ne,Hh(l,p,M,v);var tt=l.memoizedState;z!==Re||Ne!==tt||ti.current||Ha?(typeof Ke=="function"&&(Vg(l,h,Ke,p),tt=l.memoizedState),(fe=Ha||rw(l,h,fe,p,Ne,tt,K)||!1)?(Ae||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(p,tt,K),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(p,tt,K)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=tt),M.props=p,M.state=tt,M.context=K,p=fe):(typeof M.componentDidUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=1024),p=!1)}return Bg(s,l,h,p,E,v)}function Bg(s,l,h,p,v,E){pw(s,l);var M=(l.flags&128)!==0;if(!p&&!M)return v&&wb(l,h,!1),ca(s,l,E);p=l.stateNode,mI.current=l;var z=M&&typeof h.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,s!==null&&M?(l.child=oc(l,s.child,null,E),l.child=oc(l,null,z,E)):qr(s,l,z,E),l.memoizedState=p.state,v&&wb(l,h,!0),l.child}function yw(s){var l=s.stateNode;l.pendingContext?vb(s,l.pendingContext,l.pendingContext!==l.context):l.context&&vb(s,l.context,!1),Tg(s,l.containerInfo)}function xw(s,l,h,p,v){return ac(),vg(v),l.flags|=256,qr(s,l,h,p),l.child}var Hg={dehydrated:null,treeContext:null,retryLane:0};function Wg(s){return{baseLanes:s,cachePool:null,transitions:null}}function vw(s,l,h){var p=l.pendingProps,v=Nn.current,E=!1,M=(l.flags&128)!==0,z;if((z=M)||(z=s!==null&&s.memoizedState===null?!1:(v&2)!==0),z?(E=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),dn(Nn,v&1),s===null)return xg(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=p.children,s=p.fallback,E?(p=l.mode,E=l.child,M={mode:"hidden",children:M},(p&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=M):E=hf(M,p,0,null),s=Qo(s,p,h,null),E.return=l,s.return=l,E.sibling=s,l.child=E,l.child.memoizedState=Wg(h),l.memoizedState=Hg,s):qg(l,M));if(v=s.memoizedState,v!==null&&(z=v.dehydrated,z!==null))return pI(s,l,M,p,z,v,h);if(E){E=p.fallback,M=l.mode,v=s.child,z=v.sibling;var K={mode:"hidden",children:p.children};return(M&1)===0&&l.child!==v?(p=l.child,p.childLanes=0,p.pendingProps=K,l.deletions=null):(p=Qa(v,K),p.subtreeFlags=v.subtreeFlags&14680064),z!==null?E=Qa(z,E):(E=Qo(E,M,h,null),E.flags|=2),E.return=l,p.return=l,p.sibling=E,l.child=p,p=E,E=l.child,M=s.child.memoizedState,M=M===null?Wg(h):{baseLanes:M.baseLanes|h,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=s.childLanes&~h,l.memoizedState=Hg,p}return E=s.child,s=E.sibling,p=Qa(E,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=h),p.return=l,p.sibling=null,s!==null&&(h=l.deletions,h===null?(l.deletions=[s],l.flags|=16):h.push(s)),l.child=p,l.memoizedState=null,p}function qg(s,l){return l=hf({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Jh(s,l,h,p){return p!==null&&vg(p),oc(l,s.child,null,h),s=qg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function pI(s,l,h,p,v,E,M){if(h)return l.flags&256?(l.flags&=-257,p=Ug(Error(n(422))),Jh(s,l,M,p)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(E=p.fallback,v=l.mode,p=hf({mode:"visible",children:p.children},v,0,null),E=Qo(E,v,M,null),E.flags|=2,p.return=l,E.return=l,p.sibling=E,l.child=p,(l.mode&1)!==0&&oc(l,s.child,null,M),l.child.memoizedState=Wg(M),l.memoizedState=Hg,E);if((l.mode&1)===0)return Jh(s,l,M,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var z=p.dgst;return p=z,E=Error(n(419)),p=Ug(E,p,void 0),Jh(s,l,M,p)}if(z=(M&s.childLanes)!==0,ri||z){if(p=hr,p!==null){switch(M&-M){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|M))!==0?0:v,v!==0&&v!==E.retryLane&&(E.retryLane=v,oa(s,v),ts(p,s,v,-1))}return l0(),p=Ug(Error(n(421))),Jh(s,l,M,p)}return v.data==="$?"?(l.flags|=128,l.child=s.child,l=CI.bind(null,s),v._reactRetry=l,null):(s=E.treeContext,xi=Ua(v.nextSibling),yi=l,wn=!0,Qi=null,s!==null&&(Ai[Ii++]=sa,Ai[Ii++]=aa,Ai[Ii++]=zo,sa=s.id,aa=s.overflow,zo=l),l=qg(l,p.children),l.flags|=4096,l)}function bw(s,l,h){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),Eg(s.return,l,h)}function Gg(s,l,h,p,v){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=h,E.tailMode=v)}function ww(s,l,h){var p=l.pendingProps,v=p.revealOrder,E=p.tail;if(qr(s,l,p.children,h),p=Nn.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&bw(s,h,l);else if(s.tag===19)bw(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(dn(Nn,p),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)s=h.alternate,s!==null&&Wh(s)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),Gg(l,!1,v,h,E);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(s=v.alternate,s!==null&&Wh(s)===null){l.child=v;break}s=v.sibling,v.sibling=h,h=v,v=s}Gg(l,!0,h,null,E);break;case"together":Gg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Zh(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function ca(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),Go|=l.lanes,(h&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,h=Qa(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=Qa(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function gI(s,l,h){switch(l.tag){case 3:yw(l),ac();break;case 5:Db(l);break;case 1:ni(l.type)&&Dh(l);break;case 4:Tg(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,v=l.memoizedProps.value;dn($h,p._currentValue),p._currentValue=v;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(dn(Nn,Nn.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?vw(s,l,h):(dn(Nn,Nn.current&1),s=ca(s,l,h),s!==null?s.sibling:null);dn(Nn,Nn.current&1);break;case 19:if(p=(h&l.childLanes)!==0,(s.flags&128)!==0){if(p)return ww(s,l,h);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),dn(Nn,Nn.current),p)break;return null;case 22:case 23:return l.lanes=0,mw(s,l,h)}return ca(s,l,h)}var _w,Kg,Ew,kw;_w=function(s,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Kg=function(){},Ew=function(s,l,h,p){var v=s.memoizedProps;if(v!==p){s=l.stateNode,Wo(bs.current);var E=null;switch(h){case"input":v=Rt(s,v),p=Rt(s,p),E=[];break;case"select":v=ye({},v,{value:void 0}),p=ye({},p,{value:void 0}),E=[];break;case"textarea":v=Qe(s,v),p=Qe(s,p),E=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Ph)}G(h,p);var M;h=null;for(fe in v)if(!p.hasOwnProperty(fe)&&v.hasOwnProperty(fe)&&v[fe]!=null)if(fe==="style"){var z=v[fe];for(M in z)z.hasOwnProperty(M)&&(h||(h={}),h[M]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(i.hasOwnProperty(fe)?E||(E=[]):(E=E||[]).push(fe,null));for(fe in p){var K=p[fe];if(z=v!=null?v[fe]:void 0,p.hasOwnProperty(fe)&&K!==z&&(K!=null||z!=null))if(fe==="style")if(z){for(M in z)!z.hasOwnProperty(M)||K&&K.hasOwnProperty(M)||(h||(h={}),h[M]="");for(M in K)K.hasOwnProperty(M)&&z[M]!==K[M]&&(h||(h={}),h[M]=K[M])}else h||(E||(E=[]),E.push(fe,h)),h=K;else fe==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,z=z?z.__html:void 0,K!=null&&z!==K&&(E=E||[]).push(fe,K)):fe==="children"?typeof K!="string"&&typeof K!="number"||(E=E||[]).push(fe,""+K):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(fe)?(K!=null&&fe==="onScroll"&&gn("scroll",s),E||z===K||(E=[])):(E=E||[]).push(fe,K))}h&&(E=E||[]).push("style",h);var fe=E;(l.updateQueue=fe)&&(l.flags|=4)}},kw=function(s,l,h,p){h!==p&&(l.flags|=4)};function Vu(s,l){if(!wn)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Ir(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,p=0;if(l)for(var v=s.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=p,s.childLanes=h,l}function yI(s,l,h){var p=l.pendingProps;switch(gg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(l),null;case 1:return ni(l.type)&&Mh(),Ir(l),null;case 3:return p=l.stateNode,uc(),yn(ti),yn(jr),jg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Fh(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Qi!==null&&(s0(Qi),Qi=null))),Kg(s,l),Ir(l),null;case 5:Ng(l);var v=Wo(Ru.current);if(h=l.type,s!==null&&l.stateNode!=null)Ew(s,l,h,p,v),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(n(166));return Ir(l),null}if(s=Wo(bs.current),Fh(l)){p=l.stateNode,h=l.type;var E=l.memoizedProps;switch(p[vs]=l,p[Cu]=E,s=(l.mode&1)!==0,h){case"dialog":gn("cancel",p),gn("close",p);break;case"iframe":case"object":case"embed":gn("load",p);break;case"video":case"audio":for(v=0;v<Su.length;v++)gn(Su[v],p);break;case"source":gn("error",p);break;case"img":case"image":case"link":gn("error",p),gn("load",p);break;case"details":gn("toggle",p);break;case"input":At(p,E),gn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!E.multiple},gn("invalid",p);break;case"textarea":dt(p,E),gn("invalid",p)}G(h,E),v=null;for(var M in E)if(E.hasOwnProperty(M)){var z=E[M];M==="children"?typeof z=="string"?p.textContent!==z&&(E.suppressHydrationWarning!==!0&&Ih(p.textContent,z,s),v=["children",z]):typeof z=="number"&&p.textContent!==""+z&&(E.suppressHydrationWarning!==!0&&Ih(p.textContent,z,s),v=["children",""+z]):i.hasOwnProperty(M)&&z!=null&&M==="onScroll"&&gn("scroll",p)}switch(h){case"input":xt(p),He(p,E,!0);break;case"textarea":xt(p),X(p);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(p.onclick=Ph)}p=v,l.updateQueue=p,p!==null&&(l.flags|=4)}else{M=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=me(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=M.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=M.createElement(h,{is:p.is}):(s=M.createElement(h),h==="select"&&(M=s,p.multiple?M.multiple=!0:p.size&&(M.size=p.size))):s=M.createElementNS(s,h),s[vs]=l,s[Cu]=p,_w(s,l,!1,!1),l.stateNode=s;e:{switch(M=pe(h,p),h){case"dialog":gn("cancel",s),gn("close",s),v=p;break;case"iframe":case"object":case"embed":gn("load",s),v=p;break;case"video":case"audio":for(v=0;v<Su.length;v++)gn(Su[v],s);v=p;break;case"source":gn("error",s),v=p;break;case"img":case"image":case"link":gn("error",s),gn("load",s),v=p;break;case"details":gn("toggle",s),v=p;break;case"input":At(s,p),v=Rt(s,p),gn("invalid",s);break;case"option":v=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},v=ye({},p,{value:void 0}),gn("invalid",s);break;case"textarea":dt(s,p),v=Qe(s,p),gn("invalid",s);break;default:v=p}G(h,v),z=v;for(E in z)if(z.hasOwnProperty(E)){var K=z[E];E==="style"?Ot(s,K):E==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&ke(s,K)):E==="children"?typeof K=="string"?(h!=="textarea"||K!=="")&&Se(s,K):typeof K=="number"&&Se(s,""+K):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?K!=null&&E==="onScroll"&&gn("scroll",s):K!=null&&I(s,E,K,M))}switch(h){case"input":xt(s),He(s,p,!1);break;case"textarea":xt(s),X(s);break;case"option":p.value!=null&&s.setAttribute("value",""+Xe(p.value));break;case"select":s.multiple=!!p.multiple,E=p.value,E!=null?wt(s,!!p.multiple,E,!1):p.defaultValue!=null&&wt(s,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=Ph)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ir(l),null;case 6:if(s&&l.stateNode!=null)kw(s,l,s.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(h=Wo(Ru.current),Wo(bs.current),Fh(l)){if(p=l.stateNode,h=l.memoizedProps,p[vs]=l,(E=p.nodeValue!==h)&&(s=yi,s!==null))switch(s.tag){case 3:Ih(p.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ih(p.nodeValue,h,(s.mode&1)!==0)}E&&(l.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[vs]=l,l.stateNode=p}return Ir(l),null;case 13:if(yn(Nn),p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(wn&&xi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Nb(),ac(),l.flags|=98560,E=!1;else if(E=Fh(l),p!==null&&p.dehydrated!==null){if(s===null){if(!E)throw Error(n(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[vs]=l}else ac(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ir(l),E=!1}else Qi!==null&&(s0(Qi),Qi=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Nn.current&1)!==0?or===0&&(or=3):l0())),l.updateQueue!==null&&(l.flags|=4),Ir(l),null);case 4:return uc(),Kg(s,l),s===null&&Tu(l.stateNode.containerInfo),Ir(l),null;case 10:return _g(l.type._context),Ir(l),null;case 17:return ni(l.type)&&Mh(),Ir(l),null;case 19:if(yn(Nn),E=l.memoizedState,E===null)return Ir(l),null;if(p=(l.flags&128)!==0,M=E.rendering,M===null)if(p)Vu(E,!1);else{if(or!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(M=Wh(s),M!==null){for(l.flags|=128,Vu(E,!1),p=M.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=h,h=l.child;h!==null;)E=h,s=p,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,s=M.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return dn(Nn,Nn.current&1|2),l.child}s=s.sibling}E.tail!==null&&qt()>mc&&(l.flags|=128,p=!0,Vu(E,!1),l.lanes=4194304)}else{if(!p)if(s=Wh(M),s!==null){if(l.flags|=128,p=!0,h=s.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Vu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!wn)return Ir(l),null}else 2*qt()-E.renderingStartTime>mc&&h!==1073741824&&(l.flags|=128,p=!0,Vu(E,!1),l.lanes=4194304);E.isBackwards?(M.sibling=l.child,l.child=M):(h=E.last,h!==null?h.sibling=M:l.child=M,E.last=M)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=qt(),l.sibling=null,h=Nn.current,dn(Nn,p?h&1|2:h&1),l):(Ir(l),null);case 22:case 23:return o0(),p=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(vi&1073741824)!==0&&(Ir(l),l.subtreeFlags&6&&(l.flags|=8192)):Ir(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function xI(s,l){switch(gg(l),l.tag){case 1:return ni(l.type)&&Mh(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return uc(),yn(ti),yn(jr),jg(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Ng(l),null;case 13:if(yn(Nn),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));ac()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return yn(Nn),null;case 4:return uc(),null;case 10:return _g(l.type._context),null;case 22:case 23:return o0(),null;case 24:return null;default:return null}}var ef=!1,Pr=!1,vI=typeof WeakSet=="function"?WeakSet:Set,Je=null;function hc(s,l){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){Dn(s,l,p)}else h.current=null}function Xg(s,l,h){try{h()}catch(p){Dn(s,l,p)}}var Sw=!1;function bI(s,l){if(og=La,s=rb(),Zp(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var M=0,z=-1,K=-1,fe=0,Ae=0,Re=s,Ne=null;t:for(;;){for(var Ke;Re!==h||v!==0&&Re.nodeType!==3||(z=M+v),Re!==E||p!==0&&Re.nodeType!==3||(K=M+p),Re.nodeType===3&&(M+=Re.nodeValue.length),(Ke=Re.firstChild)!==null;)Ne=Re,Re=Ke;for(;;){if(Re===s)break t;if(Ne===h&&++fe===v&&(z=M),Ne===E&&++Ae===p&&(K=M),(Ke=Re.nextSibling)!==null)break;Re=Ne,Ne=Re.parentNode}Re=Ke}h=z===-1||K===-1?null:{start:z,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(lg={focusedElem:s,selectionRange:h},La=!1,Je=l;Je!==null;)if(l=Je,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Je=s;else for(;Je!==null;){l=Je;try{var tt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(tt!==null){var it=tt.memoizedProps,Hn=tt.memoizedState,re=l.stateNode,Q=re.getSnapshotBeforeUpdate(l.elementType===l.type?it:Ji(l.type,it),Hn);re.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var le=l.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Oe){Dn(l,l.return,Oe)}if(s=l.sibling,s!==null){s.return=l.return,Je=s;break}Je=l.return}return tt=Sw,Sw=!1,tt}function Fu(s,l,h){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&s)===s){var E=v.destroy;v.destroy=void 0,E!==void 0&&Xg(l,h,E)}v=v.next}while(v!==p)}}function tf(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&s)===s){var p=h.create;h.destroy=p()}h=h.next}while(h!==l)}}function Yg(s){var l=s.ref;if(l!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof l=="function"?l(s):l.current=s}}function Tw(s){var l=s.alternate;l!==null&&(s.alternate=null,Tw(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[vs],delete l[Cu],delete l[hg],delete l[nI],delete l[rI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Nw(s){return s.tag===5||s.tag===3||s.tag===4}function Cw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Nw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qg(s,l,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Ph));else if(p!==4&&(s=s.child,s!==null))for(Qg(s,l,h),s=s.sibling;s!==null;)Qg(s,l,h),s=s.sibling}function Jg(s,l,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(Jg(s,l,h),s=s.sibling;s!==null;)Jg(s,l,h),s=s.sibling}var vr=null,Zi=!1;function qa(s,l,h){for(h=h.child;h!==null;)jw(s,l,h),h=h.sibling}function jw(s,l,h){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(Ks,h)}catch{}switch(h.tag){case 5:Pr||hc(h,l);case 6:var p=vr,v=Zi;vr=null,qa(s,l,h),vr=p,Zi=v,vr!==null&&(Zi?(s=vr,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):vr.removeChild(h.stateNode));break;case 18:vr!==null&&(Zi?(s=vr,h=h.stateNode,s.nodeType===8?dg(s.parentNode,h):s.nodeType===1&&dg(s,h),Ki(s)):dg(vr,h.stateNode));break;case 4:p=vr,v=Zi,vr=h.stateNode.containerInfo,Zi=!0,qa(s,l,h),vr=p,Zi=v;break;case 0:case 11:case 14:case 15:if(!Pr&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var E=v,M=E.destroy;E=E.tag,M!==void 0&&((E&2)!==0||(E&4)!==0)&&Xg(h,l,M),v=v.next}while(v!==p)}qa(s,l,h);break;case 1:if(!Pr&&(hc(h,l),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(z){Dn(h,l,z)}qa(s,l,h);break;case 21:qa(s,l,h);break;case 22:h.mode&1?(Pr=(p=Pr)||h.memoizedState!==null,qa(s,l,h),Pr=p):qa(s,l,h);break;default:qa(s,l,h)}}function Aw(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new vI),l.forEach(function(p){var v=jI.bind(null,s,p);h.has(p)||(h.add(p),p.then(v,v))})}}function es(s,l){var h=l.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p];try{var E=s,M=l,z=M;e:for(;z!==null;){switch(z.tag){case 5:vr=z.stateNode,Zi=!1;break e;case 3:vr=z.stateNode.containerInfo,Zi=!0;break e;case 4:vr=z.stateNode.containerInfo,Zi=!0;break e}z=z.return}if(vr===null)throw Error(n(160));jw(E,M,v),vr=null,Zi=!1;var K=v.alternate;K!==null&&(K.return=null),v.return=null}catch(fe){Dn(v,l,fe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Iw(l,s),l=l.sibling}function Iw(s,l){var h=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(es(l,s),_s(s),p&4){try{Fu(3,s,s.return),tf(3,s)}catch(it){Dn(s,s.return,it)}try{Fu(5,s,s.return)}catch(it){Dn(s,s.return,it)}}break;case 1:es(l,s),_s(s),p&512&&h!==null&&hc(h,h.return);break;case 5:if(es(l,s),_s(s),p&512&&h!==null&&hc(h,h.return),s.flags&32){var v=s.stateNode;try{Se(v,"")}catch(it){Dn(s,s.return,it)}}if(p&4&&(v=s.stateNode,v!=null)){var E=s.memoizedProps,M=h!==null?h.memoizedProps:E,z=s.type,K=s.updateQueue;if(s.updateQueue=null,K!==null)try{z==="input"&&E.type==="radio"&&E.name!=null&&pn(v,E),pe(z,M);var fe=pe(z,E);for(M=0;M<K.length;M+=2){var Ae=K[M],Re=K[M+1];Ae==="style"?Ot(v,Re):Ae==="dangerouslySetInnerHTML"?ke(v,Re):Ae==="children"?Se(v,Re):I(v,Ae,Re,fe)}switch(z){case"input":J(v,E);break;case"textarea":W(v,E);break;case"select":var Ne=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!E.multiple;var Ke=E.value;Ke!=null?wt(v,!!E.multiple,Ke,!1):Ne!==!!E.multiple&&(E.defaultValue!=null?wt(v,!!E.multiple,E.defaultValue,!0):wt(v,!!E.multiple,E.multiple?[]:"",!1))}v[Cu]=E}catch(it){Dn(s,s.return,it)}}break;case 6:if(es(l,s),_s(s),p&4){if(s.stateNode===null)throw Error(n(162));v=s.stateNode,E=s.memoizedProps;try{v.nodeValue=E}catch(it){Dn(s,s.return,it)}}break;case 3:if(es(l,s),_s(s),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Ki(l.containerInfo)}catch(it){Dn(s,s.return,it)}break;case 4:es(l,s),_s(s);break;case 13:es(l,s),_s(s),v=s.child,v.flags&8192&&(E=v.memoizedState!==null,v.stateNode.isHidden=E,!E||v.alternate!==null&&v.alternate.memoizedState!==null||(t0=qt())),p&4&&Aw(s);break;case 22:if(Ae=h!==null&&h.memoizedState!==null,s.mode&1?(Pr=(fe=Pr)||Ae,es(l,s),Pr=fe):es(l,s),_s(s),p&8192){if(fe=s.memoizedState!==null,(s.stateNode.isHidden=fe)&&!Ae&&(s.mode&1)!==0)for(Je=s,Ae=s.child;Ae!==null;){for(Re=Je=Ae;Je!==null;){switch(Ne=Je,Ke=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:Fu(4,Ne,Ne.return);break;case 1:hc(Ne,Ne.return);var tt=Ne.stateNode;if(typeof tt.componentWillUnmount=="function"){p=Ne,h=Ne.return;try{l=p,tt.props=l.memoizedProps,tt.state=l.memoizedState,tt.componentWillUnmount()}catch(it){Dn(p,h,it)}}break;case 5:hc(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){Mw(Re);continue}}Ke!==null?(Ke.return=Ne,Je=Ke):Mw(Re)}Ae=Ae.sibling}e:for(Ae=null,Re=s;;){if(Re.tag===5){if(Ae===null){Ae=Re;try{v=Re.stateNode,fe?(E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(z=Re.stateNode,K=Re.memoizedProps.style,M=K!=null&&K.hasOwnProperty("display")?K.display:null,z.style.display=ct("display",M))}catch(it){Dn(s,s.return,it)}}}else if(Re.tag===6){if(Ae===null)try{Re.stateNode.nodeValue=fe?"":Re.memoizedProps}catch(it){Dn(s,s.return,it)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===s)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===s)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===s)break e;Ae===Re&&(Ae=null),Re=Re.return}Ae===Re&&(Ae=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:es(l,s),_s(s),p&4&&Aw(s);break;case 21:break;default:es(l,s),_s(s)}}function _s(s){var l=s.flags;if(l&2){try{e:{for(var h=s.return;h!==null;){if(Nw(h)){var p=h;break e}h=h.return}throw Error(n(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(Se(v,""),p.flags&=-33);var E=Cw(s);Jg(s,E,v);break;case 3:case 4:var M=p.stateNode.containerInfo,z=Cw(s);Qg(s,z,M);break;default:throw Error(n(161))}}catch(K){Dn(s,s.return,K)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function wI(s,l,h){Je=s,Pw(s)}function Pw(s,l,h){for(var p=(s.mode&1)!==0;Je!==null;){var v=Je,E=v.child;if(v.tag===22&&p){var M=v.memoizedState!==null||ef;if(!M){var z=v.alternate,K=z!==null&&z.memoizedState!==null||Pr;z=ef;var fe=Pr;if(ef=M,(Pr=K)&&!fe)for(Je=v;Je!==null;)M=Je,K=M.child,M.tag===22&&M.memoizedState!==null?Dw(v):K!==null?(K.return=M,Je=K):Dw(v);for(;E!==null;)Je=E,Pw(E),E=E.sibling;Je=v,ef=z,Pr=fe}Rw(s)}else(v.subtreeFlags&8772)!==0&&E!==null?(E.return=v,Je=E):Rw(s)}}function Rw(s){for(;Je!==null;){var l=Je;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Pr||tf(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Pr)if(h===null)p.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:Ji(l.type,h.memoizedProps);p.componentDidUpdate(v,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&Mb(l,E,p);break;case 3:var M=l.updateQueue;if(M!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Mb(l,M,h)}break;case 5:var z=l.stateNode;if(h===null&&l.flags&4){h=z;var K=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&h.focus();break;case"img":K.src&&(h.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var fe=l.alternate;if(fe!==null){var Ae=fe.memoizedState;if(Ae!==null){var Re=Ae.dehydrated;Re!==null&&Ki(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Pr||l.flags&512&&Yg(l)}catch(Ne){Dn(l,l.return,Ne)}}if(l===s){Je=null;break}if(h=l.sibling,h!==null){h.return=l.return,Je=h;break}Je=l.return}}function Mw(s){for(;Je!==null;){var l=Je;if(l===s){Je=null;break}var h=l.sibling;if(h!==null){h.return=l.return,Je=h;break}Je=l.return}}function Dw(s){for(;Je!==null;){var l=Je;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{tf(4,l)}catch(K){Dn(l,h,K)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var v=l.return;try{p.componentDidMount()}catch(K){Dn(l,v,K)}}var E=l.return;try{Yg(l)}catch(K){Dn(l,E,K)}break;case 5:var M=l.return;try{Yg(l)}catch(K){Dn(l,M,K)}}}catch(K){Dn(l,l.return,K)}if(l===s){Je=null;break}var z=l.sibling;if(z!==null){z.return=l.return,Je=z;break}Je=l.return}}var _I=Math.ceil,nf=V.ReactCurrentDispatcher,Zg=V.ReactCurrentOwner,Mi=V.ReactCurrentBatchConfig,Gt=0,hr=null,Qn=null,br=0,vi=0,fc=$a(0),or=0,Uu=null,Go=0,rf=0,e0=0,$u=null,ii=null,t0=0,mc=1/0,ua=null,sf=!1,n0=null,Ga=null,af=!1,Ka=null,of=0,zu=0,r0=null,lf=-1,cf=0;function Gr(){return(Gt&6)!==0?qt():lf!==-1?lf:lf=qt()}function Xa(s){return(s.mode&1)===0?1:(Gt&2)!==0&&br!==0?br&-br:sI.transition!==null?(cf===0&&(cf=Qs()),cf):(s=Ft,s!==0||(s=window.event,s=s===void 0?16:gu(s.type)),s)}function ts(s,l,h,p){if(50<zu)throw zu=0,r0=null,Error(n(185));hs(s,h,p),((Gt&2)===0||s!==hr)&&(s===hr&&((Gt&2)===0&&(rf|=h),or===4&&Ya(s,br)),si(s,p),h===1&&Gt===0&&(l.mode&1)===0&&(mc=qt()+500,Oh&&Ba()))}function si(s,l){var h=s.callbackNode;Cr(s,l);var p=Ys(s,s===hr?br:0);if(p===0)h!==null&&Ia(h),s.callbackNode=null,s.callbackPriority=0;else if(l=p&-p,s.callbackPriority!==l){if(h!=null&&Ia(h),l===1)s.tag===0?iI(Lw.bind(null,s)):_b(Lw.bind(null,s)),eI(function(){(Gt&6)===0&&Ba()}),h=null;else{switch(ms(p)){case 1:h=Wi;break;case 4:h=gr;break;case 16:h=zr;break;case 536870912:h=Ol;break;default:h=zr}h=Ww(h,Ow.bind(null,s))}s.callbackPriority=l,s.callbackNode=h}}function Ow(s,l){if(lf=-1,cf=0,(Gt&6)!==0)throw Error(n(327));var h=s.callbackNode;if(pc()&&s.callbackNode!==h)return null;var p=Ys(s,s===hr?br:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||l)l=uf(s,p);else{l=p;var v=Gt;Gt|=2;var E=Fw();(hr!==s||br!==l)&&(ua=null,mc=qt()+500,Xo(s,l));do try{SI();break}catch(z){Vw(s,z)}while(!0);wg(),nf.current=E,Gt=v,Qn!==null?l=0:(hr=null,br=0,l=or)}if(l!==0){if(l===2&&(v=Hr(s),v!==0&&(p=v,l=i0(s,v))),l===1)throw h=Uu,Xo(s,0),Ya(s,p),si(s,qt()),h;if(l===6)Ya(s,p);else{if(v=s.current.alternate,(p&30)===0&&!EI(v)&&(l=uf(s,p),l===2&&(E=Hr(s),E!==0&&(p=E,l=i0(s,E))),l===1))throw h=Uu,Xo(s,0),Ya(s,p),si(s,qt()),h;switch(s.finishedWork=v,s.finishedLanes=p,l){case 0:case 1:throw Error(n(345));case 2:Yo(s,ii,ua);break;case 3:if(Ya(s,p),(p&130023424)===p&&(l=t0+500-qt(),10<l)){if(Ys(s,0)!==0)break;if(v=s.suspendedLanes,(v&p)!==p){Gr(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=ug(Yo.bind(null,s,ii,ua),l);break}Yo(s,ii,ua);break;case 4:if(Ya(s,p),(p&4194240)===p)break;for(l=s.eventTimes,v=-1;0<p;){var M=31-yr(p);E=1<<M,M=l[M],M>v&&(v=M),p&=~E}if(p=v,p=qt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*_I(p/1960))-p,10<p){s.timeoutHandle=ug(Yo.bind(null,s,ii,ua),p);break}Yo(s,ii,ua);break;case 5:Yo(s,ii,ua);break;default:throw Error(n(329))}}}return si(s,qt()),s.callbackNode===h?Ow.bind(null,s):null}function i0(s,l){var h=$u;return s.current.memoizedState.isDehydrated&&(Xo(s,l).flags|=256),s=uf(s,l),s!==2&&(l=ii,ii=h,l!==null&&s0(l)),s}function s0(s){ii===null?ii=s:ii.push.apply(ii,s)}function EI(s){for(var l=s;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var v=h[p],E=v.getSnapshot;v=v.value;try{if(!Yi(E(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ya(s,l){for(l&=~e0,l&=~rf,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var h=31-yr(l),p=1<<h;s[h]=-1,l&=~p}}function Lw(s){if((Gt&6)!==0)throw Error(n(327));pc();var l=Ys(s,0);if((l&1)===0)return si(s,qt()),null;var h=uf(s,l);if(s.tag!==0&&h===2){var p=Hr(s);p!==0&&(l=p,h=i0(s,p))}if(h===1)throw h=Uu,Xo(s,0),Ya(s,l),si(s,qt()),h;if(h===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Yo(s,ii,ua),si(s,qt()),null}function a0(s,l){var h=Gt;Gt|=1;try{return s(l)}finally{Gt=h,Gt===0&&(mc=qt()+500,Oh&&Ba())}}function Ko(s){Ka!==null&&Ka.tag===0&&(Gt&6)===0&&pc();var l=Gt;Gt|=1;var h=Mi.transition,p=Ft;try{if(Mi.transition=null,Ft=1,s)return s()}finally{Ft=p,Mi.transition=h,Gt=l,(Gt&6)===0&&Ba()}}function o0(){vi=fc.current,yn(fc)}function Xo(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,ZA(h)),Qn!==null)for(h=Qn.return;h!==null;){var p=h;switch(gg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Mh();break;case 3:uc(),yn(ti),yn(jr),jg();break;case 5:Ng(p);break;case 4:uc();break;case 13:yn(Nn);break;case 19:yn(Nn);break;case 10:_g(p.type._context);break;case 22:case 23:o0()}h=h.return}if(hr=s,Qn=s=Qa(s.current,null),br=vi=l,or=0,Uu=null,e0=rf=Go=0,ii=$u=null,Ho!==null){for(l=0;l<Ho.length;l++)if(h=Ho[l],p=h.interleaved,p!==null){h.interleaved=null;var v=p.next,E=h.pending;if(E!==null){var M=E.next;E.next=v,p.next=M}h.pending=p}Ho=null}return s}function Vw(s,l){do{var h=Qn;try{if(wg(),qh.current=Yh,Gh){for(var p=Cn.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Gh=!1}if(qo=0,dr=ar=Cn=null,Mu=!1,Du=0,Zg.current=null,h===null||h.return===null){or=1,Uu=l,Qn=null;break}e:{var E=s,M=h.return,z=h,K=l;if(l=br,z.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=K,Ae=z,Re=Ae.tag;if((Ae.mode&1)===0&&(Re===0||Re===11||Re===15)){var Ne=Ae.alternate;Ne?(Ae.updateQueue=Ne.updateQueue,Ae.memoizedState=Ne.memoizedState,Ae.lanes=Ne.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Ke=cw(M);if(Ke!==null){Ke.flags&=-257,uw(Ke,M,z,E,l),Ke.mode&1&&lw(E,fe,l),l=Ke,K=fe;var tt=l.updateQueue;if(tt===null){var it=new Set;it.add(K),l.updateQueue=it}else tt.add(K);break e}else{if((l&1)===0){lw(E,fe,l),l0();break e}K=Error(n(426))}}else if(wn&&z.mode&1){var Hn=cw(M);if(Hn!==null){(Hn.flags&65536)===0&&(Hn.flags|=256),uw(Hn,M,z,E,l),vg(dc(K,z));break e}}E=K=dc(K,z),or!==4&&(or=2),$u===null?$u=[E]:$u.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var re=aw(E,K,l);Rb(E,re);break e;case 1:z=K;var Q=E.type,le=E.stateNode;if((E.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Ga===null||!Ga.has(le)))){E.flags|=65536,l&=-l,E.lanes|=l;var Oe=ow(E,z,l);Rb(E,Oe);break e}}E=E.return}while(E!==null)}$w(h)}catch(ot){l=ot,Qn===h&&h!==null&&(Qn=h=h.return);continue}break}while(!0)}function Fw(){var s=nf.current;return nf.current=Yh,s===null?Yh:s}function l0(){(or===0||or===3||or===2)&&(or=4),hr===null||(Go&268435455)===0&&(rf&268435455)===0||Ya(hr,br)}function uf(s,l){var h=Gt;Gt|=2;var p=Fw();(hr!==s||br!==l)&&(ua=null,Xo(s,l));do try{kI();break}catch(v){Vw(s,v)}while(!0);if(wg(),Gt=h,nf.current=p,Qn!==null)throw Error(n(261));return hr=null,br=0,or}function kI(){for(;Qn!==null;)Uw(Qn)}function SI(){for(;Qn!==null&&!Nr();)Uw(Qn)}function Uw(s){var l=Hw(s.alternate,s,vi);s.memoizedProps=s.pendingProps,l===null?$w(s):Qn=l,Zg.current=null}function $w(s){var l=s;do{var h=l.alternate;if(s=l.return,(l.flags&32768)===0){if(h=yI(h,l,vi),h!==null){Qn=h;return}}else{if(h=xI(h,l),h!==null){h.flags&=32767,Qn=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{or=6,Qn=null;return}}if(l=l.sibling,l!==null){Qn=l;return}Qn=l=s}while(l!==null);or===0&&(or=5)}function Yo(s,l,h){var p=Ft,v=Mi.transition;try{Mi.transition=null,Ft=1,TI(s,l,h,p)}finally{Mi.transition=v,Ft=p}return null}function TI(s,l,h,p){do pc();while(Ka!==null);if((Gt&6)!==0)throw Error(n(327));h=s.finishedWork;var v=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var E=h.lanes|h.childLanes;if(en(s,E),s===hr&&(Qn=hr=null,br=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||af||(af=!0,Ww(zr,function(){return pc(),null})),E=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||E){E=Mi.transition,Mi.transition=null;var M=Ft;Ft=1;var z=Gt;Gt|=4,Zg.current=null,bI(s,h),Iw(h,s),qA(lg),La=!!og,lg=og=null,s.current=h,wI(h),yh(),Gt=z,Ft=M,Mi.transition=E}else s.current=h;if(af&&(af=!1,Ka=s,of=v),E=s.pendingLanes,E===0&&(Ga=null),Ra(h.stateNode),si(s,qt()),l!==null)for(p=s.onRecoverableError,h=0;h<l.length;h++)v=l[h],p(v.value,{componentStack:v.stack,digest:v.digest});if(sf)throw sf=!1,s=n0,n0=null,s;return(of&1)!==0&&s.tag!==0&&pc(),E=s.pendingLanes,(E&1)!==0?s===r0?zu++:(zu=0,r0=s):zu=0,Ba(),null}function pc(){if(Ka!==null){var s=ms(of),l=Mi.transition,h=Ft;try{if(Mi.transition=null,Ft=16>s?16:s,Ka===null)var p=!1;else{if(s=Ka,Ka=null,of=0,(Gt&6)!==0)throw Error(n(331));var v=Gt;for(Gt|=4,Je=s.current;Je!==null;){var E=Je,M=E.child;if((Je.flags&16)!==0){var z=E.deletions;if(z!==null){for(var K=0;K<z.length;K++){var fe=z[K];for(Je=fe;Je!==null;){var Ae=Je;switch(Ae.tag){case 0:case 11:case 15:Fu(8,Ae,E)}var Re=Ae.child;if(Re!==null)Re.return=Ae,Je=Re;else for(;Je!==null;){Ae=Je;var Ne=Ae.sibling,Ke=Ae.return;if(Tw(Ae),Ae===fe){Je=null;break}if(Ne!==null){Ne.return=Ke,Je=Ne;break}Je=Ke}}}var tt=E.alternate;if(tt!==null){var it=tt.child;if(it!==null){tt.child=null;do{var Hn=it.sibling;it.sibling=null,it=Hn}while(it!==null)}}Je=E}}if((E.subtreeFlags&2064)!==0&&M!==null)M.return=E,Je=M;else e:for(;Je!==null;){if(E=Je,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Fu(9,E,E.return)}var re=E.sibling;if(re!==null){re.return=E.return,Je=re;break e}Je=E.return}}var Q=s.current;for(Je=Q;Je!==null;){M=Je;var le=M.child;if((M.subtreeFlags&2064)!==0&&le!==null)le.return=M,Je=le;else e:for(M=Q;Je!==null;){if(z=Je,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:tf(9,z)}}catch(ot){Dn(z,z.return,ot)}if(z===M){Je=null;break e}var Oe=z.sibling;if(Oe!==null){Oe.return=z.return,Je=Oe;break e}Je=z.return}}if(Gt=v,Ba(),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(Ks,s)}catch{}p=!0}return p}finally{Ft=h,Mi.transition=l}}return!1}function zw(s,l,h){l=dc(h,l),l=aw(s,l,1),s=Wa(s,l,1),l=Gr(),s!==null&&(hs(s,1,l),si(s,l))}function Dn(s,l,h){if(s.tag===3)zw(s,s,h);else for(;l!==null;){if(l.tag===3){zw(l,s,h);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ga===null||!Ga.has(p))){s=dc(h,s),s=ow(l,s,1),l=Wa(l,s,1),s=Gr(),l!==null&&(hs(l,1,s),si(l,s));break}}l=l.return}}function NI(s,l,h){var p=s.pingCache;p!==null&&p.delete(l),l=Gr(),s.pingedLanes|=s.suspendedLanes&h,hr===s&&(br&h)===h&&(or===4||or===3&&(br&130023424)===br&&500>qt()-t0?Xo(s,0):e0|=h),si(s,l)}function Bw(s,l){l===0&&((s.mode&1)===0?l=1:(l=Oa,Oa<<=1,(Oa&130023424)===0&&(Oa=4194304)));var h=Gr();s=oa(s,l),s!==null&&(hs(s,l,h),si(s,h))}function CI(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),Bw(s,h)}function jI(s,l){var h=0;switch(s.tag){case 13:var p=s.stateNode,v=s.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(l),Bw(s,h)}var Hw;Hw=function(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps||ti.current)ri=!0;else{if((s.lanes&h)===0&&(l.flags&128)===0)return ri=!1,gI(s,l,h);ri=(s.flags&131072)!==0}else ri=!1,wn&&(l.flags&1048576)!==0&&Eb(l,Vh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;Zh(s,l),s=l.pendingProps;var v=rc(l,jr.current);cc(l,h),v=Pg(null,l,p,s,v,h);var E=Rg();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ni(p)?(E=!0,Dh(l)):E=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Sg(l),v.updater=Qh,l.stateNode=v,v._reactInternals=l,Fg(l,p,s,h),l=Bg(null,l,p,!0,E,h)):(l.tag=0,wn&&E&&pg(l),qr(null,l,v,h),l=l.child),l;case 16:p=l.elementType;e:{switch(Zh(s,l),s=l.pendingProps,v=p._init,p=v(p._payload),l.type=p,v=l.tag=II(p),s=Ji(p,s),v){case 0:l=zg(null,l,p,s,h);break e;case 1:l=gw(null,l,p,s,h);break e;case 11:l=dw(null,l,p,s,h);break e;case 14:l=hw(null,l,p,Ji(p.type,s),h);break e}throw Error(n(306,p,""))}return l;case 0:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Ji(p,v),zg(s,l,p,v,h);case 1:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Ji(p,v),gw(s,l,p,v,h);case 3:e:{if(yw(l),s===null)throw Error(n(387));p=l.pendingProps,E=l.memoizedState,v=E.element,Pb(s,l),Hh(l,p,null,h);var M=l.memoizedState;if(p=M.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){v=dc(Error(n(423)),l),l=xw(s,l,p,h,v);break e}else if(p!==v){v=dc(Error(n(424)),l),l=xw(s,l,p,h,v);break e}else for(xi=Ua(l.stateNode.containerInfo.firstChild),yi=l,wn=!0,Qi=null,h=Ab(l,null,p,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ac(),p===v){l=ca(s,l,h);break e}qr(s,l,p,h)}l=l.child}return l;case 5:return Db(l),s===null&&xg(l),p=l.type,v=l.pendingProps,E=s!==null?s.memoizedProps:null,M=v.children,cg(p,v)?M=null:E!==null&&cg(p,E)&&(l.flags|=32),pw(s,l),qr(s,l,M,h),l.child;case 6:return s===null&&xg(l),null;case 13:return vw(s,l,h);case 4:return Tg(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=oc(l,null,p,h):qr(s,l,p,h),l.child;case 11:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Ji(p,v),dw(s,l,p,v,h);case 7:return qr(s,l,l.pendingProps,h),l.child;case 8:return qr(s,l,l.pendingProps.children,h),l.child;case 12:return qr(s,l,l.pendingProps.children,h),l.child;case 10:e:{if(p=l.type._context,v=l.pendingProps,E=l.memoizedProps,M=v.value,dn($h,p._currentValue),p._currentValue=M,E!==null)if(Yi(E.value,M)){if(E.children===v.children&&!ti.current){l=ca(s,l,h);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var z=E.dependencies;if(z!==null){M=E.child;for(var K=z.firstContext;K!==null;){if(K.context===p){if(E.tag===1){K=la(-1,h&-h),K.tag=2;var fe=E.updateQueue;if(fe!==null){fe=fe.shared;var Ae=fe.pending;Ae===null?K.next=K:(K.next=Ae.next,Ae.next=K),fe.pending=K}}E.lanes|=h,K=E.alternate,K!==null&&(K.lanes|=h),Eg(E.return,h,l),z.lanes|=h;break}K=K.next}}else if(E.tag===10)M=E.type===l.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(n(341));M.lanes|=h,z=M.alternate,z!==null&&(z.lanes|=h),Eg(M,h,l),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===l){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}qr(s,l,v.children,h),l=l.child}return l;case 9:return v=l.type,p=l.pendingProps.children,cc(l,h),v=Pi(v),p=p(v),l.flags|=1,qr(s,l,p,h),l.child;case 14:return p=l.type,v=Ji(p,l.pendingProps),v=Ji(p.type,v),hw(s,l,p,v,h);case 15:return fw(s,l,l.type,l.pendingProps,h);case 17:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:Ji(p,v),Zh(s,l),l.tag=1,ni(p)?(s=!0,Dh(l)):s=!1,cc(l,h),iw(l,p,v),Fg(l,p,v,h),Bg(null,l,p,!0,s,h);case 19:return ww(s,l,h);case 22:return mw(s,l,h)}throw Error(n(156,l.tag))};function Ww(s,l){return Gs(s,l)}function AI(s,l,h,p){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(s,l,h,p){return new AI(s,l,h,p)}function c0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function II(s){if(typeof s=="function")return c0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===ae)return 14}return 2}function Qa(s,l){var h=s.alternate;return h===null?(h=Di(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function df(s,l,h,p,v,E){var M=2;if(p=s,typeof s=="function")c0(s)&&(M=1);else if(typeof s=="string")M=5;else e:switch(s){case D:return Qo(h.children,v,E,l);case R:M=8,v|=8;break;case P:return s=Di(12,h,l,v|2),s.elementType=P,s.lanes=E,s;case A:return s=Di(13,h,l,v),s.elementType=A,s.lanes=E,s;case oe:return s=Di(19,h,l,v),s.elementType=oe,s.lanes=E,s;case Pe:return hf(h,v,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:M=10;break e;case L:M=9;break e;case U:M=11;break e;case ae:M=14;break e;case Ce:M=16,p=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=Di(M,h,l,v),l.elementType=s,l.type=p,l.lanes=E,l}function Qo(s,l,h,p){return s=Di(7,s,p,l),s.lanes=h,s}function hf(s,l,h,p){return s=Di(22,s,p,l),s.elementType=Pe,s.lanes=h,s.stateNode={isHidden:!1},s}function u0(s,l,h){return s=Di(6,s,null,l),s.lanes=h,s}function d0(s,l,h){return l=Di(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function PI(s,l,h,p,v){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ds(0),this.expirationTimes=ds(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ds(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function h0(s,l,h,p,v,E,M,z,K){return s=new PI(s,l,h,z,K),l===1?(l=1,E===!0&&(l|=8)):l=0,E=Di(3,null,null,l),s.current=E,E.stateNode=s,E.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sg(E),s}function RI(s,l,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:p==null?null:""+p,children:s,containerInfo:l,implementation:h}}function qw(s){if(!s)return za;s=s._reactInternals;e:{if(Zr(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ni(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var h=s.type;if(ni(h))return bb(s,h,l)}return l}function Gw(s,l,h,p,v,E,M,z,K){return s=h0(h,p,!0,s,v,E,M,z,K),s.context=qw(null),h=s.current,p=Gr(),v=Xa(h),E=la(p,v),E.callback=l??null,Wa(h,E,v),s.current.lanes=v,hs(s,v,p),si(s,p),s}function ff(s,l,h,p){var v=l.current,E=Gr(),M=Xa(v);return h=qw(h),l.context===null?l.context=h:l.pendingContext=h,l=la(E,M),l.payload={element:s},p=p===void 0?null:p,p!==null&&(l.callback=p),s=Wa(v,l,M),s!==null&&(ts(s,v,M,E),Bh(s,v,M)),M}function mf(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Kw(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function f0(s,l){Kw(s,l),(s=s.alternate)&&Kw(s,l)}function MI(){return null}var Xw=typeof reportError=="function"?reportError:function(s){console.error(s)};function m0(s){this._internalRoot=s}pf.prototype.render=m0.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));ff(s,l,null,null)},pf.prototype.unmount=m0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Ko(function(){ff(null,s,null,null)}),l[ra]=null}};function pf(s){this._internalRoot=s}pf.prototype.unstable_scheduleHydration=function(s){if(s){var l=Y();s={blockedOn:null,target:s,priority:l};for(var h=0;h<Sn.length&&l!==0&&l<Sn[h].priority;h++);Sn.splice(h,0,s),h===0&&un(s)}};function p0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function gf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Yw(){}function DI(s,l,h,p,v){if(v){if(typeof p=="function"){var E=p;p=function(){var fe=mf(M);E.call(fe)}}var M=Gw(l,p,s,0,null,!1,!1,"",Yw);return s._reactRootContainer=M,s[ra]=M.current,Tu(s.nodeType===8?s.parentNode:s),Ko(),M}for(;v=s.lastChild;)s.removeChild(v);if(typeof p=="function"){var z=p;p=function(){var fe=mf(K);z.call(fe)}}var K=h0(s,0,!1,null,null,!1,!1,"",Yw);return s._reactRootContainer=K,s[ra]=K.current,Tu(s.nodeType===8?s.parentNode:s),Ko(function(){ff(l,K,h,p)}),K}function yf(s,l,h,p,v){var E=h._reactRootContainer;if(E){var M=E;if(typeof v=="function"){var z=v;v=function(){var K=mf(M);z.call(K)}}ff(l,M,s,v)}else M=DI(h,l,s,v,p);return mf(M)}Vl=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var h=us(l.pendingLanes);h!==0&&(fs(l,h|1),si(l,qt()),(Gt&6)===0&&(mc=qt()+500,Ba()))}break;case 13:Ko(function(){var p=oa(s,1);if(p!==null){var v=Gr();ts(p,s,1,v)}}),f0(s,1)}},Js=function(s){if(s.tag===13){var l=oa(s,134217728);if(l!==null){var h=Gr();ts(l,s,134217728,h)}f0(s,134217728)}},Fl=function(s){if(s.tag===13){var l=Xa(s),h=oa(s,l);if(h!==null){var p=Gr();ts(h,s,l,p)}f0(s,l)}},Y=function(){return Ft},we=function(s,l){var h=Ft;try{return Ft=s,l()}finally{Ft=h}},Fe=function(s,l,h){switch(l){case"input":if(J(s,h),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var p=h[l];if(p!==s&&p.form===s.form){var v=Rh(p);if(!v)throw Error(n(90));Tt(p),J(p,v)}}}break;case"textarea":W(s,h);break;case"select":l=h.value,l!=null&&wt(s,!!h.multiple,l,!1)}},ue=a0,at=Ko;var OI={usingClientEntryPoint:!1,Events:[ju,tc,Rh,Le,Me,a0]},Bu={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LI={bundleType:Bu.bundleType,version:Bu.version,rendererPackageName:Bu.rendererPackageName,rendererConfig:Bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Aa(s),s===null?null:s.stateNode},findFiberByHostInstance:Bu.findFiberByHostInstance||MI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{Ks=xf.inject(LI),Br=xf}catch{}}return ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OI,ai.createPortal=function(s,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p0(l))throw Error(n(200));return RI(s,l,null,h)},ai.createRoot=function(s,l){if(!p0(s))throw Error(n(299));var h=!1,p="",v=Xw;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=h0(s,1,!1,null,null,h,!1,p,v),s[ra]=l.current,Tu(s.nodeType===8?s.parentNode:s),new m0(l)},ai.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Aa(l),s=s===null?null:s.stateNode,s},ai.flushSync=function(s){return Ko(s)},ai.hydrate=function(s,l,h){if(!gf(l))throw Error(n(200));return yf(null,s,l,!0,h)},ai.hydrateRoot=function(s,l,h){if(!p0(s))throw Error(n(405));var p=h!=null&&h.hydratedSources||null,v=!1,E="",M=Xw;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(M=h.onRecoverableError)),l=Gw(l,null,s,1,h??null,v,!1,E,M),s[ra]=l.current,Tu(s),p)for(s=0;s<p.length;s++)h=p[s],v=h._getVersion,v=v(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,v]:l.mutableSourceEagerHydrationData.push(h,v);return new pf(l)},ai.render=function(s,l,h){if(!gf(l))throw Error(n(200));return yf(null,s,l,!1,h)},ai.unmountComponentAtNode=function(s){if(!gf(s))throw Error(n(40));return s._reactRootContainer?(Ko(function(){yf(null,null,s,!1,function(){s._reactRootContainer=null,s[ra]=null})}),!0):!1},ai.unstable_batchedUpdates=a0,ai.unstable_renderSubtreeIntoContainer=function(s,l,h,p){if(!gf(h))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return yf(s,l,h,!1,p)},ai.version="18.3.1-next-f1338f8080-20240426",ai}var i2;function RS(){if(i2)return x0.exports;i2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),x0.exports=WI(),x0.exports}var s2;function qI(){if(s2)return vf;s2=1;var t=RS();return vf.createRoot=t.createRoot,vf.hydrateRoot=t.hydrateRoot,vf}var GI=qI();const KI=Gd(GI);var Ix=RS();const XI=Gd(Ix);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vd.apply(this,arguments)}var lo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(lo||(lo={}));const a2="popstate";function YI(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:c,hash:u}=r.location;return hy("",{pathname:a,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fm(i)}return JI(e,n,null,t)}function Gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function MS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QI(){return Math.random().toString(36).substr(2,8)}function o2(t,e){return{usr:t.state,key:t.key,idx:e}}function hy(t,e,n,r){return n===void 0&&(n=null),vd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zc(e):e,{state:n,key:e&&e.key||r||QI()})}function fm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,u=lo.Pop,d=null,f=g();f==null&&(f=0,c.replaceState(vd({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=lo.Pop;let N=g(),j=N==null?null:N-f;f=N,d&&d({action:u,location:b.location,delta:j})}function x(N,j){u=lo.Push;let O=hy(b.location,N,j);f=g()+1;let I=o2(O,f),V=b.createHref(O);try{c.pushState(I,"",V)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(V)}a&&d&&d({action:u,location:b.location,delta:1})}function w(N,j){u=lo.Replace;let O=hy(b.location,N,j);f=g();let I=o2(O,f),V=b.createHref(O);c.replaceState(I,"",V),a&&d&&d({action:u,location:b.location,delta:0})}function S(N){let j=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof N=="string"?N:fm(N);return O=O.replace(/ $/,"%20"),Gn(j,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,j)}let b={get action(){return u},get location(){return t(i,c)},listen(N){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(a2,y),d=N,()=>{i.removeEventListener(a2,y),d=null}},createHref(N){return e(i,N)},createURL:S,encodeLocation(N){let j=S(N);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:w,go(N){return c.go(N)}};return b}var l2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(l2||(l2={}));function ZI(t,e,n){return n===void 0&&(n="/"),e5(t,e,n)}function e5(t,e,n,r){let i=typeof e=="string"?Zc(e):e,a=Px(i.pathname||"/",n);if(a==null)return null;let c=DS(t);t5(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=f5(a);u=u5(c[d],f)}return u}function DS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,c,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Gn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=uo([r,d.relativePath]),g=n.concat(d);a.children&&a.children.length>0&&(Gn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),DS(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:l5(f,a.index),routesMeta:g})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,c);else for(let d of OS(a.path))i(a,c,d)}),e}function OS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=OS(r.join("/")),u=[];return u.push(...c.map(d=>d===""?a:[a,d].join("/"))),i&&u.push(...c),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function t5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const n5=/^:[\w-]+$/,r5=3,i5=2,s5=1,a5=10,o5=-2,c2=t=>t==="*";function l5(t,e){let n=t.split("/"),r=n.length;return n.some(c2)&&(r+=o5),e&&(r+=i5),n.filter(i=>!c2(i)).reduce((i,a)=>i+(n5.test(a)?r5:a===""?s5:a5),r)}function c5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function u5(t,e,n){let{routesMeta:r}=t,i={},a="/",c=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=d5({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),x=d.route;if(!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:uo([a,y.pathname]),pathnameBase:y5(uo([a,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(a=uo([a,y.pathnameBase]))}return c}function d5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=h5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:x,isOptional:w}=g;if(x==="*"){let b=u[y]||"";c=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const S=u[y];return w&&!S?f[x]=void 0:f[x]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function h5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),MS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function f5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return MS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Px(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function m5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Zc(t):t;return{pathname:n?n.startsWith("/")?n:p5(n,e):e,search:x5(r),hash:v5(i)}}function p5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function w0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function g5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rx(t,e){let n=g5(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Mx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Zc(t):(i=vd({},t),Gn(!i.pathname||!i.pathname.includes("?"),w0("?","pathname","search",i)),Gn(!i.pathname||!i.pathname.includes("#"),w0("#","pathname","hash",i)),Gn(!i.search||!i.search.includes("#"),w0("#","search","hash",i)));let a=t===""||i.pathname==="",c=a?"/":i.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;i.pathname=x.join("/")}u=y>=0?e[y]:"/"}let d=m5(i,u),f=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}const uo=t=>t.join("/").replace(/\/\/+/g,"/"),y5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,v5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function b5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const LS=["post","put","patch","delete"];new Set(LS);const w5=["get",...LS];new Set(w5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(this,arguments)}const Dx=k.createContext(null),_5=k.createContext(null),Co=k.createContext(null),ep=k.createContext(null),Na=k.createContext({outlet:null,matches:[],isDataRoute:!1}),VS=k.createContext(null);function E5(t,e){let{relative:n}=e===void 0?{}:e;eu()||Gn(!1);let{basename:r,navigator:i}=k.useContext(Co),{hash:a,pathname:c,search:u}=$S(t,{relative:n}),d=c;return r!=="/"&&(d=c==="/"?r:uo([r,c])),i.createHref({pathname:d,search:u,hash:a})}function eu(){return k.useContext(ep)!=null}function ls(){return eu()||Gn(!1),k.useContext(ep).location}function FS(t){k.useContext(Co).static||k.useLayoutEffect(t)}function Qr(){let{isDataRoute:t}=k.useContext(Na);return t?O5():k5()}function k5(){eu()||Gn(!1);let t=k.useContext(Dx),{basename:e,future:n,navigator:r}=k.useContext(Co),{matches:i}=k.useContext(Na),{pathname:a}=ls(),c=JSON.stringify(Rx(i,n.v7_relativeSplatPath)),u=k.useRef(!1);return FS(()=>{u.current=!0}),k.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=Mx(f,JSON.parse(c),a,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:uo([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,a,t])}function US(){let{matches:t}=k.useContext(Na),e=t[t.length-1];return e?e.params:{}}function $S(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Co),{matches:i}=k.useContext(Na),{pathname:a}=ls(),c=JSON.stringify(Rx(i,r.v7_relativeSplatPath));return k.useMemo(()=>Mx(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function S5(t,e){return T5(t,e)}function T5(t,e,n,r){eu()||Gn(!1);let{navigator:i}=k.useContext(Co),{matches:a}=k.useContext(Na),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let f=ls(),g;if(e){var y;let N=typeof e=="string"?Zc(e):e;d==="/"||(y=N.pathname)!=null&&y.startsWith(d)||Gn(!1),g=N}else g=f;let x=g.pathname||"/",w=x;if(d!=="/"){let N=d.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=ZI(t,{pathname:w}),b=I5(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:uo([d,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?d:uo([d,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&b?k.createElement(ep.Provider,{value:{location:bd({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:lo.Pop}},b):b}function N5(){let t=D5(),e=b5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const C5=k.createElement(N5,null);class j5 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Na.Provider,{value:this.props.routeContext},k.createElement(VS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A5(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(Dx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Na.Provider,{value:e},r)}function I5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||Gn(!1),c=c.slice(0,Math.min(c.length,g+1))}let d=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:x,errors:w}=n,S=y.route.loader&&x[y.route.id]===void 0&&(!w||w[y.route.id]===void 0);if(y.route.lazy||S){d=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,x)=>{let w,S=!1,b=null,N=null;n&&(w=u&&y.route.id?u[y.route.id]:void 0,b=y.route.errorElement||C5,d&&(f<0&&x===0?(L5("route-fallback"),S=!0,N=null):f===x&&(S=!0,N=y.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,x+1)),O=()=>{let I;return w?I=b:S?I=N:y.route.Component?I=k.createElement(y.route.Component,null):y.route.element?I=y.route.element:I=g,k.createElement(A5,{match:y,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:I})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?k.createElement(j5,{location:n.location,revalidation:n.revalidation,component:b,error:w,children:O(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):O()},null)}var zS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zS||{}),BS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BS||{});function P5(t){let e=k.useContext(Dx);return e||Gn(!1),e}function R5(t){let e=k.useContext(_5);return e||Gn(!1),e}function M5(t){let e=k.useContext(Na);return e||Gn(!1),e}function HS(t){let e=M5(),n=e.matches[e.matches.length-1];return n.route.id||Gn(!1),n.route.id}function D5(){var t;let e=k.useContext(VS),n=R5(),r=HS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function O5(){let{router:t}=P5(zS.UseNavigateStable),e=HS(BS.UseNavigateStable),n=k.useRef(!1);return FS(()=>{n.current=!0}),k.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bd({fromRouteId:e},a)))},[t,e])}const u2={};function L5(t,e,n){u2[t]||(u2[t]=!0)}function V5(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function F5(t){let{to:e,replace:n,state:r,relative:i}=t;eu()||Gn(!1);let{future:a,static:c}=k.useContext(Co),{matches:u}=k.useContext(Na),{pathname:d}=ls(),f=Qr(),g=Mx(e,Rx(u,a.v7_relativeSplatPath),d,i==="path"),y=JSON.stringify(g);return k.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:i}),[f,y,i,n,r]),null}function mr(t){Gn(!1)}function U5(t){let{basename:e="/",children:n=null,location:r,navigationType:i=lo.Pop,navigator:a,static:c=!1,future:u}=t;eu()&&Gn(!1);let d=e.replace(/^\/*/,"/"),f=k.useMemo(()=>({basename:d,navigator:a,static:c,future:bd({v7_relativeSplatPath:!1},u)}),[d,u,a,c]);typeof r=="string"&&(r=Zc(r));let{pathname:g="/",search:y="",hash:x="",state:w=null,key:S="default"}=r,b=k.useMemo(()=>{let N=Px(g,d);return N==null?null:{location:{pathname:N,search:y,hash:x,state:w,key:S},navigationType:i}},[d,g,y,x,w,S,i]);return b==null?null:k.createElement(Co.Provider,{value:f},k.createElement(ep.Provider,{children:n,value:b}))}function $5(t){let{children:e,location:n}=t;return S5(fy(e),n)}new Promise(()=>{});function fy(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let a=[...e,i];if(r.type===k.Fragment){n.push.apply(n,fy(r.props.children,a));return}r.type!==mr&&Gn(!1),!r.props.index||!r.props.children||Gn(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=fy(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},my.apply(this,arguments)}function z5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function B5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function H5(t,e){return t.button===0&&(!e||e==="_self")&&!B5(t)}function py(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function W5(t,e){let n=py(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const q5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],G5="6";try{window.__reactRouterVersion=G5}catch{}const K5="startTransition",d2=dy[K5];function X5(t){let{basename:e,children:n,future:r,window:i}=t,a=k.useRef();a.current==null&&(a.current=YI({window:i,v5Compat:!0}));let c=a.current,[u,d]=k.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=k.useCallback(y=>{f&&d2?d2(()=>d(y)):d(y)},[d,f]);return k.useLayoutEffect(()=>c.listen(g),[c,g]),k.useEffect(()=>V5(r),[r]),k.createElement(U5,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const Y5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,It=k.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y}=e,x=z5(e,q5),{basename:w}=k.useContext(Co),S,b=!1;if(typeof f=="string"&&Q5.test(f)&&(S=f,Y5))try{let I=new URL(window.location.href),V=f.startsWith("//")?new URL(I.protocol+f):new URL(f),$=Px(V.pathname,w);V.origin===I.origin&&$!=null?f=$+V.search+V.hash:b=!0}catch{}let N=E5(f,{relative:i}),j=J5(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:i,viewTransition:y});function O(I){r&&r(I),I.defaultPrevented||j(I)}return k.createElement("a",my({},x,{href:S||N,onClick:b||a?r:O,ref:n,target:d}))});var h2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(h2||(h2={}));var f2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(f2||(f2={}));function J5(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:c,viewTransition:u}=e===void 0?{}:e,d=Qr(),f=ls(),g=$S(t,{relative:c});return k.useCallback(y=>{if(H5(y,n)){y.preventDefault();let x=r!==void 0?r:fm(f)===fm(g);d(t,{replace:x,state:i,preventScrollReset:a,relative:c,viewTransition:u})}},[f,d,g,r,i,n,t,a,c,u])}function Ox(t){let e=k.useRef(py(t)),n=k.useRef(!1),r=ls(),i=k.useMemo(()=>W5(r.search,n.current?null:e.current),[r.search]),a=Qr(),c=k.useCallback((u,d)=>{const f=py(typeof u=="function"?u(i):u);n.current=!0,a("?"+f,d)},[a,i]);return[i,c]}const WS=k.createContext(),Z5=({children:t})=>{const[e,n]=k.useState(()=>{const w=localStorage.getItem("carrito");return w?JSON.parse(w):[]}),[r,i]=k.useState(()=>{const w=localStorage.getItem("favoritos");return w?JSON.parse(w):[]});k.useEffect(()=>{localStorage.setItem("carrito",JSON.stringify(e))},[e]),k.useEffect(()=>{n(w=>w.map(S=>{if(S.maxStock!==void 0)return S;if(Array.isArray(S.variantes)&&S.colorSeleccionado){const b=S.variantes.find(N=>N.color===S.colorSeleccionado);if(b&&b.cantidad!==void 0)return{...S,maxStock:Number(b.cantidad)||0}}if(S.cantidadProducto!==void 0){const b=Number(S.cantidadProducto);if(!Number.isNaN(b))return{...S,maxStock:b}}return S}))},[]),k.useEffect(()=>{n(w=>{const S=new Map;for(const b of w){const N=`${b.id}__${b.colorSeleccionado??""}`,j=S.get(N);j?S.set(N,{...j,cantidad:(Number(j.cantidad)||0)+(Number(b.cantidad)||0),maxStock:Math.max(Number(j.maxStock??0)||0,Number(b.maxStock??0)||0)||j.maxStock||b.maxStock}):S.set(N,{...b})}return Array.from(S.values())})},[]),k.useEffect(()=>{localStorage.setItem("favoritos",JSON.stringify(r))},[r]);const a=w=>{try{const S=(w??"").toString().trim();return S||null}catch{return null}},c=(w,S=null)=>{n(b=>{const N=a(S),j=N&&Array.isArray(w.variantes)?w.variantes.find(V=>a(V.color)===N):null,O=(j&&Number(j.cantidad))??(w.maxStock!==void 0?Number(w.maxStock):void 0)??(w.cantidad!==void 0?Number(w.cantidad):void 0)??1/0,I=b.find(V=>V.id===w.id&&a(V.colorSeleccionado)===N);if(I){const V=Number.isFinite(O)?O:1/0,$=V;return I.cantidad<$?b.map(q=>q.id===w.id&&a(q.colorSeleccionado)===N?{...q,cantidad:q.cantidad+1,maxStock:V}:q):b}return O>0?[...b,{...w,cantidad:1,colorSeleccionado:N,maxStock:O}]:b})},u=(w,S=null)=>{const b=a(S);n(N=>N.map(j=>j.id===w&&a(j.colorSeleccionado)===b?{...j,cantidad:j.cantidad-1}:j).filter(j=>j.cantidad>0))},d=(w,S=null)=>{const b=a(S);n(N=>N.filter(j=>!(j.id===w&&a(j.colorSeleccionado)===b)))},f=w=>{n(S=>S.find(N=>N.id===w.id)?S.filter(N=>N.id!==w.id):[...S,{...w,cantidad:1}])},g=w=>{i(S=>S.find(b=>b.id===w.id)?S:[...S,w])},y=w=>{i(S=>S.filter(b=>b.id!==w))},x=()=>{n([])};return o.jsx(WS.Provider,{value:{carrito:e,favoritos:r,agregarAlCarrito:c,eliminarUnidadDelCarrito:u,quitarDelCarrito:d,toggleCarrito:f,agregarAFavoritos:g,eliminarDeFavoritos:y,vaciarCarrito:x},children:t})},Kd=()=>k.useContext(WS),qS=k.createContext();function tu(){return k.useContext(qS)}function e3({children:t}){const[e,n]=k.useState(!1),[r,i]=k.useState("login");function a(u="login"){i(u),n(!0)}function c(){n(!1)}return o.jsx(qS.Provider,{value:{modalAbierto:e,setModalAbierto:n,abrirModal:a,cerrarModal:c,modo:r,setModo:i},children:t})}const t3=()=>{};var m2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},n3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],c=t[n++],u=t[n++],d=((i&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},KS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],c=i+1<t.length,u=c?t[i+1]:0,d=i+2<t.length,f=d?t[i+2]:0,g=a>>2,y=(a&3)<<4|u>>4;let x=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(x=64)),r.push(n[g],n[y],n[x],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||u==null||f==null||y==null)throw new r3;const x=a<<2|u>>4;if(r.push(x),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const S=f<<6&192|y;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i3=function(t){const e=GS(t);return KS.encodeByteArray(e,!0)},mm=function(t){return i3(t).replace(/\./g,"")},XS=function(t){try{return KS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=()=>s3().__FIREBASE_DEFAULTS__,o3=()=>{if(typeof process>"u"||typeof m2>"u")return;const t=m2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&XS(t[1]);return e&&JSON.parse(e)},tp=()=>{try{return t3()||a3()||o3()||l3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YS=t=>{var e,n;return(n=(e=tp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},QS=t=>{const e=YS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},JS=()=>{var t;return(t=tp())===null||t===void 0?void 0:t.config},ZS=t=>{var e;return(e=tp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mm(JSON.stringify(n)),mm(JSON.stringify(c)),""].join(".")}const sd={};function u3(){const t={prod:[],emulator:[]};for(const e of Object.keys(sd))sd[e]?t.emulator.push(e):t.prod.push(e);return t}function d3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let p2=!1;function Vx(t,e){if(typeof window>"u"||typeof document>"u"||!jo(window.location.host)||sd[t]===e||sd[t]||p2)return;sd[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=u3().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{p2=!0,c()},x}function g(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=d3(r),w=n("text"),S=document.getElementById(w)||document.createElement("span"),b=n("learnmore"),N=document.getElementById(b)||document.createElement("a"),j=n("preprendIcon"),O=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const I=x.element;u(I),g(N,b);const V=f();d(O,j),I.append(O,S,N,V),document.body.appendChild(I)}a?(S.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function h3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ur())}function f3(){var t;const e=(t=tp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function g3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function y3(){const t=Ur();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function x3(){return!f3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v3(){try{return typeof indexedDB=="object"}catch{return!1}}function b3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="FirebaseError";class Ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w3,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xd.prototype.create)}}class Xd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?_3(a,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new Ws(i,u,r)}}function _3(t,e){return t.replace(E3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const E3=/\{\$([^}]+)}/g;function k3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],c=e[i];if(g2(a)&&g2(c)){if(!vl(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function g2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Qu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function S3(t,e){const n=new T3(t,e);return n.subscribe.bind(n)}class T3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_0),i.error===void 0&&(i.error=_0),i.complete===void 0&&(i.complete=_0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){return t&&t._delegate?t._delegate:t}class go{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new c3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A3(e))try{this.getOrInitializeService({instanceIdentifier:el})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=el){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=el){return this.instances.has(e)}getOptions(e=el){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:j3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=el){return this.component?this.component.multipleInstances?e:el:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j3(t){return t===el?void 0:t}function A3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new C3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ut||(Ut={}));const P3={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},R3=Ut.INFO,M3={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},D3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=M3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fx{constructor(e){this.name=e,this._logLevel=R3,this._logHandler=D3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...e),this._logHandler(this,Ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...e),this._logHandler(this,Ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...e),this._logHandler(this,Ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...e),this._logHandler(this,Ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...e),this._logHandler(this,Ut.ERROR,...e)}}const O3=(t,e)=>e.some(n=>t instanceof n);let y2,x2;function L3(){return y2||(y2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V3(){return x2||(x2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tT=new WeakMap,gy=new WeakMap,nT=new WeakMap,E0=new WeakMap,Ux=new WeakMap;function F3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(ho(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&tT.set(n,t)}).catch(()=>{}),Ux.set(e,t),e}function U3(t){if(gy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});gy.set(t,e)}let yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $3(t){yy=t(yy)}function z3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(k0(this),e,...n);return nT.set(r,e.sort?e.sort():[e]),ho(r)}:V3().includes(t)?function(...e){return t.apply(k0(this),e),ho(tT.get(this))}:function(...e){return ho(t.apply(k0(this),e))}}function B3(t){return typeof t=="function"?z3(t):(t instanceof IDBTransaction&&U3(t),O3(t,L3())?new Proxy(t,yy):t)}function ho(t){if(t instanceof IDBRequest)return F3(t);if(E0.has(t))return E0.get(t);const e=B3(t);return e!==t&&(E0.set(t,e),Ux.set(e,t)),e}const k0=t=>Ux.get(t);function H3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(t,e),u=ho(c);return r&&c.addEventListener("upgradeneeded",d=>{r(ho(c.result),d.oldVersion,d.newVersion,ho(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const W3=["get","getKey","getAll","getAllKeys","count"],q3=["put","add","delete","clear"],S0=new Map;function v2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(S0.get(e))return S0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=q3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||W3.includes(n)))return;const a=async function(c,...u){const d=this.transaction(c,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&d.done]))[0]};return S0.set(e,a),a}$3(t=>({...t,get:(e,n,r)=>v2(e,n)||t.get(e,n,r),has:(e,n)=>!!v2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function K3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xy="@firebase/app",b2="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new Fx("@firebase/app"),X3="@firebase/app-compat",Y3="@firebase/analytics-compat",Q3="@firebase/analytics",J3="@firebase/app-check-compat",Z3="@firebase/app-check",eP="@firebase/auth",tP="@firebase/auth-compat",nP="@firebase/database",rP="@firebase/data-connect",iP="@firebase/database-compat",sP="@firebase/functions",aP="@firebase/functions-compat",oP="@firebase/installations",lP="@firebase/installations-compat",cP="@firebase/messaging",uP="@firebase/messaging-compat",dP="@firebase/performance",hP="@firebase/performance-compat",fP="@firebase/remote-config",mP="@firebase/remote-config-compat",pP="@firebase/storage",gP="@firebase/storage-compat",yP="@firebase/firestore",xP="@firebase/ai",vP="@firebase/firestore-compat",bP="firebase",wP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="[DEFAULT]",_P={[xy]:"fire-core",[X3]:"fire-core-compat",[Q3]:"fire-analytics",[Y3]:"fire-analytics-compat",[Z3]:"fire-app-check",[J3]:"fire-app-check-compat",[eP]:"fire-auth",[tP]:"fire-auth-compat",[nP]:"fire-rtdb",[rP]:"fire-data-connect",[iP]:"fire-rtdb-compat",[sP]:"fire-fn",[aP]:"fire-fn-compat",[oP]:"fire-iid",[lP]:"fire-iid-compat",[cP]:"fire-fcm",[uP]:"fire-fcm-compat",[dP]:"fire-perf",[hP]:"fire-perf-compat",[fP]:"fire-rc",[mP]:"fire-rc-compat",[pP]:"fire-gcs",[gP]:"fire-gcs-compat",[yP]:"fire-fst",[vP]:"fire-fst-compat",[xP]:"fire-vertex","fire-js":"fire-js",[bP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Map,EP=new Map,by=new Map;function w2(t,e){try{t.container.addComponent(e)}catch(n){va.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bl(t){const e=t.name;if(by.has(e))return va.debug(`There were multiple attempts to register component ${e}.`),!1;by.set(e,t);for(const n of pm.values())w2(n,t);for(const n of EP.values())w2(n,t);return!0}function np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new Xd("app","Firebase",kP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=wP;function rT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw fo.create("bad-app-name",{appName:String(i)});if(n||(n=JS()),!n)throw fo.create("no-options");const a=pm.get(i);if(a){if(vl(n,a.options)&&vl(r,a.config))return a;throw fo.create("duplicate-app",{appName:i})}const c=new I3(i);for(const d of by.values())c.addComponent(d);const u=new SP(n,r,c);return pm.set(i,u),u}function $x(t=vy){const e=pm.get(t);if(!e&&t===vy&&JS())return rT();if(!e)throw fo.create("no-app",{appName:t});return e}function Is(t,e,n){var r;let i=(r=_P[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),va.warn(u.join(" "));return}bl(new go(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="firebase-heartbeat-database",NP=1,wd="firebase-heartbeat-store";let T0=null;function iT(){return T0||(T0=H3(TP,NP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wd)}catch(n){console.warn(n)}}}}).catch(t=>{throw fo.create("idb-open",{originalErrorMessage:t.message})})),T0}async function CP(t){try{const n=(await iT()).transaction(wd),r=await n.objectStore(wd).get(sT(t));return await n.done,r}catch(e){if(e instanceof Ws)va.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});va.warn(n.message)}}}async function _2(t,e){try{const r=(await iT()).transaction(wd,"readwrite");await r.objectStore(wd).put(e,sT(t)),await r.done}catch(n){if(n instanceof Ws)va.warn(n.message);else{const r=fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});va.warn(r.message)}}}function sT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=1024,AP=30;class IP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=E2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>AP){const c=MP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){va.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=E2(),{heartbeatsToSend:r,unsentEntries:i}=PP(this._heartbeatsCache.heartbeats),a=mm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return va.warn(n),""}}}function E2(){return new Date().toISOString().substring(0,10)}function PP(t,e=jP){const n=[];let r=t.slice();for(const i of t){const a=n.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),k2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),k2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v3()?b3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function k2(t){return mm(JSON.stringify({version:2,heartbeats:t})).length}function MP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){bl(new go("platform-logger",e=>new G3(e),"PRIVATE")),bl(new go("heartbeat",e=>new IP(e),"PRIVATE")),Is(xy,b2,t),Is(xy,b2,"esm2017"),Is("fire-js","")}DP("");function zx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Al(t,e,n,r){function i(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function u(g){try{f(r.next(g))}catch(y){c(y)}}function d(g){try{f(r.throw(g))}catch(y){c(y)}}function f(g){g.done?a(g.value):i(g.value).then(u,d)}f((r=r.apply(t,e||[])).next())})}function aT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OP=aT,oT=new Xd("auth","Firebase",aT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Fx("@firebase/auth");function LP(t,...e){gm.logLevel<=Ut.WARN&&gm.warn(`Auth (${jl}): ${t}`,...e)}function Hf(t,...e){gm.logLevel<=Ut.ERROR&&gm.error(`Auth (${jl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,...e){throw Bx(t,...e)}function Ps(t,...e){return Bx(t,...e)}function lT(t,e,n){const r=Object.assign(Object.assign({},OP()),{[e]:n});return new Xd("auth","Firebase",r).create(e,{appName:t.name})}function ga(t){return lT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oT.create(t,...e)}function gt(t,e,...n){if(!t)throw Bx(e,...n)}function ma(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hf(e),new Error(e)}function ba(t,e){t||ma(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VP(){return S2()==="http:"||S2()==="https:"}function S2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VP()||p3()||"connection"in navigator)?navigator.onLine:!0}function UP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,ba(n>e,"Short delay should be less than long delay!"),this.isMobile=h3()||g3()}get(){return FP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t,e){ba(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BP=new Qd(3e4,6e4);function Ao(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ca(t,e,n,r,i={}){return uT(t,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Yd(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},a);return m3()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&jo(t.emulatorConfig.host)&&(f.credentials="include"),cT.fetch()(await dT(t,t.config.apiHost,n,u),f)})}async function uT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$P),e);try{const i=new WP(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw bf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw bf(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw bf(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw bf(t,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw lT(t,g,f);ss(t,g)}}catch(i){if(i instanceof Ws)throw i;ss(t,"network-request-failed",{message:String(i)})}}async function Jd(t,e,n,r,i={}){const a=await Ca(t,e,n,r,i);return"mfaPendingCredential"in a&&ss(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function dT(t,e,n,r){const i=`${e}${n}?${r}`,a=t,c=a.config.emulator?Hx(t.config,i):`${t.config.apiScheme}://${i}`;return zP.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function HP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ps(this.auth,"network-request-failed")),BP.get())})}}function bf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ps(t,e,r);return i.customData._tokenResponse=n,i}function T2(t){return t!==void 0&&t.enterprise!==void 0}class qP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GP(t,e){return Ca(t,"GET","/v2/recaptchaConfig",Ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KP(t,e){return Ca(t,"POST","/v1/accounts:delete",e)}async function ym(t,e){return Ca(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XP(t,e=!1){const n=mn(t),r=await n.getIdToken(e),i=Wx(r);gt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:ad(N0(i.auth_time)),issuedAtTime:ad(N0(i.iat)),expirationTime:ad(N0(i.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function N0(t){return Number(t)*1e3}function Wx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{const i=XS(n);return i?JSON.parse(i):(Hf("Failed to decode base64 JWT payload"),null)}catch(i){return Hf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function N2(t){const e=Wx(t);return gt(e,"internal-error"),gt(typeof e.exp<"u","internal-error"),gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ws&&YP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Bc(t,ym(n,{idToken:r}));gt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?hT(a.providerUserInfo):[],u=ZP(t.providerData,c),d=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),g=d?f:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new _y(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function JP(t){const e=mn(t);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hT(t){return t.map(e=>{var{providerId:n}=e,r=zx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e){const n=await uT(t,{},async()=>{const r=Yd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,c=await dT(t,i,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&jo(t.emulatorConfig.host)&&(d.credentials="include"),cT.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tR(t,e){return Ca(t,"POST","/v2/accounts:revokeToken",Ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt(typeof e.idToken<"u","internal-error"),gt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){gt(e.length!==0,"internal-error");const n=N2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await eR(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,c=new Oc;return r&&(gt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(gt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(gt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oc,this.toJSON())}_performRefresh(){return ma("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t,e){gt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=zx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new _y(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return gt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XP(this,e)}reload(){return JP(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wi(this.auth.app))return Promise.reject(ga(this.auth));const e=await this.getIdToken();return await Bc(this,KP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,c,u,d,f,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(u=n.tenantId)!==null&&u!==void 0?u:void 0,N=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,j=(f=n.createdAt)!==null&&f!==void 0?f:void 0,O=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:I,emailVerified:V,isAnonymous:$,providerData:q,stsTokenManager:D}=n;gt(I&&D,e,"internal-error");const R=Oc.fromJSON(this.name,D);gt(typeof I=="string",e,"internal-error"),Za(y,e.name),Za(x,e.name),gt(typeof V=="boolean",e,"internal-error"),gt(typeof $=="boolean",e,"internal-error"),Za(w,e.name),Za(S,e.name),Za(b,e.name),Za(N,e.name),Za(j,e.name),Za(O,e.name);const P=new is({uid:I,auth:e,email:x,emailVerified:V,displayName:y,isAnonymous:$,photoURL:S,phoneNumber:w,tenantId:b,stsTokenManager:R,createdAt:j,lastLoginAt:O});return q&&Array.isArray(q)&&(P.providerData=q.map(T=>Object.assign({},T))),N&&(P._redirectEventId=N),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Oc;i.updateFromServerResponse(n);const a=new is({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];gt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?hT(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),u=new Oc;u.updateFromIdToken(r);const d=new is({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _y(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new Map;function pa(t){ba(t instanceof Function,"Expected a class definition");let e=C2.get(t);return e?(ba(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fT.type="NONE";const j2=fT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,n){return`firebase:${t}:${e}:${n}`}class Lc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Wf(this.userKey,i.apiKey,a),this.fullPersistenceKey=Wf("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ym(this.auth,{idToken:e}).catch(()=>{});return n?is._fromGetAccountInfoResponse(this.auth,n,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Lc(pa(j2),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||pa(j2);const c=Wf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const x=await ym(e,{idToken:g}).catch(()=>{});if(!x)break;y=await is._fromGetAccountInfoResponse(e,x,g)}else y=is._fromJSON(e,g);f!==a&&(u=y),a=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Lc(a,e,r):(a=d[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new Lc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vT(e))return"Blackberry";if(bT(e))return"Webos";if(pT(e))return"Safari";if((e.includes("chrome/")||gT(e))&&!e.includes("edge/"))return"Chrome";if(xT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mT(t=Ur()){return/firefox\//i.test(t)}function pT(t=Ur()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gT(t=Ur()){return/crios\//i.test(t)}function yT(t=Ur()){return/iemobile/i.test(t)}function xT(t=Ur()){return/android/i.test(t)}function vT(t=Ur()){return/blackberry/i.test(t)}function bT(t=Ur()){return/webos/i.test(t)}function qx(t=Ur()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nR(t=Ur()){var e;return qx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rR(){return y3()&&document.documentMode===10}function wT(t=Ur()){return qx(t)||xT(t)||bT(t)||vT(t)||/windows phone/i.test(t)||yT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t,e=[]){let n;switch(t){case"Browser":n=A2(Ur());break;case"Worker":n=`${A2(Ur())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const d=e(a);c(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e={}){return Ca(t,"GET","/v2/passwordPolicy",Ao(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=6;class oR{constructor(e){var n,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:aR,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,c,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I2(this),this.idTokenSubscription=new I2(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pa(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Lc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ym(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===u)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wi(this.app))return Promise.reject(ga(this));const n=e?mn(e):null;return n&&gt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wi(this.app)?Promise.reject(ga(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wi(this.app)?Promise.reject(ga(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sR(this),n=new oR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pa(e)||this._popupRedirectResolver;gt(n,this,"argument-error"),this.redirectPersistenceManager=await Lc.create(this,[pa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_T(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Il(t){return mn(t)}class I2{constructor(e){this.auth=e,this.observer=null,this.addObserver=S3(n=>this.observer=n)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cR(t){rp=t}function ET(t){return rp.loadJS(t)}function uR(){return rp.recaptchaEnterpriseScript}function dR(){return rp.gapiScript}function hR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class fR{constructor(){this.enterprise=new mR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class mR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const pR="recaptcha-enterprise",kT="NO_RECAPTCHA";class gR{constructor(e){this.type=pR,this.auth=Il(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{GP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new qP(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function i(a,c,u){const d=window.grecaptcha;T2(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(kT)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fR().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&T2(window.grecaptcha))i(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=uR();d.length!==0&&(d+=u),ET(d).then(()=>{i(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function P2(t,e,n,r=!1,i=!1){const a=new gR(t);let c;if(i)c=kT;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ey(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await P2(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await P2(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t,e){const n=np(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(vl(a,e??{}))return i;ss(i,"already-initialized")}return n.initialize({options:e})}function xR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vR(t,e,n){const r=Il(t);gt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=ST(e),{host:c,port:u}=bR(e),d=u===null?"":`:${u}`,f={url:`${a}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){gt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),gt(vl(f,r.config.emulator)&&vl(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,jo(c)?(Lx(`${a}//${c}${d}`),Vx("Auth",!0)):wR()}function ST(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bR(t){const e=ST(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:R2(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:R2(c)}}}function R2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ma("not implemented")}_getIdTokenResponse(e){return ma("not implemented")}_linkToIdToken(e,n){return ma("not implemented")}_getReauthenticationResolver(e){return ma("not implemented")}}async function _R(t,e){return Ca(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e){return Jd(t,"POST","/v1/accounts:signInWithPassword",Ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return Jd(t,"POST","/v1/accounts:signInWithEmailLink",Ao(t,e))}async function SR(t,e){return Jd(t,"POST","/v1/accounts:signInWithEmailLink",Ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends Gx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new _d(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _d(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ey(e,n,"signInWithPassword",ER);case"emailLink":return kR(e,{email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ey(e,r,"signUpPassword",_R);case"emailLink":return SR(e,{idToken:n,email:this._email,oobCode:this._password});default:ss(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(t,e){return Jd(t,"POST","/v1/accounts:signInWithIdp",Ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="http://localhost";class wl extends Gx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=zx(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new wl(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Vc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vc(e,n)}buildRequest(){const e={requestUri:TR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CR(t){const e=Yu(Qu(t)).link,n=e?Yu(Qu(e)).deep_link_id:null,r=Yu(Qu(t)).deep_link_id;return(r?Yu(Qu(r)).link:null)||r||n||e||t}class Kx{constructor(e){var n,r,i,a,c,u;const d=Yu(Qu(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,y=NR((i=d.mode)!==null&&i!==void 0?i:null);gt(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=d.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=CR(e);try{return new Kx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this.providerId=nu.PROVIDER_ID}static credential(e,n){return _d._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Kx.parseLink(n);return gt(r,"argument-error"),_d._fromEmailAndCode(e,r.code,r.tenantId)}}nu.PROVIDER_ID="password";nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends TT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Zd{constructor(){super("facebook.com")}static credential(e){return wl._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.FACEBOOK_SIGN_IN_METHOD="facebook.com";no.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Zd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wl._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ro.credential(n,r)}catch{return null}}}ro.GOOGLE_SIGN_IN_METHOD="google.com";ro.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Zd{constructor(){super("github.com")}static credential(e){return wl._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.GITHUB_SIGN_IN_METHOD="github.com";io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Zd{constructor(){super("twitter.com")}static credential(e,n){return wl._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return so.credential(n,r)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return Jd(t,"POST","/v1/accounts:signUp",Ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await is._fromIdTokenResponse(e,r,i),c=M2(r);return new _l({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=M2(r);return new _l({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function M2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends Ws{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new vm(e,n,r,i)}}function NT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?vm._fromErrorAndOperation(t,a,e,r):a})}async function AR(t,e,n=!1){const r=await Bc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _l._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e,n=!1){const{auth:r}=t;if(wi(r.app))return Promise.reject(ga(r));const i="reauthenticate";try{const a=await Bc(t,NT(r,i,e,t),n);gt(a.idToken,r,"internal-error");const c=Wx(a.idToken);gt(c,r,"internal-error");const{sub:u}=c;return gt(t.uid===u,r,"user-mismatch"),_l._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ss(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(t,e,n=!1){if(wi(t.app))return Promise.reject(ga(t));const r="signIn",i=await NT(t,r,e),a=await _l._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function PR(t,e){return CT(Il(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(t){const e=Il(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RR(t,e,n){if(wi(t.app))return Promise.reject(ga(t));const r=Il(t),c=await Ey(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&jT(t),d}),u=await _l._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function MR(t,e,n){return wi(t.app)?Promise.reject(ga(t)):PR(mn(t),nu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){return Ca(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=mn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Bc(r,DR(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function OR(t,e,n,r){return mn(t).onIdTokenChanged(e,n,r)}function LR(t,e,n){return mn(t).beforeAuthStateChanged(e,n)}function VR(t,e,n,r){return mn(t).onAuthStateChanged(e,n,r)}function FR(t){return mn(t).signOut()}const bm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bm,"1"),this.storage.removeItem(bm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=1e3,$R=10;class IT extends AT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);rR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$R):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IT.type="LOCAL";const zR=IT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT extends AT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PT.type="SESSION";const RT=PT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ip(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async f=>f(n.origin,a)),d=await BR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((u,d)=>{const f=Xx("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const x=y;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(g),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(){return window}function WR(t){Rs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return typeof Rs().WorkerGlobalScope<"u"&&typeof Rs().importScripts=="function"}async function qR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function KR(){return MT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="firebaseLocalStorageDb",XR=1,wm="firebaseLocalStorage",OT="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sp(t,e){return t.transaction([wm],e?"readwrite":"readonly").objectStore(wm)}function YR(){const t=indexedDB.deleteDatabase(DT);return new eh(t).toPromise()}function ky(){const t=indexedDB.open(DT,XR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wm,{keyPath:OT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wm)?e(r):(r.close(),await YR(),e(await ky()))})})}async function D2(t,e,n){const r=sp(t,!0).put({[OT]:e,value:n});return new eh(r).toPromise()}async function QR(t,e){const n=sp(t,!1).get(e),r=await new eh(n).toPromise();return r===void 0?null:r.value}function O2(t,e){const n=sp(t,!0).delete(e);return new eh(n).toPromise()}const JR=800,ZR=3;class LT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ky(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ip._getInstance(KR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qR(),!this.activeServiceWorker)return;this.sender=new HR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ky();return await D2(e,bm,"1"),await O2(e,bm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>D2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>O2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=sp(i,!1).getAll();return new eh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LT.type="LOCAL";const e6=LT;new Qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t,e){return e?pa(e):(gt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx extends Gx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function n6(t){return CT(t.auth,new Yx(t),t.bypassAuthState)}function r6(t){const{auth:e,user:n}=t;return gt(n,e,"internal-error"),IR(n,new Yx(t),t.bypassAuthState)}async function i6(t){const{auth:e,user:n}=t;return gt(n,e,"internal-error"),AR(n,new Yx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n6;case"linkViaPopup":case"linkViaRedirect":return i6;case"reauthViaPopup":case"reauthViaRedirect":return r6;default:ss(this.auth,"internal-error")}}resolve(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=new Qd(2e3,1e4);class Ac extends VT{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ac.currentPopupAction&&Ac.currentPopupAction.cancel(),Ac.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){ba(this.filter.length===1,"Popup operations only handle one event");const e=Xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ac.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,s6.get())};e()}}Ac.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="pendingRedirect",qf=new Map;class o6 extends VT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qf.get(this.auth._key());if(!e){try{const r=await l6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qf.set(this.auth._key(),e)}return this.bypassAuthState||qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l6(t,e){const n=d6(e),r=u6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function c6(t,e){qf.set(t._key(),e)}function u6(t){return pa(t._redirectPersistence)}function d6(t){return Wf(a6,t.config.apiKey,t.name)}async function h6(t,e,n=!1){if(wi(t.app))return Promise.reject(ga(t));const r=Il(t),i=t6(r,e),c=await new o6(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=10*60*1e3;class m6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!p6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ps(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f6&&this.cachedEventUids.clear(),this.cachedEventUids.has(L2(e))}saveEventToCache(e){this.cachedEventUids.add(L2(e)),this.lastProcessedEventTime=Date.now()}}function L2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function p6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(t,e={}){return Ca(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,x6=/^https?/;async function v6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await g6(t);for(const n of e)try{if(b6(n))return}catch{}ss(t,"unauthorized-domain")}function b6(t){const e=wy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!x6.test(n))return!1;if(y6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=new Qd(3e4,6e4);function V2(){const t=Rs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _6(t){return new Promise((e,n)=>{var r,i,a;function c(){V2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V2(),n(Ps(t,"network-request-failed"))},timeout:w6.get()})}if(!((i=(r=Rs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Rs().gapi)===null||a===void 0)&&a.load)c();else{const u=hR("iframefcb");return Rs()[u]=()=>{gapi.load?c():n(Ps(t,"network-request-failed"))},ET(`${dR()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function E6(t){return Gf=Gf||_6(t),Gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=new Qd(5e3,15e3),S6="__/auth/iframe",T6="emulator/auth/iframe",N6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function j6(t){const e=t.config;gt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hx(e,T6):`https://${t.config.authDomain}/${S6}`,r={apiKey:e.apiKey,appName:t.name,v:jl},i=C6.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Yd(r).slice(1)}`}async function A6(t){const e=await E6(t),n=Rs().gapi;return gt(n,t,"internal-error"),e.open({where:document.body,url:j6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N6,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Ps(t,"network-request-failed"),u=Rs().setTimeout(()=>{a(c)},k6.get());function d(){Rs().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P6=500,R6=600,M6="_blank",D6="http://localhost";class F2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O6(t,e,n,r=P6,i=R6){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},I6),{width:r.toString(),height:i.toString(),top:a,left:c}),f=Ur().toLowerCase();n&&(u=gT(f)?M6:n),mT(f)&&(e=e||D6,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[w,S])=>`${x}${w}=${S},`,"");if(nR(f)&&u!=="_self")return L6(e||"",u),new F2(null);const y=window.open(e||"",u,g);gt(y,t,"popup-blocked");try{y.focus()}catch{}return new F2(y)}function L6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="__/auth/handler",F6="emulator/auth/handler",U6=encodeURIComponent("fac");async function U2(t,e,n,r,i,a){gt(t.config.authDomain,t,"auth-domain-config-required"),gt(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jl,eventId:i};if(e instanceof TT){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",k3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Zd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await t._getAppCheckToken(),f=d?`#${U6}=${encodeURIComponent(d)}`:"";return`${$6(t)}?${Yd(u).slice(1)}${f}`}function $6({config:t}){return t.emulator?Hx(t,F6):`https://${t.authDomain}/${V6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="webStorageSupport";class z6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RT,this._completeRedirectFn=h6,this._overrideRedirectResult=c6}async _openPopup(e,n,r,i){var a;ba((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await U2(e,n,r,wy(),i);return O6(e,c,Xx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await U2(e,n,r,wy(),i);return WR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(ba(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await A6(e),r=new m6(e);return n.register("authEvent",i=>(gt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(C0,{type:C0},i=>{var a;const c=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[C0];c!==void 0&&n(!!c),ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=v6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wT()||pT()||qx()}}const B6=z6;var $2="@firebase/auth",z2="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q6(t){bl(new go("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;gt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_T(t)},f=new lR(r,i,a,d);return xR(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bl(new go("auth-internal",e=>{const n=Il(e.getProvider("auth").getImmediate());return(r=>new H6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Is($2,z2,W6(t)),Is($2,z2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=5*60,K6=ZS("authIdTokenMaxAge")||G6;let B2=null;const X6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>K6)return;const i=n==null?void 0:n.token;B2!==i&&(B2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Y6(t=$x()){const e=np(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yR(t,{popupRedirectResolver:B6,persistence:[e6,zR,RT]}),r=ZS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=X6(a.toString());LR(n,c,()=>c(n.currentUser)),OR(n,u=>c(u))}}const i=YS("auth");return i&&vR(n,`http://${i}`),n}function Q6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ps("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Q6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q6("Browser");var H2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mo,UT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function P(){}P.prototype=R.prototype,D.D=R.prototype,D.prototype=new P,D.prototype.constructor=D,D.C=function(T,L,U){for(var A=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)A[oe-2]=arguments[oe];return R.prototype[L].apply(T,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,R,P){P||(P=0);var T=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)T[L]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(L=0;16>L;++L)T[L]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=D.g[0],P=D.g[1],L=D.g[2];var U=D.g[3],A=R+(U^P&(L^U))+T[0]+3614090360&4294967295;R=P+(A<<7&4294967295|A>>>25),A=U+(L^R&(P^L))+T[1]+3905402710&4294967295,U=R+(A<<12&4294967295|A>>>20),A=L+(P^U&(R^P))+T[2]+606105819&4294967295,L=U+(A<<17&4294967295|A>>>15),A=P+(R^L&(U^R))+T[3]+3250441966&4294967295,P=L+(A<<22&4294967295|A>>>10),A=R+(U^P&(L^U))+T[4]+4118548399&4294967295,R=P+(A<<7&4294967295|A>>>25),A=U+(L^R&(P^L))+T[5]+1200080426&4294967295,U=R+(A<<12&4294967295|A>>>20),A=L+(P^U&(R^P))+T[6]+2821735955&4294967295,L=U+(A<<17&4294967295|A>>>15),A=P+(R^L&(U^R))+T[7]+4249261313&4294967295,P=L+(A<<22&4294967295|A>>>10),A=R+(U^P&(L^U))+T[8]+1770035416&4294967295,R=P+(A<<7&4294967295|A>>>25),A=U+(L^R&(P^L))+T[9]+2336552879&4294967295,U=R+(A<<12&4294967295|A>>>20),A=L+(P^U&(R^P))+T[10]+4294925233&4294967295,L=U+(A<<17&4294967295|A>>>15),A=P+(R^L&(U^R))+T[11]+2304563134&4294967295,P=L+(A<<22&4294967295|A>>>10),A=R+(U^P&(L^U))+T[12]+1804603682&4294967295,R=P+(A<<7&4294967295|A>>>25),A=U+(L^R&(P^L))+T[13]+4254626195&4294967295,U=R+(A<<12&4294967295|A>>>20),A=L+(P^U&(R^P))+T[14]+2792965006&4294967295,L=U+(A<<17&4294967295|A>>>15),A=P+(R^L&(U^R))+T[15]+1236535329&4294967295,P=L+(A<<22&4294967295|A>>>10),A=R+(L^U&(P^L))+T[1]+4129170786&4294967295,R=P+(A<<5&4294967295|A>>>27),A=U+(P^L&(R^P))+T[6]+3225465664&4294967295,U=R+(A<<9&4294967295|A>>>23),A=L+(R^P&(U^R))+T[11]+643717713&4294967295,L=U+(A<<14&4294967295|A>>>18),A=P+(U^R&(L^U))+T[0]+3921069994&4294967295,P=L+(A<<20&4294967295|A>>>12),A=R+(L^U&(P^L))+T[5]+3593408605&4294967295,R=P+(A<<5&4294967295|A>>>27),A=U+(P^L&(R^P))+T[10]+38016083&4294967295,U=R+(A<<9&4294967295|A>>>23),A=L+(R^P&(U^R))+T[15]+3634488961&4294967295,L=U+(A<<14&4294967295|A>>>18),A=P+(U^R&(L^U))+T[4]+3889429448&4294967295,P=L+(A<<20&4294967295|A>>>12),A=R+(L^U&(P^L))+T[9]+568446438&4294967295,R=P+(A<<5&4294967295|A>>>27),A=U+(P^L&(R^P))+T[14]+3275163606&4294967295,U=R+(A<<9&4294967295|A>>>23),A=L+(R^P&(U^R))+T[3]+4107603335&4294967295,L=U+(A<<14&4294967295|A>>>18),A=P+(U^R&(L^U))+T[8]+1163531501&4294967295,P=L+(A<<20&4294967295|A>>>12),A=R+(L^U&(P^L))+T[13]+2850285829&4294967295,R=P+(A<<5&4294967295|A>>>27),A=U+(P^L&(R^P))+T[2]+4243563512&4294967295,U=R+(A<<9&4294967295|A>>>23),A=L+(R^P&(U^R))+T[7]+1735328473&4294967295,L=U+(A<<14&4294967295|A>>>18),A=P+(U^R&(L^U))+T[12]+2368359562&4294967295,P=L+(A<<20&4294967295|A>>>12),A=R+(P^L^U)+T[5]+4294588738&4294967295,R=P+(A<<4&4294967295|A>>>28),A=U+(R^P^L)+T[8]+2272392833&4294967295,U=R+(A<<11&4294967295|A>>>21),A=L+(U^R^P)+T[11]+1839030562&4294967295,L=U+(A<<16&4294967295|A>>>16),A=P+(L^U^R)+T[14]+4259657740&4294967295,P=L+(A<<23&4294967295|A>>>9),A=R+(P^L^U)+T[1]+2763975236&4294967295,R=P+(A<<4&4294967295|A>>>28),A=U+(R^P^L)+T[4]+1272893353&4294967295,U=R+(A<<11&4294967295|A>>>21),A=L+(U^R^P)+T[7]+4139469664&4294967295,L=U+(A<<16&4294967295|A>>>16),A=P+(L^U^R)+T[10]+3200236656&4294967295,P=L+(A<<23&4294967295|A>>>9),A=R+(P^L^U)+T[13]+681279174&4294967295,R=P+(A<<4&4294967295|A>>>28),A=U+(R^P^L)+T[0]+3936430074&4294967295,U=R+(A<<11&4294967295|A>>>21),A=L+(U^R^P)+T[3]+3572445317&4294967295,L=U+(A<<16&4294967295|A>>>16),A=P+(L^U^R)+T[6]+76029189&4294967295,P=L+(A<<23&4294967295|A>>>9),A=R+(P^L^U)+T[9]+3654602809&4294967295,R=P+(A<<4&4294967295|A>>>28),A=U+(R^P^L)+T[12]+3873151461&4294967295,U=R+(A<<11&4294967295|A>>>21),A=L+(U^R^P)+T[15]+530742520&4294967295,L=U+(A<<16&4294967295|A>>>16),A=P+(L^U^R)+T[2]+3299628645&4294967295,P=L+(A<<23&4294967295|A>>>9),A=R+(L^(P|~U))+T[0]+4096336452&4294967295,R=P+(A<<6&4294967295|A>>>26),A=U+(P^(R|~L))+T[7]+1126891415&4294967295,U=R+(A<<10&4294967295|A>>>22),A=L+(R^(U|~P))+T[14]+2878612391&4294967295,L=U+(A<<15&4294967295|A>>>17),A=P+(U^(L|~R))+T[5]+4237533241&4294967295,P=L+(A<<21&4294967295|A>>>11),A=R+(L^(P|~U))+T[12]+1700485571&4294967295,R=P+(A<<6&4294967295|A>>>26),A=U+(P^(R|~L))+T[3]+2399980690&4294967295,U=R+(A<<10&4294967295|A>>>22),A=L+(R^(U|~P))+T[10]+4293915773&4294967295,L=U+(A<<15&4294967295|A>>>17),A=P+(U^(L|~R))+T[1]+2240044497&4294967295,P=L+(A<<21&4294967295|A>>>11),A=R+(L^(P|~U))+T[8]+1873313359&4294967295,R=P+(A<<6&4294967295|A>>>26),A=U+(P^(R|~L))+T[15]+4264355552&4294967295,U=R+(A<<10&4294967295|A>>>22),A=L+(R^(U|~P))+T[6]+2734768916&4294967295,L=U+(A<<15&4294967295|A>>>17),A=P+(U^(L|~R))+T[13]+1309151649&4294967295,P=L+(A<<21&4294967295|A>>>11),A=R+(L^(P|~U))+T[4]+4149444226&4294967295,R=P+(A<<6&4294967295|A>>>26),A=U+(P^(R|~L))+T[11]+3174756917&4294967295,U=R+(A<<10&4294967295|A>>>22),A=L+(R^(U|~P))+T[2]+718787259&4294967295,L=U+(A<<15&4294967295|A>>>17),A=P+(U^(L|~R))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(L+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var P=R-this.blockSize,T=this.B,L=this.h,U=0;U<R;){if(L==0)for(;U<=P;)i(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<R;)if(T[L++]=D.charCodeAt(U++),L==this.blockSize){i(this,T),L=0;break}}else for(;U<R;)if(T[L++]=D[U++],L==this.blockSize){i(this,T),L=0;break}}this.h=L,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var P=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=P&255,P/=256;for(this.u(D),D=Array(16),R=P=0;4>R;++R)for(var T=0;32>T;T+=8)D[P++]=this.g[R]>>>T&255;return D};function a(D,R){var P=u;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=R(D)}function c(D,R){this.h=R;for(var P=[],T=!0,L=D.length-1;0<=L;L--){var U=D[L]|0;T&&U==R||(P[L]=U,T=!1)}this.g=P}var u={};function d(D){return-128<=D&&128>D?a(D,function(R){return new c([R|0],0>R?-1:0)}):new c([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return N(f(-D));for(var R=[],P=1,T=0;D>=P;T++)R[T]=D/P|0,P*=4294967296;return new c(R,0)}function g(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return N(g(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(R,8)),T=y,L=0;L<D.length;L+=8){var U=Math.min(8,D.length-L),A=parseInt(D.substring(L,L+U),R);8>U?(U=f(Math.pow(R,U)),T=T.j(U).add(f(A))):(T=T.j(P),T=T.add(f(A)))}return T}var y=d(0),x=d(1),w=d(16777216);t=c.prototype,t.m=function(){if(b(this))return-N(this).m();for(var D=0,R=1,P=0;P<this.g.length;P++){var T=this.i(P);D+=(0<=T?T:4294967296+T)*R,R*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(b(this))return"-"+N(this).toString(D);for(var R=f(Math.pow(D,6)),P=this,T="";;){var L=V(P,R).g;P=j(P,L.j(R));var U=((0<P.g.length?P.g[0]:P.h)>>>0).toString(D);if(P=L,S(P))return U+T;for(;6>U.length;)U="0"+U;T=U+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function b(D){return D.h==-1}t.l=function(D){return D=j(this,D),b(D)?-1:S(D)?0:1};function N(D){for(var R=D.g.length,P=[],T=0;T<R;T++)P[T]=~D.g[T];return new c(P,~D.h).add(x)}t.abs=function(){return b(this)?N(this):this},t.add=function(D){for(var R=Math.max(this.g.length,D.g.length),P=[],T=0,L=0;L<=R;L++){var U=T+(this.i(L)&65535)+(D.i(L)&65535),A=(U>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);T=A>>>16,U&=65535,A&=65535,P[L]=A<<16|U}return new c(P,P[P.length-1]&-2147483648?-1:0)};function j(D,R){return D.add(N(R))}t.j=function(D){if(S(this)||S(D))return y;if(b(this))return b(D)?N(this).j(N(D)):N(N(this).j(D));if(b(D))return N(this.j(N(D)));if(0>this.l(w)&&0>D.l(w))return f(this.m()*D.m());for(var R=this.g.length+D.g.length,P=[],T=0;T<2*R;T++)P[T]=0;for(T=0;T<this.g.length;T++)for(var L=0;L<D.g.length;L++){var U=this.i(T)>>>16,A=this.i(T)&65535,oe=D.i(L)>>>16,ae=D.i(L)&65535;P[2*T+2*L]+=A*ae,O(P,2*T+2*L),P[2*T+2*L+1]+=U*ae,O(P,2*T+2*L+1),P[2*T+2*L+1]+=A*oe,O(P,2*T+2*L+1),P[2*T+2*L+2]+=U*oe,O(P,2*T+2*L+2)}for(T=0;T<R;T++)P[T]=P[2*T+1]<<16|P[2*T];for(T=R;T<2*R;T++)P[T]=0;return new c(P,0)};function O(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function I(D,R){this.g=D,this.h=R}function V(D,R){if(S(R))throw Error("division by zero");if(S(D))return new I(y,y);if(b(D))return R=V(N(D),R),new I(N(R.g),N(R.h));if(b(R))return R=V(D,N(R)),new I(N(R.g),R.h);if(30<D.g.length){if(b(D)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var P=x,T=R;0>=T.l(D);)P=$(P),T=$(T);var L=q(P,1),U=q(T,1);for(T=q(T,2),P=q(P,2);!S(T);){var A=U.add(T);0>=A.l(D)&&(L=L.add(P),U=A),T=q(T,1),P=q(P,1)}return R=j(D,L.j(R)),new I(L,R)}for(L=y;0<=D.l(R);){for(P=Math.max(1,Math.floor(D.m()/R.m())),T=Math.ceil(Math.log(P)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),U=f(P),A=U.j(R);b(A)||0<A.l(D);)P-=T,U=f(P),A=U.j(R);S(U)&&(U=x),L=L.add(U),D=j(D,A)}return new I(L,D)}t.A=function(D){return V(this,D).h},t.and=function(D){for(var R=Math.max(this.g.length,D.g.length),P=[],T=0;T<R;T++)P[T]=this.i(T)&D.i(T);return new c(P,this.h&D.h)},t.or=function(D){for(var R=Math.max(this.g.length,D.g.length),P=[],T=0;T<R;T++)P[T]=this.i(T)|D.i(T);return new c(P,this.h|D.h)},t.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),P=[],T=0;T<R;T++)P[T]=this.i(T)^D.i(T);return new c(P,this.h^D.h)};function $(D){for(var R=D.g.length+1,P=[],T=0;T<R;T++)P[T]=D.i(T)<<1|D.i(T-1)>>>31;return new c(P,D.h)}function q(D,R){var P=R>>5;R%=32;for(var T=D.g.length-P,L=[],U=0;U<T;U++)L[U]=0<R?D.i(U+P)>>>R|D.i(U+P+1)<<32-R:D.i(U+P);return new c(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,mo=c}).apply(typeof H2<"u"?H2:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $T,Ju,zT,Kf,Sy,BT,HT,WT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,C){return m==Array.prototype||m==Object.prototype||(m[_]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var _=0;_<m.length;++_){var C=m[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(m,_){if(_)e:{var C=r;m=m.split(".");for(var F=0;F<m.length-1;F++){var ne=m[F];if(!(ne in C))break e;C=C[ne]}m=m[m.length-1],F=C[m],_=_(F),_!=F&&_!=null&&e(C,m,{configurable:!0,writable:!0,value:_})}}function a(m,_){m instanceof String&&(m+="");var C=0,F=!1,ne={next:function(){if(!F&&C<m.length){var ge=C++;return{value:_(ge,m[ge]),done:!1}}return F=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}i("Array.prototype.values",function(m){return m||function(){return a(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function d(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function f(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function g(m,_,C){return m.call.apply(m.bind,arguments)}function y(m,_,C){if(!m)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,F),m.apply(_,ne)}}return function(){return m.apply(_,arguments)}}function x(m,_,C){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,x.apply(null,arguments)}function w(m,_){var C=Array.prototype.slice.call(arguments,1);return function(){var F=C.slice();return F.push.apply(F,arguments),m.apply(this,F)}}function S(m,_){function C(){}C.prototype=_.prototype,m.aa=_.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(F,ne,ge){for(var $e=Array(arguments.length-2),tn=2;tn<arguments.length;tn++)$e[tn-2]=arguments[tn];return _.prototype[ne].apply(F,$e)}}function b(m){const _=m.length;if(0<_){const C=Array(_);for(let F=0;F<_;F++)C[F]=m[F];return C}return[]}function N(m,_){for(let C=1;C<arguments.length;C++){const F=arguments[C];if(d(F)){const ne=m.length||0,ge=F.length||0;m.length=ne+ge;for(let $e=0;$e<ge;$e++)m[ne+$e]=F[$e]}else m.push(F)}}class j{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function O(m){return/^[\s\xa0]*$/.test(m)}function I(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function V(m){return V[" "](m),m}V[" "]=function(){};var $=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function q(m,_,C){for(const F in m)_.call(C,m[F],F,m)}function D(m,_){for(const C in m)_.call(void 0,m[C],C,m)}function R(m){const _={};for(const C in m)_[C]=m[C];return _}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(m,_){let C,F;for(let ne=1;ne<arguments.length;ne++){F=arguments[ne];for(C in F)m[C]=F[C];for(let ge=0;ge<P.length;ge++)C=P[ge],Object.prototype.hasOwnProperty.call(F,C)&&(m[C]=F[C])}}function L(m){var _=1;m=m.split(":");const C=[];for(;0<_&&m.length;)C.push(m.shift()),_--;return m.length&&C.push(m.join(":")),C}function U(m){u.setTimeout(()=>{throw m},0)}function A(){var m=ie;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class oe{constructor(){this.h=this.g=null}add(_,C){const F=ae.get();F.set(_,C),this.h?this.h.next=F:this.g=F,this.h=F}}var ae=new j(()=>new Ce,m=>m.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,ee=!1,ie=new oe,ye=()=>{const m=u.Promise.resolve(void 0);Pe=()=>{m.then(B)}};var B=()=>{for(var m;m=A();){try{m.h.call(m.g)}catch(C){U(C)}var _=ae;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}ee=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,_),u.removeEventListener("test",C,_)}catch{}return m}();function We(m,_){if(be.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,F=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if($){e:{try{V(_.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(_=null)}}else C=="mouseover"?_=m.fromElement:C=="mouseout"&&(_=m.toElement);this.relatedTarget=_,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:et[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&We.aa.h.call(this)}}S(We,be);var et={2:"touch",3:"pen",4:"mouse"};We.prototype.h=function(){We.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ht="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function nt(m,_,C,F,ne){this.listener=m,this.proxy=null,this.src=_,this.type=C,this.capture=!!F,this.ha=ne,this.key=++Xe,this.da=this.fa=!1}function St(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xt(m){this.src=m,this.g={},this.h=0}xt.prototype.add=function(m,_,C,F,ne){var ge=m.toString();m=this.g[ge],m||(m=this.g[ge]=[],this.h++);var $e=Ze(m,_,F,ne);return-1<$e?(_=m[$e],C||(_.fa=!1)):(_=new nt(_,this.src,ge,!!F,ne),_.fa=C,m.push(_)),_};function Tt(m,_){var C=_.type;if(C in m.g){var F=m.g[C],ne=Array.prototype.indexOf.call(F,_,void 0),ge;(ge=0<=ne)&&Array.prototype.splice.call(F,ne,1),ge&&(St(_),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Ze(m,_,C,F){for(var ne=0;ne<m.length;++ne){var ge=m[ne];if(!ge.da&&ge.listener==_&&ge.capture==!!C&&ge.ha==F)return ne}return-1}var Rt="closure_lm_"+(1e6*Math.random()|0),At={};function pn(m,_,C,F,ne){if(Array.isArray(_)){for(var ge=0;ge<_.length;ge++)pn(m,_[ge],C,F,ne);return null}return C=X(C),m&&m[ht]?m.K(_,C,f(F)?!!F.capture:!1,ne):J(m,_,C,!1,F,ne)}function J(m,_,C,F,ne,ge){if(!_)throw Error("Invalid event type");var $e=f(ne)?!!ne.capture:!!ne,tn=dt(m);if(tn||(m[Rt]=tn=new xt(m)),C=tn.add(_,C,F,$e,ge),C.proxy)return C;if(F=He(),C.proxy=F,F.src=m,F.listener=C,m.addEventListener)Ve||(ne=$e),ne===void 0&&(ne=!1),m.addEventListener(_.toString(),F,ne);else if(m.attachEvent)m.attachEvent(wt(_.toString()),F);else if(m.addListener&&m.removeListener)m.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return C}function He(){function m(C){return _.call(m.src,m.listener,C)}const _=Qe;return m}function De(m,_,C,F,ne){if(Array.isArray(_))for(var ge=0;ge<_.length;ge++)De(m,_[ge],C,F,ne);else F=f(F)?!!F.capture:!!F,C=X(C),m&&m[ht]?(m=m.i,_=String(_).toString(),_ in m.g&&(ge=m.g[_],C=Ze(ge,C,F,ne),-1<C&&(St(ge[C]),Array.prototype.splice.call(ge,C,1),ge.length==0&&(delete m.g[_],m.h--)))):m&&(m=dt(m))&&(_=m.g[_.toString()],m=-1,_&&(m=Ze(_,C,F,ne)),(C=-1<m?_[m]:null)&&st(C))}function st(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[ht])Tt(_.i,m);else{var C=m.type,F=m.proxy;_.removeEventListener?_.removeEventListener(C,F,m.capture):_.detachEvent?_.detachEvent(wt(C),F):_.addListener&&_.removeListener&&_.removeListener(F),(C=dt(_))?(Tt(C,m),C.h==0&&(C.src=null,_[Rt]=null)):St(m)}}}function wt(m){return m in At?At[m]:At[m]="on"+m}function Qe(m,_){if(m.da)m=!0;else{_=new We(_,this);var C=m.listener,F=m.ha||m.src;m.fa&&st(m),m=C.call(F,_)}return m}function dt(m){return m=m[Rt],m instanceof xt?m:null}var W="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(m){return typeof m=="function"?m:(m[W]||(m[W]=function(_){return m.handleEvent(_)}),m[W])}function me(){Z.call(this),this.i=new xt(this),this.M=this,this.F=null}S(me,Z),me.prototype[ht]=!0,me.prototype.removeEventListener=function(m,_,C,F){De(this,m,_,C,F)};function je(m,_){var C,F=m.F;if(F)for(C=[];F;F=F.F)C.push(F);if(m=m.M,F=_.type||_,typeof _=="string")_=new be(_,m);else if(_ instanceof be)_.target=_.target||m;else{var ne=_;_=new be(F,m),T(_,ne)}if(ne=!0,C)for(var ge=C.length-1;0<=ge;ge--){var $e=_.g=C[ge];ne=te($e,F,!0,_)&&ne}if($e=_.g=m,ne=te($e,F,!0,_)&&ne,ne=te($e,F,!1,_)&&ne,C)for(ge=0;ge<C.length;ge++)$e=_.g=C[ge],ne=te($e,F,!1,_)&&ne}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var C=m.g[_],F=0;F<C.length;F++)St(C[F]);delete m.g[_],m.h--}}this.F=null},me.prototype.K=function(m,_,C,F){return this.i.add(String(m),_,!1,C,F)},me.prototype.L=function(m,_,C,F){return this.i.add(String(m),_,!0,C,F)};function te(m,_,C,F){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var ne=!0,ge=0;ge<_.length;++ge){var $e=_[ge];if($e&&!$e.da&&$e.capture==C){var tn=$e.listener,sr=$e.ha||$e.src;$e.fa&&Tt(m.i,$e),ne=tn.call(sr,F)!==!1&&ne}}return ne&&!F.defaultPrevented}function ke(m,_,C){if(typeof m=="function")C&&(m=x(m,C));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(m,_||0)}function Se(m){m.g=ke(()=>{m.g=null,m.i&&(m.i=!1,Se(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class vt extends Z{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Se(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jt(m){Z.call(this),this.h=m,this.g={}}S(jt,Z);var ct=[];function Ot(m){q(m.g,function(_,C){this.g.hasOwnProperty(C)&&st(_)},m),m.g={}}jt.prototype.N=function(){jt.aa.N.call(this),Ot(this)},jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var H=u.JSON.stringify,G=u.JSON.parse,pe=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ce(){}ce.prototype.h=null;function he(m){return m.h||(m.h=m.i())}function Fe(){}var Te={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xe(){be.call(this,"d")}S(xe,be);function se(){be.call(this,"c")}S(se,be);var Le={},Me=null;function ue(){return Me=Me||new me}Le.La="serverreachability";function at(m){be.call(this,Le.La,m)}S(at,be);function ze(m){const _=ue();je(_,new at(_))}Le.STAT_EVENT="statevent";function kn(m,_){be.call(this,Le.STAT_EVENT,m),this.stat=_}S(kn,be);function Lt(m){const _=ue();je(_,new kn(_,m))}Le.Ma="timingevent";function Vt(m,_){be.call(this,Le.Ma,m),this.size=_}S(Vt,be);function Xt(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},_)}function Wt(){this.g=!0}Wt.prototype.xa=function(){this.g=!1};function ir(m,_,C,F,ne,ge){m.info(function(){if(m.g)if(ge)for(var $e="",tn=ge.split("&"),sr=0;sr<tn.length;sr++){var zt=tn[sr].split("=");if(1<zt.length){var ur=zt[0];zt=zt[1];var Yn=ur.split("_");$e=2<=Yn.length&&Yn[1]=="type"?$e+(ur+"="+zt+"&"):$e+(ur+"=redacted&")}}else $e=null;else $e=ge;return"XMLHTTP REQ ("+F+") [attempt "+ne+"]: "+_+`
`+C+`
`+$e})}function Mn(m,_,C,F,ne,ge,$e){m.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ne+"]: "+_+`
`+C+`
`+ge+" "+$e})}function Et(m,_,C,F){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+Xn(m,C)+(F?" "+F:"")})}function zn(m,_){m.info(function(){return"TIMEOUT: "+_})}Wt.prototype.info=function(){};function Xn(m,_){if(!m.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var F=C[m];if(!(2>F.length)){var ne=F[1];if(Array.isArray(ne)&&!(1>ne.length)){var ge=ne[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var $e=1;$e<ne.length;$e++)ne[$e]=""}}}}return H(C)}catch{return _}}var cs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Do={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zr;function mi(){}S(mi,ce),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},Zr=new mi;function Bn(m,_,C,F){this.j=m,this.i=_,this.l=C,this.R=F||1,this.U=new jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}var Aa={},qs={};function Gs(m,_,C){m.L=1,m.v=fs(Hr(_)),m.m=C,m.P=!0,Ia(m,null)}function Ia(m,_){m.F=Date.now(),qt(m),m.A=Hr(m.v);var C=m.A,F=m.R;Array.isArray(F)||(F=[String(F)]),rn(C.i,"t",F),m.C=0,C=m.j.J,m.h=new Hi,m.g=Eh(m.j,C?_:null,!m.m),0<m.O&&(m.M=new vt(x(m.Y,m,m.g),m.O)),_=m.U,C=m.g,F=m.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(ct[0]=ne.toString()),ne=ct);for(var ge=0;ge<ne.length;ge++){var $e=pn(C,ne[ge],F||_.handleEvent,!1,_.h||_);if(!$e)break;_.g[$e.key]=$e}_=m.H?R(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),ze(),ir(m.i,m.u,m.A,m.l,m.R,m.m)}Bn.prototype.ca=function(m){m=m.target;const _=this.M;_&&ei(m)==3?_.j():this.Y(m)},Bn.prototype.Y=function(m){try{if(m==this.g)e:{const Yn=ei(this.g);var _=this.g.Ba();const ji=this.g.Z();if(!(3>Yn)&&(Yn!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||Yn!=4||_==7||(_==8||0>=ji?ze(3):ze(2)),Wi(this);var C=this.g.Z();this.X=C;t:if(Nr(this)){var F=yu(this.g);m="";var ne=F.length,ge=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zr(this),gr(this);var $e="";break t}this.h.i=new u.TextDecoder}for(_=0;_<ne;_++)this.h.h=!0,m+=this.h.i.decode(F[_],{stream:!(ge&&_==ne-1)});F.length=0,this.h.g+=m,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=C==200,Mn(this.i,this.u,this.A,this.l,this.R,Yn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var tn,sr=this.g;if((tn=sr.g?sr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(tn)){var zt=tn;break t}}zt=null}if(C=zt)Et(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,C);else{this.o=!1,this.s=3,Lt(12),zr(this),gr(this);break e}}if(this.P){C=!0;let gi;for(;!this.J&&this.C<$e.length;)if(gi=yh(this,$e),gi==qs){Yn==4&&(this.s=4,Lt(14),C=!1),Et(this.i,this.l,null,"[Incomplete Response]");break}else if(gi==Aa){this.s=4,Lt(15),Et(this.i,this.l,$e,"[Invalid Chunk]"),C=!1;break}else Et(this.i,this.l,gi,null),Pa(this,gi);if(Nr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yn!=4||$e.length!=0||this.h.h||(this.s=1,Lt(16),C=!1),this.o=this.o&&C,!C)Et(this.i,this.l,$e,"[Invalid Chunked Response]"),zr(this),gr(this);else if(0<$e.length&&!this.W){this.W=!0;var ur=this.j;ur.g==this&&ur.ba&&!ur.M&&(ur.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),vu(ur),ur.M=!0,Lt(11))}}else Et(this.i,this.l,$e,null),Pa(this,$e);Yn==4&&zr(this),this.o&&!this.J&&(Yn==4?Gl(this.j,this):(this.o=!1,qt(this)))}else zl(this.g),C==400&&0<$e.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),zr(this),gr(this)}}}catch{}finally{}};function Nr(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function yh(m,_){var C=m.C,F=_.indexOf(`
`,C);return F==-1?qs:(C=Number(_.substring(C,F)),isNaN(C)?Aa:(F+=1,F+C>_.length?qs:(_=_.slice(F,F+C),m.C=F+C,_)))}Bn.prototype.cancel=function(){this.J=!0,zr(this)};function qt(m){m.S=Date.now()+m.I,$r(m,m.I)}function $r(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Xt(x(m.ba,m),_)}function Wi(m){m.B&&(u.clearTimeout(m.B),m.B=null)}Bn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(zn(this.i,this.A),this.L!=2&&(ze(),Lt(17)),zr(this),this.s=2,gr(this)):$r(this,this.S-m)};function gr(m){m.j.G==0||m.J||Gl(m.j,m)}function zr(m){Wi(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,Ot(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function Pa(m,_){try{var C=m.j;if(C.G!=0&&(C.g==m||yr(C.h,m))){if(!m.K&&yr(C.h,m)&&C.G==3){try{var F=C.Da.g.parse(_)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ne=F;if(ne[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)ql(C),Xi(C);else break e;Wl(C),Lt(18)}}else C.za=ne[1],0<C.za-C.T&&37500>ne[2]&&C.F&&C.v==0&&!C.C&&(C.C=Xt(x(C.Za,C),6e3));if(1>=Ra(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else na(C,11)}else if((m.K||C.g==m)&&ql(C),!O(_))for(ne=C.Da.g.parse(_),_=0;_<ne.length;_++){let zt=ne[_];if(C.T=zt[0],zt=zt[1],C.G==2)if(zt[0]=="c"){C.K=zt[1],C.ia=zt[2];const ur=zt[3];ur!=null&&(C.la=ur,C.j.info("VER="+C.la));const Yn=zt[4];Yn!=null&&(C.Aa=Yn,C.j.info("SVER="+C.Aa));const ji=zt[5];ji!=null&&typeof ji=="number"&&0<ji&&(F=1.5*ji,C.L=F,C.j.info("backChannelRequestTimeoutMs_="+F)),F=C;const gi=m.g;if(gi){const Fo=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var ge=F.h;ge.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(Ma(ge,ge.h),ge.h=null))}if(F.D){const Xl=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(F.ya=Xl,en(F.I,F.D,Xl))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),F=C;var $e=m;if(F.qa=_h(F,F.J?F.ia:null,F.W),$e.K){Xs(F.h,$e);var tn=$e,sr=F.L;sr&&(tn.I=sr),tn.B&&(Wi(tn),qt(tn)),F.g=$e}else Vo(F);0<C.i.length&&ys(C)}else zt[0]!="stop"&&zt[0]!="close"||na(C,7);else C.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?na(C,7):xr(C):zt[0]!="noop"&&C.l&&C.l.ta(zt),C.v=0)}}ze(4)}catch{}}var Ol=class{constructor(m,_){this.g=m,this.map=_}};function Ks(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Br(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ra(m){return m.h?1:m.g?m.g.size:0}function yr(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function Ma(m,_){m.g?m.g.add(_):m.h=_}function Xs(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}Ks.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ll(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const C of m.g.values())_=_.concat(C.D);return _}return b(m.i)}function Da(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var _=[],C=m.length,F=0;F<C;F++)_.push(m[F]);return _}_=[],C=0;for(F in m)_[C++]=m[F];return _}function Oa(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var _=[];m=m.length;for(var C=0;C<m;C++)_.push(C);return _}_=[],C=0;for(const F in m)_[C++]=F;return _}}}function us(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var C=Oa(m),F=Da(m),ne=F.length,ge=0;ge<ne;ge++)_.call(void 0,F[ge],C&&C[ge],m)}var Ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mu(m,_){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var F=m[C].indexOf("="),ne=null;if(0<=F){var ge=m[C].substring(0,F);ne=m[C].substring(F+1)}else ge=m[C];_(ge,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Cr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Cr){this.h=m.h,Qs(this,m.j),this.o=m.o,this.g=m.g,ds(this,m.s),this.l=m.l;var _=m.i,C=new Ie;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),hs(this,C),this.m=m.m}else m&&(_=String(m).match(Ys))?(this.h=!1,Qs(this,_[1]||"",!0),this.o=Ft(_[2]||""),this.g=Ft(_[3]||"",!0),ds(this,_[4]),this.l=Ft(_[5]||"",!0),hs(this,_[6]||"",!0),this.m=Ft(_[7]||"")):(this.h=!1,this.i=new Ie(null,this.h))}Cr.prototype.toString=function(){var m=[],_=this.j;_&&m.push(ms(_,Js,!0),":");var C=this.g;return(C||_=="file")&&(m.push("//"),(_=this.o)&&m.push(ms(_,Js,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(ms(C,C.charAt(0)=="/"?Y:Fl,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",ms(C,Be)),m.join("")};function Hr(m){return new Cr(m)}function Qs(m,_,C){m.j=C?Ft(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function ds(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function hs(m,_,C){_ instanceof Ie?(m.i=_,Sn(m.i,m.h)):(C||(_=ms(_,we)),m.i=new Ie(_,m.h))}function en(m,_,C){m.i.set(_,C)}function fs(m){return en(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ft(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ms(m,_,C){return typeof m=="string"?(m=encodeURI(m).replace(_,Vl),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vl(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Js=/[#\/\?@]/g,Fl=/[#\?:]/g,Y=/[#\?]/g,we=/[#\?@]/g,Be=/#/g;function Ie(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function qe(m){m.g||(m.g=new Map,m.h=0,m.i&&mu(m.i,function(_,C){m.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=Ie.prototype,t.add=function(m,_){qe(this),this.i=null,m=Jt(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(_),this.h+=1,this};function rt(m,_){qe(m),_=Jt(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function lt(m,_){return qe(m),_=Jt(m,_),m.g.has(_)}t.forEach=function(m,_){qe(this),this.g.forEach(function(C,F){C.forEach(function(ne){m.call(_,ne,F,this)},this)},this)},t.na=function(){qe(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let F=0;F<_.length;F++){const ne=m[F];for(let ge=0;ge<ne.length;ge++)C.push(_[F])}return C},t.V=function(m){qe(this);let _=[];if(typeof m=="string")lt(this,m)&&(_=_.concat(this.g.get(Jt(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)_=_.concat(m[C])}return _},t.set=function(m,_){return qe(this),this.i=null,m=Jt(this,m),lt(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},t.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function rn(m,_,C){rt(m,_),0<C.length&&(m.i=null,m.g.set(Jt(m,_),b(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var F=_[C];const ge=encodeURIComponent(String(F)),$e=this.V(F);for(F=0;F<$e.length;F++){var ne=ge;$e[F]!==""&&(ne+="="+encodeURIComponent(String($e[F]))),m.push(ne)}}return this.i=m.join("&")};function Jt(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function Sn(m,_){_&&!m.j&&(qe(m),m.i=null,m.g.forEach(function(C,F){var ne=F.toLowerCase();F!=ne&&(rt(this,F),rn(this,ne,C))},m)),m.j=_}function qi(m,_){const C=new Wt;if(u.Image){const F=new Image;F.onload=w(Tn,C,"TestLoadImage: loaded",!0,_,F),F.onerror=w(Tn,C,"TestLoadImage: error",!1,_,F),F.onabort=w(Tn,C,"TestLoadImage: abort",!1,_,F),F.ontimeout=w(Tn,C,"TestLoadImage: timeout",!1,_,F),u.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=m}else _(!1)}function Ci(m,_){const C=new Wt,F=new AbortController,ne=setTimeout(()=>{F.abort(),Tn(C,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:F.signal}).then(ge=>{clearTimeout(ne),ge.ok?Tn(C,"TestPingServer: ok",!0,_):Tn(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ne),Tn(C,"TestPingServer: error",!1,_)})}function Tn(m,_,C,F,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),F(C)}catch{}}function ps(){this.g=new pe}function un(m,_,C){const F=C||"";try{us(m,function(ne,ge){let $e=ne;f(ne)&&($e=H(ne)),_.push(F+ge+"="+encodeURIComponent($e))})}catch(ne){throw _.push(F+"type="+encodeURIComponent("_badmap")),ne}}function Zs(m){this.l=m.Ub||null,this.j=m.eb||!1}S(Zs,ce),Zs.prototype.g=function(){return new Oo(this.l,this.j)},Zs.prototype.i=function(m){return function(){return m}}({});function Oo(m,_){me.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Oo,me),t=Oo.prototype,t.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,Ki(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function xh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?Gi(this):Ki(this),this.readyState==3&&xh(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Gi(this))},t.Qa=function(m){this.g&&(this.response=m,Gi(this))},t.ga=function(){this.g&&Gi(this)};function Gi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ki(m)}t.setRequestHeader=function(m,_){this.u.append(m,_)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=_.next();return m.join(`\r
`)};function Ki(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ea(m){let _="";return q(m,function(C,F){_+=F,_+=":",_+=C,_+=`\r
`}),_}function La(m,_,C){e:{for(F in C){var F=!1;break e}F=!0}F||(C=ea(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):en(m,_,C))}function bn(m){me.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(bn,me);var Xp=/^https?$/i,pu=["POST","PUT"];t=bn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,_,C,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zr.g(),this.v=this.o?he(this.o):he(Zr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(ge){Lo(this,ge);return}if(m=C||"",C=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ne in F)C.set(ne,F[ne]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ge of F.keys())C.set(ge,F.get(ge));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(C.keys()).find(ge=>ge.toLowerCase()=="content-type"),ne=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(pu,_,void 0))||F||ne||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,$e]of C)this.g.setRequestHeader(ge,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$l(this),this.u=!0,this.g.send(m),this.u=!1}catch(ge){Lo(this,ge)}};function Lo(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,Ul(m),pi(m)}function Ul(m){m.A||(m.A=!0,je(m,"complete"),je(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,je(this,"complete"),je(this,"abort"),pi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pi(this,!0)),bn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gu(this):this.bb())},t.bb=function(){gu(this)};function gu(m){if(m.h&&typeof c<"u"&&(!m.v[1]||ei(m)!=4||m.Z()!=2)){if(m.u&&ei(m)==4)ke(m.Ea,0,m);else if(je(m,"readystatechange"),ei(m)==4){m.h=!1;try{const $e=m.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var F;if(F=$e===0){var ne=String(m.D).match(Ys)[1]||null;!ne&&u.self&&u.self.location&&(ne=u.self.location.protocol.slice(0,-1)),F=!Xp.test(ne?ne.toLowerCase():"")}C=F}if(C)je(m,"complete"),je(m,"success");else{m.m=6;try{var ge=2<ei(m)?m.g.statusText:""}catch{ge=""}m.l=ge+" ["+m.Z()+"]",Ul(m)}}finally{pi(m)}}}}function pi(m,_){if(m.g){$l(m);const C=m.g,F=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||je(m,"ready");try{C.onreadystatechange=F}catch{}}}function $l(m){m.I&&(u.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ei(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),G(_)}};function yu(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function zl(m){const _={};m=(m.g&&2<=ei(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<m.length;F++){if(O(m[F]))continue;var C=L(m[F]);const ne=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ge=_[ne]||[];_[ne]=ge,ge.push(C)}D(_,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(m,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||_}function xu(m){this.Aa=0,this.i=[],this.j=new Wt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,m),this.cb=gs("retryDelaySeedMs",1e4,m),this.Wa=gs("forwardChannelMaxRetries",2,m),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ks(m&&m.concurrentRequestLimit),this.Da=new ps,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xu.prototype,t.la=8,t.G=1,t.connect=function(m,_,C,F){Lt(0),this.W=m,this.H=_||{},C&&F!==void 0&&(this.H.OSID=C,this.H.OAID=F),this.F=this.X,this.I=_h(this,null,this.W),ys(this)};function xr(m){if(Bl(m),m.G==3){var _=m.U++,C=Hr(m.I);if(en(C,"SID",m.K),en(C,"RID",_),en(C,"TYPE","terminate"),ta(m,C),_=new Bn(m,m.j,_),_.L=2,_.v=fs(Hr(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=_.v,C=!0),C||(_.g=Eh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),qt(_)}wh(m)}function Xi(m){m.g&&(vu(m),m.g.cancel(),m.g=null)}function Bl(m){Xi(m),m.u&&(u.clearTimeout(m.u),m.u=null),ql(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function ys(m){if(!Br(m.h)&&!m.s){m.s=!0;var _=m.Ga;Pe||ye(),ee||(Pe(),ee=!0),ie.add(_,m),m.B=0}}function Yp(m,_){return Ra(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Xt(x(m.Ga,m,_),bh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ne=new Bn(this,this.j,m);let ge=this.o;if(this.S&&(ge?(ge=R(ge),T(ge,this.S)):ge=this.S),this.m!==null||this.O||(ne.H=ge,ge=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var F=this.i[C];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(_+=F,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=Va(this,ne,_),C=Hr(this.I),en(C,"RID",m),en(C,"CVER",22),this.D&&en(C,"X-HTTP-Session-Id",this.D),ta(this,C),ge&&(this.O?_="headers="+encodeURIComponent(String(ea(ge)))+"&"+_:this.m&&La(C,this.m,ge)),Ma(this.h,ne),this.Ua&&en(C,"TYPE","init"),this.P?(en(C,"$req",_),en(C,"SID","null"),ne.T=!0,Gs(ne,C,null)):Gs(ne,C,_),this.G=2}}else this.G==3&&(m?Hl(this,m):this.i.length==0||Br(this.h)||Hl(this))};function Hl(m,_){var C;_?C=_.l:C=m.U++;const F=Hr(m.I);en(F,"SID",m.K),en(F,"RID",C),en(F,"AID",m.T),ta(m,F),m.m&&m.o&&La(F,m.m,m.o),C=new Bn(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),_&&(m.i=_.D.concat(m.i)),_=Va(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ma(m.h,C),Gs(C,F,_)}function ta(m,_){m.H&&q(m.H,function(C,F){en(_,F,C)}),m.l&&us({},function(C,F){en(_,F,C)})}function Va(m,_,C){C=Math.min(m.i.length,C);var F=m.l?x(m.l.Na,m.l,m):null;e:{var ne=m.i;let ge=-1;for(;;){const $e=["count="+C];ge==-1?0<C?(ge=ne[0].g,$e.push("ofs="+ge)):ge=0:$e.push("ofs="+ge);let tn=!0;for(let sr=0;sr<C;sr++){let zt=ne[sr].g;const ur=ne[sr].map;if(zt-=ge,0>zt)ge=Math.max(0,ne[sr].g-100),tn=!1;else try{un(ur,$e,"req"+zt+"_")}catch{F&&F(ur)}}if(tn){F=$e.join("&");break e}}}return m=m.i.splice(0,C),_.D=m,F}function Vo(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;Pe||ye(),ee||(Pe(),ee=!0),ie.add(_,m),m.v=0}}function Wl(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Xt(x(m.Fa,m),bh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,vh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Xt(x(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),Xi(this),vh(this))};function vu(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function vh(m){m.g=new Bn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=Hr(m.qa);en(_,"RID","rpc"),en(_,"SID",m.K),en(_,"AID",m.T),en(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&en(_,"TO",m.ja),en(_,"TYPE","xmlhttp"),ta(m,_),m.m&&m.o&&La(_,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=fs(Hr(_)),C.m=null,C.P=!0,Ia(C,m)}t.Za=function(){this.C!=null&&(this.C=null,Xi(this),Wl(this),Lt(19))};function ql(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Gl(m,_){var C=null;if(m.g==_){ql(m),vu(m),m.g=null;var F=2}else if(yr(m.h,_))C=_.D,Xs(m.h,_),F=1;else return;if(m.G!=0){if(_.o)if(F==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var ne=m.B;F=ue(),je(F,new Vt(F,C)),ys(m)}else Vo(m);else if(ne=_.s,ne==3||ne==0&&0<_.X||!(F==1&&Yp(m,_)||F==2&&Wl(m)))switch(C&&0<C.length&&(_=m.h,_.i=_.i.concat(C)),ne){case 1:na(m,5);break;case 4:na(m,10);break;case 3:na(m,6);break;default:na(m,2)}}}function bh(m,_){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*_}function na(m,_){if(m.j.info("Error code "+_),_==2){var C=x(m.fb,m),F=m.Xa;const ne=!F;F=new Cr(F||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Qs(F,"https"),fs(F),ne?qi(F.toString(),C):Ci(F.toString(),C)}else Lt(2);m.G=0,m.l&&m.l.sa(_),wh(m),Bl(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function wh(m){if(m.G=0,m.ka=[],m.l){const _=Ll(m.h);(_.length!=0||m.i.length!=0)&&(N(m.ka,_),N(m.ka,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.ra()}}function _h(m,_,C){var F=C instanceof Cr?Hr(C):new Cr(C);if(F.g!="")_&&(F.g=_+"."+F.g),ds(F,F.s);else{var ne=u.location;F=ne.protocol,_=_?_+"."+ne.hostname:ne.hostname,ne=+ne.port;var ge=new Cr(null);F&&Qs(ge,F),_&&(ge.g=_),ne&&ds(ge,ne),C&&(ge.l=C),F=ge}return C=m.D,_=m.ya,C&&_&&en(F,C,_),en(F,"VER",m.la),ta(m,F),F}function Eh(m,_,C){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new bn(new Zs({eb:C})):new bn(m.pa),_.Ha(m.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}t=bu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kl(){}Kl.prototype.g=function(m,_){return new Wr(m,_)};function Wr(m,_){me.call(this),this.g=new xu(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!O(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new xs(this)}S(Wr,me),Wr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wr.prototype.close=function(){xr(this.g)},Wr.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=H(m),m=C);_.i.push(new Ol(_.Ya++,m)),_.G==3&&ys(_)},Wr.prototype.N=function(){this.g.l=null,delete this.j,xr(this.g),delete this.g,Wr.aa.N.call(this)};function kh(m){xe.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const C in _){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}S(kh,xe);function Sh(){se.call(this),this.status=1}S(Sh,se);function xs(m){this.g=m}S(xs,bu),xs.prototype.ua=function(){je(this.g,"a")},xs.prototype.ta=function(m){je(this.g,new kh(m))},xs.prototype.sa=function(m){je(this.g,new Sh)},xs.prototype.ra=function(){je(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,Wr.prototype.send=Wr.prototype.o,Wr.prototype.open=Wr.prototype.m,Wr.prototype.close=Wr.prototype.close,WT=function(){return new Kl},HT=function(){return ue()},BT=Le,Sy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cs.NO_ERROR=0,cs.TIMEOUT=8,cs.HTTP_ERROR=6,Kf=cs,Do.COMPLETE="complete",zT=Do,Fe.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",me.prototype.listen=me.prototype.K,Ju=Fe,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,$T=bn}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});const W2="@firebase/firestore",q2="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Or=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=new Fx("@firebase/firestore");function kc(){return El.logLevel}function Ye(t,...e){if(El.logLevel<=Ut.DEBUG){const n=e.map(Qx);El.debug(`Firestore (${ru}): ${t}`,...n)}}function wa(t,...e){if(El.logLevel<=Ut.ERROR){const n=e.map(Qx);El.error(`Firestore (${ru}): ${t}`,...n)}}function yo(t,...e){if(El.logLevel<=Ut.WARN){const n=e.map(Qx);El.warn(`Firestore (${ru}): ${t}`,...n)}}function Qx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qT(t,r,n)}function qT(t,e,n){let r=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wa(r),new Error(r)}function Zt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||qT(e,i,r)}function Nt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends Ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Or.UNAUTHENTICATED))}shutdown(){}}class Z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class e9{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zt(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let a=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ya,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},u=d=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ya)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string",31837,{l:r}),new GT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string",2055,{h:e}),new Or(e)}}class t9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new t9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Zt(this.o===void 0,3512);const r=a=>{a.error!=null&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new G2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=i9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Mt(t,e){return t<e?-1:t>e?1:0}function Ty(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Mt(r,i);{const a=KT(),c=s9(a.encode(K2(t,n)),a.encode(K2(e,n)));return c!==0?c:Mt(r,i)}}n+=r>65535?2:1}return Mt(t.length,e.length)}function K2(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function s9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Mt(t[n],e[n]);return Mt(t.length,e.length)}function Hc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="__name__";class Ts{constructor(e,n,r){n===void 0?n=0:n>e.length&&yt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&yt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Ts.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Mt(e.length,n.length)}static compareSegments(e,n){const r=Ts.isNumericId(e),i=Ts.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ts.extractNumericId(e).compare(Ts.extractNumericId(n)):Ty(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class hn extends Ts{construct(e,n,r){return new hn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ge(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new hn(n)}static emptyPath(){return new hn([])}}const a9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends Ts{construct(e,n,r){return new kr(e,n,r)}static isValidIdentifier(e){return a9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X2}static keyField(){return new kr([X2])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ge(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Ge(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ge(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(a(),i++)}if(a(),c)throw new Ge(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(n)}static emptyPath(){return new kr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(hn.fromString(e))}static fromName(e){return new ut(hn.fromString(e).popFirst(5))}static empty(){return new ut(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return hn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new hn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e,n){if(!n)throw new Ge(_e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function o9(t,e,n,r){if(e===!0&&r===!0)throw new Ge(_e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Y2(t){if(!ut.isDocumentKey(t))throw new Ge(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Q2(t){if(ut.isDocumentKey(t))throw new Ge(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function YT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ap(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":yt(12329,{type:typeof t})}function hi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ge(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ap(t);throw new Ge(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function l9(t,e){if(e<=0)throw new Ge(_e.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,e){const n={typeString:t};return e&&(n.value=e),n}function th(t,e){if(!YT(t))throw new Ge(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ge(_e.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=-62135596800,Z2=1e6;class xn{static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Z2);return new xn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ge(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ge(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J2)throw new Ge(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z2}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(th(e,xn._jsonSchema))return new xn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xn._jsonSchemaVersion="firestore/timestamp/1.0",xn._jsonSchema={type:rr("string",xn._jsonSchemaVersion),seconds:rr("number"),nanoseconds:rr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(e){return new kt(e)}static min(){return new kt(new xn(0,0))}static max(){return new kt(new xn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=-1;function c9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=kt.fromTimestamp(r===1e9?new xn(n+1,0):new xn(n,r));return new xo(i,ut.empty(),e)}function u9(t){return new xo(t.readTime,t.key,Ed)}class xo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xo(kt.min(),ut.empty(),Ed)}static max(){return new xo(kt.max(),ut.empty(),Ed)}}function d9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t){if(t.code!==_e.FAILED_PRECONDITION||t.message!==h9)throw t;Ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ee((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ee?n:Ee.resolve(n)}catch(n){return Ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.reject(n)}static resolve(e){return new Ee((n,r)=>{n(e)})}static reject(e){return new Ee((n,r)=>{r(e)})}static waitFor(e){return new Ee((n,r)=>{let i=0,a=0,c=!1;e.forEach(u=>{++i,u.next(()=>{++a,c&&a===i&&n()},d=>r(d))}),c=!0,a===i&&n()})}static or(e){let n=Ee.resolve(!1);for(const r of e)n=n.next(i=>i?Ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new Ee((r,i)=>{const a=e.length,c=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;n(e[f]).next(g=>{c[f]=g,++u,u===a&&r(c)},g=>i(g))}})}static doWhile(e,n){return new Ee((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function m9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function su(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}op.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=-1;function lp(t){return t==null}function _m(t){return t===0&&1/t==-1/0}function p9(t){return typeof t=="number"&&Number.isInteger(t)&&!_m(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="";function g9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=e_(e)),e=y9(t.get(n),e);return e_(e)}function y9(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case QT:n+="";break;default:n+=a}}return n}function e_(t){return t+QT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Io(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.comparator=e,this.root=n||_r.EMPTY}insert(e,n){return new Pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_r.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_r.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _f(this.root,e,this.comparator,!1)}getReverseIterator(){return new _f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _f(this.root,e,this.comparator,!0)}}class _f{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _r{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??_r.RED,this.left=i??_r.EMPTY,this.right=a??_r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new _r(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}_r.EMPTY=null,_r.RED=!0,_r.BLACK=!1;_r.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new _r(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new n_(this.data.getIterator())}getIteratorFrom(e){return new n_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cr(this.comparator);return n.data=e,n}}class n_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.fields=e,e.sort(kr.comparator)}static empty(){return new Ei([])}unionWith(e){let n=new cr(kr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZT("Invalid base64 string: "+a):a}}(e);return new Tr(n)}static fromUint8Array(e){const n=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new Tr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const x9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(t){if(Zt(!!t,39018),typeof t=="string"){let e=0;const n=x9.exec(t);if(Zt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(t.seconds),nanos:qn(t.nanos)}}function qn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bo(t){return typeof t=="string"?Tr.fromBase64String(t):Tr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="server_timestamp",tN="__type__",nN="__previous_value__",rN="__local_write_time__";function ev(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[tN])===null||n===void 0?void 0:n.stringValue)===eN}function cp(t){const e=t.mapValue.fields[nN];return ev(e)?cp(e):e}function kd(t){const e=vo(t.mapValue.fields[rN].timestampValue);return new xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n,r,i,a,c,u,d,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Em="(default)";class Sd{constructor(e,n){this.projectId=e,this.database=n||Em}static empty(){return new Sd("","")}get isDefaultDatabase(){return this.database===Em}isEqual(e){return e instanceof Sd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="__type__",b9="__max__",Ef={mapValue:{}},sN="__vector__",km="value";function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ev(t)?4:_9(t)?9007199254740991:w9(t)?10:11:yt(28295,{value:t})}function Bs(t,e){if(t===e)return!0;const n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kd(t).isEqual(kd(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=vo(i.timestampValue),u=vo(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return bo(i.bytesValue).isEqual(bo(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return qn(i.geoPointValue.latitude)===qn(a.geoPointValue.latitude)&&qn(i.geoPointValue.longitude)===qn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return qn(i.integerValue)===qn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=qn(i.doubleValue),u=qn(a.doubleValue);return c===u?_m(c)===_m(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return Hc(t.arrayValue.values||[],e.arrayValue.values||[],Bs);case 10:case 11:return function(i,a){const c=i.mapValue.fields||{},u=a.mapValue.fields||{};if(t_(c)!==t_(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Bs(c[d],u[d])))return!1;return!0}(t,e);default:return yt(52216,{left:t})}}function Td(t,e){return(t.values||[]).find(n=>Bs(n,e))!==void 0}function Wc(t,e){if(t===e)return 0;const n=wo(t),r=wo(e);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=qn(a.integerValue||a.doubleValue),d=qn(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return r_(t.timestampValue,e.timestampValue);case 4:return r_(kd(t),kd(e));case 5:return Ty(t.stringValue,e.stringValue);case 6:return function(a,c){const u=bo(a),d=bo(c);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Mt(u[f],d[f]);if(g!==0)return g}return Mt(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=Mt(qn(a.latitude),qn(c.latitude));return u!==0?u:Mt(qn(a.longitude),qn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return i_(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,d,f,g;const y=a.fields||{},x=c.fields||{},w=(u=y[km])===null||u===void 0?void 0:u.arrayValue,S=(d=x[km])===null||d===void 0?void 0:d.arrayValue,b=Mt(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return b!==0?b:i_(w,S)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Ef.mapValue&&c===Ef.mapValue)return 0;if(a===Ef.mapValue)return 1;if(c===Ef.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=Ty(d[y],g[y]);if(x!==0)return x;const w=Wc(u[d[y]],f[g[y]]);if(w!==0)return w}return Mt(d.length,g.length)}(t.mapValue,e.mapValue);default:throw yt(23264,{le:n})}}function r_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const n=vo(t),r=vo(e),i=Mt(n.seconds,r.seconds);return i!==0?i:Mt(n.nanos,r.nanos)}function i_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Wc(n[i],r[i]);if(a)return a}return Mt(n.length,r.length)}function qc(t){return Ny(t)}function Ny(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return bo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Ny(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Ny(n.fields[c])}`;return i+"}"}(t.mapValue):yt(61005,{value:t})}function Xf(t){switch(wo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cp(t);return e?16+Xf(e):16;case 5:return 2*t.stringValue.length;case 6:return bo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Xf(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Io(r.fields,(a,c)=>{i+=a.length+Xf(c)}),i}(t.mapValue);default:throw yt(13486,{value:t})}}function s_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cy(t){return!!t&&"integerValue"in t}function tv(t){return!!t&&"arrayValue"in t}function a_(t){return!!t&&"nullValue"in t}function o_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yf(t){return!!t&&"mapValue"in t}function w9(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[iN])===null||n===void 0?void 0:n.stringValue)===sN}function od(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Io(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=od(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=od(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===b9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=od(n)}setAll(e){let n=kr.emptyPath(),r={},i=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=od(c):i.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Yf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Io(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ui(od(this.value))}}function aN(t){const e=[];return Io(t.fields,(n,r)=>{const i=new kr([n]);if(Yf(r)){const a=aN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,r,i,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Lr(e,0,kt.min(),kt.min(),kt.min(),ui.empty(),0)}static newFoundDocument(e,n,r,i){return new Lr(e,1,n,kt.min(),r,i,0)}static newNoDocument(e,n){return new Lr(e,2,n,kt.min(),kt.min(),ui.empty(),0)}static newUnknownDocument(e,n){return new Lr(e,3,n,kt.min(),kt.min(),ui.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.position=e,this.inclusive=n}}function l_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],c=t.position[i];if(a.field.isKeyField()?r=ut.comparator(ut.fromName(c.referenceValue),n.key):r=Wc(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function c_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n="asc"){this.field=e,this.dir=n}}function E9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{}class nr extends oN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S9(e,n,r):n==="array-contains"?new C9(e,r):n==="in"?new j9(e,r):n==="not-in"?new A9(e,r):n==="array-contains-any"?new I9(e,r):new nr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new T9(e,r):new N9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wc(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.matchesComparison(Wc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends oN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new as(e,n)}matches(e){return lN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function lN(t){return t.op==="and"}function cN(t){return k9(t)&&lN(t)}function k9(t){for(const e of t.filters)if(e instanceof as)return!1;return!0}function jy(t){if(t instanceof nr)return t.field.canonicalString()+t.op.toString()+qc(t.value);if(cN(t))return t.filters.map(e=>jy(e)).join(",");{const e=t.filters.map(n=>jy(n)).join(",");return`${t.op}(${e})`}}function uN(t,e){return t instanceof nr?function(r,i){return i instanceof nr&&r.op===i.op&&r.field.isEqual(i.field)&&Bs(r.value,i.value)}(t,e):t instanceof as?function(r,i){return i instanceof as&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,c,u)=>a&&uN(c,i.filters[u]),!0):!1}(t,e):void yt(19439)}function dN(t){return t instanceof nr?function(n){return`${n.field.canonicalString()} ${n.op} ${qc(n.value)}`}(t):t instanceof as?function(n){return n.op.toString()+" {"+n.getFilters().map(dN).join(" ,")+"}"}(t):"Filter"}class S9 extends nr{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class T9 extends nr{constructor(e,n){super(e,"in",n),this.keys=hN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class N9 extends nr{constructor(e,n){super(e,"not-in",n),this.keys=hN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class C9 extends nr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tv(n)&&Td(n.arrayValue,this.value)}}class j9 extends nr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Td(this.value.arrayValue,n)}}class A9 extends nr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Td(this.value.arrayValue,n)}}class I9 extends nr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Td(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e,n=null,r=[],i=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function u_(t,e=null,n=[],r=[],i=null,a=null,c=null){return new P9(t,e,n,r,i,a,c)}function nv(t){const e=Nt(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),lp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qc(r)).join(",")),e.Pe=n}return e.Pe}function rv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!E9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c_(t.startAt,e.startAt)&&c_(t.endAt,e.endAt)}function Ay(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n=null,r=[],i=[],a=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function R9(t,e,n,r,i,a,c,u){return new au(t,e,n,r,i,a,c,u)}function up(t){return new au(t)}function d_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fN(t){return t.collectionGroup!==null}function ld(t){const e=Nt(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new cr(kr.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Nd(a,r))}),n.has(kr.keyField().canonicalString())||e.Te.push(new Nd(kr.keyField(),r))}return e.Te}function Ms(t){const e=Nt(t);return e.Ie||(e.Ie=M9(e,ld(t))),e.Ie}function M9(t,e){if(t.limitType==="F")return u_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Nd(i.field,a)});const n=t.endAt?new Sm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sm(t.startAt.position,t.startAt.inclusive):null;return u_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Iy(t,e){const n=t.filters.concat([e]);return new au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tm(t,e,n){return new au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dp(t,e){return rv(Ms(t),Ms(e))&&t.limitType===e.limitType}function mN(t){return`${nv(Ms(t))}|lt:${t.limitType}`}function Sc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>dN(i)).join(", ")}]`),lp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qc(i)).join(",")),`Target(${r})`}(Ms(t))}; limitType=${t.limitType})`}function hp(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ut.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of ld(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,u,d){const f=l_(c,u,d);return c.inclusive?f<=0:f<0}(r.startAt,ld(r),i)||r.endAt&&!function(c,u,d){const f=l_(c,u,d);return c.inclusive?f>=0:f>0}(r.endAt,ld(r),i))}(t,e)}function D9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pN(t){return(e,n)=>{let r=!1;for(const i of ld(t)){const a=O9(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function O9(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(a,c,u){const d=c.data.field(a),f=u.data.field(a);return d!==null&&f!==null?Wc(d,f):yt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return yt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return JT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=new Pn(ut.comparator);function _a(){return L9}const gN=new Pn(ut.comparator);function Zu(...t){let e=gN;for(const n of t)e=e.insert(n.key,n);return e}function yN(t){let e=gN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function al(){return cd()}function xN(){return cd()}function cd(){return new Pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const V9=new Pn(ut.comparator),F9=new cr(ut.comparator);function $t(...t){let e=F9;for(const n of t)e=e.add(n);return e}const U9=new cr(Mt);function $9(){return U9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_m(e)?"-0":e}}function vN(t){return{integerValue:""+t}}function z9(t,e){return p9(e)?vN(e):iv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this._=void 0}}function B9(t,e,n){return t instanceof Cd?function(i,a){const c={fields:{[tN]:{stringValue:eN},[rN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&ev(a)&&(a=cp(a)),a&&(c.fields[nN]=a),{mapValue:c}}(n,e):t instanceof jd?wN(t,e):t instanceof Ad?_N(t,e):function(i,a){const c=bN(i,a),u=h_(c)+h_(i.Ee);return Cy(c)&&Cy(i.Ee)?vN(u):iv(i.serializer,u)}(t,e)}function H9(t,e,n){return t instanceof jd?wN(t,e):t instanceof Ad?_N(t,e):n}function bN(t,e){return t instanceof Nm?function(r){return Cy(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Cd extends fp{}class jd extends fp{constructor(e){super(),this.elements=e}}function wN(t,e){const n=EN(e);for(const r of t.elements)n.some(i=>Bs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ad extends fp{constructor(e){super(),this.elements=e}}function _N(t,e){let n=EN(e);for(const r of t.elements)n=n.filter(i=>!Bs(i,r));return{arrayValue:{values:n}}}class Nm extends fp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function h_(t){return qn(t.integerValue||t.doubleValue)}function EN(t){return tv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,n){this.field=e,this.transform=n}}function q9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof jd&&i instanceof jd||r instanceof Ad&&i instanceof Ad?Hc(r.elements,i.elements,Bs):r instanceof Nm&&i instanceof Nm?Bs(r.Ee,i.Ee):r instanceof Cd&&i instanceof Cd}(t.transform,e.transform)}class G9{constructor(e,n){this.version=e,this.transformResults=n}}class $i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mp{}function kN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sv(t.key,$i.none()):new nh(t.key,t.data,$i.none());{const n=t.data,r=ui.empty();let i=new cr(kr.comparator);for(let a of e.fields)if(!i.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new Po(t.key,r,new Ei(i.toArray()),$i.none())}}function K9(t,e,n){t instanceof nh?function(i,a,c){const u=i.value.clone(),d=m_(i.fieldTransforms,a,c.transformResults);u.setAll(d),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Po?function(i,a,c){if(!Qf(i.precondition,a))return void a.convertToUnknownDocument(c.version);const u=m_(i.fieldTransforms,a,c.transformResults),d=a.data;d.setAll(SN(i)),d.setAll(u),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function ud(t,e,n,r){return t instanceof nh?function(a,c,u,d){if(!Qf(a.precondition,c))return u;const f=a.value.clone(),g=p_(a.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Po?function(a,c,u,d){if(!Qf(a.precondition,c))return u;const f=p_(a.fieldTransforms,d,c),g=c.data;return g.setAll(SN(a)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(a,c,u){return Qf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function X9(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=bN(r.transform,i||null);a!=null&&(n===null&&(n=ui.empty()),n.set(r.field,a))}return n||null}function f_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Hc(r,i,(a,c)=>q9(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nh extends mp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Po extends mp{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function SN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function m_(t,e,n){const r=new Map;Zt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],c=a.transform,u=e.data.field(a.field);r.set(a.field,H9(c,u,n[i]))}return r}function p_(t,e,n){const r=new Map;for(const i of t){const a=i.transform,c=n.data.field(i.field);r.set(i.field,B9(a,c,e))}return r}class sv extends mp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y9 extends mp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&K9(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ud(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ud(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xN();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(i.key)?null:u;const d=kN(c,u);d!==null&&r.set(i.key,d),c.isValidDocument()||c.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$t())}isEqual(e){return this.batchId===e.batchId&&Hc(this.mutations,e.mutations,(n,r)=>f_(n,r))&&Hc(this.baseMutations,e.baseMutations,(n,r)=>f_(n,r))}}class av{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Zt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return V9}();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new av(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn,Bt;function eM(t){switch(t){case _e.OK:return yt(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return yt(15467,{code:t})}}function TN(t){if(t===void 0)return wa("GRPC error has no .code"),_e.UNKNOWN;switch(t){case Jn.OK:return _e.OK;case Jn.CANCELLED:return _e.CANCELLED;case Jn.UNKNOWN:return _e.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return _e.INTERNAL;case Jn.UNAVAILABLE:return _e.UNAVAILABLE;case Jn.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Jn.NOT_FOUND:return _e.NOT_FOUND;case Jn.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Jn.ABORTED:return _e.ABORTED;case Jn.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Jn.DATA_LOSS:return _e.DATA_LOSS;default:return yt(39323,{code:t})}}(Bt=Jn||(Jn={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new mo([4294967295,4294967295],0);function g_(t){const e=KT().encode(t),n=new UT;return n.update(e),new Uint8Array(n.digest())}function y_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([n,r],0),new mo([i,a],0)]}class ov{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ed(`Invalid padding: ${n}`);if(r<0)throw new ed(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ed(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ed(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=mo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(mo.fromNumber(r)));return i.compare(tM)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=g_(e),[r,i]=y_(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);if(!this.ye(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new ov(a,i,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=g_(e),[r,i]=y_(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pp(kt.min(),i,new Pn(Mt),_a(),$t())}}class rh{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rh(r,n,$t(),$t(),$t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class NN{constructor(e,n){this.targetId=e,this.De=n}}class CN{constructor(e,n,r=Tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class x_{constructor(){this.ve=0,this.Ce=v_(),this.Fe=Tr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=$t(),n=$t(),r=$t();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:yt(38017,{changeType:a})}}),new rh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=v_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class nM{constructor(e){this.We=e,this.Ge=new Map,this.ze=_a(),this.je=kf(),this.Je=kf(),this.He=new Pn(Mt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:yt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(Ay(a))if(r===0){const c=new ut(a.path);this.Xe(n,c,Lr.newNoDocument(c,kt.min()))}else Zt(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),d=u?this.ut(u,e,c):1;if(d!==0){this.rt(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let c,u;try{c=bo(r).toUint8Array()}catch(d){if(d instanceof ZT)return yo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new ov(c,i,a)}catch(d){return yo(d instanceof ed?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&Ay(u.target)){const d=new ut(u.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,Lr.newNoDocument(d,e))}a.Ne&&(n.set(c,a.Le()),a.ke())}});let r=$t();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(d=>{const f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const i=new pp(e,n,this.He,this.ze,r);return this.ze=_a(),this.je=kf(),this.Je=kf(),this.He=new Pn(Mt),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new x_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new cr(Mt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new cr(Mt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ye("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new x_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function kf(){return new Pn(ut.comparator)}function v_(){return new Pn(ut.comparator)}const rM={asc:"ASCENDING",desc:"DESCENDING"},iM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sM={and:"AND",or:"OR"};class aM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Py(t,e){return t.useProto3Json||lp(e)?e:{value:e}}function Cm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oM(t,e){return Cm(t,e.toTimestamp())}function Ds(t){return Zt(!!t,49232),kt.fromTimestamp(function(n){const r=vo(n);return new xn(r.seconds,r.nanos)}(t))}function lv(t,e){return Ry(t,e).canonicalString()}function Ry(t,e){const n=function(i){return new hn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AN(t){const e=hn.fromString(t);return Zt(DN(e),10190,{key:e.toString()}),e}function My(t,e){return lv(t.databaseId,e.path)}function j0(t,e){const n=AN(e);if(n.get(1)!==t.databaseId.projectId)throw new Ge(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ge(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(PN(n))}function IN(t,e){return lv(t.databaseId,e)}function lM(t){const e=AN(t);return e.length===4?hn.emptyPath():PN(e)}function Dy(t){return new hn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PN(t){return Zt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function b_(t,e,n){return{name:My(t,e),fields:n.value.mapValue.fields}}function cM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:yt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,g){return f.useProto3Json?(Zt(g===void 0||typeof g=="string",58123),Tr.fromBase64String(g||"")):(Zt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Tr.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const g=f.code===void 0?_e.UNKNOWN:TN(f.code);return new Ge(g,f.message||"")}(c);n=new CN(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=j0(t,r.document.name),a=Ds(r.document.updateTime),c=r.document.createTime?Ds(r.document.createTime):kt.min(),u=new ui({mapValue:{fields:r.document.fields}}),d=Lr.newFoundDocument(i,a,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new Jf(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=j0(t,r.document),a=r.readTime?Ds(r.readTime):kt.min(),c=Lr.newNoDocument(i,a),u=r.removedTargetIds||[];n=new Jf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=j0(t,r.document),a=r.removedTargetIds||[];n=new Jf([],a,i,null)}else{if(!("filter"in e))return yt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new Z9(i,a),u=r.targetId;n=new NN(u,c)}}return n}function uM(t,e){let n;if(e instanceof nh)n={update:b_(t,e.key,e.value)};else if(e instanceof sv)n={delete:My(t,e.key)};else if(e instanceof Po)n={update:b_(t,e.key,e.data),updateMask:vM(e.fieldMask)};else{if(!(e instanceof Y9))return yt(16599,{Rt:e.type});n={verify:My(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof Cd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ad)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Nm)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw yt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:oM(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:yt(27497)}(t,e.precondition)),n}function dM(t,e){return t&&t.length>0?(Zt(e!==void 0,14353),t.map(n=>function(i,a){let c=i.updateTime?Ds(i.updateTime):Ds(a);return c.isEqual(kt.min())&&(c=Ds(a)),new G9(c,i.transformResults||[])}(n,e))):[]}function hM(t,e){return{documents:[IN(t,e.path)]}}function fM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IN(t,i);const a=function(f){if(f.length!==0)return MN(as.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(g=>function(x){return{field:Tc(x.field),direction:gM(x.dir)}}(g))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=Py(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:i}}function mM(t){let e=lM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zt(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(y){const x=RN(y);return x instanceof as&&cN(x)?x.getFilters():[x]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(x=>function(S){return new Nd(Nc(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(x))}(n.orderBy));let u=null;n.limit&&(u=function(y){let x;return x=typeof y=="object"?y.value:y,lp(x)?null:x}(n.limit));let d=null;n.startAt&&(d=function(y){const x=!!y.before,w=y.values||[];return new Sm(w,x)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const x=!y.before,w=y.values||[];return new Sm(w,x)}(n.endAt)),R9(e,i,c,a,u,"F",d,f)}function pM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nc(n.unaryFilter.field);return nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nc(n.unaryFilter.field);return nr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Nc(n.unaryFilter.field);return nr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nc(n.unaryFilter.field);return nr.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(t):t.fieldFilter!==void 0?function(n){return nr.create(Nc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return as.create(n.compositeFilter.filters.map(r=>RN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(n.compositeFilter.op))}(t):yt(30097,{filter:t})}function gM(t){return rM[t]}function yM(t){return iM[t]}function xM(t){return sM[t]}function Tc(t){return{fieldPath:t.canonicalString()}}function Nc(t){return kr.fromServerFormat(t.fieldPath)}function MN(t){return t instanceof nr?function(n){if(n.op==="=="){if(o_(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NAN"}};if(a_(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o_(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NOT_NAN"}};if(a_(n.value))return{unaryFilter:{field:Tc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tc(n.field),op:yM(n.op),value:n.value}}}(t):t instanceof as?function(n){const r=n.getFilters().map(i=>MN(i));return r.length===1?r[0]:{compositeFilter:{op:xM(n.op),filters:r}}}(t):yt(54877,{filter:t})}function vM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,r,i,a=kt.min(),c=kt.min(),u=Tr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.gt=e}}function wM(t){const e=mM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.Dn=new EM}addToCollectionParentIndex(e,n){return this.Dn.add(n),Ee.resolve()}getCollectionParents(e,n){return Ee.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Ee.resolve()}deleteFieldIndex(e,n){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,n){return Ee.resolve()}getDocumentsMatchingTarget(e,n){return Ee.resolve(null)}getIndexType(e,n){return Ee.resolve(0)}getFieldIndexes(e,n){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,n){return Ee.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,n){return Ee.resolve(xo.min())}updateCollectionGroup(e,n,r){return Ee.resolve()}updateIndexEntries(e,n){return Ee.resolve()}}class EM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new cr(hn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(hn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ON=41943040;class li{static withCacheSize(e){return new li(e,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li.DEFAULT_COLLECTION_PERCENTILE=10,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,li.DEFAULT=new li(ON,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),li.DISABLED=new li(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Gc(0)}static ur(){return new Gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="LruGarbageCollector",kM=1048576;function E_([t,e],[n,r]){const i=Mt(t,n);return i===0?Mt(e,r):i}class SM{constructor(e){this.Tr=e,this.buffer=new cr(E_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();E_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ye(__,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){su(n)?Ye(__,"Ignoring IndexedDB error during garbage collection: ",n):await iu(n)}await this.Rr(3e5)})}}class NM{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Ee.resolve(op.ue);const r=new SM(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(w_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),w_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),kc()<=Ut.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:y})))}}function CM(t,e){return new NM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.changes=new Pl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ud(r.mutation,i,Ei.empty(),xn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$t()){const i=al();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let c=Zu();return a.forEach((u,d)=>{c=c.insert(u,d.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=al();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$t()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,i){let a=_a();const c=cd(),u=function(){return cd()}();return n.forEach((d,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Po)?a=a.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),ud(g.mutation,f,g.mutation.getFieldMask(),xn.now())):c.set(f.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new AM(g,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=cd();let i=new Pn((c,u)=>c-u),a=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let g=r.get(d)||Ei.empty();g=u.applyToLocalView(f,g),r.set(d,g);const y=(i.get(u.batchId)||$t()).add(d);i=i.insert(u.batchId,y)})}).next(()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=xN();g.forEach(x=>{if(!a.has(x)){const w=kN(n.get(x),r.get(x));w!==null&&y.set(x,w),a=a.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Ee.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return ut.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ee.resolve(al());let u=Ed,d=a;return c.next(f=>Ee.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(g)?Ee.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{d=d.insert(g,x)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,d,f,$t())).next(g=>({batchId:u,changes:yN(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=Zu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let c=Zu();return this.indexManager.getCollectionParents(e,a).next(u=>Ee.forEach(u,d=>{const f=function(y,x){return new au(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,x)=>{c=c.insert(y,x)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(c=>{a.forEach((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Lr.newInvalidDocument(g)))});let u=Zu();return c.forEach((d,f)=>{const g=a.get(d);g!==void 0&&ud(g.mutation,f,Ei.empty(),xn.now()),hp(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Ee.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ds(i.createTime)}}(n)),Ee.resolve()}getNamedQuery(e,n){return Ee.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:wM(i.bundledQuery),readTime:Ds(i.readTime)}}(n)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.overlays=new Pn(ut.comparator),this.kr=new Map}getOverlay(e,n){return Ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=al();return Ee.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),Ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),Ee.resolve()}getOverlaysForCollection(e,n,r){const i=al(),a=n.length+1,c=new ut(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>r&&i.set(d.getKey(),d)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Pn((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=a.get(f.largestBatchId);g===null&&(g=al(),a=a.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=al(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=i)););return Ee.resolve(u)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new J9(n,r));let a=this.kr.get(n);a===void 0&&(a=$t(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.sessionToken=Tr.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.qr=new cr(pr.Qr),this.$r=new cr(pr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new pr(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new pr(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ut(new hn([])),r=new pr(n,e),i=new pr(n,e+1),a=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ut(new hn([])),r=new pr(n,e),i=new pr(n,e+1);let a=$t();return this.$r.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new pr(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pr{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ut.comparator(e.key,n.key)||Mt(e.Hr,n.Hr)}static Ur(e,n){return Mt(e.Hr,n.Hr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new cr(pr.Qr)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Q9(a,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Yr=this.Yr.add(new pr(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ee.resolve(c)}lookupMutationBatch(e,n){return Ee.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?Zx:this.er-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pr(n,0),i=new pr(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],c=>{const u=this.Zr(c.Hr);a.push(u)}),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cr(Mt);return n.forEach(i=>{const a=new pr(i,0),c=new pr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),Ee.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ut.isDocumentKey(a)||(a=a.child(""));const c=new pr(new ut(a),0);let u=new cr(Mt);return this.Yr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(d.Hr)),!0)},c),Ee.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Zt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Ee.forEach(n.mutations,i=>{const a=new pr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new pr(n,0),i=this.Yr.firstAfterOrEqual(r);return Ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.ni=e,this.docs=function(){return new Pn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ee.resolve(r?r.document.mutableCopy():Lr.newInvalidDocument(n))}getEntries(e,n){let r=_a();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Lr.newInvalidDocument(i))}),Ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=_a();const c=n.path,u=new ut(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||d9(u9(g),r)<=0||(i.has(g.key)||hp(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Ee.resolve(a)}getAllFromCollectionGroup(e,n,r,i){yt(9500)}ri(e,n){return Ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LM(this)}getSize(e){return Ee.resolve(this.size)}}class LM extends jM{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Ee.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.persistence=e,this.ii=new Pl(n=>nv(n),rv),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.si=0,this.oi=new cv,this.targetCount=0,this._i=Gc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Ee.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Gc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Ee.resolve()}updateTargetData(e,n){return this.hr(n),Ee.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Ee.waitFor(a).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Ee.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Ee.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Ee.resolve(r)}containsKey(e,n){return Ee.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.ai={},this.overlays={},this.ui=new op(0),this.ci=!1,this.ci=!0,this.li=new MM,this.referenceDelegate=e(this),this.hi=new VM(this),this.indexManager=new _M,this.remoteDocumentCache=function(i){return new OM(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new bM(n),this.Ti=new PM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new DM(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Ye("MemoryPersistence","Starting transaction:",e);const i=new FM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return Ee.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class FM extends f9{constructor(e){super(),this.currentSequenceNumber=e}}class uv{constructor(e){this.persistence=e,this.Ai=new cv,this.Ri=null}static Vi(e){return new uv(e)}get mi(){if(this.Ri)return this.Ri;throw yt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Ee.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Ee.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.mi,r=>{const i=ut.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,kt.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Ee.or([()=>Ee.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class jm{constructor(e,n){this.persistence=e,this.gi=new Pl(r=>g9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=CM(this,n)}static Vi(e,n){return new jm(e,n)}Ii(){}di(e){return Ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Ee.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?Ee.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,kt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Ee.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Ee.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Ee.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xf(e.data.value)),n}Sr(e,n,r){return Ee.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return Ee.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=$t(),i=$t();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new dv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return x3()?8:m9(Ur())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new UM;return this.ws(e,n,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(kc()<=Ut.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",Sc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ee.resolve()):(kc()<=Ut.DEBUG&&Ye("QueryEngine","Query:",Sc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(kc()<=Ut.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",Sc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(n))):Ee.resolve())}ps(e,n){if(d_(n))return Ee.resolve(null);let r=Ms(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tm(n,null,"F"),r=Ms(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=$t(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.bs(n,u);return this.Ds(n,f,c,d.readTime)?this.ps(e,Tm(n,null,"F")):this.vs(e,f,n,d)}))})))}ys(e,n,r,i){return d_(n)||i.isEqual(kt.min())?Ee.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(n,a);return this.Ds(n,c,r,i)?Ee.resolve(null):(kc()<=Ut.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sc(n)),this.vs(e,c,n,c9(i,Ed)).next(u=>u))})}bs(e,n){let r=new cr(pN(e));return n.forEach((i,a)=>{hp(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return kc()<=Ut.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",Sc(n)),this.gs.getDocumentsMatchingQuery(e,n,xo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="LocalStore",zM=3e8;class BM{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Pn(Mt),this.Ms=new Pl(a=>nv(a),rv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IM(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function HM(t,e,n,r){return new BM(t,e,n,r)}async function VN(t,e){const n=Nt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let d=$t();for(const f of i){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of a){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function WM(t,e){const n=Nt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,d,f,g){const y=f.batch,x=y.keys();let w=Ee.resolve();return x.forEach(S=>{w=w.next(()=>g.getEntry(d,S)).next(b=>{const N=f.docVersions.get(S);Zt(N!==null,48541),b.version.compareTo(N)<0&&(y.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),g.addEntry(b)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=$t();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FN(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function qM(t,e){const n=Nt(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const x=i.get(y);if(!x)return;u.push(n.hi.removeMatchingKeys(a,g.removedDocuments,y).next(()=>n.hi.addMatchingKeys(a,g.addedDocuments,y)));let w=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(Tr.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(y,w),function(b,N,j){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=zM?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(x,w,g)&&u.push(n.hi.updateTargetData(a,w))});let d=_a(),f=$t();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push(GM(a,c,e.documentUpdates).next(g=>{d=g.Ls,f=g.ks})),!r.isEqual(kt.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next(y=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return Ee.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,d,f)).next(()=>d)}).then(a=>(n.Fs=i,a))}function GM(t,e,n){let r=$t(),i=$t();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=_a();return n.forEach((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(kt.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):Ye(hv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ls:c,ks:i}})}function KM(t,e){const n=Nt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XM(t,e){const n=Nt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,Ee.resolve(i)):n.hi.allocateTargetId(r).next(c=>(i=new co(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Oy(t,e,n){const r=Nt(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!su(c))throw c;Ye(hv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function k_(t,e,n){const r=Nt(t);let i=kt.min(),a=$t();return r.persistence.runTransaction("Execute query","readwrite",c=>function(d,f,g){const y=Nt(d),x=y.Ms.get(g);return x!==void 0?Ee.resolve(y.Fs.get(x)):y.hi.getTargetData(f,g)}(r,c,Ms(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(d=>{a=d})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:kt.min(),n?a:$t())).next(u=>(YM(r,D9(e),u),{documents:u,qs:a})))}function YM(t,e,n){let r=t.xs.get(e)||kt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class S_{constructor(){this.activeTargetIds=$9()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QM{constructor(){this.Fo=new S_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new S_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="ConnectivityMonitor";class N_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ye(T_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ye(T_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf=null;function Ly(){return Sf===null?Sf=function(){return 268435456+Math.round(2147483648*Math.random())}():Sf++,"0x"+Sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="RestConnection",ZM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eD{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Em?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const c=Ly(),u=this.Go(e,n.toUriEncodedString());Ye(A0,`Sending RPC '${e}' ${c}:`,u,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,i,a);const{host:f}=new URL(u),g=jo(f);return this.jo(e,u,d,r,g).then(y=>(Ye(A0,`Received RPC '${e}' ${c}: `,y),y),y=>{throw yo(A0,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,a,c){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ru}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=ZM[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="WebChannelConnection";class nD extends eD{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const c=Ly();return new Promise((u,d)=>{const f=new $T;f.setWithCredentials(!0),f.listenOnce(zT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Kf.NO_ERROR:const y=f.getResponseJson();Ye(Rr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Kf.TIMEOUT:Ye(Rr,`RPC '${e}' ${c} timed out`),d(new Ge(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const x=f.getStatus();if(Ye(Rr,`RPC '${e}' ${c} failed with status:`,x,"response text:",f.getResponseText()),x>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const b=function(j){const O=j.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(O)>=0?O:_e.UNKNOWN}(S.status);d(new Ge(b,S.message))}else d(new Ge(_e.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ge(_e.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Ye(Rr,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(i);Ye(Rr,`RPC '${e}' ${c} sending request:`,i),f.send(n,"POST",g,r,15)})}P_(e,n,r){const i=Ly(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=WT(),u=HT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=a.join("");Ye(Rr,`Creating RPC '${e}' stream ${i}: ${g}`,d);const y=c.createWebChannel(g,d);this.T_(y);let x=!1,w=!1;const S=new tD({Ho:N=>{w?Ye(Rr,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(x||(Ye(Rr,`Opening RPC '${e}' stream ${i} transport.`),y.open(),x=!0),Ye(Rr,`RPC '${e}' stream ${i} sending:`,N),y.send(N))},Yo:()=>y.close()}),b=(N,j,O)=>{N.listen(j,I=>{try{O(I)}catch(V){setTimeout(()=>{throw V},0)}})};return b(y,Ju.EventType.OPEN,()=>{w||(Ye(Rr,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),b(y,Ju.EventType.CLOSE,()=>{w||(w=!0,Ye(Rr,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(y))}),b(y,Ju.EventType.ERROR,N=>{w||(w=!0,yo(Rr,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),S.__(new Ge(_e.UNAVAILABLE,"The operation could not be completed")))}),b(y,Ju.EventType.MESSAGE,N=>{var j;if(!w){const O=N.data[0];Zt(!!O,16349);const I=O,V=(I==null?void 0:I.error)||((j=I[0])===null||j===void 0?void 0:j.error);if(V){Ye(Rr,`RPC '${e}' stream ${i} received error:`,V);const $=V.status;let q=function(P){const T=Jn[P];if(T!==void 0)return TN(T)}($),D=V.message;q===void 0&&(q=_e.INTERNAL,D="Unknown error status: "+$+" with message "+V.message),w=!0,S.__(new Ge(q,D)),y.close()}else Ye(Rr,`RPC '${e}' stream ${i} received:`,O),S.a_(O)}}),b(u,BT.STAT_EVENT,N=>{N.stat===Sy.PROXY?Ye(Rr,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Sy.NOPROXY&&Ye(Rr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function I0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){return new aM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="PersistentStream";class $N{constructor(e,n,r,i,a,c,u,d){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new UN(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(wa(n.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Ge(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ye(C_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Ye(C_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rD extends $N{constructor(e,n,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=cM(this.serializer,e),r=function(a){if(!("targetChange"in a))return kt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?kt.min():c.readTime?Ds(c.readTime):kt.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Dy(this.serializer),n.addTarget=function(a,c){let u;const d=c.target;if(u=Ay(d)?{documents:hM(a,d)}:{query:fM(a,d).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=jN(a,c.resumeToken);const f=Py(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(kt.min())>0){u.readTime=Cm(a,c.snapshotVersion.toTimestamp());const f=Py(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=pM(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Dy(this.serializer),n.removeTarget=e,this.k_(n)}}class iD extends $N{constructor(e,n,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=dM(e.writeResults,e.commitTime),r=Ds(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Dy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uM(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{}class aD extends sD{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ge(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,Ry(n,r),i,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ge(_e.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,Ry(n,r),i,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ge(_e.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class oD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(wa(n),this._a=!1):Ye("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="RemoteStore";class lD{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Rl(this)&&(Ye(kl,"Restarting streams for network reachability change."),await async function(d){const f=Nt(d);f.Ia.add(4),await ih(f),f.Aa.set("Unknown"),f.Ia.delete(4),await yp(f)}(this))})}),this.Aa=new oD(r,i)}}async function yp(t){if(Rl(t))for(const e of t.da)await e(!0)}async function ih(t){for(const e of t.da)await e(!1)}function zN(t,e){const n=Nt(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),gv(n)?pv(n):ou(n).x_()&&mv(n,e))}function fv(t,e){const n=Nt(t),r=ou(n);n.Ta.delete(e),r.x_()&&BN(n,e),n.Ta.size===0&&(r.x_()?r.B_():Rl(n)&&n.Aa.set("Unknown"))}function mv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ou(t).H_(e)}function BN(t,e){t.Ra.$e(e),ou(t).Y_(e)}function pv(t){t.Ra=new nM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ou(t).start(),t.Aa.aa()}function gv(t){return Rl(t)&&!ou(t).M_()&&t.Ta.size>0}function Rl(t){return Nt(t).Ia.size===0}function HN(t){t.Ra=void 0}async function cD(t){t.Aa.set("Online")}async function uD(t){t.Ta.forEach((e,n)=>{mv(t,e)})}async function dD(t,e){HN(t),gv(t)?(t.Aa.la(e),pv(t)):t.Aa.set("Unknown")}async function hD(t,e,n){if(t.Aa.set("Online"),e instanceof CN&&e.state===2&&e.cause)try{await async function(i,a){const c=a.cause;for(const u of a.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ta.delete(u),i.Ra.removeTarget(u))}(t,e)}catch(r){Ye(kl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Am(t,r)}else if(e instanceof Jf?t.Ra.Ye(e):e instanceof NN?t.Ra.it(e):t.Ra.et(e),!n.isEqual(kt.min()))try{const r=await FN(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=a.Ta.get(f);g&&a.Ta.set(f,g.withResumeToken(d.resumeToken,c))}}),u.targetMismatches.forEach((d,f)=>{const g=a.Ta.get(d);if(!g)return;a.Ta.set(d,g.withResumeToken(Tr.EMPTY_BYTE_STRING,g.snapshotVersion)),BN(a,d);const y=new co(g.target,d,f,g.sequenceNumber);mv(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Ye(kl,"Failed to raise snapshot:",r),await Am(t,r)}}async function Am(t,e,n){if(!su(e))throw e;t.Ia.add(1),await ih(t),t.Aa.set("Offline"),n||(n=()=>FN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ye(kl,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await yp(t)})}function WN(t,e){return e().catch(n=>Am(t,n,e))}async function xp(t){const e=Nt(t),n=_o(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zx;for(;fD(e);)try{const i=await KM(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,mD(e,i)}catch(i){await Am(e,i)}qN(e)&&GN(e)}function fD(t){return Rl(t)&&t.Pa.length<10}function mD(t,e){t.Pa.push(e);const n=_o(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function qN(t){return Rl(t)&&!_o(t).M_()&&t.Pa.length>0}function GN(t){_o(t).start()}async function pD(t){_o(t).na()}async function gD(t){const e=_o(t);for(const n of t.Pa)e.X_(n.mutations)}async function yD(t,e,n){const r=t.Pa.shift(),i=av.from(r,e,n);await WN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xp(t)}async function xD(t,e){e&&_o(t).Z_&&await async function(r,i){if(function(c){return eM(c)&&c!==_e.ABORTED}(i.code)){const a=r.Pa.shift();_o(r).N_(),await WN(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await xp(r)}}(t,e),qN(t)&&GN(t)}async function j_(t,e){const n=Nt(t);n.asyncQueue.verifyOperationInProgress(),Ye(kl,"RemoteStore received new credentials");const r=Rl(n);n.Ia.add(3),await ih(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await yp(n)}async function vD(t,e){const n=Nt(t);e?(n.Ia.delete(2),await yp(n)):e||(n.Ia.add(2),await ih(n),n.Aa.set("Unknown"))}function ou(t){return t.Va||(t.Va=function(n,r,i){const a=Nt(n);return a.ia(),new rD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:cD.bind(null,t),e_:uD.bind(null,t),n_:dD.bind(null,t),J_:hD.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),gv(t)?pv(t):t.Aa.set("Unknown")):(await t.Va.stop(),HN(t))})),t.Va}function _o(t){return t.ma||(t.ma=function(n,r,i){const a=Nt(n);return a.ia(),new iD(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:pD.bind(null,t),n_:xD.bind(null,t),ea:gD.bind(null,t),ta:yD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await xp(t)):(await t.ma.stop(),t.Pa.length>0&&(Ye(kl,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const c=Date.now()+r,u=new yv(e,n,c,i,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xv(t,e){if(wa("AsyncQueue",`${e}: ${t}`),su(t))return new Ge(_e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{static emptySet(e){return new Uc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Zu(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Uc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Uc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.fa=new Pn(ut.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):yt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kc{constructor(e,n,r,i,a,c,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new Kc(e,n,Uc.emptySet(n),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class wD{constructor(){this.queries=I_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Nt(n),a=i.queries;i.queries=I_(),a.forEach((c,u)=>{for(const d of u.wa)d.onError(r)})})(this,new Ge(_e.ABORTED,"Firestore shutting down"))}}function I_(){return new Pl(t=>mN(t),dp)}async function vv(t,e){const n=Nt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new bD,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=xv(c,`Initialization of query '${Sc(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&wv(n)}async function bv(t,e){const n=Nt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _D(t,e){const n=Nt(t);let r=!1;for(const i of e){const a=i.query,c=n.queries.get(a);if(c){for(const u of c.wa)u.Ca(i)&&(r=!0);c.ya=i}}r&&wv(n)}function ED(t,e,n){const r=Nt(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function wv(t){t.Da.forEach(e=>{e.next()})}var Vy,P_;(P_=Vy||(Vy={})).Fa="default",P_.Cache="cache";class _v{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Vy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.key=e}}class XN{constructor(e){this.key=e}}class kD{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=$t(),this.mutatedKeys=$t(),this.Xa=pN(e),this.eu=new Uc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new A_,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const x=i.get(g),w=hp(this.query,y)?y:null,S=!!x&&this.mutatedKeys.has(x.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;x&&w?x.data.isEqual(w.data)?S!==b&&(r.track({type:3,doc:w}),N=!0):this.iu(x,w)||(r.track({type:2,doc:w}),N=!0,(d&&this.Xa(w,d)>0||f&&this.Xa(w,f)<0)&&(u=!0)):!x&&w?(r.track({type:0,doc:w}),N=!0):x&&!w&&(r.track({type:1,doc:x}),N=!0,(d||f)&&(u=!0)),N&&(w?(c=c.add(w),a=b?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(w,S){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{At:N})}};return b(w)-b(S)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],d=this.Za.size===0&&this.current&&!i?1:0,f=d!==this.Ya;return this.Ya=d,c.length!==0||f?{snapshot:new Kc(this.query,e.eu,a,c,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new A_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=$t(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new XN(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new KN(r))}),n}uu(e){this.Ha=e.qs,this.Za=$t();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Kc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ev="SyncEngine";class SD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TD{constructor(e){this.key=e,this.lu=!1}}class ND{constructor(e,n,r,i,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Pl(u=>mN(u),dp),this.Tu=new Map,this.Iu=new Set,this.du=new Pn(ut.comparator),this.Eu=new Map,this.Au=new cv,this.Ru={},this.Vu=new Map,this.mu=Gc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function CD(t,e,n=!0){const r=tC(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await YN(r,e,n,!0),i}async function jD(t,e){const n=tC(t);await YN(n,e,!0,!1)}async function YN(t,e,n,r){const i=await XM(t.localStore,Ms(e)),a=i.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await AD(t,e,a,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&zN(t.remoteStore,i),u}async function AD(t,e,n,r,i){t.gu=(y,x,w)=>async function(b,N,j,O){let I=N.view.nu(j);I.Ds&&(I=await k_(b.localStore,N.query,!1).then(({documents:D})=>N.view.nu(D,I)));const V=O&&O.targetChanges.get(N.targetId),$=O&&O.targetMismatches.get(N.targetId)!=null,q=N.view.applyChanges(I,b.isPrimaryClient,V,$);return M_(b,N.targetId,q._u),q.snapshot}(t,y,x,w);const a=await k_(t.localStore,e,!0),c=new kD(e,a.qs),u=c.nu(a.documents),d=rh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=c.applyChanges(u,t.isPrimaryClient,d);M_(t,n,f._u);const g=new SD(e,n,c);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function ID(t,e,n){const r=Nt(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(c=>!dp(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Oy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fv(r.remoteStore,i.targetId),Fy(r,i.targetId)}).catch(iu)):(Fy(r,i.targetId),await Oy(r.localStore,i.targetId,!0))}async function PD(t,e){const n=Nt(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fv(n.remoteStore,r.targetId))}async function RD(t,e,n){const r=UD(t);try{const i=await function(c,u){const d=Nt(c),f=xn.now(),g=u.reduce((w,S)=>w.add(S.key),$t());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=_a(),b=$t();return d.Os.getEntries(w,g).next(N=>{S=N,S.forEach((j,O)=>{O.isValidDocument()||(b=b.add(j))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,S)).next(N=>{y=N;const j=[];for(const O of u){const I=X9(O,y.get(O.key).overlayedDocument);I!=null&&j.push(new Po(O.key,I,aN(I.value.mapValue),$i.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,j,u)}).next(N=>{x=N;const j=N.applyToLocalDocumentSet(y,b);return d.documentOverlayCache.saveOverlays(w,N.batchId,j)})}).then(()=>({batchId:x.batchId,changes:yN(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,u,d){let f=c.Ru[c.currentUser.toKey()];f||(f=new Pn(Mt)),f=f.insert(u,d),c.Ru[c.currentUser.toKey()]=f}(r,i.batchId,n),await sh(r,i.changes),await xp(r.remoteStore)}catch(i){const a=xv(i,"Failed to persist write");n.reject(a)}}async function QN(t,e){const n=Nt(t);try{const r=await qM(n.localStore,e);e.targetChanges.forEach((i,a)=>{const c=n.Eu.get(a);c&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?Zt(c.lu,14607):i.removedDocuments.size>0&&(Zt(c.lu,42227),c.lu=!1))}),await sh(n,r,e)}catch(r){await iu(r)}}function R_(t,e,n){const r=Nt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(c,u){const d=Nt(c);d.onlineState=u;let f=!1;d.queries.forEach((g,y)=>{for(const x of y.wa)x.va(u)&&(f=!0)}),f&&wv(d)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MD(t,e,n){const r=Nt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let c=new Pn(ut.comparator);c=c.insert(a,Lr.newNoDocument(a,kt.min()));const u=$t().add(a),d=new pp(kt.min(),new Map,new Pn(Mt),c,u);await QN(r,d),r.du=r.du.remove(a),r.Eu.delete(e),kv(r)}else await Oy(r.localStore,e,!1).then(()=>Fy(r,e,n)).catch(iu)}async function DD(t,e){const n=Nt(t),r=e.batch.batchId;try{const i=await WM(n.localStore,e);ZN(n,r,null),JN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sh(n,i)}catch(i){await iu(i)}}async function OD(t,e,n){const r=Nt(t);try{const i=await function(c,u){const d=Nt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Zt(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);ZN(r,e,n),JN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sh(r,i)}catch(i){await iu(i)}}function JN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function ZN(t,e,n){const r=Nt(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Fy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||eC(t,r)})}function eC(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),kv(t))}function M_(t,e,n){for(const r of n)r instanceof KN?(t.Au.addReference(r.key,e),LD(t,r)):r instanceof XN?(Ye(Ev,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||eC(t,r.key)):yt(19791,{yu:r})}function LD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Ye(Ev,"New document in limbo: "+n),t.Iu.add(r),kv(t))}function kv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ut(hn.fromString(e)),r=t.mu.next();t.Eu.set(r,new TD(n)),t.du=t.du.insert(n,r),zN(t.remoteStore,new co(Ms(up(n.path)),r,"TargetPurposeLimboResolution",op.ue))}}async function sh(t,e,n){const r=Nt(t),i=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,d)=>{c.push(r.gu(d,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);const y=dv.Es(d.targetId,f);a.push(y)}}))}),await Promise.all(c),r.hu.J_(i),await async function(d,f){const g=Nt(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Ee.forEach(f,x=>Ee.forEach(x.Is,w=>g.persistence.referenceDelegate.addReference(y,x.targetId,w)).next(()=>Ee.forEach(x.ds,w=>g.persistence.referenceDelegate.removeReference(y,x.targetId,w)))))}catch(y){if(!su(y))throw y;Ye(hv,"Failed to update sequence numbers: "+y)}for(const y of f){const x=y.targetId;if(!y.fromCache){const w=g.Fs.get(x),S=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(x,b)}}}(r.localStore,a))}async function VD(t,e){const n=Nt(t);if(!n.currentUser.isEqual(e)){Ye(Ev,"User change. New user:",e.toKey());const r=await VN(n.localStore,e);n.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(d=>{d.reject(new Ge(_e.CANCELLED,c))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sh(n,r.Bs)}}function FD(t,e){const n=Nt(t),r=n.Eu.get(e);if(r&&r.lu)return $t().add(r.key);{let i=$t();const a=n.Tu.get(e);if(!a)return i;for(const c of a){const u=n.Pu.get(c);i=i.unionWith(u.view.tu)}return i}}function tC(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MD.bind(null,e),e.hu.J_=_D.bind(null,e.eventManager),e.hu.pu=ED.bind(null,e.eventManager),e}function UD(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OD.bind(null,e),e}class Im{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return HM(this.persistence,new $M,e.initialUser,this.serializer)}Du(e){return new LN(uv.Vi,this.serializer)}bu(e){return new QM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Im.provider={build:()=>new Im};class $D extends Im{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Zt(this.persistence.referenceDelegate instanceof jm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TM(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new LN(r=>jm.Vi(r,n),this.serializer)}}class Uy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>R_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VD.bind(null,this.syncEngine),await vD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wD}()}createDatastore(e){const n=gp(e.databaseInfo.databaseId),r=function(a){return new nD(a)}(e.databaseInfo);return function(a,c,u,d){return new aD(a,c,u,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,c,u){return new lD(r,i,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>R_(this.syncEngine,n,0),function(){return N_.C()?new N_:new JM}())}createSyncEngine(e,n){return function(i,a,c,u,d,f,g){const y=new ND(i,a,c,u,d,f);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Nt(i);Ye(kl,"RemoteStore shutting down."),a.Ia.add(5),await ih(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uy.provider={build:()=>new Uy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="FirestoreClient";class zD{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Or.UNAUTHENTICATED,this.clientId=Jx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Ye(Eo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ye(Eo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function P0(t,e){t.asyncQueue.verifyOperationInProgress(),Ye(Eo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{yo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Ye("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{yo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function D_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BD(t);Ye(Eo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>j_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>j_(e.remoteStore,i)),t._onlineComponents=e}async function BD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ye(Eo,"Using user provided OfflineComponentProvider");try{await P0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===_e.FAILED_PRECONDITION||i.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await P0(t,new Im)}}else Ye(Eo,"Using default OfflineComponentProvider"),await P0(t,new $D(void 0));return t._offlineComponents}async function nC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ye(Eo,"Using user provided OnlineComponentProvider"),await D_(t,t._uninitializedComponentsProvider._online)):(Ye(Eo,"Using default OnlineComponentProvider"),await D_(t,new Uy))),t._onlineComponents}function HD(t){return nC(t).then(e=>e.syncEngine)}async function Pm(t){const e=await nC(t),n=e.eventManager;return n.onListen=CD.bind(null,e.syncEngine),n.onUnlisten=ID.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PD.bind(null,e.syncEngine),n}function WD(t,e,n={}){const r=new ya;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,d,f){const g=new Sv({next:x=>{g.Ou(),c.enqueueAndForget(()=>bv(a,y));const w=x.docs.has(u);!w&&x.fromCache?f.reject(new Ge(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&d&&d.source==="server"?f.reject(new Ge(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new _v(up(u.path),g,{includeMetadataChanges:!0,ka:!0});return vv(a,y)}(await Pm(t),t.asyncQueue,e,n,r)),r.promise}function qD(t,e,n={}){const r=new ya;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,d,f){const g=new Sv({next:x=>{g.Ou(),c.enqueueAndForget(()=>bv(a,y)),x.fromCache&&d.source==="server"?f.reject(new Ge(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new _v(u,g,{includeMetadataChanges:!0,ka:!0});return vv(a,y)}(await Pm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="firestore.googleapis.com",L_=!0;class V_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iC,this.ssl=L_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:L_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ON;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kM)throw new Ge(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ge(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ge(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ge(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J6;switch(r.type){case"firstParty":return new n9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ge(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=O_.get(n);r&&(Ye("ComponentProvider","Removing Datastore"),O_.delete(n),r.terminate())}(this),Promise.resolve()}}function GD(t,e,n,r={}){var i;t=hi(t,vp);const a=jo(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(Lx(`https://${d}`),Vx("Firestore",!0)),c.host!==iC&&c.host!==d&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:d,ssl:a,emulatorOptions:r});if(!vl(f,u)&&(t._setSettings(f),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Or.MOCK_USER;else{g=eT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new Ge(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Or(x)}t._authCredentials=new Z6(new GT(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ja(this.firestore,e,this._query)}}class $n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}toJSON(){return{type:$n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(th(n,$n._jsonSchema))return new $n(e,r||null,new ut(hn.fromString(n.referencePath)))}}$n._jsonSchemaVersion="firestore/documentReference/1.0",$n._jsonSchema={type:rr("string",$n._jsonSchemaVersion),referencePath:rr("string")};class po extends ja{constructor(e,n,r){super(e,n,up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new ut(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function Ht(t,e,...n){if(t=mn(t),XT("collection","path",e),t instanceof vp){const r=hn.fromString(e,...n);return Q2(r),new po(t,null,r)}{if(!(t instanceof $n||t instanceof po))throw new Ge(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(hn.fromString(e,...n));return Q2(r),new po(t.firestore,null,r)}}function pt(t,e,...n){if(t=mn(t),arguments.length===1&&(e=Jx.newId()),XT("doc","path",e),t instanceof vp){const r=hn.fromString(e,...n);return Y2(r),new $n(t,null,new ut(r))}{if(!(t instanceof $n||t instanceof po))throw new Ge(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(hn.fromString(e,...n));return Y2(r),new $n(t.firestore,t instanceof po?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="AsyncQueue";class U_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new UN(this,"async_queue_retry"),this.oc=()=>{const r=I0();r&&Ye(F_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=I0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=I0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ya;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!su(e))throw e;Ye(F_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,wa("INTERNAL UNHANDLED ERROR: ",$_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=yv.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&yt(47125,{hc:$_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function $_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ea extends vp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new U_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U_(e),this._firestoreClient=void 0,await e}}}function KD(t,e){const n=typeof t=="object"?t:$x(),r=typeof t=="string"?t:Em,i=np(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=QS("firestore");a&&GD(i,...a)}return i}function bp(t){if(t._terminated)throw new Ge(_e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XD(t),t._firestoreClient}function XD(t){var e,n,r;const i=t._freezeSettings(),a=function(u,d,f,g){return new v9(u,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,rC(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zD(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fi(Tr.fromBase64String(e))}catch(n){throw new Ge(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fi(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(th(e,Fi._jsonSchema))return Fi.fromBase64String(e.bytes)}}Fi._jsonSchemaVersion="firestore/bytes/1.0",Fi._jsonSchema={type:rr("string",Fi._jsonSchemaVersion),bytes:rr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ge(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ge(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ge(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Os._jsonSchemaVersion}}static fromJSON(e){if(th(e,Os._jsonSchema))return new Os(e.latitude,e.longitude)}}Os._jsonSchemaVersion="firestore/geoPoint/1.0",Os._jsonSchema={type:rr("string",Os._jsonSchemaVersion),latitude:rr("number"),longitude:rr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(th(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ls(e.vectorValues);throw new Ge(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:rr("string",Ls._jsonSchemaVersion),vectorValues:rr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^__.*__$/;class QD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new nh(e,this.data,n,this.fieldTransforms)}}class sC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ec:t})}}class Tv{constructor(e,n,r,i,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(aC(this.Ec)&&YD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class JD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gp(e)}Dc(e,n,r,i=!1){return new Tv({Ec:e,methodName:n,bc:r,path:kr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ep(t){const e=t._freezeSettings(),n=gp(t._databaseId);return new JD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oC(t,e,n,r,i,a={}){const c=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);Cv("Data must be an object, but it was:",c,r);const u=lC(r,c);let d,f;if(a.merge)d=new Ei(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const x=$y(e,y,n);if(!c.contains(x))throw new Ge(_e.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);uC(g,x)||g.push(x)}d=new Ei(g),f=c.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=c.fieldTransforms;return new QD(new ui(u),d,f)}class kp extends _p{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}class Nv extends _p{_toFieldTransform(e){return new W9(e.path,new Cd)}isEqual(e){return e instanceof Nv}}function ZD(t,e,n,r){const i=t.Dc(1,e,n);Cv("Data must be an object, but it was:",i,r);const a=[],c=ui.empty();Io(r,(d,f)=>{const g=jv(e,d,n);f=mn(f);const y=i.gc(g);if(f instanceof kp)a.push(g);else{const x=ah(f,y);x!=null&&(a.push(g),c.set(g,x))}});const u=new Ei(a);return new sC(c,u,i.fieldTransforms)}function eO(t,e,n,r,i,a){const c=t.Dc(1,e,n),u=[$y(e,r,n)],d=[i];if(a.length%2!=0)throw new Ge(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)u.push($y(e,a[x])),d.push(a[x+1]);const f=[],g=ui.empty();for(let x=u.length-1;x>=0;--x)if(!uC(f,u[x])){const w=u[x];let S=d[x];S=mn(S);const b=c.gc(w);if(S instanceof kp)f.push(w);else{const N=ah(S,b);N!=null&&(f.push(w),g.set(w,N))}}const y=new Ei(f);return new sC(g,y,c.fieldTransforms)}function tO(t,e,n,r=!1){return ah(n,t.Dc(r?4:3,e))}function ah(t,e){if(cC(t=mn(t)))return Cv("Unsupported field value:",e,t),lC(t,e);if(t instanceof _p)return function(r,i){if(!aC(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let c=0;for(const u of r){let d=ah(u,i.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=xn.fromDate(r);return{timestampValue:Cm(i.serializer,a)}}if(r instanceof xn){const a=new xn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cm(i.serializer,a)}}if(r instanceof Os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fi)return{bytesValue:jN(i.serializer,r._byteString)};if(r instanceof $n){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:lv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ls)return function(c,u){return{mapValue:{fields:{[iN]:{stringValue:sN},[km]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return iv(u.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${ap(r)}`)}(t,e)}function lC(t,e){const n={};return JT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(t,(r,i)=>{const a=ah(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function cC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xn||t instanceof Os||t instanceof Fi||t instanceof $n||t instanceof _p||t instanceof Ls)}function Cv(t,e,n){if(!cC(n)||!YT(n)){const r=ap(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function $y(t,e,n){if((e=mn(e))instanceof wp)return e._internalPath;if(typeof e=="string")return jv(t,e);throw Rm("Field path arguments must be of type string or ",t,!1,void 0,n)}const nO=new RegExp("[~\\*/\\[\\]]");function jv(t,e,n){if(e.search(nO)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wp(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rm(t,e,n,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||c)&&(d+=" (found",a&&(d+=` in field ${r}`),c&&(d+=` in document ${i}`),d+=")"),new Ge(_e.INVALID_ARGUMENT,u+t+d)}function uC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rO extends dC{data(){return super.data()}}function Sp(t,e){return typeof e=="string"?jv(t,e):e instanceof wp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ge(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Av{}class Iv extends Av{}function fn(t,e,...n){let r=[];e instanceof Av&&r.push(e),r=r.concat(n),function(a){const c=a.filter(d=>d instanceof Pv).length,u=a.filter(d=>d instanceof Tp).length;if(c>1||c>0&&u>0)throw new Ge(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Tp extends Iv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Tp(e,n,r)}_apply(e){const n=this._parse(e);return fC(e._query,n),new ja(e.firestore,e.converter,Iy(e._query,n))}_parse(e){const n=Ep(e.firestore);return function(a,c,u,d,f,g,y){let x;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ge(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){H_(y,g);const S=[];for(const b of y)S.push(B_(d,a,b));x={arrayValue:{values:S}}}else x=B_(d,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||H_(y,g),x=tO(u,c,y,g==="in"||g==="not-in");return nr.create(f,g,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Sr(t,e,n){const r=e,i=Sp("where",t);return Tp._create(i,r,n)}class Pv extends Av{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:as.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let c=i;const u=a.getFlattenedFilters();for(const d of u)fC(c,d),c=Iy(c,d)}(e._query,n),new ja(e.firestore,e.converter,Iy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rv extends Iv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rv(e,n)}_apply(e){const n=function(i,a,c){if(i.startAt!==null)throw new Ge(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ge(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nd(a,c)}(e._query,this._field,this._direction);return new ja(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new au(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Hs(t,e="asc"){const n=e,r=Sp("orderBy",t);return Rv._create(r,n)}class Mv extends Iv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mv(e,n,r)}_apply(e){return new ja(e.firestore,e.converter,Tm(e._query,this._limit,this._limitType))}}function Np(t){return l9("limit",t),Mv._create("limit",t,"F")}function B_(t,e,n){if(typeof(n=mn(n))=="string"){if(n==="")throw new Ge(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fN(e)&&n.indexOf("/")!==-1)throw new Ge(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(hn.fromString(n));if(!ut.isDocumentKey(r))throw new Ge(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return s_(t,new ut(r))}if(n instanceof $n)return s_(t,n._key);throw new Ge(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(n)}.`)}function H_(t,e){if(!Array.isArray(t)||t.length===0)throw new Ge(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fC(t,e){const n=function(i,a){for(const c of i)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ge(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ge(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iO{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Io(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[km].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>qn(c.doubleValue));return new Ls(a)}convertGeoPoint(e){return new Os(qn(e.latitude),qn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kd(e));default:return null}}convertTimestamp(e){const n=vo(e);return new xn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=hn.fromString(e);Zt(DN(r),9688,{name:e});const i=new Sd(r.get(1),r.get(3)),a=new ut(r.popFirst(5));return i.isEqual(n)||wa(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class td{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fl extends dC{constructor(e,n,r,i,a,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fl._jsonSchemaVersion="firestore/documentSnapshot/1.0",fl._jsonSchema={type:rr("string",fl._jsonSchemaVersion),bundleSource:rr("string","DocumentSnapshot"),bundleName:rr("string"),bundle:rr("string")};class Zf extends fl{data(e={}){return super.data(e)}}class ml{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new td(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zf(this._firestore,this._userDataWriter,r.key,r,new td(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ge(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(u=>{const d=new Zf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new td(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const d=new Zf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new td(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:sO(u.type),doc:d,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ml._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t){t=hi(t,$n);const e=hi(t.firestore,Ea);return WD(bp(e),t._key).then(n=>pC(e,t,n))}ml._jsonSchemaVersion="firestore/querySnapshot/1.0",ml._jsonSchema={type:rr("string",ml._jsonSchemaVersion),bundleSource:rr("string","QuerySnapshot"),bundleName:rr("string"),bundle:rr("string")};class Dv extends iO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,n)}}function os(t){t=hi(t,ja);const e=hi(t.firestore,Ea),n=bp(e),r=new Dv(e);return hC(t._query),qD(n,t._query).then(i=>new ml(e,r,t,i))}function er(t,e,n){t=hi(t,$n);const r=hi(t.firestore,Ea),i=mC(t.converter,e,n);return Ap(r,[oC(Ep(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$i.none())])}function bi(t,e,n,...r){t=hi(t,$n);const i=hi(t.firestore,Ea),a=Ep(i);let c;return c=typeof(e=mn(e))=="string"||e instanceof wp?eO(a,"updateDoc",t._key,e,n,r):ZD(a,"updateDoc",t._key,e),Ap(i,[c.toMutation(t._key,$i.exists(!0))])}function Cp(t){return Ap(hi(t.firestore,Ea),[new sv(t._key,$i.none())])}function jp(t,e){const n=hi(t.firestore,Ea),r=pt(t),i=mC(t.converter,e);return Ap(n,[oC(Ep(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,$i.exists(!1))]).then(()=>r)}function Un(t,...e){var n,r,i;t=mn(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||z_(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(z_(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let d,f,g;if(t instanceof $n)f=hi(t.firestore,Ea),g=up(t._key.path),d={next:y=>{e[c]&&e[c](pC(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=hi(t,ja);f=hi(y.firestore,Ea),g=y._query;const x=new Dv(f);d={next:w=>{e[c]&&e[c](new ml(f,x,y,w))},error:e[c+1],complete:e[c+2]},hC(t._query)}return function(x,w,S,b){const N=new Sv(b),j=new _v(w,N,S);return x.asyncQueue.enqueueAndForget(async()=>vv(await Pm(x),j)),()=>{N.Ou(),x.asyncQueue.enqueueAndForget(async()=>bv(await Pm(x),j))}}(bp(f),g,u,d)}function Ap(t,e){return function(r,i){const a=new ya;return r.asyncQueue.enqueueAndForget(async()=>RD(await HD(r),i,a)),a.promise}(bp(t),e)}function pC(t,e,n){const r=n.docs.get(e._key),i=new Dv(t);return new fl(t,i,e._key,r,new td(n.hasPendingWrites,n.fromCache),e.converter)}function gC(){return new Nv("serverTimestamp")}(function(e,n=!0){(function(i){ru=i})(jl),bl(new go("firestore",(r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Ea(new e9(r.getProvider("auth-internal")),new r9(c,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ge(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sd(f.options.projectId,g)}(c,i),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Is(W2,q2,e),Is(W2,q2,"esm2017")})();var aO="firebase",oO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Is(aO,oO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="firebasestorage.googleapis.com",xC="storageBucket",lO=2*60*1e3,cO=10*60*1e3,uO=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends Ws{constructor(e,n,r=0){super(R0(e),`Firebase Storage: ${n} (${R0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return R0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vn||(vn={}));function R0(t){return"storage/"+t}function Ov(){const t="An unknown error occurred, please check the error payload for server response.";return new Rn(vn.UNKNOWN,t)}function dO(t){return new Rn(vn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function hO(t){return new Rn(vn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rn(vn.UNAUTHENTICATED,t)}function mO(){return new Rn(vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pO(t){return new Rn(vn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vC(){return new Rn(vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bC(){return new Rn(vn.CANCELED,"User canceled the upload/download.")}function gO(t){return new Rn(vn.INVALID_URL,"Invalid URL '"+t+"'.")}function yO(t){return new Rn(vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function xO(){return new Rn(vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xC+"' property when initializing the app?")}function wC(){return new Rn(vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vO(){return new Rn(vn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function bO(){return new Rn(vn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wO(t){return new Rn(vn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zy(t){return new Rn(vn.INVALID_ARGUMENT,t)}function _C(){return new Rn(vn.APP_DELETED,"The Firebase app was deleted.")}function _O(t){return new Rn(vn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dd(t,e){return new Rn(vn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Wu(t){throw new Rn(vn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ki.makeFromUrl(e,n)}catch{return new ki(e,"")}if(r.path==="")return r;throw yO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),d={bucket:1,path:3};function f(V){V.path_=decodeURIComponent(V.path)}const g="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${i}/o${x}`,"i"),S={bucket:1,path:3},b=n===yC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",j=new RegExp(`^https?://${b}/${i}/${N}`,"i"),I=[{regex:u,indices:d,postModify:a},{regex:w,indices:S,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let V=0;V<I.length;V++){const $=I[V],q=$.regex.exec(e);if(q){const D=q[$.indices.bucket];let R=q[$.indices.path];R||(R=""),r=new ki(D,R),$.postModify(r);break}}if(r==null)throw gO(e);return r}}class EO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e,n){let r=1,i=null,a=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...N){f||(f=!0,e.apply(null,N))}function y(N){i=setTimeout(()=>{i=null,t(w,d())},N)}function x(){a&&clearTimeout(a)}function w(N,...j){if(f){x();return}if(N){x(),g.call(null,N,...j);return}if(d()||c){x(),g.call(null,N,...j);return}r<64&&(r*=2);let I;u===1?(u=2,I=0):I=(r+Math.random())*1e3,y(I)}let S=!1;function b(N){S||(S=!0,x(),!f&&(i!==null?(N||(u=2),clearTimeout(i),y(0)):N||(u=1)))}return y(0),a=setTimeout(()=>{c=!0,b(!0)},n),b}function SO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){return t!==void 0}function NO(t){return typeof t=="function"}function CO(t){return typeof t=="object"&&!Array.isArray(t)}function Ip(t){return typeof t=="string"||t instanceof String}function W_(t){return Lv()&&t instanceof Blob}function Lv(){return typeof Blob<"u"}function q_(t,e,n,r){if(r<e)throw zy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw zy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function EC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var pl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(pl||(pl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i,a,c,u,d,f,g,y,x=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,b)=>{this.resolve_=S,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Tf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===pl.NO_ERROR,d=a.getStatus();if(!u||kC(d,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===pl.ABORT;r(!1,new Tf(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new Tf(f,a))})},n=(r,i)=>{const a=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());TO(d)?a(d):a()}catch(d){c(d)}else if(u!==null){const d=Ov();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(i.canceled){const d=this.appDelete_?_C():bC();c(d)}else{const d=vC();c(d)}};this.canceled_?n(!1,new Tf(!1,null,!0)):this.backoffId_=kO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function AO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function IO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function MO(t,e,n,r,i,a,c=!0,u=!1){const d=EC(t.urlParams),f=t.url+d,g=Object.assign({},t.headers);return PO(g,e),AO(g,n),IO(g,a),RO(g,r),new jO(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OO(...t){const e=DO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Lv())return new Blob(t);throw new Rn(vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){if(typeof atob>"u")throw wO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class M0{constructor(e,n){this.data=e,this.contentType=n||null}}function FO(t,e){switch(t){case As.RAW:return new M0(SC(e));case As.BASE64:case As.BASE64URL:return new M0(TC(t,e));case As.DATA_URL:return new M0($O(e),zO(e))}throw Ov()}function SC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,c=t.charCodeAt(++n);r=65536|(a&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function UO(t){let e;try{e=decodeURIComponent(t)}catch{throw dd(As.DATA_URL,"Malformed data URL.")}return SC(e)}function TC(t,e){switch(t){case As.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw dd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case As.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw dd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VO(e)}catch(i){throw i.message.includes("polyfill")?i:dd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class NC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw dd(As.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $O(t){const e=new NC(t);return e.base64?TC(As.BASE64,e.rest):UO(e.rest)}function zO(t){return new NC(t).contentType}function BO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){let r=0,i="";W_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(W_(this.data_)){const r=this.data_,i=LO(r,e,n);return i===null?null:new fa(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new fa(r,!0)}}static getBlob(...e){if(Lv()){const n=e.map(r=>r instanceof fa?r.data_:r);return new fa(OO.apply(null,n))}else{const n=e.map(c=>Ip(c)?FO(As.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[a++]=c[u]}),new fa(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){let e;try{e=JSON.parse(t)}catch{return null}return CO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function WO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function jC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){return e}class Kr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||qO}}let Nf=null;function GO(t){return!Ip(t)||t.length<2?t:jC(t)}function Vv(){if(Nf)return Nf;const t=[];t.push(new Kr("bucket")),t.push(new Kr("generation")),t.push(new Kr("metageneration")),t.push(new Kr("name","fullPath",!0));function e(a,c){return GO(c)}const n=new Kr("name");n.xform=e,t.push(n);function r(a,c){return c!==void 0?Number(c):c}const i=new Kr("size");return i.xform=r,t.push(i),t.push(new Kr("timeCreated")),t.push(new Kr("updated")),t.push(new Kr("md5Hash",null,!0)),t.push(new Kr("cacheControl",null,!0)),t.push(new Kr("contentDisposition",null,!0)),t.push(new Kr("contentEncoding",null,!0)),t.push(new Kr("contentLanguage",null,!0)),t.push(new Kr("contentType",null,!0)),t.push(new Kr("metadata","customMetadata",!0)),Nf=t,Nf}function KO(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new ki(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function XO(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const c=n[a];r[c.local]=c.xform(r,e[c.server])}return KO(r,t),r}function AC(t,e,n){const r=CC(e);return r===null?null:XO(t,r,n)}function YO(t,e,n,r){const i=CC(e);if(i===null||!Ip(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(f=>{const g=t.bucket,y=t.fullPath,x="/b/"+c(g)+"/o/"+c(y),w=lu(x,n,r),S=EC({alt:"media",token:f});return w+S})[0]}function IC(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class Ml{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){if(!t)throw Ov()}function Fv(t,e){function n(r,i){const a=AC(t,i,e);return xa(a!==null),a}return n}function QO(t,e){function n(r,i){const a=AC(t,i,e);return xa(a!==null),YO(a,i,t.host,t._protocol)}return n}function oh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=mO():i=fO():n.getStatus()===402?i=hO(t.bucket):n.getStatus()===403?i=pO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Uv(t){const e=oh(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=dO(t.path)),a.serverResponse=i.serverResponse,a}return n}function JO(t,e,n){const r=e.fullServerUrl(),i=lu(r,t.host,t._protocol),a="GET",c=t.maxOperationRetryTime,u=new Ml(i,a,Fv(t,n),c);return u.errorHandler=Uv(e),u}function ZO(t,e,n){const r=e.fullServerUrl(),i=lu(r,t.host,t._protocol),a="GET",c=t.maxOperationRetryTime,u=new Ml(i,a,QO(t,n),c);return u.errorHandler=Uv(e),u}function e8(t,e){const n=e.fullServerUrl(),r=lu(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function c(d,f){}const u=new Ml(r,i,c,a);return u.successCodes=[200,204],u.errorHandler=Uv(e),u}function t8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function PC(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=t8(null,e)),r}function RC(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let I="";for(let V=0;V<2;V++)I=I+Math.random().toString().slice(2);return I}const d=u();c["Content-Type"]="multipart/related; boundary="+d;const f=PC(e,r,i),g=IC(f,n),y="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,x=`\r
--`+d+"--",w=fa.getBlob(y,r,x);if(w===null)throw wC();const S={name:f.fullPath},b=lu(a,t.host,t._protocol),N="POST",j=t.maxUploadRetryTime,O=new Ml(b,N,Fv(t,n),j);return O.urlParams=S,O.headers=c,O.body=w.uploadData(),O.errorHandler=oh(e),O}class Mm{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function $v(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{xa(!1)}return xa(!!n&&(e||["active"]).indexOf(n)!==-1),n}function n8(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),c=PC(e,r,i),u={name:c.fullPath},d=lu(a,t.host,t._protocol),f="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},y=IC(c,n),x=t.maxUploadRetryTime;function w(b){$v(b);let N;try{N=b.getResponseHeader("X-Goog-Upload-URL")}catch{xa(!1)}return xa(Ip(N)),N}const S=new Ml(d,f,w,x);return S.urlParams=u,S.headers=g,S.body=y,S.errorHandler=oh(e),S}function r8(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function a(f){const g=$v(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xa(!1)}y||xa(!1);const x=Number(y);return xa(!isNaN(x)),new Mm(x,r.size(),g==="final")}const c="POST",u=t.maxUploadRetryTime,d=new Ml(n,c,a,u);return d.headers=i,d.errorHandler=oh(e),d}const G_=256*1024;function i8(t,e,n,r,i,a,c,u){const d=new Mm(0,0);if(c?(d.current=c.current,d.total=c.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw vO();const f=d.total-d.current;let g=f;i>0&&(g=Math.min(g,i));const y=d.current,x=y+g;let w="";g===0?w="finalize":f===g?w="upload, finalize":w="upload";const S={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${d.current}`},b=r.slice(y,x);if(b===null)throw wC();function N(V,$){const q=$v(V,["active","final"]),D=d.current+g,R=r.size();let P;return q==="final"?P=Fv(e,a)(V,$):P=null,new Mm(D,R,q==="final",P)}const j="POST",O=e.maxUploadRetryTime,I=new Ml(n,j,N,O);return I.headers=S,I.body=b.uploadData(),I.progressCallback=u||null,I.errorHandler=oh(t),I}const ci={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function D0(t){switch(t){case"running":case"pausing":case"canceling":return ci.RUNNING;case"paused":return ci.PAUSED;case"success":return ci.SUCCESS;case"canceled":return ci.CANCELED;case"error":return ci.ERROR;default:return ci.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,n,r){if(NO(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class a8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Wu("cannot .send() more than once");if(jo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o8 extends a8{initXhr(){this.xhr_.responseType="text"}}function ao(){return new o8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Vv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(vn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(kC(i.status,[]))if(a)i=vC();else{this.sleepTime=Math.max(this.sleepTime*2,uO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(vn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=n8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ao,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=r8(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ao,n,r);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=G_*this._chunkMultiplier,n=new Mm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=i8(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(d){this._error=d,this._transition("error");return}const u=this._ref.storage._makeRequest(c,ao,i,a,!1);this._request=u,u.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){G_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=JO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ao,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=RC(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ao,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=bC(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=D0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const a=new s8(n||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(D0(this._state)){case ci.SUCCESS:gc(this._resolve.bind(null,this.snapshot))();break;case ci.CANCELED:case ci.ERROR:const n=this._reject;gc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(D0(this._state)){case ci.RUNNING:case ci.PAUSED:e.next&&gc(e.next.bind(e,this.snapshot))();break;case ci.SUCCESS:e.complete&&gc(e.complete.bind(e))();break;case ci.CANCELED:case ci.ERROR:e.error&&gc(e.error.bind(e,this._error))();break;default:e.error&&gc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n){this._service=e,n instanceof ki?this._location=n:this._location=ki.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sl(e,n)}get root(){const e=new ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jC(this._location.path)}get storage(){return this._service}get parent(){const e=HO(this._location.path);if(e===null)return null;const n=new ki(this._location.bucket,e);return new Sl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _O(e)}}function c8(t,e,n){t._throwIfRoot("uploadBytes");const r=RC(t.storage,t._location,Vv(),new fa(e,!0),n);return t.storage.makeRequestWithTokens(r,ao).then(i=>({metadata:i,ref:t}))}function u8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new l8(t,new fa(e),n)}function d8(t){t._throwIfRoot("getDownloadURL");const e=ZO(t.storage,t._location,Vv());return t.storage.makeRequestWithTokens(e,ao).then(n=>{if(n===null)throw bO();return n})}function h8(t){t._throwIfRoot("deleteObject");const e=e8(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ao)}function f8(t,e){const n=WO(t._location.path,e),r=new ki(t._location.bucket,n);return new Sl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){return/^[A-Za-z]+:\/\//.test(t)}function p8(t,e){return new Sl(t,e)}function MC(t,e){if(t instanceof zv){const n=t;if(n._bucket==null)throw xO();const r=new Sl(n,n._bucket);return e!=null?MC(r,e):r}else return e!==void 0?f8(t,e):t}function g8(t,e){if(e&&m8(e)){if(t instanceof zv)return p8(t,e);throw zy("To use ref(service, url), the first argument must be a Storage instance.")}else return MC(t,e)}function K_(t,e){const n=e==null?void 0:e[xC];return n==null?null:ki.makeFromBucketSpec(n,t)}function y8(t,e,n,r={}){t.host=`${e}:${n}`;const i=jo(e);i&&(Lx(`https://${t.host}/b`),Vx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:eT(a,t.app.options.projectId))}class zv{constructor(e,n,r,i,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=yC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lO,this._maxUploadRetryTime=cO,this._requests=new Set,i!=null?this._bucket=ki.makeFromBucketSpec(i,this._host):this._bucket=K_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ki.makeFromBucketSpec(this._url,e):this._bucket=K_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){q_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){q_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sl(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new EO(_C());{const c=MO(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const X_="@firebase/storage",Y_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="storage";function Bv(t,e,n){return t=mn(t),c8(t,e,n)}function Q_(t,e,n){return t=mn(t),u8(t,e,n)}function Id(t){return t=mn(t),d8(t)}function x8(t){return t=mn(t),h8(t)}function ol(t,e){return t=mn(t),g8(t,e)}function v8(t=$x(),e){t=mn(t);const r=np(t,DC).getImmediate({identifier:e}),i=QS("storage");return i&&b8(r,...i),r}function b8(t,e,n,r={}){y8(t,e,n,r)}function w8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new zv(n,r,i,e,jl)}function _8(){bl(new go(DC,w8,"PUBLIC").setMultipleInstances(!0)),Is(X_,Y_,""),Is(X_,Y_,"esm2017")}_8();const E8={apiKey:"AIzaSyCraPDyyhOJs9IJtVMCe2b1VNFYkbtqWEg",authDomain:"playcenter-universal.firebaseapp.com",projectId:"playcenter-universal",storageBucket:"playcenter-universal.firebasestorage.app",messagingSenderId:"876884906641",appId:"1:876884906641:web:a0a5b7526b7f4161452530",measurementId:"G-4MPL62WSKW"},Hv=rT(E8),Ue=KD(Hv),Jo=Y6(Hv),ll=v8(Hv);function J_(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e="0123456789";let n="USER-";for(let r=0;r<3;r++)n+=t.charAt(Math.floor(Math.random()*t.length));for(let r=0;r<3;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}const OC=k.createContext();function Jr(){return k.useContext(OC)}function LC({children:t}){const[e,n]=k.useState(null),[r,i]=k.useState(null),[a,c]=k.useState(!0);k.useEffect(()=>{let b=null;const N=VR(Jo,async j=>{if(b){try{b()}catch{}b=null}if(n(j),!j){i(null),c(!1);return}try{const O=pt(Ue,"users",j.uid),I=pt(Ue,"usuarios",j.uid),[V,$]=await Promise.all([Vr(O),Vr(I)]);let q=null;if(V.exists())q=O;else if($.exists())q=I;else{const R={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:J_(),displayName:j.displayName||"",email:j.email||"",createdAt:new Date};try{await er(O,R,{merge:!0})}catch(P){console.warn("No fue posible crear users/{uid} automáticamente:",P)}q=O}b=Un(q,D=>{if(D.exists()){const R=D.data()||{},P={uid:j.uid,...R,displayName:j.displayName||R.displayName||"",email:j.email||R.email||"",isAdmin:R.admin===!0,role:R.role||"buyer",isSeller:R.isSeller===!0||R.role==="seller",storeName:R.storeName||"",storeDescription:R.storeDescription||"",storeImage:R.storeImage||"",storePhone:R.storePhone||"",storeAddress:R.storeAddress||""};i(P)}else{const R={uid:j.uid,telefono:"",direccion:"",admin:!1,codigo:"",displayName:j.displayName||"",email:j.email||j.email,isAdmin:!1};i(R)}c(!1)},D=>{console.error("onSnapshot usuario error:",D),c(!1)})}catch(O){console.error("Error inicializando listener de usuario:",O);try{const I=pt(Ue,"users",j.uid),V=await Vr(I),$=V.exists()?V.data():{},q={uid:j.uid,...$,displayName:j.displayName||$.displayName||"",email:j.email||$.email||"",isAdmin:$.admin===!0};i(q)}catch(I){console.error("Fallback read error:",I),i({uid:j.uid,displayName:j.displayName||"",email:j.email||"",telefono:"",direccion:"",isAdmin:!1,codigo:""})}finally{c(!1)}}});return()=>{try{N()}catch{}if(b)try{b()}catch{}}},[]);async function u(b,N,j){const O=await RR(Jo,b,N);await Fc(O.user,{displayName:j});const I=J_(),V={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:I,displayName:j,email:b,createdAt:new Date};await er(pt(Ue,"users",O.user.uid),V,{merge:!0}),n(Jo.currentUser),i({uid:O.user.uid,telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:I,displayName:j,email:b,isAdmin:!1})}function d(b,N){return MR(Jo,b,N)}function f(){return FR(Jo)}async function g(b){if(!e)throw new Error("No user logged in");const N=pt(Ue,"users",e.uid);try{await er(N,b,{merge:!0});const j=await Vr(N),O=j.exists()?j.data():{},I={uid:e.uid,...O,displayName:e.displayName||O.displayName||"",email:e.email||O.email||"",isAdmin:O.admin===!0};if(i(I),b.displayName&&e.displayName!==b.displayName)try{await Fc(e,{displayName:b.displayName}),n(Jo.currentUser)}catch(V){console.warn("Error actualizando displayName en auth:",V)}return I}catch(j){throw console.error("actualizarUsuarioInfo error:",j),j}}async function y(b){if(!e)throw new Error("No user logged in");const N=ol(ll,`usuarios/${e.uid}/perfil.jpg`);await Bv(N,b);const j=await Id(N);await Fc(e,{photoURL:j}),n(Jo.currentUser);try{await er(pt(Ue,"users",e.uid),{fotoURL:j},{merge:!0}),i(O=>({...O,fotoURL:j}))}catch(O){console.warn("No se pudo persistir fotoURL en users/{uid}:",O)}return j}async function x(b){if(!e)throw new Error("No user logged in");const N=pt(Ue,"users",e.uid);try{const j={role:"seller",isSeller:!0,storeName:b.storeName||"",storeDescription:b.storeDescription||"",storeImage:b.storeImage||"",storePhone:b.storePhone||"",storeAddress:b.storeAddress||"",sellerActivatedAt:new Date};return await er(N,j,{merge:!0}),i(O=>({...O,...j})),!0}catch(j){throw console.error("Error al convertirse en vendedor:",j),j}}async function w(b){if(!e)throw new Error("No user logged in");if(!(r!=null&&r.isSeller))throw new Error("User is not a seller");const N=pt(Ue,"users",e.uid);try{return await er(N,b,{merge:!0}),i(j=>({...j,...b})),!0}catch(j){throw console.error("Error al actualizar tienda:",j),j}}const S={usuario:e,usuarioInfo:r,login:d,signup:u,logout:f,actualizarUsuarioInfo:g,subirImagen:y,convertirseEnVendedor:x,actualizarTienda:w};return o.jsx(OC.Provider,{value:S,children:!a&&t})}const VC=k.createContext(),cu=()=>{const t=k.useContext(VC);if(!t)throw new Error("useTheme debe usarse dentro de ThemeProvider");return t},k8=({children:t})=>{const[e,n]=k.useState(()=>{try{return localStorage.getItem("pcu-theme")||"light"}catch{return"light"}});k.useEffect(()=>{const a=document.documentElement;e==="dark"?(a.classList.add("dark"),a.classList.add("dark-theme")):(a.classList.remove("dark"),a.classList.remove("dark-theme"));try{localStorage.setItem("pcu-theme",e)}catch(c){console.error("Error guardando tema:",c)}},[e]);const i={theme:e,toggleTheme:()=>{n(a=>a==="light"?"dark":"light")},isDark:e==="dark",isLight:e==="light"};return o.jsx(VC.Provider,{value:i,children:t})},FC=(t=!1)=>{const[e,n]=k.useState([]),[r,i]=k.useState(!0),[a,c]=k.useState(null);return k.useEffect(()=>{(async()=>{try{let d;return t?d=fn(Ht(Ue,"productos"),Hs("fechaCreacion","desc")):d=fn(Ht(Ue,"productos"),Sr("activo","==",!0),Hs("fechaCreacion","desc")),Un(d,g=>{const y=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),x=[];g.docs.forEach(w=>{!y.includes(w.id)&&w.exists()&&x.push({id:w.id,...w.data()})}),n(x),i(!1)},g=>{console.error("Error fetching products:",g),c(g.message),i(!1)})}catch(d){console.error("Error setting up products listener:",d),c(d.message),i(!1)}})()},[t]),{products:e,loading:r,error:a}},UC=t=>{const[e,n]=k.useState([]),[r,i]=k.useState(!0),[a,c]=k.useState(null),[u,d]=k.useState(0);return k.useEffect(()=>{const f=g=>{g.key==="phantomProducts"&&d(y=>y+1)};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[]),k.useEffect(()=>{(async()=>{try{let g;return!t||t===""||t==="todos"?g=fn(Ht(Ue,"productos"),Sr("activo","==",!0),Hs("fechaCreacion","desc")):g=fn(Ht(Ue,"productos"),Sr("categoria","==",t),Sr("activo","==",!0),Hs("fechaCreacion","desc")),Un(g,x=>{const w=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),S=[];x.docs.forEach(b=>{!w.includes(b.id)&&b.exists()&&S.push({id:b.id,...b.data()})}),n(S),i(!1)},x=>{console.error("Error fetching products by category:",x),c(x.message),i(!1)})}catch(g){console.error("Error setting up products by category listener:",g),c(g.message),i(!1)}})()},[t,u]),{products:e,loading:r,error:a}},S8=t=>{const[e,n]=k.useState(null),[r,i]=k.useState(!0),[a,c]=k.useState(null);return k.useEffect(()=>{if(!t){n(null),i(!1);return}let u=null,d=null,f=!1;i(!0),c(null);const g=w=>(w||"").toLowerCase().replace(/[^a-z0-9]/g,""),y=w=>{try{const S=pt(Ue,"productos",w);return Un(S,b=>{b.exists()?(n({id:b.id,...b.data()}),c(null),i(!1)):(c("Producto no encontrado"),n(null),i(!1))},b=>{c((b==null?void 0:b.message)||"Error al cargar el producto"),i(!1)})}catch{return c("Error al suscribirse al producto"),i(!1),null}},x=async()=>{if(!f){f=!0;try{const w=fn(Ht(Ue,"productos"),Sr("slug","==",t),Np(1)),S=await os(w);if(!S.empty){const I=S.docs[0].id;d=y(I);return}const N=(await os(Ht(Ue,"productos"))).docs.map(I=>({id:I.id,...I.data()})),j=g(t),O=N.find(I=>g(I.slug||"")===j||g(I.nombre||"")===j||I.id===t);O?d=y(O.id):(c("Producto no encontrado"),n(null),i(!1))}catch{c("Error al cargar el producto"),n(null),i(!1)}}};try{const w=pt(Ue,"productos",t);u=Un(w,S=>{S.exists()?(n({id:S.id,...S.data()}),c(null),i(!1)):x()},S=>{x()})}catch{x()}return()=>{typeof u=="function"&&u(),typeof d=="function"&&d()}},[t]),{product:e,loading:r,error:a}},Wv=()=>{const[t,e]=k.useState([]),[n,r]=k.useState(!0),[i,a]=k.useState(null);return k.useEffect(()=>{(async()=>{try{const u=fn(Ht(Ue,"categorias"),Sr("activa","==",!0),Hs("orden","asc"));return Un(u,f=>{const g=f.docs.map(y=>({id:y.id,...y.data()}));e(g),r(!1)},f=>{console.error("Error fetching categories:",f),a(f.message),r(!1)})}catch(u){console.error("Error setting up categories listener:",u),a(u.message),r(!1)}})()},[]),{categories:t,loading:n,error:i}},T8=()=>{const[t,e]=k.useState({}),[n,r]=k.useState([]),[i,a]=k.useState(!0),[c,u]=k.useState(null);return k.useEffect(()=>{let d=null,f=null,g=[],y=[],x=!1,w=!1;const S=()=>{if(!(!x||!w))try{const b={};g.forEach(N=>{b[N.id]=y.filter(j=>j.categoria===N.id)}),e(b),a(!1)}catch(b){console.error("Error grouping products by categories:",b),u(b.message||"Error agrupando productos"),a(!1)}};try{const b=fn(Ht(Ue,"categorias"),Sr("activa","==",!0),Hs("orden","asc"));d=Un(b,j=>{g=j.docs.map(O=>({id:O.id,...O.data()})),r(g),x=!0,S()},j=>{console.error("Error fetching categories (rt):",j),u(j.message),a(!1)});const N=fn(Ht(Ue,"productos"),Sr("activo","==",!0),Hs("fechaCreacion","desc"));f=Un(N,j=>{const O=JSON.parse(localStorage.getItem("phantomProducts")||"[]");y=[],j.docs.forEach(I=>{!O.includes(I.id)&&I.exists()&&y.push({id:I.id,...I.data()})}),w=!0,S()},j=>{console.error("Error fetching products (rt):",j),u(j.message),a(!1)})}catch(b){console.error("Error setting up realtime listeners:",b),u(b.message),a(!1)}return()=>{typeof d=="function"&&d(),typeof f=="function"&&f()}},[]),{productsByCategory:t,categories:n,loading:i,error:c}},N8=(t,e="")=>{const[n,r]=k.useState([]),[i,a]=k.useState(!1),[c,u]=k.useState(null);return k.useEffect(()=>{if(!t||t.length<2){r([]);return}const f=setTimeout(async()=>{a(!0);try{let g=fn(Ht(Ue,"productos"),Sr("activo","==",!0));e&&(g=fn(g,Sr("categoria","==",e)));const y=await os(g),x=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),w=[];y.docs.forEach(N=>{!x.includes(N.id)&&N.exists()&&w.push({id:N.id,...N.data()})});const S=t.toLowerCase(),b=w.filter(N=>{var j,O,I,V;return((j=N.nombre)==null?void 0:j.toLowerCase().includes(S))||((O=N.descripcion)==null?void 0:O.toLowerCase().includes(S))||((I=N.empresa)==null?void 0:I.toLowerCase().includes(S))||((V=N.etiquetas)==null?void 0:V.some($=>$.toLowerCase().includes(S)))});r(b)}catch(g){console.error("Error searching products:",g),u(g.message)}finally{a(!1)}},300);return()=>clearTimeout(f)},[t,e]),{results:n,loading:i,error:c}};var $C={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Z_=Yr.createContext&&Yr.createContext($C),C8=["attr","size","title"];function j8(t,e){if(t==null)return{};var n=A8(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A8(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dm.apply(this,arguments)}function eE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Om(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eE(Object(n),!0).forEach(function(r){I8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I8(t,e,n){return e=P8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P8(t){var e=R8(t,"string");return typeof e=="symbol"?e:e+""}function R8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zC(t){return t&&t.map((e,n)=>Yr.createElement(e.tag,Om({key:n},e.attr),zC(e.child)))}function Ct(t){return e=>Yr.createElement(M8,Dm({attr:Om({},t.attr)},e),zC(t.child))}function M8(t){var e=n=>{var{attr:r,size:i,title:a}=t,c=j8(t,C8),u=i||n.size||"1em",d;return n.className&&(d=n.className),t.className&&(d=(d?d+" ":"")+t.className),Yr.createElement("svg",Dm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:d,style:Om(Om({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&Yr.createElement("title",null,a),t.children)};return Z_!==void 0?Yr.createElement(Z_.Consumer,null,n=>e(n)):e($C)}function Lm(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(t)}function D8(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(t)}function O8(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function L8(t){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function V8(t){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function F8(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function qv(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function U8(t){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function lh(t){return Ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function $8(t){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 32H32C14.33 32 0 46.33 0 64v384c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM176 327.88V344c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-16.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V152c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v16.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07zM416 312c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h112c4.42 0 8 3.58 8 8v16zm160 0c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-96c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h272c4.42 0 8 3.58 8 8v16z"},child:[]}]})(t)}function By(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(t)}function Vm(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function z8(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(t)}function O0(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function BC(t){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function B8(t){return Ct({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(t)}function H8(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 216v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-80c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zM125.333 32H24C10.745 32 0 42.745 0 56v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zm80 448H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm-24-424v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24zm24 264H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24z"},child:[]}]})(t)}function em(t){return Ct({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function HC(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function tE(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function W8(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(t)}function q8(t){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function WC(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function G8(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"},child:[]}]})(t)}const rl=t=>t?t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",K8=(t,e)=>{if(!e)return{coincide:!1,score:0};const n=rl(e),r=n.split(" ").filter(Boolean),i=rl(t.nombre||""),a=rl(t.descripcion||""),c=rl(t.categoria||""),u=rl(t.empresa||t.marca||"");let d=0,f=0;return i===n?{coincide:!0,score:1e3}:i.startsWith(n)?{coincide:!0,score:900}:i.includes(n)?{coincide:!0,score:800}:u.includes(n)?{coincide:!0,score:700}:c.includes(n)?{coincide:!0,score:600}:a.includes(n)?{coincide:!0,score:500}:(r.forEach(y=>{i.includes(y)&&(d+=100,f++),u.includes(y)&&(d+=70,f++),c.includes(y)&&(d+=50,f++),a.includes(y)&&(d+=20,f++)}),{coincide:f>0||d>0,score:d>0?d:10})},nE=k.forwardRef(({onClose:t,placeholder:e="Buscar en pcu.com.do"},n)=>{const[r,i]=k.useState(""),[a,c]=k.useState([]),[u,d]=k.useState(!1),[f,g]=k.useState([]),[y,x]=k.useState([]),[w,S]=k.useState("todas"),[b,N]=k.useState(!1),j=k.useRef(null),O=k.useRef(null),I=Qr(),{isDark:V}=cu(),{results:$,loading:q}=N8(r),{products:D}=FC(),R=k.useMemo(()=>{const ae=new Set;return(D||[]).forEach(Ce=>{Ce.categoria&&ae.add(Ce.categoria)}),Array.from(ae).sort()},[D]);k.useEffect(()=>{const ae=JSON.parse(localStorage.getItem("historialBusquedas")||"[]");g(ae.slice(0,5))},[]),k.useEffect(()=>{if(!r.trim()){c([]),x([]);return}d(!0);let ae=$.map(ee=>{const{coincide:ie,score:ye}=K8(ee,r);return{...ee,score:ye,coincide:ie}}).filter(ee=>ee.coincide);w!=="todas"&&(ae=ae.filter(ee=>rl(ee.categoria||"")===rl(w))),ae=ae.sort((ee,ie)=>ie.score-ee.score).slice(0,8),c(ae);const Ce=[];ae.forEach(ee=>{const ie=ee.nombre;ie&&!Ce.includes(ie)&&Ce.push(ie)});const Pe=new Set;ae.forEach(ee=>{ee.categoria&&Pe.add(ee.categoria)}),Pe.forEach(ee=>{const ie=`${r} en ${ee}`;Ce.includes(ie)||Ce.push(ie)}),x(Ce.slice(0,8))},[r,$,w]),k.useEffect(()=>{const ae=Ce=>{j.current&&!j.current.contains(Ce.target)&&d(!1),O.current&&!O.current.contains(Ce.target)&&N(!1)};return document.addEventListener("mousedown",ae),()=>document.removeEventListener("mousedown",ae)},[]);const P=ae=>{if(!ae.trim())return;const Ce=JSON.parse(localStorage.getItem("historialBusquedas")||"[]"),Pe=[ae,...Ce.filter(ee=>ee!==ae)].slice(0,10);localStorage.setItem("historialBusquedas",JSON.stringify(Pe)),g(Pe.slice(0,5))},T=ae=>{if(ae.preventDefault(),r.trim()){let Ce=r.trim();w!=="todas"&&(Ce=`${r.trim()} en ${w}`),P(Ce),I(`/buscar?q=${encodeURIComponent(Ce)}`),i(""),c([]),x([]),d(!1),t&&t()}},L=ae=>{P(ae.nombre.trim()),I(`/producto/${ae.id}`),i(""),c([]),x([]),d(!1),t&&t()},U=ae=>{P(ae),ae.includes(" en ")?I(`/buscar?q=${encodeURIComponent(ae)}`):I(`/buscar?q=${encodeURIComponent(ae)}`),i(""),c([]),x([]),d(!1),t&&t()},A=ae=>{i(ae)},oe=(ae,Ce)=>{Ce.stopPropagation();const ee=JSON.parse(localStorage.getItem("historialBusquedas")||"[]").filter(ie=>ie!==ae);localStorage.setItem("historialBusquedas",JSON.stringify(ee)),g(ee.slice(0,5))};return o.jsxs("div",{className:"relative w-full",ref:j,children:[o.jsxs("form",{onSubmit:T,className:"flex w-full gap-0",children:[o.jsxs("div",{className:"relative",ref:O,children:[o.jsxs("button",{type:"button",onClick:()=>N(!b),className:"h-full px-2.5 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-l-md text-[11px] font-medium text-gray-700 dark:text-gray-300 transition flex items-center gap-1.5 min-w-[70px] max-w-[110px]",children:[o.jsx("span",{className:"truncate flex-1",children:w==="todas"?"Todos":w}),o.jsx("span",{className:"text-[9px] flex-shrink-0",children:"▼"})]}),b&&o.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 max-h-96 overflow-y-auto border border-gray-300 dark:border-gray-700 rounded-md shadow-2xl z-[10000]",style:{backgroundColor:V?"#1f2937":"#ffffff",opacity:1},children:[o.jsxs("button",{type:"button",onClick:()=>{S("todas"),N(!1)},className:`w-full text-left px-4 py-2.5 text-sm transition ${w==="todas"?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200 font-semibold":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[w==="todas"&&"✓ ","Todos"]}),R.map(ae=>o.jsxs("button",{type:"button",onClick:()=>{S(ae),N(!1)},className:`w-full text-left px-4 py-2.5 text-sm transition ${w===ae?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200 font-semibold":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[w===ae&&"✓ ",ae]},ae))]})]}),o.jsxs("div",{className:"flex-grow relative",children:[o.jsx(O0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500"}),o.jsx("input",{type:"text",ref:n,value:r,onChange:ae=>i(ae.target.value),onFocus:()=>d(!0),placeholder:e,className:"w-full border-y border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"11px"},autoComplete:"off"})]}),o.jsx("button",{type:"submit",className:"w-12 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-r-md transition flex items-center justify-center",title:"Buscar",children:o.jsx(O0,{className:"text-sm"})})]}),u&&o.jsxs("div",{className:"search-dropdown-scroll absolute z-[9999] w-full border border-gray-300 dark:border-gray-700 mt-1 rounded-md shadow-xl overflow-y-auto",style:{backgroundColor:V?"#111827":"#ffffff",opacity:1,backdropFilter:"none",WebkitBackdropFilter:"none",maxHeight:"min(80vh, 700px)",scrollBehavior:"smooth",overscrollBehavior:"contain"},children:[q&&o.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Buscando..."]}),!r.trim()&&f.length>0&&o.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:"Búsquedas recientes"}),f.map((ae,Ce)=>o.jsxs("div",{onClick:()=>A(ae),className:"px-4 py-3.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center justify-between group transition active:bg-gray-200 dark:active:bg-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(F8,{className:"text-gray-400 dark:text-gray-500 text-sm"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:ae})]}),o.jsx("button",{onClick:Pe=>oe(ae,Pe),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition",children:o.jsx(em,{className:"text-xs"})})]},Ce))]}),r.trim()&&w!=="todas"&&o.jsx("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900 border-b border-blue-200 dark:border-blue-700",children:o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:["Buscando en: ",w]}),o.jsx("button",{onClick:()=>S("todas"),className:"ml-auto text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 font-medium",children:"✕ Todos"})]})}),r.trim()&&y.length>0&&o.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:["Sugerencias (",y.length,")"]}),y.map((ae,Ce)=>o.jsxs("div",{onClick:()=>U(ae),className:"px-4 py-3.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-3 transition group active:bg-gray-200 dark:active:bg-gray-600",children:[o.jsx(O0,{className:"text-gray-400 dark:text-gray-500 text-sm flex-shrink-0"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium group-hover:text-blue-600 dark:group-hover:text-blue-400 break-words",children:ae})]},Ce))]}),r.trim()&&!q&&a.length===0&&o.jsxs("div",{className:"px-4 py-12 text-center",children:[o.jsx("div",{className:"text-5xl mb-3",children:"🔍"}),o.jsx("p",{className:"text-base font-medium text-gray-600 dark:text-gray-400",children:"No encontramos resultados"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Intenta con otras palabras"})]}),r.trim()&&!q&&a.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:["Productos (",a.length,")"]}),a.map(ae=>o.jsx("div",{onClick:()=>L(ae),className:"px-4 py-4 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition active:bg-gray-200 dark:active:bg-gray-600",children:o.jsxs("div",{className:"flex items-center gap-3",children:[ae.imagen&&o.jsx("img",{src:ae.imagen,alt:ae.nombre,className:"w-14 h-14 object-cover rounded border border-gray-200 dark:border-gray-600 flex-shrink-0",loading:"lazy"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium text-base text-gray-900 dark:text-gray-100 line-clamp-2",children:ae.nombre}),o.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[ae.empresa&&o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:ae.empresa}),ae.categoria&&o.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:["• ",ae.categoria]})]}),ae.precio&&o.jsxs("div",{className:"text-base font-bold text-blue-600 dark:text-blue-400 mt-1.5",children:["RD$",ae.precio.toLocaleString()]})]})]})},ae.id))]})]})]})}),Gv=k.createContext({});function Kv(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const Xv=typeof window<"u",qC=Xv?k.useLayoutEffect:k.useEffect,Pp=k.createContext(null);function Yv(t,e){t.indexOf(e)===-1&&t.push(e)}function Qv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ka=(t,e,n)=>n>e?e:n<t?t:n;let Jv=()=>{};const Sa={},GC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function KC(t){return typeof t=="object"&&t!==null}const XC=t=>/^0[^.\s]+$/u.test(t);function Zv(t){let e;return()=>(e===void 0&&(e=t()),e)}const zi=t=>t,X8=(t,e)=>n=>e(t(n)),ch=(...t)=>t.reduce(X8),Pd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class e1{constructor(){this.subscriptions=[]}add(e){return Yv(this.subscriptions,e),()=>Qv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const c=this.subscriptions[a];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vs=t=>t*1e3,Fs=t=>t/1e3;function YC(t,e){return e?t*(1e3/e):0}const QC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Y8=1e-7,Q8=12;function J8(t,e,n,r,i){let a,c,u=0;do c=e+(n-e)/2,a=QC(c,r,i)-t,a>0?n=c:e=c;while(Math.abs(a)>Y8&&++u<Q8);return c}function uh(t,e,n,r){if(t===e&&n===r)return zi;const i=a=>J8(a,0,1,t,n);return a=>a===0||a===1?a:QC(i(a),e,r)}const JC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ZC=t=>e=>1-t(1-e),e4=uh(.33,1.53,.69,.99),t1=ZC(e4),t4=JC(t1),n4=t=>(t*=2)<1?.5*t1(t):.5*(2-Math.pow(2,-10*(t-1))),n1=t=>1-Math.sin(Math.acos(t)),r4=ZC(n1),i4=JC(n1),Z8=uh(.42,0,1,1),eL=uh(0,0,.58,1),s4=uh(.42,0,.58,1),tL=t=>Array.isArray(t)&&typeof t[0]!="number",a4=t=>Array.isArray(t)&&typeof t[0]=="number",nL={linear:zi,easeIn:Z8,easeInOut:s4,easeOut:eL,circIn:n1,circInOut:i4,circOut:r4,backIn:t1,backInOut:t4,backOut:e4,anticipate:n4},rL=t=>typeof t=="string",rE=t=>{if(a4(t)){Jv(t.length===4);const[e,n,r,i]=t;return uh(e,n,r,i)}else if(rL(t))return nL[t];return t},Cf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],iE={value:null};function iL(t,e){let n=new Set,r=new Set,i=!1,a=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function f(y){c.has(y)&&(g.schedule(y),t()),d++,y(u)}const g={schedule:(y,x=!1,w=!1)=>{const b=w&&i?n:r;return x&&c.add(y),b.has(y)||b.add(y),y},cancel:y=>{r.delete(y),c.delete(y)},process:y=>{if(u=y,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(f),e&&iE.value&&iE.value.frameloop[e].push(d),d=0,n.clear(),i=!1,a&&(a=!1,g.process(y))}};return g}const sL=40;function o4(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=Cf.reduce((I,V)=>(I[V]=iL(a,e?V:void 0),I),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:g,update:y,preRender:x,render:w,postRender:S}=c,b=()=>{const I=Sa.useManualTiming?i.timestamp:performance.now();n=!1,Sa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,sL),1)),i.timestamp=I,i.isProcessing=!0,u.process(i),d.process(i),f.process(i),g.process(i),y.process(i),x.process(i),w.process(i),S.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},N=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:Cf.reduce((I,V)=>{const $=c[V];return I[V]=(q,D=!1,R=!1)=>(n||N(),$.schedule(q,D,R)),I},{}),cancel:I=>{for(let V=0;V<Cf.length;V++)c[Cf[V]].cancel(I)},state:i,steps:c}}const{schedule:En,cancel:ko,state:wr,steps:L0}=o4(typeof requestAnimationFrame<"u"?requestAnimationFrame:zi,!0);let tm;function aL(){tm=void 0}const di={now:()=>(tm===void 0&&di.set(wr.isProcessing||Sa.useManualTiming?wr.timestamp:performance.now()),tm),set:t=>{tm=t,queueMicrotask(aL)}},l4=t=>e=>typeof e=="string"&&e.startsWith(t),r1=l4("--"),oL=l4("var(--"),i1=t=>oL(t)?lL.test(t.split("/*")[0].trim()):!1,lL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Rd={...uu,transform:t=>ka(0,1,t)},jf={...uu,default:1},hd=t=>Math.round(t*1e5)/1e5,s1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cL(t){return t==null}const uL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a1=(t,e)=>n=>!!(typeof n=="string"&&uL.test(n)&&n.startsWith(t)||e&&!cL(n)&&Object.prototype.hasOwnProperty.call(n,e)),c4=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,c,u]=r.match(s1);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},dL=t=>ka(0,255,t),V0={...uu,transform:t=>Math.round(dL(t))},cl={test:a1("rgb","red"),parse:c4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+V0.transform(t)+", "+V0.transform(e)+", "+V0.transform(n)+", "+hd(Rd.transform(r))+")"};function hL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Hy={test:a1("#"),parse:hL,transform:cl.transform},dh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),to=dh("deg"),Us=dh("%"),bt=dh("px"),fL=dh("vh"),mL=dh("vw"),sE={...Us,parse:t=>Us.parse(t)/100,transform:t=>Us.transform(t*100)},Ic={test:a1("hsl","hue"),parse:c4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Us.transform(hd(e))+", "+Us.transform(hd(n))+", "+hd(Rd.transform(r))+")"},Zn={test:t=>cl.test(t)||Hy.test(t)||Ic.test(t),parse:t=>cl.test(t)?cl.parse(t):Ic.test(t)?Ic.parse(t):Hy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?cl.transform(t):Ic.transform(t),getAnimatableNone:t=>{const e=Zn.parse(t);return e.alpha=0,Zn.transform(e)}},pL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gL(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(s1))==null?void 0:e.length)||0)+(((n=t.match(pL))==null?void 0:n.length)||0)>0}const u4="number",d4="color",yL="var",xL="var(",aE="${}",vL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Md(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const u=e.replace(vL,d=>(Zn.test(d)?(r.color.push(a),i.push(d4),n.push(Zn.parse(d))):d.startsWith(xL)?(r.var.push(a),i.push(yL),n.push(d)):(r.number.push(a),i.push(u4),n.push(parseFloat(d))),++a,aE)).split(aE);return{values:n,split:u,indexes:r,types:i}}function h4(t){return Md(t).values}function f4(t){const{split:e,types:n}=Md(t),r=e.length;return i=>{let a="";for(let c=0;c<r;c++)if(a+=e[c],i[c]!==void 0){const u=n[c];u===u4?a+=hd(i[c]):u===d4?a+=Zn.transform(i[c]):a+=i[c]}return a}}const bL=t=>typeof t=="number"?0:Zn.test(t)?Zn.getAnimatableNone(t):t;function wL(t){const e=h4(t);return f4(t)(e.map(bL))}const So={test:gL,parse:h4,createTransformer:f4,getAnimatableNone:wL};function F0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _L({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,c=0;if(!e)i=a=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;i=F0(d,u,t+1/3),a=F0(d,u,t),c=F0(d,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function Fm(t,e){return n=>n>0?e:t}const In=(t,e,n)=>t+(e-t)*n,U0=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},EL=[Hy,cl,Ic],kL=t=>EL.find(e=>e.test(t));function oE(t){const e=kL(t);if(!e)return!1;let n=e.parse(t);return e===Ic&&(n=_L(n)),n}const lE=(t,e)=>{const n=oE(t),r=oE(e);if(!n||!r)return Fm(t,e);const i={...n};return a=>(i.red=U0(n.red,r.red,a),i.green=U0(n.green,r.green,a),i.blue=U0(n.blue,r.blue,a),i.alpha=In(n.alpha,r.alpha,a),cl.transform(i))},Wy=new Set(["none","hidden"]);function SL(t,e){return Wy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function TL(t,e){return n=>In(t,e,n)}function o1(t){return typeof t=="number"?TL:typeof t=="string"?i1(t)?Fm:Zn.test(t)?lE:jL:Array.isArray(t)?m4:typeof t=="object"?Zn.test(t)?lE:NL:Fm}function m4(t,e){const n=[...t],r=n.length,i=t.map((a,c)=>o1(a)(a,e[c]));return a=>{for(let c=0;c<r;c++)n[c]=i[c](a);return n}}function NL(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=o1(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function CL(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],c=t.indexes[a][r[a]],u=t.values[c]??0;n[i]=u,r[a]++}return n}const jL=(t,e)=>{const n=So.createTransformer(e),r=Md(t),i=Md(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Wy.has(t)&&!i.values.length||Wy.has(e)&&!r.values.length?SL(t,e):ch(m4(CL(r,i),i.values),n):Fm(t,e)};function p4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?In(t,e,n):o1(t)(t,e)}const AL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>En.update(e,n),stop:()=>ko(e),now:()=>wr.isProcessing?wr.timestamp:di.now()}},g4=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Um=2e4;function l1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Um;)e+=n,r=t.next(e);return e>=Um?1/0:e}function IL(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(l1(r),Um);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Fs(i)}}const PL=5;function y4(t,e,n){const r=Math.max(e-PL,0);return YC(n-t(r),e-r)}const Fn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$0=.001;function RL({duration:t=Fn.duration,bounce:e=Fn.bounce,velocity:n=Fn.velocity,mass:r=Fn.mass}){let i,a,c=1-e;c=ka(Fn.minDamping,Fn.maxDamping,c),t=ka(Fn.minDuration,Fn.maxDuration,Fs(t)),c<1?(i=f=>{const g=f*c,y=g*t,x=g-n,w=qy(f,c),S=Math.exp(-y);return $0-x/w*S},a=f=>{const y=f*c*t,x=y*n+n,w=Math.pow(c,2)*Math.pow(f,2)*t,S=Math.exp(-y),b=qy(Math.pow(f,2),c);return(-i(f)+$0>0?-1:1)*((x-w)*S)/b}):(i=f=>{const g=Math.exp(-f*t),y=(f-n)*t+1;return-$0+g*y},a=f=>{const g=Math.exp(-f*t),y=(n-f)*(t*t);return g*y});const u=5/t,d=DL(i,a,u);if(t=Vs(t),isNaN(d))return{stiffness:Fn.stiffness,damping:Fn.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:c*2*Math.sqrt(r*f),duration:t}}}const ML=12;function DL(t,e,n){let r=n;for(let i=1;i<ML;i++)r=r-t(r)/e(r);return r}function qy(t,e){return t*Math.sqrt(1-e*e)}const OL=["duration","bounce"],LL=["stiffness","damping","mass"];function cE(t,e){return e.some(n=>t[n]!==void 0)}function VL(t){let e={velocity:Fn.velocity,stiffness:Fn.stiffness,damping:Fn.damping,mass:Fn.mass,isResolvedFromDuration:!1,...t};if(!cE(t,LL)&&cE(t,OL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ka(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Fn.mass,stiffness:i,damping:a}}else{const n=RL(t);e={...e,...n,mass:Fn.mass},e.isResolvedFromDuration=!0}return e}function $m(t=Fn.visualDuration,e=Fn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:g,duration:y,velocity:x,isResolvedFromDuration:w}=VL({...n,velocity:-Fs(n.velocity||0)}),S=x||0,b=f/(2*Math.sqrt(d*g)),N=c-a,j=Fs(Math.sqrt(d/g)),O=Math.abs(N)<5;r||(r=O?Fn.restSpeed.granular:Fn.restSpeed.default),i||(i=O?Fn.restDelta.granular:Fn.restDelta.default);let I;if(b<1){const $=qy(j,b);I=q=>{const D=Math.exp(-b*j*q);return c-D*((S+b*j*N)/$*Math.sin($*q)+N*Math.cos($*q))}}else if(b===1)I=$=>c-Math.exp(-j*$)*(N+(S+j*N)*$);else{const $=j*Math.sqrt(b*b-1);I=q=>{const D=Math.exp(-b*j*q),R=Math.min($*q,300);return c-D*((S+b*j*N)*Math.sinh(R)+$*N*Math.cosh(R))/$}}const V={calculatedDuration:w&&y||null,next:$=>{const q=I($);if(w)u.done=$>=y;else{let D=$===0?S:0;b<1&&(D=$===0?Vs(S):y4(I,$,q));const R=Math.abs(D)<=r,P=Math.abs(c-q)<=i;u.done=R&&P}return u.value=u.done?c:q,u},toString:()=>{const $=Math.min(l1(V),Um),q=g4(D=>V.next($*D).value,$,30);return $+"ms "+q},toTransition:()=>{}};return V}$m.applyToOptions=t=>{const e=IL(t,100,$m);return t.ease=e.ease,t.duration=Vs(e.duration),t.type="keyframes",t};function Gy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:c,min:u,max:d,restDelta:f=.5,restSpeed:g}){const y=t[0],x={done:!1,value:y},w=R=>u!==void 0&&R<u||d!==void 0&&R>d,S=R=>u===void 0?d:d===void 0||Math.abs(u-R)<Math.abs(d-R)?u:d;let b=n*e;const N=y+b,j=c===void 0?N:c(N);j!==N&&(b=j-y);const O=R=>-b*Math.exp(-R/r),I=R=>j+O(R),V=R=>{const P=O(R),T=I(R);x.done=Math.abs(P)<=f,x.value=x.done?j:T};let $,q;const D=R=>{w(x.value)&&($=R,q=$m({keyframes:[x.value,S(x.value)],velocity:y4(I,R,x.value),damping:i,stiffness:a,restDelta:f,restSpeed:g}))};return D(0),{calculatedDuration:null,next:R=>{let P=!1;return!q&&$===void 0&&(P=!0,V(R),D(R)),$!==void 0&&R>=$?q.next(R-$):(!P&&V(R),x)}}}function FL(t,e,n){const r=[],i=n||Sa.mix||p4,a=t.length-1;for(let c=0;c<a;c++){let u=i(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||zi:e;u=ch(d,u)}r.push(u)}return r}function UL(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(Jv(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=FL(e,r,i),d=u.length,f=g=>{if(c&&g<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const x=Pd(t[y],t[y+1],g);return u[y](x)};return n?g=>f(ka(t[0],t[a-1],g)):f}function $L(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Pd(0,e,r);t.push(In(n,1,i))}}function zL(t){const e=[0];return $L(e,t.length-1),e}function BL(t,e){return t.map(n=>n*e)}function HL(t,e){return t.map(()=>e||s4).splice(0,t.length-1)}function fd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=tL(r)?r.map(rE):rE(r),a={done:!1,value:e[0]},c=BL(n&&n.length===e.length?n:zL(e),t),u=UL(c,e,{ease:Array.isArray(i)?i:HL(e,i)});return{calculatedDuration:t,next:d=>(a.value=u(d),a.done=d>=t,a)}}const WL=t=>t!==null;function c1(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(WL),u=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const qL={decay:Gy,inertia:Gy,tween:fd,keyframes:fd,spring:$m};function x4(t){typeof t.type=="string"&&(t.type=qL[t.type])}class u1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const GL=t=>t/100;class d1 extends u1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==di.now()&&this.tick(di.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;x4(e);const{type:n=fd,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:c=0}=e;let{keyframes:u}=e;const d=n||fd;d!==fd&&typeof u[0]!="number"&&(this.mixKeyframes=ch(GL,p4(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=l1(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:w,type:S,onUpdate:b,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?j<0:j>i;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,V=r;if(y){const R=Math.min(this.currentTime,i)/u;let P=Math.floor(R),T=R%1;!T&&R>=1&&(T=1),T===1&&P--,P=Math.min(P,y+1),!!(P%2)&&(x==="reverse"?(T=1-T,w&&(T-=w/u)):x==="mirror"&&(V=c)),I=ka(0,1,T)*u}const $=O?{done:!1,value:g[0]}:V.next(I);a&&($.value=a($.value));let{done:q}=$;!O&&d!==null&&(q=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return D&&S!==Gy&&($.value=c1(g,this.options,N,this.speed)),b&&b($.value),D&&this.finish(),$}then(e,n){return this.finished.then(e,n)}get duration(){return Fs(this.calculatedDuration)}get time(){return Fs(this.currentTime)}set time(e){var n;e=Vs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(di.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Fs(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=AL,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(di.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function KL(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ul=t=>t*180/Math.PI,Ky=t=>{const e=ul(Math.atan2(t[1],t[0]));return Xy(e)},XL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ky,rotateZ:Ky,skewX:t=>ul(Math.atan(t[1])),skewY:t=>ul(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Xy=t=>(t=t%360,t<0&&(t+=360),t),uE=Ky,dE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),YL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dE,scaleY:hE,scale:t=>(dE(t)+hE(t))/2,rotateX:t=>Xy(ul(Math.atan2(t[6],t[5]))),rotateY:t=>Xy(ul(Math.atan2(-t[2],t[0]))),rotateZ:uE,rotate:uE,skewX:t=>ul(Math.atan(t[4])),skewY:t=>ul(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Yy(t){return t.includes("scale")?1:0}function Qy(t,e){if(!t||t==="none")return Yy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=YL,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XL,i=u}if(!i)return Yy(e);const a=r[e],c=i[1].split(",").map(JL);return typeof a=="function"?a(c):c[a]}const QL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Qy(n,e)};function JL(t){return parseFloat(t.trim())}const du=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hu=new Set(du),fE=t=>t===uu||t===bt,ZL=new Set(["x","y","z"]),e7=du.filter(t=>!ZL.has(t));function t7(t){const e=[];return e7.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const gl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Qy(e,"x"),y:(t,{transform:e})=>Qy(e,"y")};gl.translateX=gl.x;gl.translateY=gl.y;const yl=new Set;let Jy=!1,Zy=!1,ex=!1;function v4(){if(Zy){const t=Array.from(yl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=t7(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,c])=>{var u;(u=r.getValue(a))==null||u.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Zy=!1,Jy=!1,yl.forEach(t=>t.complete(ex)),yl.clear()}function b4(){yl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Zy=!0)})}function n7(){ex=!0,b4(),v4(),ex=!1}class h1{constructor(e,n,r,i,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(yl.add(this),Jy||(Jy=!0,En.read(b4),En.resolveKeyframes(v4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&a===void 0&&i.set(e[0])}KL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yl.delete(this)}cancel(){this.state==="scheduled"&&(yl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const r7=t=>t.startsWith("--");function i7(t,e,n){r7(e)?t.style.setProperty(e,n):t.style[e]=n}const s7=Zv(()=>window.ScrollTimeline!==void 0),a7={};function o7(t,e){const n=Zv(t);return()=>a7[e]??n()}const w4=o7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,mE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nd([0,.65,.55,1]),circOut:nd([.55,0,1,.45]),backIn:nd([.31,.01,.66,-.59]),backOut:nd([.33,1.53,.69,.99])};function _4(t,e){if(t)return typeof t=="function"?w4()?g4(t,e):"ease-out":a4(t)?nd(t):Array.isArray(t)?t.map(n=>_4(n,e)||mE.easeOut):mE[t]}function l7(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:c="loop",ease:u="easeOut",times:d}={},f=void 0){const g={[e]:n};d&&(g.offset=d);const y=_4(u,i);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),t.animate(g,x)}function E4(t){return typeof t=="function"&&"applyToOptions"in t}function c7({type:t,...e}){return E4(t)&&w4()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class u7 extends u1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,Jv(typeof e.type!="string");const f=c7(e);this.animation=l7(n,r,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=c1(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):i7(n,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Fs(Number(e))}get time(){return Fs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Vs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&s7()?(this.animation.timeline=e,zi):n(this)}}const k4={anticipate:n4,backInOut:t4,circInOut:i4};function d7(t){return t in k4}function h7(t){typeof t.ease=="string"&&d7(t.ease)&&(t.ease=k4[t.ease])}const pE=10;class f7 extends u7{constructor(e){h7(e),x4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new d1({...c,autoplay:!1}),d=Vs(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-pE).value,u.sample(d).value,pE),u.stop()}}const gE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(So.test(t)||t==="0")&&!t.startsWith("url("));function m7(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function p7(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=gE(i,e),u=gE(a,e);return!c||!u?!1:m7(t)||(n==="spring"||E4(n))&&r}function f1(t){return KC(t)&&"offsetHeight"in t}const g7=new Set(["opacity","clipPath","filter","transform"]),y7=Zv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function x7(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:c}=t;if(!f1((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return y7()&&n&&g7.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&c!=="inertia"}const v7=40;class b7 extends u1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:c="loop",keyframes:u,name:d,motionValue:f,element:g,...y}){var S;super(),this.stop=()=>{var b,N;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=di.now();const x={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:c,name:d,motionValue:f,element:g,...y},w=(g==null?void 0:g.KeyframeResolver)||h1;this.keyframeResolver=new w(u,(b,N,j)=>this.onKeyframesResolved(b,N,x,!j),d,f,g),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:c,velocity:u,delay:d,isHandoff:f,onUpdate:g}=r;this.resolvedAt=di.now(),p7(e,a,c,u)||((Sa.instantAnimations||!d)&&(g==null||g(c1(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>v7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!f&&x7(x)?new f7({...x,element:x.motionValue.owner.current}):new d1(x);w.finished.then(()=>this.notifyFinished()).catch(zi),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),n7()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const w7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _7(t){const e=w7.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function S4(t,e,n=1){const[r,i]=_7(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return GC(c)?parseFloat(c):c}return i1(i)?S4(i,e,n+1):i}function m1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const T4=new Set(["width","height","top","left","right","bottom",...du]),E7={test:t=>t==="auto",parse:t=>t},N4=t=>e=>e.test(t),C4=[uu,bt,Us,to,mL,fL,E7],yE=t=>C4.find(N4(t));function k7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||XC(t):!0}const S7=new Set(["brightness","contrast","saturate","opacity"]);function T7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(s1)||[];if(!r)return t;const i=n.replace(r,"");let a=S7.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const N7=/\b([a-z-]*)\(.*?\)/gu,tx={...So,getAnimatableNone:t=>{const e=t.match(N7);return e?e.map(T7).join(" "):t}},xE={...uu,transform:Math.round},C7={rotate:to,rotateX:to,rotateY:to,rotateZ:to,scale:jf,scaleX:jf,scaleY:jf,scaleZ:jf,skew:to,skewX:to,skewY:to,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Rd,originX:sE,originY:sE,originZ:bt},p1={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...C7,zIndex:xE,fillOpacity:Rd,strokeOpacity:Rd,numOctaves:xE},j7={...p1,color:Zn,backgroundColor:Zn,outlineColor:Zn,fill:Zn,stroke:Zn,borderColor:Zn,borderTopColor:Zn,borderRightColor:Zn,borderBottomColor:Zn,borderLeftColor:Zn,filter:tx,WebkitFilter:tx},j4=t=>j7[t];function A4(t,e){let n=j4(t);return n!==tx&&(n=So),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const A7=new Set(["auto","none","0"]);function I7(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!A7.has(a)&&Md(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=A4(n,i)}class P7 extends h1{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),i1(f))){const g=S4(f,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!T4.has(r)||e.length!==2)return;const[i,a]=e,c=yE(i),u=yE(a);if(c!==u)if(fE(c)&&fE(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else gl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||k7(e[i]))&&r.push(i);r.length&&I7(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=gl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function R7(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const I4=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vE=30,M7=t=>!isNaN(parseFloat(t));class D7{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var c,u;const a=di.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=di.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=M7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new e1);const r=this.events[e].add(n);return e==="change"?()=>{r(),En.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=di.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vE);return YC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xc(t,e){return new D7(t,e)}const{schedule:g1}=o4(queueMicrotask,!1),rs={x:!1,y:!1};function P4(){return rs.x||rs.y}function O7(t){return t==="x"||t==="y"?rs[t]?null:(rs[t]=!0,()=>{rs[t]=!1}):rs.x||rs.y?null:(rs.x=rs.y=!0,()=>{rs.x=rs.y=!1})}function R4(t,e){const n=R7(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function bE(t){return!(t.pointerType==="touch"||P4())}function L7(t,e,n={}){const[r,i,a]=R4(t,n),c=u=>{if(!bE(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const g=y=>{bE(y)&&(f(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,i)};return r.forEach(u=>{u.addEventListener("pointerenter",c,i)}),a}const M4=(t,e)=>e?t===e?!0:M4(t,e.parentElement):!1,y1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,V7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function F7(t){return V7.has(t.tagName)||t.tabIndex!==-1}const nm=new WeakSet;function wE(t){return e=>{e.key==="Enter"&&t(e)}}function z0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const U7=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=wE(()=>{if(nm.has(n))return;z0(n,"down");const i=wE(()=>{z0(n,"up")}),a=()=>z0(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function _E(t){return y1(t)&&!P4()}function $7(t,e,n={}){const[r,i,a]=R4(t,n),c=u=>{const d=u.currentTarget;if(!_E(u))return;nm.add(d);const f=e(d,u),g=(w,S)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),nm.has(d)&&nm.delete(d),_E(w)&&typeof f=="function"&&f(w,{success:S})},y=w=>{g(w,d===window||d===document||n.useGlobalTarget||M4(d,w.target))},x=w=>{g(w,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",x,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),f1(u)&&(u.addEventListener("focus",f=>U7(f,i)),!F7(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function D4(t){return KC(t)&&"ownerSVGElement"in t}function z7(t){return D4(t)&&t.tagName==="svg"}const Fr=t=>!!(t&&t.getVelocity),B7=[...C4,Zn,So],H7=t=>B7.find(N4(t)),x1=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class W7 extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=f1(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function q7({children:t,isPresent:e,anchorX:n,root:r}){const i=k.useId(),a=k.useRef(null),c=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=k.useContext(x1);return k.useInsertionEffect(()=>{const{width:d,height:f,top:g,left:y,right:x}=c.current;if(e||!a.current||!d||!f)return;const w=n==="left"?`left: ${y}`:`right: ${x}`;a.current.dataset.motionPopId=i;const S=document.createElement("style");u&&(S.nonce=u);const b=r??document.head;return b.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${g}px !important;
          }
        `),()=>{b.removeChild(S),b.contains(S)&&b.removeChild(S)}},[e]),o.jsx(W7,{isPresent:e,childRef:a,sizeRef:c,children:k.cloneElement(t,{ref:a})})}const G7=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:c,anchorX:u,root:d})=>{const f=Kv(K7),g=k.useId();let y=!0,x=k.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:i,onExitComplete:w=>{f.set(w,!0);for(const S of f.values())if(!S)return;r&&r()},register:w=>(f.set(w,!1),()=>f.delete(w))}),[n,f,r]);return a&&y&&(x={...x}),k.useMemo(()=>{f.forEach((w,S)=>f.set(S,!1))},[n]),k.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=o.jsx(q7,{isPresent:n,anchorX:u,root:d,children:t})),o.jsx(Pp.Provider,{value:x,children:t})};function K7(){return new Map}function O4(t=!0){const e=k.useContext(Pp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=k.useId();k.useEffect(()=>{if(t)return i(a)},[t]);const c=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,c]:[!0]}const Af=t=>t.key||"";function EE(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const cn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:c=!1,anchorX:u="left",root:d})=>{const[f,g]=O4(c),y=k.useMemo(()=>EE(t),[t]),x=c&&!f?[]:y.map(Af),w=k.useRef(!0),S=k.useRef(y),b=Kv(()=>new Map),[N,j]=k.useState(y),[O,I]=k.useState(y);qC(()=>{w.current=!1,S.current=y;for(let q=0;q<O.length;q++){const D=Af(O[q]);x.includes(D)?b.delete(D):b.get(D)!==!0&&b.set(D,!1)}},[O,x.length,x.join("-")]);const V=[];if(y!==N){let q=[...y];for(let D=0;D<O.length;D++){const R=O[D],P=Af(R);x.includes(P)||(q.splice(D,0,R),V.push(R))}return a==="wait"&&V.length&&(q=V),I(EE(q)),j(y),null}const{forceRender:$}=k.useContext(Gv);return o.jsx(o.Fragment,{children:O.map(q=>{const D=Af(q),R=c&&!f?!1:y===O||x.includes(D),P=()=>{if(b.has(D))b.set(D,!0);else return;let T=!0;b.forEach(L=>{L||(T=!1)}),T&&($==null||$(),I(S.current),c&&(g==null||g()),r&&r())};return o.jsx(G7,{isPresent:R,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:d,onExitComplete:R?void 0:P,anchorX:u,children:q},D)})})},L4=k.createContext({strict:!1}),kE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yc={};for(const t in kE)Yc[t]={isEnabled:e=>kE[t].some(n=>!!e[n])};function X7(t){for(const e in t)Yc[e]={...Yc[e],...t[e]}}const Y7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Y7.has(t)}let V4=t=>!zm(t);function Q7(t){typeof t=="function"&&(V4=e=>e.startsWith("on")?!zm(e):t(e))}try{Q7(require("@emotion/is-prop-valid").default)}catch{}function J7(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(V4(i)||n===!0&&zm(i)||!e&&!zm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Z7(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Rp=k.createContext({});function Mp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Dd(t){return typeof t=="string"||Array.isArray(t)}const v1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],b1=["initial",...v1];function Dp(t){return Mp(t.animate)||b1.some(e=>Dd(t[e]))}function F4(t){return!!(Dp(t)||t.variants)}function eV(t,e){if(Dp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Dd(n)?n:void 0,animate:Dd(r)?r:void 0}}return t.inherit!==!1?e:{}}function tV(t){const{initial:e,animate:n}=eV(t,k.useContext(Rp));return k.useMemo(()=>({initial:e,animate:n}),[SE(e),SE(n)])}function SE(t){return Array.isArray(t)?t.join(" "):t}const nV=Symbol.for("motionComponentSymbol");function Pc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rV(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Pc(n)&&(n.current=r))},[e])}const w1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iV="framerAppearId",U4="data-"+w1(iV),$4=k.createContext({});function sV(t,e,n,r,i){var b,N;const{visualElement:a}=k.useContext(Rp),c=k.useContext(L4),u=k.useContext(Pp),d=k.useContext(x1).reducedMotion,f=k.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,y=k.useContext($4);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&aV(f.current,n,i,y);const x=k.useRef(!1);k.useInsertionEffect(()=>{g&&x.current&&g.update(n,u)});const w=n[U4],S=k.useRef(!!w&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,w))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,w)));return qC(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g1.render(g.render),S.current&&g.animationState&&g.animationState.animateChanges())}),k.useEffect(()=>{g&&(!S.current&&g.animationState&&g.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,w)}),S.current=!1))}),g}function aV(t,e,n,r){const{layoutId:i,layout:a,drag:c,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:z4(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!c||u&&Pc(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:f})}function z4(t){if(t)return t.options.allowProjection!==!1?t.projection:z4(t.parent)}function oV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&X7(t);function a(u,d){let f;const g={...k.useContext(x1),...u,layoutId:lV(u)},{isStatic:y}=g,x=tV(u),w=r(u,y);if(!y&&Xv){cV();const S=uV(g);f=S.MeasureLayout,x.visualElement=sV(i,w,g,e,S.ProjectionNode)}return o.jsxs(Rp.Provider,{value:x,children:[f&&x.visualElement?o.jsx(f,{visualElement:x.visualElement,...g}):null,n(i,u,rV(w,x.visualElement,d),w,y,x.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const c=k.forwardRef(a);return c[nV]=i,c}function lV({layoutId:t}){const e=k.useContext(Gv).id;return e&&t!==void 0?e+"-"+t:t}function cV(t,e){k.useContext(L4).strict}function uV(t){const{drag:e,layout:n}=Yc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Od={};function dV(t){for(const e in t)Od[e]=t[e],r1(e)&&(Od[e].isCSSVariable=!0)}function B4(t,{layout:e,layoutId:n}){return hu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Od[t]||t==="opacity")}const hV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fV=du.length;function mV(t,e,n){let r="",i=!0;for(let a=0;a<fV;a++){const c=du[a],u=t[c];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(c.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=I4(u,p1[c]);if(!d){i=!1;const g=hV[c]||c;r+=`${g}(${f}) `}n&&(e[c]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function _1(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let c=!1,u=!1;for(const d in e){const f=e[d];if(hu.has(d)){c=!0;continue}else if(r1(d)){i[d]=f;continue}else{const g=I4(f,p1[d]);d.startsWith("origin")?(u=!0,a[d]=g):r[d]=g}}if(e.transform||(c||n?r.transform=mV(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=a;r.transformOrigin=`${d} ${f} ${g}`}}const E1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function H4(t,e,n){for(const r in e)!Fr(e[r])&&!B4(r,n)&&(t[r]=e[r])}function pV({transformTemplate:t},e){return k.useMemo(()=>{const n=E1();return _1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function gV(t,e){const n=t.style||{},r={};return H4(r,n,t),Object.assign(r,pV(t,e)),r}function yV(t,e){const n={},r=gV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const xV={offset:"stroke-dashoffset",array:"stroke-dasharray"},vV={offset:"strokeDashoffset",array:"strokeDasharray"};function bV(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?xV:vV;t[a.offset]=bt.transform(-r);const c=bt.transform(e),u=bt.transform(n);t[a.array]=`${c} ${u}`}function W4(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:c=0,...u},d,f,g){if(_1(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x}=t;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),i!==void 0&&bV(y,i,a,c,!1)}const q4=()=>({...E1(),attrs:{}}),G4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wV(t,e,n,r){const i=k.useMemo(()=>{const a=q4();return W4(a,e,G4(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};H4(a,t.style,t),i.style={...a,...i.style}}return i}const _V=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k1(t){return typeof t!="string"||t.includes("-")?!1:!!(_V.indexOf(t)>-1||/[A-Z]/u.test(t))}function EV(t=!1){return(n,r,i,{latestValues:a},c)=>{const d=(k1(n)?wV:yV)(r,a,c,n),f=J7(r,typeof n=="string",t),g=n!==k.Fragment?{...f,...d,ref:i}:{},{children:y}=r,x=k.useMemo(()=>Fr(y)?y.get():y,[y]);return k.createElement(n,{...g,children:x})}}function TE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function S1(t,e,n,r){if(typeof e=="function"){const[i,a]=TE(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=TE(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function rm(t){return Fr(t)?t.get():t}function kV({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:SV(n,r,i,t),renderState:e()}}const K4=t=>(e,n)=>{const r=k.useContext(Rp),i=k.useContext(Pp),a=()=>kV(t,e,r,i);return n?a():Kv(a)};function SV(t,e,n,r){const i={},a=r(t,{});for(const x in a)i[x]=rm(a[x]);let{initial:c,animate:u}=t;const d=Dp(t),f=F4(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const y=g?u:c;if(y&&typeof y!="boolean"&&!Mp(y)){const x=Array.isArray(y)?y:[y];for(let w=0;w<x.length;w++){const S=S1(t,x[w]);if(S){const{transitionEnd:b,transition:N,...j}=S;for(const O in j){let I=j[O];if(Array.isArray(I)){const V=g?I.length-1:0;I=I[V]}I!==null&&(i[O]=I)}for(const O in b)i[O]=b[O]}}}return i}function T1(t,e,n){var a;const{style:r}=t,i={};for(const c in r)(Fr(r[c])||e.style&&Fr(e.style[c])||B4(c,t)||((a=n==null?void 0:n.getValue(c))==null?void 0:a.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const TV={useVisualState:K4({scrapeMotionValuesFromProps:T1,createRenderState:E1})};function X4(t,e,n){const r=T1(t,e,n);for(const i in t)if(Fr(t[i])||Fr(e[i])){const a=du.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const NV={useVisualState:K4({scrapeMotionValuesFromProps:X4,createRenderState:q4})};function CV(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const c={...k1(r)?NV:TV,preloadedFeatures:t,useRender:EV(i),createVisualElement:e,Component:r};return oV(c)}}function Ld(t,e,n){const r=t.getProps();return S1(r,e,n!==void 0?n:r.custom,t)}const nx=t=>Array.isArray(t);function jV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Xc(n))}function AV(t){return nx(t)?t[t.length-1]||0:t}function IV(t,e){const n=Ld(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const c in a){const u=AV(a[c]);jV(t,c,u)}}function PV(t){return!!(Fr(t)&&t.add)}function rx(t,e){const n=t.getValue("willChange");if(PV(n))return n.add(e);if(!n&&Sa.WillChange){const r=new Sa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Y4(t){return t.props[U4]}const RV=t=>t!==null;function MV(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(RV),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const DV={type:"spring",stiffness:500,damping:25,restSpeed:10},OV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),LV={type:"keyframes",duration:.8},VV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},FV=(t,{keyframes:e})=>e.length>2?LV:hu.has(t)?t.startsWith("scale")?OV(e[1]):DV:VV;function UV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:c,repeatDelay:u,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const N1=(t,e,n,r={},i,a)=>c=>{const u=m1(r,t)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Vs(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:i};UV(u)||Object.assign(g,FV(t,g)),g.duration&&(g.duration=Vs(g.duration)),g.repeatDelay&&(g.repeatDelay=Vs(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),(Sa.instantAnimations||Sa.skipAnimations)&&(y=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!a&&e.get()!==void 0){const x=MV(g.keyframes,u);if(x!==void 0){En.update(()=>{g.onUpdate(x),g.onComplete()});return}}return u.isSync?new d1(g):new b7(g)};function $V({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Q4(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(a=r);const d=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const y=t.getValue(g,t.latestValues[g]??null),x=u[g];if(x===void 0||f&&$V(f,g))continue;const w={delay:n,...m1(a||{},g)},S=y.get();if(S!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===S&&!w.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const j=Y4(t);if(j){const O=window.MotionHandoffAnimation(j,g,En);O!==null&&(w.startTime=O,b=!0)}}rx(t,g),y.start(N1(g,y,x,t.shouldReduceMotion&&T4.has(g)?{type:!1}:w,t,b));const N=y.animation;N&&d.push(N)}return c&&Promise.all(d).then(()=>{En.update(()=>{c&&IV(t,c)})}),d}function ix(t,e,n={}){var d;const r=Ld(t,e,n.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(Q4(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=i;return zV(t,e,f,g,y,x,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,g]=u==="beforeChildren"?[a,c]:[c,a];return f().then(()=>g())}else return Promise.all([a(),c(n.delay)])}function zV(t,e,n=0,r=0,i=0,a=1,c){const u=[],d=t.variantChildren.size,f=(d-1)*i,g=typeof r=="function",y=g?x=>r(x,d):a===1?(x=0)=>x*i:(x=0)=>f-x*i;return Array.from(t.variantChildren).sort(BV).forEach((x,w)=>{x.notify("AnimationStart",e),u.push(ix(x,e,{...c,delay:n+(g?0:r)+y(w)}).then(()=>x.notify("AnimationComplete",e)))}),Promise.all(u)}function BV(t,e){return t.sortNodePosition(e)}function HV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>ix(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=ix(t,e,n);else{const i=typeof e=="function"?Ld(t,e,n.custom):e;r=Promise.all(Q4(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function J4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const WV=b1.length;function Z4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Z4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<WV;n++){const r=b1[n],i=t.props[r];(Dd(i)||i===!1)&&(e[r]=i)}return e}const qV=[...v1].reverse(),GV=v1.length;function KV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>HV(t,n,r)))}function XV(t){let e=KV(t),n=NE(),r=!0;const i=d=>(f,g)=>{var x;const y=Ld(t,g,d==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:w,transitionEnd:S,...b}=y;f={...f,...b,...S}}return f};function a(d){e=d(t)}function c(d){const{props:f}=t,g=Z4(t.parent)||{},y=[],x=new Set;let w={},S=1/0;for(let N=0;N<GV;N++){const j=qV[N],O=n[j],I=f[j]!==void 0?f[j]:g[j],V=Dd(I),$=j===d?O.isActive:null;$===!1&&(S=N);let q=I===g[j]&&I!==f[j]&&V;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),O.protectedKeys={...w},!O.isActive&&$===null||!I&&!O.prevProp||Mp(I)||typeof I=="boolean")continue;const D=YV(O.prevProp,I);let R=D||j===d&&O.isActive&&!q&&V||N>S&&V,P=!1;const T=Array.isArray(I)?I:[I];let L=T.reduce(i(j),{});$===!1&&(L={});const{prevResolvedValues:U={}}=O,A={...U,...L},oe=Pe=>{R=!0,x.has(Pe)&&(P=!0,x.delete(Pe)),O.needsAnimating[Pe]=!0;const ee=t.getValue(Pe);ee&&(ee.liveStyle=!1)};for(const Pe in A){const ee=L[Pe],ie=U[Pe];if(w.hasOwnProperty(Pe))continue;let ye=!1;nx(ee)&&nx(ie)?ye=!J4(ee,ie):ye=ee!==ie,ye?ee!=null?oe(Pe):x.add(Pe):ee!==void 0&&x.has(Pe)?oe(Pe):O.protectedKeys[Pe]=!0}O.prevProp=I,O.prevResolvedValues=L,O.isActive&&(w={...w,...L}),r&&t.blockInitialAnimation&&(R=!1),R&&(!(q&&D)||P)&&y.push(...T.map(Pe=>({animation:Pe,options:{type:j}})))}if(x.size){const N={};if(typeof f.initial!="boolean"){const j=Ld(t,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(N.transition=j.transition)}x.forEach(j=>{const O=t.getBaseTarget(j),I=t.getValue(j);I&&(I.liveStyle=!0),N[j]=O??null}),y.push({animation:N})}let b=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(y):Promise.resolve()}function u(d,f){var y;if(n[d].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(x=>{var w;return(w=x.animationState)==null?void 0:w.setActive(d,f)}),n[d].isActive=f;const g=c(d);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:c,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=NE(),r=!0}}}function YV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!J4(e,t):!1}function Zo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NE(){return{animate:Zo(!0),whileInView:Zo(),whileHover:Zo(),whileTap:Zo(),whileDrag:Zo(),whileFocus:Zo(),exit:Zo()}}class Ro{constructor(e){this.isMounted=!1,this.node=e}update(){}}class QV extends Ro{constructor(e){super(e),e.animationState||(e.animationState=XV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let JV=0;class ZV extends Ro{constructor(){super(...arguments),this.id=JV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const eF={animation:{Feature:QV},exit:{Feature:ZV}};function Vd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function hh(t){return{point:{x:t.pageX,y:t.pageY}}}const tF=t=>e=>y1(e)&&t(e,hh(e));function md(t,e,n,r){return Vd(t,e,tF(n),r)}function ej({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function nF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function rF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const tj=1e-4,iF=1-tj,sF=1+tj,nj=.01,aF=0-nj,oF=0+nj;function Xr(t){return t.max-t.min}function lF(t,e,n){return Math.abs(t-e)<=n}function CE(t,e,n,r=.5){t.origin=r,t.originPoint=In(e.min,e.max,t.origin),t.scale=Xr(n)/Xr(e),t.translate=In(n.min,n.max,t.origin)-t.originPoint,(t.scale>=iF&&t.scale<=sF||isNaN(t.scale))&&(t.scale=1),(t.translate>=aF&&t.translate<=oF||isNaN(t.translate))&&(t.translate=0)}function pd(t,e,n,r){CE(t.x,e.x,n.x,r?r.originX:void 0),CE(t.y,e.y,n.y,r?r.originY:void 0)}function jE(t,e,n){t.min=n.min+e.min,t.max=t.min+Xr(e)}function cF(t,e,n){jE(t.x,e.x,n.x),jE(t.y,e.y,n.y)}function AE(t,e,n){t.min=e.min-n.min,t.max=t.min+Xr(e)}function gd(t,e,n){AE(t.x,e.x,n.x),AE(t.y,e.y,n.y)}const IE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rc=()=>({x:IE(),y:IE()}),PE=()=>({min:0,max:0}),Wn=()=>({x:PE(),y:PE()});function Li(t){return[t("x"),t("y")]}function B0(t){return t===void 0||t===1}function sx({scale:t,scaleX:e,scaleY:n}){return!B0(t)||!B0(e)||!B0(n)}function tl(t){return sx(t)||rj(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rj(t){return RE(t.x)||RE(t.y)}function RE(t){return t&&t!=="0%"}function Bm(t,e,n){const r=t-n,i=e*r;return n+i}function ME(t,e,n,r,i){return i!==void 0&&(t=Bm(t,i,r)),Bm(t,n,r)+e}function ax(t,e=0,n=1,r,i){t.min=ME(t.min,e,n,r,i),t.max=ME(t.max,e,n,r,i)}function ij(t,{x:e,y:n}){ax(t.x,e.translate,e.scale,e.originPoint),ax(t.y,n.translate,n.scale,n.originPoint)}const DE=.999999999999,OE=1.0000000000001;function uF(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,c;for(let u=0;u<i;u++){a=n[u],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Dc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,ij(t,c)),r&&tl(a.latestValues)&&Dc(t,a.latestValues))}e.x<OE&&e.x>DE&&(e.x=1),e.y<OE&&e.y>DE&&(e.y=1)}function Mc(t,e){t.min=t.min+e,t.max=t.max+e}function LE(t,e,n,r,i=.5){const a=In(t.min,t.max,i);ax(t,e,n,a,r)}function Dc(t,e){LE(t.x,e.x,e.scaleX,e.scale,e.originX),LE(t.y,e.y,e.scaleY,e.scale,e.originY)}function sj(t,e){return ej(rF(t.getBoundingClientRect(),e))}function dF(t,e,n){const r=sj(t,n),{scroll:i}=e;return i&&(Mc(r.x,i.offset.x),Mc(r.y,i.offset.y)),r}const aj=({current:t})=>t?t.ownerDocument.defaultView:null,VE=(t,e)=>Math.abs(t-e);function hF(t,e){const n=VE(t.x,e.x),r=VE(t.y,e.y);return Math.sqrt(n**2+r**2)}class oj{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=W0(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=hF(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!S)return;const{point:b}=x,{timestamp:N}=wr;this.history.push({...b,timestamp:N});const{onStart:j,onMove:O}=this.handlers;w||(j&&j(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,x)},this.handlePointerMove=(x,w)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=H0(w,this.transformPagePoint),En.update(this.updatePoint,!0)},this.handlePointerUp=(x,w)=>{this.end();const{onEnd:S,onSessionEnd:b,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=W0(x.type==="pointercancel"?this.lastMoveEventInfo:H0(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(x,j),b&&b(x,j)},!y1(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const u=hh(e),d=H0(u,this.transformPagePoint),{point:f}=d,{timestamp:g}=wr;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,W0(d,this.history)),this.removeListeners=ch(md(this.contextWindow,"pointermove",this.handlePointerMove),md(this.contextWindow,"pointerup",this.handlePointerUp),md(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ko(this.updatePoint)}}function H0(t,e){return e?{point:e(t.point)}:t}function FE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function W0({point:t},e){return{point:t,delta:FE(t,lj(e)),offset:FE(t,fF(e)),velocity:mF(e,.1)}}function fF(t){return t[0]}function lj(t){return t[t.length-1]}function mF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=lj(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Vs(e)));)n--;if(!r)return{x:0,y:0};const a=Fs(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function pF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?In(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?In(n,t,r.max):Math.min(t,n)),t}function UE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function gF(t,{top:e,left:n,bottom:r,right:i}){return{x:UE(t.x,n,i),y:UE(t.y,e,r)}}function $E(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function yF(t,e){return{x:$E(t.x,e.x),y:$E(t.y,e.y)}}function xF(t,e){let n=.5;const r=Xr(t),i=Xr(e);return i>r?n=Pd(e.min,e.max-r,t.min):r>i&&(n=Pd(t.min,t.max-i,e.min)),ka(0,1,n)}function vF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ox=.35;function bF(t=ox){return t===!1?t=0:t===!0&&(t=ox),{x:zE(t,"left","right"),y:zE(t,"top","bottom")}}function zE(t,e,n){return{min:BE(t,e),max:BE(t,n)}}function BE(t,e){return typeof t=="number"?t:t[e]||0}const wF=new WeakMap;class _F{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hh(y).point)},c=(y,x)=>{const{drag:w,dragPropagation:S,onDragStart:b}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=O7(w),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Li(j=>{let O=this.getAxisMotionValue(j).get()||0;if(Us.test(O)){const{projection:I}=this.visualElement;if(I&&I.layout){const V=I.layout.layoutBox[j];V&&(O=Xr(V)*(parseFloat(O)/100))}}this.originPoint[j]=O}),b&&En.postRender(()=>b(y,x)),rx(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},u=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:b,onDrag:N}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:j}=x;if(S&&this.currentDirection===null){this.currentDirection=EF(j),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",x.point,j),this.updateAxis("y",x.point,j),this.visualElement.render(),N&&N(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Li(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new oj(e,{onSessionStart:a,onStart:c,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:aj(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&En.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!If(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=pF(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Pc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=gF(r.layoutBox,e):this.constraints=!1,this.elastic=bF(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Li(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=vF(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Pc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=dF(r,i.root,this.visualElement.getTransformPagePoint());let c=yF(i.layout.layoutBox,a);if(n){const u=n(nF(c));this.hasMutatedConstraints=!!u,u&&(c=ej(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Li(g=>{if(!If(g,n,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=i?200:1e6,w=i?40:1e7,S={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,S)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return rx(this.visualElement,e),r.start(N1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Li(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Li(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Li(n=>{const{drag:r}=this.getProps();if(!If(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[n];a.set(e[n]-In(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Pc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Li(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const d=u.get();i[c]=xF({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Li(c=>{if(!If(c,e,null))return;const u=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];u.set(In(d,f,i[c]))})}addListeners(){if(!this.visualElement.current)return;wF.set(this.visualElement,this);const e=this.visualElement.current,n=md(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Pc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),En.read(r);const c=Vd(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Li(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:c=ox,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:c,dragMomentum:u}}}function If(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function EF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kF extends Ro{constructor(e){super(e),this.removeGroupControls=zi,this.removeListeners=zi,this.controls=new _F(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zi}unmount(){this.removeGroupControls(),this.removeListeners()}}const HE=t=>(e,n)=>{t&&En.postRender(()=>t(e,n))};class SF extends Ro{constructor(){super(...arguments),this.removePointerDownListener=zi}onPointerDown(e){this.session=new oj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:HE(e),onStart:HE(n),onMove:r,onEnd:(a,c)=>{delete this.session,i&&En.postRender(()=>i(a,c))}}}mount(){this.removePointerDownListener=md(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const im={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(bt.test(t))t=parseFloat(t);else return t;const n=WE(t,e.target.x),r=WE(t,e.target.y);return`${n}% ${r}%`}},TF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=So.parse(t);if(i.length>5)return r;const a=So.createTransformer(t),c=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;i[0+c]/=u,i[1+c]/=d;const f=In(u,d,.5);return typeof i[2+c]=="number"&&(i[2+c]/=f),typeof i[3+c]=="number"&&(i[3+c]/=f),a(i)}};let qE=!1;class NF extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;dV(CF),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),qE&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),im.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:c}=r;return c&&(c.isPresent=a,qE=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||En.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),g1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cj(t){const[e,n]=O4(),r=k.useContext(Gv);return o.jsx(NF,{...t,layoutGroup:r,switchLayoutGroup:k.useContext($4),isPresent:e,safeToRemove:n})}const CF={borderRadius:{...qu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qu,borderTopRightRadius:qu,borderBottomLeftRadius:qu,borderBottomRightRadius:qu,boxShadow:TF};function jF(t,e,n){const r=Fr(t)?t:Xc(t);return r.start(N1("",r,e,n)),r.animation}const AF=(t,e)=>t.depth-e.depth;class IF{constructor(){this.children=[],this.isDirty=!1}add(e){Yv(this.children,e),this.isDirty=!0}remove(e){Qv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AF),this.isDirty=!1,this.children.forEach(e)}}function PF(t,e){const n=di.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ko(r),t(a-e))};return En.setup(r,!0),()=>ko(r)}const uj=["TopLeft","TopRight","BottomLeft","BottomRight"],RF=uj.length,GE=t=>typeof t=="string"?parseFloat(t):t,KE=t=>typeof t=="number"||bt.test(t);function MF(t,e,n,r,i,a){i?(t.opacity=In(0,n.opacity??1,DF(r)),t.opacityExit=In(e.opacity??1,0,OF(r))):a&&(t.opacity=In(e.opacity??1,n.opacity??1,r));for(let c=0;c<RF;c++){const u=`border${uj[c]}Radius`;let d=XE(e,u),f=XE(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||KE(d)===KE(f)?(t[u]=Math.max(In(GE(d),GE(f),r),0),(Us.test(f)||Us.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=In(e.rotate||0,n.rotate||0,r))}function XE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const DF=dj(0,.5,r4),OF=dj(.5,.95,zi);function dj(t,e,n){return r=>r<t?0:r>e?1:n(Pd(t,e,r))}function YE(t,e){t.min=e.min,t.max=e.max}function Oi(t,e){YE(t.x,e.x),YE(t.y,e.y)}function QE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function JE(t,e,n,r,i){return t-=e,t=Bm(t,1/n,r),i!==void 0&&(t=Bm(t,1/i,r)),t}function LF(t,e=0,n=1,r=.5,i,a=t,c=t){if(Us.test(e)&&(e=parseFloat(e),e=In(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=In(a.min,a.max,r);t===a&&(u-=e),t.min=JE(t.min,e,n,u,i),t.max=JE(t.max,e,n,u,i)}function ZE(t,e,[n,r,i],a,c){LF(t,e[n],e[r],e[i],e.scale,a,c)}const VF=["x","scaleX","originX"],FF=["y","scaleY","originY"];function ek(t,e,n,r){ZE(t.x,e,VF,n?n.x:void 0,r?r.x:void 0),ZE(t.y,e,FF,n?n.y:void 0,r?r.y:void 0)}function tk(t){return t.translate===0&&t.scale===1}function hj(t){return tk(t.x)&&tk(t.y)}function nk(t,e){return t.min===e.min&&t.max===e.max}function UF(t,e){return nk(t.x,e.x)&&nk(t.y,e.y)}function rk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function fj(t,e){return rk(t.x,e.x)&&rk(t.y,e.y)}function ik(t){return Xr(t.x)/Xr(t.y)}function sk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class $F{constructor(){this.members=[]}add(e){Yv(this.members,e),e.scheduleRender()}remove(e){if(Qv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zF(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((i||a||c)&&(r=`translate3d(${i}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:x,skewX:w,skewY:S}=n;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),w&&(r+=`skewX(${w}deg) `),S&&(r+=`skewY(${S}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const q0=["","X","Y","Z"],BF=1e3;let HF=0;function G0(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function mj(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Y4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",En,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&mj(r)}function pj({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},u=e==null?void 0:e()){this.id=HF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(GF),this.nodes.forEach(QF),this.nodes.forEach(JF),this.nodes.forEach(KF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new IF)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new e1),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const d=this.eventHandlers.get(c);d&&d.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=D4(c)&&!z7(c),this.instance=c;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;En.read(()=>{y=window.innerWidth}),t(c,()=>{const w=window.innerWidth;w!==y&&(y=w,this.root.updateBlockedByResize=!0,g&&g(),g=PF(x,250),im.hasAnimatedSinceResize&&(im.hasAnimatedSinceResize=!1,this.nodes.forEach(lk)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||rU,{onLayoutAnimationStart:b,onLayoutAnimationComplete:N}=f.getProps(),j=!this.targetLayout||!fj(this.targetLayout,w),O=!y&&x;if(this.options.layoutRoot||this.resumeFrom||O||y&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...m1(S,"layout"),onPlay:b,onComplete:N};(f.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(g,O)}else y||lk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ZF),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ak);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ok);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(YF),this.nodes.forEach(WF),this.nodes.forEach(qF)):this.nodes.forEach(ok),this.clearAllSnapshots();const u=di.now();wr.delta=ka(0,1e3/60,u-wr.timestamp),wr.timestamp=u,wr.isProcessing=!0,L0.update.process(wr),L0.preRender.process(wr),L0.render.process(wr),wr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,g1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XF),this.sharedNodes.forEach(eU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,En.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){En.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xr(this.snapshot.measuredBox.x)&&!Xr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!hj(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||tl(this.latestValues)||g)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return c&&(d=this.removeTransform(d)),iU(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:c}=this.options;if(!c)return Wn();const u=c.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(sU))){const{scroll:g}=this.root;g&&(Mc(u.x,g.offset.x),Mc(u.y,g.offset.y))}return u}removeElementScroll(c){var d;const u=Wn();if(Oi(u,c),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Oi(u,c),Mc(u.x,y.offset.x),Mc(u.y,y.offset.y))}return u}applyTransform(c,u=!1){const d=Wn();Oi(d,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Dc(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),tl(g.latestValues)&&Dc(d,g.latestValues)}return tl(this.latestValues)&&Dc(d,this.latestValues),d}removeTransform(c){const u=Wn();Oi(u,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!tl(f.latestValues))continue;sx(f.latestValues)&&f.updateSnapshot();const g=Wn(),y=f.measurePageBox();Oi(g,y),ek(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return tl(this.latestValues)&&ek(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=wr.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wn(),this.relativeTargetOrigin=Wn(),gd(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Wn(),this.targetWithTransforms=Wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Oi(this.target,this.layout.layoutBox),ij(this.target,this.targetDelta)):Oi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wn(),this.relativeTargetOrigin=Wn(),gd(this.relativeTargetOrigin,this.target,w.target),Oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||sx(this.parent.latestValues)||rj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===wr.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Oi(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;uF(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Wn());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(QE(this.prevProjectionDelta.x,this.projectionDelta.x),QE(this.prevProjectionDelta.y,this.projectionDelta.y)),pd(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!sk(this.projectionDelta.x,this.prevProjectionDelta.x)||!sk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rc(),this.projectionDelta=Rc(),this.projectionDeltaWithTransform=Rc()}setAnimationOrigin(c,u=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},y=Rc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=Wn(),w=d?d.source:void 0,S=this.layout?this.layout.source:void 0,b=w!==S,N=this.getStack(),j=!N||N.members.length<=1,O=!!(b&&!j&&this.options.crossfade===!0&&!this.path.some(nU));this.animationProgress=0;let I;this.mixTargetDelta=V=>{const $=V/1e3;ck(y.x,c.x,$),ck(y.y,c.y,$),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tU(this.relativeTarget,this.relativeTargetOrigin,x,$),I&&UF(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Wn()),Oi(I,this.relativeTarget)),b&&(this.animationValues=g,MF(g,f,this.latestValues,$,O,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=En.update(()=>{im.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Xc(0)),this.currentAnimation=jF(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:g}=c;if(!(!u||!d||!f)){if(this!==c&&this.layout&&f&&gj(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Wn();const y=Xr(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=Xr(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}Oi(u,d),Dc(u,g),pd(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new $F),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&G0("z",c,f,this.animationValues);for(let g=0;g<q0.length;g++)G0(`rotate${q0[g]}`,c,f,this.animationValues),G0(`skew${q0[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=rm(u==null?void 0:u.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=rm(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!tl(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=zF(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:w}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${w.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const S in Od){if(g[S]===void 0)continue;const{correct:b,applyTo:N,isCSSVariable:j}=Od[S],O=y==="none"?g[S]:b(g[S],f);if(N){const I=N.length;for(let V=0;V<I;V++)c[N[V]]=O}else j?this.options.visualElement.renderState.vars[S]=O:c[S]=O}this.options.layoutId&&(c.pointerEvents=f===this?rm(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(ak),this.root.sharedNodes.clear()}}}function WF(t){t.updateLayout()}function qF(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,c=e.source!==t.layout.source;a==="size"?Li(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],w=Xr(x);x.min=r[y].min,x.max=x.min+w}):gj(a,e.layoutBox,r)&&Li(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],w=Xr(r[y]);x.max=x.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+w)});const u=Rc();pd(u,r,e.layoutBox);const d=Rc();c?pd(d,t.applyTransform(i,!0),e.measuredBox):pd(d,r,e.layoutBox);const f=!hj(u);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:w}=y;if(x&&w){const S=Wn();gd(S,e.layoutBox,x.layoutBox);const b=Wn();gd(b,r,w.layoutBox),fj(S,b)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=S,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function GF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function KF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XF(t){t.clearSnapshot()}function ak(t){t.clearMeasurements()}function ok(t){t.isLayoutDirty=!1}function YF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function QF(t){t.resolveTargetDelta()}function JF(t){t.calcProjection()}function ZF(t){t.resetSkewAndRotation()}function eU(t){t.removeLeadSnapshot()}function ck(t,e,n){t.translate=In(e.translate,0,n),t.scale=In(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uk(t,e,n,r){t.min=In(e.min,n.min,r),t.max=In(e.max,n.max,r)}function tU(t,e,n,r){uk(t.x,e.x,n.x,r),uk(t.y,e.y,n.y,r)}function nU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rU={duration:.45,ease:[.4,0,.1,1]},dk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),hk=dk("applewebkit/")&&!dk("chrome/")?Math.round:zi;function fk(t){t.min=hk(t.min),t.max=hk(t.max)}function iU(t){fk(t.x),fk(t.y)}function gj(t,e,n){return t==="position"||t==="preserve-aspect"&&!lF(ik(e),ik(n),.2)}function sU(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const aU=pj({attachResizeListener:(t,e)=>Vd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),K0={current:void 0},yj=pj({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!K0.current){const t=new aU({});t.mount(window),t.setOptions({layoutScroll:!0}),K0.current=t}return K0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oU={pan:{Feature:SF},drag:{Feature:kF,ProjectionNode:yj,MeasureLayout:cj}};function mk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&En.postRender(()=>a(e,hh(e)))}class lU extends Ro{mount(){const{current:e}=this.node;e&&(this.unmount=L7(e,(n,r)=>(mk(this.node,r,"Start"),i=>mk(this.node,i,"End"))))}unmount(){}}class cU extends Ro{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ch(Vd(this.node.current,"focus",()=>this.onFocus()),Vd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function pk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&En.postRender(()=>a(e,hh(e)))}class uU extends Ro{mount(){const{current:e}=this.node;e&&(this.unmount=$7(e,(n,r)=>(pk(this.node,r,"Start"),(i,{success:a})=>pk(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const lx=new WeakMap,X0=new WeakMap,dU=t=>{const e=lx.get(t.target);e&&e(t)},hU=t=>{t.forEach(dU)};function fU({root:t,...e}){const n=t||document;X0.has(n)||X0.set(n,{});const r=X0.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(hU,{root:t,...e})),r[i]}function mU(t,e,n){const r=fU(e);return lx.set(t,n),r.observe(t),()=>{lx.delete(t),r.unobserve(t)}}const pU={some:0,all:1};class gU extends Ro{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pU[i]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=f?g:y;x&&x(d)};return mU(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(yU(e,n))&&this.startObserver()}unmount(){}}function yU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xU={inView:{Feature:gU},tap:{Feature:uU},focus:{Feature:cU},hover:{Feature:lU}},vU={layout:{ProjectionNode:yj,MeasureLayout:cj}},cx={current:null},xj={current:!1};function bU(){if(xj.current=!0,!!Xv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>cx.current=t.matches;t.addEventListener("change",e),e()}else cx.current=!1}const wU=new WeakMap;function _U(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Fr(i))t.addValue(r,i);else if(Fr(a))t.addValue(r,Xc(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,Xc(c!==void 0?c:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const gk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class EU{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=h1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=di.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,En.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=Dp(n),this.isVariantNode=F4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in y){const w=y[x];d[x]!==void 0&&Fr(w)&&w.set(d[x],!1)}}mount(e){this.current=e,wU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xj.current||bU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:cx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ko(this.notifyUpdate),ko(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=hu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&En.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Yc){const n=Yc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<gk.length;r++){const i=gk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,c=e[a];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=_U(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Xc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(GC(r)||XC(r))?r=parseFloat(r):!H7(r)&&So.test(n)&&(r=A4(e,n)),this.setBaseTarget(e,Fr(r)?r.get():r)),Fr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=S1(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);c&&(r=c[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Fr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new e1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class vj extends EU{constructor(){super(...arguments),this.KeyframeResolver=P7}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function bj(t,{style:e,vars:n},r,i){const a=t.style;let c;for(c in e)a[c]=e[c];i==null||i.applyProjectionStyles(a,r);for(c in n)a.setProperty(c,n[c])}function kU(t){return window.getComputedStyle(t)}class SU extends vj{constructor(){super(...arguments),this.type="html",this.renderInstance=bj}readValueFromInstance(e,n){var r;if(hu.has(n))return(r=this.projection)!=null&&r.isProjecting?Yy(n):QL(e,n);{const i=kU(e),a=(r1(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sj(e,n)}build(e,n,r){_1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return T1(e,n,r)}}const wj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TU(t,e,n,r){bj(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(wj.has(i)?i:w1(i),e.attrs[i])}class NU extends vj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hu.has(n)){const r=j4(n);return r&&r.default||0}return n=wj.has(n)?n:w1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return X4(e,n,r)}build(e,n,r){W4(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){TU(e,n,r,i)}mount(e){this.isSVGTag=G4(e.tagName),super.mount(e)}}const CU=(t,e)=>k1(t)?new NU(e):new SU(e,{allowProjection:t!==k.Fragment}),jU=CV({...eF,...xU,...oU,...vU},CU),de=Z7(jU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),yk=t=>{const e=IU(t);return e.charAt(0).toUpperCase()+e.slice(1)},_j=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),PU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...u},d)=>k.createElement("svg",{ref:d,...RU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_j("lucide",i),...!a&&!PU(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>k.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=(t,e)=>{const n=k.forwardRef(({className:r,...i},a)=>k.createElement(MU,{ref:a,iconNode:e,className:_j(`lucide-${AU(yk(t))}`,`lucide-${t}`,r),...i}));return n.displayName=yk(t),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xk=Pt("arrow-right",DU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],LU=Pt("bell",OU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vk=Pt("calendar",VU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cc=Pt("check",FU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$U=Pt("chevron-down",UU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],BU=Pt("chevron-left",zU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ux=Pt("chevron-right",HU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hm=Pt("circle-check-big",WU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],GU=Pt("circle-dollar-sign",qU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Fd=Pt("circle-x",KU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ej=Pt("clock",XU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],C1=Pt("credit-card",YU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],JU=Pt("download",QU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bk=Pt("eye",ZU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],t$=Pt("gift",e$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],r$=Pt("globe",n$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],s$=Pt("hourglass",i$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],yd=Pt("house",a$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l$=Pt("locate-fixed",o$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],u$=Pt("lock",c$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],h$=Pt("log-out",d$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],m$=Pt("map-pin",f$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Pf=Pt("map",p$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],y$=Pt("menu",g$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],dx=Pt("package",x$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],kj=Pt("pencil",v$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],w$=Pt("refresh-cw",b$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E$=Pt("settings",_$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wm=Pt("shield",k$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],T$=Pt("shopping-bag",S$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],C$=Pt("shopping-cart",N$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],A$=Pt("sparkles",j$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],P$=Pt("star",I$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Y0=Pt("store",R$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Sj=Pt("trash-2",M$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wk=Pt("triangle-alert",D$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],L$=Pt("trophy",O$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],F$=Pt("user",V$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$$=Pt("x",U$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Tj=Pt("zap",z$),_k=["Distrito Nacional","Santo Domingo","Santiago","La Vega","Puerto Plata","San Cristóbal","Duarte","La Romana","San Pedro de Macorís","Espaillat","Hermanas Mirabal","Monte Plata","San Juan","Azua","Peravia","Monseñor Nouel","Barahona","Sánchez Ramírez","Valverde","María Trinidad Sánchez","Monte Cristi","Samaná","El Seibo","Hato Mayor","Independencia","Pedernales","Elías Piña","Dajabón","Baoruco"],da={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, República Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"};function B$({abierto:t,onClose:e,onPick:n,valorActual:r}){const[i,a]=k.useState(""),c=k.useMemo(()=>{if(!i)return _k;const u=i.toLowerCase();return _k.filter(d=>d.toLowerCase().includes(u))},[i]);return k.useEffect(()=>{t||a("")},[t]),typeof document>"u"?null:Ix.createPortal(o.jsx(cn,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(de.div,{className:"prov-picker-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),o.jsx(de.div,{className:"prov-picker-modal",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},onClick:u=>u.stopPropagation(),children:o.jsxs("div",{className:"prov-dark-card",children:[o.jsxs("div",{className:"prov-dark-header",children:[o.jsx("h3",{className:"prov-dark-title",children:"Seleccionar Provincia"}),o.jsx("button",{onClick:e,className:"prov-close-white",children:"✕"})]}),o.jsx("div",{className:"prov-search-dark",children:o.jsx("input",{type:"text",placeholder:"Buscar provincia...",value:i,onChange:u=>a(u.target.value),className:"prov-input-dark",autoFocus:!0})}),o.jsx("div",{className:"prov-list-dark",children:c.length>0?c.map(u=>o.jsx("div",{className:`prov-item-dark ${r===u?"active":""}`,onClick:()=>{n(u),e()},children:u},u)):o.jsx("div",{className:"prov-empty-dark",children:"No se encontraron provincias"})})]})})]})}),document.body)}function Nj({abierto:t,onClose:e,actualizarUsuarioInfo:n,actualizarLista:r,direccionEditar:i,usuarioId:a}){const{uid:c,usuario:u}=Jr(),[d,f]=k.useState("domicilio"),[g,y]=k.useState([]),[x,w]=k.useState(!1),[S,b]=k.useState(null),[N,j]=k.useState(""),[O,I]=k.useState(""),[V,$]=k.useState(""),[q,D]=k.useState(""),[R,P]=k.useState(""),[T,L]=k.useState(""),[U,A]=k.useState(""),[oe,ae]=k.useState(!1),[Ce,Pe]=k.useState(!1),[ee,ie]=k.useState(!1),[ye,B]=k.useState(null),[Z,be]=k.useState(""),[Ve,We]=k.useState(!1),et=te=>te||"",[ht,Xe]=k.useState(""),[nt,St]=k.useState(null),[xt,Tt]=k.useState(!1),[Ze,Rt]=k.useState(!1),At=async()=>{const te=a||c||(u==null?void 0:u.uid);if(!te){y([]);return}w(!0);try{const ke=fn(Ht(Ue,"direcciones"),Sr("usuarioId","==",te)),vt=(await os(ke)).docs.map(jt=>({id:jt.id,...jt.data()}));y(vt)}catch(ke){console.error("fetchDirecciones error:",ke),y([])}finally{w(!1)}};k.useEffect(()=>{const te=a||c||(u==null?void 0:u.uid);t&&te&&At()},[t,c,u,a]),k.useEffect(()=>{t&&(At(),i?(b(i.id),f(i.metodoEntrega||"domicilio"),j(i.provincia||""),I(i.ciudad||""),$(i.sector||""),D(i.numeroCalle||""),P(i.numeroCasa||""),L(i.telefono||""),A(i.referencia||""),Xe(i.ubicacion||""),Rt(i.metodoEntrega==="tienda")):(b(null),f("domicilio"),j(""),I(""),$(""),D(""),P(""),L(""),A(""),Xe(""),St(null),Rt(!1)))},[t,i]),k.useEffect(()=>{if(!t)return;const te=ke=>{ke.key==="Escape"&&e&&e()};return document.body.style.overflow="hidden",document.addEventListener("keydown",te),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",te)}},[t,e]);const pn=te=>{if(te==="tienda"){f("tienda"),j(da.provincia),I(da.ciudad),D(da.numeroCalle),$(""),P(""),A(""),b(null),Xe(""),St(null),Rt(!0);return}if(te==="domicilio"){f("domicilio"),Ze&&(j(""),I(""),S||(D(""),$(""),P(""),A("")),Rt(!1));return}f(te)},J=()=>[q,R?`Casa ${R}`:"",V,O,N,U?`Ref: ${U}`:""].filter(Boolean).join(", ").trim(),He=async()=>{const te=c||(u==null?void 0:u.uid);if(console.log("Auth check:",{uid:c,usuario:u==null?void 0:u.uid,currentUid:te}),!te){alert("Error de autenticación. Recarga la página e intenta de nuevo.");return}ae(!0);try{if(d==="tienda"){if(!T||T.trim()===""){be("El número de teléfono es obligatorio para recoger en tienda"),ae(!1);return}typeof n=="function"&&await n({direccion:et(da.direccionCompleta),metodoEntrega:"tienda",telefono:T}),e&&e(),typeof r=="function"&&r(),ae(!1);return}if(!T||T.trim()===""){be("El número de teléfono es obligatorio"),ae(!1);return}const ke=!!nt;if(!ke&&!J()){alert("Completa provincia, ciudad y calle/número."),ae(!1);return}const Se=ke?`${J()?J()+", ":""}Ubicación: ${ht} (${nt==null?void 0:nt.lat}, ${nt==null?void 0:nt.lon})`:J(),vt={metodoEntrega:"domicilio",provincia:N||null,ciudad:O||null,numeroCalle:q||null,numeroCasa:R||null,sector:V||null,referencia:U||null,telefono:T||null,direccionCompleta:Se,ubicacion:ht||null,coords:nt||null,usuarioId:te,updatedAt:new Date};if(S){const ct=pt(Ue,"direcciones",S);await bi(ct,{...vt})}else await jp(Ht(Ue,"direcciones"),{...vt,createdAt:new Date});typeof n=="function"&&await n({direccion:et(Se),metodoEntrega:"domicilio"}),Pe(!0);const jt={direccion:et(Se),metodoEntrega:"domicilio",telefono:T,updatedAt:new Date};try{await er(pt(Ue,"users",te),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir users/{uid}:",ct)}try{await er(pt(Ue,"usuarios",te),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir usuarios/{uid}:",ct)}typeof n=="function"&&await n({telefono:T}),await At(),typeof r=="function"&&r(),b(null),e&&e(),window.location.reload()}catch(ke){console.error("handleGuardarDireccion error:",ke),alert(`Error guardando dirección: ${(ke==null?void 0:ke.message)||ke}`)}finally{ae(!1)}},De=async te=>{try{const ke=typeof te=="string"?te:(te==null?void 0:te.direccionCompleta)||"",Se=te&&te.metodoEntrega?te.metodoEntrega:"domicilio",vt=c||(u==null?void 0:u.uid);Pe(!0),typeof n=="function"&&await n({direccion:ke,metodoEntrega:Se,telefono:T});const jt={direccion:ke,metodoEntrega:Se,telefono:T,updatedAt:new Date};try{await er(pt(Ue,"users",vt),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir users/{uid}:",ct)}try{await er(pt(Ue,"usuarios",vt),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir usuarios/{uid}:",ct)}try{let ct=await Vr(pt(Ue,"users",vt));if(ct.exists()||(ct=await Vr(pt(Ue,"usuarios",vt))),ct&&ct.exists()){const Ot=ct.data()||{};typeof n=="function"&&await n({direccion:Ot.direccion||ke,metodoEntrega:Ot.metodoEntrega||Se})}}catch(ct){console.warn("No se pudo releer documento de usuario:",ct)}await At(),typeof r=="function"&&r(),e&&e(),window.location.reload()}catch(ke){console.error("handleSeleccionarDireccion error:",ke),Pe(!1),alert(`Error seleccionando dirección: ${(ke==null?void 0:ke.message)||ke}`)}},st=async te=>{try{await Cp(pt(Ue,"direcciones",te)),await At(),typeof r=="function"&&r(),alert("Dirección eliminada correctamente.")}catch(ke){console.error("eliminarDireccion:",ke),alert(`Error eliminando dirección: ${(ke==null?void 0:ke.message)||ke}`)}},wt=te=>{B(te),ie(!0)},Qe=()=>{ie(!1),B(null)},dt=()=>{ye&&(st(ye),ie(!1),B(null))},W=te=>{!te||te.metodoEntrega==="tienda"||(b(te.id),f("domicilio"),j(te.provincia||""),I(te.ciudad||""),$(te.sector||""),D(te.numeroCalle||""),P(te.numeroCasa||""),L(te.telefono||""),A(te.referencia||""),Xe(te.ubicacion||""),St(te.coords||null),Rt(!1))},X=()=>{if(!navigator.geolocation){alert("Geolocalización no soportada en este navegador.");return}Tt(!0),navigator.geolocation.getCurrentPosition(te=>{const ke=te.coords.latitude.toFixed(6),Se=te.coords.longitude.toFixed(6),vt=`https://www.google.com/maps?q=${ke},${Se}`;Xe(vt),St({lat:ke,lon:Se}),D(`${ke}, ${Se}`),Tt(!1)},te=>{console.error("Error geolocalización:",te);let ke="No se pudo obtener la ubicación.";switch(te.code){case te.PERMISSION_DENIED:ke="Permisos denegados. Haz clic en el candado 🔒 junto a la URL y permite la ubicación.";break;case te.POSITION_UNAVAILABLE:ke="Ubicación no disponible. Asegúrate de estar conectado a internet y tener servicios de ubicación activados.";break;case te.TIMEOUT:ke="Tiempo agotado. Intenta de nuevo.";break;default:ke="Error desconocido. Verifica permisos del navegador."}alert(ke),Tt(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},me=()=>{Xe(""),St(null),q&&/^\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?\s*$/.test(q)&&D("")};if(!t)return null;const je=g.filter(te=>te.metodoEntrega!=="tienda");return Ix.createPortal(o.jsxs(o.Fragment,{children:[o.jsx(de.div,{className:"entrega-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),o.jsx(de.div,{className:"entrega-slider",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:200},role:"dialog","aria-modal":"true",onClick:te=>te.stopPropagation(),children:o.jsxs("div",{className:"entrega-slider-content","aria-labelledby":"entrega-title",children:[o.jsx("div",{className:"entrega-drag-handle"}),o.jsxs("div",{className:"entrega-header",children:[o.jsxs("div",{className:"entrega-header-content",children:[o.jsx("div",{className:"entrega-icon-wrapper",children:o.jsx("div",{className:"entrega-icon",children:"🚚"})}),o.jsxs("div",{className:"entrega-title-section",children:[o.jsx("h3",{id:"entrega-title",className:"entrega-title",children:"Método de entrega"}),o.jsx("p",{className:"entrega-subtitle",children:"Elige cómo quieres recibir tu pedido"})]})]}),o.jsx("button",{onClick:e,className:"entrega-close-btn","aria-label":"Cerrar",children:o.jsx(Fd,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"entrega-methods",children:[o.jsxs(de.button,{type:"button",onClick:()=>pn("domicilio"),className:`method-card ${d==="domicilio"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":d==="domicilio",children:[o.jsx("div",{className:"method-icon domicilio-icon",children:o.jsx(yd,{className:"w-6 h-6"})}),o.jsxs("div",{className:"method-info",children:[o.jsx("h4",{className:"method-title",children:"A domicilio"}),o.jsx("p",{className:"method-desc",children:"Entrega en tu dirección"})]}),d==="domicilio"&&o.jsx(de.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:o.jsx(Cc,{className:"w-5 h-5"})})]}),o.jsxs(de.button,{type:"button",onClick:()=>pn("tienda"),className:`method-card ${d==="tienda"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":d==="tienda",children:[o.jsx("div",{className:"method-icon tienda-icon",children:o.jsx(Y0,{className:"w-6 h-6"})}),o.jsxs("div",{className:"method-info",children:[o.jsx("h4",{className:"method-title",children:"Recoger en tienda"}),o.jsx("p",{className:"method-desc",children:"Playcenter Universal"})]}),d==="tienda"&&o.jsx(de.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:o.jsx(Cc,{className:"w-5 h-5"})})]})]}),d==="domicilio"&&o.jsxs(de.button,{type:"button",onClick:X,className:`location-btn ${xt?"loading":""}`,disabled:xt,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[o.jsx(l$,{className:`w-5 h-5 ${xt?"animate-pulse":""}`}),o.jsx("span",{children:xt?"Obteniendo ubicación...":"Usar mi ubicación actual"})]}),d==="tienda"&&o.jsx(de.div,{className:"tienda-phone-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Teléfono de contacto *"}),o.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:T,onChange:te=>{L(te.target.value),Z&&be("")},className:"form-input",required:!0}),Z&&o.jsx("div",{className:"phone-error-message",children:o.jsxs("span",{children:["⚠️ ",Z]})}),o.jsx("p",{className:"form-note",children:"📞 Te contactaremos cuando tu pedido esté listo para recoger"})]})}),o.jsxs("div",{className:"entrega-form",children:[o.jsx(cn,{children:nt&&o.jsxs(de.div,{className:"coords-display",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[o.jsxs("div",{className:"coords-header",children:[o.jsx(Pf,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"coords-title",children:"Ubicación detectada"}),o.jsx("button",{onClick:me,className:"coords-remove","aria-label":"Quitar ubicación",children:o.jsx(Fd,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"coords-info",children:[o.jsxs("div",{className:"coord-item",children:[o.jsx("span",{className:"coord-label",children:"Lat:"}),o.jsx("span",{className:"coord-value",children:nt.lat})]}),o.jsxs("div",{className:"coord-item",children:[o.jsx("span",{className:"coord-label",children:"Lng:"}),o.jsx("span",{className:"coord-value",children:nt.lon})]})]})]})}),o.jsx(cn,{mode:"wait",children:d==="domicilio"?o.jsxs(de.div,{className:"address-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[o.jsxs("div",{className:"form-section",children:[o.jsx("label",{className:"form-label",children:"Provincia *"}),o.jsxs("button",{type:"button",onClick:()=>We(!0),className:"province-selector","aria-haspopup":"dialog","aria-expanded":Ve,children:[o.jsx("span",{className:`province-text ${N?"":"placeholder"}`,children:N||"Selecciona tu provincia"}),o.jsx($U,{className:"province-chevron"})]})]}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Ciudad *"}),o.jsx("input",{placeholder:"Ej: Santiago",value:O,onChange:te=>I(te.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Sector"}),o.jsx("input",{placeholder:"Ej: Los Jardines",value:V,onChange:te=>$(te.target.value),className:"form-input"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Calle y número *"}),o.jsx("input",{placeholder:"Ej: Av. Juan Pablo Duarte #123",value:q,onChange:te=>D(te.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Número de casa"}),o.jsx("input",{placeholder:"Ej: 45-B",value:R,onChange:te=>P(te.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Teléfono *"}),o.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:T,onChange:te=>{L(te.target.value),Z&&be("")},className:"form-input",required:!0}),Z&&o.jsx("div",{className:"phone-error-message",children:o.jsxs("span",{children:["⚠️ ",Z]})})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Referencia"}),o.jsx("input",{placeholder:"Ej: Casa azul",value:U,onChange:te=>A(te.target.value),className:"form-input"})]}),!nt&&o.jsxs("div",{className:"form-note",children:["💡 ",o.jsx("strong",{children:"Tip:"}),' Usa "Mi ubicación actual" para completar automáticamente las coordenadas']})]},"domicilio-form"):o.jsxs(de.div,{className:"store-info",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[o.jsxs("div",{className:"store-header",children:[o.jsx(Y0,{className:"w-6 h-6 text-orange-500"}),o.jsx("h4",{className:"store-title",children:"Playcenter Universal"})]}),o.jsx("p",{className:"store-address",children:da.direccionCompleta}),o.jsxs("a",{href:da.ubicacion,target:"_blank",rel:"noreferrer",className:"store-map-link",children:[o.jsx(Pf,{className:"w-4 h-4"}),"Ver en Google Maps"]})]},"tienda-info")}),o.jsx(de.button,{onClick:He,disabled:oe,className:`save-btn ${oe?"loading":""}`,whileHover:{scale:oe?1:1.02},whileTap:{scale:oe?1:.98},children:oe?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("span",{children:"Guardando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Cc,{className:"w-5 h-5"}),o.jsx("span",{children:d==="tienda"?"Seleccionar Playcenter":S?"Actualizar dirección":"Guardar dirección"})]})})]}),o.jsxs("div",{className:"saved-addresses",children:[o.jsx("h4",{className:"saved-title",children:"Direcciones guardadas"}),x?o.jsxs("div",{className:"loading-state",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("span",{children:"Cargando direcciones..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs(de.div,{className:"address-card store-card",whileHover:{scale:1.01},whileTap:{scale:.99},children:[o.jsxs("div",{className:"address-info",children:[o.jsxs("div",{className:"address-header",children:[o.jsx(Y0,{className:"w-5 h-5 text-orange-500"}),o.jsx("span",{className:"address-type",children:"Recoger en tienda"})]}),o.jsx("p",{className:"address-name",children:"Playcenter Universal"}),o.jsx("p",{className:"address-details",children:da.direccionCompleta}),o.jsxs("a",{href:da.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[o.jsx(Pf,{className:"w-4 h-4"}),"Ver ubicación"]})]}),o.jsxs("button",{onClick:()=>De(da),className:"address-select-btn store-select",children:[o.jsx(Cc,{className:"w-4 h-4"}),"Seleccionar"]})]}),o.jsx(cn,{children:je.length===0?o.jsxs(de.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[o.jsx(yd,{className:"w-12 h-12 text-gray-300"}),o.jsx("p",{className:"empty-text",children:"No tienes direcciones guardadas"}),o.jsx("p",{className:"empty-subtext",children:"Agrega una dirección para entregas futuras"})]}):o.jsx("div",{className:"addresses-list",children:je.map((te,ke)=>o.jsxs(de.div,{className:"address-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:ke*.1},whileHover:{scale:1.01},children:[o.jsxs("div",{className:"address-info",children:[o.jsxs("div",{className:"address-header",children:[o.jsx(yd,{className:"w-5 h-5 text-blue-500"}),o.jsx("span",{className:"address-type",children:"Domicilio"})]}),o.jsx("p",{className:"address-details",children:te.direccionCompleta}),te.ubicacion&&o.jsxs("a",{href:te.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[o.jsx(Pf,{className:"w-4 h-4"}),"Ver ubicación"]})]}),o.jsxs("div",{className:"address-actions",children:[o.jsx("button",{onClick:()=>W(te),className:"address-action-btn edit-btn","aria-label":"Editar dirección",children:o.jsx(kj,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>De(te),className:"address-action-btn select-btn","aria-label":"Seleccionar dirección",children:o.jsx(Cc,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>wt(te.id),className:"address-action-btn delete-btn","aria-label":"Eliminar dirección",children:o.jsx(Sj,{className:"w-4 h-4"})})]})]},te.id))})})]})]})]})}),o.jsx(cn,{children:Ce&&o.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:o.jsxs("div",{className:"loaderInner",children:[o.jsx("div",{className:"loader",children:o.jsxs("div",{className:"truckWrapper",children:[o.jsx("div",{className:"truckBody",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 198 93",className:"trucksvg",children:[o.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#F83D3D",d:"M135 22.5H177.264C178.295 22.5 179.22 23.133 179.594 24.0939L192.33 56.8443C192.442 57.1332 192.5 57.4404 192.5 57.7504V89C192.5 90.3807 191.381 91.5 190 91.5H135C133.619 91.5 132.5 90.3807 132.5 89V25C132.5 23.6193 133.619 22.5 135 22.5Z"}),o.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#7D7C7C",d:"M146 33.5H181.741C182.779 33.5 183.709 34.1415 184.078 35.112L190.538 52.112C191.16 53.748 189.951 55.5 188.201 55.5H146C144.619 55.5 143.5 54.3807 143.5 53V36C143.5 34.6193 144.619 33.5 146 33.5Z"}),o.jsx("path",{strokeWidth:"2",stroke:"#282828",fill:"#282828",d:"M150 65C150 65.39 149.763 65.8656 149.127 66.2893C148.499 66.7083 147.573 67 146.5 67C145.427 67 144.501 66.7083 143.873 66.2893C143.237 65.8656 143 65.39 143 65C143 64.61 143.237 64.1344 143.873 63.7107C144.501 63.2917 145.427 63 146.5 63C147.573 63 148.499 63.2917 149.127 63.7107C149.763 64.1344 150 64.61 150 65Z"}),o.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#FFFCAB",rx:"1",height:"7",width:"5",y:"63",x:"187"}),o.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#282828",rx:"1",height:"11",width:"4",y:"81",x:"193"}),o.jsx("rect",{strokeWidth:"3",stroke:"#282828",fill:"#DFDFDF",rx:"2.5",height:"90",width:"121",y:"1.5",x:"6.5"}),o.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#DFDFDF",rx:"2",height:"4",width:"6",y:"84",x:"1"})]})}),o.jsxs("div",{className:"truckTires",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[o.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),o.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]}),o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[o.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),o.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]})]}),o.jsx("div",{className:"road"}),o.jsx("svg",{xmlSpace:"preserve",viewBox:"0 0 453.459 453.459",xmlns:"http://www.w3.org/2000/svg",className:"lampPost",fill:"#000000",children:o.jsx("path",{d:`M252.882,0c-37.781,0-68.686,29.953-70.245,67.358h-6.917v8.954c-26.109,2.163-45.463,10.011-45.463,19.366h9.993
c-1.65,5.146-2.507,10.54-2.507,16.017c0,28.956,23.558,52.514,52.514,52.514c28.956,0,52.514-23.558,52.514-52.514
c0-5.478-0.856-10.872-2.506-16.017h9.992c0-9.354-19.352-17.204-45.463-19.366v-8.954h-6.149C200.189,38.779,223.924,16,252.882,16
c29.952,0,54.32,24.368,54.32,54.32c0,28.774-11.078,37.009-25.105,47.437c-17.444,12.968-37.216,27.667-37.216,78.884v113.914
h-0.797c-5.068,0-9.174,4.108-9.174,9.177c0,2.844,1.293,5.383,3.321,7.066c-3.432,27.933-26.851,95.744-8.226,115.459v11.202h45.75
v-11.202c18.625-19.715-4.794-87.527-8.227-115.459c2.029-1.683,3.322-4.223,3.322-7.066c0-5.068-4.107-9.177-9.176-9.177h-0.795
V196.641c0-43.174,14.942-54.283,30.762-66.043c14.793-10.997,31.559-23.461,31.559-60.277C323.202,31.545,291.656,0,252.882,0z
M232.77,111.694c0,23.442-19.071,42.514-42.514,42.514c-23.442,0-42.514-19.072-42.514-42.514c0-5.531,1.078-10.957,3.141-16.017
h78.747C231.693,100.736,232.77,106.162,232.77,111.694z`})})]})}),o.jsx("div",{className:"loaderText",children:"¡Dirección seleccionada!"})]})})}),o.jsx(cn,{children:ee&&o.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:o.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"¿Eliminar dirección?"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"¿Estás seguro que quieres eliminar esta dirección? Esta acción no se puede deshacer."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsx("button",{onClick:Qe,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:te=>te.target.style.backgroundColor="#f9fafb",onMouseOut:te=>te.target.style.backgroundColor="white",children:"Cancelar"}),o.jsx("button",{onClick:dt,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:te=>te.target.style.backgroundColor="#dc2626",onMouseOut:te=>te.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),Ce&&o.jsxs("div",{className:"truck-loader-overlay",children:[o.jsxs("div",{className:"spinner",children:[o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{})]}),o.jsx("div",{className:"truck-loader-text",children:"Procesando entrega..."})]}),o.jsx(B$,{abierto:Ve,onClose:()=>We(!1),onPick:te=>j(te),valorActual:N})]}),document.body)}const H$=()=>{var S;const{usuario:t,usuarioInfo:e,logout:n}=Jr(),{setModalAbierto:r}=tu(),{isDark:i}=cu(),a=k.useRef(null);Qr();const c=k.useRef(0),[u,d]=k.useState(!0),[f,g]=k.useState(window.innerWidth>=1280),[y,x]=k.useState(!1),w=(()=>{try{if(!t||!e||!e.metodoEntrega)return"Selecciona método de entrega";if((e.metodoEntrega||"").toLowerCase()==="tienda")return"Recoger en tienda";const N=(e.direccion||"").trim();return N?/maps\.|google\.com\/maps|Ubicación:/i.test(N)?"Dirección de Google Maps":N:"Selecciona método de entrega"}catch{return"Selecciona método de entrega"}})();return k.useEffect(()=>{a.current&&a.current.focus()},[]),k.useEffect(()=>{const b=()=>{g(window.innerWidth>=1280)};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),k.useEffect(()=>{if(!f)return;let b=!1;function N(){b||(window.requestAnimationFrame(()=>{const j=window.pageYOffset,O=c.current;j>O&&j>100?d(!1):(j<O||j===0)&&d(!0),c.current=j,b=!1}),b=!0)}return window.addEventListener("scroll",N,{passive:!0}),()=>window.removeEventListener("scroll",N)},[f]),o.jsxs(o.Fragment,{children:[o.jsx(de.header,{initial:{y:-120,opacity:0},animate:{y:f&&!u?-120:0,opacity:f&&!u?0:1},transition:{duration:.3,ease:"easeInOut"},className:"fixed top-0 left-0 w-full shadow-lg z-[9999] pl-0 pr-4 py-3",style:{backgroundColor:i?"#111827":"#ffffff",maxWidth:"100vw",overflowX:"hidden",pointerEvents:f&&!u?"none":"auto",opacity:1,backdropFilter:"none",WebkitBackdropFilter:"none"},children:o.jsxs("div",{className:"flex items-center justify-between w-full gap-3",children:[o.jsx("div",{id:"search-bar-container",className:"flex-grow max-w-full px-2 xl:hidden",children:o.jsx(nE,{onClose:()=>{},ref:a,placeholder:"Buscar en pcu.com.do"})}),o.jsxs("div",{className:"hidden xl:flex w-full items-center justify-between gap-6",children:[o.jsxs(It,{to:"/",className:"flex items-center gap-3 min-w-0 flex-shrink-0",children:[o.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal",className:"h-10 object-contain"}),o.jsxs("button",{type:"button",onClick:()=>{if(!t)return r(!0);x(!0)},className:"flex flex-col leading-tight text-left text-xs text-gray-700 dark:text-white font-medium hover:text-[#0ea5e9] dark:hover:text-[#60a5fa] transition",children:[o.jsxs("span",{className:"flex items-center gap-1 text-[11px] text-gray-500 dark:text-gray-300",children:[o.jsx(lh,{className:"text-[#4FC3F7]"}),"Método de entrega"]}),o.jsx("strong",{className:"block text-[12px] font-semibold text-gray-700 dark:text-white tracking-wide truncate max-w-[120px] sm:max-w-[160px] md:max-w-[200px] lg:max-w-[220px]",title:w,children:w})]})]}),o.jsx("div",{className:"flex-grow max-w-xl",children:o.jsx(nE,{onClose:()=>{},ref:a,placeholder:"Buscar en pcu.com.do"})}),o.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium text-gray-700 dark:text-white",children:[o.jsx(It,{to:"/",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Inicio"}),o.jsx(It,{to:"/categorias",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Categorías"}),o.jsx(It,{to:"/tiendas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Tiendas"}),o.jsx(It,{to:"/vender",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Vender"}),o.jsx(It,{to:"/nosotros",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Nosotros"}),o.jsx(It,{to:"/contacto",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Contáctanos"}),o.jsx(It,{to:"/estafetas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Estafetas"}),o.jsx(It,{to:"/carrito",className:"nav-link text-xl hover:scale-110 transition",children:"🛒"}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&o.jsx(It,{to:"/admin",className:"px-3 py-2 rounded bg-[#4FC3F7] text-white hover:bg-[#3BB0F3] shadow transition",children:"Panel Admin"}),t?o.jsx(de.div,{className:"relative",whileTap:{scale:.95},children:o.jsx(It,{to:"/profile",children:o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[#4FC3F7] shadow hover:shadow-lg transition cursor-pointer bg-white dark:bg-gray-700",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:"Perfil",className:"w-full h-full object-cover rounded-full"}):o.jsx("div",{className:"w-full h-full bg-[#4FC3F7] text-white flex items-center justify-center font-bold text-base",children:((S=t.displayName)==null?void 0:S.charAt(0).toUpperCase())||"U"})})})}):o.jsx(de.button,{onClick:()=>r(!0),className:"px-4 py-2 text-sm bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white rounded-lg font-semibold shadow transition",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Iniciar sesión"})]})]})]})}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&o.jsx("div",{className:"xl:hidden fixed bottom-[80px] right-4 z-[9999]",children:o.jsx(It,{to:"/admin",className:"bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white px-5 py-3 rounded-full shadow-xl font-semibold text-base",children:"Panel Admin"})}),y&&t&&o.jsx(Nj,{abierto:y,onClose:()=>x(!1),usuarioId:(e==null?void 0:e.uid)||(t==null?void 0:t.uid),direccionEditar:null,actualizarLista:()=>{}})]})};function Op({isOpen:t,onClose:e,onIniciarSesion:n}){return t?XI.createPortal(o.jsx("div",{onClick:e,className:"fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-[11000] flex items-center justify-center p-4",style:{top:0,left:0},children:o.jsxs(de.div,{onClick:r=>r.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40 z-[11001]",children:[o.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold","aria-label":"Cerrar modal",children:"×"}),o.jsxs("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-[#3b82f6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A11.955 11.955 0 0112 15c2.32 0 4.47.66 6.264 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})}),"Inicia sesión"]}),o.jsx("p",{className:"mb-6 text-center text-gray-300",children:"Necesitas iniciar sesión para acceder a esta función"}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:()=>{e(),n()},className:"w-full max-w-[120px] px-5 py-2 bg-[#3b82f6] hover:bg-[#2563eb] rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Iniciar sesión"}),o.jsx("button",{onClick:e,className:"w-full max-w-[120px] px-5 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Cancelar"})]})]})}),document.body):null}function W$(){const{usuario:t}=Jr(),e=Qr(),{abrirModal:n}=tu(),[r,i]=k.useState(!1),a=(d,f)=>{!t&&(f==="/carrito"||f==="/Profile")?(d.preventDefault(),i(!0)):e(f)},c=()=>i(!1),u=()=>{c(),n()};return o.jsx("div",{className:"footer-block",children:o.jsxs("footer",{className:"footer futuristic-footer relative bg-black text-gray-300 py-12 text-sm sm:text-base",children:[o.jsx("div",{className:"footer-bg-animated"}),o.jsx("div",{className:"w-full flex justify-center mb-10 relative z-20",children:o.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal Logo",className:"footer-logo-glow w-32 sm:w-44 xl:w-64 transition-transform duration-300 hover:scale-105"})}),o.jsxs("div",{className:"footer-cols-wrapper relative z-20 max-w-7xl mx-auto px-4 sm:px-6 xl:px-8 grid grid-cols-2 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Playcenter Universal"}),o.jsx("p",{children:"Tu universo de tecnología y gaming en Santiago, R.D."}),o.jsxs("p",{className:"mt-3 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(lh,{})," Av. Estrella Sadhalá #55, frente a la doble vía"]}),o.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(By,{})," +1 (809) 582-1212 (Internet)"]}),o.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(By,{})," +1 (849) 635-7000 (Tienda)"]}),o.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(qv,{})," playcenter121@gmail.com"]})]}),o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Navegación"}),o.jsx("ul",{className:"footer-nav-list",children:[["Categorías","/categorias",!1],["Nosotros","/nosotros",!1],["Contáctanos","/contacto",!1],["Estafetas","/estafetas",!1],["Tiendas","/tiendas",!1],["Vender","/vender",!1],["Carrito","/carrito",!0],["Mi perfil","/Profile",!0]].map(([d,f,g])=>o.jsx("li",{children:g?o.jsx("a",{href:f,onClick:y=>a(y,f),className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm cursor-pointer",children:d}):o.jsx("a",{href:f,className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm",children:d})},d))})]}),o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Horario"}),o.jsx("p",{children:"Lunes a Viernes: 8:30am - 5:30pm"}),o.jsx("p",{children:"Sábados: 8:30am - 12:30pm"}),o.jsx("p",{children:"Domingos: Cerrado"})]}),o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Conéctate con nosotros"}),o.jsx("div",{className:"grid grid-cols-2 gap-4 justify-items-center sm:justify-items-start",children:[["https://www.facebook.com/pcu12","/Facebook.png","Facebook"],["https://www.instagram.com/playcenter_universal/?hl=es","/Instagram.png","Instagram"],["https://www.tiktok.com/@playcenter_universal?lang=es","/tiktok.png","TikTok"],["https://youtube.com/@playcenteruniversal1916","/Youtube.png","YouTube"]].map(([d,f,g])=>o.jsx("a",{href:d,target:"_blank",rel:"noreferrer",className:"relative group",children:o.jsx("img",{src:f,alt:g,className:"footer-social-icon-neon w-12 h-12 sm:w-16 sm:h-16 rounded-full transition-transform duration-300 transform group-hover:scale-110"})},g))})]})]}),o.jsxs("p",{className:"footer-copyright text-center text-gray-500 text-[11px] sm:text-xs mt-10 relative z-20",children:["© ",new Date().getFullYear()," Playcenter Universal. Todos los derechos reservados."]}),o.jsx(Op,{isOpen:r,onClose:c,onIniciarSesion:u})]})})}var Q0={exports:{}},J0,Ek;function q$(){if(Ek)return J0;Ek=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return J0=t,J0}var Z0,kk;function G$(){if(kk)return Z0;kk=1;var t=q$();function e(){}function n(){}return n.resetWarningCache=e,Z0=function(){function r(c,u,d,f,g,y){if(y!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},Z0}var Sk;function K$(){return Sk||(Sk=1,Q0.exports=G$()()),Q0.exports}var X$=K$();const an=Gd(X$),Y$=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Qc(t,e,n){const r=Q$(t),{webkitRelativePath:i}=t,a=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&Tk(r,"path",a),Tk(r,"relativePath",a),r}function Q$(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=Y$.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function Tk(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const J$=[".DS_Store","Thumbs.db"];function Z$(t){return Al(this,void 0,void 0,function*(){return qm(t)&&ez(t.dataTransfer)?iz(t.dataTransfer,t.type):tz(t)?nz(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?rz(t):[]})}function ez(t){return qm(t)}function tz(t){return qm(t)&&qm(t.target)}function qm(t){return typeof t=="object"&&t!==null}function nz(t){return hx(t.target.files).map(e=>Qc(e))}function rz(t){return Al(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Qc(n))})}function iz(t,e){return Al(this,void 0,void 0,function*(){if(t.items){const n=hx(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(sz));return Nk(Cj(r))}return Nk(hx(t.files).map(n=>Qc(n)))})}function Nk(t){return t.filter(e=>J$.indexOf(e.name)===-1)}function hx(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function sz(t){if(typeof t.webkitGetAsEntry!="function")return Ck(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?jj(e):Ck(t,e)}function Cj(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?Cj(n):[n]],[])}function Ck(t,e){return Al(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const c=yield a.getFile();return c.handle=a,Qc(c)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Qc(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function az(t){return Al(this,void 0,void 0,function*(){return t.isDirectory?jj(t):oz(t)})}function jj(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function a(){e.readEntries(c=>Al(this,void 0,void 0,function*(){if(c.length){const u=Promise.all(c.map(az));i.push(u),a()}else try{const u=yield Promise.all(i);n(u)}catch(u){r(u)}}),c=>{r(c)})}a()})}function oz(t){return Al(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Qc(r,t.fullPath);e(i)},r=>{n(r)})})})}var Rf={},jk;function lz(){return jk||(jk=1,Rf.__esModule=!0,Rf.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?a===u.replace(/\/.*$/,""):i===u})}return!0}),Rf}var cz=lz();const ey=Gd(cz);function Ak(t){return hz(t)||dz(t)||Ij(t)||uz()}function uz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dz(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hz(t){if(Array.isArray(t))return fx(t)}function Ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ik(Object(n),!0).forEach(function(r){Aj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ud(t,e){return pz(t)||mz(t,e)||Ij(t,e)||fz()}function fz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ij(t,e){if(t){if(typeof t=="string")return fx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fx(t,e)}}function fx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(d){a=!0,u=d}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw u}}return r}}function pz(t){if(Array.isArray(t))return t}var gz=typeof ey=="function"?ey:ey.default,yz="file-invalid-type",xz="file-too-large",vz="file-too-small",bz="too-many-files",wz=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:yz,message:"File type must be ".concat(r)}},Rk=function(e){return{code:xz,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Mk=function(e){return{code:vz,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},_z={code:bz,message:"Too many files"};function Pj(t,e){var n=t.type==="application/x-moz-file"||gz(t,e);return[n,n?null:wz(e)]}function Rj(t,e,n){if(il(t.size))if(il(e)&&il(n)){if(t.size>n)return[!1,Rk(n)];if(t.size<e)return[!1,Mk(e)]}else{if(il(e)&&t.size<e)return[!1,Mk(e)];if(il(n)&&t.size>n)return[!1,Rk(n)]}return[!0,null]}function il(t){return t!=null}function Ez(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,a=t.multiple,c=t.maxFiles,u=t.validator;return!a&&e.length>1||a&&c>=1&&e.length>c?!1:e.every(function(d){var f=Pj(d,n),g=Ud(f,1),y=g[0],x=Rj(d,r,i),w=Ud(x,1),S=w[0],b=u?u(d):null;return y&&S&&!b})}function Gm(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Mf(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Dk(t){t.preventDefault()}function kz(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function Sz(t){return t.indexOf("Edge/")!==-1}function Tz(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return kz(t)||Sz(t)}function Es(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];return e.some(function(u){return!Gm(r)&&u&&u.apply(void 0,[r].concat(a)),Gm(r)})}}function Nz(){return"showOpenFilePicker"in window}function Cz(t){if(il(t)){var e=Object.entries(t).filter(function(n){var r=Ud(n,2),i=r[0],a=r[1],c=!0;return Mj(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(a)||!a.every(Dj))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(n,r){var i=Ud(r,2),a=i[0],c=i[1];return Pk(Pk({},n),{},Aj({},a,c))},{});return[{description:"Files",accept:e}]}return t}function jz(t){if(il(t))return Object.entries(t).reduce(function(e,n){var r=Ud(n,2),i=r[0],a=r[1];return[].concat(Ak(e),[i],Ak(a))},[]).filter(function(e){return Mj(e)||Dj(e)}).join(",")}function Az(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Iz(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function Mj(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function Dj(t){return/^.*\.[\w]+$/.test(t)}var Pz=["children"],Rz=["open"],Mz=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Dz=["refKey","onChange","onClick"];function Oz(t){return Fz(t)||Vz(t)||Oj(t)||Lz()}function Lz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vz(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fz(t){if(Array.isArray(t))return mx(t)}function ty(t,e){return zz(t)||$z(t,e)||Oj(t,e)||Uz()}function Uz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oj(t,e){if(t){if(typeof t=="string")return mx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mx(t,e)}}function mx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $z(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(d){a=!0,u=d}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw u}}return r}}function zz(t){if(Array.isArray(t))return t}function Ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(n),!0).forEach(function(r){px(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function px(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Km(t,e){if(t==null)return{};var n=Bz(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var j1=k.forwardRef(function(t,e){var n=t.children,r=Km(t,Pz),i=Vj(r),a=i.open,c=Km(i,Rz);return k.useImperativeHandle(e,function(){return{open:a}},[a]),Yr.createElement(k.Fragment,null,n(jn(jn({},c),{},{open:a})))});j1.displayName="Dropzone";var Lj={disabled:!1,getFilesFromEvent:Z$,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};j1.defaultProps=Lj;j1.propTypes={children:an.func,accept:an.objectOf(an.arrayOf(an.string)),multiple:an.bool,preventDropOnDocument:an.bool,noClick:an.bool,noKeyboard:an.bool,noDrag:an.bool,noDragEventsBubbling:an.bool,minSize:an.number,maxSize:an.number,maxFiles:an.number,disabled:an.bool,getFilesFromEvent:an.func,onFileDialogCancel:an.func,onFileDialogOpen:an.func,useFsAccessApi:an.bool,autoFocus:an.bool,onDragEnter:an.func,onDragLeave:an.func,onDragOver:an.func,onDrop:an.func,onDropAccepted:an.func,onDropRejected:an.func,onError:an.func,validator:an.func};var gx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Vj(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=jn(jn({},Lj),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,c=e.minSize,u=e.multiple,d=e.maxFiles,f=e.onDragEnter,g=e.onDragLeave,y=e.onDragOver,x=e.onDrop,w=e.onDropAccepted,S=e.onDropRejected,b=e.onFileDialogCancel,N=e.onFileDialogOpen,j=e.useFsAccessApi,O=e.autoFocus,I=e.preventDropOnDocument,V=e.noClick,$=e.noKeyboard,q=e.noDrag,D=e.noDragEventsBubbling,R=e.onError,P=e.validator,T=k.useMemo(function(){return jz(n)},[n]),L=k.useMemo(function(){return Cz(n)},[n]),U=k.useMemo(function(){return typeof N=="function"?N:Lk},[N]),A=k.useMemo(function(){return typeof b=="function"?b:Lk},[b]),oe=k.useRef(null),ae=k.useRef(null),Ce=k.useReducer(Hz,gx),Pe=ty(Ce,2),ee=Pe[0],ie=Pe[1],ye=ee.isFocused,B=ee.isFileDialogActive,Z=k.useRef(typeof window<"u"&&window.isSecureContext&&j&&Nz()),be=function(){!Z.current&&B&&setTimeout(function(){if(ae.current){var X=ae.current.files;X.length||(ie({type:"closeDialog"}),A())}},300)};k.useEffect(function(){return window.addEventListener("focus",be,!1),function(){window.removeEventListener("focus",be,!1)}},[ae,B,A,Z]);var Ve=k.useRef([]),We=function(X){oe.current&&oe.current.contains(X.target)||(X.preventDefault(),Ve.current=[])};k.useEffect(function(){return I&&(document.addEventListener("dragover",Dk,!1),document.addEventListener("drop",We,!1)),function(){I&&(document.removeEventListener("dragover",Dk),document.removeEventListener("drop",We))}},[oe,I]),k.useEffect(function(){return!r&&O&&oe.current&&oe.current.focus(),function(){}},[oe,O,r]);var et=k.useCallback(function(W){R?R(W):console.error(W)},[R]),ht=k.useCallback(function(W){W.preventDefault(),W.persist(),st(W),Ve.current=[].concat(Oz(Ve.current),[W.target]),Mf(W)&&Promise.resolve(i(W)).then(function(X){if(!(Gm(W)&&!D)){var me=X.length,je=me>0&&Ez({files:X,accept:T,minSize:c,maxSize:a,multiple:u,maxFiles:d,validator:P}),te=me>0&&!je;ie({isDragAccept:je,isDragReject:te,isDragActive:!0,type:"setDraggedFiles"}),f&&f(W)}}).catch(function(X){return et(X)})},[i,f,et,D,T,c,a,u,d,P]),Xe=k.useCallback(function(W){W.preventDefault(),W.persist(),st(W);var X=Mf(W);if(X&&W.dataTransfer)try{W.dataTransfer.dropEffect="copy"}catch{}return X&&y&&y(W),!1},[y,D]),nt=k.useCallback(function(W){W.preventDefault(),W.persist(),st(W);var X=Ve.current.filter(function(je){return oe.current&&oe.current.contains(je)}),me=X.indexOf(W.target);me!==-1&&X.splice(me,1),Ve.current=X,!(X.length>0)&&(ie({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Mf(W)&&g&&g(W))},[oe,g,D]),St=k.useCallback(function(W,X){var me=[],je=[];W.forEach(function(te){var ke=Pj(te,T),Se=ty(ke,2),vt=Se[0],jt=Se[1],ct=Rj(te,c,a),Ot=ty(ct,2),H=Ot[0],G=Ot[1],pe=P?P(te):null;if(vt&&H&&!pe)me.push(te);else{var ce=[jt,G];pe&&(ce=ce.concat(pe)),je.push({file:te,errors:ce.filter(function(he){return he})})}}),(!u&&me.length>1||u&&d>=1&&me.length>d)&&(me.forEach(function(te){je.push({file:te,errors:[_z]})}),me.splice(0)),ie({acceptedFiles:me,fileRejections:je,isDragReject:je.length>0,type:"setFiles"}),x&&x(me,je,X),je.length>0&&S&&S(je,X),me.length>0&&w&&w(me,X)},[ie,u,T,c,a,d,x,w,S,P]),xt=k.useCallback(function(W){W.preventDefault(),W.persist(),st(W),Ve.current=[],Mf(W)&&Promise.resolve(i(W)).then(function(X){Gm(W)&&!D||St(X,W)}).catch(function(X){return et(X)}),ie({type:"reset"})},[i,St,et,D]),Tt=k.useCallback(function(){if(Z.current){ie({type:"openDialog"}),U();var W={multiple:u,types:L};window.showOpenFilePicker(W).then(function(X){return i(X)}).then(function(X){St(X,null),ie({type:"closeDialog"})}).catch(function(X){Az(X)?(A(X),ie({type:"closeDialog"})):Iz(X)?(Z.current=!1,ae.current?(ae.current.value=null,ae.current.click()):et(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):et(X)});return}ae.current&&(ie({type:"openDialog"}),U(),ae.current.value=null,ae.current.click())},[ie,U,A,j,St,et,L,u]),Ze=k.useCallback(function(W){!oe.current||!oe.current.isEqualNode(W.target)||(W.key===" "||W.key==="Enter"||W.keyCode===32||W.keyCode===13)&&(W.preventDefault(),Tt())},[oe,Tt]),Rt=k.useCallback(function(){ie({type:"focus"})},[]),At=k.useCallback(function(){ie({type:"blur"})},[]),pn=k.useCallback(function(){V||(Tz()?setTimeout(Tt,0):Tt())},[V,Tt]),J=function(X){return r?null:X},He=function(X){return $?null:J(X)},De=function(X){return q?null:J(X)},st=function(X){D&&X.stopPropagation()},wt=k.useMemo(function(){return function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=W.refKey,me=X===void 0?"ref":X,je=W.role,te=W.onKeyDown,ke=W.onFocus,Se=W.onBlur,vt=W.onClick,jt=W.onDragEnter,ct=W.onDragOver,Ot=W.onDragLeave,H=W.onDrop,G=Km(W,Mz);return jn(jn(px({onKeyDown:He(Es(te,Ze)),onFocus:He(Es(ke,Rt)),onBlur:He(Es(Se,At)),onClick:J(Es(vt,pn)),onDragEnter:De(Es(jt,ht)),onDragOver:De(Es(ct,Xe)),onDragLeave:De(Es(Ot,nt)),onDrop:De(Es(H,xt)),role:typeof je=="string"&&je!==""?je:"presentation"},me,oe),!r&&!$?{tabIndex:0}:{}),G)}},[oe,Ze,Rt,At,pn,ht,Xe,nt,xt,$,q,r]),Qe=k.useCallback(function(W){W.stopPropagation()},[]),dt=k.useMemo(function(){return function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=W.refKey,me=X===void 0?"ref":X,je=W.onChange,te=W.onClick,ke=Km(W,Dz),Se=px({accept:T,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:J(Es(je,xt)),onClick:J(Es(te,Qe)),tabIndex:-1},me,ae);return jn(jn({},Se),ke)}},[ae,n,u,xt,r]);return jn(jn({},ee),{},{isFocused:ye&&!r,getRootProps:wt,getInputProps:dt,rootRef:oe,inputRef:ae,open:J(Tt)})}function Hz(t,e){switch(e.type){case"focus":return jn(jn({},t),{},{isFocused:!0});case"blur":return jn(jn({},t),{},{isFocused:!1});case"openDialog":return jn(jn({},gx),{},{isFileDialogActive:!0});case"closeDialog":return jn(jn({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return jn(jn({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return jn(jn({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return jn({},gx);default:return t}}function Lk(){}const Wz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"ufu-dropzone-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z"})}),qz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Gz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:o.jsx("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z"})}),Kz=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 100-12 6 6 0 000 12zM12 14.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.5h13.628a2.31 2.31 0 011.642 3.953l-.837 1.172-3.44-3.44-3.44 3.44-.837-1.172a2.31 2.31 0 01-1.642-3.953H6.827z"})]}),Xz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"})}),Yz=({file:t,onRemove:e,onSetMain:n,onMove:r,index:i,fileCount:a})=>{var j;const{url:c,type:u,name:d,size:f,progress:g,error:y,isMain:x}=t,[w,S]=k.useState(!1),b=k.useRef(null),N=(O,I=2)=>{if(!O||O===0)return"0 Bytes";const V=1024,$=I<0?0:I,q=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(O)/Math.log(V));return parseFloat((O/Math.pow(V,D)).toFixed($))+" "+q[D]};return k.useEffect(()=>{if(u==="video"&&b.current){const O=()=>S(!0);return b.current.addEventListener("loadedmetadata",O),()=>{b.current&&b.current.removeEventListener("loadedmetadata",O)}}},[u]),o.jsxs(de.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`ufu-preview-item ${x?"ufu-main-item":""}`,children:[o.jsx("div",{className:"ufu-preview-media",children:u==="image"?o.jsx("img",{src:c,alt:d,className:"object-contain w-full h-full",loading:"eager",onLoad:()=>{},onError:O=>{O.target.onerror=null,O.target.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}):u==="video"?o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:b,src:c,preload:"metadata",playsInline:!0,muted:!0,loop:!0,autoPlay:!0,controls:!1,onLoadedMetadata:()=>S(!0),className:`object-contain w-full h-full ${w?"opacity-100":"opacity-0"}`,onError:O=>{O.target.onerror=null,S(!0)}}),o.jsx("div",{className:`video-overlay ${w?"with-thumbnail":""}`,children:o.jsx(Gz,{})})]}):o.jsxs("div",{className:"document-preview",children:[o.jsx(qz,{}),o.jsx("span",{className:"document-ext",children:d&&((j=d.split(".").pop())==null?void 0:j.toUpperCase())||"FILE"})]})}),o.jsxs("div",{className:"ufu-preview-item-info",children:[o.jsx("p",{className:"ufu-preview-item-name",title:d||"Archivo",children:d&&d.length>20?d.substring(0,18)+"...":d||"Archivo"}),o.jsx("p",{className:"ufu-preview-item-size",children:N(f)})]}),o.jsx(cn,{}),o.jsxs("div",{className:"ufu-controls-overlay",children:[o.jsx("button",{type:"button",onClick:O=>{O.stopPropagation();const I=document.createElement("a");if(I.href=c,I.download=d||"archivo",I.target="_blank",c.includes("firebase")){const V=new URL(c);V.searchParams.set("response-content-disposition",`attachment; filename="${d||"archivo"}"`),I.href=V.toString()}document.body.appendChild(I),I.click(),document.body.removeChild(I)},className:"ufu-control-button ufu-download-button",title:"Descargar archivo","aria-label":"Descargar archivo a tu dispositivo",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),o.jsx("button",{type:"button",onClick:O=>{if(O.stopPropagation(),u==="image"){const I=document.createElement("div");I.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const V=document.createElement("img");V.src=c,V.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                object-fit: contain;
                border-radius: 8px;
                cursor: default;
              `;const $=document.createElement("button");$.innerHTML="×",$.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,I.appendChild(V),I.appendChild($),document.body.appendChild(I);const q=()=>{document.body.removeChild(I)};I.addEventListener("click",q),$.addEventListener("click",q);const D=R=>{R.key==="Escape"&&(q(),document.removeEventListener("keydown",D))};document.addEventListener("keydown",D),V.addEventListener("click",R=>R.stopPropagation())}else if(u==="video"){const I=document.createElement("div");I.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const V=document.createElement("video");V.src=c,V.controls=!0,V.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                border-radius: 8px;
                cursor: default;
              `;const $=document.createElement("button");$.innerHTML="×",$.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,I.appendChild(V),I.appendChild($),document.body.appendChild(I);const q=()=>{V.pause(),document.body.removeChild(I)};I.addEventListener("click",q),$.addEventListener("click",q),V.addEventListener("click",D=>D.stopPropagation())}else{const I=document.createElement("a");I.href=c,I.download=d,I.click()}},className:"ufu-control-button ufu-preview-button",title:"Ver archivo","aria-label":"Ver archivo en pantalla completa",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),o.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),e(t.id)},className:"ufu-control-button ufu-delete-button",title:"Eliminar","aria-label":"Eliminar archivo",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),n&&!x&&o.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),n(t.id)},className:"ufu-control-button ufu-set-main-button",title:"Establecer como principal","aria-label":"Establecer como imagen principal",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.622l1.208 5.273a.563.563 0 01-.841.589l-4.743-2.85a.563.563 0 00-.586 0l-4.743 2.85a.563.563 0 01-.841-.589l1.208-5.273a.563.563 0 00-.182-.622l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),r&&a>1&&o.jsxs("div",{className:"ufu-reorder-buttons",children:[o.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),r(i,"up")},disabled:i===0,className:"ufu-control-button",title:"Mover arriba","aria-label":"Mover archivo hacia arriba",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})}),o.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),r(i,"down")},disabled:i===a-1,className:"ufu-control-button",title:"Mover abajo","aria-label":"Mover archivo hacia abajo",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]})]}),x&&o.jsxs("div",{className:"ufu-main-badge",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:o.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c.321-.772 1.415-.772 1.736 0l1.681 4.06c.064.155.24.263.415.284l4.473.65c.803.117 1.125 1.106.547 1.65l-3.238 3.153a.477.477 0 00-.137.53l.764 4.456c.138.806-.702 1.425-1.425 1.053l-3.992-2.1a.498.498 0 00-.465 0l-3.992 2.1c-.723.372-1.563-.247-1.425-1.053l.764-4.456a.477.477 0 00-.137-.53L2.24 9.667c-.578-.544-.256-1.533.547-1.65l4.473-.65a.476.476 0 00.415-.284l1.681-4.06z",clipRule:"evenodd"})}),o.jsx("span",{children:"Principal"})]})]})},nl=Yr.memo(({files:t=[],onFilesChange:e,acceptedTypes:n="image/*,video/*,application/pdf",multiple:r=!0,maxSize:i=100*1024*1024,maxFiles:a=null,label:c="Medios del Producto",placeholder:u="Arrastra archivos o haz clic para seleccionar",className:d="",showPreview:f=!0,allowReorder:g=!0,allowSetMain:y=!0})=>{const[x,w]=k.useState([]),[S,b]=k.useState(null),[N,j]=k.useState(!1),[O,I]=k.useState(void 0),V=k.useRef(null),[$,q]=k.useState([]),D=k.useRef(!1);k.useEffect(()=>{if(!t||t.length===0){w(ye=>(ye.length>0&&(D.current=!0),[]));return}const ie=t.map((ye,B)=>{if(typeof ye=="string"){const Z=ye.split(".").pop().toLowerCase(),be=["mp4","mov","webm","avi","mkv","m4v"].includes(Z);return{id:`existing-${B}-${ye}`,url:ye,type:be?"video":"image",name:ye.split("/").pop().split("?")[0],size:0,isMain:B===0,isUploaded:!0}}return ye});w(ye=>(JSON.stringify(ye.map(Z=>Z.id))!==JSON.stringify(ie.map(Z=>Z.id))&&(D.current=!0),ie))},[t.length,t.map(ie=>typeof ie=="string"?ie:(ie==null?void 0:ie.id)||(ie==null?void 0:ie.url)).join("|")]);const R=k.useCallback((ie,ye)=>{const B=ie.map(Z=>{let be="document";Z.type.startsWith("image/")?be="image":Z.type.startsWith("video/")&&(be="video");const Ve=URL.createObjectURL(Z);return{id:`${Z.name}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,file:Z,url:Ve,type:be,name:Z.name,size:Z.size,progress:0,error:null,isMain:!1,isUploading:!1,isUploaded:!1}});ye.length>0&&(console.error("Archivos rechazados:",ye),q(ye.map(({file:Z,errors:be})=>({name:(Z==null?void 0:Z.name)||"Archivo",messages:(be||[]).map(Ve=>Ve.message)})))),w(Z=>{let be;if(r){const Ve=[...Z,...B];be=a?Ve.slice(0,a):Ve,a&&Ve.length>a&&(console.warn(`Límite de ${a} archivos alcanzado. Solo se mantuvieron los primeros ${a}.`),q(We=>[...We,{name:"Límite de archivos",messages:[`Límite de ${a} archivos alcanzado. Solo se mantuvieron los primeros ${a}.`]}]))}else be=B;return D.current=!0,be})},[r,a]),P=k.useMemo(()=>{const ie=(n||"").trim();if(!ie||ie==="*/*")return;const ye=ie.split(",").reduce((B,Z)=>{const be=Z.trim();return be&&(B[be]=[]),B},{});return Object.keys(ye).length?ye:void 0},[n]),{getRootProps:T,getInputProps:L,isDragActive:U,open:A}=Vj({onDrop:R,accept:P,maxSize:i,multiple:r,noClick:!1,noKeyboard:!1,preventDropOnDocument:!0}),oe=ie=>{w(ye=>{const B=ye.find(be=>be.id===ie);B&&B.url&&B.url.startsWith("blob:")&&URL.revokeObjectURL(B.url);const Z=ye.filter(be=>be.id!==ie).map((be,Ve)=>({...be,isMain:Ve===0}));return D.current=!0,Z})},ae=ie=>{y&&w(ye=>{const B=ye.find(Ve=>Ve.id===ie);if(!B)return ye;const Z=ye.filter(Ve=>Ve.id!==ie),be=[B,...Z].map((Ve,We)=>({...Ve,isMain:We===0}));return D.current=!0,be})},Ce=(ie,ye)=>{g&&w(B=>{const Z=ye==="up"?ie-1:ie+1;if(Z<0||Z>=B.length)return B;const be=[...B];[be[ie],be[Z]]=[be[Z],be[ie]];const Ve=be.map((We,et)=>({...We,isMain:et===0}));return D.current=!0,Ve})};k.useEffect(()=>{D.current&&(D.current=!1,typeof e=="function"?e(x):console.warn("⚠️ onFilesChange no es una función"))},[x]);const Pe=ie=>{ie.stopPropagation(),I("environment"),setTimeout(()=>{A(),setTimeout(()=>I(void 0),0)},30)},ee=ie=>{ie.stopPropagation(),I(void 0),setTimeout(()=>{A()},0)};return o.jsxs("div",{className:`universal-file-uploader ${d}`,children:[o.jsxs("div",{...T({className:`ufu-dropzone ${U?"dragging":""} ${N?"drag-over":""}`}),ref:V,onDragEnter:()=>j(!0),onDragLeave:()=>j(!1),onDrop:()=>j(!1),children:[o.jsx("input",{...L({style:{display:"none"},multiple:r,capture:O})}),o.jsxs("div",{className:"ufu-dropzone-content",children:[o.jsx(Wz,{}),o.jsxs("div",{className:"ufu-dropzone-desktop-text",children:[o.jsx("p",{className:"ufu-dropzone-text-main",children:c}),o.jsx("p",{className:"ufu-dropzone-text-sub",children:u}),o.jsx("button",{type:"button",onClick:ie=>{ie.stopPropagation(),A()},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Seleccionar Archivos"})]}),o.jsxs("div",{className:"ufu-mobile-buttons",children:[o.jsxs("button",{type:"button",onClick:Pe,className:"ufu-mobile-button","aria-label":"Abrir cámara",children:[o.jsx(Kz,{}),o.jsx("span",{children:"Cámara"})]}),o.jsxs("button",{type:"button",onClick:ee,className:"ufu-mobile-button","aria-label":"Abrir galería",children:[o.jsx(Xz,{}),o.jsx("span",{children:"Galería"})]})]})]})]}),$.length>0&&o.jsxs("div",{className:"mt-3 p-3 rounded-md bg-red-50 border border-red-200 text-red-700 text-sm",role:"alert",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("span",{className:"font-semibold",children:"Algunos archivos fueron rechazados"}),o.jsx("button",{type:"button",onClick:()=>q([]),className:"ml-3 text-red-600 hover:text-red-800","aria-label":"Cerrar",title:"Cerrar",children:"×"})]}),o.jsx("ul",{className:"list-disc ml-5 mt-2",children:$.map((ie,ye)=>o.jsxs("li",{children:[ie.name?o.jsxs("span",{className:"font-medium",children:[ie.name,": "]}):null,Array.isArray(ie.messages)?ie.messages.join(", "):String(ie)]},`rejected-${ye}-${ie.name||"unknown"}`))})]}),x.length>0?o.jsx("div",{className:"ufu-preview-grid",children:o.jsx(cn,{children:x.map((ie,ye)=>{const B=ie.id||`file-${ye}-${ie.name||"unknown"}-${Date.now()}`;return o.jsx(Yz,{file:ie,onRemove:oe,onSetMain:y?ae:null,onMove:g?Ce:null,index:ye,fileCount:x.length},B)})})}):o.jsx("div",{className:"text-center text-gray-500 text-sm mt-4 p-4 border-2 border-dashed border-gray-200 rounded",children:"📁 No hay archivos subidos aún - Arrastra o selecciona archivos arriba"})]})});nl.displayName="UniversalFileUploader";const Fj=({variantes:t=[],varianteSeleccionada:e=0,onVarianteChange:n,showStock:r=!1,showPrice:i=!0,basePrice:a=0,className:c=""})=>{if(!t||t.length===0)return null;const u=t.filter(y=>y&&typeof y.color=="string"&&y.color.trim());if(u.length===0)return null;const d=y=>{n&&n(y)},f=y=>`RD$ ${Number(y||0).toLocaleString("es-DO",{minimumFractionDigits:2,maximumFractionDigits:2})}`,g=({variante:y,index:x,isSelected:w,isOutOfStock:S,onClick:b})=>{var j,O,I;const N=((O=(j=y.imagenPrincipal)==null?void 0:j[0])==null?void 0:O.url)||y.imagen||((I=y.imagenes)==null?void 0:I[0])||null;return o.jsx("button",{type:"button",onClick:b,className:`
          relative rounded-lg transition-all duration-150 flex-shrink-0 
          w-[130px] sm:w-[145px] xl:w-[160px]
          ${w?"border-[2.5px] border-blue-600":"border border-gray-300 hover:border-gray-400"}
          ${S?"opacity-60 cursor-not-allowed":"cursor-pointer"}
          bg-white overflow-hidden
        `,disabled:S,children:o.jsxs("div",{className:"flex flex-col w-full",children:[N&&o.jsxs("div",{className:"relative w-full bg-white p-3",children:[o.jsx("div",{className:"pt-[100%]"}),o.jsx("img",{src:N,alt:y.color,className:"absolute inset-0 w-full h-full object-contain"})]}),o.jsx("div",{className:"w-full text-center px-2 pt-2 pb-1",children:o.jsx("div",{className:"text-[11px] sm:text-[12px] font-medium text-gray-700 truncate",children:y.color})}),i&&o.jsx("div",{className:"w-full text-center px-2 pb-2",children:o.jsx("div",{className:"text-[13px] sm:text-[14px] font-bold text-gray-900",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:f((y==null?void 0:y.precio)??a)})})]})},x)};return o.jsxs("div",{className:`visual-variant-selector ${c}`,children:[o.jsx("div",{className:"xl:hidden w-full overflow-x-auto scrollbar-hide",children:o.jsx("div",{className:"flex gap-2 pb-2",children:u.map((y,x)=>o.jsx(g,{variante:y,index:x,isSelected:x===e,isOutOfStock:((y==null?void 0:y.cantidad)??0)<=0,onClick:()=>d(x)},x))})}),o.jsx("div",{className:"hidden xl:block w-full",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((y,x)=>o.jsx(g,{variante:y,index:x,isSelected:x===e,isOutOfStock:((y==null?void 0:y.cantidad)??0)<=0,onClick:()=>d(x)},x))})})]})},nn={REQUIRED_FIELDS:["nombre","precio","categoria","descripcion"],MIN_TITLE_LENGTH:10,MAX_TITLE_LENGTH:200,MIN_DESCRIPTION_LENGTH:20,MAX_DESCRIPTION_LENGTH:5e3,MIN_PRICE:.01,MAX_PRICE:999999,MIN_STOCK:0,MAX_STOCK:999999,MAX_IMAGES:20,MAX_VIDEOS:10,MAX_EXTRAS:3,MAX_VARIANTS:50,MIN_VARIANT_NAME_LENGTH:2,MAX_VARIANT_NAME_LENGTH:100},lr={MISSING_TITLE:"El título del producto es obligatorio",MISSING_PRICE:"El precio del producto es obligatorio",MISSING_CATEGORY:"Debe seleccionar una categoría",MISSING_DESCRIPTION:"La descripción del producto es obligatoria",MISSING_MAIN_IMAGE:"Debe subir al menos una imagen principal",TITLE_TOO_SHORT:`El título debe tener al menos ${nn.MIN_TITLE_LENGTH} caracteres`,TITLE_TOO_LONG:`El título no puede exceder ${nn.MAX_TITLE_LENGTH} caracteres`,DESCRIPTION_TOO_SHORT:`La descripción debe tener al menos ${nn.MIN_DESCRIPTION_LENGTH} caracteres`,DESCRIPTION_TOO_LONG:`La descripción no puede exceder ${nn.MAX_DESCRIPTION_LENGTH} caracteres`,INVALID_PRICE:`El precio debe estar entre $${nn.MIN_PRICE} y $${nn.MAX_PRICE}`,INVALID_STOCK:`El stock debe estar entre ${nn.MIN_STOCK} y ${nn.MAX_STOCK}`,TOO_MANY_IMAGES:`Máximo ${nn.MAX_IMAGES} imágenes permitidas`,TOO_MANY_VIDEOS:`Máximo ${nn.MAX_VIDEOS} videos permitidos`,TOO_MANY_EXTRAS:`Máximo ${nn.MAX_EXTRAS} archivos extras permitidos`,TOO_MANY_VARIANTS:`Máximo ${nn.MAX_VARIANTS} variantes permitidas`,VARIANT_NAME_TOO_SHORT:`El nombre de la variante debe tener al menos ${nn.MIN_VARIANT_NAME_LENGTH} caracteres`,VARIANT_NAME_TOO_LONG:`El nombre de la variante no puede exceder ${nn.MAX_VARIANT_NAME_LENGTH} caracteres`,DUPLICATE_VARIANT_NAMES:"No puede haber variantes con el mismo nombre",VARIANT_MISSING_STOCK:"Todas las variantes deben tener stock definido"},An={ERROR:"error",WARNING:"warning"},Vk=(t,e,n={})=>{const r=[];switch(t){case"nombre":if(!e||!e.trim())r.push({field:"nombre",message:lr.MISSING_TITLE,severity:An.ERROR});else{const i=e.trim();i.length<nn.MIN_TITLE_LENGTH&&r.push({field:"nombre",message:lr.TITLE_TOO_SHORT,severity:An.ERROR}),i.length>nn.MAX_TITLE_LENGTH&&r.push({field:"nombre",message:lr.TITLE_TOO_LONG,severity:An.ERROR})}break;case"precio":if(!e&&e!==0)r.push({field:"precio",message:lr.MISSING_PRICE,severity:An.ERROR});else{const i=parseFloat(e);(isNaN(i)||i<nn.MIN_PRICE||i>nn.MAX_PRICE)&&r.push({field:"precio",message:lr.INVALID_PRICE,severity:An.ERROR})}break;case"categoria":(!e||!e.trim())&&r.push({field:"categoria",message:lr.MISSING_CATEGORY,severity:An.ERROR});break;case"descripcion":if(!e||!e.trim())r.push({field:"descripcion",message:lr.MISSING_DESCRIPTION,severity:An.ERROR});else{const i=e.trim();i.length<nn.MIN_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:lr.DESCRIPTION_TOO_SHORT,severity:An.ERROR}),i.length>nn.MAX_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:lr.DESCRIPTION_TOO_LONG,severity:An.WARNING})}break;case"cantidad":if(e!=null){const i=parseInt(e);(isNaN(i)||i<nn.MIN_STOCK||i>nn.MAX_STOCK)&&r.push({field:"cantidad",message:lr.INVALID_STOCK,severity:An.ERROR})}break}return r},Qz=(t=[])=>{const e=[];t.length>nn.MAX_VARIANTS&&e.push({field:"variantes",message:lr.TOO_MANY_VARIANTS,severity:An.ERROR});const n=[];return t.forEach((r,i)=>{if(!r||typeof r!="object")return;const a=r.color||r.name||"";a.trim().length<nn.MIN_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:lr.VARIANT_NAME_TOO_SHORT,severity:An.ERROR}),a.trim().length>nn.MAX_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:lr.VARIANT_NAME_TOO_LONG,severity:An.ERROR}),n.includes(a.trim().toLowerCase())?e.push({field:`variantes[${i}].color`,message:lr.DUPLICATE_VARIANT_NAMES,severity:An.ERROR}):n.push(a.trim().toLowerCase());const c=parseInt(r.cantidad);(isNaN(c)||c<0)&&e.push({field:`variantes[${i}].cantidad`,message:lr.VARIANT_MISSING_STOCK,severity:An.ERROR})}),e},Jz=t=>{const e=[];return t.imagen||t.imagenPrincipal&&t.imagenPrincipal.length>0||e.push({field:"imagen",message:lr.MISSING_MAIN_IMAGE,severity:An.ERROR}),(t.imagenes||[]).length+(t.imagenesExtra||[]).length>nn.MAX_IMAGES&&e.push({field:"imagenes",message:lr.TOO_MANY_IMAGES,severity:An.ERROR}),(t.videoUrls||[]).length+(t.videoAcercaArticulo||[]).length>nn.MAX_VIDEOS&&e.push({field:"videos",message:lr.TOO_MANY_VIDEOS,severity:An.ERROR}),(t.imagenesExtra||[]).length>nn.MAX_EXTRAS&&e.push({field:"imagenesExtra",message:lr.TOO_MANY_EXTRAS,severity:An.ERROR}),e},Zz=t=>{if(!t||typeof t!="object")return[{field:"general",message:"Datos del producto no válidos",severity:An.ERROR}];let e=[];if(nn.REQUIRED_FIELDS.forEach(n=>{try{e=e.concat(Vk(n,t[n],t))}catch(r){console.error(`Error validating field ${n}:`,r)}}),t.cantidad!==void 0)try{e=e.concat(Vk("cantidad",t.cantidad,t))}catch(n){console.error("Error validating cantidad:",n)}try{e=e.concat(Jz(t))}catch(n){console.error("Error validating media:",n)}if(t.variantes&&Array.isArray(t.variantes)&&t.variantes.length>0)try{e=e.concat(Qz(t.variantes))}catch(n){console.error("Error validating variants:",n)}return e},eB=t=>{if(!t||typeof t!="object")return{isReady:!1,errorCount:1,warningCount:0,errors:[{field:"general",message:"Datos del producto no válidos",severity:An.ERROR}],canPublish:!1,status:"incomplete"};const e=Zz(t),n=e.filter(a=>a.severity===An.ERROR).length,r=e.filter(a=>a.severity===An.WARNING).length,i=n===0;return{isReady:i,errorCount:n,warningCount:r,errors:e,canPublish:i,status:i?"ready":"incomplete"}},Uj=({product:t,onClose:e,onSave:n,sellerId:r})=>{var ct,Ot;const{usuario:i,usuarioInfo:a}=Jr(),[c,u]=k.useState(!0),[d,f]=k.useState(()=>(console.log("🎬 Inicializando formData con product:",t==null?void 0:t.id),{nombre:(t==null?void 0:t.nombre)||"",empresa:(t==null?void 0:t.empresa)||"",precio:(t==null?void 0:t.precio)||"",cantidad:(t==null?void 0:t.cantidad)||0,descripcion:(t==null?void 0:t.descripcion)||"",categoria:(t==null?void 0:t.categoria)||"",nuevaCategoria:"",imagen:(t==null?void 0:t.imagen)||"",imagenes:(t==null?void 0:t.imagenes)||[],imagenesExtra:(t==null?void 0:t.imagenesExtra)||[],videoUrl:(t==null?void 0:t.videoUrl)||"",videoUrls:(t==null?void 0:t.videoUrls)||[],videoAcercaArticulo:(t==null?void 0:t.videoAcercaArticulo)||[],oferta:(t==null?void 0:t.oferta)||!1,precioOferta:(t==null?void 0:t.precioOferta)||"",estado:(t==null?void 0:t.estado)||"Nuevo",acerca:(t==null?void 0:t.acerca)||[""],variantes:(t==null?void 0:t.variantes)||[],etiquetas:(t==null?void 0:t.etiquetas)||[""],activo:(t==null?void 0:t.activo)!==void 0?t.activo:!0,fechaPublicacion:(t==null?void 0:t.fechaPublicacion)||new Date().toISOString().split("T")[0],peso:(t==null?void 0:t.peso)||"",dimensiones:(t==null?void 0:t.dimensiones)||"",varianteImagenPrincipal:(t==null?void 0:t.varianteImagenPrincipal)||"",imagenPrincipal:(t==null?void 0:t.imagenPrincipal)||(t!=null&&t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:(t==null?void 0:t.galeriaImagenes)||(t==null?void 0:t.imagenes)||[],tresArchivosExtras:(t==null?void 0:t.tresArchivosExtras)||(t==null?void 0:t.imagenesExtra)||[],productStatus:(t==null?void 0:t.productStatus)||"draft",validationScore:(t==null?void 0:t.validationScore)||0,lastValidated:(t==null?void 0:t.lastValidated)||null})),[g,y]=k.useState([]),[x,w]=k.useState([]),[S,b]=k.useState(!1),[N,j]=k.useState((t==null?void 0:t.id)||null),[O,I]=k.useState(!1),[V,$]=k.useState(null),[q,D]=k.useState(!1),R=k.useRef(!0),P=k.useRef(!1),[T,L]=k.useState({imagen:"",imagenes:[],productVideos:[],acercaVideos:[],variantes:{},extras:[]}),[U,A]=k.useState([]),[oe,ae]=k.useState(!1),[Ce,Pe]=k.useState([]),[ee,ie]=k.useState(!1),[ye,B]=k.useState(0);k.useEffect(()=>{xt(),Tt()},[]),k.useEffect(()=>{t&&(console.log("🔄 Cargando producto para editar:",t.id),console.log("📦 Datos del producto:",{imagen:t.imagen,imagenes:t.imagenes,videoUrls:t.videoUrls,imagenesExtra:t.imagenesExtra,variantes:t.variantes}),Array.isArray(t.variantes)&&t.variantes.length>0&&t.variantes.forEach((H,G)=>{console.log(`🎨 Variante ${G}:`,{color:H.color,imagen:H.imagen,imagenes:H.imagenes,videoUrls:H.videoUrls})}),f({...d,nombre:t.nombre||"",empresa:t.empresa||"",precio:t.precio||"",cantidad:t.cantidad||0,descripcion:t.descripcion||"",categoria:t.categoria||"",acerca:t.acerca||[""],etiquetas:t.etiquetas||[""],variantes:t.variantes||[],oferta:t.oferta||!1,precioOferta:t.precioOferta||"",estado:t.estado||"Nuevo",activo:t.activo!==void 0?t.activo:!0,imagen:t.imagen||"",imagenes:(t.imagenes||[]).filter(H=>H&&typeof H=="string"&&H.trim()!==""),videoUrls:(t.videoUrls||[]).filter(H=>H&&typeof H=="string"&&H.trim()!==""),imagenesExtra:(t.imagenesExtra||[]).filter(H=>H&&typeof H=="string"&&H.trim()!==""),videoUrl:t.videoUrl||"",videoAcercaArticulo:t.videoAcercaArticulo||[],varianteImagenPrincipal:t.varianteImagenPrincipal||"",imagenPrincipal:t.imagenPrincipal||(t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:t.galeriaImagenes||t.imagenes||[],tresArchivosExtras:t.tresArchivosExtras||t.imagenesExtra||[],productStatus:t.productStatus||t.estado||"draft"}),console.log("✅ FormData actualizado con archivos existentes"),setTimeout(()=>{P.current=!0,R.current=!1,console.log("🔓 Formulario completamente inicializado - handlers habilitados")},500))},[t==null?void 0:t.id]),k.useEffect(()=>{t!=null&&t.id&&N!==t.id&&j(t.id)},[t==null?void 0:t.id]),k.useEffect(()=>{const H=G=>{var ce;if((ce=U==null?void 0:U.some)==null?void 0:ce.call(U,he=>(he==null?void 0:he.status)==="uploading"))return G.preventDefault(),G.returnValue="",""};return window.addEventListener("beforeunload",H),()=>window.removeEventListener("beforeunload",H)},[U]),k.useEffect(()=>{const H=N||(t==null?void 0:t.id);if(!H)return;console.log("📡 Suscripción onSnapshot iniciada para producto:",H);const G=Un(pt(Ue,"productos",H),pe=>{if(!pe.exists())return;const ce=pe.data();if(console.log("🔄 Datos recibidos de Firestore:",{imagen:ce.imagen,imagenes:ce.imagenes,videoUrls:ce.videoUrls,imagenesExtra:ce.imagenesExtra}),Array.isArray(ce.imagenes)){const he=ce.imagenes.filter(Fe=>!Fe||Fe.trim()==="");he.length>0&&console.warn("⚠️ VALORES VACÍOS DETECTADOS en imagenes:",he.length)}if(Array.isArray(ce.videoUrls)){const he=ce.videoUrls.filter(Fe=>!Fe||Fe.trim()==="");he.length>0&&console.warn("⚠️ VALORES VACÍOS DETECTADOS en videoUrls:",he.length)}f(he=>{var Fe,Te;return{...he,id:ce.id||H,nombre:ce.nombre??he.nombre,descripcion:ce.descripcion??he.descripcion,empresa:ce.empresa??he.empresa,categoria:ce.categoria??he.categoria,precio:((Te=(Fe=ce.precio??he.precio)==null?void 0:Fe.toString)==null?void 0:Te.call(Fe))||String(ce.precio??he.precio??""),cantidad:ce.cantidad??he.cantidad,etiquetas:Array.isArray(ce.etiquetas)?ce.etiquetas:he.etiquetas||[],acerca:Array.isArray(ce.acerca)?ce.acerca:he.acerca||[],imagen:ce.imagen?ce.imagen:he.imagen,imagenes:Array.isArray(ce.imagenes)&&ce.imagenes.length>0?ce.imagenes.filter(xe=>xe&&typeof xe=="string"&&xe.trim()!==""):he.imagenes||[],imagenPrincipal:Array.isArray(ce.imagenPrincipal)?ce.imagenPrincipal:he.imagenPrincipal||[],galeriaImagenes:Array.isArray(ce.galeriaImagenes)?ce.galeriaImagenes:he.galeriaImagenes||[],tresArchivosExtras:Array.isArray(ce.tresArchivosExtras)?ce.tresArchivosExtras:he.tresArchivosExtras||[],imagenesExtra:Array.isArray(ce.imagenesExtra)&&ce.imagenesExtra.length>0?ce.imagenesExtra.filter(xe=>xe&&typeof xe=="string"&&xe.trim()!==""):he.imagenesExtra||[],videoUrl:ce.videoUrl||ce.video||he.videoUrl,videoUrls:Array.isArray(ce.videoUrls)&&ce.videoUrls.length>0?ce.videoUrls.filter(xe=>xe&&typeof xe=="string"&&xe.trim()!==""):he.videoUrls||[],videoAcercaArticulo:Array.isArray(ce.videoAcercaArticulo)?ce.videoAcercaArticulo:he.videoAcercaArticulo||[],variantes:Array.isArray(ce.variantes)?ce.variantes:he.variantes||[],activo:ce.activo??he.activo}})});return()=>G()},[N,t==null?void 0:t.id]);const Z=k.useRef(!1);k.useEffect(()=>{if(!Z.current){try{const H="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",G=Array.isArray(d.videoAcercaArticulo)?d.videoAcercaArticulo:[];if(G.some(ce=>String(ce).trim()===H)){const ce=G.filter(Fe=>String(Fe).trim()!==H);f(Fe=>({...Fe,videoAcercaArticulo:ce}));const he=N||(t==null?void 0:t.id);he&&bi(pt(Ue,"productos",he),{videoAcercaArticulo:ce,fechaActualizacion:new Date}).catch(()=>{})}}catch{}Z.current=!0}},[d.videoAcercaArticulo,N,t==null?void 0:t.id]),k.useEffect(()=>{const G=setTimeout(()=>{try{const pe=eB(d);Pe(pe.errors||[]);const ce=typeof pe.errorCount=="number"?Math.max(0,100-pe.errorCount*20):pe.isReady?100:0;f(he=>({...he,validationScore:ce,lastValidated:new Date().toISOString()}))}catch(pe){console.error("Error running validation summary:",pe)}},500);return()=>clearTimeout(G)},[d.nombre,d.precio,d.categoria,d.descripcion,d.imagenPrincipal,d.galeriaImagenes]),k.useMemo(()=>({id:N||(t==null?void 0:t.id)||"nuevo",nombre:d.nombre||"",precio:parseFloat(d.precio)||0,cantidad:Number(d.cantidad)||0}),[N,t==null?void 0:t.id,d.nombre,d.precio,d.cantidad]);const be=async()=>{if(t!=null&&t.id)return t.id;if(d!=null&&d.id)return d.id;if(N)return N;try{const H=`prod_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,G={id:H,nombre:(d==null?void 0:d.nombre)||"",descripcion:(d==null?void 0:d.descripcion)||"",empresa:(d==null?void 0:d.empresa)||"",categoria:(d==null?void 0:d.categoria)||"",precio:parseFloat(d==null?void 0:d.precio)||0,cantidad:Number(d==null?void 0:d.cantidad)||0,etiquetas:Array.isArray(d==null?void 0:d.etiquetas)?d.etiquetas:[],acerca:Array.isArray(d==null?void 0:d.acerca)?d.acerca:[],variantes:Array.isArray(d==null?void 0:d.variantes)?d.variantes:[],imagen:"",imagenPrincipal:[],imagenes:[],videoUrls:[],videoAcercaArticulo:[],imagenesExtra:[],activo:!1,ownerUid:(i==null?void 0:i.uid)||null,ownerName:(a==null?void 0:a.displayName)||(i==null?void 0:i.displayName)||"",sellerId:r||(i==null?void 0:i.uid)||null,sellerName:r&&((a==null?void 0:a.storeName)||(a==null?void 0:a.displayName))||"",fechaCreacion:new Date,fechaActualizacion:new Date};return await er(pt(Ue,"productos",H),G),j(H),f(pe=>({...pe,id:H})),H}catch{return null}},Ve=async(H,G)=>{if(H)try{await bi(pt(Ue,"productos",H),{...G,fechaActualizacion:new Date})}catch(pe){if(pe.code==="not-found"){console.log("ℹ️ Documento eliminado, cancelando actualización");return}}},We=async(H,G)=>{if(["nuevaCategoria","_tempVideoUrl"].includes(H))return;const pe=(t==null?void 0:t.id)||(d==null?void 0:d.id)||N,ce=!!pe;let he=pe;!he&&(ce||(he=await be(),!he))||await Ve(he,{[H]:G})},et=H=>String(H||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").slice(0,80),ht=H=>((H==null?void 0:H.name)||"file").replace(/[^\w\s.-]/g,"_").replace(/\s+/g,"_"),Xe=({productId:H,section:G,file:pe,variantId:ce=null})=>{const he=ht(pe);if(ce){if(G==="main")return`products/${H}/variants/${ce}/main/${he}`;if(G==="gallery")return`products/${H}/variants/${ce}/gallery/${he}`}else{if(G==="main")return`products/${H}/main/${he}`;if(G==="gallery")return`products/${H}/gallery/${he}`;if(G==="videos")return`products/${H}/videos/${he}`;if(G==="extras")return`products/${H}/extras/${he}`}return`products/${H}/misc/${he}`},nt=H=>{const G=(d.variantes||[])[H]||{};if(G.id)return G.id;const pe=`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`;return f(ce=>{const he=[...ce.variantes||[]];he[H]={...he[H]||{},id:pe};const Fe={...ce,variantes:he},Te=N||(t==null?void 0:t.id);return Te&&bi(pt(Ue,"productos",Te),{variantes:he,fechaActualizacion:new Date}).catch(()=>{}),Fe}),pe},St=async()=>{try{const G=(await os(Ht(Ue,"categorias"))).docs.map(pe=>({id:pe.id,...pe.data()}));y(G)}catch(H){console.error("Error loading categories:",H)}},xt=()=>{St()},Tt=()=>{w([])},Ze=(H,G)=>{f(pe=>({...pe,[H]:G})),We(H,G)},Rt=(H,G,pe)=>{f(ce=>{const he=ce[H].map((Te,xe)=>xe===G?pe:Te),Fe={...ce,[H]:he};return We(H,he),Fe})},At=H=>{f(G=>{const pe=[...G[H],H==="variantes"?{color:"",imagen:"",imagenes:[],cantidad:0,descripcion:"",precio:""}:""],ce={...G,[H]:pe};return We(H,pe),ce})},pn=(H,G)=>{f(pe=>{const ce=pe[H].filter((Fe,Te)=>Te!==G),he={...pe,[H]:ce};return We(H,ce),he})},J=(H,G,pe)=>{f(he=>({...he,variantes:he.variantes.map((Fe,Te)=>Te===H?{...Fe,[G]:pe}:Fe)}));const ce=N||(t==null?void 0:t.id);if(ce)try{f(he=>{const Fe=he.variantes.map((Te,xe)=>xe===H?{...Te,[G]:pe}:Te);return bi(pt(Ue,"productos",ce),{variantes:Fe,fechaActualizacion:new Date}).catch(()=>{}),{...he,variantes:Fe}})}catch{}},He=H=>{B(H)},De=async(H,G,pe)=>new Promise((ce,he)=>{try{const Fe=ol(ll,G),Te=Q_(Fe,H);A(xe=>xe.map(se=>se.id===pe?{...se,task:Te}:se)),Te.on("state_changed",xe=>{const se=Math.round(xe.bytesTransferred/xe.totalBytes*100);$(se),A(Le=>Le.map(Me=>Me.id===pe?{...Me,progress:se}:Me)),setTimeout(()=>{A(Le=>{const Me=Le.find(ue=>ue.id===pe);if(Me&&Me.status==="uploading"&&(!Me.progress||Me.progress===0)&&Me.task){try{Me.task.cancel()}catch{}return Le.map(ue=>ue.id===pe?{...ue,status:"error"}:ue)}return Le})},6e3)},xe=>{A(se=>se.map(Le=>Le.id===pe?{...Le,status:"error"}:Le)),he(xe)},async()=>{const xe=await Id(Te.snapshot.ref);A(se=>se.map(Le=>Le.id===pe?{...Le,status:"done"}:Le)),ce(xe)})}catch(Fe){A(Te=>Te.map(xe=>xe.id===pe?{...xe,status:"error"}:xe)),he(Fe)}}),st=async(H,G,pe)=>new Promise((ce,he)=>{try{const Fe=ol(ll,G),Te=Q_(Fe,H);A(xe=>xe.map(se=>se.id===pe?{...se,task:Te}:se)),Te.on("state_changed",xe=>{const se=Math.round(xe.bytesTransferred/xe.totalBytes*100);$(se),A(Le=>Le.map(Me=>Me.id===pe?{...Me,progress:se}:Me))},xe=>{A(se=>se.map(Le=>Le.id===pe?{...Le,status:"error"}:Le)),he(xe)},async()=>{const xe=await Id(Te.snapshot.ref);A(se=>se.map(Le=>Le.id===pe?{...Le,status:"done"}:Le)),ce(xe)})}catch(Fe){A(Te=>Te.map(xe=>xe.id===pe?{...xe,status:"error"}:xe)),he(Fe)}}),wt=async(H,G,pe,ce,he=2)=>{let Fe;for(let Te=0;Te<=he;Te++)try{return await H(G,pe,ce)}catch(xe){Fe=xe,await new Promise(se=>setTimeout(se,500*(Te+1)))}throw Fe},Qe=async H=>{if(H)try{const G=String(H).trim();if(G.startsWith("/")||G.startsWith("./")||G.startsWith("../")){console.log("⚠️ Ignorando ruta local/relativa:",G);return}if(!G.startsWith("gs://")&&!G.includes("firebasestorage.googleapis.com")){console.log("⚠️ Ignorando URL externa:",G);return}const ce=(he=>{try{const Fe=String(he);if(Fe.startsWith("gs://"))return ol(ll,Fe);if(Fe.includes("firebasestorage.googleapis.com")){const Te=Fe.match(/\/o\/([^?]+)/);if(Te&&Te[1]){const xe=decodeURIComponent(Te[1]);return ol(ll,xe)}}return null}catch{return null}})(G);ce&&(await x8(ce),console.log("✅ Archivo borrado de Firebase Storage:",G))}catch(G){G.code==="storage/object-not-found"?console.log("ℹ️ Archivo ya no existe en Storage:",H):console.log("⚠️ Error al borrar archivo (ignorado):",G.code)}},dt=H=>{try{const G=String(H).trim().toLowerCase();if(G.includes("youtube.com")||G.includes("youtu.be")||G.includes("vimeo.com"))return"video";const ce=G.split("?")[0].split("#")[0].split(".").pop()||"";return["jpg","jpeg","png","gif","webp","bmp","svg"].includes(ce)?"image":["mp4","mov","avi","mkv","webm","m4v"].includes(ce)?"video":"document"}catch{return"document"}},W=async()=>{d.imagen&&await Qe(d.imagen),Ze("imagen",""),Ze("imagenPrincipal",[])},X=async H=>{if(console.log("🎯 handleMainImageUFU llamado con:",H),R.current||!P.current){console.log("⏸️ Carga inicial - ignorando llamada para prevenir borrado");return}try{I(!0);const G=Array.isArray(H)?H:[];if(console.log("📋 Array procesado:",G),G.length===0){console.log("📭 No hay archivos, limpiando imagen principal"),L(he=>({...he,imagen:""})),await W();return}const pe=G[0];console.log("📄 Primer archivo:",pe);const ce=(pe==null?void 0:pe.url)||"";if(console.log("🔗 URL del primer archivo:",ce),pe!=null&&pe.file){console.log("📦 Archivo detectado, procesando subida..."),L(se=>({...se,imagen:""})),console.log("👁️ Mostrando preview local:",ce),L(se=>({...se,imagen:ce}));let he=N||(t==null?void 0:t.id);if(console.log("🆔 Target ID:",he),he||(console.log("🆕 No hay ID, creando uno..."),he=await be()),!he){console.warn("⚠️ No se pudo obtener ID, abortando subida");return}console.log("✅ ID confirmado:",he);const Fe=`${Date.now()}_${pe.file.name}_${Math.random().toString(36).slice(2,7)}`,Te=Xe({productId:he,section:"main",file:pe.file});console.log("⬆️ Iniciando subida a Firebase Storage...");const xe=await wt(De,pe.file,Te,Fe);console.log("✅ Imagen subida exitosamente! URL:",xe),L(se=>({...se,imagen:""})),f(se=>{const Le=[{url:xe}],Me={...se,imagen:xe,imagenPrincipal:Le};return console.log("💾 Guardando en Firestore y actualizando formData...",Me),Ve(he,{imagen:xe,imagenPrincipal:Le}).then(()=>{console.log("✅ Documento actualizado en Firestore")}).catch(ue=>{console.error("❌ Error actualizando Firestore:",ue)}),Me})}else ce&&!ce.startsWith("blob:")&&(Ze("imagen",ce),Ze("imagenPrincipal",[{url:ce}]),L(he=>({...he,imagen:""})))}catch(G){console.error("handleMainImageUFU error",G)}finally{I(!1),$(null)}},me=async H=>{if(console.log("🚀 handleGalleryUFU iniciado con:",H),R.current||!P.current){console.log("⏸️ Carga inicial - ignorando llamada para prevenir borrado");return}try{I(!0);const G=Array.isArray(H)?H:[];let pe=N||(t==null?void 0:t.id);if(pe||(pe=await be(),console.log("📝 ID creado para galería:",pe)),!pe){console.error("❌ No se pudo obtener ID para galería");return}const ce=G.filter(Me=>{var ue,at;return(Me==null?void 0:Me.file)&&((at=(ue=Me.file.type)==null?void 0:ue.startsWith)==null?void 0:at.call(ue,"image/"))}),he=G.filter(Me=>{var ue,at;return(Me==null?void 0:Me.file)&&((at=(ue=Me.file.type)==null?void 0:ue.startsWith)==null?void 0:at.call(ue,"video/"))}),Fe=G.filter(Me=>!(Me!=null&&Me.file)&&(Me==null?void 0:Me.url)&&!Me.url.startsWith("blob:")).map(Me=>Me.url),Te=Fe.filter(Me=>dt(Me)==="image"),xe=Fe.filter(Me=>dt(Me)==="video");console.log("📁 Nuevas imágenes:",ce.length,ce.map(Me=>{var ue;return(ue=Me.file)==null?void 0:ue.name})),console.log("🎬 Nuevos videos:",he.length,he.map(Me=>{var ue;return(ue=Me.file)==null?void 0:ue.name})),console.log("🔗 Imágenes existentes:",Te.length,Te),console.log("🔗 Videos existentes:",xe.length,xe);const se=[];for(const Me of ce)try{console.log("⬆️ Subiendo imagen:",Me.file.name);const ue=Xe({productId:pe,section:"gallery",file:Me.file}),at=await wt(De,Me.file,ue,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);se.push(at),console.log("✅ Imagen subida:",at)}catch(ue){console.error("❌ Error subiendo imagen:",Me.file.name,ue)}const Le=[];for(const Me of he)try{console.log("⬆️ Subiendo video:",Me.file.name);const ue=Xe({productId:pe,section:"videos",file:Me.file}),at=await wt(st,Me.file,ue,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);Le.push(at),console.log("✅ Video subido:",at)}catch(ue){console.error("❌ Error subiendo video:",Me.file.name,ue)}console.log("📋 Imágenes subidas:",se),console.log("📋 Videos subidos:",Le),f(Me=>{const ue=Te.filter(Et=>Et&&typeof Et=="string"&&Et.trim()!==""),at=se.filter(Et=>Et&&typeof Et=="string"&&Et.trim()!==""),ze=xe.filter(Et=>Et&&typeof Et=="string"&&Et.trim()!==""),kn=Le.filter(Et=>Et&&typeof Et=="string"&&Et.trim()!==""),Lt=Array.from(new Set([...ue,...at])),Vt=Array.from(new Set([...ze,...kn]));console.log("🔀 RESULTADO MERGE:"),console.log("  📸 Imágenes finales:",Lt.length,Lt),console.log("  🎬 Videos finales:",Vt.length,Vt);const Xt=!Me.imagen&&Lt.length>0,Wt=Xt?Lt[0]:Me.imagen;Xt&&console.log("⚠️ No hay imagen principal, usando primera de galería:",Wt);const ir={...Me,imagenes:Lt,videoUrls:Vt,...Xt?{imagen:Wt,imagenPrincipal:[{url:Wt}]}:{}},Mn={imagenes:Lt,videoUrls:Vt,...Xt?{imagen:Wt,imagenPrincipal:[{url:Wt}]}:{}};return Ve(pe,Mn).then(()=>{var Et,zn;console.log("✅ FIRESTORE ACTUALIZADO:",Mn),console.log("📊 ESTADO FINAL DEL PRODUCTO:"),console.log("  - Imagen principal:",ir.imagen?"✅":"❌"),console.log("  - Galería imágenes:",((Et=ir.imagenes)==null?void 0:Et.length)||0),console.log("  - Galería videos:",((zn=ir.videoUrls)==null?void 0:zn.length)||0)}).catch(Et=>{console.error("❌ ERROR FIRESTORE:",Et)}),ir}),L(Me=>({...Me,imagenes:[],productVideos:[]}))}catch(G){console.error("❌ handleGalleryUFU error general:",G)}finally{I(!1),$(null)}},je=async H=>{if(console.log("🚀 handleExtrasUFU iniciado con:",H),R.current||!P.current){console.log("⏸️ Carga inicial - ignorando llamada para prevenir borrado");return}try{I(!0);const G=Array.isArray(H)?H:[];let pe=N||(t==null?void 0:t.id);if(pe||(pe=await be(),console.log("📝 ID creado:",pe)),!pe){console.error("❌ No se pudo obtener ID del producto");return}const ce=G.filter(Te=>Te==null?void 0:Te.file),he=G.filter(Te=>!(Te!=null&&Te.file)&&(Te==null?void 0:Te.url)&&!Te.url.startsWith("blob:")).map(Te=>Te.url);console.log("📁 Archivos nuevos:",ce.length),console.log("🔗 URLs existentes:",he.length);const Fe=[];for(const Te of ce)try{console.log("⬆️ Subiendo:",Te.file.name);const xe=Xe({productId:pe,section:"extras",file:Te.file}),se=await wt(De,Te.file,xe,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);Fe.push(se),console.log("✅ Subido exitosamente:",se)}catch(xe){console.error("❌ Error subiendo archivo:",Te.file.name,xe)}console.log("📋 URLs subidas (extras):",Fe),f(Te=>{const xe=he.filter(ue=>ue&&typeof ue=="string"&&ue.trim()!==""),se=Fe.filter(ue=>ue&&typeof ue=="string"&&ue.trim()!==""),Le=Array.from(new Set([...xe,...se])),Me={...Te,imagenesExtra:Le};return Ve(pe,{imagenesExtra:Le}).then(()=>{console.log("✅ FIRESTORE ACTUALIZADO - imagenesExtra:",Le)}).catch(ue=>{console.error("❌ ERROR FIRESTORE:",ue)}),Me}),L(Te=>({...Te,extras:[]}))}catch(G){console.error("❌ handleExtrasUFU error general:",G)}finally{I(!1),$(null)}},te=async(H,G)=>{if(R.current||!P.current){console.log("⏸️ Carga inicial - ignorando llamada para prevenir borrado");return}try{I(!0);const pe=Array.isArray(H)?H:[];if(pe.length===0){L(he=>{var Fe;return{...he,variantes:{...he.variantes,[G]:{...((Fe=he.variantes)==null?void 0:Fe[G])||{},imagen:""}}}}),J(G,"imagen","");return}const ce=pe[0];if(ce!=null&&ce.file){L(Le=>{var Me;return{...Le,variantes:{...Le.variantes,[G]:{...((Me=Le.variantes)==null?void 0:Me[G])||{},imagen:""}}}}),L(Le=>{var Me;return{...Le,variantes:{...Le.variantes,[G]:{...((Me=Le.variantes)==null?void 0:Me[G])||{},imagen:ce.url}}}});let he=N||(t==null?void 0:t.id);he||(he=await be());const Fe=nt(G),Te=`${Date.now()}_${ce.file.name}_${Math.random().toString(36).slice(2,7)}`,xe=Xe({productId:he,section:"main",file:ce.file,variantId:Fe}),se=await wt(De,ce.file,xe,Te);L(Le=>{var Me;return{...Le,variantes:{...Le.variantes,[G]:{...((Me=Le.variantes)==null?void 0:Me[G])||{},imagen:""}}}}),J(G,"imagen",se)}else ce!=null&&ce.url&&!ce.url.startsWith("blob:")&&(J(G,"imagen",ce.url),L(he=>{var Fe;return{...he,variantes:{...he.variantes,[G]:{...((Fe=he.variantes)==null?void 0:Fe[G])||{},imagen:""}}}}))}catch(pe){console.error("handleVariantMainUFU error",pe)}finally{I(!1),$(null)}},ke=async(H,G)=>{var pe,ce,he,Fe;if(R.current||!P.current){console.log("⏸️ Carga inicial - ignorando llamada para prevenir borrado");return}try{I(!0);const Te=Array.isArray(H)?H:[],xe=Te.filter(ze=>ze==null?void 0:ze.file).map(ze=>ze.url).filter(Boolean);L(ze=>{var kn;return{...ze,variantes:{...ze.variantes,[G]:{...((kn=ze.variantes)==null?void 0:kn[G])||{},imagenes:xe}}}});const se=Te.filter(ze=>!(ze!=null&&ze.file)&&(ze==null?void 0:ze.url)&&!ze.url.startsWith("blob:")).map(ze=>ze.url),Le=Array.isArray((ce=(pe=d.variantes)==null?void 0:pe[G])==null?void 0:ce.imagenes)?d.variantes[G].imagenes:[],Me=Le.filter(ze=>!se.includes(ze));for(const ze of Me)await Qe(ze);JSON.stringify(se)!==JSON.stringify(Le)&&J(G,"imagenes",se);let ue=N||(t==null?void 0:t.id);if(ue||(ue=await be()),!ue)return;const at=nt(G);for(const ze of Te)if(ze!=null&&ze.file&&((Fe=(he=ze.file.type)==null?void 0:he.startsWith)!=null&&Fe.call(he,"image/"))){const kn=`${Date.now()}_${ze.file.name}_${Math.random().toString(36).slice(2,7)}`,Lt=Xe({productId:ue,section:"gallery",file:ze.file,variantId:at});try{const Vt=await wt(De,ze.file,Lt,kn);f(Xt=>{var zn;const Wt=[...Xt.variantes||[]],ir=Array.isArray((zn=Wt[G])==null?void 0:zn.imagenes)?Wt[G].imagenes:[];Wt[G]={...Wt[G]||{},imagenes:[...ir,Vt]};const Mn={...Xt,variantes:Wt},Et=N||(t==null?void 0:t.id);return Et&&bi(pt(Ue,"productos",Et),{variantes:Wt,fechaActualizacion:new Date}).catch(()=>{}),Mn})}catch(Vt){console.error("Variant gallery upload error",Vt)}}}catch(Te){console.error("handleVariantGalleryUFU error",Te)}finally{I(!1),$(null)}},Se=async(H,G)=>{var pe,ce,he,Fe;if(R.current||!P.current){console.log("⏸️ Carga inicial - ignorando llamada para prevenir borrado");return}try{const Te=Array.isArray(H)?H:[],xe=Te.filter(ze=>ze==null?void 0:ze.file).map(ze=>ze.url).filter(Boolean);L(ze=>{var kn;return{...ze,variantes:{...ze.variantes,[G]:{...((kn=ze.variantes)==null?void 0:kn[G])||{},videos:xe}}}});const se=Te.filter(ze=>!(ze!=null&&ze.file)&&(ze==null?void 0:ze.url)&&!ze.url.startsWith("blob:")).map(ze=>ze.url),Le=Array.isArray((ce=(pe=d.variantes)==null?void 0:pe[G])==null?void 0:ce.videoUrls)?d.variantes[G].videoUrls:[],Me=Le.filter(ze=>!se.includes(ze));for(const ze of Me)await Qe(ze);JSON.stringify(se)!==JSON.stringify(Le)&&J(G,"videoUrls",se);let ue=N||(t==null?void 0:t.id);if(ue||(ue=await be()),!ue)return;const at=nt(G);for(const ze of Te)if(ze!=null&&ze.file&&((Fe=(he=ze.file.type)==null?void 0:he.startsWith)!=null&&Fe.call(he,"video/"))){const kn=`${Date.now()}_${ze.file.name}_${Math.random().toString(36).slice(2,7)}`,Lt=Xe({productId:ue,section:"gallery",file:ze.file,variantId:at});try{const Vt=await wt(st,ze.file,Lt,kn);f(Xt=>{var zn;const Wt=[...Xt.variantes||[]],ir=Array.isArray((zn=Wt[G])==null?void 0:zn.videoUrls)?Wt[G].videoUrls:[];Wt[G]={...Wt[G]||{},videoUrls:[...ir,Vt]};const Mn={...Xt,variantes:Wt},Et=N||(t==null?void 0:t.id);return Et&&bi(pt(Ue,"productos",Et),{variantes:Wt,fechaActualizacion:new Date}).catch(()=>{}),Mn})}catch(Vt){console.error("Variant video upload error",Vt)}}}catch(Te){console.error("handleVariantVideosUFU error",Te)}},vt=async H=>{try{const G={nombre:H,ruta:H.toLowerCase().replace(/\s+/g,"-"),activa:!0,fechaCreacion:new Date,productCount:0};return await er(pt(Ue,"categorias",G.ruta),G),y(pe=>[...pe,{id:G.ruta,...G}]),G.ruta}catch(G){throw console.error("Error creating category:",G),G}},jt=async H=>{H.preventDefault();const G=[];String(d.nombre||"").trim()||G.push("El nombre del producto es obligatorio"),String(d.empresa||"").trim();const ce=xe=>{if(typeof xe=="number")return xe;let se=String(xe??"").trim();if(!se)return NaN;se=se.replace(/\s/g,""),se.includes(",")&&/,\d{1,2}$/.test(se)?se=se.replace(/\./g,"").replace(",","."):se=se.replace(/,/g,"");const Le=parseFloat(se);return Number.isFinite(Le)?Le:NaN},he=ce(d.precio);(!Number.isFinite(he)||he<0)&&G.push("Precio inválido");const Fe=parseInt(d.cantidad);(!Number.isFinite(Fe)||Fe<0)&&G.push("Cantidad inválida"),q&&(String(d.nuevaCategoria||"").trim()||G.push("Escribe el nombre de la nueva categoría"));let Te=!1;if(d.oferta){const xe=String(d.precioOferta??"").trim();if(!xe)Te=!0;else{const se=ce(xe);(!Number.isFinite(se)||se<0||Number.isFinite(he)&&se>=he)&&(Te=!0)}}if(G.length){alert(`Corrige los siguientes campos antes de guardar:
- `+G.join(`
- `));return}b(!0);try{let xe=d.categoria;q&&d.nuevaCategoria.trim()&&(xe=await vt(d.nuevaCategoria.trim()));let se={...d,categoria:xe,precio:Number.isFinite(he)?he:0,fechaActualizacion:new Date,acerca:(Array.isArray(d.acerca)?d.acerca:[]).filter(at=>String(at||"").trim()),etiquetas:(Array.isArray(d.etiquetas)?d.etiquetas:[]).filter(at=>String(at||"").trim()),variantes:(Array.isArray(d.variantes)?d.variantes:[]).map(at=>{const ze=Number.isFinite(parseInt(at==null?void 0:at.cantidad))?parseInt(at.cantidad):0,kn=(at==null?void 0:at.precio)!==void 0&&(at==null?void 0:at.precio)!==null&&String(at.precio).trim()!=="",Lt=kn?ce(at.precio)||0:void 0;return{...at,cantidad:ze,...kn?{precio:Lt}:{},id:(at==null?void 0:at.id)||`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,imagenPrincipal:(at==null?void 0:at.imagenPrincipal)||[],galeriaImagenes:(at==null?void 0:at.galeriaImagenes)||[],imagen:(at==null?void 0:at.imagen)||"",imagenes:(at==null?void 0:at.imagenes)||[],videoUrls:(at==null?void 0:at.videoUrls)||[]}})};Te&&(se.oferta=!1,delete se.precioOferta),se.activo=!!se.activo,delete se.nuevaCategoria,delete se._tempVideoUrl,delete se.media,se.imagenPrincipal=d.imagenPrincipal||[],se.galeriaImagenes=d.galeriaImagenes||[],se.tresArchivosExtras=d.tresArchivosExtras||[],se.videoAcercaArticulo=d.videoAcercaArticulo||[],se.imagenesExtra=d.imagenesExtra||[],se.imagen=d.imagen||"",se.imagenes=d.imagenes||[],se.videoUrls=d.videoUrls||[],se.videoUrl=d.videoUrl||"",se.varianteImagenPrincipal=d.varianteImagenPrincipal||"",se.empresa&&(se.empresa=se.empresa.trim(),se.empresaNorm=se.empresa.toLowerCase());const Le=(t==null?void 0:t.id)||N||(d==null?void 0:d.id)||null;if(t&&!t.id)throw new Error("Producto en edición sin ID válido. No se guardó para evitar duplicados.");const Me=!Le,ue=Me?`prod_${Date.now()}`:Le;se.id=ue,se.nombre&&!se.slug&&(se.slug=et(se.nombre)),Me&&(se.fechaCreacion=new Date,se.ownerUid||(se.ownerUid=(i==null?void 0:i.uid)||(a==null?void 0:a.uid)||null),se.ownerName||(se.ownerName=((a==null?void 0:a.displayName)||(i==null?void 0:i.email)||"").toString())),await er(pt(Ue,"productos",ue),{...se,fechaActualizacion:new Date},{merge:!0}),Me&&j(ue),typeof n=="function"&&n(),typeof e=="function"&&e()}catch(xe){console.error("Error saving product:",xe);let se="Error al guardar el producto";(xe==null?void 0:xe.code)==="permission-denied"?se="No tienes permisos para guardar este producto":(xe==null?void 0:xe.code)==="network-request-failed"?se="Error de conexión. Verifica tu internet e inténtalo de nuevo":typeof(xe==null?void 0:xe.message)=="string"&&xe.message&&(se=xe.message),alert(se)}finally{b(!1)}};return o.jsx(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-stretch justify-stretch",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(de.div,{className:"bg-white w-screen h-screen overflow-hidden flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[o.jsxs("div",{className:"bg-blue-700 text-white p-4 md:p-6 flex justify-between items-center sticky top-0 z-10 shadow",children:[o.jsx("h2",{className:"text-2xl font-bold",children:t?"Editar Producto":"Agregar Producto"}),o.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 text-2xl font-bold",children:"×"})]}),o.jsx("form",{onSubmit:jt,className:"flex-1 overflow-y-auto p-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{children:"📝"})," Información Básica"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Nombre del Producto *"]})}),o.jsx("input",{type:"text",required:!0,value:d.nombre,onChange:H=>Ze("nombre",H.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200 text-lg font-medium",placeholder:"Ej: iPhone 15 Pro Max"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Marca / Empresa"]})}),o.jsx("input",{type:"text",list:"brands-list",value:d.empresa||"",onChange:H=>Ze("empresa",H.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"Ej: Apple, Samsung, Sony"}),o.jsx("datalist",{id:"brands-list",children:x.map(H=>o.jsx("option",{value:H},H))}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sugerencias basadas en tus marcas guardadas. Se guardará sin importar mayúsculas/minúsculas."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio *"}),o.jsx("input",{type:"number",step:"0.01",required:!0,value:d.precio,onChange:H=>Ze("precio",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad en Stock *"}),o.jsx("input",{type:"number",min:"0",required:!0,value:d.cantidad,onChange:H=>Ze("cantidad",parseInt(H.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),o.jsx("textarea",{value:d.descripcion||"",onChange:H=>Ze("descripcion",H.target.value),placeholder:"Escribe la descripción del producto...",className:"w-full min-h-[140px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Categoría y Estado"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría *"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("select",{value:q?"":d.categoria,onChange:H=>{H.target.value==="nueva"?D(!0):(D(!1),Ze("categoria",H.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"Seleccionar categoría"}),g.map(H=>o.jsx("option",{value:H.id,children:H.nombre},H.id)),o.jsx("option",{value:"nueva",children:"+ Crear nueva categoría"})]}),q&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Nombre de la nueva categoría",value:d.nuevaCategoria,onChange:H=>Ze("nuevaCategoria",H.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),o.jsx("button",{type:"button",onClick:()=>{D(!1),Ze("nuevaCategoria","")},className:"px-3 py-2 text-gray-500 hover:text-gray-700",children:"Cancelar"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),o.jsxs("select",{value:d.estado,onChange:H=>Ze("estado",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"Nuevo",children:"Nuevo"}),o.jsx("option",{value:"Usado",children:"Usado"}),o.jsx("option",{value:"Reacondicionado",children:"Reacondicionado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Publicación"}),o.jsx("input",{type:"date",value:d.fechaPublicacion,onChange:H=>Ze("fechaPublicacion",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:d.oferta,onChange:H=>Ze("oferta",H.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"En oferta"]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:d.activo,onChange:H=>Ze("activo",H.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Producto activo"]})]}),d.oferta&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de Oferta"}),o.jsx("input",{type:"number",step:"0.01",value:d.precioOferta,onChange:H=>Ze("precioOferta",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Precio con descuento"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (opcional)"}),o.jsx("input",{type:"text",value:d.peso,onChange:H=>Ze("peso",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 1.5 kg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensiones (opcional)"}),o.jsx("input",{type:"text",value:d.dimensiones,onChange:H=>Ze("dimensiones",H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 30x20x10 cm"})]})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{children:"🖼️"})," Imágenes y Multimedia"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"📷 Imagen Principal *"}),o.jsx(nl,{files:d.imagen&&typeof d.imagen=="string"?[{id:"saved-main",url:d.imagen,type:"image",name:d.imagen.split("/").pop().split("?")[0]||"imagen-principal",size:0,isUploaded:!0}]:T.imagen?[{id:"temp-main",url:T.imagen,type:"image",name:"imagen-principal",size:0,isUploaded:!1}]:[],onFilesChange:X,acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen principal",allowReorder:!1,allowSetMain:!1}),d.imagen&&o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🎨 ¿De qué variante/color es esta imagen principal?"}),o.jsx("input",{type:"text",value:d.varianteImagenPrincipal||"",onChange:H=>{const G=H.target.value;f(pe=>({...pe,varianteImagenPrincipal:G})),(N||t!=null&&t.id)&&Ve(N||t.id,{varianteImagenPrincipal:G}).catch(pe=>console.error("Error actualizando variante de imagen principal:",pe))},placeholder:"Ej: Negro, Azul, Rojo, etc. (Dejar vacío si es genérica)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"💡 Escribe el color o variante que representa esta imagen. En VistaProducto será parte del selector de variantes."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"🎬 Galería (Imágenes y Videos)"}),o.jsx(nl,{files:[...Array.isArray(d.imagenes)&&d.imagenes.length>0?d.imagenes.map((H,G)=>{const pe=typeof H=="string"?H:(H==null?void 0:H.url)||H,ce=pe.split("/").pop().split("?")[0]||`imagen-${G+1}`;return{id:`saved-img-${G}`,url:pe,type:"image",name:ce,size:0,isUploaded:!0}}):[],...Array.isArray(d.videoUrls)&&d.videoUrls.length>0?d.videoUrls.map((H,G)=>{const pe=typeof H=="string"?H:(H==null?void 0:H.url)||H,ce=pe.split("/").pop().split("?")[0]||`video-${G+1}`;return{id:`saved-vid-${G}`,url:pe,type:"video",name:ce,size:0,isUploaded:!0}}):[],...(!d.imagenes||d.imagenes.length===0)&&Array.isArray(T.imagenes)?T.imagenes.map((H,G)=>({id:`temp-gallery-img-${G}`,url:H,type:"image",name:H.split("/").pop().split("?")[0]||`imagen-${G+1}`,size:0,isUploaded:!1})):[],...(!d.videoUrls||d.videoUrls.length===0)&&Array.isArray(T.productVideos)?T.productVideos.map((H,G)=>({id:`temp-gallery-vid-${G}`,url:H,type:"video",name:H.split("/").pop().split("?")[0]||`video-${G+1}`,size:0,isUploaded:!1})):[]],onFilesChange:me,acceptedTypes:"image/*,video/*",multiple:!0,label:"Galería (Imágenes y Videos)",placeholder:"Arrastra o selecciona imágenes o videos",allowReorder:!0,allowSetMain:!0})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{children:"📋"})," Detalles del Producto"]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Características (Acerca de)"}),d.acerca.map((H,G)=>o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:H,onChange:pe=>Rt("acerca",G,pe.target.value),placeholder:"Característica del producto",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("button",{type:"button",onClick:()=>pn("acerca",G),className:"px-3 py-2 text-red-500 hover:text-red-700",children:"×"})]},G)),o.jsx("button",{type:"button",onClick:()=>At("acerca"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar característica"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiquetas (para búsqueda)"}),d.etiquetas.map((H,G)=>o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:H,onChange:pe=>Rt("etiquetas",G,pe.target.value),placeholder:"Etiqueta",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("button",{type:"button",onClick:()=>pn("etiquetas",G),className:"px-3 py-2 text-red-500 hover:text-red-700",children:"×"})]},G)),o.jsx("button",{type:"button",onClick:()=>At("etiquetas"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar etiqueta"})]})]}),o.jsxs("div",{className:"mt-8 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Variantes del Producto"}),d.variantes&&d.variantes.length>1&&o.jsx("div",{className:"mb-4",children:o.jsx(Fj,{variants:d.variantes.map((H,G)=>{var pe,ce;return{id:H.id||`var_${G}`,name:H.color||`Variante ${G+1}`,price:H.precio,stock:H.cantidad,image:((ce=(pe=H.imagenPrincipal)==null?void 0:pe[0])==null?void 0:ce.url)||H.imagen,isSelected:ye===G}}),productMainImage:((Ot=(ct=d.imagenPrincipal)==null?void 0:ct[0])==null?void 0:Ot.url)||d.imagen,onVariantChange:He,className:"max-w-md"})})]}),d.variantes.map((H,G)=>{var pe,ce,he,Fe,Te,xe;return o.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-6 bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h4",{className:"font-semibold text-lg text-gray-900",children:["Variante ",G+1]}),o.jsx("button",{type:"button",onClick:()=>pn("variantes",G),className:"px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:"Eliminar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color/Tipo"}),o.jsx("input",{type:"text",value:H.color,onChange:se=>J(G,"color",se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. Rojo, Azul, Edición Especial"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad en Stock"}),o.jsx("input",{type:"number",min:"0",value:H.cantidad,onChange:se=>J(G,"cantidad",parseInt(se.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de la variante (opcional)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:H.precio??"",onChange:se=>J(G,"precio",se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. 1999.99"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción de la variante"}),o.jsx("textarea",{rows:2,value:H.descripcion||"",onChange:se=>J(G,"descripcion",se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. Color neón, control edición especial, etc."})]})]}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Imágenes de la Variante"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"📷 Imagen Principal de Variante"}),o.jsx(nl,{files:[...(ce=(pe=T.variantes)==null?void 0:pe[G])!=null&&ce.imagen?[{id:`temp-var${G}-main`,url:T.variantes[G].imagen,type:"image",name:`var${G}-imagen`,size:0,isUploaded:!1}]:[],...H.imagen&&typeof H.imagen=="string"?[{id:`saved-var${G}-main`,url:H.imagen,type:"image",name:`var${G}-imagen`,size:0,isUploaded:!0}]:[]],onFilesChange:se=>te(se,G),acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen",allowReorder:!1,allowSetMain:!1})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"🎬 Galería de Imágenes"}),o.jsx(nl,{files:[...Array.isArray(H.imagenes)?H.imagenes.map((se,Le)=>({id:`saved-var${G}-img-${Le}`,url:typeof se=="string"?se:(se==null?void 0:se.url)||se,type:"image",name:`var${G}-img-${Le+1}`,size:0,isUploaded:!0})):[],...(((Fe=(he=T.variantes)==null?void 0:he[G])==null?void 0:Fe.imagenes)||[]).map((se,Le)=>({id:`temp-var${G}-img-${Le}`,url:se,type:"image",name:`var${G}-img-${Le+1}`,size:0,isUploaded:!1}))],onFilesChange:se=>ke(se,G),acceptedTypes:"image/*",multiple:!0,label:"Galería",placeholder:"Arrastra o selecciona imágenes",allowReorder:!0,allowSetMain:!0})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"🎥 Videos de la Variante (Opcional)"}),o.jsx(nl,{files:[...Array.isArray(H.videoUrls)?H.videoUrls.map((se,Le)=>({id:`saved-var${G}-vid-${Le}`,url:typeof se=="string"?se:(se==null?void 0:se.url)||se,type:"video",name:`video-${Le+1}`,size:0,isUploaded:!0})):[],...(((xe=(Te=T.variantes)==null?void 0:Te[G])==null?void 0:xe.videos)||[]).map((se,Le)=>({id:`temp-var${G}-video-${Le}`,url:se,type:"video",name:`video-${Le+1}`,size:0,isUploaded:!1}))],onFilesChange:se=>Se(se,G),acceptedTypes:"video/*",multiple:!0,label:"Videos",placeholder:"Arrastra o selecciona videos",allowReorder:!0,allowSetMain:!0})]})]})]},G)}),o.jsx("button",{type:"button",onClick:()=>At("variantes"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar variante"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx("span",{children:"📸"})," Imágenes con más información del artículo"]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:'Imágenes que se mostrarán en la sección "Más información del producto"'}),o.jsx(nl,{files:[...(d.imagenesExtra||[]).map((H,G)=>({id:`saved-info-${G}`,url:H,type:dt(H),name:(String(H).split("/").pop()||`info-${G+1}`).split("?")[0],size:0,isUploaded:!0})),...(T.extras||[]).map((H,G)=>({id:`temp-info-${G}`,url:H,type:"image",name:`info-${G+1}`,size:0,isUploaded:!1}))],onFilesChange:je,acceptedTypes:"image/*",multiple:!0,label:"Imágenes informativas del producto",placeholder:"📸 Arrastra o selecciona imágenes de alta resolución con información adicional del producto",allowReorder:!0,allowSetMain:!1})]})]}),o.jsxs("div",{className:"mt-8 flex justify-end space-x-4 pt-6 border-t",children:[o.jsx("button",{type:"button",onClick:e,className:"px-8 py-3 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium text-lg",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:S,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg flex items-center space-x-2",children:S?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),o.jsx("span",{children:"Guardando..."})]}):o.jsx("span",{children:"Guardar Producto"})})]})]})})]})})},Xm=({size:t="medium",color:e="blue",className:n="",fullScreen:r=!1,text:i=null})=>{const a={small:"loading-spinner-small",medium:"loading-spinner-medium",large:"loading-spinner-large",xlarge:"loading-spinner-xlarge"},c={blue:"loading-spinner-blue",white:"loading-spinner-white",gray:"loading-spinner-gray",green:"loading-spinner-green",red:"loading-spinner-red"};return r?o.jsx("div",{className:"loading-spinner-fullscreen",children:o.jsxs("div",{className:"loading-spinner-container",children:[o.jsx("div",{className:`loading-spinner ${a[t]} ${c[e]} ${n}`}),i&&o.jsx("p",{className:"loading-spinner-text",children:i})]})}):o.jsxs("div",{className:`loading-spinner-inline ${n}`,children:[o.jsx("div",{className:`loading-spinner ${a[t]} ${c[e]}`}),i&&o.jsx("span",{className:"loading-spinner-text-inline",children:i})]})};function tB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function nB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function rB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function iB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function sB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function aB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function oB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function $j(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function A1(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function lB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function cB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function Fk(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function zj(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function uB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function dB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function Uk(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function hB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function sm(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function fB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function yx(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}const Tl="phantomCategories",I1=()=>{try{const t=localStorage.getItem(Tl);return t?JSON.parse(t):[]}catch(t){return console.error("Error al leer categorías fantasma:",t),[]}},mB=t=>{try{const e=I1();return e.includes(t)?!1:(e.push(t),localStorage.setItem(Tl,JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:Tl,newValue:JSON.stringify(e),url:window.location.href})),console.log(`✅ Categoría ${t} agregada a fantasmas. Total: ${e.length}`),!0)}catch(e){return console.error("Error al agregar categoría fantasma:",e),!1}},pB=()=>{try{const e=I1().length;return localStorage.setItem(Tl,JSON.stringify([])),window.dispatchEvent(new StorageEvent("storage",{key:Tl,newValue:JSON.stringify([]),url:window.location.href})),console.log(`✅ ${e} categorías fantasma limpiadas`),e}catch(t){return console.error("Error al limpiar categorías fantasma:",t),0}},gB=async t=>{try{const e=pt(Ue,"categorias",t);return(await Vr(e)).exists()?!0:(console.log(`🚨 Categoría ${t} no existe en Firebase - marcando como fantasma`),mB(t),!1)}catch(e){return console.error(`Error verificando categoría ${t}:`,e),!1}},yB=async()=>{try{const t=I1();console.log(`🧹 Limpiando ${t.length} categorías fantasma...`);const e=[],n=[];for(const r of t)await gB(r)?(n.push(r),console.log(`✅ Categoría ${r} recuperada (ya no es fantasma)`)):e.push(r);return localStorage.setItem(Tl,JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:Tl,newValue:JSON.stringify(e),url:window.location.href})),console.log(`🎉 Limpieza completada: ${n.length} recuperadas, ${e.length} siguen siendo fantasmas`),{total:t.length,recovered:n.length,stillPhantoms:e.length}}catch(t){return console.error("Error durante limpieza de categorías fantasma:",t),null}},xB="ZeiFzBgosCd0apv9cXL6aQZCYyu2",Bj=({onAddProduct:t,onEditProduct:e})=>{const{usuario:n}=Jr(),r=(n==null?void 0:n.uid)===xB,[i,a]=k.useState([]),[c,u]=k.useState([]),[d,f]=k.useState(!0),[g,y]=k.useState(""),[x,w]=k.useState(""),[S,b]=k.useState("fechaCreacion"),[N,j]=k.useState(()=>{try{const J=localStorage.getItem("phantomProducts");return J?JSON.parse(J):[]}catch{return[]}});k.useEffect(()=>{n||console.warn("! No hay usuario autenticado")},[n]);const[O,I]=k.useState("desc"),[V,$]=k.useState(!1),[q,D]=k.useState(null),[R,P]=k.useState(null),[T,L]=k.useState(null),[U,A]=k.useState(""),[oe,ae]=k.useState(""),[Ce,Pe]=k.useState(""),[ee,ie]=k.useState(""),[ye,B]=k.useState(""),[Z,be]=k.useState(""),[Ve,We]=k.useState("");k.useEffect(()=>{et()},[]),k.useEffect(()=>{const J=ht();return()=>{typeof J=="function"&&J()}},[n==null?void 0:n.uid]),k.useEffect(()=>{const J=He=>{if(He.key==="phantomProducts")try{const De=He.newValue?JSON.parse(He.newValue):[];j(De)}catch(De){console.error("Error al parsear phantomProducts:",De)}};return window.addEventListener("storage",J),()=>window.removeEventListener("storage",J)},[]);const et=async()=>{try{const He=(await os(Ht(Ue,"categorias"))).docs.map(De=>({id:De.id,...De.data()}));u(He)}catch(J){console.error("Error loading categories:",J)}},ht=()=>{try{let J;return r?J=fn(Ht(Ue,"productos"),Hs("fechaCreacion","desc")):n!=null&&n.uid?J=fn(Ht(Ue,"productos"),Sr("ownerUid","==",n.uid)):J=fn(Ht(Ue,"productos"),Sr("activo","==",!0)),Un(J,De=>{j(st=>{const wt=[];return De.docs.forEach(Qe=>{!st.includes(Qe.id)&&Qe.exists()&&wt.push({id:Qe.id,...Qe.data()})}),a(wt),f(!1),st})},De=>{console.error("Error en listener:",De),f(!1)})}catch(J){return console.error("Error loading products:",J),f(!1),null}};k.useMemo(()=>{if(!r)return[];const J=new Set;return i.forEach(He=>{const De=(He.ownerName||He.empresa||"").trim();De&&J.add(De)}),Array.from(J).sort((He,De)=>He.localeCompare(De))},[r,i]);const Xe=J=>{try{return typeof(J==null?void 0:J.cantidad)=="number"?Number(J.cantidad)||0:Array.isArray(J==null?void 0:J.variantes)&&J.variantes.length?J.variantes.reduce((He,De)=>He+(parseInt(De==null?void 0:De.cantidad)||0),0):Number.POSITIVE_INFINITY}catch{return Number.POSITIVE_INFINITY}},nt=async(J,He)=>{try{const De=pt(Ue,"productos",J);if(!(await Vr(De)).exists()){console.warn(`! Producto ${J} no existe en Firebase - eliminando del estado local`),a(wt=>wt.filter(Qe=>Qe.id!==J)),alert("Este producto no existe en la base de datos y ha sido eliminado de la lista.");return}await bi(De,{activo:!He,fechaActualizacion:new Date})}catch(De){console.error("Error updating product status:",De),alert(`Error al actualizar el estado del producto: ${De.message}`)}},St=async J=>{try{const He=pt(Ue,"productos",J.id),De=await Vr(He);if(!De.exists()){console.warn(`! Producto ${J.id} no existe en Firebase - eliminando del estado local`),a(dt=>dt.filter(W=>W.id!==J.id)),alert("Este producto no existe en la base de datos y ha sido eliminado de la lista. No se puede duplicar.");return}const st=De.data(),wt=`prod_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,Qe=JSON.parse(JSON.stringify(st));Qe.nombre=`${st.nombre} (Copia)`,Qe.fechaCreacion=new Date,Qe.fechaActualizacion=new Date,!Qe.categoria&&st.categoria&&(Qe.categoria=st.categoria),Qe.activo=!0,Qe.estado||(Qe.estado="activo"),Array.isArray(Qe.variantes)&&Qe.variantes.length>0&&(Qe.variantes=Qe.variantes.map(dt=>{const W={...dt};return W.id=`var_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,Array.isArray(W.media)&&W.media.length>0&&(W.media=W.media.map(X=>({...X,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),W})),Array.isArray(Qe.media)&&Qe.media.length>0&&(Qe.media=Qe.media.map(dt=>({...dt,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),Array.isArray(Qe.imagenes)&&Qe.imagenes.length>0&&(Qe.imagenes=[...Qe.imagenes]),await er(pt(Ue,"productos",wt),Qe),await new Promise(dt=>setTimeout(dt,500)),alert(`Producto duplicado exitosamente con ID: ${wt}`)}catch(He){console.error("Error duplicating product:",He),alert(`Error al duplicar el producto: ${He.message}`)}},xt=async(J,He,De)=>{try{const st=pt(Ue,"productos",J);if(!(await Vr(st)).exists()){console.warn(`! Producto ${J} no existe en Firebase - eliminando del estado local`),a(Qe=>Qe.filter(dt=>dt.id!==J)),alert("Este producto no existe en la base de datos y ha sido eliminado de la lista.");return}await bi(st,{[He]:De,fechaActualizacion:new Date})}catch(st){console.error(`Error updating ${He}:`,st),alert(`Error al actualizar ${He}: ${st.message}`)}},Tt=async()=>{if(!q)return;const J=q.id,He=q.nombre||"Producto";$(!1),D(null);try{const De=pt(Ue,"productos",J);if(!(await Vr(De)).exists()){j(W=>{if(!W.includes(J)){const X=[...W,J];return localStorage.setItem("phantomProducts",JSON.stringify(X)),X}return W}),a(W=>W.filter(X=>X.id!==J));const dt=document.createElement("div");dt.textContent=`"${He}" eliminado permanentemente (fantasma limpiado)`,dt.style.cssText=`
          position: fixed;
          top: 20px;
          right: 20px;
          background: #dc2626;
          color: white;
          padding: 16px 24px;
          border-radius: 8px;
          font-weight: 600;
          z-index: 10000;
          box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        `,document.body.appendChild(dt),setTimeout(()=>dt.remove(),3e3);return}if(await Cp(De),(await Vr(De)).exists()){console.error("ERROR: El producto AÚN EXISTE después de deleteDoc"),alert("Error: No se pudo eliminar de Firebase. Verifica los permisos.");return}a(dt=>dt.filter(W=>W.id!==J));const Qe=document.createElement("div");Qe.textContent=`"${He}" eliminado`,Qe.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #2563eb;
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        font-weight: 600;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      `,document.body.appendChild(Qe),setTimeout(()=>Qe.remove(),3e3)}catch(De){console.error("Error al eliminar producto:",De.code,De.message),alert(`Error: ${De.message}`)}},Ze=i.filter(J=>{var He;try{const De=g.toLowerCase(),st=(J.nombre||"").toLowerCase().includes(De)||(J.descripcion||"").toLowerCase().includes(De)||(J.empresa||"").toLowerCase().includes(De)||(J.categoria||"").toLowerCase().includes(De),wt=!x||J.categoria===x,Qe=!U||(U==="activo"?J.activo!==!1:J.activo===!1),dt=Xe(J),W=Number.isFinite(dt)?dt<=0?"agotado":dt<=5?"bajo":"disponible":"disponible",X=!oe||W===oe,me=parseFloat(J.precio)||0,je=(Ce===""||me>=parseFloat(Ce))&&(ee===""||me<=parseFloat(ee)),te=(He=J==null?void 0:J.fechaCreacion)!=null&&He.seconds?J.fechaCreacion.seconds*1e3:J!=null&&J.fechaCreacion?new Date(J.fechaCreacion).getTime():null,ke=!ye||te&&te>=new Date(ye).setHours(0,0,0,0),Se=!Z||te&&te<=new Date(Z).setHours(23,59,59,999),vt=ke&&Se,jt=!r||!Ve||(J.ownerName||J.empresa||"")===Ve;return st&&wt&&Qe&&X&&je&&vt&&jt}catch(De){return console.warn("Error filtrando producto:",J==null?void 0:J.id,De),!1}}).sort((J,He)=>{let De=J[S],st=He[S];return S==="precio"?(De=parseFloat(De)||0,st=parseFloat(st)||0):(S==="fechaCreacion"||S==="fechaActualizacion")&&(De=new Date(De!=null&&De.seconds?De.seconds*1e3:De),st=new Date(st!=null&&st.seconds?st.seconds*1e3:st)),O==="asc"?De>st?1:-1:De<st?1:-1}),Rt=J=>{const He=c.find(De=>De.id===J);return(He==null?void 0:He.nombre)||J},At=J=>J?(J.seconds?new Date(J.seconds*1e3):new Date(J)).toLocaleDateString("es-ES"):"N/A",pn=J=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(J||0);return d?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Xm,{size:"large",color:"blue",text:"Cargando productos..."})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestión de Productos"}),o.jsxs("p",{className:"text-gray-600",children:[i.length," productos en total"]})]}),o.jsxs("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"+"}),"Agregar Producto"]})]}),o.jsx("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm border",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{children:o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",placeholder:"Buscar productos...",value:g,onChange:J=>y(J.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})})})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría"}),o.jsxs("select",{value:x,onChange:J=>w(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"Todas las categorías"}),c.map(J=>o.jsx("option",{value:J.id,children:J.nombre},J.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordenar por"}),o.jsxs("select",{value:S,onChange:J=>b(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"fechaCreacion",children:"Fecha de creación"}),o.jsx("option",{value:"fechaActualizacion",children:"Última actualización"}),o.jsx("option",{value:"nombre",children:"Nombre"}),o.jsx("option",{value:"precio",children:"Precio"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),o.jsxs("select",{value:O,onChange:J=>I(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"desc",children:"Descendente"}),o.jsx("option",{value:"asc",children:"Ascendente"})]})]})]})}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 md:gap-6",children:o.jsx(cn,{children:Ze.map(J=>o.jsxs(de.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"relative h-48 bg-white rounded-t-lg overflow-hidden flex items-center justify-center",children:[(()=>{try{const He=J.imagen||(Array.isArray(J.imagenes)&&J.imagenes.length>0?J.imagenes[0]:null)||(Array.isArray(J.variantes)&&J.variantes.length>0&&J.variantes[0].imagen?J.variantes[0].imagen:null);return He?o.jsx("img",{src:He,alt:J.nombre||"Producto",className:"w-full h-full object-contain",onError:De=>{De.target.style.display="none",De.target.nextSibling.style.display="flex"}}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:o.jsx("span",{className:"text-sm",children:"Sin imagen"})})}catch(He){return console.warn("Error renderizando imagen del producto:",J.id,He),o.jsx("div",{className:"w-full h-full flex items-center justify-center text-red-400 bg-red-50",children:o.jsx("span",{className:"text-sm",children:"Error en imagen"})})}})(),o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 bg-gray-50",style:{display:"none"},children:o.jsxs("div",{className:"text-center",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsx("span",{className:"text-sm",children:"Sin imagen"})]})}),o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${J.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:J.activo?"Activo":"Inactivo"})}),J.oferta&&o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Oferta"})})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:J.nombre}),o.jsx("button",{onClick:()=>nt(J.id,J.activo),className:`ml-2 p-1 rounded ${J.activo?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:J.activo?"Desactivar":"Activar",children:J.activo?o.jsx(A1,{}):o.jsx($j,{})})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Rt(J.categoria)}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T===J.id?o.jsx("input",{type:"number",step:"0.01",defaultValue:J.precio,onBlur:He=>{xt(J.id,"precio",parseFloat(He.target.value)||0),L(null)},onKeyDown:He=>{He.key==="Enter"&&(xt(J.id,"precio",parseFloat(He.target.value)||0),L(null)),He.key==="Escape"&&L(null)},className:"text-lg font-bold text-blue-700 bg-blue-50 border border-blue-200 rounded px-2 py-1 w-24",autoFocus:!0}):o.jsx("p",{className:"text-lg font-bold text-blue-700 cursor-pointer hover:bg-blue-50 px-2 py-1 rounded",onClick:()=>L(J.id),title:"Click para editar precio",children:pn(J.precio)}),J.cantidad!==void 0&&o.jsx("div",{className:"text-sm",children:R===J.id?o.jsx("input",{type:"number",min:"0",defaultValue:J.cantidad,onBlur:He=>{xt(J.id,"cantidad",parseInt(He.target.value)||0),P(null)},onKeyDown:He=>{He.key==="Enter"&&(xt(J.id,"cantidad",parseInt(He.target.value)||0),P(null)),He.key==="Escape"&&P(null)},className:"bg-gray-50 border border-gray-200 rounded px-2 py-1 w-16 text-center",autoFocus:!0}):o.jsxs("span",{className:`cursor-pointer hover:bg-gray-50 px-2 py-1 rounded ${J.cantidad<=5?"text-red-600 font-semibold":J.cantidad<=20?"text-yellow-600":"text-green-600"}`,onClick:()=>P(J.id),title:"Click para editar cantidad",children:["Stock: ",J.cantidad]})})]}),o.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3",children:J.descripcion}),o.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[o.jsxs("p",{children:["Creado: ",At(J.fechaCreacion)]}),J.fechaActualizacion&&o.jsxs("p",{children:["Actualizado: ",At(J.fechaActualizacion)]})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("button",{onClick:()=>e(J),className:"px-3 py-2 border border-blue-300 text-blue-600 rounded text-sm hover:bg-blue-50 transition-colors",title:"Editar",children:"Editar"}),o.jsx("button",{onClick:()=>St(J),className:"px-3 py-2 border border-green-300 text-green-600 rounded text-sm hover:bg-green-50 transition-colors",title:"Duplicar",children:o.jsx(aB,{})}),o.jsx("button",{onClick:()=>{D(J),$(!0)},className:"px-3 py-2 border border-red-300 text-red-600 rounded text-sm hover:bg-red-50 transition-colors",title:"Eliminar",children:o.jsx(sm,{})})]})]})]},J.id))})}),Ze.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 text-6xl mb-4 flex justify-center",children:o.jsx(zj,{})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron productos"}),o.jsx("p",{className:"text-gray-500 mb-4",children:g||x?"Intenta ajustar los filtros de búsqueda":"Comienza agregando tu primer producto"}),!g&&!x&&o.jsx("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Agregar Primer Producto"})]}),o.jsx(cn,{children:V&&o.jsx(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsx(de.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:o.jsx("span",{className:"text-red-600 text-2xl",children:"!"})}),o.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminación"}),o.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['¿Estás seguro de que deseas eliminar el producto "',q==null?void 0:q.nombre,'"? Esta acción no se puede deshacer.']}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{$(!1),D(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:Tt,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},vB=()=>{const[t,e]=k.useState([]),[n,r]=k.useState(!0),[i,a]=k.useState(!1),[c,u]=k.useState(null),[d,f]=k.useState(!1),[g,y]=k.useState(null),[x,w]=k.useState({nombre:"",descripcion:"",imagen:"",activa:!0,orden:0}),[S,b]=k.useState(!1),[N,j]=k.useState(!1),[O,I]=k.useState(()=>{try{const A=localStorage.getItem("phantomCategories");return A?JSON.parse(A):[]}catch{return[]}});k.useEffect(()=>{const A=V(),oe=ae=>{if(ae.key==="phantomCategories")try{const Ce=ae.newValue?JSON.parse(ae.newValue):[];I(Ce)}catch(Ce){console.error("Error al parsear phantomCategories:",Ce)}};return window.addEventListener("storage",oe),()=>{A&&A(),window.removeEventListener("storage",oe)}},[]);const V=()=>{try{return Un(Ht(Ue,"categorias"),oe=>{I(ae=>{const Ce=[];return oe.docs.forEach(Pe=>{!ae.includes(Pe.id)&&Pe.exists()&&Ce.push({id:Pe.id,...Pe.data()})}),Ce.sort((Pe,ee)=>(Pe.orden||0)-(ee.orden||0)),e(Ce),r(!1),ae})})}catch(A){console.error("Error loading categories:",A),r(!1)}},$=()=>{w({nombre:"",descripcion:"",imagen:"",activa:!0,orden:t.length}),u(null)},q=A=>{u(A),w({nombre:A.nombre||"",descripcion:A.descripcion||"",imagen:A.imagen||"",activa:A.activa!==!1,orden:A.orden||0}),a(!0)},D=async A=>{b(!0);try{const oe=ol(ll,`categorias/${Date.now()}_${A.name}`);await Bv(oe,A);const ae=await Id(oe);w(Ce=>({...Ce,imagen:ae}))}catch(oe){console.error("Error uploading image:",oe),alert("Error al subir la imagen")}finally{b(!1)}},R=async A=>{A.preventDefault(),r(!0);try{const oe={...x,ruta:x.nombre.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),fechaActualizacion:new Date};if(c)await bi(pt(Ue,"categorias",c.id),oe);else{oe.fechaCreacion=new Date,oe.productCount=0;const ae=oe.ruta;await jp(Ht(Ue,"categorias"),oe)}a(!1),$()}catch(oe){console.error("Error saving category:",oe),alert("Error al guardar la categoría")}finally{r(!1)}},P=async(A,oe)=>{try{await bi(pt(Ue,"categorias",A),{activa:!oe,fechaActualizacion:new Date})}catch(ae){console.error("Error updating category status:",ae),alert("Error al actualizar el estado de la categoría")}},T=async()=>{if(!g)return;const A=g.id,oe=g.nombre||"Categoría";f(!1),y(null);try{const ae=pt(Ue,"categorias",A);if(!(await Vr(ae)).exists()){I(ee=>{if(!ee.includes(A)){const ie=[...ee,A];return localStorage.setItem("phantomCategories",JSON.stringify(ie)),ie}return ee}),e(ee=>ee.filter(ie=>ie.id!==A)),alert(`✅ "${oe}" eliminada (era un fantasma del caché)`);return}if(await Cp(ae),await new Promise(ee=>setTimeout(ee,500)),(await Vr(ae)).exists()){console.error("❌ ERROR: La categoría AÚN EXISTE después de deleteDoc"),alert(`❌ Error: No se pudo eliminar de Firebase.

Posibles causas:
1. Reglas de seguridad bloquean la eliminación
2. No tienes permisos
3. Problemas de red`);return}e(ee=>ee.filter(ie=>ie.id!==A)),alert(`✅ "${oe}" eliminada exitosamente de Firebase`)}catch(ae){console.error("❌ [CategoryManagement] Error al eliminar categoría:",ae),console.error("📝 [CategoryManagement] Código de error:",ae.code),console.error("📝 [CategoryManagement] Mensaje:",ae.message),ae.code==="permission-denied"?alert(`❌ Error de Permisos

No tienes permiso para eliminar esta categoría.

Verifica las reglas de seguridad en Firestore.`):alert(`❌ Error: ${ae.message}

Revisa la consola para más detalles.`)}},L=async(A,oe)=>{const ae=t.findIndex(Pe=>Pe.id===A);if(ae===-1)return;const Ce=oe==="up"?ae-1:ae+1;if(!(Ce<0||Ce>=t.length))try{const Pe=[],ee=t[ae],ie=t[Ce];Pe.push(bi(pt(Ue,"categorias",ee.id),{orden:Ce}),bi(pt(Ue,"categorias",ie.id),{orden:ae})),await Promise.all(Pe)}catch(Pe){console.error("Error reordering categories:",Pe),alert("Error al reordenar las categorías")}},U=A=>A?(A.seconds?new Date(A.seconds*1e3):new Date(A)).toLocaleDateString("es-ES"):"N/A";return n&&t.length===0?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Xm,{size:"large",color:"blue",text:"Cargando categorías..."})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestión de Categorías"}),o.jsxs("p",{className:"text-gray-600",children:[t.length," categorías en total"]})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[O.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:async()=>{if(confirm(`¿Verificar y limpiar ${O.length} categorías fantasma?

Esto verificará si alguna volvió a existir en Firebase.`)){const A=await yB();A&&(alert(`✅ Limpieza completada:

${A.recovered} categorías recuperadas
${A.stillPhantoms} siguen siendo fantasmas

Recargando página...`),window.location.reload())}},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm flex items-center gap-1",title:"Verificar y limpiar categorías fantasma",children:[o.jsx(sm,{size:14}),"Verificar (",O.length,")"]}),o.jsxs("button",{onClick:()=>{if(confirm(`¿Limpiar TODAS las ${O.length} categorías fantasma?

⚠️ Esto las eliminará sin verificar si existen en Firebase.`)){const A=pB();I([]),alert(`✅ ${A} categorías fantasma limpiadas.

Recargando página...`),window.location.reload()}},className:"px-3 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm flex items-center gap-1",title:"Forzar limpieza de caché de categorías fantasma",children:[o.jsx(sm,{size:14}),"Limpiar (",O.length,")"]})]}),o.jsxs("button",{onClick:()=>{$(),a(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"+"}),"Agregar Categoría"]})]})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📁"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categorías"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Comienza creando tu primera categoría de productos"}),o.jsx("button",{onClick:()=>{$(),a(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Crear Primera Categoría"})]}):o.jsx("div",{className:"divide-y divide-gray-200",children:o.jsx(cn,{children:t.map((A,oe)=>o.jsx(de.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center",children:A.imagen?o.jsx("img",{src:A.imagen,alt:A.nombre,className:"w-full h-full object-cover"}):o.jsx(lB,{className:"text-gray-400 text-2xl"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:A.nombre}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.activa?"Activa":"Inactiva"})]}),A.descripcion&&o.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:A.descripcion}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[o.jsxs("span",{children:["Ruta: /",A.ruta]}),o.jsxs("span",{children:["Productos: ",A.productCount||0]}),o.jsxs("span",{children:["Creada: ",U(A.fechaCreacion)]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("button",{onClick:()=>L(A.id,"up"),disabled:oe===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover arriba",children:o.jsx(sB,{})}),o.jsx("button",{onClick:()=>L(A.id,"down"),disabled:oe===t.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover abajo",children:o.jsx(iB,{})})]}),o.jsx("button",{onClick:()=>P(A.id,A.activa),className:`p-2 rounded ${A.activa?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:A.activa?"Desactivar":"Activar",children:A.activa?o.jsx(A1,{}):o.jsx($j,{})}),o.jsx("button",{onClick:()=>q(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:o.jsx(oB,{})}),o.jsx("button",{onClick:()=>{y(A),f(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:o.jsx(sm,{})})]})]})},A.id))})})}),o.jsx(cn,{children:i&&o.jsx(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(de.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[o.jsxs("div",{className:"bg-blue-700 text-white p-6 flex justify-between items-center rounded-t-2xl",children:[o.jsx("h2",{className:"text-xl font-bold",children:c?"Editar Categoría":"Agregar Categoría"}),o.jsx("button",{onClick:()=>{a(!1),$()},className:"text-white hover:text-gray-200 text-2xl font-bold",children:"×"})]}),o.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Categoría *"}),o.jsx("input",{type:"text",required:!0,value:x.nombre,onChange:A=>w(oe=>({...oe,nombre:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Videojuegos"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),o.jsx("input",{type:"number",min:"0",value:x.orden,onChange:A=>w(oe=>({...oe,orden:parseInt(A.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),o.jsx("textarea",{rows:3,value:x.descripcion,onChange:A=>w(oe=>({...oe,descripcion:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción opcional de la categoría"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen de la Categoría"}),o.jsx("input",{type:"file",accept:"image/*",onChange:A=>{var oe;return((oe=A.target.files)==null?void 0:oe[0])&&D(A.target.files[0])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),x.imagen&&o.jsx("div",{className:"mt-3",children:o.jsx("img",{src:x.imagen,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:x.activa,onChange:A=>w(oe=>({...oe,activa:A.target.checked})),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Categoría activa"]})}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[o.jsx("button",{type:"button",onClick:()=>{a(!1),$()},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),o.jsxs("button",{type:"submit",disabled:S,className:"px-6 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[S?o.jsx(Xm,{size:"small",color:"white",className:"mr-2"}):null,S?"Subiendo imagen...":c?"Actualizar":"Crear Categoría"]})]})]})]})})}),o.jsx(cn,{children:d&&o.jsx(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsx(de.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:o.jsx("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),o.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminación"}),o.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['¿Estás seguro de que deseas eliminar la categoría "',g==null?void 0:g.nombre,'"? Esta acción no se puede deshacer y puede afectar los productos asociados.']}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{f(!1),y(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},$k=({onEditProduct:t,onViewUsers:e,onViewOrders:n,onViewProducts:r,onViewCategories:i})=>{const[a,c]=k.useState({productos:0,categorias:0,usuarios:0,pedidos:0}),[u,d]=k.useState([]),[f,g]=k.useState(!0);return k.useEffect(()=>{const y=Un(fn(Ht(Ue,"productos")),j=>{const O=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),I=j.docs.filter(V=>!O.includes(V.id)).length;c(V=>({...V,productos:I}))},j=>{console.error("Error fetching products count:",j)}),x=Un(fn(Ht(Ue,"usuarios")),j=>{c(O=>({...O,usuarios:j.size}))},j=>{console.error("Error fetching users count:",j)}),w=Un(fn(Ht(Ue,"categorias")),j=>{c(O=>({...O,categorias:j.size}))},j=>{console.error("Error fetching categories count:",j)}),S=Un(fn(Ht(Ue,"pedidos")),j=>{c(O=>({...O,pedidos:j.size}))},j=>{console.error("Error fetching orders count:",j)}),N=(()=>{try{const j=fn(Ht(Ue,"productos"),Hs("fechaCreacion","desc"),Np(5));return Un(j,I=>{const V=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),$=I.docs.filter(q=>q.exists()&&!V.includes(q.id)).map(q=>({id:q.id,...q.data()}));d($),g(!1)},I=>{console.error("Error fetching recent products:",I),g(!1)})}catch(j){console.error("Error setting up recent products listener:",j),g(!1)}})();return()=>{y&&y(),x&&x(),w&&w(),S&&S(),N&&N()}},[]),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Dashboard"}),o.jsx("p",{className:"text-gray-600",children:"Bienvenido al panel de administración"})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Df,{title:"Productos",count:a.productos,icon:o.jsx(zj,{className:"text-blue-500",size:24}),onClick:r}),o.jsx(Df,{title:"Categorías",count:a.categorias,icon:o.jsx(cB,{className:"text-green-500",size:24}),onClick:i}),o.jsx(Df,{title:"Usuarios",count:a.usuarios,icon:o.jsx(yx,{className:"text-purple-500",size:24}),onClick:e}),o.jsx(Df,{title:"Pedidos",count:a.pedidos,icon:o.jsx(dB,{className:"text-orange-500",size:24}),onClick:n})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[o.jsx("div",{className:"flex justify-between items-center mb-4",children:o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Productos Recientes"})}),f?o.jsx("div",{className:"flex justify-center items-center h-32",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):u.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(y=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"flex-shrink-0 h-10 w-10 relative",children:[(()=>{try{const x=y.imagen||(Array.isArray(y.imagenes)&&y.imagenes.length>0?y.imagenes[0]:null)||(Array.isArray(y.variantes)&&y.variantes.length>0&&y.variantes[0].imagen?y.variantes[0].imagen:null)||(Array.isArray(y.media)&&y.media.length>0?y.media[0].url:null)||(Array.isArray(y.variantes)&&y.variantes.length>0&&Array.isArray(y.variantes[0].media)&&y.variantes[0].media.length>0?y.variantes[0].media[0].url:null);return x?o.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:x,alt:"",onError:w=>{w.target.style.display="none",w.target.nextSibling.style.display="flex"}}):o.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"N/A"})}catch{return o.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-500 text-xs",children:"Error"})}})(),o.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",style:{display:"none"},children:"N/A"})]}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.nombre||"Sin nombre"}),o.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",y.id.substring(0,8),"..."]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(y.precio||0)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${y.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.activo?"Activo":"Inactivo"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx("button",{onClick:()=>t&&t(y),className:"text-blue-600 hover:text-blue-900 mr-4 font-medium cursor-pointer",children:"Editar"}),o.jsx(It,{to:`/producto/${y.id}`,className:"text-green-600 hover:text-green-900",target:"_blank",rel:"noopener noreferrer",children:"Ver"})]})]},y.id))})]})}):o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-500",children:"No hay productos recientes"})}),o.jsx("div",{className:"mt-4 text-right",children:o.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium cursor-pointer",children:"Ver todos los productos →"})})]})]})},Df=({title:t,count:e,icon:n,onClick:r})=>o.jsx(de.div,{whileHover:{y:-5,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},className:"bg-white p-6 rounded-lg shadow-sm border transition-all cursor-pointer",onClick:r,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),o.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e})]}),o.jsx("div",{children:n})]})}),bB=/\/(Productos|productospcu)\//i;function To(t){return typeof t=="string"&&t.startsWith("/")&&bB.test(t)}function wB(t=""){try{const e=t.indexOf("?"),n=e>=0?t.slice(0,e):t,r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}catch{return String(t||"")}}async function _B(t){const e=await fetch(t);if(!e.ok)throw new Error(`No se pudo leer ${t} (${e.status})`);return await e.blob()}async function zk(t,e){const n=await _B(e),r=wB(e)||`file-${Date.now()}`,i=`productos/${t}/${Date.now()}-${r}`,a=ol(ll,i);return await Bv(a,n,{contentType:n.type||void 0}),await Id(a)}function Bk(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t||null))}}async function xx(t,e){if(!e)return e;if(typeof e=="string")return To(e)?await zk(t,e):e;if(typeof e=="object"){if(e.url&&To(e.url)){const n=await zk(t,e.url);return{...e,url:n}}return e}return e}async function ns(t,e){const n=Array.isArray(e)?e:[],r=[];for(const i of n)r.push(await xx(t,i));return r}function Vn(t){return(Array.isArray(t)?t:[]).some(e=>typeof e=="string"?To(e):e&&typeof e=="object"?To(e.url):!1)}function EB(t){if(!t)return!1;if(To(t.imagen)||Vn(t.imagenPrincipal)||Vn(t.imagenes)||Vn(t.media)||Vn(t.galeriaImagenes)||Vn(t.imagenesExtra)||Vn(t.tresArchivosExtras)||Vn(t.videoAcercaArticulo))return!0;if(Array.isArray(t.variantes)){for(const e of t.variantes)if(e&&(To(e.imagen)||Vn(e.imagenPrincipal)||Vn(e.imagenes)||Vn(e.media)||Vn(e.galeriaImagenes)))return!0}return!1}async function kB(t){const n=(await os(Ht(Ue,"productos"))).docs.map(a=>({id:a.id,data:a.data()}));let r=0,i=n.length;for(let a=0;a<n.length;a++){const{id:c,data:u}=n[a];if(!EB(u)){t==null||t({type:"skip",id:c,index:a+1,total:i});continue}const d=Bk({});if(To(u.imagen)&&(d.imagen=await xx(c,u.imagen)),Vn(u.imagenPrincipal)&&(d.imagenPrincipal=await ns(c,u.imagenPrincipal)),Vn(u.imagenes)&&(d.imagenes=await ns(c,u.imagenes)),Vn(u.media)&&(d.media=await ns(c,u.media)),Vn(u.galeriaImagenes)&&(d.galeriaImagenes=await ns(c,u.galeriaImagenes)),Vn(u.imagenesExtra)&&(d.imagenesExtra=await ns(c,u.imagenesExtra)),Vn(u.tresArchivosExtras)&&(d.tresArchivosExtras=await ns(c,u.tresArchivosExtras)),Vn(u.videoAcercaArticulo)&&(d.videoAcercaArticulo=await ns(c,u.videoAcercaArticulo)),Array.isArray(u.variantes)){const f=[];for(const g of u.variantes){const y=Bk(g)||{};To(y.imagen)&&(y.imagen=await xx(c,y.imagen)),Vn(y.imagenPrincipal)&&(y.imagenPrincipal=await ns(c,y.imagenPrincipal)),Vn(y.imagenes)&&(y.imagenes=await ns(c,y.imagenes)),Vn(y.media)&&(y.media=await ns(c,y.media)),Vn(y.galeriaImagenes)&&(y.galeriaImagenes=await ns(c,y.galeriaImagenes)),f.push(y)}d.variantes=f}d.fechaActualizacion=new Date,await er(pt(Ue,"productos",c),d,{merge:!0}),r++,t==null||t({type:"migrated",id:c,index:a+1,total:i})}return t==null||t({type:"done",migratedCount:r,total:i}),{migratedCount:r,total:i}}const ny="text-blue-900",SB="bg-blue-800",dl="ZeiFzBgosCd0apv9cXL6aQZCYyu2";function TB(t=""){var n,r;if(!t)return"US";const e=t.trim().split(" ");return((((n=e[0])==null?void 0:n[0])||"")+(((r=e[1])==null?void 0:r[0])||"")).toUpperCase()}function NB(t=""){if(!t)return null;const e=t.match(/(https?:\/\/[^\s]+)/i);if(e)return e[1];const n=t.match(/(maps\.app\.[^\s]+|goo\.gl\/[^\s]+|google\.com\/maps[^\s]*)/i);if(n){const r=n[0];return r.startsWith("http")?r:`https://${r}`}return null}function vx(t){if(!t)return null;if(typeof t=="object"&&t.seconds)return new Date(t.seconds*1e3).toLocaleString();const e=new Date(t);return isNaN(e.getTime())?String(t):e.toLocaleString()}function CB({usuario:t,onClose:e}){const[n,r]=k.useState([]),[i,a]=k.useState(!0),[c,u]=k.useState(t),[d,f]=k.useState(null);k.useEffect(()=>{if(!(t!=null&&t.id))return;const x=Un(pt(Ue,"users",t.id),S=>{S.exists()&&u(b=>({...b,...S.data()}))}),w=Un(pt(Ue,"usuarios",t.id),S=>{S.exists()&&u(b=>({...b,...S.data()}))});return()=>{x(),w()}},[t==null?void 0:t.id]),k.useEffect(()=>{if(!t)return;const x=fn(Ht(Ue,"orders")),w=Un(x,S=>{const b=S.docs.map(N=>({id:N.id,...N.data()})).filter(N=>String(N.userId)===String(t.id));r(b.sort((N,j)=>{var V,$;const O=((V=N.fecha)==null?void 0:V.seconds)||0;return((($=j.fecha)==null?void 0:$.seconds)||0)-O})),a(!1)},()=>{r([]),a(!1)});return()=>w()},[t]),k.useEffect(()=>{!t||t.uid!==dl||migrationRanRef.current||(migrationRanRef.current=!0,(async()=>{try{console.log("[Migración] Iniciando migración de medios legacy a Firebase Storage..."),await kB(x=>{x&&(x.type==="skip"?console.log(`[Migración] (${x.index}/${x.total}) Sin cambios:`,x.id):x.type==="migrated"?console.log(`[Migración] (${x.index}/${x.total}) Migrado:`,x.id):x.type==="done"&&console.log(`[Migración] Completada. Migrados: ${x.migratedCount}/${x.total}`))})}catch(x){console.error("[Migración] Error ejecutando migración:",x)}})())},[t]),k.useEffect(()=>{const x=w=>{w.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e]);const g=(c==null?void 0:c.direccion)||(c==null?void 0:c.direccionCompleta)||"",y=(c==null?void 0:c.ubicacion)||NB(g);return o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),o.jsxs("div",{role:"dialog","aria-modal":"true",className:"fixed top-0 left-0 w-full h-full max-h-none !rounded-none !shadow-none bg-white overflow-y-auto flex flex-col",style:{zIndex:1e4},onClick:x=>x.stopPropagation(),children:[o.jsxs("header",{className:`flex justify-between items-center px-6 py-4 shadow ${SB}`,children:[o.jsxs("div",{className:"admin-user-header",children:[o.jsx("div",{className:"admin-user-avatar",children:TB((c==null?void 0:c.displayName)||(c==null?void 0:c.nombre))}),o.jsxs("div",{className:"admin-user-info",children:[o.jsx("h2",{className:"admin-user-name",children:(c==null?void 0:c.displayName)||(c==null?void 0:c.nombre)||"Usuario"}),o.jsx("p",{className:"admin-user-email",children:c==null?void 0:c.email}),o.jsx("div",{className:"admin-user-badges",children:o.jsx("span",{className:t.id===dl?"badge-admin":"badge-user",children:t.id===dl?"Admin":"Usuario"})})]})]}),o.jsx("button",{onClick:e,"aria-label":"Cerrar",className:"admin-close-btn",children:"×"})]}),o.jsxs("div",{className:"flex-1 px-2 sm:px-8 py-4 sm:py-8 space-y-7 bg-gray-50",children:[o.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:o.jsx(fB,{})}),o.jsx("h3",{className:`text-xl font-bold ${ny}`,children:"Información Personal"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[o.jsx(yc,{label:"Nombre Completo",value:c.displayName||"No especificado"}),o.jsx(yc,{label:"Email",value:c.email||"No especificado"}),o.jsx(yc,{label:"Teléfono",value:c.telefono||"No especificado"}),o.jsx(yc,{label:"Código de Usuario",value:c.codigo||"No asignado"}),o.jsx(yc,{label:"Método de Entrega",value:c.metodoEntrega||"No especificado"}),o.jsx(yc,{label:"Fecha de Registro",value:c.createdAt?vx(c.createdAt):"No disponible"})]})]}),o.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:o.jsx(Fk,{})}),o.jsx("h3",{className:`text-xl font-bold ${ny}`,children:"Dirección y Ubicación"})]}),o.jsx("p",{className:"text-base text-blue-900 mb-4",children:g||"No se ha registrado dirección"}),y&&o.jsxs("a",{href:y,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors",children:[o.jsx(Fk,{})," Ver en Google Maps"]})]}),o.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:o.jsx(Uk,{})}),o.jsx("h3",{className:`text-xl font-bold ${ny}`,children:"Historial de Compras"}),o.jsxs("span",{className:"bg-blue-100 text-blue-900 px-3 py-1 rounded-full text-sm font-bold",children:[n.length," ",n.length===1?"compra":"compras"]})]}),i?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Xm,{size:"medium",color:"blue",text:"Cargando compras..."})}):n.length===0?o.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4 text-blue-700 flex items-center justify-center",children:o.jsx(Uk,{})}),o.jsx("p",{className:"text-xl text-blue-700 font-medium",children:"No hay compras registradas"})]}):o.jsx("div",{className:"admin-orders-grid",children:n.map(x=>{var w,S;return o.jsxs("div",{className:"admin-order-card",children:[o.jsxs("div",{className:"admin-order-header",children:[o.jsxs("div",{className:"order-info",children:[o.jsx("h4",{className:"order-number",children:x.numeroOrden||`#${x.id.slice(-8)}`}),o.jsx("p",{className:"order-date",children:vx(x.fecha)})]}),o.jsxs("div",{className:"order-status-price",children:[o.jsx("span",{className:`admin-status-badge ${x.estado||"pendiente"}`,children:x.estado==="completado"?"✓ Completado":x.estado==="cancelado"?"✗ Cancelado":"⏳ Pendiente"}),o.jsx("div",{className:"order-total",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(x.total||0)})]})]}),o.jsx("div",{className:"admin-order-customer",children:o.jsxs("div",{className:"customer-info",children:[o.jsx("span",{className:"customer-name",children:x.userName||"Usuario"}),o.jsx("span",{className:"customer-email",children:x.userEmail})]})}),o.jsxs("div",{className:"admin-products-preview",children:[(w=x.productos)==null?void 0:w.slice(0,3).map((b,N)=>o.jsx("div",{className:"admin-product-item",children:o.jsxs("div",{className:"admin-product-info",children:[o.jsx("span",{className:"product-name",children:b.nombre}),o.jsxs("span",{className:"product-quantity",children:["Cantidad: ",b.cantidad," • ",new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(b.precio)]}),o.jsx("button",{className:"btn-view-product",onClick:j=>{j.stopPropagation(),window.location.href=`/producto/${b.id}`},title:"Ver producto",children:o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(A1,{})," Ver producto"]})})]})},N)),((S=x.productos)==null?void 0:S.length)>3&&o.jsxs("div",{className:"more-products-admin",children:["+",x.productos.length-3," más productos"]})]}),o.jsxs("div",{className:"admin-order-actions",children:[o.jsx("button",{className:"btn-admin btn-view",onClick:()=>f(x),children:"Ver detalles"}),x.metodoPago&&o.jsx("span",{className:"payment-method",children:x.metodoPago})]})]},x.id)})})]})]}),o.jsx(cn,{children:d&&o.jsx(Hj,{order:d,onClose:()=>f(null)})})]})]})}function yc({label:t,value:e}){return o.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[o.jsx("p",{className:"font-semibold text-blue-700 text-xs mb-1",children:t}),o.jsx("p",{className:"text-base font-medium text-blue-900 break-all",children:e})]})}function jB(){const{usuario:t,usuarioInfo:e}=Jr(),[n,r]=k.useState(!1),[i,a]=k.useState(null);return o.jsx("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel del Vendedor"}),o.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestiona tus productos en tiempo real"}),(e==null?void 0:e.empresa)&&o.jsx("div",{className:"mt-3 inline-flex items-center gap-2 bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold",children:e.empresa})]}),o.jsx(Bj,{onAddProduct:()=>{a(null),r(!0)},onEditProduct:c=>{a(c),r(!0)}}),n&&o.jsx(Uj,{product:i,onClose:()=>{r(!1),a(null)},onSave:()=>{r(!1),a(null)}})]})})}function AB(){const{usuario:t,usuarioInfo:e}=Jr(),[n,r]=k.useState([]),[i,a]=k.useState(""),[c,u]=k.useState(null),[d,f]=k.useState(null),[g,y]=k.useState("dashboard"),[x,w]=k.useState(!1),[S,b]=k.useState(null);if(k.useRef(!1),k.useEffect(()=>{if(!t||t.uid!==dl)return;const V=Un(fn(Ht(Ue,"users")),q=>{const D=q.docs.map(R=>({id:R.id,...R.data()}));r(R=>{const P=[...D];return R.forEach(T=>{const L=P.findIndex(U=>U.id===T.id);L>=0&&(P[L]={...P[L],...T})}),P})}),$=Un(fn(Ht(Ue,"usuarios")),q=>{const D=q.docs.map(R=>({id:R.id,...R.data()}));r(R=>{const P=[...R];return D.forEach(T=>{const L=P.findIndex(U=>U.id===T.id);L>=0?P[L]={...P[L],...T}:P.push(T)}),P})});return()=>{V(),$()}},[t]),!t)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Inicia sesión"});const N=(t==null?void 0:t.uid)===dl||(e==null?void 0:e.isAdmin)===!0,j=!!(e!=null&&e.isSeller||e!=null&&e.empresa||e!=null&&e.empresaId);if(!N&&j)return o.jsx(jB,{});if(!N)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Sin acceso"});const O=n.filter(V=>{const $=i.toLowerCase();return(V.displayName||"").toLowerCase().includes($)||(V.email||"").toLowerCase().includes($)||(V.telefono||"").toLowerCase().includes($)||(V.direccion||"").toLowerCase().includes($)||(V.codigo||"").toLowerCase().includes($)}),I=()=>{switch(g){case"dashboard":return o.jsx($k,{onAddProduct:()=>{b(null),w(!0),y("products")},onEditProduct:V=>{b(V),w(!0)},onOpenCategories:()=>y("categories"),onViewAllProducts:()=>y("products"),onViewAllOrders:()=>y("orders"),onViewProducts:()=>y("products"),onViewCategories:()=>y("categories"),onViewUsers:()=>y("users"),onViewOrders:()=>y("orders")});case"products":return o.jsx(Bj,{onAddProduct:()=>{b(null),w(!0)},onEditProduct:V=>{b(V),w(!0)}});case"categories":return o.jsx(vB,{});case"users":return o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Usuarios"}),o.jsx("input",{type:"text",value:i,onChange:V=>a(V.target.value),placeholder:"Buscar por nombre, email, teléfono, dirección o código",className:"w-full sm:w-80 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"})]}),O.length===0?o.jsx("div",{className:"text-gray-600",children:"No hay usuarios que coincidan con la búsqueda."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teléfono"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registrado"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(V=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>u(V),children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 font-medium",children:V.displayName||V.nombre||"Usuario"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:V.email||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:V.telefono||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:V.codigo||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:vx(V.createdAt)||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm",children:o.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${V.id===dl?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:V.id===dl?"Admin":"Usuario"})})]},V.id))})]})})]});default:return o.jsx($k,{})}};return o.jsxs("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel Administrativo"}),o.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestión Completa del Sistema"}),o.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-center gap-3",children:[o.jsxs("span",{className:"bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2",children:[o.jsx(yx,{})," ",n.length," ",n.length===1?"usuario":"usuarios"," registrados"]}),o.jsx("span",{className:"bg-green-100 text-green-900 px-4 py-2 rounded-full text-sm font-bold",children:"Sincronización en tiempo real"})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-1 mb-8 border border-blue-100",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:[{id:"dashboard",label:"Dashboard",icon:o.jsx(nB,{})},{id:"products",label:"Productos",icon:o.jsx(rB,{})},{id:"categories",label:"Categorías",icon:o.jsx(hB,{})},{id:"orders",label:"Pedidos",icon:o.jsx(uB,{})},{id:"users",label:"Usuarios",icon:o.jsx(yx,{})}].map(V=>o.jsx("button",{onClick:()=>y(V.id),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-medium transition-all duration-200 ${g===V.id?"bg-blue-700 text-white shadow-md":"text-blue-700 hover:bg-blue-50"}`,children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:V.icon}),o.jsx("span",{className:"hidden sm:inline",children:V.label})]})},V.id))})}),o.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:I()},g),c&&o.jsx(CB,{usuario:c,onClose:()=>u(null)}),x&&o.jsx(Uj,{product:S,onClose:()=>{w(!1),b(null)},onSave:()=>{w(!1),b(null)}})]}),o.jsx(cn,{children:d&&o.jsx(Hj,{order:d,onClose:()=>f(null)})})]})}function Hj({order:t,onClose:e}){var c,u;const n=d=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(d||0),r=d=>{if(!d)return"Fecha no disponible";let f;return typeof d=="object"&&d.seconds?f=new Date(d.seconds*1e3):f=new Date(d),f.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},i=d=>{switch(d){case"completado":return"status-completed";case"cancelado":return"status-cancelled";case"pendiente":return"status-pending";default:return"status-pending"}},a=d=>{switch(d){case"completado":return"✓ Completado";case"cancelado":return"✗ Cancelado";case"pendiente":return"⏳ Pendiente";default:return"⏳ Pendiente"}};return Yr.useEffect(()=>{const d=f=>{f.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e]),o.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:o.jsxs(de.div,{className:"order-details-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:d=>d.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{children:[o.jsx("h2",{children:t.numeroOrden||`Orden #${t.id.slice(-8)}`}),o.jsx("p",{className:"order-date-detail",children:r(t.fecha)})]}),o.jsx("button",{className:"close-btn",onClick:e,children:"×"})]}),o.jsxs("div",{className:"modal-content",children:[o.jsxs("div",{className:"order-status-section",children:[o.jsx("span",{className:`status-badge large ${i(t.estado)}`,children:a(t.estado)}),t.estadoPago&&o.jsxs("span",{className:"payment-status",children:["Pago: ",t.estadoPago==="pagado"?"✓ Pagado":"✗ Fallido"]})]}),o.jsxs("div",{className:"order-summary",children:[o.jsx("h3",{children:"Resumen de la orden"}),o.jsxs("div",{className:"summary-row total",children:[o.jsx("span",{children:"Total pagado:"}),o.jsx("span",{children:n(t.total)})]})]}),o.jsxs("div",{className:"products-section",children:[o.jsxs("h3",{children:["Productos (",((c=t.productos)==null?void 0:c.length)||0,")"]}),o.jsx("div",{className:"products-list",children:(u=t.productos)==null?void 0:u.map((d,f)=>o.jsx("div",{className:"product-detail-item",children:o.jsxs("div",{className:"product-detail-info",children:[o.jsx("h4",{children:d.nombre}),o.jsx("p",{className:"product-company",children:d.empresa||"N/A"}),o.jsxs("div",{className:"product-pricing",children:[o.jsxs("span",{className:"quantity",children:["Cantidad: ",d.cantidad]}),o.jsxs("span",{className:"price",children:["Precio unitario: ",n(d.precio)]}),o.jsxs("span",{className:"subtotal",children:["Subtotal: ",n(d.subtotal||d.precio*d.cantidad)]})]}),o.jsx("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${d.id}`,title:"Ver producto",children:"👁️ Ver producto"})]})},f))})]}),t.direccionEntrega&&o.jsxs("div",{className:"delivery-section",children:[o.jsx("h3",{children:"Información de entrega"}),o.jsx("p",{children:t.direccionEntrega}),t.telefonoContacto&&o.jsxs("p",{children:["Teléfono: ",t.telefonoContacto]})]}),t.metodoPago&&o.jsxs("div",{className:"payment-section",children:[o.jsx("h3",{children:"Información de pago"}),o.jsxs("p",{children:["Método: ",t.metodoPago]})]})]})]})})}const ks=[{id:1,img:"/ads/1.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/6.png",link:"https://playcenterwisp.com",isExternal:!0},{id:2,img:"/ads/2.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0},{id:3,img:"/ads/3.png",link:"/Productos/videojuegos",isExternal:!1},{id:4,img:"/ads/5.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:5,img:"/ads/4.png",link:"/Productos",isExternal:!1}];function IB(){const[t,e]=k.useState(0),n=k.useRef(null),r=6e3,[i,a]=k.useState(!1),c=k.useCallback(()=>{clearTimeout(n.current),!i&&(n.current=setTimeout(()=>{e(S=>(S+1)%ks.length)},r))},[i]);k.useEffect(()=>(c(),()=>clearTimeout(n.current)),[t,c]),k.useEffect(()=>{const S=b=>{var N;try{const j=!!((N=b==null?void 0:b.detail)!=null&&N.paused);a(j),clearTimeout(n.current),j||(n.current=setTimeout(()=>{e(O=>(O+1)%ks.length)},r))}catch{}};return window.addEventListener("pcu:main-slider-toggle",S),()=>window.removeEventListener("pcu:main-slider-toggle",S)},[]);const u=()=>{clearTimeout(n.current),e(S=>S===0?ks.length-1:S-1)},d=()=>{clearTimeout(n.current),e(S=>(S+1)%ks.length)},f=k.useRef(0),g=k.useRef(0),y=S=>{f.current=S.touches[0].clientX},x=S=>{g.current=S.touches[0].clientX},w=()=>{const S=g.current-f.current;Math.abs(S)>50&&(S>0?u():d())};return o.jsxs("div",{onTouchStart:y,onTouchMove:x,onTouchEnd:w,className:`relative w-full max-w-[1600px] mx-auto overflow-hidden rounded-xl shadow-xl
        h-[140px] sm:h-[180px] md:h-[260px] lg:h-[400px]`,children:[o.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{width:`${ks.length*100}%`,transform:`translateX(-${t*(100/ks.length)}%)`},children:ks.map(S=>S.isExternal?o.jsx("a",{href:S.link,target:"_blank",rel:"noopener noreferrer",className:"w-full h-full flex-shrink-0",style:{width:`${100/ks.length}%`},children:o.jsx("img",{src:S.img,alt:`Anuncio ${S.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},S.id):o.jsx(It,{to:S.link,className:"w-full h-full flex-shrink-0",style:{width:`${100/ks.length}%`},children:o.jsx("img",{src:S.img,alt:`Anuncio ${S.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},S.id))}),o.jsx("button",{onClick:u,className:"absolute top-1/2 left-2 sm:left-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Anterior",children:o.jsx(BU,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),o.jsx("button",{onClick:d,className:"absolute top-1/2 right-2 sm:right-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Siguiente",children:o.jsx(ux,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),o.jsx("div",{className:"absolute bottom-3 sm:bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-20",children:ks.map((S,b)=>o.jsx("button",{onClick:()=>{clearTimeout(n.current),e(b)},"aria-label":`Ir al slide ${b+1}`,className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${b===t?"bg-white opacity-90 scale-110":"bg-white opacity-40"} transition`},b))})]})}const PB=[{id:1,img:"/ads/movil/aficionados-movil.png",link:"/Productos/coleccionables",isExternal:!1},{id:2,img:"/ads/movil/articulosads.png",link:"/Productos/videojuegos",isExternal:!1},{id:3,img:"/ads/movil/internetads.png",link:"https://playcenterwisp.com",isExternal:!0},{id:4,img:"/ads/movil/camarasads.png",link:"/Productos/camaras",isExternal:!1},{id:5,img:"/ads/movil/consolaads.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/movil/ofertas.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:7,img:"/ads/movil/productosads.png",link:"/Productos",isExternal:!1},{id:8,img:"/ads/movil/retroads.png",link:"/Productos/retro-juegos",isExternal:!1},{id:9,img:"/ads/movil/nuestras-estafetas.png",link:"/estafetas",isExternal:!1},{id:10,img:"/ads/movil/ubicacionads.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0}];function RB(){return o.jsx("div",{className:"block sm:hidden w-full max-w-[100%] mx-auto px-0 py-2",children:o.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide gap-3 px-3",style:{scrollPaddingLeft:"12px",scrollPaddingRight:"12px"},children:PB.map(t=>o.jsx("a",{href:t.link,target:t.isExternal?"_blank":"_self",rel:"noreferrer",className:"flex-shrink-0 w-[300px] h-[420px] rounded-xl overflow-hidden snap-center bg-transparent shadow-none",children:o.jsx("img",{src:t.img,alt:`Anuncio ${t.id}`,className:"w-full h-full object-cover block rounded-xl",draggable:!1})},t.id))})})}const Hk=["/animacion/img1.png","/animacion/img2.png","/animacion/img3.png","/animacion/img4.png","/animacion/img5.png","/animacion/img6.png","/animacion/img7.png","/animacion/img8.png","/animacion/img9.png","/animacion/img10.png"],MB=[...Hk,...Hk.slice(0,5)],DB=()=>o.jsx("div",{className:"loader",role:"presentation","aria-hidden":"true",children:MB.map((t,e)=>o.jsx("img",{src:t,alt:`Animación ${e+1}`},e))}),oi={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7}}};Array.from({length:17},(t,e)=>`/animacion/${e+1}.png`);function OB(){const{productsByCategory:t,categories:e,loading:n,error:r}=T8(),{theme:i}=cu();if(Yr.useEffect(()=>{e.length>0&&(console.log("🎯 CATEGORÍAS DISPONIBLES EN INICIO:"),console.log("════════════════════════════════════════════════════════"),console.table(e.map(f=>({"📌 Nombre":f.nombre,"🔗 Ruta":f.ruta,"🆔 ID":f.id,"📦 Productos":(t[f.id]||[]).length}))),console.log("════════════════════════════════════════════════════════"),console.log("💡 COPIA las rutas exactas de arriba para usarlas en getProductsByRoute()"),console.log("════════════════════════════════════════════════════════"))},[e,t]),n)return null;if(r)return o.jsx("div",{className:"bg-gradient-to-br from-indigo-50 via-white to-blue-100 min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-red-600",children:[o.jsx("p",{className:"text-lg",children:"Error cargando productos"}),o.jsx("p",{className:"text-sm",children:r})]})});const a=f=>{try{return f?typeof f=="string"?f:typeof f=="object"&&f!==null?f.url||"":String(f||""):""}catch{return""}},c=f=>{var O,I;const g=a((O=f==null?void 0:f.imagenPrincipal)==null?void 0:O[0]);if(g)return g;const y=a(f==null?void 0:f.imagen);if(y)return y;const w=(Array.isArray(f==null?void 0:f.media)?f.media:[]).find(V=>{const $=((V==null?void 0:V.type)||"").toLowerCase();return a(V)&&(!$||$.includes("image")||$==="img"||$==="photo")});if(w)return a(w);const b=(Array.isArray(f==null?void 0:f.galeriaImagenes)?f.galeriaImagenes:[]).find(V=>{const $=((V==null?void 0:V.type)||"").toLowerCase();return a(V)&&(!$||$.includes("image")||$==="img"||$==="photo")});if(b)return a(b);const N=Array.isArray(f==null?void 0:f.imagenes)?f.imagenes:[];if(N.length>0)return a(N[0]);const j=Array.isArray(f==null?void 0:f.variantes)?f.variantes:[];for(const V of j){const $=a((I=V==null?void 0:V.imagenPrincipal)==null?void 0:I[0]);if($)return $;const q=a(V==null?void 0:V.imagen);if(q)return q;const R=(Array.isArray(V==null?void 0:V.media)?V.media:[]).find(L=>{const U=((L==null?void 0:L.type)||"").toLowerCase();return a(L)&&(!U||U.includes("image")||U==="img"||U==="photo")});if(R)return a(R);const T=(Array.isArray(V==null?void 0:V.galeriaImagenes)?V.galeriaImagenes:[]).find(L=>{const U=((L==null?void 0:L.type)||"").toLowerCase();return a(L)&&(!U||U.includes("image")||U==="img"||U==="photo")});if(T)return a(T)}return""},u=f=>{let g=e.find(w=>((w==null?void 0:w.ruta)||"")===f);if(g)return g;const y=w=>(w||"").toLowerCase().replace(/á/g,"a").replace(/é/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n").replace(/[^a-z0-9]/g,""),x=y(f);return g=e.find(w=>{const S=y(w.nombre),b=y(w.ruta);return S===x||b===x||S.includes(x)||x.includes(S)}),g},d=f=>{const g=u(f);return g?t[g.id]||[]:(console.warn(`❌ Categoría no encontrada para ruta: "${f}"`),console.log("💡 Sugerencia: Verifica las categorías disponibles en la tabla arriba"),[])};return o.jsxs("div",{className:"bg-transparent min-h-screen transition-colors duration-300",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsx(de.div,{className:"block sm:hidden w-full max-w-full mx-auto",style:{marginTop:0,marginBottom:0,padding:0},variants:oi,initial:"hidden",animate:"visible",children:o.jsx(RB,{})}),o.jsx("div",{className:"hidden sm:block w-full",style:{marginTop:0,marginBottom:0,padding:0},children:o.jsx("video",{src:i==="dark"?"/videos/pcu-intro-negro.mp4":"/videos/pcu-intro-blanco.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-auto object-cover",style:{marginTop:0,marginBottom:0,padding:0,display:"block",verticalAlign:"top"}},i)}),o.jsx(de.div,{className:"hidden sm:block w-full max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-12",variants:oi,initial:"hidden",animate:"visible",children:o.jsx("div",{className:"rounded-2xl overflow-hidden shadow-2xl ring-1 ring-indigo-100 dark:ring-gray-900",children:o.jsx(IB,{})})}),o.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-14",children:e.slice(0,4).map((f,g)=>{const x=(t[f.id]||[]).slice(0,4);return o.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 group border border-gray-200 dark:border-gray-800",variants:oi,initial:"hidden",animate:"visible",transition:{delay:.1*g},children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:f.nombre}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:x.map((w,S)=>{const b=c(w)||"/placeholder-product.svg";return o.jsx(It,{to:`/producto/${w.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:b,alt:w.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:N=>{N.target.onerror=null,N.target.src="/placeholder-product.svg"}})})},w.id)})}),o.jsxs(It,{to:`/Productos/${f.ruta}`,className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:["Explora ",f.nombre," →"]})]},f.id)})}),o.jsx(de.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:oi,initial:"hidden",animate:"visible",children:o.jsx(It,{to:"/Productos/coleccionables",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:o.jsx("img",{src:"/ads/aficionados.png",alt:"Ver Nuestras colecciones",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),o.jsx("section",{className:"hidden xl:grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-14",children:[{to:"/Productos/retro-consolas",src:"/ads/retro.png",alt:"Retro Consolas"},{to:"/Productos/camaras",src:"/ads/camaras.png",alt:"Cámaras"}].map((f,g)=>o.jsx(de.div,{className:"overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition h-[220px] sm:h-[300px] md:h-[400px] group",whileHover:{scale:1.01},children:o.jsx(It,{to:f.to,className:"block w-full h-full",children:o.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-cover object-center group-hover:scale-110 transition-transform duration-400"})})},g))}),o.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:oi,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Explora nuestras categorías"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:[{to:"/Productos/audifonos",src:"/ads/audifonoscate.png",alt:"Audífonos"},{to:"/Productos/mouses",src:"/ads/mousecate.png",alt:"Mouses"},{to:"/Productos/teclados",src:"/ads/tecladocate.png",alt:"Teclados"},{to:"/Productos/camaras",src:"/ads/camaracate.png",alt:"Cámaras"},{to:"/Productos/discos-duros",src:"/ads/discodurocate.png",alt:"Discos Duros"},{to:"/Productos/controles",src:"/ads/controlcate.png",alt:"Controles"}].map((f,g)=>o.jsx(It,{to:f.to,children:o.jsx("img",{src:f.src,alt:f.alt,className:"rounded-xl hover:scale-110 transition object-cover w-full aspect-[1/1] shadow-sm"})},f.alt))}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(It,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Ver todas las categorías →"})})]})}),o.jsx(de.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:oi,initial:"hidden",animate:"visible",children:o.jsx(It,{to:"/estafetas",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:o.jsx("img",{src:"/ads/ESTAFETAS.png",alt:"Ver Nuestras Estafetas",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),o.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:oi,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Descubre nuestros productos"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:Object.values(t).flat().slice(0,6).map(f=>o.jsx(It,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"bg-white dark:bg-black rounded-xl overflow-hidden shadow hover:shadow-md transition border border-gray-200 dark:border-gray-800",children:o.jsx("div",{className:"w-full aspect-[1/1] flex items-center justify-center p-2 overflow-hidden",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})})},f.id))}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(It,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestros productos →"})})]})}),o.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:oi,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Hogar Inteligente en Oferta"}),o.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:d("hogar-inteligente").slice(0,10).map(f=>{const g=c(f)||"/placeholder-product.svg";return o.jsx(It,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",children:o.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:o.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(It,{to:"/Productos/hogar-inteligente",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Descubre cómo transformar tu casa en un hogar inteligente →"})})]})}),o.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:oi,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Tu Rincón Variado"}),o.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:d("tu-rincon-variado").slice(0,12).map(f=>{const g=c(f)||"/placeholder-product.svg";return o.jsx(It,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",title:f.nombre,children:o.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:o.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition-transform duration-300",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(It,{to:"/Productos/tu-rincon-variado",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestro Rincón Variado →"})})]})}),o.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-16",children:[{to:"/Productos/consolas",src:"/ads/nintendoswtitchads.png",alt:"Consolas"},{to:"/Productos/controles",src:"/ads/controlads.png",alt:"Controles"}].map((f,g)=>o.jsx(de.div,{className:"overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition aspect-[16/9]",whileHover:{scale:1.01},children:o.jsx(It,{to:f.to,className:"block w-full h-full",children:o.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-contain object-center hover:scale-105 transition-transform duration-400 bg-black"})})},f.alt))}),o.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-16",children:[o.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:oi,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cámaras de Vigilancia"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("camaras").slice(0,4).map(f=>o.jsx(It,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(It,{to:"/Productos/camaras",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Cámaras de Vigilancia →"})]}),o.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:oi,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Discos Duros"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("discos-duros").slice(0,4).map(f=>o.jsx(It,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(It,{to:"/Productos/discos-duros",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Discos Duros →"})]}),o.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:oi,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Memorias USB"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("memorias-usb").slice(0,4).map(f=>o.jsx(It,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(It,{to:"/Productos/memorias-usb",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Memorias USB →"})]}),o.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:oi,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cables"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("cables").slice(0,4).map(f=>o.jsx(It,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre||"Cable",className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(It,{to:"/Productos/cables",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Cables →"})]})]}),o.jsx("div",{className:"max-w-[1600px] mx-auto mt-20 px-4",children:o.jsx(DB,{})}),o.jsxs(de.section,{className:"max-w-4xl mx-auto px-6 py-20 text-center mt-10",variants:oi,initial:"hidden",animate:"visible",children:[o.jsxs("h2",{className:"text-3xl sm:text-4xl font-extrabold mb-6 text-gray-800 dark:text-gray-100",children:["¿Tienes dudas?"," ",o.jsx("span",{className:"text-indigo-700",children:"Contáctanos ahora"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-10 max-w-xl mx-auto",children:"Nuestro equipo está listo para ayudarte por WhatsApp, teléfono o correo. Atención rápida y profesional."}),o.jsxs("div",{className:"bg-white dark:bg-black shadow-2xl rounded-2xl p-10 max-w-3xl mx-auto flex flex-col gap-6 border border-indigo-100 dark:border-gray-800 transition-colors duration-300",children:[o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(lh,{className:"text-indigo-700"}),o.jsx("span",{children:"Av. Estrella Sadhalá, Santiago, República Dominicana"})]}),o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(Vm,{className:"text-indigo-700"}),o.jsx("span",{children:"+1 (849)-635-7000 (Tienda)"})]}),o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(Vm,{className:"text-indigo-700"}),o.jsx("span",{children:"+1 (809)-582-1212 (Internet)"})]}),o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(qv,{className:"text-indigo-700"}),o.jsx("span",{children:"playcenter121@gmail.com"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center mt-4",children:[o.jsxs("a",{href:"https://wa.me/18496357000?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20página.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-700 text-white rounded-lg shadow-md hover:bg-indigo-800 transition w-full sm:w-auto",children:[o.jsx(Lm,{className:"text-xl"}),"WhatsApp Tienda"]}),o.jsxs("a",{href:"https://wa.me/18095821212?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20página.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-700 text-white rounded-lg shadow-md hover:bg-gray-800 transition w-full sm:w-auto",children:[o.jsx(Lm,{className:"text-xl"}),"WhatsApp Internet"]})]})]})]})]})}async function LB(t){const e="https://api.cloudinary.com/v1_1/dprojkgqf/image/upload",n=new FormData;n.append("file",t),n.append("upload_preset","perfil_usuarios"),n.append("folder","muestras/comercio electrónico"),console.log("Archivo que se va a subir:",t),console.log("Preset usado:","perfil_usuarios"),console.log("Carpeta folder usada:","muestras/comercio electrónico");const r=await fetch(e,{method:"POST",body:n});if(!r.ok){const a=await r.text();throw console.error("Error Cloudinary:",a),new Error("❌ Error al subir la imagen a Cloudinary")}const i=await r.json();return console.log("Respuesta de Cloudinary:",i),i.secure_url}const ry={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, República Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"},VB=(t="")=>String(t||"").trim()?String(t).trim().charAt(0).toUpperCase():"?",FB=(t="")=>{let e=0;for(let a=0;a<t.length;a++)e=t.charCodeAt(a)+((e<<5)-e),e=e&e;const n=e>>0&255,r=e>>8&255,i=e>>16&255;return`#${[n,r,i].map(a=>a.toString(16).padStart(2,"0")).join("")}`},UB=(t="",e=512)=>{const n=VB(t),r=FB(t||n),i=`<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${e}' viewBox='0 0 ${e} ${e}'>
    <rect width='100%' height='100%' fill='${r}' rx='${Math.floor(e*.12)}' />
    <text x='50%' y='50%' dy='.04em' font-family='Inter, system-ui, Arial' font-size='${Math.floor(e*.42)}' fill='#fff' text-anchor='middle' alignment-baseline='middle'>${n}</text>
  </svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`},$B={hidden:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{duration:.36,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:-8,transition:{duration:.25}}},sl={hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.26}}};function zB({historial:t}){var g,y;const[e,n]=k.useState(null),[r,i]=k.useState("all"),a=!1;if(!(t!=null&&t.length))return o.jsxs(de.div,{variants:sl,className:"empty-state-beautiful",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("div",{className:"empty-illustration",children:o.jsx(de.div,{className:"empty-box",animate:{y:[0,-10,0],rotateY:[0,5,0,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},"aria-hidden":!0,children:o.jsx(dx,{size:56})})}),o.jsx(de.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"¡Tu historial está esperando!"}),o.jsx(de.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Cuando realices tu primera compra, aparecerá aquí."}),o.jsx(de.div,{className:"empty-cta",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7},children:o.jsx("button",{className:"btn-beautiful-primary",children:"Explorar productos"})})]});const c=x=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(x||0),u=x=>{if(!x)return"—";let w;return x!=null&&x.seconds?w=new Date(x.seconds*1e3):w=new Date(x),isNaN(w)?"—":w.toLocaleString("es-DO",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},d=x=>{switch(x){case"completado":return{color:"status-completed",Icon:Hm,text:"Completado",gradient:"linear-gradient(135deg, #10b981, #059669)"};case"cancelado":return{color:"status-cancelled",Icon:Fd,text:"Cancelado",gradient:"linear-gradient(135deg, #ef4444, #dc2626)"};case"pendiente":default:return{color:"status-pending",Icon:s$,text:"Pendiente",gradient:"linear-gradient(135deg, #f59e0b, #d97706)"}}},f=t.filter(x=>r==="all"?!0:x.estado===r);return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        .history-compact { --fs-1:.95rem; --fs-2:.9rem; --fs-3:.85rem; --pad-1:.55rem; --pad-2:.8rem; --radius:12px; }
        .history-compact .order-card-beautiful { padding: var(--pad-2); border-radius: var(--radius); }
        .history-compact .order-number-beautiful { font-size: var(--fs-1); }
        .history-compact .order-date-beautiful { font-size: var(--fs-3); opacity:.8; }
        .history-compact .status-badge-beautiful { padding:.35rem .55rem; border-radius:999px; font-size: var(--fs-3); }
        .history-compact .order-total-beautiful { font-size: var(--fs-1); }
        .history-compact .products-grid { gap:.5rem; }
        .history-compact .product-preview-beautiful { padding: var(--pad-1); border-radius:10px; }
        .history-compact .product-name-beautiful { font-size: var(--fs-2); }
        .history-compact .product-details-beautiful { font-size: var(--fs-3); opacity:.85; }
      `}),a,o.jsx(de.div,{variants:sl,className:"orders-container-beautiful history-compact",layout:!0,children:o.jsx(cn,{children:f.map((x,w)=>{var N,j;const S=d(x.estado),b=S.Icon;return o.jsxs(de.div,{className:"order-card-beautiful",onClick:()=>n(x),initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,delay:w*.05,type:"spring",stiffness:120},whileHover:{scale:1.01,y:-3,boxShadow:"0 16px 32px rgba(0,0,0,0.08)"},whileTap:{scale:.99},layout:!0,children:[o.jsx("div",{className:"order-card-glow",style:{background:S.gradient}}),o.jsxs("div",{className:"order-header-beautiful",style:{display:"flex",justifyContent:"space-between",gap:"0.6rem"},children:[o.jsxs("div",{className:"order-info-beautiful",children:[o.jsx(de.h4,{className:"order-number-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:x.numeroOrden||`Orden #${x.id.slice(-8)}`}),o.jsx(de.p,{className:"order-date-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[o.jsx(vk,{size:14})," ",u(x.fecha)]})})]}),o.jsxs("div",{className:"order-status-beautiful",style:{display:"flex",alignItems:"center",gap:".5rem"},children:[o.jsxs(de.div,{className:`status-badge-beautiful ${S.color}`,style:{background:S.gradient,display:"inline-flex",alignItems:"center",gap:6},whileHover:{scale:1.05},initial:{scale:0},animate:{scale:1},transition:{delay:.35,type:"spring"},children:[o.jsx(b,{size:14}),o.jsx("span",{className:"status-text",children:S.text})]}),o.jsx(de.div,{className:"order-total-beautiful",initial:{opacity:0,x:12},animate:{opacity:1,x:0},transition:{delay:.4},children:c(x.total)})]})]}),o.jsxs(de.div,{className:"order-products-preview-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.45},children:[o.jsx("div",{className:"products-grid",children:(N=x.productos)==null?void 0:N.slice(0,3).map((O,I)=>o.jsxs(de.div,{className:"product-preview-beautiful",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5+I*.08},whileHover:{scale:1.03},children:[o.jsx("div",{className:"product-image-placeholder","aria-hidden":!0,style:{display:"flex",alignItems:"center"},children:o.jsx(dx,{size:18})}),o.jsxs("div",{className:"product-preview-info-beautiful",children:[o.jsx("span",{className:"product-name-beautiful",children:O.nombre}),o.jsxs("span",{className:"product-details-beautiful",children:[O.cantidad,"x •"," ",c(O.precio)]}),(O==null?void 0:O.id)&&o.jsxs("button",{className:"product-view-link",onClick:V=>{V.stopPropagation(),window.location.href=`/producto/${O.id}`},title:"Ver producto","aria-label":`Ver producto ${O.nombre}`,children:[o.jsx(bk,{size:14}),"Ver producto",o.jsx(de.span,{className:"pv-arrow",animate:{x:[0,4,0]},transition:{duration:1.6,repeat:1/0},children:o.jsx(xk,{size:14})})]})]})]},I))}),((j=x.productos)==null?void 0:j.length)>3&&o.jsxs(de.div,{className:"more-products-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},whileHover:{scale:1.06},children:[o.jsxs("span",{className:"more-count",children:["+",x.productos.length-3]}),o.jsx("span",{className:"more-text",children:"más productos"})]})]}),o.jsx(de.div,{className:"order-card-footer",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:o.jsxs("div",{className:"view-details-hint",children:[o.jsx("span",{children:"Toque para ver detalles"}),o.jsx(de.span,{className:"arrow-icon",animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},"aria-hidden":!0,children:o.jsx(xk,{size:16})})]})})]},x.id)})})}),o.jsx(cn,{children:e&&o.jsx(de.div,{className:"order-modal-overlay-beautiful",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(null),children:o.jsxs(de.div,{className:"order-modal-beautiful",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{className:"modal-header-beautiful",children:[o.jsxs("div",{className:"modal-title-section",children:[o.jsx("h3",{className:"modal-title",children:e.numeroOrden||`Orden #${e.id.slice(-8)}`}),o.jsx("div",{className:"modal-subtitle",children:"Detalles de tu compra"})]}),o.jsx("button",{className:"close-modal-beautiful",onClick:()=>n(null),children:"×"})]}),o.jsxs("div",{className:"modal-content-beautiful",children:[o.jsx("div",{className:"order-summary-beautiful",children:o.jsxs("div",{className:"summary-card",children:[o.jsxs("div",{className:"summary-item",children:[o.jsxs("span",{className:"summary-label",children:[o.jsx(vk,{size:14})," Fecha"]}),o.jsx("span",{className:"summary-value",children:new Date((g=e.fecha)!=null&&g.seconds?e.fecha.seconds*1e3:e.fecha).toLocaleString("es-DO")})]}),o.jsxs("div",{className:"summary-item",children:[o.jsxs("span",{className:"summary-label",children:[o.jsx(T$,{size:14})," Estado"]}),o.jsx("span",{className:"summary-status",children:e.estado})]}),o.jsxs("div",{className:"summary-item",children:[o.jsxs("span",{className:"summary-label",children:[o.jsx(GU,{size:14})," Total"]}),o.jsxs("span",{className:"summary-total",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(e.total)]})]})]})}),o.jsx("div",{className:"products-grid-modal",children:(y=e.productos)==null?void 0:y.map((x,w)=>o.jsxs("div",{className:"product-item-beautiful",children:[o.jsxs("div",{className:"product-info-modal",children:[o.jsx("span",{className:"product-name-modal",children:x.nombre}),o.jsxs("span",{className:"product-details-modal",children:[x.cantidad," × DOP"," ",new Intl.NumberFormat("es-DO").format(x.precio)]})]}),o.jsxs("div",{className:"product-subtotal-beautiful",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(x.cantidad*x.precio)]}),o.jsxs("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${x.id}`,children:[o.jsx(bk,{size:16})," Ver producto"]})]},w))})]})]})})})]})}function BB({vista:t,setVista:e,onLogout:n,isMobile:r,onClose:i}){const a=[{id:"cuenta",label:"Mi cuenta",icon:F$},{id:"pedidos",label:"Mis pedidos",icon:dx},{id:"direcciones",label:"Mis direcciones",icon:m$},{id:"pagos",label:"Métodos de pago",icon:C1},{id:"configuracion",label:"Configuración",icon:E$}],c=u=>{e(u),r&&i&&i()};return o.jsxs("div",{className:"sidebar-menu",children:[a.map(u=>{const d=u.icon;return o.jsxs("button",{onClick:()=>c(u.id),className:`sidebar-item ${t===u.id?"active":""}`,children:[o.jsx(d,{size:20}),o.jsx("span",{children:u.label}),o.jsx(ux,{size:16,className:"sidebar-item-arrow"})]},u.id)}),o.jsx("div",{className:"sidebar-divider"}),o.jsxs("button",{onClick:n,className:"sidebar-item danger",children:[o.jsx(h$,{size:20}),o.jsx("span",{children:"Cerrar sesión"}),o.jsx(ux,{size:16,className:"sidebar-item-arrow"})]})]})}function HB({visible:t,text:e="Cargando..."}){return t?o.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:o.jsxs("div",{className:"loaderInner",children:[o.jsx("div",{className:"loader",children:o.jsxs("div",{className:"spinner",children:[o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{})]})}),o.jsx("p",{className:"loaderText",children:e})]})}):null}function Wk({abierto:t,titulo:e,descripcion:n,onCancel:r,onConfirm:i,dangerText:a="Confirmar"}){return t?o.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:o.jsxs(de.div,{className:"modal-card card",initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},children:[o.jsx("h3",{id:"modal-title",className:"modal-title",children:e}),o.jsx("p",{className:"modal-desc",children:n}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"btn btn-ghost",onClick:r,children:"Cancelar"}),o.jsx("button",{className:"btn btn-danger",onClick:i,children:a})]})]})}):null}function WB(){const{usuario:t,usuarioInfo:e,actualizarUsuarioInfo:n,logout:r}=Jr(),i=Qr(),[a,c]=k.useState("cuenta"),[u,d]=k.useState(!1),[f,g]=k.useState(!1),[y,x]=k.useState(!1),[w,S]=k.useState({text:"",tipo:""}),[b,N]=k.useState(!1),j=Yr.useRef(null),O=Yr.useRef(null),[I,V]=k.useState({nombre:(t==null?void 0:t.displayName)||"",email:(t==null?void 0:t.email)||"",telefono:"",direccion:"",fotoURL:(t==null?void 0:t.photoURL)||""}),[$,q]=k.useState(null),[D,R]=k.useState(null),[P,T]=k.useState([]),[L,U]=k.useState([]),[A,oe]=k.useState(!1),[ae,Ce]=k.useState(null),[Pe,ee]=k.useState(!1),[ie,ye]=k.useState(!1),[B,Z]=k.useState(!1),[be,Ve]=k.useState(!1),[We,et]=k.useState(null);k.useEffect(()=>{V(e?W=>({...W,telefono:e.telefono||"",direccion:e.direccion||"",fotoURL:e.fotoURL||(t==null?void 0:t.photoURL)||""}):W=>({...W,fotoURL:(t==null?void 0:t.photoURL)||""}))},[e,t==null?void 0:t.photoURL]),k.useEffect(()=>{t&&(ht(),Xe())},[t]);const ht=async()=>{try{const W=fn(Ht(Ue,"orders"),Sr("userId","==",t.uid)),X=await os(W);T(X.docs.map(me=>({id:me.id,...me.data()})))}catch(W){console.error("fetchHistorial:",W)}},Xe=async()=>{try{const W=fn(Ht(Ue,"direcciones"),Sr("usuarioId","==",t.uid)),X=await os(W);U(X.docs.map(me=>({id:me.id,...me.data()})))}catch(W){console.error("fetchDirecciones:",W)}},nt=k.useMemo(()=>{if(D)return D;if(I.fotoURL)return I.fotoURL;const W=I.nombre||I.email||(t==null?void 0:t.email)||"U";return UB(W,512)},[D,I.fotoURL,I.nombre,I.email,t==null?void 0:t.email]),St=k.useMemo(()=>{if(I.nombre&&I.nombre.trim())return I.nombre;const X=(I.email||(t==null?void 0:t.email)||"").split("@")[0]||"Usuario";return X.charAt(0).toUpperCase()+X.slice(1)},[I.nombre,I.email,t==null?void 0:t.email]),xt=(W,X="info",me=3500)=>{S({text:W,tipo:X}),me&&setTimeout(()=>S({text:"",tipo:""}),me)},Tt=async()=>{try{ye(!1),await r(),i("/")}catch(W){console.error("logout:",W),xt("Error cerrando sesión.","error",5e3)}},Ze=W=>V(X=>({...X,[W.target.name]:W.target.value})),Rt=W=>{var je;const X=(je=W.target.files)==null?void 0:je[0];if(!X)return;q(X);const me=URL.createObjectURL(X);R(me)},At=()=>{D&&URL.revokeObjectURL(D),q(null),R(null)},pn=async()=>{if(!$)return xt("Selecciona una imagen primero.","error");x(!0);try{const W=await LB($);await n({fotoURL:W}),await Fc(t,{photoURL:W}),V(X=>({...X,fotoURL:W})),At(),xt("Foto actualizada.","success")}catch(W){console.error("uploadLocalImage:",W),xt("Error subiendo imagen.","error",5e3)}finally{x(!1)}},J=async()=>{x(!0);try{await n({telefono:I.telefono,direccion:I.direccion,displayName:I.nombre});const W={telefono:I.telefono,direccion:I.direccion,displayName:I.nombre,updatedAt:new Date};try{await er(pt(Ue,"users",t.uid),W,{merge:!0})}catch(me){console.warn("No se pudo escribir users/{uid}:",me)}try{await er(pt(Ue,"usuarios",t.uid),W,{merge:!0})}catch(me){console.warn("No se pudo escribir usuarios/{uid}:",me)}const X={};t.displayName!==I.nombre&&(X.displayName=I.nombre),Object.keys(X).length&&await Fc(t,X),g(!1),xt("Perfil guardado.","success")}catch(W){console.error("Error guardando perfil:",W),xt("Error guardando perfil.","error")}finally{x(!1)}},He=async()=>{x(!0);try{await Fc(t,{photoURL:""}),await n({fotoURL:""}),V(W=>({...W,fotoURL:""})),At(),xt("Imagen de perfil removida.","success")}catch(W){console.error("confirmRemoveImage:",W),xt("Error removiendo imagen.","error")}finally{x(!1),ee(!1)}},De=async W=>{try{const X=typeof W=="string"?W:(W==null?void 0:W.direccionCompleta)||"",me=W&&W.metodoEntrega?W.metodoEntrega:"domicilio";Z(!0),await n({direccion:X,metodoEntrega:me});const je={direccion:X,metodoEntrega:me,updatedAt:new Date};try{await er(pt(Ue,"users",t.uid),je,{merge:!0})}catch(te){console.warn("No se pudo escribir users/{uid}:",te)}try{await er(pt(Ue,"usuarios",t.uid),je,{merge:!0})}catch(te){console.warn("No se pudo escribir usuarios/{uid}:",te)}try{let te=await Vr(pt(Ue,"users",t.uid));if(te.exists()||(te=await Vr(pt(Ue,"usuarios",t.uid))),te&&te.exists()){const ke=te.data()||{};await n({direccion:ke.direccion||X,metodoEntrega:ke.metodoEntrega||me})}}catch(te){console.warn("No se pudo releer documento de usuario:",te)}A&&oe(!1),await Xe(),V(te=>({...te,direccion:X})),xt("Dirección seleccionada y guardada.","success"),window.location.reload()}catch(X){console.error("handleSeleccionarDireccion error:",X),Z(!1),xt("Error seleccionando dirección.","error",5e3)}},st=async W=>{try{if(await Cp(pt(Ue,"direcciones",W)),t!=null&&t.direccion){const X=L.find(me=>me.id===W);X&&t.direccion===X.direccionCompleta&&(await n({direccion:"",metodoEntrega:"",selectedDeliveryMethod:""}),setTimeout(()=>{window.location.reload()},1e3))}await Xe(),xt("Dirección eliminada correctamente.","success")}catch(X){console.error("eliminarDireccion:",X),xt("Error eliminando dirección.","error")}},wt=W=>{et(W),Ve(!0)},Qe=()=>{Ve(!1),et(null)},dt=()=>{We&&(st(We),Ve(!1),et(null))};return!t||!e?o.jsx("main",{className:"min-h-screen flex items-center justify-center bg-slate-50",style:{paddingTop:"calc(var(--content-offset, 100px) + 40px)"},children:o.jsx("p",{className:"text-lg animate-pulse",children:"Cargando perfil..."})}):o.jsxs(de.main,{className:"profile-page",variants:$B,initial:"hidden",animate:"enter",exit:"exit",children:[o.jsxs("button",{className:"sidebar-toggle-btn xl:hidden",onClick:()=>d(!u),"aria-label":"Abrir menú",children:[o.jsx(y$,{size:24}),o.jsx("span",{children:"Perfil"})]}),o.jsx(cn,{children:u&&o.jsx(de.div,{className:"sidebar-overlay xl:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!1)})}),o.jsxs("div",{className:"profile-container",children:[o.jsxs("aside",{className:`profile-sidebar ${u?"open":""}`,children:[o.jsx("button",{className:"sidebar-close-btn xl:hidden",onClick:()=>d(!1),children:o.jsx($$,{size:24})}),o.jsx(BB,{vista:a,setVista:c,onLogout:()=>ye(!0),isMobile:!0,onClose:()=>d(!1)})]}),o.jsx("main",{className:"profile-content",children:o.jsx("div",{className:"content-card",children:o.jsxs(cn,{mode:"wait",children:[a==="cuenta"&&o.jsxs(de.section,{variants:sl,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsxs("div",{className:"profile-header big",children:[o.jsx("div",{className:"avatar-block large",children:o.jsx("img",{src:nt,alt:"Avatar",className:"avatar-img"})}),o.jsxs("div",{className:"profile-meta big",children:[o.jsx("h1",{className:"profile-name",children:St}),o.jsx("p",{className:"profile-email",children:I.email}),o.jsxs("p",{className:"muted small",children:["UID: ",o.jsx("span",{className:"mono",children:t.uid})]}),o.jsxs("div",{className:"profile-actions",children:[o.jsx("button",{className:"btn btn-primary",onClick:()=>N(!0),children:"Cambiar foto"}),o.jsx("button",{className:"btn btn-ghost",onClick:()=>ee(!0),children:"Quitar"}),D&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn btn-success",onClick:pn,disabled:y,children:"Guardar foto"}),o.jsx("button",{className:"btn btn-outline",onClick:At,children:"Cancelar"})]})]}),o.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:Rt,className:"hidden",style:{display:"none"}}),o.jsx("input",{ref:O,type:"file",accept:"image/*",capture:"environment",onChange:Rt,className:"hidden",style:{display:"none"}})]})]}),o.jsxs("div",{className:"form-grid big",children:[o.jsxs("div",{className:"form-row",children:[o.jsx("label",{children:"Nombre"}),o.jsx("input",{name:"nombre",value:I.nombre,onChange:Ze,disabled:!f})]}),o.jsxs("div",{className:"form-row",children:[o.jsx("label",{children:"Email"}),o.jsx("input",{name:"email",value:I.email,disabled:!0})]}),o.jsxs("div",{className:"form-row",children:[o.jsx("label",{children:"Teléfono"}),o.jsx("input",{name:"telefono",value:I.telefono,onChange:Ze,disabled:!f})]}),o.jsxs("div",{className:"form-row full",children:[o.jsx("label",{children:"Dirección completa"}),o.jsx("textarea",{name:"direccion",value:I.direccion,onChange:Ze,disabled:!f,rows:4}),o.jsx("p",{className:"muted hint",children:'Pulsa "Editar" para modificar.'})]}),o.jsx("div",{className:"form-actions",children:f?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:J,className:"btn btn-success",disabled:y,children:"Guardar"}),o.jsx("button",{onClick:()=>{g(!1),At()},className:"btn btn-ghost",children:"Cancelar"})]}):o.jsx("button",{onClick:()=>g(!0),className:"btn btn-primary",children:"Editar perfil"})})]})]},"perfil"),a==="pedidos"&&o.jsxs(de.section,{variants:sl,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsx("h2",{className:"section-title large",children:"Mis pedidos"}),o.jsx(zB,{historial:P})]},"historial"),a==="direcciones"&&o.jsxs(de.section,{variants:sl,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsxs("div",{className:"direcciones-head",children:[o.jsx("h2",{className:"section-title large",children:"Direcciones"}),o.jsx("div",{children:o.jsx("button",{className:"btn btn-primary",onClick:()=>{Ce(null),oe(!0)},children:"Añadir dirección"})})]}),o.jsxs("div",{className:"cards-list",children:[o.jsxs("div",{className:"address-card large",children:[o.jsxs("div",{className:"address-content",children:[o.jsx("div",{className:"address-title",children:"Recoger en: Playcenter Universal Santiago"}),o.jsx("div",{className:"muted break-words",children:ry.direccionCompleta}),o.jsx("a",{href:ry.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),o.jsx("div",{className:"address-actions",children:o.jsx("button",{onClick:()=>De(ry),className:"btn btn-success",children:"Seleccionar"})})]}),L.length===0?o.jsx("div",{className:"empty",children:"No tienes direcciones guardadas."}):L.map(W=>o.jsxs("div",{className:"address-card large",children:[o.jsxs("div",{className:"address-content",children:[o.jsx("div",{className:"address-title break-words",children:W.direccionCompleta||`${W.numeroCalle||""} ${W.numeroCasa?"Casa "+W.numeroCasa:""}, ${W.ciudad||""}, ${W.provincia||""}`}),o.jsxs("div",{className:"muted",children:["Método: ",W.metodoEntrega||"domicilio"]}),W.referencia&&o.jsxs("div",{className:"muted",children:["Ref: ",W.referencia]}),W.ubicacion&&o.jsx("a",{href:W.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),o.jsxs("div",{className:"address-actions",children:[o.jsx("button",{onClick:()=>{Ce(W),oe(!0)},className:"address-action-btn edit-btn","aria-label":"Editar dirección",children:o.jsx(kj,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>De(W),className:"address-action-btn select-btn","aria-label":"Seleccionar dirección",children:o.jsx(Cc,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>wt(W.id),className:"address-action-btn delete-btn","aria-label":"Eliminar dirección",children:o.jsx(Sj,{className:"w-4 h-4"})})]})]},W.id))]}),A&&o.jsx(Nj,{abierto:A,onClose:async()=>{oe(!1),Ce(null),await Xe()},usuarioId:t.uid,direccionEditar:ae,actualizarLista:Xe})]},"direcciones"),a==="pagos"&&o.jsxs(de.section,{variants:sl,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsx("h2",{className:"section-title large",children:"Métodos de pago"}),o.jsxs("div",{className:"empty-state-beautiful",children:[o.jsx("div",{className:"empty-illustration",children:o.jsx(de.div,{className:"empty-box",animate:{y:[0,-10,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:o.jsx(C1,{size:56})})}),o.jsx("h3",{children:"Aún no tienes métodos de pago"}),o.jsx("p",{children:"Cuando agregues una tarjeta o método de pago, aparecerá aquí."}),o.jsx("div",{className:"empty-cta",children:o.jsx("button",{className:"btn-beautiful-primary",children:"Agregar método de pago"})})]})]},"pagos"),a==="configuracion"&&o.jsxs(de.section,{variants:sl,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsx("h2",{className:"section-title large",children:"Configuración"}),o.jsxs("div",{className:"cards-list",children:[o.jsxs("div",{className:"config-card",children:[o.jsxs("div",{className:"config-card-header",children:[o.jsx(u$,{size:20}),o.jsx("h3",{children:"Cambiar contraseña"})]}),o.jsx("p",{className:"config-card-desc",children:"Actualiza tu contraseña para mantener tu cuenta segura."}),o.jsx("button",{className:"btn btn-outline",children:"Cambiar contraseña"})]}),o.jsxs("div",{className:"config-card",children:[o.jsxs("div",{className:"config-card-header",children:[o.jsx(LU,{size:20}),o.jsx("h3",{children:"Notificaciones"})]}),o.jsx("p",{className:"config-card-desc",children:"Administra cómo quieres recibir notificaciones."}),o.jsxs("div",{className:"config-toggle",children:[o.jsxs("label",{className:"toggle-item",children:[o.jsx("span",{children:"Notificaciones por email"}),o.jsx("input",{type:"checkbox",defaultChecked:!0})]}),o.jsxs("label",{className:"toggle-item",children:[o.jsx("span",{children:"Notificaciones de pedidos"}),o.jsx("input",{type:"checkbox",defaultChecked:!0})]}),o.jsxs("label",{className:"toggle-item",children:[o.jsx("span",{children:"Ofertas y promociones"}),o.jsx("input",{type:"checkbox"})]})]})]}),o.jsxs("div",{className:"config-card",children:[o.jsxs("div",{className:"config-card-header",children:[o.jsx(r$,{size:20}),o.jsx("h3",{children:"Idioma"})]}),o.jsx("p",{className:"config-card-desc",children:"Selecciona tu idioma preferido."}),o.jsxs("select",{className:"config-select",children:[o.jsx("option",{value:"es",children:"Español"}),o.jsx("option",{value:"en",children:"English"})]})]})]})]},"configuracion")]})})})]}),o.jsx(Wk,{abierto:Pe,titulo:"Quitar imagen de perfil",descripcion:"Se quitará la URL de tu perfil (no borra el archivo en Cloudinary).",onCancel:()=>ee(!1),onConfirm:He,dangerText:"Quitar imagen"}),o.jsx(Wk,{abierto:ie,titulo:"Cerrar sesión",descripcion:"¿Estás seguro que quieres cerrar sesión?",onCancel:()=>ye(!1),onConfirm:Tt,dangerText:"Cerrar sesión"}),o.jsx(cn,{children:b&&o.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>N(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:o.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:W=>W.stopPropagation(),style:{backgroundColor:"white",padding:"2rem",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%"},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:"Cambiar foto de perfil"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem",textAlign:"center",fontSize:"0.9rem"},children:"Selecciona cómo quieres subir tu foto"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsxs("button",{onClick:()=>{var W;(W=O.current)==null||W.click(),N(!1)},style:{padding:"1rem 1.5rem",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem"},onMouseOver:W=>{W.currentTarget.style.backgroundColor="#f9fafb",W.currentTarget.style.borderColor="#2563eb"},onMouseOut:W=>{W.currentTarget.style.backgroundColor="white",W.currentTarget.style.borderColor="#e5e7eb"},children:[o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),o.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),"Tomar foto con cámara"]}),o.jsxs("button",{onClick:()=>{var W;(W=j.current)==null||W.click(),N(!1)},style:{padding:"1rem 1.5rem",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem"},onMouseOver:W=>{W.currentTarget.style.backgroundColor="#f9fafb",W.currentTarget.style.borderColor="#2563eb"},onMouseOut:W=>{W.currentTarget.style.backgroundColor="white",W.currentTarget.style.borderColor="#e5e7eb"},children:[o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o.jsx("polyline",{points:"21 15 16 10 5 21"})]}),"Seleccionar de galería"]}),o.jsxs("button",{onClick:()=>{var W;(W=j.current)==null||W.click(),N(!1)},style:{padding:"1rem 1.5rem",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem"},onMouseOver:W=>{W.currentTarget.style.backgroundColor="#f9fafb",W.currentTarget.style.borderColor="#2563eb"},onMouseOut:W=>{W.currentTarget.style.backgroundColor="white",W.currentTarget.style.borderColor="#e5e7eb"},children:[o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),o.jsx("polyline",{points:"13 2 13 9 20 9"})]}),"Seleccionar archivo"]}),o.jsx("button",{onClick:()=>N(!1),style:{marginTop:"0.5rem",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"none",backgroundColor:"transparent",color:"#6b7280",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:W=>W.currentTarget.style.color="#374151",onMouseOut:W=>W.currentTarget.style.color="#6b7280",children:"Cancelar"})]})]})})}),o.jsx(HB,{visible:B,text:"Guardando..."}),o.jsx(cn,{children:be&&o.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:o.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"¿Eliminar dirección?"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"¿Estás seguro que quieres eliminar esta dirección? Esta acción no se puede deshacer."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsx("button",{onClick:Qe,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:W=>W.target.style.backgroundColor="#f9fafb",onMouseOut:W=>W.target.style.backgroundColor="white",children:"Cancelar"}),o.jsx("button",{onClick:dt,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:W=>W.target.style.backgroundColor="#dc2626",onMouseOut:W=>W.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),w.text&&o.jsx(de.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`toast ${w.tipo==="success"?"toast-success":w.tipo==="error"?"toast-error":"toast-info"}`,children:w.text})]})}const qk="https://playcenter-universal.onrender.com",qB="https://lab.cardnet.com.do/authorize",Gk=async(t,e,n=6e3)=>{const r=new AbortController,i=setTimeout(()=>r.abort(),n);try{const a=await fetch(t,{...e,signal:r.signal});if(clearTimeout(i),!a.ok)throw new Error(`HTTP ${a.status}`);return a}catch(a){throw clearTimeout(i),a}};function bx({className:t,total:e,label:n}){const[r,i]=k.useState(null),[a,c]=k.useState(!1),[u,d]=k.useState(null),f=typeof e=="number"?e/100:null,g=Number.isFinite(f)?new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(f):null,y=n||(g?`Comprar ahora • ${g}`:"Comprar ahora");k.useEffect(()=>{e&&(async()=>{try{const b=await(await Gk(`${qk}/cardnet/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({total:e})})).json();b.SESSION&&d(b.SESSION)}catch{console.log("Pre-carga de session falló, se creará al hacer clic")}})()},[e]);const x=async()=>{if(a)return;c(!0);const w=document.querySelector(".pay-btn");try{w&&(w.disabled=!0,w.classList.add("loading"));let S;if(u)S=u;else{const N=await(await Gk(`${qk}/cardnet/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({total:e})})).json();if(!N.SESSION)throw new Error("No se recibió SESSION del servidor");S=N.SESSION}i(S),requestAnimationFrame(()=>{const b=document.getElementById("cardnetForm");b&&b.submit()})}catch(S){let b="No se pudo procesar el pago";S.name==="AbortError"?b="Tiempo de espera agotado. Intenta de nuevo.":S.message.includes("Failed to fetch")?b="Sin conexión. Verifica tu internet.":S.message.includes("HTTP")&&(b="Error del servidor. Intenta de nuevo."),alert(`❌ ${b}`),w&&(w.disabled=!1,w.classList.remove("loading"),w.querySelector(".btn-text").textContent=y),c(!1)}};return o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:x,className:`pay-btn ${t||""}`,disabled:a,children:[o.jsx("span",{className:"btn-text",children:y}),o.jsxs("div",{className:"icon-container",children:[o.jsx("svg",{viewBox:"0 0 24 24",className:"icon card-icon",children:o.jsx("path",{d:"M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18C2,19.11 2.89,20 4,20H20C21.11,20 22,19.11 22,18V6C22,4.89 21.11,4 20,4Z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon payment-icon",children:o.jsx("path",{d:"M2,17H22V21H2V17M6.25,7H9V6H6V3H18V6H15V7H17.75L19,17H5L6.25,7M9,10H15V8H9V10M9,13H15V11H9V13Z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon dollar-icon",children:o.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon wallet-icon default-icon",children:o.jsx("path",{d:"M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.9 10,8V16A2,2 0 0,0 12,18M12,16H22V8H12M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon check-icon",children:o.jsx("path",{d:"M9,16.17L4.83,12L3.41,13.41L9,19L21,7L19.59,5.59L9,16.17Z",fill:"currentColor"})})]})]}),r&&o.jsx("form",{id:"cardnetForm",action:qB,method:"post",children:o.jsx("input",{type:"hidden",name:"SESSION",value:r})})]})}function GB({productoActual:t,onProductoClick:e}){const{products:n,loading:r}=UC(t==null?void 0:t.categoria),i=k.useRef(null),[a,c]=k.useState(!1),[u,d]=k.useState(!1),f=k.useMemo(()=>!t||!n?[]:n.filter(b=>(b==null?void 0:b.id)!==(t==null?void 0:t.id)).slice(0,20),[n,t==null?void 0:t.id]),g=k.useCallback(()=>{const b=i.current;if(!b)return 1;const N=b.offsetWidth,j=b.querySelector(".prl-card");if(!j)return 1;const V=j.offsetWidth+20;return Math.floor(N/V)},[]),y=k.useCallback(()=>{const b=i.current;if(!b)return;const{scrollLeft:N,scrollWidth:j,clientWidth:O}=b;c(N>10),d(N<j-O-10)},[]),x=k.useCallback(b=>{const N=i.current;if(!N)return;const j=N.querySelector(".prl-card");if(!j)return;const V=j.offsetWidth+20,$=g(),q=b*$*V;N.scrollBy({left:q,behavior:"smooth"})},[g]);k.useEffect(()=>{const b=i.current;if(!b)return;y();const N=()=>{const j=b.parentElement;j&&b.scrollLeft>10&&j.classList.add("scrolled")};return b.addEventListener("scroll",y),b.addEventListener("scroll",N),window.addEventListener("resize",y),()=>{b.removeEventListener("scroll",y),b.removeEventListener("scroll",N),window.removeEventListener("resize",y)}},[y,f]);const w=b=>{b&&(e?e(b):window.location.href=`/producto/${b}`)},S=b=>{const N=Math.round(Number(b)||0);try{return new Intl.NumberFormat("es-DO").format(N)}catch{return String(N)}};return r?o.jsxs("div",{className:"productos-relacionados-container",children:[o.jsx("h3",{className:"prl-title",children:"Productos Relacionados"}),o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})]}):o.jsx("section",{className:"prl-section","aria-label":"Productos relacionados",children:o.jsxs("div",{className:"prl-container",children:[o.jsx("h2",{className:"prl-title",children:"Productos relacionados"}),o.jsxs("div",{className:"prl-wrapper","aria-roledescription":"carrusel",children:[a&&o.jsx("button",{className:"prl-arrow left",onClick:()=>x(-1),"aria-label":"Anterior",type:"button",children:o.jsx(L8,{size:18})}),o.jsx("div",{ref:i,className:"prl-rail",children:f.length>0?f.map(b=>{var I;const N=(b==null?void 0:b.imagen)||((I=b==null?void 0:b.imagenes)==null?void 0:I[0])||"",j=(b==null?void 0:b.nombre)||"Producto",O=Number(b==null?void 0:b.precio)||0;return o.jsxs("article",{className:"prl-card",role:"group","aria-label":j,onClick:()=>w(b.slug||b.id),children:[o.jsx("div",{className:"prl-imgbox",children:N?o.jsx("img",{src:N,alt:j,className:"prl-img",loading:"lazy",draggable:"false",decoding:"async"}):o.jsx("div",{className:"prl-img-fallback","aria-hidden":!0})}),o.jsxs("div",{className:"prl-meta",children:[o.jsx("h3",{className:"prl-name",title:j,children:j}),o.jsx("div",{className:"prl-price",children:O>0?o.jsxs("span",{children:["DOP ",o.jsx("strong",{children:S(O)})]}):o.jsx("span",{className:"prl-price-muted",children:"Sin precio"})})]})]},b==null?void 0:b.id)}):o.jsx("div",{className:"prl-empty",children:"No hay productos relacionados."})}),u&&o.jsx("button",{className:"prl-arrow right",onClick:()=>x(1),"aria-label":"Siguiente",type:"button",children:o.jsx(V8,{size:18})})]})]})})}function Kk(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function KB(t){try{let e=String(t);return e=e.replace(/<\/(?:script|style)>/gi,"").replace(/<(?:script|style)[^>]*>[\s\S]*?<\/(?:script|style)>/gi,""),e=e.replace(/ on[a-z]+\s*=\s*"[^"]*"/gi,""),e=e.replace(/ on[a-z]+\s*=\s*'[^']*'/gi,""),e=e.replace(/ on[a-z]+\s*=\s*[^\s>]+/gi,""),e=e.replace(/javascript:\s*/gi,""),e}catch{return String(t)}}function Xk(t,e,n){try{const r={mode:t,items:e,total:n,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(r))}catch{}}function XB(){const{carrito:t,agregarAlCarrito:e,quitarDelCarrito:n,eliminarUnidadDelCarrito:r}=Kd(),{usuario:i}=Jr(),{abrirModal:a}=tu(),{theme:c,isDark:u}=cu(),{id:d}=US(),f=Qr(),[g,y]=k.useState(!1),[x,w]=k.useState(0),[S,b]=k.useState(0),[N,j]=k.useState(!1),[O,I]=k.useState(0),[V,$]=k.useState(null),[q,D]=k.useState(!1),[R,P]=k.useState(!0),[T,L]=k.useState(0),[U,A]=k.useState(!1),[oe,ae]=k.useState(!1),[Ce,Pe]=k.useState(!1),[ee,ie]=k.useState("images"),[ye,B]=k.useState(0),[Z,be]=k.useState(1),[Ve,We]=k.useState({x:0,y:0}),[et,ht]=k.useState(0),[Xe,nt]=k.useState(1),[St,xt]=k.useState(!1),[Tt,Ze]=k.useState(1),[Rt,At]=k.useState({x:0,y:0}),[pn,J]=k.useState(!1),[He,De]=k.useState(!1),[st,wt]=k.useState(0),[Qe,dt]=k.useState(1),[W,X]=k.useState({x:50,y:50}),[me,je]=k.useState(!1),te=k.useRef(null),ke=k.useRef(0),Se=k.useRef(0),[vt,jt]=k.useState(!1),ct=k.useRef(null),Ot=k.useRef(null),H=k.useRef(null),G=k.useRef(null),pe=k.useRef(null),ce=k.useRef(!1),he=k.useRef({x:50,y:50}),[Fe,Te]=k.useState(!1),[xe,se]=k.useState(""),[Le,Me]=k.useState({w:200,h:200}),{product:ue,loading:at,error:ze}=S8(d),kn=()=>{var rt;if(!ue)return[];const Be=(Array.isArray(ue==null?void 0:ue.variantes)?ue.variantes:[]).filter(lt=>lt&&typeof lt.color=="string"&&lt.color.trim())[O]||null;let Ie=[];return Be?((rt=Be.videoUrls)==null?void 0:rt.length)>0?Ie=Be.videoUrls:Ie=(ue==null?void 0:ue.videoUrls)||[]:Ie=(ue==null?void 0:ue.videoUrls)||[],Array.isArray(Ie)?Ie.filter(lt=>lt&&typeof lt=="string"&&lt.trim()):[]},Lt=(Y,we)=>{var Jt,Sn,qi,Ci,Tn,ps;const Be=un=>{try{return typeof un=="string"?un:(un==null?void 0:un.url)||(un==null?void 0:un.src)||""}catch{return""}};let Ie="",qe=[];we?(Ie=Be(we.imagen||((Sn=(Jt=we.imagenPrincipal)==null?void 0:Jt[0])==null?void 0:Sn.url)),qe=Array.isArray(we.imagenes)?we.imagenes.map(Be).filter(Boolean):[],!Ie&&qe.length===0&&(Ie=Be((Y==null?void 0:Y.imagen)||((Ci=(qi=Y==null?void 0:Y.imagenPrincipal)==null?void 0:qi[0])==null?void 0:Ci.url)),qe=Array.isArray(Y==null?void 0:Y.imagenes)?Y.imagenes.map(Be).filter(Boolean):[])):(Ie=Be((Y==null?void 0:Y.imagen)||((ps=(Tn=Y==null?void 0:Y.imagenPrincipal)==null?void 0:Tn[0])==null?void 0:ps.url)),qe=Array.isArray(Y==null?void 0:Y.imagenes)?Y.imagenes.map(Be).filter(Boolean):[]);const rt=[];Ie&&rt.push(Ie),rt.push(...qe);const lt=rt.filter(un=>!(!un||typeof un!="string"||un.trim()===""));return[...new Set(lt)]};let Vt=[],Xt=0,Wt=0,ir=[],Mn=[],Et=null,zn=[];if(ue){ir=Array.isArray(ue==null?void 0:ue.variantes)?ue.variantes:[],Mn=ir.filter(Ie=>Ie&&typeof Ie.color=="string"&&Ie.color.trim()),Et=O===-1||O===null?null:Mn[O]||null,zn=Lt(ue,Et);const Y=zn.map(Ie=>({type:"image",url:Ie})),Be=(kn()||[]).map(Ie=>({type:"video",url:Ie}));Vt=[...Y,...Be],Wt=Math.max(0,Math.min(S,Math.max(0,Vt.length-1))),Xt=V!==null?V:Wt}if(k.useEffect(()=>{I(-1),w(0),b(0),$(null)},[d]),k.useEffect(()=>{},[O]),k.useEffect(()=>{be(1),We({x:0,y:0})},[ye,ee]),k.useEffect(()=>{dt(1),X({x:0,y:0})},[st]),k.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<1280){const Y=document.querySelector(".mobile-tablet-thumbs"),we=Y&&Y.querySelector(".mt-thumb.active");Y&&we&&typeof we.scrollIntoView=="function"&&we.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[S]),k.useEffect(()=>{const Y=Array.isArray(Vt)&&Vt[Xt]||null;(!Y||Y.type!=="image")&&Te(!1)},[Xt]),k.useEffect(()=>{let Y=window.scrollY;const we=()=>{const Be=window.scrollY;Be>Y&&Be>100?P(!1):P(!0),Y=Be};return window.addEventListener("scroll",we,{passive:!0}),()=>window.removeEventListener("scroll",we)},[]),k.useEffect(()=>{if(ue){const Be=(Array.isArray(ue==null?void 0:ue.variantes)?ue.variantes:[]).filter(qe=>qe&&typeof qe.color=="string"&&qe.color.trim())[O]||null,Ie=t.find(qe=>{var rt;return qe.id===ue.id&&(!Be||((rt=qe.variante)==null?void 0:rt.color)===(Be==null?void 0:Be.color))});L((Ie==null?void 0:Ie.cantidad)||0)}},[t,ue,O]),k.useEffect(()=>{const Y=()=>{const Be=te.current,Ie=document.querySelector(".amazon-thumbs-sidebar");if(Be&&Ie){const qe=Be.offsetHeight;Ie.style.height=`${qe}px`,Ie.style.maxHeight=`${qe}px`}},we=setTimeout(Y,100);return window.addEventListener("resize",Y),()=>{clearTimeout(we),window.removeEventListener("resize",Y)}},[S,ue]),at)return null;if(ze||!ue){const Y=()=>{window.history&&window.history.length>1?f(-1):f("/productos")};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-700 p-4",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsx("div",{className:"mb-4",children:o.jsx("svg",{className:"mx-auto h-16 w-16 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),o.jsx("p",{className:"text-lg sm:text-xl font-semibold mb-2 text-blue-600",children:ze?"Error al cargar el producto":"Producto no encontrado"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:ze?`Error: ${ze}`:`No se pudo encontrar el producto con ID: ${d}`}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{onClick:Y,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver"}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Recargar"})]})]})})}const Xn=O===-1||O===null?null:Mn[O]||null,cs=()=>((ue==null?void 0:ue.imagenesExtra)||[]).slice(0,3),Do=Y=>{I(Y),w(0),b(0)},Zr=Y=>{try{const we=(Y??"").toString().trim();return we||null}catch{return null}},mi=Zr(Xn==null?void 0:Xn.color),Bn=t.find(Y=>Y.id===ue.id&&Zr(Y.colorSeleccionado)===mi),Hi=(Bn==null?void 0:Bn.cantidad)||0,Aa=()=>{if(!i){y(!0);return}if(!Bn){const Y={...ue,cantidad:1,precio:Xn&&Number(Xn.precio)?Number(Xn.precio):Number(ue.precio)||0,cantidadProducto:Number.isFinite(Nr)?Nr:void 0};e(Y,mi)}},qs=()=>{if(!i){y(!0);return}const Y={...ue,precio:Xn&&Number(Xn.precio)?Number(Xn.precio):Number(ue.precio)||0,cantidadProducto:Number.isFinite(Nr)?Nr:void 0};e(Y,mi)},Gs=()=>{if(!i){y(!0);return}r(ue.id,mi)},Ia=()=>{if(!i){y(!0);return}n(ue.id,mi)},Nr=(Xn==null?void 0:Xn.cantidad)!==void 0?Number(Xn.cantidad)||0:ue.cantidad!==void 0?Number(ue.cantidad)||0:1/0,qt=(ue==null?void 0:ue.activo)!==!1&&Nr>0,$r=Number.isFinite(Nr)?Math.max(0,Nr-((Bn==null?void 0:Bn.cantidad)||0)):1/0,Wi=Xn&&Xn.precio!==void 0?Number(Xn.precio):NaN,gr=Number.isFinite(Wi)&&Wi>0?Wi:Number(ue.precio)||0,zr=[{id:ue.id,nombre:ue.nombre,precio:gr,cantidad:1}],Pa=()=>{j(!1)},Ol=zn.length>0;Mn&&Mn.length>1;const Ks=Ol;zn.length;const Br=Y=>({type:"image",url:Y||""}),Ra=zn.filter(Y=>!(!Y||typeof Y!="string"||Y.trim()==="")),yr=Ra.map(Y=>Br(Y)),Ma=new Set;yr.filter(Y=>{const we=(Y.url||"").split("?")[0].split("#")[0].trim().toLowerCase();return!we||Ma.has(we)?!1:(Ma.add(we),!0)}),Math.min(Math.max(x,0),Math.max(0,(Ra.length||1)-1));const Xs=[...Ra],Ll=Y=>{if(typeof window>"u"||window.innerWidth<1280)return;const we=Vt&&Vt[Xt]||null;if(!we||we.type!=="image")return;const Be=we.url;se(Be);const Ie=H.current;if(Ie&&Ie.naturalWidth&&Ie.naturalHeight){const rt=Ie.getBoundingClientRect(),lt=rt.width||Ie.clientWidth||0,rn=rt.height||Ie.clientHeight||0,Jt=Ie.naturalWidth,Sn=Ie.naturalHeight,qi=Jt/Math.max(1,lt),Ci=Sn/Math.max(1,rn),Tn=Math.min(qi,Ci),ps=Math.min(4,Math.max(2,Tn)),un=Tn>0?ps/Tn:2;Me({w:Math.round(Jt*un),h:Math.round(Sn*un)}),pe.current=rt}else Me({w:1e3,h:1e3}),pe.current=Ot.current?Ot.current.getBoundingClientRect():null;const qe=pe.current||H.current&&H.current.getBoundingClientRect()||Ot.current&&Ot.current.getBoundingClientRect();if(qe&&Y){const rt=Math.max(0,Math.min(100,(Y.clientX-qe.left)/qe.width*100)),lt=Math.max(0,Math.min(100,(Y.clientY-qe.top)/qe.height*100));he.current={x:rt,y:lt}}else he.current={x:50,y:50};Te(!0),requestAnimationFrame(()=>{const rt=G.current;rt&&(rt.style.backgroundPosition=`${he.current.x}% ${he.current.y}%`)})},Da=Y=>{if(!Fe||typeof window<"u"&&window.innerWidth<1280)return;const we=pe.current||H.current&&H.current.getBoundingClientRect()||Ot.current&&Ot.current.getBoundingClientRect();if(!we)return;const Be=Math.max(0,Math.min(100,(Y.clientX-we.left)/we.width*100)),Ie=Math.max(0,Math.min(100,(Y.clientY-we.top)/we.height*100));he.current={x:Be,y:Ie},ce.current||(ce.current=!0,requestAnimationFrame(()=>{ce.current=!1;const qe=G.current;qe&&(qe.style.backgroundPosition=`${he.current.x}% ${he.current.y}%`)}))},Oa=()=>{Te(!1),pe.current=null},us=Y=>{window.innerWidth>=1280||(ke.current=Y.touches[0].clientX,Se.current=0)},Ys=Y=>{if(window.innerWidth>=1280||ke.current===0)return;const we=Y.touches[0].clientX-ke.current;Se.current=we},mu=Y=>{if(window.innerWidth>=1280)return;Math.abs(Se.current)>50&&(Se.current>0&&S>0?b(S-1):Se.current<0&&S<Vt.length-1&&b(S+1)),ke.current=0,Se.current=0},Cr=(Y,we)=>Math.sqrt(Math.pow(we.clientX-Y.clientX,2)+Math.pow(we.clientY-Y.clientY,2)),Hr=Y=>{if(Y.touches.length===2){const we=Cr(Y.touches[0],Y.touches[1]);ht(we),nt(Z)}else Y.touches.length===1&&(ke.current=Y.touches[0].clientX,Se.current=0)},Qs=Y=>{if(Y.touches.length===2){const Be=Cr(Y.touches[0],Y.touches[1])/et,Ie=Math.min(Math.max(Xe*Be,1),4);be(Ie)}else if(Y.touches.length===1)if(Z>1){const we=Y.touches[0].clientX-ke.current,Be=Y.touches[0].clientY-(ke.current||0);We({x:we,y:Be})}else{const we=Y.touches[0].clientX-ke.current;Se.current=we}},ds=Y=>{if(Y.touches.length===0&&(Z<1.1&&(be(1),We({x:0,y:0})),Z===1)){const Be=Vt;Math.abs(Se.current)>50&&(Se.current>0&&ye>0?B(ye-1):Se.current<0&&ye<Be.length-1&&B(ye+1)),ke.current=0,Se.current=0}},hs=Y=>{if(Y.touches.length===2){const we=Cr(Y.touches[0],Y.touches[1]);ht(we),nt(Tt)}else Y.touches.length===1&&(ke.current=Y.touches[0].clientX,Se.current=0)},en=Y=>{if(Y.touches.length===2){const Be=Cr(Y.touches[0],Y.touches[1])/et,Ie=Math.min(Math.max(Xe*Be,1),4);Ze(Ie)}else if(Y.touches.length===1)if(Tt>1){const we=Y.touches[0].clientX-ke.current,Be=Y.touches[0].clientY-(ke.current||0);At({x:we,y:Be})}else{const we=Y.touches[0].clientX-ke.current;Se.current=we}},fs=Y=>{Y.touches.length===0&&(Tt<1.1&&(Ze(1),At({x:0,y:0})),Tt===1&&(Math.abs(Se.current)>50&&(Se.current>0&&x>0?w(x-1):Se.current<0&&x<Xs.length-1&&w(x+1)),ke.current=0,Se.current=0))},Ft=Y=>{if(Y.touches.length===2){const we=Cr(Y.touches[0],Y.touches[1]);ht(we),nt(Qe)}else Y.touches.length===1&&(ke.current=Y.touches[0].clientX,Se.current=0)},ms=Y=>{if(Y.touches.length===2){const Be=Cr(Y.touches[0],Y.touches[1])/et,Ie=Math.min(Math.max(Xe*Be,1),4);dt(Ie)}else if(Y.touches.length===1)if(Qe>1){const we=Y.touches[0].clientX-ke.current,Be=Y.touches[0].clientY-(ke.current||0);X({x:we,y:Be})}else{const we=Y.touches[0].clientX-ke.current;Se.current=we}},Vl=Y=>{if(Y.touches.length===0){if(Qe<1.1&&(dt(1),X({x:50,y:50})),Math.abs(Se.current)>50&&Qe===1){const Be=cs();Se.current>0?wt(Ie=>(Ie-1+Be.length)%Be.length):wt(Ie=>(Ie+1)%Be.length),dt(1),X({x:50,y:50})}ke.current=0,Se.current=0}},Js=(Y,we=0)=>{ie(Y),B(Math.max(0,we||0)),Pe(!0)},Fl=()=>Pe(!1);return o.jsxs(o.Fragment,{children:[o.jsxs("main",{className:"vp-main min-h-screen bg-white px-4 sm:px-6 pb-16 text-gray-800 flex flex-col items-stretch overflow-visible",children:[o.jsxs("section",{className:"w-full xl:grid xl:grid-cols-12 xl:gap-6 flex flex-col gap-8 overflow-visible",children:[Ks&&o.jsxs(de.div,{className:"relative flex flex-col items-start w-full xl:col-span-6 overflow-visible",children:[Vt.length>0&&o.jsxs("div",{className:"amazon-gallery-layout flex",style:{zIndex:10},children:[o.jsx("div",{className:"relative overflow-visible",children:o.jsxs("div",{className:`amazon-thumbs-sidebar ${Vt.length>4?"has-overflow":""}`,onMouseLeave:()=>$(null),children:[Vt.map((Y,we)=>o.jsx("button",{type:"button",className:`amazon-thumb ${we===Wt?"active":""}`,onClick:()=>{b(we);const Be=qe=>qe?String(qe).split("?")[0].split("#")[0].trim().toLowerCase():"",Ie=zn.findIndex(qe=>Be(qe)===Be(Y.url));Ie>=0&&w(Ie)},onMouseEnter:()=>$(we),onFocus:()=>$(we),onMouseLeave:()=>$(null),"aria-label":`Miniatura ${we+1}`,children:Y.type==="video"?o.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[o.jsx("video",{src:Y.url,preload:"metadata",muted:!0,className:"w-full h-full object-contain"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/95 rounded-full p-2 shadow",children:o.jsx("svg",{className:"w-5 h-5 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{src:Y.url,alt:`Miniatura ${we+1}`,className:"w-full h-full object-contain",loading:"lazy"})},`thumb-${we}`)),Vt.length>4&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"ebay-arrow-overlay ebay-arrow-up",onClick:()=>{const Y=document.querySelector(".amazon-thumbs-sidebar");Y&&Y.scrollBy({top:-100,behavior:"smooth"})},children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 15l7-7 7 7"})})}),o.jsx("button",{className:"ebay-arrow-overlay ebay-arrow-down",onClick:()=>{const Y=document.querySelector(".amazon-thumbs-sidebar");Y&&Y.scrollBy({top:100,behavior:"smooth"})},children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M19 9l-7 7-7-7"})})})]})]})}),o.jsxs("div",{className:"amazon-main-image-container vp-main-image-sticky",children:[o.jsx("div",{ref:Y=>{Ot.current=Y,te.current=Y},className:`amazon-main-image-wrap ${Fe?"zooming":""}`,onMouseEnter:Ll,onMouseMove:Da,onMouseLeave:Oa,onClick:()=>{const Y=Vt[Xt];if((Y==null?void 0:Y.type)==="video"){const we=(galleryVideosList||[]).findIndex(Be=>Be===Y.url);Js("videos",Math.max(0,we))}else Js("images",Xt)},onTouchStart:us,onTouchMove:Ys,onTouchEnd:mu,role:"button","aria-label":"Ver imagen en pantalla completa",tabIndex:0,children:(()=>{const Y=Vt[Xt];return Y?Y.type==="video"?o.jsx("div",{className:"relative w-full h-full flex items-center justify-center bg-white",children:o.jsx("video",{src:Y.url,controls:!0,preload:"metadata",playsInline:!0,className:"w-full h-full object-contain"},`main-vid-${Xt}`)}):o.jsx("img",{ref:H,src:Y.url,alt:ue.nombre,className:"w-full h-full object-contain transition-opacity duration-300",draggable:!1,onLoad:()=>{setTimeout(()=>{const we=te.current,Be=document.querySelector(".amazon-thumbs-sidebar");if(we&&Be){const Ie=we.offsetHeight;Be.style.height=`${Ie}px`,Be.style.maxHeight=`${Ie}px`}},50)}},`main-img-${Wt}`):null})()}),o.jsx("div",{ref:G,className:"vp-zoom-float vp-zoom-stage",style:{display:Fe?"block":"none",backgroundImage:xe?`url(${xe})`:"none",backgroundRepeat:"no-repeat",backgroundSize:`${Le.w}px ${Le.h}px`}})]})]}),Vt.length>1&&o.jsx("div",{className:"xl:hidden w-full mt-4 flex justify-center",children:o.jsx("div",{className:"flex gap-2 items-center",children:Vt.map((Y,we)=>o.jsx("button",{type:"button",className:`dot-indicator ${we===Wt?"dot-active":""}`,onClick:()=>b(we),"aria-label":`Imagen ${we+1} de ${Vt.length}`},`dot-${we}`))})})]}),o.jsxs(de.div,{className:"flex flex-col gap-4 sm:gap-5 w-full xl:col-span-4 overflow-visible",children:[o.jsx("div",{className:"vp-variants xl:order-4 order-1",children:(()=>{var lt,rn;const Y=(ue.colorImagenPrincipal||ue.color||"").toString().trim(),we=!!(Y||ue.imagen||(rn=(lt=ue.imagenPrincipal)==null?void 0:lt[0])!=null&&rn.url),Be=(()=>{var Sn,qi;const Jt=[];if(we&&Jt.push({color:Y||"Principal",cantidad:ue.cantidad||0,precio:ue.precio,imagen:ue.imagen||((qi=(Sn=ue.imagenPrincipal)==null?void 0:Sn[0])==null?void 0:qi.url)||"",imagenes:Array.isArray(ue.imagenes)?ue.imagenes:[],videoUrls:Array.isArray(ue.videoUrls)?ue.videoUrls:[],isMainProduct:!0}),Array.isArray(Mn)){const Ci=un=>(un||"").toString().trim().toLowerCase(),Tn=Ci(Y),ps=Mn.filter(un=>Ci(un==null?void 0:un.color)!==Tn);Jt.push(...ps)}return Jt})(),Ie=we?O===-1||O===null?0:Math.max(1,Math.min(O+1,Math.max(1,Be.length-1))):Math.max(0,Math.min(O||0,Math.max(0,Be.length-1))),qe=Jt=>{we?Jt===0?I(-1):Do(Jt-1):Do(Jt)},rt=Mn.length;return rt===0||rt===1&&!we||Be.length<=1?null:o.jsx(Fj,{variantes:Be,varianteSeleccionada:Ie,onVarianteChange:qe,showStock:!1,showPrice:!0,basePrice:gr,className:"w-full"})})()}),o.jsx("h1",{className:"vp-title xl:order-1 order-2",children:ue.nombre}),o.jsx("div",{className:"vp-desc prose max-w-none xl:order-2 order-3",dangerouslySetInnerHTML:{__html:KB(ue.descripcion||"<p>Contáctanos para más detalles.</p>")}}),o.jsxs("p",{className:"vp-price xl:order-3 order-4",children:["DOP ",Kk(gr)]}),o.jsxs("div",{className:"xl:hidden flex flex-col gap-3 overflow-visible xl:order-5 order-5",children:[o.jsx("div",{className:`vp-stock ${$r===0?"vp-stock-out":$r<=2?"vp-stock-low":"vp-stock-ok"}`,children:$r===0?"No disponible":Number.isFinite($r)?`Quedan ${$r} disponibles`:"Disponible"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 overflow-visible",children:[Bn?o.jsxs("div",{className:"vp-qty-row w-full sm:w-1/2",children:[o.jsx("button",{onClick:Gs,className:"vp-qty-btn",children:"−"}),o.jsx("span",{className:"vp-qty",children:Hi}),o.jsx("button",{onClick:qs,className:"vp-qty-btn",disabled:Hi>=Nr,title:Hi>=Nr?"Has alcanzado el máximo disponible":"Agregar una unidad",children:"+"}),o.jsx("button",{onClick:Ia,className:"vp-remove",children:o.jsx(tE,{})})]}):o.jsx("button",{className:`button w-full sm:w-1/2 ${qt?"":"opacity-60 cursor-not-allowed"}`,onClick:Aa,disabled:!qt,title:qt?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),o.jsx("div",{className:"w-full sm:w-1/2",onClick:()=>Xk("single",zr,gr),children:o.jsx(bx,{className:"w-full",total:gr*100,label:"Comprar ahora"})})]})]}),Array.isArray(ue.acerca)&&ue.acerca.length>0&&o.jsxs("div",{className:"space-y-2 xl:order-6 order-6",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Acerca de este artículo"}),o.jsx("ul",{className:"space-y-1.5 text-gray-800",children:ue.acerca.map((Y,we)=>o.jsxs("li",{className:"flex items-start gap-2 text-sm leading-snug",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-600 mt-2 flex-shrink-0"}),o.jsx("span",{className:"flex-1",children:Y})]},we))})]})]}),o.jsx("aside",{className:"vp-buy-card w-full xl:col-span-2 hidden xl:block",children:o.jsxs("div",{className:"vp-buy-inner",children:[o.jsxs("div",{className:"vp-buy-price",children:["DOP ",Kk(gr)]}),o.jsx("div",{className:`vp-stock ${$r===0?"vp-stock-out":$r<=2?"vp-stock-low":"vp-stock-ok"}`,children:$r===0?"No disponible":Number.isFinite($r)?`Quedan ${$r} disponibles`:"Disponible"}),o.jsxs("div",{className:"flex flex-col gap-3",children:[Bn?o.jsxs("div",{className:"vp-qty-row",children:[o.jsx("button",{onClick:Gs,className:"vp-qty-btn",children:"−"}),o.jsx("span",{className:"vp-qty",children:Hi}),o.jsx("button",{onClick:qs,className:"vp-qty-btn",disabled:Hi>=Nr,title:Hi>=Nr?"Has alcanzado el máximo disponible":"Agregar una unidad",children:"+"}),o.jsx("button",{onClick:Ia,className:"vp-remove",children:o.jsx(tE,{})})]}):o.jsx("button",{className:`button w-full ${qt?"":"opacity-60 cursor-not-allowed"}`,onClick:Aa,disabled:!qt,title:qt?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),o.jsx("div",{onClick:()=>Xk("single",zr,gr),children:o.jsx(bx,{className:"w-full",total:gr*100,label:"Comprar ahora"})})]})]})})]}),ue&&o.jsx("section",{className:"w-full mt-8 px-4 sm:px-6 xl:px-6",children:o.jsx(GB,{productoActual:ue})}),(()=>{const Y=cs();return!Y||Y.length===0?null:o.jsxs("section",{className:"w-full mt-12 mb-8 px-4 sm:px-6",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6 text-center",children:"Más información del producto"}),o.jsx("div",{className:"max-w-[1500px] mx-auto space-y-4",children:Y.map((we,Be)=>o.jsx("div",{className:"relative w-full cursor-pointer",onClick:()=>{wt(Be),De(!0)},children:o.jsx("img",{src:we,alt:`${ue.nombre} - Información ${Be+1}`,className:"w-full h-auto object-contain bg-white dark:bg-gray-800 rounded-lg",style:{maxWidth:"1500px",margin:"0 auto",display:"block"}})},`product-info-${Be}`))})]})})()]}),Ce&&(()=>{const Y=kn(),we=Lt(ue,Et),Be=Y.length>0,Ie=ee==="videos"?Y.map(rt=>({type:"video",url:rt})):we.map(rt=>({type:"image",url:rt}));console.log(`🖼️ Modal - Variante: ${(Et==null?void 0:Et.color)||"base"}, Medios: ${Ie.length}`);const qe=Math.min(ye,Math.max(0,Ie.length-1));return o.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${u?"bg-gray-900":"bg-white"}`,children:[o.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${ee==="images"?u?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":u?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{ie("images"),B(0),be(1),We({x:0,y:0})},children:"IMÁGENES"}),Be&&o.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${ee==="videos"?u?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":u?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{ie("videos"),B(0),be(1),We({x:0,y:0})},children:"VIDEOS"})]}),o.jsx("button",{type:"button",className:`transition-colors ${u?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:Fl,children:o.jsx(em,{className:"text-2xl"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[o.jsxs("div",{className:`hidden md:block w-64 lg:w-80 border-r relative group ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:rt=>rt.stopPropagation(),onMouseEnter:()=>jt(!0),onMouseLeave:()=>jt(!1),children:[vt&&Ie.length>4&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:`absolute top-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all border ${u?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-gray-50 text-gray-800 border-gray-300"}`,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},onClick:()=>{ct.current&&ct.current.scrollBy({top:-200,behavior:"smooth"})},"aria-label":"Scroll arriba",children:o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"})})}),o.jsx("button",{type:"button",className:`absolute bottom-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all border ${u?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-gray-50 text-gray-800 border-gray-300"}`,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},onClick:()=>{ct.current&&ct.current.scrollBy({top:200,behavior:"smooth"})},"aria-label":"Scroll abajo",children:o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})})]}),o.jsx("div",{ref:ct,className:"overflow-y-auto p-4 h-full",style:{scrollbarWidth:"thin"},children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:`text-sm font-semibold mb-4 uppercase ${u?"text-gray-200":"text-gray-700"}`,children:ee==="videos"?"Videos":"Imágenes"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ie.map((rt,lt)=>o.jsx("button",{type:"button",className:`w-full aspect-square overflow-hidden rounded border-2 transition-all ${lt===qe?"":"border-gray-300 hover:border-gray-400"}`,style:lt===qe?{borderColor:"#0064D2"}:void 0,onClick:rn=>{rn.stopPropagation(),B(lt),be(1),We({x:0,y:0})},"aria-label":`Vista ${lt+1}`,children:ee==="videos"?o.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[o.jsx("video",{src:rt.url,className:"w-full h-full object-contain",muted:!0}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/90 rounded-full p-2",children:o.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{src:rt.url,alt:`Miniatura ${lt+1}`,className:"w-full h-full object-contain bg-white p-1"})},`desktop-thumb-${lt}`))})]})})]}),o.jsxs("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative ${u?"bg-gray-900":"bg-white"}`,onClick:rt=>rt.stopPropagation(),onTouchStart:ee==="images"?Hr:void 0,onTouchMove:ee==="images"?Qs:void 0,onTouchEnd:ee==="images"?ds:void 0,children:[o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[Ie.length>1&&Z===1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:rt=>{rt.stopPropagation(),B(lt=>(lt-1+Ie.length)%Ie.length)},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:rt=>{rt.stopPropagation(),B(lt=>(lt+1)%Ie.length)},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),o.jsx("div",{className:"w-full h-full flex items-center justify-center px-2 md:px-4",children:(()=>{const rt=Ie[qe];return rt?ee==="videos"?o.jsx("video",{src:rt.url,controls:!0,className:"w-full h-full object-contain",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)"},onError:lt=>{console.error("Error loading video:",rt.url)}},`video-${qe}`):o.jsx("img",{src:rt.url,alt:`${(ue==null?void 0:ue.nombre)||"Imagen"}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${Z}) translate(${Ve.x}px, ${Ve.y}px)`,transition:Z===1?"transform 0.3s ease":"none",cursor:Z>1?"zoom-out":"zoom-in"},draggable:!1,onClick:lt=>{if(Z===1){const rn=lt.currentTarget.getBoundingClientRect(),Jt=((lt.clientX-rn.left)/rn.width-.5)*-100,Sn=((lt.clientY-rn.top)/rn.height-.5)*-100;be(2),We({x:Jt,y:Sn})}else be(1),We({x:0,y:0})},onMouseMove:lt=>{if(Z>1){const rn=lt.currentTarget.getBoundingClientRect(),Jt=((lt.clientX-rn.left)/rn.width-.5)*-100,Sn=((lt.clientY-rn.top)/rn.height-.5)*-100;We({x:Jt,y:Sn})}}}):null})()})]}),o.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 xl:hidden flex flex-col items-center gap-2",children:[o.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-medium shadow-lg ${u?"bg-gray-800 text-white":"bg-white/95 text-gray-900"}`,children:[qe+1," / ",Ie.length]}),Ie.length>1&&o.jsxs("div",{className:`text-xs px-3 py-1 rounded-full flex items-center gap-1 ${u?"bg-gray-800/90 text-gray-300":"bg-white/90 text-gray-600"}`,children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l-4-4m0 0l4-4m-4 4h18"})}),o.jsx("span",{children:"Desliza"}),o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]}),o.jsx("div",{className:`md:hidden border-t p-4 overflow-x-auto ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:rt=>rt.stopPropagation(),children:o.jsx("div",{className:"flex gap-3 min-w-min",children:Ie.map((rt,lt)=>o.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${lt===qe?"":"border-gray-300 hover:border-gray-400"}`,style:lt===qe?{borderColor:"#0064D2"}:void 0,onClick:rn=>{rn.stopPropagation(),B(lt),be(1),We({x:0,y:0})},"aria-label":`Vista ${lt+1}`,children:ee==="videos"?o.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[o.jsx("video",{src:rt.url,className:"w-full h-full object-contain",muted:!0}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/90 rounded-full p-1.5",children:o.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{src:rt.url,alt:`Miniatura ${lt+1}`,className:"w-full h-full object-contain bg-white p-1"})},`mobile-thumb-${lt}`))})})]})]})})(),o.jsx(Op,{isOpen:g,onClose:()=>y(!1),onIniciarSesion:()=>{try{a()}catch{}}}),N&&o.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[9999] flex flex-col",onClick:Pa,children:[o.jsx("div",{className:"absolute top-4 right-4 z-20",children:o.jsx("button",{className:"bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-colors",onClick:Pa,"aria-label":"Cerrar",children:o.jsx(em,{size:20})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4 relative overflow-hidden",onClick:Y=>Y.stopPropagation(),onTouchStart:hs,onTouchMove:en,onTouchEnd:fs,children:o.jsx("img",{src:Xs[x],alt:`${ue==null?void 0:ue.nombre}`,className:"max-w-full max-h-full object-contain select-none",style:{transform:`scale(${Tt||1}) translate(${(Rt==null?void 0:Rt.x)||0}px, ${(Rt==null?void 0:Rt.y)||0}px)`,transition:(Tt||1)===1?"transform 0.3s ease":"none",cursor:(Tt||1)>1?"zoom-out":"zoom-in"},draggable:!1,onClick:Y=>{if(Y.stopPropagation(),(Tt||1)===1){const we=Y.currentTarget.getBoundingClientRect(),Be=((Y.clientX-we.left)/we.width-.5)*-100,Ie=((Y.clientY-we.top)/we.height-.5)*-100;Ze&&Ze(2),At&&At({x:Be,y:Ie})}else Ze&&Ze(1),At&&At({x:0,y:0})},onMouseMove:Y=>{if((Tt||1)>1){const we=Y.currentTarget.getBoundingClientRect(),Be=((Y.clientX-we.left)/we.width-.5)*-100,Ie=((Y.clientY-we.top)/we.height-.5)*-100;At&&At({x:Be,y:Ie})}}})}),Xs.length>1&&o.jsx("div",{className:"p-4",onClick:Y=>Y.stopPropagation(),children:o.jsx("div",{className:"flex gap-3 justify-center overflow-x-auto pb-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:Xs.map((Y,we)=>o.jsx("button",{className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ${we===x?"border-white border-opacity-100":"border-gray-600 border-opacity-50"}`,onClick:Be=>{Be.stopPropagation(),w(we),Ze&&Ze(1),At&&At({x:0,y:0})},"aria-label":`Miniatura ${we+1}`,children:o.jsx("img",{src:Y,alt:`Miniatura ${we+1}`,className:"w-full h-full object-contain",loading:"lazy"})},we))})})]}),He&&(()=>{const Y=cs();if(!Y||Y.length===0)return null;const we=Y[st],Be=Y.length>1;return o.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${u?"bg-gray-900":"bg-white"}`,children:[o.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[o.jsxs("h2",{className:`text-lg font-semibold ${u?"text-white":"text-gray-900"}`,children:["Información del producto (",st+1," /"," ",Y.length,")"]}),o.jsx("button",{type:"button",className:`transition-colors ${u?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:()=>De(!1),children:o.jsx(em,{className:"text-2xl"})})]}),o.jsx("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative overflow-auto ${u?"bg-gray-900":"bg-white"}`,onTouchStart:Ft,onTouchMove:ms,onTouchEnd:Vl,children:o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[Be&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:()=>{wt(Ie=>(Ie-1+Y.length)%Y.length),dt(1),X({x:50,y:50})},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:()=>{wt(Ie=>(Ie+1)%Y.length),dt(1),X({x:50,y:50})},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),o.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden px-2 md:px-4",children:o.jsx("img",{src:we,alt:`${ue==null?void 0:ue.nombre} - Información ${st+1}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${Qe})`,transformOrigin:`${W.x}% ${W.y}%`,transition:Qe===1?"transform 0.3s ease":"none",cursor:Qe>1?"zoom-out":"zoom-in"},draggable:!1,onClick:Ie=>{if(Qe===1){const qe=Ie.currentTarget.getBoundingClientRect(),rt=(Ie.clientX-qe.left)/qe.width*100,lt=(Ie.clientY-qe.top)/qe.height*100;dt(2.5),X({x:rt,y:lt})}else dt(1),X({x:50,y:50})},onMouseMove:Ie=>{if(Qe>1){const qe=Ie.currentTarget.getBoundingClientRect(),rt=(Ie.clientX-qe.left)/qe.width*100,lt=(Ie.clientY-qe.top)/qe.height*100;X({x:rt,y:lt})}}})})]})}),Be&&o.jsx("div",{className:`border-t p-4 overflow-x-auto ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,children:o.jsx("div",{className:"flex gap-3 justify-center min-w-min",children:Y.map((Ie,qe)=>o.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${qe===st?"border-blue-500 ring-2 ring-blue-500/30":"border-gray-300 hover:border-blue-500/50"}`,onClick:()=>wt(qe),"aria-label":`Vista ${qe+1}`,children:o.jsx("img",{src:Ie,alt:`Miniatura ${qe+1}`,className:"w-full h-full object-contain bg-white p-1"})},`product-info-thumb-${qe}`))})})]})})()]})}function YB(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function QB(t,e){if(!e)return wx(t);if(Array.isArray(e.variantes)&&t.colorSeleccionado){const n=e.variantes.find(r=>r.color===t.colorSeleccionado);if(n&&n.cantidad!==void 0)return Number(n.cantidad)||0}return e.cantidad!==void 0?Number(e.cantidad)||0:wx(t)}function wx(t){if(t.maxStock!==void 0&&t.maxStock!==null){const e=Number(t.maxStock);if(!Number.isNaN(e))return e}if(Array.isArray(t.variantes)&&t.colorSeleccionado){const e=t.variantes.find(n=>n.color===t.colorSeleccionado);if(e&&e.cantidad!==void 0)return Number(e.cantidad)||0}if(t.cantidadProducto!==void 0){const e=Number(t.cantidadProducto);if(!Number.isNaN(e))return e}return t.cantidad!==void 0&&t.cantidad,Number.POSITIVE_INFINITY}function JB(t,e){try{const n={mode:"cart",items:t,total:e,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(n))}catch{}}function ZB(){const{carrito:t,agregarAlCarrito:e,eliminarUnidadDelCarrito:n,quitarDelCarrito:r}=Kd(),i=Qr(),[a,c]=k.useState(null),[u,d]=k.useState({});k.useEffect(()=>{const y=[],x=new Set;return t.forEach(w=>{if(w!=null&&w.id&&!x.has(w.id)){x.add(w.id);const S=pt(Ue,"productos",w.id),b=Un(S,N=>{N.exists()&&d(j=>({...j,[w.id]:N.data()}))});y.push(b)}}),()=>{y.forEach(w=>w&&w())}},[t]);const f=t.reduce((y,x)=>y+(Number(x.precio)||0)*x.cantidad,0),g=t.map(y=>({id:y.id,nombre:y.nombre,precio:Number(y.precio)||0,cantidad:y.cantidad}));return o.jsxs("main",{className:"carrito-page",style:{paddingTop:"var(--content-offset, 100px)"},children:[t.length===0?o.jsx("div",{className:"carrito-empty-wrap",children:o.jsxs("div",{className:"carrito-empty-box",children:[o.jsx("img",{src:"/toy/asoma.png",alt:"Explora nuestros productos",className:"carrito-empty-figure",loading:"lazy"}),o.jsxs("div",{className:"carrito-empty-glass",children:[o.jsx("div",{className:"carrito-empty-icon","aria-hidden":"true",children:"🛒"}),o.jsx("h2",{className:"carrito-empty-title",children:"No hay nada en el carrito"}),o.jsx("p",{className:"carrito-empty-sub",children:"Explora nuestros productos"}),o.jsx("button",{type:"button",className:"carrito-empty-cta",onClick:()=>i("/categorias"),children:"Ver productos"})]})]})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"carrito-grid",children:t.map(y=>{const x=u[y.id];wx(y);const w=QB(y,x),S=Number.isFinite(w)?Math.max(0,w-(Number(y.cantidad)||0)):w,b=`${y.id}__${y.colorSeleccionado??""}`;return o.jsxs("div",{className:"carrito-card",onClick:()=>i(`/producto/${y.id}`),children:[(()=>{var q;const N=D=>{try{return D?typeof D=="string"?D:typeof D=="object"&&D!==null?D.url||"":String(D||""):""}catch{return""}},j=u[y.id]||y,O=()=>{var R;const D=Array.isArray(j.variantes)?j.variantes:[];for(const P of D){const T=N((R=P==null?void 0:P.imagenPrincipal)==null?void 0:R[0]);if(T)return T;if(P!=null&&P.imagen)return P.imagen;const U=(Array.isArray(P==null?void 0:P.media)?P.media:[]).find(A=>{const oe=((A==null?void 0:A.type)||"").toLowerCase();return N(A)&&(!oe||oe.includes("image")||oe==="img"||oe==="photo")});if(U)return N(U)}return""},V=(Array.isArray(j.media)?j.media:[]).find(D=>{const R=((D==null?void 0:D.type)||"").toLowerCase();return N(D)&&(!R||R.includes("image")||R==="img"||R==="photo")}),$=N((q=j==null?void 0:j.imagenPrincipal)==null?void 0:q[0])||(j==null?void 0:j.imagen)||(V?N(V):"")||N(Array.isArray(j==null?void 0:j.galeriaImagenes)&&j.galeriaImagenes[0])||N(Array.isArray(j==null?void 0:j.imagenes)&&j.imagenes[0])||O()||"";return o.jsx("img",{src:$,alt:y.nombre,className:"carrito-img"})})(),o.jsxs("div",{className:"carrito-info",children:[o.jsx("h2",{className:"carrito-nombre",children:y.nombre}),o.jsxs("div",{className:"carrito-subtotal",children:["RD$ ",YB((Number(y.precio)||0)*y.cantidad)]}),o.jsx("p",{className:`carrito-stock ${S===0?"stock-out":Number.isFinite(S)&&S<=2?"stock-low":"stock-ok"}`,children:S===0?"No disponible":Number.isFinite(S)&&S<=2?`Solo quedan ${S}`:Number.isFinite(S)?`${S} disponibles`:"Disponible"}),o.jsxs("div",{className:"carrito-actions",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("button",{onClick:N=>{N.stopPropagation(),n(y.id,y.colorSeleccionado??null)},className:"vp-qty-btn","aria-label":"Disminuir cantidad",children:"−"}),o.jsx("span",{className:"vp-qty",children:y.cantidad}),o.jsx("button",{onClick:N=>{if(N.stopPropagation(),!Number.isFinite(w)||y.cantidad<w){const j=u[y.id]||y;e(j,y.colorSeleccionado??null)}},className:"vp-qty-btn",disabled:Number.isFinite(w)&&y.cantidad>=w,"aria-label":"Aumentar cantidad",children:"+"})]}),o.jsx("button",{onClick:N=>{N.stopPropagation(),c(y)},className:"vp-remove",title:"Eliminar producto","aria-label":"Eliminar del carrito",children:o.jsx(HC,{})})]})]})]},b)})}),o.jsx("div",{className:"carrito-footer",children:o.jsx("div",{className:"carrito-pay-wrap",onClick:()=>JB(g,f),children:o.jsx(bx,{className:"carrito-cardnet-btn w-full",total:f*100})})})]}),a&&o.jsx("div",{className:"modal-overlay",children:o.jsxs("div",{className:"modal",children:[o.jsx("h2",{children:"¿Eliminar producto?"}),o.jsxs("p",{children:["¿Seguro que quieres quitar"," ",o.jsx("strong",{children:a.nombre})," del carrito?"]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"btn-cancel",onClick:()=>c(null),children:"Cancelar"}),o.jsx("button",{className:"btn-confirm",onClick:()=>{r(a.id,a.colorSeleccionado??null),c(null)},children:"Sí, eliminar"})]})]})})]})}function Wj(){return o.jsx("div",{className:"waves-container"})}function eH(){return o.jsxs("div",{className:"relative min-h-screen flex flex-col items-center px-4 sm:px-8 pb-20 font-sans text-gray-800 dark:text-gray-100 bg-gradient-to-b from-blue-50 via-blue-50 to-blue-100 dark:from-blue-950 dark:via-blue-950 dark:to-blue-900 overflow-hidden",style:{paddingTop:"calc(var(--content-offset, 100px) + 48px)"},children:[o.jsx(Wj,{}),o.jsx("h1",{className:"text-2xl sm:text-5xl font-extrabold mb-4 text-center text-gray-800 dark:text-gray-100 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"CONTÁCTANOS"}),o.jsx("h2",{className:"text-lg sm:text-2xl font-semibold mb-10 text-center text-gray-600 dark:text-gray-300 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),o.jsxs("div",{className:"w-full max-w-3xl flex flex-col items-center z-10",style:{position:"relative"},children:[o.jsx("img",{src:"/toy/asoma.png",alt:"Muñeco asomándose",className:"pointer-events-none select-none absolute hidden sm:block",style:{top:"-118px",right:"0px",width:"min(220px, 40vw)",height:"auto",zIndex:50,filter:"drop-shadow(0 10px 20px rgba(2, 6, 23, 0.15))",pointerEvents:"none"}}),o.jsxs("div",{className:"relative w-full flex flex-col items-center gap-4 sm:gap-6 text-sm sm:text-lg px-4 py-4 sm:px-8 sm:py-6",style:{background:"rgba(239, 246, 255, 0.35)",borderRadius:"1rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(59, 130, 246, 0.25)",paddingTop:"1.5rem"},children:[o.jsx(Of,{icon:o.jsx(lh,{className:"text-blue-500 dark:text-blue-400"}),label:"Dirección",text:"Av. Estrella Sadhalá #55, Santiago, República Dominicana"}),o.jsx(Of,{icon:o.jsx(Vm,{className:"text-blue-500 dark:text-blue-400"}),label:"Teléfono Tienda",text:"+1 (849)-635-7000"}),o.jsx(Of,{icon:o.jsx(Vm,{className:"text-blue-500 dark:text-blue-400"}),label:"Teléfono Internet",text:"+1 (809)-582-1212"}),o.jsx(Of,{icon:o.jsx(qv,{className:"text-blue-500 dark:text-blue-400"}),label:"Correo",text:"playcenter121@gmail.com"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-6 justify-center mt-4 w-full",children:[o.jsx(Yk,{href:"https://wa.me/18496357000",text:"WhatsApp Tienda"}),o.jsx(Yk,{href:"https://wa.me/18095821212",text:"WhatsApp Internet"})]})]})]})]})}const Of=({icon:t,label:e,text:n})=>o.jsxs("div",{className:"flex items-start gap-3 w-full z-10",children:[o.jsx("div",{className:"text-xl sm:text-2xl text-gray-400 dark:text-gray-300",children:t}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-sm sm:text-base text-gray-700 dark:text-gray-300",children:[e,":"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base break-words",children:n})]})]}),Yk=({href:t,text:e})=>o.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 sm:gap-3 px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base font-bold rounded-xl transition-transform z-10 w-full sm:w-auto",style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:n=>{n.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",n.currentTarget.style.transform="scale(1.05)"},onMouseLeave:n=>{n.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",n.currentTarget.style.transform="scale(1)"},children:[o.jsx(Lm,{className:"text-lg sm:text-xl text-blue-500 dark:text-blue-400"}),e]});function tH(){return o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:o.jsx("div",{className:"max-w-2xl w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[o.jsx("div",{className:"mb-6",children:o.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Función No Disponible"}),o.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opción de ",o.jsx("strong",{children:"Vender"})," no está disponible en este momento."]}),o.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva más tarde. Estamos trabajando para habilitarla pronto."}),o.jsx("div",{className:"mt-10",children:o.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function nH(){return o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:o.jsx("div",{className:"max-w-2xl w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[o.jsx("div",{className:"mb-6",children:o.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Función No Disponible"}),o.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opción de ",o.jsx("strong",{children:"Tiendas"})," no está disponible en este momento."]}),o.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva más tarde. Estamos trabajando para habilitarla pronto."}),o.jsx("div",{className:"mt-10",children:o.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function rH(){return o.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-gray-800 mb-6",children:"Historial"}),o.jsx("p",{className:"text-gray-600",children:"Aquí verás tu historial de navegación o compras próximamente."})]})}function iH(){return o.jsxs("div",{className:`relative min-h-screen flex flex-col items-center px-4 pb-20 font-sans text-gray-800 dark:text-gray-100
                  bg-gradient-to-b from-blue-50 via-blue-50 to-blue-100 dark:from-blue-950 dark:via-blue-950 dark:to-blue-900 overflow-hidden`,style:{paddingTop:"calc(var(--content-offset, 100px) + 48px)"},children:[o.jsx(Wj,{}),o.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-center text-gray-800 dark:text-gray-100 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"NOSOTROS"}),o.jsx("h2",{className:"text-2xl font-semibold mb-10 text-center text-gray-600 dark:text-gray-300 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),o.jsxs("div",{className:"w-full max-w-3xl flex flex-col items-center z-10",style:{position:"relative"},children:[o.jsx("img",{src:"/toy/asoma.png",alt:"Muñeco asomándose",className:"pointer-events-none select-none absolute hidden sm:block",style:{top:"-118px",right:"0px",width:"min(220px, 40vw)",height:"auto",zIndex:50,filter:"drop-shadow(0 10px 20px rgba(2, 6, 23, 0.15))",pointerEvents:"none"}}),o.jsxs("div",{className:"relative w-full flex flex-col items-center gap-6 text-lg",style:{background:"rgba(239, 246, 255, 0.35)",borderRadius:"1rem",padding:"1.8rem",paddingTop:"2.6rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(59, 130, 246, 0.25)",overflow:"visible"},children:[o.jsx(iy,{icon:o.jsx(D8,{className:"text-blue-500 dark:text-blue-400"}),label:"Quiénes somos",text:"Somos una empresa dominicana ubicada en Santiago, especializada en brindar lo último en tecnología, innovación y productos para el estilo de vida moderno."}),o.jsx(iy,{icon:o.jsx(z8,{className:"text-blue-500 dark:text-blue-400"}),label:"Nuestra misión",text:"Superar las expectativas de nuestros clientes ofreciendo artículos de calidad como consolas, videojuegos, tablets, móviles, accesorios y más, con un servicio humano, eficiente y profesional."}),o.jsx(iy,{icon:o.jsx(lh,{className:"text-blue-500 dark:text-blue-400"}),label:"Nuestro compromiso",text:"PlayCenter Universal no solo vende productos, crea experiencias memorables con cada compra. ¡Gracias por confiar en nosotros!"}),o.jsx("div",{className:"flex justify-center mt-6",children:o.jsxs(It,{to:"/contacto",className:`flex items-center gap-3 px-6 py-3 text-base font-bold
                         rounded-xl transition-transform z-10 animate-fade-in`,style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:t=>{t.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",t.currentTarget.style.transform="scale(1.05)"},onMouseLeave:t=>{t.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",t.currentTarget.style.transform="scale(1)"},children:[o.jsx(By,{className:"text-xl text-blue-500 dark:text-blue-400"}),"Contáctanos"]})})]})]})]})}const iy=({icon:t,label:e,text:n})=>o.jsxs("div",{className:"flex items-start gap-4 w-full z-10",children:[o.jsx("div",{className:"text-2xl text-gray-400 dark:text-gray-300",children:t}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[e,":"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 break-words",children:n})]})]});function sH(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function aH(t){const n=(Number(t)||0).toFixed(2),[r,i]=n.split("."),a=Number(r);return{wholeFormatted:sH(a),fraction:i}}function qj({producto:t}){const{carrito:e,agregarAlCarrito:n,eliminarUnidadDelCarrito:r,quitarDelCarrito:i}=Kd(),{usuario:a,usuarioInfo:c}=Jr(),{abrirModal:u}=tu(),d=Qr(),[f,g]=k.useState(!1),[y,x]=k.useState(!1);k.useEffect(()=>{x(!1)},[t==null?void 0:t.id,t==null?void 0:t.imagen,t==null?void 0:t.imagenPrincipal]);const S=!!(t!=null&&t.oferta&&(t!=null&&t.precioOferta))?Number(t==null?void 0:t.precioOferta)||Number(t==null?void 0:t.precio)||0:Number(t==null?void 0:t.precio)||0;aH(S);const N=(t==null?void 0:t.activo)!==!1&&(t.cantidad===void 0||t.cantidad>0),j=e.find(U=>U.id===t.id),O=(j==null?void 0:j.cantidad)||0,I=t.cantidad!==void 0?Number(t.cantidad)||0:1/0,V=U=>{if(U.stopPropagation(),!a){g(!0);return}if(!j){const A={...t,cantidad:1,cantidadProducto:Number.isFinite(I)?I:void 0};n(A)}},$=U=>{if(U.stopPropagation(),!a){g(!0);return}const A=Number.isFinite(I)?I:1/0;O<A&&n(t)},q=U=>{if(U.stopPropagation(),!a){g(!0);return}r(t.id)},D=U=>{if(U.stopPropagation(),!a){g(!0);return}i(t.id)},R=()=>{const U=t.slug||t.id;d(`/producto/${U}`)},P=U=>{try{return U?typeof U=="string"?U:typeof U=="object"&&U!==null?U.url||"":String(U||""):""}catch{return""}},L=(()=>{var ae;const U=P((ae=t==null?void 0:t.imagenPrincipal)==null?void 0:ae[0]);if(U)return U;const A=P(t==null?void 0:t.imagen);if(A)return A;const oe=Array.isArray(t==null?void 0:t.imagenes)?t.imagenes:[];return oe.length>0?P(oe[0]):null})();return o.jsxs(o.Fragment,{children:[o.jsxs("article",{className:"flex flex-row lg:flex-col bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 w-full h-full",children:[o.jsx("div",{onClick:R,className:"flex-shrink-0 w-32 sm:w-36 lg:w-full lg:aspect-square flex items-center justify-center overflow-hidden cursor-pointer bg-white dark:bg-gray-900",style:{minHeight:"128px"},children:L?o.jsx("img",{src:L,alt:t.nombre,className:"w-full h-full object-contain",loading:"lazy"}):o.jsx("div",{className:"text-gray-400 text-sm",children:"Sin imagen"})}),o.jsxs("div",{className:"flex flex-col justify-between p-2.5 sm:p-3 lg:p-4 flex-1",children:[o.jsxs("div",{children:[o.jsx("h3",{onClick:R,className:"text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 mb-1.5 sm:mb-2 cursor-pointer text-sm sm:text-base lg:text-lg font-semibold",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.3em",maxHeight:"2.6em"},children:t.nombre}),o.jsxs("div",{className:"flex items-baseline gap-1 mb-1.5 sm:mb-2",children:[o.jsx("span",{className:"text-xs sm:text-sm lg:text-base text-gray-600 dark:text-gray-400",children:"RD$"}),o.jsx("span",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100",children:Number(t.precio).toFixed(2)})]})]}),j?o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("button",{onClick:q,className:"px-3 sm:px-3 lg:px-3.5 py-1.5 sm:py-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 text-base sm:text-base font-semibold transition-all hover:scale-105 active:scale-95",children:"−"}),o.jsx("span",{className:"font-semibold text-base sm:text-base lg:text-lg",children:O}),o.jsx("button",{onClick:$,className:"px-3 sm:px-3 lg:px-3.5 py-1.5 sm:py-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 text-base sm:text-base font-semibold transition-all hover:scale-105 active:scale-95",children:"+"}),o.jsx("button",{onClick:D,className:"px-2.5 sm:px-2.5 py-1.5 sm:py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 text-base sm:text-base transition-all hover:scale-105 active:scale-95",children:o.jsx(HC,{})})]}):o.jsxs("button",{onClick:V,className:"w-full py-2.5 sm:py-2.5 lg:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm lg:text-base font-semibold transition-all duration-200 flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-95",style:{backgroundColor:"#0066C0",color:"#FFFFFF",border:"1px solid #0066C0"},onMouseEnter:U=>U.currentTarget.style.backgroundColor="#004F9A",onMouseLeave:U=>U.currentTarget.style.backgroundColor="#0066C0",disabled:!N,children:[o.jsx(BC,{className:"text-lg sm:text-base lg:text-base"}),o.jsx("span",{className:"hidden sm:inline lg:hidden",children:"Agregar"}),o.jsx("span",{className:"hidden lg:inline",children:"Agregar al Carrito"})]})]})]}),o.jsx(Op,{isOpen:f,onClose:()=>g(!1),onIniciarSesion:()=>{g(!1),u()}})]})}function Gj(){return o.jsxs("div",{className:"wave-background",children:[o.jsx("div",{className:"wave wave1"}),o.jsx("div",{className:"wave wave2"}),o.jsx("div",{className:"wave wave3"})]})}const Qk={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.2)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 4px rgba(60, 80, 120, 0.4)"}},oH={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.4)","0 0 10px rgba(80, 100, 140, 0.6)","0 0 4px rgba(80, 100, 140, 0.4)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function Ym({categoriaActiva:t,mostrarEnMovil:e,setMostrarEnMovil:n}){const r=Qr(),{categories:i,loading:a,error:c}=Wv(),u=g=>{r(`/Productos/${g.ruta}`),n&&n(!1)},d=g=>g===t,f=[{nombre:"Todos",ruta:"",id:"todos"},...i];return a?o.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})}):c?o.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:o.jsx("div",{className:"text-red-500 text-sm p-4",children:"Error cargando categorías"})}):o.jsxs(o.Fragment,{children:[o.jsxs("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",style:{height:"100vh",paddingTop:0,backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Categorías",children:[o.jsx("div",{className:"absolute inset-0 z-0",style:{overflow:"visible",minHeight:"2000px",backgroundColor:"transparent",pointerEvents:"none"},children:o.jsx(Gj,{})}),o.jsx("div",{className:"categorias-sidebar",children:o.jsx("div",{className:"categorias-scroll",children:o.jsxs("div",{className:"relative z-10 flex-1 pr-2",children:[o.jsx(de.h2,{className:"text-lg font-semibold mb-4 text-center tracking-wide text-blue-700 dark:text-blue-400 select-none",variants:oH,animate:"animate",children:"Categorías"}),o.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>o.jsx(de.li,{whileHover:{scale:1.02},children:o.jsx(de.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:Qk,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${d(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))}),o.jsx("div",{className:"scroll-indicator",children:o.jsxs("div",{className:"scroll-dots",children:[o.jsx("div",{className:"scroll-dot"}),o.jsx("div",{className:"scroll-dot"}),o.jsx("div",{className:"scroll-dot"})]})})]})})})]}),o.jsx(cn,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(de.div,{className:"fixed inset-0 bg-gray-200 dark:bg-gray-900 bg-opacity-40 backdrop-blur-sm z-[9998]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1)}),o.jsxs(de.nav,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",stiffness:250,damping:30},className:"fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-300 dark:border-gray-700 z-[9999] flex flex-col shadow-md transition-colors duration-300",children:[o.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-400 tracking-wide select-none",children:"Categorías"}),o.jsx("button",{onClick:()=>n(!1),className:"text-red-500 font-bold text-2xl hover:text-red-700","aria-label":"Cerrar categorías",children:"✕"})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-2 scrollbar-light",children:o.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>o.jsx(de.li,{whileHover:{scale:1.02},children:o.jsx(de.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:Qk,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${d(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))})})]})]})})]})}function Kj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Kj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $s(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Kj(t))&&(r&&(r+=" "),r+=e);return r}function Xj(t,e,n=void 0){const r={};for(const i in t){const a=t[i];let c="",u=!0;for(let d=0;d<a.length;d+=1){const f=a[d];f&&(c+=(u===!0?"":" ")+e(f),u=!1,n&&n[f]&&(c+=" "+n[f]))}r[i]=c}return r}function Nl(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function jc(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function P1(t,e=0,n=1){return jc(t,e,n)}function lH(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function No(t){if(t.type)return t;if(t.charAt(0)==="#")return No(lH(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Nl(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Nl(10,i))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:n,values:r,colorSpace:i}}const cH=t=>{const e=No(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},rd=(t,e)=>{try{return cH(t)}catch{return t}};function Lp(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,a)=>a<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Yj(t){t=No(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,a=r*Math.min(i,1-i),c=(f,g=(f+n/30)%12)=>i-a*Math.max(Math.min(g-3,9-g,1),-1);let u="rgb";const d=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return t.type==="hsla"&&(u+="a",d.push(e[3])),Lp({type:u,values:d})}function _x(t){t=No(t);let e=t.type==="hsl"||t.type==="hsla"?No(Yj(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function uH(t,e){const n=_x(t),r=_x(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Ex(t,e){return t=No(t),e=P1(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Lp(t)}function Lf(t,e,n){try{return Ex(t,e)}catch{return t}}function $d(t,e){if(t=No(t),e=P1(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Lp(t)}function on(t,e,n){try{return $d(t,e)}catch{return t}}function zd(t,e){if(t=No(t),e=P1(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Lp(t)}function ln(t,e,n){try{return zd(t,e)}catch{return t}}function dH(t,e=.15){return _x(t)>.5?$d(t,e):zd(t,e)}function Vf(t,e,n){try{return dH(t,e)}catch{return t}}const hH=k.createContext(),fH=()=>k.useContext(hH)??!1;function Qj(...t){const e=k.useRef(void 0),n=k.useCallback(r=>{const i=t.map(a=>{if(a==null)return null;if(typeof a=="function"){const c=a,u=c(r);return typeof u=="function"?u:()=>{c(null)}}return a.current=r,()=>{a.current=null}});return()=>{i.forEach(a=>a==null?void 0:a())}},t);return k.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function mH(t){return typeof t=="string"}function pH(t,e,n){return t===void 0||mH(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function am(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function Jk(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function gH(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:a}=t;if(!e){const w=$s(n==null?void 0:n.className,a,i==null?void 0:i.className,r==null?void 0:r.className),S={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},b={...n,...i,...r};return w.length>0&&(b.className=w),Object.keys(S).length>0&&(b.style=S),{props:b,internalRef:void 0}}const c=am({...i,...r}),u=Jk(r),d=Jk(i),f=e(c),g=$s(f==null?void 0:f.className,n==null?void 0:n.className,a,i==null?void 0:i.className,r==null?void 0:r.className),y={...f==null?void 0:f.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},x={...f,...n,...d,...u};return g.length>0&&(x.className=g),Object.keys(y).length>0&&(x.style=y),{props:x,internalRef:f.ref}}function yH(t,e,n){return typeof t=="function"?t(e,n):t}function eo(t){var y;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...a}=t,c=i?{}:yH(n,r),{props:u,internalRef:d}=gH({...a,externalSlotProps:c}),f=Qj(d,c==null?void 0:c.ref,(y=t.additionalProps)==null?void 0:y.ref);return pH(e,{...u,ref:f},r)}function om(t){return t&&t.ownerDocument||document}function xH(t){const{controlled:e,default:n}=t,{current:r}=k.useRef(e!==void 0),[i,a]=k.useState(n),c=r?e:i,u=k.useCallback(d=>{r||a(d)},[]);return[c,u]}const Jj=typeof window<"u"?k.useLayoutEffect:k.useEffect;function sy(t){const e=k.useRef(t);return Jj(()=>{e.current=t}),k.useRef((...n)=>(0,e.current)(...n)).current}function Zk(t){try{return t.matches(":focus-visible")}catch{}return!1}const vH={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function bH(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const wH=2;function xc(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function Zj(t,e){return t-e}function eS(t,e){const{index:n}=t.reduce((r,i,a)=>{const c=Math.abs(e-i);return r===null||c<r.distance||c===r.distance?{distance:c,index:a}:r},null)??{};return n}function Ff(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Qm(t,e,n){return(t-e)*100/(n-e)}function _H(t,e,n){return(n-e)*t+e}function EH(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function kH(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(EH(e)))}function tS({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(Zj)}function Uf({sliderRef:t,activeIndex:e,setActive:n}){var i,a,c;const r=om(t.current);(!((i=t.current)!=null&&i.contains(r.activeElement))||Number((a=r==null?void 0:r.activeElement)==null?void 0:a.getAttribute("data-index"))!==e)&&((c=t.current)==null||c.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function $f(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?bH(t,e):!1}const SH={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},TH=t=>t;let zf;function nS(){return zf===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?zf=CSS.supports("touch-action","none"):zf=!0),zf}function NH(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:a=!1,marks:c=!1,max:u=100,min:d=0,name:f,onChange:g,onChangeCommitted:y,orientation:x="horizontal",rootRef:w,scale:S=TH,step:b=1,shiftStep:N=10,tabIndex:j,value:O}=t,I=k.useRef(void 0),[V,$]=k.useState(-1),[q,D]=k.useState(-1),[R,P]=k.useState(!1),T=k.useRef(0),L=k.useRef(null),[U,A]=xH({controlled:O,default:n??d}),oe=g&&((X,me,je)=>{const te=X.nativeEvent||X,ke=new te.constructor(te.type,te);Object.defineProperty(ke,"target",{writable:!0,value:{value:me,name:f}}),L.current=me,g(ke,me,je)}),ae=Array.isArray(U);let Ce=ae?U.slice().sort(Zj):[U];Ce=Ce.map(X=>X==null?d:jc(X,d,u));const Pe=c===!0&&b!==null?[...Array(Math.floor((u-d)/b)+1)].map((X,me)=>({value:d+b*me})):c||[],ee=Pe.map(X=>X.value),[ie,ye]=k.useState(-1),B=k.useRef(null),Z=Qj(w,B),be=X=>me=>{var te;const je=Number(me.currentTarget.getAttribute("data-index"));Zk(me.target)&&ye(je),D(je),(te=X==null?void 0:X.onFocus)==null||te.call(X,me)},Ve=X=>me=>{var je;Zk(me.target)||ye(-1),D(-1),(je=X==null?void 0:X.onBlur)==null||je.call(X,me)},We=(X,me)=>{const je=Number(X.currentTarget.getAttribute("data-index")),te=Ce[je],ke=ee.indexOf(te);let Se=me;if(Pe&&b==null){const vt=ee[ee.length-1];Se>=vt?Se=vt:Se<=ee[0]?Se=ee[0]:Se=Se<te?ee[ke-1]:ee[ke+1]}if(Se=jc(Se,d,u),ae){i&&(Se=jc(Se,Ce[je-1]||-1/0,Ce[je+1]||1/0));const vt=Se;Se=tS({values:Ce,newValue:Se,index:je});let jt=je;i||(jt=Se.indexOf(vt)),Uf({sliderRef:B,activeIndex:jt})}A(Se),ye(je),oe&&!$f(Se,U)&&oe(X,Se,je),y&&y(X,L.current??Se)},et=X=>me=>{var je;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(me.key)){me.preventDefault();const te=Number(me.currentTarget.getAttribute("data-index")),ke=Ce[te];let Se=null;if(b!=null){const vt=me.shiftKey?N:b;switch(me.key){case"ArrowUp":Se=xc(ke,vt,1,d,u);break;case"ArrowRight":Se=xc(ke,vt,a?-1:1,d,u);break;case"ArrowDown":Se=xc(ke,vt,-1,d,u);break;case"ArrowLeft":Se=xc(ke,vt,a?1:-1,d,u);break;case"PageUp":Se=xc(ke,N,1,d,u);break;case"PageDown":Se=xc(ke,N,-1,d,u);break;case"Home":Se=d;break;case"End":Se=u;break}}else if(Pe){const vt=ee[ee.length-1],jt=ee.indexOf(ke),ct=[a?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Ot=[a?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];ct.includes(me.key)?jt===0?Se=ee[0]:Se=ee[jt-1]:Ot.includes(me.key)&&(jt===ee.length-1?Se=vt:Se=ee[jt+1])}Se!=null&&We(me,Se)}(je=X==null?void 0:X.onKeyDown)==null||je.call(X,me)};Jj(()=>{var X;r&&B.current.contains(document.activeElement)&&((X=document.activeElement)==null||X.blur())},[r]),r&&V!==-1&&$(-1),r&&ie!==-1&&ye(-1);const ht=X=>me=>{var je;(je=X.onChange)==null||je.call(X,me),We(me,me.target.valueAsNumber)},Xe=k.useRef(void 0);let nt=x;a&&x==="horizontal"&&(nt+="-reverse");const St=({finger:X,move:me=!1})=>{const{current:je}=B,{width:te,height:ke,bottom:Se,left:vt}=je.getBoundingClientRect();let jt;nt.startsWith("vertical")?jt=(Se-X.y)/ke:jt=(X.x-vt)/te,nt.includes("-reverse")&&(jt=1-jt);let ct;if(ct=_H(jt,d,u),b)ct=kH(ct,b,d);else{const H=eS(ee,ct);ct=ee[H]}ct=jc(ct,d,u);let Ot=0;if(ae){me?Ot=Xe.current:Ot=eS(Ce,ct),i&&(ct=jc(ct,Ce[Ot-1]||-1/0,Ce[Ot+1]||1/0));const H=ct;ct=tS({values:Ce,newValue:ct,index:Ot}),i&&me||(Ot=ct.indexOf(H),Xe.current=Ot)}return{newValue:ct,activeIndex:Ot}},xt=sy(X=>{const me=Ff(X,I);if(!me)return;if(T.current+=1,X.type==="mousemove"&&X.buttons===0){Tt(X);return}const{newValue:je,activeIndex:te}=St({finger:me,move:!0});Uf({sliderRef:B,activeIndex:te,setActive:$}),A(je),!R&&T.current>wH&&P(!0),oe&&!$f(je,U)&&oe(X,je,te)}),Tt=sy(X=>{const me=Ff(X,I);if(P(!1),!me)return;const{newValue:je}=St({finger:me,move:!0});$(-1),X.type==="touchend"&&D(-1),y&&y(X,L.current??je),I.current=void 0,Rt()}),Ze=sy(X=>{if(r)return;nS()||X.preventDefault();const me=X.changedTouches[0];me!=null&&(I.current=me.identifier);const je=Ff(X,I);if(je!==!1){const{newValue:ke,activeIndex:Se}=St({finger:je});Uf({sliderRef:B,activeIndex:Se,setActive:$}),A(ke),oe&&!$f(ke,U)&&oe(X,ke,Se)}T.current=0;const te=om(B.current);te.addEventListener("touchmove",xt,{passive:!0}),te.addEventListener("touchend",Tt,{passive:!0})}),Rt=k.useCallback(()=>{const X=om(B.current);X.removeEventListener("mousemove",xt),X.removeEventListener("mouseup",Tt),X.removeEventListener("touchmove",xt),X.removeEventListener("touchend",Tt)},[Tt,xt]);k.useEffect(()=>{const{current:X}=B;return X.addEventListener("touchstart",Ze,{passive:nS()}),()=>{X.removeEventListener("touchstart",Ze),Rt()}},[Rt,Ze]),k.useEffect(()=>{r&&Rt()},[r,Rt]);const At=X=>me=>{var ke;if((ke=X.onMouseDown)==null||ke.call(X,me),r||me.defaultPrevented||me.button!==0)return;me.preventDefault();const je=Ff(me,I);if(je!==!1){const{newValue:Se,activeIndex:vt}=St({finger:je});Uf({sliderRef:B,activeIndex:vt,setActive:$}),A(Se),oe&&!$f(Se,U)&&oe(me,Se,vt)}T.current=0;const te=om(B.current);te.addEventListener("mousemove",xt,{passive:!0}),te.addEventListener("mouseup",Tt)},pn=Qm(ae?Ce[0]:d,d,u),J=Qm(Ce[Ce.length-1],d,u)-pn,He=(X={})=>{const me=am(X),je={onMouseDown:At(me||{})},te={...me,...je};return{...X,ref:Z,...te}},De=X=>me=>{var te;(te=X.onMouseOver)==null||te.call(X,me);const je=Number(me.currentTarget.getAttribute("data-index"));D(je)},st=X=>me=>{var je;(je=X.onMouseLeave)==null||je.call(X,me),D(-1)},wt=(X={})=>{const me=am(X),je={onMouseOver:De(me||{}),onMouseLeave:st(me||{})};return{...X,...me,...je}},Qe=X=>({pointerEvents:V!==-1&&V!==X?"none":void 0});let dt;return x==="vertical"&&(dt=a?"vertical-rl":"vertical-lr"),{active:V,axis:nt,axisProps:SH,dragging:R,focusedThumbIndex:ie,getHiddenInputProps:(X={})=>{const me=am(X),je={onChange:ht(me||{}),onFocus:be(me||{}),onBlur:Ve(me||{}),onKeyDown:et(me||{})},te={...me,...je};return{tabIndex:j,"aria-labelledby":e,"aria-orientation":x,"aria-valuemax":S(u),"aria-valuemin":S(d),name:f,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...X,...te,style:{...vH,direction:a?"rtl":"ltr",width:"100%",height:"100%",writingMode:dt}}},getRootProps:He,getThumbProps:wt,marks:Pe,open:q,range:ae,rootRef:Z,trackLeap:J,trackOffset:pn,values:Ce,getThumbStyle:Qe}}function lm(t){return typeof t=="string"}function Si(t){if(typeof t!="string")throw new Error(Nl(7));return t.charAt(0).toUpperCase()+t.slice(1)}var ay={exports:{}},sn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS;function CH(){if(rS)return sn;rS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),w=Symbol.for("react.client.reference");function S(b){if(typeof b=="object"&&b!==null){var N=b.$$typeof;switch(N){case t:switch(b=b.type,b){case n:case i:case r:case d:case f:case x:return b;default:switch(b=b&&b.$$typeof,b){case c:case u:case y:case g:return b;case a:return b;default:return N}}case e:return N}}}return sn.ContextConsumer=a,sn.ContextProvider=c,sn.Element=t,sn.ForwardRef=u,sn.Fragment=n,sn.Lazy=y,sn.Memo=g,sn.Portal=e,sn.Profiler=i,sn.StrictMode=r,sn.Suspense=d,sn.SuspenseList=f,sn.isContextConsumer=function(b){return S(b)===a},sn.isContextProvider=function(b){return S(b)===c},sn.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},sn.isForwardRef=function(b){return S(b)===u},sn.isFragment=function(b){return S(b)===n},sn.isLazy=function(b){return S(b)===y},sn.isMemo=function(b){return S(b)===g},sn.isPortal=function(b){return S(b)===e},sn.isProfiler=function(b){return S(b)===i},sn.isStrictMode=function(b){return S(b)===r},sn.isSuspense=function(b){return S(b)===d},sn.isSuspenseList=function(b){return S(b)===f},sn.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===d||b===f||typeof b=="object"&&b!==null&&(b.$$typeof===y||b.$$typeof===g||b.$$typeof===c||b.$$typeof===a||b.$$typeof===u||b.$$typeof===w||b.getModuleId!==void 0)},sn.typeOf=S,sn}var iS;function jH(){return iS||(iS=1,ay.exports=CH()),ay.exports}var eA=jH();function js(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function tA(t){if(k.isValidElement(t)||eA.isValidElementType(t)||!js(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=tA(t[n])}),e}function Ti(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return js(t)&&js(e)&&Object.keys(e).forEach(i=>{k.isValidElement(e[i])||eA.isValidElementType(e[i])?r[i]=e[i]:js(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&js(t[i])?r[i]=Ti(t[i],e[i],n):n.clone?r[i]=js(e[i])?tA(e[i]):e[i]:r[i]=e[i]}),r}function xd(t,e){return e?Ti(t,e,{clone:!1}):t}function sS(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var c,u;const a=/min-width:\s*([0-9.]+)/;return+(((c=r.match(a))==null?void 0:c[1])||0)-+(((u=i.match(a))==null?void 0:u[1])||0)});return n.length?n.reduce((r,i)=>{const a=e[i];return delete r[i],r[i]=a,r},{...e}):e}function AH(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function IH(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,a=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(a)}function PH(t){const e=(a,c)=>a.replace("@media",c?`@container ${c}`:"@container");function n(a,c){a.up=(...u)=>e(t.breakpoints.up(...u),c),a.down=(...u)=>e(t.breakpoints.down(...u),c),a.between=(...u)=>e(t.breakpoints.between(...u),c),a.only=(...u)=>e(t.breakpoints.only(...u),c),a.not=(...u)=>{const d=e(t.breakpoints.not(...u),c);return d.includes("not all and")?d.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):d}}const r={},i=a=>(n(r,a),r);return n(i),{...t,containerQueries:i}}const Vp={xs:0,sm:600,md:900,lg:1200,xl:1536},aS={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Vp[t]}px)`},RH={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:Vp[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Ta(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const a=r.breakpoints||aS;return e.reduce((c,u,d)=>(c[a.up(a.keys[d])]=n(e[d]),c),{})}if(typeof e=="object"){const a=r.breakpoints||aS;return Object.keys(e).reduce((c,u)=>{if(AH(a.keys,u)){const d=IH(r.containerQueries?r:RH,u);d&&(c[d]=n(e[u],u))}else if(Object.keys(a.values||Vp).includes(u)){const d=a.up(u);c[d]=n(e[u],u)}else{const d=u;c[d]=e[d]}return c},{})}return n(e)}function MH(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const a=t.up(i);return r[a]={},r},{}))||{}}function oS(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Fp(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Jm(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Fp(t,n)||r,e&&(i=e(i,r,t)),i}function Kn(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,a=c=>{if(c[e]==null)return null;const u=c[e],d=c.theme,f=Fp(d,r)||{};return Ta(c,u,y=>{let x=Jm(f,i,y);return y===x&&typeof y=="string"&&(x=Jm(f,i,`${e}${y==="default"?"":Si(y)}`,y)),n===!1?x:{[n]:x}})};return a.propTypes={},a.filterProps=[e],a}function DH(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const OH={m:"margin",p:"padding"},LH={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},lS={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},VH=DH(t=>{if(t.length>2)if(lS[t])t=lS[t];else return[t];const[e,n]=t.split(""),r=OH[e],i=LH[n]||"";return Array.isArray(i)?i.map(a=>r+a):[r+i]}),R1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],M1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...R1,...M1];function fh(t,e,n,r){const i=Fp(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?a=>typeof a=="string"?a:typeof i=="string"?i.startsWith("var(")&&a===0?0:i.startsWith("var(")&&a===1?i:`calc(${a} * ${i})`:i*a:Array.isArray(i)?a=>{if(typeof a=="string")return a;const c=Math.abs(a),u=i[c];return a>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof i=="function"?i:()=>{}}function D1(t){return fh(t,"spacing",8)}function mh(t,e){return typeof e=="string"||e==null?e:t(e)}function FH(t,e){return n=>t.reduce((r,i)=>(r[i]=mh(e,n),r),{})}function UH(t,e,n,r){if(!e.includes(n))return null;const i=VH(n),a=FH(i,r),c=t[n];return Ta(t,c,a)}function nA(t,e){const n=D1(t.theme);return Object.keys(t).map(r=>UH(t,e,r,n)).reduce(xd,{})}function On(t){return nA(t,R1)}On.propTypes={};On.filterProps=R1;function Ln(t){return nA(t,M1)}Ln.propTypes={};Ln.filterProps=M1;function Up(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(a=>{r[a]=i}),r),{}),n=r=>Object.keys(r).reduce((i,a)=>e[a]?xd(i,e[a](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Vi(t){return typeof t!="number"?t:`${t}px solid`}function Bi(t,e){return Kn({prop:t,themeKey:"borders",transform:e})}const $H=Bi("border",Vi),zH=Bi("borderTop",Vi),BH=Bi("borderRight",Vi),HH=Bi("borderBottom",Vi),WH=Bi("borderLeft",Vi),qH=Bi("borderColor"),GH=Bi("borderTopColor"),KH=Bi("borderRightColor"),XH=Bi("borderBottomColor"),YH=Bi("borderLeftColor"),QH=Bi("outline",Vi),JH=Bi("outlineColor"),$p=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=fh(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:mh(e,r)});return Ta(t,t.borderRadius,n)}return null};$p.propTypes={};$p.filterProps=["borderRadius"];Up($H,zH,BH,HH,WH,qH,GH,KH,XH,YH,$p,QH,JH);const zp=t=>{if(t.gap!==void 0&&t.gap!==null){const e=fh(t.theme,"spacing",8),n=r=>({gap:mh(e,r)});return Ta(t,t.gap,n)}return null};zp.propTypes={};zp.filterProps=["gap"];const Bp=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=fh(t.theme,"spacing",8),n=r=>({columnGap:mh(e,r)});return Ta(t,t.columnGap,n)}return null};Bp.propTypes={};Bp.filterProps=["columnGap"];const Hp=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=fh(t.theme,"spacing",8),n=r=>({rowGap:mh(e,r)});return Ta(t,t.rowGap,n)}return null};Hp.propTypes={};Hp.filterProps=["rowGap"];const ZH=Kn({prop:"gridColumn"}),eW=Kn({prop:"gridRow"}),tW=Kn({prop:"gridAutoFlow"}),nW=Kn({prop:"gridAutoColumns"}),rW=Kn({prop:"gridAutoRows"}),iW=Kn({prop:"gridTemplateColumns"}),sW=Kn({prop:"gridTemplateRows"}),aW=Kn({prop:"gridTemplateAreas"}),oW=Kn({prop:"gridArea"});Up(zp,Bp,Hp,ZH,eW,tW,nW,rW,iW,sW,aW,oW);function $c(t,e){return e==="grey"?e:t}const lW=Kn({prop:"color",themeKey:"palette",transform:$c}),cW=Kn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:$c}),uW=Kn({prop:"backgroundColor",themeKey:"palette",transform:$c});Up(lW,cW,uW);function _i(t){return t<=1&&t!==0?`${t*100}%`:t}const dW=Kn({prop:"width",transform:_i}),O1=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,a,c,u,d;const r=((c=(a=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:a.values)==null?void 0:c[n])||Vp[n];return r?((d=(u=t.theme)==null?void 0:u.breakpoints)==null?void 0:d.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:_i(n)}};return Ta(t,t.maxWidth,e)}return null};O1.filterProps=["maxWidth"];const hW=Kn({prop:"minWidth",transform:_i}),fW=Kn({prop:"height",transform:_i}),mW=Kn({prop:"maxHeight",transform:_i}),pW=Kn({prop:"minHeight",transform:_i});Kn({prop:"size",cssProperty:"width",transform:_i});Kn({prop:"size",cssProperty:"height",transform:_i});const gW=Kn({prop:"boxSizing"});Up(dW,O1,hW,fW,mW,pW,gW);const ph={border:{themeKey:"borders",transform:Vi},borderTop:{themeKey:"borders",transform:Vi},borderRight:{themeKey:"borders",transform:Vi},borderBottom:{themeKey:"borders",transform:Vi},borderLeft:{themeKey:"borders",transform:Vi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Vi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:$p},color:{themeKey:"palette",transform:$c},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:$c},backgroundColor:{themeKey:"palette",transform:$c},p:{style:Ln},pt:{style:Ln},pr:{style:Ln},pb:{style:Ln},pl:{style:Ln},px:{style:Ln},py:{style:Ln},padding:{style:Ln},paddingTop:{style:Ln},paddingRight:{style:Ln},paddingBottom:{style:Ln},paddingLeft:{style:Ln},paddingX:{style:Ln},paddingY:{style:Ln},paddingInline:{style:Ln},paddingInlineStart:{style:Ln},paddingInlineEnd:{style:Ln},paddingBlock:{style:Ln},paddingBlockStart:{style:Ln},paddingBlockEnd:{style:Ln},m:{style:On},mt:{style:On},mr:{style:On},mb:{style:On},ml:{style:On},mx:{style:On},my:{style:On},margin:{style:On},marginTop:{style:On},marginRight:{style:On},marginBottom:{style:On},marginLeft:{style:On},marginX:{style:On},marginY:{style:On},marginInline:{style:On},marginInlineStart:{style:On},marginInlineEnd:{style:On},marginBlock:{style:On},marginBlockStart:{style:On},marginBlockEnd:{style:On},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:zp},rowGap:{style:Hp},columnGap:{style:Bp},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:_i},maxWidth:{style:O1},minWidth:{transform:_i},height:{transform:_i},maxHeight:{transform:_i},minHeight:{transform:_i},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function yW(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function xW(t,e){return typeof t=="function"?t(e):t}function vW(){function t(n,r,i,a){const c={[n]:r,theme:i},u=a[n];if(!u)return{[n]:r};const{cssProperty:d=n,themeKey:f,transform:g,style:y}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const x=Fp(i,f)||{};return y?y(c):Ta(c,r,S=>{let b=Jm(x,g,S);return S===b&&typeof S=="string"&&(b=Jm(x,g,`${n}${S==="default"?"":Si(S)}`,S)),d===!1?b:{[d]:b}})}function e(n){const{sx:r,theme:i={},nested:a}=n||{};if(!r)return null;const c=i.unstable_sxConfig??ph;function u(d){let f=d;if(typeof d=="function")f=d(i);else if(typeof d!="object")return d;if(!f)return null;const g=MH(i.breakpoints),y=Object.keys(g);let x=g;return Object.keys(f).forEach(w=>{const S=xW(f[w],i);if(S!=null)if(typeof S=="object")if(c[w])x=xd(x,t(w,S,i,c));else{const b=Ta({theme:i},S,N=>({[w]:N}));yW(b,S)?x[w]=e({sx:S,theme:i,nested:!0}):x=xd(x,b)}else x=xd(x,t(w,S,i,c))}),!a&&i.modularCssLayers?{"@layer sx":sS(i,oS(y,x))}:sS(i,oS(y,x))}return Array.isArray(r)?r.map(u):u(r)}return e}const Cl=vW();Cl.filterProps=["sx"];const bW=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??ph;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function rA(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=bW(n);let a;return Array.isArray(e)?a=[r,...e]:typeof e=="function"?a=(...c)=>{const u=e(...c);return js(u)?{...r,...u}:r}:a={...r,...e},{...i,sx:a}}function kx(){return kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kx.apply(null,arguments)}function wW(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function _W(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var EW=function(){function t(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(_W(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=wW(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Dr="-ms-",Zm="-moz-",Yt="-webkit-",iA="comm",L1="rule",V1="decl",kW="@import",sA="@keyframes",SW="@layer",TW=Math.abs,Wp=String.fromCharCode,NW=Object.assign;function CW(t,e){return Er(t,0)^45?(((e<<2^Er(t,0))<<2^Er(t,1))<<2^Er(t,2))<<2^Er(t,3):0}function aA(t){return t.trim()}function jW(t,e){return(t=e.exec(t))?t[0]:t}function Qt(t,e,n){return t.replace(e,n)}function Sx(t,e){return t.indexOf(e)}function Er(t,e){return t.charCodeAt(e)|0}function Bd(t,e,n){return t.slice(e,n)}function Ns(t){return t.length}function F1(t){return t.length}function Bf(t,e){return e.push(t),t}function AW(t,e){return t.map(e).join("")}var qp=1,Jc=1,oA=0,fi=0,tr=0,fu="";function Gp(t,e,n,r,i,a,c){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:qp,column:Jc,length:c,return:""}}function Gu(t,e){return NW(Gp("",null,null,"",null,null,0),t,{length:-t.length},e)}function IW(){return tr}function PW(){return tr=fi>0?Er(fu,--fi):0,Jc--,tr===10&&(Jc=1,qp--),tr}function Ni(){return tr=fi<oA?Er(fu,fi++):0,Jc++,tr===10&&(Jc=1,qp++),tr}function zs(){return Er(fu,fi)}function cm(){return fi}function gh(t,e){return Bd(fu,t,e)}function Hd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lA(t){return qp=Jc=1,oA=Ns(fu=t),fi=0,[]}function cA(t){return fu="",t}function um(t){return aA(gh(fi-1,Tx(t===91?t+2:t===40?t+1:t)))}function RW(t){for(;(tr=zs())&&tr<33;)Ni();return Hd(t)>2||Hd(tr)>3?"":" "}function MW(t,e){for(;--e&&Ni()&&!(tr<48||tr>102||tr>57&&tr<65||tr>70&&tr<97););return gh(t,cm()+(e<6&&zs()==32&&Ni()==32))}function Tx(t){for(;Ni();)switch(tr){case t:return fi;case 34:case 39:t!==34&&t!==39&&Tx(tr);break;case 40:t===41&&Tx(t);break;case 92:Ni();break}return fi}function DW(t,e){for(;Ni()&&t+tr!==57;)if(t+tr===84&&zs()===47)break;return"/*"+gh(e,fi-1)+"*"+Wp(t===47?t:Ni())}function OW(t){for(;!Hd(zs());)Ni();return gh(t,fi)}function LW(t){return cA(dm("",null,null,null,[""],t=lA(t),0,[0],t))}function dm(t,e,n,r,i,a,c,u,d){for(var f=0,g=0,y=c,x=0,w=0,S=0,b=1,N=1,j=1,O=0,I="",V=i,$=a,q=r,D=I;N;)switch(S=O,O=Ni()){case 40:if(S!=108&&Er(D,y-1)==58){Sx(D+=Qt(um(O),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:D+=um(O);break;case 9:case 10:case 13:case 32:D+=RW(S);break;case 92:D+=MW(cm()-1,7);continue;case 47:switch(zs()){case 42:case 47:Bf(VW(DW(Ni(),cm()),e,n),d);break;default:D+="/"}break;case 123*b:u[f++]=Ns(D)*j;case 125*b:case 59:case 0:switch(O){case 0:case 125:N=0;case 59+g:j==-1&&(D=Qt(D,/\f/g,"")),w>0&&Ns(D)-y&&Bf(w>32?uS(D+";",r,n,y-1):uS(Qt(D," ","")+";",r,n,y-2),d);break;case 59:D+=";";default:if(Bf(q=cS(D,e,n,f,g,i,u,I,V=[],$=[],y),a),O===123)if(g===0)dm(D,e,q,q,V,a,y,u,$);else switch(x===99&&Er(D,3)===110?100:x){case 100:case 108:case 109:case 115:dm(t,q,q,r&&Bf(cS(t,q,q,0,0,i,u,I,i,V=[],y),$),i,$,y,u,r?V:$);break;default:dm(D,q,q,q,[""],$,0,u,$)}}f=g=w=0,b=j=1,I=D="",y=c;break;case 58:y=1+Ns(D),w=S;default:if(b<1){if(O==123)--b;else if(O==125&&b++==0&&PW()==125)continue}switch(D+=Wp(O),O*b){case 38:j=g>0?1:(D+="\f",-1);break;case 44:u[f++]=(Ns(D)-1)*j,j=1;break;case 64:zs()===45&&(D+=um(Ni())),x=zs(),g=y=Ns(I=D+=OW(cm())),O++;break;case 45:S===45&&Ns(D)==2&&(b=0)}}return a}function cS(t,e,n,r,i,a,c,u,d,f,g){for(var y=i-1,x=i===0?a:[""],w=F1(x),S=0,b=0,N=0;S<r;++S)for(var j=0,O=Bd(t,y+1,y=TW(b=c[S])),I=t;j<w;++j)(I=aA(b>0?x[j]+" "+O:Qt(O,/&\f/g,x[j])))&&(d[N++]=I);return Gp(t,e,n,i===0?L1:u,d,f,g)}function VW(t,e,n){return Gp(t,e,n,iA,Wp(IW()),Bd(t,2,-2),0)}function uS(t,e,n,r){return Gp(t,e,n,V1,Bd(t,0,r),Bd(t,r+1,-1),r)}function zc(t,e){for(var n="",r=F1(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function FW(t,e,n,r){switch(t.type){case SW:if(t.children.length)break;case kW:case V1:return t.return=t.return||t.value;case iA:return"";case sA:return t.return=t.value+"{"+zc(t.children,r)+"}";case L1:t.value=t.props.join(",")}return Ns(n=zc(t.children,r))?t.return=t.value+"{"+n+"}":""}function UW(t){var e=F1(t);return function(n,r,i,a){for(var c="",u=0;u<e;u++)c+=t[u](n,r,i,a)||"";return c}}function $W(t){return function(e){e.root||(e=e.return)&&t(e)}}function uA(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var zW=function(e,n,r){for(var i=0,a=0;i=a,a=zs(),i===38&&a===12&&(n[r]=1),!Hd(a);)Ni();return gh(e,fi)},BW=function(e,n){var r=-1,i=44;do switch(Hd(i)){case 0:i===38&&zs()===12&&(n[r]=1),e[r]+=zW(fi-1,n,r);break;case 2:e[r]+=um(i);break;case 4:if(i===44){e[++r]=zs()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Wp(i)}while(i=Ni());return e},HW=function(e,n){return cA(BW(lA(e),n))},dS=new WeakMap,WW=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!dS.get(r))&&!i){dS.set(e,!0);for(var a=[],c=HW(n,a),u=r.props,d=0,f=0;d<c.length;d++)for(var g=0;g<u.length;g++,f++)e.props[f]=a[d]?c[d].replace(/&\f/g,u[g]):u[g]+" "+c[d]}}},qW=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function dA(t,e){switch(CW(t,e)){case 5103:return Yt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Yt+t+Zm+t+Dr+t+t;case 6828:case 4268:return Yt+t+Dr+t+t;case 6165:return Yt+t+Dr+"flex-"+t+t;case 5187:return Yt+t+Qt(t,/(\w+).+(:[^]+)/,Yt+"box-$1$2"+Dr+"flex-$1$2")+t;case 5443:return Yt+t+Dr+"flex-item-"+Qt(t,/flex-|-self/,"")+t;case 4675:return Yt+t+Dr+"flex-line-pack"+Qt(t,/align-content|flex-|-self/,"")+t;case 5548:return Yt+t+Dr+Qt(t,"shrink","negative")+t;case 5292:return Yt+t+Dr+Qt(t,"basis","preferred-size")+t;case 6060:return Yt+"box-"+Qt(t,"-grow","")+Yt+t+Dr+Qt(t,"grow","positive")+t;case 4554:return Yt+Qt(t,/([^-])(transform)/g,"$1"+Yt+"$2")+t;case 6187:return Qt(Qt(Qt(t,/(zoom-|grab)/,Yt+"$1"),/(image-set)/,Yt+"$1"),t,"")+t;case 5495:case 3959:return Qt(t,/(image-set\([^]*)/,Yt+"$1$`$1");case 4968:return Qt(Qt(t,/(.+:)(flex-)?(.*)/,Yt+"box-pack:$3"+Dr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yt+t+t;case 4095:case 3583:case 4068:case 2532:return Qt(t,/(.+)-inline(.+)/,Yt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ns(t)-1-e>6)switch(Er(t,e+1)){case 109:if(Er(t,e+4)!==45)break;case 102:return Qt(t,/(.+:)(.+)-([^]+)/,"$1"+Yt+"$2-$3$1"+Zm+(Er(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Sx(t,"stretch")?dA(Qt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Er(t,e+1)!==115)break;case 6444:switch(Er(t,Ns(t)-3-(~Sx(t,"!important")&&10))){case 107:return Qt(t,":",":"+Yt)+t;case 101:return Qt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yt+(Er(t,14)===45?"inline-":"")+"box$3$1"+Yt+"$2$3$1"+Dr+"$2box$3")+t}break;case 5936:switch(Er(t,e+11)){case 114:return Yt+t+Dr+Qt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Yt+t+Dr+Qt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Yt+t+Dr+Qt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Yt+t+Dr+t+t}return t}var GW=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case V1:e.return=dA(e.value,e.length);break;case sA:return zc([Gu(e,{value:Qt(e.value,"@","@"+Yt)})],i);case L1:if(e.length)return AW(e.props,function(a){switch(jW(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zc([Gu(e,{props:[Qt(a,/:(read-\w+)/,":"+Zm+"$1")]})],i);case"::placeholder":return zc([Gu(e,{props:[Qt(a,/:(plac\w+)/,":"+Yt+"input-$1")]}),Gu(e,{props:[Qt(a,/:(plac\w+)/,":"+Zm+"$1")]}),Gu(e,{props:[Qt(a,/:(plac\w+)/,Dr+"input-$1")]})],i)}return""})}},KW=[GW],XW=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var N=b.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||KW,a={},c,u=[];c=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var N=b.getAttribute("data-emotion").split(" "),j=1;j<N.length;j++)a[N[j]]=!0;u.push(b)});var d,f=[WW,qW];{var g,y=[FW,$W(function(b){g.insert(b)})],x=UW(f.concat(i,y)),w=function(N){return zc(LW(N),x)};d=function(N,j,O,I){g=O,w(N?N+"{"+j.styles+"}":j.styles),I&&(S.inserted[j.name]=!0)}}var S={key:n,sheet:new EW({key:n,container:c,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:d};return S.sheet.hydrate(u),S},YW=!0;function QW(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var hA=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||YW===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},JW=function(e,n,r){hA(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function ZW(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var eq={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},tq=/[A-Z]|^ms/g,nq=/_EMO_([^_]+?)_([^]*?)_EMO_/g,fA=function(e){return e.charCodeAt(1)===45},hS=function(e){return e!=null&&typeof e!="boolean"},oy=uA(function(t){return fA(t)?t:t.replace(tq,"-$&").toLowerCase()}),fS=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(nq,function(r,i,a){return Cs={name:i,styles:a,next:Cs},i})}return eq[e]!==1&&!fA(e)&&typeof n=="number"&&n!==0?n+"px":n};function Wd(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Cs={name:i.name,styles:i.styles,next:Cs},i.name;var a=n;if(a.styles!==void 0){var c=a.next;if(c!==void 0)for(;c!==void 0;)Cs={name:c.name,styles:c.styles,next:Cs},c=c.next;var u=a.styles+";";return u}return rq(t,e,n)}case"function":{if(t!==void 0){var d=Cs,f=n(t);return Cs=d,Wd(t,e,f)}break}}var g=n;if(e==null)return g;var y=e[g];return y!==void 0?y:g}function rq(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Wd(t,e,n[i])+";";else for(var a in n){var c=n[a];if(typeof c!="object"){var u=c;e!=null&&e[u]!==void 0?r+=a+"{"+e[u]+"}":hS(u)&&(r+=oy(a)+":"+fS(a,u)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(e==null||e[c[0]]===void 0))for(var d=0;d<c.length;d++)hS(c[d])&&(r+=oy(a)+":"+fS(a,c[d])+";");else{var f=Wd(t,e,c);switch(a){case"animation":case"animationName":{r+=oy(a)+":"+f+";";break}default:r+=a+"{"+f+"}"}}}return r}var mS=/label:\s*([^\s;{]+)\s*(;|$)/g,Cs;function mA(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Cs=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,i+=Wd(n,e,a);else{var c=a;i+=c[0]}for(var u=1;u<t.length;u++)if(i+=Wd(n,e,t[u]),r){var d=a;i+=d[u]}mS.lastIndex=0;for(var f="",g;(g=mS.exec(i))!==null;)f+="-"+g[1];var y=ZW(i)+f;return{name:y,styles:i,next:Cs}}var iq=function(e){return e()},sq=dy.useInsertionEffect?dy.useInsertionEffect:!1,aq=sq||iq,pA=k.createContext(typeof HTMLElement<"u"?XW({key:"css"}):null);pA.Provider;var oq=function(e){return k.forwardRef(function(n,r){var i=k.useContext(pA);return e(n,i,r)})},gA=k.createContext({}),lq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,cq=uA(function(t){return lq.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),uq=cq,dq=function(e){return e!=="theme"},pS=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?uq:dq},gS=function(e,n,r){var i;if(n){var a=n.shouldForwardProp;i=e.__emotion_forwardProp&&a?function(c){return e.__emotion_forwardProp(c)&&a(c)}:a}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},hq=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return hA(n,r,i),aq(function(){return JW(n,r,i)}),null},fq=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,a,c;n!==void 0&&(a=n.label,c=n.target);var u=gS(e,n,r),d=u||pS(i),f=!d("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&y.push("label:"+a+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{var x=g[0];y.push(x[0]);for(var w=g.length,S=1;S<w;S++)y.push(g[S],x[S])}var b=oq(function(N,j,O){var I=f&&N.as||i,V="",$=[],q=N;if(N.theme==null){q={};for(var D in N)q[D]=N[D];q.theme=k.useContext(gA)}typeof N.className=="string"?V=QW(j.registered,$,N.className):N.className!=null&&(V=N.className+" ");var R=mA(y.concat($),j.registered,q);V+=j.key+"-"+R.name,c!==void 0&&(V+=" "+c);var P=f&&u===void 0?pS(I):d,T={};for(var L in N)f&&L==="as"||P(L)&&(T[L]=N[L]);return T.className=V,O&&(T.ref=O),k.createElement(k.Fragment,null,k.createElement(hq,{cache:j,serialized:R,isStringTag:typeof I=="string"}),k.createElement(I,T))});return b.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=y,b.__emotion_forwardProp=u,Object.defineProperty(b,"toString",{value:function(){return"."+c}}),b.withComponent=function(N,j){var O=t(N,kx({},n,j,{shouldForwardProp:gS(b,j,!0)}));return O.apply(void 0,y)},b}},mq=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Nx=fq.bind(null);mq.forEach(function(t){Nx[t]=Nx(t)});function yA(t,e){return Nx(t,e)}function pq(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const yS=[];function xl(t){return yS[0]=t,mA(yS)}const gq=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function yq(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,a=gq(e),c=Object.keys(a);function u(x){return`@media (min-width:${typeof e[x]=="number"?e[x]:x}${n})`}function d(x){return`@media (max-width:${(typeof e[x]=="number"?e[x]:x)-r/100}${n})`}function f(x,w){const S=c.indexOf(w);return`@media (min-width:${typeof e[x]=="number"?e[x]:x}${n}) and (max-width:${(S!==-1&&typeof e[c[S]]=="number"?e[c[S]]:w)-r/100}${n})`}function g(x){return c.indexOf(x)+1<c.length?f(x,c[c.indexOf(x)+1]):u(x)}function y(x){const w=c.indexOf(x);return w===0?u(c[1]):w===c.length-1?d(c[w]):f(x,c[c.indexOf(x)+1]).replace("@media","@media not all and")}return{keys:c,values:a,up:u,down:d,between:f,only:g,not:y,unit:n,...i}}const xq={borderRadius:4};function xA(t=8,e=D1({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(a=>{const c=e(a);return typeof c=="number"?`${c}px`:c}).join(" ");return n.mui=!0,n}function vq(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function U1(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:a={},...c}=t,u=yq(n),d=xA(i);let f=Ti({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:d,shape:{...xq,...a}},c);return f=PH(f),f.applyStyles=vq,f=e.reduce((g,y)=>Ti(g,y),f),f.unstable_sxConfig={...ph,...c==null?void 0:c.unstable_sxConfig},f.unstable_sx=function(y){return Cl({sx:y,theme:this})},f}function bq(t){return Object.keys(t).length===0}function wq(t=null){const e=k.useContext(gA);return!e||bq(e)?t:e}const _q=U1();function Eq(t=_q){return wq(t)}const xS=t=>t,kq=()=>{let t=xS;return{configure(e){t=e},generate(e){return t(e)},reset(){t=xS}}},vA=kq();function Sq(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,a=yA("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Cl);return k.forwardRef(function(d,f){const g=Eq(n),{className:y,component:x="div",...w}=rA(d);return o.jsx(a,{as:x,ref:f,className:$s(y,i?i(r):r),theme:e&&g[e]||g,...w})})}const Tq={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function $1(t,e,n="Mui"){const r=Tq[e];return r?`${n}-${r}`:`${vA.generate(t)}-${e}`}function z1(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=$1(t,i,n)}),r}function bA(t){const{variants:e,...n}=t,r={variants:e,style:xl(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=xl(i.style))}),r}const Nq=U1();function ly(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function hl(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function Cq(t){return t?(e,n)=>n[t]:null}function jq(t,e,n){t.theme=Pq(t.theme)?n:t.theme[e]||t.theme}function hm(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>hm(t,i,n));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=n?hl(r.style,n):r.style;else{const{variants:a,...c}=r;i=n?hl(xl(c),n):c}return wA(t,r.variants,[i],n)}return r!=null&&r.isProcessed?n?hl(xl(r.style),n):r.style:n?hl(xl(r),n):r}function wA(t,e,n=[],r=void 0){var a;let i;e:for(let c=0;c<e.length;c+=1){const u=e[c];if(typeof u.props=="function"){if(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),!u.props(i))continue}else for(const d in u.props)if(t[d]!==u.props[d]&&((a=t.ownerState)==null?void 0:a[d])!==u.props[d])continue e;typeof u.style=="function"?(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),n.push(r?hl(xl(u.style(i)),r):u.style(i))):n.push(r?hl(xl(u.style),r):u.style)}return n}function Aq(t={}){const{themeId:e,defaultTheme:n=Nq,rootShouldForwardProp:r=ly,slotShouldForwardProp:i=ly}=t;function a(u){jq(u,e,n)}return(u,d={})=>{pq(u,q=>q.filter(D=>D!==Cl));const{name:f,slot:g,skipVariantsResolver:y,skipSx:x,overridesResolver:w=Cq(Mq(g)),...S}=d,b=f&&f.startsWith("Mui")||g?"components":"custom",N=y!==void 0?y:g&&g!=="Root"&&g!=="root"||!1,j=x||!1;let O=ly;g==="Root"||g==="root"?O=r:g?O=i:Rq(u)&&(O=void 0);const I=yA(u,{shouldForwardProp:O,label:Iq(),...S}),V=q=>{if(q.__emotion_real===q)return q;if(typeof q=="function")return function(R){return hm(R,q,R.theme.modularCssLayers?b:void 0)};if(js(q)){const D=bA(q);return function(P){return D.variants?hm(P,D,P.theme.modularCssLayers?b:void 0):P.theme.modularCssLayers?hl(D.style,b):D.style}}return q},$=(...q)=>{const D=[],R=q.map(V),P=[];if(D.push(a),f&&w&&P.push(function(A){var Pe,ee;const ae=(ee=(Pe=A.theme.components)==null?void 0:Pe[f])==null?void 0:ee.styleOverrides;if(!ae)return null;const Ce={};for(const ie in ae)Ce[ie]=hm(A,ae[ie],A.theme.modularCssLayers?"theme":void 0);return w(A,Ce)}),f&&!N&&P.push(function(A){var Ce,Pe;const oe=A.theme,ae=(Pe=(Ce=oe==null?void 0:oe.components)==null?void 0:Ce[f])==null?void 0:Pe.variants;return ae?wA(A,ae,[],A.theme.modularCssLayers?"theme":void 0):null}),j||P.push(Cl),Array.isArray(R[0])){const U=R.shift(),A=new Array(D.length).fill(""),oe=new Array(P.length).fill("");let ae;ae=[...A,...U,...oe],ae.raw=[...A,...U.raw,...oe],D.unshift(ae)}const T=[...D,...R,...P],L=I(...T);return u.muiName&&(L.muiName=u.muiName),L};return I.withConfig&&($.withConfig=I.withConfig),$}}function Iq(t,e){return void 0}function Pq(t){for(const e in t)return!1;return!0}function Rq(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Mq(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Cx(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const a=i;if(a==="components"||a==="slots")r[a]={...t[a],...r[a]};else if(a==="componentsProps"||a==="slotProps"){const c=t[a],u=e[a];if(!u)r[a]=c||{};else if(!c)r[a]=u;else{r[a]={...u};for(const d in c)if(Object.prototype.hasOwnProperty.call(c,d)){const f=d;r[a][f]=Cx(c[f],u[f],n)}}}else a==="className"&&n&&e.className?r.className=$s(t==null?void 0:t.className,e==null?void 0:e.className):a==="style"&&n&&e.style?r.style={...t==null?void 0:t.style,...e==null?void 0:e.style}:r[a]===void 0&&(r[a]=t[a])}return r}const Dq=k.createContext(void 0);function Oq(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Cx(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?Cx(i,r,e.components.mergeClassNameAndStyle):r}function Lq({props:t,name:e}){const n=k.useContext(Dq);return Oq({props:t,name:e,theme:{components:n}})}const vS={theme:void 0};function Vq(t){let e,n;return function(i){let a=e;return(a===void 0||i.theme!==n)&&(vS.theme=i.theme,a=bA(t(vS)),e=a,n=i.theme),a}}function Fq(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const bS=(t,e,n,r=[])=>{let i=t;e.forEach((a,c)=>{c===e.length-1?Array.isArray(i)?i[Number(a)]=n:i&&typeof i=="object"&&(i[a]=n):i&&typeof i=="object"&&(i[a]||(i[a]=r.includes(a)?[]:{}),i=i[a])})},Uq=(t,e,n)=>{function r(i,a=[],c=[]){Object.entries(i).forEach(([u,d])=>{(!n||n&&!n([...a,u]))&&d!=null&&(typeof d=="object"&&Object.keys(d).length>0?r(d,[...a,u],Array.isArray(d)?[...c,u]:c):e([...a,u],d,c))})}r(t)},$q=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function cy(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},a={},c={};return Uq(t,(u,d,f)=>{if((typeof d=="string"||typeof d=="number")&&(!r||!r(u,d))){const g=`--${n?`${n}-`:""}${u.join("-")}`,y=$q(u,d);Object.assign(i,{[g]:y}),bS(a,u,`var(${g})`,f),bS(c,u,`var(${g}, ${y})`,f)}},u=>u[0]==="vars"),{css:i,vars:a,varsWithDefaults:c}}function zq(t,e={}){const{getSelector:n=N,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:a={},components:c,defaultColorScheme:u="light",...d}=t,{vars:f,css:g,varsWithDefaults:y}=cy(d,e);let x=y;const w={},{[u]:S,...b}=a;if(Object.entries(b||{}).forEach(([I,V])=>{const{vars:$,css:q,varsWithDefaults:D}=cy(V,e);x=Ti(x,D),w[I]={css:q,vars:$}}),S){const{css:I,vars:V,varsWithDefaults:$}=cy(S,e);x=Ti(x,$),w[u]={css:I,vars:V}}function N(I,V){var q,D;let $=i;if(i==="class"&&($=".%s"),i==="data"&&($="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&($=`[${i}="%s"]`),I){if($==="media")return t.defaultColorScheme===I?":root":{[`@media (prefers-color-scheme: ${((D=(q=a[I])==null?void 0:q.palette)==null?void 0:D.mode)||I})`]:{":root":V}};if($)return t.defaultColorScheme===I?`:root, ${$.replace("%s",String(I))}`:$.replace("%s",String(I))}return":root"}return{vars:x,generateThemeVars:()=>{let I={...f};return Object.entries(w).forEach(([,{vars:V}])=>{I=Ti(I,V)}),I},generateStyleSheets:()=>{var R,P;const I=[],V=t.defaultColorScheme||"light";function $(T,L){Object.keys(L).length&&I.push(typeof T=="string"?{[T]:{...L}}:T)}$(n(void 0,{...g}),g);const{[V]:q,...D}=w;if(q){const{css:T}=q,L=(P=(R=a[V])==null?void 0:R.palette)==null?void 0:P.mode,U=!r&&L?{colorScheme:L,...T}:{...T};$(n(V,{...U}),U)}return Object.entries(D).forEach(([T,{css:L}])=>{var oe,ae;const U=(ae=(oe=a[T])==null?void 0:oe.palette)==null?void 0:ae.mode,A=!r&&U?{colorScheme:U,...L}:{...L};$(n(T,{...A}),A)}),I}}}function Bq(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const qd={black:"#000",white:"#fff"},Hq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},vc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},bc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Ku={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},wc={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},_c={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Ec={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function _A(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:qd.white,default:qd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Wq=_A();function EA(){return{text:{primary:qd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:qd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const wS=EA();function _S(t,e,n,r){const i=r.light||r,a=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=zd(t.main,i):e==="dark"&&(t.dark=$d(t.main,a)))}function qq(t="light"){return t==="dark"?{main:wc[200],light:wc[50],dark:wc[400]}:{main:wc[700],light:wc[400],dark:wc[800]}}function Gq(t="light"){return t==="dark"?{main:vc[200],light:vc[50],dark:vc[400]}:{main:vc[500],light:vc[300],dark:vc[700]}}function Kq(t="light"){return t==="dark"?{main:bc[500],light:bc[300],dark:bc[700]}:{main:bc[700],light:bc[400],dark:bc[800]}}function Xq(t="light"){return t==="dark"?{main:_c[400],light:_c[300],dark:_c[700]}:{main:_c[700],light:_c[500],dark:_c[900]}}function Yq(t="light"){return t==="dark"?{main:Ec[400],light:Ec[300],dark:Ec[700]}:{main:Ec[800],light:Ec[500],dark:Ec[900]}}function Qq(t="light"){return t==="dark"?{main:Ku[400],light:Ku[300],dark:Ku[700]}:{main:"#ed6c02",light:Ku[500],dark:Ku[900]}}function B1(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,a=t.primary||qq(e),c=t.secondary||Gq(e),u=t.error||Kq(e),d=t.info||Xq(e),f=t.success||Yq(e),g=t.warning||Qq(e);function y(b){return uH(b,wS.text.primary)>=n?wS.text.primary:Wq.text.primary}const x=({color:b,name:N,mainShade:j=500,lightShade:O=300,darkShade:I=700})=>{if(b={...b},!b.main&&b[j]&&(b.main=b[j]),!b.hasOwnProperty("main"))throw new Error(Nl(11,N?` (${N})`:"",j));if(typeof b.main!="string")throw new Error(Nl(12,N?` (${N})`:"",JSON.stringify(b.main)));return _S(b,"light",O,r),_S(b,"dark",I,r),b.contrastText||(b.contrastText=y(b.main)),b};let w;return e==="light"?w=_A():e==="dark"&&(w=EA()),Ti({common:{...qd},mode:e,primary:x({color:a,name:"primary"}),secondary:x({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:u,name:"error"}),warning:x({color:g,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:f,name:"success"}),grey:Hq,contrastThreshold:n,getContrastText:y,augmentColor:x,tonalOffset:r,...w},i)}function Jq(t){const e={};return Object.entries(t).forEach(r=>{const[i,a]=r;typeof a=="object"&&(e[i]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function Zq(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function eG(t){return Math.round(t*1e5)/1e5}const ES={textTransform:"uppercase"},kS='"Roboto", "Helvetica", "Arial", sans-serif';function tG(t,e){const{fontFamily:n=kS,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:d=16,allVariants:f,pxToRem:g,...y}=typeof e=="function"?e(t):e,x=r/14,w=g||(N=>`${N/d*x}rem`),S=(N,j,O,I,V)=>({fontFamily:n,fontWeight:N,fontSize:w(j),lineHeight:O,...n===kS?{letterSpacing:`${eG(I/j)}em`}:{},...V,...f}),b={h1:S(i,96,1.167,-1.5),h2:S(i,60,1.2,-.5),h3:S(a,48,1.167,0),h4:S(a,34,1.235,.25),h5:S(a,24,1.334,0),h6:S(c,20,1.6,.15),subtitle1:S(a,16,1.75,.15),subtitle2:S(c,14,1.57,.1),body1:S(a,16,1.5,.15),body2:S(a,14,1.43,.15),button:S(c,14,1.75,.4,ES),caption:S(a,12,1.66,.4),overline:S(a,12,2.66,1,ES),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ti({htmlFontSize:d,pxToRem:w,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:c,fontWeightBold:u,...b},y,{clone:!1})}const nG=.2,rG=.14,iG=.12;function _n(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${nG})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${rG})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${iG})`].join(",")}const sG=["none",_n(0,2,1,-1,0,1,1,0,0,1,3,0),_n(0,3,1,-2,0,2,2,0,0,1,5,0),_n(0,3,3,-2,0,3,4,0,0,1,8,0),_n(0,2,4,-1,0,4,5,0,0,1,10,0),_n(0,3,5,-1,0,5,8,0,0,1,14,0),_n(0,3,5,-1,0,6,10,0,0,1,18,0),_n(0,4,5,-2,0,7,10,1,0,2,16,1),_n(0,5,5,-3,0,8,10,1,0,3,14,2),_n(0,5,6,-3,0,9,12,1,0,3,16,2),_n(0,6,6,-3,0,10,14,1,0,4,18,3),_n(0,6,7,-4,0,11,15,1,0,4,20,3),_n(0,7,8,-4,0,12,17,2,0,5,22,4),_n(0,7,8,-4,0,13,19,2,0,5,24,4),_n(0,7,9,-4,0,14,21,2,0,5,26,4),_n(0,8,9,-5,0,15,22,2,0,6,28,5),_n(0,8,10,-5,0,16,24,2,0,6,30,5),_n(0,8,11,-5,0,17,26,2,0,6,32,5),_n(0,9,11,-5,0,18,28,2,0,7,34,6),_n(0,9,12,-6,0,19,29,2,0,7,36,6),_n(0,10,13,-6,0,20,31,3,0,8,38,7),_n(0,10,13,-6,0,21,33,3,0,8,40,7),_n(0,10,14,-6,0,22,35,3,0,8,42,7),_n(0,11,14,-7,0,23,36,3,0,9,44,8),_n(0,11,15,-7,0,24,38,3,0,9,46,8)],aG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},oG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function SS(t){return`${Math.round(t)}ms`}function lG(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function cG(t){const e={...aG,...t.easing},n={...oG,...t.duration};return{getAutoHeightDuration:lG,create:(i=["all"],a={})=>{const{duration:c=n.standard,easing:u=e.easeInOut,delay:d=0,...f}=a;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof c=="string"?c:SS(c)} ${u} ${typeof d=="string"?d:SS(d)}`).join(",")},...t,easing:e,duration:n}}const uG={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function dG(t){return js(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function kA(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let a=0;a<i.length;a++){const[c,u]=i[a];!dG(u)||c.startsWith("unstable_")?delete r[c]:js(u)&&(r[c]={...u},n(r[c]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function jx(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:a={},transitions:c={},typography:u={},shape:d,...f}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Nl(20));const g=B1(a),y=U1(t);let x=Ti(y,{mixins:Zq(y.breakpoints,r),palette:g,shadows:sG.slice(),typography:tG(g,u),transitions:cG(c),zIndex:{...uG}});return x=Ti(x,f),x=e.reduce((w,S)=>Ti(w,S),x),x.unstable_sxConfig={...ph,...f==null?void 0:f.unstable_sxConfig},x.unstable_sx=function(S){return Cl({sx:S,theme:this})},x.toRuntimeSource=kA,x}function hG(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const fG=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=hG(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function SA(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function TA(t){return t==="dark"?fG:[]}function mG(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,a=B1(e);return{palette:a,opacity:{...SA(a.mode),...n},overlays:r||TA(a.mode),...i}}function pG(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const gG=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],yG=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let a=i;if(i==="class"&&(a=".%s"),i==="data"&&(a="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(a=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const c={};return gG(t.cssVarPrefix).forEach(u=>{c[u]=n[u],delete n[u]}),a==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:c}}:a?{[a.replace("%s",e)]:c,[`${r}, ${a.replace("%s",e)}`]:n}:{[r]:{...n,...c}}}if(a&&a!=="media")return`${r}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(a)return a.replace("%s",String(e))}return r};function xG(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function ve(t,e,n){!t[e]&&n&&(t[e]=n)}function id(t){return typeof t!="string"||!t.startsWith("hsl")?t:Yj(t)}function ha(t,e){`${e}Channel`in t||(t[`${e}Channel`]=rd(id(t[e])))}function vG(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Ss=t=>{try{return t()}catch{}},bG=(t="mui")=>Fq(t);function uy(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=mG({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:a,...c}=jx({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:a,opacity:{...SA(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||TA(i)},c}function wG(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:c=pG,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:d=":root",...f}=t,g=Object.keys(n)[0],y=r||(n.light&&g!=="light"?"light":g),x=bG(a),{[y]:w,light:S,dark:b,...N}=n,j={...N};let O=w;if((y==="dark"&&!("dark"in n)||y==="light"&&!("light"in n))&&(O=!0),!O)throw new Error(Nl(21,y));const I=uy(j,O,f,y);S&&!j.light&&uy(j,S,void 0,"light"),b&&!j.dark&&uy(j,b,void 0,"dark");let V={defaultColorScheme:y,...I,cssVarPrefix:a,colorSchemeSelector:u,rootSelector:d,getCssVar:x,colorSchemes:j,font:{...Jq(I.typography),...I.font},spacing:vG(f.spacing)};Object.keys(V.colorSchemes).forEach(P=>{const T=V.colorSchemes[P].palette,L=U=>{const A=U.split("-"),oe=A[1],ae=A[2];return x(U,T[oe][ae])};if(T.mode==="light"&&(ve(T.common,"background","#fff"),ve(T.common,"onBackground","#000")),T.mode==="dark"&&(ve(T.common,"background","#000"),ve(T.common,"onBackground","#fff")),xG(T,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),T.mode==="light"){ve(T.Alert,"errorColor",on(T.error.light,.6)),ve(T.Alert,"infoColor",on(T.info.light,.6)),ve(T.Alert,"successColor",on(T.success.light,.6)),ve(T.Alert,"warningColor",on(T.warning.light,.6)),ve(T.Alert,"errorFilledBg",L("palette-error-main")),ve(T.Alert,"infoFilledBg",L("palette-info-main")),ve(T.Alert,"successFilledBg",L("palette-success-main")),ve(T.Alert,"warningFilledBg",L("palette-warning-main")),ve(T.Alert,"errorFilledColor",Ss(()=>T.getContrastText(T.error.main))),ve(T.Alert,"infoFilledColor",Ss(()=>T.getContrastText(T.info.main))),ve(T.Alert,"successFilledColor",Ss(()=>T.getContrastText(T.success.main))),ve(T.Alert,"warningFilledColor",Ss(()=>T.getContrastText(T.warning.main))),ve(T.Alert,"errorStandardBg",ln(T.error.light,.9)),ve(T.Alert,"infoStandardBg",ln(T.info.light,.9)),ve(T.Alert,"successStandardBg",ln(T.success.light,.9)),ve(T.Alert,"warningStandardBg",ln(T.warning.light,.9)),ve(T.Alert,"errorIconColor",L("palette-error-main")),ve(T.Alert,"infoIconColor",L("palette-info-main")),ve(T.Alert,"successIconColor",L("palette-success-main")),ve(T.Alert,"warningIconColor",L("palette-warning-main")),ve(T.AppBar,"defaultBg",L("palette-grey-100")),ve(T.Avatar,"defaultBg",L("palette-grey-400")),ve(T.Button,"inheritContainedBg",L("palette-grey-300")),ve(T.Button,"inheritContainedHoverBg",L("palette-grey-A100")),ve(T.Chip,"defaultBorder",L("palette-grey-400")),ve(T.Chip,"defaultAvatarColor",L("palette-grey-700")),ve(T.Chip,"defaultIconColor",L("palette-grey-700")),ve(T.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ve(T.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ve(T.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ve(T.LinearProgress,"primaryBg",ln(T.primary.main,.62)),ve(T.LinearProgress,"secondaryBg",ln(T.secondary.main,.62)),ve(T.LinearProgress,"errorBg",ln(T.error.main,.62)),ve(T.LinearProgress,"infoBg",ln(T.info.main,.62)),ve(T.LinearProgress,"successBg",ln(T.success.main,.62)),ve(T.LinearProgress,"warningBg",ln(T.warning.main,.62)),ve(T.Skeleton,"bg",`rgba(${L("palette-text-primaryChannel")} / 0.11)`),ve(T.Slider,"primaryTrack",ln(T.primary.main,.62)),ve(T.Slider,"secondaryTrack",ln(T.secondary.main,.62)),ve(T.Slider,"errorTrack",ln(T.error.main,.62)),ve(T.Slider,"infoTrack",ln(T.info.main,.62)),ve(T.Slider,"successTrack",ln(T.success.main,.62)),ve(T.Slider,"warningTrack",ln(T.warning.main,.62));const U=Vf(T.background.default,.8);ve(T.SnackbarContent,"bg",U),ve(T.SnackbarContent,"color",Ss(()=>T.getContrastText(U))),ve(T.SpeedDialAction,"fabHoverBg",Vf(T.background.paper,.15)),ve(T.StepConnector,"border",L("palette-grey-400")),ve(T.StepContent,"border",L("palette-grey-400")),ve(T.Switch,"defaultColor",L("palette-common-white")),ve(T.Switch,"defaultDisabledColor",L("palette-grey-100")),ve(T.Switch,"primaryDisabledColor",ln(T.primary.main,.62)),ve(T.Switch,"secondaryDisabledColor",ln(T.secondary.main,.62)),ve(T.Switch,"errorDisabledColor",ln(T.error.main,.62)),ve(T.Switch,"infoDisabledColor",ln(T.info.main,.62)),ve(T.Switch,"successDisabledColor",ln(T.success.main,.62)),ve(T.Switch,"warningDisabledColor",ln(T.warning.main,.62)),ve(T.TableCell,"border",ln(Lf(T.divider,1),.88)),ve(T.Tooltip,"bg",Lf(T.grey[700],.92))}if(T.mode==="dark"){ve(T.Alert,"errorColor",ln(T.error.light,.6)),ve(T.Alert,"infoColor",ln(T.info.light,.6)),ve(T.Alert,"successColor",ln(T.success.light,.6)),ve(T.Alert,"warningColor",ln(T.warning.light,.6)),ve(T.Alert,"errorFilledBg",L("palette-error-dark")),ve(T.Alert,"infoFilledBg",L("palette-info-dark")),ve(T.Alert,"successFilledBg",L("palette-success-dark")),ve(T.Alert,"warningFilledBg",L("palette-warning-dark")),ve(T.Alert,"errorFilledColor",Ss(()=>T.getContrastText(T.error.dark))),ve(T.Alert,"infoFilledColor",Ss(()=>T.getContrastText(T.info.dark))),ve(T.Alert,"successFilledColor",Ss(()=>T.getContrastText(T.success.dark))),ve(T.Alert,"warningFilledColor",Ss(()=>T.getContrastText(T.warning.dark))),ve(T.Alert,"errorStandardBg",on(T.error.light,.9)),ve(T.Alert,"infoStandardBg",on(T.info.light,.9)),ve(T.Alert,"successStandardBg",on(T.success.light,.9)),ve(T.Alert,"warningStandardBg",on(T.warning.light,.9)),ve(T.Alert,"errorIconColor",L("palette-error-main")),ve(T.Alert,"infoIconColor",L("palette-info-main")),ve(T.Alert,"successIconColor",L("palette-success-main")),ve(T.Alert,"warningIconColor",L("palette-warning-main")),ve(T.AppBar,"defaultBg",L("palette-grey-900")),ve(T.AppBar,"darkBg",L("palette-background-paper")),ve(T.AppBar,"darkColor",L("palette-text-primary")),ve(T.Avatar,"defaultBg",L("palette-grey-600")),ve(T.Button,"inheritContainedBg",L("palette-grey-800")),ve(T.Button,"inheritContainedHoverBg",L("palette-grey-700")),ve(T.Chip,"defaultBorder",L("palette-grey-700")),ve(T.Chip,"defaultAvatarColor",L("palette-grey-300")),ve(T.Chip,"defaultIconColor",L("palette-grey-300")),ve(T.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ve(T.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ve(T.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ve(T.LinearProgress,"primaryBg",on(T.primary.main,.5)),ve(T.LinearProgress,"secondaryBg",on(T.secondary.main,.5)),ve(T.LinearProgress,"errorBg",on(T.error.main,.5)),ve(T.LinearProgress,"infoBg",on(T.info.main,.5)),ve(T.LinearProgress,"successBg",on(T.success.main,.5)),ve(T.LinearProgress,"warningBg",on(T.warning.main,.5)),ve(T.Skeleton,"bg",`rgba(${L("palette-text-primaryChannel")} / 0.13)`),ve(T.Slider,"primaryTrack",on(T.primary.main,.5)),ve(T.Slider,"secondaryTrack",on(T.secondary.main,.5)),ve(T.Slider,"errorTrack",on(T.error.main,.5)),ve(T.Slider,"infoTrack",on(T.info.main,.5)),ve(T.Slider,"successTrack",on(T.success.main,.5)),ve(T.Slider,"warningTrack",on(T.warning.main,.5));const U=Vf(T.background.default,.98);ve(T.SnackbarContent,"bg",U),ve(T.SnackbarContent,"color",Ss(()=>T.getContrastText(U))),ve(T.SpeedDialAction,"fabHoverBg",Vf(T.background.paper,.15)),ve(T.StepConnector,"border",L("palette-grey-600")),ve(T.StepContent,"border",L("palette-grey-600")),ve(T.Switch,"defaultColor",L("palette-grey-300")),ve(T.Switch,"defaultDisabledColor",L("palette-grey-600")),ve(T.Switch,"primaryDisabledColor",on(T.primary.main,.55)),ve(T.Switch,"secondaryDisabledColor",on(T.secondary.main,.55)),ve(T.Switch,"errorDisabledColor",on(T.error.main,.55)),ve(T.Switch,"infoDisabledColor",on(T.info.main,.55)),ve(T.Switch,"successDisabledColor",on(T.success.main,.55)),ve(T.Switch,"warningDisabledColor",on(T.warning.main,.55)),ve(T.TableCell,"border",on(Lf(T.divider,1),.68)),ve(T.Tooltip,"bg",Lf(T.grey[700],.92))}ha(T.background,"default"),ha(T.background,"paper"),ha(T.common,"background"),ha(T.common,"onBackground"),ha(T,"divider"),Object.keys(T).forEach(U=>{const A=T[U];U!=="tonalOffset"&&A&&typeof A=="object"&&(A.main&&ve(T[U],"mainChannel",rd(id(A.main))),A.light&&ve(T[U],"lightChannel",rd(id(A.light))),A.dark&&ve(T[U],"darkChannel",rd(id(A.dark))),A.contrastText&&ve(T[U],"contrastTextChannel",rd(id(A.contrastText))),U==="text"&&(ha(T[U],"primary"),ha(T[U],"secondary")),U==="action"&&(A.active&&ha(T[U],"active"),A.selected&&ha(T[U],"selected")))})}),V=e.reduce((P,T)=>Ti(P,T),V);const $={prefix:a,disableCssColorScheme:i,shouldSkipGeneratingVar:c,getSelector:yG(V)},{vars:q,generateThemeVars:D,generateStyleSheets:R}=zq(V,$);return V.vars=q,Object.entries(V.colorSchemes[V.defaultColorScheme]).forEach(([P,T])=>{V[P]=T}),V.generateThemeVars=D,V.generateStyleSheets=R,V.generateSpacing=function(){return xA(f.spacing,D1(this))},V.getColorSchemeSelector=Bq(u),V.spacing=V.generateSpacing(),V.shouldSkipGeneratingVar=c,V.unstable_sxConfig={...ph,...f==null?void 0:f.unstable_sxConfig},V.unstable_sx=function(T){return Cl({sx:T,theme:this})},V.toRuntimeSource=kA,V}function TS(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:B1({...n===!0?{}:n.palette,mode:e})})}function NA(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:a=n==null?void 0:n.mode,...c}=t,u=a||"light",d=i==null?void 0:i[u],f={...i,...n?{[u]:{...typeof d!="boolean"&&d,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return jx(t,...e);let g=n;"palette"in t||f[u]&&(f[u]!==!0?g=f[u].palette:u==="dark"&&(g={mode:"dark"}));const y=jx({...t,palette:g},...e);return y.defaultColorScheme=u,y.colorSchemes=f,y.palette.mode==="light"&&(y.colorSchemes.light={...f.light!==!0&&f.light,palette:y.palette},TS(y,"dark",f.dark)),y.palette.mode==="dark"&&(y.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:y.palette},TS(y,"light",f.light)),y}return!n&&!("light"in f)&&u==="light"&&(f.light=!0),wG({...c,colorSchemes:f,defaultColorScheme:u,...typeof r!="boolean"&&r},...e)}const _G=NA(),CA="$$material";function H1(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const EG=t=>H1(t)&&t!=="classes",Mo=Aq({themeId:CA,defaultTheme:_G,rootShouldForwardProp:EG});function kG(){return rA}const Dl=Vq;function jA(t){return Lq(t)}const SG=t=>!t||!lm(t);function TG(t){return typeof t.main=="string"}function NG(t,e=[]){if(!TG(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Kp(t=[]){return([,e])=>e&&NG(e,t)}function CG(t){return $1("MuiSlider",t)}const Ui=z1("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),jG=t=>{const{open:e}=t;return{offset:$s(e&&Ui.valueLabelOpen),circle:Ui.valueLabelCircle,label:Ui.valueLabelLabel}};function AG(t){const{children:e,className:n,value:r}=t,i=jG(t);return e?k.cloneElement(e,{className:e.props.className},o.jsxs(k.Fragment,{children:[e.props.children,o.jsx("span",{className:$s(i.offset,n),"aria-hidden":!0,children:o.jsx("span",{className:i.circle,children:o.jsx("span",{className:i.label,children:r})})})]})):null}function NS(t){return t}const IG=Mo("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Si(n.color)}`],n.size!=="medium"&&e[`size${Si(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(Dl(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Ui.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ui.dragging}`]:{[`& .${Ui.thumb}, & .${Ui.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(Kp()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),PG=Mo("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),RG=Mo("span",{name:"MuiSlider",slot:"Track"})(Dl(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(Kp()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:zd(t.palette[e].main,.62),borderColor:zd(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:$d(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:$d(t.palette[e].main,.5)})}}}))]}))),MG=Mo("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Si(n.color)}`],n.size!=="medium"&&e[`thumbSize${Si(n.size)}`]]}})(Dl(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Ui.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(Kp()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Ui.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Ex(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Ui.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Ex(t.palette[e].main,.16)}`}}}}))]}))),DG=Mo(AG,{name:"MuiSlider",slot:"ValueLabel"})(Dl(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Ui.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Ui.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),OG=Mo("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>H1(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(Dl(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),LG=Mo("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>H1(t)&&t!=="markLabelActive"})(Dl(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),VG=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:a,classes:c,color:u,size:d}=t,f={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",a==="inverted"&&"trackInverted",a===!1&&"trackFalse",u&&`color${Si(u)}`,d&&`size${Si(d)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",d&&`thumbSize${Si(d)}`,u&&`thumbColor${Si(u)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Xj(f,CG,c)},FG=({children:t})=>t,AA=k.forwardRef(function(e,n){const r=jA({props:e,name:"MuiSlider"}),i=fH(),{"aria-label":a,"aria-valuetext":c,"aria-labelledby":u,component:d="span",components:f={},componentsProps:g={},color:y="primary",classes:x,className:w,disableSwap:S=!1,disabled:b=!1,getAriaLabel:N,getAriaValueText:j,marks:O=!1,max:I=100,min:V=0,name:$,onChange:q,onChangeCommitted:D,orientation:R="horizontal",shiftStep:P=10,size:T="medium",step:L=1,scale:U=NS,slotProps:A,slots:oe,tabIndex:ae,track:Ce="normal",value:Pe,valueLabelDisplay:ee="off",valueLabelFormat:ie=NS,...ye}=r,B={...r,isRtl:i,max:I,min:V,classes:x,disabled:b,disableSwap:S,orientation:R,marks:O,color:y,size:T,step:L,shiftStep:P,scale:U,track:Ce,valueLabelDisplay:ee,valueLabelFormat:ie},{axisProps:Z,getRootProps:be,getHiddenInputProps:Ve,getThumbProps:We,open:et,active:ht,axis:Xe,focusedThumbIndex:nt,range:St,dragging:xt,marks:Tt,values:Ze,trackOffset:Rt,trackLeap:At,getThumbStyle:pn}=NH({...B,rootRef:n});B.marked=Tt.length>0&&Tt.some(xe=>xe.label),B.dragging=xt,B.focusedThumbIndex=nt;const J=VG(B),He=(oe==null?void 0:oe.root)??f.Root??IG,De=(oe==null?void 0:oe.rail)??f.Rail??PG,st=(oe==null?void 0:oe.track)??f.Track??RG,wt=(oe==null?void 0:oe.thumb)??f.Thumb??MG,Qe=(oe==null?void 0:oe.valueLabel)??f.ValueLabel??DG,dt=(oe==null?void 0:oe.mark)??f.Mark??OG,W=(oe==null?void 0:oe.markLabel)??f.MarkLabel??LG,X=(oe==null?void 0:oe.input)??f.Input??"input",me=(A==null?void 0:A.root)??g.root,je=(A==null?void 0:A.rail)??g.rail,te=(A==null?void 0:A.track)??g.track,ke=(A==null?void 0:A.thumb)??g.thumb,Se=(A==null?void 0:A.valueLabel)??g.valueLabel,vt=(A==null?void 0:A.mark)??g.mark,jt=(A==null?void 0:A.markLabel)??g.markLabel,ct=(A==null?void 0:A.input)??g.input,Ot=eo({elementType:He,getSlotProps:be,externalSlotProps:me,externalForwardedProps:ye,additionalProps:{...SG(He)&&{as:d}},ownerState:{...B,...me==null?void 0:me.ownerState},className:[J.root,w]}),H=eo({elementType:De,externalSlotProps:je,ownerState:B,className:J.rail}),G=eo({elementType:st,externalSlotProps:te,additionalProps:{style:{...Z[Xe].offset(Rt),...Z[Xe].leap(At)}},ownerState:{...B,...te==null?void 0:te.ownerState},className:J.track}),pe=eo({elementType:wt,getSlotProps:We,externalSlotProps:ke,ownerState:{...B,...ke==null?void 0:ke.ownerState},className:J.thumb}),ce=eo({elementType:Qe,externalSlotProps:Se,ownerState:{...B,...Se==null?void 0:Se.ownerState},className:J.valueLabel}),he=eo({elementType:dt,externalSlotProps:vt,ownerState:B,className:J.mark}),Fe=eo({elementType:W,externalSlotProps:jt,ownerState:B,className:J.markLabel}),Te=eo({elementType:X,getSlotProps:Ve,externalSlotProps:ct,ownerState:B});return o.jsxs(He,{...Ot,children:[o.jsx(De,{...H}),o.jsx(st,{...G}),Tt.filter(xe=>xe.value>=V&&xe.value<=I).map((xe,se)=>{const Le=Qm(xe.value,V,I),Me=Z[Xe].offset(Le);let ue;return Ce===!1?ue=Ze.includes(xe.value):ue=Ce==="normal"&&(St?xe.value>=Ze[0]&&xe.value<=Ze[Ze.length-1]:xe.value<=Ze[0])||Ce==="inverted"&&(St?xe.value<=Ze[0]||xe.value>=Ze[Ze.length-1]:xe.value>=Ze[0]),o.jsxs(k.Fragment,{children:[o.jsx(dt,{"data-index":se,...he,...!lm(dt)&&{markActive:ue},style:{...Me,...he.style},className:$s(he.className,ue&&J.markActive)}),xe.label!=null?o.jsx(W,{"aria-hidden":!0,"data-index":se,...Fe,...!lm(W)&&{markLabelActive:ue},style:{...Me,...Fe.style},className:$s(J.markLabel,Fe.className,ue&&J.markLabelActive),children:xe.label}):null]},se)}),Ze.map((xe,se)=>{const Le=Qm(xe,V,I),Me=Z[Xe].offset(Le),ue=ee==="off"?FG:Qe;return o.jsx(ue,{...!lm(ue)&&{valueLabelFormat:ie,valueLabelDisplay:ee,value:typeof ie=="function"?ie(U(xe),se):ie,index:se,open:et===se||ht===se||ee==="on",disabled:b},...ce,children:o.jsx(wt,{"data-index":se,...pe,className:$s(J.thumb,pe.className,ht===se&&J.active,nt===se&&J.focusVisible),style:{...Me,...pn(se),...pe.style},children:o.jsx(X,{"data-index":se,"aria-label":N?N(se):a,"aria-valuenow":U(xe),"aria-labelledby":u,"aria-valuetext":j?j(U(xe),se):c,value:Ze[se],...Te})})},se)})]})});function UG(t){return $1("MuiTypography",t)}z1("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const $G={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},zG=kG(),BG=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:a,classes:c}=t,u={root:["root",a,t.align!=="inherit"&&`align${Si(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Xj(u,UG,c)},HG=Mo("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Si(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Dl(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(Kp()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Si(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),CS={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},IA=k.forwardRef(function(e,n){const{color:r,...i}=jA({props:e,name:"MuiTypography"}),a=!$G[r],c=zG({...i,...a&&{color:r}}),{align:u="inherit",className:d,component:f,gutterBottom:g=!1,noWrap:y=!1,paragraph:x=!1,variant:w="body1",variantMapping:S=CS,...b}=c,N={...c,align:u,color:r,className:d,component:f,gutterBottom:g,noWrap:y,paragraph:x,variant:w,variantMapping:S},j=f||(x?"p":S[w]||CS[w])||"span",O=BG(N);return o.jsx(HG,{as:j,ref:n,className:$s(O.root,d),...b,ownerState:N,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...b.style}})}),WG=z1("MuiBox",["root"]),qG=NA(),PA=Sq({themeId:CA,defaultTheme:qG,defaultClassName:WG.root,generateClassName:vA.generate}),GG={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.3)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 6px rgba(60, 80, 120, 0.5)"}},KG={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.6)","0 0 10px rgba(80, 100, 140, 0.9)","0 0 4px rgba(80, 100, 140, 0.6)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function RA({filtros:t,setFiltros:e,productosOriginales:n}){const[r,i]=k.useState([]);k.useEffect(()=>{let u=n;(t.estado.nuevo||t.estado.usado)&&(u=u.filter(g=>t.estado.nuevo&&t.estado.usado?!0:t.estado.nuevo?g.estado==="Nuevo":t.estado.usado?g.estado==="Usado":!0));const d=t.precio.min!==""?Number(t.precio.min):0,f=t.precio.max!==""?Number(t.precio.max):1/0;u=u.filter(g=>g.precio>=d&&g.precio<=f),i(u)},[t,n]);const a=(u,d)=>{e(f=>({...f,precio:{min:d[0],max:d[1]}}))},c=()=>{e({estado:{nuevo:!1,usado:!1},precio:{min:0,max:1e3}})};return o.jsxs("aside",{className:"hidden xl:block w-56 max-w-[240px] relative z-40",style:{height:"100vh",paddingTop:0,overflow:"hidden",backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Filtros",children:[o.jsx(Gj,{}),o.jsxs("div",{style:{position:"relative",zIndex:1,height:"100%",overflowY:"auto",padding:"1rem",backgroundColor:"transparent",border:"none",boxShadow:"none"},children:[o.jsx(de.h2,{className:"text-lg font-semibold mb-4 text-blue-800 dark:text-blue-400",variants:KG,animate:"animate",children:"Filtros"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-medium mb-2 text-gray-800 dark:text-gray-200",children:"Estado"}),o.jsxs("label",{className:"switch-container",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:t.estado.nuevo,onChange:()=>e(u=>({...u,estado:{...u.estado,nuevo:!u.estado.nuevo}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2",children:"Nuevo"})]}),o.jsxs("label",{className:"switch-container mt-2",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:t.estado.usado,onChange:()=>e(u=>({...u,estado:{...u.estado,usado:!u.estado.usado}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2",children:"Usado"})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx(IA,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),o.jsx(PA,{sx:{px:1,"& .MuiSlider-thumb":{width:14,height:14,bgcolor:"#1976d2",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 8px rgba(25, 118, 210, 0.16)"}},"& .MuiSlider-rail":{height:6,opacity:.5,bgcolor:"#bfbfbf",borderRadius:3},"& .MuiSlider-track":{height:6,borderRadius:3},"& .MuiSlider-root":{padding:"15px 0"}},children:o.jsx(AA,{value:[typeof t.precio.min=="number"?t.precio.min:0,typeof t.precio.max=="number"?t.precio.max:1e3],onChange:a,valueLabelDisplay:"auto",min:0,max:1e3})}),o.jsxs("div",{className:"flex justify-between text-sm mt-2 text-gray-700 dark:text-gray-300",children:[o.jsxs("span",{children:["RD$",t.precio.min]}),o.jsxs("span",{children:["RD$",t.precio.max]})]})]}),o.jsx(de.button,{onClick:c,variants:GG,initial:"initial",whileHover:"hover",whileTap:"tap",className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white text-sm px-3 py-2 rounded w-full",children:"Restablecer filtros"}),o.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:r.length===0?"No hay productos que coincidan con los filtros.":`Mostrando ${r.length} producto${r.length>1?"s":""}`})]})]})}function MA({filtros:t,setFiltros:e,onReset:n,visible:r,onClose:i}){var y,x;const[a,c]=k.useState(t);k.useEffect(()=>{var S,b;const w={...t,precio:{min:((S=t.precio)==null?void 0:S.min)??0,max:((b=t.precio)==null?void 0:b.max)??1e3}};c(w)},[t,r]);const u=(w,S)=>{c(b=>({...b,precio:{min:S[0],max:S[1]}}))},d=Number.isFinite((y=a.precio)==null?void 0:y.min)?a.precio.min:0,f=Number.isFinite((x=a.precio)==null?void 0:x.max)?a.precio.max:1e4,g=[d,f];return o.jsxs("div",{className:`fixed top-0 right-0 h-full w-72 bg-white dark:bg-slate-900 border-l border-gray-300 dark:border-gray-700 shadow-lg z-[9999] transform transition-transform duration-300 ${r?"translate-x-0":"translate-x-full"}`,children:[o.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:"Filtros"}),o.jsx("button",{onClick:i,className:"text-blue-600 dark:text-blue-400 font-extrabold text-xl hover:text-blue-800 dark:hover:text-blue-300 transition-colors","aria-label":"Cerrar filtro",children:"✕"})]}),o.jsxs("div",{className:"p-4 pt-6 flex flex-col gap-6 overflow-y-auto text-gray-900 dark:text-gray-100",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-3 text-blue-700 dark:text-blue-300",children:"Estado"}),o.jsxs("label",{className:"switch-container mb-2",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:a.estado.nuevo,onChange:()=>c(w=>({...w,estado:{...w.estado,nuevo:!w.estado.nuevo}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Nuevo"})]}),o.jsxs("label",{className:"switch-container",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:a.estado.usado,onChange:()=>c(w=>({...w,estado:{...w.estado,usado:!w.estado.usado}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Usado"})]})]}),o.jsxs("div",{children:[o.jsx(IA,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),o.jsx(PA,{sx:{px:1,"& .MuiSlider-thumb":{width:16,height:16,bgcolor:"#1d4ed8",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 10px rgba(29, 78, 216, 0.2)"}},"& .MuiSlider-rail":{height:8,opacity:.3,bgcolor:"#cbd5e1",borderRadius:4},"& .MuiSlider-track":{height:8,borderRadius:4,bgcolor:"#1d4ed8"},"& .MuiSlider-root":{padding:"20px 0"}},children:o.jsx(AA,{value:g,onChange:u,valueLabelDisplay:"auto",min:0,max:1e4})}),o.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 mt-1 font-semibold",children:[o.jsxs("span",{children:["RD$",g[0]]}),o.jsxs("span",{children:["RD$",g[1]]})]})]})]}),o.jsxs("div",{className:"flex justify-between gap-3 border-t border-gray-300 dark:border-gray-700 p-4 mt-4",children:[o.jsx("button",{onClick:()=>{n(),i()},className:"w-1/2 bg-blue-100 hover:bg-blue-200 text-blue-800 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-blue-300 font-semibold text-sm py-2 rounded transition-colors",children:"Restablecer"}),o.jsx("button",{onClick:()=>{e(a),i()},className:"w-1/2 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 rounded transition-colors",children:"Aplicar filtros"})]})]})}function DA({onClick:t}){return o.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-900 dark:bg-slate-800 dark:text-blue-300 rounded-full text-sm font-medium hover:bg-gray-300 dark:hover:bg-slate-700 transition-colors",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Filtros"]})}const oo=t=>t?t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",XG=(t,e)=>{if(!e)return!0;const n=oo(e),r=n.split(" ").filter(Boolean),i=oo(t.nombre||""),a=oo(t.descripcion||""),c=oo(t.categoria||""),u=oo(t.empresa||t.marca||"");if(i===n||i.startsWith(n)||i.includes(n)||u.includes(n)||c.includes(n)||a.includes(n))return!0;let d=0;return r.forEach(f=>{i.includes(f)&&d++,u.includes(f)&&d++,c.includes(f)&&d++,a.includes(f)&&d++}),d>0};function YG(){const t=ls(),{products:e,loading:n}=FC(),[r,i]=k.useState({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),[a,c]=k.useState(!1),[u,d]=k.useState(!1),[f,g]=k.useState(0);k.useEffect(()=>{function I(){const $=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),q=$?Math.ceil($.getBoundingClientRect().height):0;g(q),document.documentElement.style.setProperty("--topbar-height",`${q}px`)}I(),window.addEventListener("resize",I);const V=new MutationObserver(I);return V.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",I),V.disconnect()}},[]);const x=new URLSearchParams(t.search).get("q")||"";oo(x);const w=x.includes(" en ");let S=x,b=null;if(w){const I=x.split(" en ");S=I[0].trim(),b=I[1].trim()}const N=k.useMemo(()=>(e||[]).filter(I=>{const V=XG(I,S);if(b){const $=oo(I.categoria||""),q=oo(b);return V&&$===q}return V}),[e,S,b]),j=k.useMemo(()=>N.filter(I=>{const V=I.precio>=r.precio.min,$=I.precio<=r.precio.max,q=!r.estado.nuevo&&!r.estado.usado||r.estado.nuevo&&I.estado==="Nuevo"||r.estado.usado&&I.estado==="Usado";return V&&$&&q}),[N,r]),O=()=>{i({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}})};return o.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"var(--content-offset, 100px)",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[o.jsxs("div",{className:"flex-1 flex flex-col xl:grid xl:grid-cols-[auto_1fr_auto] w-full",style:{margin:0},children:[o.jsx(Ym,{categoriaActiva:null,setMostrarEnMovil:d,className:"bg-transparent border-none shadow-none xl:row-span-2"}),o.jsxs("main",{className:"flex-1 p-0 xl:p-4 relative pb-32",children:[o.jsxs("div",{className:"flex justify-between items-center px-3 py-2 xl:hidden bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 sticky transition-colors duration-300",style:{top:"var(--content-offset, 100px)",zIndex:40,marginTop:0,paddingTop:0},children:[o.jsx("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium transition-colors duration-300",children:"📂 Categorías"}),o.jsx(DA,{onClick:()=>c(!0)})]}),o.jsxs("div",{className:"mb-6 mt-4 px-4 xl:px-0",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl xl:text-5xl font-extrabold text-gray-900 dark:text-gray-100 mb-3 tracking-tight leading-tight",children:"Resultados de búsqueda"}),x&&o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:["Buscaste:"," ",o.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-400",children:S})]}),b&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:["📂 ",b]})]}),j.length>0&&o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[j.length," ",j.length===1?"producto encontrado":"productos encontrados"]})]}),n?null:j.length===0?o.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:["No se encontraron productos relacionados con"," ",o.jsx("span",{className:"font-bold",children:x}),"."]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-3 lg:gap-4 px-4 xl:px-0",children:j.map(I=>o.jsx(qj,{producto:I},I.id))})]}),o.jsx(RA,{filtros:r,setFiltros:i,productosOriginales:N,className:"bg-transparent border-none shadow-none xl:row-span-2"})]}),u&&o.jsx(Ym,{categoriaActiva:null,mostrarEnMovil:u,setMostrarEnMovil:d,className:"bg-transparent border-none shadow-none"}),o.jsx("div",{className:"xl:hidden",children:o.jsx(MA,{filtros:r,setFiltros:i,visible:a,onClose:()=>c(!1),onReset:O})})]})}function jS(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")}function AS(){const{categoria:t}=US(),e=Qr(),{categories:n,loading:r}=Wv(),i=t&&t!=="todos"?t:"",{products:a,loading:c}=UC(i),[u,d]=k.useState({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),[f,g]=k.useState({norm:"",display:""}),[y,x]=k.useState(!1),[w,S]=k.useState(!1),[b,N]=k.useState("Todos"),[j,O]=k.useState(0);k.useEffect(()=>{function P(){const L=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),U=L?Math.ceil(L.getBoundingClientRect().height):0;O(U),document.documentElement.style.setProperty("--topbar-height",`${U}px`)}P(),window.addEventListener("resize",P);const T=new MutationObserver(P);return T.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",P),T.disconnect()}},[]),k.useEffect(()=>{if(!t||t==="todos")N("Todos");else{const P=n.find(T=>jS(T.ruta)===jS(t));N(P?P.nombre:"Todos")}},[t,n]);const I=k.useMemo(()=>b==="Todos"?a:a.filter(P=>P==null?void 0:P.id),[a,b]),V=k.useMemo(()=>(I||[]).filter(P=>{const T=P.precio>=u.precio.min,L=P.precio<=u.precio.max,U=!u.estado.nuevo&&!u.estado.usado||u.estado.nuevo&&P.estado==="Nuevo"||u.estado.usado&&P.estado==="Usado",A=P.empresaNorm||(P.empresa||"").toString().trim().toLowerCase(),oe=!f.norm||A===f.norm;return T&&L&&U&&oe}),[I,u,f]),$=(P,T)=>{e(`/productos/${T}`),x(!1),S(!1),g({norm:"",display:""})},q=()=>{d({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),g({norm:"",display:""})},D=[{nombre:"PlayStation",norm:"playstation",imagen:"/logos/PlayStation_logo.svg.png"},{nombre:"Xbox",norm:"xbox",imagen:"/logos/xbox-logo.png"},{nombre:"Nintendo",norm:"nintendo",imagen:"/logos/nintendo-logo.png"}],R=r||c;return o.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"var(--content-offset, 100px)",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[o.jsxs("div",{className:"flex-1 flex flex-col xl:grid xl:grid-cols-[auto_1fr_auto] w-full",style:{margin:0},children:[o.jsx(Ym,{categoriaActiva:b,onCategoriaClick:$,className:"bg-transparent border-none shadow-none xl:row-span-2"}),o.jsxs("main",{className:"flex-1 p-0 xl:p-4 relative pb-32",children:[o.jsxs("div",{className:"flex justify-between items-center px-3 py-2 xl:hidden bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 sticky transition-colors duration-300",style:{top:"var(--content-offset, 100px)",zIndex:40,marginTop:0,paddingTop:0},children:[o.jsx("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium transition-colors duration-300",children:"📂 Categorías"}),o.jsx(DA,{onClick:()=>x(!0)})]}),o.jsxs("div",{className:"mb-6 mt-4 px-4 xl:px-0",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl xl:text-5xl font-extrabold text-gray-900 dark:text-gray-100 mb-3 tracking-tight leading-tight",children:b==="Todos"?"Todos los productos":b}),b!=="Todos"&&o.jsxs("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:["Encuentra lo mejor en"," ",o.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-400",children:b})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 px-4 xl:px-0 mb-6 justify-center sm:justify-start",children:[D.map(P=>{const T=f.norm===P.norm;return o.jsxs("button",{onClick:()=>g({norm:P.norm,display:P.nombre}),className:`group relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white dark:bg-gray-800 border-4 flex items-center justify-center shadow-xl hover:scale-110 transition-all duration-300 ${T?"border-blue-700 ring-4 ring-offset-2 ring-blue-500 animate-spin-slow":"border-gray-300 hover:border-blue-400"}`,title:P.nombre,children:[o.jsx("img",{src:P.imagen,alt:P.nombre,className:"w-8 h-8 sm:w-10 sm:h-10 object-contain z-10"}),T&&o.jsx("span",{className:"absolute inset-0 rounded-full border-4 border-blue-500 animate-pulse z-0"})]},P.norm)}),o.jsx("button",{onClick:()=>g({norm:"",display:""}),className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 flex items-center justify-center text-lg sm:text-xl font-bold bg-gradient-to-br from-red-100 to-red-300 text-red-700 border-red-600 shadow-lg hover:scale-110 transition-all duration-300",title:"Quitar filtro",children:"❌"})]}),R?null:V.length===0?o.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:"No hay productos que coincidan con tus filtros."}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-3 lg:gap-4 px-4 xl:px-0",children:V.map(P=>o.jsx(qj,{producto:P},P.id))})]}),o.jsx(RA,{filtros:u,setFiltros:d,productosOriginales:I,className:"bg-transparent border-none shadow-none xl:row-span-2"})]}),w&&o.jsx(Ym,{categoriaActiva:b,onCategoriaClick:$,mostrarEnMovil:w,setMostrarEnMovil:S,className:"bg-transparent border-none shadow-none"}),o.jsx("div",{className:"xl:hidden",children:o.jsx(MA,{filtros:u,setFiltros:d,visible:y,onClose:()=>x(!1),onReset:q})})]})}const QG=[{id:0,nombre:"Estafeta Principal (Oficina)",descripcion:"Playcenter Universal",direccion:"Av Estrella Sadhala Nº 55, Frente a la doble vía, Santiago",telefono:"809-582-1212",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'13.2%22N+70%C2%B041'23.3%22W/@19.436998,-70.689812,17z/data=!4m4!3m3!8m2!3d19.437!4d-70.6898056",imagen:"/estafetas/oficina.png"},{id:1,nombre:"Estafeta Villa-Olímpica",descripcion:"Minimarket Los Hermanos",direccion:"Calle Penetración Nº 1, Suburbanización Mare López, La villa-Olímpica, Próximo a la calle 1",telefono:"809-626-3262",ubicacionLink:"https://www.google.com/maps/place/19%C2%B025'43.1%22N+70%C2%B041'12.7%22W/@19.4286338,-70.6894342,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.4286338!4d-70.6868593?hl=es&entry=ttu",imagen:"/estafetas/loshermanos.png"},{id:2,nombre:"Estafeta Nibaje",descripcion:"Cafetería Guido",direccion:"Avenida Franco Vido, Nº 148, Nibaje",telefono:"829-324-2318",ubicacionLink:"https://www.google.com/maps/place//@19.420887,-70.6811611,3857m/data=!3m2!1e3!4b1?entry=ttu",imagen:"/estafetas/cafeteria-guido.png"},{id:3,nombre:"Estafeta El Ensueño",descripcion:"Salón y Cafetería Marais",direccion:"Calle Paseo de los Locutores, Esquina 11, El Ensueño",telefono:"829-755-3636",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'22.4%22N+70%C2%B041'26.1%22W/@19.439565,-70.690574,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.439565!4d-70.690574?entry=ttu",imagen:"/estafetas/salon-y-cafeteria-maraez.png"},{id:4,nombre:"Estafeta La Lotería",descripcion:"Colmado Espinal",direccion:"La Lotería, calle Salcedo, Nº 10",telefono:"829-288-9168",ubicacionLink:"https://www.google.com/maps/place/19.439565,-70.690574/data=!4m6!3m5!1s0!7e2!8m2!3d19.439564999999998!4d-70.690574",imagen:"/estafetas/colmado-espinal.png"},{id:5,nombre:"Estafeta La Villa-Olímpica",descripcion:"Palmatec Solutions",direccion:"Villa-Olímpica, frente Manzana F, al lado del antiguo Colegio Génesis",telefono:"809-785-3354",ubicacionLink:"https://www.google.com/maps/place/19.435309,-70.685961/data=!4m6!3m5!1s0!7e2!8m2!3d19.435309!4d-70.68596099999999",imagen:"/estafetas/palmatech-solution.png"},{id:6,nombre:"Estafeta Ensanche Bermúdez",descripcion:"St Electronics",direccion:"Calle 11, número 27, Ensanche Bermúdez",telefono:"849-437-3100",ubicacionLink:"https://www.google.com/maps/place/Espailla,+51000+Santiago+de+los+Caballeros/@19.4717075,-70.7148707,964m/data=!3m2!1e3!4b1!4m6!3m5!1s0x8eb1c5e2c3c79d7d:0x3a75c6d5f2312708!8m2!3d19.4717075!4d-70.7148707",imagen:"/estafetas/St electronics.png"},{id:7,nombre:"Estafeta Los Guandules",descripcion:"Mini Market El Vecino",direccion:"Estafeta de pago Los Guandules, próximo al puente",telefono:"+1 829 218 1889",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'15.3%22N+70%C2%B041'22.2%22W/@19.4381999,-70.6893169,526m/data=!3m1!1e3!4m4!3m3!8m2!3d19.437576!4d-70.689512?entry=ttu",imagen:"/estafetas/losguandules.png"}],JG=[{banco:"BANRESERVAS",numero:"9600153322",tipo:"Cuenta Corriente",titular:"PLAYCENTER"},{banco:"POPULAR",numero:"0798928750",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"BHD",numero:"18673320016",tipo:"Cuenta Corriente",titular:"FRANKLYN SANTOS"},{banco:"SantaCruz",numero:"11142010011632",tipo:"Cuenta Ahorro",titular:"PLAYCENTER"},{banco:"Scotiabank",numero:"12010008845",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"ASOC. CIBAO",numero:"100090238474",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"}];function ZG(){const[t,e]=k.useState(null),n=(r,i)=>{navigator.clipboard.writeText(r),e(i),setTimeout(()=>e(null),2e3)};return o.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-10",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-center mb-2 text-gray-800 dark:text-gray-100 tracking-tight",children:"Estafetas de Pago y Métodos de Pago"}),o.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-6",children:"Puedes pagar tu factura en cualquiera de nuestros puntos autorizados o mediante transferencia bancaria."}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-gray-800 dark:to-gray-900 border border-blue-200 dark:border-gray-700 rounded-2xl p-7 mb-12 shadow-lg",children:[o.jsxs("h2",{className:"text-2xl font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2 mb-3",children:[o.jsx($8,{className:"text-blue-500 dark:text-blue-300"}),"Cuentas Bancarias para Transferencias"]}),o.jsxs("p",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:["⚠️ Incluye tu ",o.jsx("span",{className:"underline",children:"código de cliente"})," o",o.jsx("span",{className:"underline",children:" nombre completo"})," en la descripción del pago."]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-[15px]",children:["Es indispensable enviar el comprobante de pago al 809-582-1212 para poder aplicarlo.",o.jsx("br",{}),o.jsx("span",{className:"text-red-500 dark:text-red-400 font-bold",children:"Sin el comprobante no podremos procesar tu pago."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:JG.map((r,i)=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl p-5 flex flex-col shadow group hover:shadow-xl transition",children:[o.jsxs("h3",{className:"text-lg font-bold text-indigo-700 dark:text-indigo-300 flex items-center gap-2 mb-2",children:[o.jsx(W8,{className:"text-indigo-500 dark:text-indigo-300"}),r.banco]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-1 flex items-center",children:[o.jsx("span",{className:"font-semibold mr-1",children:"Número: "}),o.jsxs("span",{className:"text-gray-900 dark:text-gray-100 font-mono flex items-center",children:[r.numero,o.jsx("button",{onClick:()=>n(r.numero,i),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 ml-1",title:"Copiar número",children:t===i?o.jsx(O8,{}):o.jsx(G8,{})})]})]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Tipo: "}),r.tipo]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[o.jsx("span",{className:"font-semibold",children:"Titular: "}),r.titular]})]},i))})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:QG.map(r=>o.jsxs("div",{className:"flex flex-col md:flex-row bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700 hover:shadow-2xl transition",children:[o.jsx("div",{className:"w-full md:w-1/2 h-64 md:h-auto bg-blue-50 dark:bg-gray-700 flex items-center justify-center p-3",children:o.jsx("img",{src:r.imagen,alt:r.nombre,className:"w-full h-full object-contain rounded-xl"})}),o.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300 mb-1",children:r.nombre}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg font-medium mb-1",children:r.descripcion}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:r.direccion}),o.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-2 mb-2",children:[o.jsx(Lm,{className:"text-green-500 dark:text-green-300"}),r.telefono]})]}),o.jsxs("a",{href:r.ubicacionLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline mt-3 font-semibold flex items-center gap-2",children:[o.jsx("span",{role:"img","aria-label":"location",children:"📍"}),"Ver Ubicación"]})]})]},r.id))}),o.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mt-12 text-lg",children:"¡Agradecemos su preferencia! Estamos para servirle."})]})}function eK({children:t}){const{usuario:e}=Jr();return e?t:o.jsx(F5,{to:"/login",replace:!0})}const IS="https://playcenter-universal.onrender.com";function tK(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function nK(){const[t]=Ox(),e=Qr(),{usuario:n,usuarioInfo:r}=Jr(),{carrito:i,vaciarCarrito:a}=Kd(),[c,u]=k.useState(1),[d,f]=k.useState(0);k.useEffect(()=>{const y=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=y}},[]),k.useEffect(()=>{const y=t.get("session"),x=tK(),w=setInterval(()=>{f(j=>j>=90?j:Math.min(90,j+Math.random()*15))},200),S=setTimeout(()=>u(2),900),b=setTimeout(()=>u(3),1600),N=async()=>{var j;try{if(!y){e("/payment/cancel");return}const O=await fetch(`${IS}/cardnet/get-sk/${y}`),{sk:I}=await O.json();if(!I){e(`/payment/cancel?session=${y}`);return}const $=await(await fetch(`${IS}/cardnet/verify/${y}/${I}`)).json(),q=(j=x==null?void 0:x.items)!=null&&j.length?x.items.map(P=>({id:P.id,nombre:P.nombre,precio:Number(P.precio)||0,cantidad:P.cantidad,imagen:P.imagen||"/Productos/default.jpg",empresa:P.empresa||"N/A",subtotal:(Number(P.precio)||0)*P.cantidad})):(i||[]).map(P=>({id:P.id,nombre:P.nombre,precio:Number(P.precio)||0,cantidad:P.cantidad,imagen:P.imagen||"/Productos/default.jpg",empresa:P.empresa||"N/A",subtotal:(Number(P.precio)||0)*P.cantidad})),D=(x==null?void 0:x.total)??(i||[]).reduce((P,T)=>P+(Number(T.precio)||0)*T.cantidad,0),R={userId:(n==null?void 0:n.uid)||null,userEmail:(r==null?void 0:r.email)||(n==null?void 0:n.email)||null,userName:(r==null?void 0:r.displayName)||null,userPhone:(r==null?void 0:r.telefono)||null,productos:q,total:D,subtotal:q.reduce((P,T)=>P+T.subtotal,0),impuestos:0,envio:0,estado:($==null?void 0:$.ResponseCode)==="00"?"completado":"cancelado",estadoPago:($==null?void 0:$.ResponseCode)==="00"?"pagado":"fallido",metodoPago:"CardNet",fecha:gC(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(x==null?void 0:x.mode)||(x?"unknown":"cart"),direccionEntrega:(r==null?void 0:r.direccionCompleta)||null,telefonoContacto:(r==null?void 0:r.telefono)||null,notasEspeciales:null,raw:{...$,SESSION:y}};try{await jp(Ht(Ue,"orders"),R)}catch(P){console.error("❌ Error guardando orden:",P)}try{sessionStorage.removeItem("checkoutPayload")}catch{}f(100),u(4),setTimeout(()=>{($==null?void 0:$.ResponseCode)==="00"?(((x==null?void 0:x.mode)||"cart")==="cart"&&a(),e(`/payment/success?session=${y}`)):e(`/payment/cancel?session=${y}`)},900)}catch(O){console.error("❌ Error verificando pago:",O),e("/payment/cancel")}};if(y){const j=setTimeout(N,9e3);return()=>{clearTimeout(j),clearInterval(w),clearTimeout(S),clearTimeout(b)}}else e("/payment/cancel")},[t,e,n,r,i,a]);const g=[{id:1,icon:C1,title:"Conectando con CardNet",description:"Estableciendo conexión segura"},{id:2,icon:Wm,title:"Verificando seguridad",description:"Validando datos de pago"},{id:3,icon:Tj,title:"Procesando transacción",description:"Confirmando tu compra"},{id:4,icon:Hm,title:"¡Completado!",description:"Redirigiendo..."}];return o.jsxs(de.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((y,x)=>o.jsx(de.div,{className:"absolute w-2 h-2 bg-blue-200 dark:bg-blue-800 rounded-full opacity-30 dark:opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*12+12,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},x))}),o.jsxs(de.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 dark:from-blue-500/10 dark:to-purple-500/10 rounded-2xl sm:rounded-3xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"mb-6 sm:mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 sm:mb-4",children:[o.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Progreso"}),o.jsxs("span",{className:"text-xs sm:text-sm font-bold text-blue-600 dark:text-blue-400",children:[Math.round(d),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 sm:h-3 overflow-hidden",children:o.jsx(de.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",initial:{width:0},animate:{width:`${d}%`},transition:{duration:.5,ease:"easeOut"}})})]}),o.jsx("div",{className:"mb-6 sm:mb-8",children:o.jsx(cn,{mode:"wait",children:g.map(y=>c>=y.id&&o.jsxs(de.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.98},transition:{duration:.35,type:"spring"},className:`flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl sm:rounded-2xl mb-2 sm:mb-3 ${c===y.id?"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30 border-2 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-700"}`,children:[o.jsx(de.div,{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl flex-shrink-0 ${c===y.id?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-green-100 text-green-600"}`,animate:c===y.id?{scale:[1,1.08,1],rotate:[0,5,-5,0]}:{},transition:{duration:2,repeat:1/0},children:o.jsx(y.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),o.jsxs("div",{className:"text-left flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100 text-base sm:text-lg",children:y.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm break-words",children:y.description})]}),c>y.id&&o.jsx(de.div,{initial:{scale:0},animate:{scale:1},className:"text-green-500 flex-shrink-0",children:o.jsx(Hm,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]},y.id))})}),o.jsx("div",{className:"mb-6 sm:mb-8",children:o.jsxs("div",{className:"loader mx-auto",children:[o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__ball"})]})}),o.jsx(de.h1,{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{opacity:[.85,1,.85]},transition:{duration:2,repeat:1/0},children:"Procesando tu pago"}),o.jsxs(de.p,{className:"text-gray-600 dark:text-gray-300 mb-6 sm:mb-8 leading-relaxed text-sm sm:text-base",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Estamos verificando tu transacción con CardNet de forma segura.",o.jsx("br",{}),o.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Por favor, no cierres esta ventana."})]}),o.jsxs(de.div,{className:"flex flex-wrap justify-center items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.6},children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsx(Wm,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),o.jsx("span",{children:"Conexión segura"})]}),o.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full hidden sm:block"}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsx(Ej,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),o.jsx("span",{children:"Tiempo real"})]})]})]})]})]})}const PS="https://playcenter-universal.onrender.com";function rK(){var y,x;const[t]=Ox(),[e,n]=k.useState(null),[r,i]=k.useState(null),[a,c]=k.useState(!0),[u,d]=k.useState(!1);k.useEffect(()=>{const w=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=w}},[]),k.useEffect(()=>{const w=t.get("session");w&&(async()=>{try{const N=fn(Ht(Ue,"orders"),Sr("raw.SESSION","==",w),Hs("fecha","desc"),Np(1)),j=await os(N);j.empty||n({id:j.docs[0].id,...j.docs[0].data()});const O=await fetch(`${PS}/cardnet/get-sk/${w}`),{sk:I}=await O.json();if(I){const $=await(await fetch(`${PS}/cardnet/verify/${w}/${I}`)).json();i($)}}catch(N){console.error("Error cargando datos:",N)}})();const b=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(b)},[t]);const f=w=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(w||0),g=w=>{if(!w)return"Fecha no disponible";let S;return typeof w=="object"&&(w!=null&&w.seconds)?S=new Date(w.seconds*1e3):S=new Date(w),S.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return o.jsxs(de.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-green-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[o.jsx(cn,{children:a&&o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((w,S)=>o.jsx(de.div,{className:"absolute w-3 h-3 rounded-full dark:opacity-70",style:{backgroundColor:["#10b981","#059669","#34d399","#6ee7b7","#a7f3d0"][Math.floor(Math.random()*5)],left:Math.random()*100+"%",top:-10},animate:{y:window.innerHeight+50,x:[0,Math.random()*200-100,Math.random()*200-100],rotate:[0,360,720],scale:[1,.5,1]},transition:{duration:Math.random()*3+2,ease:"easeOut",delay:Math.random()*2},exit:{opacity:0}},S))})}),o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((w,S)=>o.jsx(de.div,{className:"absolute w-2 h-2 bg-green-200 dark:bg-green-800 rounded-full opacity-30 dark:opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*15+15,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},S))}),o.jsxs(de.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-4xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-emerald-500/5 dark:from-green-500/10 dark:to-emerald-500/10 rounded-3xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx(de.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:o.jsxs(de.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[o.jsx(Hm,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-green-500 mx-auto drop-shadow-lg"}),o.jsx(de.div,{className:"absolute -top-3 -right-3 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.25,1],rotate:[0,12,-12,0]},transition:{duration:2,repeat:1/0},children:o.jsx(L$,{className:"w-5 h-5 text-yellow-600"})}),o.jsx(de.div,{className:"absolute -bottom-2 -left-2 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0,delay:.5},children:o.jsx(A$,{className:"w-4 h-4 text-green-600"})})]})}),o.jsxs(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:[o.jsx(de.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-400 dark:to-emerald-400 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{scale:[1,1.04,1]},transition:{duration:2,repeat:1/0},children:"¡Pago exitoso!"}),o.jsx(de.div,{className:"flex items-center justify-center gap-2 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[...Array(5)].map((w,S)=>o.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+S*.08,type:"spring"},children:o.jsx(P$,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-400 fill-current"})},S))}),o.jsxs(de.p,{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base md:text-lg leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:["Tu transacción fue procesada correctamente.",o.jsx("br",{}),"¡Gracias por tu compra en ",o.jsx("span",{className:"font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:"PlayCenter Universal"}),"!"]})]}),e?o.jsx(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 border border-green-200 dark:border-green-800",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[o.jsx(t$,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"}),"Resumen de tu compra"]}),o.jsx(de.div,{className:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold",whileHover:{scale:1.05},children:"✓ Completado"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Orden ID:"}),o.jsx("span",{className:"font-mono text-xs sm:text-sm bg-gray-100 dark:bg-gray-700 dark:text-gray-200 px-2 py-1 rounded break-all",children:e.numeroOrden||((y=e.id)==null?void 0:y.slice(-8))})]}),o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Email:"}),o.jsx("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm break-all text-right",children:e.userEmail})]}),o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Fecha:"}),o.jsx("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm text-right",children:g(e.fecha)})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Método de pago:"}),o.jsxs("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm flex items-center gap-1.5 sm:gap-2",children:[o.jsx(Tj,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),"CardNet"]})]}),o.jsxs("div",{className:"flex justify-between items-center gap-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm",children:"Total:"}),o.jsx("span",{className:"text-xl sm:text-2xl font-bold text-green-600 dark:text-green-400",children:f(e.total)})]})]})]}),((x=e.productos)==null?void 0:x.length)>0&&o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>d(w=>!w),className:"flex items-center gap-2 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 font-medium mb-3 sm:mb-4 transition-colors text-sm sm:text-base",type:"button",children:[o.jsxs("span",{children:["Ver productos (",e.productos.length,")"]}),o.jsx(de.div,{animate:{rotate:u?180:0},transition:{duration:.25},children:"▼"})]}),o.jsx(cn,{children:u&&o.jsx(de.div,{className:"space-y-2 sm:space-y-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:e.productos.map((w,S)=>o.jsxs(de.div,{className:"flex items-center justify-between bg-white dark:bg-gray-700/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-green-100 dark:border-green-800 gap-3",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:S*.06},whileHover:{scale:1.02},children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0",children:"🎮"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm sm:text-base block truncate",children:w.nombre}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:["Cantidad: ",w.cantidad," × ",f(w.precio)]})]})]}),o.jsx("span",{className:"font-bold text-green-600 dark:text-green-400 text-sm sm:text-base flex-shrink-0",children:f((Number(w.precio)||0)*w.cantidad)})]},`${w.id}-${S}`))})})]})]})}):null,o.jsxs(de.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center mb-6 sm:mb-8",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:1.2},children:[o.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(It,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-500 dark:to-emerald-500 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(yd,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Seguir comprando"})]})}),o.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(It,{to:"/profile",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(JU,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Ver historial"})]})})]}),r&&o.jsxs(de.details,{className:"mt-2 text-left",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},children:[o.jsx("summary",{className:"cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium mb-2 text-xs sm:text-sm",children:"Detalles técnicos de la transacción"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700 max-h-48 sm:max-h-64 overflow-y-auto",children:o.jsx("pre",{className:"whitespace-pre-wrap text-gray-600 dark:text-gray-300 text-xs font-mono",children:JSON.stringify(r,null,2)})})]})]})]})]})}function iK(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function sK(){const[t]=Ox(),{usuarioInfo:e}=Jr(),{carrito:n}=Kd(),[r,i]=k.useState(!1),[a,c]=k.useState(!1);k.useEffect(()=>{const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}},[]),k.useEffect(()=>{const f=setTimeout(async()=>{var S;if(r)return;const g=t.get("session"),y=iK(),x=(S=y==null?void 0:y.items)!=null&&S.length?y.items:(n||[]).map(b=>({id:b.id,nombre:b.nombre,precio:Number(b.precio)||0,cantidad:b.cantidad})),w=(y==null?void 0:y.total)??(n||[]).reduce((b,N)=>b+(Number(N.precio)||0)*N.cantidad,0);try{if(g){const b=fn(Ht(Ue,"orders"),Sr("raw.SESSION","==",g),Np(1));if(!(await os(b)).empty){try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0);return}}if(e&&(x.length>0||w>=0)){const b=x.map(N=>({id:N.id,nombre:N.nombre,precio:Number(N.precio)||0,cantidad:N.cantidad,imagen:N.imagen||"/Productos/default.jpg",empresa:N.empresa||"N/A",subtotal:(Number(N.precio)||0)*N.cantidad}));await jp(Ht(Ue,"orders"),{userId:e.uid,userEmail:e.email,userName:e.displayName,userPhone:(e==null?void 0:e.telefono)||null,productos:b,total:w,subtotal:b.reduce((N,j)=>N+j.subtotal,0),impuestos:0,envio:0,estado:"cancelado",estadoPago:"fallido",metodoPago:"CardNet",fecha:gC(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(y==null?void 0:y.mode)||(y?"unknown":"cart"),direccionEntrega:(e==null?void 0:e.direccionCompleta)||null,telefonoContacto:(e==null?void 0:e.telefono)||null,notasEspeciales:null,raw:{SESSION:g||null}});try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0)}}catch(b){console.error("Error guardando orden cancelada:",b)}},600);return()=>clearTimeout(f)},[e,n,r,t]);const u=[{icon:Wm,title:"Datos incorrectos",desc:"Verifica la información de tu tarjeta"},{icon:Ej,title:"Sesión expirada",desc:"El tiempo límite para el pago se agotó"},{icon:wk,title:"Fondos insuficientes",desc:"Tu tarjeta no tiene saldo disponible"},{icon:Fd,title:"Cancelado por el usuario",desc:"El pago fue cancelado manualmente"}];return o.jsxs(de.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-rose-50 via-red-50 to-pink-50 dark:from-gray-900 dark:via-red-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(16)].map((d,f)=>o.jsx(de.div,{className:"absolute w-3 h-3 bg-red-200 dark:bg-red-900 rounded-full opacity-20 dark:opacity-15",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight],rotate:[0,360]},transition:{duration:Math.random()*14+14,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},f))}),o.jsxs(de.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-pink-500/5 dark:from-red-500/10 dark:to-pink-500/10 rounded-3xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx(de.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:o.jsxs(de.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[o.jsx(Fd,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-red-500 mx-auto drop-shadow-lg"}),o.jsx(de.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:o.jsx(wk,{className:"w-4 h-4 text-red-600"})})]})}),o.jsx(de.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-red-600 to-pink-600 dark:from-red-400 dark:to-pink-400 bg-clip-text text-transparent mb-4 sm:mb-6",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:"Pago cancelado"}),o.jsxs(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.45},children:[o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base sm:text-lg leading-relaxed mb-4",children:"Tu transacción no pudo ser completada."}),o.jsxs(de.div,{className:"inline-flex items-center gap-2 bg-green-50 dark:bg-green-950/30 text-green-700 dark:text-green-300 px-4 py-2 rounded-full border border-green-200 dark:border-green-800",initial:{scale:0},animate:{scale:1},transition:{delay:.65,type:"spring"},children:[o.jsx(Wm,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"No se realizó ningún cargo a tu tarjeta"})]})]}),o.jsxs(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.6},children:[o.jsxs("button",{onClick:()=>c(d=>!d),className:"flex items-center gap-2 mx-auto text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",type:"button",children:[o.jsx("span",{className:"font-medium",children:"¿Por qué falló mi pago?"}),o.jsx(de.div,{animate:{rotate:a?180:0},transition:{duration:.25},children:o.jsx(w$,{className:"w-4 h-4"})})]}),o.jsx(cn,{children:a&&o.jsx(de.div,{className:"mt-4 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:u.map((d,f)=>o.jsx(de.div,{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:f*.08},whileHover:{scale:1.02,backgroundColor:"#f8fafc"},children:o.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[o.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg flex-shrink-0",children:o.jsx(d.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"})}),o.jsxs("div",{className:"text-left flex-1 min-w-0",children:[o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1 text-sm sm:text-base",children:d.title}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-words",children:d.desc})]})]})},f))})})]}),o.jsxs(de.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.8},children:[o.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(It,{to:"/carrito",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-red-600 to-pink-600 dark:from-red-500 dark:to-pink-500 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(C$,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Intentar de nuevo"})]})}),o.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(It,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(yd,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Ir al inicio"})]})})]}),o.jsxs(de.div,{className:"mt-6 sm:mt-8 p-4 sm:p-5 bg-blue-50 dark:bg-blue-950/30 rounded-lg sm:rounded-xl border border-blue-200 dark:border-blue-800",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:[o.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2 text-sm sm:text-base",children:"¿Necesitas ayuda?"}),o.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-xs sm:text-sm",children:"Si el problema persiste, contacta a nuestro equipo de soporte. Estamos aquí para ayudarte a completar tu compra."}),o.jsx(de.a,{href:"/contacto",className:"mt-3 inline-block text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-800 dark:hover:text-blue-300 transition-colors",whileHover:{scale:1.03},children:"Contactar soporte →"})]})]})]})]})}function aK(){const t=ls();return o.jsx(LC,{children:o.jsx(cn,{mode:"wait",children:o.jsxs($5,{location:t,children:[o.jsx(mr,{path:"/",element:o.jsx(Mr,{children:o.jsx(OB,{})})}),o.jsx(mr,{path:"/profile",element:o.jsx(eK,{children:o.jsx(Mr,{children:o.jsx(WB,{})})})}),o.jsx(mr,{path:"/admin",element:o.jsx(AB,{})}),o.jsx(mr,{path:"/producto/:id",element:o.jsx(Mr,{children:o.jsx(XB,{})})}),o.jsx(mr,{path:"/carrito",element:o.jsx(Mr,{children:o.jsx(ZB,{})})}),o.jsx(mr,{path:"/contacto",element:o.jsx(Mr,{children:o.jsx(eH,{})})}),o.jsx(mr,{path:"/nosotros",element:o.jsx(Mr,{children:o.jsx(iH,{})})}),o.jsx(mr,{path:"/buscar",element:o.jsx(Mr,{children:o.jsx(YG,{})})}),o.jsx(mr,{path:"/categorias",element:o.jsx(Mr,{children:o.jsx(AS,{})})}),o.jsx(mr,{path:"/Productos/:categoria?",element:o.jsx(Mr,{children:o.jsx(AS,{})})}),o.jsx(mr,{path:"/estafetas",element:o.jsx(Mr,{children:o.jsx(ZG,{})})}),o.jsx(mr,{path:"/vender",element:o.jsx(Mr,{children:o.jsx(tH,{})})}),o.jsx(mr,{path:"/tiendas",element:o.jsx(Mr,{children:o.jsx(nH,{})})}),o.jsx(mr,{path:"/historial",element:o.jsx(Mr,{children:o.jsx(rH,{})})}),o.jsx(mr,{path:"/payment/pending",element:o.jsx(Mr,{children:o.jsx(nK,{})})}),o.jsx(mr,{path:"/payment/success",element:o.jsx(Mr,{children:o.jsx(rK,{})})}),o.jsx(mr,{path:"/payment/cancel",element:o.jsx(Mr,{children:o.jsx(sK,{})})})]},t.pathname)})})}function Mr({children:t}){return o.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:t})}function oK(){const{pathname:t}=ls(),e=Qr(),{usuario:n}=Jr(),{abrirModal:r}=tu(),[i,a]=k.useState(!1),c=d=>t===d,u=d=>{(d==="/profile"||d==="/carrito")&&!n?a(!0):e(d)};return o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-md flex justify-around items-center h-14 text-sm xl:hidden transition-colors duration-300",children:[o.jsx(Xu,{onClick:()=>u("/"),icon:o.jsx(U8,{}),label:"Inicio",active:c("/")}),o.jsx(Xu,{onClick:()=>u("/tiendas"),icon:o.jsx(B8,{}),label:"Tiendas",active:c("/tiendas")}),o.jsx(Xu,{onClick:()=>u("/categorias"),icon:o.jsx(H8,{}),label:"Categorías",active:c("/categorias")}),o.jsx(Xu,{onClick:()=>u("/carrito"),icon:o.jsx(BC,{}),label:"Carrito",active:c("/carrito")}),o.jsx(Xu,{onClick:()=>u("/profile"),icon:o.jsx(WC,{}),label:"Perfil",active:c("/profile")})]}),o.jsx(Op,{isOpen:i,onClose:()=>a(!1),onIniciarSesion:()=>{a(!1),r()}})]})}function Xu({onClick:t,icon:e,label:n,active:r}){return o.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center w-full h-full transition-colors ${r?"text-[#4FC3F7] font-semibold":"text-gray-600 dark:text-gray-300 hover:text-[#4FC3F7] dark:hover:text-[#60a5fa]"}`,"aria-label":n,type:"button",children:[o.jsx("div",{className:"text-lg",children:e}),o.jsx("div",{children:n})]})}function lK(){const{modalAbierto:t,setModalAbierto:e,modo:n,setModo:r}=tu(),{login:i,signup:a,usuario:c}=Jr(),[u,d]=k.useState(n),[f,g]=k.useState(""),[y,x]=k.useState(""),[w,S]=k.useState(""),[b,N]=k.useState("");k.useEffect(()=>{d(n),N(""),g(""),x(""),S("")},[t,n]);async function j(O){O.preventDefault(),N("");try{if(u==="login")await i(f,y);else{const I=await a(f,y);await er(pt(Ue,"users",I.uid),{displayName:w||"Usuario",email:f,telefono:"",direccion:"",codigo:"",metodoEntrega:"",admin:!1,createdAt:new Date}),w&&await updateProfile(I,{displayName:w})}e(!1)}catch(I){N("Error: "+I.message)}}return t?o.jsx("div",{onClick:()=>e(!1),className:"fixed inset-0 bg-gradient-to-br from-black/90 to-gray-900/90 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:o.jsxs(de.div,{onClick:O=>O.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40",children:[o.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold",children:"×"}),o.jsx("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:u==="login"?o.jsxs(o.Fragment,{children:[o.jsx(WC,{className:"text-[#3b82f6]"})," Iniciar Sesión"]}):o.jsxs(o.Fragment,{children:[o.jsx(q8,{className:"text-[#3b82f6]"})," Registrarse"]})}),b&&o.jsx("p",{className:"text-red-400 mb-4 text-center font-semibold",children:b}),o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[u==="signup"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1",children:"Nombre de usuario"}),o.jsx("input",{type:"text",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:w,onChange:O=>S(O.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1",children:"Correo electrónico"}),o.jsx("input",{type:"email",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:f,onChange:O=>g(O.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1",children:"Contraseña"}),o.jsx("input",{type:"password",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:y,onChange:O=>x(O.target.value)})]}),o.jsx("button",{type:"submit",className:"w-full bg-[#3b82f6] hover:bg-[#2563eb] text-white font-semibold py-2 rounded-lg shadow-lg transition transform hover:scale-105",children:u==="login"?"Iniciar sesión":"Registrarse"})]}),o.jsx("p",{className:"mt-4 text-center text-sm cursor-pointer text-[#3b82f6] hover:underline select-none",onClick:()=>{N("");const O=u==="login"?"signup":"login";d(O),r(O)},children:u==="login"?"¿No tienes una cuenta? Regístrate":"¿Ya tienes cuenta? Inicia sesión"})]})}):null}const cK=()=>{const{pathname:t}=ls();return k.useEffect(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0;const e=document.querySelector("main");e&&(e.scrollTop=0)},[t]),null};function uK(){Wv();const{theme:t,toggleTheme:e}=cu(),n=Qr(),r=ls(),[i,a]=k.useState(0),c=k.useRef(null),[u,d]=k.useState(!0),f=k.useRef(typeof window<"u"?window.scrollY:0),g=k.useRef(!1),[y,x]=k.useState(window.innerWidth>=1280),[w,S]=k.useState(window.innerWidth>=1280);k.useEffect(()=>{const N=()=>{const I=document.querySelector("header"),V=I?Math.ceil(I.getBoundingClientRect().height):0;a(V);try{const $=c.current,q=$?Math.ceil($.getBoundingClientRect().height):0;document.documentElement.style.setProperty("--topbar-height",`${q}px`);const D=V+q;document.documentElement.style.setProperty("--content-offset",`${D}px`)}catch{}};N();const j=()=>{try{if(typeof window<"u"){const I=window.innerWidth>=1280;x(I),S(I)}}catch{}N()};let O=null;try{if(typeof window<"u"&&"ResizeObserver"in window){O=new ResizeObserver(()=>N());const I=document.querySelector("header");I&&O.observe(I),c.current&&O.observe(c.current)}else window.addEventListener("resize",j)}catch{window.addEventListener("resize",j)}return()=>{if(O)try{O.disconnect()}catch{}window.removeEventListener("resize",j)}},[]),k.useEffect(()=>{if(!w){d(!0);return}const N=()=>{g.current||(window.requestAnimationFrame(()=>{const j=window.scrollY,O=f.current;j>O&&j>100?d(!1):(j<O||j===0)&&d(!0),f.current=j,g.current=!1}),g.current=!0)};return window.addEventListener("scroll",N,{passive:!0}),()=>window.removeEventListener("scroll",N)},[w]);const b={position:"fixed",left:0,right:0,top:`${i}px`,zIndex:9990,transform:u?"translateY(0)":"translateY(-110%)",transition:"transform 220ms ease, opacity 220ms ease",pointerEvents:u?"auto":"none",display:"flex",margin:0,padding:0};return o.jsxs("div",{ref:c,style:{...b,padding:"0.25rem 0.5rem",margin:0},className:"flex topbar-base topbar-tech bg-white dark:bg-gradient-to-r dark:from-blue-900 dark:via-blue-800 dark:to-blue-900 shadow-md justify-between items-center transition-colors duration-300",role:"region","aria-label":"Top bar",children:[o.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs md:text-sm whitespace-nowrap theme-text text-gray-700 dark:text-gray-200",children:[(r.pathname.startsWith("/producto/")||r.pathname.startsWith("/Producto/"))&&o.jsx("button",{onClick:()=>n(-1),className:"flex items-center justify-center w-7 h-7 rounded-full bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-all duration-200 hover:scale-110 active:scale-95 shadow-sm hover:shadow-md","aria-label":"Volver atrás",children:o.jsx(tB,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),o.jsx("span",{children:"Sitio oficial de las tiendas de videojuegos en RD"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("label",{className:"theme-toggle",children:[o.jsx("input",{type:"checkbox",checked:t==="dark",onChange:e,className:"theme-toggle__input","aria-label":"Cambiar tema"}),o.jsxs("svg",{className:"theme-toggle__icon theme-toggle__icon--sun",fill:"none",height:"18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"18",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("line",{x1:"12",x2:"12",y1:"1",y2:"3"}),o.jsx("line",{x1:"12",x2:"12",y1:"21",y2:"23"}),o.jsx("line",{x1:"4.22",x2:"5.64",y1:"4.22",y2:"5.64"}),o.jsx("line",{x1:"18.36",x2:"19.78",y1:"18.36",y2:"19.78"}),o.jsx("line",{x1:"1",x2:"3",y1:"12",y2:"12"}),o.jsx("line",{x1:"21",x2:"23",y1:"12",y2:"12"}),o.jsx("line",{x1:"4.22",x2:"5.64",y1:"19.78",y2:"18.36"}),o.jsx("line",{x1:"18.36",x2:"19.78",y1:"5.64",y2:"4.22"})]}),o.jsx("svg",{className:"theme-toggle__icon theme-toggle__icon--moon",viewBox:"0 0 24 24",children:o.jsx("path",{d:"m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z"})})]})})]})}const dK=()=>!0;function hK(){const{theme:t}=cu();return o.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-300",children:[o.jsx(H$,{}),o.jsx(uK,{}),o.jsxs("main",{className:"flex-grow",children:[o.jsx(cK,{}),o.jsx(aK,{})]}),o.jsx(W$,{}),o.jsx(oK,{}),o.jsx(lK,{})]})}function fK(){const[t,e]=k.useState(!1);return k.useEffect(()=>{const n=dK();e(n);try{localStorage.removeItem("deletedProductIds")}catch{}},[]),t?o.jsx(k8,{children:o.jsx(hK,{})}):null}KI.createRoot(document.getElementById("root")).render(o.jsx(Yr.StrictMode,{children:o.jsx(X5,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(LC,{children:o.jsx(Z5,{children:o.jsx(e3,{children:o.jsx(fK,{})})})})})}));
