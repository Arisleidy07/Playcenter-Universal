function YI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Yd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N0={exports:{}},Gu={},S0={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2;function QI(){if(a2)return Mt;a2=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,b={};function T(H,J,_e){this.props=H,this.context=J,this.refs=b,this.updater=_e||w}T.prototype.isReactComponent={},T.prototype.setState=function(H,J){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,J,"setState")},T.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function j(){}j.prototype=T.prototype;function R(H,J,_e){this.props=H,this.context=J,this.refs=b,this.updater=_e||w}var A=R.prototype=new j;A.constructor=R,N(A,T.prototype),A.isPureReactComponent=!0;var L=Array.isArray,z=Object.prototype.hasOwnProperty,q={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function M(H,J,_e){var Ue,Ge={},tt=null,lt=null;if(J!=null)for(Ue in J.ref!==void 0&&(lt=J.ref),J.key!==void 0&&(tt=""+J.key),J)z.call(J,Ue)&&!D.hasOwnProperty(Ue)&&(Ge[Ue]=J[Ue]);var Je=arguments.length-2;if(Je===1)Ge.children=_e;else if(1<Je){for(var Ze=Array(Je),Nt=0;Nt<Je;Nt++)Ze[Nt]=arguments[Nt+2];Ge.children=Ze}if(H&&H.defaultProps)for(Ue in Je=H.defaultProps,Je)Ge[Ue]===void 0&&(Ge[Ue]=Je[Ue]);return{$$typeof:t,type:H,key:tt,ref:lt,props:Ge,_owner:q.current}}function P(H,J){return{$$typeof:t,type:H.type,key:J,ref:H.ref,props:H.props,_owner:H._owner}}function S(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function F(H){var J={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(_e){return J[_e]})}var $=/\/+/g;function I(H,J){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):J.toString(36)}function re(H,J,_e,Ue,Ge){var tt=typeof H;(tt==="undefined"||tt==="boolean")&&(H=null);var lt=!1;if(H===null)lt=!0;else switch(tt){case"string":case"number":lt=!0;break;case"object":switch(H.$$typeof){case t:case e:lt=!0}}if(lt)return lt=H,Ge=Ge(lt),H=Ue===""?"."+I(lt,0):Ue,L(Ge)?(_e="",H!=null&&(_e=H.replace($,"$&/")+"/"),re(Ge,J,_e,"",function(Nt){return Nt})):Ge!=null&&(S(Ge)&&(Ge=P(Ge,_e+(!Ge.key||lt&&lt.key===Ge.key?"":(""+Ge.key).replace($,"$&/")+"/")+H)),J.push(Ge)),1;if(lt=0,Ue=Ue===""?".":Ue+":",L(H))for(var Je=0;Je<H.length;Je++){tt=H[Je];var Ze=Ue+I(tt,Je);lt+=re(tt,J,_e,Ze,Ge)}else if(Ze=x(H),typeof Ze=="function")for(H=Ze.call(H),Je=0;!(tt=H.next()).done;)tt=tt.value,Ze=Ue+I(tt,Je++),lt+=re(tt,J,_e,Ze,Ge);else if(tt==="object")throw J=String(H),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return lt}function ne(H,J,_e){if(H==null)return H;var Ue=[],Ge=0;return re(H,Ue,"","",function(tt){return J.call(_e,tt,Ge++)}),Ue}function we(H){if(H._status===-1){var J=H._result;J=J(),J.then(function(_e){(H._status===0||H._status===-1)&&(H._status=1,H._result=_e)},function(_e){(H._status===0||H._status===-1)&&(H._status=2,H._result=_e)}),H._status===-1&&(H._status=0,H._result=J)}if(H._status===1)return H._result.default;throw H._result}var Ee={current:null},ee={transition:null},ae={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:ee,ReactCurrentOwner:q};function ge(){throw Error("act(...) is not supported in production builds of React.")}return Mt.Children={map:ne,forEach:function(H,J,_e){ne(H,function(){J.apply(this,arguments)},_e)},count:function(H){var J=0;return ne(H,function(){J++}),J},toArray:function(H){return ne(H,function(J){return J})||[]},only:function(H){if(!S(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Mt.Component=T,Mt.Fragment=n,Mt.Profiler=i,Mt.PureComponent=R,Mt.StrictMode=r,Mt.Suspense=d,Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,Mt.act=ge,Mt.cloneElement=function(H,J,_e){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ue=N({},H.props),Ge=H.key,tt=H.ref,lt=H._owner;if(J!=null){if(J.ref!==void 0&&(tt=J.ref,lt=q.current),J.key!==void 0&&(Ge=""+J.key),H.type&&H.type.defaultProps)var Je=H.type.defaultProps;for(Ze in J)z.call(J,Ze)&&!D.hasOwnProperty(Ze)&&(Ue[Ze]=J[Ze]===void 0&&Je!==void 0?Je[Ze]:J[Ze])}var Ze=arguments.length-2;if(Ze===1)Ue.children=_e;else if(1<Ze){Je=Array(Ze);for(var Nt=0;Nt<Ze;Nt++)Je[Nt]=arguments[Nt+2];Ue.children=Je}return{$$typeof:t,type:H.type,key:Ge,ref:tt,props:Ue,_owner:lt}},Mt.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:o,_context:H},H.Consumer=H},Mt.createElement=M,Mt.createFactory=function(H){var J=M.bind(null,H);return J.type=H,J},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(H){return{$$typeof:u,render:H}},Mt.isValidElement=S,Mt.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:we}},Mt.memo=function(H,J){return{$$typeof:f,type:H,compare:J===void 0?null:J}},Mt.startTransition=function(H){var J=ee.transition;ee.transition={};try{H()}finally{ee.transition=J}},Mt.unstable_act=ge,Mt.useCallback=function(H,J){return Ee.current.useCallback(H,J)},Mt.useContext=function(H){return Ee.current.useContext(H)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(H){return Ee.current.useDeferredValue(H)},Mt.useEffect=function(H,J){return Ee.current.useEffect(H,J)},Mt.useId=function(){return Ee.current.useId()},Mt.useImperativeHandle=function(H,J,_e){return Ee.current.useImperativeHandle(H,J,_e)},Mt.useInsertionEffect=function(H,J){return Ee.current.useInsertionEffect(H,J)},Mt.useLayoutEffect=function(H,J){return Ee.current.useLayoutEffect(H,J)},Mt.useMemo=function(H,J){return Ee.current.useMemo(H,J)},Mt.useReducer=function(H,J,_e){return Ee.current.useReducer(H,J,_e)},Mt.useRef=function(H){return Ee.current.useRef(H)},Mt.useState=function(H){return Ee.current.useState(H)},Mt.useSyncExternalStore=function(H,J,_e){return Ee.current.useSyncExternalStore(H,J,_e)},Mt.useTransition=function(){return Ee.current.useTransition()},Mt.version="18.3.1",Mt}var o2;function $x(){return o2||(o2=1,S0.exports=QI()),S0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function JI(){if(l2)return Gu;l2=1;var t=$x(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,f){var g,y={},x=null,w=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(w=d.ref);for(g in d)r.call(d,g)&&!o.hasOwnProperty(g)&&(y[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:u,key:x,ref:w,props:y,_owner:i.current}}return Gu.Fragment=n,Gu.jsx=c,Gu.jsxs=c,Gu}var c2;function ZI(){return c2||(c2=1,N0.exports=JI()),N0.exports}var a=ZI(),E=$x();const si=Yd(E),wy=YI({__proto__:null,default:si},[E]);var kf={},T0={exports:{}},mi={},C0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2;function e5(){return u2||(u2=1,function(t){function e(ee,ae){var ge=ee.length;ee.push(ae);e:for(;0<ge;){var H=ge-1>>>1,J=ee[H];if(0<i(J,ae))ee[H]=ae,ee[ge]=J,ge=H;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ae=ee[0],ge=ee.pop();if(ge!==ae){ee[0]=ge;e:for(var H=0,J=ee.length,_e=J>>>1;H<_e;){var Ue=2*(H+1)-1,Ge=ee[Ue],tt=Ue+1,lt=ee[tt];if(0>i(Ge,ge))tt<J&&0>i(lt,Ge)?(ee[H]=lt,ee[tt]=ge,H=tt):(ee[H]=Ge,ee[Ue]=ge,H=Ue);else if(tt<J&&0>i(lt,ge))ee[H]=lt,ee[tt]=ge,H=tt;else break e}}return ae}function i(ee,ae){var ge=ee.sortIndex-ae.sortIndex;return ge!==0?ge:ee.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,x=3,w=!1,N=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(ee){for(var ae=n(f);ae!==null;){if(ae.callback===null)r(f);else if(ae.startTime<=ee)r(f),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=n(f)}}function L(ee){if(b=!1,A(ee),!N)if(n(d)!==null)N=!0,we(z);else{var ae=n(f);ae!==null&&Ee(L,ae.startTime-ee)}}function z(ee,ae){N=!1,b&&(b=!1,j(M),M=-1),w=!0;var ge=x;try{for(A(ae),y=n(d);y!==null&&(!(y.expirationTime>ae)||ee&&!F());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var J=H(y.expirationTime<=ae);ae=t.unstable_now(),typeof J=="function"?y.callback=J:y===n(d)&&r(d),A(ae)}else r(d);y=n(d)}if(y!==null)var _e=!0;else{var Ue=n(f);Ue!==null&&Ee(L,Ue.startTime-ae),_e=!1}return _e}finally{y=null,x=ge,w=!1}}var q=!1,D=null,M=-1,P=5,S=-1;function F(){return!(t.unstable_now()-S<P)}function $(){if(D!==null){var ee=t.unstable_now();S=ee;var ae=!0;try{ae=D(!0,ee)}finally{ae?I():(q=!1,D=null)}}else q=!1}var I;if(typeof R=="function")I=function(){R($)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ne=re.port2;re.port1.onmessage=$,I=function(){ne.postMessage(null)}}else I=function(){T($,0)};function we(ee){D=ee,q||(q=!0,I())}function Ee(ee,ae){M=T(function(){ee(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,we(z))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(ee){switch(x){case 1:case 2:case 3:var ae=3;break;default:ae=x}var ge=x;x=ae;try{return ee()}finally{x=ge}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ge=x;x=ee;try{return ae()}finally{x=ge}},t.unstable_scheduleCallback=function(ee,ae,ge){var H=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?H+ge:H):ge=H,ee){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ge+J,ee={id:g++,callback:ae,priorityLevel:ee,startTime:ge,expirationTime:J,sortIndex:-1},ge>H?(ee.sortIndex=ge,e(f,ee),n(d)===null&&ee===n(f)&&(b?(j(M),M=-1):b=!0,Ee(L,ge-H))):(ee.sortIndex=J,e(d,ee),N||w||(N=!0,we(z))),ee},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ee){var ae=x;return function(){var ge=x;x=ae;try{return ee.apply(this,arguments)}finally{x=ge}}}}(j0)),j0}var d2;function t5(){return d2||(d2=1,C0.exports=e5()),C0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2;function n5(){if(h2)return mi;h2=1;var t=$x(),e=t5();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,l){c(s,l),c(s+"Capture",l)}function c(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(s){return d.call(y,s)?!0:d.call(g,s)?!1:f.test(s)?y[s]=!0:(g[s]=!0,!1)}function w(s,l,h,p){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function N(s,l,h,p){if(l===null||typeof l>"u"||w(s,l,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(s,l,h,p,v,k,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=s,this.type=l,this.sanitizeURL=k,this.removeEmptyString=O}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];T[l]=new b(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function R(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(j,R);T[l]=new b(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(j,R);T[l]=new b(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(j,R);T[l]=new b(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function A(s,l,h,p){var v=T.hasOwnProperty(l)?T[l]:null;(v!==null?v.type!==0:p||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(N(l,h,v,p)&&(h=null),p||v===null?x(l)&&(h===null?s.removeAttribute(l):s.setAttribute(l,""+h)):v.mustUseProperty?s[v.propertyName]=h===null?v.type===3?!1:"":h:(l=v.attributeName,p=v.attributeNamespace,h===null?s.removeAttribute(l):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,p?s.setAttributeNS(p,l,h):s.setAttribute(l,h))))}var L=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),q=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),F=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),ee=Symbol.iterator;function ae(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var ge=Object.assign,H;function J(s){if(H===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);H=l&&l[1]||""}return`
`+H+s}var _e=!1;function Ue(s,l){if(!s||_e)return"";_e=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(he){var p=he}Reflect.construct(s,[],l)}else{try{l.call()}catch(he){p=he}s.call(l.prototype)}else{try{throw Error()}catch(he){p=he}s()}}catch(he){if(he&&p&&typeof he.stack=="string"){for(var v=he.stack.split(`
`),k=p.stack.split(`
`),O=v.length-1,B=k.length-1;1<=O&&0<=B&&v[O]!==k[B];)B--;for(;1<=O&&0<=B;O--,B--)if(v[O]!==k[B]){if(O!==1||B!==1)do if(O--,B--,0>B||v[O]!==k[B]){var K=`
`+v[O].replace(" at new "," at ");return s.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",s.displayName)),K}while(1<=O&&0<=B);break}}}finally{_e=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?J(s):""}function Ge(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=Ue(s.type,!1),s;case 11:return s=Ue(s.type.render,!1),s;case 1:return s=Ue(s.type,!0),s;default:return""}}function tt(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case q:return"Portal";case P:return"Profiler";case M:return"StrictMode";case I:return"Suspense";case re:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case F:return(s.displayName||"Context")+".Consumer";case S:return(s._context.displayName||"Context")+".Provider";case $:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ne:return l=s.displayName||null,l!==null?l:tt(s.type)||"Memo";case we:l=s._payload,s=s._init;try{return tt(s(l))}catch{}}return null}function lt(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tt(l);case 8:return l===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Je(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ze(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Nt(s){var l=Ze(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),p=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,k=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return v.call(this)},set:function(O){p=""+O,k.call(this,O)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(O){p=""+O},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function bt(s){s._valueTracker||(s._valueTracker=Nt(s))}function pt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),p="";return s&&(p=Ze(s)?s.checked?"true":"false":s.value),s=p,s!==h?(l.setValue(s),!0):!1}function yt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Dt(s,l){var h=l.checked;return ge({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function It(s,l){var h=l.defaultValue==null?"":l.defaultValue,p=l.checked!=null?l.checked:l.defaultChecked;h=Je(l.value!=null?l.value:h),s._wrapperState={initialChecked:p,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Sn(s,l){l=l.checked,l!=null&&A(s,"checked",l,!1)}function Z(s,l){Sn(s,l);var h=Je(l.value),p=l.type;if(h!=null)p==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Oe(s,l.type,h):l.hasOwnProperty("defaultValue")&&Oe(s,l.type,Je(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function je(s,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var p=l.type;if(!(p!=="submit"&&p!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,h||l===s.value||(s.value=l),s.defaultValue=l}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function Oe(s,l,h){(l!=="number"||yt(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var rt=Array.isArray;function St(s,l,h,p){if(s=s.options,l){l={};for(var v=0;v<h.length;v++)l["$"+h[v]]=!0;for(h=0;h<s.length;h++)v=l.hasOwnProperty("$"+s[h].value),s[h].selected!==v&&(s[h].selected=v),v&&p&&(s[h].defaultSelected=!0)}else{for(h=""+Je(h),l=null,v=0;v<s.length;v++){if(s[v].value===h){s[v].selected=!0,p&&(s[v].defaultSelected=!0);return}l!==null||s[v].disabled||(l=s[v])}l!==null&&(l.selected=!0)}}function He(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ge({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function dt(s,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(n(92));if(rt(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),h=l}s._wrapperState={initialValue:Je(h)}}function G(s,l){var h=Je(l.value),p=Je(l.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),l.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),p!=null&&(s.defaultValue=""+p)}function X(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function me(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Te(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?me(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var te,be=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,p,v){MSApp.execUnsafeLocalFunction(function(){return s(l,h,p,v)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(te=te||document.createElement("div"),te.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=te.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Se(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jt=["Webkit","ms","Moz","O"];Object.keys(gt).forEach(function(s){jt.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),gt[l]=gt[s]})});function ct(s,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||gt.hasOwnProperty(s)&&gt[s]?(""+l).trim():l+"px"}function Vt(s,l){s=s.style;for(var h in l)if(l.hasOwnProperty(h)){var p=h.indexOf("--")===0,v=ct(h,l[h],p);h==="float"&&(h="cssFloat"),p?s.setProperty(h,v):s[h]=v}}var bn=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vr(s,l){if(l){if(bn[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Wn(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var or=null;function On(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Dr=null,qn=null,Ot=null;function Jt(s){if(s=Pu(s)){if(typeof Dr!="function")throw Error(n(280));var l=s.stateNode;l&&(l=Lh(l),Dr(s.stateNode,s.type,l))}}function Jn(s){qn?Ot?Ot.push(s):Ot=[s]:qn=s}function Mr(){if(qn){var s=qn,l=Ot;if(Ot=qn=null,Jt(s),l)for(s=0;s<l.length;s++)Jt(l[s])}}function V(s,l){return s(l)}function W(){}var ue=!1;function fe(s,l,h){if(ue)return s(l,h);ue=!0;try{return V(s,l,h)}finally{ue=!1,(qn!==null||Ot!==null)&&(W(),Mr())}}function ce(s,l){var h=s.stateNode;if(h===null)return null;var p=Lh(h);if(p===null)return null;h=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var Me=!1;if(u)try{var Ce={};Object.defineProperty(Ce,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ce,Ce),window.removeEventListener("test",Ce,Ce)}catch{Me=!1}function Ne(s,l,h,p,v,k,O,B,K){var he=Array.prototype.slice.call(arguments,3);try{l.apply(h,he)}catch(Pe){this.onError(Pe)}}var oe=!1,Fe=null,Ie=!1,Ke=null,Xe={onError:function(s){oe=!0,Fe=s}};function Be(s,l,h,p,v,k,O,B,K){oe=!1,Fe=null,Ne.apply(Xe,arguments)}function Ln(s,l,h,p,v,k,O,B,K){if(Be.apply(this,arguments),oe){if(oe){var he=Fe;oe=!1,Fe=null}else throw Error(n(198));Ie||(Ie=!0,Ke=he)}}function sn(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function wn(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Ht(s){if(sn(s)!==s)throw Error(n(188))}function Zt(s){var l=s.alternate;if(!l){if(l=sn(s),l===null)throw Error(n(188));return l!==s?null:s}for(var h=s,p=l;;){var v=h.return;if(v===null)break;var k=v.alternate;if(k===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===k.child){for(k=v.child;k;){if(k===h)return Ht(v),s;if(k===p)return Ht(v),l;k=k.sibling}throw Error(n(188))}if(h.return!==p.return)h=v,p=k;else{for(var O=!1,B=v.child;B;){if(B===h){O=!0,h=v,p=k;break}if(B===p){O=!0,p=v,h=k;break}B=B.sibling}if(!O){for(B=k.child;B;){if(B===h){O=!0,h=k,p=v;break}if(B===p){O=!0,p=k,h=v;break}B=B.sibling}if(!O)throw Error(n(189))}}if(h.alternate!==p)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?s:l}function Xr(s){return s=Zt(s),s!==null?br(s):null}function br(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=br(s);if(l!==null)return l;s=s.sibling}return null}var wr=e.unstable_scheduleCallback,_r=e.unstable_cancelCallback,_t=e.unstable_shouldYield,Fo=e.unstable_requestPaint,Wt=e.unstable_now,Yr=e.unstable_getCurrentPriorityLevel,es=e.unstable_ImmediatePriority,kr=e.unstable_UserBlockingPriority,Qr=e.unstable_NormalPriority,Oa=e.unstable_LowPriority,Vl=e.unstable_IdlePriority,Qs=null,Jr=null;function La(s){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot(Qs,s,void 0,(s.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:Fl,Va=Math.log,Js=Math.LN2;function Fl(s){return s>>>=0,s===0?32:31-(Va(s)/Js|0)|0}var Fa=64,Ua=4194304;function xs(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Zs(s,l){var h=s.pendingLanes;if(h===0)return 0;var p=0,v=s.suspendedLanes,k=s.pingedLanes,O=h&268435455;if(O!==0){var B=O&~v;B!==0?p=xs(B):(k&=O,k!==0&&(p=xs(k)))}else O=h&~v,O!==0?p=xs(O):k!==0&&(p=xs(k));if(p===0)return 0;if(l!==0&&l!==p&&(l&v)===0&&(v=p&-p,k=l&-l,v>=k||v===16&&(k&4194240)!==0))return l;if((p&4)!==0&&(p|=h&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=p;0<l;)h=31-Er(l),v=1<<h,p|=s[h],l&=~v;return p}function yu(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(s,l){for(var h=s.suspendedLanes,p=s.pingedLanes,v=s.expirationTimes,k=s.pendingLanes;0<k;){var O=31-Er(k),B=1<<O,K=v[O];K===-1?((B&h)===0||(B&p)!==0)&&(v[O]=yu(B,l)):K<=l&&(s.expiredLanes|=B),k&=~B}}function Zr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function ea(){var s=Fa;return Fa<<=1,(Fa&4194240)===0&&(Fa=64),s}function vs(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function bs(s,l,h){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Er(l),s[l]=h}function en(s,l){var h=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<h;){var v=31-Er(h),k=1<<v;l[v]=0,p[v]=-1,s[v]=-1,h&=~k}}function ws(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var p=31-Er(h),v=1<<p;v&l|s[p]&l&&(s[p]|=l),h&=~v}}var Lt=0;function _s(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Ul,ta,$l,Y,xe,ze=!1,Re=[],We=null,it=null,ot=null,an=new Map,Yt=new Map,Tn=[],ts="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oi(s,l){switch(s){case"focusin":case"focusout":We=null;break;case"dragenter":case"dragleave":it=null;break;case"mouseover":case"mouseout":ot=null;break;case"pointerover":case"pointerout":an.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yt.delete(l.pointerId)}}function Cn(s,l,h,p,v,k){return s===null||s.nativeEvent!==k?(s={blockedOn:l,domEventName:h,eventSystemFlags:p,nativeEvent:k,targetContainers:[v]},l!==null&&(l=Pu(l),l!==null&&ta(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),s)}function ks(s,l,h,p,v){switch(l){case"focusin":return We=Cn(We,s,l,h,p,v),!0;case"dragenter":return it=Cn(it,s,l,h,p,v),!0;case"mouseover":return ot=Cn(ot,s,l,h,p,v),!0;case"pointerover":var k=v.pointerId;return an.set(k,Cn(an.get(k)||null,s,l,h,p,v)),!0;case"gotpointercapture":return k=v.pointerId,Yt.set(k,Cn(Yt.get(k)||null,s,l,h,p,v)),!0}return!1}function hn(s){var l=Ho(s.target);if(l!==null){var h=sn(l);if(h!==null){if(l=h.tag,l===13){if(l=wn(h),l!==null){s.blockedOn=l,xe(s.priority,function(){$l(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function na(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=zl(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var p=new h.constructor(h.type,h);or=p,h.target.dispatchEvent(p),or=null}else return l=Pu(h),l!==null&&ta(l),s.blockedOn=h,!1;l.shift()}return!0}function Uo(s,l,h){na(s)&&h.delete(l)}function _h(){ze=!1,We!==null&&na(We)&&(We=null),it!==null&&na(it)&&(it=null),ot!==null&&na(ot)&&(ot=null),an.forEach(Uo),Yt.forEach(Uo)}function ns(s,l){s.blockedOn===l&&(s.blockedOn=null,ze||(ze=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_h)))}function rs(s){function l(v){return ns(v,s)}if(0<Re.length){ns(Re[0],s);for(var h=1;h<Re.length;h++){var p=Re[h];p.blockedOn===s&&(p.blockedOn=null)}}for(We!==null&&ns(We,s),it!==null&&ns(it,s),ot!==null&&ns(ot,s),an.forEach(l),Yt.forEach(l),h=0;h<Tn.length;h++)p=Tn[h],p.blockedOn===s&&(p.blockedOn=null);for(;0<Tn.length&&(h=Tn[0],h.blockedOn===null);)hn(h),h.blockedOn===null&&Tn.shift()}var ra=L.ReactCurrentBatchConfig,$a=!0;function _n(s,l,h,p){var v=Lt,k=ra.transition;ra.transition=null;try{Lt=1,xu(s,l,h,p)}finally{Lt=v,ra.transition=k}}function ig(s,l,h,p){var v=Lt,k=ra.transition;ra.transition=null;try{Lt=4,xu(s,l,h,p)}finally{Lt=v,ra.transition=k}}function xu(s,l,h,p){if($a){var v=zl(s,l,h,p);if(v===null)pg(s,l,p,$o,h),Oi(s,p);else if(ks(v,s,l,h,p))p.stopPropagation();else if(Oi(s,p),l&4&&-1<ts.indexOf(s)){for(;v!==null;){var k=Pu(v);if(k!==null&&Ul(k),k=zl(s,l,h,p),k===null&&pg(s,l,p,$o,h),k===v)break;v=k}v!==null&&p.stopPropagation()}else pg(s,l,p,null,h)}}var $o=null;function zl(s,l,h,p){if($o=null,s=On(p),s=Ho(s),s!==null)if(l=sn(s),l===null)s=null;else if(h=l.tag,h===13){if(s=wn(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return $o=s,null}function vu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yr()){case es:return 1;case kr:return 4;case Qr:case Oa:return 16;case Vl:return 536870912;default:return 16}default:return 16}}var Ei=null,Bl=null,li=null;function bu(){if(li)return li;var s,l=Bl,h=l.length,p,v="value"in Ei?Ei.value:Ei.textContent,k=v.length;for(s=0;s<h&&l[s]===v[s];s++);var O=h-s;for(p=1;p<=O&&l[h-p]===v[k-p];p++);return li=v.slice(s,1<p?1-p:void 0)}function Hl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Es(){return!0}function wu(){return!1}function Nr(s){function l(h,p,v,k,O){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=k,this.target=O,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(h=s[B],this[B]=h?h(k):k[B]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Es:wu,this.isPropagationStopped=wu,this}return ge(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),l}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=Nr(is),Ns=ge({},is,{view:0,detail:0}),sg=Nr(Ns),ql,ia,za,zo=ge({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==za&&(za&&s.type==="mousemove"?(ql=s.screenX-za.screenX,ia=s.screenY-za.screenY):ia=ql=0,za=s),ql)},movementY:function(s){return"movementY"in s?s.movementY:ia}}),Gl=Nr(zo),_u=ge({},zo,{dataTransfer:0}),kh=Nr(_u),Kl=ge({},Ns,{relatedTarget:0}),Xl=Nr(Kl),Eh=ge({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),sa=Nr(Eh),Nh=ge({},is,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Sh=Nr(Nh),Th=ge({},is,{data:0}),ku=Nr(Th),Yl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ei={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Ch[s])?!!l[s]:!1}function Ss(){return jh}var m=ge({},Ns,{key:function(s){if(s.key){var l=Yl[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Hl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ei[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(s){return s.type==="keypress"?Hl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Hl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=Nr(m),C=ge({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U=Nr(C),ie=ge({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),pe=Nr(ie),$e=ge({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),tn=Nr($e),lr=ge({},zo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),zt=Nr(lr),fr=[9,13,27,32],Zn=u&&"CompositionEvent"in window,Li=null;u&&"documentMode"in document&&(Li=document.documentMode);var Ni=u&&"TextEvent"in window&&!Li,Bo=u&&(!Zn||Li&&8<Li&&11>=Li),Ql=" ",eb=!1;function tb(s,l){switch(s){case"keyup":return fr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Jl=!1;function GA(s,l){switch(s){case"compositionend":return nb(l);case"keypress":return l.which!==32?null:(eb=!0,Ql);case"textInput":return s=l.data,s===Ql&&eb?null:s;default:return null}}function KA(s,l){if(Jl)return s==="compositionend"||!Zn&&tb(s,l)?(s=bu(),li=Bl=Ei=null,Jl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Bo&&l.locale!=="ko"?null:l.data;default:return null}}var XA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rb(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!XA[s.type]:l==="textarea"}function ib(s,l,h,p){Jn(p),l=Dh(l,"onChange"),0<l.length&&(h=new Wl("onChange","change",null,h,p),s.push({event:h,listeners:l}))}var Eu=null,Nu=null;function YA(s){_b(s,0)}function Ah(s){var l=rc(s);if(pt(l))return s}function QA(s,l){if(s==="change")return l}var sb=!1;if(u){var ag;if(u){var og="oninput"in document;if(!og){var ab=document.createElement("div");ab.setAttribute("oninput","return;"),og=typeof ab.oninput=="function"}ag=og}else ag=!1;sb=ag&&(!document.documentMode||9<document.documentMode)}function ob(){Eu&&(Eu.detachEvent("onpropertychange",lb),Nu=Eu=null)}function lb(s){if(s.propertyName==="value"&&Ah(Nu)){var l=[];ib(l,Nu,s,On(s)),fe(YA,l)}}function JA(s,l,h){s==="focusin"?(ob(),Eu=l,Nu=h,Eu.attachEvent("onpropertychange",lb)):s==="focusout"&&ob()}function ZA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ah(Nu)}function eI(s,l){if(s==="click")return Ah(l)}function tI(s,l){if(s==="input"||s==="change")return Ah(l)}function nI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ss=typeof Object.is=="function"?Object.is:nI;function Su(s,l){if(ss(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),p=Object.keys(l);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!d.call(l,v)||!ss(s[v],l[v]))return!1}return!0}function cb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ub(s,l){var h=cb(s);s=0;for(var p;h;){if(h.nodeType===3){if(p=s+h.textContent.length,s<=l&&p>=l)return{node:h,offset:l-s};s=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=cb(h)}}function db(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?db(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function hb(){for(var s=window,l=yt();l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=yt(s.document)}return l}function lg(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function rI(s){var l=hb(),h=s.focusedElem,p=s.selectionRange;if(l!==h&&h&&h.ownerDocument&&db(h.ownerDocument.documentElement,h)){if(p!==null&&lg(h)){if(l=p.start,s=p.end,s===void 0&&(s=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(s,h.value.length);else if(s=(l=h.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var v=h.textContent.length,k=Math.min(p.start,v);p=p.end===void 0?k:Math.min(p.end,v),!s.extend&&k>p&&(v=p,p=k,k=v),v=ub(h,k);var O=ub(h,p);v&&O&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==O.node||s.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),s.removeAllRanges(),k>p?(s.addRange(l),s.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),s.addRange(l)))}}for(l=[],s=h;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)s=l[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var iI=u&&"documentMode"in document&&11>=document.documentMode,Zl=null,cg=null,Tu=null,ug=!1;function fb(s,l,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;ug||Zl==null||Zl!==yt(p)||(p=Zl,"selectionStart"in p&&lg(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Tu&&Su(Tu,p)||(Tu=p,p=Dh(cg,"onSelect"),0<p.length&&(l=new Wl("onSelect","select",null,l,h),s.push({event:l,listeners:p}),l.target=Zl)))}function Ih(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var ec={animationend:Ih("Animation","AnimationEnd"),animationiteration:Ih("Animation","AnimationIteration"),animationstart:Ih("Animation","AnimationStart"),transitionend:Ih("Transition","TransitionEnd")},dg={},mb={};u&&(mb=document.createElement("div").style,"AnimationEvent"in window||(delete ec.animationend.animation,delete ec.animationiteration.animation,delete ec.animationstart.animation),"TransitionEvent"in window||delete ec.transitionend.transition);function Ph(s){if(dg[s])return dg[s];if(!ec[s])return s;var l=ec[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in mb)return dg[s]=l[h];return s}var pb=Ph("animationend"),gb=Ph("animationiteration"),yb=Ph("animationstart"),xb=Ph("transitionend"),vb=new Map,bb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(s,l){vb.set(s,l),o(l,[s])}for(var hg=0;hg<bb.length;hg++){var fg=bb[hg],sI=fg.toLowerCase(),aI=fg[0].toUpperCase()+fg.slice(1);Ba(sI,"on"+aI)}Ba(pb,"onAnimationEnd"),Ba(gb,"onAnimationIteration"),Ba(yb,"onAnimationStart"),Ba("dblclick","onDoubleClick"),Ba("focusin","onFocus"),Ba("focusout","onBlur"),Ba(xb,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function wb(s,l,h){var p=s.type||"unknown-event";s.currentTarget=h,Ln(p,l,void 0,s),s.currentTarget=null}function _b(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var p=s[h],v=p.event;p=p.listeners;e:{var k=void 0;if(l)for(var O=p.length-1;0<=O;O--){var B=p[O],K=B.instance,he=B.currentTarget;if(B=B.listener,K!==k&&v.isPropagationStopped())break e;wb(v,B,he),k=K}else for(O=0;O<p.length;O++){if(B=p[O],K=B.instance,he=B.currentTarget,B=B.listener,K!==k&&v.isPropagationStopped())break e;wb(v,B,he),k=K}}}if(Ie)throw s=Ke,Ie=!1,Ke=null,s}function gn(s,l){var h=l[wg];h===void 0&&(h=l[wg]=new Set);var p=s+"__bubble";h.has(p)||(kb(l,s,2,!1),h.add(p))}function mg(s,l,h){var p=0;l&&(p|=4),kb(h,s,p,l)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function ju(s){if(!s[Rh]){s[Rh]=!0,r.forEach(function(h){h!=="selectionchange"&&(oI.has(h)||mg(h,!1,s),mg(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Rh]||(l[Rh]=!0,mg("selectionchange",!1,l))}}function kb(s,l,h,p){switch(vu(l)){case 1:var v=_n;break;case 4:v=ig;break;default:v=xu}h=v.bind(null,l,h,s),v=void 0,!Me||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),p?v!==void 0?s.addEventListener(l,h,{capture:!0,passive:v}):s.addEventListener(l,h,!0):v!==void 0?s.addEventListener(l,h,{passive:v}):s.addEventListener(l,h,!1)}function pg(s,l,h,p,v){var k=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var B=p.stateNode.containerInfo;if(B===v||B.nodeType===8&&B.parentNode===v)break;if(O===4)for(O=p.return;O!==null;){var K=O.tag;if((K===3||K===4)&&(K=O.stateNode.containerInfo,K===v||K.nodeType===8&&K.parentNode===v))return;O=O.return}for(;B!==null;){if(O=Ho(B),O===null)return;if(K=O.tag,K===5||K===6){p=k=O;continue e}B=B.parentNode}}p=p.return}fe(function(){var he=k,Pe=On(h),De=[];e:{var Ae=vb.get(s);if(Ae!==void 0){var Ye=Wl,nt=s;switch(s){case"keypress":if(Hl(h)===0)break e;case"keydown":case"keyup":Ye=_;break;case"focusin":nt="focus",Ye=Xl;break;case"focusout":nt="blur",Ye=Xl;break;case"beforeblur":case"afterblur":Ye=Xl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=Gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=pe;break;case pb:case gb:case yb:Ye=sa;break;case xb:Ye=tn;break;case"scroll":Ye=sg;break;case"wheel":Ye=zt;break;case"copy":case"cut":case"paste":Ye=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=U}var st=(l&4)!==0,Gn=!st&&s==="scroll",se=st?Ae!==null?Ae+"Capture":null:Ae;st=[];for(var Q=he,le;Q!==null;){le=Q;var Le=le.stateNode;if(le.tag===5&&Le!==null&&(le=Le,se!==null&&(Le=ce(Q,se),Le!=null&&st.push(Au(Q,Le,le)))),Gn)break;Q=Q.return}0<st.length&&(Ae=new Ye(Ae,nt,null,h,Pe),De.push({event:Ae,listeners:st}))}}if((l&7)===0){e:{if(Ae=s==="mouseover"||s==="pointerover",Ye=s==="mouseout"||s==="pointerout",Ae&&h!==or&&(nt=h.relatedTarget||h.fromElement)&&(Ho(nt)||nt[aa]))break e;if((Ye||Ae)&&(Ae=Pe.window===Pe?Pe:(Ae=Pe.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ye?(nt=h.relatedTarget||h.toElement,Ye=he,nt=nt?Ho(nt):null,nt!==null&&(Gn=sn(nt),nt!==Gn||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(Ye=null,nt=he),Ye!==nt)){if(st=Gl,Le="onMouseLeave",se="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(st=U,Le="onPointerLeave",se="onPointerEnter",Q="pointer"),Gn=Ye==null?Ae:rc(Ye),le=nt==null?Ae:rc(nt),Ae=new st(Le,Q+"leave",Ye,h,Pe),Ae.target=Gn,Ae.relatedTarget=le,Le=null,Ho(Pe)===he&&(st=new st(se,Q+"enter",nt,h,Pe),st.target=le,st.relatedTarget=Gn,Le=st),Gn=Le,Ye&&nt)t:{for(st=Ye,se=nt,Q=0,le=st;le;le=tc(le))Q++;for(le=0,Le=se;Le;Le=tc(Le))le++;for(;0<Q-le;)st=tc(st),Q--;for(;0<le-Q;)se=tc(se),le--;for(;Q--;){if(st===se||se!==null&&st===se.alternate)break t;st=tc(st),se=tc(se)}st=null}else st=null;Ye!==null&&Eb(De,Ae,Ye,st,!1),nt!==null&&Gn!==null&&Eb(De,Gn,nt,st,!0)}}e:{if(Ae=he?rc(he):window,Ye=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Ae.type==="file")var at=QA;else if(rb(Ae))if(sb)at=tI;else{at=ZA;var ht=JA}else(Ye=Ae.nodeName)&&Ye.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(at=eI);if(at&&(at=at(s,he))){ib(De,at,h,Pe);break e}ht&&ht(s,Ae,he),s==="focusout"&&(ht=Ae._wrapperState)&&ht.controlled&&Ae.type==="number"&&Oe(Ae,"number",Ae.value)}switch(ht=he?rc(he):window,s){case"focusin":(rb(ht)||ht.contentEditable==="true")&&(Zl=ht,cg=he,Tu=null);break;case"focusout":Tu=cg=Zl=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,fb(De,h,Pe);break;case"selectionchange":if(iI)break;case"keydown":case"keyup":fb(De,h,Pe)}var ft;if(Zn)e:{switch(s){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else Jl?tb(s,h)&&(kt="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(kt="onCompositionStart");kt&&(Bo&&h.locale!=="ko"&&(Jl||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Jl&&(ft=bu()):(Ei=Pe,Bl="value"in Ei?Ei.value:Ei.textContent,Jl=!0)),ht=Dh(he,kt),0<ht.length&&(kt=new ku(kt,s,null,h,Pe),De.push({event:kt,listeners:ht}),ft?kt.data=ft:(ft=nb(h),ft!==null&&(kt.data=ft)))),(ft=Ni?GA(s,h):KA(s,h))&&(he=Dh(he,"onBeforeInput"),0<he.length&&(Pe=new ku("onBeforeInput","beforeinput",null,h,Pe),De.push({event:Pe,listeners:he}),Pe.data=ft))}_b(De,l)})}function Au(s,l,h){return{instance:s,listener:l,currentTarget:h}}function Dh(s,l){for(var h=l+"Capture",p=[];s!==null;){var v=s,k=v.stateNode;v.tag===5&&k!==null&&(v=k,k=ce(s,h),k!=null&&p.unshift(Au(s,k,v)),k=ce(s,l),k!=null&&p.push(Au(s,k,v))),s=s.return}return p}function tc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Eb(s,l,h,p,v){for(var k=l._reactName,O=[];h!==null&&h!==p;){var B=h,K=B.alternate,he=B.stateNode;if(K!==null&&K===p)break;B.tag===5&&he!==null&&(B=he,v?(K=ce(h,k),K!=null&&O.unshift(Au(h,K,B))):v||(K=ce(h,k),K!=null&&O.push(Au(h,K,B)))),h=h.return}O.length!==0&&s.push({event:l,listeners:O})}var lI=/\r\n?/g,cI=/\u0000|\uFFFD/g;function Nb(s){return(typeof s=="string"?s:""+s).replace(lI,`
`).replace(cI,"")}function Mh(s,l,h){if(l=Nb(l),Nb(s)!==l&&h)throw Error(n(425))}function Oh(){}var gg=null,yg=null;function xg(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var vg=typeof setTimeout=="function"?setTimeout:void 0,uI=typeof clearTimeout=="function"?clearTimeout:void 0,Sb=typeof Promise=="function"?Promise:void 0,dI=typeof queueMicrotask=="function"?queueMicrotask:typeof Sb<"u"?function(s){return Sb.resolve(null).then(s).catch(hI)}:vg;function hI(s){setTimeout(function(){throw s})}function bg(s,l){var h=l,p=0;do{var v=h.nextSibling;if(s.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(p===0){s.removeChild(v),rs(l);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=v}while(h);rs(l)}function Ha(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Tb(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}var nc=Math.random().toString(36).slice(2),Ts="__reactFiber$"+nc,Iu="__reactProps$"+nc,aa="__reactContainer$"+nc,wg="__reactEvents$"+nc,fI="__reactListeners$"+nc,mI="__reactHandles$"+nc;function Ho(s){var l=s[Ts];if(l)return l;for(var h=s.parentNode;h;){if(l=h[aa]||h[Ts]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=Tb(s);s!==null;){if(h=s[Ts])return h;s=Tb(s)}return l}s=h,h=s.parentNode}return null}function Pu(s){return s=s[Ts]||s[aa],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function rc(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Lh(s){return s[Iu]||null}var _g=[],ic=-1;function Wa(s){return{current:s}}function yn(s){0>ic||(s.current=_g[ic],_g[ic]=null,ic--)}function fn(s,l){ic++,_g[ic]=s.current,s.current=l}var qa={},Lr=Wa(qa),ci=Wa(!1),Wo=qa;function sc(s,l){var h=s.type.contextTypes;if(!h)return qa;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===l)return p.__reactInternalMemoizedMaskedChildContext;var v={},k;for(k in h)v[k]=l[k];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=v),v}function ui(s){return s=s.childContextTypes,s!=null}function Vh(){yn(ci),yn(Lr)}function Cb(s,l,h){if(Lr.current!==qa)throw Error(n(168));fn(Lr,l),fn(ci,h)}function jb(s,l,h){var p=s.stateNode;if(l=l.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var v in p)if(!(v in l))throw Error(n(108,lt(s)||"Unknown",v));return ge({},h,p)}function Fh(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||qa,Wo=Lr.current,fn(Lr,s),fn(ci,ci.current),!0}function Ab(s,l,h){var p=s.stateNode;if(!p)throw Error(n(169));h?(s=jb(s,l,Wo),p.__reactInternalMemoizedMergedChildContext=s,yn(ci),yn(Lr),fn(Lr,s)):yn(ci),fn(ci,h)}var oa=null,Uh=!1,kg=!1;function Ib(s){oa===null?oa=[s]:oa.push(s)}function pI(s){Uh=!0,Ib(s)}function Ga(){if(!kg&&oa!==null){kg=!0;var s=0,l=Lt;try{var h=oa;for(Lt=1;s<h.length;s++){var p=h[s];do p=p(!0);while(p!==null)}oa=null,Uh=!1}catch(v){throw oa!==null&&(oa=oa.slice(s+1)),wr(es,Ga),v}finally{Lt=l,kg=!1}}return null}var ac=[],oc=0,$h=null,zh=0,Vi=[],Fi=0,qo=null,la=1,ca="";function Go(s,l){ac[oc++]=zh,ac[oc++]=$h,$h=s,zh=l}function Pb(s,l,h){Vi[Fi++]=la,Vi[Fi++]=ca,Vi[Fi++]=qo,qo=s;var p=la;s=ca;var v=32-Er(p)-1;p&=~(1<<v),h+=1;var k=32-Er(l)+v;if(30<k){var O=v-v%5;k=(p&(1<<O)-1).toString(32),p>>=O,v-=O,la=1<<32-Er(l)+v|h<<v|p,ca=k+s}else la=1<<k|h<<v|p,ca=s}function Eg(s){s.return!==null&&(Go(s,1),Pb(s,1,0))}function Ng(s){for(;s===$h;)$h=ac[--oc],ac[oc]=null,zh=ac[--oc],ac[oc]=null;for(;s===qo;)qo=Vi[--Fi],Vi[Fi]=null,ca=Vi[--Fi],Vi[Fi]=null,la=Vi[--Fi],Vi[Fi]=null}var Si=null,Ti=null,kn=!1,as=null;function Rb(s,l){var h=Bi(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=s,l=s.deletions,l===null?(s.deletions=[h],s.flags|=16):l.push(h)}function Db(s,l){switch(s.tag){case 5:var h=s.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Si=s,Ti=Ha(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Si=s,Ti=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=qo!==null?{id:la,overflow:ca}:null,s.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Bi(18,null,null,0),h.stateNode=l,h.return=s,s.child=h,Si=s,Ti=null,!0):!1;default:return!1}}function Sg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Tg(s){if(kn){var l=Ti;if(l){var h=l;if(!Db(s,l)){if(Sg(s))throw Error(n(418));l=Ha(h.nextSibling);var p=Si;l&&Db(s,l)?Rb(p,h):(s.flags=s.flags&-4097|2,kn=!1,Si=s)}}else{if(Sg(s))throw Error(n(418));s.flags=s.flags&-4097|2,kn=!1,Si=s}}}function Mb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Si=s}function Bh(s){if(s!==Si)return!1;if(!kn)return Mb(s),kn=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!xg(s.type,s.memoizedProps)),l&&(l=Ti)){if(Sg(s))throw Ob(),Error(n(418));for(;l;)Rb(s,l),l=Ha(l.nextSibling)}if(Mb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(l===0){Ti=Ha(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}s=s.nextSibling}Ti=null}}else Ti=Si?Ha(s.stateNode.nextSibling):null;return!0}function Ob(){for(var s=Ti;s;)s=Ha(s.nextSibling)}function lc(){Ti=Si=null,kn=!1}function Cg(s){as===null?as=[s]:as.push(s)}var gI=L.ReactCurrentBatchConfig;function Ru(s,l,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var p=h.stateNode}if(!p)throw Error(n(147,s));var v=p,k=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===k?l.ref:(l=function(O){var B=v.refs;O===null?delete B[k]:B[k]=O},l._stringRef=k,l)}if(typeof s!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,s))}return s}function Hh(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Lb(s){var l=s._init;return l(s._payload)}function Vb(s){function l(se,Q){if(s){var le=se.deletions;le===null?(se.deletions=[Q],se.flags|=16):le.push(Q)}}function h(se,Q){if(!s)return null;for(;Q!==null;)l(se,Q),Q=Q.sibling;return null}function p(se,Q){for(se=new Map;Q!==null;)Q.key!==null?se.set(Q.key,Q):se.set(Q.index,Q),Q=Q.sibling;return se}function v(se,Q){return se=to(se,Q),se.index=0,se.sibling=null,se}function k(se,Q,le){return se.index=le,s?(le=se.alternate,le!==null?(le=le.index,le<Q?(se.flags|=2,Q):le):(se.flags|=2,Q)):(se.flags|=1048576,Q)}function O(se){return s&&se.alternate===null&&(se.flags|=2),se}function B(se,Q,le,Le){return Q===null||Q.tag!==6?(Q=v0(le,se.mode,Le),Q.return=se,Q):(Q=v(Q,le),Q.return=se,Q)}function K(se,Q,le,Le){var at=le.type;return at===D?Pe(se,Q,le.props.children,Le,le.key):Q!==null&&(Q.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===we&&Lb(at)===Q.type)?(Le=v(Q,le.props),Le.ref=Ru(se,Q,le),Le.return=se,Le):(Le=pf(le.type,le.key,le.props,null,se.mode,Le),Le.ref=Ru(se,Q,le),Le.return=se,Le)}function he(se,Q,le,Le){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==le.containerInfo||Q.stateNode.implementation!==le.implementation?(Q=b0(le,se.mode,Le),Q.return=se,Q):(Q=v(Q,le.children||[]),Q.return=se,Q)}function Pe(se,Q,le,Le,at){return Q===null||Q.tag!==7?(Q=tl(le,se.mode,Le,at),Q.return=se,Q):(Q=v(Q,le),Q.return=se,Q)}function De(se,Q,le){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=v0(""+Q,se.mode,le),Q.return=se,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case z:return le=pf(Q.type,Q.key,Q.props,null,se.mode,le),le.ref=Ru(se,null,Q),le.return=se,le;case q:return Q=b0(Q,se.mode,le),Q.return=se,Q;case we:var Le=Q._init;return De(se,Le(Q._payload),le)}if(rt(Q)||ae(Q))return Q=tl(Q,se.mode,le,null),Q.return=se,Q;Hh(se,Q)}return null}function Ae(se,Q,le,Le){var at=Q!==null?Q.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return at!==null?null:B(se,Q,""+le,Le);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case z:return le.key===at?K(se,Q,le,Le):null;case q:return le.key===at?he(se,Q,le,Le):null;case we:return at=le._init,Ae(se,Q,at(le._payload),Le)}if(rt(le)||ae(le))return at!==null?null:Pe(se,Q,le,Le,null);Hh(se,le)}return null}function Ye(se,Q,le,Le,at){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return se=se.get(le)||null,B(Q,se,""+Le,at);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case z:return se=se.get(Le.key===null?le:Le.key)||null,K(Q,se,Le,at);case q:return se=se.get(Le.key===null?le:Le.key)||null,he(Q,se,Le,at);case we:var ht=Le._init;return Ye(se,Q,le,ht(Le._payload),at)}if(rt(Le)||ae(Le))return se=se.get(le)||null,Pe(Q,se,Le,at,null);Hh(Q,Le)}return null}function nt(se,Q,le,Le){for(var at=null,ht=null,ft=Q,kt=Q=0,gr=null;ft!==null&&kt<le.length;kt++){ft.index>kt?(gr=ft,ft=null):gr=ft.sibling;var Gt=Ae(se,ft,le[kt],Le);if(Gt===null){ft===null&&(ft=gr);break}s&&ft&&Gt.alternate===null&&l(se,ft),Q=k(Gt,Q,kt),ht===null?at=Gt:ht.sibling=Gt,ht=Gt,ft=gr}if(kt===le.length)return h(se,ft),kn&&Go(se,kt),at;if(ft===null){for(;kt<le.length;kt++)ft=De(se,le[kt],Le),ft!==null&&(Q=k(ft,Q,kt),ht===null?at=ft:ht.sibling=ft,ht=ft);return kn&&Go(se,kt),at}for(ft=p(se,ft);kt<le.length;kt++)gr=Ye(ft,se,kt,le[kt],Le),gr!==null&&(s&&gr.alternate!==null&&ft.delete(gr.key===null?kt:gr.key),Q=k(gr,Q,kt),ht===null?at=gr:ht.sibling=gr,ht=gr);return s&&ft.forEach(function(no){return l(se,no)}),kn&&Go(se,kt),at}function st(se,Q,le,Le){var at=ae(le);if(typeof at!="function")throw Error(n(150));if(le=at.call(le),le==null)throw Error(n(151));for(var ht=at=null,ft=Q,kt=Q=0,gr=null,Gt=le.next();ft!==null&&!Gt.done;kt++,Gt=le.next()){ft.index>kt?(gr=ft,ft=null):gr=ft.sibling;var no=Ae(se,ft,Gt.value,Le);if(no===null){ft===null&&(ft=gr);break}s&&ft&&no.alternate===null&&l(se,ft),Q=k(no,Q,kt),ht===null?at=no:ht.sibling=no,ht=no,ft=gr}if(Gt.done)return h(se,ft),kn&&Go(se,kt),at;if(ft===null){for(;!Gt.done;kt++,Gt=le.next())Gt=De(se,Gt.value,Le),Gt!==null&&(Q=k(Gt,Q,kt),ht===null?at=Gt:ht.sibling=Gt,ht=Gt);return kn&&Go(se,kt),at}for(ft=p(se,ft);!Gt.done;kt++,Gt=le.next())Gt=Ye(ft,se,kt,Gt.value,Le),Gt!==null&&(s&&Gt.alternate!==null&&ft.delete(Gt.key===null?kt:Gt.key),Q=k(Gt,Q,kt),ht===null?at=Gt:ht.sibling=Gt,ht=Gt);return s&&ft.forEach(function(XI){return l(se,XI)}),kn&&Go(se,kt),at}function Gn(se,Q,le,Le){if(typeof le=="object"&&le!==null&&le.type===D&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case z:e:{for(var at=le.key,ht=Q;ht!==null;){if(ht.key===at){if(at=le.type,at===D){if(ht.tag===7){h(se,ht.sibling),Q=v(ht,le.props.children),Q.return=se,se=Q;break e}}else if(ht.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===we&&Lb(at)===ht.type){h(se,ht.sibling),Q=v(ht,le.props),Q.ref=Ru(se,ht,le),Q.return=se,se=Q;break e}h(se,ht);break}else l(se,ht);ht=ht.sibling}le.type===D?(Q=tl(le.props.children,se.mode,Le,le.key),Q.return=se,se=Q):(Le=pf(le.type,le.key,le.props,null,se.mode,Le),Le.ref=Ru(se,Q,le),Le.return=se,se=Le)}return O(se);case q:e:{for(ht=le.key;Q!==null;){if(Q.key===ht)if(Q.tag===4&&Q.stateNode.containerInfo===le.containerInfo&&Q.stateNode.implementation===le.implementation){h(se,Q.sibling),Q=v(Q,le.children||[]),Q.return=se,se=Q;break e}else{h(se,Q);break}else l(se,Q);Q=Q.sibling}Q=b0(le,se.mode,Le),Q.return=se,se=Q}return O(se);case we:return ht=le._init,Gn(se,Q,ht(le._payload),Le)}if(rt(le))return nt(se,Q,le,Le);if(ae(le))return st(se,Q,le,Le);Hh(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,Q!==null&&Q.tag===6?(h(se,Q.sibling),Q=v(Q,le),Q.return=se,se=Q):(h(se,Q),Q=v0(le,se.mode,Le),Q.return=se,se=Q),O(se)):h(se,Q)}return Gn}var cc=Vb(!0),Fb=Vb(!1),Wh=Wa(null),qh=null,uc=null,jg=null;function Ag(){jg=uc=qh=null}function Ig(s){var l=Wh.current;yn(Wh),s._currentValue=l}function Pg(s,l,h){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===h)break;s=s.return}}function dc(s,l){qh=s,jg=uc=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(di=!0),s.firstContext=null)}function Ui(s){var l=s._currentValue;if(jg!==s)if(s={context:s,memoizedValue:l,next:null},uc===null){if(qh===null)throw Error(n(308));uc=s,qh.dependencies={lanes:0,firstContext:s}}else uc=uc.next=s;return l}var Ko=null;function Rg(s){Ko===null?Ko=[s]:Ko.push(s)}function Ub(s,l,h,p){var v=l.interleaved;return v===null?(h.next=h,Rg(l)):(h.next=v.next,v.next=h),l.interleaved=h,ua(s,p)}function ua(s,l){s.lanes|=l;var h=s.alternate;for(h!==null&&(h.lanes|=l),h=s,s=s.return;s!==null;)s.childLanes|=l,h=s.alternate,h!==null&&(h.childLanes|=l),h=s,s=s.return;return h.tag===3?h.stateNode:null}var Ka=!1;function Dg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $b(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function da(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Xa(s,l,h){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(qt&2)!==0){var v=p.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),p.pending=l,ua(s,h)}return v=p.interleaved,v===null?(l.next=l,Rg(p)):(l.next=v.next,v.next=l),p.interleaved=l,ua(s,h)}function Gh(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var p=l.lanes;p&=s.pendingLanes,h|=p,l.lanes=h,ws(s,h)}}function zb(s,l){var h=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,k=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};k===null?v=k=O:k=k.next=O,h=h.next}while(h!==null);k===null?v=k=l:k=k.next=l}else v=k=l;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:k,shared:p.shared,effects:p.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}function Kh(s,l,h,p){var v=s.updateQueue;Ka=!1;var k=v.firstBaseUpdate,O=v.lastBaseUpdate,B=v.shared.pending;if(B!==null){v.shared.pending=null;var K=B,he=K.next;K.next=null,O===null?k=he:O.next=he,O=K;var Pe=s.alternate;Pe!==null&&(Pe=Pe.updateQueue,B=Pe.lastBaseUpdate,B!==O&&(B===null?Pe.firstBaseUpdate=he:B.next=he,Pe.lastBaseUpdate=K))}if(k!==null){var De=v.baseState;O=0,Pe=he=K=null,B=k;do{var Ae=B.lane,Ye=B.eventTime;if((p&Ae)===Ae){Pe!==null&&(Pe=Pe.next={eventTime:Ye,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var nt=s,st=B;switch(Ae=l,Ye=h,st.tag){case 1:if(nt=st.payload,typeof nt=="function"){De=nt.call(Ye,De,Ae);break e}De=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=st.payload,Ae=typeof nt=="function"?nt.call(Ye,De,Ae):nt,Ae==null)break e;De=ge({},De,Ae);break e;case 2:Ka=!0}}B.callback!==null&&B.lane!==0&&(s.flags|=64,Ae=v.effects,Ae===null?v.effects=[B]:Ae.push(B))}else Ye={eventTime:Ye,lane:Ae,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Pe===null?(he=Pe=Ye,K=De):Pe=Pe.next=Ye,O|=Ae;if(B=B.next,B===null){if(B=v.shared.pending,B===null)break;Ae=B,B=Ae.next,Ae.next=null,v.lastBaseUpdate=Ae,v.shared.pending=null}}while(!0);if(Pe===null&&(K=De),v.baseState=K,v.firstBaseUpdate=he,v.lastBaseUpdate=Pe,l=v.shared.interleaved,l!==null){v=l;do O|=v.lane,v=v.next;while(v!==l)}else k===null&&(v.shared.lanes=0);Qo|=O,s.lanes=O,s.memoizedState=De}}function Bb(s,l,h){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var p=s[l],v=p.callback;if(v!==null){if(p.callback=null,p=h,typeof v!="function")throw Error(n(191,v));v.call(p)}}}var Du={},Cs=Wa(Du),Mu=Wa(Du),Ou=Wa(Du);function Xo(s){if(s===Du)throw Error(n(174));return s}function Mg(s,l){switch(fn(Ou,l),fn(Mu,s),fn(Cs,Du),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Te(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Te(l,s)}yn(Cs),fn(Cs,l)}function hc(){yn(Cs),yn(Mu),yn(Ou)}function Hb(s){Xo(Ou.current);var l=Xo(Cs.current),h=Te(l,s.type);l!==h&&(fn(Mu,s),fn(Cs,h))}function Og(s){Mu.current===s&&(yn(Cs),yn(Mu))}var jn=Wa(0);function Xh(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Lg=[];function Vg(){for(var s=0;s<Lg.length;s++)Lg[s]._workInProgressVersionPrimary=null;Lg.length=0}var Yh=L.ReactCurrentDispatcher,Fg=L.ReactCurrentBatchConfig,Yo=0,An=null,cr=null,mr=null,Qh=!1,Lu=!1,Vu=0,yI=0;function Vr(){throw Error(n(321))}function Ug(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!ss(s[h],l[h]))return!1;return!0}function $g(s,l,h,p,v,k){if(Yo=k,An=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Yh.current=s===null||s.memoizedState===null?wI:_I,s=h(p,v),Lu){k=0;do{if(Lu=!1,Vu=0,25<=k)throw Error(n(301));k+=1,mr=cr=null,l.updateQueue=null,Yh.current=kI,s=h(p,v)}while(Lu)}if(Yh.current=ef,l=cr!==null&&cr.next!==null,Yo=0,mr=cr=An=null,Qh=!1,l)throw Error(n(300));return s}function zg(){var s=Vu!==0;return Vu=0,s}function js(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?An.memoizedState=mr=s:mr=mr.next=s,mr}function $i(){if(cr===null){var s=An.alternate;s=s!==null?s.memoizedState:null}else s=cr.next;var l=mr===null?An.memoizedState:mr.next;if(l!==null)mr=l,cr=s;else{if(s===null)throw Error(n(310));cr=s,s={memoizedState:cr.memoizedState,baseState:cr.baseState,baseQueue:cr.baseQueue,queue:cr.queue,next:null},mr===null?An.memoizedState=mr=s:mr=mr.next=s}return mr}function Fu(s,l){return typeof l=="function"?l(s):l}function Bg(s){var l=$i(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var p=cr,v=p.baseQueue,k=h.pending;if(k!==null){if(v!==null){var O=v.next;v.next=k.next,k.next=O}p.baseQueue=v=k,h.pending=null}if(v!==null){k=v.next,p=p.baseState;var B=O=null,K=null,he=k;do{var Pe=he.lane;if((Yo&Pe)===Pe)K!==null&&(K=K.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),p=he.hasEagerState?he.eagerState:s(p,he.action);else{var De={lane:Pe,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};K===null?(B=K=De,O=p):K=K.next=De,An.lanes|=Pe,Qo|=Pe}he=he.next}while(he!==null&&he!==k);K===null?O=p:K.next=B,ss(p,l.memoizedState)||(di=!0),l.memoizedState=p,l.baseState=O,l.baseQueue=K,h.lastRenderedState=p}if(s=h.interleaved,s!==null){v=s;do k=v.lane,An.lanes|=k,Qo|=k,v=v.next;while(v!==s)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Hg(s){var l=$i(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var p=h.dispatch,v=h.pending,k=l.memoizedState;if(v!==null){h.pending=null;var O=v=v.next;do k=s(k,O.action),O=O.next;while(O!==v);ss(k,l.memoizedState)||(di=!0),l.memoizedState=k,l.baseQueue===null&&(l.baseState=k),h.lastRenderedState=k}return[k,p]}function Wb(){}function qb(s,l){var h=An,p=$i(),v=l(),k=!ss(p.memoizedState,v);if(k&&(p.memoizedState=v,di=!0),p=p.queue,Wg(Xb.bind(null,h,p,s),[s]),p.getSnapshot!==l||k||mr!==null&&mr.memoizedState.tag&1){if(h.flags|=2048,Uu(9,Kb.bind(null,h,p,v,l),void 0,null),pr===null)throw Error(n(349));(Yo&30)!==0||Gb(h,l,v)}return v}function Gb(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=An.updateQueue,l===null?(l={lastEffect:null,stores:null},An.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function Kb(s,l,h,p){l.value=h,l.getSnapshot=p,Yb(l)&&Qb(s)}function Xb(s,l,h){return h(function(){Yb(l)&&Qb(s)})}function Yb(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!ss(s,h)}catch{return!0}}function Qb(s){var l=ua(s,1);l!==null&&us(l,s,1,-1)}function Jb(s){var l=js();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:s},l.queue=s,s=s.dispatch=bI.bind(null,An,s),[l.memoizedState,s]}function Uu(s,l,h,p){return s={tag:s,create:l,destroy:h,deps:p,next:null},l=An.updateQueue,l===null?(l={lastEffect:null,stores:null},An.updateQueue=l,l.lastEffect=s.next=s):(h=l.lastEffect,h===null?l.lastEffect=s.next=s:(p=h.next,h.next=s,s.next=p,l.lastEffect=s)),s}function Zb(){return $i().memoizedState}function Jh(s,l,h,p){var v=js();An.flags|=s,v.memoizedState=Uu(1|l,h,void 0,p===void 0?null:p)}function Zh(s,l,h,p){var v=$i();p=p===void 0?null:p;var k=void 0;if(cr!==null){var O=cr.memoizedState;if(k=O.destroy,p!==null&&Ug(p,O.deps)){v.memoizedState=Uu(l,h,k,p);return}}An.flags|=s,v.memoizedState=Uu(1|l,h,k,p)}function ew(s,l){return Jh(8390656,8,s,l)}function Wg(s,l){return Zh(2048,8,s,l)}function tw(s,l){return Zh(4,2,s,l)}function nw(s,l){return Zh(4,4,s,l)}function rw(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function iw(s,l,h){return h=h!=null?h.concat([s]):null,Zh(4,4,rw.bind(null,l,s),h)}function qg(){}function sw(s,l){var h=$i();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&Ug(l,p[1])?p[0]:(h.memoizedState=[s,l],s)}function aw(s,l){var h=$i();l=l===void 0?null:l;var p=h.memoizedState;return p!==null&&l!==null&&Ug(l,p[1])?p[0]:(s=s(),h.memoizedState=[s,l],s)}function ow(s,l,h){return(Yo&21)===0?(s.baseState&&(s.baseState=!1,di=!0),s.memoizedState=h):(ss(h,l)||(h=ea(),An.lanes|=h,Qo|=h,s.baseState=!0),l)}function xI(s,l){var h=Lt;Lt=h!==0&&4>h?h:4,s(!0);var p=Fg.transition;Fg.transition={};try{s(!1),l()}finally{Lt=h,Fg.transition=p}}function lw(){return $i().memoizedState}function vI(s,l,h){var p=Za(s);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},cw(s))uw(l,h);else if(h=Ub(s,l,h,p),h!==null){var v=ni();us(h,s,p,v),dw(h,l,p)}}function bI(s,l,h){var p=Za(s),v={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(cw(s))uw(l,v);else{var k=s.alternate;if(s.lanes===0&&(k===null||k.lanes===0)&&(k=l.lastRenderedReducer,k!==null))try{var O=l.lastRenderedState,B=k(O,h);if(v.hasEagerState=!0,v.eagerState=B,ss(B,O)){var K=l.interleaved;K===null?(v.next=v,Rg(l)):(v.next=K.next,K.next=v),l.interleaved=v;return}}catch{}finally{}h=Ub(s,l,v,p),h!==null&&(v=ni(),us(h,s,p,v),dw(h,l,p))}}function cw(s){var l=s.alternate;return s===An||l!==null&&l===An}function uw(s,l){Lu=Qh=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function dw(s,l,h){if((h&4194240)!==0){var p=l.lanes;p&=s.pendingLanes,h|=p,l.lanes=h,ws(s,h)}}var ef={readContext:Ui,useCallback:Vr,useContext:Vr,useEffect:Vr,useImperativeHandle:Vr,useInsertionEffect:Vr,useLayoutEffect:Vr,useMemo:Vr,useReducer:Vr,useRef:Vr,useState:Vr,useDebugValue:Vr,useDeferredValue:Vr,useTransition:Vr,useMutableSource:Vr,useSyncExternalStore:Vr,useId:Vr,unstable_isNewReconciler:!1},wI={readContext:Ui,useCallback:function(s,l){return js().memoizedState=[s,l===void 0?null:l],s},useContext:Ui,useEffect:ew,useImperativeHandle:function(s,l,h){return h=h!=null?h.concat([s]):null,Jh(4194308,4,rw.bind(null,l,s),h)},useLayoutEffect:function(s,l){return Jh(4194308,4,s,l)},useInsertionEffect:function(s,l){return Jh(4,2,s,l)},useMemo:function(s,l){var h=js();return l=l===void 0?null:l,s=s(),h.memoizedState=[s,l],s},useReducer:function(s,l,h){var p=js();return l=h!==void 0?h(l):l,p.memoizedState=p.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},p.queue=s,s=s.dispatch=vI.bind(null,An,s),[p.memoizedState,s]},useRef:function(s){var l=js();return s={current:s},l.memoizedState=s},useState:Jb,useDebugValue:qg,useDeferredValue:function(s){return js().memoizedState=s},useTransition:function(){var s=Jb(!1),l=s[0];return s=xI.bind(null,s[1]),js().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,h){var p=An,v=js();if(kn){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),pr===null)throw Error(n(349));(Yo&30)!==0||Gb(p,l,h)}v.memoizedState=h;var k={value:h,getSnapshot:l};return v.queue=k,ew(Xb.bind(null,p,k,s),[s]),p.flags|=2048,Uu(9,Kb.bind(null,p,k,h,l),void 0,null),h},useId:function(){var s=js(),l=pr.identifierPrefix;if(kn){var h=ca,p=la;h=(p&~(1<<32-Er(p)-1)).toString(32)+h,l=":"+l+"R"+h,h=Vu++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=yI++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},_I={readContext:Ui,useCallback:sw,useContext:Ui,useEffect:Wg,useImperativeHandle:iw,useInsertionEffect:tw,useLayoutEffect:nw,useMemo:aw,useReducer:Bg,useRef:Zb,useState:function(){return Bg(Fu)},useDebugValue:qg,useDeferredValue:function(s){var l=$i();return ow(l,cr.memoizedState,s)},useTransition:function(){var s=Bg(Fu)[0],l=$i().memoizedState;return[s,l]},useMutableSource:Wb,useSyncExternalStore:qb,useId:lw,unstable_isNewReconciler:!1},kI={readContext:Ui,useCallback:sw,useContext:Ui,useEffect:Wg,useImperativeHandle:iw,useInsertionEffect:tw,useLayoutEffect:nw,useMemo:aw,useReducer:Hg,useRef:Zb,useState:function(){return Hg(Fu)},useDebugValue:qg,useDeferredValue:function(s){var l=$i();return cr===null?l.memoizedState=s:ow(l,cr.memoizedState,s)},useTransition:function(){var s=Hg(Fu)[0],l=$i().memoizedState;return[s,l]},useMutableSource:Wb,useSyncExternalStore:qb,useId:lw,unstable_isNewReconciler:!1};function os(s,l){if(s&&s.defaultProps){l=ge({},l),s=s.defaultProps;for(var h in s)l[h]===void 0&&(l[h]=s[h]);return l}return l}function Gg(s,l,h,p){l=s.memoizedState,h=h(p,l),h=h==null?l:ge({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var tf={isMounted:function(s){return(s=s._reactInternals)?sn(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var p=ni(),v=Za(s),k=da(p,v);k.payload=l,h!=null&&(k.callback=h),l=Xa(s,k,v),l!==null&&(us(l,s,v,p),Gh(l,s,v))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var p=ni(),v=Za(s),k=da(p,v);k.tag=1,k.payload=l,h!=null&&(k.callback=h),l=Xa(s,k,v),l!==null&&(us(l,s,v,p),Gh(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=ni(),p=Za(s),v=da(h,p);v.tag=2,l!=null&&(v.callback=l),l=Xa(s,v,p),l!==null&&(us(l,s,p,h),Gh(l,s,p))}};function hw(s,l,h,p,v,k,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,k,O):l.prototype&&l.prototype.isPureReactComponent?!Su(h,p)||!Su(v,k):!0}function fw(s,l,h){var p=!1,v=qa,k=l.contextType;return typeof k=="object"&&k!==null?k=Ui(k):(v=ui(l)?Wo:Lr.current,p=l.contextTypes,k=(p=p!=null)?sc(s,v):qa),l=new l(h,k),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=tf,s.stateNode=l,l._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=k),l}function mw(s,l,h,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,p),l.state!==s&&tf.enqueueReplaceState(l,l.state,null)}function Kg(s,l,h,p){var v=s.stateNode;v.props=h,v.state=s.memoizedState,v.refs={},Dg(s);var k=l.contextType;typeof k=="object"&&k!==null?v.context=Ui(k):(k=ui(l)?Wo:Lr.current,v.context=sc(s,k)),v.state=s.memoizedState,k=l.getDerivedStateFromProps,typeof k=="function"&&(Gg(s,l,k,h),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&tf.enqueueReplaceState(v,v.state,null),Kh(s,h,v,p),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function fc(s,l){try{var h="",p=l;do h+=Ge(p),p=p.return;while(p);var v=h}catch(k){v=`
Error generating stack: `+k.message+`
`+k.stack}return{value:s,source:l,stack:v,digest:null}}function Xg(s,l,h){return{value:s,source:null,stack:h??null,digest:l??null}}function Yg(s,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var EI=typeof WeakMap=="function"?WeakMap:Map;function pw(s,l,h){h=da(-1,h),h.tag=3,h.payload={element:null};var p=l.value;return h.callback=function(){cf||(cf=!0,d0=p),Yg(s,l)},h}function gw(s,l,h){h=da(-1,h),h.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var v=l.value;h.payload=function(){return p(v)},h.callback=function(){Yg(s,l)}}var k=s.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(h.callback=function(){Yg(s,l),typeof p!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),h}function yw(s,l,h){var p=s.pingCache;if(p===null){p=s.pingCache=new EI;var v=new Set;p.set(l,v)}else v=p.get(l),v===void 0&&(v=new Set,p.set(l,v));v.has(h)||(v.add(h),s=VI.bind(null,s,l,h),l.then(s,s))}function xw(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function vw(s,l,h,p,v){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=da(-1,1),l.tag=2,Xa(h,l,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var NI=L.ReactCurrentOwner,di=!1;function ti(s,l,h,p){l.child=s===null?Fb(l,null,h,p):cc(l,s.child,h,p)}function bw(s,l,h,p,v){h=h.render;var k=l.ref;return dc(l,v),p=$g(s,l,h,p,k,v),h=zg(),s!==null&&!di?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,ha(s,l,v)):(kn&&h&&Eg(l),l.flags|=1,ti(s,l,p,v),l.child)}function ww(s,l,h,p,v){if(s===null){var k=h.type;return typeof k=="function"&&!x0(k)&&k.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=k,_w(s,l,k,p,v)):(s=pf(h.type,null,p,l,l.mode,v),s.ref=l.ref,s.return=l,l.child=s)}if(k=s.child,(s.lanes&v)===0){var O=k.memoizedProps;if(h=h.compare,h=h!==null?h:Su,h(O,p)&&s.ref===l.ref)return ha(s,l,v)}return l.flags|=1,s=to(k,p),s.ref=l.ref,s.return=l,l.child=s}function _w(s,l,h,p,v){if(s!==null){var k=s.memoizedProps;if(Su(k,p)&&s.ref===l.ref)if(di=!1,l.pendingProps=p=k,(s.lanes&v)!==0)(s.flags&131072)!==0&&(di=!0);else return l.lanes=s.lanes,ha(s,l,v)}return Qg(s,l,h,p,v)}function kw(s,l,h){var p=l.pendingProps,v=p.children,k=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(pc,Ci),Ci|=h;else{if((h&1073741824)===0)return s=k!==null?k.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,fn(pc,Ci),Ci|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=k!==null?k.baseLanes:h,fn(pc,Ci),Ci|=p}else k!==null?(p=k.baseLanes|h,l.memoizedState=null):p=h,fn(pc,Ci),Ci|=p;return ti(s,l,v,h),l.child}function Ew(s,l){var h=l.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function Qg(s,l,h,p,v){var k=ui(h)?Wo:Lr.current;return k=sc(l,k),dc(l,v),h=$g(s,l,h,p,k,v),p=zg(),s!==null&&!di?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,ha(s,l,v)):(kn&&p&&Eg(l),l.flags|=1,ti(s,l,h,v),l.child)}function Nw(s,l,h,p,v){if(ui(h)){var k=!0;Fh(l)}else k=!1;if(dc(l,v),l.stateNode===null)rf(s,l),fw(l,h,p),Kg(l,h,p,v),p=!0;else if(s===null){var O=l.stateNode,B=l.memoizedProps;O.props=B;var K=O.context,he=h.contextType;typeof he=="object"&&he!==null?he=Ui(he):(he=ui(h)?Wo:Lr.current,he=sc(l,he));var Pe=h.getDerivedStateFromProps,De=typeof Pe=="function"||typeof O.getSnapshotBeforeUpdate=="function";De||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==p||K!==he)&&mw(l,O,p,he),Ka=!1;var Ae=l.memoizedState;O.state=Ae,Kh(l,p,O,v),K=l.memoizedState,B!==p||Ae!==K||ci.current||Ka?(typeof Pe=="function"&&(Gg(l,h,Pe,p),K=l.memoizedState),(B=Ka||hw(l,h,B,p,Ae,K,he))?(De||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=K),O.props=p,O.state=K,O.context=he,p=B):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{O=l.stateNode,$b(s,l),B=l.memoizedProps,he=l.type===l.elementType?B:os(l.type,B),O.props=he,De=l.pendingProps,Ae=O.context,K=h.contextType,typeof K=="object"&&K!==null?K=Ui(K):(K=ui(h)?Wo:Lr.current,K=sc(l,K));var Ye=h.getDerivedStateFromProps;(Pe=typeof Ye=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==De||Ae!==K)&&mw(l,O,p,K),Ka=!1,Ae=l.memoizedState,O.state=Ae,Kh(l,p,O,v);var nt=l.memoizedState;B!==De||Ae!==nt||ci.current||Ka?(typeof Ye=="function"&&(Gg(l,h,Ye,p),nt=l.memoizedState),(he=Ka||hw(l,h,he,p,Ae,nt,K)||!1)?(Pe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(p,nt,K),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(p,nt,K)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||B===s.memoizedProps&&Ae===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&Ae===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=nt),O.props=p,O.state=nt,O.context=K,p=he):(typeof O.componentDidUpdate!="function"||B===s.memoizedProps&&Ae===s.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===s.memoizedProps&&Ae===s.memoizedState||(l.flags|=1024),p=!1)}return Jg(s,l,h,p,k,v)}function Jg(s,l,h,p,v,k){Ew(s,l);var O=(l.flags&128)!==0;if(!p&&!O)return v&&Ab(l,h,!1),ha(s,l,k);p=l.stateNode,NI.current=l;var B=O&&typeof h.getDerivedStateFromError!="function"?null:p.render();return l.flags|=1,s!==null&&O?(l.child=cc(l,s.child,null,k),l.child=cc(l,null,B,k)):ti(s,l,B,k),l.memoizedState=p.state,v&&Ab(l,h,!0),l.child}function Sw(s){var l=s.stateNode;l.pendingContext?Cb(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Cb(s,l.context,!1),Mg(s,l.containerInfo)}function Tw(s,l,h,p,v){return lc(),Cg(v),l.flags|=256,ti(s,l,h,p),l.child}var Zg={dehydrated:null,treeContext:null,retryLane:0};function e0(s){return{baseLanes:s,cachePool:null,transitions:null}}function Cw(s,l,h){var p=l.pendingProps,v=jn.current,k=!1,O=(l.flags&128)!==0,B;if((B=O)||(B=s!==null&&s.memoizedState===null?!1:(v&2)!==0),B?(k=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),fn(jn,v&1),s===null)return Tg(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=p.children,s=p.fallback,k?(p=l.mode,k=l.child,O={mode:"hidden",children:O},(p&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=O):k=gf(O,p,0,null),s=tl(s,p,h,null),k.return=l,s.return=l,k.sibling=s,l.child=k,l.child.memoizedState=e0(h),l.memoizedState=Zg,s):t0(l,O));if(v=s.memoizedState,v!==null&&(B=v.dehydrated,B!==null))return SI(s,l,O,p,B,v,h);if(k){k=p.fallback,O=l.mode,v=s.child,B=v.sibling;var K={mode:"hidden",children:p.children};return(O&1)===0&&l.child!==v?(p=l.child,p.childLanes=0,p.pendingProps=K,l.deletions=null):(p=to(v,K),p.subtreeFlags=v.subtreeFlags&14680064),B!==null?k=to(B,k):(k=tl(k,O,h,null),k.flags|=2),k.return=l,p.return=l,p.sibling=k,l.child=p,p=k,k=l.child,O=s.child.memoizedState,O=O===null?e0(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},k.memoizedState=O,k.childLanes=s.childLanes&~h,l.memoizedState=Zg,p}return k=s.child,s=k.sibling,p=to(k,{mode:"visible",children:p.children}),(l.mode&1)===0&&(p.lanes=h),p.return=l,p.sibling=null,s!==null&&(h=l.deletions,h===null?(l.deletions=[s],l.flags|=16):h.push(s)),l.child=p,l.memoizedState=null,p}function t0(s,l){return l=gf({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function nf(s,l,h,p){return p!==null&&Cg(p),cc(l,s.child,null,h),s=t0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function SI(s,l,h,p,v,k,O){if(h)return l.flags&256?(l.flags&=-257,p=Xg(Error(n(422))),nf(s,l,O,p)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(k=p.fallback,v=l.mode,p=gf({mode:"visible",children:p.children},v,0,null),k=tl(k,v,O,null),k.flags|=2,p.return=l,k.return=l,p.sibling=k,l.child=p,(l.mode&1)!==0&&cc(l,s.child,null,O),l.child.memoizedState=e0(O),l.memoizedState=Zg,k);if((l.mode&1)===0)return nf(s,l,O,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var B=p.dgst;return p=B,k=Error(n(419)),p=Xg(k,p,void 0),nf(s,l,O,p)}if(B=(O&s.childLanes)!==0,di||B){if(p=pr,p!==null){switch(O&-O){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|O))!==0?0:v,v!==0&&v!==k.retryLane&&(k.retryLane=v,ua(s,v),us(p,s,v,-1))}return y0(),p=Xg(Error(n(421))),nf(s,l,O,p)}return v.data==="$?"?(l.flags|=128,l.child=s.child,l=FI.bind(null,s),v._reactRetry=l,null):(s=k.treeContext,Ti=Ha(v.nextSibling),Si=l,kn=!0,as=null,s!==null&&(Vi[Fi++]=la,Vi[Fi++]=ca,Vi[Fi++]=qo,la=s.id,ca=s.overflow,qo=l),l=t0(l,p.children),l.flags|=4096,l)}function jw(s,l,h){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),Pg(s.return,l,h)}function n0(s,l,h,p,v){var k=s.memoizedState;k===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v}:(k.isBackwards=l,k.rendering=null,k.renderingStartTime=0,k.last=p,k.tail=h,k.tailMode=v)}function Aw(s,l,h){var p=l.pendingProps,v=p.revealOrder,k=p.tail;if(ti(s,l,p.children,h),p=jn.current,(p&2)!==0)p=p&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&jw(s,h,l);else if(s.tag===19)jw(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(fn(jn,p),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)s=h.alternate,s!==null&&Xh(s)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),n0(l,!1,v,h,k);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(s=v.alternate,s!==null&&Xh(s)===null){l.child=v;break}s=v.sibling,v.sibling=h,h=v,v=s}n0(l,!0,h,null,k);break;case"together":n0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function rf(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function ha(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),Qo|=l.lanes,(h&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,h=to(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=to(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function TI(s,l,h){switch(l.tag){case 3:Sw(l),lc();break;case 5:Hb(l);break;case 1:ui(l.type)&&Fh(l);break;case 4:Mg(l,l.stateNode.containerInfo);break;case 10:var p=l.type._context,v=l.memoizedProps.value;fn(Wh,p._currentValue),p._currentValue=v;break;case 13:if(p=l.memoizedState,p!==null)return p.dehydrated!==null?(fn(jn,jn.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?Cw(s,l,h):(fn(jn,jn.current&1),s=ha(s,l,h),s!==null?s.sibling:null);fn(jn,jn.current&1);break;case 19:if(p=(h&l.childLanes)!==0,(s.flags&128)!==0){if(p)return Aw(s,l,h);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),fn(jn,jn.current),p)break;return null;case 22:case 23:return l.lanes=0,kw(s,l,h)}return ha(s,l,h)}var Iw,r0,Pw,Rw;Iw=function(s,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},r0=function(){},Pw=function(s,l,h,p){var v=s.memoizedProps;if(v!==p){s=l.stateNode,Xo(Cs.current);var k=null;switch(h){case"input":v=Dt(s,v),p=Dt(s,p),k=[];break;case"select":v=ge({},v,{value:void 0}),p=ge({},p,{value:void 0}),k=[];break;case"textarea":v=He(s,v),p=He(s,p),k=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Oh)}vr(h,p);var O;h=null;for(he in v)if(!p.hasOwnProperty(he)&&v.hasOwnProperty(he)&&v[he]!=null)if(he==="style"){var B=v[he];for(O in B)B.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(i.hasOwnProperty(he)?k||(k=[]):(k=k||[]).push(he,null));for(he in p){var K=p[he];if(B=v!=null?v[he]:void 0,p.hasOwnProperty(he)&&K!==B&&(K!=null||B!=null))if(he==="style")if(B){for(O in B)!B.hasOwnProperty(O)||K&&K.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in K)K.hasOwnProperty(O)&&B[O]!==K[O]&&(h||(h={}),h[O]=K[O])}else h||(k||(k=[]),k.push(he,h)),h=K;else he==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,B=B?B.__html:void 0,K!=null&&B!==K&&(k=k||[]).push(he,K)):he==="children"?typeof K!="string"&&typeof K!="number"||(k=k||[]).push(he,""+K):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(i.hasOwnProperty(he)?(K!=null&&he==="onScroll"&&gn("scroll",s),k||B===K||(k=[])):(k=k||[]).push(he,K))}h&&(k=k||[]).push("style",h);var he=k;(l.updateQueue=he)&&(l.flags|=4)}},Rw=function(s,l,h,p){h!==p&&(l.flags|=4)};function $u(s,l){if(!kn)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Fr(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,p=0;if(l)for(var v=s.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=p,s.childLanes=h,l}function CI(s,l,h){var p=l.pendingProps;switch(Ng(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(l),null;case 1:return ui(l.type)&&Vh(),Fr(l),null;case 3:return p=l.stateNode,hc(),yn(ci),yn(Lr),Vg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Bh(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,as!==null&&(m0(as),as=null))),r0(s,l),Fr(l),null;case 5:Og(l);var v=Xo(Ou.current);if(h=l.type,s!==null&&l.stateNode!=null)Pw(s,l,h,p,v),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!p){if(l.stateNode===null)throw Error(n(166));return Fr(l),null}if(s=Xo(Cs.current),Bh(l)){p=l.stateNode,h=l.type;var k=l.memoizedProps;switch(p[Ts]=l,p[Iu]=k,s=(l.mode&1)!==0,h){case"dialog":gn("cancel",p),gn("close",p);break;case"iframe":case"object":case"embed":gn("load",p);break;case"video":case"audio":for(v=0;v<Cu.length;v++)gn(Cu[v],p);break;case"source":gn("error",p);break;case"img":case"image":case"link":gn("error",p),gn("load",p);break;case"details":gn("toggle",p);break;case"input":It(p,k),gn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!k.multiple},gn("invalid",p);break;case"textarea":dt(p,k),gn("invalid",p)}vr(h,k),v=null;for(var O in k)if(k.hasOwnProperty(O)){var B=k[O];O==="children"?typeof B=="string"?p.textContent!==B&&(k.suppressHydrationWarning!==!0&&Mh(p.textContent,B,s),v=["children",B]):typeof B=="number"&&p.textContent!==""+B&&(k.suppressHydrationWarning!==!0&&Mh(p.textContent,B,s),v=["children",""+B]):i.hasOwnProperty(O)&&B!=null&&O==="onScroll"&&gn("scroll",p)}switch(h){case"input":bt(p),je(p,k,!0);break;case"textarea":bt(p),X(p);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(p.onclick=Oh)}p=v,l.updateQueue=p,p!==null&&(l.flags|=4)}else{O=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=me(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=O.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=O.createElement(h,{is:p.is}):(s=O.createElement(h),h==="select"&&(O=s,p.multiple?O.multiple=!0:p.size&&(O.size=p.size))):s=O.createElementNS(s,h),s[Ts]=l,s[Iu]=p,Iw(s,l,!1,!1),l.stateNode=s;e:{switch(O=Wn(h,p),h){case"dialog":gn("cancel",s),gn("close",s),v=p;break;case"iframe":case"object":case"embed":gn("load",s),v=p;break;case"video":case"audio":for(v=0;v<Cu.length;v++)gn(Cu[v],s);v=p;break;case"source":gn("error",s),v=p;break;case"img":case"image":case"link":gn("error",s),gn("load",s),v=p;break;case"details":gn("toggle",s),v=p;break;case"input":It(s,p),v=Dt(s,p),gn("invalid",s);break;case"option":v=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},v=ge({},p,{value:void 0}),gn("invalid",s);break;case"textarea":dt(s,p),v=He(s,p),gn("invalid",s);break;default:v=p}vr(h,v),B=v;for(k in B)if(B.hasOwnProperty(k)){var K=B[k];k==="style"?Vt(s,K):k==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&be(s,K)):k==="children"?typeof K=="string"?(h!=="textarea"||K!=="")&&Se(s,K):typeof K=="number"&&Se(s,""+K):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?K!=null&&k==="onScroll"&&gn("scroll",s):K!=null&&A(s,k,K,O))}switch(h){case"input":bt(s),je(s,p,!1);break;case"textarea":bt(s),X(s);break;case"option":p.value!=null&&s.setAttribute("value",""+Je(p.value));break;case"select":s.multiple=!!p.multiple,k=p.value,k!=null?St(s,!!p.multiple,k,!1):p.defaultValue!=null&&St(s,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=Oh)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Fr(l),null;case 6:if(s&&l.stateNode!=null)Rw(s,l,s.memoizedProps,p);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(h=Xo(Ou.current),Xo(Cs.current),Bh(l)){if(p=l.stateNode,h=l.memoizedProps,p[Ts]=l,(k=p.nodeValue!==h)&&(s=Si,s!==null))switch(s.tag){case 3:Mh(p.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Mh(p.nodeValue,h,(s.mode&1)!==0)}k&&(l.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Ts]=l,l.stateNode=p}return Fr(l),null;case 13:if(yn(jn),p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(kn&&Ti!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Ob(),lc(),l.flags|=98560,k=!1;else if(k=Bh(l),p!==null&&p.dehydrated!==null){if(s===null){if(!k)throw Error(n(318));if(k=l.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(n(317));k[Ts]=l}else lc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Fr(l),k=!1}else as!==null&&(m0(as),as=null),k=!0;if(!k)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(jn.current&1)!==0?ur===0&&(ur=3):y0())),l.updateQueue!==null&&(l.flags|=4),Fr(l),null);case 4:return hc(),r0(s,l),s===null&&ju(l.stateNode.containerInfo),Fr(l),null;case 10:return Ig(l.type._context),Fr(l),null;case 17:return ui(l.type)&&Vh(),Fr(l),null;case 19:if(yn(jn),k=l.memoizedState,k===null)return Fr(l),null;if(p=(l.flags&128)!==0,O=k.rendering,O===null)if(p)$u(k,!1);else{if(ur!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(O=Xh(s),O!==null){for(l.flags|=128,$u(k,!1),p=O.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),l.subtreeFlags=0,p=h,h=l.child;h!==null;)k=h,s=p,k.flags&=14680066,O=k.alternate,O===null?(k.childLanes=0,k.lanes=s,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=O.childLanes,k.lanes=O.lanes,k.child=O.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=O.memoizedProps,k.memoizedState=O.memoizedState,k.updateQueue=O.updateQueue,k.type=O.type,s=O.dependencies,k.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return fn(jn,jn.current&1|2),l.child}s=s.sibling}k.tail!==null&&Wt()>gc&&(l.flags|=128,p=!0,$u(k,!1),l.lanes=4194304)}else{if(!p)if(s=Xh(O),s!==null){if(l.flags|=128,p=!0,h=s.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),$u(k,!0),k.tail===null&&k.tailMode==="hidden"&&!O.alternate&&!kn)return Fr(l),null}else 2*Wt()-k.renderingStartTime>gc&&h!==1073741824&&(l.flags|=128,p=!0,$u(k,!1),l.lanes=4194304);k.isBackwards?(O.sibling=l.child,l.child=O):(h=k.last,h!==null?h.sibling=O:l.child=O,k.last=O)}return k.tail!==null?(l=k.tail,k.rendering=l,k.tail=l.sibling,k.renderingStartTime=Wt(),l.sibling=null,h=jn.current,fn(jn,p?h&1|2:h&1),l):(Fr(l),null);case 22:case 23:return g0(),p=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(l.flags|=8192),p&&(l.mode&1)!==0?(Ci&1073741824)!==0&&(Fr(l),l.subtreeFlags&6&&(l.flags|=8192)):Fr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function jI(s,l){switch(Ng(l),l.tag){case 1:return ui(l.type)&&Vh(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return hc(),yn(ci),yn(Lr),Vg(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Og(l),null;case 13:if(yn(jn),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));lc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return yn(jn),null;case 4:return hc(),null;case 10:return Ig(l.type._context),null;case 22:case 23:return g0(),null;case 24:return null;default:return null}}var sf=!1,Ur=!1,AI=typeof WeakSet=="function"?WeakSet:Set,et=null;function mc(s,l){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){Vn(s,l,p)}else h.current=null}function i0(s,l,h){try{h()}catch(p){Vn(s,l,p)}}var Dw=!1;function II(s,l){if(gg=$a,s=hb(),lg(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,k=p.focusNode;p=p.focusOffset;try{h.nodeType,k.nodeType}catch{h=null;break e}var O=0,B=-1,K=-1,he=0,Pe=0,De=s,Ae=null;t:for(;;){for(var Ye;De!==h||v!==0&&De.nodeType!==3||(B=O+v),De!==k||p!==0&&De.nodeType!==3||(K=O+p),De.nodeType===3&&(O+=De.nodeValue.length),(Ye=De.firstChild)!==null;)Ae=De,De=Ye;for(;;){if(De===s)break t;if(Ae===h&&++he===v&&(B=O),Ae===k&&++Pe===p&&(K=O),(Ye=De.nextSibling)!==null)break;De=Ae,Ae=De.parentNode}De=Ye}h=B===-1||K===-1?null:{start:B,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(yg={focusedElem:s,selectionRange:h},$a=!1,et=l;et!==null;)if(l=et,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,et=s;else for(;et!==null;){l=et;try{var nt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var st=nt.memoizedProps,Gn=nt.memoizedState,se=l.stateNode,Q=se.getSnapshotBeforeUpdate(l.elementType===l.type?st:os(l.type,st),Gn);se.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var le=l.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Le){Vn(l,l.return,Le)}if(s=l.sibling,s!==null){s.return=l.return,et=s;break}et=l.return}return nt=Dw,Dw=!1,nt}function zu(s,l,h){var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&s)===s){var k=v.destroy;v.destroy=void 0,k!==void 0&&i0(l,h,k)}v=v.next}while(v!==p)}}function af(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&s)===s){var p=h.create;h.destroy=p()}h=h.next}while(h!==l)}}function s0(s){var l=s.ref;if(l!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof l=="function"?l(s):l.current=s}}function Mw(s){var l=s.alternate;l!==null&&(s.alternate=null,Mw(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Ts],delete l[Iu],delete l[wg],delete l[fI],delete l[mI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Ow(s){return s.tag===5||s.tag===3||s.tag===4}function Lw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ow(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function a0(s,l,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Oh));else if(p!==4&&(s=s.child,s!==null))for(a0(s,l,h),s=s.sibling;s!==null;)a0(s,l,h),s=s.sibling}function o0(s,l,h){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(o0(s,l,h),s=s.sibling;s!==null;)o0(s,l,h),s=s.sibling}var Sr=null,ls=!1;function Ya(s,l,h){for(h=h.child;h!==null;)Vw(s,l,h),h=h.sibling}function Vw(s,l,h){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount(Qs,h)}catch{}switch(h.tag){case 5:Ur||mc(h,l);case 6:var p=Sr,v=ls;Sr=null,Ya(s,l,h),Sr=p,ls=v,Sr!==null&&(ls?(s=Sr,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):Sr.removeChild(h.stateNode));break;case 18:Sr!==null&&(ls?(s=Sr,h=h.stateNode,s.nodeType===8?bg(s.parentNode,h):s.nodeType===1&&bg(s,h),rs(s)):bg(Sr,h.stateNode));break;case 4:p=Sr,v=ls,Sr=h.stateNode.containerInfo,ls=!0,Ya(s,l,h),Sr=p,ls=v;break;case 0:case 11:case 14:case 15:if(!Ur&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var k=v,O=k.destroy;k=k.tag,O!==void 0&&((k&2)!==0||(k&4)!==0)&&i0(h,l,O),v=v.next}while(v!==p)}Ya(s,l,h);break;case 1:if(!Ur&&(mc(h,l),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(B){Vn(h,l,B)}Ya(s,l,h);break;case 21:Ya(s,l,h);break;case 22:h.mode&1?(Ur=(p=Ur)||h.memoizedState!==null,Ya(s,l,h),Ur=p):Ya(s,l,h);break;default:Ya(s,l,h)}}function Fw(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new AI),l.forEach(function(p){var v=UI.bind(null,s,p);h.has(p)||(h.add(p),p.then(v,v))})}}function cs(s,l){var h=l.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p];try{var k=s,O=l,B=O;e:for(;B!==null;){switch(B.tag){case 5:Sr=B.stateNode,ls=!1;break e;case 3:Sr=B.stateNode.containerInfo,ls=!0;break e;case 4:Sr=B.stateNode.containerInfo,ls=!0;break e}B=B.return}if(Sr===null)throw Error(n(160));Vw(k,O,v),Sr=null,ls=!1;var K=v.alternate;K!==null&&(K.return=null),v.return=null}catch(he){Vn(v,l,he)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Uw(l,s),l=l.sibling}function Uw(s,l){var h=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(cs(l,s),As(s),p&4){try{zu(3,s,s.return),af(3,s)}catch(st){Vn(s,s.return,st)}try{zu(5,s,s.return)}catch(st){Vn(s,s.return,st)}}break;case 1:cs(l,s),As(s),p&512&&h!==null&&mc(h,h.return);break;case 5:if(cs(l,s),As(s),p&512&&h!==null&&mc(h,h.return),s.flags&32){var v=s.stateNode;try{Se(v,"")}catch(st){Vn(s,s.return,st)}}if(p&4&&(v=s.stateNode,v!=null)){var k=s.memoizedProps,O=h!==null?h.memoizedProps:k,B=s.type,K=s.updateQueue;if(s.updateQueue=null,K!==null)try{B==="input"&&k.type==="radio"&&k.name!=null&&Sn(v,k),Wn(B,O);var he=Wn(B,k);for(O=0;O<K.length;O+=2){var Pe=K[O],De=K[O+1];Pe==="style"?Vt(v,De):Pe==="dangerouslySetInnerHTML"?be(v,De):Pe==="children"?Se(v,De):A(v,Pe,De,he)}switch(B){case"input":Z(v,k);break;case"textarea":G(v,k);break;case"select":var Ae=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!k.multiple;var Ye=k.value;Ye!=null?St(v,!!k.multiple,Ye,!1):Ae!==!!k.multiple&&(k.defaultValue!=null?St(v,!!k.multiple,k.defaultValue,!0):St(v,!!k.multiple,k.multiple?[]:"",!1))}v[Iu]=k}catch(st){Vn(s,s.return,st)}}break;case 6:if(cs(l,s),As(s),p&4){if(s.stateNode===null)throw Error(n(162));v=s.stateNode,k=s.memoizedProps;try{v.nodeValue=k}catch(st){Vn(s,s.return,st)}}break;case 3:if(cs(l,s),As(s),p&4&&h!==null&&h.memoizedState.isDehydrated)try{rs(l.containerInfo)}catch(st){Vn(s,s.return,st)}break;case 4:cs(l,s),As(s);break;case 13:cs(l,s),As(s),v=s.child,v.flags&8192&&(k=v.memoizedState!==null,v.stateNode.isHidden=k,!k||v.alternate!==null&&v.alternate.memoizedState!==null||(u0=Wt())),p&4&&Fw(s);break;case 22:if(Pe=h!==null&&h.memoizedState!==null,s.mode&1?(Ur=(he=Ur)||Pe,cs(l,s),Ur=he):cs(l,s),As(s),p&8192){if(he=s.memoizedState!==null,(s.stateNode.isHidden=he)&&!Pe&&(s.mode&1)!==0)for(et=s,Pe=s.child;Pe!==null;){for(De=et=Pe;et!==null;){switch(Ae=et,Ye=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:zu(4,Ae,Ae.return);break;case 1:mc(Ae,Ae.return);var nt=Ae.stateNode;if(typeof nt.componentWillUnmount=="function"){p=Ae,h=Ae.return;try{l=p,nt.props=l.memoizedProps,nt.state=l.memoizedState,nt.componentWillUnmount()}catch(st){Vn(p,h,st)}}break;case 5:mc(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){Bw(De);continue}}Ye!==null?(Ye.return=Ae,et=Ye):Bw(De)}Pe=Pe.sibling}e:for(Pe=null,De=s;;){if(De.tag===5){if(Pe===null){Pe=De;try{v=De.stateNode,he?(k=v.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(B=De.stateNode,K=De.memoizedProps.style,O=K!=null&&K.hasOwnProperty("display")?K.display:null,B.style.display=ct("display",O))}catch(st){Vn(s,s.return,st)}}}else if(De.tag===6){if(Pe===null)try{De.stateNode.nodeValue=he?"":De.memoizedProps}catch(st){Vn(s,s.return,st)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===s)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===s)break e;for(;De.sibling===null;){if(De.return===null||De.return===s)break e;Pe===De&&(Pe=null),De=De.return}Pe===De&&(Pe=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:cs(l,s),As(s),p&4&&Fw(s);break;case 21:break;default:cs(l,s),As(s)}}function As(s){var l=s.flags;if(l&2){try{e:{for(var h=s.return;h!==null;){if(Ow(h)){var p=h;break e}h=h.return}throw Error(n(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(Se(v,""),p.flags&=-33);var k=Lw(s);o0(s,k,v);break;case 3:case 4:var O=p.stateNode.containerInfo,B=Lw(s);a0(s,B,O);break;default:throw Error(n(161))}}catch(K){Vn(s,s.return,K)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function PI(s,l,h){et=s,$w(s)}function $w(s,l,h){for(var p=(s.mode&1)!==0;et!==null;){var v=et,k=v.child;if(v.tag===22&&p){var O=v.memoizedState!==null||sf;if(!O){var B=v.alternate,K=B!==null&&B.memoizedState!==null||Ur;B=sf;var he=Ur;if(sf=O,(Ur=K)&&!he)for(et=v;et!==null;)O=et,K=O.child,O.tag===22&&O.memoizedState!==null?Hw(v):K!==null?(K.return=O,et=K):Hw(v);for(;k!==null;)et=k,$w(k),k=k.sibling;et=v,sf=B,Ur=he}zw(s)}else(v.subtreeFlags&8772)!==0&&k!==null?(k.return=v,et=k):zw(s)}}function zw(s){for(;et!==null;){var l=et;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ur||af(5,l);break;case 1:var p=l.stateNode;if(l.flags&4&&!Ur)if(h===null)p.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:os(l.type,h.memoizedProps);p.componentDidUpdate(v,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var k=l.updateQueue;k!==null&&Bb(l,k,p);break;case 3:var O=l.updateQueue;if(O!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Bb(l,O,h)}break;case 5:var B=l.stateNode;if(h===null&&l.flags&4){h=B;var K=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&h.focus();break;case"img":K.src&&(h.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var he=l.alternate;if(he!==null){var Pe=he.memoizedState;if(Pe!==null){var De=Pe.dehydrated;De!==null&&rs(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ur||l.flags&512&&s0(l)}catch(Ae){Vn(l,l.return,Ae)}}if(l===s){et=null;break}if(h=l.sibling,h!==null){h.return=l.return,et=h;break}et=l.return}}function Bw(s){for(;et!==null;){var l=et;if(l===s){et=null;break}var h=l.sibling;if(h!==null){h.return=l.return,et=h;break}et=l.return}}function Hw(s){for(;et!==null;){var l=et;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{af(4,l)}catch(K){Vn(l,h,K)}break;case 1:var p=l.stateNode;if(typeof p.componentDidMount=="function"){var v=l.return;try{p.componentDidMount()}catch(K){Vn(l,v,K)}}var k=l.return;try{s0(l)}catch(K){Vn(l,k,K)}break;case 5:var O=l.return;try{s0(l)}catch(K){Vn(l,O,K)}}}catch(K){Vn(l,l.return,K)}if(l===s){et=null;break}var B=l.sibling;if(B!==null){B.return=l.return,et=B;break}et=l.return}}var RI=Math.ceil,of=L.ReactCurrentDispatcher,l0=L.ReactCurrentOwner,zi=L.ReactCurrentBatchConfig,qt=0,pr=null,er=null,Tr=0,Ci=0,pc=Wa(0),ur=0,Bu=null,Qo=0,lf=0,c0=0,Hu=null,hi=null,u0=0,gc=1/0,fa=null,cf=!1,d0=null,Qa=null,uf=!1,Ja=null,df=0,Wu=0,h0=null,hf=-1,ff=0;function ni(){return(qt&6)!==0?Wt():hf!==-1?hf:hf=Wt()}function Za(s){return(s.mode&1)===0?1:(qt&2)!==0&&Tr!==0?Tr&-Tr:gI.transition!==null?(ff===0&&(ff=ea()),ff):(s=Lt,s!==0||(s=window.event,s=s===void 0?16:vu(s.type)),s)}function us(s,l,h,p){if(50<Wu)throw Wu=0,h0=null,Error(n(185));bs(s,h,p),((qt&2)===0||s!==pr)&&(s===pr&&((qt&2)===0&&(lf|=h),ur===4&&eo(s,Tr)),fi(s,p),h===1&&qt===0&&(l.mode&1)===0&&(gc=Wt()+500,Uh&&Ga()))}function fi(s,l){var h=s.callbackNode;Or(s,l);var p=Zs(s,s===pr?Tr:0);if(p===0)h!==null&&_r(h),s.callbackNode=null,s.callbackPriority=0;else if(l=p&-p,s.callbackPriority!==l){if(h!=null&&_r(h),l===1)s.tag===0?pI(qw.bind(null,s)):Ib(qw.bind(null,s)),dI(function(){(qt&6)===0&&Ga()}),h=null;else{switch(_s(p)){case 1:h=es;break;case 4:h=kr;break;case 16:h=Qr;break;case 536870912:h=Vl;break;default:h=Qr}h=e2(h,Ww.bind(null,s))}s.callbackPriority=l,s.callbackNode=h}}function Ww(s,l){if(hf=-1,ff=0,(qt&6)!==0)throw Error(n(327));var h=s.callbackNode;if(yc()&&s.callbackNode!==h)return null;var p=Zs(s,s===pr?Tr:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||l)l=mf(s,p);else{l=p;var v=qt;qt|=2;var k=Kw();(pr!==s||Tr!==l)&&(fa=null,gc=Wt()+500,Zo(s,l));do try{OI();break}catch(B){Gw(s,B)}while(!0);Ag(),of.current=k,qt=v,er!==null?l=0:(pr=null,Tr=0,l=ur)}if(l!==0){if(l===2&&(v=Zr(s),v!==0&&(p=v,l=f0(s,v))),l===1)throw h=Bu,Zo(s,0),eo(s,p),fi(s,Wt()),h;if(l===6)eo(s,p);else{if(v=s.current.alternate,(p&30)===0&&!DI(v)&&(l=mf(s,p),l===2&&(k=Zr(s),k!==0&&(p=k,l=f0(s,k))),l===1))throw h=Bu,Zo(s,0),eo(s,p),fi(s,Wt()),h;switch(s.finishedWork=v,s.finishedLanes=p,l){case 0:case 1:throw Error(n(345));case 2:el(s,hi,fa);break;case 3:if(eo(s,p),(p&130023424)===p&&(l=u0+500-Wt(),10<l)){if(Zs(s,0)!==0)break;if(v=s.suspendedLanes,(v&p)!==p){ni(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=vg(el.bind(null,s,hi,fa),l);break}el(s,hi,fa);break;case 4:if(eo(s,p),(p&4194240)===p)break;for(l=s.eventTimes,v=-1;0<p;){var O=31-Er(p);k=1<<O,O=l[O],O>v&&(v=O),p&=~k}if(p=v,p=Wt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*RI(p/1960))-p,10<p){s.timeoutHandle=vg(el.bind(null,s,hi,fa),p);break}el(s,hi,fa);break;case 5:el(s,hi,fa);break;default:throw Error(n(329))}}}return fi(s,Wt()),s.callbackNode===h?Ww.bind(null,s):null}function f0(s,l){var h=Hu;return s.current.memoizedState.isDehydrated&&(Zo(s,l).flags|=256),s=mf(s,l),s!==2&&(l=hi,hi=h,l!==null&&m0(l)),s}function m0(s){hi===null?hi=s:hi.push.apply(hi,s)}function DI(s){for(var l=s;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var v=h[p],k=v.getSnapshot;v=v.value;try{if(!ss(k(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function eo(s,l){for(l&=~c0,l&=~lf,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var h=31-Er(l),p=1<<h;s[h]=-1,l&=~p}}function qw(s){if((qt&6)!==0)throw Error(n(327));yc();var l=Zs(s,0);if((l&1)===0)return fi(s,Wt()),null;var h=mf(s,l);if(s.tag!==0&&h===2){var p=Zr(s);p!==0&&(l=p,h=f0(s,p))}if(h===1)throw h=Bu,Zo(s,0),eo(s,l),fi(s,Wt()),h;if(h===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,el(s,hi,fa),fi(s,Wt()),null}function p0(s,l){var h=qt;qt|=1;try{return s(l)}finally{qt=h,qt===0&&(gc=Wt()+500,Uh&&Ga())}}function Jo(s){Ja!==null&&Ja.tag===0&&(qt&6)===0&&yc();var l=qt;qt|=1;var h=zi.transition,p=Lt;try{if(zi.transition=null,Lt=1,s)return s()}finally{Lt=p,zi.transition=h,qt=l,(qt&6)===0&&Ga()}}function g0(){Ci=pc.current,yn(pc)}function Zo(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,uI(h)),er!==null)for(h=er.return;h!==null;){var p=h;switch(Ng(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Vh();break;case 3:hc(),yn(ci),yn(Lr),Vg();break;case 5:Og(p);break;case 4:hc();break;case 13:yn(jn);break;case 19:yn(jn);break;case 10:Ig(p.type._context);break;case 22:case 23:g0()}h=h.return}if(pr=s,er=s=to(s.current,null),Tr=Ci=l,ur=0,Bu=null,c0=lf=Qo=0,hi=Hu=null,Ko!==null){for(l=0;l<Ko.length;l++)if(h=Ko[l],p=h.interleaved,p!==null){h.interleaved=null;var v=p.next,k=h.pending;if(k!==null){var O=k.next;k.next=v,p.next=O}h.pending=p}Ko=null}return s}function Gw(s,l){do{var h=er;try{if(Ag(),Yh.current=ef,Qh){for(var p=An.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Qh=!1}if(Yo=0,mr=cr=An=null,Lu=!1,Vu=0,l0.current=null,h===null||h.return===null){ur=1,Bu=l,er=null;break}e:{var k=s,O=h.return,B=h,K=l;if(l=Tr,B.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var he=K,Pe=B,De=Pe.tag;if((Pe.mode&1)===0&&(De===0||De===11||De===15)){var Ae=Pe.alternate;Ae?(Pe.updateQueue=Ae.updateQueue,Pe.memoizedState=Ae.memoizedState,Pe.lanes=Ae.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var Ye=xw(O);if(Ye!==null){Ye.flags&=-257,vw(Ye,O,B,k,l),Ye.mode&1&&yw(k,he,l),l=Ye,K=he;var nt=l.updateQueue;if(nt===null){var st=new Set;st.add(K),l.updateQueue=st}else nt.add(K);break e}else{if((l&1)===0){yw(k,he,l),y0();break e}K=Error(n(426))}}else if(kn&&B.mode&1){var Gn=xw(O);if(Gn!==null){(Gn.flags&65536)===0&&(Gn.flags|=256),vw(Gn,O,B,k,l),Cg(fc(K,B));break e}}k=K=fc(K,B),ur!==4&&(ur=2),Hu===null?Hu=[k]:Hu.push(k),k=O;do{switch(k.tag){case 3:k.flags|=65536,l&=-l,k.lanes|=l;var se=pw(k,K,l);zb(k,se);break e;case 1:B=K;var Q=k.type,le=k.stateNode;if((k.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Qa===null||!Qa.has(le)))){k.flags|=65536,l&=-l,k.lanes|=l;var Le=gw(k,B,l);zb(k,Le);break e}}k=k.return}while(k!==null)}Yw(h)}catch(at){l=at,er===h&&h!==null&&(er=h=h.return);continue}break}while(!0)}function Kw(){var s=of.current;return of.current=ef,s===null?ef:s}function y0(){(ur===0||ur===3||ur===2)&&(ur=4),pr===null||(Qo&268435455)===0&&(lf&268435455)===0||eo(pr,Tr)}function mf(s,l){var h=qt;qt|=2;var p=Kw();(pr!==s||Tr!==l)&&(fa=null,Zo(s,l));do try{MI();break}catch(v){Gw(s,v)}while(!0);if(Ag(),qt=h,of.current=p,er!==null)throw Error(n(261));return pr=null,Tr=0,ur}function MI(){for(;er!==null;)Xw(er)}function OI(){for(;er!==null&&!_t();)Xw(er)}function Xw(s){var l=Zw(s.alternate,s,Ci);s.memoizedProps=s.pendingProps,l===null?Yw(s):er=l,l0.current=null}function Yw(s){var l=s;do{var h=l.alternate;if(s=l.return,(l.flags&32768)===0){if(h=CI(h,l,Ci),h!==null){er=h;return}}else{if(h=jI(h,l),h!==null){h.flags&=32767,er=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{ur=6,er=null;return}}if(l=l.sibling,l!==null){er=l;return}er=l=s}while(l!==null);ur===0&&(ur=5)}function el(s,l,h){var p=Lt,v=zi.transition;try{zi.transition=null,Lt=1,LI(s,l,h,p)}finally{zi.transition=v,Lt=p}return null}function LI(s,l,h,p){do yc();while(Ja!==null);if((qt&6)!==0)throw Error(n(327));h=s.finishedWork;var v=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var k=h.lanes|h.childLanes;if(en(s,k),s===pr&&(er=pr=null,Tr=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||uf||(uf=!0,e2(Qr,function(){return yc(),null})),k=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||k){k=zi.transition,zi.transition=null;var O=Lt;Lt=1;var B=qt;qt|=4,l0.current=null,II(s,h),Uw(h,s),rI(yg),$a=!!gg,yg=gg=null,s.current=h,PI(h),Fo(),qt=B,Lt=O,zi.transition=k}else s.current=h;if(uf&&(uf=!1,Ja=s,df=v),k=s.pendingLanes,k===0&&(Qa=null),La(h.stateNode),fi(s,Wt()),l!==null)for(p=s.onRecoverableError,h=0;h<l.length;h++)v=l[h],p(v.value,{componentStack:v.stack,digest:v.digest});if(cf)throw cf=!1,s=d0,d0=null,s;return(df&1)!==0&&s.tag!==0&&yc(),k=s.pendingLanes,(k&1)!==0?s===h0?Wu++:(Wu=0,h0=s):Wu=0,Ga(),null}function yc(){if(Ja!==null){var s=_s(df),l=zi.transition,h=Lt;try{if(zi.transition=null,Lt=16>s?16:s,Ja===null)var p=!1;else{if(s=Ja,Ja=null,df=0,(qt&6)!==0)throw Error(n(331));var v=qt;for(qt|=4,et=s.current;et!==null;){var k=et,O=k.child;if((et.flags&16)!==0){var B=k.deletions;if(B!==null){for(var K=0;K<B.length;K++){var he=B[K];for(et=he;et!==null;){var Pe=et;switch(Pe.tag){case 0:case 11:case 15:zu(8,Pe,k)}var De=Pe.child;if(De!==null)De.return=Pe,et=De;else for(;et!==null;){Pe=et;var Ae=Pe.sibling,Ye=Pe.return;if(Mw(Pe),Pe===he){et=null;break}if(Ae!==null){Ae.return=Ye,et=Ae;break}et=Ye}}}var nt=k.alternate;if(nt!==null){var st=nt.child;if(st!==null){nt.child=null;do{var Gn=st.sibling;st.sibling=null,st=Gn}while(st!==null)}}et=k}}if((k.subtreeFlags&2064)!==0&&O!==null)O.return=k,et=O;else e:for(;et!==null;){if(k=et,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:zu(9,k,k.return)}var se=k.sibling;if(se!==null){se.return=k.return,et=se;break e}et=k.return}}var Q=s.current;for(et=Q;et!==null;){O=et;var le=O.child;if((O.subtreeFlags&2064)!==0&&le!==null)le.return=O,et=le;else e:for(O=Q;et!==null;){if(B=et,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:af(9,B)}}catch(at){Vn(B,B.return,at)}if(B===O){et=null;break e}var Le=B.sibling;if(Le!==null){Le.return=B.return,et=Le;break e}et=B.return}}if(qt=v,Ga(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot(Qs,s)}catch{}p=!0}return p}finally{Lt=h,zi.transition=l}}return!1}function Qw(s,l,h){l=fc(h,l),l=pw(s,l,1),s=Xa(s,l,1),l=ni(),s!==null&&(bs(s,1,l),fi(s,l))}function Vn(s,l,h){if(s.tag===3)Qw(s,s,h);else for(;l!==null;){if(l.tag===3){Qw(l,s,h);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Qa===null||!Qa.has(p))){s=fc(h,s),s=gw(l,s,1),l=Xa(l,s,1),s=ni(),l!==null&&(bs(l,1,s),fi(l,s));break}}l=l.return}}function VI(s,l,h){var p=s.pingCache;p!==null&&p.delete(l),l=ni(),s.pingedLanes|=s.suspendedLanes&h,pr===s&&(Tr&h)===h&&(ur===4||ur===3&&(Tr&130023424)===Tr&&500>Wt()-u0?Zo(s,0):c0|=h),fi(s,l)}function Jw(s,l){l===0&&((s.mode&1)===0?l=1:(l=Ua,Ua<<=1,(Ua&130023424)===0&&(Ua=4194304)));var h=ni();s=ua(s,l),s!==null&&(bs(s,l,h),fi(s,h))}function FI(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),Jw(s,h)}function UI(s,l){var h=0;switch(s.tag){case 13:var p=s.stateNode,v=s.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(l),Jw(s,h)}var Zw;Zw=function(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps||ci.current)di=!0;else{if((s.lanes&h)===0&&(l.flags&128)===0)return di=!1,TI(s,l,h);di=(s.flags&131072)!==0}else di=!1,kn&&(l.flags&1048576)!==0&&Pb(l,zh,l.index);switch(l.lanes=0,l.tag){case 2:var p=l.type;rf(s,l),s=l.pendingProps;var v=sc(l,Lr.current);dc(l,h),v=$g(null,l,p,s,v,h);var k=zg();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ui(p)?(k=!0,Fh(l)):k=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Dg(l),v.updater=tf,l.stateNode=v,v._reactInternals=l,Kg(l,p,s,h),l=Jg(null,l,p,!0,k,h)):(l.tag=0,kn&&k&&Eg(l),ti(null,l,v,h),l=l.child),l;case 16:p=l.elementType;e:{switch(rf(s,l),s=l.pendingProps,v=p._init,p=v(p._payload),l.type=p,v=l.tag=zI(p),s=os(p,s),v){case 0:l=Qg(null,l,p,s,h);break e;case 1:l=Nw(null,l,p,s,h);break e;case 11:l=bw(null,l,p,s,h);break e;case 14:l=ww(null,l,p,os(p.type,s),h);break e}throw Error(n(306,p,""))}return l;case 0:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:os(p,v),Qg(s,l,p,v,h);case 1:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:os(p,v),Nw(s,l,p,v,h);case 3:e:{if(Sw(l),s===null)throw Error(n(387));p=l.pendingProps,k=l.memoizedState,v=k.element,$b(s,l),Kh(l,p,null,h);var O=l.memoizedState;if(p=O.element,k.isDehydrated)if(k={element:p,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=k,l.memoizedState=k,l.flags&256){v=fc(Error(n(423)),l),l=Tw(s,l,p,h,v);break e}else if(p!==v){v=fc(Error(n(424)),l),l=Tw(s,l,p,h,v);break e}else for(Ti=Ha(l.stateNode.containerInfo.firstChild),Si=l,kn=!0,as=null,h=Fb(l,null,p,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(lc(),p===v){l=ha(s,l,h);break e}ti(s,l,p,h)}l=l.child}return l;case 5:return Hb(l),s===null&&Tg(l),p=l.type,v=l.pendingProps,k=s!==null?s.memoizedProps:null,O=v.children,xg(p,v)?O=null:k!==null&&xg(p,k)&&(l.flags|=32),Ew(s,l),ti(s,l,O,h),l.child;case 6:return s===null&&Tg(l),null;case 13:return Cw(s,l,h);case 4:return Mg(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=cc(l,null,p,h):ti(s,l,p,h),l.child;case 11:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:os(p,v),bw(s,l,p,v,h);case 7:return ti(s,l,l.pendingProps,h),l.child;case 8:return ti(s,l,l.pendingProps.children,h),l.child;case 12:return ti(s,l,l.pendingProps.children,h),l.child;case 10:e:{if(p=l.type._context,v=l.pendingProps,k=l.memoizedProps,O=v.value,fn(Wh,p._currentValue),p._currentValue=O,k!==null)if(ss(k.value,O)){if(k.children===v.children&&!ci.current){l=ha(s,l,h);break e}}else for(k=l.child,k!==null&&(k.return=l);k!==null;){var B=k.dependencies;if(B!==null){O=k.child;for(var K=B.firstContext;K!==null;){if(K.context===p){if(k.tag===1){K=da(-1,h&-h),K.tag=2;var he=k.updateQueue;if(he!==null){he=he.shared;var Pe=he.pending;Pe===null?K.next=K:(K.next=Pe.next,Pe.next=K),he.pending=K}}k.lanes|=h,K=k.alternate,K!==null&&(K.lanes|=h),Pg(k.return,h,l),B.lanes|=h;break}K=K.next}}else if(k.tag===10)O=k.type===l.type?null:k.child;else if(k.tag===18){if(O=k.return,O===null)throw Error(n(341));O.lanes|=h,B=O.alternate,B!==null&&(B.lanes|=h),Pg(O,h,l),O=k.sibling}else O=k.child;if(O!==null)O.return=k;else for(O=k;O!==null;){if(O===l){O=null;break}if(k=O.sibling,k!==null){k.return=O.return,O=k;break}O=O.return}k=O}ti(s,l,v.children,h),l=l.child}return l;case 9:return v=l.type,p=l.pendingProps.children,dc(l,h),v=Ui(v),p=p(v),l.flags|=1,ti(s,l,p,h),l.child;case 14:return p=l.type,v=os(p,l.pendingProps),v=os(p.type,v),ww(s,l,p,v,h);case 15:return _w(s,l,l.type,l.pendingProps,h);case 17:return p=l.type,v=l.pendingProps,v=l.elementType===p?v:os(p,v),rf(s,l),l.tag=1,ui(p)?(s=!0,Fh(l)):s=!1,dc(l,h),fw(l,p,v),Kg(l,p,v,h),Jg(null,l,p,!0,s,h);case 19:return Aw(s,l,h);case 22:return kw(s,l,h)}throw Error(n(156,l.tag))};function e2(s,l){return wr(s,l)}function $I(s,l,h,p){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(s,l,h,p){return new $I(s,l,h,p)}function x0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function zI(s){if(typeof s=="function")return x0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===$)return 11;if(s===ne)return 14}return 2}function to(s,l){var h=s.alternate;return h===null?(h=Bi(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function pf(s,l,h,p,v,k){var O=2;if(p=s,typeof s=="function")x0(s)&&(O=1);else if(typeof s=="string")O=5;else e:switch(s){case D:return tl(h.children,v,k,l);case M:O=8,v|=8;break;case P:return s=Bi(12,h,l,v|2),s.elementType=P,s.lanes=k,s;case I:return s=Bi(13,h,l,v),s.elementType=I,s.lanes=k,s;case re:return s=Bi(19,h,l,v),s.elementType=re,s.lanes=k,s;case Ee:return gf(h,v,k,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:O=10;break e;case F:O=9;break e;case $:O=11;break e;case ne:O=14;break e;case we:O=16,p=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=Bi(O,h,l,v),l.elementType=s,l.type=p,l.lanes=k,l}function tl(s,l,h,p){return s=Bi(7,s,p,l),s.lanes=h,s}function gf(s,l,h,p){return s=Bi(22,s,p,l),s.elementType=Ee,s.lanes=h,s.stateNode={isHidden:!1},s}function v0(s,l,h){return s=Bi(6,s,null,l),s.lanes=h,s}function b0(s,l,h){return l=Bi(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function BI(s,l,h,p,v){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vs(0),this.expirationTimes=vs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function w0(s,l,h,p,v,k,O,B,K){return s=new BI(s,l,h,B,K),l===1?(l=1,k===!0&&(l|=8)):l=0,k=Bi(3,null,null,l),s.current=k,k.stateNode=s,k.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dg(k),s}function HI(s,l,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:p==null?null:""+p,children:s,containerInfo:l,implementation:h}}function t2(s){if(!s)return qa;s=s._reactInternals;e:{if(sn(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ui(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var h=s.type;if(ui(h))return jb(s,h,l)}return l}function n2(s,l,h,p,v,k,O,B,K){return s=w0(h,p,!0,s,v,k,O,B,K),s.context=t2(null),h=s.current,p=ni(),v=Za(h),k=da(p,v),k.callback=l??null,Xa(h,k,v),s.current.lanes=v,bs(s,v,p),fi(s,p),s}function yf(s,l,h,p){var v=l.current,k=ni(),O=Za(v);return h=t2(h),l.context===null?l.context=h:l.pendingContext=h,l=da(k,O),l.payload={element:s},p=p===void 0?null:p,p!==null&&(l.callback=p),s=Xa(v,l,O),s!==null&&(us(s,v,O,k),Gh(s,v,O)),O}function xf(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function r2(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function _0(s,l){r2(s,l),(s=s.alternate)&&r2(s,l)}function WI(){return null}var i2=typeof reportError=="function"?reportError:function(s){console.error(s)};function k0(s){this._internalRoot=s}vf.prototype.render=k0.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));yf(s,l,null,null)},vf.prototype.unmount=k0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Jo(function(){yf(null,s,null,null)}),l[aa]=null}};function vf(s){this._internalRoot=s}vf.prototype.unstable_scheduleHydration=function(s){if(s){var l=Y();s={blockedOn:null,target:s,priority:l};for(var h=0;h<Tn.length&&l!==0&&l<Tn[h].priority;h++);Tn.splice(h,0,s),h===0&&hn(s)}};function E0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function s2(){}function qI(s,l,h,p,v){if(v){if(typeof p=="function"){var k=p;p=function(){var he=xf(O);k.call(he)}}var O=n2(l,p,s,0,null,!1,!1,"",s2);return s._reactRootContainer=O,s[aa]=O.current,ju(s.nodeType===8?s.parentNode:s),Jo(),O}for(;v=s.lastChild;)s.removeChild(v);if(typeof p=="function"){var B=p;p=function(){var he=xf(K);B.call(he)}}var K=w0(s,0,!1,null,null,!1,!1,"",s2);return s._reactRootContainer=K,s[aa]=K.current,ju(s.nodeType===8?s.parentNode:s),Jo(function(){yf(l,K,h,p)}),K}function wf(s,l,h,p,v){var k=h._reactRootContainer;if(k){var O=k;if(typeof v=="function"){var B=v;v=function(){var K=xf(O);B.call(K)}}yf(l,O,s,v)}else O=qI(h,l,s,v,p);return xf(O)}Ul=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var h=xs(l.pendingLanes);h!==0&&(ws(l,h|1),fi(l,Wt()),(qt&6)===0&&(gc=Wt()+500,Ga()))}break;case 13:Jo(function(){var p=ua(s,1);if(p!==null){var v=ni();us(p,s,1,v)}}),_0(s,1)}},ta=function(s){if(s.tag===13){var l=ua(s,134217728);if(l!==null){var h=ni();us(l,s,134217728,h)}_0(s,134217728)}},$l=function(s){if(s.tag===13){var l=Za(s),h=ua(s,l);if(h!==null){var p=ni();us(h,s,l,p)}_0(s,l)}},Y=function(){return Lt},xe=function(s,l){var h=Lt;try{return Lt=s,l()}finally{Lt=h}},Dr=function(s,l,h){switch(l){case"input":if(Z(s,h),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var p=h[l];if(p!==s&&p.form===s.form){var v=Lh(p);if(!v)throw Error(n(90));pt(p),Z(p,v)}}}break;case"textarea":G(s,h);break;case"select":l=h.value,l!=null&&St(s,!!h.multiple,l,!1)}},V=p0,W=Jo;var GI={usingClientEntryPoint:!1,Events:[Pu,rc,Lh,Jn,Mr,p0]},qu={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KI={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Xr(s),s===null?null:s.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||WI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Qs=_f.inject(KI),Jr=_f}catch{}}return mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GI,mi.createPortal=function(s,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E0(l))throw Error(n(200));return HI(s,l,null,h)},mi.createRoot=function(s,l){if(!E0(s))throw Error(n(299));var h=!1,p="",v=i2;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=w0(s,1,!1,null,null,h,!1,p,v),s[aa]=l.current,ju(s.nodeType===8?s.parentNode:s),new k0(l)},mi.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Xr(l),s=s===null?null:s.stateNode,s},mi.flushSync=function(s){return Jo(s)},mi.hydrate=function(s,l,h){if(!bf(l))throw Error(n(200));return wf(null,s,l,!0,h)},mi.hydrateRoot=function(s,l,h){if(!E0(s))throw Error(n(405));var p=h!=null&&h.hydratedSources||null,v=!1,k="",O=i2;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(k=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),l=n2(l,null,s,1,h??null,v,!1,k,O),s[aa]=l.current,ju(s),p)for(s=0;s<p.length;s++)h=p[s],v=h._getVersion,v=v(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,v]:l.mutableSourceEagerHydrationData.push(h,v);return new vf(l)},mi.render=function(s,l,h){if(!bf(l))throw Error(n(200));return wf(null,s,l,!1,h)},mi.unmountComponentAtNode=function(s){if(!bf(s))throw Error(n(40));return s._reactRootContainer?(Jo(function(){wf(null,null,s,!1,function(){s._reactRootContainer=null,s[aa]=null})}),!0):!1},mi.unstable_batchedUpdates=p0,mi.unstable_renderSubtreeIntoContainer=function(s,l,h,p){if(!bf(h))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return wf(s,l,h,!1,p)},mi.version="18.3.1-next-f1338f8080-20240426",mi}var f2;function zN(){if(f2)return T0.exports;f2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),T0.exports=n5(),T0.exports}var m2;function r5(){if(m2)return kf;m2=1;var t=zN();return kf.createRoot=t.createRoot,kf.hydrateRoot=t.hydrateRoot,kf}var i5=r5();const s5=Yd(i5);var zx=zN();const a5=Yd(zx);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}var mo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mo||(mo={}));const p2="popstate";function o5(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:c,hash:u}=r.location;return _y("",{pathname:o,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ym(i)}return c5(e,n,null,t)}function Yn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function BN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l5(){return Math.random().toString(36).substr(2,8)}function g2(t,e){return{usr:t.state,key:t.key,idx:e}}function _y(t,e,n,r){return n===void 0&&(n=null),_d({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nu(e):e,{state:n,key:e&&e.key||r||l5()})}function ym(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function c5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,u=mo.Pop,d=null,f=g();f==null&&(f=0,c.replaceState(_d({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=mo.Pop;let T=g(),j=T==null?null:T-f;f=T,d&&d({action:u,location:b.location,delta:j})}function x(T,j){u=mo.Push;let R=_y(b.location,T,j);f=g()+1;let A=g2(R,f),L=b.createHref(R);try{c.pushState(A,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(L)}o&&d&&d({action:u,location:b.location,delta:1})}function w(T,j){u=mo.Replace;let R=_y(b.location,T,j);f=g();let A=g2(R,f),L=b.createHref(R);c.replaceState(A,"",L),o&&d&&d({action:u,location:b.location,delta:0})}function N(T){let j=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof T=="string"?T:ym(T);return R=R.replace(/ $/,"%20"),Yn(j,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,j)}let b={get action(){return u},get location(){return t(i,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(p2,y),d=T,()=>{i.removeEventListener(p2,y),d=null}},createHref(T){return e(i,T)},createURL:N,encodeLocation(T){let j=N(T);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:w,go(T){return c.go(T)}};return b}var y2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(y2||(y2={}));function u5(t,e,n){return n===void 0&&(n="/"),d5(t,e,n)}function d5(t,e,n,r){let i=typeof e=="string"?nu(e):e,o=Bx(i.pathname||"/",n);if(o==null)return null;let c=HN(t);h5(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=E5(o);u=w5(c[d],f)}return u}function HN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,c,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};d.relativePath.startsWith("/")&&(Yn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=go([r,d.relativePath]),g=n.concat(d);o.children&&o.children.length>0&&(Yn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),HN(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:v5(f,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of WN(o.path))i(o,c,d)}),e}function WN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=WN(r.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),i&&u.push(...c),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function h5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const f5=/^:[\w-]+$/,m5=3,p5=2,g5=1,y5=10,x5=-2,x2=t=>t==="*";function v5(t,e){let n=t.split("/"),r=n.length;return n.some(x2)&&(r+=x5),e&&(r+=p5),n.filter(i=>!x2(i)).reduce((i,o)=>i+(f5.test(o)?m5:o===""?g5:y5),r)}function b5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function w5(t,e,n){let{routesMeta:r}=t,i={},o="/",c=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=_5({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),x=d.route;if(!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:go([o,y.pathname]),pathnameBase:C5(go([o,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(o=go([o,y.pathnameBase]))}return c}function _5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:x,isOptional:w}=g;if(x==="*"){let b=u[y]||"";c=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const N=u[y];return w&&!N?f[x]=void 0:f[x]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function k5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),BN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return BN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?nu(t):t;return{pathname:n?n.startsWith("/")?n:S5(n,e):e,search:j5(r),hash:A5(i)}}function S5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function A0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function T5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Hx(t,e){let n=T5(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=nu(t):(i=_d({},t),Yn(!i.pathname||!i.pathname.includes("?"),A0("?","pathname","search",i)),Yn(!i.pathname||!i.pathname.includes("#"),A0("#","pathname","hash",i)),Yn(!i.search||!i.search.includes("#"),A0("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;i.pathname=x.join("/")}u=y>=0?e[y]:"/"}let d=N5(i,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}const go=t=>t.join("/").replace(/\/\/+/g,"/"),C5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),j5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,A5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function I5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qN=["post","put","patch","delete"];new Set(qN);const P5=["get",...qN];new Set(P5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kd.apply(this,arguments)}const qx=E.createContext(null),R5=E.createContext(null),Ro=E.createContext(null),op=E.createContext(null),Pa=E.createContext({outlet:null,matches:[],isDataRoute:!1}),GN=E.createContext(null);function D5(t,e){let{relative:n}=e===void 0?{}:e;ru()||Yn(!1);let{basename:r,navigator:i}=E.useContext(Ro),{hash:o,pathname:c,search:u}=YN(t,{relative:n}),d=c;return r!=="/"&&(d=c==="/"?r:go([r,c])),i.createHref({pathname:d,search:u,hash:o})}function ru(){return E.useContext(op)!=null}function gs(){return ru()||Yn(!1),E.useContext(op).location}function KN(t){E.useContext(Ro).static||E.useLayoutEffect(t)}function ai(){let{isDataRoute:t}=E.useContext(Pa);return t?G5():M5()}function M5(){ru()||Yn(!1);let t=E.useContext(qx),{basename:e,future:n,navigator:r}=E.useContext(Ro),{matches:i}=E.useContext(Pa),{pathname:o}=gs(),c=JSON.stringify(Hx(i,n.v7_relativeSplatPath)),u=E.useRef(!1);return KN(()=>{u.current=!0}),E.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=Wx(f,JSON.parse(c),o,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:go([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,o,t])}function XN(){let{matches:t}=E.useContext(Pa),e=t[t.length-1];return e?e.params:{}}function YN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(Ro),{matches:i}=E.useContext(Pa),{pathname:o}=gs(),c=JSON.stringify(Hx(i,r.v7_relativeSplatPath));return E.useMemo(()=>Wx(t,JSON.parse(c),o,n==="path"),[t,c,o,n])}function O5(t,e){return L5(t,e)}function L5(t,e,n,r){ru()||Yn(!1);let{navigator:i}=E.useContext(Ro),{matches:o}=E.useContext(Pa),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let f=gs(),g;if(e){var y;let T=typeof e=="string"?nu(e):e;d==="/"||(y=T.pathname)!=null&&y.startsWith(d)||Yn(!1),g=T}else g=f;let x=g.pathname||"/",w=x;if(d!=="/"){let T=d.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(T.length).join("/")}let N=u5(t,{pathname:w}),b=z5(N&&N.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:go([d,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?d:go([d,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,r);return e&&b?E.createElement(op.Provider,{value:{location:kd({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:mo.Pop}},b):b}function V5(){let t=q5(),e=I5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:i},n):null,null)}const F5=E.createElement(V5,null);class U5 extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(Pa.Provider,{value:this.props.routeContext},E.createElement(GN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $5(t){let{routeContext:e,match:n,children:r}=t,i=E.useContext(qx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Pa.Provider,{value:e},r)}function z5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||Yn(!1),c=c.slice(0,Math.min(c.length,g+1))}let d=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:x,errors:w}=n,N=y.route.loader&&x[y.route.id]===void 0&&(!w||w[y.route.id]===void 0);if(y.route.lazy||N){d=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,x)=>{let w,N=!1,b=null,T=null;n&&(w=u&&y.route.id?u[y.route.id]:void 0,b=y.route.errorElement||F5,d&&(f<0&&x===0?(K5("route-fallback"),N=!0,T=null):f===x&&(N=!0,T=y.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,x+1)),R=()=>{let A;return w?A=b:N?A=T:y.route.Component?A=E.createElement(y.route.Component,null):y.route.element?A=y.route.element:A=g,E.createElement($5,{match:y,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:A})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?E.createElement(U5,{location:n.location,revalidation:n.revalidation,component:b,error:w,children:R(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):R()},null)}var QN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(QN||{}),JN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(JN||{});function B5(t){let e=E.useContext(qx);return e||Yn(!1),e}function H5(t){let e=E.useContext(R5);return e||Yn(!1),e}function W5(t){let e=E.useContext(Pa);return e||Yn(!1),e}function ZN(t){let e=W5(),n=e.matches[e.matches.length-1];return n.route.id||Yn(!1),n.route.id}function q5(){var t;let e=E.useContext(GN),n=H5(),r=ZN();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function G5(){let{router:t}=B5(QN.UseNavigateStable),e=ZN(JN.UseNavigateStable),n=E.useRef(!1);return KN(()=>{n.current=!0}),E.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,kd({fromRouteId:e},o)))},[t,e])}const v2={};function K5(t,e,n){v2[t]||(v2[t]=!0)}function X5(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Y5(t){let{to:e,replace:n,state:r,relative:i}=t;ru()||Yn(!1);let{future:o,static:c}=E.useContext(Ro),{matches:u}=E.useContext(Pa),{pathname:d}=gs(),f=ai(),g=Wx(e,Hx(u,o.v7_relativeSplatPath),d,i==="path"),y=JSON.stringify(g);return E.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:i}),[f,y,i,n,r]),null}function yr(t){Yn(!1)}function Q5(t){let{basename:e="/",children:n=null,location:r,navigationType:i=mo.Pop,navigator:o,static:c=!1,future:u}=t;ru()&&Yn(!1);let d=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:d,navigator:o,static:c,future:kd({v7_relativeSplatPath:!1},u)}),[d,u,o,c]);typeof r=="string"&&(r=nu(r));let{pathname:g="/",search:y="",hash:x="",state:w=null,key:N="default"}=r,b=E.useMemo(()=>{let T=Bx(g,d);return T==null?null:{location:{pathname:T,search:y,hash:x,state:w,key:N},navigationType:i}},[d,g,y,x,w,N,i]);return b==null?null:E.createElement(Ro.Provider,{value:f},E.createElement(op.Provider,{children:n,value:b}))}function J5(t){let{children:e,location:n}=t;return O5(ky(e),n)}new Promise(()=>{});function ky(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let o=[...e,i];if(r.type===E.Fragment){n.push.apply(n,ky(r.props.children,o));return}r.type!==yr&&Yn(!1),!r.props.index||!r.props.children||Yn(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ky(r.props.children,o)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ey(){return Ey=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ey.apply(this,arguments)}function Z5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function e3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t3(t,e){return t.button===0&&(!e||e==="_self")&&!e3(t)}function Ny(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function n3(t,e){let n=Ny(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const r3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i3="6";try{window.__reactRouterVersion=i3}catch{}const s3="startTransition",b2=wy[s3];function a3(t){let{basename:e,children:n,future:r,window:i}=t,o=E.useRef();o.current==null&&(o.current=o5({window:i,v5Compat:!0}));let c=o.current,[u,d]=E.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=E.useCallback(y=>{f&&b2?b2(()=>d(y)):d(y)},[d,f]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.useEffect(()=>X5(r),[r]),E.createElement(Q5,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const o3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,At=E.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y}=e,x=Z5(e,r3),{basename:w}=E.useContext(Ro),N,b=!1;if(typeof f=="string"&&l3.test(f)&&(N=f,o3))try{let A=new URL(window.location.href),L=f.startsWith("//")?new URL(A.protocol+f):new URL(f),z=Bx(L.pathname,w);L.origin===A.origin&&z!=null?f=z+L.search+L.hash:b=!0}catch{}let T=D5(f,{relative:i}),j=c3(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:i,viewTransition:y});function R(A){r&&r(A),A.defaultPrevented||j(A)}return E.createElement("a",Ey({},x,{href:N||T,onClick:b||o?r:R,ref:n,target:d}))});var w2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(w2||(w2={}));var _2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_2||(_2={}));function c3(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,d=ai(),f=gs(),g=YN(t,{relative:c});return E.useCallback(y=>{if(t3(y,n)){y.preventDefault();let x=r!==void 0?r:ym(f)===ym(g);d(t,{replace:x,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[f,d,g,r,i,n,t,o,c,u])}function Gx(t){let e=E.useRef(Ny(t)),n=E.useRef(!1),r=gs(),i=E.useMemo(()=>n3(r.search,n.current?null:e.current),[r.search]),o=ai(),c=E.useCallback((u,d)=>{const f=Ny(typeof u=="function"?u(i):u);n.current=!0,o("?"+f,d)},[o,i]);return[i,c]}const eS=E.createContext(),u3=({children:t})=>{const[e,n]=E.useState(()=>{const w=localStorage.getItem("carrito");return w?JSON.parse(w):[]}),[r,i]=E.useState(()=>{const w=localStorage.getItem("favoritos");return w?JSON.parse(w):[]});E.useEffect(()=>{localStorage.setItem("carrito",JSON.stringify(e))},[e]),E.useEffect(()=>{n(w=>w.map(N=>{if(N.maxStock!==void 0)return N;if(Array.isArray(N.variantes)&&N.colorSeleccionado){const b=N.variantes.find(T=>T.color===N.colorSeleccionado);if(b&&b.cantidad!==void 0)return{...N,maxStock:Number(b.cantidad)||0}}if(N.cantidadProducto!==void 0){const b=Number(N.cantidadProducto);if(!Number.isNaN(b))return{...N,maxStock:b}}return N}))},[]),E.useEffect(()=>{n(w=>{const N=new Map;for(const b of w){const T=`${b.id}__${b.colorSeleccionado??""}`,j=N.get(T);j?N.set(T,{...j,cantidad:(Number(j.cantidad)||0)+(Number(b.cantidad)||0),maxStock:Math.max(Number(j.maxStock??0)||0,Number(b.maxStock??0)||0)||j.maxStock||b.maxStock}):N.set(T,{...b})}return Array.from(N.values())})},[]),E.useEffect(()=>{localStorage.setItem("favoritos",JSON.stringify(r))},[r]);const o=w=>{try{const N=(w??"").toString().trim();return N||null}catch{return null}},c=(w,N=null)=>{n(b=>{const T=o(N),j=T&&Array.isArray(w.variantes)?w.variantes.find(L=>o(L.color)===T):null,R=(j&&Number(j.cantidad))??(w.maxStock!==void 0?Number(w.maxStock):void 0)??(w.cantidad!==void 0?Number(w.cantidad):void 0)??1/0,A=b.find(L=>L.id===w.id&&o(L.colorSeleccionado)===T);if(A){const L=Number.isFinite(R)?R:1/0,z=L;return A.cantidad<z?b.map(q=>q.id===w.id&&o(q.colorSeleccionado)===T?{...q,cantidad:q.cantidad+1,maxStock:L}:q):b}return R>0?[...b,{...w,cantidad:1,colorSeleccionado:T,maxStock:R}]:b})},u=(w,N=null)=>{const b=o(N);n(T=>T.map(j=>j.id===w&&o(j.colorSeleccionado)===b?{...j,cantidad:j.cantidad-1}:j).filter(j=>j.cantidad>0))},d=(w,N=null)=>{const b=o(N);n(T=>T.filter(j=>!(j.id===w&&o(j.colorSeleccionado)===b)))},f=w=>{n(N=>N.find(T=>T.id===w.id)?N.filter(T=>T.id!==w.id):[...N,{...w,cantidad:1}])},g=w=>{i(N=>N.find(b=>b.id===w.id)?N:[...N,w])},y=w=>{i(N=>N.filter(b=>b.id!==w))},x=()=>{n([])};return a.jsx(eS.Provider,{value:{carrito:e,favoritos:r,agregarAlCarrito:c,eliminarUnidadDelCarrito:u,quitarDelCarrito:d,toggleCarrito:f,agregarAFavoritos:g,eliminarDeFavoritos:y,vaciarCarrito:x},children:t})},Qd=()=>E.useContext(eS),tS=E.createContext();function iu(){return E.useContext(tS)}function d3({children:t}){const[e,n]=E.useState(!1),[r,i]=E.useState("login");function o(u="login"){i(u),n(!0)}function c(){n(!1)}return a.jsx(tS.Provider,{value:{modalAbierto:e,setModalAbierto:n,abrirModal:o,cerrarModal:c,modo:r,setModo:i},children:t})}const h3=()=>{};var k2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},f3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],c=t[n++],u=t[n++],d=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},rS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],c=i+1<t.length,u=c?t[i+1]:0,d=i+2<t.length,f=d?t[i+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let x=(u&15)<<2|f>>6,w=f&63;d||(w=64,c||(x=64)),r.push(n[g],n[y],n[x],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new m3;const x=o<<2|u>>4;if(r.push(x),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const N=f<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class m3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p3=function(t){const e=nS(t);return rS.encodeByteArray(e,!0)},xm=function(t){return p3(t).replace(/\./g,"")},iS=function(t){try{return rS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=()=>g3().__FIREBASE_DEFAULTS__,x3=()=>{if(typeof process>"u"||typeof k2>"u")return;const t=k2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},v3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iS(t[1]);return e&&JSON.parse(e)},lp=()=>{try{return h3()||y3()||x3()||v3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sS=t=>{var e,n;return(n=(e=lp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kx=t=>{const e=sS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aS=()=>{var t;return(t=lp())===null||t===void 0?void 0:t.config},oS=t=>{var e;return(e=lp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xm(JSON.stringify(n)),xm(JSON.stringify(c)),""].join(".")}const ld={};function w3(){const t={prod:[],emulator:[]};for(const e of Object.keys(ld))ld[e]?t.emulator.push(e):t.prod.push(e);return t}function _3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let E2=!1;function up(t,e){if(typeof window>"u"||typeof document>"u"||!Ra(window.location.host)||ld[t]===e||ld[t]||E2)return;ld[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=w3().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{E2=!0,c()},x}function g(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=_3(r),w=n("text"),N=document.getElementById(w)||document.createElement("span"),b=n("learnmore"),T=document.getElementById(b)||document.createElement("a"),j=n("preprendIcon"),R=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const A=x.element;u(A),g(T,b);const L=f();d(R,j),A.append(R,N,T,L),document.body.appendChild(A)}o?(N.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function E3(){var t;const e=(t=lp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function T3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C3(){const t=Kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function j3(){return!E3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A3(){try{return typeof indexedDB=="object"}catch{return!1}}function I3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="FirebaseError";class ys extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P3,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jd.prototype.create)}}class Jd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?R3(o,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new ys(i,u,r)}}function R3(t,e){return t.replace(D3,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const D3=/\{\$([^}]+)}/g;function M3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _l(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],c=e[i];if(N2(o)&&N2(c)){if(!_l(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function N2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ed(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function O3(t,e){const n=new L3(t,e);return n.subscribe.bind(n)}class L3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=I0),i.error===void 0&&(i.error=I0),i.complete===void 0&&(i.complete=I0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function I0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t){return t&&t._delegate?t._delegate:t}class _a{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new b3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($3(e))try{this.getOrInitializeService({instanceIdentifier:rl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rl){return this.instances.has(e)}getOptions(e=rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rl){return this.component?this.component.multipleInstances?e:rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U3(t){return t===rl?void 0:t}function $3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const B3={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},H3=Ft.INFO,W3={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},q3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=W3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xx{constructor(e){this.name=e,this._logLevel=H3,this._logHandler=q3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const G3=(t,e)=>e.some(n=>t instanceof n);let S2,T2;function K3(){return S2||(S2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X3(){return T2||(T2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cS=new WeakMap,Sy=new WeakMap,uS=new WeakMap,P0=new WeakMap,Yx=new WeakMap;function Y3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{n(yo(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&cS.set(n,t)}).catch(()=>{}),Yx.set(e,t),e}function Q3(t){if(Sy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});Sy.set(t,e)}let Ty={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J3(t){Ty=t(Ty)}function Z3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(R0(this),e,...n);return uS.set(r,e.sort?e.sort():[e]),yo(r)}:X3().includes(t)?function(...e){return t.apply(R0(this),e),yo(cS.get(this))}:function(...e){return yo(t.apply(R0(this),e))}}function eP(t){return typeof t=="function"?Z3(t):(t instanceof IDBTransaction&&Q3(t),G3(t,K3())?new Proxy(t,Ty):t)}function yo(t){if(t instanceof IDBRequest)return Y3(t);if(P0.has(t))return P0.get(t);const e=eP(t);return e!==t&&(P0.set(t,e),Yx.set(e,t)),e}const R0=t=>Yx.get(t);function tP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(t,e),u=yo(c);return r&&c.addEventListener("upgradeneeded",d=>{r(yo(c.result),d.oldVersion,d.newVersion,yo(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const nP=["get","getKey","getAll","getAllKeys","count"],rP=["put","add","delete","clear"],D0=new Map;function C2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(D0.get(e))return D0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nP.includes(n)))return;const o=async function(c,...u){const d=this.transaction(c,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&d.done]))[0]};return D0.set(e,o),o}J3(t=>({...t,get:(e,n,r)=>C2(e,n)||t.get(e,n,r),has:(e,n)=>!!C2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cy="@firebase/app",j2="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Xx("@firebase/app"),aP="@firebase/app-compat",oP="@firebase/analytics-compat",lP="@firebase/analytics",cP="@firebase/app-check-compat",uP="@firebase/app-check",dP="@firebase/auth",hP="@firebase/auth-compat",fP="@firebase/database",mP="@firebase/data-connect",pP="@firebase/database-compat",gP="@firebase/functions",yP="@firebase/functions-compat",xP="@firebase/installations",vP="@firebase/installations-compat",bP="@firebase/messaging",wP="@firebase/messaging-compat",_P="@firebase/performance",kP="@firebase/performance-compat",EP="@firebase/remote-config",NP="@firebase/remote-config-compat",SP="@firebase/storage",TP="@firebase/storage-compat",CP="@firebase/firestore",jP="@firebase/ai",AP="@firebase/firestore-compat",IP="firebase",PP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",RP={[Cy]:"fire-core",[aP]:"fire-core-compat",[lP]:"fire-analytics",[oP]:"fire-analytics-compat",[uP]:"fire-app-check",[cP]:"fire-app-check-compat",[dP]:"fire-auth",[hP]:"fire-auth-compat",[fP]:"fire-rtdb",[mP]:"fire-data-connect",[pP]:"fire-rtdb-compat",[gP]:"fire-fn",[yP]:"fire-fn-compat",[xP]:"fire-iid",[vP]:"fire-iid-compat",[bP]:"fire-fcm",[wP]:"fire-fcm-compat",[_P]:"fire-perf",[kP]:"fire-perf-compat",[EP]:"fire-rc",[NP]:"fire-rc-compat",[SP]:"fire-gcs",[TP]:"fire-gcs-compat",[CP]:"fire-fst",[AP]:"fire-fst-compat",[jP]:"fire-vertex","fire-js":"fire-js",[IP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,DP=new Map,Ay=new Map;function A2(t,e){try{t.container.addComponent(e)}catch(n){ka.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wo(t){const e=t.name;if(Ay.has(e))return ka.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,t);for(const n of vm.values())A2(n,t);for(const n of DP.values())A2(n,t);return!0}function eh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new Jd("app","Firebase",MP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=PP;function dS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw xo.create("bad-app-name",{appName:String(i)});if(n||(n=aS()),!n)throw xo.create("no-options");const o=vm.get(i);if(o){if(_l(n,o.options)&&_l(r,o.config))return o;throw xo.create("duplicate-app",{appName:i})}const c=new z3(i);for(const d of Ay.values())c.addComponent(d);const u=new OP(n,r,c);return vm.set(i,u),u}function dp(t=jy){const e=vm.get(t);if(!e&&t===jy&&aS())return dS();if(!e)throw xo.create("no-app",{appName:t});return e}function Xi(t,e,n){var r;let i=(r=RP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ka.warn(u.join(" "));return}wo(new _a(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firebase-heartbeat-database",VP=1,Ed="firebase-heartbeat-store";let M0=null;function hS(){return M0||(M0=tP(LP,VP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ed)}catch(n){console.warn(n)}}}}).catch(t=>{throw xo.create("idb-open",{originalErrorMessage:t.message})})),M0}async function FP(t){try{const n=(await hS()).transaction(Ed),r=await n.objectStore(Ed).get(fS(t));return await n.done,r}catch(e){if(e instanceof ys)ka.warn(e.message);else{const n=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ka.warn(n.message)}}}async function I2(t,e){try{const r=(await hS()).transaction(Ed,"readwrite");await r.objectStore(Ed).put(e,fS(t)),await r.done}catch(n){if(n instanceof ys)ka.warn(n.message);else{const r=xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ka.warn(r.message)}}}function fS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=1024,$P=30;class zP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=P2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>$P){const c=WP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ka.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=P2(),{heartbeatsToSend:r,unsentEntries:i}=BP(this._heartbeatsCache.heartbeats),o=xm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ka.warn(n),""}}}function P2(){return new Date().toISOString().substring(0,10)}function BP(t,e=UP){const n=[];let r=t.slice();for(const i of t){const o=n.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),R2(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),R2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A3()?I3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return I2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return I2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function R2(t){return xm(JSON.stringify({version:2,heartbeats:t})).length}function WP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){wo(new _a("platform-logger",e=>new iP(e),"PRIVATE")),wo(new _a("heartbeat",e=>new zP(e),"PRIVATE")),Xi(Cy,j2,t),Xi(Cy,j2,"esm2017"),Xi("fire-js","")}qP("");function Qx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Pl(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function u(g){try{f(r.next(g))}catch(y){c(y)}}function d(g){try{f(r.throw(g))}catch(y){c(y)}}function f(g){g.done?o(g.value):i(g.value).then(u,d)}f((r=r.apply(t,e||[])).next())})}function mS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GP=mS,pS=new Jd("auth","Firebase",mS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=new Xx("@firebase/auth");function KP(t,...e){bm.logLevel<=Ft.WARN&&bm.warn(`Auth (${Il}): ${t}`,...e)}function Kf(t,...e){bm.logLevel<=Ft.ERROR&&bm.error(`Auth (${Il}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,...e){throw Jx(t,...e)}function Fs(t,...e){return Jx(t,...e)}function gS(t,e,n){const r=Object.assign(Object.assign({},GP()),{[e]:n});return new Jd("auth","Firebase",r).create(e,{appName:t.name})}function va(t){return gS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pS.create(t,...e)}function xt(t,e,...n){if(!t)throw Jx(e,...n)}function ya(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kf(e),new Error(e)}function Ea(t,e){t||ya(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XP(){return D2()==="http:"||D2()==="https:"}function D2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XP()||S3()||"connection"in navigator)?navigator.onLine:!0}function QP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ea(n>e,"Short delay should be less than long delay!"),this.isMobile=k3()||T3()}get(){return YP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t,e){Ea(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eR=new th(3e4,6e4);function Do(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Da(t,e,n,r,i={}){return xS(t,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Zd(Object.assign({key:t.config.apiKey},c)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return N3()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Ra(t.emulatorConfig.host)&&(f.credentials="include"),yS.fetch()(await vS(t,t.config.apiHost,n,u),f)})}async function xS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},JP),e);try{const i=new nR(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Ef(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ef(t,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Ef(t,"email-already-in-use",c);if(d==="USER_DISABLED")throw Ef(t,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw gS(t,g,f);ms(t,g)}}catch(i){if(i instanceof ys)throw i;ms(t,"network-request-failed",{message:String(i)})}}async function nh(t,e,n,r,i={}){const o=await Da(t,e,n,r,i);return"mfaPendingCredential"in o&&ms(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function vS(t,e,n,r){const i=`${e}${n}?${r}`,o=t,c=o.config.emulator?Zx(t.config,i):`${t.config.apiScheme}://${i}`;return ZP.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function tR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fs(this.auth,"network-request-failed")),eR.get())})}}function Ef(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fs(t,e,r);return i.customData._tokenResponse=n,i}function M2(t){return t!==void 0&&t.enterprise!==void 0}class rR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iR(t,e){return Da(t,"GET","/v2/recaptchaConfig",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e){return Da(t,"POST","/v1/accounts:delete",e)}async function wm(t,e){return Da(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aR(t,e=!1){const n=rn(t),r=await n.getIdToken(e),i=ev(r);xt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:cd(O0(i.auth_time)),issuedAtTime:cd(O0(i.iat)),expirationTime:cd(O0(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function O0(t){return Number(t)*1e3}function ev(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{const i=iS(n);return i?JSON.parse(i):(Kf("Failed to decode base64 JWT payload"),null)}catch(i){return Kf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function O2(t){const e=ev(t);return xt(e,"internal-error"),xt(typeof e.exp<"u","internal-error"),xt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ys&&oR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cd(this.lastLoginAt),this.creationTime=cd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _m(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Wc(t,wm(n,{idToken:r}));xt(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?bS(o.providerUserInfo):[],u=uR(t.providerData,c),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),g=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Py(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function cR(t){const e=rn(t);await _m(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bS(t){return t.map(e=>{var{providerId:n}=e,r=Qx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,e){const n=await xS(t,{},async()=>{const r=Zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,c=await vS(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&Ra(t.emulatorConfig.host)&&(d.credentials="include"),yS.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hR(t,e){return Da(t,"POST","/v2/accounts:revokeToken",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xt(e.idToken,"internal-error"),xt(typeof e.idToken<"u","internal-error"),xt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xt(e.length!==0,"internal-error");const n=O2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await dR(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,c=new Vc;return r&&(xt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(xt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(xt(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vc,this.toJSON())}_performRefresh(){return ya("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e){xt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Qx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Py(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Wc(this,this.stsTokenManager.getToken(this.auth,e));return xt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aR(this,e)}reload(){return cR(this)}_assign(e){this!==e&&(xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _m(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(va(this.auth));const e=await this.getIdToken();return await Wc(this,sR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,c,u,d,f,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,w=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,N=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(u=n.tenantId)!==null&&u!==void 0?u:void 0,T=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,j=(f=n.createdAt)!==null&&f!==void 0?f:void 0,R=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:A,emailVerified:L,isAnonymous:z,providerData:q,stsTokenManager:D}=n;xt(A&&D,e,"internal-error");const M=Vc.fromJSON(this.name,D);xt(typeof A=="string",e,"internal-error"),ro(y,e.name),ro(x,e.name),xt(typeof L=="boolean",e,"internal-error"),xt(typeof z=="boolean",e,"internal-error"),ro(w,e.name),ro(N,e.name),ro(b,e.name),ro(T,e.name),ro(j,e.name),ro(R,e.name);const P=new fs({uid:A,auth:e,email:x,emailVerified:L,displayName:y,isAnonymous:z,photoURL:N,phoneNumber:w,tenantId:b,stsTokenManager:M,createdAt:j,lastLoginAt:R});return q&&Array.isArray(q)&&(P.providerData=q.map(S=>Object.assign({},S))),T&&(P._redirectEventId=T),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vc;i.updateFromServerResponse(n);const o=new fs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _m(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];xt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?bS(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Vc;u.updateFromIdToken(r);const d=new fs({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Py(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new Map;function xa(t){Ea(t instanceof Function,"Expected a class definition");let e=L2.get(t);return e?(Ea(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,L2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wS.type="NONE";const V2=wS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){return`firebase:${t}:${e}:${n}`}class Fc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Xf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Xf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wm(this.auth,{idToken:e}).catch(()=>{});return n?fs._fromGetAccountInfoResponse(this.auth,n,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fc(xa(V2),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||xa(V2);const c=Xf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const x=await wm(e,{idToken:g}).catch(()=>{});if(!x)break;y=await fs._fromGetAccountInfoResponse(e,x,g)}else y=fs._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Fc(o,e,r):(o=d[0],u&&await o._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Fc(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_S(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TS(e))return"Blackberry";if(CS(e))return"Webos";if(kS(e))return"Safari";if((e.includes("chrome/")||ES(e))&&!e.includes("edge/"))return"Chrome";if(SS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _S(t=Kr()){return/firefox\//i.test(t)}function kS(t=Kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ES(t=Kr()){return/crios\//i.test(t)}function NS(t=Kr()){return/iemobile/i.test(t)}function SS(t=Kr()){return/android/i.test(t)}function TS(t=Kr()){return/blackberry/i.test(t)}function CS(t=Kr()){return/webos/i.test(t)}function tv(t=Kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fR(t=Kr()){var e;return tv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mR(){return C3()&&document.documentMode===10}function jS(t=Kr()){return tv(t)||SS(t)||CS(t)||TS(t)||/windows phone/i.test(t)||NS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t,e=[]){let n;switch(t){case"Browser":n=F2(Kr());break;case"Worker":n=`${F2(Kr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Il}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((c,u)=>{try{const d=e(o);c(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(t,e={}){return Da(t,"GET","/v2/passwordPolicy",Do(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=6;class xR{constructor(e){var n,r,i,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:yR,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,c,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U2(this),this.idTokenSubscription=new U2(this),this.beforeStateQueue=new pR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xa(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Fc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wm(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===u)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _m(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(va(this));const n=e?rn(e):null;return n&&xt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gR(this),n=new xR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xa(e)||this._popupRedirectResolver;xt(n,this,"argument-error"),this.redirectPersistenceManager=await Fc.create(this,[xa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(xt(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{c=!0,d()}}else{const d=e.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rl(t){return rn(t)}class U2{constructor(e){this.auth=e,this.observer=null,this.addObserver=O3(n=>this.observer=n)}get next(){return xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bR(t){hp=t}function IS(t){return hp.loadJS(t)}function wR(){return hp.recaptchaEnterpriseScript}function _R(){return hp.gapiScript}function kR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ER{constructor(){this.enterprise=new NR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SR="recaptcha-enterprise",PS="NO_RECAPTCHA";class TR{constructor(e){this.type=SR,this.auth=Rl(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{iR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new rR(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(d=>{u(d)})})}function i(o,c,u){const d=window.grecaptcha;M2(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(PS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ER().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!n&&M2(window.grecaptcha))i(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=wR();d.length!==0&&(d+=u),IS(d).then(()=>{i(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function $2(t,e,n,r=!1,i=!1){const o=new TR(t);let c;if(i)c=PS;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ry(t,e,n,r,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await $2(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await $2(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t,e){const n=eh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(_l(o,e??{}))return i;ms(i,"already-initialized")}return n.initialize({options:e})}function jR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AR(t,e,n){const r=Rl(t);xt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=RS(e),{host:c,port:u}=IR(e),d=u===null?"":`:${u}`,f={url:`${o}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xt(_l(f,r.config.emulator)&&_l(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Ra(c)?(cp(`${o}//${c}${d}`),up("Auth",!0)):PR()}function RS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IR(t){const e=RS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:z2(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:z2(c)}}}function z2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ya("not implemented")}_getIdTokenResponse(e){return ya("not implemented")}_linkToIdToken(e,n){return ya("not implemented")}_getReauthenticationResolver(e){return ya("not implemented")}}async function RR(t,e){return Da(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){return nh(t,"POST","/v1/accounts:signInWithPassword",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){return nh(t,"POST","/v1/accounts:signInWithEmailLink",Do(t,e))}async function OR(t,e){return nh(t,"POST","/v1/accounts:signInWithEmailLink",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends nv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Nd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Nd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ry(e,n,"signInWithPassword",DR);case"emailLink":return MR(e,{email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ry(e,r,"signUpPassword",RR);case"emailLink":return OR(e,{idToken:n,email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t,e){return nh(t,"POST","/v1/accounts:signInWithIdp",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="http://localhost";class kl extends nv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new kl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ms("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Qx(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new kl(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Uc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Uc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Uc(e,n)}buildRequest(){const e={requestUri:LR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FR(t){const e=Zu(ed(t)).link,n=e?Zu(ed(e)).deep_link_id:null,r=Zu(ed(t)).deep_link_id;return(r?Zu(ed(r)).link:null)||r||n||e||t}class rv{constructor(e){var n,r,i,o,c,u;const d=Zu(ed(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,y=VR((i=d.mode)!==null&&i!==void 0?i:null);xt(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=d.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=FR(e);try{return new rv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.providerId=su.PROVIDER_ID}static credential(e,n){return Nd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=rv.parseLink(n);return xt(r,"argument-error"),Nd._fromEmailAndCode(e,r.code,r.tenantId)}}su.PROVIDER_ID="password";su.EMAIL_PASSWORD_SIGN_IN_METHOD="password";su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends DS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends rh{constructor(){super("facebook.com")}static credential(e){return kl._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.FACEBOOK_SIGN_IN_METHOD="facebook.com";oo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends rh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return kl._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lo.credential(n,r)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends rh{constructor(){super("github.com")}static credential(e){return kl._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.GITHUB_SIGN_IN_METHOD="github.com";co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends rh{constructor(){super("twitter.com")}static credential(e,n){return kl._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return uo.credential(n,r)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e){return nh(t,"POST","/v1/accounts:signUp",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await fs._fromIdTokenResponse(e,r,i),c=B2(r);return new El({user:o,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=B2(r);return new El({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function B2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends ys{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new km(e,n,r,i)}}function MS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(t,o,e,r):o})}async function $R(t,e,n=!1){const r=await Wc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return El._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t,e,n=!1){const{auth:r}=t;if(xi(r.app))return Promise.reject(va(r));const i="reauthenticate";try{const o=await Wc(t,MS(r,i,e,t),n);xt(o.idToken,r,"internal-error");const c=ev(o.idToken);xt(c,r,"internal-error");const{sub:u}=c;return xt(t.uid===u,r,"user-mismatch"),El._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ms(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e,n=!1){if(xi(t.app))return Promise.reject(va(t));const r="signIn",i=await MS(t,r,e),o=await El._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function BR(t,e){return OS(Rl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LS(t){const e=Rl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HR(t,e,n){if(xi(t.app))return Promise.reject(va(t));const r=Rl(t),c=await Ry(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UR).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&LS(t),d}),u=await El._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function WR(t,e,n){return xi(t.app)?Promise.reject(va(t)):BR(rn(t),su.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e){return Da(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=rn(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Wc(r,qR(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function GR(t,e,n,r){return rn(t).onIdTokenChanged(e,n,r)}function KR(t,e,n){return rn(t).beforeAuthStateChanged(e,n)}function XR(t,e,n,r){return rn(t).onAuthStateChanged(e,n,r)}function YR(t){return rn(t).signOut()}const Em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Em,"1"),this.storage.removeItem(Em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1e3,JR=10;class FS extends VS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);mR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}FS.type="LOCAL";const ZR=FS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends VS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}US.type="SESSION";const $S=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async f=>f(n.origin,o)),d=await e6(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((u,d)=>{const f=iv("",20);i.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const x=y;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function n6(t){Us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function r6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s6(){return zS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firebaseLocalStorageDb",a6=1,Nm="firebaseLocalStorage",HS="fbase_key";class ih{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mp(t,e){return t.transaction([Nm],e?"readwrite":"readonly").objectStore(Nm)}function o6(){const t=indexedDB.deleteDatabase(BS);return new ih(t).toPromise()}function Dy(){const t=indexedDB.open(BS,a6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nm,{keyPath:HS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nm)?e(r):(r.close(),await o6(),e(await Dy()))})})}async function H2(t,e,n){const r=mp(t,!0).put({[HS]:e,value:n});return new ih(r).toPromise()}async function l6(t,e){const n=mp(t,!1).get(e),r=await new ih(n).toPromise();return r===void 0?null:r.value}function W2(t,e){const n=mp(t,!0).delete(e);return new ih(n).toPromise()}const c6=800,u6=3;class WS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>u6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fp._getInstance(s6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await r6(),!this.activeServiceWorker)return;this.sender=new t6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dy();return await H2(e,Em,"1"),await W2(e,Em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>H2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>l6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=mp(i,!1).getAll();return new ih(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WS.type="LOCAL";const d6=WS;new th(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(t,e){return e?xa(e):(xt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends nv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Uc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Uc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function f6(t){return OS(t.auth,new sv(t),t.bypassAuthState)}function m6(t){const{auth:e,user:n}=t;return xt(n,e,"internal-error"),zR(n,new sv(t),t.bypassAuthState)}async function p6(t){const{auth:e,user:n}=t;return xt(n,e,"internal-error"),$R(n,new sv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f6;case"linkViaPopup":case"linkViaRedirect":return p6;case"reauthViaPopup":case"reauthViaRedirect":return m6;default:ms(this.auth,"internal-error")}}resolve(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=new th(2e3,1e4);class Pc extends qS{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Pc.currentPopupAction&&Pc.currentPopupAction.cancel(),Pc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xt(e,this.auth,"internal-error"),e}async onExecution(){Ea(this.filter.length===1,"Popup operations only handle one event");const e=iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g6.get())};e()}}Pc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="pendingRedirect",Yf=new Map;class x6 extends qS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yf.get(this.auth._key());if(!e){try{const r=await v6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v6(t,e){const n=_6(e),r=w6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function b6(t,e){Yf.set(t._key(),e)}function w6(t){return xa(t._redirectPersistence)}function _6(t){return Xf(y6,t.config.apiKey,t.name)}async function k6(t,e,n=!1){if(xi(t.app))return Promise.reject(va(t));const r=Rl(t),i=h6(r,e),c=await new x6(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=10*60*1e3;class N6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!GS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E6&&this.cachedEventUids.clear(),this.cachedEventUids.has(q2(e))}saveEventToCache(e){this.cachedEventUids.add(q2(e)),this.lastProcessedEventTime=Date.now()}}function q2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(t,e={}){return Da(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j6=/^https?/;async function A6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T6(t);for(const n of e)try{if(I6(n))return}catch{}ms(t,"unauthorized-domain")}function I6(t){const e=Iy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!j6.test(n))return!1;if(C6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new th(3e4,6e4);function G2(){const t=Us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function R6(t){return new Promise((e,n)=>{var r,i,o;function c(){G2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G2(),n(Fs(t,"network-request-failed"))},timeout:P6.get()})}if(!((i=(r=Us().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Us().gapi)===null||o===void 0)&&o.load)c();else{const u=kR("iframefcb");return Us()[u]=()=>{gapi.load?c():n(Fs(t,"network-request-failed"))},IS(`${_R()}?onload=${u}`).catch(d=>n(d))}}).catch(e=>{throw Qf=null,e})}let Qf=null;function D6(t){return Qf=Qf||R6(t),Qf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=new th(5e3,15e3),O6="__/auth/iframe",L6="emulator/auth/iframe",V6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U6(t){const e=t.config;xt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zx(e,L6):`https://${t.config.authDomain}/${O6}`,r={apiKey:e.apiKey,appName:t.name,v:Il},i=F6.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Zd(r).slice(1)}`}async function $6(t){const e=await D6(t),n=Us().gapi;return xt(n,t,"internal-error"),e.open({where:document.body,url:U6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V6,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Fs(t,"network-request-failed"),u=Us().setTimeout(()=>{o(c)},M6.get());function d(){Us().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B6=500,H6=600,W6="_blank",q6="http://localhost";class K2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G6(t,e,n,r=B6,i=H6){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},z6),{width:r.toString(),height:i.toString(),top:o,left:c}),f=Kr().toLowerCase();n&&(u=ES(f)?W6:n),_S(f)&&(e=e||q6,d.scrollbars="yes");const g=Object.entries(d).reduce((x,[w,N])=>`${x}${w}=${N},`,"");if(fR(f)&&u!=="_self")return K6(e||"",u),new K2(null);const y=window.open(e||"",u,g);xt(y,t,"popup-blocked");try{y.focus()}catch{}return new K2(y)}function K6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="__/auth/handler",Y6="emulator/auth/handler",Q6=encodeURIComponent("fac");async function X2(t,e,n,r,i,o){xt(t.config.authDomain,t,"auth-domain-config-required"),xt(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Il,eventId:i};if(e instanceof DS){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",M3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof rh){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await t._getAppCheckToken(),f=d?`#${Q6}=${encodeURIComponent(d)}`:"";return`${J6(t)}?${Zd(u).slice(1)}${f}`}function J6({config:t}){return t.emulator?Zx(t,Y6):`https://${t.authDomain}/${X6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="webStorageSupport";class Z6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$S,this._completeRedirectFn=k6,this._overrideRedirectResult=b6}async _openPopup(e,n,r,i){var o;Ea((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await X2(e,n,r,Iy(),i);return G6(e,c,iv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await X2(e,n,r,Iy(),i);return n6(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ea(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $6(e),r=new N6(e);return n.register("authEvent",i=>(xt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(L0,{type:L0},i=>{var o;const c=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[L0];c!==void 0&&n(!!c),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jS()||kS()||tv()}}const eD=Z6;var Y2="@firebase/auth",Q2="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rD(t){wo(new _a("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;xt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AS(t)},f=new vR(r,i,o,d);return jR(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wo(new _a("auth-internal",e=>{const n=Rl(e.getProvider("auth").getImmediate());return(r=>new tD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(Y2,Q2,nD(t)),Xi(Y2,Q2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=5*60,sD=oS("authIdTokenMaxAge")||iD;let J2=null;const aD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sD)return;const i=n==null?void 0:n.token;J2!==i&&(J2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function oD(t=dp()){const e=eh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CR(t,{popupRedirectResolver:eD,persistence:[d6,ZR,$S]}),r=oS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=aD(o.toString());KR(n,c,()=>c(n.currentUser)),GR(n,u=>c(u))}}const i=sS("auth");return i&&AR(n,`http://${i}`),n}function lD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Fs("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",lD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rD("Browser");var Z2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vo,KS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function P(){}P.prototype=M.prototype,D.D=M.prototype,D.prototype=new P,D.prototype.constructor=D,D.C=function(S,F,$){for(var I=Array(arguments.length-2),re=2;re<arguments.length;re++)I[re-2]=arguments[re];return M.prototype[F].apply(S,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,M,P){P||(P=0);var S=Array(16);if(typeof M=="string")for(var F=0;16>F;++F)S[F]=M.charCodeAt(P++)|M.charCodeAt(P++)<<8|M.charCodeAt(P++)<<16|M.charCodeAt(P++)<<24;else for(F=0;16>F;++F)S[F]=M[P++]|M[P++]<<8|M[P++]<<16|M[P++]<<24;M=D.g[0],P=D.g[1],F=D.g[2];var $=D.g[3],I=M+($^P&(F^$))+S[0]+3614090360&4294967295;M=P+(I<<7&4294967295|I>>>25),I=$+(F^M&(P^F))+S[1]+3905402710&4294967295,$=M+(I<<12&4294967295|I>>>20),I=F+(P^$&(M^P))+S[2]+606105819&4294967295,F=$+(I<<17&4294967295|I>>>15),I=P+(M^F&($^M))+S[3]+3250441966&4294967295,P=F+(I<<22&4294967295|I>>>10),I=M+($^P&(F^$))+S[4]+4118548399&4294967295,M=P+(I<<7&4294967295|I>>>25),I=$+(F^M&(P^F))+S[5]+1200080426&4294967295,$=M+(I<<12&4294967295|I>>>20),I=F+(P^$&(M^P))+S[6]+2821735955&4294967295,F=$+(I<<17&4294967295|I>>>15),I=P+(M^F&($^M))+S[7]+4249261313&4294967295,P=F+(I<<22&4294967295|I>>>10),I=M+($^P&(F^$))+S[8]+1770035416&4294967295,M=P+(I<<7&4294967295|I>>>25),I=$+(F^M&(P^F))+S[9]+2336552879&4294967295,$=M+(I<<12&4294967295|I>>>20),I=F+(P^$&(M^P))+S[10]+4294925233&4294967295,F=$+(I<<17&4294967295|I>>>15),I=P+(M^F&($^M))+S[11]+2304563134&4294967295,P=F+(I<<22&4294967295|I>>>10),I=M+($^P&(F^$))+S[12]+1804603682&4294967295,M=P+(I<<7&4294967295|I>>>25),I=$+(F^M&(P^F))+S[13]+4254626195&4294967295,$=M+(I<<12&4294967295|I>>>20),I=F+(P^$&(M^P))+S[14]+2792965006&4294967295,F=$+(I<<17&4294967295|I>>>15),I=P+(M^F&($^M))+S[15]+1236535329&4294967295,P=F+(I<<22&4294967295|I>>>10),I=M+(F^$&(P^F))+S[1]+4129170786&4294967295,M=P+(I<<5&4294967295|I>>>27),I=$+(P^F&(M^P))+S[6]+3225465664&4294967295,$=M+(I<<9&4294967295|I>>>23),I=F+(M^P&($^M))+S[11]+643717713&4294967295,F=$+(I<<14&4294967295|I>>>18),I=P+($^M&(F^$))+S[0]+3921069994&4294967295,P=F+(I<<20&4294967295|I>>>12),I=M+(F^$&(P^F))+S[5]+3593408605&4294967295,M=P+(I<<5&4294967295|I>>>27),I=$+(P^F&(M^P))+S[10]+38016083&4294967295,$=M+(I<<9&4294967295|I>>>23),I=F+(M^P&($^M))+S[15]+3634488961&4294967295,F=$+(I<<14&4294967295|I>>>18),I=P+($^M&(F^$))+S[4]+3889429448&4294967295,P=F+(I<<20&4294967295|I>>>12),I=M+(F^$&(P^F))+S[9]+568446438&4294967295,M=P+(I<<5&4294967295|I>>>27),I=$+(P^F&(M^P))+S[14]+3275163606&4294967295,$=M+(I<<9&4294967295|I>>>23),I=F+(M^P&($^M))+S[3]+4107603335&4294967295,F=$+(I<<14&4294967295|I>>>18),I=P+($^M&(F^$))+S[8]+1163531501&4294967295,P=F+(I<<20&4294967295|I>>>12),I=M+(F^$&(P^F))+S[13]+2850285829&4294967295,M=P+(I<<5&4294967295|I>>>27),I=$+(P^F&(M^P))+S[2]+4243563512&4294967295,$=M+(I<<9&4294967295|I>>>23),I=F+(M^P&($^M))+S[7]+1735328473&4294967295,F=$+(I<<14&4294967295|I>>>18),I=P+($^M&(F^$))+S[12]+2368359562&4294967295,P=F+(I<<20&4294967295|I>>>12),I=M+(P^F^$)+S[5]+4294588738&4294967295,M=P+(I<<4&4294967295|I>>>28),I=$+(M^P^F)+S[8]+2272392833&4294967295,$=M+(I<<11&4294967295|I>>>21),I=F+($^M^P)+S[11]+1839030562&4294967295,F=$+(I<<16&4294967295|I>>>16),I=P+(F^$^M)+S[14]+4259657740&4294967295,P=F+(I<<23&4294967295|I>>>9),I=M+(P^F^$)+S[1]+2763975236&4294967295,M=P+(I<<4&4294967295|I>>>28),I=$+(M^P^F)+S[4]+1272893353&4294967295,$=M+(I<<11&4294967295|I>>>21),I=F+($^M^P)+S[7]+4139469664&4294967295,F=$+(I<<16&4294967295|I>>>16),I=P+(F^$^M)+S[10]+3200236656&4294967295,P=F+(I<<23&4294967295|I>>>9),I=M+(P^F^$)+S[13]+681279174&4294967295,M=P+(I<<4&4294967295|I>>>28),I=$+(M^P^F)+S[0]+3936430074&4294967295,$=M+(I<<11&4294967295|I>>>21),I=F+($^M^P)+S[3]+3572445317&4294967295,F=$+(I<<16&4294967295|I>>>16),I=P+(F^$^M)+S[6]+76029189&4294967295,P=F+(I<<23&4294967295|I>>>9),I=M+(P^F^$)+S[9]+3654602809&4294967295,M=P+(I<<4&4294967295|I>>>28),I=$+(M^P^F)+S[12]+3873151461&4294967295,$=M+(I<<11&4294967295|I>>>21),I=F+($^M^P)+S[15]+530742520&4294967295,F=$+(I<<16&4294967295|I>>>16),I=P+(F^$^M)+S[2]+3299628645&4294967295,P=F+(I<<23&4294967295|I>>>9),I=M+(F^(P|~$))+S[0]+4096336452&4294967295,M=P+(I<<6&4294967295|I>>>26),I=$+(P^(M|~F))+S[7]+1126891415&4294967295,$=M+(I<<10&4294967295|I>>>22),I=F+(M^($|~P))+S[14]+2878612391&4294967295,F=$+(I<<15&4294967295|I>>>17),I=P+($^(F|~M))+S[5]+4237533241&4294967295,P=F+(I<<21&4294967295|I>>>11),I=M+(F^(P|~$))+S[12]+1700485571&4294967295,M=P+(I<<6&4294967295|I>>>26),I=$+(P^(M|~F))+S[3]+2399980690&4294967295,$=M+(I<<10&4294967295|I>>>22),I=F+(M^($|~P))+S[10]+4293915773&4294967295,F=$+(I<<15&4294967295|I>>>17),I=P+($^(F|~M))+S[1]+2240044497&4294967295,P=F+(I<<21&4294967295|I>>>11),I=M+(F^(P|~$))+S[8]+1873313359&4294967295,M=P+(I<<6&4294967295|I>>>26),I=$+(P^(M|~F))+S[15]+4264355552&4294967295,$=M+(I<<10&4294967295|I>>>22),I=F+(M^($|~P))+S[6]+2734768916&4294967295,F=$+(I<<15&4294967295|I>>>17),I=P+($^(F|~M))+S[13]+1309151649&4294967295,P=F+(I<<21&4294967295|I>>>11),I=M+(F^(P|~$))+S[4]+4149444226&4294967295,M=P+(I<<6&4294967295|I>>>26),I=$+(P^(M|~F))+S[11]+3174756917&4294967295,$=M+(I<<10&4294967295|I>>>22),I=F+(M^($|~P))+S[2]+718787259&4294967295,F=$+(I<<15&4294967295|I>>>17),I=P+($^(F|~M))+S[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(F+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+F&4294967295,D.g[3]=D.g[3]+$&4294967295}r.prototype.u=function(D,M){M===void 0&&(M=D.length);for(var P=M-this.blockSize,S=this.B,F=this.h,$=0;$<M;){if(F==0)for(;$<=P;)i(this,D,$),$+=this.blockSize;if(typeof D=="string"){for(;$<M;)if(S[F++]=D.charCodeAt($++),F==this.blockSize){i(this,S),F=0;break}}else for(;$<M;)if(S[F++]=D[$++],F==this.blockSize){i(this,S),F=0;break}}this.h=F,this.o+=M},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;var P=8*this.o;for(M=D.length-8;M<D.length;++M)D[M]=P&255,P/=256;for(this.u(D),D=Array(16),M=P=0;4>M;++M)for(var S=0;32>S;S+=8)D[P++]=this.g[M]>>>S&255;return D};function o(D,M){var P=u;return Object.prototype.hasOwnProperty.call(P,D)?P[D]:P[D]=M(D)}function c(D,M){this.h=M;for(var P=[],S=!0,F=D.length-1;0<=F;F--){var $=D[F]|0;S&&$==M||(P[F]=$,S=!1)}this.g=P}var u={};function d(D){return-128<=D&&128>D?o(D,function(M){return new c([M|0],0>M?-1:0)}):new c([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return T(f(-D));for(var M=[],P=1,S=0;D>=P;S++)M[S]=D/P|0,P*=4294967296;return new c(M,0)}function g(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return T(g(D.substring(1),M));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(M,8)),S=y,F=0;F<D.length;F+=8){var $=Math.min(8,D.length-F),I=parseInt(D.substring(F,F+$),M);8>$?($=f(Math.pow(M,$)),S=S.j($).add(f(I))):(S=S.j(P),S=S.add(f(I)))}return S}var y=d(0),x=d(1),w=d(16777216);t=c.prototype,t.m=function(){if(b(this))return-T(this).m();for(var D=0,M=1,P=0;P<this.g.length;P++){var S=this.i(P);D+=(0<=S?S:4294967296+S)*M,M*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(N(this))return"0";if(b(this))return"-"+T(this).toString(D);for(var M=f(Math.pow(D,6)),P=this,S="";;){var F=L(P,M).g;P=j(P,F.j(M));var $=((0<P.g.length?P.g[0]:P.h)>>>0).toString(D);if(P=F,N(P))return $+S;for(;6>$.length;)$="0"+$;S=$+S}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function N(D){if(D.h!=0)return!1;for(var M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function b(D){return D.h==-1}t.l=function(D){return D=j(this,D),b(D)?-1:N(D)?0:1};function T(D){for(var M=D.g.length,P=[],S=0;S<M;S++)P[S]=~D.g[S];return new c(P,~D.h).add(x)}t.abs=function(){return b(this)?T(this):this},t.add=function(D){for(var M=Math.max(this.g.length,D.g.length),P=[],S=0,F=0;F<=M;F++){var $=S+(this.i(F)&65535)+(D.i(F)&65535),I=($>>>16)+(this.i(F)>>>16)+(D.i(F)>>>16);S=I>>>16,$&=65535,I&=65535,P[F]=I<<16|$}return new c(P,P[P.length-1]&-2147483648?-1:0)};function j(D,M){return D.add(T(M))}t.j=function(D){if(N(this)||N(D))return y;if(b(this))return b(D)?T(this).j(T(D)):T(T(this).j(D));if(b(D))return T(this.j(T(D)));if(0>this.l(w)&&0>D.l(w))return f(this.m()*D.m());for(var M=this.g.length+D.g.length,P=[],S=0;S<2*M;S++)P[S]=0;for(S=0;S<this.g.length;S++)for(var F=0;F<D.g.length;F++){var $=this.i(S)>>>16,I=this.i(S)&65535,re=D.i(F)>>>16,ne=D.i(F)&65535;P[2*S+2*F]+=I*ne,R(P,2*S+2*F),P[2*S+2*F+1]+=$*ne,R(P,2*S+2*F+1),P[2*S+2*F+1]+=I*re,R(P,2*S+2*F+1),P[2*S+2*F+2]+=$*re,R(P,2*S+2*F+2)}for(S=0;S<M;S++)P[S]=P[2*S+1]<<16|P[2*S];for(S=M;S<2*M;S++)P[S]=0;return new c(P,0)};function R(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function A(D,M){this.g=D,this.h=M}function L(D,M){if(N(M))throw Error("division by zero");if(N(D))return new A(y,y);if(b(D))return M=L(T(D),M),new A(T(M.g),T(M.h));if(b(M))return M=L(D,T(M)),new A(T(M.g),M.h);if(30<D.g.length){if(b(D)||b(M))throw Error("slowDivide_ only works with positive integers.");for(var P=x,S=M;0>=S.l(D);)P=z(P),S=z(S);var F=q(P,1),$=q(S,1);for(S=q(S,2),P=q(P,2);!N(S);){var I=$.add(S);0>=I.l(D)&&(F=F.add(P),$=I),S=q(S,1),P=q(P,1)}return M=j(D,F.j(M)),new A(F,M)}for(F=y;0<=D.l(M);){for(P=Math.max(1,Math.floor(D.m()/M.m())),S=Math.ceil(Math.log(P)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),$=f(P),I=$.j(M);b(I)||0<I.l(D);)P-=S,$=f(P),I=$.j(M);N($)&&($=x),F=F.add($),D=j(D,I)}return new A(F,D)}t.A=function(D){return L(this,D).h},t.and=function(D){for(var M=Math.max(this.g.length,D.g.length),P=[],S=0;S<M;S++)P[S]=this.i(S)&D.i(S);return new c(P,this.h&D.h)},t.or=function(D){for(var M=Math.max(this.g.length,D.g.length),P=[],S=0;S<M;S++)P[S]=this.i(S)|D.i(S);return new c(P,this.h|D.h)},t.xor=function(D){for(var M=Math.max(this.g.length,D.g.length),P=[],S=0;S<M;S++)P[S]=this.i(S)^D.i(S);return new c(P,this.h^D.h)};function z(D){for(var M=D.g.length+1,P=[],S=0;S<M;S++)P[S]=D.i(S)<<1|D.i(S-1)>>>31;return new c(P,D.h)}function q(D,M){var P=M>>5;M%=32;for(var S=D.g.length-P,F=[],$=0;$<S;$++)F[$]=0<M?D.i($+P)>>>M|D.i($+P+1)<<32-M:D.i($+P);return new c(F,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,vo=c}).apply(typeof Z2<"u"?Z2:typeof self<"u"?self:typeof window<"u"?window:{});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XS,td,YS,Jf,My,QS,JS,ZS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,C){return m==Array.prototype||m==Object.prototype||(m[_]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nf=="object"&&Nf];for(var _=0;_<m.length;++_){var C=m[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(m,_){if(_)e:{var C=r;m=m.split(".");for(var U=0;U<m.length-1;U++){var ie=m[U];if(!(ie in C))break e;C=C[ie]}m=m[m.length-1],U=C[m],_=_(U),_!=U&&_!=null&&e(C,m,{configurable:!0,writable:!0,value:_})}}function o(m,_){m instanceof String&&(m+="");var C=0,U=!1,ie={next:function(){if(!U&&C<m.length){var pe=C++;return{value:_(pe,m[pe]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}i("Array.prototype.values",function(m){return m||function(){return o(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function d(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function f(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function g(m,_,C){return m.call.apply(m.bind,arguments)}function y(m,_,C){if(!m)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,U),m.apply(_,ie)}}return function(){return m.apply(_,arguments)}}function x(m,_,C){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,x.apply(null,arguments)}function w(m,_){var C=Array.prototype.slice.call(arguments,1);return function(){var U=C.slice();return U.push.apply(U,arguments),m.apply(this,U)}}function N(m,_){function C(){}C.prototype=_.prototype,m.aa=_.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(U,ie,pe){for(var $e=Array(arguments.length-2),tn=2;tn<arguments.length;tn++)$e[tn-2]=arguments[tn];return _.prototype[ie].apply(U,$e)}}function b(m){const _=m.length;if(0<_){const C=Array(_);for(let U=0;U<_;U++)C[U]=m[U];return C}return[]}function T(m,_){for(let C=1;C<arguments.length;C++){const U=arguments[C];if(d(U)){const ie=m.length||0,pe=U.length||0;m.length=ie+pe;for(let $e=0;$e<pe;$e++)m[ie+$e]=U[$e]}else m.push(U)}}class j{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function R(m){return/^[\s\xa0]*$/.test(m)}function A(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function L(m){return L[" "](m),m}L[" "]=function(){};var z=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function q(m,_,C){for(const U in m)_.call(C,m[U],U,m)}function D(m,_){for(const C in m)_.call(void 0,m[C],C,m)}function M(m){const _={};for(const C in m)_[C]=m[C];return _}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(m,_){let C,U;for(let ie=1;ie<arguments.length;ie++){U=arguments[ie];for(C in U)m[C]=U[C];for(let pe=0;pe<P.length;pe++)C=P[pe],Object.prototype.hasOwnProperty.call(U,C)&&(m[C]=U[C])}}function F(m){var _=1;m=m.split(":");const C=[];for(;0<_&&m.length;)C.push(m.shift()),_--;return m.length&&C.push(m.join(":")),C}function $(m){u.setTimeout(()=>{throw m},0)}function I(){var m=ae;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class re{constructor(){this.h=this.g=null}add(_,C){const U=ne.get();U.set(_,C),this.h?this.h.next=U:this.g=U,this.h=U}}var ne=new j(()=>new we,m=>m.reset());class we{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ee=!1,ae=new re,ge=()=>{const m=u.Promise.resolve(void 0);Ee=()=>{m.then(H)}};var H=()=>{for(var m;m=I();){try{m.h.call(m.g)}catch(C){$(C)}var _=ne;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}ee=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};u.addEventListener("test",C,_),u.removeEventListener("test",C,_)}catch{}return m}();function Ge(m,_){if(_e.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,U=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if(z){e:{try{L(_.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(_=null)}}else C=="mouseover"?_=m.fromElement:C=="mouseout"&&(_=m.toElement);this.relatedTarget=_,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:tt[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ge.aa.h.call(this)}}N(Ge,_e);var tt={2:"touch",3:"pen",4:"mouse"};Ge.prototype.h=function(){Ge.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var lt="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(m,_,C,U,ie){this.listener=m,this.proxy=null,this.src=_,this.type=C,this.capture=!!U,this.ha=ie,this.key=++Je,this.da=this.fa=!1}function Nt(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function bt(m){this.src=m,this.g={},this.h=0}bt.prototype.add=function(m,_,C,U,ie){var pe=m.toString();m=this.g[pe],m||(m=this.g[pe]=[],this.h++);var $e=yt(m,_,U,ie);return-1<$e?(_=m[$e],C||(_.fa=!1)):(_=new Ze(_,this.src,pe,!!U,ie),_.fa=C,m.push(_)),_};function pt(m,_){var C=_.type;if(C in m.g){var U=m.g[C],ie=Array.prototype.indexOf.call(U,_,void 0),pe;(pe=0<=ie)&&Array.prototype.splice.call(U,ie,1),pe&&(Nt(_),m.g[C].length==0&&(delete m.g[C],m.h--))}}function yt(m,_,C,U){for(var ie=0;ie<m.length;++ie){var pe=m[ie];if(!pe.da&&pe.listener==_&&pe.capture==!!C&&pe.ha==U)return ie}return-1}var Dt="closure_lm_"+(1e6*Math.random()|0),It={};function Sn(m,_,C,U,ie){if(Array.isArray(_)){for(var pe=0;pe<_.length;pe++)Sn(m,_[pe],C,U,ie);return null}return C=X(C),m&&m[lt]?m.K(_,C,f(U)?!!U.capture:!1,ie):Z(m,_,C,!1,U,ie)}function Z(m,_,C,U,ie,pe){if(!_)throw Error("Invalid event type");var $e=f(ie)?!!ie.capture:!!ie,tn=dt(m);if(tn||(m[Dt]=tn=new bt(m)),C=tn.add(_,C,U,$e,pe),C.proxy)return C;if(U=je(),C.proxy=U,U.src=m,U.listener=C,m.addEventListener)Ue||(ie=$e),ie===void 0&&(ie=!1),m.addEventListener(_.toString(),U,ie);else if(m.attachEvent)m.attachEvent(St(_.toString()),U);else if(m.addListener&&m.removeListener)m.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return C}function je(){function m(C){return _.call(m.src,m.listener,C)}const _=He;return m}function Oe(m,_,C,U,ie){if(Array.isArray(_))for(var pe=0;pe<_.length;pe++)Oe(m,_[pe],C,U,ie);else U=f(U)?!!U.capture:!!U,C=X(C),m&&m[lt]?(m=m.i,_=String(_).toString(),_ in m.g&&(pe=m.g[_],C=yt(pe,C,U,ie),-1<C&&(Nt(pe[C]),Array.prototype.splice.call(pe,C,1),pe.length==0&&(delete m.g[_],m.h--)))):m&&(m=dt(m))&&(_=m.g[_.toString()],m=-1,_&&(m=yt(_,C,U,ie)),(C=-1<m?_[m]:null)&&rt(C))}function rt(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[lt])pt(_.i,m);else{var C=m.type,U=m.proxy;_.removeEventListener?_.removeEventListener(C,U,m.capture):_.detachEvent?_.detachEvent(St(C),U):_.addListener&&_.removeListener&&_.removeListener(U),(C=dt(_))?(pt(C,m),C.h==0&&(C.src=null,_[Dt]=null)):Nt(m)}}}function St(m){return m in It?It[m]:It[m]="on"+m}function He(m,_){if(m.da)m=!0;else{_=new Ge(_,this);var C=m.listener,U=m.ha||m.src;m.fa&&rt(m),m=C.call(U,_)}return m}function dt(m){return m=m[Dt],m instanceof bt?m:null}var G="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(m){return typeof m=="function"?m:(m[G]||(m[G]=function(_){return m.handleEvent(_)}),m[G])}function me(){J.call(this),this.i=new bt(this),this.M=this,this.F=null}N(me,J),me.prototype[lt]=!0,me.prototype.removeEventListener=function(m,_,C,U){Oe(this,m,_,C,U)};function Te(m,_){var C,U=m.F;if(U)for(C=[];U;U=U.F)C.push(U);if(m=m.M,U=_.type||_,typeof _=="string")_=new _e(_,m);else if(_ instanceof _e)_.target=_.target||m;else{var ie=_;_=new _e(U,m),S(_,ie)}if(ie=!0,C)for(var pe=C.length-1;0<=pe;pe--){var $e=_.g=C[pe];ie=te($e,U,!0,_)&&ie}if($e=_.g=m,ie=te($e,U,!0,_)&&ie,ie=te($e,U,!1,_)&&ie,C)for(pe=0;pe<C.length;pe++)$e=_.g=C[pe],ie=te($e,U,!1,_)&&ie}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var C=m.g[_],U=0;U<C.length;U++)Nt(C[U]);delete m.g[_],m.h--}}this.F=null},me.prototype.K=function(m,_,C,U){return this.i.add(String(m),_,!1,C,U)},me.prototype.L=function(m,_,C,U){return this.i.add(String(m),_,!0,C,U)};function te(m,_,C,U){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var ie=!0,pe=0;pe<_.length;++pe){var $e=_[pe];if($e&&!$e.da&&$e.capture==C){var tn=$e.listener,lr=$e.ha||$e.src;$e.fa&&pt(m.i,$e),ie=tn.call(lr,U)!==!1&&ie}}return ie&&!U.defaultPrevented}function be(m,_,C){if(typeof m=="function")C&&(m=x(m,C));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(m,_||0)}function Se(m){m.g=be(()=>{m.g=null,m.i&&(m.i=!1,Se(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class gt extends J{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Se(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jt(m){J.call(this),this.h=m,this.g={}}N(jt,J);var ct=[];function Vt(m){q(m.g,function(_,C){this.g.hasOwnProperty(C)&&rt(_)},m),m.g={}}jt.prototype.N=function(){jt.aa.N.call(this),Vt(this)},jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=u.JSON.stringify,vr=u.JSON.parse,Wn=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function or(){}or.prototype.h=null;function On(m){return m.h||(m.h=m.i())}function Dr(){}var qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ot(){_e.call(this,"d")}N(Ot,_e);function Jt(){_e.call(this,"c")}N(Jt,_e);var Jn={},Mr=null;function V(){return Mr=Mr||new me}Jn.La="serverreachability";function W(m){_e.call(this,Jn.La,m)}N(W,_e);function ue(m){const _=V();Te(_,new W(_))}Jn.STAT_EVENT="statevent";function fe(m,_){_e.call(this,Jn.STAT_EVENT,m),this.stat=_}N(fe,_e);function ce(m){const _=V();Te(_,new fe(_,m))}Jn.Ma="timingevent";function Me(m,_){_e.call(this,Jn.Ma,m),this.size=_}N(Me,_e);function Ce(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},_)}function Ne(){this.g=!0}Ne.prototype.xa=function(){this.g=!1};function oe(m,_,C,U,ie,pe){m.info(function(){if(m.g)if(pe)for(var $e="",tn=pe.split("&"),lr=0;lr<tn.length;lr++){var zt=tn[lr].split("=");if(1<zt.length){var fr=zt[0];zt=zt[1];var Zn=fr.split("_");$e=2<=Zn.length&&Zn[1]=="type"?$e+(fr+"="+zt+"&"):$e+(fr+"=redacted&")}}else $e=null;else $e=pe;return"XMLHTTP REQ ("+U+") [attempt "+ie+"]: "+_+`
`+C+`
`+$e})}function Fe(m,_,C,U,ie,pe,$e){m.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ie+"]: "+_+`
`+C+`
`+pe+" "+$e})}function Ie(m,_,C,U){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+Xe(m,C)+(U?" "+U:"")})}function Ke(m,_){m.info(function(){return"TIMEOUT: "+_})}Ne.prototype.info=function(){};function Xe(m,_){if(!m.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var U=C[m];if(!(2>U.length)){var ie=U[1];if(Array.isArray(ie)&&!(1>ie.length)){var pe=ie[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(var $e=1;$e<ie.length;$e++)ie[$e]=""}}}}return bn(C)}catch{return _}}var Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ln={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sn;function wn(){}N(wn,or),wn.prototype.g=function(){return new XMLHttpRequest},wn.prototype.i=function(){return{}},sn=new wn;function Ht(m,_,C,U){this.j=m,this.i=_,this.l=C,this.R=U||1,this.U=new jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zt}function Zt(){this.i=null,this.g="",this.h=!1}var Xr={},br={};function wr(m,_,C){m.L=1,m.v=ws(Zr(_)),m.m=C,m.P=!0,_r(m,null)}function _r(m,_){m.F=Date.now(),Wt(m),m.A=Zr(m.v);var C=m.A,U=m.R;Array.isArray(U)||(U=[String(U)]),an(C.i,"t",U),m.C=0,C=m.j.J,m.h=new Zt,m.g=Th(m.j,C?_:null,!m.m),0<m.O&&(m.M=new gt(x(m.Y,m,m.g),m.O)),_=m.U,C=m.g,U=m.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(ct[0]=ie.toString()),ie=ct);for(var pe=0;pe<ie.length;pe++){var $e=Sn(C,ie[pe],U||_.handleEvent,!1,_.h||_);if(!$e)break;_.g[$e.key]=$e}_=m.H?M(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),ue(),oe(m.i,m.u,m.A,m.l,m.R,m.m)}Ht.prototype.ca=function(m){m=m.target;const _=this.M;_&&li(m)==3?_.j():this.Y(m)},Ht.prototype.Y=function(m){try{if(m==this.g)e:{const Zn=li(this.g);var _=this.g.Ba();const Li=this.g.Z();if(!(3>Zn)&&(Zn!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||Zn!=4||_==7||(_==8||0>=Li?ue(3):ue(2)),es(this);var C=this.g.Z();this.X=C;t:if(_t(this)){var U=bu(this.g);m="";var ie=U.length,pe=li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),kr(this);var $e="";break t}this.h.i=new u.TextDecoder}for(_=0;_<ie;_++)this.h.h=!0,m+=this.h.i.decode(U[_],{stream:!(pe&&_==ie-1)});U.length=0,this.h.g+=m,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=C==200,Fe(this.i,this.u,this.A,this.l,this.R,Zn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var tn,lr=this.g;if((tn=lr.g?lr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(tn)){var zt=tn;break t}}zt=null}if(C=zt)Ie(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oa(this,C);else{this.o=!1,this.s=3,ce(12),Qr(this),kr(this);break e}}if(this.P){C=!0;let Ni;for(;!this.J&&this.C<$e.length;)if(Ni=Fo(this,$e),Ni==br){Zn==4&&(this.s=4,ce(14),C=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}else if(Ni==Xr){this.s=4,ce(15),Ie(this.i,this.l,$e,"[Invalid Chunk]"),C=!1;break}else Ie(this.i,this.l,Ni,null),Oa(this,Ni);if(_t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zn!=4||$e.length!=0||this.h.h||(this.s=1,ce(16),C=!1),this.o=this.o&&C,!C)Ie(this.i,this.l,$e,"[Invalid Chunked Response]"),Qr(this),kr(this);else if(0<$e.length&&!this.W){this.W=!0;var fr=this.j;fr.g==this&&fr.ba&&!fr.M&&(fr.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),_u(fr),fr.M=!0,ce(11))}}else Ie(this.i,this.l,$e,null),Oa(this,$e);Zn==4&&Qr(this),this.o&&!this.J&&(Zn==4?Xl(this.j,this):(this.o=!1,Wt(this)))}else Hl(this.g),C==400&&0<$e.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Qr(this),kr(this)}}}catch{}finally{}};function _t(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Fo(m,_){var C=m.C,U=_.indexOf(`
`,C);return U==-1?br:(C=Number(_.substring(C,U)),isNaN(C)?Xr:(U+=1,U+C>_.length?br:(_=_.slice(U,U+C),m.C=U+C,_)))}Ht.prototype.cancel=function(){this.J=!0,Qr(this)};function Wt(m){m.S=Date.now()+m.I,Yr(m,m.I)}function Yr(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ce(x(m.ba,m),_)}function es(m){m.B&&(u.clearTimeout(m.B),m.B=null)}Ht.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Ke(this.i,this.A),this.L!=2&&(ue(),ce(17)),Qr(this),this.s=2,kr(this)):Yr(this,this.S-m)};function kr(m){m.j.G==0||m.J||Xl(m.j,m)}function Qr(m){es(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,Vt(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function Oa(m,_){try{var C=m.j;if(C.G!=0&&(C.g==m||Er(C.h,m))){if(!m.K&&Er(C.h,m)&&C.G==3){try{var U=C.Da.g.parse(_)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ie=U;if(ie[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Kl(C),is(C);else break e;Gl(C),ce(18)}}else C.za=ie[1],0<C.za-C.T&&37500>ie[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ce(x(C.Za,C),6e3));if(1>=La(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else sa(C,11)}else if((m.K||C.g==m)&&Kl(C),!R(_))for(ie=C.Da.g.parse(_),_=0;_<ie.length;_++){let zt=ie[_];if(C.T=zt[0],zt=zt[1],C.G==2)if(zt[0]=="c"){C.K=zt[1],C.ia=zt[2];const fr=zt[3];fr!=null&&(C.la=fr,C.j.info("VER="+C.la));const Zn=zt[4];Zn!=null&&(C.Aa=Zn,C.j.info("SVER="+C.Aa));const Li=zt[5];Li!=null&&typeof Li=="number"&&0<Li&&(U=1.5*Li,C.L=U,C.j.info("backChannelRequestTimeoutMs_="+U)),U=C;const Ni=m.g;if(Ni){const Bo=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var pe=U.h;pe.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(pe.j=pe.l,pe.g=new Set,pe.h&&(Va(pe,pe.h),pe.h=null))}if(U.D){const Ql=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Ql&&(U.ya=Ql,en(U.I,U.D,Ql))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),U=C;var $e=m;if(U.qa=Sh(U,U.J?U.ia:null,U.W),$e.K){Js(U.h,$e);var tn=$e,lr=U.L;lr&&(tn.I=lr),tn.B&&(es(tn),Wt(tn)),U.g=$e}else zo(U);0<C.i.length&&Ns(C)}else zt[0]!="stop"&&zt[0]!="close"||sa(C,7);else C.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?sa(C,7):Nr(C):zt[0]!="noop"&&C.l&&C.l.ta(zt),C.v=0)}}ue(4)}catch{}}var Vl=class{constructor(m,_){this.g=m,this.map=_}};function Qs(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jr(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function La(m){return m.h?1:m.g?m.g.size:0}function Er(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function Va(m,_){m.g?m.g.add(_):m.h=_}function Js(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}Qs.prototype.cancel=function(){if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Fl(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const C of m.g.values())_=_.concat(C.D);return _}return b(m.i)}function Fa(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var _=[],C=m.length,U=0;U<C;U++)_.push(m[U]);return _}_=[],C=0;for(U in m)_[C++]=m[U];return _}function Ua(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var _=[];m=m.length;for(var C=0;C<m;C++)_.push(C);return _}_=[],C=0;for(const U in m)_[C++]=U;return _}}}function xs(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var C=Ua(m),U=Fa(m),ie=U.length,pe=0;pe<ie;pe++)_.call(void 0,U[pe],C&&C[pe],m)}var Zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yu(m,_){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var U=m[C].indexOf("="),ie=null;if(0<=U){var pe=m[C].substring(0,U);ie=m[C].substring(U+1)}else pe=m[C];_(pe,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Or(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Or){this.h=m.h,ea(this,m.j),this.o=m.o,this.g=m.g,vs(this,m.s),this.l=m.l;var _=m.i,C=new Re;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),bs(this,C),this.m=m.m}else m&&(_=String(m).match(Zs))?(this.h=!1,ea(this,_[1]||"",!0),this.o=Lt(_[2]||""),this.g=Lt(_[3]||"",!0),vs(this,_[4]),this.l=Lt(_[5]||"",!0),bs(this,_[6]||"",!0),this.m=Lt(_[7]||"")):(this.h=!1,this.i=new Re(null,this.h))}Or.prototype.toString=function(){var m=[],_=this.j;_&&m.push(_s(_,ta,!0),":");var C=this.g;return(C||_=="file")&&(m.push("//"),(_=this.o)&&m.push(_s(_,ta,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(_s(C,C.charAt(0)=="/"?Y:$l,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",_s(C,ze)),m.join("")};function Zr(m){return new Or(m)}function ea(m,_,C){m.j=C?Lt(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function vs(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function bs(m,_,C){_ instanceof Re?(m.i=_,Tn(m.i,m.h)):(C||(_=_s(_,xe)),m.i=new Re(_,m.h))}function en(m,_,C){m.i.set(_,C)}function ws(m){return en(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Lt(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function _s(m,_,C){return typeof m=="string"?(m=encodeURI(m).replace(_,Ul),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ul(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ta=/[#\/\?@]/g,$l=/[#\?:]/g,Y=/[#\?]/g,xe=/[#\?@]/g,ze=/#/g;function Re(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function We(m){m.g||(m.g=new Map,m.h=0,m.i&&yu(m.i,function(_,C){m.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=Re.prototype,t.add=function(m,_){We(this),this.i=null,m=Yt(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(_),this.h+=1,this};function it(m,_){We(m),_=Yt(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function ot(m,_){return We(m),_=Yt(m,_),m.g.has(_)}t.forEach=function(m,_){We(this),this.g.forEach(function(C,U){C.forEach(function(ie){m.call(_,ie,U,this)},this)},this)},t.na=function(){We(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let U=0;U<_.length;U++){const ie=m[U];for(let pe=0;pe<ie.length;pe++)C.push(_[U])}return C},t.V=function(m){We(this);let _=[];if(typeof m=="string")ot(this,m)&&(_=_.concat(this.g.get(Yt(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)_=_.concat(m[C])}return _},t.set=function(m,_){return We(this),this.i=null,m=Yt(this,m),ot(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},t.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function an(m,_,C){it(m,_),0<C.length&&(m.i=null,m.g.set(Yt(m,_),b(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var U=_[C];const pe=encodeURIComponent(String(U)),$e=this.V(U);for(U=0;U<$e.length;U++){var ie=pe;$e[U]!==""&&(ie+="="+encodeURIComponent(String($e[U]))),m.push(ie)}}return this.i=m.join("&")};function Yt(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function Tn(m,_){_&&!m.j&&(We(m),m.i=null,m.g.forEach(function(C,U){var ie=U.toLowerCase();U!=ie&&(it(this,U),an(this,ie,C))},m)),m.j=_}function ts(m,_){const C=new Ne;if(u.Image){const U=new Image;U.onload=w(Cn,C,"TestLoadImage: loaded",!0,_,U),U.onerror=w(Cn,C,"TestLoadImage: error",!1,_,U),U.onabort=w(Cn,C,"TestLoadImage: abort",!1,_,U),U.ontimeout=w(Cn,C,"TestLoadImage: timeout",!1,_,U),u.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=m}else _(!1)}function Oi(m,_){const C=new Ne,U=new AbortController,ie=setTimeout(()=>{U.abort(),Cn(C,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:U.signal}).then(pe=>{clearTimeout(ie),pe.ok?Cn(C,"TestPingServer: ok",!0,_):Cn(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ie),Cn(C,"TestPingServer: error",!1,_)})}function Cn(m,_,C,U,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),U(C)}catch{}}function ks(){this.g=new Wn}function hn(m,_,C){const U=C||"";try{xs(m,function(ie,pe){let $e=ie;f(ie)&&($e=bn(ie)),_.push(U+pe+"="+encodeURIComponent($e))})}catch(ie){throw _.push(U+"type="+encodeURIComponent("_badmap")),ie}}function na(m){this.l=m.Ub||null,this.j=m.eb||!1}N(na,or),na.prototype.g=function(){return new Uo(this.l,this.j)},na.prototype.i=function(m){return function(){return m}}({});function Uo(m,_){me.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Uo,me),t=Uo.prototype,t.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,rs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_h(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function _h(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?ns(this):rs(this),this.readyState==3&&_h(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,ns(this))},t.Qa=function(m){this.g&&(this.response=m,ns(this))},t.ga=function(){this.g&&ns(this)};function ns(m){m.readyState=4,m.l=null,m.j=null,m.v=null,rs(m)}t.setRequestHeader=function(m,_){this.u.append(m,_)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=_.next();return m.join(`\r
`)};function rs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ra(m){let _="";return q(m,function(C,U){_+=U,_+=":",_+=C,_+=`\r
`}),_}function $a(m,_,C){e:{for(U in C){var U=!1;break e}U=!0}U||(C=ra(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):en(m,_,C))}function _n(m){me.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(_n,me);var ig=/^https?$/i,xu=["POST","PUT"];t=_n.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,_,C,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sn.g(),this.v=this.o?On(this.o):On(sn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(pe){$o(this,pe);return}if(m=C||"",C=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ie in U)C.set(ie,U[ie]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const pe of U.keys())C.set(pe,U.get(pe));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(C.keys()).find(pe=>pe.toLowerCase()=="content-type"),ie=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(xu,_,void 0))||U||ie||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pe,$e]of C)this.g.setRequestHeader(pe,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bl(this),this.u=!0,this.g.send(m),this.u=!1}catch(pe){$o(this,pe)}};function $o(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,zl(m),Ei(m)}function zl(m){m.A||(m.A=!0,Te(m,"complete"),Te(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Te(this,"complete"),Te(this,"abort"),Ei(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ei(this,!0)),_n.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},t.bb=function(){vu(this)};function vu(m){if(m.h&&typeof c<"u"&&(!m.v[1]||li(m)!=4||m.Z()!=2)){if(m.u&&li(m)==4)be(m.Ea,0,m);else if(Te(m,"readystatechange"),li(m)==4){m.h=!1;try{const $e=m.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var U;if(U=$e===0){var ie=String(m.D).match(Zs)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),U=!ig.test(ie?ie.toLowerCase():"")}C=U}if(C)Te(m,"complete"),Te(m,"success");else{m.m=6;try{var pe=2<li(m)?m.g.statusText:""}catch{pe=""}m.l=pe+" ["+m.Z()+"]",zl(m)}}finally{Ei(m)}}}}function Ei(m,_){if(m.g){Bl(m);const C=m.g,U=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||Te(m,"ready");try{C.onreadystatechange=U}catch{}}}function Bl(m){m.I&&(u.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function li(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<li(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),vr(_)}};function bu(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Hl(m){const _={};m=(m.g&&2<=li(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<m.length;U++){if(R(m[U]))continue;var C=F(m[U]);const ie=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const pe=_[ie]||[];_[ie]=pe,pe.push(C)}D(_,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(m,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||_}function wu(m){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Es("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Es("baseRetryDelayMs",5e3,m),this.cb=Es("retryDelaySeedMs",1e4,m),this.Wa=Es("forwardChannelMaxRetries",2,m),this.wa=Es("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Qs(m&&m.concurrentRequestLimit),this.Da=new ks,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wu.prototype,t.la=8,t.G=1,t.connect=function(m,_,C,U){ce(0),this.W=m,this.H=_||{},C&&U!==void 0&&(this.H.OSID=C,this.H.OAID=U),this.F=this.X,this.I=Sh(this,null,this.W),Ns(this)};function Nr(m){if(Wl(m),m.G==3){var _=m.U++,C=Zr(m.I);if(en(C,"SID",m.K),en(C,"RID",_),en(C,"TYPE","terminate"),ia(m,C),_=new Ht(m,m.j,_),_.L=2,_.v=ws(Zr(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=_.v,C=!0),C||(_.g=Th(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Wt(_)}Nh(m)}function is(m){m.g&&(_u(m),m.g.cancel(),m.g=null)}function Wl(m){is(m),m.u&&(u.clearTimeout(m.u),m.u=null),Kl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Ns(m){if(!Jr(m.h)&&!m.s){m.s=!0;var _=m.Ga;Ee||ge(),ee||(Ee(),ee=!0),ae.add(_,m),m.B=0}}function sg(m,_){return La(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ce(x(m.Ga,m,_),Eh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ie=new Ht(this,this.j,m);let pe=this.o;if(this.S&&(pe?(pe=M(pe),S(pe,this.S)):pe=this.S),this.m!==null||this.O||(ie.H=pe,pe=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var U=this.i[C];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(_+=U,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=za(this,ie,_),C=Zr(this.I),en(C,"RID",m),en(C,"CVER",22),this.D&&en(C,"X-HTTP-Session-Id",this.D),ia(this,C),pe&&(this.O?_="headers="+encodeURIComponent(String(ra(pe)))+"&"+_:this.m&&$a(C,this.m,pe)),Va(this.h,ie),this.Ua&&en(C,"TYPE","init"),this.P?(en(C,"$req",_),en(C,"SID","null"),ie.T=!0,wr(ie,C,null)):wr(ie,C,_),this.G=2}}else this.G==3&&(m?ql(this,m):this.i.length==0||Jr(this.h)||ql(this))};function ql(m,_){var C;_?C=_.l:C=m.U++;const U=Zr(m.I);en(U,"SID",m.K),en(U,"RID",C),en(U,"AID",m.T),ia(m,U),m.m&&m.o&&$a(U,m.m,m.o),C=new Ht(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),_&&(m.i=_.D.concat(m.i)),_=za(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Va(m.h,C),wr(C,U,_)}function ia(m,_){m.H&&q(m.H,function(C,U){en(_,U,C)}),m.l&&xs({},function(C,U){en(_,U,C)})}function za(m,_,C){C=Math.min(m.i.length,C);var U=m.l?x(m.l.Na,m.l,m):null;e:{var ie=m.i;let pe=-1;for(;;){const $e=["count="+C];pe==-1?0<C?(pe=ie[0].g,$e.push("ofs="+pe)):pe=0:$e.push("ofs="+pe);let tn=!0;for(let lr=0;lr<C;lr++){let zt=ie[lr].g;const fr=ie[lr].map;if(zt-=pe,0>zt)pe=Math.max(0,ie[lr].g-100),tn=!1;else try{hn(fr,$e,"req"+zt+"_")}catch{U&&U(fr)}}if(tn){U=$e.join("&");break e}}}return m=m.i.splice(0,C),_.D=m,U}function zo(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;Ee||ge(),ee||(Ee(),ee=!0),ae.add(_,m),m.v=0}}function Gl(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ce(x(m.Fa,m),Eh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,kh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ce(x(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),is(this),kh(this))};function _u(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function kh(m){m.g=new Ht(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=Zr(m.qa);en(_,"RID","rpc"),en(_,"SID",m.K),en(_,"AID",m.T),en(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&en(_,"TO",m.ja),en(_,"TYPE","xmlhttp"),ia(m,_),m.m&&m.o&&$a(_,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=ws(Zr(_)),C.m=null,C.P=!0,_r(C,m)}t.Za=function(){this.C!=null&&(this.C=null,is(this),Gl(this),ce(19))};function Kl(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Xl(m,_){var C=null;if(m.g==_){Kl(m),_u(m),m.g=null;var U=2}else if(Er(m.h,_))C=_.D,Js(m.h,_),U=1;else return;if(m.G!=0){if(_.o)if(U==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var ie=m.B;U=V(),Te(U,new Me(U,C)),Ns(m)}else zo(m);else if(ie=_.s,ie==3||ie==0&&0<_.X||!(U==1&&sg(m,_)||U==2&&Gl(m)))switch(C&&0<C.length&&(_=m.h,_.i=_.i.concat(C)),ie){case 1:sa(m,5);break;case 4:sa(m,10);break;case 3:sa(m,6);break;default:sa(m,2)}}}function Eh(m,_){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*_}function sa(m,_){if(m.j.info("Error code "+_),_==2){var C=x(m.fb,m),U=m.Xa;const ie=!U;U=new Or(U||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ea(U,"https"),ws(U),ie?ts(U.toString(),C):Oi(U.toString(),C)}else ce(2);m.G=0,m.l&&m.l.sa(_),Nh(m),Wl(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Nh(m){if(m.G=0,m.ka=[],m.l){const _=Fl(m.h);(_.length!=0||m.i.length!=0)&&(T(m.ka,_),T(m.ka,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.ra()}}function Sh(m,_,C){var U=C instanceof Or?Zr(C):new Or(C);if(U.g!="")_&&(U.g=_+"."+U.g),vs(U,U.s);else{var ie=u.location;U=ie.protocol,_=_?_+"."+ie.hostname:ie.hostname,ie=+ie.port;var pe=new Or(null);U&&ea(pe,U),_&&(pe.g=_),ie&&vs(pe,ie),C&&(pe.l=C),U=pe}return C=m.D,_=m.ya,C&&_&&en(U,C,_),en(U,"VER",m.la),ia(m,U),U}function Th(m,_,C){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new _n(new na({eb:C})):new _n(m.pa),_.Ha(m.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}t=ku.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yl(){}Yl.prototype.g=function(m,_){return new ei(m,_)};function ei(m,_){me.call(this),this.g=new wu(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!R(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!R(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new Ss(this)}N(ei,me),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){Nr(this.g)},ei.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=bn(m),m=C);_.i.push(new Vl(_.Ya++,m)),_.G==3&&Ns(_)},ei.prototype.N=function(){this.g.l=null,delete this.j,Nr(this.g),delete this.g,ei.aa.N.call(this)};function Ch(m){Ot.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const C in _){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}N(Ch,Ot);function jh(){Jt.call(this),this.status=1}N(jh,Jt);function Ss(m){this.g=m}N(Ss,ku),Ss.prototype.ua=function(){Te(this.g,"a")},Ss.prototype.ta=function(m){Te(this.g,new Ch(m))},Ss.prototype.sa=function(m){Te(this.g,new jh)},Ss.prototype.ra=function(){Te(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,ZS=function(){return new Yl},JS=function(){return V()},QS=Jn,My={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,Jf=Be,Ln.COMPLETE="complete",YS=Ln,Dr.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",me.prototype.listen=me.prototype.K,td=Dr,_n.prototype.listenOnce=_n.prototype.L,_n.prototype.getLastError=_n.prototype.Ka,_n.prototype.getLastErrorCode=_n.prototype.Ba,_n.prototype.getStatus=_n.prototype.Z,_n.prototype.getResponseJson=_n.prototype.Oa,_n.prototype.getResponseText=_n.prototype.oa,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Ha,XS=_n}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});const e_="@firebase/firestore",t_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new Xx("@firebase/firestore");function Sc(){return Nl.logLevel}function Qe(t,...e){if(Nl.logLevel<=Ft.DEBUG){const n=e.map(av);Nl.debug(`Firestore (${au}): ${t}`,...n)}}function Na(t,...e){if(Nl.logLevel<=Ft.ERROR){const n=e.map(av);Nl.error(`Firestore (${au}): ${t}`,...n)}}function _o(t,...e){if(Nl.logLevel<=Ft.WARN){const n=e.map(av);Nl.warn(`Firestore (${au}): ${t}`,...n)}}function av(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eT(t,r,n)}function eT(t,e,n){let r=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Na(r),new Error(r)}function Qt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||eT(e,i,r)}function Tt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Hr.UNAUTHENTICATED))}shutdown(){}}class uD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dD{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qt(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ba,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},u=d=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ba)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string",31837,{l:r}),new tT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string",2055,{h:e}),new Hr(e)}}class hD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qt(this.o===void 0,3512);const r=o=>{o.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new n_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new n_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=pD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Rt(t,e){return t<e?-1:t>e?1:0}function Oy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Rt(r,i);{const o=nT(),c=gD(o.encode(r_(t,n)),o.encode(r_(e,n)));return c!==0?c:Rt(r,i)}}n+=r>65535?2:1}return Rt(t.length,e.length)}function r_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function gD(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Rt(t[n],e[n]);return Rt(t.length,e.length)}function qc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__name__";class Ds{constructor(e,n,r){n===void 0?n=0:n>e.length&&vt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&vt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ds?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Ds.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Rt(e.length,n.length)}static compareSegments(e,n){const r=Ds.isNumericId(e),i=Ds.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ds.extractNumericId(e).compare(Ds.extractNumericId(n)):Oy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vo.fromString(e.substring(4,e.length-2))}}class mn extends Ds{construct(e,n,r){return new mn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mn(n)}static emptyPath(){return new mn([])}}const yD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ir extends Ds{construct(e,n,r){return new Ir(e,n,r)}static isValidIdentifier(e){return yD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i_}static keyField(){return new Ir([i_])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new qe(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new qe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new qe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(o(),i++)}if(o(),c)throw new qe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ir(n)}static emptyPath(){return new Ir([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(mn.fromString(e))}static fromName(e){return new ut(mn.fromString(e).popFirst(5))}static empty(){return new ut(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new mn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t,e,n){if(!n)throw new qe(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xD(t,e,n,r){if(e===!0&&r===!0)throw new qe(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function s_(t){if(!ut.isDocumentKey(t))throw new qe(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a_(t){if(ut.isDocumentKey(t))throw new qe(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt(12329,{type:typeof t})}function _i(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pp(t);throw new qe(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vD(t,e){if(e<=0)throw new qe(ve.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){const n={typeString:t};return e&&(n.value=e),n}function sh(t,e){if(!iT(t))throw new qe(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new qe(ve.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=-62135596800,l_=1e6;class xn{static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*l_);return new xn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<o_)throw new qe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l_}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sh(e,xn._jsonSchema))return new xn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xn._jsonSchemaVersion="firestore/timestamp/1.0",xn._jsonSchema={type:ar("string",xn._jsonSchemaVersion),seconds:ar("number"),nanoseconds:ar("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(e){return new Et(e)}static min(){return new Et(new xn(0,0))}static max(){return new Et(new xn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=-1;function bD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(r===1e9?new xn(n+1,0):new xn(n,r));return new ko(i,ut.empty(),e)}function wD(t){return new ko(t.readTime,t.key,Sd)}class ko{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ko(Et.min(),ut.empty(),Sd)}static max(){return new ko(Et.max(),ut.empty(),Sd)}}function _D(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ED{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==kD)throw t;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ke((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ke?n:ke.resolve(n)}catch(n){return ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.reject(n)}static resolve(e){return new ke((n,r)=>{n(e)})}static reject(e){return new ke((n,r)=>{r(e)})}static waitFor(e){return new ke((n,r)=>{let i=0,o=0,c=!1;e.forEach(u=>{++i,u.next(()=>{++o,c&&o===i&&n()},d=>r(d))}),c=!0,o===i&&n()})}static or(e){let n=ke.resolve(!1);for(const r of e)n=n.next(i=>i?ke.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ke((r,i)=>{const o=e.length,c=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(g=>{c[f]=g,++u,u===o&&r(c)},g=>i(g))}})}static doWhile(e,n){return new ke((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function ND(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}gp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=-1;function yp(t){return t==null}function Sm(t){return t===0&&1/t==-1/0}function SD(t){return typeof t=="number"&&Number.isInteger(t)&&!Sm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="";function TD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c_(e)),e=CD(t.get(n),e);return c_(e)}function CD(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case sT:n+="";break;default:n+=o}}return n}function c_(t){return t+sT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.comparator=e,this.root=n||jr.EMPTY}insert(e,n){return new Dn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sf(this.root,e,this.comparator,!0)}}class Sf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??jr.RED,this.left=i??jr.EMPTY,this.right=o??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new jr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw vt(27949);return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1;jr.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new jr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(e){return new d_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new hr(this.comparator);return n.data=e,n}}class d_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.fields=e,e.sort(Ir.comparator)}static empty(){return new Ii([])}unionWith(e){let n=new hr(Ir.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ii(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new oT("Invalid base64 string: "+o):o}}(e);return new Rr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Rr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const jD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(t){if(Qt(!!t,39018),typeof t=="string"){let e=0;const n=jD.exec(t);if(Qt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(t.seconds),nanos:Xn(t.nanos)}}function Xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function No(t){return typeof t=="string"?Rr.fromBase64String(t):Rr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="server_timestamp",cT="__type__",uT="__previous_value__",dT="__local_write_time__";function cv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cT])===null||n===void 0?void 0:n.stringValue)===lT}function xp(t){const e=t.mapValue.fields[uT];return cv(e)?xp(e):e}function Td(t){const e=Eo(t.mapValue.fields[dT].timestampValue);return new xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,r,i,o,c,u,d,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=g}}const Tm="(default)";class Cd{constructor(e,n){this.projectId=e,this.database=n||Tm}static empty(){return new Cd("","")}get isDefaultDatabase(){return this.database===Tm}isEqual(e){return e instanceof Cd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="__type__",ID="__max__",Tf={mapValue:{}},fT="__vector__",Cm="value";function So(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cv(t)?4:RD(t)?9007199254740991:PD(t)?10:11:vt(28295,{value:t})}function Ys(t,e){if(t===e)return!0;const n=So(t);if(n!==So(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Td(t).isEqual(Td(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Eo(i.timestampValue),u=Eo(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return No(i.bytesValue).isEqual(No(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Xn(i.geoPointValue.latitude)===Xn(o.geoPointValue.latitude)&&Xn(i.geoPointValue.longitude)===Xn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Xn(i.integerValue)===Xn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=Xn(i.doubleValue),u=Xn(o.doubleValue);return c===u?Sm(c)===Sm(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return qc(t.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},u=o.mapValue.fields||{};if(u_(c)!==u_(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Ys(c[d],u[d])))return!1;return!0}(t,e);default:return vt(52216,{left:t})}}function jd(t,e){return(t.values||[]).find(n=>Ys(n,e))!==void 0}function Gc(t,e){if(t===e)return 0;const n=So(t),r=So(e);if(n!==r)return Rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rt(t.booleanValue,e.booleanValue);case 2:return function(o,c){const u=Xn(o.integerValue||o.doubleValue),d=Xn(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(t,e);case 3:return h_(t.timestampValue,e.timestampValue);case 4:return h_(Td(t),Td(e));case 5:return Oy(t.stringValue,e.stringValue);case 6:return function(o,c){const u=No(o),d=No(c);return u.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const u=o.split("/"),d=c.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Rt(u[f],d[f]);if(g!==0)return g}return Rt(u.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const u=Rt(Xn(o.latitude),Xn(c.latitude));return u!==0?u:Rt(Xn(o.longitude),Xn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return f_(t.arrayValue,e.arrayValue);case 10:return function(o,c){var u,d,f,g;const y=o.fields||{},x=c.fields||{},w=(u=y[Cm])===null||u===void 0?void 0:u.arrayValue,N=(d=x[Cm])===null||d===void 0?void 0:d.arrayValue,b=Rt(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0);return b!==0?b:f_(w,N)}(t.mapValue,e.mapValue);case 11:return function(o,c){if(o===Tf.mapValue&&c===Tf.mapValue)return 0;if(o===Tf.mapValue)return 1;if(c===Tf.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=c.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let y=0;y<d.length&&y<g.length;++y){const x=Oy(d[y],g[y]);if(x!==0)return x;const w=Gc(u[d[y]],f[g[y]]);if(w!==0)return w}return Rt(d.length,g.length)}(t.mapValue,e.mapValue);default:throw vt(23264,{le:n})}}function h_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Rt(t,e);const n=Eo(t),r=Eo(e),i=Rt(n.seconds,r.seconds);return i!==0?i:Rt(n.nanos,r.nanos)}function f_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Gc(n[i],r[i]);if(o)return o}return Rt(n.length,r.length)}function Kc(t){return Ly(t)}function Ly(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Eo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return No(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Ly(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${Ly(n.fields[c])}`;return i+"}"}(t.mapValue):vt(61005,{value:t})}function Zf(t){switch(So(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xp(t);return e?16+Zf(e):16;case 5:return 2*t.stringValue.length;case 6:return No(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Zf(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Mo(r.fields,(o,c)=>{i+=o.length+Zf(c)}),i}(t.mapValue);default:throw vt(13486,{value:t})}}function m_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vy(t){return!!t&&"integerValue"in t}function uv(t){return!!t&&"arrayValue"in t}function p_(t){return!!t&&"nullValue"in t}function g_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function em(t){return!!t&&"mapValue"in t}function PD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[hT])===null||n===void 0?void 0:n.stringValue)===fT}function ud(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Mo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ud(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ud(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ID}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!em(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(n)}setAll(e){let n=Ir.emptyPath(),r={},i=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=ud(c):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());em(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];em(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Mo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new vi(ud(this.value))}}function mT(t){const e=[];return Mo(t.fields,(n,r)=>{const i=new Ir([n]);if(em(r)){const o=mT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new Ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,i,o,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Wr(e,0,Et.min(),Et.min(),Et.min(),vi.empty(),0)}static newFoundDocument(e,n,r,i){return new Wr(e,1,n,Et.min(),r,i,0)}static newNoDocument(e,n){return new Wr(e,2,n,Et.min(),Et.min(),vi.empty(),0)}static newUnknownDocument(e,n){return new Wr(e,3,n,Et.min(),Et.min(),vi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.position=e,this.inclusive=n}}function y_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],c=t.position[i];if(o.field.isKeyField()?r=ut.comparator(ut.fromName(c.referenceValue),n.key):r=Gc(c,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function x_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ys(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n="asc"){this.field=e,this.dir=n}}function DD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{}class sr extends pT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new OD(e,n,r):n==="array-contains"?new FD(e,r):n==="in"?new UD(e,r):n==="not-in"?new $D(e,r):n==="array-contains-any"?new zD(e,r):new sr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LD(e,r):new VD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gc(n,this.value)):n!==null&&So(this.value)===So(n)&&this.matchesComparison(Gc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends pT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new ps(e,n)}matches(e){return gT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gT(t){return t.op==="and"}function yT(t){return MD(t)&&gT(t)}function MD(t){for(const e of t.filters)if(e instanceof ps)return!1;return!0}function Fy(t){if(t instanceof sr)return t.field.canonicalString()+t.op.toString()+Kc(t.value);if(yT(t))return t.filters.map(e=>Fy(e)).join(",");{const e=t.filters.map(n=>Fy(n)).join(",");return`${t.op}(${e})`}}function xT(t,e){return t instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.field.isEqual(i.field)&&Ys(r.value,i.value)}(t,e):t instanceof ps?function(r,i){return i instanceof ps&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,u)=>o&&xT(c,i.filters[u]),!0):!1}(t,e):void vt(19439)}function vT(t){return t instanceof sr?function(n){return`${n.field.canonicalString()} ${n.op} ${Kc(n.value)}`}(t):t instanceof ps?function(n){return n.op.toString()+" {"+n.getFilters().map(vT).join(" ,")+"}"}(t):"Filter"}class OD extends sr{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class LD extends sr{constructor(e,n){super(e,"in",n),this.keys=bT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VD extends sr{constructor(e,n){super(e,"not-in",n),this.keys=bT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class FD extends sr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uv(n)&&jd(n.arrayValue,this.value)}}class UD extends sr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jd(this.value.arrayValue,n)}}class $D extends sr{constructor(e,n){super(e,"not-in",n)}matches(e){if(jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jd(this.value.arrayValue,n)}}class zD extends sr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n=null,r=[],i=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=u,this.Pe=null}}function v_(t,e=null,n=[],r=[],i=null,o=null,c=null){return new BD(t,e,n,r,i,o,c)}function dv(t){const e=Tt(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Kc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Kc(r)).join(",")),e.Pe=n}return e.Pe}function hv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!x_(t.startAt,e.startAt)&&x_(t.endAt,e.endAt)}function Uy(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n=null,r=[],i=[],o=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function HD(t,e,n,r,i,o,c,u){return new cu(t,e,n,r,i,o,c,u)}function vp(t){return new cu(t)}function b_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wT(t){return t.collectionGroup!==null}function dd(t){const e=Tt(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new hr(Ir.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ad(o,r))}),n.has(Ir.keyField().canonicalString())||e.Te.push(new Ad(Ir.keyField(),r))}return e.Te}function $s(t){const e=Tt(t);return e.Ie||(e.Ie=WD(e,dd(t))),e.Ie}function WD(t,e){if(t.limitType==="F")return v_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ad(i.field,o)});const n=t.endAt?new jm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new jm(t.startAt.position,t.startAt.inclusive):null;return v_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $y(t,e){const n=t.filters.concat([e]);return new cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Am(t,e,n){return new cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bp(t,e){return hv($s(t),$s(e))&&t.limitType===e.limitType}function _T(t){return`${dv($s(t))}|lt:${t.limitType}`}function Tc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>vT(i)).join(", ")}]`),yp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Kc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Kc(i)).join(",")),`Target(${r})`}($s(t))}; limitType=${t.limitType})`}function wp(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ut.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of dd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,u,d){const f=y_(c,u,d);return c.inclusive?f<=0:f<0}(r.startAt,dd(r),i)||r.endAt&&!function(c,u,d){const f=y_(c,u,d);return c.inclusive?f>=0:f>0}(r.endAt,dd(r),i))}(t,e)}function qD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kT(t){return(e,n)=>{let r=!1;for(const i of dd(t)){const o=GD(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function GD(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(o,c,u){const d=c.data.field(o),f=u.data.field(o);return d!==null&&f!==null?Gc(d,f):vt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return aT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=new Dn(ut.comparator);function Sa(){return KD}const ET=new Dn(ut.comparator);function nd(...t){let e=ET;for(const n of t)e=e.insert(n.key,n);return e}function NT(t){let e=ET;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cl(){return hd()}function ST(){return hd()}function hd(){return new Dl(t=>t.toString(),(t,e)=>t.isEqual(e))}const XD=new Dn(ut.comparator),YD=new hr(ut.comparator);function Ut(...t){let e=YD;for(const n of t)e=e.add(n);return e}const QD=new hr(Rt);function JD(){return QD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function ZD(t,e){return SD(e)?TT(e):fv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this._=void 0}}function e9(t,e,n){return t instanceof Id?function(i,o){const c={fields:{[cT]:{stringValue:lT},[dT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&cv(o)&&(o=xp(o)),o&&(c.fields[uT]=o),{mapValue:c}}(n,e):t instanceof Pd?jT(t,e):t instanceof Rd?AT(t,e):function(i,o){const c=CT(i,o),u=w_(c)+w_(i.Ee);return Vy(c)&&Vy(i.Ee)?TT(u):fv(i.serializer,u)}(t,e)}function t9(t,e,n){return t instanceof Pd?jT(t,e):t instanceof Rd?AT(t,e):n}function CT(t,e){return t instanceof Im?function(r){return Vy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Id extends _p{}class Pd extends _p{constructor(e){super(),this.elements=e}}function jT(t,e){const n=IT(e);for(const r of t.elements)n.some(i=>Ys(i,r))||n.push(r);return{arrayValue:{values:n}}}class Rd extends _p{constructor(e){super(),this.elements=e}}function AT(t,e){let n=IT(e);for(const r of t.elements)n=n.filter(i=>!Ys(i,r));return{arrayValue:{values:n}}}class Im extends _p{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function w_(t){return Xn(t.integerValue||t.doubleValue)}function IT(t){return uv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,n){this.field=e,this.transform=n}}function r9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Pd&&i instanceof Pd||r instanceof Rd&&i instanceof Rd?qc(r.elements,i.elements,Ys):r instanceof Im&&i instanceof Im?Ys(r.Ee,i.Ee):r instanceof Id&&i instanceof Id}(t.transform,e.transform)}class i9{constructor(e,n){this.version=e,this.transformResults=n}}class Yi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yi}static exists(e){return new Yi(void 0,e)}static updateTime(e){return new Yi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kp{}function PT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mv(t.key,Yi.none()):new ah(t.key,t.data,Yi.none());{const n=t.data,r=vi.empty();let i=new hr(Ir.comparator);for(let o of e.fields)if(!i.has(o)){let c=n.field(o);c===null&&o.length>1&&(o=o.popLast(),c=n.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new Oo(t.key,r,new Ii(i.toArray()),Yi.none())}}function s9(t,e,n){t instanceof ah?function(i,o,c){const u=i.value.clone(),d=k_(i.fieldTransforms,o,c.transformResults);u.setAll(d),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Oo?function(i,o,c){if(!tm(i.precondition,o))return void o.convertToUnknownDocument(c.version);const u=k_(i.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(RT(i)),d.setAll(u),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function fd(t,e,n,r){return t instanceof ah?function(o,c,u,d){if(!tm(o.precondition,c))return u;const f=o.value.clone(),g=E_(o.fieldTransforms,d,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oo?function(o,c,u,d){if(!tm(o.precondition,c))return u;const f=E_(o.fieldTransforms,d,c),g=c.data;return g.setAll(RT(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,c,u){return tm(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function a9(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=CT(r.transform,i||null);o!=null&&(n===null&&(n=vi.empty()),n.set(r.field,o))}return n||null}function __(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qc(r,i,(o,c)=>r9(o,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ah extends kp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oo extends kp{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function k_(t,e,n){const r=new Map;Qt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],c=o.transform,u=e.data.field(o.field);r.set(o.field,t9(c,u,n[i]))}return r}function E_(t,e,n){const r=new Map;for(const i of t){const o=i.transform,c=n.data.field(i.field);r.set(i.field,e9(o,c,e))}return r}class mv extends kp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o9 extends kp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&s9(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ST();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=n.has(i.key)?null:u;const d=PT(c,u);d!==null&&r.set(i.key,d),c.isValidDocument()||c.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ut())}isEqual(e){return this.batchId===e.batchId&&qc(this.mutations,e.mutations,(n,r)=>__(n,r))&&qc(this.baseMutations,e.baseMutations,(n,r)=>__(n,r))}}class pv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Qt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return XD}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new pv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr,Bt;function d9(t){switch(t){case ve.OK:return vt(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return vt(15467,{code:t})}}function DT(t){if(t===void 0)return Na("GRPC error has no .code"),ve.UNKNOWN;switch(t){case tr.OK:return ve.OK;case tr.CANCELLED:return ve.CANCELLED;case tr.UNKNOWN:return ve.UNKNOWN;case tr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case tr.INTERNAL:return ve.INTERNAL;case tr.UNAVAILABLE:return ve.UNAVAILABLE;case tr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case tr.NOT_FOUND:return ve.NOT_FOUND;case tr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case tr.ABORTED:return ve.ABORTED;case tr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case tr.DATA_LOSS:return ve.DATA_LOSS;default:return vt(39323,{code:t})}}(Bt=tr||(tr={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=new vo([4294967295,4294967295],0);function N_(t){const e=nT().encode(t),n=new KS;return n.update(e),new Uint8Array(n.digest())}function S_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vo([n,r],0),new vo([i,o],0)]}class gv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rd(`Invalid padding: ${n}`);if(r<0)throw new rd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rd(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=vo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(vo.fromNumber(r)));return i.compare(h9)===1&&(i=new vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=N_(e),[r,i]=S_(n);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,i,o);if(!this.ye(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new gv(o,i,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=N_(e),[r,i]=S_(n);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,i,o);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ep(Et.min(),i,new Dn(Rt),Sa(),Ut())}}class oh{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new oh(r,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class MT{constructor(e,n){this.targetId=e,this.De=n}}class OT{constructor(e,n,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class T_{constructor(){this.ve=0,this.Ce=C_(),this.Fe=Rr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ut(),n=Ut(),r=Ut();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:vt(38017,{changeType:o})}}),new oh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=C_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class f9{constructor(e){this.We=e,this.Ge=new Map,this.ze=Sa(),this.je=Cf(),this.Je=Cf(),this.He=new Dn(Rt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:vt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(Uy(o))if(r===0){const c=new ut(o.path);this.Xe(n,c,Wr.newNoDocument(c,Et.min()))}else Qt(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),d=u?this.ut(u,e,c):1;if(d!==0){this.rt(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let c,u;try{c=No(r).toUint8Array()}catch(d){if(d instanceof oT)return _o("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new gv(c,i,o)}catch(d){return _o(d instanceof rd?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,c)=>{const u=this.st(c);if(u){if(o.current&&Uy(u.target)){const d=new ut(u.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,Wr.newNoDocument(d,e))}o.Ne&&(n.set(c,o.Le()),o.ke())}});let r=Ut();this.Je.forEach((o,c)=>{let u=!0;c.forEachWhile(d=>{const f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(e));const i=new Ep(e,n,this.He,this.ze,r);return this.ze=Sa(),this.je=Cf(),this.Je=Cf(),this.He=new Dn(Rt),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new T_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new hr(Rt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new hr(Rt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Qe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new T_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Cf(){return new Dn(ut.comparator)}function C_(){return new Dn(ut.comparator)}const m9={asc:"ASCENDING",desc:"DESCENDING"},p9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g9={and:"AND",or:"OR"};class y9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zy(t,e){return t.useProto3Json||yp(e)?e:{value:e}}function Pm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function x9(t,e){return Pm(t,e.toTimestamp())}function zs(t){return Qt(!!t,49232),Et.fromTimestamp(function(n){const r=Eo(n);return new xn(r.seconds,r.nanos)}(t))}function yv(t,e){return By(t,e).canonicalString()}function By(t,e){const n=function(i){return new mn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function VT(t){const e=mn.fromString(t);return Qt(BT(e),10190,{key:e.toString()}),e}function Hy(t,e){return yv(t.databaseId,e.path)}function V0(t,e){const n=VT(e);if(n.get(1)!==t.databaseId.projectId)throw new qe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(UT(n))}function FT(t,e){return yv(t.databaseId,e)}function v9(t){const e=VT(t);return e.length===4?mn.emptyPath():UT(e)}function Wy(t){return new mn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UT(t){return Qt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function j_(t,e,n){return{name:Hy(t,e),fields:n.value.mapValue.fields}}function b9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:vt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Qt(g===void 0||typeof g=="string",58123),Rr.fromBase64String(g||"")):(Qt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Rr.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const g=f.code===void 0?ve.UNKNOWN:DT(f.code);return new qe(g,f.message||"")}(c);n=new OT(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=V0(t,r.document.name),o=zs(r.document.updateTime),c=r.document.createTime?zs(r.document.createTime):Et.min(),u=new vi({mapValue:{fields:r.document.fields}}),d=Wr.newFoundDocument(i,o,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new nm(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=V0(t,r.document),o=r.readTime?zs(r.readTime):Et.min(),c=Wr.newNoDocument(i,o),u=r.removedTargetIds||[];n=new nm([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=V0(t,r.document),o=r.removedTargetIds||[];n=new nm([],o,i,null)}else{if(!("filter"in e))return vt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new u9(i,o),u=r.targetId;n=new MT(u,c)}}return n}function w9(t,e){let n;if(e instanceof ah)n={update:j_(t,e.key,e.value)};else if(e instanceof mv)n={delete:Hy(t,e.key)};else if(e instanceof Oo)n={update:j_(t,e.key,e.data),updateMask:A9(e.fieldMask)};else{if(!(e instanceof o9))return vt(16599,{Rt:e.type});n={verify:Hy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const u=c.transform;if(u instanceof Id)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Pd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Rd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Im)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw vt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:x9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:vt(27497)}(t,e.precondition)),n}function _9(t,e){return t&&t.length>0?(Qt(e!==void 0,14353),t.map(n=>function(i,o){let c=i.updateTime?zs(i.updateTime):zs(o);return c.isEqual(Et.min())&&(c=zs(o)),new i9(c,i.transformResults||[])}(n,e))):[]}function k9(t,e){return{documents:[FT(t,e.path)]}}function E9(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=FT(t,i);const o=function(f){if(f.length!==0)return zT(ps.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const c=function(f){if(f.length!==0)return f.map(g=>function(x){return{field:Cc(x.field),direction:T9(x.dir)}}(g))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=zy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:i}}function N9(t){let e=v9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qt(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(y){const x=$T(y);return x instanceof ps&&yT(x)?x.getFilters():[x]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(x=>function(N){return new Ad(jc(N.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x))}(n.orderBy));let u=null;n.limit&&(u=function(y){let x;return x=typeof y=="object"?y.value:y,yp(x)?null:x}(n.limit));let d=null;n.startAt&&(d=function(y){const x=!!y.before,w=y.values||[];return new jm(w,x)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const x=!y.before,w=y.values||[];return new jm(w,x)}(n.endAt)),HD(e,i,c,o,u,"F",d,f)}function S9(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $T(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=jc(n.unaryFilter.field);return sr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jc(n.unaryFilter.field);return sr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=jc(n.unaryFilter.field);return sr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jc(n.unaryFilter.field);return sr.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}}(t):t.fieldFilter!==void 0?function(n){return sr.create(jc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ps.create(n.compositeFilter.filters.map(r=>$T(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt(1026)}}(n.compositeFilter.op))}(t):vt(30097,{filter:t})}function T9(t){return m9[t]}function C9(t){return p9[t]}function j9(t){return g9[t]}function Cc(t){return{fieldPath:t.canonicalString()}}function jc(t){return Ir.fromServerFormat(t.fieldPath)}function zT(t){return t instanceof sr?function(n){if(n.op==="=="){if(g_(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NAN"}};if(p_(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(g_(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NOT_NAN"}};if(p_(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cc(n.field),op:C9(n.op),value:n.value}}}(t):t instanceof ps?function(n){const r=n.getFilters().map(i=>zT(i));return r.length===1?r[0]:{compositeFilter:{op:j9(n.op),filters:r}}}(t):vt(54877,{filter:t})}function A9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n,r,i,o=Et.min(),c=Et.min(),u=Rr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e){this.gt=e}}function P9(t){const e=N9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(){this.Dn=new D9}addToCollectionParentIndex(e,n){return this.Dn.add(n),ke.resolve()}getCollectionParents(e,n){return ke.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ke.resolve()}deleteFieldIndex(e,n){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,n){return ke.resolve()}getDocumentsMatchingTarget(e,n){return ke.resolve(null)}getIndexType(e,n){return ke.resolve(0)}getFieldIndexes(e,n){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,n){return ke.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,n){return ke.resolve(ko.min())}updateCollectionGroup(e,n,r){return ke.resolve()}updateIndexEntries(e,n){return ke.resolve()}}class D9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new hr(mn.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hr(mn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HT=41943040;class gi{static withCacheSize(e){return new gi(e,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi.DEFAULT_COLLECTION_PERCENTILE=10,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gi.DEFAULT=new gi(HT,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gi.DISABLED=new gi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Xc(0)}static ur(){return new Xc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="LruGarbageCollector",M9=1048576;function P_([t,e],[n,r]){const i=Rt(t,n);return i===0?Rt(e,r):i}class O9{constructor(e){this.Tr=e,this.buffer=new hr(P_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class L9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Qe(I_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lu(n)?Qe(I_,"Ignoring IndexedDB error during garbage collection: ",n):await ou(n)}await this.Rr(3e5)})}}class V9{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ke.resolve(gp.ue);const r=new O9(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(A_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,c,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Sc()<=Ft.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function F9(t,e){return new V9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(){this.changes=new Dl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ke.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fd(r.mutation,i,Ii.empty(),xn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ut()){const i=cl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let c=nd();return o.forEach((u,d)=>{c=c.insert(u,d.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=cl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ut()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,i){let o=Sa();const c=hd(),u=function(){return hd()}();return n.forEach((d,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Oo)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),fd(g.mutation,f,g.mutation.getFieldMask(),xn.now())):c.set(f.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new $9(g,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=hd();let i=new Dn((c,u)=>c-u),o=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let g=r.get(d)||Ii.empty();g=u.applyToLocalView(f,g),r.set(d,g);const y=(i.get(u.batchId)||Ut()).add(d);i=i.insert(u.batchId,y)})}).next(()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,y=ST();g.forEach(x=>{if(!o.has(x)){const w=PT(n.get(x),r.get(x));w!==null&&y.set(x,w),o=o.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ke.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return ut.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ke.resolve(cl());let u=Sd,d=o;return c.next(f=>ke.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?ke.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{d=d.insert(g,x)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Ut())).next(g=>({batchId:u,changes:NT(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=nd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let c=nd();return this.indexManager.getCollectionParents(e,o).next(u=>ke.forEach(u,d=>{const f=function(y,x){return new cu(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,x)=>{c=c.insert(y,x)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(c=>{o.forEach((d,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Wr.newInvalidDocument(g)))});let u=nd();return c.forEach((d,f)=>{const g=o.get(d);g!==void 0&&fd(g.mutation,f,Ii.empty(),xn.now()),wp(n,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ke.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zs(i.createTime)}}(n)),ke.resolve()}getNamedQuery(e,n){return ke.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:P9(i.bundledQuery),readTime:zs(i.readTime)}}(n)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(){this.overlays=new Dn(ut.comparator),this.kr=new Map}getOverlay(e,n){return ke.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cl();return ke.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),ke.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),ke.resolve()}getOverlaysForCollection(e,n,r){const i=cl(),o=n.length+1,c=new ut(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Dn((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=cl(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=cl(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=i)););return ke.resolve(u)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new c9(n,r));let o=this.kr.get(n);o===void 0&&(o=Ut(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(){this.sessionToken=Rr.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.qr=new hr(xr.Qr),this.$r=new hr(xr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new xr(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new xr(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ut(new mn([])),r=new xr(n,e),i=new xr(n,e+1),o=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ut(new mn([])),r=new xr(n,e),i=new xr(n,e+1);let o=Ut();return this.$r.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const n=new xr(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xr{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ut.comparator(e.key,n.key)||Rt(e.Hr,n.Hr)}static Ur(e,n){return Rt(e.Hr,n.Hr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new hr(xr.Qr)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new l9(o,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Yr=this.Yr.add(new xr(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ke.resolve(c)}lookupMutationBatch(e,n){return ke.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return ke.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?lv:this.er-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xr(n,0),i=new xr(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],c=>{const u=this.Zr(c.Hr);o.push(u)}),ke.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new hr(Rt);return n.forEach(i=>{const o=new xr(i,0),c=new xr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],u=>{r=r.add(u.Hr)})}),ke.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ut.isDocumentKey(o)||(o=o.child(""));const c=new xr(new ut(o),0);let u=new hr(Rt);return this.Yr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(d.Hr)),!0)},c),ke.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Qt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ke.forEach(n.mutations,i=>{const o=new xr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new xr(n,0),i=this.Yr.firstAfterOrEqual(r);return ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e){this.ni=e,this.docs=function(){return new Dn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ke.resolve(r?r.document.mutableCopy():Wr.newInvalidDocument(n))}getEntries(e,n){let r=Sa();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Wr.newInvalidDocument(i))}),ke.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Sa();const c=n.path,u=new ut(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||_D(wD(g),r)<=0||(i.has(g.key)||wp(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ke.resolve(o)}getAllFromCollectionGroup(e,n,r,i){vt(9500)}ri(e,n){return ke.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new K9(this)}getSize(e){return ke.resolve(this.size)}}class K9 extends U9{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),ke.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e){this.persistence=e,this.ii=new Dl(n=>dv(n),hv),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.si=0,this.oi=new xv,this.targetCount=0,this._i=Xc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ke.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Xc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ke.resolve()}updateTargetData(e,n){return this.hr(n),ke.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),ke.waitFor(o).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ke.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ke.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),ke.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ke.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ke.resolve(r)}containsKey(e,n){return ke.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n){this.ai={},this.overlays={},this.ui=new gp(0),this.ci=!1,this.ci=!0,this.li=new W9,this.referenceDelegate=e(this),this.hi=new X9(this),this.indexManager=new R9,this.remoteDocumentCache=function(i){return new G9(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new I9(n),this.Ti=new B9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new q9(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Qe("MemoryPersistence","Starting transaction:",e);const i=new Y9(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return ke.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class Y9 extends ED{constructor(e){super(),this.currentSequenceNumber=e}}class vv{constructor(e){this.persistence=e,this.Ai=new xv,this.Ri=null}static Vi(e){return new vv(e)}get mi(){if(this.Ri)return this.Ri;throw vt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ke.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ke.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.mi,r=>{const i=ut.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,Et.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return ke.or([()=>ke.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Rm{constructor(e,n){this.persistence=e,this.gi=new Dl(r=>TD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=F9(this,n)}static Vi(e,n){return new Rm(e,n)}Ii(){}di(e){return ke.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return ke.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?ke.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,o.removeEntry(c,Et.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ke.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ke.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ke.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ke.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zf(e.data.value)),n}Sr(e,n,r){return ke.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return ke.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Ut(),i=Ut();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new bv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return j3()?8:ND(Kr())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new Q9;return this.ws(e,n,c).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Sc()<=Ft.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Tc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ke.resolve()):(Sc()<=Ft.DEBUG&&Qe("QueryEngine","Query:",Tc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Sc()<=Ft.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Tc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$s(n))):ke.resolve())}ps(e,n){if(b_(n))return ke.resolve(null);let r=$s(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Am(n,null,"F"),r=$s(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Ut(...o);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.bs(n,u);return this.Ds(n,f,c,d.readTime)?this.ps(e,Am(n,null,"F")):this.vs(e,f,n,d)}))})))}ys(e,n,r,i){return b_(n)||i.isEqual(Et.min())?ke.resolve(null):this.gs.getDocuments(e,r).next(o=>{const c=this.bs(n,o);return this.Ds(n,c,r,i)?ke.resolve(null):(Sc()<=Ft.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tc(n)),this.vs(e,c,n,bD(i,Sd)).next(u=>u))})}bs(e,n){let r=new hr(kT(e));return n.forEach((i,o)=>{wp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Sc()<=Ft.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Tc(n)),this.gs.getDocumentsMatchingQuery(e,n,ko.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="LocalStore",Z9=3e8;class eM{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Dn(Rt),this.Ms=new Dl(o=>dv(o),hv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z9(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function tM(t,e,n,r){return new eM(t,e,n,r)}async function qT(t,e){const n=Tt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],u=[];let d=Ut();for(const f of i){c.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return n.localDocuments.getDocuments(r,d).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function nM(t,e){const n=Tt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,d,f,g){const y=f.batch,x=y.keys();let w=ke.resolve();return x.forEach(N=>{w=w.next(()=>g.getEntry(d,N)).next(b=>{const T=f.docVersions.get(N);Qt(T!==null,48541),b.version.compareTo(T)<0&&(y.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),g.addEntry(b)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(d,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Ut();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GT(t){const e=Tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function rM(t,e){const n=Tt(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const x=i.get(y);if(!x)return;u.push(n.hi.removeMatchingKeys(o,g.removedDocuments,y).next(()=>n.hi.addMatchingKeys(o,g.addedDocuments,y)));let w=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(Rr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(y,w),function(b,T,j){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Z9?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(x,w,g)&&u.push(n.hi.updateTargetData(o,w))});let d=Sa(),f=Ut();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(iM(o,c,e.documentUpdates).next(g=>{d=g.Ls,f=g.ks})),!r.isEqual(Et.min())){const g=n.hi.getLastRemoteSnapshotVersion(o).next(y=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return ke.waitFor(u).next(()=>c.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.Fs=i,o))}function iM(t,e,n){let r=Ut(),i=Ut();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let c=Sa();return n.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Et.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):Qe(wv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Ls:c,ks:i}})}function sM(t,e){const n=Tt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aM(t,e){const n=Tt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,ke.resolve(i)):n.hi.allocateTargetId(r).next(c=>(i=new po(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function qy(t,e,n){const r=Tt(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!lu(c))throw c;Qe(wv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function R_(t,e,n){const r=Tt(t);let i=Et.min(),o=Ut();return r.persistence.runTransaction("Execute query","readwrite",c=>function(d,f,g){const y=Tt(d),x=y.Ms.get(g);return x!==void 0?ke.resolve(y.Fs.get(x)):y.hi.getTargetData(f,g)}(r,c,$s(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(d=>{o=d})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:Et.min(),n?o:Ut())).next(u=>(oM(r,qD(e),u),{documents:u,qs:o})))}function oM(t,e,n){let r=t.xs.get(e)||Et.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}class D_{constructor(){this.activeTargetIds=JD()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lM{constructor(){this.Fo=new D_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new D_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="ConnectivityMonitor";class O_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Qe(M_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Qe(M_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf=null;function Gy(){return jf===null?jf=function(){return 268435456+Math.round(2147483648*Math.random())}():jf++,"0x"+jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="RestConnection",uM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Tm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const c=Gy(),u=this.Go(e,n.toUriEncodedString());Qe(F0,`Sending RPC '${e}' ${c}:`,u,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,i,o);const{host:f}=new URL(u),g=Ra(f);return this.jo(e,u,d,r,g).then(y=>(Qe(F0,`Received RPC '${e}' ${c}: `,y),y),y=>{throw _o(F0,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,o,c){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){const r=uM[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="WebChannelConnection";class fM extends dM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const c=Gy();return new Promise((u,d)=>{const f=new XS;f.setWithCredentials(!0),f.listenOnce(YS.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Jf.NO_ERROR:const y=f.getResponseJson();Qe($r,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Jf.TIMEOUT:Qe($r,`RPC '${e}' ${c} timed out`),d(new qe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Jf.HTTP_ERROR:const x=f.getStatus();if(Qe($r,`RPC '${e}' ${c} failed with status:`,x,"response text:",f.getResponseText()),x>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const b=function(j){const R=j.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(R)>=0?R:ve.UNKNOWN}(N.status);d(new qe(b,N.message))}else d(new qe(ve.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new qe(ve.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Qe($r,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(i);Qe($r,`RPC '${e}' ${c} sending request:`,i),f.send(n,"POST",g,r,15)})}P_(e,n,r){const i=Gy(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ZS(),u=JS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const g=o.join("");Qe($r,`Creating RPC '${e}' stream ${i}: ${g}`,d);const y=c.createWebChannel(g,d);this.T_(y);let x=!1,w=!1;const N=new hM({Ho:T=>{w?Qe($r,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(x||(Qe($r,`Opening RPC '${e}' stream ${i} transport.`),y.open(),x=!0),Qe($r,`RPC '${e}' stream ${i} sending:`,T),y.send(T))},Yo:()=>y.close()}),b=(T,j,R)=>{T.listen(j,A=>{try{R(A)}catch(L){setTimeout(()=>{throw L},0)}})};return b(y,td.EventType.OPEN,()=>{w||(Qe($r,`RPC '${e}' stream ${i} transport opened.`),N.s_())}),b(y,td.EventType.CLOSE,()=>{w||(w=!0,Qe($r,`RPC '${e}' stream ${i} transport closed`),N.__(),this.I_(y))}),b(y,td.EventType.ERROR,T=>{w||(w=!0,_o($r,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),N.__(new qe(ve.UNAVAILABLE,"The operation could not be completed")))}),b(y,td.EventType.MESSAGE,T=>{var j;if(!w){const R=T.data[0];Qt(!!R,16349);const A=R,L=(A==null?void 0:A.error)||((j=A[0])===null||j===void 0?void 0:j.error);if(L){Qe($r,`RPC '${e}' stream ${i} received error:`,L);const z=L.status;let q=function(P){const S=tr[P];if(S!==void 0)return DT(S)}(z),D=L.message;q===void 0&&(q=ve.INTERNAL,D="Unknown error status: "+z+" with message "+L.message),w=!0,N.__(new qe(q,D)),y.close()}else Qe($r,`RPC '${e}' stream ${i} received:`,R),N.a_(R)}}),b(u,QS.STAT_EVENT,T=>{T.stat===My.PROXY?Qe($r,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===My.NOPROXY&&Qe($r,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function U0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){return new y9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="PersistentStream";class XT{constructor(e,n,r,i,o,c,u,d){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new KT(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Na(n.toString()),Na("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new qe(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Qe(L_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Qe(L_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mM extends XT{constructor(e,n,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=b9(this.serializer,e),r=function(o){if(!("targetChange"in o))return Et.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Et.min():c.readTime?zs(c.readTime):Et.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Wy(this.serializer),n.addTarget=function(o,c){let u;const d=c.target;if(u=Uy(d)?{documents:k9(o,d)}:{query:E9(o,d).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=LT(o,c.resumeToken);const f=zy(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(Et.min())>0){u.readTime=Pm(o,c.snapshotVersion.toTimestamp());const f=zy(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=S9(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Wy(this.serializer),n.removeTarget=e,this.k_(n)}}class pM extends XT{constructor(e,n,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=_9(e.writeResults,e.commitTime),r=zs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Wy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>w9(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{}class yM extends gM{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new qe(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,By(n,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(ve.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,By(n,r),i,c,u,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(ve.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class xM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Na(n),this._a=!1):Qe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="RemoteStore";class vM{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Ml(this)&&(Qe(Sl,"Restarting streams for network reachability change."),await async function(d){const f=Tt(d);f.Ia.add(4),await lh(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Sp(f)}(this))})}),this.Aa=new xM(r,i)}}async function Sp(t){if(Ml(t))for(const e of t.da)await e(!0)}async function lh(t){for(const e of t.da)await e(!1)}function YT(t,e){const n=Tt(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Nv(n)?Ev(n):uu(n).x_()&&kv(n,e))}function _v(t,e){const n=Tt(t),r=uu(n);n.Ta.delete(e),r.x_()&&QT(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ml(n)&&n.Aa.set("Unknown"))}function kv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uu(t).H_(e)}function QT(t,e){t.Ra.$e(e),uu(t).Y_(e)}function Ev(t){t.Ra=new f9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),uu(t).start(),t.Aa.aa()}function Nv(t){return Ml(t)&&!uu(t).M_()&&t.Ta.size>0}function Ml(t){return Tt(t).Ia.size===0}function JT(t){t.Ra=void 0}async function bM(t){t.Aa.set("Online")}async function wM(t){t.Ta.forEach((e,n)=>{kv(t,e)})}async function _M(t,e){JT(t),Nv(t)?(t.Aa.la(e),Ev(t)):t.Aa.set("Unknown")}async function kM(t,e,n){if(t.Aa.set("Online"),e instanceof OT&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const u of o.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ta.delete(u),i.Ra.removeTarget(u))}(t,e)}catch(r){Qe(Sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dm(t,r)}else if(e instanceof nm?t.Ra.Ye(e):e instanceof MT?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Et.min()))try{const r=await GT(t.localStore);n.compareTo(r)>=0&&await function(o,c){const u=o.Ra.Pt(c);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(d.resumeToken,c))}}),u.targetMismatches.forEach((d,f)=>{const g=o.Ta.get(d);if(!g)return;o.Ta.set(d,g.withResumeToken(Rr.EMPTY_BYTE_STRING,g.snapshotVersion)),QT(o,d);const y=new po(g.target,d,f,g.sequenceNumber);kv(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Qe(Sl,"Failed to raise snapshot:",r),await Dm(t,r)}}async function Dm(t,e,n){if(!lu(e))throw e;t.Ia.add(1),await lh(t),t.Aa.set("Offline"),n||(n=()=>GT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Qe(Sl,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Sp(t)})}function ZT(t,e){return e().catch(n=>Dm(t,n,e))}async function Tp(t){const e=Tt(t),n=To(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lv;for(;EM(e);)try{const i=await sM(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,NM(e,i)}catch(i){await Dm(e,i)}eC(e)&&tC(e)}function EM(t){return Ml(t)&&t.Pa.length<10}function NM(t,e){t.Pa.push(e);const n=To(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function eC(t){return Ml(t)&&!To(t).M_()&&t.Pa.length>0}function tC(t){To(t).start()}async function SM(t){To(t).na()}async function TM(t){const e=To(t);for(const n of t.Pa)e.X_(n.mutations)}async function CM(t,e,n){const r=t.Pa.shift(),i=pv.from(r,e,n);await ZT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tp(t)}async function jM(t,e){e&&To(t).Z_&&await async function(r,i){if(function(c){return d9(c)&&c!==ve.ABORTED}(i.code)){const o=r.Pa.shift();To(r).N_(),await ZT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Tp(r)}}(t,e),eC(t)&&tC(t)}async function V_(t,e){const n=Tt(t);n.asyncQueue.verifyOperationInProgress(),Qe(Sl,"RemoteStore received new credentials");const r=Ml(n);n.Ia.add(3),await lh(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Sp(n)}async function AM(t,e){const n=Tt(t);e?(n.Ia.delete(2),await Sp(n)):e||(n.Ia.add(2),await lh(n),n.Aa.set("Unknown"))}function uu(t){return t.Va||(t.Va=function(n,r,i){const o=Tt(n);return o.ia(),new mM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:bM.bind(null,t),e_:wM.bind(null,t),n_:_M.bind(null,t),J_:kM.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Nv(t)?Ev(t):t.Aa.set("Unknown")):(await t.Va.stop(),JT(t))})),t.Va}function To(t){return t.ma||(t.ma=function(n,r,i){const o=Tt(n);return o.ia(),new pM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:SM.bind(null,t),n_:jM.bind(null,t),ea:TM.bind(null,t),ta:CM.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Tp(t)):(await t.ma.stop(),t.Pa.length>0&&(Qe(Sl,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const c=Date.now()+r,u=new Sv(e,n,c,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tv(t,e){if(Na("AsyncQueue",`${e}: ${t}`),lu(t))return new qe(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{static emptySet(e){return new zc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=nd(),this.sortedSet=new Dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.fa=new Dn(ut.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):vt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yc{constructor(e,n,r,i,o,c,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new Yc(e,n,zc.emptySet(n),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class PM{constructor(){this.queries=U_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Tt(n),o=i.queries;i.queries=U_(),o.forEach((c,u)=>{for(const d of u.wa)d.onError(r)})})(this,new qe(ve.ABORTED,"Firestore shutting down"))}}function U_(){return new Dl(t=>_T(t),bp)}async function Cv(t,e){const n=Tt(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new IM,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=Tv(c,`Initialization of query '${Tc(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Av(n)}async function jv(t,e){const n=Tt(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const c=o.wa.indexOf(e);c>=0&&(o.wa.splice(c,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RM(t,e){const n=Tt(t);let r=!1;for(const i of e){const o=i.query,c=n.queries.get(o);if(c){for(const u of c.wa)u.Ca(i)&&(r=!0);c.ya=i}}r&&Av(n)}function DM(t,e,n){const r=Tt(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function Av(t){t.Da.forEach(e=>{e.next()})}var Ky,$_;($_=Ky||(Ky={})).Fa="default",$_.Cache="cache";class Iv{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ky.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.key=e}}class rC{constructor(e){this.key=e}}class MM{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ut(),this.mutatedKeys=Ut(),this.Xa=kT(e),this.eu=new zc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new F_,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const x=i.get(g),w=wp(this.query,y)?y:null,N=!!x&&this.mutatedKeys.has(x.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let T=!1;x&&w?x.data.isEqual(w.data)?N!==b&&(r.track({type:3,doc:w}),T=!0):this.iu(x,w)||(r.track({type:2,doc:w}),T=!0,(d&&this.Xa(w,d)>0||f&&this.Xa(w,f)<0)&&(u=!0)):!x&&w?(r.track({type:0,doc:w}),T=!0):x&&!w&&(r.track({type:1,doc:x}),T=!0,(d||f)&&(u=!0)),T&&(w?(c=c.add(w),o=b?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(w,N){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{At:T})}};return b(w)-b(N)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],d=this.Za.size===0&&this.current&&!i?1:0,f=d!==this.Ya;return this.Ya=d,c.length!==0||f?{snapshot:new Yc(this.query,e.eu,o,c,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new F_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ut(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new rC(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new nC(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ut();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Yc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Pv="SyncEngine";class OM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LM{constructor(e){this.key=e,this.lu=!1}}class VM{constructor(e,n,r,i,o,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Dl(u=>_T(u),bp),this.Tu=new Map,this.Iu=new Set,this.du=new Dn(ut.comparator),this.Eu=new Map,this.Au=new xv,this.Ru={},this.Vu=new Map,this.mu=Xc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function FM(t,e,n=!0){const r=cC(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await iC(r,e,n,!0),i}async function UM(t,e){const n=cC(t);await iC(n,e,!0,!1)}async function iC(t,e,n,r){const i=await aM(t.localStore,$s(e)),o=i.targetId,c=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await $M(t,e,o,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&YT(t.remoteStore,i),u}async function $M(t,e,n,r,i){t.gu=(y,x,w)=>async function(b,T,j,R){let A=T.view.nu(j);A.Ds&&(A=await R_(b.localStore,T.query,!1).then(({documents:D})=>T.view.nu(D,A)));const L=R&&R.targetChanges.get(T.targetId),z=R&&R.targetMismatches.get(T.targetId)!=null,q=T.view.applyChanges(A,b.isPrimaryClient,L,z);return B_(b,T.targetId,q._u),q.snapshot}(t,y,x,w);const o=await R_(t.localStore,e,!0),c=new MM(e,o.qs),u=c.nu(o.documents),d=oh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=c.applyChanges(u,t.isPrimaryClient,d);B_(t,n,f._u);const g=new OM(e,n,c);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function zM(t,e,n){const r=Tt(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(c=>!bp(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_v(r.remoteStore,i.targetId),Xy(r,i.targetId)}).catch(ou)):(Xy(r,i.targetId),await qy(r.localStore,i.targetId,!0))}async function BM(t,e){const n=Tt(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_v(n.remoteStore,r.targetId))}async function HM(t,e,n){const r=QM(t);try{const i=await function(c,u){const d=Tt(c),f=xn.now(),g=u.reduce((w,N)=>w.add(N.key),Ut());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=Sa(),b=Ut();return d.Os.getEntries(w,g).next(T=>{N=T,N.forEach((j,R)=>{R.isValidDocument()||(b=b.add(j))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,N)).next(T=>{y=T;const j=[];for(const R of u){const A=a9(R,y.get(R.key).overlayedDocument);A!=null&&j.push(new Oo(R.key,A,mT(A.value.mapValue),Yi.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,j,u)}).next(T=>{x=T;const j=T.applyToLocalDocumentSet(y,b);return d.documentOverlayCache.saveOverlays(w,T.batchId,j)})}).then(()=>({batchId:x.batchId,changes:NT(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,u,d){let f=c.Ru[c.currentUser.toKey()];f||(f=new Dn(Rt)),f=f.insert(u,d),c.Ru[c.currentUser.toKey()]=f}(r,i.batchId,n),await ch(r,i.changes),await Tp(r.remoteStore)}catch(i){const o=Tv(i,"Failed to persist write");n.reject(o)}}async function sC(t,e){const n=Tt(t);try{const r=await rM(n.localStore,e);e.targetChanges.forEach((i,o)=>{const c=n.Eu.get(o);c&&(Qt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?Qt(c.lu,14607):i.removedDocuments.size>0&&(Qt(c.lu,42227),c.lu=!1))}),await ch(n,r,e)}catch(r){await ou(r)}}function z_(t,e,n){const r=Tt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((o,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(c,u){const d=Tt(c);d.onlineState=u;let f=!1;d.queries.forEach((g,y)=>{for(const x of y.wa)x.va(u)&&(f=!0)}),f&&Av(d)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WM(t,e,n){const r=Tt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let c=new Dn(ut.comparator);c=c.insert(o,Wr.newNoDocument(o,Et.min()));const u=Ut().add(o),d=new Ep(Et.min(),new Map,new Dn(Rt),c,u);await sC(r,d),r.du=r.du.remove(o),r.Eu.delete(e),Rv(r)}else await qy(r.localStore,e,!1).then(()=>Xy(r,e,n)).catch(ou)}async function qM(t,e){const n=Tt(t),r=e.batch.batchId;try{const i=await nM(n.localStore,e);oC(n,r,null),aC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ch(n,i)}catch(i){await ou(i)}}async function GM(t,e,n){const r=Tt(t);try{const i=await function(c,u){const d=Tt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next(y=>(Qt(y!==null,37113),g=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);oC(r,e,n),aC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ch(r,i)}catch(i){await ou(i)}}function aC(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function oC(t,e,n){const r=Tt(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Xy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||lC(t,r)})}function lC(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_v(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Rv(t))}function B_(t,e,n){for(const r of n)r instanceof nC?(t.Au.addReference(r.key,e),KM(t,r)):r instanceof rC?(Qe(Pv,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||lC(t,r.key)):vt(19791,{yu:r})}function KM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Qe(Pv,"New document in limbo: "+n),t.Iu.add(r),Rv(t))}function Rv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ut(mn.fromString(e)),r=t.mu.next();t.Eu.set(r,new LM(n)),t.du=t.du.insert(n,r),YT(t.remoteStore,new po($s(vp(n.path)),r,"TargetPurposeLimboResolution",gp.ue))}}async function ch(t,e,n){const r=Tt(t),i=[],o=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,d)=>{c.push(r.gu(d,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);const y=bv.Es(d.targetId,f);o.push(y)}}))}),await Promise.all(c),r.hu.J_(i),await async function(d,f){const g=Tt(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ke.forEach(f,x=>ke.forEach(x.Is,w=>g.persistence.referenceDelegate.addReference(y,x.targetId,w)).next(()=>ke.forEach(x.ds,w=>g.persistence.referenceDelegate.removeReference(y,x.targetId,w)))))}catch(y){if(!lu(y))throw y;Qe(wv,"Failed to update sequence numbers: "+y)}for(const y of f){const x=y.targetId;if(!y.fromCache){const w=g.Fs.get(x),N=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(N);g.Fs=g.Fs.insert(x,b)}}}(r.localStore,o))}async function XM(t,e){const n=Tt(t);if(!n.currentUser.isEqual(e)){Qe(Pv,"User change. New user:",e.toKey());const r=await qT(n.localStore,e);n.currentUser=e,function(o,c){o.Vu.forEach(u=>{u.forEach(d=>{d.reject(new qe(ve.CANCELLED,c))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ch(n,r.Bs)}}function YM(t,e){const n=Tt(t),r=n.Eu.get(e);if(r&&r.lu)return Ut().add(r.key);{let i=Ut();const o=n.Tu.get(e);if(!o)return i;for(const c of o){const u=n.Pu.get(c);i=i.unionWith(u.view.tu)}return i}}function cC(t){const e=Tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WM.bind(null,e),e.hu.J_=RM.bind(null,e.eventManager),e.hu.pu=DM.bind(null,e.eventManager),e}function QM(t){const e=Tt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GM.bind(null,e),e}class Mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Np(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return tM(this.persistence,new J9,e.initialUser,this.serializer)}Du(e){return new WT(vv.Vi,this.serializer)}bu(e){return new lM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mm.provider={build:()=>new Mm};class JM extends Mm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Qt(this.persistence.referenceDelegate instanceof Rm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new L9(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?gi.withCacheSize(this.cacheSizeBytes):gi.DEFAULT;return new WT(r=>Rm.Vi(r,n),this.serializer)}}class Yy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XM.bind(null,this.syncEngine),await AM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PM}()}createDatastore(e){const n=Np(e.databaseInfo.databaseId),r=function(o){return new fM(o)}(e.databaseInfo);return function(o,c,u,d){return new yM(o,c,u,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,c,u){return new vM(r,i,o,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>z_(this.syncEngine,n,0),function(){return O_.C()?new O_:new cM}())}createSyncEngine(e,n){return function(i,o,c,u,d,f,g){const y=new VM(i,o,c,u,d,f);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Tt(i);Qe(Sl,"RemoteStore shutting down."),o.Ia.add(5),await lh(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yy.provider={build:()=>new Yy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Na("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="FirestoreClient";class ZM{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Hr.UNAUTHENTICATED,this.clientId=ov.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Qe(Co,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Qe(Co,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $0(t,e){t.asyncQueue.verifyOperationInProgress(),Qe(Co,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await qT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{_o("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Qe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{_o("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function H_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eO(t);Qe(Co,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>V_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>V_(e.remoteStore,i)),t._onlineComponents=e}async function eO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Qe(Co,"Using user provided OfflineComponentProvider");try{await $0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await $0(t,new Mm)}}else Qe(Co,"Using default OfflineComponentProvider"),await $0(t,new JM(void 0));return t._offlineComponents}async function uC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Qe(Co,"Using user provided OnlineComponentProvider"),await H_(t,t._uninitializedComponentsProvider._online)):(Qe(Co,"Using default OnlineComponentProvider"),await H_(t,new Yy))),t._onlineComponents}function tO(t){return uC(t).then(e=>e.syncEngine)}async function Om(t){const e=await uC(t),n=e.eventManager;return n.onListen=FM.bind(null,e.syncEngine),n.onUnlisten=zM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BM.bind(null,e.syncEngine),n}function nO(t,e,n={}){const r=new ba;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,u,d,f){const g=new Dv({next:x=>{g.Ou(),c.enqueueAndForget(()=>jv(o,y));const w=x.docs.has(u);!w&&x.fromCache?f.reject(new qe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&d&&d.source==="server"?f.reject(new qe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new Iv(vp(u.path),g,{includeMetadataChanges:!0,ka:!0});return Cv(o,y)}(await Om(t),t.asyncQueue,e,n,r)),r.promise}function rO(t,e,n={}){const r=new ba;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,u,d,f){const g=new Dv({next:x=>{g.Ou(),c.enqueueAndForget(()=>jv(o,y)),x.fromCache&&d.source==="server"?f.reject(new qe(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new Iv(u,g,{includeMetadataChanges:!0,ka:!0});return Cv(o,y)}(await Om(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="firestore.googleapis.com",q_=!0;class G_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new qe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hC,this.ssl=q_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:q_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M9)throw new qe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new qe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new qe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new qe(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cD;switch(r.type){case"firstParty":return new fD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=W_.get(n);r&&(Qe("ComponentProvider","Removing Datastore"),W_.delete(n),r.terminate())}(this),Promise.resolve()}}function iO(t,e,n,r={}){var i;t=_i(t,Cp);const o=Ra(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(cp(`https://${d}`),up("Firestore",!0)),c.host!==hC&&c.host!==d&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:d,ssl:o,emulatorOptions:r});if(!_l(f,u)&&(t._setSettings(f),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Hr.MOCK_USER;else{g=lS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new qe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Hr(x)}t._authCredentials=new uD(new tT(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ma(this.firestore,e,this._query)}}class Hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}toJSON(){return{type:Hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(sh(n,Hn._jsonSchema))return new Hn(e,r||null,new ut(mn.fromString(n.referencePath)))}}Hn._jsonSchemaVersion="firestore/documentReference/1.0",Hn._jsonSchema={type:ar("string",Hn._jsonSchemaVersion),referencePath:ar("string")};class bo extends Ma{constructor(e,n,r){super(e,n,vp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new ut(e))}withConverter(e){return new bo(this.firestore,e,this._path)}}function $t(t,e,...n){if(t=rn(t),rT("collection","path",e),t instanceof Cp){const r=mn.fromString(e,...n);return a_(r),new bo(t,null,r)}{if(!(t instanceof Hn||t instanceof bo))throw new qe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mn.fromString(e,...n));return a_(r),new bo(t.firestore,null,r)}}function mt(t,e,...n){if(t=rn(t),arguments.length===1&&(e=ov.newId()),rT("doc","path",e),t instanceof Cp){const r=mn.fromString(e,...n);return s_(r),new Hn(t,null,new ut(r))}{if(!(t instanceof Hn||t instanceof bo))throw new qe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mn.fromString(e,...n));return s_(r),new Hn(t.firestore,t instanceof bo?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="AsyncQueue";class X_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new KT(this,"async_queue_retry"),this.oc=()=>{const r=U0();r&&Qe(K_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=U0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=U0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ba;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!lu(e))throw e;Qe(K_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Na("INTERNAL UNHANDLED ERROR: ",Y_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Sv.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&vt(47125,{hc:Y_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Y_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ta extends Cp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new X_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X_(e),this._firestoreClient=void 0,await e}}}function sO(t,e){const n=typeof t=="object"?t:dp(),r=typeof t=="string"?t:Tm,i=eh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Kx("firestore");o&&iO(i,...o)}return i}function jp(t){if(t._terminated)throw new qe(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aO(t),t._firestoreClient}function aO(t){var e,n,r;const i=t._freezeSettings(),o=function(u,d,f,g){return new AD(u,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,dC(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ZM(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gi(Rr.fromBase64String(e))}catch(n){throw new qe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gi(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sh(e,Gi._jsonSchema))return Gi.fromBase64String(e.bytes)}}Gi._jsonSchemaVersion="firestore/bytes/1.0",Gi._jsonSchema={type:ar("string",Gi._jsonSchemaVersion),bytes:ar("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bs._jsonSchemaVersion}}static fromJSON(e){if(sh(e,Bs._jsonSchema))return new Bs(e.latitude,e.longitude)}}Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:ar("string",Bs._jsonSchemaVersion),latitude:ar("number"),longitude:ar("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sh(e,Hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hs(e.vectorValues);throw new qe(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hs._jsonSchemaVersion="firestore/vectorValue/1.0",Hs._jsonSchema={type:ar("string",Hs._jsonSchemaVersion),vectorValues:ar("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=/^__.*__$/;class lO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oo(e,this.data,this.fieldMask,n,this.fieldTransforms):new ah(e,this.data,n,this.fieldTransforms)}}class fC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Oo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ec:t})}}class Mv{constructor(e,n,r,i,o,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Mv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(mC(this.Ec)&&oO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class cO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Np(e)}Dc(e,n,r,i=!1){return new Mv({Ec:e,methodName:n,bc:r,path:Ir.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pp(t){const e=t._freezeSettings(),n=Np(t._databaseId);return new cO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pC(t,e,n,r,i,o={}){const c=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);Lv("Data must be an object, but it was:",c,r);const u=gC(r,c);let d,f;if(o.merge)d=new Ii(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const x=Qy(e,y,n);if(!c.contains(x))throw new qe(ve.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);xC(g,x)||g.push(x)}d=new Ii(g),f=c.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=c.fieldTransforms;return new lO(new vi(u),d,f)}class Rp extends Ip{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rp}}class Ov extends Ip{_toFieldTransform(e){return new n9(e.path,new Id)}isEqual(e){return e instanceof Ov}}function uO(t,e,n,r){const i=t.Dc(1,e,n);Lv("Data must be an object, but it was:",i,r);const o=[],c=vi.empty();Mo(r,(d,f)=>{const g=Vv(e,d,n);f=rn(f);const y=i.gc(g);if(f instanceof Rp)o.push(g);else{const x=uh(f,y);x!=null&&(o.push(g),c.set(g,x))}});const u=new Ii(o);return new fC(c,u,i.fieldTransforms)}function dO(t,e,n,r,i,o){const c=t.Dc(1,e,n),u=[Qy(e,r,n)],d=[i];if(o.length%2!=0)throw new qe(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(Qy(e,o[x])),d.push(o[x+1]);const f=[],g=vi.empty();for(let x=u.length-1;x>=0;--x)if(!xC(f,u[x])){const w=u[x];let N=d[x];N=rn(N);const b=c.gc(w);if(N instanceof Rp)f.push(w);else{const T=uh(N,b);T!=null&&(f.push(w),g.set(w,T))}}const y=new Ii(f);return new fC(g,y,c.fieldTransforms)}function hO(t,e,n,r=!1){return uh(n,t.Dc(r?4:3,e))}function uh(t,e){if(yC(t=rn(t)))return Lv("Unsupported field value:",e,t),gC(t,e);if(t instanceof Ip)return function(r,i){if(!mC(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const u of r){let d=uh(u,i.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=xn.fromDate(r);return{timestampValue:Pm(i.serializer,o)}}if(r instanceof xn){const o=new xn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pm(i.serializer,o)}}if(r instanceof Bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gi)return{bytesValue:LT(i.serializer,r._byteString)};if(r instanceof Hn){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hs)return function(c,u){return{mapValue:{fields:{[hT]:{stringValue:fT},[Cm]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return fv(u.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${pp(r)}`)}(t,e)}function gC(t,e){const n={};return aT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(t,(r,i)=>{const o=uh(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function yC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xn||t instanceof Bs||t instanceof Gi||t instanceof Hn||t instanceof Ip||t instanceof Hs)}function Lv(t,e,n){if(!yC(n)||!iT(n)){const r=pp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Qy(t,e,n){if((e=rn(e))instanceof Ap)return e._internalPath;if(typeof e=="string")return Vv(t,e);throw Lm("Field path arguments must be of type string or ",t,!1,void 0,n)}const fO=new RegExp("[~\\*/\\[\\]]");function Vv(t,e,n){if(e.search(fO)>=0)throw Lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ap(...e.split("."))._internalPath}catch{throw Lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lm(t,e,n,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${r}`),c&&(d+=` in document ${i}`),d+=")"),new qe(ve.INVALID_ARGUMENT,u+t+d)}function xC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mO extends vC{data(){return super.data()}}function Dp(t,e){return typeof e=="string"?Vv(t,e):e instanceof Ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qe(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fv{}class Uv extends Fv{}function pn(t,e,...n){let r=[];e instanceof Fv&&r.push(e),r=r.concat(n),function(o){const c=o.filter(d=>d instanceof $v).length,u=o.filter(d=>d instanceof Mp).length;if(c>1||c>0&&u>0)throw new qe(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mp extends Uv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mp(e,n,r)}_apply(e){const n=this._parse(e);return wC(e._query,n),new Ma(e.firestore,e.converter,$y(e._query,n))}_parse(e){const n=Pp(e.firestore);return function(o,c,u,d,f,g,y){let x;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new qe(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Z_(y,g);const N=[];for(const b of y)N.push(J_(d,o,b));x={arrayValue:{values:N}}}else x=J_(d,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Z_(y,g),x=hO(u,c,y,g==="in"||g==="not-in");return sr.create(f,g,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pr(t,e,n){const r=e,i=Dp("where",t);return Mp._create(i,r,n)}class $v extends Fv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $v(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ps.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let c=i;const u=o.getFlattenedFilters();for(const d of u)wC(c,d),c=$y(c,d)}(e._query,n),new Ma(e.firestore,e.converter,$y(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zv extends Uv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zv(e,n)}_apply(e){const n=function(i,o,c){if(i.startAt!==null)throw new qe(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ad(o,c)}(e._query,this._field,this._direction);return new Ma(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new cu(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Ca(t,e="asc"){const n=e,r=Dp("orderBy",t);return zv._create(r,n)}class Bv extends Uv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bv(e,n,r)}_apply(e){return new Ma(e.firestore,e.converter,Am(e._query,this._limit,this._limitType))}}function Op(t){return vD("limit",t),Bv._create("limit",t,"F")}function J_(t,e,n){if(typeof(n=rn(n))=="string"){if(n==="")throw new qe(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wT(e)&&n.indexOf("/")!==-1)throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mn.fromString(n));if(!ut.isDocumentKey(r))throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return m_(t,new ut(r))}if(n instanceof Hn)return m_(t,n._key);throw new qe(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(n)}.`)}function Z_(t,e){if(!Array.isArray(t)||t.length===0)throw new qe(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wC(t,e){const n=function(i,o){for(const c of i)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new qe(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pO{convertValue(e,n="none"){switch(So(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw vt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Mo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Cm].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>Xn(c.doubleValue));return new Hs(o)}convertGeoPoint(e){return new Bs(Xn(e.latitude),Xn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Td(e));default:return null}}convertTimestamp(e){const n=Eo(e);return new xn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mn.fromString(e);Qt(BT(r),9688,{name:e});const i=new Cd(r.get(1),r.get(3)),o=new ut(r.popFirst(5));return i.isEqual(n)||Na(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class id{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gl extends vC{constructor(e,n,r,i,o,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}gl._jsonSchemaVersion="firestore/documentSnapshot/1.0",gl._jsonSchema={type:ar("string",gl._jsonSchemaVersion),bundleSource:ar("string","DocumentSnapshot"),bundleName:ar("string"),bundle:ar("string")};class rm extends gl{data(e={}){return super.data(e)}}class yl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new id(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rm(this._firestore,this._userDataWriter,r.key,r,new id(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(u=>{const d=new rm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new id(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new rm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new id(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:gO(u.type),doc:d,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ov.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t){t=_i(t,Hn);const e=_i(t.firestore,Ta);return nO(jp(e),t._key).then(n=>kC(e,t,n))}yl._jsonSchemaVersion="firestore/querySnapshot/1.0",yl._jsonSchema={type:ar("string",yl._jsonSchemaVersion),bundleSource:ar("string","QuerySnapshot"),bundleName:ar("string"),bundle:ar("string")};class Hv extends pO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,n)}}function Ji(t){t=_i(t,Ma);const e=_i(t.firestore,Ta),n=jp(e),r=new Hv(e);return bC(t._query),rO(n,t._query).then(i=>new yl(e,r,t,i))}function rr(t,e,n){t=_i(t,Hn);const r=_i(t.firestore,Ta),i=_C(t.converter,e,n);return Vp(r,[pC(Pp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yi.none())])}function ji(t,e,n,...r){t=_i(t,Hn);const i=_i(t.firestore,Ta),o=Pp(i);let c;return c=typeof(e=rn(e))=="string"||e instanceof Ap?dO(o,"updateDoc",t._key,e,n,r):uO(o,"updateDoc",t._key,e),Vp(i,[c.toMutation(t._key,Yi.exists(!0))])}function Lp(t){return Vp(_i(t.firestore,Ta),[new mv(t._key,Yi.none())])}function dh(t,e){const n=_i(t.firestore,Ta),r=mt(t),i=_C(t.converter,e);return Vp(n,[pC(Pp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yi.exists(!1))]).then(()=>r)}function Bn(t,...e){var n,r,i;t=rn(t);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Q_(e[c])||(o=e[c++]);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Q_(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let d,f,g;if(t instanceof Hn)f=_i(t.firestore,Ta),g=vp(t._key.path),d={next:y=>{e[c]&&e[c](kC(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=_i(t,Ma);f=_i(y.firestore,Ta),g=y._query;const x=new Hv(f);d={next:w=>{e[c]&&e[c](new yl(f,x,y,w))},error:e[c+1],complete:e[c+2]},bC(t._query)}return function(x,w,N,b){const T=new Dv(b),j=new Iv(w,T,N);return x.asyncQueue.enqueueAndForget(async()=>Cv(await Om(x),j)),()=>{T.Ou(),x.asyncQueue.enqueueAndForget(async()=>jv(await Om(x),j))}}(jp(f),g,u,d)}function Vp(t,e){return function(r,i){const o=new ba;return r.asyncQueue.enqueueAndForget(async()=>HM(await tO(r),i,o)),o.promise}(jp(t),e)}function kC(t,e,n){const r=n.docs.get(e._key),i=new Hv(t);return new gl(t,i,e._key,r,new id(n.hasPendingWrites,n.fromCache),e.converter)}function Vm(){return new Ov("serverTimestamp")}(function(e,n=!0){(function(i){au=i})(Il),wo(new _a("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new Ta(new dD(r.getProvider("auth-internal")),new mD(c,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new qe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cd(f.options.projectId,g)}(c,i),c);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Xi(e_,t_,e),Xi(e_,t_,"esm2017")})();var yO="firebase",xO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(yO,xO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="firebasestorage.googleapis.com",NC="storageBucket",vO=2*60*1e3,bO=10*60*1e3,wO=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends ys{constructor(e,n,r=0){super(z0(e),`Firebase Storage: ${n} (${z0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return z0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vn||(vn={}));function z0(t){return"storage/"+t}function Wv(){const t="An unknown error occurred, please check the error payload for server response.";return new Mn(vn.UNKNOWN,t)}function _O(t){return new Mn(vn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function kO(t){return new Mn(vn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mn(vn.UNAUTHENTICATED,t)}function NO(){return new Mn(vn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function SO(t){return new Mn(vn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function SC(){return new Mn(vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TC(){return new Mn(vn.CANCELED,"User canceled the upload/download.")}function TO(t){return new Mn(vn.INVALID_URL,"Invalid URL '"+t+"'.")}function CO(t){return new Mn(vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jO(){return new Mn(vn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NC+"' property when initializing the app?")}function CC(){return new Mn(vn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function AO(){return new Mn(vn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function IO(){return new Mn(vn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PO(t){return new Mn(vn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jy(t){return new Mn(vn.INVALID_ARGUMENT,t)}function jC(){return new Mn(vn.APP_DELETED,"The Firebase app was deleted.")}function RO(t){return new Mn(vn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function md(t,e){return new Mn(vn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ku(t){throw new Mn(vn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Pi.makeFromUrl(e,n)}catch{return new Pi(e,"")}if(r.path==="")return r;throw CO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),d={bucket:1,path:3};function f(L){L.path_=decodeURIComponent(L.path)}const g="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${i}/o${x}`,"i"),N={bucket:1,path:3},b=n===EC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",j=new RegExp(`^https?://${b}/${i}/${T}`,"i"),A=[{regex:u,indices:d,postModify:o},{regex:w,indices:N,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let L=0;L<A.length;L++){const z=A[L],q=z.regex.exec(e);if(q){const D=q[z.indices.bucket];let M=q[z.indices.path];M||(M=""),r=new Pi(D,M),z.postModify(r);break}}if(r==null)throw TO(e);return r}}class DO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t,e,n){let r=1,i=null,o=null,c=!1,u=0;function d(){return u===2}let f=!1;function g(...T){f||(f=!0,e.apply(null,T))}function y(T){i=setTimeout(()=>{i=null,t(w,d())},T)}function x(){o&&clearTimeout(o)}function w(T,...j){if(f){x();return}if(T){x(),g.call(null,T,...j);return}if(d()||c){x(),g.call(null,T,...j);return}r<64&&(r*=2);let A;u===1?(u=2,A=0):A=(r+Math.random())*1e3,y(A)}let N=!1;function b(T){N||(N=!0,x(),!f&&(i!==null?(T||(u=2),clearTimeout(i),y(0)):T||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,b(!0)},n),b}function OO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t){return t!==void 0}function VO(t){return typeof t=="function"}function FO(t){return typeof t=="object"&&!Array.isArray(t)}function Fp(t){return typeof t=="string"||t instanceof String}function ek(t){return qv()&&t instanceof Blob}function qv(){return typeof Blob<"u"}function tk(t,e,n,r){if(r<e)throw Jy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function AC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var xl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xl||(xl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n,r,i,o,c,u,d,f,g,y,x=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,b)=>{this.resolve_=N,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Af(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===xl.NO_ERROR,d=o.getStatus();if(!u||IC(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===xl.ABORT;r(!1,new Af(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new Af(f,o))})},n=(r,i)=>{const o=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());LO(d)?o(d):o()}catch(d){c(d)}else if(u!==null){const d=Wv();d.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,d)):c(d)}else if(i.canceled){const d=this.appDelete_?jC():TC();c(d)}else{const d=SC();c(d)}};this.canceled_?n(!1,new Af(!1,null,!0)):this.backoffId_=MO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Af{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $O(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WO(t,e,n,r,i,o,c=!0,u=!1){const d=AC(t.urlParams),f=t.url+d,g=Object.assign({},t.headers);return BO(g,e),$O(g,n),zO(g,o),HO(g,r),new UO(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GO(...t){const e=qO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(qv())return new Blob(t);throw new Mn(vn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function KO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){if(typeof atob>"u")throw PO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class B0{constructor(e,n){this.data=e,this.contentType=n||null}}function YO(t,e){switch(t){case Vs.RAW:return new B0(PC(e));case Vs.BASE64:case Vs.BASE64URL:return new B0(RC(t,e));case Vs.DATA_URL:return new B0(JO(e),ZO(e))}throw Wv()}function PC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=t.charCodeAt(++n);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function QO(t){let e;try{e=decodeURIComponent(t)}catch{throw md(Vs.DATA_URL,"Malformed data URL.")}return PC(e)}function RC(t,e){switch(t){case Vs.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw md(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vs.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw md(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XO(e)}catch(i){throw i.message.includes("polyfill")?i:md(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class DC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw md(Vs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=e8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function JO(t){const e=new DC(t);return e.base64?RC(Vs.BASE64,e.rest):QO(e.rest)}function ZO(t){return new DC(t).contentType}function e8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){let r=0,i="";ek(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(ek(this.data_)){const r=this.data_,i=KO(r,e,n);return i===null?null:new ga(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ga(r,!0)}}static getBlob(...e){if(qv()){const n=e.map(r=>r instanceof ga?r.data_:r);return new ga(GO.apply(null,n))}else{const n=e.map(c=>Fp(c)?YO(Vs.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[o++]=c[u]}),new ga(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t){let e;try{e=JSON.parse(t)}catch{return null}return FO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function n8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function OC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t,e){return e}class ri{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||r8}}let If=null;function i8(t){return!Fp(t)||t.length<2?t:OC(t)}function Gv(){if(If)return If;const t=[];t.push(new ri("bucket")),t.push(new ri("generation")),t.push(new ri("metageneration")),t.push(new ri("name","fullPath",!0));function e(o,c){return i8(c)}const n=new ri("name");n.xform=e,t.push(n);function r(o,c){return c!==void 0?Number(c):c}const i=new ri("size");return i.xform=r,t.push(i),t.push(new ri("timeCreated")),t.push(new ri("updated")),t.push(new ri("md5Hash",null,!0)),t.push(new ri("cacheControl",null,!0)),t.push(new ri("contentDisposition",null,!0)),t.push(new ri("contentEncoding",null,!0)),t.push(new ri("contentLanguage",null,!0)),t.push(new ri("contentType",null,!0)),t.push(new ri("metadata","customMetadata",!0)),If=t,If}function s8(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Pi(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function a8(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const c=n[o];r[c.local]=c.xform(r,e[c.server])}return s8(r,t),r}function LC(t,e,n){const r=MC(e);return r===null?null:a8(t,r,n)}function o8(t,e,n,r){const i=MC(e);if(i===null||!Fp(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(f=>{const g=t.bucket,y=t.fullPath,x="/b/"+c(g)+"/o/"+c(y),w=du(x,n,r),N=AC({alt:"media",token:f});return w+N})[0]}function VC(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Ol{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){if(!t)throw Wv()}function Kv(t,e){function n(r,i){const o=LC(t,i,e);return wa(o!==null),o}return n}function l8(t,e){function n(r,i){const o=LC(t,i,e);return wa(o!==null),o8(o,i,t.host,t._protocol)}return n}function hh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=NO():i=EO():n.getStatus()===402?i=kO(t.bucket):n.getStatus()===403?i=SO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Xv(t){const e=hh(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=_O(t.path)),o.serverResponse=i.serverResponse,o}return n}function c8(t,e,n){const r=e.fullServerUrl(),i=du(r,t.host,t._protocol),o="GET",c=t.maxOperationRetryTime,u=new Ol(i,o,Kv(t,n),c);return u.errorHandler=Xv(e),u}function u8(t,e,n){const r=e.fullServerUrl(),i=du(r,t.host,t._protocol),o="GET",c=t.maxOperationRetryTime,u=new Ol(i,o,l8(t,n),c);return u.errorHandler=Xv(e),u}function d8(t,e){const n=e.fullServerUrl(),r=du(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function c(d,f){}const u=new Ol(r,i,c,o);return u.successCodes=[200,204],u.errorHandler=Xv(e),u}function h8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function FC(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=h8(null,e)),r}function UC(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let A="";for(let L=0;L<2;L++)A=A+Math.random().toString().slice(2);return A}const d=u();c["Content-Type"]="multipart/related; boundary="+d;const f=FC(e,r,i),g=VC(f,n),y="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,x=`\r
--`+d+"--",w=ga.getBlob(y,r,x);if(w===null)throw CC();const N={name:f.fullPath},b=du(o,t.host,t._protocol),T="POST",j=t.maxUploadRetryTime,R=new Ol(b,T,Kv(t,n),j);return R.urlParams=N,R.headers=c,R.body=w.uploadData(),R.errorHandler=hh(e),R}class Fm{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Yv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{wa(!1)}return wa(!!n&&(e||["active"]).indexOf(n)!==-1),n}function f8(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),c=FC(e,r,i),u={name:c.fullPath},d=du(o,t.host,t._protocol),f="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},y=VC(c,n),x=t.maxUploadRetryTime;function w(b){Yv(b);let T;try{T=b.getResponseHeader("X-Goog-Upload-URL")}catch{wa(!1)}return wa(Fp(T)),T}const N=new Ol(d,f,w,x);return N.urlParams=u,N.headers=g,N.body=y,N.errorHandler=hh(e),N}function m8(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(f){const g=Yv(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wa(!1)}y||wa(!1);const x=Number(y);return wa(!isNaN(x)),new Fm(x,r.size(),g==="final")}const c="POST",u=t.maxUploadRetryTime,d=new Ol(n,c,o,u);return d.headers=i,d.errorHandler=hh(e),d}const nk=256*1024;function p8(t,e,n,r,i,o,c,u){const d=new Fm(0,0);if(c?(d.current=c.current,d.total=c.total):(d.current=0,d.total=r.size()),r.size()!==d.total)throw AO();const f=d.total-d.current;let g=f;i>0&&(g=Math.min(g,i));const y=d.current,x=y+g;let w="";g===0?w="finalize":f===g?w="upload, finalize":w="upload";const N={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${d.current}`},b=r.slice(y,x);if(b===null)throw CC();function T(L,z){const q=Yv(L,["active","final"]),D=d.current+g,M=r.size();let P;return q==="final"?P=Kv(e,o)(L,z):P=null,new Fm(D,M,q==="final",P)}const j="POST",R=e.maxUploadRetryTime,A=new Ol(n,j,T,R);return A.headers=N,A.body=b.uploadData(),A.progressCallback=u||null,A.errorHandler=hh(t),A}const yi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function H0(t){switch(t){case"running":case"pausing":case"canceling":return yi.RUNNING;case"paused":return yi.PAUSED;case"success":return yi.SUCCESS;case"canceled":return yi.CANCELED;case"error":return yi.ERROR;default:return yi.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n,r){if(VO(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class y8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Ku("cannot .send() more than once");if(Ra(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ku("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ku("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ku("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ku("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class x8 extends y8{initXhr(){this.xhr_.responseType="text"}}function ho(){return new x8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Gv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(vn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(IC(i.status,[]))if(o)i=SC();else{this.sleepTime=Math.max(this.sleepTime*2,wO),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(vn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=f8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ho,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=m8(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,ho,n,r);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=nk*this._chunkMultiplier,n=new Fm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=p8(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(d){this._error=d,this._transition("error");return}const u=this._ref.storage._makeRequest(c,ho,i,o,!1);this._request=u,u.getPromise().then(d=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(d.current),d.finalized?(this._metadata=d.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){nk*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=c8(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ho,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=UC(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ho,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=TC(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=H0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new g8(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(H0(this._state)){case yi.SUCCESS:xc(this._resolve.bind(null,this.snapshot))();break;case yi.CANCELED:case yi.ERROR:const n=this._reject;xc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(H0(this._state)){case yi.RUNNING:case yi.PAUSED:e.next&&xc(e.next.bind(e,this.snapshot))();break;case yi.SUCCESS:e.complete&&xc(e.complete.bind(e))();break;case yi.CANCELED:case yi.ERROR:e.error&&xc(e.error.bind(e,this._error))();break;default:e.error&&xc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this._service=e,n instanceof Pi?this._location=n:this._location=Pi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Tl(e,n)}get root(){const e=new Pi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OC(this._location.path)}get storage(){return this._service}get parent(){const e=t8(this._location.path);if(e===null)return null;const n=new Pi(this._location.bucket,e);return new Tl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw RO(e)}}function b8(t,e,n){t._throwIfRoot("uploadBytes");const r=UC(t.storage,t._location,Gv(),new ga(e,!0),n);return t.storage.makeRequestWithTokens(r,ho).then(i=>({metadata:i,ref:t}))}function w8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new v8(t,new ga(e),n)}function _8(t){t._throwIfRoot("getDownloadURL");const e=u8(t.storage,t._location,Gv());return t.storage.makeRequestWithTokens(e,ho).then(n=>{if(n===null)throw IO();return n})}function k8(t){t._throwIfRoot("deleteObject");const e=d8(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ho)}function E8(t,e){const n=n8(t._location.path,e),r=new Pi(t._location.bucket,n);return new Tl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(t){return/^[A-Za-z]+:\/\//.test(t)}function S8(t,e){return new Tl(t,e)}function $C(t,e){if(t instanceof Qv){const n=t;if(n._bucket==null)throw jO();const r=new Tl(n,n._bucket);return e!=null?$C(r,e):r}else return e!==void 0?E8(t,e):t}function T8(t,e){if(e&&N8(e)){if(t instanceof Qv)return S8(t,e);throw Jy("To use ref(service, url), the first argument must be a Storage instance.")}else return $C(t,e)}function rk(t,e){const n=e==null?void 0:e[NC];return n==null?null:Pi.makeFromBucketSpec(n,t)}function C8(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ra(e);i&&(cp(`https://${t.host}/b`),up("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:lS(o,t.app.options.projectId))}class Qv{constructor(e,n,r,i,o,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=EC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vO,this._maxUploadRetryTime=bO,this._requests=new Set,i!=null?this._bucket=Pi.makeFromBucketSpec(i,this._host):this._bucket=rk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pi.makeFromBucketSpec(this._url,e):this._bucket=rk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tl(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new DO(jC());{const c=WO(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const ik="@firebase/storage",sk="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="storage";function Jv(t,e,n){return t=rn(t),b8(t,e,n)}function ak(t,e,n){return t=rn(t),w8(t,e,n)}function Dd(t){return t=rn(t),_8(t)}function j8(t){return t=rn(t),k8(t)}function ul(t,e){return t=rn(t),T8(t,e)}function A8(t=dp(),e){t=rn(t);const r=eh(t,zC).getImmediate({identifier:e}),i=Kx("storage");return i&&I8(r,...i),r}function I8(t,e,n,r={}){C8(t,e,n,r)}function P8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Qv(n,r,i,e,Il)}function R8(){wo(new _a(zC,P8,"PUBLIC").setMultipleInstances(!0)),Xi(ik,sk,""),Xi(ik,sk,"esm2017")}R8();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="type.googleapis.com/google.protobuf.Int64Value",M8="type.googleapis.com/google.protobuf.UInt64Value";function BC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Um(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Um(e));if(typeof t=="function"||typeof t=="object")return BC(t,e=>Um(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Qc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case D8:case M8:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Qc(e)):typeof t=="function"||typeof t=="object"?BC(t,e=>Qc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bi extends ys{constructor(e,n,r){super(`${Zv}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,bi.prototype)}}function O8(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $m(t,e){let n=O8(t),r=n,i;try{const o=e&&e.error;if(o){const c=o.status;if(typeof c=="string"){if(!ok[c])return new bi("internal","internal");n=ok[c],r=c}const u=o.message;typeof u=="string"&&(r=u),i=o.details,i!==void 0&&(i=Qc(i))}}catch{}return n==="ok"?null:new bi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,xi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="us-central1",V8=/^data: (.*?)(?:\n|$)/;function F8(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new bi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class U8{constructor(e,n,r,i,o=Zy,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new L8(e,n,r,i),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Zy}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function $8(t,e,n){const r=Ra(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(cp(t.emulatorOrigin),up("Functions",!0))}function z8(t,e,n){const r=i=>H8(t,e,i,{});return r.stream=(i,o)=>q8(t,e,i,o),r}async function B8(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function HC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function H8(t,e,n,r){const i=t._url(e);return W8(t,i,n,r)}async function W8(t,e,n,r){n=Um(n);const i={data:n},o=await HC(t,r),c=r.timeout||7e4,u=F8(c),d=await Promise.race([B8(e,i,o,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new bi("cancelled","Firebase Functions instance was deleted.");const f=$m(d.status,d.json);if(f)throw f;if(!d.json)throw new bi("internal","Response is not valid JSON object.");let g=d.json.data;if(typeof g>"u"&&(g=d.json.result),typeof g>"u")throw new bi("internal","Response is missing data field.");return{data:Qc(g)}}function q8(t,e,n,r){const i=t._url(e);return G8(t,i,n,r||{})}async function G8(t,e,n,r){var i;n=Um(n);const o={data:n},c=await HC(t,r);c["Content-Type"]="application/json",c.Accept="text/event-stream";let u;try{u=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:c,signal:r==null?void 0:r.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const b=new bi("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const N=$m(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let d,f;const g=new Promise((w,N)=>{d=w,f=N});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const w=new bi("cancelled","Request was cancelled.");f(w)});const y=u.body.getReader(),x=K8(y,d,f,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const w=x.getReader();return{async next(){const{value:N,done:b}=await w.read();return{value:N,done:b}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:g}}function K8(t,e,n,r){const i=(c,u)=>{const d=c.match(V8);if(!d)return;const f=d[1];try{const g=JSON.parse(f);if("result"in g){e(Qc(g.result));return}if("message"in g){u.enqueue(Qc(g.message));return}if("error"in g){const y=$m(0,g);u.error(y),n(y);return}}catch(g){if(g instanceof bi){u.error(g),n(g);return}}},o=new TextDecoder;return new ReadableStream({start(c){let u="";return d();async function d(){if(r!=null&&r.aborted){const f=new bi("cancelled","Request was cancelled");return c.error(f),n(f),Promise.resolve()}try{const{value:f,done:g}=await t.read();if(g){u.trim()&&i(u.trim(),c),c.close();return}if(r!=null&&r.aborted){const x=new bi("cancelled","Request was cancelled");c.error(x),n(x),await t.cancel();return}u+=o.decode(f,{stream:!0});const y=u.split(`
`);u=y.pop()||"";for(const x of y)x.trim()&&i(x.trim(),c);return d()}catch(f){const g=f instanceof bi?f:$m(0,null);c.error(g),n(g)}}},cancel(){return t.cancel()}})}const lk="@firebase/functions",ck="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8="auth-internal",Y8="app-check-internal",Q8="messaging-internal";function J8(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(X8),c=n.getProvider(Q8),u=n.getProvider(Y8);return new U8(i,o,c,u,r)};wo(new _a(Zv,e,"PUBLIC").setMultipleInstances(!0)),Xi(lk,ck,t),Xi(lk,ck,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(t=dp(),e=Zy){const r=eh(rn(t),Zv).getImmediate({identifier:e}),i=Kx("functions");return i&&e7(r,...i),r}function e7(t,e,n){$8(rn(t),e,n)}function WC(t,e,n){return z8(rn(t),e)}J8();const t7={apiKey:"AIzaSyCraPDyyhOJs9IJtVMCe2b1VNFYkbtqWEg",authDomain:"playcenter-universal.firebaseapp.com",projectId:"playcenter-universal",storageBucket:"playcenter-universal.firebasestorage.app",messagingSenderId:"876884906641",appId:"1:876884906641:web:a0a5b7526b7f4161452530",measurementId:"G-4MPL62WSKW"},Up=dS(t7),Ve=sO(Up),so=oD(Up),dl=A8(Up),qC=Z8(Up);function uk(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e="0123456789";let n="USER-";for(let r=0;r<3;r++)n+=t.charAt(Math.floor(Math.random()*t.length));for(let r=0;r<3;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}const GC=E.createContext();function oi(){return E.useContext(GC)}function KC({children:t}){const[e,n]=E.useState(null),[r,i]=E.useState(null),[o,c]=E.useState(!0);E.useEffect(()=>{let b=null;const T=XR(so,async j=>{if(b){try{b()}catch{}b=null}if(n(j),!j){i(null),c(!1);return}try{const R=mt(Ve,"users",j.uid),A=mt(Ve,"usuarios",j.uid),[L,z]=await Promise.all([qr(R),qr(A)]);let q=null;if(L.exists())q=R;else if(z.exists())q=A;else{const M={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:uk(),displayName:j.displayName||"",email:j.email||"",createdAt:new Date};try{await rr(R,M,{merge:!0})}catch(P){console.warn("No fue posible crear users/{uid} automticamente:",P)}q=R}b=Bn(q,D=>{if(D.exists()){const M=D.data()||{},P={uid:j.uid,...M,displayName:j.displayName||M.displayName||"",email:j.email||M.email||"",isAdmin:M.admin===!0,role:M.role||"buyer",isSeller:M.isSeller===!0||M.role==="seller",storeName:M.storeName||"",storeDescription:M.storeDescription||"",storeImage:M.storeImage||"",storePhone:M.storePhone||"",storeAddress:M.storeAddress||""};i(P)}else{const M={uid:j.uid,telefono:"",direccion:"",admin:!1,codigo:"",displayName:j.displayName||"",email:j.email||j.email,isAdmin:!1};i(M)}c(!1)},D=>{console.error("onSnapshot usuario error:",D),c(!1)})}catch(R){console.error("Error inicializando listener de usuario:",R);try{const A=mt(Ve,"users",j.uid),L=await qr(A),z=L.exists()?L.data():{},q={uid:j.uid,...z,displayName:j.displayName||z.displayName||"",email:j.email||z.email||"",isAdmin:z.admin===!0};i(q)}catch(A){console.error("Fallback read error:",A),i({uid:j.uid,displayName:j.displayName||"",email:j.email||"",telefono:"",direccion:"",isAdmin:!1,codigo:""})}finally{c(!1)}}});return()=>{try{T()}catch{}if(b)try{b()}catch{}}},[]);async function u(b,T,j){const R=await HR(so,b,T);await $c(R.user,{displayName:j});const A=uk(),L={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:A,displayName:j,email:b,createdAt:new Date};await rr(mt(Ve,"users",R.user.uid),L,{merge:!0}),n(so.currentUser),i({uid:R.user.uid,telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:A,displayName:j,email:b,isAdmin:!1})}function d(b,T){return WR(so,b,T)}function f(){return YR(so)}async function g(b){if(!e)throw new Error("No user logged in");const T=mt(Ve,"users",e.uid);try{await rr(T,b,{merge:!0});const j=await qr(T),R=j.exists()?j.data():{},A={uid:e.uid,...R,displayName:e.displayName||R.displayName||"",email:e.email||R.email||"",isAdmin:R.admin===!0};if(i(A),b.displayName&&e.displayName!==b.displayName)try{await $c(e,{displayName:b.displayName}),n(so.currentUser)}catch(L){console.warn("Error actualizando displayName en auth:",L)}return A}catch(j){throw console.error("actualizarUsuarioInfo error:",j),j}}async function y(b){if(!e)throw new Error("No user logged in");const T=ul(dl,`usuarios/${e.uid}/perfil.jpg`);await Jv(T,b);const j=await Dd(T);await $c(e,{photoURL:j}),n(so.currentUser);try{await rr(mt(Ve,"users",e.uid),{fotoURL:j},{merge:!0}),i(R=>({...R,fotoURL:j}))}catch(R){console.warn("No se pudo persistir fotoURL en users/{uid}:",R)}return j}async function x(b){if(!e)throw new Error("No user logged in");const T=mt(Ve,"users",e.uid);try{const j={role:"seller",isSeller:!0,storeName:b.storeName||"",storeDescription:b.storeDescription||"",storeImage:b.storeImage||"",storePhone:b.storePhone||"",storeAddress:b.storeAddress||"",sellerActivatedAt:new Date};return await rr(T,j,{merge:!0}),i(R=>({...R,...j})),!0}catch(j){throw console.error("Error al convertirse en vendedor:",j),j}}async function w(b){if(!e)throw new Error("No user logged in");if(!(r!=null&&r.isSeller))throw new Error("User is not a seller");const T=mt(Ve,"users",e.uid);try{return await rr(T,b,{merge:!0}),i(j=>({...j,...b})),!0}catch(j){throw console.error("Error al actualizar tienda:",j),j}}const N={usuario:e,usuarioInfo:r,login:d,signup:u,logout:f,actualizarUsuarioInfo:g,subirImagen:y,convertirseEnVendedor:x,actualizarTienda:w};return a.jsx(GC.Provider,{value:N,children:!o&&t})}const XC=E.createContext(),hu=()=>{const t=E.useContext(XC);if(!t)throw new Error("useTheme debe usarse dentro de ThemeProvider");return t},n7=({children:t})=>{const[e,n]=E.useState(()=>{try{return localStorage.getItem("pcu-theme")||"light"}catch{return"light"}});E.useEffect(()=>{const o=document.documentElement;e==="dark"?(o.classList.add("dark"),o.classList.add("dark-theme")):(o.classList.remove("dark"),o.classList.remove("dark-theme"));try{localStorage.setItem("pcu-theme",e)}catch(c){console.error("Error guardando tema:",c)}},[e]);const i={theme:e,toggleTheme:()=>{n(o=>o==="light"?"dark":"light")},isDark:e==="dark",isLight:e==="light"};return a.jsx(XC.Provider,{value:i,children:t})},YC=(t=!1)=>{const[e,n]=E.useState([]),[r,i]=E.useState(!0),[o,c]=E.useState(null),[u,d]=E.useState(0);return E.useEffect(()=>{const f=()=>{d(g=>g+1)};return window.addEventListener("productSaved",f),()=>{window.removeEventListener("productSaved",f)}},[]),E.useEffect(()=>{(async()=>{try{let g;return t?g=pn($t(Ve,"productos"),Ca("fechaCreacion","desc")):g=pn($t(Ve,"productos"),Pr("activo","==",!0),Ca("fechaCreacion","desc")),Bn(g,x=>{const w=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),N=[];x.docs.forEach(b=>{!w.includes(b.id)&&b.exists()&&N.push({id:b.id,...b.data()})}),n(N),i(!1)},x=>{console.error("Error fetching products:",x),c(x.message),i(!1)})}catch(g){console.error("Error setting up products listener:",g),c(g.message),i(!1)}})()},[t,u]),{products:e,loading:r,error:o}},QC=t=>{const[e,n]=E.useState([]),[r,i]=E.useState(!0),[o,c]=E.useState(null),[u,d]=E.useState(0);return E.useEffect(()=>{const f=y=>{y.key==="phantomProducts"&&d(x=>x+1)},g=()=>{d(y=>y+1)};return window.addEventListener("storage",f),window.addEventListener("productSaved",g),()=>{window.removeEventListener("storage",f),window.removeEventListener("productSaved",g)}},[]),E.useEffect(()=>{(async()=>{try{let g;return!t||t===""||t==="todos"?g=pn($t(Ve,"productos"),Pr("activo","==",!0),Ca("fechaCreacion","desc")):g=pn($t(Ve,"productos"),Pr("categoria","==",t),Pr("activo","==",!0)),Bn(g,x=>{const w=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),N=[];x.docs.forEach(T=>{!w.includes(T.id)&&T.exists()&&N.push({id:T.id,...T.data()})});const b=t&&t!=="todos"?N.sort((T,j)=>{var L,z,q,D;const R=((z=(L=T.fechaCreacion)==null?void 0:L.toDate)==null?void 0:z.call(L))||new Date(0);return(((D=(q=j.fechaCreacion)==null?void 0:q.toDate)==null?void 0:D.call(q))||new Date(0))-R}):N;n(b),i(!1)},x=>{console.error("Error fetching products by category:",x),c(x.message),i(!1)})}catch(g){console.error("Error setting up products by category listener:",g),c(g.message),i(!1)}})()},[t,u]),{products:e,loading:r,error:o}},r7=t=>{const[e,n]=E.useState(null),[r,i]=E.useState(!0),[o,c]=E.useState(null);return E.useEffect(()=>{if(!t){n(null),i(!1);return}let u=null,d=null,f=!1;i(!0),c(null);const g=w=>(w||"").toLowerCase().replace(/[^a-z0-9]/g,""),y=w=>{try{const N=mt(Ve,"productos",w);return Bn(N,b=>{b.exists()?(n({id:b.id,...b.data()}),c(null),i(!1)):(c("Producto no encontrado"),n(null),i(!1))},b=>{c((b==null?void 0:b.message)||"Error al cargar el producto"),i(!1)})}catch{return c("Error al suscribirse al producto"),i(!1),null}},x=async()=>{if(!f){f=!0;try{const w=pn($t(Ve,"productos"),Pr("slug","==",t),Op(1)),N=await Ji(w);if(!N.empty){const A=N.docs[0].id;d=y(A);return}const T=(await Ji($t(Ve,"productos"))).docs.map(A=>({id:A.id,...A.data()})),j=g(t),R=T.find(A=>g(A.slug||"")===j||g(A.nombre||"")===j||A.id===t);R?d=y(R.id):(c("Producto no encontrado"),n(null),i(!1))}catch{c("Error al cargar el producto"),n(null),i(!1)}}};try{const w=mt(Ve,"productos",t);u=Bn(w,N=>{N.exists()?(n({id:N.id,...N.data()}),c(null),i(!1)):x()},N=>{x()})}catch{x()}return()=>{typeof u=="function"&&u(),typeof d=="function"&&d()}},[t]),{product:e,loading:r,error:o}},e1=()=>{const[t,e]=E.useState([]),[n,r]=E.useState(!0),[i,o]=E.useState(null);return E.useEffect(()=>{(async()=>{try{const u=pn($t(Ve,"categorias"),Pr("activa","==",!0),Ca("orden","asc"));return Bn(u,f=>{const g=f.docs.map(y=>({id:y.id,...y.data()}));e(g),r(!1)},f=>{console.error("Error fetching categories:",f),o(f.message),r(!1)})}catch(u){console.error("Error setting up categories listener:",u),o(u.message),r(!1)}})()},[]),{categories:t,loading:n,error:i}},i7=()=>{const[t,e]=E.useState({}),[n,r]=E.useState([]),[i,o]=E.useState(!0),[c,u]=E.useState(null);return E.useEffect(()=>{let d=null,f=null,g=[],y=[],x=!1,w=!1;const N=()=>{if(!(!x||!w))try{const b={};g.forEach(T=>{b[T.id]=y.filter(j=>j.categoria===T.id)}),e(b),o(!1)}catch(b){console.error("Error grouping products by categories:",b),u(b.message||"Error agrupando productos"),o(!1)}};try{const b=pn($t(Ve,"categorias"),Pr("activa","==",!0),Ca("orden","asc"));d=Bn(b,j=>{g=j.docs.map(R=>({id:R.id,...R.data()})),r(g),x=!0,N()},j=>{console.error("Error fetching categories (rt):",j),u(j.message),o(!1)});const T=pn($t(Ve,"productos"),Pr("activo","==",!0),Ca("fechaCreacion","desc"));f=Bn(T,j=>{const R=JSON.parse(localStorage.getItem("phantomProducts")||"[]");y=[],j.docs.forEach(A=>{!R.includes(A.id)&&A.exists()&&y.push({id:A.id,...A.data()})}),w=!0,N()},j=>{console.error("Error fetching products (rt):",j),u(j.message),o(!1)})}catch(b){console.error("Error setting up realtime listeners:",b),u(b.message),o(!1)}return()=>{typeof d=="function"&&d(),typeof f=="function"&&f()}},[]),{productsByCategory:t,categories:n,loading:i,error:c}},s7=(t,e="")=>{const[n,r]=E.useState([]),[i,o]=E.useState(!1),[c,u]=E.useState(null);return E.useEffect(()=>{if(!t||t.length<2){r([]);return}const f=setTimeout(async()=>{o(!0);try{let g=pn($t(Ve,"productos"),Pr("activo","==",!0));e&&(g=pn(g,Pr("categoria","==",e)));const y=await Ji(g),x=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),w=[];y.docs.forEach(T=>{!x.includes(T.id)&&T.exists()&&w.push({id:T.id,...T.data()})});const N=t.toLowerCase(),b=w.filter(T=>{var j,R,A,L;return((j=T.nombre)==null?void 0:j.toLowerCase().includes(N))||((R=T.descripcion)==null?void 0:R.toLowerCase().includes(N))||((A=T.empresa)==null?void 0:A.toLowerCase().includes(N))||((L=T.etiquetas)==null?void 0:L.some(z=>z.toLowerCase().includes(N)))});r(b)}catch(g){console.error("Error searching products:",g),u(g.message)}finally{o(!1)}},300);return()=>clearTimeout(f)},[t,e]),{results:n,loading:i,error:c}};var JC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dk=si.createContext&&si.createContext(JC),a7=["attr","size","title"];function o7(t,e){if(t==null)return{};var n=l7(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zm(){return zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zm.apply(this,arguments)}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){c7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c7(t,e,n){return e=u7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u7(t){var e=d7(t,"string");return typeof e=="symbol"?e:e+""}function d7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZC(t){return t&&t.map((e,n)=>si.createElement(e.tag,Bm({key:n},e.attr),ZC(e.child)))}function Ct(t){return e=>si.createElement(h7,zm({attr:Bm({},t.attr)},e),ZC(t.child))}function h7(t){var e=n=>{var{attr:r,size:i,title:o}=t,c=o7(t,a7),u=i||n.size||"1em",d;return n.className&&(d=n.className),t.className&&(d=(d?d+" ":"")+t.className),si.createElement("svg",zm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:d,style:Bm(Bm({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&si.createElement("title",null,o),t.children)};return dk!==void 0?si.createElement(dk.Consumer,null,n=>e(n)):e(JC)}function Hm(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(t)}function f7(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(t)}function m7(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function p7(t){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function g7(t){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function y7(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function t1(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function x7(t){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function fh(t){return Ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function v7(t){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 32H32C14.33 32 0 46.33 0 64v384c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM176 327.88V344c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-16.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V152c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v16.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07zM416 312c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h112c4.42 0 8 3.58 8 8v16zm160 0c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-96c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h272c4.42 0 8 3.58 8 8v16z"},child:[]}]})(t)}function ex(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(t)}function Wm(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function b7(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(t)}function W0(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function ej(t){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function w7(t){return Ct({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(t)}function _7(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 216v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-80c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zM125.333 32H24C10.745 32 0 42.745 0 56v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zm80 448H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm-24-424v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24zm24 264H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24z"},child:[]}]})(t)}function im(t){return Ct({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function tj(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function fk(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function k7(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(t)}function E7(t){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function nj(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function N7(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"},child:[]}]})(t)}const al=t=>t?t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",S7=(t,e)=>{if(!e)return{coincide:!1,score:0};const n=al(e),r=n.split(" ").filter(Boolean),i=al(t.nombre||""),o=al(t.descripcion||""),c=al(t.categoria||""),u=al(t.empresa||t.marca||"");let d=0,f=0;return i===n?{coincide:!0,score:1e3}:i.startsWith(n)?{coincide:!0,score:900}:i.includes(n)?{coincide:!0,score:800}:u.includes(n)?{coincide:!0,score:700}:c.includes(n)?{coincide:!0,score:600}:o.includes(n)?{coincide:!0,score:500}:(r.forEach(y=>{i.includes(y)&&(d+=100,f++),u.includes(y)&&(d+=70,f++),c.includes(y)&&(d+=50,f++),o.includes(y)&&(d+=20,f++)}),{coincide:f>0||d>0,score:d>0?d:10})},mk=E.forwardRef(({onClose:t,placeholder:e="Buscar en pcu.com.do"},n)=>{const[r,i]=E.useState(""),[o,c]=E.useState([]),[u,d]=E.useState(!1),[f,g]=E.useState([]),[y,x]=E.useState([]),[w,N]=E.useState("todas"),[b,T]=E.useState(!1),j=E.useRef(null),R=E.useRef(null),A=ai(),{isDark:L}=hu(),{results:z,loading:q}=s7(r),{products:D}=YC(),M=E.useMemo(()=>{const ne=new Set;return(D||[]).forEach(we=>{we.categoria&&ne.add(we.categoria)}),Array.from(ne).sort()},[D]);E.useEffect(()=>{const ne=JSON.parse(localStorage.getItem("historialBusquedas")||"[]");g(ne.slice(0,5))},[]),E.useEffect(()=>{if(!r.trim()){c([]),x([]);return}d(!0);let ne=z.map(ee=>{const{coincide:ae,score:ge}=S7(ee,r);return{...ee,score:ge,coincide:ae}}).filter(ee=>ee.coincide);w!=="todas"&&(ne=ne.filter(ee=>al(ee.categoria||"")===al(w))),ne=ne.sort((ee,ae)=>ae.score-ee.score).slice(0,8),c(ne);const we=[];ne.forEach(ee=>{const ae=ee.nombre;ae&&!we.includes(ae)&&we.push(ae)});const Ee=new Set;ne.forEach(ee=>{ee.categoria&&Ee.add(ee.categoria)}),Ee.forEach(ee=>{const ae=`${r} en ${ee}`;we.includes(ae)||we.push(ae)}),x(we.slice(0,8))},[r,z,w]),E.useEffect(()=>{const ne=we=>{j.current&&!j.current.contains(we.target)&&d(!1),R.current&&!R.current.contains(we.target)&&T(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[]);const P=ne=>{if(!ne.trim())return;const we=JSON.parse(localStorage.getItem("historialBusquedas")||"[]"),Ee=[ne,...we.filter(ee=>ee!==ne)].slice(0,10);localStorage.setItem("historialBusquedas",JSON.stringify(Ee)),g(Ee.slice(0,5))},S=ne=>{if(ne.preventDefault(),r.trim()){let we=r.trim();w!=="todas"&&(we=`${r.trim()} en ${w}`),P(we),A(`/buscar?q=${encodeURIComponent(we)}`),i(""),c([]),x([]),d(!1),t&&t()}},F=ne=>{P(ne.nombre.trim()),A(`/producto/${ne.id}`),i(""),c([]),x([]),d(!1),t&&t()},$=ne=>{P(ne),ne.includes(" en ")?A(`/buscar?q=${encodeURIComponent(ne)}`):A(`/buscar?q=${encodeURIComponent(ne)}`),i(""),c([]),x([]),d(!1),t&&t()},I=ne=>{i(ne)},re=(ne,we)=>{we.stopPropagation();const ee=JSON.parse(localStorage.getItem("historialBusquedas")||"[]").filter(ae=>ae!==ne);localStorage.setItem("historialBusquedas",JSON.stringify(ee)),g(ee.slice(0,5))};return a.jsxs("div",{className:"relative w-full",ref:j,children:[a.jsxs("form",{onSubmit:S,className:"flex w-full gap-0",children:[a.jsxs("div",{className:"relative",ref:R,children:[a.jsxs("button",{type:"button",onClick:()=>T(!b),className:"h-full px-2.5 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-l-md text-[11px] font-medium text-gray-700 dark:text-gray-300 transition flex items-center gap-1.5 min-w-[70px] max-w-[110px]",children:[a.jsx("span",{className:"truncate flex-1",children:w==="todas"?"Todos":w}),a.jsx("span",{className:"text-[9px] flex-shrink-0",children:""})]}),b&&a.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 max-h-96 overflow-y-auto border border-gray-300 dark:border-gray-700 rounded-md shadow-2xl z-[10000]",style:{backgroundColor:L?"#1f2937":"#ffffff",opacity:1},children:[a.jsxs("button",{type:"button",onClick:()=>{N("todas"),T(!1)},className:`w-full text-left px-4 py-2.5 text-sm transition ${w==="todas"?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200 font-semibold":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[w==="todas"&&" ","Todos"]}),M.map(ne=>a.jsxs("button",{type:"button",onClick:()=>{N(ne),T(!1)},className:`w-full text-left px-4 py-2.5 text-sm transition ${w===ne?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200 font-semibold":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[w===ne&&" ",ne]},ne))]})]}),a.jsxs("div",{className:"flex-grow relative",children:[a.jsx(W0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500"}),a.jsx("input",{type:"text",ref:n,value:r,onChange:ne=>i(ne.target.value),onFocus:()=>d(!0),placeholder:e,className:"w-full border-y border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"11px"},autoComplete:"off"})]}),a.jsx("button",{type:"submit",className:"w-12 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-r-md transition flex items-center justify-center",title:"Buscar",children:a.jsx(W0,{className:"text-sm"})})]}),u&&a.jsxs("div",{className:"search-dropdown-scroll absolute z-[9999] w-full border border-gray-300 dark:border-gray-700 mt-1 rounded-md shadow-xl overflow-y-auto",style:{backgroundColor:L?"#111827":"#ffffff",opacity:1,backdropFilter:"none",WebkitBackdropFilter:"none",maxHeight:"min(80vh, 700px)",scrollBehavior:"smooth",overscrollBehavior:"contain"},children:[q&&a.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Buscando..."]}),!r.trim()&&f.length>0&&a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:"Bsquedas recientes"}),f.map((ne,we)=>a.jsxs("div",{onClick:()=>I(ne),className:"px-4 py-3.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center justify-between group transition active:bg-gray-200 dark:active:bg-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(y7,{className:"text-gray-400 dark:text-gray-500 text-sm"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:ne})]}),a.jsx("button",{onClick:Ee=>re(ne,Ee),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition",children:a.jsx(im,{className:"text-xs"})})]},we))]}),r.trim()&&w!=="todas"&&a.jsx("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900 border-b border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:["Buscando en: ",w]}),a.jsx("button",{onClick:()=>N("todas"),className:"ml-auto text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 font-medium",children:" Todos"})]})}),r.trim()&&y.length>0&&a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:["Sugerencias (",y.length,")"]}),y.map((ne,we)=>a.jsxs("div",{onClick:()=>$(ne),className:"px-4 py-3.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-3 transition group active:bg-gray-200 dark:active:bg-gray-600",children:[a.jsx(W0,{className:"text-gray-400 dark:text-gray-500 text-sm flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium group-hover:text-blue-600 dark:group-hover:text-blue-400 break-words",children:ne})]},we))]}),r.trim()&&!q&&o.length===0&&a.jsxs("div",{className:"px-4 py-12 text-center",children:[a.jsx("div",{className:"text-5xl mb-3",children:""}),a.jsx("p",{className:"text-base font-medium text-gray-600 dark:text-gray-400",children:"No encontramos resultados"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Intenta con otras palabras"})]}),r.trim()&&!q&&o.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:["Productos (",o.length,")"]}),o.map(ne=>a.jsx("div",{onClick:()=>F(ne),className:"px-4 py-4 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition active:bg-gray-200 dark:active:bg-gray-600",children:a.jsxs("div",{className:"flex items-center gap-3",children:[ne.imagen&&a.jsx("img",{src:ne.imagen,alt:ne.nombre,className:"w-14 h-14 object-cover rounded border border-gray-200 dark:border-gray-600 flex-shrink-0",loading:"lazy"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-base text-gray-900 dark:text-gray-100 line-clamp-2",children:ne.nombre}),a.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[ne.empresa&&a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:ne.empresa}),ne.categoria&&a.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:[" ",ne.categoria]})]}),ne.precio&&a.jsxs("div",{className:"text-base font-bold text-blue-600 dark:text-blue-400 mt-1.5",children:["RD$",ne.precio.toLocaleString()]})]})]})},ne.id))]})]})]})}),n1=E.createContext({});function r1(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const i1=typeof window<"u",rj=i1?E.useLayoutEffect:E.useEffect,$p=E.createContext(null);function s1(t,e){t.indexOf(e)===-1&&t.push(e)}function a1(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ja=(t,e,n)=>n>e?e:n<t?t:n;let o1=()=>{};const Aa={},ij=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function sj(t){return typeof t=="object"&&t!==null}const aj=t=>/^0[^.\s]+$/u.test(t);function l1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Qi=t=>t,T7=(t,e)=>n=>e(t(n)),mh=(...t)=>t.reduce(T7),Md=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class c1{constructor(){this.subscriptions=[]}add(e){return s1(this.subscriptions,e),()=>a1(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ws=t=>t*1e3,qs=t=>t/1e3;function oj(t,e){return e?t*(1e3/e):0}const lj=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,C7=1e-7,j7=12;function A7(t,e,n,r,i){let o,c,u=0;do c=e+(n-e)/2,o=lj(c,r,i)-t,o>0?n=c:e=c;while(Math.abs(o)>C7&&++u<j7);return c}function ph(t,e,n,r){if(t===e&&n===r)return Qi;const i=o=>A7(o,0,1,t,n);return o=>o===0||o===1?o:lj(i(o),e,r)}const cj=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uj=t=>e=>1-t(1-e),dj=ph(.33,1.53,.69,.99),u1=uj(dj),hj=cj(u1),fj=t=>(t*=2)<1?.5*u1(t):.5*(2-Math.pow(2,-10*(t-1))),d1=t=>1-Math.sin(Math.acos(t)),mj=uj(d1),pj=cj(d1),I7=ph(.42,0,1,1),P7=ph(0,0,.58,1),gj=ph(.42,0,.58,1),R7=t=>Array.isArray(t)&&typeof t[0]!="number",yj=t=>Array.isArray(t)&&typeof t[0]=="number",D7={linear:Qi,easeIn:I7,easeInOut:gj,easeOut:P7,circIn:d1,circInOut:pj,circOut:mj,backIn:u1,backInOut:hj,backOut:dj,anticipate:fj},M7=t=>typeof t=="string",pk=t=>{if(yj(t)){o1(t.length===4);const[e,n,r,i]=t;return ph(e,n,r,i)}else if(M7(t))return D7[t];return t},Pf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],gk={value:null};function O7(t,e){let n=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function f(y){c.has(y)&&(g.schedule(y),t()),d++,y(u)}const g={schedule:(y,x=!1,w=!1)=>{const b=w&&i?n:r;return x&&c.add(y),b.has(y)||b.add(y),y},cancel:y=>{r.delete(y),c.delete(y)},process:y=>{if(u=y,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(f),e&&gk.value&&gk.value.frameloop[e].push(d),d=0,n.clear(),i=!1,o&&(o=!1,g.process(y))}};return g}const L7=40;function xj(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=Pf.reduce((A,L)=>(A[L]=O7(o,e?L:void 0),A),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:g,update:y,preRender:x,render:w,postRender:N}=c,b=()=>{const A=Aa.useManualTiming?i.timestamp:performance.now();n=!1,Aa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(A-i.timestamp,L7),1)),i.timestamp=A,i.isProcessing=!0,u.process(i),d.process(i),f.process(i),g.process(i),y.process(i),x.process(i),w.process(i),N.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},T=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:Pf.reduce((A,L)=>{const z=c[L];return A[L]=(q,D=!1,M=!1)=>(n||T(),z.schedule(q,D,M)),A},{}),cancel:A=>{for(let L=0;L<Pf.length;L++)c[Pf[L]].cancel(A)},state:i,steps:c}}const{schedule:Nn,cancel:jo,state:Cr,steps:q0}=xj(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qi,!0);let sm;function V7(){sm=void 0}const wi={now:()=>(sm===void 0&&wi.set(Cr.isProcessing||Aa.useManualTiming?Cr.timestamp:performance.now()),sm),set:t=>{sm=t,queueMicrotask(V7)}},vj=t=>e=>typeof e=="string"&&e.startsWith(t),h1=vj("--"),F7=vj("var(--"),f1=t=>F7(t)?U7.test(t.split("/*")[0].trim()):!1,U7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Od={...fu,transform:t=>ja(0,1,t)},Rf={...fu,default:1},pd=t=>Math.round(t*1e5)/1e5,m1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $7(t){return t==null}const z7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,p1=(t,e)=>n=>!!(typeof n=="string"&&z7.test(n)&&n.startsWith(t)||e&&!$7(n)&&Object.prototype.hasOwnProperty.call(n,e)),bj=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,c,u]=r.match(m1);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},B7=t=>ja(0,255,t),G0={...fu,transform:t=>Math.round(B7(t))},hl={test:p1("rgb","red"),parse:bj("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+G0.transform(t)+", "+G0.transform(e)+", "+G0.transform(n)+", "+pd(Od.transform(r))+")"};function H7(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const tx={test:p1("#"),parse:H7,transform:hl.transform},gh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ao=gh("deg"),Gs=gh("%"),wt=gh("px"),W7=gh("vh"),q7=gh("vw"),yk={...Gs,parse:t=>Gs.parse(t)/100,transform:t=>Gs.transform(t*100)},Rc={test:p1("hsl","hue"),parse:bj("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Gs.transform(pd(e))+", "+Gs.transform(pd(n))+", "+pd(Od.transform(r))+")"},nr={test:t=>hl.test(t)||tx.test(t)||Rc.test(t),parse:t=>hl.test(t)?hl.parse(t):Rc.test(t)?Rc.parse(t):tx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?hl.transform(t):Rc.transform(t),getAnimatableNone:t=>{const e=nr.parse(t);return e.alpha=0,nr.transform(e)}},G7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function K7(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(m1))==null?void 0:e.length)||0)+(((n=t.match(G7))==null?void 0:n.length)||0)>0}const wj="number",_j="color",X7="var",Y7="var(",xk="${}",Q7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ld(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const u=e.replace(Q7,d=>(nr.test(d)?(r.color.push(o),i.push(_j),n.push(nr.parse(d))):d.startsWith(Y7)?(r.var.push(o),i.push(X7),n.push(d)):(r.number.push(o),i.push(wj),n.push(parseFloat(d))),++o,xk)).split(xk);return{values:n,split:u,indexes:r,types:i}}function kj(t){return Ld(t).values}function Ej(t){const{split:e,types:n}=Ld(t),r=e.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],i[c]!==void 0){const u=n[c];u===wj?o+=pd(i[c]):u===_j?o+=nr.transform(i[c]):o+=i[c]}return o}}const J7=t=>typeof t=="number"?0:nr.test(t)?nr.getAnimatableNone(t):t;function Z7(t){const e=kj(t);return Ej(t)(e.map(J7))}const Ao={test:K7,parse:kj,createTransformer:Ej,getAnimatableNone:Z7};function K0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,c=0;if(!e)i=o=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;i=K0(d,u,t+1/3),o=K0(d,u,t),c=K0(d,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function qm(t,e){return n=>n>0?e:t}const Rn=(t,e,n)=>t+(e-t)*n,X0=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},tL=[tx,hl,Rc],nL=t=>tL.find(e=>e.test(t));function vk(t){const e=nL(t);if(!e)return!1;let n=e.parse(t);return e===Rc&&(n=eL(n)),n}const bk=(t,e)=>{const n=vk(t),r=vk(e);if(!n||!r)return qm(t,e);const i={...n};return o=>(i.red=X0(n.red,r.red,o),i.green=X0(n.green,r.green,o),i.blue=X0(n.blue,r.blue,o),i.alpha=Rn(n.alpha,r.alpha,o),hl.transform(i))},nx=new Set(["none","hidden"]);function rL(t,e){return nx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function iL(t,e){return n=>Rn(t,e,n)}function g1(t){return typeof t=="number"?iL:typeof t=="string"?f1(t)?qm:nr.test(t)?bk:oL:Array.isArray(t)?Nj:typeof t=="object"?nr.test(t)?bk:sL:qm}function Nj(t,e){const n=[...t],r=n.length,i=t.map((o,c)=>g1(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)n[c]=i[c](o);return n}}function sL(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=g1(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function aL(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],c=t.indexes[o][r[o]],u=t.values[c]??0;n[i]=u,r[o]++}return n}const oL=(t,e)=>{const n=Ao.createTransformer(e),r=Ld(t),i=Ld(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?nx.has(t)&&!i.values.length||nx.has(e)&&!r.values.length?rL(t,e):mh(Nj(aL(r,i),i.values),n):qm(t,e)};function Sj(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Rn(t,e,n):g1(t)(t,e)}const lL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Nn.update(e,n),stop:()=>jo(e),now:()=>Cr.isProcessing?Cr.timestamp:wi.now()}},Tj=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gm=2e4;function y1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Gm;)e+=n,r=t.next(e);return e>=Gm?1/0:e}function cL(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(y1(r),Gm);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:qs(i)}}const uL=5;function Cj(t,e,n){const r=Math.max(e-uL,0);return oj(n-t(r),e-r)}const zn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Y0=.001;function dL({duration:t=zn.duration,bounce:e=zn.bounce,velocity:n=zn.velocity,mass:r=zn.mass}){let i,o,c=1-e;c=ja(zn.minDamping,zn.maxDamping,c),t=ja(zn.minDuration,zn.maxDuration,qs(t)),c<1?(i=f=>{const g=f*c,y=g*t,x=g-n,w=rx(f,c),N=Math.exp(-y);return Y0-x/w*N},o=f=>{const y=f*c*t,x=y*n+n,w=Math.pow(c,2)*Math.pow(f,2)*t,N=Math.exp(-y),b=rx(Math.pow(f,2),c);return(-i(f)+Y0>0?-1:1)*((x-w)*N)/b}):(i=f=>{const g=Math.exp(-f*t),y=(f-n)*t+1;return-Y0+g*y},o=f=>{const g=Math.exp(-f*t),y=(n-f)*(t*t);return g*y});const u=5/t,d=fL(i,o,u);if(t=Ws(t),isNaN(d))return{stiffness:zn.stiffness,damping:zn.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:c*2*Math.sqrt(r*f),duration:t}}}const hL=12;function fL(t,e,n){let r=n;for(let i=1;i<hL;i++)r=r-t(r)/e(r);return r}function rx(t,e){return t*Math.sqrt(1-e*e)}const mL=["duration","bounce"],pL=["stiffness","damping","mass"];function wk(t,e){return e.some(n=>t[n]!==void 0)}function gL(t){let e={velocity:zn.velocity,stiffness:zn.stiffness,damping:zn.damping,mass:zn.mass,isResolvedFromDuration:!1,...t};if(!wk(t,pL)&&wk(t,mL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*ja(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:zn.mass,stiffness:i,damping:o}}else{const n=dL(t);e={...e,...n,mass:zn.mass},e.isResolvedFromDuration=!0}return e}function Km(t=zn.visualDuration,e=zn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:y,velocity:x,isResolvedFromDuration:w}=gL({...n,velocity:-qs(n.velocity||0)}),N=x||0,b=f/(2*Math.sqrt(d*g)),T=c-o,j=qs(Math.sqrt(d/g)),R=Math.abs(T)<5;r||(r=R?zn.restSpeed.granular:zn.restSpeed.default),i||(i=R?zn.restDelta.granular:zn.restDelta.default);let A;if(b<1){const z=rx(j,b);A=q=>{const D=Math.exp(-b*j*q);return c-D*((N+b*j*T)/z*Math.sin(z*q)+T*Math.cos(z*q))}}else if(b===1)A=z=>c-Math.exp(-j*z)*(T+(N+j*T)*z);else{const z=j*Math.sqrt(b*b-1);A=q=>{const D=Math.exp(-b*j*q),M=Math.min(z*q,300);return c-D*((N+b*j*T)*Math.sinh(M)+z*T*Math.cosh(M))/z}}const L={calculatedDuration:w&&y||null,next:z=>{const q=A(z);if(w)u.done=z>=y;else{let D=z===0?N:0;b<1&&(D=z===0?Ws(N):Cj(A,z,q));const M=Math.abs(D)<=r,P=Math.abs(c-q)<=i;u.done=M&&P}return u.value=u.done?c:q,u},toString:()=>{const z=Math.min(y1(L),Gm),q=Tj(D=>L.next(z*D).value,z,30);return z+"ms "+q},toTransition:()=>{}};return L}Km.applyToOptions=t=>{const e=cL(t,100,Km);return t.ease=e.ease,t.duration=Ws(e.duration),t.type="keyframes",t};function ix({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:u,max:d,restDelta:f=.5,restSpeed:g}){const y=t[0],x={done:!1,value:y},w=M=>u!==void 0&&M<u||d!==void 0&&M>d,N=M=>u===void 0?d:d===void 0||Math.abs(u-M)<Math.abs(d-M)?u:d;let b=n*e;const T=y+b,j=c===void 0?T:c(T);j!==T&&(b=j-y);const R=M=>-b*Math.exp(-M/r),A=M=>j+R(M),L=M=>{const P=R(M),S=A(M);x.done=Math.abs(P)<=f,x.value=x.done?j:S};let z,q;const D=M=>{w(x.value)&&(z=M,q=Km({keyframes:[x.value,N(x.value)],velocity:Cj(A,M,x.value),damping:i,stiffness:o,restDelta:f,restSpeed:g}))};return D(0),{calculatedDuration:null,next:M=>{let P=!1;return!q&&z===void 0&&(P=!0,L(M),D(M)),z!==void 0&&M>=z?q.next(M-z):(!P&&L(M),x)}}}function yL(t,e,n){const r=[],i=n||Aa.mix||Sj,o=t.length-1;for(let c=0;c<o;c++){let u=i(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||Qi:e;u=mh(d,u)}r.push(u)}return r}function xL(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(o1(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=yL(e,r,i),d=u.length,f=g=>{if(c&&g<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const x=Md(t[y],t[y+1],g);return u[y](x)};return n?g=>f(ja(t[0],t[o-1],g)):f}function vL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Md(0,e,r);t.push(Rn(n,1,i))}}function bL(t){const e=[0];return vL(e,t.length-1),e}function wL(t,e){return t.map(n=>n*e)}function _L(t,e){return t.map(()=>e||gj).splice(0,t.length-1)}function gd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=R7(r)?r.map(pk):pk(r),o={done:!1,value:e[0]},c=wL(n&&n.length===e.length?n:bL(e),t),u=xL(c,e,{ease:Array.isArray(i)?i:_L(e,i)});return{calculatedDuration:t,next:d=>(o.value=u(d),o.done=d>=t,o)}}const kL=t=>t!==null;function x1(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(kL),u=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!u||r===void 0?o[u]:r}const EL={decay:ix,inertia:ix,tween:gd,keyframes:gd,spring:Km};function jj(t){typeof t.type=="string"&&(t.type=EL[t.type])}class v1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const NL=t=>t/100;class b1 extends v1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==wi.now()&&this.tick(wi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;jj(e);const{type:n=gd,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=e;let{keyframes:u}=e;const d=n||gd;d!==gd&&typeof u[0]!="number"&&(this.mixKeyframes=mh(NL,Sj(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=y1(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:w,type:N,onUpdate:b,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?j<0:j>i;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let A=this.currentTime,L=r;if(y){const M=Math.min(this.currentTime,i)/u;let P=Math.floor(M),S=M%1;!S&&M>=1&&(S=1),S===1&&P--,P=Math.min(P,y+1),!!(P%2)&&(x==="reverse"?(S=1-S,w&&(S-=w/u)):x==="mirror"&&(L=c)),A=ja(0,1,S)*u}const z=R?{done:!1,value:g[0]}:L.next(A);o&&(z.value=o(z.value));let{done:q}=z;!R&&d!==null&&(q=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return D&&N!==ix&&(z.value=x1(g,this.options,T,this.speed)),b&&b(z.value),D&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return qs(this.calculatedDuration)}get time(){return qs(this.currentTime)}set time(e){var n;e=Ws(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(wi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=qs(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=lL,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(wi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function SL(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const fl=t=>t*180/Math.PI,sx=t=>{const e=fl(Math.atan2(t[1],t[0]));return ax(e)},TL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:sx,rotateZ:sx,skewX:t=>fl(Math.atan(t[1])),skewY:t=>fl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ax=t=>(t=t%360,t<0&&(t+=360),t),_k=sx,kk=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Ek=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),CL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:kk,scaleY:Ek,scale:t=>(kk(t)+Ek(t))/2,rotateX:t=>ax(fl(Math.atan2(t[6],t[5]))),rotateY:t=>ax(fl(Math.atan2(-t[2],t[0]))),rotateZ:_k,rotate:_k,skewX:t=>fl(Math.atan(t[4])),skewY:t=>fl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ox(t){return t.includes("scale")?1:0}function lx(t,e){if(!t||t==="none")return ox(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=CL,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=TL,i=u}if(!i)return ox(e);const o=r[e],c=i[1].split(",").map(AL);return typeof o=="function"?o(c):c[o]}const jL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return lx(n,e)};function AL(t){return parseFloat(t.trim())}const mu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pu=new Set(mu),Nk=t=>t===fu||t===wt,IL=new Set(["x","y","z"]),PL=mu.filter(t=>!IL.has(t));function RL(t){const e=[];return PL.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const vl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>lx(e,"x"),y:(t,{transform:e})=>lx(e,"y")};vl.translateX=vl.x;vl.translateY=vl.y;const bl=new Set;let cx=!1,ux=!1,dx=!1;function Aj(){if(ux){const t=Array.from(bl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=RL(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,c])=>{var u;(u=r.getValue(o))==null||u.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ux=!1,cx=!1,bl.forEach(t=>t.complete(dx)),bl.clear()}function Ij(){bl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ux=!0)})}function DL(){dx=!0,Ij(),Aj(),dx=!1}class w1{constructor(e,n,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(bl.add(this),cx||(cx=!0,Nn.read(Ij),Nn.resolveKeyframes(Aj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}SL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bl.delete(this)}cancel(){this.state==="scheduled"&&(bl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ML=t=>t.startsWith("--");function OL(t,e,n){ML(e)?t.style.setProperty(e,n):t.style[e]=n}const LL=l1(()=>window.ScrollTimeline!==void 0),VL={};function FL(t,e){const n=l1(t);return()=>VL[e]??n()}const Pj=FL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Sk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sd([0,.65,.55,1]),circOut:sd([.55,0,1,.45]),backIn:sd([.31,.01,.66,-.59]),backOut:sd([.33,1.53,.69,.99])};function Rj(t,e){if(t)return typeof t=="function"?Pj()?Tj(t,e):"ease-out":yj(t)?sd(t):Array.isArray(t)?t.map(n=>Rj(n,e)||Sk.easeOut):Sk[t]}function UL(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:u="easeOut",times:d}={},f=void 0){const g={[e]:n};d&&(g.offset=d);const y=Rj(u,i);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),t.animate(g,x)}function Dj(t){return typeof t=="function"&&"applyToOptions"in t}function $L({type:t,...e}){return Dj(t)&&Pj()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zL extends v1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,o1(typeof e.type!="string");const f=$L(e);this.animation=UL(n,r,i,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=x1(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):OL(n,r,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return qs(Number(e))}get time(){return qs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ws(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&LL()?(this.animation.timeline=e,Qi):n(this)}}const Mj={anticipate:fj,backInOut:hj,circInOut:pj};function BL(t){return t in Mj}function HL(t){typeof t.ease=="string"&&BL(t.ease)&&(t.ease=Mj[t.ease])}const Tk=10;class WL extends zL{constructor(e){HL(e),jj(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new b1({...c,autoplay:!1}),d=Ws(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-Tk).value,u.sample(d).value,Tk),u.stop()}}const Ck=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ao.test(t)||t==="0")&&!t.startsWith("url("));function qL(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function GL(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=Ck(i,e),u=Ck(o,e);return!c||!u?!1:qL(t)||(n==="spring"||Dj(n))&&r}function _1(t){return sj(t)&&"offsetHeight"in t}const KL=new Set(["opacity","clipPath","filter","transform"]),XL=l1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function YL(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:c}=t;if(!_1((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return XL()&&n&&KL.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const QL=40;class JL extends v1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:u,name:d,motionValue:f,element:g,...y}){var N;super(),this.stop=()=>{var b,T;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=wi.now();const x={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:c,name:d,motionValue:f,element:g,...y},w=(g==null?void 0:g.KeyframeResolver)||w1;this.keyframeResolver=new w(u,(b,T,j)=>this.onKeyframesResolved(b,T,x,!j),d,f,g),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:u,delay:d,isHandoff:f,onUpdate:g}=r;this.resolvedAt=wi.now(),GL(e,o,c,u)||((Aa.instantAnimations||!d)&&(g==null||g(x1(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>QL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!f&&YL(x)?new WL({...x,element:x.motionValue.owner.current}):new b1(x);w.finished.then(()=>this.notifyFinished()).catch(Qi),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),DL()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ZL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eV(t){const e=ZL.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Oj(t,e,n=1){const[r,i]=eV(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return ij(c)?parseFloat(c):c}return f1(i)?Oj(i,e,n+1):i}function k1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Lj=new Set(["width","height","top","left","right","bottom",...mu]),tV={test:t=>t==="auto",parse:t=>t},Vj=t=>e=>e.test(t),Fj=[fu,wt,Gs,ao,q7,W7,tV],jk=t=>Fj.find(Vj(t));function nV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aj(t):!0}const rV=new Set(["brightness","contrast","saturate","opacity"]);function iV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(m1)||[];if(!r)return t;const i=n.replace(r,"");let o=rV.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const sV=/\b([a-z-]*)\(.*?\)/gu,hx={...Ao,getAnimatableNone:t=>{const e=t.match(sV);return e?e.map(iV).join(" "):t}},Ak={...fu,transform:Math.round},aV={rotate:ao,rotateX:ao,rotateY:ao,rotateZ:ao,scale:Rf,scaleX:Rf,scaleY:Rf,scaleZ:Rf,skew:ao,skewX:ao,skewY:ao,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:Od,originX:yk,originY:yk,originZ:wt},E1={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,top:wt,right:wt,bottom:wt,left:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,backgroundPositionX:wt,backgroundPositionY:wt,...aV,zIndex:Ak,fillOpacity:Od,strokeOpacity:Od,numOctaves:Ak},oV={...E1,color:nr,backgroundColor:nr,outlineColor:nr,fill:nr,stroke:nr,borderColor:nr,borderTopColor:nr,borderRightColor:nr,borderBottomColor:nr,borderLeftColor:nr,filter:hx,WebkitFilter:hx},Uj=t=>oV[t];function $j(t,e){let n=Uj(t);return n!==hx&&(n=Ao),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lV=new Set(["auto","none","0"]);function cV(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!lV.has(o)&&Ld(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=$j(n,i)}class uV extends w1{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),f1(f))){const g=Oj(f,n.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Lj.has(r)||e.length!==2)return;const[i,o]=e,c=jk(i),u=jk(o);if(c!==u)if(Nk(c)&&Nk(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else vl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||nV(e[i]))&&r.push(i);r.length&&cV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=vl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function dV(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const zj=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ik=30,hV=t=>!isNaN(parseFloat(t));class fV{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var c,u;const o=wi.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=wi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new c1);const r=this.events[e].add(n);return e==="change"?()=>{r(),Nn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=wi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ik)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ik);return oj(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jc(t,e){return new fV(t,e)}const{schedule:N1}=xj(queueMicrotask,!1),hs={x:!1,y:!1};function Bj(){return hs.x||hs.y}function mV(t){return t==="x"||t==="y"?hs[t]?null:(hs[t]=!0,()=>{hs[t]=!1}):hs.x||hs.y?null:(hs.x=hs.y=!0,()=>{hs.x=hs.y=!1})}function Hj(t,e){const n=dV(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Pk(t){return!(t.pointerType==="touch"||Bj())}function pV(t,e,n={}){const[r,i,o]=Hj(t,n),c=u=>{if(!Pk(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const g=y=>{Pk(y)&&(f(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,i)};return r.forEach(u=>{u.addEventListener("pointerenter",c,i)}),o}const Wj=(t,e)=>e?t===e?!0:Wj(t,e.parentElement):!1,S1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,gV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yV(t){return gV.has(t.tagName)||t.tabIndex!==-1}const am=new WeakSet;function Rk(t){return e=>{e.key==="Enter"&&t(e)}}function Q0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const xV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Rk(()=>{if(am.has(n))return;Q0(n,"down");const i=Rk(()=>{Q0(n,"up")}),o=()=>Q0(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Dk(t){return S1(t)&&!Bj()}function vV(t,e,n={}){const[r,i,o]=Hj(t,n),c=u=>{const d=u.currentTarget;if(!Dk(u))return;am.add(d);const f=e(d,u),g=(w,N)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),am.has(d)&&am.delete(d),Dk(w)&&typeof f=="function"&&f(w,{success:N})},y=w=>{g(w,d===window||d===document||n.useGlobalTarget||Wj(d,w.target))},x=w=>{g(w,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",x,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),_1(u)&&(u.addEventListener("focus",f=>xV(f,i)),!yV(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function qj(t){return sj(t)&&"ownerSVGElement"in t}function bV(t){return qj(t)&&t.tagName==="svg"}const Gr=t=>!!(t&&t.getVelocity),wV=[...Fj,nr,Ao],_V=t=>wV.find(Vj(t)),T1=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class kV extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=_1(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function EV({children:t,isPresent:e,anchorX:n,root:r}){const i=E.useId(),o=E.useRef(null),c=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=E.useContext(T1);return E.useInsertionEffect(()=>{const{width:d,height:f,top:g,left:y,right:x}=c.current;if(e||!o.current||!d||!f)return;const w=n==="left"?`left: ${y}`:`right: ${x}`;o.current.dataset.motionPopId=i;const N=document.createElement("style");u&&(N.nonce=u);const b=r??document.head;return b.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${g}px !important;
          }
        `),()=>{b.removeChild(N),b.contains(N)&&b.removeChild(N)}},[e]),a.jsx(kV,{isPresent:e,childRef:o,sizeRef:c,children:E.cloneElement(t,{ref:o})})}const NV=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:u,root:d})=>{const f=r1(SV),g=E.useId();let y=!0,x=E.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:i,onExitComplete:w=>{f.set(w,!0);for(const N of f.values())if(!N)return;r&&r()},register:w=>(f.set(w,!1),()=>f.delete(w))}),[n,f,r]);return o&&y&&(x={...x}),E.useMemo(()=>{f.forEach((w,N)=>f.set(N,!1))},[n]),E.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=a.jsx(EV,{isPresent:n,anchorX:u,root:d,children:t})),a.jsx($p.Provider,{value:x,children:t})};function SV(){return new Map}function Gj(t=!0){const e=E.useContext($p);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=E.useId();E.useEffect(()=>{if(t)return i(o)},[t]);const c=E.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,c]:[!0]}const Df=t=>t.key||"";function Mk(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const dn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:u="left",root:d})=>{const[f,g]=Gj(c),y=E.useMemo(()=>Mk(t),[t]),x=c&&!f?[]:y.map(Df),w=E.useRef(!0),N=E.useRef(y),b=r1(()=>new Map),[T,j]=E.useState(y),[R,A]=E.useState(y);rj(()=>{w.current=!1,N.current=y;for(let q=0;q<R.length;q++){const D=Df(R[q]);x.includes(D)?b.delete(D):b.get(D)!==!0&&b.set(D,!1)}},[R,x.length,x.join("-")]);const L=[];if(y!==T){let q=[...y];for(let D=0;D<R.length;D++){const M=R[D],P=Df(M);x.includes(P)||(q.splice(D,0,M),L.push(M))}return o==="wait"&&L.length&&(q=L),A(Mk(q)),j(y),null}const{forceRender:z}=E.useContext(n1);return a.jsx(a.Fragment,{children:R.map(q=>{const D=Df(q),M=c&&!f?!1:y===R||x.includes(D),P=()=>{if(b.has(D))b.set(D,!0);else return;let S=!0;b.forEach(F=>{F||(S=!1)}),S&&(z==null||z(),A(N.current),c&&(g==null||g()),r&&r())};return a.jsx(NV,{isPresent:M,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:d,onExitComplete:M?void 0:P,anchorX:u,children:q},D)})})},Kj=E.createContext({strict:!1}),Ok={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zc={};for(const t in Ok)Zc[t]={isEnabled:e=>Ok[t].some(n=>!!e[n])};function TV(t){for(const e in t)Zc[e]={...Zc[e],...t[e]}}const CV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||CV.has(t)}let Xj=t=>!Xm(t);function jV(t){typeof t=="function"&&(Xj=e=>e.startsWith("on")?!Xm(e):t(e))}try{jV(require("@emotion/is-prop-valid").default)}catch{}function AV(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Xj(i)||n===!0&&Xm(i)||!e&&!Xm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function IV(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const zp=E.createContext({});function Bp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Vd(t){return typeof t=="string"||Array.isArray(t)}const C1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],j1=["initial",...C1];function Hp(t){return Bp(t.animate)||j1.some(e=>Vd(t[e]))}function Yj(t){return!!(Hp(t)||t.variants)}function PV(t,e){if(Hp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vd(n)?n:void 0,animate:Vd(r)?r:void 0}}return t.inherit!==!1?e:{}}function RV(t){const{initial:e,animate:n}=PV(t,E.useContext(zp));return E.useMemo(()=>({initial:e,animate:n}),[Lk(e),Lk(n)])}function Lk(t){return Array.isArray(t)?t.join(" "):t}const DV=Symbol.for("motionComponentSymbol");function Dc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function MV(t,e,n){return E.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Dc(n)&&(n.current=r))},[e])}const A1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),OV="framerAppearId",Qj="data-"+A1(OV),Jj=E.createContext({});function LV(t,e,n,r,i){var b,T;const{visualElement:o}=E.useContext(zp),c=E.useContext(Kj),u=E.useContext($p),d=E.useContext(T1).reducedMotion,f=E.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=f.current,y=E.useContext(Jj);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&VV(f.current,n,i,y);const x=E.useRef(!1);E.useInsertionEffect(()=>{g&&x.current&&g.update(n,u)});const w=n[Qj],N=E.useRef(!!w&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,w))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,w)));return rj(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),N1.render(g.render),N.current&&g.animationState&&g.animationState.animateChanges())}),E.useEffect(()=>{g&&(!N.current&&g.animationState&&g.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,w)}),N.current=!1))}),g}function VV(t,e,n,r){const{layoutId:i,layout:o,drag:c,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Zj(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||u&&Dc(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:d,layoutRoot:f})}function Zj(t){if(t)return t.options.allowProjection!==!1?t.projection:Zj(t.parent)}function FV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&TV(t);function o(u,d){let f;const g={...E.useContext(T1),...u,layoutId:UV(u)},{isStatic:y}=g,x=RV(u),w=r(u,y);if(!y&&i1){$V();const N=zV(g);f=N.MeasureLayout,x.visualElement=LV(i,w,g,e,N.ProjectionNode)}return a.jsxs(zp.Provider,{value:x,children:[f&&x.visualElement?a.jsx(f,{visualElement:x.visualElement,...g}):null,n(i,u,MV(w,x.visualElement,d),w,y,x.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const c=E.forwardRef(o);return c[DV]=i,c}function UV({layoutId:t}){const e=E.useContext(n1).id;return e&&t!==void 0?e+"-"+t:t}function $V(t,e){E.useContext(Kj).strict}function zV(t){const{drag:e,layout:n}=Zc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Fd={};function BV(t){for(const e in t)Fd[e]=t[e],h1(e)&&(Fd[e].isCSSVariable=!0)}function e4(t,{layout:e,layoutId:n}){return pu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Fd[t]||t==="opacity")}const HV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WV=mu.length;function qV(t,e,n){let r="",i=!0;for(let o=0;o<WV;o++){const c=mu[o],u=t[c];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(c.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=zj(u,E1[c]);if(!d){i=!1;const g=HV[c]||c;r+=`${g}(${f}) `}n&&(e[c]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function I1(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let c=!1,u=!1;for(const d in e){const f=e[d];if(pu.has(d)){c=!0;continue}else if(h1(d)){i[d]=f;continue}else{const g=zj(f,E1[d]);d.startsWith("origin")?(u=!0,o[d]=g):r[d]=g}}if(e.transform||(c||n?r.transform=qV(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;r.transformOrigin=`${d} ${f} ${g}`}}const P1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function t4(t,e,n){for(const r in e)!Gr(e[r])&&!e4(r,n)&&(t[r]=e[r])}function GV({transformTemplate:t},e){return E.useMemo(()=>{const n=P1();return I1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function KV(t,e){const n=t.style||{},r={};return t4(r,n,t),Object.assign(r,GV(t,e)),r}function XV(t,e){const n={},r=KV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const YV={offset:"stroke-dashoffset",array:"stroke-dasharray"},QV={offset:"strokeDashoffset",array:"strokeDasharray"};function JV(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?YV:QV;t[o.offset]=wt.transform(-r);const c=wt.transform(e),u=wt.transform(n);t[o.array]=`${c} ${u}`}function n4(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...u},d,f,g){if(I1(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x}=t;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),i!==void 0&&JV(y,i,o,c,!1)}const r4=()=>({...P1(),attrs:{}}),i4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ZV(t,e,n,r){const i=E.useMemo(()=>{const o=r4();return n4(o,e,i4(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};t4(o,t.style,t),i.style={...o,...i.style}}return i}const eF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R1(t){return typeof t!="string"||t.includes("-")?!1:!!(eF.indexOf(t)>-1||/[A-Z]/u.test(t))}function tF(t=!1){return(n,r,i,{latestValues:o},c)=>{const d=(R1(n)?ZV:XV)(r,o,c,n),f=AV(r,typeof n=="string",t),g=n!==E.Fragment?{...f,...d,ref:i}:{},{children:y}=r,x=E.useMemo(()=>Gr(y)?y.get():y,[y]);return E.createElement(n,{...g,children:x})}}function Vk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function D1(t,e,n,r){if(typeof e=="function"){const[i,o]=Vk(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=Vk(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function om(t){return Gr(t)?t.get():t}function nF({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:rF(n,r,i,t),renderState:e()}}const s4=t=>(e,n)=>{const r=E.useContext(zp),i=E.useContext($p),o=()=>nF(t,e,r,i);return n?o():r1(o)};function rF(t,e,n,r){const i={},o=r(t,{});for(const x in o)i[x]=om(o[x]);let{initial:c,animate:u}=t;const d=Hp(t),f=Yj(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const y=g?u:c;if(y&&typeof y!="boolean"&&!Bp(y)){const x=Array.isArray(y)?y:[y];for(let w=0;w<x.length;w++){const N=D1(t,x[w]);if(N){const{transitionEnd:b,transition:T,...j}=N;for(const R in j){let A=j[R];if(Array.isArray(A)){const L=g?A.length-1:0;A=A[L]}A!==null&&(i[R]=A)}for(const R in b)i[R]=b[R]}}}return i}function M1(t,e,n){var o;const{style:r}=t,i={};for(const c in r)(Gr(r[c])||e.style&&Gr(e.style[c])||e4(c,t)||((o=n==null?void 0:n.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const iF={useVisualState:s4({scrapeMotionValuesFromProps:M1,createRenderState:P1})};function a4(t,e,n){const r=M1(t,e,n);for(const i in t)if(Gr(t[i])||Gr(e[i])){const o=mu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const sF={useVisualState:s4({scrapeMotionValuesFromProps:a4,createRenderState:r4})};function aF(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const c={...R1(r)?sF:iF,preloadedFeatures:t,useRender:tF(i),createVisualElement:e,Component:r};return FV(c)}}function Ud(t,e,n){const r=t.getProps();return D1(r,e,n!==void 0?n:r.custom,t)}const fx=t=>Array.isArray(t);function oF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Jc(n))}function lF(t){return fx(t)?t[t.length-1]||0:t}function cF(t,e){const n=Ud(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const c in o){const u=lF(o[c]);oF(t,c,u)}}function uF(t){return!!(Gr(t)&&t.add)}function mx(t,e){const n=t.getValue("willChange");if(uF(n))return n.add(e);if(!n&&Aa.WillChange){const r=new Aa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function o4(t){return t.props[Qj]}const dF=t=>t!==null;function hF(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(dF),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const fF={type:"spring",stiffness:500,damping:25,restSpeed:10},mF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),pF={type:"keyframes",duration:.8},gF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yF=(t,{keyframes:e})=>e.length>2?pF:pu.has(t)?t.startsWith("scale")?mF(e[1]):fF:gF;function xF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:u,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const O1=(t,e,n,r={},i,o)=>c=>{const u=k1(r,t)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Ws(d);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:i};xF(u)||Object.assign(g,yF(t,g)),g.duration&&(g.duration=Ws(g.duration)),g.repeatDelay&&(g.repeatDelay=Ws(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),(Aa.instantAnimations||Aa.skipAnimations)&&(y=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!o&&e.get()!==void 0){const x=hF(g.keyframes,u);if(x!==void 0){Nn.update(()=>{g.onUpdate(x),g.onComplete()});return}}return u.isSync?new b1(g):new JL(g)};function vF({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function l4(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(o=r);const d=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const y=t.getValue(g,t.latestValues[g]??null),x=u[g];if(x===void 0||f&&vF(f,g))continue;const w={delay:n,...k1(o||{},g)},N=y.get();if(N!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===N&&!w.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const j=o4(t);if(j){const R=window.MotionHandoffAnimation(j,g,Nn);R!==null&&(w.startTime=R,b=!0)}}mx(t,g),y.start(O1(g,y,x,t.shouldReduceMotion&&Lj.has(g)?{type:!1}:w,t,b));const T=y.animation;T&&d.push(T)}return c&&Promise.all(d).then(()=>{Nn.update(()=>{c&&cF(t,c)})}),d}function px(t,e,n={}){var d;const r=Ud(t,e,n.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(l4(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=i;return bF(t,e,f,g,y,x,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,g]=u==="beforeChildren"?[o,c]:[c,o];return f().then(()=>g())}else return Promise.all([o(),c(n.delay)])}function bF(t,e,n=0,r=0,i=0,o=1,c){const u=[],d=t.variantChildren.size,f=(d-1)*i,g=typeof r=="function",y=g?x=>r(x,d):o===1?(x=0)=>x*i:(x=0)=>f-x*i;return Array.from(t.variantChildren).sort(wF).forEach((x,w)=>{x.notify("AnimationStart",e),u.push(px(x,e,{...c,delay:n+(g?0:r)+y(w)}).then(()=>x.notify("AnimationComplete",e)))}),Promise.all(u)}function wF(t,e){return t.sortNodePosition(e)}function _F(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>px(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=px(t,e,n);else{const i=typeof e=="function"?Ud(t,e,n.custom):e;r=Promise.all(l4(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function c4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const kF=j1.length;function u4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?u4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<kF;n++){const r=j1[n],i=t.props[r];(Vd(i)||i===!1)&&(e[r]=i)}return e}const EF=[...C1].reverse(),NF=C1.length;function SF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>_F(t,n,r)))}function TF(t){let e=SF(t),n=Fk(),r=!0;const i=d=>(f,g)=>{var x;const y=Ud(t,g,d==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:w,transitionEnd:N,...b}=y;f={...f,...b,...N}}return f};function o(d){e=d(t)}function c(d){const{props:f}=t,g=u4(t.parent)||{},y=[],x=new Set;let w={},N=1/0;for(let T=0;T<NF;T++){const j=EF[T],R=n[j],A=f[j]!==void 0?f[j]:g[j],L=Vd(A),z=j===d?R.isActive:null;z===!1&&(N=T);let q=A===g[j]&&A!==f[j]&&L;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),R.protectedKeys={...w},!R.isActive&&z===null||!A&&!R.prevProp||Bp(A)||typeof A=="boolean")continue;const D=CF(R.prevProp,A);let M=D||j===d&&R.isActive&&!q&&L||T>N&&L,P=!1;const S=Array.isArray(A)?A:[A];let F=S.reduce(i(j),{});z===!1&&(F={});const{prevResolvedValues:$={}}=R,I={...$,...F},re=Ee=>{M=!0,x.has(Ee)&&(P=!0,x.delete(Ee)),R.needsAnimating[Ee]=!0;const ee=t.getValue(Ee);ee&&(ee.liveStyle=!1)};for(const Ee in I){const ee=F[Ee],ae=$[Ee];if(w.hasOwnProperty(Ee))continue;let ge=!1;fx(ee)&&fx(ae)?ge=!c4(ee,ae):ge=ee!==ae,ge?ee!=null?re(Ee):x.add(Ee):ee!==void 0&&x.has(Ee)?re(Ee):R.protectedKeys[Ee]=!0}R.prevProp=A,R.prevResolvedValues=F,R.isActive&&(w={...w,...F}),r&&t.blockInitialAnimation&&(M=!1),M&&(!(q&&D)||P)&&y.push(...S.map(Ee=>({animation:Ee,options:{type:j}})))}if(x.size){const T={};if(typeof f.initial!="boolean"){const j=Ud(t,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(T.transition=j.transition)}x.forEach(j=>{const R=t.getBaseTarget(j),A=t.getValue(j);A&&(A.liveStyle=!0),T[j]=R??null}),y.push({animation:T})}let b=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(y):Promise.resolve()}function u(d,f){var y;if(n[d].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(x=>{var w;return(w=x.animationState)==null?void 0:w.setActive(d,f)}),n[d].isActive=f;const g=c(d);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:c,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Fk(),r=!0}}}function CF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!c4(e,t):!1}function nl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Fk(){return{animate:nl(!0),whileInView:nl(),whileHover:nl(),whileTap:nl(),whileDrag:nl(),whileFocus:nl(),exit:nl()}}class Lo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class jF extends Lo{constructor(e){super(e),e.animationState||(e.animationState=TF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let AF=0;class IF extends Lo{constructor(){super(...arguments),this.id=AF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const PF={animation:{Feature:jF},exit:{Feature:IF}};function $d(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function yh(t){return{point:{x:t.pageX,y:t.pageY}}}const RF=t=>e=>S1(e)&&t(e,yh(e));function yd(t,e,n,r){return $d(t,e,RF(n),r)}function d4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function DF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function MF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const h4=1e-4,OF=1-h4,LF=1+h4,f4=.01,VF=0-f4,FF=0+f4;function ii(t){return t.max-t.min}function UF(t,e,n){return Math.abs(t-e)<=n}function Uk(t,e,n,r=.5){t.origin=r,t.originPoint=Rn(e.min,e.max,t.origin),t.scale=ii(n)/ii(e),t.translate=Rn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=OF&&t.scale<=LF||isNaN(t.scale))&&(t.scale=1),(t.translate>=VF&&t.translate<=FF||isNaN(t.translate))&&(t.translate=0)}function xd(t,e,n,r){Uk(t.x,e.x,n.x,r?r.originX:void 0),Uk(t.y,e.y,n.y,r?r.originY:void 0)}function $k(t,e,n){t.min=n.min+e.min,t.max=t.min+ii(e)}function $F(t,e,n){$k(t.x,e.x,n.x),$k(t.y,e.y,n.y)}function zk(t,e,n){t.min=e.min-n.min,t.max=t.min+ii(e)}function vd(t,e,n){zk(t.x,e.x,n.x),zk(t.y,e.y,n.y)}const Bk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mc=()=>({x:Bk(),y:Bk()}),Hk=()=>({min:0,max:0}),Kn=()=>({x:Hk(),y:Hk()});function Wi(t){return[t("x"),t("y")]}function J0(t){return t===void 0||t===1}function gx({scale:t,scaleX:e,scaleY:n}){return!J0(t)||!J0(e)||!J0(n)}function il(t){return gx(t)||m4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function m4(t){return Wk(t.x)||Wk(t.y)}function Wk(t){return t&&t!=="0%"}function Ym(t,e,n){const r=t-n,i=e*r;return n+i}function qk(t,e,n,r,i){return i!==void 0&&(t=Ym(t,i,r)),Ym(t,n,r)+e}function yx(t,e=0,n=1,r,i){t.min=qk(t.min,e,n,r,i),t.max=qk(t.max,e,n,r,i)}function p4(t,{x:e,y:n}){yx(t.x,e.translate,e.scale,e.originPoint),yx(t.y,n.translate,n.scale,n.originPoint)}const Gk=.999999999999,Kk=1.0000000000001;function zF(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,c;for(let u=0;u<i;u++){o=n[u],c=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Lc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,p4(t,c)),r&&il(o.latestValues)&&Lc(t,o.latestValues))}e.x<Kk&&e.x>Gk&&(e.x=1),e.y<Kk&&e.y>Gk&&(e.y=1)}function Oc(t,e){t.min=t.min+e,t.max=t.max+e}function Xk(t,e,n,r,i=.5){const o=Rn(t.min,t.max,i);yx(t,e,n,o,r)}function Lc(t,e){Xk(t.x,e.x,e.scaleX,e.scale,e.originX),Xk(t.y,e.y,e.scaleY,e.scale,e.originY)}function g4(t,e){return d4(MF(t.getBoundingClientRect(),e))}function BF(t,e,n){const r=g4(t,n),{scroll:i}=e;return i&&(Oc(r.x,i.offset.x),Oc(r.y,i.offset.y)),r}const y4=({current:t})=>t?t.ownerDocument.defaultView:null,Yk=(t,e)=>Math.abs(t-e);function HF(t,e){const n=Yk(t.x,e.x),r=Yk(t.y,e.y);return Math.sqrt(n**2+r**2)}class x4{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=ey(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,N=HF(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!N)return;const{point:b}=x,{timestamp:T}=Cr;this.history.push({...b,timestamp:T});const{onStart:j,onMove:R}=this.handlers;w||(j&&j(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,x)},this.handlePointerMove=(x,w)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Z0(w,this.transformPagePoint),Nn.update(this.updatePoint,!0)},this.handlePointerUp=(x,w)=>{this.end();const{onEnd:N,onSessionEnd:b,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=ey(x.type==="pointercancel"?this.lastMoveEventInfo:Z0(w,this.transformPagePoint),this.history);this.startEvent&&N&&N(x,j),b&&b(x,j)},!S1(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const u=yh(e),d=Z0(u,this.transformPagePoint),{point:f}=d,{timestamp:g}=Cr;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,ey(d,this.history)),this.removeListeners=mh(yd(this.contextWindow,"pointermove",this.handlePointerMove),yd(this.contextWindow,"pointerup",this.handlePointerUp),yd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jo(this.updatePoint)}}function Z0(t,e){return e?{point:e(t.point)}:t}function Qk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ey({point:t},e){return{point:t,delta:Qk(t,v4(e)),offset:Qk(t,WF(e)),velocity:qF(e,.1)}}function WF(t){return t[0]}function v4(t){return t[t.length-1]}function qF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=v4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ws(e)));)n--;if(!r)return{x:0,y:0};const o=qs(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function GF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Rn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Rn(n,t,r.max):Math.min(t,n)),t}function Jk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function KF(t,{top:e,left:n,bottom:r,right:i}){return{x:Jk(t.x,n,i),y:Jk(t.y,e,r)}}function Zk(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function XF(t,e){return{x:Zk(t.x,e.x),y:Zk(t.y,e.y)}}function YF(t,e){let n=.5;const r=ii(t),i=ii(e);return i>r?n=Md(e.min,e.max-r,t.min):r>i&&(n=Md(t.min,t.max-i,e.min)),ja(0,1,n)}function QF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const xx=.35;function JF(t=xx){return t===!1?t=0:t===!0&&(t=xx),{x:eE(t,"left","right"),y:eE(t,"top","bottom")}}function eE(t,e,n){return{min:tE(t,e),max:tE(t,n)}}function tE(t,e){return typeof t=="number"?t:t[e]||0}const ZF=new WeakMap;class eU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yh(y).point)},c=(y,x)=>{const{drag:w,dragPropagation:N,onDragStart:b}=this.getProps();if(w&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mV(w),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wi(j=>{let R=this.getAxisMotionValue(j).get()||0;if(Gs.test(R)){const{projection:A}=this.visualElement;if(A&&A.layout){const L=A.layout.layoutBox[j];L&&(R=ii(L)*(parseFloat(R)/100))}}this.originPoint[j]=R}),b&&Nn.postRender(()=>b(y,x)),mx(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},u=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:w,dragDirectionLock:N,onDirectionLock:b,onDrag:T}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:j}=x;if(N&&this.currentDirection===null){this.currentDirection=tU(j),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",x.point,j),this.updateAxis("y",x.point,j),this.visualElement.render(),T&&T(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Wi(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new x4(e,{onSessionStart:o,onStart:c,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:y4(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&Nn.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Mf(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=GF(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Dc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=KF(r.layoutBox,e):this.constraints=!1,this.elastic=JF(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Wi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=QF(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Dc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=BF(r,i.root,this.visualElement.getTransformPagePoint());let c=XF(i.layout.layoutBox,o);if(n){const u=n(DF(c));this.hasMutatedConstraints=!!u,u&&(c=d4(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Wi(g=>{if(!Mf(g,n,this.currentDirection))return;let y=d&&d[g]||{};c&&(y={min:0,max:0});const x=i?200:1e6,w=i?40:1e7,N={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(g,N)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return mx(this.visualElement,e),r.start(O1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Wi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Wi(n=>{const{drag:r}=this.getProps();if(!Mf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[n];o.set(e[n]-Rn(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Dc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Wi(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const d=u.get();i[c]=YF({min:d,max:d},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wi(c=>{if(!Mf(c,e,null))return;const u=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];u.set(Rn(d,f,i[c]))})}addListeners(){if(!this.visualElement.current)return;ZF.set(this.visualElement,this);const e=this.visualElement.current,n=yd(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Dc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Nn.read(r);const c=$d(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Wi(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())});return()=>{c(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=xx,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:u}}}function Mf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function tU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class nU extends Lo{constructor(e){super(e),this.removeGroupControls=Qi,this.removeListeners=Qi,this.controls=new eU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qi}unmount(){this.removeGroupControls(),this.removeListeners()}}const nE=t=>(e,n)=>{t&&Nn.postRender(()=>t(e,n))};class rU extends Lo{constructor(){super(...arguments),this.removePointerDownListener=Qi}onPointerDown(e){this.session=new x4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:y4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:nE(e),onStart:nE(n),onMove:r,onEnd:(o,c)=>{delete this.session,i&&Nn.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=yd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(wt.test(t))t=parseFloat(t);else return t;const n=rE(t,e.target.x),r=rE(t,e.target.y);return`${n}% ${r}%`}},iU={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ao.parse(t);if(i.length>5)return r;const o=Ao.createTransformer(t),c=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;i[0+c]/=u,i[1+c]/=d;const f=Rn(u,d,.5);return typeof i[2+c]=="number"&&(i[2+c]/=f),typeof i[3+c]=="number"&&(i[3+c]/=f),o(i)}};let iE=!1;class sU extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;BV(aU),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),iE&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),lm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,iE=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||Nn.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),N1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function b4(t){const[e,n]=Gj(),r=E.useContext(n1);return a.jsx(sU,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(Jj),isPresent:e,safeToRemove:n})}const aU={borderRadius:{...Xu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xu,borderTopRightRadius:Xu,borderBottomLeftRadius:Xu,borderBottomRightRadius:Xu,boxShadow:iU};function oU(t,e,n){const r=Gr(t)?t:Jc(t);return r.start(O1("",r,e,n)),r.animation}const lU=(t,e)=>t.depth-e.depth;class cU{constructor(){this.children=[],this.isDirty=!1}add(e){s1(this.children,e),this.isDirty=!0}remove(e){a1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lU),this.isDirty=!1,this.children.forEach(e)}}function uU(t,e){const n=wi.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(jo(r),t(o-e))};return Nn.setup(r,!0),()=>jo(r)}const w4=["TopLeft","TopRight","BottomLeft","BottomRight"],dU=w4.length,sE=t=>typeof t=="string"?parseFloat(t):t,aE=t=>typeof t=="number"||wt.test(t);function hU(t,e,n,r,i,o){i?(t.opacity=Rn(0,n.opacity??1,fU(r)),t.opacityExit=Rn(e.opacity??1,0,mU(r))):o&&(t.opacity=Rn(e.opacity??1,n.opacity??1,r));for(let c=0;c<dU;c++){const u=`border${w4[c]}Radius`;let d=oE(e,u),f=oE(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||aE(d)===aE(f)?(t[u]=Math.max(Rn(sE(d),sE(f),r),0),(Gs.test(f)||Gs.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Rn(e.rotate||0,n.rotate||0,r))}function oE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fU=_4(0,.5,mj),mU=_4(.5,.95,Qi);function _4(t,e,n){return r=>r<t?0:r>e?1:n(Md(t,e,r))}function lE(t,e){t.min=e.min,t.max=e.max}function Hi(t,e){lE(t.x,e.x),lE(t.y,e.y)}function cE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function uE(t,e,n,r,i){return t-=e,t=Ym(t,1/n,r),i!==void 0&&(t=Ym(t,1/i,r)),t}function pU(t,e=0,n=1,r=.5,i,o=t,c=t){if(Gs.test(e)&&(e=parseFloat(e),e=Rn(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=Rn(o.min,o.max,r);t===o&&(u-=e),t.min=uE(t.min,e,n,u,i),t.max=uE(t.max,e,n,u,i)}function dE(t,e,[n,r,i],o,c){pU(t,e[n],e[r],e[i],e.scale,o,c)}const gU=["x","scaleX","originX"],yU=["y","scaleY","originY"];function hE(t,e,n,r){dE(t.x,e,gU,n?n.x:void 0,r?r.x:void 0),dE(t.y,e,yU,n?n.y:void 0,r?r.y:void 0)}function fE(t){return t.translate===0&&t.scale===1}function k4(t){return fE(t.x)&&fE(t.y)}function mE(t,e){return t.min===e.min&&t.max===e.max}function xU(t,e){return mE(t.x,e.x)&&mE(t.y,e.y)}function pE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function E4(t,e){return pE(t.x,e.x)&&pE(t.y,e.y)}function gE(t){return ii(t.x)/ii(t.y)}function yE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class vU{constructor(){this.members=[]}add(e){s1(this.members,e),e.scheduleRender()}remove(e){if(a1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bU(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:x,skewX:w,skewY:N}=n;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),w&&(r+=`skewX(${w}deg) `),N&&(r+=`skewY(${N}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const ty=["","X","Y","Z"],wU=1e3;let _U=0;function ny(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function N4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=o4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Nn,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&N4(r)}function S4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},u=e==null?void 0:e()){this.id=_U++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(NU),this.nodes.forEach(jU),this.nodes.forEach(AU),this.nodes.forEach(SU)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new cU)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new c1),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const d=this.eventHandlers.get(c);d&&d.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=qj(c)&&!bV(c),this.instance=c;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;Nn.read(()=>{y=window.innerWidth}),t(c,()=>{const w=window.innerWidth;w!==y&&(y=w,this.root.updateBlockedByResize=!0,g&&g(),g=uU(x,250),lm.hasAnimatedSinceResize&&(lm.hasAnimatedSinceResize=!1,this.nodes.forEach(bE)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||f.getDefaultTransition()||MU,{onLayoutAnimationStart:b,onLayoutAnimationComplete:T}=f.getProps(),j=!this.targetLayout||!E4(this.targetLayout,w),R=!y&&x;if(this.options.layoutRoot||this.resumeFrom||R||y&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...k1(N,"layout"),onPlay:b,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(g,R)}else y||bE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(IU),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&N4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CU),this.nodes.forEach(kU),this.nodes.forEach(EU)):this.nodes.forEach(vE),this.clearAllSnapshots();const u=wi.now();Cr.delta=ja(0,1e3/60,u-Cr.timestamp),Cr.timestamp=u,Cr.isProcessing=!0,q0.update.process(Cr),q0.preRender.process(Cr),q0.render.process(Cr),Cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,N1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TU),this.sharedNodes.forEach(PU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ii(this.snapshot.measuredBox.x)&&!ii(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Kn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!k4(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||il(this.latestValues)||g)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return c&&(d=this.removeTransform(d)),OU(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:c}=this.options;if(!c)return Kn();const u=c.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(LU))){const{scroll:g}=this.root;g&&(Oc(u.x,g.offset.x),Oc(u.y,g.offset.y))}return u}removeElementScroll(c){var d;const u=Kn();if(Hi(u,c),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Hi(u,c),Oc(u.x,y.offset.x),Oc(u.y,y.offset.y))}return u}applyTransform(c,u=!1){const d=Kn();Hi(d,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Lc(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),il(g.latestValues)&&Lc(d,g.latestValues)}return il(this.latestValues)&&Lc(d,this.latestValues),d}removeTransform(c){const u=Kn();Hi(u,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!il(f.latestValues))continue;gx(f.latestValues)&&f.updateSnapshot();const g=Kn(),y=f.measurePageBox();Hi(g,y),hE(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return il(this.latestValues)&&hE(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Cr.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kn(),this.relativeTargetOrigin=Kn(),vd(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Hi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kn(),this.targetWithTransforms=Kn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$F(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hi(this.target,this.layout.layoutBox),p4(this.target,this.targetDelta)):Hi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kn(),this.relativeTargetOrigin=Kn(),vd(this.relativeTargetOrigin,this.target,w.target),Hi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gx(this.parent.latestValues)||m4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var N;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Cr.timestamp&&(d=!1),d)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Hi(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;zF(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Kn());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cE(this.prevProjectionDelta.x,this.projectionDelta.x),cE(this.prevProjectionDelta.y,this.projectionDelta.y)),xd(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!yE(this.projectionDelta.x,this.prevProjectionDelta.x)||!yE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mc(),this.projectionDelta=Mc(),this.projectionDeltaWithTransform=Mc()}setAnimationOrigin(c,u=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},y=Mc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=Kn(),w=d?d.source:void 0,N=this.layout?this.layout.source:void 0,b=w!==N,T=this.getStack(),j=!T||T.members.length<=1,R=!!(b&&!j&&this.options.crossfade===!0&&!this.path.some(DU));this.animationProgress=0;let A;this.mixTargetDelta=L=>{const z=L/1e3;wE(y.x,c.x,z),wE(y.y,c.y,z),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RU(this.relativeTarget,this.relativeTargetOrigin,x,z),A&&xU(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Kn()),Hi(A,this.relativeTarget)),b&&(this.animationValues=g,hU(g,f,this.latestValues,z,R,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(jo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nn.update(()=>{lm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Jc(0)),this.currentAnimation=oU(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wU),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:g}=c;if(!(!u||!d||!f)){if(this!==c&&this.layout&&f&&T4(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Kn();const y=ii(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const x=ii(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+x}Hi(u,d),Lc(u,g),xd(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new vU),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&ny("z",c,f,this.animationValues);for(let g=0;g<ty.length;g++)ny(`rotate${ty[g]}`,c,f,this.animationValues),ny(`skew${ty[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=om(u==null?void 0:u.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=om(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!il(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=bU(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),c.transform=y;const{x,y:w}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${w.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const N in Fd){if(g[N]===void 0)continue;const{correct:b,applyTo:T,isCSSVariable:j}=Fd[N],R=y==="none"?g[N]:b(g[N],f);if(T){const A=T.length;for(let L=0;L<A;L++)c[T[L]]=R}else j?this.options.visualElement.renderState.vars[N]=R:c[N]=R}this.options.layoutId&&(c.pointerEvents=f===this?om(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(xE),this.root.sharedNodes.clear()}}}function kU(t){t.updateLayout()}function EU(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,c=e.source!==t.layout.source;o==="size"?Wi(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],w=ii(x);x.min=r[y].min,x.max=x.min+w}):T4(o,e.layoutBox,r)&&Wi(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],w=ii(r[y]);x.max=x.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+w)});const u=Mc();xd(u,r,e.layoutBox);const d=Mc();c?xd(d,t.applyTransform(i,!0),e.measuredBox):xd(d,r,e.layoutBox);const f=!k4(u);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:w}=y;if(x&&w){const N=Kn();vd(N,e.layoutBox,x.layoutBox);const b=Kn();vd(b,r,w.layoutBox),E4(N,b)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=N,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function NU(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function SU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function TU(t){t.clearSnapshot()}function xE(t){t.clearMeasurements()}function vE(t){t.isLayoutDirty=!1}function CU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jU(t){t.resolveTargetDelta()}function AU(t){t.calcProjection()}function IU(t){t.resetSkewAndRotation()}function PU(t){t.removeLeadSnapshot()}function wE(t,e,n){t.translate=Rn(e.translate,0,n),t.scale=Rn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _E(t,e,n,r){t.min=Rn(e.min,n.min,r),t.max=Rn(e.max,n.max,r)}function RU(t,e,n,r){_E(t.x,e.x,n.x,r),_E(t.y,e.y,n.y,r)}function DU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const MU={duration:.45,ease:[.4,0,.1,1]},kE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),EE=kE("applewebkit/")&&!kE("chrome/")?Math.round:Qi;function NE(t){t.min=EE(t.min),t.max=EE(t.max)}function OU(t){NE(t.x),NE(t.y)}function T4(t,e,n){return t==="position"||t==="preserve-aspect"&&!UF(gE(e),gE(n),.2)}function LU(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const VU=S4({attachResizeListener:(t,e)=>$d(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ry={current:void 0},C4=S4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ry.current){const t=new VU({});t.mount(window),t.setOptions({layoutScroll:!0}),ry.current=t}return ry.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),FU={pan:{Feature:rU},drag:{Feature:nU,ProjectionNode:C4,MeasureLayout:b4}};function SE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Nn.postRender(()=>o(e,yh(e)))}class UU extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=pV(e,(n,r)=>(SE(this.node,r,"Start"),i=>SE(this.node,i,"End"))))}unmount(){}}class $U extends Lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mh($d(this.node.current,"focus",()=>this.onFocus()),$d(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Nn.postRender(()=>o(e,yh(e)))}class zU extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=vV(e,(n,r)=>(TE(this.node,r,"Start"),(i,{success:o})=>TE(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vx=new WeakMap,iy=new WeakMap,BU=t=>{const e=vx.get(t.target);e&&e(t)},HU=t=>{t.forEach(BU)};function WU({root:t,...e}){const n=t||document;iy.has(n)||iy.set(n,{});const r=iy.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(HU,{root:t,...e})),r[i]}function qU(t,e,n){const r=WU(e);return vx.set(t,n),r.observe(t),()=>{vx.delete(t),r.unobserve(t)}}const GU={some:0,all:1};class KU extends Lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:GU[i]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=f?g:y;x&&x(d)};return qU(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(XU(e,n))&&this.startObserver()}unmount(){}}function XU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const YU={inView:{Feature:KU},tap:{Feature:zU},focus:{Feature:$U},hover:{Feature:UU}},QU={layout:{ProjectionNode:C4,MeasureLayout:b4}},bx={current:null},j4={current:!1};function JU(){if(j4.current=!0,!!i1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bx.current=t.matches;t.addEventListener("change",e),e()}else bx.current=!1}const ZU=new WeakMap;function e$(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Gr(i))t.addValue(r,i);else if(Gr(o))t.addValue(r,Jc(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,Jc(c!==void 0?c:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const CE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class t${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=w1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=wi.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Nn.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Hp(n),this.isVariantNode=Yj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in y){const w=y[x];d[x]!==void 0&&Gr(w)&&w.set(d[x],!1)}}mount(e){this.current=e,ZU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),j4.current||JU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),jo(this.notifyUpdate),jo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=pu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Nn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zc){const n=Zc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<CE.length;r++){const i=CE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=e[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=e$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Jc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ij(r)||aj(r))?r=parseFloat(r):!_V(r)&&Ao.test(n)&&(r=$j(e,n)),this.setBaseTarget(e,Gr(r)?r.get():r)),Gr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=D1(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);c&&(r=c[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Gr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new c1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class A4 extends t${constructor(){super(...arguments),this.KeyframeResolver=uV}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function I4(t,{style:e,vars:n},r,i){const o=t.style;let c;for(c in e)o[c]=e[c];i==null||i.applyProjectionStyles(o,r);for(c in n)o.setProperty(c,n[c])}function n$(t){return window.getComputedStyle(t)}class r$ extends A4{constructor(){super(...arguments),this.type="html",this.renderInstance=I4}readValueFromInstance(e,n){var r;if(pu.has(n))return(r=this.projection)!=null&&r.isProjecting?ox(n):jL(e,n);{const i=n$(e),o=(h1(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return g4(e,n)}build(e,n,r){I1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return M1(e,n,r)}}const P4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function i$(t,e,n,r){I4(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(P4.has(i)?i:A1(i),e.attrs[i])}class s$ extends A4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(pu.has(n)){const r=Uj(n);return r&&r.default||0}return n=P4.has(n)?n:A1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return a4(e,n,r)}build(e,n,r){n4(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){i$(e,n,r,i)}mount(e){this.isSVGTag=i4(e.tagName),super.mount(e)}}const a$=(t,e)=>R1(t)?new s$(e):new r$(e,{allowProjection:t!==E.Fragment}),o$=aF({...PF,...YU,...FU,...QU},a$),de=IV(o$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c$=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),jE=t=>{const e=c$(t);return e.charAt(0).toUpperCase()+e.slice(1)},R4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),u$=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...u},d)=>E.createElement("svg",{ref:d,...d$,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:R4("lucide",i),...!o&&!u$(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>E.createElement(f,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=(t,e)=>{const n=E.forwardRef(({className:r,...i},o)=>E.createElement(h$,{ref:o,iconNode:e,className:R4(`lucide-${l$(jE(t))}`,`lucide-${t}`,r),...i}));return n.displayName=jE(t),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],AE=Pt("arrow-right",f$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],p$=Pt("bell",m$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],IE=Pt("calendar",g$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ac=Pt("check",y$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],v$=Pt("chevron-down",x$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w$=Pt("chevron-left",b$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wx=Pt("chevron-right",_$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qm=Pt("circle-check-big",k$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],N$=Pt("circle-dollar-sign",E$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zd=Pt("circle-x",S$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],D4=Pt("clock",T$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],L1=Pt("credit-card",C$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],A$=Pt("download",j$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PE=Pt("eye",I$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],R$=Pt("gift",P$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],M$=Pt("globe",D$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],L$=Pt("hourglass",O$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],bd=Pt("house",V$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],U$=Pt("locate-fixed",F$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],z$=Pt("lock",$$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],H$=Pt("log-out",B$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],q$=Pt("map-pin",W$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Of=Pt("map",G$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],X$=Pt("menu",K$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],_x=Pt("package",Y$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],M4=Pt("pencil",Q$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Z$=Pt("refresh-cw",J$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tz=Pt("settings",ez);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Jm=Pt("shield",nz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],iz=Pt("shopping-bag",rz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],az=Pt("shopping-cart",sz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],lz=Pt("sparkles",oz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],uz=Pt("star",cz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],sy=Pt("store",dz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],O4=Pt("trash-2",hz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],RE=Pt("triangle-alert",fz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],pz=Pt("trophy",mz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yz=Pt("user",gz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vz=Pt("x",xz);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],L4=Pt("zap",bz),DE=["Distrito Nacional","Santo Domingo","Santiago","La Vega","Puerto Plata","San Cristbal","Duarte","La Romana","San Pedro de Macors","Espaillat","Hermanas Mirabal","Monte Plata","San Juan","Azua","Peravia","Monseor Nouel","Barahona","Snchez Ramrez","Valverde","Mara Trinidad Snchez","Monte Cristi","Saman","El Seibo","Hato Mayor","Independencia","Pedernales","Elas Pia","Dajabn","Baoruco"],ma={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, Repblica Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"};function wz({abierto:t,onClose:e,onPick:n,valorActual:r}){const[i,o]=E.useState(""),c=E.useMemo(()=>{if(!i)return DE;const u=i.toLowerCase();return DE.filter(d=>d.toLowerCase().includes(u))},[i]);return E.useEffect(()=>{t||o("")},[t]),typeof document>"u"?null:zx.createPortal(a.jsx(dn,{children:t&&a.jsxs(a.Fragment,{children:[a.jsx(de.div,{className:"prov-picker-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),a.jsx(de.div,{className:"prov-picker-modal",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},onClick:u=>u.stopPropagation(),children:a.jsxs("div",{className:"prov-dark-card",children:[a.jsxs("div",{className:"prov-dark-header",children:[a.jsx("h3",{className:"prov-dark-title",children:"Seleccionar Provincia"}),a.jsx("button",{onClick:e,className:"prov-close-white",children:""})]}),a.jsx("div",{className:"prov-search-dark",children:a.jsx("input",{type:"text",placeholder:"Buscar provincia...",value:i,onChange:u=>o(u.target.value),className:"prov-input-dark",autoFocus:!0})}),a.jsx("div",{className:"prov-list-dark",children:c.length>0?c.map(u=>a.jsx("div",{className:`prov-item-dark ${r===u?"active":""}`,onClick:()=>{n(u),e()},children:u},u)):a.jsx("div",{className:"prov-empty-dark",children:"No se encontraron provincias"})})]})})]})}),document.body)}function V4({abierto:t,onClose:e,actualizarUsuarioInfo:n,actualizarLista:r,direccionEditar:i,usuarioId:o}){const{uid:c,usuario:u}=oi(),[d,f]=E.useState("domicilio"),[g,y]=E.useState([]),[x,w]=E.useState(!1),[N,b]=E.useState(null),[T,j]=E.useState(""),[R,A]=E.useState(""),[L,z]=E.useState(""),[q,D]=E.useState(""),[M,P]=E.useState(""),[S,F]=E.useState(""),[$,I]=E.useState(""),[re,ne]=E.useState(!1),[we,Ee]=E.useState(!1),[ee,ae]=E.useState(!1),[ge,H]=E.useState(null),[J,_e]=E.useState(""),[Ue,Ge]=E.useState(!1),tt=te=>te||"",[lt,Je]=E.useState(""),[Ze,Nt]=E.useState(null),[bt,pt]=E.useState(!1),[yt,Dt]=E.useState(!1),It=async()=>{const te=o||c||(u==null?void 0:u.uid);if(!te){y([]);return}w(!0);try{const be=pn($t(Ve,"direcciones"),Pr("usuarioId","==",te)),gt=(await Ji(be)).docs.map(jt=>({id:jt.id,...jt.data()}));y(gt)}catch(be){console.error("fetchDirecciones error:",be),y([])}finally{w(!1)}};E.useEffect(()=>{const te=o||c||(u==null?void 0:u.uid);t&&te&&It()},[t,c,u,o]),E.useEffect(()=>{t&&(It(),i?(b(i.id),f(i.metodoEntrega||"domicilio"),j(i.provincia||""),A(i.ciudad||""),z(i.sector||""),D(i.numeroCalle||""),P(i.numeroCasa||""),F(i.telefono||""),I(i.referencia||""),Je(i.ubicacion||""),Dt(i.metodoEntrega==="tienda")):(b(null),f("domicilio"),j(""),A(""),z(""),D(""),P(""),F(""),I(""),Je(""),Nt(null),Dt(!1)))},[t,i]),E.useEffect(()=>{if(!t)return;const te=be=>{be.key==="Escape"&&e&&e()};return document.body.style.overflow="hidden",document.addEventListener("keydown",te),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",te)}},[t,e]);const Sn=te=>{if(te==="tienda"){f("tienda"),j(ma.provincia),A(ma.ciudad),D(ma.numeroCalle),z(""),P(""),I(""),b(null),Je(""),Nt(null),Dt(!0);return}if(te==="domicilio"){f("domicilio"),yt&&(j(""),A(""),N||(D(""),z(""),P(""),I("")),Dt(!1));return}f(te)},Z=()=>[q,M?`Casa ${M}`:"",L,R,T,$?`Ref: ${$}`:""].filter(Boolean).join(", ").trim(),je=async()=>{const te=c||(u==null?void 0:u.uid);if(console.log("Auth check:",{uid:c,usuario:u==null?void 0:u.uid,currentUid:te}),!te){alert("Error de autenticacin. Recarga la pgina e intenta de nuevo.");return}ne(!0);try{if(d==="tienda"){if(!S||S.trim()===""){_e("El nmero de telfono es obligatorio para recoger en tienda"),ne(!1);return}typeof n=="function"&&await n({direccion:tt(ma.direccionCompleta),metodoEntrega:"tienda",telefono:S}),e&&e(),typeof r=="function"&&r(),ne(!1);return}if(!S||S.trim()===""){_e("El nmero de telfono es obligatorio"),ne(!1);return}const be=!!Ze;if(!be&&!Z()){alert("Completa provincia, ciudad y calle/nmero."),ne(!1);return}const Se=be?`${Z()?Z()+", ":""}Ubicacin: ${lt} (${Ze==null?void 0:Ze.lat}, ${Ze==null?void 0:Ze.lon})`:Z(),gt={metodoEntrega:"domicilio",provincia:T||null,ciudad:R||null,numeroCalle:q||null,numeroCasa:M||null,sector:L||null,referencia:$||null,telefono:S||null,direccionCompleta:Se,ubicacion:lt||null,coords:Ze||null,usuarioId:te,updatedAt:new Date};if(N){const ct=mt(Ve,"direcciones",N);await ji(ct,{...gt})}else await dh($t(Ve,"direcciones"),{...gt,createdAt:new Date});typeof n=="function"&&await n({direccion:tt(Se),metodoEntrega:"domicilio"}),Ee(!0);const jt={direccion:tt(Se),metodoEntrega:"domicilio",telefono:S,updatedAt:new Date};try{await rr(mt(Ve,"users",te),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir users/{uid}:",ct)}try{await rr(mt(Ve,"usuarios",te),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir usuarios/{uid}:",ct)}typeof n=="function"&&await n({telefono:S}),await It(),typeof r=="function"&&r(),b(null),e&&e(),window.location.reload()}catch(be){console.error("handleGuardarDireccion error:",be),alert(`Error guardando direccin: ${(be==null?void 0:be.message)||be}`)}finally{ne(!1)}},Oe=async te=>{try{const be=typeof te=="string"?te:(te==null?void 0:te.direccionCompleta)||"",Se=te&&te.metodoEntrega?te.metodoEntrega:"domicilio",gt=c||(u==null?void 0:u.uid);Ee(!0),typeof n=="function"&&await n({direccion:be,metodoEntrega:Se,telefono:S});const jt={direccion:be,metodoEntrega:Se,telefono:S,updatedAt:new Date};try{await rr(mt(Ve,"users",gt),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir users/{uid}:",ct)}try{await rr(mt(Ve,"usuarios",gt),jt,{merge:!0})}catch(ct){console.warn("No se pudo escribir usuarios/{uid}:",ct)}try{let ct=await qr(mt(Ve,"users",gt));if(ct.exists()||(ct=await qr(mt(Ve,"usuarios",gt))),ct&&ct.exists()){const Vt=ct.data()||{};typeof n=="function"&&await n({direccion:Vt.direccion||be,metodoEntrega:Vt.metodoEntrega||Se})}}catch(ct){console.warn("No se pudo releer documento de usuario:",ct)}await It(),typeof r=="function"&&r(),e&&e(),window.location.reload()}catch(be){console.error("handleSeleccionarDireccion error:",be),Ee(!1),alert(`Error seleccionando direccin: ${(be==null?void 0:be.message)||be}`)}},rt=async te=>{try{await Lp(mt(Ve,"direcciones",te)),await It(),typeof r=="function"&&r(),alert("Direccin eliminada correctamente.")}catch(be){console.error("eliminarDireccion:",be),alert(`Error eliminando direccin: ${(be==null?void 0:be.message)||be}`)}},St=te=>{H(te),ae(!0)},He=()=>{ae(!1),H(null)},dt=()=>{ge&&(rt(ge),ae(!1),H(null))},G=te=>{!te||te.metodoEntrega==="tienda"||(b(te.id),f("domicilio"),j(te.provincia||""),A(te.ciudad||""),z(te.sector||""),D(te.numeroCalle||""),P(te.numeroCasa||""),F(te.telefono||""),I(te.referencia||""),Je(te.ubicacion||""),Nt(te.coords||null),Dt(!1))},X=()=>{if(!navigator.geolocation){alert("Geolocalizacin no soportada en este navegador.");return}pt(!0),navigator.geolocation.getCurrentPosition(te=>{const be=te.coords.latitude.toFixed(6),Se=te.coords.longitude.toFixed(6),gt=`https://www.google.com/maps?q=${be},${Se}`;Je(gt),Nt({lat:be,lon:Se}),D(`${be}, ${Se}`),pt(!1)},te=>{console.error("Error geolocalizacin:",te);let be="No se pudo obtener la ubicacin.";switch(te.code){case te.PERMISSION_DENIED:be="Permisos denegados. Haz clic en el candado  junto a la URL y permite la ubicacin.";break;case te.POSITION_UNAVAILABLE:be="Ubicacin no disponible. Asegrate de estar conectado a internet y tener servicios de ubicacin activados.";break;case te.TIMEOUT:be="Tiempo agotado. Intenta de nuevo.";break;default:be="Error desconocido. Verifica permisos del navegador."}alert(be),pt(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},me=()=>{Je(""),Nt(null),q&&/^\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?\s*$/.test(q)&&D("")};if(!t)return null;const Te=g.filter(te=>te.metodoEntrega!=="tienda");return zx.createPortal(a.jsxs(a.Fragment,{children:[a.jsx(de.div,{className:"entrega-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),a.jsx(de.div,{className:"entrega-slider",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:200},role:"dialog","aria-modal":"true",onClick:te=>te.stopPropagation(),children:a.jsxs("div",{className:"entrega-slider-content","aria-labelledby":"entrega-title",children:[a.jsx("div",{className:"entrega-drag-handle"}),a.jsxs("div",{className:"entrega-header",children:[a.jsxs("div",{className:"entrega-header-content",children:[a.jsx("div",{className:"entrega-icon-wrapper",children:a.jsx("div",{className:"entrega-icon",children:""})}),a.jsxs("div",{className:"entrega-title-section",children:[a.jsx("h3",{id:"entrega-title",className:"entrega-title",children:"Mtodo de entrega"}),a.jsx("p",{className:"entrega-subtitle",children:"Elige cmo quieres recibir tu pedido"})]})]}),a.jsx("button",{onClick:e,className:"entrega-close-btn","aria-label":"Cerrar",children:a.jsx(zd,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"entrega-methods",children:[a.jsxs(de.button,{type:"button",onClick:()=>Sn("domicilio"),className:`method-card ${d==="domicilio"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":d==="domicilio",children:[a.jsx("div",{className:"method-icon domicilio-icon",children:a.jsx(bd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"method-info",children:[a.jsx("h4",{className:"method-title",children:"A domicilio"}),a.jsx("p",{className:"method-desc",children:"Entrega en tu direccin"})]}),d==="domicilio"&&a.jsx(de.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:a.jsx(Ac,{className:"w-5 h-5"})})]}),a.jsxs(de.button,{type:"button",onClick:()=>Sn("tienda"),className:`method-card ${d==="tienda"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":d==="tienda",children:[a.jsx("div",{className:"method-icon tienda-icon",children:a.jsx(sy,{className:"w-6 h-6"})}),a.jsxs("div",{className:"method-info",children:[a.jsx("h4",{className:"method-title",children:"Recoger en tienda"}),a.jsx("p",{className:"method-desc",children:"Playcenter Universal"})]}),d==="tienda"&&a.jsx(de.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:a.jsx(Ac,{className:"w-5 h-5"})})]})]}),d==="domicilio"&&a.jsxs(de.button,{type:"button",onClick:X,className:`location-btn ${bt?"loading":""}`,disabled:bt,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[a.jsx(U$,{className:`w-5 h-5 ${bt?"animate-pulse":""}`}),a.jsx("span",{children:bt?"Obteniendo ubicacin...":"Usar mi ubicacin actual"})]}),d==="tienda"&&a.jsx(de.div,{className:"tienda-phone-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Telfono de contacto *"}),a.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:S,onChange:te=>{F(te.target.value),J&&_e("")},className:"form-input",required:!0}),J&&a.jsx("div",{className:"phone-error-message",children:a.jsxs("span",{children:[" ",J]})}),a.jsx("p",{className:"form-note",children:" Te contactaremos cuando tu pedido est listo para recoger"})]})}),a.jsxs("div",{className:"entrega-form",children:[a.jsx(dn,{children:Ze&&a.jsxs(de.div,{className:"coords-display",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[a.jsxs("div",{className:"coords-header",children:[a.jsx(Of,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"coords-title",children:"Ubicacin detectada"}),a.jsx("button",{onClick:me,className:"coords-remove","aria-label":"Quitar ubicacin",children:a.jsx(zd,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"coords-info",children:[a.jsxs("div",{className:"coord-item",children:[a.jsx("span",{className:"coord-label",children:"Lat:"}),a.jsx("span",{className:"coord-value",children:Ze.lat})]}),a.jsxs("div",{className:"coord-item",children:[a.jsx("span",{className:"coord-label",children:"Lng:"}),a.jsx("span",{className:"coord-value",children:Ze.lon})]})]})]})}),a.jsx(dn,{mode:"wait",children:d==="domicilio"?a.jsxs(de.div,{className:"address-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[a.jsxs("div",{className:"form-section",children:[a.jsx("label",{className:"form-label",children:"Provincia *"}),a.jsxs("button",{type:"button",onClick:()=>Ge(!0),className:"province-selector","aria-haspopup":"dialog","aria-expanded":Ue,children:[a.jsx("span",{className:`province-text ${T?"":"placeholder"}`,children:T||"Selecciona tu provincia"}),a.jsx(v$,{className:"province-chevron"})]})]}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Ciudad *"}),a.jsx("input",{placeholder:"Ej: Santiago",value:R,onChange:te=>A(te.target.value),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Sector"}),a.jsx("input",{placeholder:"Ej: Los Jardines",value:L,onChange:te=>z(te.target.value),className:"form-input"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Calle y nmero *"}),a.jsx("input",{placeholder:"Ej: Av. Juan Pablo Duarte #123",value:q,onChange:te=>D(te.target.value),className:"form-input"})]}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Nmero de casa"}),a.jsx("input",{placeholder:"Ej: 45-B",value:M,onChange:te=>P(te.target.value),className:"form-input"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Telfono *"}),a.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:S,onChange:te=>{F(te.target.value),J&&_e("")},className:"form-input",required:!0}),J&&a.jsx("div",{className:"phone-error-message",children:a.jsxs("span",{children:[" ",J]})})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Referencia"}),a.jsx("input",{placeholder:"Ej: Casa azul",value:$,onChange:te=>I(te.target.value),className:"form-input"})]}),!Ze&&a.jsxs("div",{className:"form-note",children:[" ",a.jsx("strong",{children:"Tip:"}),' Usa "Mi ubicacin actual" para completar automticamente las coordenadas']})]},"domicilio-form"):a.jsxs(de.div,{className:"store-info",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[a.jsxs("div",{className:"store-header",children:[a.jsx(sy,{className:"w-6 h-6 text-orange-500"}),a.jsx("h4",{className:"store-title",children:"Playcenter Universal"})]}),a.jsx("p",{className:"store-address",children:ma.direccionCompleta}),a.jsxs("a",{href:ma.ubicacion,target:"_blank",rel:"noreferrer",className:"store-map-link",children:[a.jsx(Of,{className:"w-4 h-4"}),"Ver en Google Maps"]})]},"tienda-info")}),a.jsx(de.button,{onClick:je,disabled:re,className:`save-btn ${re?"loading":""}`,whileHover:{scale:re?1:1.02},whileTap:{scale:re?1:.98},children:re?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("span",{children:"Guardando..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ac,{className:"w-5 h-5"}),a.jsx("span",{children:d==="tienda"?"Seleccionar Playcenter":N?"Actualizar direccin":"Guardar direccin"})]})})]}),a.jsxs("div",{className:"saved-addresses",children:[a.jsx("h4",{className:"saved-title",children:"Direcciones guardadas"}),x?a.jsxs("div",{className:"loading-state",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("span",{children:"Cargando direcciones..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs(de.div,{className:"address-card store-card",whileHover:{scale:1.01},whileTap:{scale:.99},children:[a.jsxs("div",{className:"address-info",children:[a.jsxs("div",{className:"address-header",children:[a.jsx(sy,{className:"w-5 h-5 text-orange-500"}),a.jsx("span",{className:"address-type",children:"Recoger en tienda"})]}),a.jsx("p",{className:"address-name",children:"Playcenter Universal"}),a.jsx("p",{className:"address-details",children:ma.direccionCompleta}),a.jsxs("a",{href:ma.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[a.jsx(Of,{className:"w-4 h-4"}),"Ver ubicacin"]})]}),a.jsxs("button",{onClick:()=>Oe(ma),className:"address-select-btn store-select",children:[a.jsx(Ac,{className:"w-4 h-4"}),"Seleccionar"]})]}),a.jsx(dn,{children:Te.length===0?a.jsxs(de.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[a.jsx(bd,{className:"w-12 h-12 text-gray-300"}),a.jsx("p",{className:"empty-text",children:"No tienes direcciones guardadas"}),a.jsx("p",{className:"empty-subtext",children:"Agrega una direccin para entregas futuras"})]}):a.jsx("div",{className:"addresses-list",children:Te.map((te,be)=>a.jsxs(de.div,{className:"address-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:be*.1},whileHover:{scale:1.01},children:[a.jsxs("div",{className:"address-info",children:[a.jsxs("div",{className:"address-header",children:[a.jsx(bd,{className:"w-5 h-5 text-blue-500"}),a.jsx("span",{className:"address-type",children:"Domicilio"})]}),a.jsx("p",{className:"address-details",children:te.direccionCompleta}),te.ubicacion&&a.jsxs("a",{href:te.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[a.jsx(Of,{className:"w-4 h-4"}),"Ver ubicacin"]})]}),a.jsxs("div",{className:"address-actions",children:[a.jsx("button",{onClick:()=>G(te),className:"address-action-btn edit-btn","aria-label":"Editar direccin",children:a.jsx(M4,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Oe(te),className:"address-action-btn select-btn","aria-label":"Seleccionar direccin",children:a.jsx(Ac,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>St(te.id),className:"address-action-btn delete-btn","aria-label":"Eliminar direccin",children:a.jsx(O4,{className:"w-4 h-4"})})]})]},te.id))})})]})]})]})}),a.jsx(dn,{children:we&&a.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"loaderInner",children:[a.jsx("div",{className:"loader",children:a.jsxs("div",{className:"truckWrapper",children:[a.jsx("div",{className:"truckBody",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 198 93",className:"trucksvg",children:[a.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#F83D3D",d:"M135 22.5H177.264C178.295 22.5 179.22 23.133 179.594 24.0939L192.33 56.8443C192.442 57.1332 192.5 57.4404 192.5 57.7504V89C192.5 90.3807 191.381 91.5 190 91.5H135C133.619 91.5 132.5 90.3807 132.5 89V25C132.5 23.6193 133.619 22.5 135 22.5Z"}),a.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#7D7C7C",d:"M146 33.5H181.741C182.779 33.5 183.709 34.1415 184.078 35.112L190.538 52.112C191.16 53.748 189.951 55.5 188.201 55.5H146C144.619 55.5 143.5 54.3807 143.5 53V36C143.5 34.6193 144.619 33.5 146 33.5Z"}),a.jsx("path",{strokeWidth:"2",stroke:"#282828",fill:"#282828",d:"M150 65C150 65.39 149.763 65.8656 149.127 66.2893C148.499 66.7083 147.573 67 146.5 67C145.427 67 144.501 66.7083 143.873 66.2893C143.237 65.8656 143 65.39 143 65C143 64.61 143.237 64.1344 143.873 63.7107C144.501 63.2917 145.427 63 146.5 63C147.573 63 148.499 63.2917 149.127 63.7107C149.763 64.1344 150 64.61 150 65Z"}),a.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#FFFCAB",rx:"1",height:"7",width:"5",y:"63",x:"187"}),a.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#282828",rx:"1",height:"11",width:"4",y:"81",x:"193"}),a.jsx("rect",{strokeWidth:"3",stroke:"#282828",fill:"#DFDFDF",rx:"2.5",height:"90",width:"121",y:"1.5",x:"6.5"}),a.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#DFDFDF",rx:"2",height:"4",width:"6",y:"84",x:"1"})]})}),a.jsxs("div",{className:"truckTires",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[a.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),a.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]}),a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[a.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),a.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]})]}),a.jsx("div",{className:"road"}),a.jsx("svg",{xmlSpace:"preserve",viewBox:"0 0 453.459 453.459",xmlns:"http://www.w3.org/2000/svg",className:"lampPost",fill:"#000000",children:a.jsx("path",{d:`M252.882,0c-37.781,0-68.686,29.953-70.245,67.358h-6.917v8.954c-26.109,2.163-45.463,10.011-45.463,19.366h9.993
c-1.65,5.146-2.507,10.54-2.507,16.017c0,28.956,23.558,52.514,52.514,52.514c28.956,0,52.514-23.558,52.514-52.514
c0-5.478-0.856-10.872-2.506-16.017h9.992c0-9.354-19.352-17.204-45.463-19.366v-8.954h-6.149C200.189,38.779,223.924,16,252.882,16
c29.952,0,54.32,24.368,54.32,54.32c0,28.774-11.078,37.009-25.105,47.437c-17.444,12.968-37.216,27.667-37.216,78.884v113.914
h-0.797c-5.068,0-9.174,4.108-9.174,9.177c0,2.844,1.293,5.383,3.321,7.066c-3.432,27.933-26.851,95.744-8.226,115.459v11.202h45.75
v-11.202c18.625-19.715-4.794-87.527-8.227-115.459c2.029-1.683,3.322-4.223,3.322-7.066c0-5.068-4.107-9.177-9.176-9.177h-0.795
V196.641c0-43.174,14.942-54.283,30.762-66.043c14.793-10.997,31.559-23.461,31.559-60.277C323.202,31.545,291.656,0,252.882,0z
M232.77,111.694c0,23.442-19.071,42.514-42.514,42.514c-23.442,0-42.514-19.072-42.514-42.514c0-5.531,1.078-10.957,3.141-16.017
h78.747C231.693,100.736,232.77,106.162,232.77,111.694z`})})]})}),a.jsx("div",{className:"loaderText",children:"Direccin seleccionada!"})]})})}),a.jsx(dn,{children:ee&&a.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:a.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[a.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"Eliminar direccin?"}),a.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"Ests seguro que quieres eliminar esta direccin? Esta accin no se puede deshacer."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:He,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:te=>te.target.style.backgroundColor="#f9fafb",onMouseOut:te=>te.target.style.backgroundColor="white",children:"Cancelar"}),a.jsx("button",{onClick:dt,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:te=>te.target.style.backgroundColor="#dc2626",onMouseOut:te=>te.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),we&&a.jsxs("div",{className:"truck-loader-overlay",children:[a.jsxs("div",{className:"spinner",children:[a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{})]}),a.jsx("div",{className:"truck-loader-text",children:"Procesando entrega..."})]}),a.jsx(wz,{abierto:Ue,onClose:()=>Ge(!1),onPick:te=>j(te),valorActual:T})]}),document.body)}const _z=()=>{var N;const{usuario:t,usuarioInfo:e,logout:n}=oi(),{setModalAbierto:r}=iu(),{isDark:i}=hu(),o=E.useRef(null);ai();const c=E.useRef(0),[u,d]=E.useState(!0),[f,g]=E.useState(window.innerWidth>=1280),[y,x]=E.useState(!1),w=(()=>{try{if(!t||!e||!e.metodoEntrega)return"Selecciona mtodo de entrega";if((e.metodoEntrega||"").toLowerCase()==="tienda")return"Recoger en tienda";const T=(e.direccion||"").trim();return T?/maps\.|google\.com\/maps|Ubicacin:/i.test(T)?"Direccin de Google Maps":T:"Selecciona mtodo de entrega"}catch{return"Selecciona mtodo de entrega"}})();return E.useEffect(()=>{o.current&&o.current.focus()},[]),E.useEffect(()=>{const b=()=>{g(window.innerWidth>=1280)};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),E.useEffect(()=>{if(!f)return;let b=!1;function T(){b||(window.requestAnimationFrame(()=>{const j=window.pageYOffset,R=c.current;j>R&&j>100?d(!1):(j<R||j===0)&&d(!0),c.current=j,b=!1}),b=!0)}return window.addEventListener("scroll",T,{passive:!0}),()=>window.removeEventListener("scroll",T)},[f]),a.jsxs(a.Fragment,{children:[a.jsx(de.header,{initial:{y:-120,opacity:0},animate:{y:f&&!u?-120:0,opacity:f&&!u?0:1},transition:{duration:.3,ease:"easeInOut"},className:"fixed top-0 left-0 w-full shadow-lg z-[9999] pl-0 pr-4 py-3",style:{backgroundColor:i?"#111827":"#ffffff",maxWidth:"100vw",overflowX:"hidden",pointerEvents:f&&!u?"none":"auto",opacity:1,backdropFilter:"none",WebkitBackdropFilter:"none"},children:a.jsxs("div",{className:"flex items-center justify-between w-full gap-3",children:[a.jsx("div",{id:"search-bar-container",className:"flex-grow max-w-full px-2 xl:hidden",children:a.jsx(mk,{onClose:()=>{},ref:o,placeholder:"Buscar en pcu.com.do"})}),a.jsxs("div",{className:"hidden xl:flex w-full items-center justify-between gap-6",children:[a.jsxs(At,{to:"/",className:"flex items-center gap-3 min-w-0 flex-shrink-0",children:[a.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal",className:"h-10 object-contain"}),a.jsxs("button",{type:"button",onClick:()=>{if(!t)return r(!0);x(!0)},className:"flex flex-col leading-tight text-left text-xs text-gray-700 dark:text-white font-medium hover:text-[#0ea5e9] dark:hover:text-[#60a5fa] transition",children:[a.jsxs("span",{className:"flex items-center gap-1 text-[11px] text-gray-500 dark:text-gray-300",children:[a.jsx(fh,{className:"text-[#4FC3F7]"}),"Mtodo de entrega"]}),a.jsx("strong",{className:"block text-[12px] font-semibold text-gray-700 dark:text-white tracking-wide truncate max-w-[120px] sm:max-w-[160px] md:max-w-[200px] lg:max-w-[220px]",title:w,children:w})]})]}),a.jsx("div",{className:"flex-grow max-w-xl",children:a.jsx(mk,{onClose:()=>{},ref:o,placeholder:"Buscar en pcu.com.do"})}),a.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium text-gray-700 dark:text-white",children:[a.jsx(At,{to:"/",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Inicio"}),a.jsx(At,{to:"/categorias",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Categoras"}),a.jsx(At,{to:"/tiendas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Tiendas"}),a.jsx(At,{to:"/vender",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Vender"}),a.jsx(At,{to:"/nosotros",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Nosotros"}),a.jsx(At,{to:"/contacto",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Contctanos"}),a.jsx(At,{to:"/estafetas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Estafetas"}),a.jsx(At,{to:"/carrito",className:"nav-link text-xl hover:scale-110 transition",children:""}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&a.jsx(At,{to:"/admin",className:"px-3 py-2 rounded bg-[#4FC3F7] text-white hover:bg-[#3BB0F3] shadow transition",children:"Panel Admin"}),t?a.jsx(de.div,{className:"relative",whileTap:{scale:.95},children:a.jsx(At,{to:"/profile",children:a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[#4FC3F7] shadow hover:shadow-lg transition cursor-pointer bg-white dark:bg-gray-700",children:t.photoURL?a.jsx("img",{src:t.photoURL,alt:"Perfil",className:"w-full h-full object-cover rounded-full"}):a.jsx("div",{className:"w-full h-full bg-[#4FC3F7] text-white flex items-center justify-center font-bold text-base",children:((N=t.displayName)==null?void 0:N.charAt(0).toUpperCase())||"U"})})})}):a.jsx(de.button,{onClick:()=>r(!0),className:"px-4 py-2 text-sm bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white rounded-lg font-semibold shadow transition",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Iniciar sesin"})]})]})]})}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&a.jsx("div",{className:"xl:hidden fixed bottom-[80px] right-4 z-[9999]",children:a.jsx(At,{to:"/admin",className:"bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white px-5 py-3 rounded-full shadow-xl font-semibold text-base",children:"Panel Admin"})}),y&&t&&a.jsx(V4,{abierto:y,onClose:()=>x(!1),usuarioId:(e==null?void 0:e.uid)||(t==null?void 0:t.uid),direccionEditar:null,actualizarLista:()=>{}})]})};function Wp({isOpen:t,onClose:e,onIniciarSesion:n}){return t?a5.createPortal(a.jsx("div",{onClick:e,className:"fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-[11000] flex items-center justify-center p-4",style:{top:0,left:0},children:a.jsxs(de.div,{onClick:r=>r.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40 z-[11001]",children:[a.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold","aria-label":"Cerrar modal",children:""}),a.jsxs("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-[#3b82f6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A11.955 11.955 0 0112 15c2.32 0 4.47.66 6.264 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})}),"Inicia sesin"]}),a.jsx("p",{className:"mb-6 text-center text-gray-300",children:"Necesitas iniciar sesin para acceder a esta funcin"}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:()=>{e(),n()},className:"w-full max-w-[120px] px-5 py-2 bg-[#3b82f6] hover:bg-[#2563eb] rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Iniciar sesin"}),a.jsx("button",{onClick:e,className:"w-full max-w-[120px] px-5 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Cancelar"})]})]})}),document.body):null}function kz(){const{usuario:t}=oi(),e=ai(),{abrirModal:n}=iu(),[r,i]=E.useState(!1),o=(d,f)=>{!t&&(f==="/carrito"||f==="/Profile")?(d.preventDefault(),i(!0)):e(f)},c=()=>i(!1),u=()=>{c(),n()};return a.jsx("div",{className:"footer-block",children:a.jsxs("footer",{className:"footer futuristic-footer relative bg-black text-gray-300 py-12 text-sm sm:text-base",children:[a.jsx("div",{className:"footer-bg-animated"}),a.jsx("div",{className:"w-full flex justify-center mb-10 relative z-20",children:a.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal Logo",className:"footer-logo-glow w-32 sm:w-44 xl:w-64 transition-transform duration-300 hover:scale-105"})}),a.jsxs("div",{className:"footer-cols-wrapper relative z-20 max-w-7xl mx-auto px-4 sm:px-6 xl:px-8 grid grid-cols-2 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Playcenter Universal"}),a.jsx("p",{children:"Tu universo de tecnologa y gaming en Santiago, R.D."}),a.jsxs("p",{className:"mt-3 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(fh,{})," Av. Estrella Sadhal #55, frente a la doble va"]}),a.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(ex,{})," +1 (809) 582-1212 (Internet)"]}),a.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(ex,{})," +1 (849) 635-7000 (Tienda)"]}),a.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[a.jsx(t1,{})," playcenter121@gmail.com"]})]}),a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Navegacin"}),a.jsx("ul",{className:"footer-nav-list",children:[["Categoras","/categorias",!1],["Nosotros","/nosotros",!1],["Contctanos","/contacto",!1],["Estafetas","/estafetas",!1],["Tiendas","/tiendas",!1],["Vender","/vender",!1],["Carrito","/carrito",!0],["Mi perfil","/Profile",!0]].map(([d,f,g])=>a.jsx("li",{children:g?a.jsx("a",{href:f,onClick:y=>o(y,f),className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm cursor-pointer",children:d}):a.jsx("a",{href:f,className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm",children:d})},d))})]}),a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Horario"}),a.jsx("p",{children:"Lunes a Viernes: 8:30am - 5:30pm"}),a.jsx("p",{children:"Sbados: 8:30am - 12:30pm"}),a.jsx("p",{children:"Domingos: Cerrado"})]}),a.jsxs("div",{className:"footer-col",children:[a.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Conctate con nosotros"}),a.jsx("div",{className:"grid grid-cols-2 gap-4 justify-items-center sm:justify-items-start",children:[["https://www.facebook.com/pcu12","/Facebook.png","Facebook"],["https://www.instagram.com/playcenter_universal/?hl=es","/Instagram.png","Instagram"],["https://www.tiktok.com/@playcenter_universal?lang=es","/tiktok.png","TikTok"],["https://youtube.com/@playcenteruniversal1916","/Youtube.png","YouTube"]].map(([d,f,g])=>a.jsx("a",{href:d,target:"_blank",rel:"noreferrer",className:"relative group",children:a.jsx("img",{src:f,alt:g,className:"footer-social-icon-neon w-12 h-12 sm:w-16 sm:h-16 rounded-full transition-transform duration-300 transform group-hover:scale-110"})},g))})]})]}),a.jsxs("p",{className:"footer-copyright text-center text-gray-500 text-[11px] sm:text-xs mt-10 relative z-20",children:[" ",new Date().getFullYear()," Playcenter Universal. Todos los derechos reservados."]}),a.jsx(Wp,{isOpen:r,onClose:c,onIniciarSesion:u})]})})}var ay={exports:{}},oy,ME;function Ez(){if(ME)return oy;ME=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return oy=t,oy}var ly,OE;function Nz(){if(OE)return ly;OE=1;var t=Ez();function e(){}function n(){}return n.resetWarningCache=e,ly=function(){function r(c,u,d,f,g,y){if(y!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},ly}var LE;function Sz(){return LE||(LE=1,ay.exports=Nz()()),ay.exports}var Tz=Sz();const ln=Yd(Tz),Cz=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function eu(t,e,n){const r=jz(t),{webkitRelativePath:i}=t,o=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&VE(r,"path",o),VE(r,"relativePath",o),r}function jz(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=Cz.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function VE(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const Az=[".DS_Store","Thumbs.db"];function Iz(t){return Pl(this,void 0,void 0,function*(){return Zm(t)&&Pz(t.dataTransfer)?Oz(t.dataTransfer,t.type):Rz(t)?Dz(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?Mz(t):[]})}function Pz(t){return Zm(t)}function Rz(t){return Zm(t)&&Zm(t.target)}function Zm(t){return typeof t=="object"&&t!==null}function Dz(t){return kx(t.target.files).map(e=>eu(e))}function Mz(t){return Pl(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>eu(n))})}function Oz(t,e){return Pl(this,void 0,void 0,function*(){if(t.items){const n=kx(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(Lz));return FE(F4(r))}return FE(kx(t.files).map(n=>eu(n)))})}function FE(t){return t.filter(e=>Az.indexOf(e.name)===-1)}function kx(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function Lz(t){if(typeof t.webkitGetAsEntry!="function")return UE(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?U4(e):UE(t,e)}function F4(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?F4(n):[n]],[])}function UE(t,e){return Pl(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const o=yield t.getAsFileSystemHandle();if(o===null)throw new Error(`${t} is not a File`);if(o!==void 0){const c=yield o.getFile();return c.handle=o,eu(c)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return eu(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function Vz(t){return Pl(this,void 0,void 0,function*(){return t.isDirectory?U4(t):Fz(t)})}function U4(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function o(){e.readEntries(c=>Pl(this,void 0,void 0,function*(){if(c.length){const u=Promise.all(c.map(Vz));i.push(u),o()}else try{const u=yield Promise.all(i);n(u)}catch(u){r(u)}}),c=>{r(c)})}o()})}function Fz(t){return Pl(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=eu(r,t.fullPath);e(i)},r=>{n(r)})})})}var Lf={},$E;function Uz(){return $E||($E=1,Lf.__esModule=!0,Lf.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?o===u.replace(/\/.*$/,""):i===u})}return!0}),Lf}var $z=Uz();const cy=Yd($z);function zE(t){return Hz(t)||Bz(t)||z4(t)||zz()}function zz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bz(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hz(t){if(Array.isArray(t))return Ex(t)}function BE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BE(Object(n),!0).forEach(function(r){$4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bd(t,e){return Gz(t)||qz(t,e)||z4(t,e)||Wz()}function Wz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4(t,e){if(t){if(typeof t=="string")return Ex(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ex(t,e)}}function Ex(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(d){o=!0,u=d}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function Gz(t){if(Array.isArray(t))return t}var Kz=typeof cy=="function"?cy:cy.default,Xz="file-invalid-type",Yz="file-too-large",Qz="file-too-small",Jz="too-many-files",Zz=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:Xz,message:"File type must be ".concat(r)}},WE=function(e){return{code:Yz,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},qE=function(e){return{code:Qz,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},eB={code:Jz,message:"Too many files"};function B4(t,e){var n=t.type==="application/x-moz-file"||Kz(t,e);return[n,n?null:Zz(e)]}function H4(t,e,n){if(ol(t.size))if(ol(e)&&ol(n)){if(t.size>n)return[!1,WE(n)];if(t.size<e)return[!1,qE(e)]}else{if(ol(e)&&t.size<e)return[!1,qE(e)];if(ol(n)&&t.size>n)return[!1,WE(n)]}return[!0,null]}function ol(t){return t!=null}function tB(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,o=t.multiple,c=t.maxFiles,u=t.validator;return!o&&e.length>1||o&&c>=1&&e.length>c?!1:e.every(function(d){var f=B4(d,n),g=Bd(f,1),y=g[0],x=H4(d,r,i),w=Bd(x,1),N=w[0],b=u?u(d):null;return y&&N&&!b})}function ep(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Vf(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function GE(t){t.preventDefault()}function nB(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function rB(t){return t.indexOf("Edge/")!==-1}function iB(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return nB(t)||rB(t)}function Is(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),c=1;c<i;c++)o[c-1]=arguments[c];return e.some(function(u){return!ep(r)&&u&&u.apply(void 0,[r].concat(o)),ep(r)})}}function sB(){return"showOpenFilePicker"in window}function aB(t){if(ol(t)){var e=Object.entries(t).filter(function(n){var r=Bd(n,2),i=r[0],o=r[1],c=!0;return W4(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(o)||!o.every(q4))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(n,r){var i=Bd(r,2),o=i[0],c=i[1];return HE(HE({},n),{},$4({},o,c))},{});return[{description:"Files",accept:e}]}return t}function oB(t){if(ol(t))return Object.entries(t).reduce(function(e,n){var r=Bd(n,2),i=r[0],o=r[1];return[].concat(zE(e),[i],zE(o))},[]).filter(function(e){return W4(e)||q4(e)}).join(",")}function lB(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function cB(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function W4(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function q4(t){return/^.*\.[\w]+$/.test(t)}var uB=["children"],dB=["open"],hB=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],fB=["refKey","onChange","onClick"];function mB(t){return yB(t)||gB(t)||G4(t)||pB()}function pB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yB(t){if(Array.isArray(t))return Nx(t)}function uy(t,e){return bB(t)||vB(t,e)||G4(t,e)||xB()}function xB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G4(t,e){if(t){if(typeof t=="string")return Nx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nx(t,e)}}function Nx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vB(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(d){o=!0,u=d}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function bB(t){if(Array.isArray(t))return t}function KE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KE(Object(n),!0).forEach(function(r){Sx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tp(t,e){if(t==null)return{};var n=wB(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wB(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var V1=E.forwardRef(function(t,e){var n=t.children,r=tp(t,uB),i=X4(r),o=i.open,c=tp(i,dB);return E.useImperativeHandle(e,function(){return{open:o}},[o]),si.createElement(E.Fragment,null,n(In(In({},c),{},{open:o})))});V1.displayName="Dropzone";var K4={disabled:!1,getFilesFromEvent:Iz,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};V1.defaultProps=K4;V1.propTypes={children:ln.func,accept:ln.objectOf(ln.arrayOf(ln.string)),multiple:ln.bool,preventDropOnDocument:ln.bool,noClick:ln.bool,noKeyboard:ln.bool,noDrag:ln.bool,noDragEventsBubbling:ln.bool,minSize:ln.number,maxSize:ln.number,maxFiles:ln.number,disabled:ln.bool,getFilesFromEvent:ln.func,onFileDialogCancel:ln.func,onFileDialogOpen:ln.func,useFsAccessApi:ln.bool,autoFocus:ln.bool,onDragEnter:ln.func,onDragLeave:ln.func,onDragOver:ln.func,onDrop:ln.func,onDropAccepted:ln.func,onDropRejected:ln.func,onError:ln.func,validator:ln.func};var Tx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function X4(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=In(In({},K4),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,o=e.maxSize,c=e.minSize,u=e.multiple,d=e.maxFiles,f=e.onDragEnter,g=e.onDragLeave,y=e.onDragOver,x=e.onDrop,w=e.onDropAccepted,N=e.onDropRejected,b=e.onFileDialogCancel,T=e.onFileDialogOpen,j=e.useFsAccessApi,R=e.autoFocus,A=e.preventDropOnDocument,L=e.noClick,z=e.noKeyboard,q=e.noDrag,D=e.noDragEventsBubbling,M=e.onError,P=e.validator,S=E.useMemo(function(){return oB(n)},[n]),F=E.useMemo(function(){return aB(n)},[n]),$=E.useMemo(function(){return typeof T=="function"?T:XE},[T]),I=E.useMemo(function(){return typeof b=="function"?b:XE},[b]),re=E.useRef(null),ne=E.useRef(null),we=E.useReducer(_B,Tx),Ee=uy(we,2),ee=Ee[0],ae=Ee[1],ge=ee.isFocused,H=ee.isFileDialogActive,J=E.useRef(typeof window<"u"&&window.isSecureContext&&j&&sB()),_e=function(){!J.current&&H&&setTimeout(function(){if(ne.current){var X=ne.current.files;X.length||(ae({type:"closeDialog"}),I())}},300)};E.useEffect(function(){return window.addEventListener("focus",_e,!1),function(){window.removeEventListener("focus",_e,!1)}},[ne,H,I,J]);var Ue=E.useRef([]),Ge=function(X){re.current&&re.current.contains(X.target)||(X.preventDefault(),Ue.current=[])};E.useEffect(function(){return A&&(document.addEventListener("dragover",GE,!1),document.addEventListener("drop",Ge,!1)),function(){A&&(document.removeEventListener("dragover",GE),document.removeEventListener("drop",Ge))}},[re,A]),E.useEffect(function(){return!r&&R&&re.current&&re.current.focus(),function(){}},[re,R,r]);var tt=E.useCallback(function(G){M?M(G):console.error(G)},[M]),lt=E.useCallback(function(G){G.preventDefault(),G.persist(),rt(G),Ue.current=[].concat(mB(Ue.current),[G.target]),Vf(G)&&Promise.resolve(i(G)).then(function(X){if(!(ep(G)&&!D)){var me=X.length,Te=me>0&&tB({files:X,accept:S,minSize:c,maxSize:o,multiple:u,maxFiles:d,validator:P}),te=me>0&&!Te;ae({isDragAccept:Te,isDragReject:te,isDragActive:!0,type:"setDraggedFiles"}),f&&f(G)}}).catch(function(X){return tt(X)})},[i,f,tt,D,S,c,o,u,d,P]),Je=E.useCallback(function(G){G.preventDefault(),G.persist(),rt(G);var X=Vf(G);if(X&&G.dataTransfer)try{G.dataTransfer.dropEffect="copy"}catch{}return X&&y&&y(G),!1},[y,D]),Ze=E.useCallback(function(G){G.preventDefault(),G.persist(),rt(G);var X=Ue.current.filter(function(Te){return re.current&&re.current.contains(Te)}),me=X.indexOf(G.target);me!==-1&&X.splice(me,1),Ue.current=X,!(X.length>0)&&(ae({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Vf(G)&&g&&g(G))},[re,g,D]),Nt=E.useCallback(function(G,X){var me=[],Te=[];G.forEach(function(te){var be=B4(te,S),Se=uy(be,2),gt=Se[0],jt=Se[1],ct=H4(te,c,o),Vt=uy(ct,2),bn=Vt[0],vr=Vt[1],Wn=P?P(te):null;if(gt&&bn&&!Wn)me.push(te);else{var or=[jt,vr];Wn&&(or=or.concat(Wn)),Te.push({file:te,errors:or.filter(function(On){return On})})}}),(!u&&me.length>1||u&&d>=1&&me.length>d)&&(me.forEach(function(te){Te.push({file:te,errors:[eB]})}),me.splice(0)),ae({acceptedFiles:me,fileRejections:Te,isDragReject:Te.length>0,type:"setFiles"}),x&&x(me,Te,X),Te.length>0&&N&&N(Te,X),me.length>0&&w&&w(me,X)},[ae,u,S,c,o,d,x,w,N,P]),bt=E.useCallback(function(G){G.preventDefault(),G.persist(),rt(G),Ue.current=[],Vf(G)&&Promise.resolve(i(G)).then(function(X){ep(G)&&!D||Nt(X,G)}).catch(function(X){return tt(X)}),ae({type:"reset"})},[i,Nt,tt,D]),pt=E.useCallback(function(){if(J.current){ae({type:"openDialog"}),$();var G={multiple:u,types:F};window.showOpenFilePicker(G).then(function(X){return i(X)}).then(function(X){Nt(X,null),ae({type:"closeDialog"})}).catch(function(X){lB(X)?(I(X),ae({type:"closeDialog"})):cB(X)?(J.current=!1,ne.current?(ne.current.value=null,ne.current.click()):tt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):tt(X)});return}ne.current&&(ae({type:"openDialog"}),$(),ne.current.value=null,ne.current.click())},[ae,$,I,j,Nt,tt,F,u]),yt=E.useCallback(function(G){!re.current||!re.current.isEqualNode(G.target)||(G.key===" "||G.key==="Enter"||G.keyCode===32||G.keyCode===13)&&(G.preventDefault(),pt())},[re,pt]),Dt=E.useCallback(function(){ae({type:"focus"})},[]),It=E.useCallback(function(){ae({type:"blur"})},[]),Sn=E.useCallback(function(){L||(iB()?setTimeout(pt,0):pt())},[L,pt]),Z=function(X){return r?null:X},je=function(X){return z?null:Z(X)},Oe=function(X){return q?null:Z(X)},rt=function(X){D&&X.stopPropagation()},St=E.useMemo(function(){return function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=G.refKey,me=X===void 0?"ref":X,Te=G.role,te=G.onKeyDown,be=G.onFocus,Se=G.onBlur,gt=G.onClick,jt=G.onDragEnter,ct=G.onDragOver,Vt=G.onDragLeave,bn=G.onDrop,vr=tp(G,hB);return In(In(Sx({onKeyDown:je(Is(te,yt)),onFocus:je(Is(be,Dt)),onBlur:je(Is(Se,It)),onClick:Z(Is(gt,Sn)),onDragEnter:Oe(Is(jt,lt)),onDragOver:Oe(Is(ct,Je)),onDragLeave:Oe(Is(Vt,Ze)),onDrop:Oe(Is(bn,bt)),role:typeof Te=="string"&&Te!==""?Te:"presentation"},me,re),!r&&!z?{tabIndex:0}:{}),vr)}},[re,yt,Dt,It,Sn,lt,Je,Ze,bt,z,q,r]),He=E.useCallback(function(G){G.stopPropagation()},[]),dt=E.useMemo(function(){return function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=G.refKey,me=X===void 0?"ref":X,Te=G.onChange,te=G.onClick,be=tp(G,fB),Se=Sx({accept:S,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Z(Is(Te,bt)),onClick:Z(Is(te,He)),tabIndex:-1},me,ne);return In(In({},Se),be)}},[ne,n,u,bt,r]);return In(In({},ee),{},{isFocused:ge&&!r,getRootProps:St,getInputProps:dt,rootRef:re,inputRef:ne,open:Z(pt)})}function _B(t,e){switch(e.type){case"focus":return In(In({},t),{},{isFocused:!0});case"blur":return In(In({},t),{},{isFocused:!1});case"openDialog":return In(In({},Tx),{},{isFileDialogActive:!0});case"closeDialog":return In(In({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return In(In({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return In(In({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return In({},Tx);default:return t}}function XE(){}const kB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"ufu-dropzone-icon",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z"})}),EB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),NB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:a.jsx("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z"})}),SB=()=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 100-12 6 6 0 000 12zM12 14.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.5h13.628a2.31 2.31 0 011.642 3.953l-.837 1.172-3.44-3.44-3.44 3.44-.837-1.172a2.31 2.31 0 01-1.642-3.953H6.827z"})]}),TB=()=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"})}),CB=({file:t,onRemove:e,onSetMain:n,onMove:r,index:i,fileCount:o})=>{var j;const{url:c,type:u,name:d,size:f,progress:g,error:y,isMain:x}=t,[w,N]=E.useState(!1),b=E.useRef(null),T=(R,A=2)=>{if(!R||R===0)return"0 Bytes";const L=1024,z=A<0?0:A,q=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(R)/Math.log(L));return parseFloat((R/Math.pow(L,D)).toFixed(z))+" "+q[D]};return E.useEffect(()=>{if(u==="video"&&b.current){const R=()=>N(!0);return b.current.addEventListener("loadedmetadata",R),()=>{b.current&&b.current.removeEventListener("loadedmetadata",R)}}},[u]),a.jsxs("div",{className:`ufu-preview-item ${x?"ufu-main-item":""}`,children:[a.jsx("div",{className:"ufu-preview-media",children:u==="image"?a.jsx("img",{src:c,alt:d,className:"object-contain w-full h-full",loading:"eager",onLoad:()=>{},onError:R=>{R.target.onerror=null,R.target.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}):u==="video"?a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:b,src:c,preload:"metadata",playsInline:!0,muted:!0,loop:!0,autoPlay:!0,controls:!1,onLoadedMetadata:()=>N(!0),className:`object-contain w-full h-full ${w?"opacity-100":"opacity-0"}`,onError:R=>{R.target.onerror=null,N(!0)}}),a.jsx("div",{className:`video-overlay ${w?"with-thumbnail":""}`,children:a.jsx(NB,{})})]}):a.jsxs("div",{className:"document-preview",children:[a.jsx(EB,{}),a.jsx("span",{className:"document-ext",children:d&&((j=d.split(".").pop())==null?void 0:j.toUpperCase())||"FILE"})]})}),a.jsxs("div",{className:"ufu-preview-item-info",children:[a.jsx("p",{className:"ufu-preview-item-name",title:d||"Archivo",children:d&&d.length>20?d.substring(0,18)+"...":d||"Archivo"}),a.jsx("p",{className:"ufu-preview-item-size",children:T(f)})]}),a.jsx(dn,{}),a.jsxs("div",{className:"ufu-controls-overlay",children:[a.jsx("button",{type:"button",onClick:R=>{R.stopPropagation();const A=document.createElement("a");if(A.href=c,A.download=d||"archivo",A.target="_blank",c.includes("firebase")){const L=new URL(c);L.searchParams.set("response-content-disposition",`attachment; filename="${d||"archivo"}"`),A.href=L.toString()}document.body.appendChild(A),A.click(),document.body.removeChild(A)},className:"ufu-control-button ufu-download-button",title:"Descargar archivo","aria-label":"Descargar archivo a tu dispositivo",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),a.jsx("button",{type:"button",onClick:R=>{if(R.stopPropagation(),u==="image"){const A=document.createElement("div");A.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const L=document.createElement("img");L.src=c,L.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                object-fit: contain;
                border-radius: 8px;
                cursor: default;
              `;const z=document.createElement("button");z.innerHTML="",z.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,A.appendChild(L),A.appendChild(z),document.body.appendChild(A);const q=()=>{document.body.removeChild(A)};A.addEventListener("click",q),z.addEventListener("click",q);const D=M=>{M.key==="Escape"&&(q(),document.removeEventListener("keydown",D))};document.addEventListener("keydown",D),L.addEventListener("click",M=>M.stopPropagation())}else if(u==="video"){const A=document.createElement("div");A.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const L=document.createElement("video");L.src=c,L.controls=!0,L.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                border-radius: 8px;
                cursor: default;
              `;const z=document.createElement("button");z.innerHTML="",z.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,A.appendChild(L),A.appendChild(z),document.body.appendChild(A);const q=()=>{L.pause(),document.body.removeChild(A)};A.addEventListener("click",q),z.addEventListener("click",q),L.addEventListener("click",D=>D.stopPropagation())}else{const A=document.createElement("a");A.href=c,A.download=d,A.click()}},className:"ufu-control-button ufu-preview-button",title:"Ver archivo","aria-label":"Ver archivo en pantalla completa",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),a.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),e(t.id)},className:"ufu-control-button ufu-delete-button",title:"Eliminar","aria-label":"Eliminar archivo",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),n&&!x&&a.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),n(t.id)},className:"ufu-control-button ufu-set-main-button",title:"Establecer como principal","aria-label":"Establecer como imagen principal",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.622l1.208 5.273a.563.563 0 01-.841.589l-4.743-2.85a.563.563 0 00-.586 0l-4.743 2.85a.563.563 0 01-.841-.589l1.208-5.273a.563.563 0 00-.182-.622l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),r&&o>1&&a.jsxs("div",{className:"ufu-reorder-buttons",children:[a.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),r(i,"up")},disabled:i===0,className:"ufu-control-button",title:"Mover arriba","aria-label":"Mover archivo hacia arriba",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})}),a.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),r(i,"down")},disabled:i===o-1,className:"ufu-control-button",title:"Mover abajo","aria-label":"Mover archivo hacia abajo",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]})]}),x&&a.jsxs("div",{className:"ufu-main-badge",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:a.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c.321-.772 1.415-.772 1.736 0l1.681 4.06c.064.155.24.263.415.284l4.473.65c.803.117 1.125 1.106.547 1.65l-3.238 3.153a.477.477 0 00-.137.53l.764 4.456c.138.806-.702 1.425-1.425 1.053l-3.992-2.1a.498.498 0 00-.465 0l-3.992 2.1c-.723.372-1.563-.247-1.425-1.053l.764-4.456a.477.477 0 00-.137-.53L2.24 9.667c-.578-.544-.256-1.533.547-1.65l4.473-.65a.476.476 0 00.415-.284l1.681-4.06z",clipRule:"evenodd"})}),a.jsx("span",{children:"Principal"})]})]})},sl=si.memo(({files:t=[],onFilesChange:e,acceptedTypes:n="image/*,video/*,application/pdf",multiple:r=!0,maxSize:i=100*1024*1024,maxFiles:o=null,label:c="Medios del Producto",placeholder:u="Arrastra archivos o haz clic para seleccionar",className:d="",showPreview:f=!0,allowReorder:g=!0,allowSetMain:y=!0})=>{const[x,w]=E.useState([]),[N,b]=E.useState(null),[T,j]=E.useState(!1),[R,A]=E.useState(void 0),L=E.useRef(null),[z,q]=E.useState([]),D=E.useRef(!1);E.useEffect(()=>{if(!t||t.length===0){w(ge=>(ge.length>0&&(D.current=!0),[]));return}const ae=t.map((ge,H)=>{if(typeof ge=="string"){const J=ge.split(".").pop().toLowerCase(),_e=["mp4","mov","webm","avi","mkv","m4v"].includes(J);return{id:`existing-${H}-${ge}`,url:ge,type:_e?"video":"image",name:ge.split("/").pop().split("?")[0],size:0,isMain:H===0,isUploaded:!0}}return ge});w(ge=>(JSON.stringify(ge.map(J=>J.id))!==JSON.stringify(ae.map(J=>J.id))&&(D.current=!0),ae))},[t.length,t.map(ae=>typeof ae=="string"?ae:(ae==null?void 0:ae.id)||(ae==null?void 0:ae.url)).join("|")]);const M=E.useCallback((ae,ge)=>{const H=ae.map(J=>{let _e="document";J.type.startsWith("image/")?_e="image":J.type.startsWith("video/")&&(_e="video");const Ue=URL.createObjectURL(J);return{id:`${J.name}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,file:J,url:Ue,type:_e,name:J.name,size:J.size,progress:0,error:null,isMain:!1,isUploading:!1,isUploaded:!1}});ge.length>0&&(console.error("Archivos rechazados:",ge),q(ge.map(({file:J,errors:_e})=>({name:(J==null?void 0:J.name)||"Archivo",messages:(_e||[]).map(Ue=>Ue.message)})))),w(J=>{let _e;if(r){const Ue=[...J,...H];_e=o?Ue.slice(0,o):Ue,o&&Ue.length>o&&(console.warn(`Lmite de ${o} archivos alcanzado. Solo se mantuvieron los primeros ${o}.`),q(Ge=>[...Ge,{name:"Lmite de archivos",messages:[`Lmite de ${o} archivos alcanzado. Solo se mantuvieron los primeros ${o}.`]}]))}else _e=H;return D.current=!0,_e})},[r,o]),P=E.useMemo(()=>{const ae=(n||"").trim();if(!ae||ae==="*/*")return;const ge=ae.split(",").reduce((H,J)=>{const _e=J.trim();return _e&&(H[_e]=[]),H},{});return Object.keys(ge).length?ge:void 0},[n]),{getRootProps:S,getInputProps:F,isDragActive:$,open:I}=X4({onDrop:M,accept:P,maxSize:i,multiple:r,noClick:!1,noKeyboard:!1,preventDropOnDocument:!0}),re=ae=>{w(ge=>{const H=ge.find(_e=>_e.id===ae);H&&H.url&&H.url.startsWith("blob:")&&URL.revokeObjectURL(H.url);const J=ge.filter(_e=>_e.id!==ae).map((_e,Ue)=>({..._e,isMain:Ue===0}));return D.current=!0,J})},ne=ae=>{y&&w(ge=>{const H=ge.find(Ue=>Ue.id===ae);if(!H)return ge;const J=ge.filter(Ue=>Ue.id!==ae),_e=[H,...J].map((Ue,Ge)=>({...Ue,isMain:Ge===0}));return D.current=!0,_e})},we=(ae,ge)=>{g&&w(H=>{const J=ge==="up"?ae-1:ae+1;if(J<0||J>=H.length)return H;const _e=[...H];[_e[ae],_e[J]]=[_e[J],_e[ae]];const Ue=_e.map((Ge,tt)=>({...Ge,isMain:tt===0}));return D.current=!0,Ue})};E.useEffect(()=>{D.current&&(D.current=!1,typeof e=="function"?e(x):console.warn(" onFilesChange no es una funcin"))},[x]);const Ee=ae=>{ae.stopPropagation(),A("environment"),setTimeout(()=>{I(),setTimeout(()=>A(void 0),0)},30)},ee=ae=>{ae.stopPropagation(),A(void 0),setTimeout(()=>{I()},0)};return a.jsxs("div",{className:`universal-file-uploader ${d}`,children:[a.jsxs("div",{...S({className:`ufu-dropzone ${$?"dragging":""} ${T?"drag-over":""}`}),ref:L,onDragEnter:()=>j(!0),onDragLeave:()=>j(!1),onDrop:()=>j(!1),children:[a.jsx("input",{...F({style:{display:"none"},multiple:r,capture:R})}),a.jsxs("div",{className:"ufu-dropzone-content",children:[a.jsx(kB,{}),a.jsxs("div",{className:"ufu-dropzone-desktop-text",children:[a.jsx("p",{className:"ufu-dropzone-text-main",children:c}),a.jsx("p",{className:"ufu-dropzone-text-sub",children:u}),a.jsx("button",{type:"button",onClick:ae=>{ae.stopPropagation(),I()},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Seleccionar Archivos"})]}),a.jsxs("div",{className:"ufu-mobile-buttons",children:[a.jsxs("button",{type:"button",onClick:Ee,className:"ufu-mobile-button","aria-label":"Abrir cmara",children:[a.jsx(SB,{}),a.jsx("span",{children:"Cmara"})]}),a.jsxs("button",{type:"button",onClick:ee,className:"ufu-mobile-button","aria-label":"Abrir galera",children:[a.jsx(TB,{}),a.jsx("span",{children:"Galera"})]})]})]})]}),z.length>0&&a.jsxs("div",{className:"mt-3 p-3 rounded-md bg-red-50 border border-red-200 text-red-700 text-sm",role:"alert",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Algunos archivos fueron rechazados"}),a.jsx("button",{type:"button",onClick:()=>q([]),className:"ml-3 text-red-600 hover:text-red-800","aria-label":"Cerrar",title:"Cerrar",children:""})]}),a.jsx("ul",{className:"list-disc ml-5 mt-2",children:z.map((ae,ge)=>a.jsxs("li",{children:[ae.name?a.jsxs("span",{className:"font-medium",children:[ae.name,": "]}):null,Array.isArray(ae.messages)?ae.messages.join(", "):String(ae)]},`rejected-${ge}-${ae.name||"unknown"}`))})]}),x.length>0?a.jsx("div",{className:"ufu-preview-grid",children:x.map((ae,ge)=>{const H=ae.id||`file-${ge}-${ae.name||"unknown"}-${Date.now()}`;return a.jsx(CB,{file:ae,onRemove:re,onSetMain:y?ne:null,onMove:g?we:null,index:ge,fileCount:x.length},H)})}):a.jsx("div",{className:"text-center text-gray-500 text-sm mt-4 p-4 border-2 border-dashed border-gray-200 rounded",children:" No hay archivos subidos an - Arrastra o selecciona archivos arriba"})]})});sl.displayName="UniversalFileUploader";const Y4=({variantes:t=[],varianteSeleccionada:e=0,onVarianteChange:n,showStock:r=!1,showPrice:i=!0,basePrice:o=0,className:c=""})=>{if(!t||t.length===0)return null;const u=t.filter(y=>y&&typeof y.color=="string"&&y.color.trim());if(u.length===0)return null;const d=y=>{n&&n(y)},f=y=>`RD$ ${Number(y||0).toLocaleString("es-DO",{minimumFractionDigits:2,maximumFractionDigits:2})}`,g=({variante:y,index:x,isSelected:w,isOutOfStock:N,onClick:b})=>{var j,R,A;const T=((R=(j=y.imagenPrincipal)==null?void 0:j[0])==null?void 0:R.url)||y.imagen||((A=y.imagenes)==null?void 0:A[0])||null;return a.jsx("button",{type:"button",onClick:b,className:`
          relative rounded-lg transition-all duration-150 flex-shrink-0 
          w-[130px] sm:w-[145px] xl:w-[160px]
          ${w?"border-[2.5px] border-blue-600":"border border-gray-300 hover:border-gray-400"}
          ${N?"opacity-60 cursor-not-allowed":"cursor-pointer"}
          bg-white overflow-hidden
        `,disabled:N,children:a.jsxs("div",{className:"flex flex-col w-full",children:[T&&a.jsxs("div",{className:"relative w-full bg-white p-3",children:[a.jsx("div",{className:"pt-[100%]"}),a.jsx("img",{src:T,alt:y.color,className:"absolute inset-0 w-full h-full object-contain"})]}),a.jsx("div",{className:"w-full text-center px-2 pt-2 pb-1",children:a.jsx("div",{className:"text-[11px] sm:text-[12px] font-medium text-gray-700 truncate",children:y.color})}),i&&a.jsx("div",{className:"w-full text-center px-2 pb-2",children:a.jsx("div",{className:"text-[13px] sm:text-[14px] font-bold text-gray-900",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:f((y==null?void 0:y.precio)??o)})})]})},x)};return a.jsxs("div",{className:`visual-variant-selector ${c}`,children:[a.jsx("div",{className:"xl:hidden w-full overflow-x-auto scrollbar-hide",children:a.jsx("div",{className:"flex gap-2 pb-2",children:u.map((y,x)=>a.jsx(g,{variante:y,index:x,isSelected:x===e,isOutOfStock:((y==null?void 0:y.cantidad)??0)<=0,onClick:()=>d(x)},x))})}),a.jsx("div",{className:"hidden xl:block w-full",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((y,x)=>a.jsx(g,{variante:y,index:x,isSelected:x===e,isOutOfStock:((y==null?void 0:y.cantidad)??0)<=0,onClick:()=>d(x)},x))})})]})},nn={REQUIRED_FIELDS:["nombre","precio","categoria","descripcion"],MIN_TITLE_LENGTH:10,MAX_TITLE_LENGTH:200,MIN_DESCRIPTION_LENGTH:20,MAX_DESCRIPTION_LENGTH:5e3,MIN_PRICE:.01,MAX_PRICE:1e6,MIN_STOCK:0,MAX_STOCK:999999,MAX_IMAGES:20,MAX_VIDEOS:10,MAX_EXTRAS:3,MAX_VARIANTS:50,MIN_VARIANT_NAME_LENGTH:2,MAX_VARIANT_NAME_LENGTH:100},dr={MISSING_TITLE:"El ttulo del producto es obligatorio",MISSING_PRICE:"El precio del producto es obligatorio",MISSING_CATEGORY:"Debe seleccionar una categora",MISSING_DESCRIPTION:"La descripcin del producto es obligatoria",MISSING_MAIN_IMAGE:"Debe subir al menos una imagen principal",TITLE_TOO_SHORT:`El ttulo debe tener al menos ${nn.MIN_TITLE_LENGTH} caracteres`,TITLE_TOO_LONG:`El ttulo no puede exceder ${nn.MAX_TITLE_LENGTH} caracteres`,DESCRIPTION_TOO_SHORT:`La descripcin debe tener al menos ${nn.MIN_DESCRIPTION_LENGTH} caracteres`,DESCRIPTION_TOO_LONG:`La descripcin no puede exceder ${nn.MAX_DESCRIPTION_LENGTH} caracteres`,INVALID_PRICE:`El precio debe estar entre $${nn.MIN_PRICE} y $${nn.MAX_PRICE}`,INVALID_STOCK:`El stock debe estar entre ${nn.MIN_STOCK} y ${nn.MAX_STOCK}`,TOO_MANY_IMAGES:`Mximo ${nn.MAX_IMAGES} imgenes permitidas`,TOO_MANY_VIDEOS:`Mximo ${nn.MAX_VIDEOS} videos permitidos`,TOO_MANY_EXTRAS:`Mximo ${nn.MAX_EXTRAS} archivos extras permitidos`,TOO_MANY_VARIANTS:`Mximo ${nn.MAX_VARIANTS} variantes permitidas`,VARIANT_NAME_TOO_SHORT:`El nombre de la variante debe tener al menos ${nn.MIN_VARIANT_NAME_LENGTH} caracteres`,VARIANT_NAME_TOO_LONG:`El nombre de la variante no puede exceder ${nn.MAX_VARIANT_NAME_LENGTH} caracteres`,DUPLICATE_VARIANT_NAMES:"No puede haber variantes con el mismo nombre",VARIANT_MISSING_STOCK:"Todas las variantes deben tener stock definido"},Pn={ERROR:"error",WARNING:"warning"},YE=(t,e,n={})=>{const r=[];switch(t){case"nombre":if(!e||!e.trim())r.push({field:"nombre",message:dr.MISSING_TITLE,severity:Pn.ERROR});else{const i=e.trim();i.length<nn.MIN_TITLE_LENGTH&&r.push({field:"nombre",message:dr.TITLE_TOO_SHORT,severity:Pn.ERROR}),i.length>nn.MAX_TITLE_LENGTH&&r.push({field:"nombre",message:dr.TITLE_TOO_LONG,severity:Pn.ERROR})}break;case"precio":if(!e&&e!==0)r.push({field:"precio",message:dr.MISSING_PRICE,severity:Pn.ERROR});else{const i=parseFloat(e);(isNaN(i)||i<nn.MIN_PRICE||i>nn.MAX_PRICE)&&r.push({field:"precio",message:dr.INVALID_PRICE,severity:Pn.ERROR})}break;case"categoria":(!e||!e.trim())&&r.push({field:"categoria",message:dr.MISSING_CATEGORY,severity:Pn.ERROR});break;case"descripcion":if(!e||!e.trim())r.push({field:"descripcion",message:dr.MISSING_DESCRIPTION,severity:Pn.ERROR});else{const i=e.trim();i.length<nn.MIN_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:dr.DESCRIPTION_TOO_SHORT,severity:Pn.ERROR}),i.length>nn.MAX_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:dr.DESCRIPTION_TOO_LONG,severity:Pn.WARNING})}break;case"cantidad":if(e!=null){const i=parseInt(e);(isNaN(i)||i<nn.MIN_STOCK||i>nn.MAX_STOCK)&&r.push({field:"cantidad",message:dr.INVALID_STOCK,severity:Pn.ERROR})}break}return r},jB=(t=[])=>{const e=[];t.length>nn.MAX_VARIANTS&&e.push({field:"variantes",message:dr.TOO_MANY_VARIANTS,severity:Pn.ERROR});const n=[];return t.forEach((r,i)=>{if(!r||typeof r!="object")return;const o=r.color||r.name||"";o.trim().length<nn.MIN_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:dr.VARIANT_NAME_TOO_SHORT,severity:Pn.ERROR}),o.trim().length>nn.MAX_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:dr.VARIANT_NAME_TOO_LONG,severity:Pn.ERROR}),n.includes(o.trim().toLowerCase())?e.push({field:`variantes[${i}].color`,message:dr.DUPLICATE_VARIANT_NAMES,severity:Pn.ERROR}):n.push(o.trim().toLowerCase());const c=parseInt(r.cantidad);(isNaN(c)||c<0)&&e.push({field:`variantes[${i}].cantidad`,message:dr.VARIANT_MISSING_STOCK,severity:Pn.ERROR})}),e},AB=t=>{const e=[];return t.imagen||t.imagenPrincipal&&t.imagenPrincipal.length>0||e.push({field:"imagen",message:dr.MISSING_MAIN_IMAGE,severity:Pn.ERROR}),(t.imagenes||[]).length+(t.imagenesExtra||[]).length>nn.MAX_IMAGES&&e.push({field:"imagenes",message:dr.TOO_MANY_IMAGES,severity:Pn.ERROR}),(t.videoUrls||[]).length+(t.videoAcercaArticulo||[]).length>nn.MAX_VIDEOS&&e.push({field:"videos",message:dr.TOO_MANY_VIDEOS,severity:Pn.ERROR}),(t.imagenesExtra||[]).length>nn.MAX_EXTRAS&&e.push({field:"imagenesExtra",message:dr.TOO_MANY_EXTRAS,severity:Pn.ERROR}),e},IB=t=>{if(!t||typeof t!="object")return[{field:"general",message:"Datos del producto no vlidos",severity:Pn.ERROR}];let e=[];if(nn.REQUIRED_FIELDS.forEach(n=>{try{e=e.concat(YE(n,t[n],t))}catch(r){console.error(`Error validating field ${n}:`,r)}}),t.cantidad!==void 0)try{e=e.concat(YE("cantidad",t.cantidad,t))}catch(n){console.error("Error validating cantidad:",n)}try{e=e.concat(AB(t))}catch(n){console.error("Error validating media:",n)}if(t.variantes&&Array.isArray(t.variantes)&&t.variantes.length>0)try{e=e.concat(jB(t.variantes))}catch(n){console.error("Error validating variants:",n)}return e},PB=t=>{if(!t||typeof t!="object")return{isReady:!1,errorCount:1,warningCount:0,errors:[{field:"general",message:"Datos del producto no vlidos",severity:Pn.ERROR}],canPublish:!1,status:"incomplete"};const e=IB(t),n=e.filter(o=>o.severity===Pn.ERROR).length,r=e.filter(o=>o.severity===Pn.WARNING).length,i=n===0;return{isReady:i,errorCount:n,warningCount:r,errors:e,canPublish:i,status:i?"ready":"incomplete"}},Q4=({product:t,onClose:e,onSave:n,sellerId:r})=>{var qn,Ot,Jt,Jn,Mr;const{usuario:i,usuarioInfo:o}=oi(),[c,u]=E.useState(!0),[d,f]=E.useState(()=>({nombre:(t==null?void 0:t.nombre)||"",empresa:(t==null?void 0:t.empresa)||"",fabricante:(t==null?void 0:t.fabricante)||"",descripcion:(t==null?void 0:t.descripcion)||"",descripcionBreve:(t==null?void 0:t.descripcionBreve)||"",categoria:(t==null?void 0:t.categoria)||"",nuevaCategoria:"",imagen:(t==null?void 0:t.imagen)||"",imagenes:(t==null?void 0:t.imagenes)||[],imagenesExtra:(t==null?void 0:t.imagenesExtra)||[],videoUrl:(t==null?void 0:t.videoUrl)||"",videoUrls:(t==null?void 0:t.videoUrls)||[],videoAcercaArticulo:(t==null?void 0:t.videoAcercaArticulo)||[],oferta:(t==null?void 0:t.oferta)||!1,precioOferta:(t==null?void 0:t.precioOferta)||"",precio:(t==null?void 0:t.precio)||"",cantidad:(t==null?void 0:t.cantidad)||0,estado:(t==null?void 0:t.estado)||"Nuevo",acerca:(t==null?void 0:t.acerca)||[""],detallesProducto:(t==null?void 0:t.detallesProducto)||[],masInformacion:(t==null?void 0:t.masInformacion)||"",variantes:(t==null?void 0:t.variantes)||[],etiquetas:(t==null?void 0:t.etiquetas)||[""],activo:(t==null?void 0:t.activo)!==void 0?t.activo:!0,fechaPublicacion:(t==null?void 0:t.fechaPublicacion)||new Date().toISOString().split("T")[0],peso:(t==null?void 0:t.peso)||"",dimensiones:(t==null?void 0:t.dimensiones)||"",varianteImagenPrincipal:(t==null?void 0:t.varianteImagenPrincipal)||"",imagenPrincipal:(t==null?void 0:t.imagenPrincipal)||(t!=null&&t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:(t==null?void 0:t.galeriaImagenes)||(t==null?void 0:t.imagenes)||[],tresArchivosExtras:(t==null?void 0:t.tresArchivosExtras)||(t==null?void 0:t.imagenesExtra)||[],productStatus:(t==null?void 0:t.productStatus)||"draft",validationScore:(t==null?void 0:t.validationScore)||0,lastValidated:(t==null?void 0:t.lastValidated)||null})),[g,y]=E.useState([]),[x,w]=E.useState([]),[N,b]=E.useState(!1),[T,j]=E.useState(!1),[R,A]=E.useState(""),[L,z]=E.useState((t==null?void 0:t.id)||null),[q,D]=E.useState(!1),[M,P]=E.useState(null),[S,F]=E.useState(!1),$=E.useRef(!0),I=E.useRef(!1),[re,ne]=E.useState({imagen:"",imagenes:[],productVideos:[],acercaVideos:[],variantes:{},extras:[]}),[we,Ee]=E.useState([]),[ee,ae]=E.useState(!1),[ge,H]=E.useState([]),[J,_e]=E.useState(!1),[Ue,Ge]=E.useState(0);E.useEffect(()=>{It(),Sn()},[]),E.useEffect(()=>{t&&(f({...d,nombre:t.nombre||"",empresa:t.empresa||"",precio:t.precio||"",cantidad:t.cantidad||0,descripcion:t.descripcion||"",categoria:t.categoria||"",acerca:t.acerca||[""],etiquetas:t.etiquetas||[""],variantes:t.variantes||[],oferta:t.oferta||!1,precioOferta:t.precioOferta||"",estado:t.estado||"Nuevo",activo:t.activo!==void 0?t.activo:!0,imagen:t.imagen||"",imagenes:(t.imagenes||[]).filter(V=>V&&typeof V=="string"&&V.trim()!==""),videoUrls:(t.videoUrls||[]).filter(V=>V&&typeof V=="string"&&V.trim()!==""),imagenesExtra:(t.imagenesExtra||[]).filter(V=>V&&typeof V=="string"&&V.trim()!==""),videoUrl:t.videoUrl||"",videoAcercaArticulo:t.videoAcercaArticulo||[],varianteImagenPrincipal:t.varianteImagenPrincipal||"",imagenPrincipal:t.imagenPrincipal||(t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:t.galeriaImagenes||t.imagenes||[],tresArchivosExtras:t.tresArchivosExtras||t.imagenesExtra||[],productStatus:t.productStatus||t.estado||"draft"}),setTimeout(()=>{I.current=!0,$.current=!1},500))},[t==null?void 0:t.id]),E.useEffect(()=>{t!=null&&t.id&&L!==t.id&&z(t.id)},[t==null?void 0:t.id]),E.useEffect(()=>{const V=W=>{var fe;if((fe=we==null?void 0:we.some)==null?void 0:fe.call(we,ce=>(ce==null?void 0:ce.status)==="uploading"))return W.preventDefault(),W.returnValue="",""};return window.addEventListener("beforeunload",V),()=>window.removeEventListener("beforeunload",V)},[we]),E.useEffect(()=>{const V=L||(t==null?void 0:t.id);if(!V)return;const W=Bn(mt(Ve,"productos",V),ue=>{if(!ue.exists())return;const fe=ue.data();f(ce=>{var Me,Ce;return{...ce,id:fe.id||V,nombre:fe.nombre??ce.nombre,descripcion:fe.descripcion??ce.descripcion,empresa:fe.empresa??ce.empresa,categoria:fe.categoria??ce.categoria,precio:((Ce=(Me=fe.precio??ce.precio)==null?void 0:Me.toString)==null?void 0:Ce.call(Me))||String(fe.precio??ce.precio??""),cantidad:fe.cantidad??ce.cantidad,etiquetas:Array.isArray(fe.etiquetas)?fe.etiquetas:ce.etiquetas||[],acerca:Array.isArray(fe.acerca)?fe.acerca:ce.acerca||[],imagen:fe.imagen?fe.imagen:ce.imagen,imagenes:Array.isArray(fe.imagenes)&&fe.imagenes.length>0?fe.imagenes.filter(Ne=>Ne&&typeof Ne=="string"&&Ne.trim()!==""):ce.imagenes||[],imagenPrincipal:Array.isArray(fe.imagenPrincipal)?fe.imagenPrincipal:ce.imagenPrincipal||[],galeriaImagenes:Array.isArray(fe.galeriaImagenes)?fe.galeriaImagenes:ce.galeriaImagenes||[],tresArchivosExtras:Array.isArray(fe.tresArchivosExtras)?fe.tresArchivosExtras:ce.tresArchivosExtras||[],imagenesExtra:Array.isArray(fe.imagenesExtra)&&fe.imagenesExtra.length>0?fe.imagenesExtra.filter(Ne=>Ne&&typeof Ne=="string"&&Ne.trim()!==""):ce.imagenesExtra||[],videoUrl:fe.videoUrl||fe.video||ce.videoUrl,videoUrls:Array.isArray(fe.videoUrls)&&fe.videoUrls.length>0?fe.videoUrls.filter(Ne=>Ne&&typeof Ne=="string"&&Ne.trim()!==""):ce.videoUrls||[],videoAcercaArticulo:Array.isArray(fe.videoAcercaArticulo)?fe.videoAcercaArticulo:ce.videoAcercaArticulo||[],variantes:Array.isArray(fe.variantes)?fe.variantes:ce.variantes||[],activo:fe.activo??ce.activo}})});return()=>W()},[L,t==null?void 0:t.id]);const tt=E.useRef(!1);E.useEffect(()=>{if(!tt.current){try{const V="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",W=Array.isArray(d.videoAcercaArticulo)?d.videoAcercaArticulo:[];if(W.some(fe=>String(fe).trim()===V)){const fe=W.filter(Me=>String(Me).trim()!==V);f(Me=>({...Me,videoAcercaArticulo:fe}));const ce=L||(t==null?void 0:t.id);ce&&ji(mt(Ve,"productos",ce),{videoAcercaArticulo:fe,fechaActualizacion:new Date}).catch(Me=>console.error(Me))}}catch(V){console.error(V)}tt.current=!0}},[d.videoAcercaArticulo,L,t==null?void 0:t.id]),E.useEffect(()=>{const W=setTimeout(()=>{try{const ue=PB(d);H(ue.errors||[]);const fe=typeof ue.errorCount=="number"?Math.max(0,100-ue.errorCount*20):ue.isReady?100:0;f(ce=>({...ce,validationScore:fe,lastValidated:new Date().toISOString()}))}catch(ue){console.error("Error running validation summary:",ue)}},500);return()=>clearTimeout(W)},[d.nombre,d.precio,d.categoria,d.descripcion,d.imagenPrincipal,d.galeriaImagenes]),E.useMemo(()=>({id:L||(t==null?void 0:t.id)||"nuevo",nombre:d.nombre||"",precio:parseFloat(d.precio)||0,cantidad:Number(d.cantidad)||0}),[L,t==null?void 0:t.id,d.nombre,d.precio,d.cantidad]);const lt=async()=>{if(t!=null&&t.id)return t.id;if(d!=null&&d.id)return d.id;if(L)return L;try{const V=`prod_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,W={id:V,nombre:(d==null?void 0:d.nombre)||"",descripcion:(d==null?void 0:d.descripcion)||"",empresa:(d==null?void 0:d.empresa)||"",categoria:(d==null?void 0:d.categoria)||"",precio:parseFloat(d==null?void 0:d.precio)||0,cantidad:Number(d==null?void 0:d.cantidad)||0,etiquetas:Array.isArray(d==null?void 0:d.etiquetas)?d.etiquetas:[],acerca:Array.isArray(d==null?void 0:d.acerca)?d.acerca:[],variantes:Array.isArray(d==null?void 0:d.variantes)?d.variantes:[],imagen:"",imagenPrincipal:[],imagenes:[],videoUrls:[],videoAcercaArticulo:[],imagenesExtra:[],activo:!1,ownerUid:(i==null?void 0:i.uid)||null,ownerName:(o==null?void 0:o.displayName)||(i==null?void 0:i.displayName)||"",sellerId:r||(i==null?void 0:i.uid)||null,sellerName:r&&((o==null?void 0:o.storeName)||(o==null?void 0:o.displayName))||"",fechaCreacion:new Date,fechaActualizacion:new Date};return await rr(mt(Ve,"productos",V),W),z(V),f(ue=>({...ue,id:V})),V}catch(V){return console.error(V),null}},Je=async(V,W)=>{if(V)try{await ji(mt(Ve,"productos",V),{...W,fechaActualizacion:new Date})}catch(ue){if(ue.code==="not-found")return;console.error(ue)}},Ze=async(V,W)=>{if(["nuevaCategoria","_tempVideoUrl"].includes(V))return;const ue=(t==null?void 0:t.id)||(d==null?void 0:d.id)||L,fe=!!ue;let ce=ue;!ce&&(fe||(ce=await lt(),!ce))||await Je(ce,{[V]:W})},Nt=V=>String(V||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").slice(0,80),bt=V=>((V==null?void 0:V.name)||"file").replace(/[^\w\s.-]/g,"_").replace(/\s+/g,"_"),pt=({productId:V,section:W,file:ue,variantId:fe=null})=>{const ce=bt(ue);if(fe){if(W==="main")return`products/${V}/variants/${fe}/main/${ce}`;if(W==="gallery")return`products/${V}/variants/${fe}/gallery/${ce}`}else{if(W==="main")return`products/${V}/main/${ce}`;if(W==="gallery")return`products/${V}/gallery/${ce}`;if(W==="videos")return`products/${V}/videos/${ce}`;if(W==="extras")return`products/${V}/extras/${ce}`}return`products/${V}/misc/${ce}`},yt=V=>{const W=(d.variantes||[])[V]||{};if(W.id)return W.id;const ue=`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`;return f(fe=>{const ce=[...fe.variantes||[]];ce[V]={...ce[V]||{},id:ue};const Me={...fe,variantes:ce},Ce=L||(t==null?void 0:t.id);return Ce&&ji(mt(Ve,"productos",Ce),{variantes:ce,fechaActualizacion:new Date}).catch(()=>{}),Me}),ue},Dt=async()=>{try{const W=(await Ji($t(Ve,"categorias"))).docs.map(ue=>({id:ue.id,...ue.data()}));y(W)}catch(V){console.error("Error loading categories:",V)}},It=()=>{Dt()},Sn=()=>{Z()},Z=async()=>{try{const W=(await Ji($t(Ve,"productos"))).docs.map(fe=>{var ce;return(ce=fe.data())==null?void 0:ce.empresa}).filter(Boolean),ue=Array.from(new Set(W)).sort((fe,ce)=>fe.localeCompare(ce));w(ue)}catch(V){console.error("Error cargando marcas:",V),w([])}},je=(V,W)=>{f(ue=>({...ue,[V]:W})),Ze(V,W)},Oe=(V,W,ue)=>{f(fe=>{const ce=fe[V].map((Ce,Ne)=>Ne===W?ue:Ce),Me={...fe,[V]:ce};return Ze(V,ce),Me})},rt=V=>{f(W=>{const ue=[...W[V],V==="variantes"?{color:"",imagen:"",imagenes:[],cantidad:0,descripcion:"",precio:""}:""],fe={...W,[V]:ue};return Ze(V,ue),fe})},St=(V,W)=>{f(ue=>{const fe=ue[V].filter((Me,Ce)=>Ce!==W),ce={...ue,[V]:fe};return Ze(V,fe),ce})},He=(V,W,ue)=>{f(ce=>({...ce,variantes:ce.variantes.map((Me,Ce)=>Ce===V?{...Me,[W]:ue}:Me)}));const fe=L||(t==null?void 0:t.id);if(fe)try{f(ce=>{const Me=ce.variantes.map((Ce,Ne)=>Ne===V?{...Ce,[W]:ue}:Ce);return ji(mt(Ve,"productos",fe),{variantes:Me,fechaActualizacion:new Date}).catch(()=>{}),{...ce,variantes:Me}})}catch{}},dt=V=>{Ge(V)},G=(V,W,ue)=>{f(fe=>{const ce=[...fe.detallesProducto];ce[V]={...ce[V],[W]:ue};const Me={...fe,detallesProducto:ce};return Ze("detallesProducto",ce),Me})},X=()=>{f(V=>{const W=[...V.detallesProducto,{nombre:"",valor:""}],ue={...V,detallesProducto:W};return Ze("detallesProducto",W),ue})},me=V=>{f(W=>{const ue=W.detallesProducto.filter((ce,Me)=>Me!==V),fe={...W,detallesProducto:ue};return Ze("detallesProducto",ue),fe})},Te=async(V,W,ue)=>new Promise((fe,ce)=>{try{const Me=ul(dl,W),Ce=ak(Me,V);Ee(Ne=>Ne.map(oe=>oe.id===ue?{...oe,task:Ce}:oe)),Ce.on("state_changed",Ne=>{const oe=Math.round(Ne.bytesTransferred/Ne.totalBytes*100);P(oe),Ee(Fe=>Fe.map(Ie=>Ie.id===ue?{...Ie,progress:oe}:Ie)),setTimeout(()=>{Ee(Fe=>{const Ie=Fe.find(Ke=>Ke.id===ue);if(Ie&&Ie.status==="uploading"&&(!Ie.progress||Ie.progress===0)&&Ie.task){try{Ie.task.cancel()}catch{}return Fe.map(Ke=>Ke.id===ue?{...Ke,status:"error"}:Ke)}return Fe})},6e3)},Ne=>{Ee(oe=>oe.map(Fe=>Fe.id===ue?{...Fe,status:"error"}:Fe)),ce(Ne)},async()=>{const Ne=await Dd(Ce.snapshot.ref);Ee(oe=>oe.map(Fe=>Fe.id===ue?{...Fe,status:"done"}:Fe)),fe(Ne)})}catch(Me){Ee(Ce=>Ce.map(Ne=>Ne.id===ue?{...Ne,status:"error"}:Ne)),ce(Me)}}),te=async(V,W,ue)=>new Promise((fe,ce)=>{try{const Me=ul(dl,W),Ce=ak(Me,V);Ee(Ne=>Ne.map(oe=>oe.id===ue?{...oe,task:Ce}:oe)),Ce.on("state_changed",Ne=>{const oe=Math.round(Ne.bytesTransferred/Ne.totalBytes*100);P(oe),Ee(Fe=>Fe.map(Ie=>Ie.id===ue?{...Ie,progress:oe}:Ie))},Ne=>{Ee(oe=>oe.map(Fe=>Fe.id===ue?{...Fe,status:"error"}:Fe)),ce(Ne)},async()=>{const Ne=await Dd(Ce.snapshot.ref);Ee(oe=>oe.map(Fe=>Fe.id===ue?{...Fe,status:"done"}:Fe)),fe(Ne)})}catch(Me){Ee(Ce=>Ce.map(Ne=>Ne.id===ue?{...Ne,status:"error"}:Ne)),ce(Me)}}),be=async(V,W,ue,fe,ce=2)=>{let Me;for(let Ce=0;Ce<=ce;Ce++)try{return await V(W,ue,fe)}catch(Ne){Me=Ne,await new Promise(oe=>setTimeout(oe,500*(Ce+1)))}throw Me},Se=async V=>{if(V)try{const W=String(V).trim();if(W.startsWith("/")||W.startsWith("./")||W.startsWith("../")||!W.startsWith("gs://")&&!W.includes("firebasestorage.googleapis.com"))return;const fe=(ce=>{try{const Me=String(ce);if(Me.startsWith("gs://"))return ul(dl,Me);if(Me.includes("firebasestorage.googleapis.com")){const Ce=Me.match(/\/o\/([^?]+)/);if(Ce&&Ce[1]){const Ne=decodeURIComponent(Ce[1]);return ul(dl,Ne)}}return null}catch{return null}})(W);fe&&await j8(fe)}catch{}},gt=V=>{try{const W=String(V).trim().toLowerCase();if(W.includes("youtube.com")||W.includes("youtu.be")||W.includes("vimeo.com"))return"video";const fe=W.split("?")[0].split("#")[0].split(".").pop()||"";return["jpg","jpeg","png","gif","webp","bmp","svg"].includes(fe)?"image":["mp4","mov","avi","mkv","webm","m4v"].includes(fe)?"video":"document"}catch{return"document"}},jt=async()=>{d.imagen&&await Se(d.imagen),je("imagen",""),je("imagenPrincipal",[])},ct=async V=>{if(!($.current||!I.current))try{D(!0);const W=Array.isArray(V)?V:[];if(W.length===0){ne(ce=>({...ce,imagen:""})),await jt();return}const ue=W[0],fe=(ue==null?void 0:ue.url)||"";if(ue!=null&&ue.file){ne(oe=>({...oe,imagen:""})),ne(oe=>({...oe,imagen:fe}));let ce=L||(t==null?void 0:t.id);if(ce||(ce=await lt()),!ce)return;const Me=`${Date.now()}_${ue.file.name}_${Math.random().toString(36).slice(2,7)}`,Ce=pt({productId:ce,section:"main",file:ue.file}),Ne=await be(Te,ue.file,Ce,Me);ne(oe=>({...oe,imagen:""})),f(oe=>{const Fe=[{url:Ne,nombreOriginal:ue.file.name}],Ie={...oe,imagen:Ne,imagenPrincipal:Fe};return console.log(" Guardando en Firestore y actualizando formData...",Ie),Je(ce,{imagen:Ne,imagenPrincipal:Fe}).then(()=>{}).catch(Ke=>{console.error(" Error actualizando Firestore:",Ke)}),Ie})}else fe&&!fe.startsWith("blob:")&&(je("imagen",fe),je("imagenPrincipal",[{url:fe}]),ne(ce=>({...ce,imagen:""})))}catch(W){console.error("handleMainImageUFU error",W)}finally{D(!1),P(null)}},Vt=async V=>{if(!($.current||!I.current))try{D(!0);const W=Array.isArray(V)?V:[];let ue=L||(t==null?void 0:t.id);if(ue||(ue=await lt()),!ue){console.error(" No se pudo obtener ID para galera");return}const fe=W.filter(Ie=>{var Ke,Xe;return(Ie==null?void 0:Ie.file)&&((Xe=(Ke=Ie.file.type)==null?void 0:Ke.startsWith)==null?void 0:Xe.call(Ke,"image/"))}),ce=W.filter(Ie=>{var Ke,Xe;return(Ie==null?void 0:Ie.file)&&((Xe=(Ke=Ie.file.type)==null?void 0:Ke.startsWith)==null?void 0:Xe.call(Ke,"video/"))}),Me=W.filter(Ie=>!(Ie!=null&&Ie.file)&&(Ie==null?void 0:Ie.url)&&!Ie.url.startsWith("blob:")).map(Ie=>Ie.url),Ce=Me.filter(Ie=>gt(Ie)==="image"),Ne=Me.filter(Ie=>gt(Ie)==="video");console.log(" Nuevas imgenes:",fe.length,fe.map(Ie=>{var Ke;return(Ke=Ie.file)==null?void 0:Ke.name})),console.log(" Nuevos videos:",ce.length,ce.map(Ie=>{var Ke;return(Ke=Ie.file)==null?void 0:Ke.name})),console.log(" Imgenes existentes:",Ce.length,Ce),console.log(" Videos existentes:",Ne.length,Ne);const oe=[];for(const Ie of fe)try{const Ke=pt({productId:ue,section:"gallery",file:Ie.file}),Xe=await be(Te,Ie.file,Ke,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);oe.push({url:Xe,nombreOriginal:Ie.file.name})}catch(Ke){console.error(" Error subiendo imagen:",Ie.file.name,Ke)}const Fe=[];for(const Ie of ce)try{const Ke=pt({productId:ue,section:"videos",file:Ie.file}),Xe=await be(te,Ie.file,Ke,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);Fe.push({url:Xe,nombreOriginal:Ie.file.name})}catch(Ke){console.error(" Error subiendo video:",Ie.file.name,Ke)}f(Ie=>{var _r;const Ke=Ce.filter(_t=>_t&&typeof _t=="string"&&_t.trim()!=="").map(_t=>({url:_t,nombreOriginal:_t.split("/").pop().split("?")[0]})),Xe=oe.filter(_t=>(_t==null?void 0:_t.url)&&typeof _t.url=="string"&&_t.url.trim()!==""),Be=Ne.filter(_t=>_t&&typeof _t=="string"&&_t.trim()!=="").map(_t=>({url:_t,nombreOriginal:_t.split("/").pop().split("?")[0]})),Ln=Fe.filter(_t=>(_t==null?void 0:_t.url)&&typeof _t.url=="string"&&_t.url.trim()!==""),sn=[...Ke,...Xe],wn=[...Be,...Ln];console.log("   Imgenes finales:",sn.length,sn);const Ht=!Ie.imagen&&sn.length>0,Zt=Ht?sn[0].url:Ie.imagen,Xr=Ht?sn[0]:((_r=Ie.imagenPrincipal)==null?void 0:_r[0])||{};Ht&&console.log(" No hay imagen principal, usando primera de galera:",Zt);const br={...Ie,imagenes:sn,videoUrls:wn,...Ht?{imagen:Zt,imagenPrincipal:[Xr]}:{}},wr={imagenes:sn,videoUrls:wn,...Ht?{imagen:Zt,imagenPrincipal:[Xr]}:{}};return Je(ue,wr).then(()=>{var _t,Fo;console.log("  - Galera imgenes:",((_t=br.imagenes)==null?void 0:_t.length)||0),console.log("  - Galera videos:",((Fo=br.videoUrls)==null?void 0:Fo.length)||0)}).catch(_t=>{console.error(" ERROR FIRESTORE:",_t)}),br}),ne(Ie=>({...Ie,imagenes:[],productVideos:[]}))}catch(W){console.error(" handleGalleryUFU error general:",W)}finally{D(!1),P(null)}},bn=async V=>{if(!($.current||!I.current))try{D(!0);const W=Array.isArray(V)?V:[];let ue=L||(t==null?void 0:t.id);if(ue||(ue=await lt()),!ue){console.error(" No se pudo obtener ID del producto");return}const fe=W.filter(Ce=>Ce==null?void 0:Ce.file),ce=W.filter(Ce=>!(Ce!=null&&Ce.file)&&(Ce==null?void 0:Ce.url)&&!Ce.url.startsWith("blob:")).map(Ce=>Ce.url),Me=[];for(const Ce of fe)try{const Ne=pt({productId:ue,section:"extras",file:Ce.file}),oe=await be(Te,Ce.file,Ne,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);Me.push(oe)}catch(Ne){console.error(" Error subiendo archivo:",Ce.file.name,Ne)}console.log(" URLs subidas (extras):",Me),f(Ce=>{const Ne=ce.filter(Ke=>Ke&&typeof Ke=="string"&&Ke.trim()!==""),oe=Me.filter(Ke=>Ke&&typeof Ke=="string"&&Ke.trim()!==""),Fe=Array.from(new Set([...Ne,...oe])),Ie={...Ce,imagenesExtra:Fe};return Je(ue,{imagenesExtra:Fe}).then(()=>{}).catch(Ke=>{console.error(" ERROR FIRESTORE:",Ke)}),Ie}),ne(Ce=>({...Ce,extras:[]}))}catch(W){console.error(" handleExtrasUFU error general:",W)}finally{D(!1),P(null)}},vr=async(V,W)=>{if(!($.current||!I.current))try{D(!0);const ue=Array.isArray(V)?V:[];if(ue.length===0){ne(ce=>{var Me;return{...ce,variantes:{...ce.variantes,[W]:{...((Me=ce.variantes)==null?void 0:Me[W])||{},imagen:""}}}}),He(W,"imagen","");return}const fe=ue[0];if(fe!=null&&fe.file){ne(Fe=>{var Ie;return{...Fe,variantes:{...Fe.variantes,[W]:{...((Ie=Fe.variantes)==null?void 0:Ie[W])||{},imagen:""}}}}),ne(Fe=>{var Ie;return{...Fe,variantes:{...Fe.variantes,[W]:{...((Ie=Fe.variantes)==null?void 0:Ie[W])||{},imagen:fe.url}}}});let ce=L||(t==null?void 0:t.id);ce||(ce=await lt());const Me=yt(W),Ce=`${Date.now()}_${fe.file.name}_${Math.random().toString(36).slice(2,7)}`,Ne=pt({productId:ce,section:"main",file:fe.file,variantId:Me}),oe=await be(Te,fe.file,Ne,Ce);ne(Fe=>{var Ie;return{...Fe,variantes:{...Fe.variantes,[W]:{...((Ie=Fe.variantes)==null?void 0:Ie[W])||{},imagen:""}}}}),He(W,"imagen",oe)}else fe!=null&&fe.url&&!fe.url.startsWith("blob:")&&(He(W,"imagen",fe.url),ne(ce=>{var Me;return{...ce,variantes:{...ce.variantes,[W]:{...((Me=ce.variantes)==null?void 0:Me[W])||{},imagen:""}}}}))}catch(ue){console.error("handleVariantMainUFU error",ue)}finally{D(!1),P(null)}},Wn=async(V,W)=>{var ue,fe,ce,Me;if(!($.current||!I.current))try{D(!0);const Ce=Array.isArray(V)?V:[],Ne=Ce.filter(Be=>Be==null?void 0:Be.file).map(Be=>Be.url).filter(Boolean);ne(Be=>{var Ln;return{...Be,variantes:{...Be.variantes,[W]:{...((Ln=Be.variantes)==null?void 0:Ln[W])||{},imagenes:Ne}}}});const oe=Ce.filter(Be=>!(Be!=null&&Be.file)&&(Be==null?void 0:Be.url)&&!Be.url.startsWith("blob:")).map(Be=>Be.url),Fe=Array.isArray((fe=(ue=d.variantes)==null?void 0:ue[W])==null?void 0:fe.imagenes)?d.variantes[W].imagenes:[],Ie=Fe.filter(Be=>!oe.includes(Be));for(const Be of Ie)await Se(Be);JSON.stringify(oe)!==JSON.stringify(Fe)&&He(W,"imagenes",oe);let Ke=L||(t==null?void 0:t.id);if(Ke||(Ke=await lt()),!Ke)return;const Xe=yt(W);for(const Be of Ce)if(Be!=null&&Be.file&&((Me=(ce=Be.file.type)==null?void 0:ce.startsWith)!=null&&Me.call(ce,"image/"))){const Ln=`${Date.now()}_${Be.file.name}_${Math.random().toString(36).slice(2,7)}`,sn=pt({productId:Ke,section:"gallery",file:Be.file,variantId:Xe});try{const wn=await be(Te,Be.file,sn,Ln);f(Ht=>{var _r;const Zt=[...Ht.variantes||[]],Xr=Array.isArray((_r=Zt[W])==null?void 0:_r.imagenes)?Zt[W].imagenes:[];Zt[W]={...Zt[W]||{},imagenes:[...Xr,wn]};const br={...Ht,variantes:Zt},wr=L||(t==null?void 0:t.id);return wr&&ji(mt(Ve,"productos",wr),{variantes:Zt,fechaActualizacion:new Date}).catch(()=>{}),br})}catch(wn){console.error("Variant gallery upload error",wn)}}}catch(Ce){console.error("handleVariantGalleryUFU error",Ce)}finally{D(!1),P(null)}},or=async(V,W)=>{var ue,fe,ce,Me;if(!($.current||!I.current))try{const Ce=Array.isArray(V)?V:[],Ne=Ce.filter(Be=>Be==null?void 0:Be.file).map(Be=>Be.url).filter(Boolean);ne(Be=>{var Ln;return{...Be,variantes:{...Be.variantes,[W]:{...((Ln=Be.variantes)==null?void 0:Ln[W])||{},videos:Ne}}}});const oe=Ce.filter(Be=>!(Be!=null&&Be.file)&&(Be==null?void 0:Be.url)&&!Be.url.startsWith("blob:")).map(Be=>Be.url),Fe=Array.isArray((fe=(ue=d.variantes)==null?void 0:ue[W])==null?void 0:fe.videoUrls)?d.variantes[W].videoUrls:[],Ie=Fe.filter(Be=>!oe.includes(Be));for(const Be of Ie)await Se(Be);JSON.stringify(oe)!==JSON.stringify(Fe)&&He(W,"videoUrls",oe);let Ke=L||(t==null?void 0:t.id);if(Ke||(Ke=await lt()),!Ke)return;const Xe=yt(W);for(const Be of Ce)if(Be!=null&&Be.file&&((Me=(ce=Be.file.type)==null?void 0:ce.startsWith)!=null&&Me.call(ce,"video/"))){const Ln=`${Date.now()}_${Be.file.name}_${Math.random().toString(36).slice(2,7)}`,sn=pt({productId:Ke,section:"gallery",file:Be.file,variantId:Xe});try{const wn=await be(te,Be.file,sn,Ln);f(Ht=>{var _r;const Zt=[...Ht.variantes||[]],Xr=Array.isArray((_r=Zt[W])==null?void 0:_r.videoUrls)?Zt[W].videoUrls:[];Zt[W]={...Zt[W]||{},videoUrls:[...Xr,wn]};const br={...Ht,variantes:Zt},wr=L||(t==null?void 0:t.id);return wr&&ji(mt(Ve,"productos",wr),{variantes:Zt,fechaActualizacion:new Date}).catch(()=>{}),br})}catch(wn){console.error("Variant video upload error",wn)}}}catch(Ce){console.error("handleVariantVideosUFU error",Ce)}},On=async V=>{try{const W={nombre:V,ruta:V.toLowerCase().replace(/\s+/g,"-"),activa:!0,fechaCreacion:new Date,productCount:0};return await rr(mt(Ve,"categorias",W.ruta),W),y(ue=>[...ue,{id:W.ruta,...W}]),W.ruta}catch(W){throw console.error("Error creating category:",W),W}},Dr=async V=>{V.preventDefault();const W=[];String(d.nombre||"").trim()||W.push("El nombre del producto es obligatorio"),String(d.empresa||"").trim();const fe=Ne=>{if(typeof Ne=="number")return Ne;let oe=String(Ne??"").trim();if(!oe)return NaN;oe=oe.replace(/\s/g,""),oe.includes(",")&&/,\d{1,2}$/.test(oe)?oe=oe.replace(/\./g,"").replace(",","."):oe=oe.replace(/,/g,"");const Fe=parseFloat(oe);return Number.isFinite(Fe)?Fe:NaN},ce=fe(d.precio);(!Number.isFinite(ce)||ce<0)&&W.push("Precio invlido");const Me=parseInt(d.cantidad);(!Number.isFinite(Me)||Me<0)&&W.push("Cantidad invlida"),S&&(String(d.nuevaCategoria||"").trim()||W.push("Escribe el nombre de la nueva categora"));let Ce=!1;if(d.oferta){const Ne=String(d.precioOferta??"").trim();if(!Ne)Ce=!0;else{const oe=fe(Ne);(!Number.isFinite(oe)||oe<0||Number.isFinite(ce)&&oe>=ce)&&(Ce=!0)}}if((!d.categoria||d.categoria.trim()==="")&&(!S||!d.nuevaCategoria||d.nuevaCategoria.trim()==="")&&W.push("Debes seleccionar o crear una categora para que el producto aparezca"),W.length){alert(`Corrige los siguientes campos antes de guardar:
- `+W.join(`
- `));return}b(!0);try{let Ne=d.categoria;S&&d.nuevaCategoria.trim()&&(Ne=await On(d.nuevaCategoria.trim())),console.log("GUARDANDO PRODUCTO - Categora:",Ne);let oe={...d,categoria:Ne,precio:Number.isFinite(ce)?ce:0,fechaActualizacion:new Date,acerca:(Array.isArray(d.acerca)?d.acerca:[]).filter(Xe=>String(Xe||"").trim()),etiquetas:(Array.isArray(d.etiquetas)?d.etiquetas:[]).filter(Xe=>String(Xe||"").trim()),variantes:(Array.isArray(d.variantes)?d.variantes:[]).map(Xe=>{const Be=Number.isFinite(parseInt(Xe==null?void 0:Xe.cantidad))?parseInt(Xe.cantidad):0,Ln=(Xe==null?void 0:Xe.precio)!==void 0&&(Xe==null?void 0:Xe.precio)!==null&&String(Xe.precio).trim()!=="",sn=Ln?fe(Xe.precio)||0:void 0;return{...Xe,cantidad:Be,...Ln?{precio:sn}:{},id:(Xe==null?void 0:Xe.id)||`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,imagenPrincipal:(Xe==null?void 0:Xe.imagenPrincipal)||[],galeriaImagenes:(Xe==null?void 0:Xe.galeriaImagenes)||[],imagen:(Xe==null?void 0:Xe.imagen)||"",imagenes:(Xe==null?void 0:Xe.imagenes)||[],videoUrls:(Xe==null?void 0:Xe.videoUrls)||[]}})};Ce&&(oe.oferta=!1,delete oe.precioOferta),delete oe.nuevaCategoria,delete oe._tempVideoUrl,delete oe.media,oe.imagenPrincipal=d.imagenPrincipal||[],oe.galeriaImagenes=d.galeriaImagenes||[],oe.tresArchivosExtras=d.tresArchivosExtras||[],oe.videoAcercaArticulo=d.videoAcercaArticulo||[],oe.imagenesExtra=d.imagenesExtra||[],oe.imagen=d.imagen||"",oe.imagenes=d.imagenes||[],oe.videoUrls=d.videoUrls||[],oe.videoUrl=d.videoUrl||"",oe.varianteImagenPrincipal=d.varianteImagenPrincipal||"",oe.fabricante=d.fabricante||"",oe.descripcionBreve=d.descripcionBreve||"",oe.detallesProducto=d.detallesProducto||[],oe.masInformacion=d.masInformacion||"",oe.modelo=d.modelo||"",oe.numeroArticulo=d.numeroArticulo||"",oe.paisOrigen=d.paisOrigen||"",oe.descripcionGarantia=d.descripcionGarantia||"",oe.empresa&&(oe.empresa=oe.empresa.trim(),oe.empresaNorm=oe.empresa.toLowerCase());const Fe=(t==null?void 0:t.id)||L||(d==null?void 0:d.id)||null;if(t&&!t.id)throw new Error("Producto en edicin sin ID vlido. No se guard para evitar duplicados.");const Ie=!Fe;Ie?oe.activo=!0:oe.activo=!!oe.activo;const Ke=Ie?`prod_${Date.now()}`:Fe;oe.id=Ke,oe.nombre&&!oe.slug&&(oe.slug=Nt(oe.nombre)),Ie&&(oe.fechaCreacion=new Date,oe.ownerUid||(oe.ownerUid=(i==null?void 0:i.uid)||(o==null?void 0:o.uid)||null),oe.ownerName||(oe.ownerName=((o==null?void 0:o.displayName)||(i==null?void 0:i.email)||"").toString())),await rr(mt(Ve,"productos",Ke),{...oe,fechaActualizacion:new Date},{merge:!0}),console.log(" PRODUCTO GUARDADO:",{id:Ke,categoria:oe.categoria,activo:oe.activo,nombre:oe.nombre}),Ie&&z(Ke),window.dispatchEvent(new CustomEvent("productSaved",{detail:{productId:Ke,categoria:oe.categoria,activo:oe.activo}})),typeof n=="function"&&n(),typeof e=="function"&&e()}catch(Ne){console.error("Error saving product:",Ne);let oe="Error al guardar el producto";(Ne==null?void 0:Ne.code)==="permission-denied"?oe="No tienes permisos para guardar este producto":(Ne==null?void 0:Ne.code)==="network-request-failed"?oe="Error de conexin. Verifica tu internet e intntalo de nuevo":typeof(Ne==null?void 0:Ne.message)=="string"&&Ne.message&&(oe=Ne.message),alert(oe)}finally{b(!1)}};return a.jsxs(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-stretch justify-stretch",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[a.jsxs(de.div,{className:"bg-white w-screen h-screen overflow-hidden flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[a.jsxs("div",{className:"bg-blue-700 text-white p-3 md:p-6 flex justify-between items-center sticky top-0 z-10 shadow",children:[a.jsx("h2",{className:"text-lg md:text-2xl font-bold",children:t?"Editar Producto":"Agregar Producto"}),a.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 text-xl md:text-2xl font-bold",children:""})]}),a.jsx("form",{onSubmit:Dr,className:"flex-1 overflow-y-auto p-3 md:p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Informacin bsica del producto"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo del producto *"}),a.jsx("input",{type:"text",required:!0,value:d.nombre,onChange:V=>je("nombre",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"Ej: iPhone 15 Pro Max 256GB"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Marca"}),a.jsxs("select",{value:T?"__nueva__":d.empresa||"",onChange:V=>{V.target.value==="__nueva__"?(j(!0),A("")):(j(!1),je("empresa",V.target.value))},className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200",children:[a.jsx("option",{value:"",children:"Selecciona una marca..."}),x.map(V=>a.jsx("option",{value:V,children:V},V)),a.jsx("option",{value:"__nueva__",children:"+ Agregar nueva marca..."})]}),T&&a.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700",children:[a.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Nueva marca:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:R,onChange:V=>A(V.target.value),onKeyPress:V=>{V.key==="Enter"&&R.trim()&&(je("empresa",R.trim()),w(W=>[...W,R.trim()].sort((ue,fe)=>ue.localeCompare(fe))),j(!1),A(""))},className:"flex-1 px-3 py-2 border-2 border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Ej: Apple, Samsung, Sony...",autoFocus:!0}),a.jsx("button",{type:"button",onClick:()=>{R.trim()&&(je("empresa",R.trim()),w(V=>[...V,R.trim()].sort((W,ue)=>W.localeCompare(ue))),j(!1),A(""))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:""}),a.jsx("button",{type:"button",onClick:()=>{j(!1),A("")},className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:""})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fabricante"}),a.jsx("input",{type:"text",value:d.fabricante,onChange:V=>je("fabricante",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"Ej: Foxconn, Samsung Electronics"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin breve (resumen principal)"}),a.jsx("textarea",{value:d.descripcionBreve||"",onChange:V=>je("descripcionBreve",V.target.value),placeholder:"Resumen breve del producto que aparecer en la lista...",className:"w-full min-h-[80px] px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200",maxLength:200}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((qn=d.descripcionBreve)==null?void 0:qn.length)||0,"/200 caracteres"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Categora o tipo de producto *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{value:S?"":d.categoria,onChange:V=>{V.target.value==="nueva"?F(!0):(F(!1),je("categoria",V.target.value))},className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200",children:[a.jsx("option",{value:"",children:"Seleccionar categora"}),g.map(V=>a.jsx("option",{value:V.id,children:V.nombre},V.id)),a.jsx("option",{value:"nueva",children:"+ Crear nueva categora"})]}),S&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Nombre de la nueva categora",value:d.nuevaCategoria,onChange:V=>je("nuevaCategoria",V.target.value),className:"flex-1 px-3 py-2 border-2 border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),a.jsx("button",{type:"button",onClick:()=>{F(!1),je("nuevaCategoria","")},className:"px-3 py-2 text-gray-500 hover:text-gray-700",children:"Cancelar"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Precio *"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:d.precio,onChange:V=>je("precio",V.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stock *"}),a.jsx("input",{type:"number",min:"0",required:!0,value:d.cantidad,onChange:V=>je("cantidad",parseInt(V.target.value)||0),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"0"})]})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-green-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Detalles del producto (tcnicos y personalizados)"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Agrega detalles especficos de tu producto. Esta parte es dinmica, puedes agregar tantos campos como necesites."}),a.jsxs("div",{className:"space-y-3",children:[d.detallesProducto.map((V,W)=>a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del detalle"}),a.jsx("input",{type:"text",value:V.nombre||"",onChange:ue=>G(W,"nombre",ue.target.value),className:"w-full px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:text-white",placeholder:"Ej: Total de puertos USB"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Valor"}),a.jsx("input",{type:"text",value:V.valor||"",onChange:ue=>G(W,"valor",ue.target.value),className:"w-full px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 dark:bg-gray-700 dark:text-white",placeholder:"Ej: 2"})]}),a.jsx("button",{type:"button",onClick:()=>me(W),className:"mt-6 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Eliminar"})]},W)),a.jsxs("button",{type:"button",onClick:X,className:"w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium flex items-center justify-center gap-2",children:[a.jsx("span",{children:"+"})," Agregar nuevo detalle"]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700",children:[a.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:a.jsx("strong",{children:"Ejemplos de detalles:"})}),a.jsxs("ul",{className:"text-xs text-green-600 dark:text-green-400 mt-1 space-y-1",children:[a.jsx("li",{children:" Color: Negro espacial"}),a.jsx("li",{children:" Material: Aluminio"}),a.jsx("li",{children:" Interfaz: USB-C"}),a.jsx("li",{children:" Dispositivos compatibles: Nintendo Switch 2"}),a.jsx("li",{children:" Fuente de alimentacin: Base Switch 2 / HUB / Adaptador"}),a.jsx("li",{children:" Dimensiones: 15 x 10 x 5 cm"}),a.jsx("li",{children:" Peso: 250g"}),a.jsx("li",{children:" Garanta: 1 ao"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-yellow-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Acerca de este artculo"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Coloca los puntos ms relevantes del producto, en formato de lista (). Estos puntos aparecern debajo del precio en la vista del producto."}),a.jsxs("div",{className:"space-y-3",children:[d.acerca.map((V,W)=>a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Punto ",W+1]}),a.jsx("input",{type:"text",value:V||"",onChange:ue=>Oe("acerca",W,ue.target.value),className:"w-full px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:text-white",placeholder:"Ej: Carga rpida magntica"})]}),d.acerca.length>1&&a.jsx("button",{type:"button",onClick:()=>St("acerca",W),className:"mt-6 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Eliminar"})]},W)),a.jsxs("button",{type:"button",onClick:()=>rt("acerca"),className:"w-full px-4 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors font-medium flex items-center justify-center gap-2",children:[a.jsx("span",{children:"+"})," Agregar nuevo punto"]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:a.jsx("strong",{children:"Ejemplos:"})}),a.jsxs("ul",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1 space-y-1",children:[a.jsx("li",{children:" Carga rpida magntica"}),a.jsx("li",{children:" Compatible con Joy-Con de Nintendo Switch 2"}),a.jsx("li",{children:" Luces RGB ajustables"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-purple-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Ms informacin del producto"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Informacin complementaria, instrucciones, notas de uso o compatibilidad. Esta seccin aparecer debajo de las imgenes adicionales."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin extendida"}),a.jsx("textarea",{value:d.masInformacion||"",onChange:V=>je("masInformacion",V.target.value),placeholder:"Agrega informacin detallada del producto, especificaciones tcnicas, instrucciones de uso, notas de compatibilidad, etc...",className:"w-full min-h-[200px] px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-200"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Puedes usar formato de texto, tablas o listas para organizar la informacin."})]}),a.jsxs("div",{className:"mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[a.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:a.jsx("strong",{children:"Esta seccin se organizar as:"})}),a.jsxs("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-2 space-y-1",children:[a.jsx("p",{children:a.jsx("strong",{children:" Informacin del producto:"})}),a.jsxs("ul",{className:"ml-4 space-y-1",children:[a.jsx("li",{children:" Marca (del campo bsico)"}),a.jsx("li",{children:" Fabricante (del campo bsico)"}),a.jsx("li",{children:" Modelo (si lo agregas aqu)"}),a.jsx("li",{children:" Nmero de artculo (si lo agregas aqu)"}),a.jsx("li",{children:" Pas de origen (si lo agregas aqu)"}),a.jsx("li",{children:" Descripcin de la garanta (si la agregas aqu)"})]}),a.jsx("p",{className:"mt-2",children:a.jsx("strong",{children:" Caractersticas y especificaciones:"})}),a.jsx("ul",{className:"ml-4 space-y-1",children:a.jsx("li",{children:" Los detalles tcnicos que agregaste en la seccin anterior"})}),a.jsx("p",{className:"mt-2",children:a.jsx("strong",{children:" Detalles adicionales:"})}),a.jsx("ul",{className:"ml-4 space-y-1",children:a.jsx("li",{children:" La informacin que escribas en este campo"})})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-gray-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Descripcin completa (opcional)"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Descripcin detallada del producto (campo tradicional para compatibilidad)."}),a.jsx("textarea",{value:d.descripcion||"",onChange:V=>je("descripcion",V.target.value),placeholder:"Escribe la descripcin completa del producto...",className:"w-full min-h-[150px] px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-gray-500 focus:border-gray-500 dark:bg-gray-700 dark:text-white transition-all duration-200"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-base md:text-lg font-semibold text-blue-900 border-b pb-2",children:"Categora y Estado"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categora *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{value:S?"":d.categoria,onChange:V=>{V.target.value==="nueva"?F(!0):(F(!1),je("categoria",V.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Seleccionar categora"}),g.map(V=>a.jsx("option",{value:V.id,children:V.nombre},V.id)),a.jsx("option",{value:"nueva",children:"+ Crear nueva categora"})]}),S&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Nombre de la nueva categora",value:d.nuevaCategoria,onChange:V=>je("nuevaCategoria",V.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),a.jsx("button",{type:"button",onClick:()=>{F(!1),je("nuevaCategoria","")},className:"px-3 py-2 text-gray-500 hover:text-gray-700",children:"Cancelar"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),a.jsxs("select",{value:d.estado,onChange:V=>je("estado",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"Nuevo",children:"Nuevo"}),a.jsx("option",{value:"Usado",children:"Usado"}),a.jsx("option",{value:"Usado como nuevo",children:"Usado como nuevo"}),a.jsx("option",{value:"Reacondicionado",children:"Reacondicionado"}),a.jsx("option",{value:"Reparado",children:"Reparado"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Publicacin"}),a.jsx("input",{type:"date",value:d.fechaPublicacion,onChange:V=>je("fechaPublicacion",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.oferta,onChange:V=>je("oferta",V.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"En oferta"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.activo,onChange:V=>je("activo",V.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Producto activo"]})]}),d.oferta&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de Oferta"}),a.jsx("input",{type:"number",step:"0.01",value:d.precioOferta,onChange:V=>je("precioOferta",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Precio con descuento"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (opcional)"}),a.jsx("input",{type:"text",value:d.peso,onChange:V=>je("peso",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 1.5 kg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensiones (opcional)"}),a.jsx("input",{type:"text",value:d.dimensiones,onChange:V=>je("dimensiones",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 30x20x10 cm"})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Imgenes y Multimedia"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Imagen Principal *"}),a.jsx(sl,{files:d.imagen&&typeof d.imagen=="string"?[{id:"saved-main",url:d.imagen,type:"image",name:((Jt=(Ot=d.imagenPrincipal)==null?void 0:Ot[0])==null?void 0:Jt.nombreOriginal)||d.imagen.split("/").pop().split("?")[0]||"imagen-principal",size:0,isUploaded:!0}]:re.imagen?[{id:"temp-main",url:re.imagen,type:"image",name:"imagen-principal",size:0,isUploaded:!1}]:[],onFilesChange:ct,acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen principal",allowReorder:!1,allowSetMain:!1}),d.imagen&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" De qu variante/color es esta imagen principal?"}),a.jsx("input",{type:"text",value:d.varianteImagenPrincipal||"",onChange:V=>{const W=V.target.value;f(ue=>({...ue,varianteImagenPrincipal:W})),(L||t!=null&&t.id)&&Je(L||t.id,{varianteImagenPrincipal:W}).catch(ue=>console.error("Error actualizando variante de imagen principal:",ue))},placeholder:"Ej: Negro, Azul, Rojo, etc. (Dejar vaco si es genrica)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Escribe el color o variante que representa esta imagen. En VistaProducto ser parte del selector de variantes."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Galera (Imgenes y Videos)"}),a.jsx(sl,{files:[...Array.isArray(d.imagenes)&&d.imagenes.length>0?d.imagenes.map((V,W)=>{const ue=typeof V=="string"?V:(V==null?void 0:V.url)||V,fe=typeof V=="object"&&(V==null?void 0:V.nombreOriginal)||ue.split("/").pop().split("?")[0]||`imagen-${W+1}`;return{id:`saved-img-${W}`,url:ue,type:"image",name:fe,size:0,isUploaded:!0}}):[],...Array.isArray(d.videoUrls)&&d.videoUrls.length>0?d.videoUrls.map((V,W)=>{const ue=typeof V=="string"?V:(V==null?void 0:V.url)||V,fe=typeof V=="object"&&(V==null?void 0:V.nombreOriginal)||ue.split("/").pop().split("?")[0]||`video-${W+1}`;return{id:`saved-vid-${W}`,url:ue,type:"video",name:fe,size:0,isUploaded:!0}}):[],...(!d.imagenes||d.imagenes.length===0)&&Array.isArray(re.imagenes)?re.imagenes.map((V,W)=>({id:`temp-gallery-img-${W}`,url:V,type:"image",name:V.split("/").pop().split("?")[0]||`imagen-${W+1}`,size:0,isUploaded:!1})):[],...(!d.videoUrls||d.videoUrls.length===0)&&Array.isArray(re.productVideos)?re.productVideos.map((V,W)=>({id:`temp-gallery-vid-${W}`,url:V,type:"video",name:V.split("/").pop().split("?")[0]||`video-${W+1}`,size:0,isUploaded:!1})):[]],onFilesChange:Vt,acceptedTypes:"image/*,video/*",multiple:!0,label:"Galera (Imgenes y Videos)",placeholder:"Arrastra o selecciona imgenes o videos",allowReorder:!0,allowSetMain:!0})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Detalles del Producto"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caractersticas (Acerca de)"}),d.acerca.map((V,W)=>a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("input",{type:"text",value:V,onChange:ue=>Oe("acerca",W,ue.target.value),placeholder:"Caracterstica del producto",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("button",{type:"button",onClick:()=>St("acerca",W),className:"px-3 py-2 text-red-500 hover:text-red-700",children:""})]},W)),a.jsx("button",{type:"button",onClick:()=>rt("acerca"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar caracterstica"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiquetas (para bsqueda)"}),d.etiquetas.map((V,W)=>a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("input",{type:"text",value:V,onChange:ue=>Oe("etiquetas",W,ue.target.value),placeholder:"Etiqueta",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("button",{type:"button",onClick:()=>St("etiquetas",W),className:"px-3 py-2 text-red-500 hover:text-red-700",children:""})]},W)),a.jsx("button",{type:"button",onClick:()=>rt("etiquetas"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar etiqueta"})]})]}),a.jsxs("div",{className:"mt-8 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-base md:text-lg font-semibold text-blue-900 border-b pb-2",children:"Variantes del Producto"}),d.variantes&&d.variantes.length>1&&a.jsx("div",{className:"mb-4",children:a.jsx(Y4,{variants:d.variantes.map((V,W)=>{var ue,fe;return{id:V.id||`var_${W}`,name:V.color||`Variante ${W+1}`,price:V.precio,stock:V.cantidad,image:((fe=(ue=V.imagenPrincipal)==null?void 0:ue[0])==null?void 0:fe.url)||V.imagen,isSelected:Ue===W}}),productMainImage:((Mr=(Jn=d.imagenPrincipal)==null?void 0:Jn[0])==null?void 0:Mr.url)||d.imagen,onVariantChange:dt,className:"max-w-md"})})]}),d.variantes.map((V,W)=>{var ue,fe,ce,Me,Ce,Ne;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-6 bg-gray-50",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h4",{className:"font-semibold text-lg text-gray-900",children:["Variante ",W+1]}),a.jsx("button",{type:"button",onClick:()=>St("variantes",W),className:"px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:"Eliminar"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color/Tipo"}),a.jsx("input",{type:"text",value:V.color,onChange:oe=>He(W,"color",oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. Rojo, Azul, Edicin Especial"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad en Stock"}),a.jsx("input",{type:"number",min:"0",value:V.cantidad,onChange:oe=>He(W,"cantidad",parseInt(oe.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de la variante (opcional)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:V.precio??"",onChange:oe=>He(W,"precio",oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. 1999.99"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin de la variante"}),a.jsx("textarea",{rows:2,value:V.descripcion||"",onChange:oe=>He(W,"descripcion",oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. Color nen, control edicin especial, etc."})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Imgenes de la Variante"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Imagen Principal de Variante"}),a.jsx(sl,{files:[...(fe=(ue=re.variantes)==null?void 0:ue[W])!=null&&fe.imagen?[{id:`temp-var${W}-main`,url:re.variantes[W].imagen,type:"image",name:`var${W}-imagen`,size:0,isUploaded:!1}]:[],...V.imagen&&typeof V.imagen=="string"?[{id:`saved-var${W}-main`,url:V.imagen,type:"image",name:`var${W}-imagen`,size:0,isUploaded:!0}]:[]],onFilesChange:oe=>vr(oe,W),acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen",allowReorder:!1,allowSetMain:!1})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Galera de Imgenes"}),a.jsx(sl,{files:[...Array.isArray(V.imagenes)?V.imagenes.map((oe,Fe)=>({id:`saved-var${W}-img-${Fe}`,url:typeof oe=="string"?oe:(oe==null?void 0:oe.url)||oe,type:"image",name:`var${W}-img-${Fe+1}`,size:0,isUploaded:!0})):[],...(((Me=(ce=re.variantes)==null?void 0:ce[W])==null?void 0:Me.imagenes)||[]).map((oe,Fe)=>({id:`temp-var${W}-img-${Fe}`,url:oe,type:"image",name:`var${W}-img-${Fe+1}`,size:0,isUploaded:!1}))],onFilesChange:oe=>Wn(oe,W),acceptedTypes:"image/*",multiple:!0,label:"Galera",placeholder:"Arrastra o selecciona imgenes",allowReorder:!0,allowSetMain:!0})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Videos de la Variante (Opcional)"}),a.jsx(sl,{files:[...Array.isArray(V.videoUrls)?V.videoUrls.map((oe,Fe)=>({id:`saved-var${W}-vid-${Fe}`,url:typeof oe=="string"?oe:(oe==null?void 0:oe.url)||oe,type:"video",name:`video-${Fe+1}`,size:0,isUploaded:!0})):[],...(((Ne=(Ce=re.variantes)==null?void 0:Ce[W])==null?void 0:Ne.videos)||[]).map((oe,Fe)=>({id:`temp-var${W}-video-${Fe}`,url:oe,type:"video",name:`video-${Fe+1}`,size:0,isUploaded:!1}))],onFilesChange:oe=>or(oe,W),acceptedTypes:"video/*",multiple:!0,label:"Videos",placeholder:"Arrastra o selecciona videos",allowReorder:!0,allowSetMain:!0})]})]})]},W)}),a.jsxs("button",{type:"button",onClick:()=>rt("variantes"),className:"w-full md:w-auto px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Agregar Variante"]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Imgenes con ms informacin del artculo"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:'Imgenes que se mostrarn en la seccin "Ms informacin del producto"'}),a.jsx(sl,{files:[...(d.imagenesExtra||[]).map((V,W)=>({id:`saved-info-${W}`,url:V,type:gt(V),name:(String(V).split("/").pop()||`info-${W+1}`).split("?")[0],size:0,isUploaded:!0})),...(re.extras||[]).map((V,W)=>({id:`temp-info-${W}`,url:V,type:"image",name:`info-${W+1}`,size:0,isUploaded:!1}))],onFilesChange:bn,acceptedTypes:"image/*",multiple:!0,label:"Imgenes informativas del producto",placeholder:" Arrastra o selecciona imgenes de alta resolucin con informacin adicional del producto",allowReorder:!0,allowSetMain:!1})]})]}),a.jsxs("div",{className:"mt-8 flex justify-end space-x-4 pt-6 border-t",children:[a.jsx("button",{type:"button",onClick:e,className:"px-8 py-3 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium text-lg",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:N,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg flex items-center space-x-2",children:N?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Guardando..."})]}):a.jsx("span",{children:"Guardar Producto"})})]})]})})]}),a.jsx(dn,{children:(q||(we==null?void 0:we.some(V=>V.status==="uploading")))&&a.jsx(de.div,{className:"upload-loader-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsxs("div",{className:"upload-loader-container",children:[a.jsxs("div",{className:"loader",children:[a.jsx("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:a.jsx("defs",{children:a.jsxs("mask",{id:"clipping",children:[a.jsx("polygon",{points:"0,0 100,0 100,100 0,100",fill:"black"}),a.jsx("polygon",{points:"25,25 75,25 50,75",fill:"white"}),a.jsx("polygon",{points:"50,25 75,75 25,75",fill:"white"}),a.jsx("polygon",{points:"35,35 65,35 50,65",fill:"white"}),a.jsx("polygon",{points:"35,35 65,35 50,65",fill:"white"}),a.jsx("polygon",{points:"35,35 65,35 50,65",fill:"white"}),a.jsx("polygon",{points:"35,35 65,35 50,65",fill:"white"})]})})}),a.jsx("div",{className:"box"})]}),a.jsx("div",{className:"upload-loader-text",children:"Subiendo archivos..."}),a.jsxs("div",{className:"upload-loader-subtext",children:[(we==null?void 0:we.filter(V=>V.status==="uploading").length)||0," ","archivo(s) en progreso"]})]})})})]})},np=({size:t="medium",color:e="blue",className:n="",fullScreen:r=!1,text:i=null})=>{const o={small:"loading-spinner-small",medium:"loading-spinner-medium",large:"loading-spinner-large",xlarge:"loading-spinner-xlarge"},c={blue:"loading-spinner-blue",white:"loading-spinner-white",gray:"loading-spinner-gray",green:"loading-spinner-green",red:"loading-spinner-red"};return r?a.jsx("div",{className:"loading-spinner-fullscreen",children:a.jsxs("div",{className:"loading-spinner-container",children:[a.jsx("div",{className:`loading-spinner ${o[t]} ${c[e]} ${n}`}),i&&a.jsx("p",{className:"loading-spinner-text",children:i})]})}):a.jsxs("div",{className:`loading-spinner-inline ${n}`,children:[a.jsx("div",{className:`loading-spinner ${o[t]} ${c[e]}`}),i&&a.jsx("span",{className:"loading-spinner-text-inline",children:i})]})};function RB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function DB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function MB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function OB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function LB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function VB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function FB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function J4(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function F1(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function UB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function $B(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function QE(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Z4(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function zB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function BB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function JE(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function HB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function cm(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function WB(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Cx(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}const Cl="phantomCategories",U1=()=>{try{const t=localStorage.getItem(Cl);return t?JSON.parse(t):[]}catch(t){return console.error("Error al leer categoras fantasma:",t),[]}},qB=t=>{try{const e=U1();return e.includes(t)?!1:(e.push(t),localStorage.setItem(Cl,JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:Cl,newValue:JSON.stringify(e),url:window.location.href})),console.log(` Categora ${t} agregada a fantasmas. Total: ${e.length}`),!0)}catch(e){return console.error("Error al agregar categora fantasma:",e),!1}},GB=()=>{try{const e=U1().length;return localStorage.setItem(Cl,JSON.stringify([])),window.dispatchEvent(new StorageEvent("storage",{key:Cl,newValue:JSON.stringify([]),url:window.location.href})),console.log(` ${e} categoras fantasma limpiadas`),e}catch(t){return console.error("Error al limpiar categoras fantasma:",t),0}},KB=async t=>{try{const e=mt(Ve,"categorias",t);return(await qr(e)).exists()?!0:(console.log(` Categora ${t} no existe en Firebase - marcando como fantasma`),qB(t),!1)}catch(e){return console.error(`Error verificando categora ${t}:`,e),!1}},XB=async()=>{try{const t=U1();console.log(` Limpiando ${t.length} categoras fantasma...`);const e=[],n=[];for(const r of t)await KB(r)?(n.push(r),console.log(` Categora ${r} recuperada (ya no es fantasma)`)):e.push(r);return localStorage.setItem(Cl,JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:Cl,newValue:JSON.stringify(e),url:window.location.href})),console.log(` Limpieza completada: ${n.length} recuperadas, ${e.length} siguen siendo fantasmas`),{total:t.length,recovered:n.length,stillPhantoms:e.length}}catch(t){return console.error("Error durante limpieza de categoras fantasma:",t),null}},YB="ZeiFzBgosCd0apv9cXL6aQZCYyu2",eA=({onAddProduct:t,onEditProduct:e})=>{const{usuario:n}=oi(),r=(n==null?void 0:n.uid)===YB,[i,o]=E.useState([]),[c,u]=E.useState([]),[d,f]=E.useState(!0),[g,y]=E.useState(""),[x,w]=E.useState(""),[N,b]=E.useState("fechaCreacion"),[T,j]=E.useState(()=>{try{const Z=localStorage.getItem("phantomProducts");return Z?JSON.parse(Z):[]}catch{return[]}});E.useEffect(()=>{n||console.warn("! No hay usuario autenticado")},[n]);const[R,A]=E.useState("desc"),[L,z]=E.useState(!1),[q,D]=E.useState(null),[M,P]=E.useState(null),[S,F]=E.useState(null),[$,I]=E.useState(""),[re,ne]=E.useState(""),[we,Ee]=E.useState(""),[ee,ae]=E.useState(""),[ge,H]=E.useState(""),[J,_e]=E.useState(""),[Ue,Ge]=E.useState("");E.useEffect(()=>{tt()},[]),E.useEffect(()=>{const Z=lt();return()=>{typeof Z=="function"&&Z()}},[n==null?void 0:n.uid]),E.useEffect(()=>{const Z=je=>{if(je.key==="phantomProducts")try{const Oe=je.newValue?JSON.parse(je.newValue):[];j(Oe)}catch(Oe){console.error("Error al parsear phantomProducts:",Oe)}};return window.addEventListener("storage",Z),()=>window.removeEventListener("storage",Z)},[]);const tt=async()=>{try{const je=(await Ji($t(Ve,"categorias"))).docs.map(Oe=>({id:Oe.id,...Oe.data()}));u(je)}catch(Z){console.error("Error loading categories:",Z)}},lt=()=>{try{let Z;return r?Z=pn($t(Ve,"productos"),Ca("fechaCreacion","desc")):n!=null&&n.uid?Z=pn($t(Ve,"productos"),Pr("ownerUid","==",n.uid)):Z=pn($t(Ve,"productos"),Pr("activo","==",!0)),Bn(Z,Oe=>{j(rt=>{const St=[];return Oe.docs.forEach(He=>{!rt.includes(He.id)&&He.exists()&&St.push({id:He.id,...He.data()})}),o(St),f(!1),rt})},Oe=>{console.error("Error en listener:",Oe),f(!1)})}catch(Z){return console.error("Error loading products:",Z),f(!1),null}};E.useMemo(()=>{if(!r)return[];const Z=new Set;return i.forEach(je=>{const Oe=(je.ownerName||je.empresa||"").trim();Oe&&Z.add(Oe)}),Array.from(Z).sort((je,Oe)=>je.localeCompare(Oe))},[r,i]);const Je=Z=>{try{return typeof(Z==null?void 0:Z.cantidad)=="number"?Number(Z.cantidad)||0:Array.isArray(Z==null?void 0:Z.variantes)&&Z.variantes.length?Z.variantes.reduce((je,Oe)=>je+(parseInt(Oe==null?void 0:Oe.cantidad)||0),0):Number.POSITIVE_INFINITY}catch{return Number.POSITIVE_INFINITY}},Ze=async(Z,je)=>{try{const Oe=mt(Ve,"productos",Z);if(!(await qr(Oe)).exists()){console.warn(`! Producto ${Z} no existe en Firebase - eliminando del estado local`),o(St=>St.filter(He=>He.id!==Z)),alert("Este producto no existe en la base de datos y ha sido eliminado de la lista.");return}await ji(Oe,{activo:!je,fechaActualizacion:new Date})}catch(Oe){console.error("Error updating product status:",Oe),alert(`Error al actualizar el estado del producto: ${Oe.message}`)}},Nt=async Z=>{try{const je=mt(Ve,"productos",Z.id),Oe=await qr(je);if(!Oe.exists()){console.warn(`! Producto ${Z.id} no existe en Firebase - eliminando del estado local`),o(dt=>dt.filter(G=>G.id!==Z.id)),alert("Este producto no existe en la base de datos y ha sido eliminado de la lista. No se puede duplicar.");return}const rt=Oe.data(),St=`prod_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,He=JSON.parse(JSON.stringify(rt));He.nombre=`${rt.nombre} (Copia)`,He.fechaCreacion=new Date,He.fechaActualizacion=new Date,!He.categoria&&rt.categoria&&(He.categoria=rt.categoria),He.activo=!0,He.estado||(He.estado="activo"),Array.isArray(He.variantes)&&He.variantes.length>0&&(He.variantes=He.variantes.map(dt=>{const G={...dt};return G.id=`var_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,Array.isArray(G.media)&&G.media.length>0&&(G.media=G.media.map(X=>({...X,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),G})),Array.isArray(He.media)&&He.media.length>0&&(He.media=He.media.map(dt=>({...dt,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),Array.isArray(He.imagenes)&&He.imagenes.length>0&&(He.imagenes=[...He.imagenes]),await rr(mt(Ve,"productos",St),He),await new Promise(dt=>setTimeout(dt,500)),alert(`Producto duplicado exitosamente con ID: ${St}`)}catch(je){console.error("Error duplicating product:",je),alert(`Error al duplicar el producto: ${je.message}`)}},bt=async(Z,je,Oe)=>{try{const rt=mt(Ve,"productos",Z);if(!(await qr(rt)).exists()){console.warn(`! Producto ${Z} no existe en Firebase - eliminando del estado local`),o(He=>He.filter(dt=>dt.id!==Z)),alert("Este producto no existe en la base de datos y ha sido eliminado de la lista.");return}await ji(rt,{[je]:Oe,fechaActualizacion:new Date})}catch(rt){console.error(`Error updating ${je}:`,rt),alert(`Error al actualizar ${je}: ${rt.message}`)}},pt=async()=>{if(!q)return;const Z=q.id,je=q.nombre||"Producto";z(!1),D(null);try{const Oe=mt(Ve,"productos",Z);if(!(await qr(Oe)).exists()){j(G=>{if(!G.includes(Z)){const X=[...G,Z];return localStorage.setItem("phantomProducts",JSON.stringify(X)),X}return G}),o(G=>G.filter(X=>X.id!==Z));const dt=document.createElement("div");dt.textContent=`"${je}" eliminado permanentemente (fantasma limpiado)`,dt.style.cssText=`
          position: fixed;
          top: 20px;
          right: 20px;
          background: #dc2626;
          color: white;
          padding: 16px 24px;
          border-radius: 8px;
          font-weight: 600;
          z-index: 10000;
          box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        `,document.body.appendChild(dt),setTimeout(()=>dt.remove(),3e3);return}if(await Lp(Oe),(await qr(Oe)).exists()){console.error("ERROR: El producto AN EXISTE despus de deleteDoc"),alert("Error: No se pudo eliminar de Firebase. Verifica los permisos.");return}o(dt=>dt.filter(G=>G.id!==Z));const He=document.createElement("div");He.textContent=`"${je}" eliminado`,He.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #2563eb;
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        font-weight: 600;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      `,document.body.appendChild(He),setTimeout(()=>He.remove(),3e3)}catch(Oe){console.error("Error al eliminar producto:",Oe.code,Oe.message),alert(`Error: ${Oe.message}`)}},yt=i.filter(Z=>{var je;try{const Oe=g.toLowerCase(),rt=(Z.nombre||"").toLowerCase().includes(Oe)||(Z.descripcion||"").toLowerCase().includes(Oe)||(Z.empresa||"").toLowerCase().includes(Oe)||(Z.categoria||"").toLowerCase().includes(Oe),St=!x||Z.categoria===x,He=!$||($==="activo"?Z.activo!==!1:Z.activo===!1),dt=Je(Z),G=Number.isFinite(dt)?dt<=0?"agotado":dt<=5?"bajo":"disponible":"disponible",X=!re||G===re,me=parseFloat(Z.precio)||0,Te=(we===""||me>=parseFloat(we))&&(ee===""||me<=parseFloat(ee)),te=(je=Z==null?void 0:Z.fechaCreacion)!=null&&je.seconds?Z.fechaCreacion.seconds*1e3:Z!=null&&Z.fechaCreacion?new Date(Z.fechaCreacion).getTime():null,be=!ge||te&&te>=new Date(ge).setHours(0,0,0,0),Se=!J||te&&te<=new Date(J).setHours(23,59,59,999),gt=be&&Se,jt=!r||!Ue||(Z.ownerName||Z.empresa||"")===Ue;return rt&&St&&He&&X&&Te&&gt&&jt}catch(Oe){return console.warn("Error filtrando producto:",Z==null?void 0:Z.id,Oe),!1}}).sort((Z,je)=>{let Oe=Z[N],rt=je[N];return N==="precio"?(Oe=parseFloat(Oe)||0,rt=parseFloat(rt)||0):(N==="fechaCreacion"||N==="fechaActualizacion")&&(Oe=new Date(Oe!=null&&Oe.seconds?Oe.seconds*1e3:Oe),rt=new Date(rt!=null&&rt.seconds?rt.seconds*1e3:rt)),R==="asc"?Oe>rt?1:-1:Oe<rt?1:-1}),Dt=Z=>{const je=c.find(Oe=>Oe.id===Z);return(je==null?void 0:je.nombre)||Z},It=Z=>Z?(Z.seconds?new Date(Z.seconds*1e3):new Date(Z)).toLocaleDateString("es-ES"):"N/A",Sn=Z=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(Z||0);return d?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(np,{size:"large",color:"blue",text:"Cargando productos..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestin de Productos"}),a.jsxs("p",{className:"text-gray-600",children:[i.length," productos en total"]})]}),a.jsxs("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:"+"}),"Agregar Producto"]})]}),a.jsx("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm border",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{children:a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",placeholder:"Buscar productos...",value:g,onChange:Z=>y(Z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})})})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categora"}),a.jsxs("select",{value:x,onChange:Z=>w(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todas las categoras"}),c.map(Z=>a.jsx("option",{value:Z.id,children:Z.nombre},Z.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordenar por"}),a.jsxs("select",{value:N,onChange:Z=>b(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"fechaCreacion",children:"Fecha de creacin"}),a.jsx("option",{value:"fechaActualizacion",children:"ltima actualizacin"}),a.jsx("option",{value:"nombre",children:"Nombre"}),a.jsx("option",{value:"precio",children:"Precio"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),a.jsxs("select",{value:R,onChange:Z=>A(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"desc",children:"Descendente"}),a.jsx("option",{value:"asc",children:"Ascendente"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 md:gap-6",children:a.jsx(dn,{children:yt.map(Z=>a.jsxs(de.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"relative h-48 bg-white rounded-t-lg overflow-hidden flex items-center justify-center",children:[(()=>{try{const je=Z.imagen||(Array.isArray(Z.imagenes)&&Z.imagenes.length>0?Z.imagenes[0]:null)||(Array.isArray(Z.variantes)&&Z.variantes.length>0&&Z.variantes[0].imagen?Z.variantes[0].imagen:null);return je?a.jsx("img",{src:je,alt:Z.nombre||"Producto",className:"w-full h-full object-contain",onError:Oe=>{Oe.target.style.display="none",Oe.target.nextSibling.style.display="flex"}}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:a.jsx("span",{className:"text-sm",children:"Sin imagen"})})}catch(je){return console.warn("Error renderizando imagen del producto:",Z.id,je),a.jsx("div",{className:"w-full h-full flex items-center justify-center text-red-400 bg-red-50",children:a.jsx("span",{className:"text-sm",children:"Error en imagen"})})}})(),a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 bg-gray-50",style:{display:"none"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("span",{className:"text-sm",children:"Sin imagen"})]})}),a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Z.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Z.activo?"Activo":"Inactivo"})}),Z.oferta&&a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Oferta"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:Z.nombre}),a.jsx("button",{onClick:()=>Ze(Z.id,Z.activo),className:`ml-2 p-1 rounded ${Z.activo?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:Z.activo?"Desactivar":"Activar",children:Z.activo?a.jsx(F1,{}):a.jsx(J4,{})})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Dt(Z.categoria)}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S===Z.id?a.jsx("input",{type:"number",step:"0.01",defaultValue:Z.precio,onBlur:je=>{bt(Z.id,"precio",parseFloat(je.target.value)||0),F(null)},onKeyDown:je=>{je.key==="Enter"&&(bt(Z.id,"precio",parseFloat(je.target.value)||0),F(null)),je.key==="Escape"&&F(null)},className:"text-lg font-bold text-blue-700 bg-blue-50 border border-blue-200 rounded px-2 py-1 w-24",autoFocus:!0}):a.jsx("p",{className:"text-lg font-bold text-blue-700 cursor-pointer hover:bg-blue-50 px-2 py-1 rounded",onClick:()=>F(Z.id),title:"Click para editar precio",children:Sn(Z.precio)}),Z.cantidad!==void 0&&a.jsx("div",{className:"text-sm",children:M===Z.id?a.jsx("input",{type:"number",min:"0",defaultValue:Z.cantidad,onBlur:je=>{bt(Z.id,"cantidad",parseInt(je.target.value)||0),P(null)},onKeyDown:je=>{je.key==="Enter"&&(bt(Z.id,"cantidad",parseInt(je.target.value)||0),P(null)),je.key==="Escape"&&P(null)},className:"bg-gray-50 border border-gray-200 rounded px-2 py-1 w-16 text-center",autoFocus:!0}):a.jsxs("span",{className:`cursor-pointer hover:bg-gray-50 px-2 py-1 rounded ${Z.cantidad<=5?"text-red-600 font-semibold":Z.cantidad<=20?"text-yellow-600":"text-green-600"}`,onClick:()=>P(Z.id),title:"Click para editar cantidad",children:["Stock: ",Z.cantidad]})})]}),a.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3",children:Z.descripcion}),a.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[a.jsxs("p",{children:["Creado: ",It(Z.fechaCreacion)]}),Z.fechaActualizacion&&a.jsxs("p",{children:["Actualizado: ",It(Z.fechaActualizacion)]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:()=>e(Z),className:"px-3 py-2 border border-blue-300 text-blue-600 rounded text-sm hover:bg-blue-50 transition-colors",title:"Editar",children:"Editar"}),a.jsx("button",{onClick:()=>Nt(Z),className:"px-3 py-2 border border-green-300 text-green-600 rounded text-sm hover:bg-green-50 transition-colors",title:"Duplicar",children:a.jsx(VB,{})}),a.jsx("button",{onClick:()=>{D(Z),z(!0)},className:"px-3 py-2 border border-red-300 text-red-600 rounded text-sm hover:bg-red-50 transition-colors",title:"Eliminar",children:a.jsx(cm,{})})]})]})]},Z.id))})}),yt.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-6xl mb-4 flex justify-center",children:a.jsx(Z4,{})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron productos"}),a.jsx("p",{className:"text-gray-500 mb-4",children:g||x?"Intenta ajustar los filtros de bsqueda":"Comienza agregando tu primer producto"}),!g&&!x&&a.jsx("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Agregar Primer Producto"})]}),a.jsx(dn,{children:L&&a.jsx(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(de.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:a.jsx("span",{className:"text-red-600 text-2xl",children:"!"})}),a.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminacin"}),a.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['Ests seguro de que deseas eliminar el producto "',q==null?void 0:q.nombre,'"? Esta accin no se puede deshacer.']}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{z(!1),D(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:pt,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},QB=()=>{const[t,e]=E.useState([]),[n,r]=E.useState(!0),[i,o]=E.useState(!1),[c,u]=E.useState(null),[d,f]=E.useState(!1),[g,y]=E.useState(null),[x,w]=E.useState({nombre:"",descripcion:"",imagen:"",activa:!0,orden:0}),[N,b]=E.useState(!1),[T,j]=E.useState(!1),[R,A]=E.useState(()=>{try{const I=localStorage.getItem("phantomCategories");return I?JSON.parse(I):[]}catch{return[]}});E.useEffect(()=>{const I=L(),re=ne=>{if(ne.key==="phantomCategories")try{const we=ne.newValue?JSON.parse(ne.newValue):[];A(we)}catch(we){console.error("Error al parsear phantomCategories:",we)}};return window.addEventListener("storage",re),()=>{I&&I(),window.removeEventListener("storage",re)}},[]);const L=()=>{try{return Bn($t(Ve,"categorias"),re=>{A(ne=>{const we=[];return re.docs.forEach(Ee=>{!ne.includes(Ee.id)&&Ee.exists()&&we.push({id:Ee.id,...Ee.data()})}),we.sort((Ee,ee)=>(Ee.orden||0)-(ee.orden||0)),e(we),r(!1),ne})})}catch(I){console.error("Error loading categories:",I),r(!1)}},z=()=>{w({nombre:"",descripcion:"",imagen:"",activa:!0,orden:t.length}),u(null)},q=I=>{u(I),w({nombre:I.nombre||"",descripcion:I.descripcion||"",imagen:I.imagen||"",activa:I.activa!==!1,orden:I.orden||0}),o(!0)},D=async I=>{b(!0);try{const re=ul(dl,`categorias/${Date.now()}_${I.name}`);await Jv(re,I);const ne=await Dd(re);w(we=>({...we,imagen:ne}))}catch(re){console.error("Error uploading image:",re),alert("Error al subir la imagen")}finally{b(!1)}},M=async I=>{I.preventDefault(),r(!0);try{const re={...x,ruta:x.nombre.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),fechaActualizacion:new Date};if(c)await ji(mt(Ve,"categorias",c.id),re);else{re.fechaCreacion=new Date,re.productCount=0;const ne=re.ruta;await dh($t(Ve,"categorias"),re)}o(!1),z()}catch(re){console.error("Error saving category:",re),alert("Error al guardar la categora")}finally{r(!1)}},P=async(I,re)=>{try{await ji(mt(Ve,"categorias",I),{activa:!re,fechaActualizacion:new Date})}catch(ne){console.error("Error updating category status:",ne),alert("Error al actualizar el estado de la categora")}},S=async()=>{if(!g)return;const I=g.id,re=g.nombre||"Categora";f(!1),y(null);try{const ne=mt(Ve,"categorias",I);if(!(await qr(ne)).exists()){A(ee=>{if(!ee.includes(I)){const ae=[...ee,I];return localStorage.setItem("phantomCategories",JSON.stringify(ae)),ae}return ee}),e(ee=>ee.filter(ae=>ae.id!==I)),alert(` "${re}" eliminada (era un fantasma del cach)`);return}if(await Lp(ne),await new Promise(ee=>setTimeout(ee,500)),(await qr(ne)).exists()){console.error(" ERROR: La categora AN EXISTE despus de deleteDoc"),alert(` Error: No se pudo eliminar de Firebase.

Posibles causas:
1. Reglas de seguridad bloquean la eliminacin
2. No tienes permisos
3. Problemas de red`);return}e(ee=>ee.filter(ae=>ae.id!==I)),alert(` "${re}" eliminada exitosamente de Firebase`)}catch(ne){console.error(" [CategoryManagement] Error al eliminar categora:",ne),console.error(" [CategoryManagement] Cdigo de error:",ne.code),console.error(" [CategoryManagement] Mensaje:",ne.message),ne.code==="permission-denied"?alert(` Error de Permisos

No tienes permiso para eliminar esta categora.

Verifica las reglas de seguridad en Firestore.`):alert(` Error: ${ne.message}

Revisa la consola para ms detalles.`)}},F=async(I,re)=>{const ne=t.findIndex(Ee=>Ee.id===I);if(ne===-1)return;const we=re==="up"?ne-1:ne+1;if(!(we<0||we>=t.length))try{const Ee=[],ee=t[ne],ae=t[we];Ee.push(ji(mt(Ve,"categorias",ee.id),{orden:we}),ji(mt(Ve,"categorias",ae.id),{orden:ne})),await Promise.all(Ee)}catch(Ee){console.error("Error reordering categories:",Ee),alert("Error al reordenar las categoras")}},$=I=>I?(I.seconds?new Date(I.seconds*1e3):new Date(I)).toLocaleDateString("es-ES"):"N/A";return n&&t.length===0?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(np,{size:"large",color:"blue",text:"Cargando categoras..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestin de Categoras"}),a.jsxs("p",{className:"text-gray-600",children:[t.length," categoras en total"]})]}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[R.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:async()=>{if(confirm(`Verificar y limpiar ${R.length} categoras fantasma?

Esto verificar si alguna volvi a existir en Firebase.`)){const I=await XB();I&&(alert(` Limpieza completada:

${I.recovered} categoras recuperadas
${I.stillPhantoms} siguen siendo fantasmas

Recargando pgina...`),window.location.reload())}},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm flex items-center gap-1",title:"Verificar y limpiar categoras fantasma",children:[a.jsx(cm,{size:14}),"Verificar (",R.length,")"]}),a.jsxs("button",{onClick:()=>{if(confirm(`Limpiar TODAS las ${R.length} categoras fantasma?

 Esto las eliminar sin verificar si existen en Firebase.`)){const I=GB();A([]),alert(` ${I} categoras fantasma limpiadas.

Recargando pgina...`),window.location.reload()}},className:"px-3 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm flex items-center gap-1",title:"Forzar limpieza de cach de categoras fantasma",children:[a.jsx(cm,{size:14}),"Limpiar (",R.length,")"]})]}),a.jsxs("button",{onClick:()=>{z(),o(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:"+"}),"Agregar Categora"]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categoras"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Comienza creando tu primera categora de productos"}),a.jsx("button",{onClick:()=>{z(),o(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Crear Primera Categora"})]}):a.jsx("div",{className:"divide-y divide-gray-200",children:a.jsx(dn,{children:t.map((I,re)=>a.jsx(de.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center",children:I.imagen?a.jsx("img",{src:I.imagen,alt:I.nombre,className:"w-full h-full object-cover"}):a.jsx(UB,{className:"text-gray-400 text-2xl"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:I.nombre}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.activa?"Activa":"Inactiva"})]}),I.descripcion&&a.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:I.descripcion}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("span",{children:["Ruta: /",I.ruta]}),a.jsxs("span",{children:["Productos: ",I.productCount||0]}),a.jsxs("span",{children:["Creada: ",$(I.fechaCreacion)]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{onClick:()=>F(I.id,"up"),disabled:re===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover arriba",children:a.jsx(LB,{})}),a.jsx("button",{onClick:()=>F(I.id,"down"),disabled:re===t.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover abajo",children:a.jsx(OB,{})})]}),a.jsx("button",{onClick:()=>P(I.id,I.activa),className:`p-2 rounded ${I.activa?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:I.activa?"Desactivar":"Activar",children:I.activa?a.jsx(F1,{}):a.jsx(J4,{})}),a.jsx("button",{onClick:()=>q(I),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:a.jsx(FB,{})}),a.jsx("button",{onClick:()=>{y(I),f(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:a.jsx(cm,{})})]})]})},I.id))})})}),a.jsx(dn,{children:i&&a.jsx(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsxs(de.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[a.jsxs("div",{className:"bg-blue-700 text-white p-6 flex justify-between items-center rounded-t-2xl",children:[a.jsx("h2",{className:"text-xl font-bold",children:c?"Editar Categora":"Agregar Categora"}),a.jsx("button",{onClick:()=>{o(!1),z()},className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),a.jsxs("form",{onSubmit:M,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Categora *"}),a.jsx("input",{type:"text",required:!0,value:x.nombre,onChange:I=>w(re=>({...re,nombre:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Videojuegos"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),a.jsx("input",{type:"number",min:"0",value:x.orden,onChange:I=>w(re=>({...re,orden:parseInt(I.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),a.jsx("textarea",{rows:3,value:x.descripcion,onChange:I=>w(re=>({...re,descripcion:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripcin opcional de la categora"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen de la Categora"}),a.jsx("input",{type:"file",accept:"image/*",onChange:I=>{var re;return((re=I.target.files)==null?void 0:re[0])&&D(I.target.files[0])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),x.imagen&&a.jsx("div",{className:"mt-3",children:a.jsx("img",{src:x.imagen,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:x.activa,onChange:I=>w(re=>({...re,activa:I.target.checked})),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Categora activa"]})}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[a.jsx("button",{type:"button",onClick:()=>{o(!1),z()},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:N,className:"px-6 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[N?a.jsx(np,{size:"small",color:"white",className:"mr-2"}):null,N?"Subiendo imagen...":c?"Actualizar":"Crear Categora"]})]})]})]})})}),a.jsx(dn,{children:d&&a.jsx(de.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsx(de.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:a.jsx("span",{className:"text-red-600 text-2xl",children:""})}),a.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminacin"}),a.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['Ests seguro de que deseas eliminar la categora "',g==null?void 0:g.nombre,'"? Esta accin no se puede deshacer y puede afectar los productos asociados.']}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{f(!1),y(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},ZE=({onEditProduct:t,onViewUsers:e,onViewOrders:n,onViewProducts:r,onViewCategories:i})=>{const[o,c]=E.useState({productos:0,categorias:0,usuarios:0,pedidos:0}),[u,d]=E.useState([]),[f,g]=E.useState(!0);return E.useEffect(()=>{const y=Bn(pn($t(Ve,"productos")),j=>{const R=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),A=j.docs.filter(L=>!R.includes(L.id)).length;c(L=>({...L,productos:A}))},j=>{console.error("Error fetching products count:",j)}),x=Bn(pn($t(Ve,"usuarios")),j=>{c(R=>({...R,usuarios:j.size}))},j=>{console.error("Error fetching users count:",j)}),w=Bn(pn($t(Ve,"categorias")),j=>{c(R=>({...R,categorias:j.size}))},j=>{console.error("Error fetching categories count:",j)}),N=Bn(pn($t(Ve,"pedidos")),j=>{c(R=>({...R,pedidos:j.size}))},j=>{console.error("Error fetching orders count:",j)}),T=(()=>{try{const j=pn($t(Ve,"productos"),Ca("fechaCreacion","desc"),Op(5));return Bn(j,A=>{const L=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),z=A.docs.filter(q=>q.exists()&&!L.includes(q.id)).map(q=>({id:q.id,...q.data()}));d(z),g(!1)},A=>{console.error("Error fetching recent products:",A),g(!1)})}catch(j){console.error("Error setting up recent products listener:",j),g(!1)}})();return()=>{y&&y(),x&&x(),w&&w(),N&&N(),T&&T()}},[]),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Bienvenido al panel de administracin"})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Ff,{title:"Productos",count:o.productos,icon:a.jsx(Z4,{className:"text-blue-500",size:24}),onClick:r}),a.jsx(Ff,{title:"Categoras",count:o.categorias,icon:a.jsx($B,{className:"text-green-500",size:24}),onClick:i}),a.jsx(Ff,{title:"Usuarios",count:o.usuarios,icon:a.jsx(Cx,{className:"text-purple-500",size:24}),onClick:e}),a.jsx(Ff,{title:"Pedidos",count:o.pedidos,icon:a.jsx(BB,{className:"text-orange-500",size:24}),onClick:n})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Productos Recientes"})}),f?a.jsx("div",{className:"flex justify-center items-center h-32",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):u.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(y=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex-shrink-0 h-10 w-10 relative",children:[(()=>{try{const x=y.imagen||(Array.isArray(y.imagenes)&&y.imagenes.length>0?y.imagenes[0]:null)||(Array.isArray(y.variantes)&&y.variantes.length>0&&y.variantes[0].imagen?y.variantes[0].imagen:null)||(Array.isArray(y.media)&&y.media.length>0?y.media[0].url:null)||(Array.isArray(y.variantes)&&y.variantes.length>0&&Array.isArray(y.variantes[0].media)&&y.variantes[0].media.length>0?y.variantes[0].media[0].url:null);return x?a.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:x,alt:"",onError:w=>{w.target.style.display="none",w.target.nextSibling.style.display="flex"}}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"N/A"})}catch{return a.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-500 text-xs",children:"Error"})}})(),a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",style:{display:"none"},children:"N/A"})]}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.nombre||"Sin nombre"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",y.id.substring(0,8),"..."]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(y.precio||0)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${y.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.activo?"Activo":"Inactivo"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>t&&t(y),className:"text-blue-600 hover:text-blue-900 mr-4 font-medium cursor-pointer",children:"Editar"}),a.jsx(At,{to:`/producto/${y.id}`,className:"text-green-600 hover:text-green-900",target:"_blank",rel:"noopener noreferrer",children:"Ver"})]})]},y.id))})]})}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"No hay productos recientes"})}),a.jsx("div",{className:"mt-4 text-right",children:a.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium cursor-pointer",children:"Ver todos los productos "})})]})]})},Ff=({title:t,count:e,icon:n,onClick:r})=>a.jsx(de.div,{whileHover:{y:-5,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},className:"bg-white p-6 rounded-lg shadow-sm border transition-all cursor-pointer",onClick:r,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e})]}),a.jsx("div",{children:n})]})}),JB=/\/(Productos|productospcu)\//i;function Io(t){return typeof t=="string"&&t.startsWith("/")&&JB.test(t)}function ZB(t=""){try{const e=t.indexOf("?"),n=e>=0?t.slice(0,e):t,r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}catch{return String(t||"")}}async function eH(t){const e=await fetch(t);if(!e.ok)throw new Error(`No se pudo leer ${t} (${e.status})`);return await e.blob()}async function eN(t,e){const n=await eH(e),r=ZB(e)||`file-${Date.now()}`,i=`productos/${t}/${Date.now()}-${r}`,o=ul(dl,i);return await Jv(o,n,{contentType:n.type||void 0}),await Dd(o)}function tN(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t||null))}}async function jx(t,e){if(!e)return e;if(typeof e=="string")return Io(e)?await eN(t,e):e;if(typeof e=="object"){if(e.url&&Io(e.url)){const n=await eN(t,e.url);return{...e,url:n}}return e}return e}async function ds(t,e){const n=Array.isArray(e)?e:[],r=[];for(const i of n)r.push(await jx(t,i));return r}function $n(t){return(Array.isArray(t)?t:[]).some(e=>typeof e=="string"?Io(e):e&&typeof e=="object"?Io(e.url):!1)}function tH(t){if(!t)return!1;if(Io(t.imagen)||$n(t.imagenPrincipal)||$n(t.imagenes)||$n(t.media)||$n(t.galeriaImagenes)||$n(t.imagenesExtra)||$n(t.tresArchivosExtras)||$n(t.videoAcercaArticulo))return!0;if(Array.isArray(t.variantes)){for(const e of t.variantes)if(e&&(Io(e.imagen)||$n(e.imagenPrincipal)||$n(e.imagenes)||$n(e.media)||$n(e.galeriaImagenes)))return!0}return!1}async function nH(t){const n=(await Ji($t(Ve,"productos"))).docs.map(o=>({id:o.id,data:o.data()}));let r=0,i=n.length;for(let o=0;o<n.length;o++){const{id:c,data:u}=n[o];if(!tH(u)){t==null||t({type:"skip",id:c,index:o+1,total:i});continue}const d=tN({});if(Io(u.imagen)&&(d.imagen=await jx(c,u.imagen)),$n(u.imagenPrincipal)&&(d.imagenPrincipal=await ds(c,u.imagenPrincipal)),$n(u.imagenes)&&(d.imagenes=await ds(c,u.imagenes)),$n(u.media)&&(d.media=await ds(c,u.media)),$n(u.galeriaImagenes)&&(d.galeriaImagenes=await ds(c,u.galeriaImagenes)),$n(u.imagenesExtra)&&(d.imagenesExtra=await ds(c,u.imagenesExtra)),$n(u.tresArchivosExtras)&&(d.tresArchivosExtras=await ds(c,u.tresArchivosExtras)),$n(u.videoAcercaArticulo)&&(d.videoAcercaArticulo=await ds(c,u.videoAcercaArticulo)),Array.isArray(u.variantes)){const f=[];for(const g of u.variantes){const y=tN(g)||{};Io(y.imagen)&&(y.imagen=await jx(c,y.imagen)),$n(y.imagenPrincipal)&&(y.imagenPrincipal=await ds(c,y.imagenPrincipal)),$n(y.imagenes)&&(y.imagenes=await ds(c,y.imagenes)),$n(y.media)&&(y.media=await ds(c,y.media)),$n(y.galeriaImagenes)&&(y.galeriaImagenes=await ds(c,y.galeriaImagenes)),f.push(y)}d.variantes=f}d.fechaActualizacion=new Date,await rr(mt(Ve,"productos",c),d,{merge:!0}),r++,t==null||t({type:"migrated",id:c,index:o+1,total:i})}return t==null||t({type:"done",migratedCount:r,total:i}),{migratedCount:r,total:i}}const dy="text-blue-900",rH="bg-blue-800",ml="ZeiFzBgosCd0apv9cXL6aQZCYyu2";function iH(t=""){var n,r;if(!t)return"US";const e=t.trim().split(" ");return((((n=e[0])==null?void 0:n[0])||"")+(((r=e[1])==null?void 0:r[0])||"")).toUpperCase()}function sH(t=""){if(!t)return null;const e=t.match(/(https?:\/\/[^\s]+)/i);if(e)return e[1];const n=t.match(/(maps\.app\.[^\s]+|goo\.gl\/[^\s]+|google\.com\/maps[^\s]*)/i);if(n){const r=n[0];return r.startsWith("http")?r:`https://${r}`}return null}function Ax(t){if(!t)return null;if(typeof t=="object"&&t.seconds)return new Date(t.seconds*1e3).toLocaleString();const e=new Date(t);return isNaN(e.getTime())?String(t):e.toLocaleString()}function aH({usuario:t,onClose:e}){const[n,r]=E.useState([]),[i,o]=E.useState(!0),[c,u]=E.useState(t),[d,f]=E.useState(null);E.useEffect(()=>{if(!(t!=null&&t.id))return;const x=Bn(mt(Ve,"users",t.id),N=>{N.exists()&&u(b=>({...b,...N.data()}))}),w=Bn(mt(Ve,"usuarios",t.id),N=>{N.exists()&&u(b=>({...b,...N.data()}))});return()=>{x(),w()}},[t==null?void 0:t.id]),E.useEffect(()=>{if(!t)return;const x=pn($t(Ve,"orders")),w=Bn(x,N=>{const b=N.docs.map(T=>({id:T.id,...T.data()})).filter(T=>String(T.userId)===String(t.id));r(b.sort((T,j)=>{var L,z;const R=((L=T.fecha)==null?void 0:L.seconds)||0;return(((z=j.fecha)==null?void 0:z.seconds)||0)-R})),o(!1)},()=>{r([]),o(!1)});return()=>w()},[t]),E.useEffect(()=>{!t||t.uid!==ml||migrationRanRef.current||(migrationRanRef.current=!0,(async()=>{try{console.log("[Migracin] Iniciando migracin de medios legacy a Firebase Storage..."),await nH(x=>{x&&(x.type==="skip"?console.log(`[Migracin] (${x.index}/${x.total}) Sin cambios:`,x.id):x.type==="migrated"?console.log(`[Migracin] (${x.index}/${x.total}) Migrado:`,x.id):x.type==="done"&&console.log(`[Migracin] Completada. Migrados: ${x.migratedCount}/${x.total}`))})}catch(x){console.error("[Migracin] Error ejecutando migracin:",x)}})())},[t]),E.useEffect(()=>{const x=w=>{w.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e]);const g=(c==null?void 0:c.direccion)||(c==null?void 0:c.direccionCompleta)||"",y=(c==null?void 0:c.ubicacion)||sH(g);return a.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),a.jsxs("div",{role:"dialog","aria-modal":"true",className:"fixed top-0 left-0 w-full h-full max-h-none !rounded-none !shadow-none bg-white overflow-y-auto flex flex-col",style:{zIndex:1e4},onClick:x=>x.stopPropagation(),children:[a.jsxs("header",{className:`flex justify-between items-center px-6 py-4 shadow ${rH}`,children:[a.jsxs("div",{className:"admin-user-header",children:[a.jsx("div",{className:"admin-user-avatar",children:iH((c==null?void 0:c.displayName)||(c==null?void 0:c.nombre))}),a.jsxs("div",{className:"admin-user-info",children:[a.jsx("h2",{className:"admin-user-name",children:(c==null?void 0:c.displayName)||(c==null?void 0:c.nombre)||"Usuario"}),a.jsx("p",{className:"admin-user-email",children:c==null?void 0:c.email}),a.jsx("div",{className:"admin-user-badges",children:a.jsx("span",{className:t.id===ml?"badge-admin":"badge-user",children:t.id===ml?"Admin":"Usuario"})})]})]}),a.jsx("button",{onClick:e,"aria-label":"Cerrar",className:"admin-close-btn",children:""})]}),a.jsxs("div",{className:"flex-1 px-2 sm:px-8 py-4 sm:py-8 space-y-7 bg-gray-50",children:[a.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:a.jsx(WB,{})}),a.jsx("h3",{className:`text-xl font-bold ${dy}`,children:"Informacin Personal"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[a.jsx(vc,{label:"Nombre Completo",value:c.displayName||"No especificado"}),a.jsx(vc,{label:"Email",value:c.email||"No especificado"}),a.jsx(vc,{label:"Telfono",value:c.telefono||"No especificado"}),a.jsx(vc,{label:"Cdigo de Usuario",value:c.codigo||"No asignado"}),a.jsx(vc,{label:"Mtodo de Entrega",value:c.metodoEntrega||"No especificado"}),a.jsx(vc,{label:"Fecha de Registro",value:c.createdAt?Ax(c.createdAt):"No disponible"})]})]}),a.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:a.jsx(QE,{})}),a.jsx("h3",{className:`text-xl font-bold ${dy}`,children:"Direccin y Ubicacin"})]}),a.jsx("p",{className:"text-base text-blue-900 mb-4",children:g||"No se ha registrado direccin"}),y&&a.jsxs("a",{href:y,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors",children:[a.jsx(QE,{})," Ver en Google Maps"]})]}),a.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:a.jsx(JE,{})}),a.jsx("h3",{className:`text-xl font-bold ${dy}`,children:"Historial de Compras"}),a.jsxs("span",{className:"bg-blue-100 text-blue-900 px-3 py-1 rounded-full text-sm font-bold",children:[n.length," ",n.length===1?"compra":"compras"]})]}),i?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(np,{size:"medium",color:"blue",text:"Cargando compras..."})}):n.length===0?a.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-xl",children:[a.jsx("div",{className:"text-6xl mb-4 text-blue-700 flex items-center justify-center",children:a.jsx(JE,{})}),a.jsx("p",{className:"text-xl text-blue-700 font-medium",children:"No hay compras registradas"})]}):a.jsx("div",{className:"admin-orders-grid",children:n.map(x=>{var w,N;return a.jsxs("div",{className:"admin-order-card",children:[a.jsxs("div",{className:"admin-order-header",children:[a.jsxs("div",{className:"order-info",children:[a.jsx("h4",{className:"order-number",children:x.numeroOrden||`#${x.id.slice(-8)}`}),a.jsx("p",{className:"order-date",children:Ax(x.fecha)})]}),a.jsxs("div",{className:"order-status-price",children:[a.jsx("span",{className:`admin-status-badge ${x.estado||"pendiente"}`,children:x.estado==="completado"?" Completado":x.estado==="cancelado"?" Cancelado":" Pendiente"}),a.jsx("div",{className:"order-total",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(x.total||0)})]})]}),a.jsx("div",{className:"admin-order-customer",children:a.jsxs("div",{className:"customer-info",children:[a.jsx("span",{className:"customer-name",children:x.userName||"Usuario"}),a.jsx("span",{className:"customer-email",children:x.userEmail})]})}),a.jsxs("div",{className:"admin-products-preview",children:[(w=x.productos)==null?void 0:w.slice(0,3).map((b,T)=>a.jsx("div",{className:"admin-product-item",children:a.jsxs("div",{className:"admin-product-info",children:[a.jsx("span",{className:"product-name",children:b.nombre}),a.jsxs("span",{className:"product-quantity",children:["Cantidad: ",b.cantidad,"  ",new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(b.precio)]}),a.jsx("button",{className:"btn-view-product",onClick:j=>{j.stopPropagation(),window.location.href=`/producto/${b.id}`},title:"Ver producto",children:a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(F1,{})," Ver producto"]})})]})},T)),((N=x.productos)==null?void 0:N.length)>3&&a.jsxs("div",{className:"more-products-admin",children:["+",x.productos.length-3," ms productos"]})]}),a.jsxs("div",{className:"admin-order-actions",children:[a.jsx("button",{className:"btn-admin btn-view",onClick:()=>f(x),children:"Ver detalles"}),x.metodoPago&&a.jsx("span",{className:"payment-method",children:x.metodoPago})]})]},x.id)})})]})]}),a.jsx(dn,{children:d&&a.jsx(tA,{order:d,onClose:()=>f(null)})})]})]})}function vc({label:t,value:e}){return a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[a.jsx("p",{className:"font-semibold text-blue-700 text-xs mb-1",children:t}),a.jsx("p",{className:"text-base font-medium text-blue-900 break-all",children:e})]})}function oH(){const{usuario:t,usuarioInfo:e}=oi(),[n,r]=E.useState(!1),[i,o]=E.useState(null);return a.jsx("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel del Vendedor"}),a.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestiona tus productos en tiempo real"}),(e==null?void 0:e.empresa)&&a.jsx("div",{className:"mt-3 inline-flex items-center gap-2 bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold",children:e.empresa})]}),a.jsx(eA,{onAddProduct:()=>{o(null),r(!0)},onEditProduct:c=>{o(c),r(!0)}}),n&&a.jsx(Q4,{product:i,onClose:()=>{r(!1),o(null)},onSave:()=>{r(!1),o(null)}})]})})}function lH(){const{usuario:t,usuarioInfo:e}=oi(),[n,r]=E.useState([]),[i,o]=E.useState(""),[c,u]=E.useState(null),[d,f]=E.useState(null),[g,y]=E.useState("dashboard"),[x,w]=E.useState(!1),[N,b]=E.useState(null);if(E.useRef(!1),E.useEffect(()=>{if(!t||t.uid!==ml)return;const L=Bn(pn($t(Ve,"users")),q=>{const D=q.docs.map(M=>({id:M.id,...M.data()}));r(M=>{const P=[...D];return M.forEach(S=>{const F=P.findIndex($=>$.id===S.id);F>=0&&(P[F]={...P[F],...S})}),P})}),z=Bn(pn($t(Ve,"usuarios")),q=>{const D=q.docs.map(M=>({id:M.id,...M.data()}));r(M=>{const P=[...M];return D.forEach(S=>{const F=P.findIndex($=>$.id===S.id);F>=0?P[F]={...P[F],...S}:P.push(S)}),P})});return()=>{L(),z()}},[t]),!t)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Inicia sesin"});const T=(t==null?void 0:t.uid)===ml||(e==null?void 0:e.isAdmin)===!0,j=!!(e!=null&&e.isSeller||e!=null&&e.empresa||e!=null&&e.empresaId);if(!T&&j)return a.jsx(oH,{});if(!T)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Sin acceso"});const R=n.filter(L=>{const z=i.toLowerCase();return(L.displayName||"").toLowerCase().includes(z)||(L.email||"").toLowerCase().includes(z)||(L.telefono||"").toLowerCase().includes(z)||(L.direccion||"").toLowerCase().includes(z)||(L.codigo||"").toLowerCase().includes(z)}),A=()=>{switch(g){case"dashboard":return a.jsx(ZE,{onAddProduct:()=>{b(null),w(!0),y("products")},onEditProduct:L=>{b(L),w(!0)},onOpenCategories:()=>y("categories"),onViewAllProducts:()=>y("products"),onViewAllOrders:()=>y("orders"),onViewProducts:()=>y("products"),onViewCategories:()=>y("categories"),onViewUsers:()=>y("users"),onViewOrders:()=>y("orders")});case"products":return a.jsx(eA,{onAddProduct:()=>{b(null),w(!0)},onEditProduct:L=>{b(L),w(!0)}});case"categories":return a.jsx(QB,{});case"users":return a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestin de Usuarios"}),a.jsx("input",{type:"text",value:i,onChange:L=>o(L.target.value),placeholder:"Buscar por nombre, email, telfono, direccin o cdigo",className:"w-full sm:w-80 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"})]}),R.length===0?a.jsx("div",{className:"text-gray-600",children:"No hay usuarios que coincidan con la bsqueda."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telfono"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registrado"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(L=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>u(L),children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 font-medium",children:L.displayName||L.nombre||"Usuario"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:L.email||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:L.telefono||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:L.codigo||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:Ax(L.createdAt)||"-"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${L.id===ml?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:L.id===ml?"Admin":"Usuario"})})]},L.id))})]})})]});default:return a.jsx(ZE,{})}};return a.jsxs("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel Administrativo"}),a.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestin Completa del Sistema"}),a.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-center gap-3",children:[a.jsxs("span",{className:"bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2",children:[a.jsx(Cx,{})," ",n.length," ",n.length===1?"usuario":"usuarios"," registrados"]}),a.jsx("span",{className:"bg-green-100 text-green-900 px-4 py-2 rounded-full text-sm font-bold",children:"Sincronizacin en tiempo real"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-1 mb-8 border border-blue-100",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:[{id:"dashboard",label:"Dashboard",icon:a.jsx(DB,{})},{id:"products",label:"Productos",icon:a.jsx(MB,{})},{id:"categories",label:"Categoras",icon:a.jsx(HB,{})},{id:"orders",label:"Pedidos",icon:a.jsx(zB,{})},{id:"users",label:"Usuarios",icon:a.jsx(Cx,{})}].map(L=>a.jsx("button",{onClick:()=>y(L.id),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-medium transition-all duration-200 ${g===L.id?"bg-blue-700 text-white shadow-md":"text-blue-700 hover:bg-blue-50"}`,children:a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:L.icon}),a.jsx("span",{className:"hidden sm:inline",children:L.label})]})},L.id))})}),a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:A()},g),c&&a.jsx(aH,{usuario:c,onClose:()=>u(null)}),x&&a.jsx(Q4,{product:N,onClose:()=>{w(!1),b(null)},onSave:()=>{w(!1),b(null)}})]}),a.jsx(dn,{children:d&&a.jsx(tA,{order:d,onClose:()=>f(null)})})]})}function tA({order:t,onClose:e}){var c,u;const n=d=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(d||0),r=d=>{if(!d)return"Fecha no disponible";let f;return typeof d=="object"&&d.seconds?f=new Date(d.seconds*1e3):f=new Date(d),f.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},i=d=>{switch(d){case"completado":return"status-completed";case"cancelado":return"status-cancelled";case"pendiente":return"status-pending";default:return"status-pending"}},o=d=>{switch(d){case"completado":return" Completado";case"cancelado":return" Cancelado";case"pendiente":return" Pendiente";default:return" Pendiente"}};return si.useEffect(()=>{const d=f=>{f.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e]),a.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:a.jsxs(de.div,{className:"order-details-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:d=>d.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:t.numeroOrden||`Orden #${t.id.slice(-8)}`}),a.jsx("p",{className:"order-date-detail",children:r(t.fecha)})]}),a.jsx("button",{className:"close-btn",onClick:e,children:""})]}),a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"order-status-section",children:[a.jsx("span",{className:`status-badge large ${i(t.estado)}`,children:o(t.estado)}),t.estadoPago&&a.jsxs("span",{className:"payment-status",children:["Pago: ",t.estadoPago==="pagado"?" Pagado":" Fallido"]})]}),a.jsxs("div",{className:"order-summary",children:[a.jsx("h3",{children:"Resumen de la orden"}),a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{children:"Total pagado:"}),a.jsx("span",{children:n(t.total)})]})]}),a.jsxs("div",{className:"products-section",children:[a.jsxs("h3",{children:["Productos (",((c=t.productos)==null?void 0:c.length)||0,")"]}),a.jsx("div",{className:"products-list",children:(u=t.productos)==null?void 0:u.map((d,f)=>a.jsx("div",{className:"product-detail-item",children:a.jsxs("div",{className:"product-detail-info",children:[a.jsx("h4",{children:d.nombre}),a.jsx("p",{className:"product-company",children:d.empresa||"N/A"}),a.jsxs("div",{className:"product-pricing",children:[a.jsxs("span",{className:"quantity",children:["Cantidad: ",d.cantidad]}),a.jsxs("span",{className:"price",children:["Precio unitario: ",n(d.precio)]}),a.jsxs("span",{className:"subtotal",children:["Subtotal: ",n(d.subtotal||d.precio*d.cantidad)]})]}),a.jsx("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${d.id}`,title:"Ver producto",children:" Ver producto"})]})},f))})]}),t.direccionEntrega&&a.jsxs("div",{className:"delivery-section",children:[a.jsx("h3",{children:"Informacin de entrega"}),a.jsx("p",{children:t.direccionEntrega}),t.telefonoContacto&&a.jsxs("p",{children:["Telfono: ",t.telefonoContacto]})]}),t.metodoPago&&a.jsxs("div",{className:"payment-section",children:[a.jsx("h3",{children:"Informacin de pago"}),a.jsxs("p",{children:["Mtodo: ",t.metodoPago]})]})]})]})})}const Ps=[{id:1,img:"/ads/1.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/6.png",link:"https://playcenterwisp.com",isExternal:!0},{id:2,img:"/ads/2.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0},{id:3,img:"/ads/3.png",link:"/Productos/videojuegos",isExternal:!1},{id:4,img:"/ads/5.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:5,img:"/ads/4.png",link:"/Productos",isExternal:!1}];function cH(){const[t,e]=E.useState(0),n=E.useRef(null),r=6e3,[i,o]=E.useState(!1),c=E.useCallback(()=>{clearTimeout(n.current),!i&&(n.current=setTimeout(()=>{e(N=>(N+1)%Ps.length)},r))},[i]);E.useEffect(()=>(c(),()=>clearTimeout(n.current)),[t,c]),E.useEffect(()=>{const N=b=>{var T;try{const j=!!((T=b==null?void 0:b.detail)!=null&&T.paused);o(j),clearTimeout(n.current),j||(n.current=setTimeout(()=>{e(R=>(R+1)%Ps.length)},r))}catch{}};return window.addEventListener("pcu:main-slider-toggle",N),()=>window.removeEventListener("pcu:main-slider-toggle",N)},[]);const u=()=>{clearTimeout(n.current),e(N=>N===0?Ps.length-1:N-1)},d=()=>{clearTimeout(n.current),e(N=>(N+1)%Ps.length)},f=E.useRef(0),g=E.useRef(0),y=N=>{f.current=N.touches[0].clientX},x=N=>{g.current=N.touches[0].clientX},w=()=>{const N=g.current-f.current;Math.abs(N)>50&&(N>0?u():d())};return a.jsxs("div",{onTouchStart:y,onTouchMove:x,onTouchEnd:w,className:`relative w-full max-w-[1600px] mx-auto overflow-hidden rounded-xl shadow-xl
        h-[140px] sm:h-[180px] md:h-[260px] lg:h-[400px]`,children:[a.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{width:`${Ps.length*100}%`,transform:`translateX(-${t*(100/Ps.length)}%)`},children:Ps.map(N=>N.isExternal?a.jsx("a",{href:N.link,target:"_blank",rel:"noopener noreferrer",className:"w-full h-full flex-shrink-0",style:{width:`${100/Ps.length}%`},children:a.jsx("img",{src:N.img,alt:`Anuncio ${N.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},N.id):a.jsx(At,{to:N.link,className:"w-full h-full flex-shrink-0",style:{width:`${100/Ps.length}%`},children:a.jsx("img",{src:N.img,alt:`Anuncio ${N.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},N.id))}),a.jsx("button",{onClick:u,className:"absolute top-1/2 left-2 sm:left-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Anterior",children:a.jsx(w$,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),a.jsx("button",{onClick:d,className:"absolute top-1/2 right-2 sm:right-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Siguiente",children:a.jsx(wx,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),a.jsx("div",{className:"absolute bottom-3 sm:bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-20",children:Ps.map((N,b)=>a.jsx("button",{onClick:()=>{clearTimeout(n.current),e(b)},"aria-label":`Ir al slide ${b+1}`,className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${b===t?"bg-white opacity-90 scale-110":"bg-white opacity-40"} transition`},b))})]})}const uH=[{id:1,img:"/ads/movil/aficionados-movil.png",link:"/Productos/coleccionables",isExternal:!1},{id:2,img:"/ads/movil/articulosads.png",link:"/Productos/videojuegos",isExternal:!1},{id:3,img:"/ads/movil/internetads.png",link:"https://playcenterwisp.com",isExternal:!0},{id:4,img:"/ads/movil/camarasads.png",link:"/Productos/camaras",isExternal:!1},{id:5,img:"/ads/movil/consolaads.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/movil/ofertas.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:7,img:"/ads/movil/productosads.png",link:"/Productos",isExternal:!1},{id:8,img:"/ads/movil/retroads.png",link:"/Productos/retro-juegos",isExternal:!1},{id:9,img:"/ads/movil/nuestras-estafetas.png",link:"/estafetas",isExternal:!1},{id:10,img:"/ads/movil/ubicacionads.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0}];function dH(){return a.jsx("div",{className:"block sm:hidden w-full max-w-[100%] mx-auto px-0 py-2",children:a.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide gap-3 px-3",style:{scrollPaddingLeft:"12px",scrollPaddingRight:"12px"},children:uH.map(t=>a.jsx("a",{href:t.link,target:t.isExternal?"_blank":"_self",rel:"noreferrer",className:"flex-shrink-0 w-[300px] h-[420px] rounded-xl overflow-hidden snap-center bg-transparent shadow-none",children:a.jsx("img",{src:t.img,alt:`Anuncio ${t.id}`,className:"w-full h-full object-cover block rounded-xl",draggable:!1})},t.id))})})}const nN=["/animacion/img1.png","/animacion/img2.png","/animacion/img3.png","/animacion/img4.png","/animacion/img5.png","/animacion/img6.png","/animacion/img7.png","/animacion/img8.png","/animacion/img9.png","/animacion/img10.png"],hH=[...nN,...nN.slice(0,5)],fH=()=>a.jsx("div",{className:"loader",role:"presentation","aria-hidden":"true",children:hH.map((t,e)=>a.jsx("img",{src:t,alt:`Animacin ${e+1}`},e))}),pi={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7}}};Array.from({length:17},(t,e)=>`/animacion/${e+1}.png`);function mH(){const{productsByCategory:t,categories:e,loading:n,error:r}=i7(),{theme:i}=hu();if(si.useEffect(()=>{e.length>0&&(console.log(" CATEGORAS DISPONIBLES EN INICIO:"),console.log(""),console.table(e.map(f=>({" Nombre":f.nombre," Ruta":f.ruta," ID":f.id," Productos":(t[f.id]||[]).length}))),console.log(""),console.log(" COPIA las rutas exactas de arriba para usarlas en getProductsByRoute()"),console.log(""))},[e,t]),n)return null;if(r)return a.jsx("div",{className:"bg-gradient-to-br from-indigo-50 via-white to-blue-100 min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx("p",{className:"text-lg",children:"Error cargando productos"}),a.jsx("p",{className:"text-sm",children:r})]})});const o=f=>{try{return f?typeof f=="string"?f:typeof f=="object"&&f!==null?f.url||"":String(f||""):""}catch{return""}},c=f=>{var R,A;const g=o((R=f==null?void 0:f.imagenPrincipal)==null?void 0:R[0]);if(g)return g;const y=o(f==null?void 0:f.imagen);if(y)return y;const w=(Array.isArray(f==null?void 0:f.media)?f.media:[]).find(L=>{const z=((L==null?void 0:L.type)||"").toLowerCase();return o(L)&&(!z||z.includes("image")||z==="img"||z==="photo")});if(w)return o(w);const b=(Array.isArray(f==null?void 0:f.galeriaImagenes)?f.galeriaImagenes:[]).find(L=>{const z=((L==null?void 0:L.type)||"").toLowerCase();return o(L)&&(!z||z.includes("image")||z==="img"||z==="photo")});if(b)return o(b);const T=Array.isArray(f==null?void 0:f.imagenes)?f.imagenes:[];if(T.length>0)return o(T[0]);const j=Array.isArray(f==null?void 0:f.variantes)?f.variantes:[];for(const L of j){const z=o((A=L==null?void 0:L.imagenPrincipal)==null?void 0:A[0]);if(z)return z;const q=o(L==null?void 0:L.imagen);if(q)return q;const M=(Array.isArray(L==null?void 0:L.media)?L.media:[]).find(F=>{const $=((F==null?void 0:F.type)||"").toLowerCase();return o(F)&&(!$||$.includes("image")||$==="img"||$==="photo")});if(M)return o(M);const S=(Array.isArray(L==null?void 0:L.galeriaImagenes)?L.galeriaImagenes:[]).find(F=>{const $=((F==null?void 0:F.type)||"").toLowerCase();return o(F)&&(!$||$.includes("image")||$==="img"||$==="photo")});if(S)return o(S)}return""},u=f=>{let g=e.find(w=>((w==null?void 0:w.ruta)||"")===f);if(g)return g;const y=w=>(w||"").toLowerCase().replace(//g,"a").replace(//g,"e").replace(//g,"i").replace(//g,"o").replace(//g,"u").replace(//g,"n").replace(/[^a-z0-9]/g,""),x=y(f);return g=e.find(w=>{const N=y(w.nombre),b=y(w.ruta);return N===x||b===x||N.includes(x)||x.includes(N)}),g},d=f=>{const g=u(f);return g?t[g.id]||[]:(console.warn(` Categora no encontrada para ruta: "${f}"`),console.log(" Sugerencia: Verifica las categoras disponibles en la tabla arriba"),[])};return a.jsxs("div",{className:"bg-transparent min-h-screen transition-colors duration-300",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx(de.div,{className:"block sm:hidden w-full max-w-full mx-auto",style:{marginTop:0,marginBottom:0,padding:0},variants:pi,initial:"hidden",animate:"visible",children:a.jsx(dH,{})}),a.jsx("div",{className:"hidden sm:block w-full",style:{marginTop:0,marginBottom:0,padding:0},children:a.jsx("video",{src:i==="dark"?"/videos/pcu-intro-negro.mp4":"/videos/pcu-intro-blanco.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-auto object-cover",style:{marginTop:0,marginBottom:0,padding:0,display:"block",verticalAlign:"top"}},i)}),a.jsx(de.div,{className:"hidden sm:block w-full max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-12",variants:pi,initial:"hidden",animate:"visible",children:a.jsx("div",{className:"rounded-2xl overflow-hidden shadow-2xl ring-1 ring-indigo-100 dark:ring-gray-900",children:a.jsx(cH,{})})}),a.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-14",children:e.slice(0,4).map((f,g)=>{const x=(t[f.id]||[]).slice(0,4);return a.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 group border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",transition:{delay:.1*g},children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:f.nombre}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:x.map((w,N)=>{const b=c(w)||"/placeholder-product.svg";return a.jsx(At,{to:`/producto/${w.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:b,alt:w.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:T=>{T.target.onerror=null,T.target.src="/placeholder-product.svg"}})})},w.id)})}),a.jsxs(At,{to:`/Productos/${f.ruta}`,className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:["Explora ",f.nombre," "]})]},f.id)})}),a.jsx(de.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:pi,initial:"hidden",animate:"visible",children:a.jsx(At,{to:"/Productos/coleccionables",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:a.jsx("img",{src:"/ads/aficionados.png",alt:"Ver Nuestras colecciones",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),a.jsx("section",{className:"hidden xl:grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-14",children:[{to:"/Productos/retro-consolas",src:"/ads/retro.png",alt:"Retro Consolas"},{to:"/Productos/camaras",src:"/ads/camaras.png",alt:"Cmaras"}].map((f,g)=>a.jsx(de.div,{className:"overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition h-[220px] sm:h-[300px] md:h-[400px] group",whileHover:{scale:1.01},children:a.jsx(At,{to:f.to,className:"block w-full h-full",children:a.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-cover object-center group-hover:scale-110 transition-transform duration-400"})})},g))}),a.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Explora nuestras categoras"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:[{to:"/Productos/audifonos",src:"/ads/audifonoscate.png",alt:"Audfonos"},{to:"/Productos/mouses",src:"/ads/mousecate.png",alt:"Mouses"},{to:"/Productos/teclados",src:"/ads/tecladocate.png",alt:"Teclados"},{to:"/Productos/camaras",src:"/ads/camaracate.png",alt:"Cmaras"},{to:"/Productos/discos-duros",src:"/ads/discodurocate.png",alt:"Discos Duros"},{to:"/Productos/controles",src:"/ads/controlcate.png",alt:"Controles"}].map((f,g)=>a.jsx(At,{to:f.to,children:a.jsx("img",{src:f.src,alt:f.alt,className:"rounded-xl hover:scale-110 transition object-cover w-full aspect-[1/1] shadow-sm"})},f.alt))}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(At,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Ver todas las categoras "})})]})}),a.jsx(de.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:pi,initial:"hidden",animate:"visible",children:a.jsx(At,{to:"/estafetas",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:a.jsx("img",{src:"/ads/ESTAFETAS.png",alt:"Ver Nuestras Estafetas",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),a.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Descubre nuestros productos"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:Object.values(t).flat().slice(0,6).map(f=>a.jsx(At,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"bg-white dark:bg-black rounded-xl overflow-hidden shadow hover:shadow-md transition border border-gray-200 dark:border-gray-800",children:a.jsx("div",{className:"w-full aspect-[1/1] flex items-center justify-center p-2 overflow-hidden",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})})},f.id))}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(At,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestros productos "})})]})}),a.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Hogar Inteligente en Oferta"}),a.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:d("hogar-inteligente").slice(0,10).map(f=>{const g=c(f)||"/placeholder-product.svg";return a.jsx(At,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",children:a.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:a.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(At,{to:"/Productos/hogar-inteligente",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Descubre cmo transformar tu casa en un hogar inteligente "})})]})}),a.jsx(de.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:pi,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Tu Rincn Variado"}),a.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:d("tu-rincon-variado").slice(0,12).map(f=>{const g=c(f)||"/placeholder-product.svg";return a.jsx(At,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",title:f.nombre,children:a.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:a.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition-transform duration-300",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),a.jsx("div",{className:"text-right mt-6",children:a.jsx(At,{to:"/Productos/tu-rincon-variado",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestro Rincn Variado "})})]})}),a.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-16",children:[{to:"/Productos/consolas",src:"/ads/nintendoswtitchads.png",alt:"Consolas"},{to:"/Productos/controles",src:"/ads/controlads.png",alt:"Controles"}].map((f,g)=>a.jsx(de.div,{className:"overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition aspect-[16/9]",whileHover:{scale:1.01},children:a.jsx(At,{to:f.to,className:"block w-full h-full",children:a.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-contain object-center hover:scale-105 transition-transform duration-400 bg-black"})})},f.alt))}),a.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-16",children:[a.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cmaras de Vigilancia"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("camaras").slice(0,4).map(f=>a.jsx(At,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(At,{to:"/Productos/camaras",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Cmaras de Vigilancia "})]}),a.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Discos Duros"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("discos-duros").slice(0,4).map(f=>a.jsx(At,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(At,{to:"/Productos/discos-duros",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Discos Duros "})]}),a.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Memorias USB"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("memorias-usb").slice(0,4).map(f=>a.jsx(At,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(At,{to:"/Productos/memorias-usb",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Memorias USB "})]}),a.jsxs(de.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:pi,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cables"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:d("cables").slice(0,4).map(f=>a.jsx(At,{to:`/producto/${f.id}`,children:a.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:a.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre||"Cable",className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),a.jsx(At,{to:"/Productos/cables",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Cables "})]})]}),a.jsx("div",{className:"max-w-[1600px] mx-auto mt-20 px-4",children:a.jsx(fH,{})}),a.jsxs(de.section,{className:"max-w-4xl mx-auto px-6 py-20 text-center mt-10",variants:pi,initial:"hidden",animate:"visible",children:[a.jsxs("h2",{className:"text-3xl sm:text-4xl font-extrabold mb-6 text-gray-800 dark:text-gray-100",children:["Tienes dudas?"," ",a.jsx("span",{className:"text-indigo-700",children:"Contctanos ahora"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-10 max-w-xl mx-auto",children:"Nuestro equipo est listo para ayudarte por WhatsApp, telfono o correo. Atencin rpida y profesional."}),a.jsxs("div",{className:"bg-white dark:bg-black shadow-2xl rounded-2xl p-10 max-w-3xl mx-auto flex flex-col gap-6 border border-indigo-100 dark:border-gray-800 transition-colors duration-300",children:[a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(fh,{className:"text-indigo-700"}),a.jsx("span",{children:"Av. Estrella Sadhal, Santiago, Repblica Dominicana"})]}),a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(Wm,{className:"text-indigo-700"}),a.jsx("span",{children:"+1 (849)-635-7000 (Tienda)"})]}),a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(Wm,{className:"text-indigo-700"}),a.jsx("span",{children:"+1 (809)-582-1212 (Internet)"})]}),a.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[a.jsx(t1,{className:"text-indigo-700"}),a.jsx("span",{children:"playcenter121@gmail.com"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center mt-4",children:[a.jsxs("a",{href:"https://wa.me/18496357000?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20pgina.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-700 text-white rounded-lg shadow-md hover:bg-indigo-800 transition w-full sm:w-auto",children:[a.jsx(Hm,{className:"text-xl"}),"WhatsApp Tienda"]}),a.jsxs("a",{href:"https://wa.me/18095821212?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20pgina.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-700 text-white rounded-lg shadow-md hover:bg-gray-800 transition w-full sm:w-auto",children:[a.jsx(Hm,{className:"text-xl"}),"WhatsApp Internet"]})]})]})]})]})}async function pH(t){const e="https://api.cloudinary.com/v1_1/dprojkgqf/image/upload",n=new FormData;n.append("file",t),n.append("upload_preset","perfil_usuarios"),n.append("folder","muestras/comercio electrnico"),console.log("Archivo que se va a subir:",t),console.log("Preset usado:","perfil_usuarios"),console.log("Carpeta folder usada:","muestras/comercio electrnico");const r=await fetch(e,{method:"POST",body:n});if(!r.ok){const o=await r.text();throw console.error("Error Cloudinary:",o),new Error(" Error al subir la imagen a Cloudinary")}const i=await r.json();return console.log("Respuesta de Cloudinary:",i),i.secure_url}const hy={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, Repblica Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"},gH=(t="")=>String(t||"").trim()?String(t).trim().charAt(0).toUpperCase():"?",yH=(t="")=>{let e=0;for(let o=0;o<t.length;o++)e=t.charCodeAt(o)+((e<<5)-e),e=e&e;const n=e>>0&255,r=e>>8&255,i=e>>16&255;return`#${[n,r,i].map(o=>o.toString(16).padStart(2,"0")).join("")}`},xH=(t="",e=512)=>{const n=gH(t),r=yH(t||n),i=`<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${e}' viewBox='0 0 ${e} ${e}'>
    <rect width='100%' height='100%' fill='${r}' rx='${Math.floor(e*.12)}' />
    <text x='50%' y='50%' dy='.04em' font-family='Inter, system-ui, Arial' font-size='${Math.floor(e*.42)}' fill='#fff' text-anchor='middle' alignment-baseline='middle'>${n}</text>
  </svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`},vH={hidden:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{duration:.36,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:-8,transition:{duration:.25}}},ll={hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.26}}};function bH({historial:t}){var g,y;const[e,n]=E.useState(null),[r,i]=E.useState("all"),o=!1;if(!(t!=null&&t.length))return a.jsxs(de.div,{variants:ll,className:"empty-state-beautiful",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("div",{className:"empty-illustration",children:a.jsx(de.div,{className:"empty-box",animate:{y:[0,-10,0],rotateY:[0,5,0,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},"aria-hidden":!0,children:a.jsx(_x,{size:56})})}),a.jsx(de.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Tu historial est esperando!"}),a.jsx(de.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Cuando realices tu primera compra, aparecer aqu."}),a.jsx(de.div,{className:"empty-cta",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7},children:a.jsx("button",{className:"btn-beautiful-primary",children:"Explorar productos"})})]});const c=x=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(x||0),u=x=>{if(!x)return"";let w;return x!=null&&x.seconds?w=new Date(x.seconds*1e3):w=new Date(x),isNaN(w)?"":w.toLocaleString("es-DO",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},d=x=>{switch(x){case"completado":return{color:"status-completed",Icon:Qm,text:"Completado",gradient:"linear-gradient(135deg, #10b981, #059669)"};case"cancelado":return{color:"status-cancelled",Icon:zd,text:"Cancelado",gradient:"linear-gradient(135deg, #ef4444, #dc2626)"};case"pendiente":default:return{color:"status-pending",Icon:L$,text:"Pendiente",gradient:"linear-gradient(135deg, #f59e0b, #d97706)"}}},f=t.filter(x=>r==="all"?!0:x.estado===r);return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        .history-compact { --fs-1:.95rem; --fs-2:.9rem; --fs-3:.85rem; --pad-1:.55rem; --pad-2:.8rem; --radius:12px; }
        .history-compact .order-card-beautiful { padding: var(--pad-2); border-radius: var(--radius); }
        .history-compact .order-number-beautiful { font-size: var(--fs-1); }
        .history-compact .order-date-beautiful { font-size: var(--fs-3); opacity:.8; }
        .history-compact .status-badge-beautiful { padding:.35rem .55rem; border-radius:999px; font-size: var(--fs-3); }
        .history-compact .order-total-beautiful { font-size: var(--fs-1); }
        .history-compact .products-grid { gap:.5rem; }
        .history-compact .product-preview-beautiful { padding: var(--pad-1); border-radius:10px; }
        .history-compact .product-name-beautiful { font-size: var(--fs-2); }
        .history-compact .product-details-beautiful { font-size: var(--fs-3); opacity:.85; }
      `}),o,a.jsx(de.div,{variants:ll,className:"orders-container-beautiful history-compact",layout:!0,children:a.jsx(dn,{children:f.map((x,w)=>{var T,j;const N=d(x.estado),b=N.Icon;return a.jsxs(de.div,{className:"order-card-beautiful",onClick:()=>n(x),initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,delay:w*.05,type:"spring",stiffness:120},whileHover:{scale:1.01,y:-3,boxShadow:"0 16px 32px rgba(0,0,0,0.08)"},whileTap:{scale:.99},layout:!0,children:[a.jsx("div",{className:"order-card-glow",style:{background:N.gradient}}),a.jsxs("div",{className:"order-header-beautiful",style:{display:"flex",justifyContent:"space-between",gap:"0.6rem"},children:[a.jsxs("div",{className:"order-info-beautiful",children:[a.jsx(de.h4,{className:"order-number-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:x.numeroOrden||`Orden #${x.id.slice(-8)}`}),a.jsx(de.p,{className:"order-date-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:a.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[a.jsx(IE,{size:14})," ",u(x.fecha)]})})]}),a.jsxs("div",{className:"order-status-beautiful",style:{display:"flex",alignItems:"center",gap:".5rem"},children:[a.jsxs(de.div,{className:`status-badge-beautiful ${N.color}`,style:{background:N.gradient,display:"inline-flex",alignItems:"center",gap:6},whileHover:{scale:1.05},initial:{scale:0},animate:{scale:1},transition:{delay:.35,type:"spring"},children:[a.jsx(b,{size:14}),a.jsx("span",{className:"status-text",children:N.text})]}),a.jsx(de.div,{className:"order-total-beautiful",initial:{opacity:0,x:12},animate:{opacity:1,x:0},transition:{delay:.4},children:c(x.total)})]})]}),a.jsxs(de.div,{className:"order-products-preview-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.45},children:[a.jsx("div",{className:"products-grid",children:(T=x.productos)==null?void 0:T.slice(0,3).map((R,A)=>a.jsxs(de.div,{className:"product-preview-beautiful",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5+A*.08},whileHover:{scale:1.03},children:[a.jsx("div",{className:"product-image-placeholder","aria-hidden":!0,style:{display:"flex",alignItems:"center"},children:a.jsx(_x,{size:18})}),a.jsxs("div",{className:"product-preview-info-beautiful",children:[a.jsx("span",{className:"product-name-beautiful",children:R.nombre}),a.jsxs("span",{className:"product-details-beautiful",children:[R.cantidad,"x "," ",c(R.precio)]}),(R==null?void 0:R.id)&&a.jsxs("button",{className:"product-view-link",onClick:L=>{L.stopPropagation(),window.location.href=`/producto/${R.id}`},title:"Ver producto","aria-label":`Ver producto ${R.nombre}`,children:[a.jsx(PE,{size:14}),"Ver producto",a.jsx(de.span,{className:"pv-arrow",animate:{x:[0,4,0]},transition:{duration:1.6,repeat:1/0},children:a.jsx(AE,{size:14})})]})]})]},A))}),((j=x.productos)==null?void 0:j.length)>3&&a.jsxs(de.div,{className:"more-products-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},whileHover:{scale:1.06},children:[a.jsxs("span",{className:"more-count",children:["+",x.productos.length-3]}),a.jsx("span",{className:"more-text",children:"ms productos"})]})]}),a.jsx(de.div,{className:"order-card-footer",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:a.jsxs("div",{className:"view-details-hint",children:[a.jsx("span",{children:"Toque para ver detalles"}),a.jsx(de.span,{className:"arrow-icon",animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},"aria-hidden":!0,children:a.jsx(AE,{size:16})})]})})]},x.id)})})}),a.jsx(dn,{children:e&&a.jsx(de.div,{className:"order-modal-overlay-beautiful",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(null),children:a.jsxs(de.div,{className:"order-modal-beautiful",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"modal-header-beautiful",children:[a.jsxs("div",{className:"modal-title-section",children:[a.jsx("h3",{className:"modal-title",children:e.numeroOrden||`Orden #${e.id.slice(-8)}`}),a.jsx("div",{className:"modal-subtitle",children:"Detalles de tu compra"})]}),a.jsx("button",{className:"close-modal-beautiful",onClick:()=>n(null),children:""})]}),a.jsxs("div",{className:"modal-content-beautiful",children:[a.jsx("div",{className:"order-summary-beautiful",children:a.jsxs("div",{className:"summary-card",children:[a.jsxs("div",{className:"summary-item",children:[a.jsxs("span",{className:"summary-label",children:[a.jsx(IE,{size:14})," Fecha"]}),a.jsx("span",{className:"summary-value",children:new Date((g=e.fecha)!=null&&g.seconds?e.fecha.seconds*1e3:e.fecha).toLocaleString("es-DO")})]}),a.jsxs("div",{className:"summary-item",children:[a.jsxs("span",{className:"summary-label",children:[a.jsx(iz,{size:14})," Estado"]}),a.jsx("span",{className:"summary-status",children:e.estado})]}),a.jsxs("div",{className:"summary-item",children:[a.jsxs("span",{className:"summary-label",children:[a.jsx(N$,{size:14})," Total"]}),a.jsxs("span",{className:"summary-total",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(e.total)]})]})]})}),a.jsx("div",{className:"products-grid-modal",children:(y=e.productos)==null?void 0:y.map((x,w)=>a.jsxs("div",{className:"product-item-beautiful",children:[a.jsxs("div",{className:"product-info-modal",children:[a.jsx("span",{className:"product-name-modal",children:x.nombre}),a.jsxs("span",{className:"product-details-modal",children:[x.cantidad,"  DOP"," ",new Intl.NumberFormat("es-DO").format(x.precio)]})]}),a.jsxs("div",{className:"product-subtotal-beautiful",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(x.cantidad*x.precio)]}),a.jsxs("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${x.id}`,children:[a.jsx(PE,{size:16})," Ver producto"]})]},w))})]})]})})})]})}function wH({vista:t,setVista:e,onLogout:n,isMobile:r,onClose:i}){const o=[{id:"cuenta",label:"Mi cuenta",icon:yz},{id:"pedidos",label:"Mis pedidos",icon:_x},{id:"direcciones",label:"Mis direcciones",icon:q$},{id:"pagos",label:"Mtodos de pago",icon:L1},{id:"configuracion",label:"Configuracin",icon:tz}],c=u=>{e(u),r&&i&&i()};return a.jsxs("div",{className:"sidebar-menu",children:[o.map(u=>{const d=u.icon;return a.jsxs("button",{onClick:()=>c(u.id),className:`sidebar-item ${t===u.id?"active":""}`,children:[a.jsx(d,{size:20}),a.jsx("span",{children:u.label}),a.jsx(wx,{size:16,className:"sidebar-item-arrow"})]},u.id)}),a.jsx("div",{className:"sidebar-divider"}),a.jsxs("button",{onClick:n,className:"sidebar-item danger",children:[a.jsx(H$,{size:20}),a.jsx("span",{children:"Cerrar sesin"}),a.jsx(wx,{size:16,className:"sidebar-item-arrow"})]})]})}function _H({visible:t,text:e="Cargando..."}){return t?a.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:a.jsxs("div",{className:"loaderInner",children:[a.jsx("div",{className:"loader",children:a.jsxs("div",{className:"spinner",children:[a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{}),a.jsx("div",{})]})}),a.jsx("p",{className:"loaderText",children:e})]})}):null}function rN({abierto:t,titulo:e,descripcion:n,onCancel:r,onConfirm:i,dangerText:o="Confirmar"}){return t?a.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:a.jsxs(de.div,{className:"modal-card card",initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},children:[a.jsx("h3",{id:"modal-title",className:"modal-title",children:e}),a.jsx("p",{className:"modal-desc",children:n}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"btn btn-ghost",onClick:r,children:"Cancelar"}),a.jsx("button",{className:"btn btn-danger",onClick:i,children:o})]})]})}):null}function kH(){const{usuario:t,usuarioInfo:e,actualizarUsuarioInfo:n,logout:r}=oi(),i=ai(),[o,c]=E.useState("cuenta"),[u,d]=E.useState(!1),[f,g]=E.useState(!1),[y,x]=E.useState(!1),[w,N]=E.useState({text:"",tipo:""}),[b,T]=E.useState(!1),j=si.useRef(null),R=si.useRef(null),[A,L]=E.useState({nombre:(t==null?void 0:t.displayName)||"",email:(t==null?void 0:t.email)||"",telefono:"",direccion:"",fotoURL:(t==null?void 0:t.photoURL)||""}),[z,q]=E.useState(null),[D,M]=E.useState(null),[P,S]=E.useState([]),[F,$]=E.useState([]),[I,re]=E.useState(!1),[ne,we]=E.useState(null),[Ee,ee]=E.useState(!1),[ae,ge]=E.useState(!1),[H,J]=E.useState(!1),[_e,Ue]=E.useState(!1),[Ge,tt]=E.useState(null);E.useEffect(()=>{L(e?G=>({...G,telefono:e.telefono||"",direccion:e.direccion||"",fotoURL:e.fotoURL||(t==null?void 0:t.photoURL)||""}):G=>({...G,fotoURL:(t==null?void 0:t.photoURL)||""}))},[e,t==null?void 0:t.photoURL]),E.useEffect(()=>{t&&(lt(),Je())},[t]);const lt=async()=>{try{const G=pn($t(Ve,"orders"),Pr("userId","==",t.uid)),X=await Ji(G);S(X.docs.map(me=>({id:me.id,...me.data()})))}catch(G){console.error("fetchHistorial:",G)}},Je=async()=>{try{const G=pn($t(Ve,"direcciones"),Pr("usuarioId","==",t.uid)),X=await Ji(G);$(X.docs.map(me=>({id:me.id,...me.data()})))}catch(G){console.error("fetchDirecciones:",G)}},Ze=E.useMemo(()=>{if(D)return D;if(A.fotoURL)return A.fotoURL;const G=A.nombre||A.email||(t==null?void 0:t.email)||"U";return xH(G,512)},[D,A.fotoURL,A.nombre,A.email,t==null?void 0:t.email]),Nt=E.useMemo(()=>{if(A.nombre&&A.nombre.trim())return A.nombre;const X=(A.email||(t==null?void 0:t.email)||"").split("@")[0]||"Usuario";return X.charAt(0).toUpperCase()+X.slice(1)},[A.nombre,A.email,t==null?void 0:t.email]),bt=(G,X="info",me=3500)=>{N({text:G,tipo:X}),me&&setTimeout(()=>N({text:"",tipo:""}),me)},pt=async()=>{try{ge(!1),await r(),i("/")}catch(G){console.error("logout:",G),bt("Error cerrando sesin.","error",5e3)}},yt=G=>L(X=>({...X,[G.target.name]:G.target.value})),Dt=G=>{var Te;const X=(Te=G.target.files)==null?void 0:Te[0];if(!X)return;q(X);const me=URL.createObjectURL(X);M(me)},It=()=>{D&&URL.revokeObjectURL(D),q(null),M(null)},Sn=async()=>{if(!z)return bt("Selecciona una imagen primero.","error");x(!0);try{const G=await pH(z);await n({fotoURL:G}),await $c(t,{photoURL:G}),L(X=>({...X,fotoURL:G})),It(),bt("Foto actualizada.","success")}catch(G){console.error("uploadLocalImage:",G),bt("Error subiendo imagen.","error",5e3)}finally{x(!1)}},Z=async()=>{x(!0);try{await n({telefono:A.telefono,direccion:A.direccion,displayName:A.nombre});const G={telefono:A.telefono,direccion:A.direccion,displayName:A.nombre,updatedAt:new Date};try{await rr(mt(Ve,"users",t.uid),G,{merge:!0})}catch(me){console.warn("No se pudo escribir users/{uid}:",me)}try{await rr(mt(Ve,"usuarios",t.uid),G,{merge:!0})}catch(me){console.warn("No se pudo escribir usuarios/{uid}:",me)}const X={};t.displayName!==A.nombre&&(X.displayName=A.nombre),Object.keys(X).length&&await $c(t,X),g(!1),bt("Perfil guardado.","success")}catch(G){console.error("Error guardando perfil:",G),bt("Error guardando perfil.","error")}finally{x(!1)}},je=async()=>{x(!0);try{await $c(t,{photoURL:""}),await n({fotoURL:""}),L(G=>({...G,fotoURL:""})),It(),bt("Imagen de perfil removida.","success")}catch(G){console.error("confirmRemoveImage:",G),bt("Error removiendo imagen.","error")}finally{x(!1),ee(!1)}},Oe=async G=>{try{const X=typeof G=="string"?G:(G==null?void 0:G.direccionCompleta)||"",me=G&&G.metodoEntrega?G.metodoEntrega:"domicilio";J(!0),await n({direccion:X,metodoEntrega:me});const Te={direccion:X,metodoEntrega:me,updatedAt:new Date};try{await rr(mt(Ve,"users",t.uid),Te,{merge:!0})}catch(te){console.warn("No se pudo escribir users/{uid}:",te)}try{await rr(mt(Ve,"usuarios",t.uid),Te,{merge:!0})}catch(te){console.warn("No se pudo escribir usuarios/{uid}:",te)}try{let te=await qr(mt(Ve,"users",t.uid));if(te.exists()||(te=await qr(mt(Ve,"usuarios",t.uid))),te&&te.exists()){const be=te.data()||{};await n({direccion:be.direccion||X,metodoEntrega:be.metodoEntrega||me})}}catch(te){console.warn("No se pudo releer documento de usuario:",te)}I&&re(!1),await Je(),L(te=>({...te,direccion:X})),bt("Direccin seleccionada y guardada.","success"),window.location.reload()}catch(X){console.error("handleSeleccionarDireccion error:",X),J(!1),bt("Error seleccionando direccin.","error",5e3)}},rt=async G=>{try{if(await Lp(mt(Ve,"direcciones",G)),t!=null&&t.direccion){const X=F.find(me=>me.id===G);X&&t.direccion===X.direccionCompleta&&(await n({direccion:"",metodoEntrega:"",selectedDeliveryMethod:""}),setTimeout(()=>{window.location.reload()},1e3))}await Je(),bt("Direccin eliminada correctamente.","success")}catch(X){console.error("eliminarDireccion:",X),bt("Error eliminando direccin.","error")}},St=G=>{tt(G),Ue(!0)},He=()=>{Ue(!1),tt(null)},dt=()=>{Ge&&(rt(Ge),Ue(!1),tt(null))};return!t||!e?a.jsx("main",{className:"min-h-screen flex items-center justify-center bg-slate-50",style:{paddingTop:"calc(var(--content-offset, 100px) + 40px)"},children:a.jsx("p",{className:"text-lg animate-pulse",children:"Cargando perfil..."})}):a.jsxs(de.main,{className:"profile-page",variants:vH,initial:"hidden",animate:"enter",exit:"exit",children:[a.jsxs("button",{className:"sidebar-toggle-btn xl:hidden",onClick:()=>d(!u),"aria-label":"Abrir men",children:[a.jsx(X$,{size:24}),a.jsx("span",{children:"Perfil"})]}),a.jsx(dn,{children:u&&a.jsx(de.div,{className:"sidebar-overlay xl:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!1)})}),a.jsxs("div",{className:"profile-container",children:[a.jsxs("aside",{className:`profile-sidebar ${u?"open":""}`,children:[a.jsx("button",{className:"sidebar-close-btn xl:hidden",onClick:()=>d(!1),children:a.jsx(vz,{size:24})}),a.jsx(wH,{vista:o,setVista:c,onLogout:()=>ge(!0),isMobile:!0,onClose:()=>d(!1)})]}),a.jsx("main",{className:"profile-content",children:a.jsx("div",{className:"content-card",children:a.jsxs(dn,{mode:"wait",children:[o==="cuenta"&&a.jsxs(de.section,{variants:ll,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsxs("div",{className:"profile-header big",children:[a.jsx("div",{className:"avatar-block large",children:a.jsx("img",{src:Ze,alt:"Avatar",className:"avatar-img"})}),a.jsxs("div",{className:"profile-meta big",children:[a.jsx("h1",{className:"profile-name",children:Nt}),a.jsx("p",{className:"profile-email",children:A.email}),a.jsxs("p",{className:"muted small",children:["UID: ",a.jsx("span",{className:"mono",children:t.uid})]}),a.jsxs("div",{className:"profile-actions",children:[a.jsx("button",{className:"btn btn-primary",onClick:()=>T(!0),children:"Cambiar foto"}),a.jsx("button",{className:"btn btn-ghost",onClick:()=>ee(!0),children:"Quitar"}),D&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-success",onClick:Sn,disabled:y,children:"Guardar foto"}),a.jsx("button",{className:"btn btn-outline",onClick:It,children:"Cancelar"})]})]}),a.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:Dt,className:"hidden",style:{display:"none"}}),a.jsx("input",{ref:R,type:"file",accept:"image/*",capture:"environment",onChange:Dt,className:"hidden",style:{display:"none"}})]})]}),a.jsxs("div",{className:"form-grid big",children:[a.jsxs("div",{className:"form-row",children:[a.jsx("label",{children:"Nombre"}),a.jsx("input",{name:"nombre",value:A.nombre,onChange:yt,disabled:!f})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("label",{children:"Email"}),a.jsx("input",{name:"email",value:A.email,disabled:!0})]}),a.jsxs("div",{className:"form-row",children:[a.jsx("label",{children:"Telfono"}),a.jsx("input",{name:"telefono",value:A.telefono,onChange:yt,disabled:!f})]}),a.jsxs("div",{className:"form-row full",children:[a.jsx("label",{children:"Direccin completa"}),a.jsx("textarea",{name:"direccion",value:A.direccion,onChange:yt,disabled:!f,rows:4}),a.jsx("p",{className:"muted hint",children:'Pulsa "Editar" para modificar.'})]}),a.jsx("div",{className:"form-actions",children:f?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:Z,className:"btn btn-success",disabled:y,children:"Guardar"}),a.jsx("button",{onClick:()=>{g(!1),It()},className:"btn btn-ghost",children:"Cancelar"})]}):a.jsx("button",{onClick:()=>g(!0),className:"btn btn-primary",children:"Editar perfil"})})]})]},"perfil"),o==="pedidos"&&a.jsxs(de.section,{variants:ll,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsx("h2",{className:"section-title large",children:"Mis pedidos"}),a.jsx(bH,{historial:P})]},"historial"),o==="direcciones"&&a.jsxs(de.section,{variants:ll,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsxs("div",{className:"direcciones-head",children:[a.jsx("h2",{className:"section-title large",children:"Direcciones"}),a.jsx("div",{children:a.jsx("button",{className:"btn btn-primary",onClick:()=>{we(null),re(!0)},children:"Aadir direccin"})})]}),a.jsxs("div",{className:"cards-list",children:[a.jsxs("div",{className:"address-card large",children:[a.jsxs("div",{className:"address-content",children:[a.jsx("div",{className:"address-title",children:"Recoger en: Playcenter Universal Santiago"}),a.jsx("div",{className:"muted break-words",children:hy.direccionCompleta}),a.jsx("a",{href:hy.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),a.jsx("div",{className:"address-actions",children:a.jsx("button",{onClick:()=>Oe(hy),className:"btn btn-success",children:"Seleccionar"})})]}),F.length===0?a.jsx("div",{className:"empty",children:"No tienes direcciones guardadas."}):F.map(G=>a.jsxs("div",{className:"address-card large",children:[a.jsxs("div",{className:"address-content",children:[a.jsx("div",{className:"address-title break-words",children:G.direccionCompleta||`${G.numeroCalle||""} ${G.numeroCasa?"Casa "+G.numeroCasa:""}, ${G.ciudad||""}, ${G.provincia||""}`}),a.jsxs("div",{className:"muted",children:["Mtodo: ",G.metodoEntrega||"domicilio"]}),G.referencia&&a.jsxs("div",{className:"muted",children:["Ref: ",G.referencia]}),G.ubicacion&&a.jsx("a",{href:G.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),a.jsxs("div",{className:"address-actions",children:[a.jsx("button",{onClick:()=>{we(G),re(!0)},className:"address-action-btn edit-btn","aria-label":"Editar direccin",children:a.jsx(M4,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Oe(G),className:"address-action-btn select-btn","aria-label":"Seleccionar direccin",children:a.jsx(Ac,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>St(G.id),className:"address-action-btn delete-btn","aria-label":"Eliminar direccin",children:a.jsx(O4,{className:"w-4 h-4"})})]})]},G.id))]}),I&&a.jsx(V4,{abierto:I,onClose:async()=>{re(!1),we(null),await Je()},usuarioId:t.uid,direccionEditar:ne,actualizarLista:Je})]},"direcciones"),o==="pagos"&&a.jsxs(de.section,{variants:ll,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsx("h2",{className:"section-title large",children:"Mtodos de pago"}),a.jsxs("div",{className:"empty-state-beautiful",children:[a.jsx("div",{className:"empty-illustration",children:a.jsx(de.div,{className:"empty-box",animate:{y:[0,-10,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:a.jsx(L1,{size:56})})}),a.jsx("h3",{children:"An no tienes mtodos de pago"}),a.jsx("p",{children:"Cuando agregues una tarjeta o mtodo de pago, aparecer aqu."}),a.jsx("div",{className:"empty-cta",children:a.jsx("button",{className:"btn-beautiful-primary",children:"Agregar mtodo de pago"})})]})]},"pagos"),o==="configuracion"&&a.jsxs(de.section,{variants:ll,initial:"hidden",animate:"show",exit:"hidden",children:[a.jsx("h2",{className:"section-title large",children:"Configuracin"}),a.jsxs("div",{className:"cards-list",children:[a.jsxs("div",{className:"config-card",children:[a.jsxs("div",{className:"config-card-header",children:[a.jsx(z$,{size:20}),a.jsx("h3",{children:"Cambiar contrasea"})]}),a.jsx("p",{className:"config-card-desc",children:"Actualiza tu contrasea para mantener tu cuenta segura."}),a.jsx("button",{className:"btn btn-outline",children:"Cambiar contrasea"})]}),a.jsxs("div",{className:"config-card",children:[a.jsxs("div",{className:"config-card-header",children:[a.jsx(p$,{size:20}),a.jsx("h3",{children:"Notificaciones"})]}),a.jsx("p",{className:"config-card-desc",children:"Administra cmo quieres recibir notificaciones."}),a.jsxs("div",{className:"config-toggle",children:[a.jsxs("label",{className:"toggle-item",children:[a.jsx("span",{children:"Notificaciones por email"}),a.jsx("input",{type:"checkbox",defaultChecked:!0})]}),a.jsxs("label",{className:"toggle-item",children:[a.jsx("span",{children:"Notificaciones de pedidos"}),a.jsx("input",{type:"checkbox",defaultChecked:!0})]}),a.jsxs("label",{className:"toggle-item",children:[a.jsx("span",{children:"Ofertas y promociones"}),a.jsx("input",{type:"checkbox"})]})]})]}),a.jsxs("div",{className:"config-card",children:[a.jsxs("div",{className:"config-card-header",children:[a.jsx(M$,{size:20}),a.jsx("h3",{children:"Idioma"})]}),a.jsx("p",{className:"config-card-desc",children:"Selecciona tu idioma preferido."}),a.jsxs("select",{className:"config-select",children:[a.jsx("option",{value:"es",children:"Espaol"}),a.jsx("option",{value:"en",children:"English"})]})]})]})]},"configuracion")]})})})]}),a.jsx(rN,{abierto:Ee,titulo:"Quitar imagen de perfil",descripcion:"Se quitar la URL de tu perfil (no borra el archivo en Cloudinary).",onCancel:()=>ee(!1),onConfirm:je,dangerText:"Quitar imagen"}),a.jsx(rN,{abierto:ae,titulo:"Cerrar sesin",descripcion:"Ests seguro que quieres cerrar sesin?",onCancel:()=>ge(!1),onConfirm:pt,dangerText:"Cerrar sesin"}),a.jsx(dn,{children:b&&a.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>T(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:a.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:G=>G.stopPropagation(),style:{backgroundColor:"white",padding:"2rem",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%"},children:[a.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#1f2937",marginBottom:"1rem",textAlign:"center"},children:"Cambiar foto de perfil"}),a.jsx("p",{style:{color:"#6b7280",marginBottom:"1.5rem",textAlign:"center",fontSize:"0.9rem"},children:"Selecciona cmo quieres subir tu foto"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[a.jsxs("button",{onClick:()=>{var G;(G=R.current)==null||G.click(),T(!1)},style:{padding:"1rem 1.5rem",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem"},onMouseOver:G=>{G.currentTarget.style.backgroundColor="#f9fafb",G.currentTarget.style.borderColor="#2563eb"},onMouseOut:G=>{G.currentTarget.style.backgroundColor="white",G.currentTarget.style.borderColor="#e5e7eb"},children:[a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),"Tomar foto con cmara"]}),a.jsxs("button",{onClick:()=>{var G;(G=j.current)==null||G.click(),T(!1)},style:{padding:"1rem 1.5rem",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem"},onMouseOver:G=>{G.currentTarget.style.backgroundColor="#f9fafb",G.currentTarget.style.borderColor="#2563eb"},onMouseOut:G=>{G.currentTarget.style.backgroundColor="white",G.currentTarget.style.borderColor="#e5e7eb"},children:[a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("polyline",{points:"21 15 16 10 5 21"})]}),"Seleccionar de galera"]}),a.jsxs("button",{onClick:()=>{var G;(G=j.current)==null||G.click(),T(!1)},style:{padding:"1rem 1.5rem",borderRadius:"12px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem"},onMouseOver:G=>{G.currentTarget.style.backgroundColor="#f9fafb",G.currentTarget.style.borderColor="#2563eb"},onMouseOut:G=>{G.currentTarget.style.backgroundColor="white",G.currentTarget.style.borderColor="#e5e7eb"},children:[a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),a.jsx("polyline",{points:"13 2 13 9 20 9"})]}),"Seleccionar archivo"]}),a.jsx("button",{onClick:()=>T(!1),style:{marginTop:"0.5rem",padding:"0.75rem 1.5rem",borderRadius:"12px",border:"none",backgroundColor:"transparent",color:"#6b7280",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:G=>G.currentTarget.style.color="#374151",onMouseOut:G=>G.currentTarget.style.color="#6b7280",children:"Cancelar"})]})]})})}),a.jsx(_H,{visible:H,text:"Guardando..."}),a.jsx(dn,{children:_e&&a.jsx(de.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:a.jsxs(de.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[a.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"Eliminar direccin?"}),a.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"Ests seguro que quieres eliminar esta direccin? Esta accin no se puede deshacer."}),a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[a.jsx("button",{onClick:He,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:G=>G.target.style.backgroundColor="#f9fafb",onMouseOut:G=>G.target.style.backgroundColor="white",children:"Cancelar"}),a.jsx("button",{onClick:dt,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:G=>G.target.style.backgroundColor="#dc2626",onMouseOut:G=>G.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),w.text&&a.jsx(de.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`toast ${w.tipo==="success"?"toast-success":w.tipo==="error"?"toast-error":"toast-info"}`,children:w.text})]})}const EH="https://lab.cardnet.com.do/authorize";function Ix({className:t,total:e,label:n,items:r}){const[i,o]=E.useState(!1),[c,u]=E.useState(null),d=typeof e=="number"?e/100:null,f=Number.isFinite(d)?new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(d):null,g=n||(f?`Comprar ahora  ${f}`:"Comprar ahora"),y=async()=>{if(!i)try{if(o(!0),u(null),!e||e<=0)throw new Error("Monto invlido");const x=`ORD-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log(" Creando sesin de Cardnet...",{amount:d,orderId:x,items:(r==null?void 0:r.length)||0});const w=WC(qC,"createCardnetSession"),N=new Promise((R,A)=>setTimeout(()=>A(new Error("Tiempo de espera agotado. Intenta de nuevo.")),2e4)),b=await Promise.race([w({amount:d,orderId:x,items:r||[]}),N]);if(!b.data.success||!b.data.session)throw new Error("No se pudo crear la sesin de pago");console.log(" Sesin creada:",b.data.session),sessionStorage.setItem("cardnetSessionKey",b.data.sessionKey),sessionStorage.setItem("cardnetOrderId",b.data.orderId),sessionStorage.setItem("cardnetTransactionId",b.data.transactionId);const T=document.createElement("form");T.method="POST",T.action=EH;const j=document.createElement("input");j.type="hidden",j.name="SESSION",j.value=b.data.session,T.appendChild(j),document.body.appendChild(T),T.submit()}catch(x){console.error(" Error al iniciar pago:",x);let w="Error al procesar el pago";x.code==="deadline-exceeded"?w="La pasarela de pago tard mucho en responder. Por favor intenta de nuevo.":x.code==="failed-precondition"?w="Hay un problema con la configuracin de pagos. Contacta a soporte.":x.message&&(w=x.message),u(w),o(!1),alert(` Error:

${w}

Por favor, intenta de nuevo en unos segundos.`)}};return a.jsxs("button",{onClick:y,className:`pay-btn ${t||""}`,disabled:i,children:[a.jsx("span",{className:"btn-text",children:g}),a.jsxs("div",{className:"icon-container",children:[a.jsx("svg",{viewBox:"0 0 24 24",className:"icon card-icon",children:a.jsx("path",{d:"M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18C2,19.11 2.89,20 4,20H20C21.11,20 22,19.11 22,18V6C22,4.89 21.11,4 20,4Z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon payment-icon",children:a.jsx("path",{d:"M2,17H22V21H2V17M6.25,7H9V6H6V3H18V6H15V7H17.75L19,17H5L6.25,7M9,10H15V8H9V10M9,13H15V11H9V13Z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon dollar-icon",children:a.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon wallet-icon default-icon",children:a.jsx("path",{d:"M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.9 10,8V16A2,2 0 0,0 12,18M12,16H22V8H12M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z",fill:"currentColor"})}),a.jsx("svg",{viewBox:"0 0 24 24",className:"icon check-icon",children:a.jsx("path",{d:"M9,16.17L4.83,12L3.41,13.41L9,19L21,7L19.59,5.59L9,16.17Z",fill:"currentColor"})})]})]})}function NH({productoActual:t,onProductoClick:e}){const{products:n,loading:r}=QC(t==null?void 0:t.categoria),i=E.useRef(null),[o,c]=E.useState(!1),[u,d]=E.useState(!1),f=E.useMemo(()=>!t||!n?[]:n.filter(b=>(b==null?void 0:b.id)!==(t==null?void 0:t.id)).slice(0,20),[n,t==null?void 0:t.id]),g=E.useCallback(()=>{const b=i.current;if(!b)return 1;const T=b.offsetWidth,j=b.querySelector(".prl-card");if(!j)return 1;const L=j.offsetWidth+20;return Math.floor(T/L)},[]),y=E.useCallback(()=>{const b=i.current;if(!b)return;const{scrollLeft:T,scrollWidth:j,clientWidth:R}=b;c(T>10),d(T<j-R-10)},[]),x=E.useCallback(b=>{const T=i.current;if(!T)return;const j=T.querySelector(".prl-card");if(!j)return;const L=j.offsetWidth+20,z=g(),q=b*z*L;T.scrollBy({left:q,behavior:"smooth"})},[g]);E.useEffect(()=>{const b=i.current;if(!b)return;y();const T=()=>{const j=b.parentElement;j&&b.scrollLeft>10&&j.classList.add("scrolled")};return b.addEventListener("scroll",y),b.addEventListener("scroll",T),window.addEventListener("resize",y),()=>{b.removeEventListener("scroll",y),b.removeEventListener("scroll",T),window.removeEventListener("resize",y)}},[y,f]);const w=b=>{b&&(e?e(b):window.location.href=`/producto/${b}`)},N=b=>{const T=Math.round(Number(b)||0);try{return new Intl.NumberFormat("es-DO").format(T)}catch{return String(T)}};return r?a.jsxs("div",{className:"productos-relacionados-container",children:[a.jsx("h3",{className:"prl-title",children:"Productos Relacionados"}),a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})]}):a.jsx("section",{className:"prl-section","aria-label":"Productos relacionados",children:a.jsxs("div",{className:"prl-container",children:[a.jsx("h2",{className:"prl-title",children:"Productos relacionados"}),a.jsxs("div",{className:"prl-wrapper","aria-roledescription":"carrusel",children:[o&&a.jsx("button",{className:"prl-arrow left",onClick:()=>x(-1),"aria-label":"Anterior",type:"button",children:a.jsx(p7,{size:18})}),a.jsx("div",{ref:i,className:"prl-rail",children:f.length>0?f.map(b=>{var A;const T=(b==null?void 0:b.imagen)||((A=b==null?void 0:b.imagenes)==null?void 0:A[0])||"",j=(b==null?void 0:b.nombre)||"Producto",R=Number(b==null?void 0:b.precio)||0;return a.jsxs("article",{className:"prl-card",role:"group","aria-label":j,onClick:()=>w(b.slug||b.id),children:[a.jsx("div",{className:"prl-imgbox",children:T?a.jsx("img",{src:T,alt:j,className:"prl-img",loading:"lazy",draggable:"false",decoding:"async"}):a.jsx("div",{className:"prl-img-fallback","aria-hidden":!0})}),a.jsxs("div",{className:"prl-meta",children:[a.jsx("h3",{className:"prl-name",title:j,children:j}),a.jsx("div",{className:"prl-price",children:R>0?a.jsxs("span",{children:["DOP ",a.jsx("strong",{children:N(R)})]}):a.jsx("span",{className:"prl-price-muted",children:"Sin precio"})})]})]},b==null?void 0:b.id)}):a.jsx("div",{className:"prl-empty",children:"No hay productos relacionados."})}),u&&a.jsx("button",{className:"prl-arrow right",onClick:()=>x(1),"aria-label":"Siguiente",type:"button",children:a.jsx(g7,{size:18})})]})]})})}function iN(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function fy(t){if(!t)return"";try{let e=String(t);return e=e.replace(/<\/(?:script|style)>/gi,"").replace(/<(?:script|style)[^>]*>[\s\S]*?<\/(?:script|style)>/gi,""),e=e.replace(/ on[a-z]+\s*=\s*"[^"]*"/gi,""),e=e.replace(/ on[a-z]+\s*=\s*'[^']*'/gi,""),e=e.replace(/ on[a-z]+\s*=\s*[^\s>]+/gi,""),e=e.replace(/javascript:\s*/gi,""),e}catch{return String(t)}}function sN(t,e,n){try{const r={mode:t,items:e,total:n,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(r))}catch{}}function SH(){const{carrito:t,agregarAlCarrito:e,quitarDelCarrito:n,eliminarUnidadDelCarrito:r}=Qd(),{usuario:i}=oi(),{abrirModal:o}=iu(),{theme:c,isDark:u}=hu(),{id:d}=XN(),f=ai(),[g,y]=E.useState(!1),[x,w]=E.useState(0),[N,b]=E.useState(0),[T,j]=E.useState(!1),[R,A]=E.useState(0),[L,z]=E.useState(null),[q,D]=E.useState(!1),[M,P]=E.useState(!0),[S,F]=E.useState(0),[$,I]=E.useState(!1),[re,ne]=E.useState(!1),[we,Ee]=E.useState(!1),[ee,ae]=E.useState("images"),[ge,H]=E.useState(0),[J,_e]=E.useState(1),[Ue,Ge]=E.useState({x:0,y:0}),[tt,lt]=E.useState(0),[Je,Ze]=E.useState(1),[Nt,bt]=E.useState(!1),[pt,yt]=E.useState(1),[Dt,It]=E.useState({x:0,y:0}),[Sn,Z]=E.useState(!1),[je,Oe]=E.useState(!1),[rt,St]=E.useState(0),[He,dt]=E.useState(1),[G,X]=E.useState({x:50,y:50}),[me,Te]=E.useState(!1),te=E.useRef(null),be=E.useRef(0),Se=E.useRef(0),[gt,jt]=E.useState(!1),ct=E.useRef(null),Vt=E.useRef(null),bn=E.useRef(null),vr=E.useRef(null),Wn=E.useRef(null),or=E.useRef(!1),On=E.useRef({x:50,y:50}),[Dr,qn]=E.useState(!1),[Ot,Jt]=E.useState(""),[Jn,Mr]=E.useState({w:200,h:200}),{product:V,loading:W,error:ue}=r7(d),fe=()=>{var it;if(!V)return[];const ze=(Array.isArray(V==null?void 0:V.variantes)?V.variantes:[]).filter(ot=>ot&&typeof ot.color=="string"&&ot.color.trim())[R]||null;let Re=[];return ze?((it=ze.videoUrls)==null?void 0:it.length)>0?Re=ze.videoUrls:Re=(V==null?void 0:V.videoUrls)||[]:Re=(V==null?void 0:V.videoUrls)||[],Array.isArray(Re)?Re.filter(ot=>ot&&typeof ot=="string"&&ot.trim()):[]},ce=(Y,xe)=>{var Yt,Tn,ts,Oi,Cn,ks;const ze=hn=>{try{return typeof hn=="string"?hn:(hn==null?void 0:hn.url)||(hn==null?void 0:hn.src)||""}catch{return""}};let Re="",We=[];xe?(Re=ze(xe.imagen||((Tn=(Yt=xe.imagenPrincipal)==null?void 0:Yt[0])==null?void 0:Tn.url)),We=Array.isArray(xe.imagenes)?xe.imagenes.map(ze).filter(Boolean):[],!Re&&We.length===0&&(Re=ze((Y==null?void 0:Y.imagen)||((Oi=(ts=Y==null?void 0:Y.imagenPrincipal)==null?void 0:ts[0])==null?void 0:Oi.url)),We=Array.isArray(Y==null?void 0:Y.imagenes)?Y.imagenes.map(ze).filter(Boolean):[])):(Re=ze((Y==null?void 0:Y.imagen)||((ks=(Cn=Y==null?void 0:Y.imagenPrincipal)==null?void 0:Cn[0])==null?void 0:ks.url)),We=Array.isArray(Y==null?void 0:Y.imagenes)?Y.imagenes.map(ze).filter(Boolean):[]);const it=[];Re&&it.push(Re),it.push(...We);const ot=it.filter(hn=>!(!hn||typeof hn!="string"||hn.trim()===""));return[...new Set(ot)]};let Me=[],Ce=0,Ne=0,oe=[],Fe=[],Ie=null,Ke=[];if(V){oe=Array.isArray(V==null?void 0:V.variantes)?V.variantes:[],Fe=oe.filter(Re=>Re&&typeof Re.color=="string"&&Re.color.trim()),Ie=R===-1||R===null?null:Fe[R]||null,Ke=ce(V,Ie);const Y=Ke.map(Re=>({type:"image",url:Re})),ze=(fe()||[]).map(Re=>({type:"video",url:Re}));Me=[...Y,...ze],Ne=Math.max(0,Math.min(N,Math.max(0,Me.length-1))),Ce=L!==null?L:Ne}if(E.useEffect(()=>{A(-1),w(0),b(0),z(null)},[d]),E.useEffect(()=>{},[R]),E.useEffect(()=>{_e(1),Ge({x:0,y:0})},[ge,ee]),E.useEffect(()=>{dt(1),X({x:0,y:0})},[rt]),E.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<1280){const Y=document.querySelector(".mobile-tablet-thumbs"),xe=Y&&Y.querySelector(".mt-thumb.active");Y&&xe&&typeof xe.scrollIntoView=="function"&&xe.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[N]),E.useEffect(()=>{const Y=Array.isArray(Me)&&Me[Ce]||null;(!Y||Y.type!=="image")&&qn(!1)},[Ce]),E.useEffect(()=>{let Y=window.scrollY;const xe=()=>{const ze=window.scrollY;ze>Y&&ze>100?P(!1):P(!0),Y=ze};return window.addEventListener("scroll",xe,{passive:!0}),()=>window.removeEventListener("scroll",xe)},[]),E.useEffect(()=>{if(V){const ze=(Array.isArray(V==null?void 0:V.variantes)?V.variantes:[]).filter(We=>We&&typeof We.color=="string"&&We.color.trim())[R]||null,Re=t.find(We=>{var it;return We.id===V.id&&(!ze||((it=We.variante)==null?void 0:it.color)===(ze==null?void 0:ze.color))});F((Re==null?void 0:Re.cantidad)||0)}},[t,V,R]),E.useEffect(()=>{const Y=()=>{const ze=te.current,Re=document.querySelector(".amazon-thumbs-sidebar");if(ze&&Re){const We=ze.offsetHeight;Re.style.height=`${We}px`,Re.style.maxHeight=`${We}px`}},xe=setTimeout(Y,100);return window.addEventListener("resize",Y),()=>{clearTimeout(xe),window.removeEventListener("resize",Y)}},[N,V]),W)return null;if(ue||!V){const Y=()=>{window.history&&window.history.length>1?f(-1):f("/productos")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-700 p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"mb-4",children:a.jsx("svg",{className:"mx-auto h-16 w-16 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("p",{className:"text-lg sm:text-xl font-semibold mb-2 text-blue-600",children:ue?"Error al cargar el producto":"Producto no encontrado"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:ue?`Error: ${ue}`:`No se pudo encontrar el producto con ID: ${d}`}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx("button",{onClick:Y,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver"}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Recargar"})]})]})})}const Xe=R===-1||R===null?null:Fe[R]||null,Be=()=>((V==null?void 0:V.imagenesExtra)||[]).slice(0,3),Ln=Y=>{A(Y),w(0),b(0)},sn=Y=>{try{const xe=(Y??"").toString().trim();return xe||null}catch{return null}},wn=sn(Xe==null?void 0:Xe.color),Ht=t.find(Y=>Y.id===V.id&&sn(Y.colorSeleccionado)===wn),Zt=(Ht==null?void 0:Ht.cantidad)||0,Xr=()=>{if(!i){y(!0);return}if(!Ht){const Y={...V,cantidad:1,precio:Xe&&Number(Xe.precio)?Number(Xe.precio):Number(V.precio)||0,cantidadProducto:Number.isFinite(_t)?_t:void 0};e(Y,wn)}},br=()=>{if(!i){y(!0);return}const Y={...V,precio:Xe&&Number(Xe.precio)?Number(Xe.precio):Number(V.precio)||0,cantidadProducto:Number.isFinite(_t)?_t:void 0};e(Y,wn)},wr=()=>{if(!i){y(!0);return}r(V.id,wn)},_r=()=>{if(!i){y(!0);return}n(V.id,wn)},_t=(Xe==null?void 0:Xe.cantidad)!==void 0?Number(Xe.cantidad)||0:V.cantidad!==void 0?Number(V.cantidad)||0:1/0,Wt=(V==null?void 0:V.activo)!==!1&&_t>0,Yr=Number.isFinite(_t)?Math.max(0,_t-((Ht==null?void 0:Ht.cantidad)||0)):1/0,es=Xe&&Xe.precio!==void 0?Number(Xe.precio):NaN,kr=Number.isFinite(es)&&es>0?es:Number(V.precio)||0,Qr=[{id:V.id,nombre:V.nombre,precio:kr,cantidad:1}],Oa=()=>{j(!1)},Vl=Ke.length>0;Fe&&Fe.length>1;const Qs=Vl;Ke.length;const Jr=Y=>({type:"image",url:Y||""}),La=Ke.filter(Y=>!(!Y||typeof Y!="string"||Y.trim()==="")),Er=La.map(Y=>Jr(Y)),Va=new Set;Er.filter(Y=>{const xe=(Y.url||"").split("?")[0].split("#")[0].trim().toLowerCase();return!xe||Va.has(xe)?!1:(Va.add(xe),!0)}),Math.min(Math.max(x,0),Math.max(0,(La.length||1)-1));const Js=[...La],Fl=Y=>{if(typeof window>"u"||window.innerWidth<1280)return;const xe=Me&&Me[Ce]||null;if(!xe||xe.type!=="image")return;const ze=xe.url;Jt(ze);const Re=bn.current;if(Re&&Re.naturalWidth&&Re.naturalHeight){const it=Re.getBoundingClientRect(),ot=it.width||Re.clientWidth||0,an=it.height||Re.clientHeight||0,Yt=Re.naturalWidth,Tn=Re.naturalHeight,ts=Yt/Math.max(1,ot),Oi=Tn/Math.max(1,an),Cn=Math.min(ts,Oi),ks=Math.min(4,Math.max(2,Cn)),hn=Cn>0?ks/Cn:2;Mr({w:Math.round(Yt*hn),h:Math.round(Tn*hn)}),Wn.current=it}else Mr({w:1e3,h:1e3}),Wn.current=Vt.current?Vt.current.getBoundingClientRect():null;const We=Wn.current||bn.current&&bn.current.getBoundingClientRect()||Vt.current&&Vt.current.getBoundingClientRect();if(We&&Y){const it=Math.max(0,Math.min(100,(Y.clientX-We.left)/We.width*100)),ot=Math.max(0,Math.min(100,(Y.clientY-We.top)/We.height*100));On.current={x:it,y:ot}}else On.current={x:50,y:50};qn(!0),requestAnimationFrame(()=>{const it=vr.current;it&&(it.style.backgroundPosition=`${On.current.x}% ${On.current.y}%`)})},Fa=Y=>{if(!Dr||typeof window<"u"&&window.innerWidth<1280)return;const xe=Wn.current||bn.current&&bn.current.getBoundingClientRect()||Vt.current&&Vt.current.getBoundingClientRect();if(!xe)return;const ze=Math.max(0,Math.min(100,(Y.clientX-xe.left)/xe.width*100)),Re=Math.max(0,Math.min(100,(Y.clientY-xe.top)/xe.height*100));On.current={x:ze,y:Re},or.current||(or.current=!0,requestAnimationFrame(()=>{or.current=!1;const We=vr.current;We&&(We.style.backgroundPosition=`${On.current.x}% ${On.current.y}%`)}))},Ua=()=>{qn(!1),Wn.current=null},xs=Y=>{window.innerWidth>=1280||(be.current=Y.touches[0].clientX,Se.current=0)},Zs=Y=>{if(window.innerWidth>=1280||be.current===0)return;const xe=Y.touches[0].clientX-be.current;Se.current=xe},yu=Y=>{if(window.innerWidth>=1280)return;Math.abs(Se.current)>50&&(Se.current>0&&N>0?b(N-1):Se.current<0&&N<Me.length-1&&b(N+1)),be.current=0,Se.current=0},Or=(Y,xe)=>Math.sqrt(Math.pow(xe.clientX-Y.clientX,2)+Math.pow(xe.clientY-Y.clientY,2)),Zr=Y=>{if(Y.touches.length===2){const xe=Or(Y.touches[0],Y.touches[1]);lt(xe),Ze(J)}else Y.touches.length===1&&(be.current=Y.touches[0].clientX,Se.current=0)},ea=Y=>{if(Y.touches.length===2){const ze=Or(Y.touches[0],Y.touches[1])/tt,Re=Math.min(Math.max(Je*ze,1),4);_e(Re)}else if(Y.touches.length===1)if(J>1){const xe=Y.touches[0].clientX-be.current,ze=Y.touches[0].clientY-(be.current||0);Ge({x:xe,y:ze})}else{const xe=Y.touches[0].clientX-be.current;Se.current=xe}},vs=Y=>{if(Y.touches.length===0&&(J<1.1&&(_e(1),Ge({x:0,y:0})),J===1)){const ze=Me;Math.abs(Se.current)>50&&(Se.current>0&&ge>0?H(ge-1):Se.current<0&&ge<ze.length-1&&H(ge+1)),be.current=0,Se.current=0}},bs=Y=>{if(Y.touches.length===2){const xe=Or(Y.touches[0],Y.touches[1]);lt(xe),Ze(pt)}else Y.touches.length===1&&(be.current=Y.touches[0].clientX,Se.current=0)},en=Y=>{if(Y.touches.length===2){const ze=Or(Y.touches[0],Y.touches[1])/tt,Re=Math.min(Math.max(Je*ze,1),4);yt(Re)}else if(Y.touches.length===1)if(pt>1){const xe=Y.touches[0].clientX-be.current,ze=Y.touches[0].clientY-(be.current||0);It({x:xe,y:ze})}else{const xe=Y.touches[0].clientX-be.current;Se.current=xe}},ws=Y=>{Y.touches.length===0&&(pt<1.1&&(yt(1),It({x:0,y:0})),pt===1&&(Math.abs(Se.current)>50&&(Se.current>0&&x>0?w(x-1):Se.current<0&&x<Js.length-1&&w(x+1)),be.current=0,Se.current=0))},Lt=Y=>{if(Y.touches.length===2){const xe=Or(Y.touches[0],Y.touches[1]);lt(xe),Ze(He)}else Y.touches.length===1&&(be.current=Y.touches[0].clientX,Se.current=0)},_s=Y=>{if(Y.touches.length===2){const ze=Or(Y.touches[0],Y.touches[1])/tt,Re=Math.min(Math.max(Je*ze,1),4);dt(Re)}else if(Y.touches.length===1)if(He>1){const xe=Y.touches[0].clientX-be.current,ze=Y.touches[0].clientY-(be.current||0);X({x:xe,y:ze})}else{const xe=Y.touches[0].clientX-be.current;Se.current=xe}},Ul=Y=>{if(Y.touches.length===0){if(He<1.1&&(dt(1),X({x:50,y:50})),Math.abs(Se.current)>50&&He===1){const ze=Be();Se.current>0?St(Re=>(Re-1+ze.length)%ze.length):St(Re=>(Re+1)%ze.length),dt(1),X({x:50,y:50})}be.current=0,Se.current=0}},ta=(Y,xe=0)=>{ae(Y),H(Math.max(0,xe||0)),Ee(!0)},$l=()=>Ee(!1);return a.jsxs(a.Fragment,{children:[a.jsxs("main",{className:"vp-main min-h-screen bg-white px-4 sm:px-6 pb-16 text-gray-800 flex flex-col items-stretch overflow-visible",children:[a.jsxs("section",{className:"w-full xl:grid xl:grid-cols-12 xl:gap-6 flex flex-col gap-8 overflow-visible",children:[Qs&&a.jsxs(de.div,{className:"relative flex flex-col items-start w-full xl:col-span-6 overflow-visible",children:[Me.length>0&&a.jsxs("div",{className:"amazon-gallery-layout flex",style:{zIndex:10},children:[a.jsx("div",{className:"relative overflow-visible",children:a.jsxs("div",{className:`amazon-thumbs-sidebar ${Me.length>4?"has-overflow":""}`,onMouseLeave:()=>z(null),children:[Me.map((Y,xe)=>a.jsx("button",{type:"button",className:`amazon-thumb ${xe===Ne?"active":""}`,onClick:()=>{b(xe);const ze=We=>We?String(We).split("?")[0].split("#")[0].trim().toLowerCase():"",Re=Ke.findIndex(We=>ze(We)===ze(Y.url));Re>=0&&w(Re)},onMouseEnter:()=>z(xe),onFocus:()=>z(xe),onMouseLeave:()=>z(null),"aria-label":`Miniatura ${xe+1}`,children:Y.type==="video"?a.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[a.jsx("video",{src:Y.url,preload:"metadata",muted:!0,className:"w-full h-full object-contain"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:"bg-white/95 rounded-full p-2 shadow",children:a.jsx("svg",{className:"w-5 h-5 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):a.jsx("img",{src:Y.url,alt:`Miniatura ${xe+1}`,className:"w-full h-full object-contain",loading:"lazy"})},`thumb-${xe}`)),Me.length>4&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"ebay-arrow-overlay ebay-arrow-up",onClick:()=>{const Y=document.querySelector(".amazon-thumbs-sidebar");Y&&Y.scrollBy({top:-100,behavior:"smooth"})},children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 15l7-7 7 7"})})}),a.jsx("button",{className:"ebay-arrow-overlay ebay-arrow-down",onClick:()=>{const Y=document.querySelector(".amazon-thumbs-sidebar");Y&&Y.scrollBy({top:100,behavior:"smooth"})},children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M19 9l-7 7-7-7"})})})]})]})}),a.jsxs("div",{className:"amazon-main-image-container vp-main-image-sticky",children:[a.jsx("div",{ref:Y=>{Vt.current=Y,te.current=Y},className:`amazon-main-image-wrap ${Dr?"zooming":""}`,onMouseEnter:Fl,onMouseMove:Fa,onMouseLeave:Ua,onClick:()=>{const Y=Me[Ce];if((Y==null?void 0:Y.type)==="video"){const xe=(galleryVideosList||[]).findIndex(ze=>ze===Y.url);ta("videos",Math.max(0,xe))}else ta("images",Ce)},onTouchStart:xs,onTouchMove:Zs,onTouchEnd:yu,role:"button","aria-label":"Ver imagen en pantalla completa",tabIndex:0,children:(()=>{const Y=Me[Ce];return Y?Y.type==="video"?a.jsx("div",{className:"relative w-full h-full flex items-center justify-center bg-white",children:a.jsx("video",{src:Y.url,controls:!0,preload:"metadata",playsInline:!0,className:"w-full h-full object-contain"},`main-vid-${Ce}`)}):a.jsx("img",{ref:bn,src:Y.url,alt:V.nombre,className:"w-full h-full object-contain transition-opacity duration-300",draggable:!1,onLoad:()=>{setTimeout(()=>{const xe=te.current,ze=document.querySelector(".amazon-thumbs-sidebar");if(xe&&ze){const Re=xe.offsetHeight;ze.style.height=`${Re}px`,ze.style.maxHeight=`${Re}px`}},50)}},`main-img-${Ne}`):null})()}),a.jsx("div",{ref:vr,className:"vp-zoom-float vp-zoom-stage",style:{display:Dr?"block":"none",backgroundImage:Ot?`url(${Ot})`:"none",backgroundRepeat:"no-repeat",backgroundSize:`${Jn.w}px ${Jn.h}px`}})]})]}),Me.length>1&&a.jsx("div",{className:"xl:hidden w-full mt-4 flex justify-center",children:a.jsx("div",{className:"flex gap-2 items-center",children:Me.map((Y,xe)=>a.jsx("button",{type:"button",className:`dot-indicator ${xe===Ne?"dot-active":""}`,onClick:()=>b(xe),"aria-label":`Imagen ${xe+1} de ${Me.length}`},`dot-${xe}`))})})]}),a.jsxs(de.div,{className:"flex flex-col gap-4 sm:gap-5 w-full xl:col-span-4 overflow-visible",children:[a.jsx("div",{className:"vp-variants xl:order-4 order-1",children:(()=>{var ot,an;const Y=(V.colorImagenPrincipal||V.color||"").toString().trim(),xe=!!(Y||V.imagen||(an=(ot=V.imagenPrincipal)==null?void 0:ot[0])!=null&&an.url),ze=(()=>{var Tn,ts;const Yt=[];if(xe&&Yt.push({color:Y||"Principal",cantidad:V.cantidad||0,precio:V.precio,imagen:V.imagen||((ts=(Tn=V.imagenPrincipal)==null?void 0:Tn[0])==null?void 0:ts.url)||"",imagenes:Array.isArray(V.imagenes)?V.imagenes:[],videoUrls:Array.isArray(V.videoUrls)?V.videoUrls:[],isMainProduct:!0}),Array.isArray(Fe)){const Oi=hn=>(hn||"").toString().trim().toLowerCase(),Cn=Oi(Y),ks=Fe.filter(hn=>Oi(hn==null?void 0:hn.color)!==Cn);Yt.push(...ks)}return Yt})(),Re=xe?R===-1||R===null?0:Math.max(1,Math.min(R+1,Math.max(1,ze.length-1))):Math.max(0,Math.min(R||0,Math.max(0,ze.length-1))),We=Yt=>{xe?Yt===0?A(-1):Ln(Yt-1):Ln(Yt)},it=Fe.length;return it===0||it===1&&!xe||ze.length<=1?null:a.jsx(Y4,{variantes:ze,varianteSeleccionada:Re,onVarianteChange:We,showStock:!1,showPrice:!0,basePrice:kr,className:"w-full"})})()}),a.jsx("h1",{className:"vp-title xl:order-1 order-2",children:V.nombre}),a.jsx("div",{className:"vp-desc prose max-w-none xl:order-2 order-3",dangerouslySetInnerHTML:{__html:fy(V.descripcion||"<p>Contctanos para ms detalles.</p>")}}),a.jsxs("p",{className:"vp-price text-xl font-semibold text-blue-700 xl:order-3 order-4",children:["DOP ",iN(kr)]}),Array.isArray(V.acerca)&&V.acerca.length>0&&a.jsxs("div",{className:"space-y-2 xl:order-3-5 order-4-5 -mt-2",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:"Acerca de este artculo"}),a.jsx("ul",{className:"space-y-1 text-gray-700",children:V.acerca.map((Y,xe)=>a.jsxs("li",{className:"flex items-start gap-2 text-xs leading-relaxed",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-600 mt-1.5 flex-shrink-0"}),a.jsx("span",{className:"flex-1",children:Y})]},xe))})]}),a.jsx("div",{className:"xl:order-4 order-5 mt-4",children:a.jsxs("button",{onClick:()=>{const Y=document.getElementById("mas-informacion-producto");Y&&Y.scrollIntoView({behavior:"smooth",block:"start"})},className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm flex items-center justify-center gap-2",children:[a.jsx("span",{children:""}),"Ver ms informacin del producto"]})}),a.jsxs("div",{className:"xl:hidden flex flex-col gap-3 overflow-visible xl:order-5 order-5",children:[a.jsx("div",{className:`vp-stock ${Yr===0?"vp-stock-out":Yr<=2?"vp-stock-low":"vp-stock-ok"}`,children:Yr===0?"No disponible":Number.isFinite(Yr)?`Quedan ${Yr} disponibles`:"Disponible"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 overflow-visible",children:[Ht?a.jsxs("div",{className:"vp-qty-row w-full sm:w-1/2",children:[a.jsx("button",{onClick:wr,className:"vp-qty-btn",children:""}),a.jsx("span",{className:"vp-qty",children:Zt}),a.jsx("button",{onClick:br,className:"vp-qty-btn",disabled:Zt>=_t,title:Zt>=_t?"Has alcanzado el mximo disponible":"Agregar una unidad",children:"+"}),a.jsx("button",{onClick:_r,className:"vp-remove",children:a.jsx(fk,{})})]}):a.jsx("button",{className:`button w-full sm:w-1/2 ${Wt?"":"opacity-60 cursor-not-allowed"}`,onClick:Xr,disabled:!Wt,title:Wt?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),a.jsx("div",{className:"w-full sm:w-1/2",onClick:()=>sN("single",Qr,kr),children:a.jsx(Ix,{className:"w-full",total:kr*100,label:"Comprar ahora"})})]})]})]}),a.jsx("aside",{className:"vp-buy-card w-full xl:col-span-2 hidden xl:block",children:a.jsxs("div",{className:"vp-buy-inner",children:[a.jsxs("div",{className:"vp-buy-price text-xl font-semibold",children:["DOP ",iN(kr)]}),a.jsx("div",{className:`vp-stock ${Yr===0?"vp-stock-out":Yr<=2?"vp-stock-low":"vp-stock-ok"}`,children:Yr===0?"No disponible":Number.isFinite(Yr)?`Quedan ${Yr} disponibles`:"Disponible"}),a.jsxs("div",{className:"flex flex-col gap-3",children:[Ht?a.jsxs("div",{className:"vp-qty-row",children:[a.jsx("button",{onClick:wr,className:"vp-qty-btn",children:""}),a.jsx("span",{className:"vp-qty",children:Zt}),a.jsx("button",{onClick:br,className:"vp-qty-btn",disabled:Zt>=_t,title:Zt>=_t?"Has alcanzado el mximo disponible":"Agregar una unidad",children:"+"}),a.jsx("button",{onClick:_r,className:"vp-remove",children:a.jsx(fk,{})})]}):a.jsx("button",{className:`button w-full ${Wt?"":"opacity-60 cursor-not-allowed"}`,onClick:Xr,disabled:!Wt,title:Wt?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),a.jsx("div",{onClick:()=>sN("single",Qr,kr),children:a.jsx(Ix,{className:"w-full",total:kr*100,label:"Comprar ahora"})})]})]})})]}),V&&a.jsx("section",{className:"w-full mt-8 px-4 sm:px-6 xl:px-6",children:a.jsx(NH,{productoActual:V})}),a.jsxs("section",{id:"mas-informacion-producto",className:"w-full mt-12 mb-8 px-4 sm:px-6",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6 text-center",children:"Ms informacin del producto"}),a.jsxs("div",{className:"max-w-[1500px] mx-auto",children:[(()=>{const Y=Be();return!Y||Y.length===0?null:a.jsx("div",{className:"space-y-4 mb-8",children:Y.map((xe,ze)=>a.jsx("div",{className:"relative w-full cursor-pointer",onClick:()=>{St(ze),Oe(!0)},children:a.jsx("img",{src:xe,alt:`${V.nombre} - Informacin ${ze+1}`,className:"w-full h-auto object-contain bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow",style:{maxWidth:"1500px",margin:"0 auto",display:"block"}})},`product-info-${ze}`))})})(),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 sm:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Informacin del producto"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Marca:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:V.empresa||"No especificada"})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Fabricante:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:V.fabricante||"No especificado"})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Modelo:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:V.modelo||"No especificado"})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Nmero de artculo:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:V.numeroArticulo||"No especificado"})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Pas de origen:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:V.paisOrigen||"No especificado"})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Descripcin de la garanta:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:V.descripcionGarantia||"No especificada"})]})]})]}),Array.isArray(V.detallesProducto)&&V.detallesProducto.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Caractersticas y especificaciones"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:V.detallesProducto.map((Y,xe)=>a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[a.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[Y.nombre,":"]}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:Y.valor})]},xe))})]}),V.masInformacion&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Detalles adicionales"]}),a.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:fy(V.masInformacion)}})})]}),V.descripcion&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Descripcin completa"]}),a.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert text-sm text-gray-700 dark:text-gray-300",dangerouslySetInnerHTML:{__html:fy(V.descripcion)}})]})]})]})]})]}),we&&(()=>{const Y=fe(),xe=ce(V,Ie),ze=Y.length>0,Re=ee==="videos"?Y.map(it=>({type:"video",url:it})):xe.map(it=>({type:"image",url:it}));console.log(` Modal - Variante: ${(Ie==null?void 0:Ie.color)||"base"}, Medios: ${Re.length}`);const We=Math.min(ge,Math.max(0,Re.length-1));return a.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${u?"bg-gray-900":"bg-white"}`,children:[a.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${ee==="images"?u?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":u?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{ae("images"),H(0),_e(1),Ge({x:0,y:0})},children:"IMGENES"}),ze&&a.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${ee==="videos"?u?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":u?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{ae("videos"),H(0),_e(1),Ge({x:0,y:0})},children:"VIDEOS"})]}),a.jsx("button",{type:"button",className:`transition-colors ${u?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:$l,children:a.jsx(im,{className:"text-2xl"})})]}),a.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[a.jsxs("div",{className:`hidden md:block w-64 lg:w-80 border-r relative group ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:it=>it.stopPropagation(),onMouseEnter:()=>jt(!0),onMouseLeave:()=>jt(!1),children:[gt&&Re.length>4&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:`absolute top-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all border ${u?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-gray-50 text-gray-800 border-gray-300"}`,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},onClick:()=>{ct.current&&ct.current.scrollBy({top:-200,behavior:"smooth"})},"aria-label":"Scroll arriba",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"})})}),a.jsx("button",{type:"button",className:`absolute bottom-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all border ${u?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-gray-50 text-gray-800 border-gray-300"}`,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},onClick:()=>{ct.current&&ct.current.scrollBy({top:200,behavior:"smooth"})},"aria-label":"Scroll abajo",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})})]}),a.jsx("div",{ref:ct,className:"overflow-y-auto p-4 h-full",style:{scrollbarWidth:"thin"},children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:`text-sm font-semibold mb-4 uppercase ${u?"text-gray-200":"text-gray-700"}`,children:ee==="videos"?"Videos":"Imgenes"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:Re.map((it,ot)=>a.jsx("button",{type:"button",className:`w-full aspect-square overflow-hidden rounded border-2 transition-all ${ot===We?"":"border-gray-300 hover:border-gray-400"}`,style:ot===We?{borderColor:"#0064D2"}:void 0,onClick:an=>{an.stopPropagation(),H(ot),_e(1),Ge({x:0,y:0})},"aria-label":`Vista ${ot+1}`,children:ee==="videos"?a.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[a.jsx("video",{src:it.url,className:"w-full h-full object-contain",muted:!0}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:"bg-white/90 rounded-full p-2",children:a.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):a.jsx("img",{src:it.url,alt:`Miniatura ${ot+1}`,className:"w-full h-full object-contain bg-white p-1"})},`desktop-thumb-${ot}`))})]})})]}),a.jsxs("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative ${u?"bg-gray-900":"bg-white"}`,onClick:it=>it.stopPropagation(),onTouchStart:ee==="images"?Zr:void 0,onTouchMove:ee==="images"?ea:void 0,onTouchEnd:ee==="images"?vs:void 0,children:[a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[Re.length>1&&J===1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:it=>{it.stopPropagation(),H(ot=>(ot-1+Re.length)%Re.length)},children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:it=>{it.stopPropagation(),H(ot=>(ot+1)%Re.length)},children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsx("div",{className:"w-full h-full flex items-center justify-center px-2 md:px-4",children:(()=>{const it=Re[We];return it?ee==="videos"?a.jsx("video",{src:it.url,controls:!0,className:"w-full h-full object-contain",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)"},onError:ot=>{console.error("Error loading video:",it.url)}},`video-${We}`):a.jsx("img",{src:it.url,alt:`${(V==null?void 0:V.nombre)||"Imagen"}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${J}) translate(${Ue.x}px, ${Ue.y}px)`,transition:J===1?"transform 0.3s ease":"none",cursor:J>1?"zoom-out":"zoom-in"},draggable:!1,onClick:ot=>{if(J===1){const an=ot.currentTarget.getBoundingClientRect(),Yt=((ot.clientX-an.left)/an.width-.5)*-100,Tn=((ot.clientY-an.top)/an.height-.5)*-100;_e(2),Ge({x:Yt,y:Tn})}else _e(1),Ge({x:0,y:0})},onMouseMove:ot=>{if(J>1){const an=ot.currentTarget.getBoundingClientRect(),Yt=((ot.clientX-an.left)/an.width-.5)*-100,Tn=((ot.clientY-an.top)/an.height-.5)*-100;Ge({x:Yt,y:Tn})}}}):null})()})]}),a.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 xl:hidden flex flex-col items-center gap-2",children:[a.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-medium shadow-lg ${u?"bg-gray-800 text-white":"bg-white/95 text-gray-900"}`,children:[We+1," / ",Re.length]}),Re.length>1&&a.jsxs("div",{className:`text-xs px-3 py-1 rounded-full flex items-center gap-1 ${u?"bg-gray-800/90 text-gray-300":"bg-white/90 text-gray-600"}`,children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l-4-4m0 0l4-4m-4 4h18"})}),a.jsx("span",{children:"Desliza"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]}),a.jsx("div",{className:`md:hidden border-t p-4 overflow-x-auto ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:it=>it.stopPropagation(),children:a.jsx("div",{className:"flex gap-3 min-w-min",children:Re.map((it,ot)=>a.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${ot===We?"":"border-gray-300 hover:border-gray-400"}`,style:ot===We?{borderColor:"#0064D2"}:void 0,onClick:an=>{an.stopPropagation(),H(ot),_e(1),Ge({x:0,y:0})},"aria-label":`Vista ${ot+1}`,children:ee==="videos"?a.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[a.jsx("video",{src:it.url,className:"w-full h-full object-contain",muted:!0}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:"bg-white/90 rounded-full p-1.5",children:a.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):a.jsx("img",{src:it.url,alt:`Miniatura ${ot+1}`,className:"w-full h-full object-contain bg-white p-1"})},`mobile-thumb-${ot}`))})})]})]})})(),a.jsx(Wp,{isOpen:g,onClose:()=>y(!1),onIniciarSesion:()=>{try{o()}catch{}}}),T&&a.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[9999] flex flex-col",onClick:Oa,children:[a.jsx("div",{className:"absolute top-4 right-4 z-20",children:a.jsx("button",{className:"bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-colors",onClick:Oa,"aria-label":"Cerrar",children:a.jsx(im,{size:20})})}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-4 relative overflow-hidden",onClick:Y=>Y.stopPropagation(),onTouchStart:bs,onTouchMove:en,onTouchEnd:ws,children:a.jsx("img",{src:Js[x],alt:`${V==null?void 0:V.nombre}`,className:"max-w-full max-h-full object-contain select-none",style:{transform:`scale(${pt||1}) translate(${(Dt==null?void 0:Dt.x)||0}px, ${(Dt==null?void 0:Dt.y)||0}px)`,transition:(pt||1)===1?"transform 0.3s ease":"none",cursor:(pt||1)>1?"zoom-out":"zoom-in"},draggable:!1,onClick:Y=>{if(Y.stopPropagation(),(pt||1)===1){const xe=Y.currentTarget.getBoundingClientRect(),ze=((Y.clientX-xe.left)/xe.width-.5)*-100,Re=((Y.clientY-xe.top)/xe.height-.5)*-100;yt&&yt(2),It&&It({x:ze,y:Re})}else yt&&yt(1),It&&It({x:0,y:0})},onMouseMove:Y=>{if((pt||1)>1){const xe=Y.currentTarget.getBoundingClientRect(),ze=((Y.clientX-xe.left)/xe.width-.5)*-100,Re=((Y.clientY-xe.top)/xe.height-.5)*-100;It&&It({x:ze,y:Re})}}})}),Js.length>1&&a.jsx("div",{className:"p-4",onClick:Y=>Y.stopPropagation(),children:a.jsx("div",{className:"flex gap-3 justify-center overflow-x-auto pb-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:Js.map((Y,xe)=>a.jsx("button",{className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ${xe===x?"border-white border-opacity-100":"border-gray-600 border-opacity-50"}`,onClick:ze=>{ze.stopPropagation(),w(xe),yt&&yt(1),It&&It({x:0,y:0})},"aria-label":`Miniatura ${xe+1}`,children:a.jsx("img",{src:Y,alt:`Miniatura ${xe+1}`,className:"w-full h-full object-contain",loading:"lazy"})},xe))})})]}),je&&(()=>{const Y=Be();if(!Y||Y.length===0)return null;const xe=Y[rt],ze=Y.length>1;return a.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${u?"bg-gray-900":"bg-white"}`,children:[a.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[a.jsxs("h2",{className:`text-lg font-semibold ${u?"text-white":"text-gray-900"}`,children:["Informacin del producto (",rt+1," /"," ",Y.length,")"]}),a.jsx("button",{type:"button",className:`transition-colors ${u?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:()=>Oe(!1),children:a.jsx(im,{className:"text-2xl"})})]}),a.jsx("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative overflow-auto ${u?"bg-gray-900":"bg-white"}`,onTouchStart:Lt,onTouchMove:_s,onTouchEnd:Ul,children:a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[ze&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:()=>{St(Re=>(Re-1+Y.length)%Y.length),dt(1),X({x:50,y:50})},children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:()=>{St(Re=>(Re+1)%Y.length),dt(1),X({x:50,y:50})},children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden px-2 md:px-4",children:a.jsx("img",{src:xe,alt:`${V==null?void 0:V.nombre} - Informacin ${rt+1}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${He})`,transformOrigin:`${G.x}% ${G.y}%`,transition:He===1?"transform 0.3s ease":"none",cursor:He>1?"zoom-out":"zoom-in"},draggable:!1,onClick:Re=>{if(He===1){const We=Re.currentTarget.getBoundingClientRect(),it=(Re.clientX-We.left)/We.width*100,ot=(Re.clientY-We.top)/We.height*100;dt(2.5),X({x:it,y:ot})}else dt(1),X({x:50,y:50})},onMouseMove:Re=>{if(He>1){const We=Re.currentTarget.getBoundingClientRect(),it=(Re.clientX-We.left)/We.width*100,ot=(Re.clientY-We.top)/We.height*100;X({x:it,y:ot})}}})})]})}),ze&&a.jsx("div",{className:`border-t p-4 overflow-x-auto ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,children:a.jsx("div",{className:"flex gap-3 justify-center min-w-min",children:Y.map((Re,We)=>a.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${We===rt?"border-blue-500 ring-2 ring-blue-500/30":"border-gray-300 hover:border-blue-500/50"}`,onClick:()=>St(We),"aria-label":`Vista ${We+1}`,children:a.jsx("img",{src:Re,alt:`Miniatura ${We+1}`,className:"w-full h-full object-contain bg-white p-1"})},`product-info-thumb-${We}`))})})]})})()]})}function TH(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function CH(t,e){if(!e)return Px(t);if(Array.isArray(e.variantes)&&t.colorSeleccionado){const n=e.variantes.find(r=>r.color===t.colorSeleccionado);if(n&&n.cantidad!==void 0)return Number(n.cantidad)||0}return e.cantidad!==void 0?Number(e.cantidad)||0:Px(t)}function Px(t){if(t.maxStock!==void 0&&t.maxStock!==null){const e=Number(t.maxStock);if(!Number.isNaN(e))return e}if(Array.isArray(t.variantes)&&t.colorSeleccionado){const e=t.variantes.find(n=>n.color===t.colorSeleccionado);if(e&&e.cantidad!==void 0)return Number(e.cantidad)||0}if(t.cantidadProducto!==void 0){const e=Number(t.cantidadProducto);if(!Number.isNaN(e))return e}return t.cantidad!==void 0&&t.cantidad,Number.POSITIVE_INFINITY}function jH(t,e){try{const n={mode:"cart",items:t,total:e,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(n))}catch{}}function AH(){const{carrito:t,agregarAlCarrito:e,eliminarUnidadDelCarrito:n,quitarDelCarrito:r}=Qd(),i=ai(),[o,c]=E.useState(null),[u,d]=E.useState({});E.useEffect(()=>{const y=[],x=new Set;return t.forEach(w=>{if(w!=null&&w.id&&!x.has(w.id)){x.add(w.id);const N=mt(Ve,"productos",w.id),b=Bn(N,T=>{T.exists()&&d(j=>({...j,[w.id]:T.data()}))});y.push(b)}}),()=>{y.forEach(w=>w&&w())}},[t]);const f=t.reduce((y,x)=>y+(Number(x.precio)||0)*x.cantidad,0),g=t.map(y=>({id:y.id,nombre:y.nombre,precio:Number(y.precio)||0,cantidad:y.cantidad}));return a.jsxs("main",{className:"carrito-page",style:{paddingTop:"var(--content-offset, 100px)"},children:[t.length===0?a.jsx("div",{className:"carrito-empty-wrap",children:a.jsxs("div",{className:"carrito-empty-box",children:[a.jsx("img",{src:"/toy/asoma.png",alt:"Explora nuestros productos",className:"carrito-empty-figure",loading:"lazy"}),a.jsxs("div",{className:"carrito-empty-glass",children:[a.jsx("div",{className:"carrito-empty-icon","aria-hidden":"true",children:""}),a.jsx("h2",{className:"carrito-empty-title",children:"No hay nada en el carrito"}),a.jsx("p",{className:"carrito-empty-sub",children:"Explora nuestros productos"}),a.jsx("button",{type:"button",className:"carrito-empty-cta",onClick:()=>i("/categorias"),children:"Ver productos"})]})]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"carrito-grid",children:t.map(y=>{const x=u[y.id];Px(y);const w=CH(y,x),N=Number.isFinite(w)?Math.max(0,w-(Number(y.cantidad)||0)):w,b=`${y.id}__${y.colorSeleccionado??""}`;return a.jsxs("div",{className:"carrito-card",onClick:()=>i(`/producto/${y.id}`),children:[(()=>{var q;const T=D=>{try{return D?typeof D=="string"?D:typeof D=="object"&&D!==null?D.url||"":String(D||""):""}catch{return""}},j=u[y.id]||y,R=()=>{var M;const D=Array.isArray(j.variantes)?j.variantes:[];for(const P of D){const S=T((M=P==null?void 0:P.imagenPrincipal)==null?void 0:M[0]);if(S)return S;if(P!=null&&P.imagen)return P.imagen;const $=(Array.isArray(P==null?void 0:P.media)?P.media:[]).find(I=>{const re=((I==null?void 0:I.type)||"").toLowerCase();return T(I)&&(!re||re.includes("image")||re==="img"||re==="photo")});if($)return T($)}return""},L=(Array.isArray(j.media)?j.media:[]).find(D=>{const M=((D==null?void 0:D.type)||"").toLowerCase();return T(D)&&(!M||M.includes("image")||M==="img"||M==="photo")}),z=T((q=j==null?void 0:j.imagenPrincipal)==null?void 0:q[0])||(j==null?void 0:j.imagen)||(L?T(L):"")||T(Array.isArray(j==null?void 0:j.galeriaImagenes)&&j.galeriaImagenes[0])||T(Array.isArray(j==null?void 0:j.imagenes)&&j.imagenes[0])||R()||"";return a.jsx("img",{src:z,alt:y.nombre,className:"carrito-img"})})(),a.jsxs("div",{className:"carrito-info",children:[a.jsx("h2",{className:"carrito-nombre",children:y.nombre}),a.jsxs("div",{className:"carrito-subtotal",children:["RD$ ",TH((Number(y.precio)||0)*y.cantidad)]}),a.jsx("p",{className:`carrito-stock ${N===0?"stock-out":Number.isFinite(N)&&N<=2?"stock-low":"stock-ok"}`,children:N===0?"No disponible":Number.isFinite(N)&&N<=2?`Solo quedan ${N}`:Number.isFinite(N)?`${N} disponibles`:"Disponible"}),a.jsxs("div",{className:"carrito-actions",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("button",{onClick:T=>{T.stopPropagation(),n(y.id,y.colorSeleccionado??null)},className:"vp-qty-btn","aria-label":"Disminuir cantidad",children:""}),a.jsx("span",{className:"vp-qty",children:y.cantidad}),a.jsx("button",{onClick:T=>{if(T.stopPropagation(),!Number.isFinite(w)||y.cantidad<w){const j=u[y.id]||y;e(j,y.colorSeleccionado??null)}},className:"vp-qty-btn",disabled:Number.isFinite(w)&&y.cantidad>=w,"aria-label":"Aumentar cantidad",children:"+"})]}),a.jsx("button",{onClick:T=>{T.stopPropagation(),c(y)},className:"vp-remove",title:"Eliminar producto","aria-label":"Eliminar del carrito",children:a.jsx(tj,{})})]})]})]},b)})}),a.jsx("div",{className:"carrito-footer",children:a.jsx("div",{className:"carrito-pay-wrap",onClick:()=>jH(g,f),children:a.jsx(Ix,{className:"carrito-cardnet-btn w-full",total:f*100})})})]}),o&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal",children:[a.jsx("h2",{children:"Eliminar producto?"}),a.jsxs("p",{children:["Seguro que quieres quitar"," ",a.jsx("strong",{children:o.nombre})," del carrito?"]}),a.jsxs("div",{className:"modal-actions",children:[a.jsx("button",{className:"btn-cancel",onClick:()=>c(null),children:"Cancelar"}),a.jsx("button",{className:"btn-confirm",onClick:()=>{r(o.id,o.colorSeleccionado??null),c(null)},children:"S, eliminar"})]})]})})]})}function nA(){return a.jsx("div",{className:"waves-container"})}function IH(){return a.jsxs("div",{className:"relative min-h-screen flex flex-col items-center px-4 sm:px-8 pb-20 font-sans text-gray-800 dark:text-gray-100 bg-gradient-to-b from-blue-50 via-blue-50 to-blue-100 dark:from-blue-950 dark:via-blue-950 dark:to-blue-900 overflow-hidden",style:{paddingTop:"calc(var(--content-offset, 100px) + 48px)"},children:[a.jsx(nA,{}),a.jsx("h1",{className:"text-2xl sm:text-5xl font-extrabold mb-4 text-center text-gray-800 dark:text-gray-100 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"CONTCTANOS"}),a.jsx("h2",{className:"text-lg sm:text-2xl font-semibold mb-10 text-center text-gray-600 dark:text-gray-300 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),a.jsxs("div",{className:"w-full max-w-3xl flex flex-col items-center z-10",style:{position:"relative"},children:[a.jsx("img",{src:"/toy/asoma.png",alt:"Mueco asomndose",className:"pointer-events-none select-none absolute hidden sm:block",style:{top:"-118px",right:"0px",width:"min(220px, 40vw)",height:"auto",zIndex:50,filter:"drop-shadow(0 10px 20px rgba(2, 6, 23, 0.15))",pointerEvents:"none"}}),a.jsxs("div",{className:"relative w-full flex flex-col items-center gap-4 sm:gap-6 text-sm sm:text-lg px-4 py-4 sm:px-8 sm:py-6",style:{background:"rgba(239, 246, 255, 0.35)",borderRadius:"1rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(59, 130, 246, 0.25)",paddingTop:"1.5rem"},children:[a.jsx(Uf,{icon:a.jsx(fh,{className:"text-blue-500 dark:text-blue-400"}),label:"Direccin",text:"Av. Estrella Sadhal #55, Santiago, Repblica Dominicana"}),a.jsx(Uf,{icon:a.jsx(Wm,{className:"text-blue-500 dark:text-blue-400"}),label:"Telfono Tienda",text:"+1 (849)-635-7000"}),a.jsx(Uf,{icon:a.jsx(Wm,{className:"text-blue-500 dark:text-blue-400"}),label:"Telfono Internet",text:"+1 (809)-582-1212"}),a.jsx(Uf,{icon:a.jsx(t1,{className:"text-blue-500 dark:text-blue-400"}),label:"Correo",text:"playcenter121@gmail.com"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-6 justify-center mt-4 w-full",children:[a.jsx(aN,{href:"https://wa.me/18496357000",text:"WhatsApp Tienda"}),a.jsx(aN,{href:"https://wa.me/18095821212",text:"WhatsApp Internet"})]})]})]})]})}const Uf=({icon:t,label:e,text:n})=>a.jsxs("div",{className:"flex items-start gap-3 w-full z-10",children:[a.jsx("div",{className:"text-xl sm:text-2xl text-gray-400 dark:text-gray-300",children:t}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-sm sm:text-base text-gray-700 dark:text-gray-300",children:[e,":"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base break-words",children:n})]})]}),aN=({href:t,text:e})=>a.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 sm:gap-3 px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base font-bold rounded-xl transition-transform z-10 w-full sm:w-auto",style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:n=>{n.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",n.currentTarget.style.transform="scale(1.05)"},onMouseLeave:n=>{n.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",n.currentTarget.style.transform="scale(1)"},children:[a.jsx(Hm,{className:"text-lg sm:text-xl text-blue-500 dark:text-blue-400"}),e]});function PH(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:a.jsx("div",{className:"max-w-2xl w-full text-center",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[a.jsx("div",{className:"mb-6",children:a.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Funcin No Disponible"}),a.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opcin de ",a.jsx("strong",{children:"Vender"})," no est disponible en este momento."]}),a.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva ms tarde. Estamos trabajando para habilitarla pronto."}),a.jsx("div",{className:"mt-10",children:a.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function RH(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:a.jsx("div",{className:"max-w-2xl w-full text-center",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[a.jsx("div",{className:"mb-6",children:a.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Funcin No Disponible"}),a.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opcin de ",a.jsx("strong",{children:"Tiendas"})," no est disponible en este momento."]}),a.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva ms tarde. Estamos trabajando para habilitarla pronto."}),a.jsx("div",{className:"mt-10",children:a.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function DH(){return a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-gray-800 mb-6",children:"Historial"}),a.jsx("p",{className:"text-gray-600",children:"Aqu vers tu historial de navegacin o compras prximamente."})]})}function MH(){return a.jsxs("div",{className:`relative min-h-screen flex flex-col items-center px-4 pb-20 font-sans text-gray-800 dark:text-gray-100
                  bg-gradient-to-b from-blue-50 via-blue-50 to-blue-100 dark:from-blue-950 dark:via-blue-950 dark:to-blue-900 overflow-hidden`,style:{paddingTop:"calc(var(--content-offset, 100px) + 48px)"},children:[a.jsx(nA,{}),a.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-center text-gray-800 dark:text-gray-100 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"NOSOTROS"}),a.jsx("h2",{className:"text-2xl font-semibold mb-10 text-center text-gray-600 dark:text-gray-300 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),a.jsxs("div",{className:"w-full max-w-3xl flex flex-col items-center z-10",style:{position:"relative"},children:[a.jsx("img",{src:"/toy/asoma.png",alt:"Mueco asomndose",className:"pointer-events-none select-none absolute hidden sm:block",style:{top:"-118px",right:"0px",width:"min(220px, 40vw)",height:"auto",zIndex:50,filter:"drop-shadow(0 10px 20px rgba(2, 6, 23, 0.15))",pointerEvents:"none"}}),a.jsxs("div",{className:"relative w-full flex flex-col items-center gap-6 text-lg",style:{background:"rgba(239, 246, 255, 0.35)",borderRadius:"1rem",padding:"1.8rem",paddingTop:"2.6rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(59, 130, 246, 0.25)",overflow:"visible"},children:[a.jsx(my,{icon:a.jsx(f7,{className:"text-blue-500 dark:text-blue-400"}),label:"Quines somos",text:"Somos una empresa dominicana ubicada en Santiago, especializada en brindar lo ltimo en tecnologa, innovacin y productos para el estilo de vida moderno."}),a.jsx(my,{icon:a.jsx(b7,{className:"text-blue-500 dark:text-blue-400"}),label:"Nuestra misin",text:"Superar las expectativas de nuestros clientes ofreciendo artculos de calidad como consolas, videojuegos, tablets, mviles, accesorios y ms, con un servicio humano, eficiente y profesional."}),a.jsx(my,{icon:a.jsx(fh,{className:"text-blue-500 dark:text-blue-400"}),label:"Nuestro compromiso",text:"PlayCenter Universal no solo vende productos, crea experiencias memorables con cada compra. Gracias por confiar en nosotros!"}),a.jsx("div",{className:"flex justify-center mt-6",children:a.jsxs(At,{to:"/contacto",className:`flex items-center gap-3 px-6 py-3 text-base font-bold
                         rounded-xl transition-transform z-10 animate-fade-in`,style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:t=>{t.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",t.currentTarget.style.transform="scale(1.05)"},onMouseLeave:t=>{t.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",t.currentTarget.style.transform="scale(1)"},children:[a.jsx(ex,{className:"text-xl text-blue-500 dark:text-blue-400"}),"Contctanos"]})})]})]})]})}const my=({icon:t,label:e,text:n})=>a.jsxs("div",{className:"flex items-start gap-4 w-full z-10",children:[a.jsx("div",{className:"text-2xl text-gray-400 dark:text-gray-300",children:t}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[e,":"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 break-words",children:n})]})]});function OH(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function LH(t){const n=(Number(t)||0).toFixed(2),[r,i]=n.split("."),o=Number(r);return{wholeFormatted:OH(o),fraction:i}}function rA({producto:t}){const{carrito:e,agregarAlCarrito:n,eliminarUnidadDelCarrito:r,quitarDelCarrito:i}=Qd(),{usuario:o,usuarioInfo:c}=oi(),{abrirModal:u}=iu(),d=ai(),[f,g]=E.useState(!1),[y,x]=E.useState(!1);E.useEffect(()=>{x(!1)},[t==null?void 0:t.id,t==null?void 0:t.imagen,t==null?void 0:t.imagenPrincipal]);const N=!!(t!=null&&t.oferta&&(t!=null&&t.precioOferta))?Number(t==null?void 0:t.precioOferta)||Number(t==null?void 0:t.precio)||0:Number(t==null?void 0:t.precio)||0;LH(N);const T=(t==null?void 0:t.activo)!==!1&&(t.cantidad===void 0||t.cantidad>0),j=e.find($=>$.id===t.id),R=(j==null?void 0:j.cantidad)||0,A=t.cantidad!==void 0?Number(t.cantidad)||0:1/0,L=$=>{if($.stopPropagation(),!o){g(!0);return}if(!j){const I={...t,cantidad:1,cantidadProducto:Number.isFinite(A)?A:void 0};n(I)}},z=$=>{if($.stopPropagation(),!o){g(!0);return}const I=Number.isFinite(A)?A:1/0;R<I&&n(t)},q=$=>{if($.stopPropagation(),!o){g(!0);return}r(t.id)},D=$=>{if($.stopPropagation(),!o){g(!0);return}i(t.id)},M=()=>{const $=t.slug||t.id;d(`/producto/${$}`)},P=$=>{try{return $?typeof $=="string"?$:typeof $=="object"&&$!==null?$.url||"":String($||""):""}catch{return""}},F=(()=>{var ne;const $=P((ne=t==null?void 0:t.imagenPrincipal)==null?void 0:ne[0]);if($)return $;const I=P(t==null?void 0:t.imagen);if(I)return I;const re=Array.isArray(t==null?void 0:t.imagenes)?t.imagenes:[];return re.length>0?P(re[0]):null})();return a.jsxs(a.Fragment,{children:[a.jsxs("article",{className:"flex flex-row lg:flex-col bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 w-full h-full",children:[a.jsx("div",{onClick:M,className:"flex-shrink-0 w-32 sm:w-36 lg:w-full lg:aspect-square flex items-center justify-center overflow-hidden cursor-pointer bg-white dark:bg-gray-900",style:{minHeight:"128px"},children:F?a.jsx("img",{src:F,alt:t.nombre,className:"w-full h-full object-contain",loading:"lazy"}):a.jsx("div",{className:"text-gray-400 text-sm",children:"Sin imagen"})}),a.jsxs("div",{className:"flex flex-col justify-between p-2.5 sm:p-3 lg:p-4 flex-1",children:[a.jsxs("div",{children:[a.jsx("h3",{onClick:M,className:"text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 mb-1.5 sm:mb-2 cursor-pointer text-sm sm:text-base lg:text-lg font-semibold",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.3em",maxHeight:"2.6em"},children:t.nombre}),a.jsxs("div",{className:"flex items-baseline gap-1 mb-1.5 sm:mb-2",children:[a.jsx("span",{className:"text-xs sm:text-sm lg:text-base text-gray-600 dark:text-gray-400",children:"RD$"}),a.jsx("span",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-gray-100",children:Number(t.precio).toFixed(2)})]})]}),j?a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("button",{onClick:q,className:"px-3 sm:px-3 lg:px-3.5 py-1.5 sm:py-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 text-base sm:text-base font-semibold transition-all hover:scale-105 active:scale-95",children:""}),a.jsx("span",{className:"font-semibold text-base sm:text-base lg:text-lg",children:R}),a.jsx("button",{onClick:z,className:"px-3 sm:px-3 lg:px-3.5 py-1.5 sm:py-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 text-base sm:text-base font-semibold transition-all hover:scale-105 active:scale-95",children:"+"}),a.jsx("button",{onClick:D,className:"px-2.5 sm:px-2.5 py-1.5 sm:py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 text-base sm:text-base transition-all hover:scale-105 active:scale-95",children:a.jsx(tj,{})})]}):a.jsxs("button",{onClick:L,className:"w-full py-2.5 sm:py-2.5 lg:py-3 rounded-lg sm:rounded-xl text-xs sm:text-sm lg:text-base font-semibold transition-all duration-200 flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-95",style:{backgroundColor:"#0066C0",color:"#FFFFFF",border:"1px solid #0066C0"},onMouseEnter:$=>$.currentTarget.style.backgroundColor="#004F9A",onMouseLeave:$=>$.currentTarget.style.backgroundColor="#0066C0",disabled:!T,children:[a.jsx(ej,{className:"text-lg sm:text-base lg:text-base"}),a.jsx("span",{className:"hidden sm:inline lg:hidden",children:"Agregar"}),a.jsx("span",{className:"hidden lg:inline",children:"Agregar al Carrito"})]})]})]}),a.jsx(Wp,{isOpen:f,onClose:()=>g(!1),onIniciarSesion:()=>{g(!1),u()}})]})}function iA(){return a.jsxs("div",{className:"wave-background",children:[a.jsx("div",{className:"wave wave1"}),a.jsx("div",{className:"wave wave2"}),a.jsx("div",{className:"wave wave3"})]})}const oN={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.2)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 4px rgba(60, 80, 120, 0.4)"}},VH={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.4)","0 0 10px rgba(80, 100, 140, 0.6)","0 0 4px rgba(80, 100, 140, 0.4)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function rp({categoriaActiva:t,mostrarEnMovil:e,setMostrarEnMovil:n}){const r=ai(),{categories:i,loading:o,error:c}=e1(),u=g=>{r(`/Productos/${g.ruta}`),n&&n(!1)},d=g=>g===t,f=[{nombre:"Todos",ruta:"",id:"todos"},...i];return o?a.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})}):c?a.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:a.jsx("div",{className:"text-red-500 text-sm p-4",children:"Error cargando categoras"})}):a.jsxs(a.Fragment,{children:[a.jsxs("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",style:{height:"100vh",paddingTop:0,backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Categoras",children:[a.jsx("div",{className:"absolute inset-0 z-0",style:{overflow:"visible",minHeight:"2000px",backgroundColor:"transparent",pointerEvents:"none"},children:a.jsx(iA,{})}),a.jsx("div",{className:"categorias-sidebar",children:a.jsx("div",{className:"categorias-scroll",children:a.jsxs("div",{className:"relative z-10 flex-1 pr-2",children:[a.jsx(de.h2,{className:"text-lg font-semibold mb-4 text-center tracking-wide text-blue-700 dark:text-blue-400 select-none",variants:VH,animate:"animate",children:"Categoras"}),a.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>a.jsx(de.li,{whileHover:{scale:1.02},children:a.jsx(de.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:oN,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${d(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))}),a.jsx("div",{className:"scroll-indicator",children:a.jsxs("div",{className:"scroll-dots",children:[a.jsx("div",{className:"scroll-dot"}),a.jsx("div",{className:"scroll-dot"}),a.jsx("div",{className:"scroll-dot"})]})})]})})})]}),a.jsx(dn,{children:e&&a.jsxs(a.Fragment,{children:[a.jsx(de.div,{className:"fixed inset-0 bg-gray-200 dark:bg-gray-900 bg-opacity-40 backdrop-blur-sm z-[9998]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1)}),a.jsxs(de.nav,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",stiffness:250,damping:30},className:"fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-300 dark:border-gray-700 z-[9999] flex flex-col shadow-md transition-colors duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-400 tracking-wide select-none",children:"Categoras"}),a.jsx("button",{onClick:()=>n(!1),className:"text-red-500 font-bold text-2xl hover:text-red-700","aria-label":"Cerrar categoras",children:""})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-2 scrollbar-light",children:a.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>a.jsx(de.li,{whileHover:{scale:1.02},children:a.jsx(de.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:oN,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${d(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))})})]})]})})]})}function sA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=sA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ks(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=sA(t))&&(r&&(r+=" "),r+=e);return r}function aA(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let c="",u=!0;for(let d=0;d<o.length;d+=1){const f=o[d];f&&(c+=(u===!0?"":" ")+e(f),u=!1,n&&n[f]&&(c+=" "+n[f]))}r[i]=c}return r}function jl(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function Ic(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function $1(t,e=0,n=1){return Ic(t,e,n)}function FH(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Po(t){if(t.type)return t;if(t.charAt(0)==="#")return Po(FH(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(jl(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(jl(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const UH=t=>{const e=Po(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},ad=(t,e)=>{try{return UH(t)}catch{return t}};function qp(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function oA(t){t=Po(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),c=(f,g=(f+n/30)%12)=>i-o*Math.max(Math.min(g-3,9-g,1),-1);let u="rgb";const d=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return t.type==="hsla"&&(u+="a",d.push(e[3])),qp({type:u,values:d})}function Rx(t){t=Po(t);let e=t.type==="hsl"||t.type==="hsla"?Po(oA(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function $H(t,e){const n=Rx(t),r=Rx(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Dx(t,e){return t=Po(t),e=$1(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,qp(t)}function $f(t,e,n){try{return Dx(t,e)}catch{return t}}function Hd(t,e){if(t=Po(t),e=$1(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return qp(t)}function cn(t,e,n){try{return Hd(t,e)}catch{return t}}function Wd(t,e){if(t=Po(t),e=$1(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return qp(t)}function un(t,e,n){try{return Wd(t,e)}catch{return t}}function zH(t,e=.15){return Rx(t)>.5?Hd(t,e):Wd(t,e)}function zf(t,e,n){try{return zH(t,e)}catch{return t}}const BH=E.createContext(),HH=()=>E.useContext(BH)??!1;function lA(...t){const e=E.useRef(void 0),n=E.useCallback(r=>{const i=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const c=o,u=c(r);return typeof u=="function"?u:()=>{c(null)}}return o.current=r,()=>{o.current=null}});return()=>{i.forEach(o=>o==null?void 0:o())}},t);return E.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function WH(t){return typeof t=="string"}function qH(t,e,n){return t===void 0||WH(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function um(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function lN(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function GH(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const w=Ks(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),N={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},b={...n,...i,...r};return w.length>0&&(b.className=w),Object.keys(N).length>0&&(b.style=N),{props:b,internalRef:void 0}}const c=um({...i,...r}),u=lN(r),d=lN(i),f=e(c),g=Ks(f==null?void 0:f.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),y={...f==null?void 0:f.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},x={...f,...n,...d,...u};return g.length>0&&(x.className=g),Object.keys(y).length>0&&(x.style=y),{props:x,internalRef:f.ref}}function KH(t,e,n){return typeof t=="function"?t(e,n):t}function io(t){var y;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=t,c=i?{}:KH(n,r),{props:u,internalRef:d}=GH({...o,externalSlotProps:c}),f=lA(d,c==null?void 0:c.ref,(y=t.additionalProps)==null?void 0:y.ref);return qH(e,{...u,ref:f},r)}function dm(t){return t&&t.ownerDocument||document}function XH(t){const{controlled:e,default:n}=t,{current:r}=E.useRef(e!==void 0),[i,o]=E.useState(n),c=r?e:i,u=E.useCallback(d=>{r||o(d)},[]);return[c,u]}const cA=typeof window<"u"?E.useLayoutEffect:E.useEffect;function py(t){const e=E.useRef(t);return cA(()=>{e.current=t}),E.useRef((...n)=>(0,e.current)(...n)).current}function cN(t){try{return t.matches(":focus-visible")}catch{}return!1}const YH={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function QH(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const JH=2;function bc(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function uA(t,e){return t-e}function uN(t,e){const{index:n}=t.reduce((r,i,o)=>{const c=Math.abs(e-i);return r===null||c<r.distance||c===r.distance?{distance:c,index:o}:r},null)??{};return n}function Bf(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function ip(t,e,n){return(t-e)*100/(n-e)}function ZH(t,e,n){return(n-e)*t+e}function eW(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function tW(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(eW(e)))}function dN({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(uA)}function Hf({sliderRef:t,activeIndex:e,setActive:n}){var i,o,c;const r=dm(t.current);(!((i=t.current)!=null&&i.contains(r.activeElement))||Number((o=r==null?void 0:r.activeElement)==null?void 0:o.getAttribute("data-index"))!==e)&&((c=t.current)==null||c.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function Wf(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?QH(t,e):!1}const nW={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},rW=t=>t;let qf;function hN(){return qf===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?qf=CSS.supports("touch-action","none"):qf=!0),qf}function iW(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:c=!1,max:u=100,min:d=0,name:f,onChange:g,onChangeCommitted:y,orientation:x="horizontal",rootRef:w,scale:N=rW,step:b=1,shiftStep:T=10,tabIndex:j,value:R}=t,A=E.useRef(void 0),[L,z]=E.useState(-1),[q,D]=E.useState(-1),[M,P]=E.useState(!1),S=E.useRef(0),F=E.useRef(null),[$,I]=XH({controlled:R,default:n??d}),re=g&&((X,me,Te)=>{const te=X.nativeEvent||X,be=new te.constructor(te.type,te);Object.defineProperty(be,"target",{writable:!0,value:{value:me,name:f}}),F.current=me,g(be,me,Te)}),ne=Array.isArray($);let we=ne?$.slice().sort(uA):[$];we=we.map(X=>X==null?d:Ic(X,d,u));const Ee=c===!0&&b!==null?[...Array(Math.floor((u-d)/b)+1)].map((X,me)=>({value:d+b*me})):c||[],ee=Ee.map(X=>X.value),[ae,ge]=E.useState(-1),H=E.useRef(null),J=lA(w,H),_e=X=>me=>{var te;const Te=Number(me.currentTarget.getAttribute("data-index"));cN(me.target)&&ge(Te),D(Te),(te=X==null?void 0:X.onFocus)==null||te.call(X,me)},Ue=X=>me=>{var Te;cN(me.target)||ge(-1),D(-1),(Te=X==null?void 0:X.onBlur)==null||Te.call(X,me)},Ge=(X,me)=>{const Te=Number(X.currentTarget.getAttribute("data-index")),te=we[Te],be=ee.indexOf(te);let Se=me;if(Ee&&b==null){const gt=ee[ee.length-1];Se>=gt?Se=gt:Se<=ee[0]?Se=ee[0]:Se=Se<te?ee[be-1]:ee[be+1]}if(Se=Ic(Se,d,u),ne){i&&(Se=Ic(Se,we[Te-1]||-1/0,we[Te+1]||1/0));const gt=Se;Se=dN({values:we,newValue:Se,index:Te});let jt=Te;i||(jt=Se.indexOf(gt)),Hf({sliderRef:H,activeIndex:jt})}I(Se),ge(Te),re&&!Wf(Se,$)&&re(X,Se,Te),y&&y(X,F.current??Se)},tt=X=>me=>{var Te;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(me.key)){me.preventDefault();const te=Number(me.currentTarget.getAttribute("data-index")),be=we[te];let Se=null;if(b!=null){const gt=me.shiftKey?T:b;switch(me.key){case"ArrowUp":Se=bc(be,gt,1,d,u);break;case"ArrowRight":Se=bc(be,gt,o?-1:1,d,u);break;case"ArrowDown":Se=bc(be,gt,-1,d,u);break;case"ArrowLeft":Se=bc(be,gt,o?1:-1,d,u);break;case"PageUp":Se=bc(be,T,1,d,u);break;case"PageDown":Se=bc(be,T,-1,d,u);break;case"Home":Se=d;break;case"End":Se=u;break}}else if(Ee){const gt=ee[ee.length-1],jt=ee.indexOf(be),ct=[o?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Vt=[o?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];ct.includes(me.key)?jt===0?Se=ee[0]:Se=ee[jt-1]:Vt.includes(me.key)&&(jt===ee.length-1?Se=gt:Se=ee[jt+1])}Se!=null&&Ge(me,Se)}(Te=X==null?void 0:X.onKeyDown)==null||Te.call(X,me)};cA(()=>{var X;r&&H.current.contains(document.activeElement)&&((X=document.activeElement)==null||X.blur())},[r]),r&&L!==-1&&z(-1),r&&ae!==-1&&ge(-1);const lt=X=>me=>{var Te;(Te=X.onChange)==null||Te.call(X,me),Ge(me,me.target.valueAsNumber)},Je=E.useRef(void 0);let Ze=x;o&&x==="horizontal"&&(Ze+="-reverse");const Nt=({finger:X,move:me=!1})=>{const{current:Te}=H,{width:te,height:be,bottom:Se,left:gt}=Te.getBoundingClientRect();let jt;Ze.startsWith("vertical")?jt=(Se-X.y)/be:jt=(X.x-gt)/te,Ze.includes("-reverse")&&(jt=1-jt);let ct;if(ct=ZH(jt,d,u),b)ct=tW(ct,b,d);else{const bn=uN(ee,ct);ct=ee[bn]}ct=Ic(ct,d,u);let Vt=0;if(ne){me?Vt=Je.current:Vt=uN(we,ct),i&&(ct=Ic(ct,we[Vt-1]||-1/0,we[Vt+1]||1/0));const bn=ct;ct=dN({values:we,newValue:ct,index:Vt}),i&&me||(Vt=ct.indexOf(bn),Je.current=Vt)}return{newValue:ct,activeIndex:Vt}},bt=py(X=>{const me=Bf(X,A);if(!me)return;if(S.current+=1,X.type==="mousemove"&&X.buttons===0){pt(X);return}const{newValue:Te,activeIndex:te}=Nt({finger:me,move:!0});Hf({sliderRef:H,activeIndex:te,setActive:z}),I(Te),!M&&S.current>JH&&P(!0),re&&!Wf(Te,$)&&re(X,Te,te)}),pt=py(X=>{const me=Bf(X,A);if(P(!1),!me)return;const{newValue:Te}=Nt({finger:me,move:!0});z(-1),X.type==="touchend"&&D(-1),y&&y(X,F.current??Te),A.current=void 0,Dt()}),yt=py(X=>{if(r)return;hN()||X.preventDefault();const me=X.changedTouches[0];me!=null&&(A.current=me.identifier);const Te=Bf(X,A);if(Te!==!1){const{newValue:be,activeIndex:Se}=Nt({finger:Te});Hf({sliderRef:H,activeIndex:Se,setActive:z}),I(be),re&&!Wf(be,$)&&re(X,be,Se)}S.current=0;const te=dm(H.current);te.addEventListener("touchmove",bt,{passive:!0}),te.addEventListener("touchend",pt,{passive:!0})}),Dt=E.useCallback(()=>{const X=dm(H.current);X.removeEventListener("mousemove",bt),X.removeEventListener("mouseup",pt),X.removeEventListener("touchmove",bt),X.removeEventListener("touchend",pt)},[pt,bt]);E.useEffect(()=>{const{current:X}=H;return X.addEventListener("touchstart",yt,{passive:hN()}),()=>{X.removeEventListener("touchstart",yt),Dt()}},[Dt,yt]),E.useEffect(()=>{r&&Dt()},[r,Dt]);const It=X=>me=>{var be;if((be=X.onMouseDown)==null||be.call(X,me),r||me.defaultPrevented||me.button!==0)return;me.preventDefault();const Te=Bf(me,A);if(Te!==!1){const{newValue:Se,activeIndex:gt}=Nt({finger:Te});Hf({sliderRef:H,activeIndex:gt,setActive:z}),I(Se),re&&!Wf(Se,$)&&re(me,Se,gt)}S.current=0;const te=dm(H.current);te.addEventListener("mousemove",bt,{passive:!0}),te.addEventListener("mouseup",pt)},Sn=ip(ne?we[0]:d,d,u),Z=ip(we[we.length-1],d,u)-Sn,je=(X={})=>{const me=um(X),Te={onMouseDown:It(me||{})},te={...me,...Te};return{...X,ref:J,...te}},Oe=X=>me=>{var te;(te=X.onMouseOver)==null||te.call(X,me);const Te=Number(me.currentTarget.getAttribute("data-index"));D(Te)},rt=X=>me=>{var Te;(Te=X.onMouseLeave)==null||Te.call(X,me),D(-1)},St=(X={})=>{const me=um(X),Te={onMouseOver:Oe(me||{}),onMouseLeave:rt(me||{})};return{...X,...me,...Te}},He=X=>({pointerEvents:L!==-1&&L!==X?"none":void 0});let dt;return x==="vertical"&&(dt=o?"vertical-rl":"vertical-lr"),{active:L,axis:Ze,axisProps:nW,dragging:M,focusedThumbIndex:ae,getHiddenInputProps:(X={})=>{const me=um(X),Te={onChange:lt(me||{}),onFocus:_e(me||{}),onBlur:Ue(me||{}),onKeyDown:tt(me||{})},te={...me,...Te};return{tabIndex:j,"aria-labelledby":e,"aria-orientation":x,"aria-valuemax":N(u),"aria-valuemin":N(d),name:f,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...X,...te,style:{...YH,direction:o?"rtl":"ltr",width:"100%",height:"100%",writingMode:dt}}},getRootProps:je,getThumbProps:St,marks:Ee,open:q,range:ne,rootRef:J,trackLeap:Z,trackOffset:Sn,values:we,getThumbStyle:He}}function hm(t){return typeof t=="string"}function Ri(t){if(typeof t!="string")throw new Error(jl(7));return t.charAt(0).toUpperCase()+t.slice(1)}var gy={exports:{}},on={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN;function sW(){if(fN)return on;fN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),w=Symbol.for("react.client.reference");function N(b){if(typeof b=="object"&&b!==null){var T=b.$$typeof;switch(T){case t:switch(b=b.type,b){case n:case i:case r:case d:case f:case x:return b;default:switch(b=b&&b.$$typeof,b){case c:case u:case y:case g:return b;case o:return b;default:return T}}case e:return T}}}return on.ContextConsumer=o,on.ContextProvider=c,on.Element=t,on.ForwardRef=u,on.Fragment=n,on.Lazy=y,on.Memo=g,on.Portal=e,on.Profiler=i,on.StrictMode=r,on.Suspense=d,on.SuspenseList=f,on.isContextConsumer=function(b){return N(b)===o},on.isContextProvider=function(b){return N(b)===c},on.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},on.isForwardRef=function(b){return N(b)===u},on.isFragment=function(b){return N(b)===n},on.isLazy=function(b){return N(b)===y},on.isMemo=function(b){return N(b)===g},on.isPortal=function(b){return N(b)===e},on.isProfiler=function(b){return N(b)===i},on.isStrictMode=function(b){return N(b)===r},on.isSuspense=function(b){return N(b)===d},on.isSuspenseList=function(b){return N(b)===f},on.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===d||b===f||typeof b=="object"&&b!==null&&(b.$$typeof===y||b.$$typeof===g||b.$$typeof===c||b.$$typeof===o||b.$$typeof===u||b.$$typeof===w||b.getModuleId!==void 0)},on.typeOf=N,on}var mN;function aW(){return mN||(mN=1,gy.exports=sW()),gy.exports}var dA=aW();function Ls(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function hA(t){if(E.isValidElement(t)||dA.isValidElementType(t)||!Ls(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=hA(t[n])}),e}function Di(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Ls(t)&&Ls(e)&&Object.keys(e).forEach(i=>{E.isValidElement(e[i])||dA.isValidElementType(e[i])?r[i]=e[i]:Ls(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Ls(t[i])?r[i]=Di(t[i],e[i],n):n.clone?r[i]=Ls(e[i])?hA(e[i]):e[i]:r[i]=e[i]}),r}function wd(t,e){return e?Di(t,e,{clone:!1}):t}function pN(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var c,u;const o=/min-width:\s*([0-9.]+)/;return+(((c=r.match(o))==null?void 0:c[1])||0)-+(((u=i.match(o))==null?void 0:u[1])||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function oW(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function lW(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function cW(t){const e=(o,c)=>o.replace("@media",c?`@container ${c}`:"@container");function n(o,c){o.up=(...u)=>e(t.breakpoints.up(...u),c),o.down=(...u)=>e(t.breakpoints.down(...u),c),o.between=(...u)=>e(t.breakpoints.between(...u),c),o.only=(...u)=>e(t.breakpoints.only(...u),c),o.not=(...u)=>{const d=e(t.breakpoints.not(...u),c);return d.includes("not all and")?d.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):d}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const Gp={xs:0,sm:600,md:900,lg:1200,xl:1536},gN={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Gp[t]}px)`},uW={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:Gp[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Ia(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||gN;return e.reduce((c,u,d)=>(c[o.up(o.keys[d])]=n(e[d]),c),{})}if(typeof e=="object"){const o=r.breakpoints||gN;return Object.keys(e).reduce((c,u)=>{if(oW(o.keys,u)){const d=lW(r.containerQueries?r:uW,u);d&&(c[d]=n(e[u],u))}else if(Object.keys(o.values||Gp).includes(u)){const d=o.up(u);c[d]=n(e[u],u)}else{const d=u;c[d]=e[d]}return c},{})}return n(e)}function dW(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function yN(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Kp(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function sp(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Kp(t,n)||r,e&&(i=e(i,r,t)),i}function Qn(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=c=>{if(c[e]==null)return null;const u=c[e],d=c.theme,f=Kp(d,r)||{};return Ia(c,u,y=>{let x=sp(f,i,y);return y===x&&typeof y=="string"&&(x=sp(f,i,`${e}${y==="default"?"":Ri(y)}`,y)),n===!1?x:{[n]:x}})};return o.propTypes={},o.filterProps=[e],o}function hW(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const fW={m:"margin",p:"padding"},mW={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},xN={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},pW=hW(t=>{if(t.length>2)if(xN[t])t=xN[t];else return[t];const[e,n]=t.split(""),r=fW[e],i=mW[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),z1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],B1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...z1,...B1];function xh(t,e,n,r){const i=Kp(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const c=Math.abs(o),u=i[c];return o>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof i=="function"?i:()=>{}}function H1(t){return xh(t,"spacing",8)}function vh(t,e){return typeof e=="string"||e==null?e:t(e)}function gW(t,e){return n=>t.reduce((r,i)=>(r[i]=vh(e,n),r),{})}function yW(t,e,n,r){if(!e.includes(n))return null;const i=pW(n),o=gW(i,r),c=t[n];return Ia(t,c,o)}function fA(t,e){const n=H1(t.theme);return Object.keys(t).map(r=>yW(t,e,r,n)).reduce(wd,{})}function Fn(t){return fA(t,z1)}Fn.propTypes={};Fn.filterProps=z1;function Un(t){return fA(t,B1)}Un.propTypes={};Un.filterProps=B1;function Xp(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?wd(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function qi(t){return typeof t!="number"?t:`${t}px solid`}function Zi(t,e){return Qn({prop:t,themeKey:"borders",transform:e})}const xW=Zi("border",qi),vW=Zi("borderTop",qi),bW=Zi("borderRight",qi),wW=Zi("borderBottom",qi),_W=Zi("borderLeft",qi),kW=Zi("borderColor"),EW=Zi("borderTopColor"),NW=Zi("borderRightColor"),SW=Zi("borderBottomColor"),TW=Zi("borderLeftColor"),CW=Zi("outline",qi),jW=Zi("outlineColor"),Yp=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=xh(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:vh(e,r)});return Ia(t,t.borderRadius,n)}return null};Yp.propTypes={};Yp.filterProps=["borderRadius"];Xp(xW,vW,bW,wW,_W,kW,EW,NW,SW,TW,Yp,CW,jW);const Qp=t=>{if(t.gap!==void 0&&t.gap!==null){const e=xh(t.theme,"spacing",8),n=r=>({gap:vh(e,r)});return Ia(t,t.gap,n)}return null};Qp.propTypes={};Qp.filterProps=["gap"];const Jp=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=xh(t.theme,"spacing",8),n=r=>({columnGap:vh(e,r)});return Ia(t,t.columnGap,n)}return null};Jp.propTypes={};Jp.filterProps=["columnGap"];const Zp=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=xh(t.theme,"spacing",8),n=r=>({rowGap:vh(e,r)});return Ia(t,t.rowGap,n)}return null};Zp.propTypes={};Zp.filterProps=["rowGap"];const AW=Qn({prop:"gridColumn"}),IW=Qn({prop:"gridRow"}),PW=Qn({prop:"gridAutoFlow"}),RW=Qn({prop:"gridAutoColumns"}),DW=Qn({prop:"gridAutoRows"}),MW=Qn({prop:"gridTemplateColumns"}),OW=Qn({prop:"gridTemplateRows"}),LW=Qn({prop:"gridTemplateAreas"}),VW=Qn({prop:"gridArea"});Xp(Qp,Jp,Zp,AW,IW,PW,RW,DW,MW,OW,LW,VW);function Bc(t,e){return e==="grey"?e:t}const FW=Qn({prop:"color",themeKey:"palette",transform:Bc}),UW=Qn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Bc}),$W=Qn({prop:"backgroundColor",themeKey:"palette",transform:Bc});Xp(FW,UW,$W);function Ai(t){return t<=1&&t!==0?`${t*100}%`:t}const zW=Qn({prop:"width",transform:Ai}),W1=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,o,c,u,d;const r=((c=(o=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:c[n])||Gp[n];return r?((d=(u=t.theme)==null?void 0:u.breakpoints)==null?void 0:d.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Ai(n)}};return Ia(t,t.maxWidth,e)}return null};W1.filterProps=["maxWidth"];const BW=Qn({prop:"minWidth",transform:Ai}),HW=Qn({prop:"height",transform:Ai}),WW=Qn({prop:"maxHeight",transform:Ai}),qW=Qn({prop:"minHeight",transform:Ai});Qn({prop:"size",cssProperty:"width",transform:Ai});Qn({prop:"size",cssProperty:"height",transform:Ai});const GW=Qn({prop:"boxSizing"});Xp(zW,W1,BW,HW,WW,qW,GW);const bh={border:{themeKey:"borders",transform:qi},borderTop:{themeKey:"borders",transform:qi},borderRight:{themeKey:"borders",transform:qi},borderBottom:{themeKey:"borders",transform:qi},borderLeft:{themeKey:"borders",transform:qi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:qi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Yp},color:{themeKey:"palette",transform:Bc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Bc},backgroundColor:{themeKey:"palette",transform:Bc},p:{style:Un},pt:{style:Un},pr:{style:Un},pb:{style:Un},pl:{style:Un},px:{style:Un},py:{style:Un},padding:{style:Un},paddingTop:{style:Un},paddingRight:{style:Un},paddingBottom:{style:Un},paddingLeft:{style:Un},paddingX:{style:Un},paddingY:{style:Un},paddingInline:{style:Un},paddingInlineStart:{style:Un},paddingInlineEnd:{style:Un},paddingBlock:{style:Un},paddingBlockStart:{style:Un},paddingBlockEnd:{style:Un},m:{style:Fn},mt:{style:Fn},mr:{style:Fn},mb:{style:Fn},ml:{style:Fn},mx:{style:Fn},my:{style:Fn},margin:{style:Fn},marginTop:{style:Fn},marginRight:{style:Fn},marginBottom:{style:Fn},marginLeft:{style:Fn},marginX:{style:Fn},marginY:{style:Fn},marginInline:{style:Fn},marginInlineStart:{style:Fn},marginInlineEnd:{style:Fn},marginBlock:{style:Fn},marginBlockStart:{style:Fn},marginBlockEnd:{style:Fn},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Qp},rowGap:{style:Zp},columnGap:{style:Jp},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ai},maxWidth:{style:W1},minWidth:{transform:Ai},height:{transform:Ai},maxHeight:{transform:Ai},minHeight:{transform:Ai},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function KW(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function XW(t,e){return typeof t=="function"?t(e):t}function YW(){function t(n,r,i,o){const c={[n]:r,theme:i},u=o[n];if(!u)return{[n]:r};const{cssProperty:d=n,themeKey:f,transform:g,style:y}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const x=Kp(i,f)||{};return y?y(c):Ia(c,r,N=>{let b=sp(x,g,N);return N===b&&typeof N=="string"&&(b=sp(x,g,`${n}${N==="default"?"":Ri(N)}`,N)),d===!1?b:{[d]:b}})}function e(n){const{sx:r,theme:i={},nested:o}=n||{};if(!r)return null;const c=i.unstable_sxConfig??bh;function u(d){let f=d;if(typeof d=="function")f=d(i);else if(typeof d!="object")return d;if(!f)return null;const g=dW(i.breakpoints),y=Object.keys(g);let x=g;return Object.keys(f).forEach(w=>{const N=XW(f[w],i);if(N!=null)if(typeof N=="object")if(c[w])x=wd(x,t(w,N,i,c));else{const b=Ia({theme:i},N,T=>({[w]:T}));KW(b,N)?x[w]=e({sx:N,theme:i,nested:!0}):x=wd(x,b)}else x=wd(x,t(w,N,i,c))}),!o&&i.modularCssLayers?{"@layer sx":pN(i,yN(y,x))}:pN(i,yN(y,x))}return Array.isArray(r)?r.map(u):u(r)}return e}const Al=YW();Al.filterProps=["sx"];const QW=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??bh;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function mA(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=QW(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...c)=>{const u=e(...c);return Ls(u)?{...r,...u}:r}:o={...r,...e},{...i,sx:o}}function Mx(){return Mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mx.apply(null,arguments)}function JW(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function ZW(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var eq=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ZW(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=JW(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Br="-ms-",ap="-moz-",Kt="-webkit-",pA="comm",q1="rule",G1="decl",tq="@import",gA="@keyframes",nq="@layer",rq=Math.abs,eg=String.fromCharCode,iq=Object.assign;function sq(t,e){return Ar(t,0)^45?(((e<<2^Ar(t,0))<<2^Ar(t,1))<<2^Ar(t,2))<<2^Ar(t,3):0}function yA(t){return t.trim()}function aq(t,e){return(t=e.exec(t))?t[0]:t}function Xt(t,e,n){return t.replace(e,n)}function Ox(t,e){return t.indexOf(e)}function Ar(t,e){return t.charCodeAt(e)|0}function qd(t,e,n){return t.slice(e,n)}function Ms(t){return t.length}function K1(t){return t.length}function Gf(t,e){return e.push(t),t}function oq(t,e){return t.map(e).join("")}var tg=1,tu=1,xA=0,ki=0,ir=0,gu="";function ng(t,e,n,r,i,o,c){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:tg,column:tu,length:c,return:""}}function Yu(t,e){return iq(ng("",null,null,"",null,null,0),t,{length:-t.length},e)}function lq(){return ir}function cq(){return ir=ki>0?Ar(gu,--ki):0,tu--,ir===10&&(tu=1,tg--),ir}function Mi(){return ir=ki<xA?Ar(gu,ki++):0,tu++,ir===10&&(tu=1,tg++),ir}function Xs(){return Ar(gu,ki)}function fm(){return ki}function wh(t,e){return qd(gu,t,e)}function Gd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vA(t){return tg=tu=1,xA=Ms(gu=t),ki=0,[]}function bA(t){return gu="",t}function mm(t){return yA(wh(ki-1,Lx(t===91?t+2:t===40?t+1:t)))}function uq(t){for(;(ir=Xs())&&ir<33;)Mi();return Gd(t)>2||Gd(ir)>3?"":" "}function dq(t,e){for(;--e&&Mi()&&!(ir<48||ir>102||ir>57&&ir<65||ir>70&&ir<97););return wh(t,fm()+(e<6&&Xs()==32&&Mi()==32))}function Lx(t){for(;Mi();)switch(ir){case t:return ki;case 34:case 39:t!==34&&t!==39&&Lx(ir);break;case 40:t===41&&Lx(t);break;case 92:Mi();break}return ki}function hq(t,e){for(;Mi()&&t+ir!==57;)if(t+ir===84&&Xs()===47)break;return"/*"+wh(e,ki-1)+"*"+eg(t===47?t:Mi())}function fq(t){for(;!Gd(Xs());)Mi();return wh(t,ki)}function mq(t){return bA(pm("",null,null,null,[""],t=vA(t),0,[0],t))}function pm(t,e,n,r,i,o,c,u,d){for(var f=0,g=0,y=c,x=0,w=0,N=0,b=1,T=1,j=1,R=0,A="",L=i,z=o,q=r,D=A;T;)switch(N=R,R=Mi()){case 40:if(N!=108&&Ar(D,y-1)==58){Ox(D+=Xt(mm(R),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:D+=mm(R);break;case 9:case 10:case 13:case 32:D+=uq(N);break;case 92:D+=dq(fm()-1,7);continue;case 47:switch(Xs()){case 42:case 47:Gf(pq(hq(Mi(),fm()),e,n),d);break;default:D+="/"}break;case 123*b:u[f++]=Ms(D)*j;case 125*b:case 59:case 0:switch(R){case 0:case 125:T=0;case 59+g:j==-1&&(D=Xt(D,/\f/g,"")),w>0&&Ms(D)-y&&Gf(w>32?bN(D+";",r,n,y-1):bN(Xt(D," ","")+";",r,n,y-2),d);break;case 59:D+=";";default:if(Gf(q=vN(D,e,n,f,g,i,u,A,L=[],z=[],y),o),R===123)if(g===0)pm(D,e,q,q,L,o,y,u,z);else switch(x===99&&Ar(D,3)===110?100:x){case 100:case 108:case 109:case 115:pm(t,q,q,r&&Gf(vN(t,q,q,0,0,i,u,A,i,L=[],y),z),i,z,y,u,r?L:z);break;default:pm(D,q,q,q,[""],z,0,u,z)}}f=g=w=0,b=j=1,A=D="",y=c;break;case 58:y=1+Ms(D),w=N;default:if(b<1){if(R==123)--b;else if(R==125&&b++==0&&cq()==125)continue}switch(D+=eg(R),R*b){case 38:j=g>0?1:(D+="\f",-1);break;case 44:u[f++]=(Ms(D)-1)*j,j=1;break;case 64:Xs()===45&&(D+=mm(Mi())),x=Xs(),g=y=Ms(A=D+=fq(fm())),R++;break;case 45:N===45&&Ms(D)==2&&(b=0)}}return o}function vN(t,e,n,r,i,o,c,u,d,f,g){for(var y=i-1,x=i===0?o:[""],w=K1(x),N=0,b=0,T=0;N<r;++N)for(var j=0,R=qd(t,y+1,y=rq(b=c[N])),A=t;j<w;++j)(A=yA(b>0?x[j]+" "+R:Xt(R,/&\f/g,x[j])))&&(d[T++]=A);return ng(t,e,n,i===0?q1:u,d,f,g)}function pq(t,e,n){return ng(t,e,n,pA,eg(lq()),qd(t,2,-2),0)}function bN(t,e,n,r){return ng(t,e,n,G1,qd(t,0,r),qd(t,r+1,-1),r)}function Hc(t,e){for(var n="",r=K1(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function gq(t,e,n,r){switch(t.type){case nq:if(t.children.length)break;case tq:case G1:return t.return=t.return||t.value;case pA:return"";case gA:return t.return=t.value+"{"+Hc(t.children,r)+"}";case q1:t.value=t.props.join(",")}return Ms(n=Hc(t.children,r))?t.return=t.value+"{"+n+"}":""}function yq(t){var e=K1(t);return function(n,r,i,o){for(var c="",u=0;u<e;u++)c+=t[u](n,r,i,o)||"";return c}}function xq(t){return function(e){e.root||(e=e.return)&&t(e)}}function wA(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var vq=function(e,n,r){for(var i=0,o=0;i=o,o=Xs(),i===38&&o===12&&(n[r]=1),!Gd(o);)Mi();return wh(e,ki)},bq=function(e,n){var r=-1,i=44;do switch(Gd(i)){case 0:i===38&&Xs()===12&&(n[r]=1),e[r]+=vq(ki-1,n,r);break;case 2:e[r]+=mm(i);break;case 4:if(i===44){e[++r]=Xs()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=eg(i)}while(i=Mi());return e},wq=function(e,n){return bA(bq(vA(e),n))},wN=new WeakMap,_q=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!wN.get(r))&&!i){wN.set(e,!0);for(var o=[],c=wq(n,o),u=r.props,d=0,f=0;d<c.length;d++)for(var g=0;g<u.length;g++,f++)e.props[f]=o[d]?c[d].replace(/&\f/g,u[g]):u[g]+" "+c[d]}}},kq=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function _A(t,e){switch(sq(t,e)){case 5103:return Kt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Kt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Kt+t+ap+t+Br+t+t;case 6828:case 4268:return Kt+t+Br+t+t;case 6165:return Kt+t+Br+"flex-"+t+t;case 5187:return Kt+t+Xt(t,/(\w+).+(:[^]+)/,Kt+"box-$1$2"+Br+"flex-$1$2")+t;case 5443:return Kt+t+Br+"flex-item-"+Xt(t,/flex-|-self/,"")+t;case 4675:return Kt+t+Br+"flex-line-pack"+Xt(t,/align-content|flex-|-self/,"")+t;case 5548:return Kt+t+Br+Xt(t,"shrink","negative")+t;case 5292:return Kt+t+Br+Xt(t,"basis","preferred-size")+t;case 6060:return Kt+"box-"+Xt(t,"-grow","")+Kt+t+Br+Xt(t,"grow","positive")+t;case 4554:return Kt+Xt(t,/([^-])(transform)/g,"$1"+Kt+"$2")+t;case 6187:return Xt(Xt(Xt(t,/(zoom-|grab)/,Kt+"$1"),/(image-set)/,Kt+"$1"),t,"")+t;case 5495:case 3959:return Xt(t,/(image-set\([^]*)/,Kt+"$1$`$1");case 4968:return Xt(Xt(t,/(.+:)(flex-)?(.*)/,Kt+"box-pack:$3"+Br+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Kt+t+t;case 4095:case 3583:case 4068:case 2532:return Xt(t,/(.+)-inline(.+)/,Kt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ms(t)-1-e>6)switch(Ar(t,e+1)){case 109:if(Ar(t,e+4)!==45)break;case 102:return Xt(t,/(.+:)(.+)-([^]+)/,"$1"+Kt+"$2-$3$1"+ap+(Ar(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Ox(t,"stretch")?_A(Xt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ar(t,e+1)!==115)break;case 6444:switch(Ar(t,Ms(t)-3-(~Ox(t,"!important")&&10))){case 107:return Xt(t,":",":"+Kt)+t;case 101:return Xt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Kt+(Ar(t,14)===45?"inline-":"")+"box$3$1"+Kt+"$2$3$1"+Br+"$2box$3")+t}break;case 5936:switch(Ar(t,e+11)){case 114:return Kt+t+Br+Xt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Kt+t+Br+Xt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Kt+t+Br+Xt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Kt+t+Br+t+t}return t}var Eq=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case G1:e.return=_A(e.value,e.length);break;case gA:return Hc([Yu(e,{value:Xt(e.value,"@","@"+Kt)})],i);case q1:if(e.length)return oq(e.props,function(o){switch(aq(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hc([Yu(e,{props:[Xt(o,/:(read-\w+)/,":"+ap+"$1")]})],i);case"::placeholder":return Hc([Yu(e,{props:[Xt(o,/:(plac\w+)/,":"+Kt+"input-$1")]}),Yu(e,{props:[Xt(o,/:(plac\w+)/,":"+ap+"$1")]}),Yu(e,{props:[Xt(o,/:(plac\w+)/,Br+"input-$1")]})],i)}return""})}},Nq=[Eq],Sq=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var T=b.getAttribute("data-emotion");T.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||Nq,o={},c,u=[];c=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var T=b.getAttribute("data-emotion").split(" "),j=1;j<T.length;j++)o[T[j]]=!0;u.push(b)});var d,f=[_q,kq];{var g,y=[gq,xq(function(b){g.insert(b)})],x=yq(f.concat(i,y)),w=function(T){return Hc(mq(T),x)};d=function(T,j,R,A){g=R,w(T?T+"{"+j.styles+"}":j.styles),A&&(N.inserted[j.name]=!0)}}var N={key:n,sheet:new eq({key:n,container:c,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:d};return N.sheet.hydrate(u),N},Tq=!0;function Cq(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var kA=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Tq===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},jq=function(e,n,r){kA(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Aq(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Iq={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Pq=/[A-Z]|^ms/g,Rq=/_EMO_([^_]+?)_([^]*?)_EMO_/g,EA=function(e){return e.charCodeAt(1)===45},_N=function(e){return e!=null&&typeof e!="boolean"},yy=wA(function(t){return EA(t)?t:t.replace(Pq,"-$&").toLowerCase()}),kN=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Rq,function(r,i,o){return Os={name:i,styles:o,next:Os},i})}return Iq[e]!==1&&!EA(e)&&typeof n=="number"&&n!==0?n+"px":n};function Kd(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Os={name:i.name,styles:i.styles,next:Os},i.name;var o=n;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)Os={name:c.name,styles:c.styles,next:Os},c=c.next;var u=o.styles+";";return u}return Dq(t,e,n)}case"function":{if(t!==void 0){var d=Os,f=n(t);return Os=d,Kd(t,e,f)}break}}var g=n;if(e==null)return g;var y=e[g];return y!==void 0?y:g}function Dq(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Kd(t,e,n[i])+";";else for(var o in n){var c=n[o];if(typeof c!="object"){var u=c;e!=null&&e[u]!==void 0?r+=o+"{"+e[u]+"}":_N(u)&&(r+=yy(o)+":"+kN(o,u)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(e==null||e[c[0]]===void 0))for(var d=0;d<c.length;d++)_N(c[d])&&(r+=yy(o)+":"+kN(o,c[d])+";");else{var f=Kd(t,e,c);switch(o){case"animation":case"animationName":{r+=yy(o)+":"+f+";";break}default:r+=o+"{"+f+"}"}}}return r}var EN=/label:\s*([^\s;{]+)\s*(;|$)/g,Os;function NA(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Os=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Kd(n,e,o);else{var c=o;i+=c[0]}for(var u=1;u<t.length;u++)if(i+=Kd(n,e,t[u]),r){var d=o;i+=d[u]}EN.lastIndex=0;for(var f="",g;(g=EN.exec(i))!==null;)f+="-"+g[1];var y=Aq(i)+f;return{name:y,styles:i,next:Os}}var Mq=function(e){return e()},Oq=wy.useInsertionEffect?wy.useInsertionEffect:!1,Lq=Oq||Mq,SA=E.createContext(typeof HTMLElement<"u"?Sq({key:"css"}):null);SA.Provider;var Vq=function(e){return E.forwardRef(function(n,r){var i=E.useContext(SA);return e(n,i,r)})},TA=E.createContext({}),Fq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Uq=wA(function(t){return Fq.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),$q=Uq,zq=function(e){return e!=="theme"},NN=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?$q:zq},SN=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(c){return e.__emotion_forwardProp(c)&&o(c)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Bq=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return kA(n,r,i),Lq(function(){return jq(n,r,i)}),null},Hq=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,c;n!==void 0&&(o=n.label,c=n.target);var u=SN(e,n,r),d=u||NN(i),f=!d("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&y.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{var x=g[0];y.push(x[0]);for(var w=g.length,N=1;N<w;N++)y.push(g[N],x[N])}var b=Vq(function(T,j,R){var A=f&&T.as||i,L="",z=[],q=T;if(T.theme==null){q={};for(var D in T)q[D]=T[D];q.theme=E.useContext(TA)}typeof T.className=="string"?L=Cq(j.registered,z,T.className):T.className!=null&&(L=T.className+" ");var M=NA(y.concat(z),j.registered,q);L+=j.key+"-"+M.name,c!==void 0&&(L+=" "+c);var P=f&&u===void 0?NN(A):d,S={};for(var F in T)f&&F==="as"||P(F)&&(S[F]=T[F]);return S.className=L,R&&(S.ref=R),E.createElement(E.Fragment,null,E.createElement(Bq,{cache:j,serialized:M,isStringTag:typeof A=="string"}),E.createElement(A,S))});return b.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=y,b.__emotion_forwardProp=u,Object.defineProperty(b,"toString",{value:function(){return"."+c}}),b.withComponent=function(T,j){var R=t(T,Mx({},n,j,{shouldForwardProp:SN(b,j,!0)}));return R.apply(void 0,y)},b}},Wq=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Vx=Hq.bind(null);Wq.forEach(function(t){Vx[t]=Vx(t)});function CA(t,e){return Vx(t,e)}function qq(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const TN=[];function wl(t){return TN[0]=t,NA(TN)}const Gq=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Kq(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=Gq(e),c=Object.keys(o);function u(x){return`@media (min-width:${typeof e[x]=="number"?e[x]:x}${n})`}function d(x){return`@media (max-width:${(typeof e[x]=="number"?e[x]:x)-r/100}${n})`}function f(x,w){const N=c.indexOf(w);return`@media (min-width:${typeof e[x]=="number"?e[x]:x}${n}) and (max-width:${(N!==-1&&typeof e[c[N]]=="number"?e[c[N]]:w)-r/100}${n})`}function g(x){return c.indexOf(x)+1<c.length?f(x,c[c.indexOf(x)+1]):u(x)}function y(x){const w=c.indexOf(x);return w===0?u(c[1]):w===c.length-1?d(c[w]):f(x,c[c.indexOf(x)+1]).replace("@media","@media not all and")}return{keys:c,values:o,up:u,down:d,between:f,only:g,not:y,unit:n,...i}}const Xq={borderRadius:4};function jA(t=8,e=H1({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const c=e(o);return typeof c=="number"?`${c}px`:c}).join(" ");return n.mui=!0,n}function Yq(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function X1(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...c}=t,u=Kq(n),d=jA(i);let f=Di({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:d,shape:{...Xq,...o}},c);return f=cW(f),f.applyStyles=Yq,f=e.reduce((g,y)=>Di(g,y),f),f.unstable_sxConfig={...bh,...c==null?void 0:c.unstable_sxConfig},f.unstable_sx=function(y){return Al({sx:y,theme:this})},f}function Qq(t){return Object.keys(t).length===0}function Jq(t=null){const e=E.useContext(TA);return!e||Qq(e)?t:e}const Zq=X1();function eG(t=Zq){return Jq(t)}const CN=t=>t,tG=()=>{let t=CN;return{configure(e){t=e},generate(e){return t(e)},reset(){t=CN}}},AA=tG();function nG(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=CA("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Al);return E.forwardRef(function(d,f){const g=eG(n),{className:y,component:x="div",...w}=mA(d);return a.jsx(o,{as:x,ref:f,className:Ks(y,i?i(r):r),theme:e&&g[e]||g,...w})})}const rG={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Y1(t,e,n="Mui"){const r=rG[e];return r?`${n}-${r}`:`${AA.generate(t)}-${e}`}function Q1(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Y1(t,i,n)}),r}function IA(t){const{variants:e,...n}=t,r={variants:e,style:wl(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=wl(i.style))}),r}const iG=X1();function xy(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function pl(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function sG(t){return t?(e,n)=>n[t]:null}function aG(t,e,n){t.theme=cG(t.theme)?n:t.theme[e]||t.theme}function gm(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>gm(t,i,n));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=n?pl(r.style,n):r.style;else{const{variants:o,...c}=r;i=n?pl(wl(c),n):c}return PA(t,r.variants,[i],n)}return r!=null&&r.isProcessed?n?pl(wl(r.style),n):r.style:n?pl(wl(r),n):r}function PA(t,e,n=[],r=void 0){var o;let i;e:for(let c=0;c<e.length;c+=1){const u=e[c];if(typeof u.props=="function"){if(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),!u.props(i))continue}else for(const d in u.props)if(t[d]!==u.props[d]&&((o=t.ownerState)==null?void 0:o[d])!==u.props[d])continue e;typeof u.style=="function"?(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),n.push(r?pl(wl(u.style(i)),r):u.style(i))):n.push(r?pl(wl(u.style),r):u.style)}return n}function oG(t={}){const{themeId:e,defaultTheme:n=iG,rootShouldForwardProp:r=xy,slotShouldForwardProp:i=xy}=t;function o(u){aG(u,e,n)}return(u,d={})=>{qq(u,q=>q.filter(D=>D!==Al));const{name:f,slot:g,skipVariantsResolver:y,skipSx:x,overridesResolver:w=sG(dG(g)),...N}=d,b=f&&f.startsWith("Mui")||g?"components":"custom",T=y!==void 0?y:g&&g!=="Root"&&g!=="root"||!1,j=x||!1;let R=xy;g==="Root"||g==="root"?R=r:g?R=i:uG(u)&&(R=void 0);const A=CA(u,{shouldForwardProp:R,label:lG(),...N}),L=q=>{if(q.__emotion_real===q)return q;if(typeof q=="function")return function(M){return gm(M,q,M.theme.modularCssLayers?b:void 0)};if(Ls(q)){const D=IA(q);return function(P){return D.variants?gm(P,D,P.theme.modularCssLayers?b:void 0):P.theme.modularCssLayers?pl(D.style,b):D.style}}return q},z=(...q)=>{const D=[],M=q.map(L),P=[];if(D.push(o),f&&w&&P.push(function(I){var Ee,ee;const ne=(ee=(Ee=I.theme.components)==null?void 0:Ee[f])==null?void 0:ee.styleOverrides;if(!ne)return null;const we={};for(const ae in ne)we[ae]=gm(I,ne[ae],I.theme.modularCssLayers?"theme":void 0);return w(I,we)}),f&&!T&&P.push(function(I){var we,Ee;const re=I.theme,ne=(Ee=(we=re==null?void 0:re.components)==null?void 0:we[f])==null?void 0:Ee.variants;return ne?PA(I,ne,[],I.theme.modularCssLayers?"theme":void 0):null}),j||P.push(Al),Array.isArray(M[0])){const $=M.shift(),I=new Array(D.length).fill(""),re=new Array(P.length).fill("");let ne;ne=[...I,...$,...re],ne.raw=[...I,...$.raw,...re],D.unshift(ne)}const S=[...D,...M,...P],F=A(...S);return u.muiName&&(F.muiName=u.muiName),F};return A.withConfig&&(z.withConfig=A.withConfig),z}}function lG(t,e){return void 0}function cG(t){for(const e in t)return!1;return!0}function uG(t){return typeof t=="string"&&t.charCodeAt(0)>96}function dG(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Fx(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=i;if(o==="components"||o==="slots")r[o]={...t[o],...r[o]};else if(o==="componentsProps"||o==="slotProps"){const c=t[o],u=e[o];if(!u)r[o]=c||{};else if(!c)r[o]=u;else{r[o]={...u};for(const d in c)if(Object.prototype.hasOwnProperty.call(c,d)){const f=d;r[o][f]=Fx(c[f],u[f],n)}}}else o==="className"&&n&&e.className?r.className=Ks(t==null?void 0:t.className,e==null?void 0:e.className):o==="style"&&n&&e.style?r.style={...t==null?void 0:t.style,...e==null?void 0:e.style}:r[o]===void 0&&(r[o]=t[o])}return r}const hG=E.createContext(void 0);function fG(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Fx(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?Fx(i,r,e.components.mergeClassNameAndStyle):r}function mG({props:t,name:e}){const n=E.useContext(hG);return fG({props:t,name:e,theme:{components:n}})}const jN={theme:void 0};function pG(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(jN.theme=i.theme,o=IA(t(jN)),e=o,n=i.theme),o}}function gG(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const AN=(t,e,n,r=[])=>{let i=t;e.forEach((o,c)=>{c===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},yG=(t,e,n)=>{function r(i,o=[],c=[]){Object.entries(i).forEach(([u,d])=>{(!n||n&&!n([...o,u]))&&d!=null&&(typeof d=="object"&&Object.keys(d).length>0?r(d,[...o,u],Array.isArray(d)?[...c,u]:c):e([...o,u],d,c))})}r(t)},xG=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function vy(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},c={};return yG(t,(u,d,f)=>{if((typeof d=="string"||typeof d=="number")&&(!r||!r(u,d))){const g=`--${n?`${n}-`:""}${u.join("-")}`,y=xG(u,d);Object.assign(i,{[g]:y}),AN(o,u,`var(${g})`,f),AN(c,u,`var(${g}, ${y})`,f)}},u=>u[0]==="vars"),{css:i,vars:o,varsWithDefaults:c}}function vG(t,e={}){const{getSelector:n=T,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:o={},components:c,defaultColorScheme:u="light",...d}=t,{vars:f,css:g,varsWithDefaults:y}=vy(d,e);let x=y;const w={},{[u]:N,...b}=o;if(Object.entries(b||{}).forEach(([A,L])=>{const{vars:z,css:q,varsWithDefaults:D}=vy(L,e);x=Di(x,D),w[A]={css:q,vars:z}}),N){const{css:A,vars:L,varsWithDefaults:z}=vy(N,e);x=Di(x,z),w[u]={css:A,vars:L}}function T(A,L){var q,D;let z=i;if(i==="class"&&(z=".%s"),i==="data"&&(z="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(z=`[${i}="%s"]`),A){if(z==="media")return t.defaultColorScheme===A?":root":{[`@media (prefers-color-scheme: ${((D=(q=o[A])==null?void 0:q.palette)==null?void 0:D.mode)||A})`]:{":root":L}};if(z)return t.defaultColorScheme===A?`:root, ${z.replace("%s",String(A))}`:z.replace("%s",String(A))}return":root"}return{vars:x,generateThemeVars:()=>{let A={...f};return Object.entries(w).forEach(([,{vars:L}])=>{A=Di(A,L)}),A},generateStyleSheets:()=>{var M,P;const A=[],L=t.defaultColorScheme||"light";function z(S,F){Object.keys(F).length&&A.push(typeof S=="string"?{[S]:{...F}}:S)}z(n(void 0,{...g}),g);const{[L]:q,...D}=w;if(q){const{css:S}=q,F=(P=(M=o[L])==null?void 0:M.palette)==null?void 0:P.mode,$=!r&&F?{colorScheme:F,...S}:{...S};z(n(L,{...$}),$)}return Object.entries(D).forEach(([S,{css:F}])=>{var re,ne;const $=(ne=(re=o[S])==null?void 0:re.palette)==null?void 0:ne.mode,I=!r&&$?{colorScheme:$,...F}:{...F};z(n(S,{...I}),I)}),A}}}function bG(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const Xd={black:"#000",white:"#fff"},wG={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},wc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},_c={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Qu={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},kc={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ec={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Nc={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function RA(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Xd.white,default:Xd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const _G=RA();function DA(){return{text:{primary:Xd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Xd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const IN=DA();function PN(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Wd(t.main,i):e==="dark"&&(t.dark=Hd(t.main,o)))}function kG(t="light"){return t==="dark"?{main:kc[200],light:kc[50],dark:kc[400]}:{main:kc[700],light:kc[400],dark:kc[800]}}function EG(t="light"){return t==="dark"?{main:wc[200],light:wc[50],dark:wc[400]}:{main:wc[500],light:wc[300],dark:wc[700]}}function NG(t="light"){return t==="dark"?{main:_c[500],light:_c[300],dark:_c[700]}:{main:_c[700],light:_c[400],dark:_c[800]}}function SG(t="light"){return t==="dark"?{main:Ec[400],light:Ec[300],dark:Ec[700]}:{main:Ec[700],light:Ec[500],dark:Ec[900]}}function TG(t="light"){return t==="dark"?{main:Nc[400],light:Nc[300],dark:Nc[700]}:{main:Nc[800],light:Nc[500],dark:Nc[900]}}function CG(t="light"){return t==="dark"?{main:Qu[400],light:Qu[300],dark:Qu[700]}:{main:"#ed6c02",light:Qu[500],dark:Qu[900]}}function J1(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,o=t.primary||kG(e),c=t.secondary||EG(e),u=t.error||NG(e),d=t.info||SG(e),f=t.success||TG(e),g=t.warning||CG(e);function y(b){return $H(b,IN.text.primary)>=n?IN.text.primary:_G.text.primary}const x=({color:b,name:T,mainShade:j=500,lightShade:R=300,darkShade:A=700})=>{if(b={...b},!b.main&&b[j]&&(b.main=b[j]),!b.hasOwnProperty("main"))throw new Error(jl(11,T?` (${T})`:"",j));if(typeof b.main!="string")throw new Error(jl(12,T?` (${T})`:"",JSON.stringify(b.main)));return PN(b,"light",R,r),PN(b,"dark",A,r),b.contrastText||(b.contrastText=y(b.main)),b};let w;return e==="light"?w=RA():e==="dark"&&(w=DA()),Di({common:{...Xd},mode:e,primary:x({color:o,name:"primary"}),secondary:x({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:u,name:"error"}),warning:x({color:g,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:f,name:"success"}),grey:wG,contrastThreshold:n,getContrastText:y,augmentColor:x,tonalOffset:r,...w},i)}function jG(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function AG(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function IG(t){return Math.round(t*1e5)/1e5}const RN={textTransform:"uppercase"},DN='"Roboto", "Helvetica", "Arial", sans-serif';function PG(t,e){const{fontFamily:n=DN,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:d=16,allVariants:f,pxToRem:g,...y}=typeof e=="function"?e(t):e,x=r/14,w=g||(T=>`${T/d*x}rem`),N=(T,j,R,A,L)=>({fontFamily:n,fontWeight:T,fontSize:w(j),lineHeight:R,...n===DN?{letterSpacing:`${IG(A/j)}em`}:{},...L,...f}),b={h1:N(i,96,1.167,-1.5),h2:N(i,60,1.2,-.5),h3:N(o,48,1.167,0),h4:N(o,34,1.235,.25),h5:N(o,24,1.334,0),h6:N(c,20,1.6,.15),subtitle1:N(o,16,1.75,.15),subtitle2:N(c,14,1.57,.1),body1:N(o,16,1.5,.15),body2:N(o,14,1.43,.15),button:N(c,14,1.75,.4,RN),caption:N(o,12,1.66,.4),overline:N(o,12,2.66,1,RN),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Di({htmlFontSize:d,pxToRem:w,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:c,fontWeightBold:u,...b},y,{clone:!1})}const RG=.2,DG=.14,MG=.12;function En(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${RG})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${DG})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${MG})`].join(",")}const OG=["none",En(0,2,1,-1,0,1,1,0,0,1,3,0),En(0,3,1,-2,0,2,2,0,0,1,5,0),En(0,3,3,-2,0,3,4,0,0,1,8,0),En(0,2,4,-1,0,4,5,0,0,1,10,0),En(0,3,5,-1,0,5,8,0,0,1,14,0),En(0,3,5,-1,0,6,10,0,0,1,18,0),En(0,4,5,-2,0,7,10,1,0,2,16,1),En(0,5,5,-3,0,8,10,1,0,3,14,2),En(0,5,6,-3,0,9,12,1,0,3,16,2),En(0,6,6,-3,0,10,14,1,0,4,18,3),En(0,6,7,-4,0,11,15,1,0,4,20,3),En(0,7,8,-4,0,12,17,2,0,5,22,4),En(0,7,8,-4,0,13,19,2,0,5,24,4),En(0,7,9,-4,0,14,21,2,0,5,26,4),En(0,8,9,-5,0,15,22,2,0,6,28,5),En(0,8,10,-5,0,16,24,2,0,6,30,5),En(0,8,11,-5,0,17,26,2,0,6,32,5),En(0,9,11,-5,0,18,28,2,0,7,34,6),En(0,9,12,-6,0,19,29,2,0,7,36,6),En(0,10,13,-6,0,20,31,3,0,8,38,7),En(0,10,13,-6,0,21,33,3,0,8,40,7),En(0,10,14,-6,0,22,35,3,0,8,42,7),En(0,11,14,-7,0,23,36,3,0,9,44,8),En(0,11,15,-7,0,24,38,3,0,9,46,8)],LG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},VG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function MN(t){return`${Math.round(t)}ms`}function FG(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function UG(t){const e={...LG,...t.easing},n={...VG,...t.duration};return{getAutoHeightDuration:FG,create:(i=["all"],o={})=>{const{duration:c=n.standard,easing:u=e.easeInOut,delay:d=0,...f}=o;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof c=="string"?c:MN(c)} ${u} ${typeof d=="string"?d:MN(d)}`).join(",")},...t,easing:e,duration:n}}const $G={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function zG(t){return Ls(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function MA(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[c,u]=i[o];!zG(u)||c.startsWith("unstable_")?delete r[c]:Ls(u)&&(r[c]={...u},n(r[c]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Ux(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:c={},typography:u={},shape:d,...f}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(jl(20));const g=J1(o),y=X1(t);let x=Di(y,{mixins:AG(y.breakpoints,r),palette:g,shadows:OG.slice(),typography:PG(g,u),transitions:UG(c),zIndex:{...$G}});return x=Di(x,f),x=e.reduce((w,N)=>Di(w,N),x),x.unstable_sxConfig={...bh,...f==null?void 0:f.unstable_sxConfig},x.unstable_sx=function(N){return Al({sx:N,theme:this})},x.toRuntimeSource=MA,x}function BG(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const HG=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=BG(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function OA(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function LA(t){return t==="dark"?HG:[]}function WG(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,o=J1(e);return{palette:o,opacity:{...OA(o.mode),...n},overlays:r||LA(o.mode),...i}}function qG(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const GG=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],KG=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const c={};return GG(t.cssVarPrefix).forEach(u=>{c[u]=n[u],delete n[u]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:c}}:o?{[o.replace("%s",e)]:c,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...c}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function XG(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function ye(t,e,n){!t[e]&&n&&(t[e]=n)}function od(t){return typeof t!="string"||!t.startsWith("hsl")?t:oA(t)}function pa(t,e){`${e}Channel`in t||(t[`${e}Channel`]=ad(od(t[e])))}function YG(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Rs=t=>{try{return t()}catch{}},QG=(t="mui")=>gG(t);function by(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=WG({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:o,...c}=Ux({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...OA(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||LA(i)},c}function JG(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:c=qG,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:d=":root",...f}=t,g=Object.keys(n)[0],y=r||(n.light&&g!=="light"?"light":g),x=QG(o),{[y]:w,light:N,dark:b,...T}=n,j={...T};let R=w;if((y==="dark"&&!("dark"in n)||y==="light"&&!("light"in n))&&(R=!0),!R)throw new Error(jl(21,y));const A=by(j,R,f,y);N&&!j.light&&by(j,N,void 0,"light"),b&&!j.dark&&by(j,b,void 0,"dark");let L={defaultColorScheme:y,...A,cssVarPrefix:o,colorSchemeSelector:u,rootSelector:d,getCssVar:x,colorSchemes:j,font:{...jG(A.typography),...A.font},spacing:YG(f.spacing)};Object.keys(L.colorSchemes).forEach(P=>{const S=L.colorSchemes[P].palette,F=$=>{const I=$.split("-"),re=I[1],ne=I[2];return x($,S[re][ne])};if(S.mode==="light"&&(ye(S.common,"background","#fff"),ye(S.common,"onBackground","#000")),S.mode==="dark"&&(ye(S.common,"background","#000"),ye(S.common,"onBackground","#fff")),XG(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){ye(S.Alert,"errorColor",cn(S.error.light,.6)),ye(S.Alert,"infoColor",cn(S.info.light,.6)),ye(S.Alert,"successColor",cn(S.success.light,.6)),ye(S.Alert,"warningColor",cn(S.warning.light,.6)),ye(S.Alert,"errorFilledBg",F("palette-error-main")),ye(S.Alert,"infoFilledBg",F("palette-info-main")),ye(S.Alert,"successFilledBg",F("palette-success-main")),ye(S.Alert,"warningFilledBg",F("palette-warning-main")),ye(S.Alert,"errorFilledColor",Rs(()=>S.getContrastText(S.error.main))),ye(S.Alert,"infoFilledColor",Rs(()=>S.getContrastText(S.info.main))),ye(S.Alert,"successFilledColor",Rs(()=>S.getContrastText(S.success.main))),ye(S.Alert,"warningFilledColor",Rs(()=>S.getContrastText(S.warning.main))),ye(S.Alert,"errorStandardBg",un(S.error.light,.9)),ye(S.Alert,"infoStandardBg",un(S.info.light,.9)),ye(S.Alert,"successStandardBg",un(S.success.light,.9)),ye(S.Alert,"warningStandardBg",un(S.warning.light,.9)),ye(S.Alert,"errorIconColor",F("palette-error-main")),ye(S.Alert,"infoIconColor",F("palette-info-main")),ye(S.Alert,"successIconColor",F("palette-success-main")),ye(S.Alert,"warningIconColor",F("palette-warning-main")),ye(S.AppBar,"defaultBg",F("palette-grey-100")),ye(S.Avatar,"defaultBg",F("palette-grey-400")),ye(S.Button,"inheritContainedBg",F("palette-grey-300")),ye(S.Button,"inheritContainedHoverBg",F("palette-grey-A100")),ye(S.Chip,"defaultBorder",F("palette-grey-400")),ye(S.Chip,"defaultAvatarColor",F("palette-grey-700")),ye(S.Chip,"defaultIconColor",F("palette-grey-700")),ye(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ye(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ye(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ye(S.LinearProgress,"primaryBg",un(S.primary.main,.62)),ye(S.LinearProgress,"secondaryBg",un(S.secondary.main,.62)),ye(S.LinearProgress,"errorBg",un(S.error.main,.62)),ye(S.LinearProgress,"infoBg",un(S.info.main,.62)),ye(S.LinearProgress,"successBg",un(S.success.main,.62)),ye(S.LinearProgress,"warningBg",un(S.warning.main,.62)),ye(S.Skeleton,"bg",`rgba(${F("palette-text-primaryChannel")} / 0.11)`),ye(S.Slider,"primaryTrack",un(S.primary.main,.62)),ye(S.Slider,"secondaryTrack",un(S.secondary.main,.62)),ye(S.Slider,"errorTrack",un(S.error.main,.62)),ye(S.Slider,"infoTrack",un(S.info.main,.62)),ye(S.Slider,"successTrack",un(S.success.main,.62)),ye(S.Slider,"warningTrack",un(S.warning.main,.62));const $=zf(S.background.default,.8);ye(S.SnackbarContent,"bg",$),ye(S.SnackbarContent,"color",Rs(()=>S.getContrastText($))),ye(S.SpeedDialAction,"fabHoverBg",zf(S.background.paper,.15)),ye(S.StepConnector,"border",F("palette-grey-400")),ye(S.StepContent,"border",F("palette-grey-400")),ye(S.Switch,"defaultColor",F("palette-common-white")),ye(S.Switch,"defaultDisabledColor",F("palette-grey-100")),ye(S.Switch,"primaryDisabledColor",un(S.primary.main,.62)),ye(S.Switch,"secondaryDisabledColor",un(S.secondary.main,.62)),ye(S.Switch,"errorDisabledColor",un(S.error.main,.62)),ye(S.Switch,"infoDisabledColor",un(S.info.main,.62)),ye(S.Switch,"successDisabledColor",un(S.success.main,.62)),ye(S.Switch,"warningDisabledColor",un(S.warning.main,.62)),ye(S.TableCell,"border",un($f(S.divider,1),.88)),ye(S.Tooltip,"bg",$f(S.grey[700],.92))}if(S.mode==="dark"){ye(S.Alert,"errorColor",un(S.error.light,.6)),ye(S.Alert,"infoColor",un(S.info.light,.6)),ye(S.Alert,"successColor",un(S.success.light,.6)),ye(S.Alert,"warningColor",un(S.warning.light,.6)),ye(S.Alert,"errorFilledBg",F("palette-error-dark")),ye(S.Alert,"infoFilledBg",F("palette-info-dark")),ye(S.Alert,"successFilledBg",F("palette-success-dark")),ye(S.Alert,"warningFilledBg",F("palette-warning-dark")),ye(S.Alert,"errorFilledColor",Rs(()=>S.getContrastText(S.error.dark))),ye(S.Alert,"infoFilledColor",Rs(()=>S.getContrastText(S.info.dark))),ye(S.Alert,"successFilledColor",Rs(()=>S.getContrastText(S.success.dark))),ye(S.Alert,"warningFilledColor",Rs(()=>S.getContrastText(S.warning.dark))),ye(S.Alert,"errorStandardBg",cn(S.error.light,.9)),ye(S.Alert,"infoStandardBg",cn(S.info.light,.9)),ye(S.Alert,"successStandardBg",cn(S.success.light,.9)),ye(S.Alert,"warningStandardBg",cn(S.warning.light,.9)),ye(S.Alert,"errorIconColor",F("palette-error-main")),ye(S.Alert,"infoIconColor",F("palette-info-main")),ye(S.Alert,"successIconColor",F("palette-success-main")),ye(S.Alert,"warningIconColor",F("palette-warning-main")),ye(S.AppBar,"defaultBg",F("palette-grey-900")),ye(S.AppBar,"darkBg",F("palette-background-paper")),ye(S.AppBar,"darkColor",F("palette-text-primary")),ye(S.Avatar,"defaultBg",F("palette-grey-600")),ye(S.Button,"inheritContainedBg",F("palette-grey-800")),ye(S.Button,"inheritContainedHoverBg",F("palette-grey-700")),ye(S.Chip,"defaultBorder",F("palette-grey-700")),ye(S.Chip,"defaultAvatarColor",F("palette-grey-300")),ye(S.Chip,"defaultIconColor",F("palette-grey-300")),ye(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ye(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ye(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ye(S.LinearProgress,"primaryBg",cn(S.primary.main,.5)),ye(S.LinearProgress,"secondaryBg",cn(S.secondary.main,.5)),ye(S.LinearProgress,"errorBg",cn(S.error.main,.5)),ye(S.LinearProgress,"infoBg",cn(S.info.main,.5)),ye(S.LinearProgress,"successBg",cn(S.success.main,.5)),ye(S.LinearProgress,"warningBg",cn(S.warning.main,.5)),ye(S.Skeleton,"bg",`rgba(${F("palette-text-primaryChannel")} / 0.13)`),ye(S.Slider,"primaryTrack",cn(S.primary.main,.5)),ye(S.Slider,"secondaryTrack",cn(S.secondary.main,.5)),ye(S.Slider,"errorTrack",cn(S.error.main,.5)),ye(S.Slider,"infoTrack",cn(S.info.main,.5)),ye(S.Slider,"successTrack",cn(S.success.main,.5)),ye(S.Slider,"warningTrack",cn(S.warning.main,.5));const $=zf(S.background.default,.98);ye(S.SnackbarContent,"bg",$),ye(S.SnackbarContent,"color",Rs(()=>S.getContrastText($))),ye(S.SpeedDialAction,"fabHoverBg",zf(S.background.paper,.15)),ye(S.StepConnector,"border",F("palette-grey-600")),ye(S.StepContent,"border",F("palette-grey-600")),ye(S.Switch,"defaultColor",F("palette-grey-300")),ye(S.Switch,"defaultDisabledColor",F("palette-grey-600")),ye(S.Switch,"primaryDisabledColor",cn(S.primary.main,.55)),ye(S.Switch,"secondaryDisabledColor",cn(S.secondary.main,.55)),ye(S.Switch,"errorDisabledColor",cn(S.error.main,.55)),ye(S.Switch,"infoDisabledColor",cn(S.info.main,.55)),ye(S.Switch,"successDisabledColor",cn(S.success.main,.55)),ye(S.Switch,"warningDisabledColor",cn(S.warning.main,.55)),ye(S.TableCell,"border",cn($f(S.divider,1),.68)),ye(S.Tooltip,"bg",$f(S.grey[700],.92))}pa(S.background,"default"),pa(S.background,"paper"),pa(S.common,"background"),pa(S.common,"onBackground"),pa(S,"divider"),Object.keys(S).forEach($=>{const I=S[$];$!=="tonalOffset"&&I&&typeof I=="object"&&(I.main&&ye(S[$],"mainChannel",ad(od(I.main))),I.light&&ye(S[$],"lightChannel",ad(od(I.light))),I.dark&&ye(S[$],"darkChannel",ad(od(I.dark))),I.contrastText&&ye(S[$],"contrastTextChannel",ad(od(I.contrastText))),$==="text"&&(pa(S[$],"primary"),pa(S[$],"secondary")),$==="action"&&(I.active&&pa(S[$],"active"),I.selected&&pa(S[$],"selected")))})}),L=e.reduce((P,S)=>Di(P,S),L);const z={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:c,getSelector:KG(L)},{vars:q,generateThemeVars:D,generateStyleSheets:M}=vG(L,z);return L.vars=q,Object.entries(L.colorSchemes[L.defaultColorScheme]).forEach(([P,S])=>{L[P]=S}),L.generateThemeVars=D,L.generateStyleSheets=M,L.generateSpacing=function(){return jA(f.spacing,H1(this))},L.getColorSchemeSelector=bG(u),L.spacing=L.generateSpacing(),L.shouldSkipGeneratingVar=c,L.unstable_sxConfig={...bh,...f==null?void 0:f.unstable_sxConfig},L.unstable_sx=function(S){return Al({sx:S,theme:this})},L.toRuntimeSource=MA,L}function ON(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:J1({...n===!0?{}:n.palette,mode:e})})}function VA(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...c}=t,u=o||"light",d=i==null?void 0:i[u],f={...i,...n?{[u]:{...typeof d!="boolean"&&d,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return Ux(t,...e);let g=n;"palette"in t||f[u]&&(f[u]!==!0?g=f[u].palette:u==="dark"&&(g={mode:"dark"}));const y=Ux({...t,palette:g},...e);return y.defaultColorScheme=u,y.colorSchemes=f,y.palette.mode==="light"&&(y.colorSchemes.light={...f.light!==!0&&f.light,palette:y.palette},ON(y,"dark",f.dark)),y.palette.mode==="dark"&&(y.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:y.palette},ON(y,"light",f.light)),y}return!n&&!("light"in f)&&u==="light"&&(f.light=!0),JG({...c,colorSchemes:f,defaultColorScheme:u,...typeof r!="boolean"&&r},...e)}const ZG=VA(),FA="$$material";function Z1(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const eK=t=>Z1(t)&&t!=="classes",Vo=oG({themeId:FA,defaultTheme:ZG,rootShouldForwardProp:eK});function tK(){return mA}const Ll=pG;function UA(t){return mG(t)}const nK=t=>!t||!hm(t);function rK(t){return typeof t.main=="string"}function iK(t,e=[]){if(!rK(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function rg(t=[]){return([,e])=>e&&iK(e,t)}function sK(t){return Y1("MuiSlider",t)}const Ki=Q1("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),aK=t=>{const{open:e}=t;return{offset:Ks(e&&Ki.valueLabelOpen),circle:Ki.valueLabelCircle,label:Ki.valueLabelLabel}};function oK(t){const{children:e,className:n,value:r}=t,i=aK(t);return e?E.cloneElement(e,{className:e.props.className},a.jsxs(E.Fragment,{children:[e.props.children,a.jsx("span",{className:Ks(i.offset,n),"aria-hidden":!0,children:a.jsx("span",{className:i.circle,children:a.jsx("span",{className:i.label,children:r})})})]})):null}function LN(t){return t}const lK=Vo("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Ri(n.color)}`],n.size!=="medium"&&e[`size${Ri(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(Ll(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Ki.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ki.dragging}`]:{[`& .${Ki.thumb}, & .${Ki.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(rg()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),cK=Vo("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),uK=Vo("span",{name:"MuiSlider",slot:"Track"})(Ll(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(rg()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:Wd(t.palette[e].main,.62),borderColor:Wd(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:Hd(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:Hd(t.palette[e].main,.5)})}}}))]}))),dK=Vo("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Ri(n.color)}`],n.size!=="medium"&&e[`thumbSize${Ri(n.size)}`]]}})(Ll(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Ki.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(rg()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Ki.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Dx(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Ki.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Dx(t.palette[e].main,.16)}`}}}}))]}))),hK=Vo(oK,{name:"MuiSlider",slot:"ValueLabel"})(Ll(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Ki.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Ki.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),fK=Vo("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>Z1(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(Ll(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),mK=Vo("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>Z1(t)&&t!=="markLabelActive"})(Ll(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),pK=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:o,classes:c,color:u,size:d}=t,f={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",u&&`color${Ri(u)}`,d&&`size${Ri(d)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",d&&`thumbSize${Ri(d)}`,u&&`thumbColor${Ri(u)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return aA(f,sK,c)},gK=({children:t})=>t,$A=E.forwardRef(function(e,n){const r=UA({props:e,name:"MuiSlider"}),i=HH(),{"aria-label":o,"aria-valuetext":c,"aria-labelledby":u,component:d="span",components:f={},componentsProps:g={},color:y="primary",classes:x,className:w,disableSwap:N=!1,disabled:b=!1,getAriaLabel:T,getAriaValueText:j,marks:R=!1,max:A=100,min:L=0,name:z,onChange:q,onChangeCommitted:D,orientation:M="horizontal",shiftStep:P=10,size:S="medium",step:F=1,scale:$=LN,slotProps:I,slots:re,tabIndex:ne,track:we="normal",value:Ee,valueLabelDisplay:ee="off",valueLabelFormat:ae=LN,...ge}=r,H={...r,isRtl:i,max:A,min:L,classes:x,disabled:b,disableSwap:N,orientation:M,marks:R,color:y,size:S,step:F,shiftStep:P,scale:$,track:we,valueLabelDisplay:ee,valueLabelFormat:ae},{axisProps:J,getRootProps:_e,getHiddenInputProps:Ue,getThumbProps:Ge,open:tt,active:lt,axis:Je,focusedThumbIndex:Ze,range:Nt,dragging:bt,marks:pt,values:yt,trackOffset:Dt,trackLeap:It,getThumbStyle:Sn}=iW({...H,rootRef:n});H.marked=pt.length>0&&pt.some(Ot=>Ot.label),H.dragging=bt,H.focusedThumbIndex=Ze;const Z=pK(H),je=(re==null?void 0:re.root)??f.Root??lK,Oe=(re==null?void 0:re.rail)??f.Rail??cK,rt=(re==null?void 0:re.track)??f.Track??uK,St=(re==null?void 0:re.thumb)??f.Thumb??dK,He=(re==null?void 0:re.valueLabel)??f.ValueLabel??hK,dt=(re==null?void 0:re.mark)??f.Mark??fK,G=(re==null?void 0:re.markLabel)??f.MarkLabel??mK,X=(re==null?void 0:re.input)??f.Input??"input",me=(I==null?void 0:I.root)??g.root,Te=(I==null?void 0:I.rail)??g.rail,te=(I==null?void 0:I.track)??g.track,be=(I==null?void 0:I.thumb)??g.thumb,Se=(I==null?void 0:I.valueLabel)??g.valueLabel,gt=(I==null?void 0:I.mark)??g.mark,jt=(I==null?void 0:I.markLabel)??g.markLabel,ct=(I==null?void 0:I.input)??g.input,Vt=io({elementType:je,getSlotProps:_e,externalSlotProps:me,externalForwardedProps:ge,additionalProps:{...nK(je)&&{as:d}},ownerState:{...H,...me==null?void 0:me.ownerState},className:[Z.root,w]}),bn=io({elementType:Oe,externalSlotProps:Te,ownerState:H,className:Z.rail}),vr=io({elementType:rt,externalSlotProps:te,additionalProps:{style:{...J[Je].offset(Dt),...J[Je].leap(It)}},ownerState:{...H,...te==null?void 0:te.ownerState},className:Z.track}),Wn=io({elementType:St,getSlotProps:Ge,externalSlotProps:be,ownerState:{...H,...be==null?void 0:be.ownerState},className:Z.thumb}),or=io({elementType:He,externalSlotProps:Se,ownerState:{...H,...Se==null?void 0:Se.ownerState},className:Z.valueLabel}),On=io({elementType:dt,externalSlotProps:gt,ownerState:H,className:Z.mark}),Dr=io({elementType:G,externalSlotProps:jt,ownerState:H,className:Z.markLabel}),qn=io({elementType:X,getSlotProps:Ue,externalSlotProps:ct,ownerState:H});return a.jsxs(je,{...Vt,children:[a.jsx(Oe,{...bn}),a.jsx(rt,{...vr}),pt.filter(Ot=>Ot.value>=L&&Ot.value<=A).map((Ot,Jt)=>{const Jn=ip(Ot.value,L,A),Mr=J[Je].offset(Jn);let V;return we===!1?V=yt.includes(Ot.value):V=we==="normal"&&(Nt?Ot.value>=yt[0]&&Ot.value<=yt[yt.length-1]:Ot.value<=yt[0])||we==="inverted"&&(Nt?Ot.value<=yt[0]||Ot.value>=yt[yt.length-1]:Ot.value>=yt[0]),a.jsxs(E.Fragment,{children:[a.jsx(dt,{"data-index":Jt,...On,...!hm(dt)&&{markActive:V},style:{...Mr,...On.style},className:Ks(On.className,V&&Z.markActive)}),Ot.label!=null?a.jsx(G,{"aria-hidden":!0,"data-index":Jt,...Dr,...!hm(G)&&{markLabelActive:V},style:{...Mr,...Dr.style},className:Ks(Z.markLabel,Dr.className,V&&Z.markLabelActive),children:Ot.label}):null]},Jt)}),yt.map((Ot,Jt)=>{const Jn=ip(Ot,L,A),Mr=J[Je].offset(Jn),V=ee==="off"?gK:He;return a.jsx(V,{...!hm(V)&&{valueLabelFormat:ae,valueLabelDisplay:ee,value:typeof ae=="function"?ae($(Ot),Jt):ae,index:Jt,open:tt===Jt||lt===Jt||ee==="on",disabled:b},...or,children:a.jsx(St,{"data-index":Jt,...Wn,className:Ks(Z.thumb,Wn.className,lt===Jt&&Z.active,Ze===Jt&&Z.focusVisible),style:{...Mr,...Sn(Jt),...Wn.style},children:a.jsx(X,{"data-index":Jt,"aria-label":T?T(Jt):o,"aria-valuenow":$(Ot),"aria-labelledby":u,"aria-valuetext":j?j($(Ot),Jt):c,value:yt[Jt],...qn})})},Jt)})]})});function yK(t){return Y1("MuiTypography",t)}Q1("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const xK={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},vK=tK(),bK=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:c}=t,u={root:["root",o,t.align!=="inherit"&&`align${Ri(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return aA(u,yK,c)},wK=Vo("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Ri(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Ll(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(rg()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Ri(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),VN={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},zA=E.forwardRef(function(e,n){const{color:r,...i}=UA({props:e,name:"MuiTypography"}),o=!xK[r],c=vK({...i,...o&&{color:r}}),{align:u="inherit",className:d,component:f,gutterBottom:g=!1,noWrap:y=!1,paragraph:x=!1,variant:w="body1",variantMapping:N=VN,...b}=c,T={...c,align:u,color:r,className:d,component:f,gutterBottom:g,noWrap:y,paragraph:x,variant:w,variantMapping:N},j=f||(x?"p":N[w]||VN[w])||"span",R=bK(T);return a.jsx(wK,{as:j,ref:n,className:Ks(R.root,d),...b,ownerState:T,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...b.style}})}),_K=Q1("MuiBox",["root"]),kK=VA(),BA=nG({themeId:FA,defaultTheme:kK,defaultClassName:_K.root,generateClassName:AA.generate}),EK={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.3)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 6px rgba(60, 80, 120, 0.5)"}},NK={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.6)","0 0 10px rgba(80, 100, 140, 0.9)","0 0 4px rgba(80, 100, 140, 0.6)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function HA({filtros:t,setFiltros:e,productosOriginales:n}){var u,d,f,g,y;const[r,i]=E.useState([]);E.useEffect(()=>{let x=n;(t.estado.nuevo||t.estado.usado)&&(x=x.filter(b=>t.estado.nuevo&&t.estado.usado?!0:t.estado.nuevo?b.estado==="Nuevo":t.estado.usado?b.estado==="Usado":!0));const w=t.precio.min!==""?Number(t.precio.min):0,N=t.precio.max!==""?Number(t.precio.max):1/0;x=x.filter(b=>b.precio>=w&&b.precio<=N),i(x)},[t,n]);const o=(x,w)=>{e(N=>({...N,precio:{min:w[0],max:w[1]}}))},c=()=>{e({estado:{nuevo:!1,usado:!1},precio:{min:0,max:1e6}})};return a.jsxs("aside",{className:"hidden xl:block w-56 max-w-[240px] relative z-40",style:{height:"100vh",paddingTop:0,overflow:"hidden",backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Filtros",children:[a.jsx(iA,{}),a.jsxs("div",{style:{position:"relative",zIndex:1,height:"100%",overflowY:"auto",padding:"1rem",backgroundColor:"transparent",border:"none",boxShadow:"none"},children:[a.jsx(de.h2,{className:"text-lg font-semibold mb-4 text-blue-800 dark:text-blue-400",variants:NK,animate:"animate",children:"Filtros"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-medium mb-2 text-gray-800 dark:text-gray-200",children:"Estado"}),a.jsxs("label",{className:"switch-container",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(u=t.estado)==null?void 0:u.nuevo,onChange:()=>e(x=>{var w;return{...x,estado:{...x.estado,nuevo:!((w=x.estado)!=null&&w.nuevo)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2",children:"Nuevo"})]}),a.jsxs("label",{className:"switch-container mt-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(d=t.estado)==null?void 0:d.usado,onChange:()=>e(x=>{var w;return{...x,estado:{...x.estado,usado:!((w=x.estado)!=null&&w.usado)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2",children:"Usado"})]}),a.jsxs("label",{className:"switch-container mt-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(f=t.estado)==null?void 0:f.usadoComoNuevo,onChange:()=>e(x=>{var w;return{...x,estado:{...x.estado,usadoComoNuevo:!((w=x.estado)!=null&&w.usadoComoNuevo)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2",children:"Usado como nuevo"})]}),a.jsxs("label",{className:"switch-container mt-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(g=t.estado)==null?void 0:g.reacondicionado,onChange:()=>e(x=>{var w;return{...x,estado:{...x.estado,reacondicionado:!((w=x.estado)!=null&&w.reacondicionado)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2",children:"Reacondicionado"})]}),a.jsxs("label",{className:"switch-container mt-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(y=t.estado)==null?void 0:y.reparado,onChange:()=>e(x=>{var w;return{...x,estado:{...x.estado,reparado:!((w=x.estado)!=null&&w.reparado)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2",children:"Reparado"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx(zA,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),a.jsx(BA,{sx:{px:1,"& .MuiSlider-thumb":{width:14,height:14,bgcolor:"#1976d2",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 8px rgba(25, 118, 210, 0.16)"}},"& .MuiSlider-rail":{height:6,opacity:.5,bgcolor:"#bfbfbf",borderRadius:3},"& .MuiSlider-track":{height:6,borderRadius:3},"& .MuiSlider-root":{padding:"15px 0"}},children:a.jsx($A,{value:[typeof t.precio.min=="number"?t.precio.min:0,typeof t.precio.max=="number"?t.precio.max:1e6],onChange:o,valueLabelDisplay:"auto",min:0,max:1e6})}),a.jsxs("div",{className:"flex justify-between text-sm mt-2 text-gray-700 dark:text-gray-300",children:[a.jsxs("span",{children:["RD$",t.precio.min.toLocaleString("es-DO")]}),a.jsxs("span",{children:["RD$",t.precio.max.toLocaleString("es-DO")]})]})]}),a.jsx(de.button,{onClick:c,variants:EK,initial:"initial",whileHover:"hover",whileTap:"tap",className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white text-sm px-3 py-2 rounded w-full",children:"Restablecer filtros"}),a.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:r.length===0?"No hay productos que coincidan con los filtros.":`Mostrando ${r.length} producto${r.length>1?"s":""}`})]})]})}function WA({filtros:t,setFiltros:e,onReset:n,visible:r,onClose:i}){var y,x,w,N,b,T,j;const[o,c]=E.useState(t);E.useEffect(()=>{var A,L;const R={...t,precio:{min:((A=t.precio)==null?void 0:A.min)??0,max:((L=t.precio)==null?void 0:L.max)??1e6}};c(R)},[t,r]);const u=(R,A)=>{c(L=>({...L,precio:{min:A[0],max:A[1]}}))},d=Number.isFinite((y=o.precio)==null?void 0:y.min)?o.precio.min:0,f=Number.isFinite((x=o.precio)==null?void 0:x.max)?o.precio.max:1e6,g=[d,f];return a.jsxs("div",{className:`fixed top-0 right-0 h-full w-72 bg-white dark:bg-slate-900 border-l border-gray-300 dark:border-gray-700 shadow-lg z-[9999] transform transition-transform duration-300 ${r?"translate-x-0":"translate-x-full"}`,children:[a.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:"Filtros"}),a.jsx("button",{onClick:i,className:"text-blue-600 dark:text-blue-400 font-extrabold text-xl hover:text-blue-800 dark:hover:text-blue-300 transition-colors","aria-label":"Cerrar filtro",children:""})]}),a.jsxs("div",{className:"p-4 pt-6 flex flex-col gap-6 overflow-y-auto text-gray-900 dark:text-gray-100",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-3 text-blue-700 dark:text-blue-300",children:"Estado"}),a.jsxs("label",{className:"switch-container mb-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(w=o.estado)==null?void 0:w.nuevo,onChange:()=>c(R=>{var A;return{...R,estado:{...R.estado,nuevo:!((A=R.estado)!=null&&A.nuevo)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Nuevo"})]}),a.jsxs("label",{className:"switch-container mb-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(N=o.estado)==null?void 0:N.usado,onChange:()=>c(R=>{var A;return{...R,estado:{...R.estado,usado:!((A=R.estado)!=null&&A.usado)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Usado"})]}),a.jsxs("label",{className:"switch-container mb-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(b=o.estado)==null?void 0:b.usadoComoNuevo,onChange:()=>c(R=>{var A;return{...R,estado:{...R.estado,usadoComoNuevo:!((A=R.estado)!=null&&A.usadoComoNuevo)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Usado como nuevo"})]}),a.jsxs("label",{className:"switch-container mb-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(T=o.estado)==null?void 0:T.reacondicionado,onChange:()=>c(R=>{var A;return{...R,estado:{...R.estado,reacondicionado:!((A=R.estado)!=null&&A.reacondicionado)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Reacondicionado"})]}),a.jsxs("label",{className:"switch-container",children:[a.jsx("input",{type:"checkbox",className:"checkbox",checked:(j=o.estado)==null?void 0:j.reparado,onChange:()=>c(R=>{var A;return{...R,estado:{...R.estado,reparado:!((A=R.estado)!=null&&A.reparado)}}})}),a.jsx("div",{className:"slider"}),a.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Reparado"})]})]}),a.jsxs("div",{children:[a.jsx(zA,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),a.jsx(BA,{sx:{px:1,"& .MuiSlider-thumb":{width:16,height:16,bgcolor:"#1d4ed8",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 10px rgba(29, 78, 216, 0.2)"}},"& .MuiSlider-rail":{height:8,opacity:.3,bgcolor:"#cbd5e1",borderRadius:4},"& .MuiSlider-track":{height:8,borderRadius:4,bgcolor:"#1d4ed8"},"& .MuiSlider-root":{padding:"20px 0"}},children:a.jsx($A,{value:g,onChange:u,valueLabelDisplay:"auto",min:0,max:1e6})}),a.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 mt-1 font-semibold",children:[a.jsxs("span",{children:["RD$",g[0].toLocaleString("es-DO")]}),a.jsxs("span",{children:["RD$",g[1].toLocaleString("es-DO")]})]})]})]}),a.jsxs("div",{className:"flex justify-between gap-3 border-t border-gray-300 dark:border-gray-700 p-4 mt-4",children:[a.jsx("button",{onClick:()=>{n(),i()},className:"w-1/2 bg-blue-100 hover:bg-blue-200 text-blue-800 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-blue-300 font-semibold text-sm py-2 rounded transition-colors",children:"Restablecer"}),a.jsx("button",{onClick:()=>{e(o),i()},className:"w-1/2 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 rounded transition-colors",children:"Aplicar filtros"})]})]})}function qA({onClick:t}){return a.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-900 dark:bg-slate-800 dark:text-blue-300 rounded-full text-sm font-medium hover:bg-gray-300 dark:hover:bg-slate-700 transition-colors",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Filtros"]})}const fo=t=>t?t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",SK=(t,e)=>{if(!e)return!0;const n=fo(e),r=n.split(" ").filter(Boolean),i=fo(t.nombre||""),o=fo(t.descripcion||""),c=fo(t.categoria||""),u=fo(t.empresa||t.marca||"");if(i===n||i.startsWith(n)||i.includes(n)||u.includes(n)||c.includes(n)||o.includes(n))return!0;let d=0;return r.forEach(f=>{i.includes(f)&&d++,u.includes(f)&&d++,c.includes(f)&&d++,o.includes(f)&&d++}),d>0};function TK(){const t=gs(),{products:e,loading:n}=YC(),[r,i]=E.useState({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),[o,c]=E.useState(!1),[u,d]=E.useState(!1),[f,g]=E.useState(0);E.useEffect(()=>{function A(){const z=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),q=z?Math.ceil(z.getBoundingClientRect().height):0;g(q),document.documentElement.style.setProperty("--topbar-height",`${q}px`)}A(),window.addEventListener("resize",A);const L=new MutationObserver(A);return L.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",A),L.disconnect()}},[]);const x=new URLSearchParams(t.search).get("q")||"";fo(x);const w=x.includes(" en ");let N=x,b=null;if(w){const A=x.split(" en ");N=A[0].trim(),b=A[1].trim()}const T=E.useMemo(()=>(e||[]).filter(A=>{const L=SK(A,N);if(b){const z=fo(A.categoria||""),q=fo(b);return L&&z===q}return L}),[e,N,b]),j=E.useMemo(()=>T.filter(A=>{const L=A.precio>=r.precio.min,z=A.precio<=r.precio.max,q=!r.estado.nuevo&&!r.estado.usado||r.estado.nuevo&&A.estado==="Nuevo"||r.estado.usado&&A.estado==="Usado";return L&&z&&q}),[T,r]),R=()=>{i({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}})};return a.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"var(--content-offset, 100px)",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[a.jsxs("div",{className:"flex-1 flex flex-col xl:grid xl:grid-cols-[auto_1fr_auto] w-full",style:{margin:0},children:[a.jsx(rp,{categoriaActiva:null,setMostrarEnMovil:d,className:"bg-transparent border-none shadow-none xl:row-span-2"}),a.jsxs("main",{className:"flex-1 p-0 xl:p-4 relative pb-32",children:[a.jsxs("div",{className:"flex justify-between items-center px-3 py-2 xl:hidden bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 sticky transition-colors duration-300",style:{top:"var(--content-offset, 100px)",zIndex:40,marginTop:0,paddingTop:0},children:[a.jsx("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium transition-colors duration-300",children:" Categoras"}),a.jsx(qA,{onClick:()=>c(!0)})]}),a.jsxs("div",{className:"mb-6 mt-4 px-4 xl:px-0",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl xl:text-5xl font-extrabold text-gray-900 dark:text-gray-100 mb-3 tracking-tight leading-tight",children:"Resultados de bsqueda"}),x&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:["Buscaste:"," ",a.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-400",children:N})]}),b&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:[" ",b]})]}),j.length>0&&a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[j.length," ",j.length===1?"producto encontrado":"productos encontrados"]})]}),n?null:j.length===0?a.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:["No se encontraron productos relacionados con"," ",a.jsx("span",{className:"font-bold",children:x}),"."]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-3 lg:gap-4 px-4 xl:px-0",children:j.map(A=>a.jsx(rA,{producto:A},A.id))})]}),a.jsx(HA,{filtros:r,setFiltros:i,productosOriginales:T,className:"bg-transparent border-none shadow-none xl:row-span-2"})]}),u&&a.jsx(rp,{categoriaActiva:null,mostrarEnMovil:u,setMostrarEnMovil:d,className:"bg-transparent border-none shadow-none"}),a.jsx("div",{className:"xl:hidden",children:a.jsx(WA,{filtros:r,setFiltros:i,visible:o,onClose:()=>c(!1),onReset:R})})]})}function FN(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")}function UN(){const{categoria:t}=XN(),e=ai(),{categories:n,loading:r}=e1(),i=t&&t!=="todos"?t:"",{products:o,loading:c}=QC(i),[u,d]=E.useState({precio:{min:0,max:1e6},estado:{nuevo:!1,usado:!1,usadoComoNuevo:!1,reacondicionado:!1,reparado:!1}}),[f,g]=E.useState({norm:"",display:""}),[y,x]=E.useState(!1),[w,N]=E.useState(!1),[b,T]=E.useState("Todos"),[j,R]=E.useState(0);E.useEffect(()=>{function P(){const F=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),$=F?Math.ceil(F.getBoundingClientRect().height):0;R($),document.documentElement.style.setProperty("--topbar-height",`${$}px`)}P(),window.addEventListener("resize",P);const S=new MutationObserver(P);return S.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",P),S.disconnect()}},[]),E.useEffect(()=>{if(!t||t==="todos")T("Todos");else{const P=n.find(S=>FN(S.ruta)===FN(t));T(P?P.nombre:"Todos")}},[t,n]);const A=E.useMemo(()=>b==="Todos"?o:o.filter(P=>P==null?void 0:P.id),[o,b]),L=E.useMemo(()=>(A||[]).filter(P=>{const S=P.precio>=u.precio.min,F=P.precio<=u.precio.max,$=!u.estado.nuevo&&!u.estado.usado&&!u.estado.usadoComoNuevo&&!u.estado.reacondicionado&&!u.estado.reparado||u.estado.nuevo&&P.estado==="Nuevo"||u.estado.usado&&P.estado==="Usado"||u.estado.usadoComoNuevo&&P.estado==="Usado como nuevo"||u.estado.reacondicionado&&P.estado==="Reacondicionado"||u.estado.reparado&&P.estado==="Reparado",I=P.empresaNorm||(P.empresa||"").toString().trim().toLowerCase(),re=!f.norm||I===f.norm;return S&&F&&$&&re}),[A,u,f]),z=(P,S)=>{e(`/productos/${S}`),x(!1),N(!1),g({norm:"",display:""})},q=()=>{d({precio:{min:0,max:1e6},estado:{nuevo:!1,usado:!1,usadoComoNuevo:!1,reacondicionado:!1,reparado:!1}}),g({norm:"",display:""})},D=[{nombre:"PlayStation",norm:"playstation",imagen:"/logos/PlayStation_logo.svg.png"},{nombre:"Xbox",norm:"xbox",imagen:"/logos/xbox-logo.png"},{nombre:"Nintendo",norm:"nintendo",imagen:"/logos/nintendo-logo.png"}],M=r||c;return a.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"var(--content-offset, 100px)",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[a.jsxs("div",{className:"flex-1 flex flex-col xl:grid xl:grid-cols-[auto_1fr_auto] w-full",style:{margin:0},children:[a.jsx(rp,{categoriaActiva:b,onCategoriaClick:z,className:"bg-transparent border-none shadow-none xl:row-span-2"}),a.jsxs("main",{className:"flex-1 p-0 xl:p-4 relative pb-32",children:[a.jsxs("div",{className:"flex justify-between items-center px-3 py-2 xl:hidden bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 sticky transition-colors duration-300",style:{top:"var(--content-offset, 100px)",zIndex:40,marginTop:0,paddingTop:0},children:[a.jsx("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium transition-colors duration-300",children:" Categoras"}),a.jsx(qA,{onClick:()=>x(!0)})]}),a.jsxs("div",{className:"mb-6 mt-4 px-4 xl:px-0",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl xl:text-5xl font-extrabold text-gray-900 dark:text-gray-100 mb-3 tracking-tight leading-tight",children:b==="Todos"?"Todos los productos":b}),b!=="Todos"&&a.jsxs("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:["Encuentra lo mejor en"," ",a.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-400",children:b})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 px-4 xl:px-0 mb-6 justify-center sm:justify-start",children:[D.map(P=>{const S=f.norm===P.norm;return a.jsxs("button",{onClick:()=>g({norm:P.norm,display:P.nombre}),className:`group relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white dark:bg-gray-800 border-4 flex items-center justify-center shadow-xl hover:scale-110 transition-all duration-300 ${S?"border-blue-700 ring-4 ring-offset-2 ring-blue-500 animate-spin-slow":"border-gray-300 hover:border-blue-400"}`,title:P.nombre,children:[a.jsx("img",{src:P.imagen,alt:P.nombre,className:"w-8 h-8 sm:w-10 sm:h-10 object-contain z-10"}),S&&a.jsx("span",{className:"absolute inset-0 rounded-full border-4 border-blue-500 animate-pulse z-0"})]},P.norm)}),a.jsx("button",{onClick:()=>g({norm:"",display:""}),className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 flex items-center justify-center text-lg sm:text-xl font-bold bg-gradient-to-br from-red-100 to-red-300 text-red-700 border-red-600 shadow-lg hover:scale-110 transition-all duration-300",title:"Quitar filtro",children:""})]}),M?null:L.length===0?a.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:"No hay productos que coincidan con tus filtros."}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-3 lg:gap-4 px-4 xl:px-0",children:L.map(P=>a.jsx(rA,{producto:P},P.id))})]}),a.jsx(HA,{filtros:u,setFiltros:d,productosOriginales:A,className:"bg-transparent border-none shadow-none xl:row-span-2"})]}),w&&a.jsx(rp,{categoriaActiva:b,onCategoriaClick:z,mostrarEnMovil:w,setMostrarEnMovil:N,className:"bg-transparent border-none shadow-none"}),a.jsx("div",{className:"xl:hidden",children:a.jsx(WA,{filtros:u,setFiltros:d,visible:y,onClose:()=>x(!1),onReset:q})})]})}const CK=[{id:0,nombre:"Estafeta Principal (Oficina)",descripcion:"Playcenter Universal",direccion:"Av Estrella Sadhala N 55, Frente a la doble va, Santiago",telefono:"809-582-1212",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'13.2%22N+70%C2%B041'23.3%22W/@19.436998,-70.689812,17z/data=!4m4!3m3!8m2!3d19.437!4d-70.6898056",imagen:"/estafetas/oficina.png"},{id:1,nombre:"Estafeta Villa-Olmpica",descripcion:"Minimarket Los Hermanos",direccion:"Calle Penetracin N 1, Suburbanizacin Mare Lpez, La villa-Olmpica, Prximo a la calle 1",telefono:"809-626-3262",ubicacionLink:"https://www.google.com/maps/place/19%C2%B025'43.1%22N+70%C2%B041'12.7%22W/@19.4286338,-70.6894342,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.4286338!4d-70.6868593?hl=es&entry=ttu",imagen:"/estafetas/loshermanos.png"},{id:2,nombre:"Estafeta Nibaje",descripcion:"Cafetera Guido",direccion:"Avenida Franco Vido, N 148, Nibaje",telefono:"829-324-2318",ubicacionLink:"https://www.google.com/maps/place//@19.420887,-70.6811611,3857m/data=!3m2!1e3!4b1?entry=ttu",imagen:"/estafetas/cafeteria-guido.png"},{id:3,nombre:"Estafeta El Ensueo",descripcion:"Saln y Cafetera Marais",direccion:"Calle Paseo de los Locutores, Esquina 11, El Ensueo",telefono:"829-755-3636",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'22.4%22N+70%C2%B041'26.1%22W/@19.439565,-70.690574,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.439565!4d-70.690574?entry=ttu",imagen:"/estafetas/salon-y-cafeteria-maraez.png"},{id:4,nombre:"Estafeta La Lotera",descripcion:"Colmado Espinal",direccion:"La Lotera, calle Salcedo, N 10",telefono:"829-288-9168",ubicacionLink:"https://www.google.com/maps/place/19.439565,-70.690574/data=!4m6!3m5!1s0!7e2!8m2!3d19.439564999999998!4d-70.690574",imagen:"/estafetas/colmado-espinal.png"},{id:5,nombre:"Estafeta La Villa-Olmpica",descripcion:"Palmatec Solutions",direccion:"Villa-Olmpica, frente Manzana F, al lado del antiguo Colegio Gnesis",telefono:"809-785-3354",ubicacionLink:"https://www.google.com/maps/place/19.435309,-70.685961/data=!4m6!3m5!1s0!7e2!8m2!3d19.435309!4d-70.68596099999999",imagen:"/estafetas/palmatech-solution.png"},{id:6,nombre:"Estafeta Ensanche Bermdez",descripcion:"St Electronics",direccion:"Calle 11, nmero 27, Ensanche Bermdez",telefono:"849-437-3100",ubicacionLink:"https://www.google.com/maps/place/Espailla,+51000+Santiago+de+los+Caballeros/@19.4717075,-70.7148707,964m/data=!3m2!1e3!4b1!4m6!3m5!1s0x8eb1c5e2c3c79d7d:0x3a75c6d5f2312708!8m2!3d19.4717075!4d-70.7148707",imagen:"/estafetas/St electronics.png"},{id:7,nombre:"Estafeta Los Guandules",descripcion:"Mini Market El Vecino",direccion:"Estafeta de pago Los Guandules, prximo al puente",telefono:"+1 829 218 1889",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'15.3%22N+70%C2%B041'22.2%22W/@19.4381999,-70.6893169,526m/data=!3m1!1e3!4m4!3m3!8m2!3d19.437576!4d-70.689512?entry=ttu",imagen:"/estafetas/losguandules.png"}],jK=[{banco:"BANRESERVAS",numero:"9600153322",tipo:"Cuenta Corriente",titular:"PLAYCENTER"},{banco:"POPULAR",numero:"0798928750",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"BHD",numero:"18673320016",tipo:"Cuenta Corriente",titular:"FRANKLYN SANTOS"},{banco:"SantaCruz",numero:"11142010011632",tipo:"Cuenta Ahorro",titular:"PLAYCENTER"},{banco:"Scotiabank",numero:"12010008845",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"ASOC. CIBAO",numero:"100090238474",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"}];function AK(){const[t,e]=E.useState(null),n=(r,i)=>{navigator.clipboard.writeText(r),e(i),setTimeout(()=>e(null),2e3)};return a.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-10",style:{paddingTop:"var(--content-offset, 100px)"},children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-center mb-2 text-gray-800 dark:text-gray-100 tracking-tight",children:"Estafetas de Pago y Mtodos de Pago"}),a.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-6",children:"Puedes pagar tu factura en cualquiera de nuestros puntos autorizados o mediante transferencia bancaria."}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-gray-800 dark:to-gray-900 border border-blue-200 dark:border-gray-700 rounded-2xl p-7 mb-12 shadow-lg",children:[a.jsxs("h2",{className:"text-2xl font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2 mb-3",children:[a.jsx(v7,{className:"text-blue-500 dark:text-blue-300"}),"Cuentas Bancarias para Transferencias"]}),a.jsxs("p",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:[" Incluye tu ",a.jsx("span",{className:"underline",children:"cdigo de cliente"})," o",a.jsx("span",{className:"underline",children:" nombre completo"})," en la descripcin del pago."]}),a.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-[15px]",children:["Es indispensable enviar el comprobante de pago al 809-582-1212 para poder aplicarlo.",a.jsx("br",{}),a.jsx("span",{className:"text-red-500 dark:text-red-400 font-bold",children:"Sin el comprobante no podremos procesar tu pago."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:jK.map((r,i)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl p-5 flex flex-col shadow group hover:shadow-xl transition",children:[a.jsxs("h3",{className:"text-lg font-bold text-indigo-700 dark:text-indigo-300 flex items-center gap-2 mb-2",children:[a.jsx(k7,{className:"text-indigo-500 dark:text-indigo-300"}),r.banco]}),a.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-1 flex items-center",children:[a.jsx("span",{className:"font-semibold mr-1",children:"Nmero: "}),a.jsxs("span",{className:"text-gray-900 dark:text-gray-100 font-mono flex items-center",children:[r.numero,a.jsx("button",{onClick:()=>n(r.numero,i),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 ml-1",title:"Copiar nmero",children:t===i?a.jsx(m7,{}):a.jsx(N7,{})})]})]}),a.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Tipo: "}),r.tipo]}),a.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"font-semibold",children:"Titular: "}),r.titular]})]},i))})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:CK.map(r=>a.jsxs("div",{className:"flex flex-col md:flex-row bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700 hover:shadow-2xl transition",children:[a.jsx("div",{className:"w-full md:w-1/2 h-64 md:h-auto bg-blue-50 dark:bg-gray-700 flex items-center justify-center p-3",children:a.jsx("img",{src:r.imagen,alt:r.nombre,className:"w-full h-full object-contain rounded-xl"})}),a.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300 mb-1",children:r.nombre}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg font-medium mb-1",children:r.descripcion}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:r.direccion}),a.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-2 mb-2",children:[a.jsx(Hm,{className:"text-green-500 dark:text-green-300"}),r.telefono]})]}),a.jsxs("a",{href:r.ubicacionLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline mt-3 font-semibold flex items-center gap-2",children:[a.jsx("span",{role:"img","aria-label":"location",children:""}),"Ver Ubicacin"]})]})]},r.id))}),a.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mt-12 text-lg",children:"Agradecemos su preferencia! Estamos para servirle."})]})}function IK({children:t}){const{usuario:e}=oi();return e?t:a.jsx(Y5,{to:"/login",replace:!0})}const $N="https://playcenter-universal.onrender.com";function PK(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function RK(){const[t]=Gx(),e=ai(),{usuario:n,usuarioInfo:r}=oi(),{carrito:i,vaciarCarrito:o}=Qd(),[c,u]=E.useState(1),[d,f]=E.useState(0);E.useEffect(()=>{const y=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=y}},[]),E.useEffect(()=>{const y=t.get("session"),x=PK(),w=setInterval(()=>{f(j=>j>=90?j:Math.min(90,j+Math.random()*15))},200),N=setTimeout(()=>u(2),900),b=setTimeout(()=>u(3),1600),T=async()=>{var j;try{if(!y){e("/payment/cancel");return}const R=await fetch(`${$N}/cardnet/get-sk/${y}`),{sk:A}=await R.json();if(!A){e(`/payment/cancel?session=${y}`);return}const z=await(await fetch(`${$N}/cardnet/verify/${y}/${A}`)).json(),q=(j=x==null?void 0:x.items)!=null&&j.length?x.items.map(P=>({id:P.id,nombre:P.nombre,precio:Number(P.precio)||0,cantidad:P.cantidad,imagen:P.imagen||"/Productos/default.jpg",empresa:P.empresa||"N/A",subtotal:(Number(P.precio)||0)*P.cantidad})):(i||[]).map(P=>({id:P.id,nombre:P.nombre,precio:Number(P.precio)||0,cantidad:P.cantidad,imagen:P.imagen||"/Productos/default.jpg",empresa:P.empresa||"N/A",subtotal:(Number(P.precio)||0)*P.cantidad})),D=(x==null?void 0:x.total)??(i||[]).reduce((P,S)=>P+(Number(S.precio)||0)*S.cantidad,0),M={userId:(n==null?void 0:n.uid)||null,userEmail:(r==null?void 0:r.email)||(n==null?void 0:n.email)||null,userName:(r==null?void 0:r.displayName)||null,userPhone:(r==null?void 0:r.telefono)||null,productos:q,total:D,subtotal:q.reduce((P,S)=>P+S.subtotal,0),impuestos:0,envio:0,estado:(z==null?void 0:z.ResponseCode)==="00"?"completado":"cancelado",estadoPago:(z==null?void 0:z.ResponseCode)==="00"?"pagado":"fallido",metodoPago:"CardNet",fecha:Vm(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(x==null?void 0:x.mode)||(x?"unknown":"cart"),direccionEntrega:(r==null?void 0:r.direccionCompleta)||null,telefonoContacto:(r==null?void 0:r.telefono)||null,notasEspeciales:null,raw:{...z,SESSION:y}};try{await dh($t(Ve,"orders"),M)}catch(P){console.error(" Error guardando orden:",P)}try{sessionStorage.removeItem("checkoutPayload")}catch{}f(100),u(4),setTimeout(()=>{(z==null?void 0:z.ResponseCode)==="00"?(((x==null?void 0:x.mode)||"cart")==="cart"&&o(),e(`/payment/success?session=${y}`)):e(`/payment/cancel?session=${y}`)},900)}catch(R){console.error(" Error verificando pago:",R),e("/payment/cancel")}};if(y){const j=setTimeout(T,9e3);return()=>{clearTimeout(j),clearInterval(w),clearTimeout(N),clearTimeout(b)}}else e("/payment/cancel")},[t,e,n,r,i,o]);const g=[{id:1,icon:L1,title:"Conectando con CardNet",description:"Estableciendo conexin segura"},{id:2,icon:Jm,title:"Verificando seguridad",description:"Validando datos de pago"},{id:3,icon:L4,title:"Procesando transaccin",description:"Confirmando tu compra"},{id:4,icon:Qm,title:"Completado!",description:"Redirigiendo..."}];return a.jsxs(de.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((y,x)=>a.jsx(de.div,{className:"absolute w-2 h-2 bg-blue-200 dark:bg-blue-800 rounded-full opacity-30 dark:opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*12+12,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},x))}),a.jsxs(de.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 dark:from-blue-500/10 dark:to-purple-500/10 rounded-2xl sm:rounded-3xl"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3 sm:mb-4",children:[a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Progreso"}),a.jsxs("span",{className:"text-xs sm:text-sm font-bold text-blue-600 dark:text-blue-400",children:[Math.round(d),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 sm:h-3 overflow-hidden",children:a.jsx(de.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",initial:{width:0},animate:{width:`${d}%`},transition:{duration:.5,ease:"easeOut"}})})]}),a.jsx("div",{className:"mb-6 sm:mb-8",children:a.jsx(dn,{mode:"wait",children:g.map(y=>c>=y.id&&a.jsxs(de.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.98},transition:{duration:.35,type:"spring"},className:`flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl sm:rounded-2xl mb-2 sm:mb-3 ${c===y.id?"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30 border-2 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-700"}`,children:[a.jsx(de.div,{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl flex-shrink-0 ${c===y.id?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-green-100 text-green-600"}`,animate:c===y.id?{scale:[1,1.08,1],rotate:[0,5,-5,0]}:{},transition:{duration:2,repeat:1/0},children:a.jsx(y.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),a.jsxs("div",{className:"text-left flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100 text-base sm:text-lg",children:y.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm break-words",children:y.description})]}),c>y.id&&a.jsx(de.div,{initial:{scale:0},animate:{scale:1},className:"text-green-500 flex-shrink-0",children:a.jsx(Qm,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]},y.id))})}),a.jsx("div",{className:"mb-6 sm:mb-8",children:a.jsxs("div",{className:"loader mx-auto",children:[a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__bar"}),a.jsx("div",{className:"loader__ball"})]})}),a.jsx(de.h1,{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{opacity:[.85,1,.85]},transition:{duration:2,repeat:1/0},children:"Procesando tu pago"}),a.jsxs(de.p,{className:"text-gray-600 dark:text-gray-300 mb-6 sm:mb-8 leading-relaxed text-sm sm:text-base",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Estamos verificando tu transaccin con CardNet de forma segura.",a.jsx("br",{}),a.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Por favor, no cierres esta ventana."})]}),a.jsxs(de.div,{className:"flex flex-wrap justify-center items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.6},children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsx(Jm,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),a.jsx("span",{children:"Conexin segura"})]}),a.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full hidden sm:block"}),a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsx(D4,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),a.jsx("span",{children:"Tiempo real"})]})]})]})]})]})}function DK(){var w,N;const[t]=Gx(),[e,n]=E.useState(null),[r,i]=E.useState(null),[o,c]=E.useState(!0),[u,d]=E.useState(!1),[f,g]=E.useState(!1);E.useEffect(()=>{const b=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=b}},[]),E.useEffect(()=>{const b=t.get("session");b&&!f&&(async()=>{try{const R=pn($t(Ve,"orders"),Pr("raw.SESSION","==",b),Ca("fecha","desc"),Op(1)),A=await Ji(R);if(!A.empty){n({id:A.docs[0].id,...A.docs[0].data()}),g(!0);return}const L=sessionStorage.getItem("cardnetSessionKey");if(!L){console.error(" No se encontr sessionKey"),i({error:"Sesin invlida"});return}console.log(" Verificando transaccin con Cardnet...");const D=(await WC(qC,"verifyCardnetTransaction")({session:b,sessionKey:L})).data;if(i(D),console.log(" Resultado de verificacin:",D),D.ResponseCode==="00"&&!f){const M=sessionStorage.getItem("checkoutPayload"),P=M?JSON.parse(M):null,S=so.currentUser;if(P&&S){const F={numeroOrden:`ORD-${Date.now()}`,userId:S.uid,userEmail:S.email,email:S.email,customerEmail:S.email,customerName:S.displayName||S.email,productos:P.items||[],total:P.total/100,estado:"Completado",metodoPago:"CardNet",fecha:Vm(),createdAt:Vm(),emailSent:!1,raw:{SESSION:b,cardnetData:D,orderId:sessionStorage.getItem("cardnetOrderId"),transactionId:sessionStorage.getItem("cardnetTransactionId")}},$=await dh($t(Ve,"orders"),F);n({id:$.id,...F}),g(!0),sessionStorage.removeItem("checkoutPayload"),sessionStorage.removeItem("cardnetSessionKey"),sessionStorage.removeItem("cardnetOrderId"),sessionStorage.removeItem("cardnetTransactionId"),console.log(" Orden creada exitosamente - Email se enviar automticamente")}}}catch(R){console.error("Error cargando datos:",R)}})();const j=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(j)},[t,f]);const y=b=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(b||0),x=b=>{if(!b)return"Fecha no disponible";let T;return typeof b=="object"&&(b!=null&&b.seconds)?T=new Date(b.seconds*1e3):T=new Date(b),T.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return a.jsxs(de.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-green-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[a.jsx(dn,{children:o&&a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((b,T)=>a.jsx(de.div,{className:"absolute w-3 h-3 rounded-full dark:opacity-70",style:{backgroundColor:["#10b981","#059669","#34d399","#6ee7b7","#a7f3d0"][Math.floor(Math.random()*5)],left:Math.random()*100+"%",top:-10},animate:{y:window.innerHeight+50,x:[0,Math.random()*200-100,Math.random()*200-100],rotate:[0,360,720],scale:[1,.5,1]},transition:{duration:Math.random()*3+2,ease:"easeOut",delay:Math.random()*2},exit:{opacity:0}},T))})}),a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((b,T)=>a.jsx(de.div,{className:"absolute w-2 h-2 bg-green-200 dark:bg-green-800 rounded-full opacity-30 dark:opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*15+15,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},T))}),a.jsxs(de.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-4xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-emerald-500/5 dark:from-green-500/10 dark:to-emerald-500/10 rounded-3xl"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx(de.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:a.jsxs(de.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[a.jsx(Qm,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-green-500 mx-auto drop-shadow-lg"}),a.jsx(de.div,{className:"absolute -top-3 -right-3 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.25,1],rotate:[0,12,-12,0]},transition:{duration:2,repeat:1/0},children:a.jsx(pz,{className:"w-5 h-5 text-yellow-600"})}),a.jsx(de.div,{className:"absolute -bottom-2 -left-2 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0,delay:.5},children:a.jsx(lz,{className:"w-4 h-4 text-green-600"})})]})}),a.jsxs(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:[a.jsx(de.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-400 dark:to-emerald-400 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{scale:[1,1.04,1]},transition:{duration:2,repeat:1/0},children:"Pago exitoso!"}),a.jsx(de.div,{className:"flex items-center justify-center gap-2 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[...Array(5)].map((b,T)=>a.jsx(de.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+T*.08,type:"spring"},children:a.jsx(uz,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-400 fill-current"})},T))}),a.jsxs(de.p,{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base md:text-lg leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:["Tu transaccin fue procesada correctamente.",a.jsx("br",{}),"Gracias por tu compra en ",a.jsx("span",{className:"font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:"PlayCenter Universal"}),"!"]})]}),e?a.jsx(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 border border-green-200 dark:border-green-800",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[a.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[a.jsx(R$,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"}),"Resumen de tu compra"]}),a.jsx(de.div,{className:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold",whileHover:{scale:1.05},children:" Completado"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Orden ID:"}),a.jsx("span",{className:"font-mono text-xs sm:text-sm bg-gray-100 dark:bg-gray-700 dark:text-gray-200 px-2 py-1 rounded break-all",children:e.numeroOrden||((w=e.id)==null?void 0:w.slice(-8))})]}),a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Email:"}),a.jsx("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm break-all text-right",children:e.userEmail})]}),a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Fecha:"}),a.jsx("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm text-right",children:x(e.fecha)})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Mtodo de pago:"}),a.jsxs("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm flex items-center gap-1.5 sm:gap-2",children:[a.jsx(L4,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),"CardNet"]})]}),a.jsxs("div",{className:"flex justify-between items-center gap-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm",children:"Total:"}),a.jsx("span",{className:"text-xl sm:text-2xl font-bold text-green-600 dark:text-green-400",children:y(e.total)})]})]})]}),((N=e.productos)==null?void 0:N.length)>0&&a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>d(b=>!b),className:"flex items-center gap-2 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 font-medium mb-3 sm:mb-4 transition-colors text-sm sm:text-base",type:"button",children:[a.jsxs("span",{children:["Ver productos (",e.productos.length,")"]}),a.jsx(de.div,{animate:{rotate:u?180:0},transition:{duration:.25},children:""})]}),a.jsx(dn,{children:u&&a.jsx(de.div,{className:"space-y-2 sm:space-y-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:e.productos.map((b,T)=>a.jsxs(de.div,{className:"flex items-center justify-between bg-white dark:bg-gray-700/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-green-100 dark:border-green-800 gap-3",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:T*.06},whileHover:{scale:1.02},children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0",children:""}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm sm:text-base block truncate",children:b.nombre}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:["Cantidad: ",b.cantidad,"  ",y(b.precio)]})]})]}),a.jsx("span",{className:"font-bold text-green-600 dark:text-green-400 text-sm sm:text-base flex-shrink-0",children:y((Number(b.precio)||0)*b.cantidad)})]},`${b.id}-${T}`))})})]})]})}):null,a.jsxs(de.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center mb-6 sm:mb-8",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:1.2},children:[a.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(At,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-500 dark:to-emerald-500 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[a.jsx(bd,{className:"w-4 h-4 sm:w-5 sm:h-5"}),a.jsx("span",{children:"Seguir comprando"})]})}),a.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(At,{to:"/profile",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[a.jsx(A$,{className:"w-4 h-4 sm:w-5 sm:h-5"}),a.jsx("span",{children:"Ver historial"})]})})]}),r&&a.jsxs(de.details,{className:"mt-2 text-left",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},children:[a.jsx("summary",{className:"cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium mb-2 text-xs sm:text-sm",children:"Detalles tcnicos de la transaccin"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700 max-h-48 sm:max-h-64 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-gray-600 dark:text-gray-300 text-xs font-mono",children:JSON.stringify(r,null,2)})})]})]})]})]})}function MK(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function OK(){const[t]=Gx(),{usuarioInfo:e}=oi(),{carrito:n}=Qd(),[r,i]=E.useState(!1),[o,c]=E.useState(!1);E.useEffect(()=>{const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}},[]),E.useEffect(()=>{const f=setTimeout(async()=>{var N;if(r)return;const g=t.get("session"),y=MK(),x=(N=y==null?void 0:y.items)!=null&&N.length?y.items:(n||[]).map(b=>({id:b.id,nombre:b.nombre,precio:Number(b.precio)||0,cantidad:b.cantidad})),w=(y==null?void 0:y.total)??(n||[]).reduce((b,T)=>b+(Number(T.precio)||0)*T.cantidad,0);try{if(g){const b=pn($t(Ve,"orders"),Pr("raw.SESSION","==",g),Op(1));if(!(await Ji(b)).empty){try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0);return}}if(e&&(x.length>0||w>=0)){const b=x.map(T=>({id:T.id,nombre:T.nombre,precio:Number(T.precio)||0,cantidad:T.cantidad,imagen:T.imagen||"/Productos/default.jpg",empresa:T.empresa||"N/A",subtotal:(Number(T.precio)||0)*T.cantidad}));await dh($t(Ve,"orders"),{userId:e.uid,userEmail:e.email,userName:e.displayName,userPhone:(e==null?void 0:e.telefono)||null,productos:b,total:w,subtotal:b.reduce((T,j)=>T+j.subtotal,0),impuestos:0,envio:0,estado:"cancelado",estadoPago:"fallido",metodoPago:"CardNet",fecha:Vm(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(y==null?void 0:y.mode)||(y?"unknown":"cart"),direccionEntrega:(e==null?void 0:e.direccionCompleta)||null,telefonoContacto:(e==null?void 0:e.telefono)||null,notasEspeciales:null,raw:{SESSION:g||null}});try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0)}}catch(b){console.error("Error guardando orden cancelada:",b)}},600);return()=>clearTimeout(f)},[e,n,r,t]);const u=[{icon:Jm,title:"Datos incorrectos",desc:"Verifica la informacin de tu tarjeta"},{icon:D4,title:"Sesin expirada",desc:"El tiempo lmite para el pago se agot"},{icon:RE,title:"Fondos insuficientes",desc:"Tu tarjeta no tiene saldo disponible"},{icon:zd,title:"Cancelado por el usuario",desc:"El pago fue cancelado manualmente"}];return a.jsxs(de.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-rose-50 via-red-50 to-pink-50 dark:from-gray-900 dark:via-red-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(16)].map((d,f)=>a.jsx(de.div,{className:"absolute w-3 h-3 bg-red-200 dark:bg-red-900 rounded-full opacity-20 dark:opacity-15",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight],rotate:[0,360]},transition:{duration:Math.random()*14+14,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},f))}),a.jsxs(de.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-pink-500/5 dark:from-red-500/10 dark:to-pink-500/10 rounded-3xl"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx(de.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:a.jsxs(de.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[a.jsx(zd,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-red-500 mx-auto drop-shadow-lg"}),a.jsx(de.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:a.jsx(RE,{className:"w-4 h-4 text-red-600"})})]})}),a.jsx(de.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-red-600 to-pink-600 dark:from-red-400 dark:to-pink-400 bg-clip-text text-transparent mb-4 sm:mb-6",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:"Pago cancelado"}),a.jsxs(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.45},children:[a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base sm:text-lg leading-relaxed mb-4",children:"Tu transaccin no pudo ser completada."}),a.jsxs(de.div,{className:"inline-flex items-center gap-2 bg-green-50 dark:bg-green-950/30 text-green-700 dark:text-green-300 px-4 py-2 rounded-full border border-green-200 dark:border-green-800",initial:{scale:0},animate:{scale:1},transition:{delay:.65,type:"spring"},children:[a.jsx(Jm,{className:"w-4 h-4"}),a.jsx("span",{className:"font-semibold",children:"No se realiz ningn cargo a tu tarjeta"})]})]}),a.jsxs(de.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.6},children:[a.jsxs("button",{onClick:()=>c(d=>!d),className:"flex items-center gap-2 mx-auto text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",type:"button",children:[a.jsx("span",{className:"font-medium",children:"Por qu fall mi pago?"}),a.jsx(de.div,{animate:{rotate:o?180:0},transition:{duration:.25},children:a.jsx(Z$,{className:"w-4 h-4"})})]}),a.jsx(dn,{children:o&&a.jsx(de.div,{className:"mt-4 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:u.map((d,f)=>a.jsx(de.div,{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:f*.08},whileHover:{scale:1.02,backgroundColor:"#f8fafc"},children:a.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[a.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg flex-shrink-0",children:a.jsx(d.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"})}),a.jsxs("div",{className:"text-left flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1 text-sm sm:text-base",children:d.title}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-words",children:d.desc})]})]})},f))})})]}),a.jsxs(de.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.8},children:[a.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(At,{to:"/carrito",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-red-600 to-pink-600 dark:from-red-500 dark:to-pink-500 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[a.jsx(az,{className:"w-4 h-4 sm:w-5 sm:h-5"}),a.jsx("span",{children:"Intentar de nuevo"})]})}),a.jsx(de.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:a.jsxs(At,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[a.jsx(bd,{className:"w-4 h-4 sm:w-5 sm:h-5"}),a.jsx("span",{children:"Ir al inicio"})]})})]}),a.jsxs(de.div,{className:"mt-6 sm:mt-8 p-4 sm:p-5 bg-blue-50 dark:bg-blue-950/30 rounded-lg sm:rounded-xl border border-blue-200 dark:border-blue-800",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:[a.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2 text-sm sm:text-base",children:"Necesitas ayuda?"}),a.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-xs sm:text-sm",children:"Si el problema persiste, contacta a nuestro equipo de soporte. Estamos aqu para ayudarte a completar tu compra."}),a.jsx(de.a,{href:"/contacto",className:"mt-3 inline-block text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-800 dark:hover:text-blue-300 transition-colors",whileHover:{scale:1.03},children:"Contactar soporte "})]})]})]})]})}function LK(){const t=gs();return a.jsx(KC,{children:a.jsx(dn,{mode:"wait",children:a.jsxs(J5,{location:t,children:[a.jsx(yr,{path:"/",element:a.jsx(zr,{children:a.jsx(mH,{})})}),a.jsx(yr,{path:"/profile",element:a.jsx(IK,{children:a.jsx(zr,{children:a.jsx(kH,{})})})}),a.jsx(yr,{path:"/admin",element:a.jsx(lH,{})}),a.jsx(yr,{path:"/producto/:id",element:a.jsx(zr,{children:a.jsx(SH,{})})}),a.jsx(yr,{path:"/carrito",element:a.jsx(zr,{children:a.jsx(AH,{})})}),a.jsx(yr,{path:"/contacto",element:a.jsx(zr,{children:a.jsx(IH,{})})}),a.jsx(yr,{path:"/nosotros",element:a.jsx(zr,{children:a.jsx(MH,{})})}),a.jsx(yr,{path:"/buscar",element:a.jsx(zr,{children:a.jsx(TK,{})})}),a.jsx(yr,{path:"/categorias",element:a.jsx(zr,{children:a.jsx(UN,{})})}),a.jsx(yr,{path:"/Productos/:categoria?",element:a.jsx(zr,{children:a.jsx(UN,{})})}),a.jsx(yr,{path:"/estafetas",element:a.jsx(zr,{children:a.jsx(AK,{})})}),a.jsx(yr,{path:"/vender",element:a.jsx(zr,{children:a.jsx(PH,{})})}),a.jsx(yr,{path:"/tiendas",element:a.jsx(zr,{children:a.jsx(RH,{})})}),a.jsx(yr,{path:"/historial",element:a.jsx(zr,{children:a.jsx(DH,{})})}),a.jsx(yr,{path:"/payment/pending",element:a.jsx(zr,{children:a.jsx(RK,{})})}),a.jsx(yr,{path:"/payment/success",element:a.jsx(zr,{children:a.jsx(DK,{})})}),a.jsx(yr,{path:"/payment/cancel",element:a.jsx(zr,{children:a.jsx(OK,{})})})]},t.pathname)})})}function zr({children:t}){return a.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:t})}function VK(){const{pathname:t}=gs(),e=ai(),{usuario:n}=oi(),{abrirModal:r}=iu(),[i,o]=E.useState(!1),c=d=>t===d,u=d=>{(d==="/profile"||d==="/carrito")&&!n?o(!0):e(d)};return a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-md flex justify-around items-center h-14 text-sm xl:hidden transition-colors duration-300",children:[a.jsx(Ju,{onClick:()=>u("/"),icon:a.jsx(x7,{}),label:"Inicio",active:c("/")}),a.jsx(Ju,{onClick:()=>u("/tiendas"),icon:a.jsx(w7,{}),label:"Tiendas",active:c("/tiendas")}),a.jsx(Ju,{onClick:()=>u("/categorias"),icon:a.jsx(_7,{}),label:"Categoras",active:c("/categorias")}),a.jsx(Ju,{onClick:()=>u("/carrito"),icon:a.jsx(ej,{}),label:"Carrito",active:c("/carrito")}),a.jsx(Ju,{onClick:()=>u("/profile"),icon:a.jsx(nj,{}),label:"Perfil",active:c("/profile")})]}),a.jsx(Wp,{isOpen:i,onClose:()=>o(!1),onIniciarSesion:()=>{o(!1),r()}})]})}function Ju({onClick:t,icon:e,label:n,active:r}){return a.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center w-full h-full transition-colors ${r?"text-[#4FC3F7] font-semibold":"text-gray-600 dark:text-gray-300 hover:text-[#4FC3F7] dark:hover:text-[#60a5fa]"}`,"aria-label":n,type:"button",children:[a.jsx("div",{className:"text-lg",children:e}),a.jsx("div",{children:n})]})}function FK(){const{modalAbierto:t,setModalAbierto:e,modo:n,setModo:r}=iu(),{login:i,signup:o,usuario:c}=oi(),[u,d]=E.useState(n),[f,g]=E.useState(""),[y,x]=E.useState(""),[w,N]=E.useState(""),[b,T]=E.useState("");E.useEffect(()=>{d(n),T(""),g(""),x(""),N("")},[t,n]);async function j(R){R.preventDefault(),T("");try{if(u==="login")await i(f,y);else{const A=await o(f,y);await rr(mt(Ve,"users",A.uid),{displayName:w||"Usuario",email:f,telefono:"",direccion:"",codigo:"",metodoEntrega:"",admin:!1,createdAt:new Date}),w&&await updateProfile(A,{displayName:w})}e(!1)}catch(A){T("Error: "+A.message)}}return t?a.jsx("div",{onClick:()=>e(!1),className:"fixed inset-0 bg-gradient-to-br from-black/90 to-gray-900/90 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:a.jsxs(de.div,{onClick:R=>R.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40",children:[a.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold",children:""}),a.jsx("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:u==="login"?a.jsxs(a.Fragment,{children:[a.jsx(nj,{className:"text-[#3b82f6]"})," Iniciar Sesin"]}):a.jsxs(a.Fragment,{children:[a.jsx(E7,{className:"text-[#3b82f6]"})," Registrarse"]})}),b&&a.jsx("p",{className:"text-red-400 mb-4 text-center font-semibold",children:b}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[u==="signup"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Nombre de usuario"}),a.jsx("input",{type:"text",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:w,onChange:R=>N(R.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Correo electrnico"}),a.jsx("input",{type:"email",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:f,onChange:R=>g(R.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm mb-1",children:"Contrasea"}),a.jsx("input",{type:"password",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:y,onChange:R=>x(R.target.value)})]}),a.jsx("button",{type:"submit",className:"w-full bg-[#3b82f6] hover:bg-[#2563eb] text-white font-semibold py-2 rounded-lg shadow-lg transition transform hover:scale-105",children:u==="login"?"Iniciar sesin":"Registrarse"})]}),a.jsx("p",{className:"mt-4 text-center text-sm cursor-pointer text-[#3b82f6] hover:underline select-none",onClick:()=>{T("");const R=u==="login"?"signup":"login";d(R),r(R)},children:u==="login"?"No tienes una cuenta? Regstrate":"Ya tienes cuenta? Inicia sesin"})]})}):null}const UK=()=>{const{pathname:t}=gs();return E.useEffect(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0;const e=document.querySelector("main");e&&(e.scrollTop=0)},[t]),null};function $K(){e1();const{theme:t,toggleTheme:e}=hu(),n=ai(),r=gs(),[i,o]=E.useState(0),c=E.useRef(null),[u,d]=E.useState(!0),f=E.useRef(typeof window<"u"?window.scrollY:0),g=E.useRef(!1),[y,x]=E.useState(window.innerWidth>=1280),[w,N]=E.useState(window.innerWidth>=1280);E.useEffect(()=>{const T=()=>{const A=document.querySelector("header"),L=A?Math.ceil(A.getBoundingClientRect().height):0;o(L);try{const z=c.current,q=z?Math.ceil(z.getBoundingClientRect().height):0;document.documentElement.style.setProperty("--topbar-height",`${q}px`);const D=L+q;document.documentElement.style.setProperty("--content-offset",`${D}px`)}catch{}};T();const j=()=>{try{if(typeof window<"u"){const A=window.innerWidth>=1280;x(A),N(A)}}catch{}T()};let R=null;try{if(typeof window<"u"&&"ResizeObserver"in window){R=new ResizeObserver(()=>T());const A=document.querySelector("header");A&&R.observe(A),c.current&&R.observe(c.current)}else window.addEventListener("resize",j)}catch{window.addEventListener("resize",j)}return()=>{if(R)try{R.disconnect()}catch{}window.removeEventListener("resize",j)}},[]),E.useEffect(()=>{if(!w){d(!0);return}const T=()=>{g.current||(window.requestAnimationFrame(()=>{const j=window.scrollY,R=f.current;j>R&&j>100?d(!1):(j<R||j===0)&&d(!0),f.current=j,g.current=!1}),g.current=!0)};return window.addEventListener("scroll",T,{passive:!0}),()=>window.removeEventListener("scroll",T)},[w]);const b={position:"fixed",left:0,right:0,top:`${i}px`,zIndex:9990,transform:u?"translateY(0)":"translateY(-110%)",transition:"transform 220ms ease, opacity 220ms ease",pointerEvents:u?"auto":"none",display:"flex",margin:0,padding:0};return a.jsxs("div",{ref:c,style:{...b,padding:"0.25rem 0.5rem",margin:0},className:"flex topbar-base topbar-tech bg-white dark:bg-gradient-to-r dark:from-blue-900 dark:via-blue-800 dark:to-blue-900 shadow-md justify-between items-center transition-colors duration-300",role:"region","aria-label":"Top bar",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs md:text-sm whitespace-nowrap theme-text text-gray-700 dark:text-gray-200",children:[(r.pathname.startsWith("/producto/")||r.pathname.startsWith("/Producto/"))&&a.jsx("button",{onClick:()=>n(-1),className:"flex items-center justify-center w-7 h-7 rounded-full bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-all duration-200 hover:scale-110 active:scale-95 shadow-sm hover:shadow-md","aria-label":"Volver atrs",children:a.jsx(RB,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),a.jsx("span",{children:"Sitio oficial de las tiendas de videojuegos en RD"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("label",{className:"theme-toggle",children:[a.jsx("input",{type:"checkbox",checked:t==="dark",onChange:e,className:"theme-toggle__input","aria-label":"Cambiar tema"}),a.jsxs("svg",{className:"theme-toggle__icon theme-toggle__icon--sun",fill:"none",height:"18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"18",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("line",{x1:"12",x2:"12",y1:"1",y2:"3"}),a.jsx("line",{x1:"12",x2:"12",y1:"21",y2:"23"}),a.jsx("line",{x1:"4.22",x2:"5.64",y1:"4.22",y2:"5.64"}),a.jsx("line",{x1:"18.36",x2:"19.78",y1:"18.36",y2:"19.78"}),a.jsx("line",{x1:"1",x2:"3",y1:"12",y2:"12"}),a.jsx("line",{x1:"21",x2:"23",y1:"12",y2:"12"}),a.jsx("line",{x1:"4.22",x2:"5.64",y1:"19.78",y2:"18.36"}),a.jsx("line",{x1:"18.36",x2:"19.78",y1:"5.64",y2:"4.22"})]}),a.jsx("svg",{className:"theme-toggle__icon theme-toggle__icon--moon",viewBox:"0 0 24 24",children:a.jsx("path",{d:"m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z"})})]})})]})}const zK=()=>!0;function BK(){const{theme:t}=hu();return a.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-300",children:[a.jsx(_z,{}),a.jsx($K,{}),a.jsxs("main",{className:"flex-grow",children:[a.jsx(UK,{}),a.jsx(LK,{})]}),a.jsx(kz,{}),a.jsx(VK,{}),a.jsx(FK,{})]})}function HK(){const[t,e]=E.useState(!1);return E.useEffect(()=>{const n=zK();e(n);try{localStorage.removeItem("deletedProductIds")}catch{}},[]),t?a.jsx(n7,{children:a.jsx(BK,{})}):null}s5.createRoot(document.getElementById("root")).render(a.jsx(si.StrictMode,{children:a.jsx(a3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(KC,{children:a.jsx(u3,{children:a.jsx(d3,{children:a.jsx(HK,{})})})})})}));
