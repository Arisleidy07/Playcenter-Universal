function jI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Fd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f0={exports:{}},Ou={},p0={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function II(){if(Kw)return Rt;Kw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function N(z,Y,be){this.props=z,this.context=Y,this.refs=b,this.updater=be||w}N.prototype.isReactComponent={},N.prototype.setState=function(z,Y){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Y,"setState")},N.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=N.prototype;function M(z,Y,be){this.props=z,this.context=Y,this.refs=b,this.updater=be||w}var O=M.prototype=new j;O.constructor=M,S(O,N.prototype),O.isPureReactComponent=!0;var F=Array.isArray,H=Object.prototype.hasOwnProperty,K={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(z,Y,be){var Me,Ve={},it=null,ct=null;if(Y!=null)for(Me in Y.ref!==void 0&&(ct=Y.ref),Y.key!==void 0&&(it=""+Y.key),Y)H.call(Y,Me)&&!R.hasOwnProperty(Me)&&(Ve[Me]=Y[Me]);var Be=arguments.length-2;if(Be===1)Ve.children=be;else if(1<Be){for(var et=Array(Be),ut=0;ut<Be;ut++)et[ut]=arguments[ut+2];Ve.children=et}if(z&&z.defaultProps)for(Me in Be=z.defaultProps,Be)Ve[Me]===void 0&&(Ve[Me]=Be[Me]);return{$$typeof:t,type:z,key:it,ref:ct,props:Ve,_owner:K.current}}function A(z,Y){return{$$typeof:t,type:z.type,key:Y,ref:z.ref,props:z.props,_owner:z._owner}}function k(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function V(z){var Y={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(be){return Y[be]})}var U=/\/+/g;function D(z,Y){return typeof z=="object"&&z!==null&&z.key!=null?V(""+z.key):Y.toString(36)}function xe(z,Y,be,Me,Ve){var it=typeof z;(it==="undefined"||it==="boolean")&&(z=null);var ct=!1;if(z===null)ct=!0;else switch(it){case"string":case"number":ct=!0;break;case"object":switch(z.$$typeof){case t:case e:ct=!0}}if(ct)return ct=z,Ve=Ve(ct),z=Me===""?"."+D(ct,0):Me,F(Ve)?(be="",z!=null&&(be=z.replace(U,"$&/")+"/"),xe(Ve,Y,be,"",function(ut){return ut})):Ve!=null&&(k(Ve)&&(Ve=A(Ve,be+(!Ve.key||ct&&ct.key===Ve.key?"":(""+Ve.key).replace(U,"$&/")+"/")+z)),Y.push(Ve)),1;if(ct=0,Me=Me===""?".":Me+":",F(z))for(var Be=0;Be<z.length;Be++){it=z[Be];var et=Me+D(it,Be);ct+=xe(it,Y,be,et,Ve)}else if(et=x(z),typeof et=="function")for(z=et.call(z),Be=0;!(it=z.next()).done;)it=it.value,et=Me+D(it,Be++),ct+=xe(it,Y,be,et,Ve);else if(it==="object")throw Y=String(z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return ct}function Ke(z,Y,be){if(z==null)return z;var Me=[],Ve=0;return xe(z,Me,"","",function(it){return Y.call(be,it,Ve++)}),Me}function st(z){if(z._status===-1){var Y=z._result;Y=Y(),Y.then(function(be){(z._status===0||z._status===-1)&&(z._status=1,z._result=be)},function(be){(z._status===0||z._status===-1)&&(z._status=2,z._result=be)}),z._status===-1&&(z._status=0,z._result=Y)}if(z._status===1)return z._result.default;throw z._result}var qe={current:null},ce={transition:null},ue={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:ce,ReactCurrentOwner:K};function de(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:Ke,forEach:function(z,Y,be){Ke(z,function(){Y.apply(this,arguments)},be)},count:function(z){var Y=0;return Ke(z,function(){Y++}),Y},toArray:function(z){return Ke(z,function(Y){return Y})||[]},only:function(z){if(!k(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Rt.Component=N,Rt.Fragment=n,Rt.Profiler=i,Rt.PureComponent=M,Rt.StrictMode=r,Rt.Suspense=h,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Rt.act=de,Rt.cloneElement=function(z,Y,be){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Me=S({},z.props),Ve=z.key,it=z.ref,ct=z._owner;if(Y!=null){if(Y.ref!==void 0&&(it=Y.ref,ct=K.current),Y.key!==void 0&&(Ve=""+Y.key),z.type&&z.type.defaultProps)var Be=z.type.defaultProps;for(et in Y)H.call(Y,et)&&!R.hasOwnProperty(et)&&(Me[et]=Y[et]===void 0&&Be!==void 0?Be[et]:Y[et])}var et=arguments.length-2;if(et===1)Me.children=be;else if(1<et){Be=Array(et);for(var ut=0;ut<et;ut++)Be[ut]=arguments[ut+2];Me.children=Be}return{$$typeof:t,type:z.type,key:Ve,ref:it,props:Me,_owner:ct}},Rt.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},Rt.createElement=I,Rt.createFactory=function(z){var Y=I.bind(null,z);return Y.type=z,Y},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(z){return{$$typeof:u,render:z}},Rt.isValidElement=k,Rt.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:st}},Rt.memo=function(z,Y){return{$$typeof:f,type:z,compare:Y===void 0?null:Y}},Rt.startTransition=function(z){var Y=ce.transition;ce.transition={};try{z()}finally{ce.transition=Y}},Rt.unstable_act=de,Rt.useCallback=function(z,Y){return qe.current.useCallback(z,Y)},Rt.useContext=function(z){return qe.current.useContext(z)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(z){return qe.current.useDeferredValue(z)},Rt.useEffect=function(z,Y){return qe.current.useEffect(z,Y)},Rt.useId=function(){return qe.current.useId()},Rt.useImperativeHandle=function(z,Y,be){return qe.current.useImperativeHandle(z,Y,be)},Rt.useInsertionEffect=function(z,Y){return qe.current.useInsertionEffect(z,Y)},Rt.useLayoutEffect=function(z,Y){return qe.current.useLayoutEffect(z,Y)},Rt.useMemo=function(z,Y){return qe.current.useMemo(z,Y)},Rt.useReducer=function(z,Y,be){return qe.current.useReducer(z,Y,be)},Rt.useRef=function(z){return qe.current.useRef(z)},Rt.useState=function(z){return qe.current.useState(z)},Rt.useSyncExternalStore=function(z,Y,be){return qe.current.useSyncExternalStore(z,Y,be)},Rt.useTransition=function(){return qe.current.useTransition()},Rt.version="18.3.1",Rt}var Xw;function Ax(){return Xw||(Xw=1,p0.exports=II()),p0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function PI(){if(Qw)return Ou;Qw=1;var t=Ax(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var g,y={},x=null,w=null;f!==void 0&&(x=""+f),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(w=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:x,ref:w,props:y,_owner:i.current}}return Ou.Fragment=n,Ou.jsx=c,Ou.jsxs=c,Ou}var Yw;function RI(){return Yw||(Yw=1,f0.exports=PI()),f0.exports}var o=RI(),T=Ax();const zr=Fd(T),cy=jI({__proto__:null,default:zr},[T]);var hf={},m0={exports:{}},Jr={},g0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function DI(){return Jw||(Jw=1,function(t){function e(ce,ue){var de=ce.length;ce.push(ue);e:for(;0<de;){var z=de-1>>>1,Y=ce[z];if(0<i(Y,ue))ce[z]=ue,ce[de]=Y,de=z;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var ue=ce[0],de=ce.pop();if(de!==ue){ce[0]=de;e:for(var z=0,Y=ce.length,be=Y>>>1;z<be;){var Me=2*(z+1)-1,Ve=ce[Me],it=Me+1,ct=ce[it];if(0>i(Ve,de))it<Y&&0>i(ct,Ve)?(ce[z]=ct,ce[it]=de,z=it):(ce[z]=Ve,ce[Me]=de,z=Me);else if(it<Y&&0>i(ct,de))ce[z]=ct,ce[it]=de,z=it;else break e}}return ue}function i(ce,ue){var de=ce.sortIndex-ue.sortIndex;return de!==0?de:ce.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,x=3,w=!1,S=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(ce){for(var ue=n(f);ue!==null;){if(ue.callback===null)r(f);else if(ue.startTime<=ce)r(f),ue.sortIndex=ue.expirationTime,e(h,ue);else break;ue=n(f)}}function F(ce){if(b=!1,O(ce),!S)if(n(h)!==null)S=!0,st(H);else{var ue=n(f);ue!==null&&qe(F,ue.startTime-ce)}}function H(ce,ue){S=!1,b&&(b=!1,j(I),I=-1),w=!0;var de=x;try{for(O(ue),y=n(h);y!==null&&(!(y.expirationTime>ue)||ce&&!V());){var z=y.callback;if(typeof z=="function"){y.callback=null,x=y.priorityLevel;var Y=z(y.expirationTime<=ue);ue=t.unstable_now(),typeof Y=="function"?y.callback=Y:y===n(h)&&r(h),O(ue)}else r(h);y=n(h)}if(y!==null)var be=!0;else{var Me=n(f);Me!==null&&qe(F,Me.startTime-ue),be=!1}return be}finally{y=null,x=de,w=!1}}var K=!1,R=null,I=-1,A=5,k=-1;function V(){return!(t.unstable_now()-k<A)}function U(){if(R!==null){var ce=t.unstable_now();k=ce;var ue=!0;try{ue=R(!0,ce)}finally{ue?D():(K=!1,R=null)}}else K=!1}var D;if(typeof M=="function")D=function(){M(U)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ke=xe.port2;xe.port1.onmessage=U,D=function(){Ke.postMessage(null)}}else D=function(){N(U,0)};function st(ce){R=ce,K||(K=!0,D())}function qe(ce,ue){I=N(function(){ce(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,st(H))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(ce){switch(x){case 1:case 2:case 3:var ue=3;break;default:ue=x}var de=x;x=ue;try{return ce()}finally{x=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,ue){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var de=x;x=ce;try{return ue()}finally{x=de}},t.unstable_scheduleCallback=function(ce,ue,de){var z=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?z+de:z):de=z,ce){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=de+Y,ce={id:g++,callback:ue,priorityLevel:ce,startTime:de,expirationTime:Y,sortIndex:-1},de>z?(ce.sortIndex=de,e(f,ce),n(h)===null&&ce===n(f)&&(b?(j(I),I=-1):b=!0,qe(F,de-z))):(ce.sortIndex=Y,e(h,ce),S||w||(S=!0,st(H))),ce},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ce){var ue=x;return function(){var de=x;x=ue;try{return ce.apply(this,arguments)}finally{x=de}}}}(y0)),y0}var Zw;function MI(){return Zw||(Zw=1,g0.exports=DI()),g0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function OI(){if(e2)return Jr;e2=1;var t=Ax(),e=MI();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,l){c(s,l),c(s+"Capture",l)}function c(s,l){for(i[s]=l,s=0;s<l.length;s++)r.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(s){return h.call(y,s)?!0:h.call(g,s)?!1:f.test(s)?y[s]=!0:(g[s]=!0,!1)}function w(s,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,l,d,m){if(l===null||typeof l>"u"||w(s,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(s,l,d,m,v,E,P){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=E,this.removeEmptyString=P}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];N[l]=new b(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(j,M);N[l]=new b(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(j,M);N[l]=new b(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(j,M);N[l]=new b(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,l,d,m){var v=N.hasOwnProperty(l)?N[l]:null;(v!==null?v.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(S(l,d,v,m)&&(d=null),m||v===null?x(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):v.mustUseProperty?s[v.propertyName]=d===null?v.type===3?!1:"":d:(l=v.attributeName,m=v.attributeNamespace,d===null?s.removeAttribute(l):(v=v.type,d=v===3||v===4&&d===!0?"":""+d,m?s.setAttributeNS(m,l,d):s.setAttribute(l,d))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),K=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),qe=Symbol.for("react.offscreen"),ce=Symbol.iterator;function ue(s){return s===null||typeof s!="object"?null:(s=ce&&s[ce]||s["@@iterator"],typeof s=="function"?s:null)}var de=Object.assign,z;function Y(s){if(z===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);z=l&&l[1]||""}return`
`+z+s}var be=!1;function Me(s,l){if(!s||be)return"";be=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ae){var m=ae}Reflect.construct(s,[],l)}else{try{l.call()}catch(ae){m=ae}s.call(l.prototype)}else{try{throw Error()}catch(ae){m=ae}s()}}catch(ae){if(ae&&m&&typeof ae.stack=="string"){for(var v=ae.stack.split(`
`),E=m.stack.split(`
`),P=v.length-1,$=E.length-1;1<=P&&0<=$&&v[P]!==E[$];)$--;for(;1<=P&&0<=$;P--,$--)if(v[P]!==E[$]){if(P!==1||$!==1)do if(P--,$--,0>$||v[P]!==E[$]){var W=`
`+v[P].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=P&&0<=$);break}}}finally{be=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?Y(s):""}function Ve(s){switch(s.tag){case 5:return Y(s.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return s=Me(s.type,!1),s;case 11:return s=Me(s.type.render,!1),s;case 1:return s=Me(s.type,!0),s;default:return""}}function it(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case K:return"Portal";case A:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case xe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case k:return(s._context.displayName||"Context")+".Provider";case U:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ke:return l=s.displayName||null,l!==null?l:it(s.type)||"Memo";case st:l=s._payload,s=s._init;try{return it(s(l))}catch{}}return null}function ct(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return it(l);case 8:return l===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Be(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function et(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ut(s){var l=et(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,E=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return v.call(this)},set:function(P){m=""+P,E.call(this,P)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function _t(s){s._valueTracker||(s._valueTracker=ut(s))}function mt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return s&&(m=et(s)?s.checked?"true":"false":s.value),s=m,s!==d?(l.setValue(s),!0):!1}function kt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ot(s,l){var d=l.checked;return de({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function ie(s,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=Be(l.value!=null?l.value:d),s._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Fe(s,l){l=l.checked,l!=null&&O(s,"checked",l,!1)}function je(s,l){Fe(s,l);var d=Be(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Ze(s,l.type,d):l.hasOwnProperty("defaultValue")&&Ze(s,l.type,Be(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function fe(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function Ze(s,l,d){(l!=="number"||kt(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var Xe=Array.isArray;function jt(s,l,d,m){if(s=s.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<s.length;d++)v=l.hasOwnProperty("$"+s[d].value),s[d].selected!==v&&(s[d].selected=v),v&&m&&(s[d].defaultSelected=!0)}else{for(d=""+Be(d),l=null,v=0;v<s.length;v++){if(s[v].value===d){s[v].selected=!0,m&&(s[v].defaultSelected=!0);return}l!==null||s[v].disabled||(l=s[v])}l!==null&&(l.selected=!0)}}function Nt(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return de({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function At(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(Xe(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:Be(d)}}function _e(s,l){var d=Be(l.value),m=Be(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),m!=null&&(s.defaultValue=""+m)}function ne(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function ge(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?ge(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var te,Ie=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,v){MSApp.execUnsafeLocalFunction(function(){return s(l,d,m,v)})}:s}(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(te=te||document.createElement("div"),te.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=te.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function B(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var Q={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},le=["Webkit","ms","Moz","O"];Object.keys(Q).forEach(function(s){le.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),Q[l]=Q[s]})});function J(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Q.hasOwnProperty(s)&&Q[s]?(""+l).trim():l+"px"}function se(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,v=J(d,l[d],m);d==="float"&&(d="cssFloat"),m?s.setProperty(d,v):s[d]=v}}var Ue=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ze(s,l){if(l){if(Ue[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function q(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function He(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var dt=null,gt=null,Le=null;function ve(s){if(s=wu(s)){if(typeof dt!="function")throw Error(n(280));var l=s.stateNode;l&&(l=Th(l),dt(s.stateNode,s.type,l))}}function Oe(s){gt?Le?Le.push(s):Le=[s]:gt=s}function It(){if(gt){var s=gt,l=Le;if(Le=gt=null,ve(s),l)for(s=0;s<l.length;s++)ve(l[s])}}function ht(s,l){return s(l)}function Ht(){}var bt=!1;function Dt(s,l,d){if(bt)return s(l,d);bt=!0;try{return ht(s,l,d)}finally{bt=!1,(gt!==null||Le!==null)&&(Ht(),It())}}function De(s,l){var d=s.stateNode;if(d===null)return null;var m=Th(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var fn=!1;if(u)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){fn=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{fn=!1}function br(s,l,d,m,v,E,P,$,W){var ae=Array.prototype.slice.call(arguments,3);try{l.apply(d,ae)}catch(Te){this.onError(Te)}}var wr=!1,bi=null,Fn=!1,or=null,as={onError:function(s){wr=!0,bi=s}};function Ws(s,l,d,m,v,E,P,$,W){wr=!1,bi=null,br.apply(as,arguments)}function Ao(s,l,d,m,v,E,P,$,W){if(Ws.apply(this,arguments),wr){if(wr){var ae=bi;wr=!1,bi=null}else throw Error(n(198));Fn||(Fn=!0,or=ae)}}function Hr(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function os(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function vn(s){if(Hr(s)!==s)throw Error(n(188))}function su(s){var l=s.alternate;if(!l){if(l=Hr(s),l===null)throw Error(n(188));return l!==s?null:s}for(var d=s,m=l;;){var v=d.return;if(v===null)break;var E=v.alternate;if(E===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===d)return vn(v),s;if(E===m)return vn(v),l;E=E.sibling}throw Error(n(188))}if(d.return!==m.return)d=v,m=E;else{for(var P=!1,$=v.child;$;){if($===d){P=!0,d=v,m=E;break}if($===m){P=!0,m=v,d=E;break}$=$.sibling}if(!P){for($=E.child;$;){if($===d){P=!0,d=E,m=v;break}if($===m){P=!0,m=E,d=v;break}$=$.sibling}if(!P)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?s:l}function wi(s){return s=su(s),s!==null?lr(s):null}function lr(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=lr(s);if(l!==null)return l;s=s.sibling}return null}var ls=e.unstable_scheduleCallback,oi=e.unstable_cancelCallback,jo=e.unstable_shouldYield,Cl=e.unstable_requestPaint,Yt=e.unstable_now,Al=e.unstable_getCurrentPriorityLevel,qs=e.unstable_ImmediatePriority,cs=e.unstable_UserBlockingPriority,Dr=e.unstable_NormalPriority,us=e.unstable_LowPriority,jl=e.unstable_IdlePriority,Gs=null,Mr=null;function Il(s){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(Gs,s,void 0,(s.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:Pl,Io=Math.log,Ks=Math.LN2;function Pl(s){return s>>>=0,s===0?32:31-(Io(s)/Ks|0)|0}var Ca=64,Aa=4194304;function ds(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Xs(s,l){var d=s.pendingLanes;if(d===0)return 0;var m=0,v=s.suspendedLanes,E=s.pingedLanes,P=d&268435455;if(P!==0){var $=P&~v;$!==0?m=ds($):(E&=P,E!==0&&(m=ds(E)))}else P=d&~v,P!==0?m=ds(P):E!==0&&(m=ds(E));if(m===0)return 0;if(l!==0&&l!==m&&(l&v)===0&&(v=m&-m,E=l&-l,v>=E||v===16&&(E&4194240)!==0))return l;if((m&4)!==0&&(m|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=m;0<l;)d=31-cr(l),v=1<<d,m|=s[d],l&=~v;return m}function au(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _i(s,l){for(var d=s.suspendedLanes,m=s.pingedLanes,v=s.expirationTimes,E=s.pendingLanes;0<E;){var P=31-cr(E),$=1<<P,W=v[P];W===-1?(($&d)===0||($&m)!==0)&&(v[P]=au($,l)):W<=l&&(s.expiredLanes|=$),E&=~$}}function Or(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function G(){var s=Ca;return Ca<<=1,(Ca&4194240)===0&&(Ca=64),s}function pe(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Se(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-cr(l),s[l]=d}function Ce(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<d;){var v=31-cr(d),E=1<<v;l[v]=0,m[v]=-1,s[v]=-1,d&=~E}}function Ye(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var m=31-cr(d),v=1<<m;v&l|s[m]&l&&(s[m]|=l),d&=~v}}var Ge=0;function Gt(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Tn,Fi,Qs,Ui,Jt,ja=!1,hs=[],ur=null,$i=null,zi=null,Ia=new Map,Ei=new Map,fs=[],Hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ch(s,l){switch(s){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":Ia.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(l.pointerId)}}function Wr(s,l,d,m,v,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:E,targetContainers:[v]},l!==null&&(l=wu(l),l!==null&&Fi(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),s)}function Wm(s,l,d,m,v){switch(l){case"focusin":return ur=Wr(ur,s,l,d,m,v),!0;case"dragenter":return $i=Wr($i,s,l,d,m,v),!0;case"mouseover":return zi=Wr(zi,s,l,d,m,v),!0;case"pointerover":var E=v.pointerId;return Ia.set(E,Wr(Ia.get(E)||null,s,l,d,m,v)),!0;case"gotpointercapture":return E=v.pointerId,Ei.set(E,Wr(Ei.get(E)||null,s,l,d,m,v)),!0}return!1}function uh(s){var l=Oo(s.target);if(l!==null){var d=Hr(l);if(d!==null){if(l=d.tag,l===13){if(l=os(d),l!==null){s.blockedOn=l,Jt(s.priority,function(){Qs(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ys(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Rl(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);Ee=m,d.target.dispatchEvent(m),Ee=null}else return l=wu(d),l!==null&&Fi(l),s.blockedOn=d,!1;l.shift()}return!0}function Po(s,l,d){Ys(s)&&d.delete(l)}function dh(){ja=!1,ur!==null&&Ys(ur)&&(ur=null),$i!==null&&Ys($i)&&($i=null),zi!==null&&Ys(zi)&&(zi=null),Ia.forEach(Po),Ei.forEach(Po)}function Bi(s,l){s.blockedOn===l&&(s.blockedOn=null,ja||(ja=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dh)))}function Hi(s){function l(v){return Bi(v,s)}if(0<hs.length){Bi(hs[0],s);for(var d=1;d<hs.length;d++){var m=hs[d];m.blockedOn===s&&(m.blockedOn=null)}}for(ur!==null&&Bi(ur,s),$i!==null&&Bi($i,s),zi!==null&&Bi(zi,s),Ia.forEach(l),Ei.forEach(l),d=0;d<fs.length;d++)m=fs[d],m.blockedOn===s&&(m.blockedOn=null);for(;0<fs.length&&(d=fs[0],d.blockedOn===null);)uh(d),d.blockedOn===null&&fs.shift()}var Js=F.ReactCurrentBatchConfig,Pa=!0;function pn(s,l,d,m){var v=Ge,E=Js.transition;Js.transition=null;try{Ge=1,ou(s,l,d,m)}finally{Ge=v,Js.transition=E}}function qm(s,l,d,m){var v=Ge,E=Js.transition;Js.transition=null;try{Ge=4,ou(s,l,d,m)}finally{Ge=v,Js.transition=E}}function ou(s,l,d,m){if(Pa){var v=Rl(s,l,d,m);if(v===null)rg(s,l,m,Ro,d),ch(s,m);else if(Wm(v,s,l,d,m))m.stopPropagation();else if(ch(s,m),l&4&&-1<Hm.indexOf(s)){for(;v!==null;){var E=wu(v);if(E!==null&&Tn(E),E=Rl(s,l,d,m),E===null&&rg(s,l,m,Ro,d),E===v)break;v=E}v!==null&&m.stopPropagation()}else rg(s,l,m,null,d)}}var Ro=null;function Rl(s,l,d,m){if(Ro=null,s=He(m),s=Oo(s),s!==null)if(l=Hr(s),l===null)s=null;else if(d=l.tag,d===13){if(s=os(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Ro=s,null}function lu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Al()){case qs:return 1;case cs:return 4;case Dr:case us:return 16;case jl:return 536870912;default:return 16}default:return 16}}var li=null,Dl=null,qr=null;function cu(){if(qr)return qr;var s,l=Dl,d=l.length,m,v="value"in li?li.value:li.textContent,E=v.length;for(s=0;s<d&&l[s]===v[s];s++);var P=d-s;for(m=1;m<=P&&l[d-m]===v[E-m];m++);return qr=v.slice(s,1<m?1-m:void 0)}function Ml(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ps(){return!0}function uu(){return!1}function dr(s){function l(d,m,v,E,P){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=E,this.target=P,this.currentTarget=null;for(var $ in s)s.hasOwnProperty($)&&(d=s[$],this[$]=d?d(E):E[$]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ps:uu,this.isPropagationStopped=uu,this}return de(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),l}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=dr(Wi),ms=de({},Wi,{view:0,detail:0}),Gm=dr(ms),Ll,Zs,Ra,Do=de({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ra&&(Ra&&s.type==="mousemove"?(Ll=s.screenX-Ra.screenX,Zs=s.screenY-Ra.screenY):Zs=Ll=0,Ra=s),Ll)},movementY:function(s){return"movementY"in s?s.movementY:Zs}}),Vl=dr(Do),du=de({},Do,{dataTransfer:0}),hh=dr(du),Fl=de({},ms,{relatedTarget:0}),Ul=dr(Fl),fh=de({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),ea=dr(fh),ph=de({},Wi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),mh=dr(ph),gh=de({},Wi,{data:0}),hu=dr(gh),$l={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=yh[s])?!!l[s]:!1}function gs(){return xh}var p=de({},ms,{key:function(s){if(s.key){var l=$l[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ml(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Lr[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(s){return s.type==="keypress"?Ml(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ml(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=dr(p),C=de({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L=dr(C),Z=de({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),he=dr(Z),$e=de({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xt=dr($e),Kn=de({},Do,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ut=dr(Kn),er=[9,13,27,32],Un=u&&"CompositionEvent"in window,ki=null;u&&"documentMode"in document&&(ki=document.documentMode);var ci=u&&"TextEvent"in window&&!ki,Mo=u&&(!Un||ki&&8<ki&&11>=ki),zl=" ",z1=!1;function B1(s,l){switch(s){case"keyup":return er.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H1(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Bl=!1;function Nj(s,l){switch(s){case"compositionend":return H1(l);case"keypress":return l.which!==32?null:(z1=!0,zl);case"textInput":return s=l.data,s===zl&&z1?null:s;default:return null}}function Cj(s,l){if(Bl)return s==="compositionend"||!Un&&B1(s,l)?(s=cu(),qr=Dl=li=null,Bl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Mo&&l.locale!=="ko"?null:l.data;default:return null}}var Aj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Aj[s.type]:l==="textarea"}function q1(s,l,d,m){Oe(m),l=Eh(l,"onChange"),0<l.length&&(d=new Ol("onChange","change",null,d,m),s.push({event:d,listeners:l}))}var fu=null,pu=null;function jj(s){ub(s,0)}function vh(s){var l=Kl(s);if(mt(l))return s}function Ij(s,l){if(s==="change")return l}var G1=!1;if(u){var Km;if(u){var Xm="oninput"in document;if(!Xm){var K1=document.createElement("div");K1.setAttribute("oninput","return;"),Xm=typeof K1.oninput=="function"}Km=Xm}else Km=!1;G1=Km&&(!document.documentMode||9<document.documentMode)}function X1(){fu&&(fu.detachEvent("onpropertychange",Q1),pu=fu=null)}function Q1(s){if(s.propertyName==="value"&&vh(pu)){var l=[];q1(l,pu,s,He(s)),Dt(jj,l)}}function Pj(s,l,d){s==="focusin"?(X1(),fu=l,pu=d,fu.attachEvent("onpropertychange",Q1)):s==="focusout"&&X1()}function Rj(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return vh(pu)}function Dj(s,l){if(s==="click")return vh(l)}function Mj(s,l){if(s==="input"||s==="change")return vh(l)}function Oj(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var qi=typeof Object.is=="function"?Object.is:Oj;function mu(s,l){if(qi(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!h.call(l,v)||!qi(s[v],l[v]))return!1}return!0}function Y1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function J1(s,l){var d=Y1(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=l&&m>=l)return{node:d,offset:l-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Y1(d)}}function Z1(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Z1(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function eb(){for(var s=window,l=kt();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=kt(s.document)}return l}function Qm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function Lj(s){var l=eb(),d=s.focusedElem,m=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&Z1(d.ownerDocument.documentElement,d)){if(m!==null&&Qm(d)){if(l=m.start,s=m.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var v=d.textContent.length,E=Math.min(m.start,v);m=m.end===void 0?E:Math.min(m.end,v),!s.extend&&E>m&&(v=m,m=E,E=v),v=J1(d,E);var P=J1(d,m);v&&P&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==P.node||s.focusOffset!==P.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),s.removeAllRanges(),E>m?(s.addRange(l),s.extend(P.node,P.offset)):(l.setEnd(P.node,P.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Vj=u&&"documentMode"in document&&11>=document.documentMode,Hl=null,Ym=null,gu=null,Jm=!1;function tb(s,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Jm||Hl==null||Hl!==kt(m)||(m=Hl,"selectionStart"in m&&Qm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),gu&&mu(gu,m)||(gu=m,m=Eh(Ym,"onSelect"),0<m.length&&(l=new Ol("onSelect","select",null,l,d),s.push({event:l,listeners:m}),l.target=Hl)))}function bh(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Wl={animationend:bh("Animation","AnimationEnd"),animationiteration:bh("Animation","AnimationIteration"),animationstart:bh("Animation","AnimationStart"),transitionend:bh("Transition","TransitionEnd")},Zm={},nb={};u&&(nb=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function wh(s){if(Zm[s])return Zm[s];if(!Wl[s])return s;var l=Wl[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in nb)return Zm[s]=l[d];return s}var rb=wh("animationend"),ib=wh("animationiteration"),sb=wh("animationstart"),ab=wh("transitionend"),ob=new Map,lb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(s,l){ob.set(s,l),a(l,[s])}for(var eg=0;eg<lb.length;eg++){var tg=lb[eg],Fj=tg.toLowerCase(),Uj=tg[0].toUpperCase()+tg.slice(1);Da(Fj,"on"+Uj)}Da(rb,"onAnimationEnd"),Da(ib,"onAnimationIteration"),Da(sb,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(ab,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$j=new Set("cancel close invalid load scroll toggle".split(" ").concat(yu));function cb(s,l,d){var m=s.type||"unknown-event";s.currentTarget=d,Ao(m,l,void 0,s),s.currentTarget=null}function ub(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],v=m.event;m=m.listeners;e:{var E=void 0;if(l)for(var P=m.length-1;0<=P;P--){var $=m[P],W=$.instance,ae=$.currentTarget;if($=$.listener,W!==E&&v.isPropagationStopped())break e;cb(v,$,ae),E=W}else for(P=0;P<m.length;P++){if($=m[P],W=$.instance,ae=$.currentTarget,$=$.listener,W!==E&&v.isPropagationStopped())break e;cb(v,$,ae),E=W}}}if(Fn)throw s=or,Fn=!1,or=null,s}function ln(s,l){var d=l[cg];d===void 0&&(d=l[cg]=new Set);var m=s+"__bubble";d.has(m)||(db(l,s,2,!1),d.add(m))}function ng(s,l,d){var m=0;l&&(m|=4),db(d,s,m,l)}var _h="_reactListening"+Math.random().toString(36).slice(2);function xu(s){if(!s[_h]){s[_h]=!0,r.forEach(function(d){d!=="selectionchange"&&($j.has(d)||ng(d,!1,s),ng(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[_h]||(l[_h]=!0,ng("selectionchange",!1,l))}}function db(s,l,d,m){switch(lu(l)){case 1:var v=pn;break;case 4:v=qm;break;default:v=ou}d=v.bind(null,l,d,s),v=void 0,!fn||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),m?v!==void 0?s.addEventListener(l,d,{capture:!0,passive:v}):s.addEventListener(l,d,!0):v!==void 0?s.addEventListener(l,d,{passive:v}):s.addEventListener(l,d,!1)}function rg(s,l,d,m,v){var E=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var $=m.stateNode.containerInfo;if($===v||$.nodeType===8&&$.parentNode===v)break;if(P===4)for(P=m.return;P!==null;){var W=P.tag;if((W===3||W===4)&&(W=P.stateNode.containerInfo,W===v||W.nodeType===8&&W.parentNode===v))return;P=P.return}for(;$!==null;){if(P=Oo($),P===null)return;if(W=P.tag,W===5||W===6){m=E=P;continue e}$=$.parentNode}}m=m.return}Dt(function(){var ae=E,Te=He(d),Ae=[];e:{var ke=ob.get(s);if(ke!==void 0){var Qe=Ol,nt=s;switch(s){case"keypress":if(Ml(d)===0)break e;case"keydown":case"keyup":Qe=_;break;case"focusin":nt="focus",Qe=Ul;break;case"focusout":nt="blur",Qe=Ul;break;case"beforeblur":case"afterblur":Qe=Ul;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=he;break;case rb:case ib:case sb:Qe=ea;break;case ab:Qe=Xt;break;case"scroll":Qe=Gm;break;case"wheel":Qe=Ut;break;case"copy":case"cut":case"paste":Qe=mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=L}var rt=(l&4)!==0,Rn=!rt&&s==="scroll",ee=rt?ke!==null?ke+"Capture":null:ke;rt=[];for(var X=ae,re;X!==null;){re=X;var Re=re.stateNode;if(re.tag===5&&Re!==null&&(re=Re,ee!==null&&(Re=De(X,ee),Re!=null&&rt.push(vu(X,Re,re)))),Rn)break;X=X.return}0<rt.length&&(ke=new Qe(ke,nt,null,d,Te),Ae.push({event:ke,listeners:rt}))}}if((l&7)===0){e:{if(ke=s==="mouseover"||s==="pointerover",Qe=s==="mouseout"||s==="pointerout",ke&&d!==Ee&&(nt=d.relatedTarget||d.fromElement)&&(Oo(nt)||nt[ta]))break e;if((Qe||ke)&&(ke=Te.window===Te?Te:(ke=Te.ownerDocument)?ke.defaultView||ke.parentWindow:window,Qe?(nt=d.relatedTarget||d.toElement,Qe=ae,nt=nt?Oo(nt):null,nt!==null&&(Rn=Hr(nt),nt!==Rn||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(Qe=null,nt=ae),Qe!==nt)){if(rt=Vl,Re="onMouseLeave",ee="onMouseEnter",X="mouse",(s==="pointerout"||s==="pointerover")&&(rt=L,Re="onPointerLeave",ee="onPointerEnter",X="pointer"),Rn=Qe==null?ke:Kl(Qe),re=nt==null?ke:Kl(nt),ke=new rt(Re,X+"leave",Qe,d,Te),ke.target=Rn,ke.relatedTarget=re,Re=null,Oo(Te)===ae&&(rt=new rt(ee,X+"enter",nt,d,Te),rt.target=re,rt.relatedTarget=Rn,Re=rt),Rn=Re,Qe&&nt)t:{for(rt=Qe,ee=nt,X=0,re=rt;re;re=ql(re))X++;for(re=0,Re=ee;Re;Re=ql(Re))re++;for(;0<X-re;)rt=ql(rt),X--;for(;0<re-X;)ee=ql(ee),re--;for(;X--;){if(rt===ee||ee!==null&&rt===ee.alternate)break t;rt=ql(rt),ee=ql(ee)}rt=null}else rt=null;Qe!==null&&hb(Ae,ke,Qe,rt,!1),nt!==null&&Rn!==null&&hb(Ae,Rn,nt,rt,!0)}}e:{if(ke=ae?Kl(ae):window,Qe=ke.nodeName&&ke.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&ke.type==="file")var at=Ij;else if(W1(ke))if(G1)at=Mj;else{at=Rj;var ft=Pj}else(Qe=ke.nodeName)&&Qe.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(at=Dj);if(at&&(at=at(s,ae))){q1(Ae,at,d,Te);break e}ft&&ft(s,ke,ae),s==="focusout"&&(ft=ke._wrapperState)&&ft.controlled&&ke.type==="number"&&Ze(ke,"number",ke.value)}switch(ft=ae?Kl(ae):window,s){case"focusin":(W1(ft)||ft.contentEditable==="true")&&(Hl=ft,Ym=ae,gu=null);break;case"focusout":gu=Ym=Hl=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,tb(Ae,d,Te);break;case"selectionchange":if(Vj)break;case"keydown":case"keyup":tb(Ae,d,Te)}var pt;if(Un)e:{switch(s){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else Bl?B1(s,d)&&(wt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(wt="onCompositionStart");wt&&(Mo&&d.locale!=="ko"&&(Bl||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Bl&&(pt=cu()):(li=Te,Dl="value"in li?li.value:li.textContent,Bl=!0)),ft=Eh(ae,wt),0<ft.length&&(wt=new hu(wt,s,null,d,Te),Ae.push({event:wt,listeners:ft}),pt?wt.data=pt:(pt=H1(d),pt!==null&&(wt.data=pt)))),(pt=ci?Nj(s,d):Cj(s,d))&&(ae=Eh(ae,"onBeforeInput"),0<ae.length&&(Te=new hu("onBeforeInput","beforeinput",null,d,Te),Ae.push({event:Te,listeners:ae}),Te.data=pt))}ub(Ae,l)})}function vu(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Eh(s,l){for(var d=l+"Capture",m=[];s!==null;){var v=s,E=v.stateNode;v.tag===5&&E!==null&&(v=E,E=De(s,d),E!=null&&m.unshift(vu(s,E,v)),E=De(s,l),E!=null&&m.push(vu(s,E,v))),s=s.return}return m}function ql(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function hb(s,l,d,m,v){for(var E=l._reactName,P=[];d!==null&&d!==m;){var $=d,W=$.alternate,ae=$.stateNode;if(W!==null&&W===m)break;$.tag===5&&ae!==null&&($=ae,v?(W=De(d,E),W!=null&&P.unshift(vu(d,W,$))):v||(W=De(d,E),W!=null&&P.push(vu(d,W,$)))),d=d.return}P.length!==0&&s.push({event:l,listeners:P})}var zj=/\r\n?/g,Bj=/\u0000|\uFFFD/g;function fb(s){return(typeof s=="string"?s:""+s).replace(zj,`
`).replace(Bj,"")}function kh(s,l,d){if(l=fb(l),fb(s)!==l&&d)throw Error(n(425))}function Sh(){}var ig=null,sg=null;function ag(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var og=typeof setTimeout=="function"?setTimeout:void 0,Hj=typeof clearTimeout=="function"?clearTimeout:void 0,pb=typeof Promise=="function"?Promise:void 0,Wj=typeof queueMicrotask=="function"?queueMicrotask:typeof pb<"u"?function(s){return pb.resolve(null).then(s).catch(qj)}:og;function qj(s){setTimeout(function(){throw s})}function lg(s,l){var d=l,m=0;do{var v=d.nextSibling;if(s.removeChild(d),v&&v.nodeType===8)if(d=v.data,d==="/$"){if(m===0){s.removeChild(v),Hi(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=v}while(d);Hi(l)}function Ma(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function mb(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var Gl=Math.random().toString(36).slice(2),ys="__reactFiber$"+Gl,bu="__reactProps$"+Gl,ta="__reactContainer$"+Gl,cg="__reactEvents$"+Gl,Gj="__reactListeners$"+Gl,Kj="__reactHandles$"+Gl;function Oo(s){var l=s[ys];if(l)return l;for(var d=s.parentNode;d;){if(l=d[ta]||d[ys]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=mb(s);s!==null;){if(d=s[ys])return d;s=mb(s)}return l}s=d,d=s.parentNode}return null}function wu(s){return s=s[ys]||s[ta],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Kl(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Th(s){return s[bu]||null}var ug=[],Xl=-1;function Oa(s){return{current:s}}function cn(s){0>Xl||(s.current=ug[Xl],ug[Xl]=null,Xl--)}function rn(s,l){Xl++,ug[Xl]=s.current,s.current=l}var La={},_r=Oa(La),Gr=Oa(!1),Lo=La;function Ql(s,l){var d=s.type.contextTypes;if(!d)return La;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var v={},E;for(E in d)v[E]=l[E];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=v),v}function Kr(s){return s=s.childContextTypes,s!=null}function Nh(){cn(Gr),cn(_r)}function gb(s,l,d){if(_r.current!==La)throw Error(n(168));rn(_r,l),rn(Gr,d)}function yb(s,l,d){var m=s.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var v in m)if(!(v in l))throw Error(n(108,ct(s)||"Unknown",v));return de({},d,m)}function Ch(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||La,Lo=_r.current,rn(_r,s),rn(Gr,Gr.current),!0}function xb(s,l,d){var m=s.stateNode;if(!m)throw Error(n(169));d?(s=yb(s,l,Lo),m.__reactInternalMemoizedMergedChildContext=s,cn(Gr),cn(_r),rn(_r,s)):cn(Gr),rn(Gr,d)}var na=null,Ah=!1,dg=!1;function vb(s){na===null?na=[s]:na.push(s)}function Xj(s){Ah=!0,vb(s)}function Va(){if(!dg&&na!==null){dg=!0;var s=0,l=Ge;try{var d=na;for(Ge=1;s<d.length;s++){var m=d[s];do m=m(!0);while(m!==null)}na=null,Ah=!1}catch(v){throw na!==null&&(na=na.slice(s+1)),ls(qs,Va),v}finally{Ge=l,dg=!1}}return null}var Yl=[],Jl=0,jh=null,Ih=0,Si=[],Ti=0,Vo=null,ra=1,ia="";function Fo(s,l){Yl[Jl++]=Ih,Yl[Jl++]=jh,jh=s,Ih=l}function bb(s,l,d){Si[Ti++]=ra,Si[Ti++]=ia,Si[Ti++]=Vo,Vo=s;var m=ra;s=ia;var v=32-cr(m)-1;m&=~(1<<v),d+=1;var E=32-cr(l)+v;if(30<E){var P=v-v%5;E=(m&(1<<P)-1).toString(32),m>>=P,v-=P,ra=1<<32-cr(l)+v|d<<v|m,ia=E+s}else ra=1<<E|d<<v|m,ia=s}function hg(s){s.return!==null&&(Fo(s,1),bb(s,1,0))}function fg(s){for(;s===jh;)jh=Yl[--Jl],Yl[Jl]=null,Ih=Yl[--Jl],Yl[Jl]=null;for(;s===Vo;)Vo=Si[--Ti],Si[Ti]=null,ia=Si[--Ti],Si[Ti]=null,ra=Si[--Ti],Si[Ti]=null}var ui=null,di=null,mn=!1,Gi=null;function wb(s,l){var d=ji(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function _b(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,ui=s,di=Ma(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,ui=s,di=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Vo!==null?{id:ra,overflow:ia}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=ji(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,ui=s,di=null,!0):!1;default:return!1}}function pg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function mg(s){if(mn){var l=di;if(l){var d=l;if(!_b(s,l)){if(pg(s))throw Error(n(418));l=Ma(d.nextSibling);var m=ui;l&&_b(s,l)?wb(m,d):(s.flags=s.flags&-4097|2,mn=!1,ui=s)}}else{if(pg(s))throw Error(n(418));s.flags=s.flags&-4097|2,mn=!1,ui=s}}}function Eb(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;ui=s}function Ph(s){if(s!==ui)return!1;if(!mn)return Eb(s),mn=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!ag(s.type,s.memoizedProps)),l&&(l=di)){if(pg(s))throw kb(),Error(n(418));for(;l;)wb(s,l),l=Ma(l.nextSibling)}if(Eb(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){di=Ma(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}di=null}}else di=ui?Ma(s.stateNode.nextSibling):null;return!0}function kb(){for(var s=di;s;)s=Ma(s.nextSibling)}function Zl(){di=ui=null,mn=!1}function gg(s){Gi===null?Gi=[s]:Gi.push(s)}var Qj=F.ReactCurrentBatchConfig;function _u(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,s));var v=m,E=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(P){var $=v.refs;P===null?delete $[E]:$[E]=P},l._stringRef=E,l)}if(typeof s!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,s))}return s}function Rh(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Sb(s){var l=s._init;return l(s._payload)}function Tb(s){function l(ee,X){if(s){var re=ee.deletions;re===null?(ee.deletions=[X],ee.flags|=16):re.push(X)}}function d(ee,X){if(!s)return null;for(;X!==null;)l(ee,X),X=X.sibling;return null}function m(ee,X){for(ee=new Map;X!==null;)X.key!==null?ee.set(X.key,X):ee.set(X.index,X),X=X.sibling;return ee}function v(ee,X){return ee=qa(ee,X),ee.index=0,ee.sibling=null,ee}function E(ee,X,re){return ee.index=re,s?(re=ee.alternate,re!==null?(re=re.index,re<X?(ee.flags|=2,X):re):(ee.flags|=2,X)):(ee.flags|=1048576,X)}function P(ee){return s&&ee.alternate===null&&(ee.flags|=2),ee}function $(ee,X,re,Re){return X===null||X.tag!==6?(X=o0(re,ee.mode,Re),X.return=ee,X):(X=v(X,re),X.return=ee,X)}function W(ee,X,re,Re){var at=re.type;return at===R?Te(ee,X,re.props.children,Re,re.key):X!==null&&(X.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===st&&Sb(at)===X.type)?(Re=v(X,re.props),Re.ref=_u(ee,X,re),Re.return=ee,Re):(Re=rf(re.type,re.key,re.props,null,ee.mode,Re),Re.ref=_u(ee,X,re),Re.return=ee,Re)}function ae(ee,X,re,Re){return X===null||X.tag!==4||X.stateNode.containerInfo!==re.containerInfo||X.stateNode.implementation!==re.implementation?(X=l0(re,ee.mode,Re),X.return=ee,X):(X=v(X,re.children||[]),X.return=ee,X)}function Te(ee,X,re,Re,at){return X===null||X.tag!==7?(X=Go(re,ee.mode,Re,at),X.return=ee,X):(X=v(X,re),X.return=ee,X)}function Ae(ee,X,re){if(typeof X=="string"&&X!==""||typeof X=="number")return X=o0(""+X,ee.mode,re),X.return=ee,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case H:return re=rf(X.type,X.key,X.props,null,ee.mode,re),re.ref=_u(ee,null,X),re.return=ee,re;case K:return X=l0(X,ee.mode,re),X.return=ee,X;case st:var Re=X._init;return Ae(ee,Re(X._payload),re)}if(Xe(X)||ue(X))return X=Go(X,ee.mode,re,null),X.return=ee,X;Rh(ee,X)}return null}function ke(ee,X,re,Re){var at=X!==null?X.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return at!==null?null:$(ee,X,""+re,Re);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case H:return re.key===at?W(ee,X,re,Re):null;case K:return re.key===at?ae(ee,X,re,Re):null;case st:return at=re._init,ke(ee,X,at(re._payload),Re)}if(Xe(re)||ue(re))return at!==null?null:Te(ee,X,re,Re,null);Rh(ee,re)}return null}function Qe(ee,X,re,Re,at){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return ee=ee.get(re)||null,$(X,ee,""+Re,at);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case H:return ee=ee.get(Re.key===null?re:Re.key)||null,W(X,ee,Re,at);case K:return ee=ee.get(Re.key===null?re:Re.key)||null,ae(X,ee,Re,at);case st:var ft=Re._init;return Qe(ee,X,re,ft(Re._payload),at)}if(Xe(Re)||ue(Re))return ee=ee.get(re)||null,Te(X,ee,Re,at,null);Rh(X,Re)}return null}function nt(ee,X,re,Re){for(var at=null,ft=null,pt=X,wt=X=0,rr=null;pt!==null&&wt<re.length;wt++){pt.index>wt?(rr=pt,pt=null):rr=pt.sibling;var Bt=ke(ee,pt,re[wt],Re);if(Bt===null){pt===null&&(pt=rr);break}s&&pt&&Bt.alternate===null&&l(ee,pt),X=E(Bt,X,wt),ft===null?at=Bt:ft.sibling=Bt,ft=Bt,pt=rr}if(wt===re.length)return d(ee,pt),mn&&Fo(ee,wt),at;if(pt===null){for(;wt<re.length;wt++)pt=Ae(ee,re[wt],Re),pt!==null&&(X=E(pt,X,wt),ft===null?at=pt:ft.sibling=pt,ft=pt);return mn&&Fo(ee,wt),at}for(pt=m(ee,pt);wt<re.length;wt++)rr=Qe(pt,ee,wt,re[wt],Re),rr!==null&&(s&&rr.alternate!==null&&pt.delete(rr.key===null?wt:rr.key),X=E(rr,X,wt),ft===null?at=rr:ft.sibling=rr,ft=rr);return s&&pt.forEach(function(Ga){return l(ee,Ga)}),mn&&Fo(ee,wt),at}function rt(ee,X,re,Re){var at=ue(re);if(typeof at!="function")throw Error(n(150));if(re=at.call(re),re==null)throw Error(n(151));for(var ft=at=null,pt=X,wt=X=0,rr=null,Bt=re.next();pt!==null&&!Bt.done;wt++,Bt=re.next()){pt.index>wt?(rr=pt,pt=null):rr=pt.sibling;var Ga=ke(ee,pt,Bt.value,Re);if(Ga===null){pt===null&&(pt=rr);break}s&&pt&&Ga.alternate===null&&l(ee,pt),X=E(Ga,X,wt),ft===null?at=Ga:ft.sibling=Ga,ft=Ga,pt=rr}if(Bt.done)return d(ee,pt),mn&&Fo(ee,wt),at;if(pt===null){for(;!Bt.done;wt++,Bt=re.next())Bt=Ae(ee,Bt.value,Re),Bt!==null&&(X=E(Bt,X,wt),ft===null?at=Bt:ft.sibling=Bt,ft=Bt);return mn&&Fo(ee,wt),at}for(pt=m(ee,pt);!Bt.done;wt++,Bt=re.next())Bt=Qe(pt,ee,wt,Bt.value,Re),Bt!==null&&(s&&Bt.alternate!==null&&pt.delete(Bt.key===null?wt:Bt.key),X=E(Bt,X,wt),ft===null?at=Bt:ft.sibling=Bt,ft=Bt);return s&&pt.forEach(function(AI){return l(ee,AI)}),mn&&Fo(ee,wt),at}function Rn(ee,X,re,Re){if(typeof re=="object"&&re!==null&&re.type===R&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case H:e:{for(var at=re.key,ft=X;ft!==null;){if(ft.key===at){if(at=re.type,at===R){if(ft.tag===7){d(ee,ft.sibling),X=v(ft,re.props.children),X.return=ee,ee=X;break e}}else if(ft.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===st&&Sb(at)===ft.type){d(ee,ft.sibling),X=v(ft,re.props),X.ref=_u(ee,ft,re),X.return=ee,ee=X;break e}d(ee,ft);break}else l(ee,ft);ft=ft.sibling}re.type===R?(X=Go(re.props.children,ee.mode,Re,re.key),X.return=ee,ee=X):(Re=rf(re.type,re.key,re.props,null,ee.mode,Re),Re.ref=_u(ee,X,re),Re.return=ee,ee=Re)}return P(ee);case K:e:{for(ft=re.key;X!==null;){if(X.key===ft)if(X.tag===4&&X.stateNode.containerInfo===re.containerInfo&&X.stateNode.implementation===re.implementation){d(ee,X.sibling),X=v(X,re.children||[]),X.return=ee,ee=X;break e}else{d(ee,X);break}else l(ee,X);X=X.sibling}X=l0(re,ee.mode,Re),X.return=ee,ee=X}return P(ee);case st:return ft=re._init,Rn(ee,X,ft(re._payload),Re)}if(Xe(re))return nt(ee,X,re,Re);if(ue(re))return rt(ee,X,re,Re);Rh(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,X!==null&&X.tag===6?(d(ee,X.sibling),X=v(X,re),X.return=ee,ee=X):(d(ee,X),X=o0(re,ee.mode,Re),X.return=ee,ee=X),P(ee)):d(ee,X)}return Rn}var ec=Tb(!0),Nb=Tb(!1),Dh=Oa(null),Mh=null,tc=null,yg=null;function xg(){yg=tc=Mh=null}function vg(s){var l=Dh.current;cn(Dh),s._currentValue=l}function bg(s,l,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===d)break;s=s.return}}function nc(s,l){Mh=s,yg=tc=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Xr=!0),s.firstContext=null)}function Ni(s){var l=s._currentValue;if(yg!==s)if(s={context:s,memoizedValue:l,next:null},tc===null){if(Mh===null)throw Error(n(308));tc=s,Mh.dependencies={lanes:0,firstContext:s}}else tc=tc.next=s;return l}var Uo=null;function wg(s){Uo===null?Uo=[s]:Uo.push(s)}function Cb(s,l,d,m){var v=l.interleaved;return v===null?(d.next=d,wg(l)):(d.next=v.next,v.next=d),l.interleaved=d,sa(s,m)}function sa(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Fa=!1;function _g(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ab(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function aa(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Ua(s,l,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(zt&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,sa(s,d)}return v=m.interleaved,v===null?(l.next=l,wg(m)):(l.next=v.next,v.next=l),m.interleaved=l,sa(s,d)}function Oh(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,Ye(s,d)}}function jb(s,l){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var P={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?v=E=P:E=E.next=P,d=d.next}while(d!==null);E===null?v=E=l:E=E.next=l}else v=E=l;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:m.shared,effects:m.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function Lh(s,l,d,m){var v=s.updateQueue;Fa=!1;var E=v.firstBaseUpdate,P=v.lastBaseUpdate,$=v.shared.pending;if($!==null){v.shared.pending=null;var W=$,ae=W.next;W.next=null,P===null?E=ae:P.next=ae,P=W;var Te=s.alternate;Te!==null&&(Te=Te.updateQueue,$=Te.lastBaseUpdate,$!==P&&($===null?Te.firstBaseUpdate=ae:$.next=ae,Te.lastBaseUpdate=W))}if(E!==null){var Ae=v.baseState;P=0,Te=ae=W=null,$=E;do{var ke=$.lane,Qe=$.eventTime;if((m&ke)===ke){Te!==null&&(Te=Te.next={eventTime:Qe,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var nt=s,rt=$;switch(ke=l,Qe=d,rt.tag){case 1:if(nt=rt.payload,typeof nt=="function"){Ae=nt.call(Qe,Ae,ke);break e}Ae=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=rt.payload,ke=typeof nt=="function"?nt.call(Qe,Ae,ke):nt,ke==null)break e;Ae=de({},Ae,ke);break e;case 2:Fa=!0}}$.callback!==null&&$.lane!==0&&(s.flags|=64,ke=v.effects,ke===null?v.effects=[$]:ke.push($))}else Qe={eventTime:Qe,lane:ke,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Te===null?(ae=Te=Qe,W=Ae):Te=Te.next=Qe,P|=ke;if($=$.next,$===null){if($=v.shared.pending,$===null)break;ke=$,$=ke.next,ke.next=null,v.lastBaseUpdate=ke,v.shared.pending=null}}while(!0);if(Te===null&&(W=Ae),v.baseState=W,v.firstBaseUpdate=ae,v.lastBaseUpdate=Te,l=v.shared.interleaved,l!==null){v=l;do P|=v.lane,v=v.next;while(v!==l)}else E===null&&(v.shared.lanes=0);Bo|=P,s.lanes=P,s.memoizedState=Ae}}function Ib(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var m=s[l],v=m.callback;if(v!==null){if(m.callback=null,m=d,typeof v!="function")throw Error(n(191,v));v.call(m)}}}var Eu={},xs=Oa(Eu),ku=Oa(Eu),Su=Oa(Eu);function $o(s){if(s===Eu)throw Error(n(174));return s}function Eg(s,l){switch(rn(Su,l),rn(ku,s),rn(xs,Eu),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ne(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Ne(l,s)}cn(xs),rn(xs,l)}function rc(){cn(xs),cn(ku),cn(Su)}function Pb(s){$o(Su.current);var l=$o(xs.current),d=Ne(l,s.type);l!==d&&(rn(ku,s),rn(xs,d))}function kg(s){ku.current===s&&(cn(xs),cn(ku))}var bn=Oa(0);function Vh(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Sg=[];function Tg(){for(var s=0;s<Sg.length;s++)Sg[s]._workInProgressVersionPrimary=null;Sg.length=0}var Fh=F.ReactCurrentDispatcher,Ng=F.ReactCurrentBatchConfig,zo=0,wn=null,Xn=null,tr=null,Uh=!1,Tu=!1,Nu=0,Yj=0;function Er(){throw Error(n(321))}function Cg(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!qi(s[d],l[d]))return!1;return!0}function Ag(s,l,d,m,v,E){if(zo=E,wn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Fh.current=s===null||s.memoizedState===null?tI:nI,s=d(m,v),Tu){E=0;do{if(Tu=!1,Nu=0,25<=E)throw Error(n(301));E+=1,tr=Xn=null,l.updateQueue=null,Fh.current=rI,s=d(m,v)}while(Tu)}if(Fh.current=Bh,l=Xn!==null&&Xn.next!==null,zo=0,tr=Xn=wn=null,Uh=!1,l)throw Error(n(300));return s}function jg(){var s=Nu!==0;return Nu=0,s}function vs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?wn.memoizedState=tr=s:tr=tr.next=s,tr}function Ci(){if(Xn===null){var s=wn.alternate;s=s!==null?s.memoizedState:null}else s=Xn.next;var l=tr===null?wn.memoizedState:tr.next;if(l!==null)tr=l,Xn=s;else{if(s===null)throw Error(n(310));Xn=s,s={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},tr===null?wn.memoizedState=tr=s:tr=tr.next=s}return tr}function Cu(s,l){return typeof l=="function"?l(s):l}function Ig(s){var l=Ci(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=Xn,v=m.baseQueue,E=d.pending;if(E!==null){if(v!==null){var P=v.next;v.next=E.next,E.next=P}m.baseQueue=v=E,d.pending=null}if(v!==null){E=v.next,m=m.baseState;var $=P=null,W=null,ae=E;do{var Te=ae.lane;if((zo&Te)===Te)W!==null&&(W=W.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),m=ae.hasEagerState?ae.eagerState:s(m,ae.action);else{var Ae={lane:Te,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};W===null?($=W=Ae,P=m):W=W.next=Ae,wn.lanes|=Te,Bo|=Te}ae=ae.next}while(ae!==null&&ae!==E);W===null?P=m:W.next=$,qi(m,l.memoizedState)||(Xr=!0),l.memoizedState=m,l.baseState=P,l.baseQueue=W,d.lastRenderedState=m}if(s=d.interleaved,s!==null){v=s;do E=v.lane,wn.lanes|=E,Bo|=E,v=v.next;while(v!==s)}else v===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Pg(s){var l=Ci(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=s;var m=d.dispatch,v=d.pending,E=l.memoizedState;if(v!==null){d.pending=null;var P=v=v.next;do E=s(E,P.action),P=P.next;while(P!==v);qi(E,l.memoizedState)||(Xr=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),d.lastRenderedState=E}return[E,m]}function Rb(){}function Db(s,l){var d=wn,m=Ci(),v=l(),E=!qi(m.memoizedState,v);if(E&&(m.memoizedState=v,Xr=!0),m=m.queue,Rg(Lb.bind(null,d,m,s),[s]),m.getSnapshot!==l||E||tr!==null&&tr.memoizedState.tag&1){if(d.flags|=2048,Au(9,Ob.bind(null,d,m,v,l),void 0,null),nr===null)throw Error(n(349));(zo&30)!==0||Mb(d,l,v)}return v}function Mb(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=wn.updateQueue,l===null?(l={lastEffect:null,stores:null},wn.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function Ob(s,l,d,m){l.value=d,l.getSnapshot=m,Vb(l)&&Fb(s)}function Lb(s,l,d){return d(function(){Vb(l)&&Fb(s)})}function Vb(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!qi(s,d)}catch{return!0}}function Fb(s){var l=sa(s,1);l!==null&&Yi(l,s,1,-1)}function Ub(s){var l=vs();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:s},l.queue=s,s=s.dispatch=eI.bind(null,wn,s),[l.memoizedState,s]}function Au(s,l,d,m){return s={tag:s,create:l,destroy:d,deps:m,next:null},l=wn.updateQueue,l===null?(l={lastEffect:null,stores:null},wn.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,l.lastEffect=s)),s}function $b(){return Ci().memoizedState}function $h(s,l,d,m){var v=vs();wn.flags|=s,v.memoizedState=Au(1|l,d,void 0,m===void 0?null:m)}function zh(s,l,d,m){var v=Ci();m=m===void 0?null:m;var E=void 0;if(Xn!==null){var P=Xn.memoizedState;if(E=P.destroy,m!==null&&Cg(m,P.deps)){v.memoizedState=Au(l,d,E,m);return}}wn.flags|=s,v.memoizedState=Au(1|l,d,E,m)}function zb(s,l){return $h(8390656,8,s,l)}function Rg(s,l){return zh(2048,8,s,l)}function Bb(s,l){return zh(4,2,s,l)}function Hb(s,l){return zh(4,4,s,l)}function Wb(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function qb(s,l,d){return d=d!=null?d.concat([s]):null,zh(4,4,Wb.bind(null,l,s),d)}function Dg(){}function Gb(s,l){var d=Ci();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Cg(l,m[1])?m[0]:(d.memoizedState=[s,l],s)}function Kb(s,l){var d=Ci();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Cg(l,m[1])?m[0]:(s=s(),d.memoizedState=[s,l],s)}function Xb(s,l,d){return(zo&21)===0?(s.baseState&&(s.baseState=!1,Xr=!0),s.memoizedState=d):(qi(d,l)||(d=G(),wn.lanes|=d,Bo|=d,s.baseState=!0),l)}function Jj(s,l){var d=Ge;Ge=d!==0&&4>d?d:4,s(!0);var m=Ng.transition;Ng.transition={};try{s(!1),l()}finally{Ge=d,Ng.transition=m}}function Qb(){return Ci().memoizedState}function Zj(s,l,d){var m=Ha(s);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},Yb(s))Jb(l,d);else if(d=Cb(s,l,d,m),d!==null){var v=Fr();Yi(d,s,m,v),Zb(d,l,m)}}function eI(s,l,d){var m=Ha(s),v={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(Yb(s))Jb(l,v);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var P=l.lastRenderedState,$=E(P,d);if(v.hasEagerState=!0,v.eagerState=$,qi($,P)){var W=l.interleaved;W===null?(v.next=v,wg(l)):(v.next=W.next,W.next=v),l.interleaved=v;return}}catch{}finally{}d=Cb(s,l,v,m),d!==null&&(v=Fr(),Yi(d,s,m,v),Zb(d,l,m))}}function Yb(s){var l=s.alternate;return s===wn||l!==null&&l===wn}function Jb(s,l){Tu=Uh=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function Zb(s,l,d){if((d&4194240)!==0){var m=l.lanes;m&=s.pendingLanes,d|=m,l.lanes=d,Ye(s,d)}}var Bh={readContext:Ni,useCallback:Er,useContext:Er,useEffect:Er,useImperativeHandle:Er,useInsertionEffect:Er,useLayoutEffect:Er,useMemo:Er,useReducer:Er,useRef:Er,useState:Er,useDebugValue:Er,useDeferredValue:Er,useTransition:Er,useMutableSource:Er,useSyncExternalStore:Er,useId:Er,unstable_isNewReconciler:!1},tI={readContext:Ni,useCallback:function(s,l){return vs().memoizedState=[s,l===void 0?null:l],s},useContext:Ni,useEffect:zb,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,$h(4194308,4,Wb.bind(null,l,s),d)},useLayoutEffect:function(s,l){return $h(4194308,4,s,l)},useInsertionEffect:function(s,l){return $h(4,2,s,l)},useMemo:function(s,l){var d=vs();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var m=vs();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},m.queue=s,s=s.dispatch=Zj.bind(null,wn,s),[m.memoizedState,s]},useRef:function(s){var l=vs();return s={current:s},l.memoizedState=s},useState:Ub,useDebugValue:Dg,useDeferredValue:function(s){return vs().memoizedState=s},useTransition:function(){var s=Ub(!1),l=s[0];return s=Jj.bind(null,s[1]),vs().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var m=wn,v=vs();if(mn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),nr===null)throw Error(n(349));(zo&30)!==0||Mb(m,l,d)}v.memoizedState=d;var E={value:d,getSnapshot:l};return v.queue=E,zb(Lb.bind(null,m,E,s),[s]),m.flags|=2048,Au(9,Ob.bind(null,m,E,d,l),void 0,null),d},useId:function(){var s=vs(),l=nr.identifierPrefix;if(mn){var d=ia,m=ra;d=(m&~(1<<32-cr(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=Nu++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Yj++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},nI={readContext:Ni,useCallback:Gb,useContext:Ni,useEffect:Rg,useImperativeHandle:qb,useInsertionEffect:Bb,useLayoutEffect:Hb,useMemo:Kb,useReducer:Ig,useRef:$b,useState:function(){return Ig(Cu)},useDebugValue:Dg,useDeferredValue:function(s){var l=Ci();return Xb(l,Xn.memoizedState,s)},useTransition:function(){var s=Ig(Cu)[0],l=Ci().memoizedState;return[s,l]},useMutableSource:Rb,useSyncExternalStore:Db,useId:Qb,unstable_isNewReconciler:!1},rI={readContext:Ni,useCallback:Gb,useContext:Ni,useEffect:Rg,useImperativeHandle:qb,useInsertionEffect:Bb,useLayoutEffect:Hb,useMemo:Kb,useReducer:Pg,useRef:$b,useState:function(){return Pg(Cu)},useDebugValue:Dg,useDeferredValue:function(s){var l=Ci();return Xn===null?l.memoizedState=s:Xb(l,Xn.memoizedState,s)},useTransition:function(){var s=Pg(Cu)[0],l=Ci().memoizedState;return[s,l]},useMutableSource:Rb,useSyncExternalStore:Db,useId:Qb,unstable_isNewReconciler:!1};function Ki(s,l){if(s&&s.defaultProps){l=de({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function Mg(s,l,d,m){l=s.memoizedState,d=d(m,l),d=d==null?l:de({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Hh={isMounted:function(s){return(s=s._reactInternals)?Hr(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var m=Fr(),v=Ha(s),E=aa(m,v);E.payload=l,d!=null&&(E.callback=d),l=Ua(s,E,v),l!==null&&(Yi(l,s,v,m),Oh(l,s,v))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var m=Fr(),v=Ha(s),E=aa(m,v);E.tag=1,E.payload=l,d!=null&&(E.callback=d),l=Ua(s,E,v),l!==null&&(Yi(l,s,v,m),Oh(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Fr(),m=Ha(s),v=aa(d,m);v.tag=2,l!=null&&(v.callback=l),l=Ua(s,v,m),l!==null&&(Yi(l,s,m,d),Oh(l,s,m))}};function ew(s,l,d,m,v,E,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,P):l.prototype&&l.prototype.isPureReactComponent?!mu(d,m)||!mu(v,E):!0}function tw(s,l,d){var m=!1,v=La,E=l.contextType;return typeof E=="object"&&E!==null?E=Ni(E):(v=Kr(l)?Lo:_r.current,m=l.contextTypes,E=(m=m!=null)?Ql(s,v):La),l=new l(d,E),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Hh,s.stateNode=l,l._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=E),l}function nw(s,l,d,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==s&&Hh.enqueueReplaceState(l,l.state,null)}function Og(s,l,d,m){var v=s.stateNode;v.props=d,v.state=s.memoizedState,v.refs={},_g(s);var E=l.contextType;typeof E=="object"&&E!==null?v.context=Ni(E):(E=Kr(l)?Lo:_r.current,v.context=Ql(s,E)),v.state=s.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(Mg(s,l,E,d),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Hh.enqueueReplaceState(v,v.state,null),Lh(s,d,v,m),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function ic(s,l){try{var d="",m=l;do d+=Ve(m),m=m.return;while(m);var v=d}catch(E){v=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:l,stack:v,digest:null}}function Lg(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function Vg(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var iI=typeof WeakMap=="function"?WeakMap:Map;function rw(s,l,d){d=aa(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){Yh||(Yh=!0,Zg=m),Vg(s,l)},d}function iw(s,l,d){d=aa(-1,d),d.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var v=l.value;d.payload=function(){return m(v)},d.callback=function(){Vg(s,l)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){Vg(s,l),typeof m!="function"&&(za===null?za=new Set([this]):za.add(this));var P=l.stack;this.componentDidCatch(l.value,{componentStack:P!==null?P:""})}),d}function sw(s,l,d){var m=s.pingCache;if(m===null){m=s.pingCache=new iI;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(d)||(v.add(d),s=xI.bind(null,s,l,d),l.then(s,s))}function aw(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function ow(s,l,d,m,v){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=aa(-1,1),l.tag=2,Ua(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var sI=F.ReactCurrentOwner,Xr=!1;function Vr(s,l,d,m){l.child=s===null?Nb(l,null,d,m):ec(l,s.child,d,m)}function lw(s,l,d,m,v){d=d.render;var E=l.ref;return nc(l,v),m=Ag(s,l,d,m,E,v),d=jg(),s!==null&&!Xr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,oa(s,l,v)):(mn&&d&&hg(l),l.flags|=1,Vr(s,l,m,v),l.child)}function cw(s,l,d,m,v){if(s===null){var E=d.type;return typeof E=="function"&&!a0(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=E,uw(s,l,E,m,v)):(s=rf(d.type,null,m,l,l.mode,v),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,(s.lanes&v)===0){var P=E.memoizedProps;if(d=d.compare,d=d!==null?d:mu,d(P,m)&&s.ref===l.ref)return oa(s,l,v)}return l.flags|=1,s=qa(E,m),s.ref=l.ref,s.return=l,l.child=s}function uw(s,l,d,m,v){if(s!==null){var E=s.memoizedProps;if(mu(E,m)&&s.ref===l.ref)if(Xr=!1,l.pendingProps=m=E,(s.lanes&v)!==0)(s.flags&131072)!==0&&(Xr=!0);else return l.lanes=s.lanes,oa(s,l,v)}return Fg(s,l,d,m,v)}function dw(s,l,d){var m=l.pendingProps,v=m.children,E=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(ac,hi),hi|=d;else{if((d&1073741824)===0)return s=E!==null?E.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,rn(ac,hi),hi|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=E!==null?E.baseLanes:d,rn(ac,hi),hi|=m}else E!==null?(m=E.baseLanes|d,l.memoizedState=null):m=d,rn(ac,hi),hi|=m;return Vr(s,l,v,d),l.child}function hw(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Fg(s,l,d,m,v){var E=Kr(d)?Lo:_r.current;return E=Ql(l,E),nc(l,v),d=Ag(s,l,d,m,E,v),m=jg(),s!==null&&!Xr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~v,oa(s,l,v)):(mn&&m&&hg(l),l.flags|=1,Vr(s,l,d,v),l.child)}function fw(s,l,d,m,v){if(Kr(d)){var E=!0;Ch(l)}else E=!1;if(nc(l,v),l.stateNode===null)qh(s,l),tw(l,d,m),Og(l,d,m,v),m=!0;else if(s===null){var P=l.stateNode,$=l.memoizedProps;P.props=$;var W=P.context,ae=d.contextType;typeof ae=="object"&&ae!==null?ae=Ni(ae):(ae=Kr(d)?Lo:_r.current,ae=Ql(l,ae));var Te=d.getDerivedStateFromProps,Ae=typeof Te=="function"||typeof P.getSnapshotBeforeUpdate=="function";Ae||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==m||W!==ae)&&nw(l,P,m,ae),Fa=!1;var ke=l.memoizedState;P.state=ke,Lh(l,m,P,v),W=l.memoizedState,$!==m||ke!==W||Gr.current||Fa?(typeof Te=="function"&&(Mg(l,d,Te,m),W=l.memoizedState),($=Fa||ew(l,d,$,m,ke,W,ae))?(Ae||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(l.flags|=4194308)):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=W),P.props=m,P.state=W,P.context=ae,m=$):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{P=l.stateNode,Ab(s,l),$=l.memoizedProps,ae=l.type===l.elementType?$:Ki(l.type,$),P.props=ae,Ae=l.pendingProps,ke=P.context,W=d.contextType,typeof W=="object"&&W!==null?W=Ni(W):(W=Kr(d)?Lo:_r.current,W=Ql(l,W));var Qe=d.getDerivedStateFromProps;(Te=typeof Qe=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==Ae||ke!==W)&&nw(l,P,m,W),Fa=!1,ke=l.memoizedState,P.state=ke,Lh(l,m,P,v);var nt=l.memoizedState;$!==Ae||ke!==nt||Gr.current||Fa?(typeof Qe=="function"&&(Mg(l,d,Qe,m),nt=l.memoizedState),(ae=Fa||ew(l,d,ae,m,ke,nt,W)||!1)?(Te||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,nt,W),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,nt,W)),typeof P.componentDidUpdate=="function"&&(l.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof P.componentDidUpdate!="function"||$===s.memoizedProps&&ke===s.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ke===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=nt),P.props=m,P.state=nt,P.context=W,m=ae):(typeof P.componentDidUpdate!="function"||$===s.memoizedProps&&ke===s.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&ke===s.memoizedState||(l.flags|=1024),m=!1)}return Ug(s,l,d,m,E,v)}function Ug(s,l,d,m,v,E){hw(s,l);var P=(l.flags&128)!==0;if(!m&&!P)return v&&xb(l,d,!1),oa(s,l,E);m=l.stateNode,sI.current=l;var $=P&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,s!==null&&P?(l.child=ec(l,s.child,null,E),l.child=ec(l,null,$,E)):Vr(s,l,$,E),l.memoizedState=m.state,v&&xb(l,d,!0),l.child}function pw(s){var l=s.stateNode;l.pendingContext?gb(s,l.pendingContext,l.pendingContext!==l.context):l.context&&gb(s,l.context,!1),Eg(s,l.containerInfo)}function mw(s,l,d,m,v){return Zl(),gg(v),l.flags|=256,Vr(s,l,d,m),l.child}var $g={dehydrated:null,treeContext:null,retryLane:0};function zg(s){return{baseLanes:s,cachePool:null,transitions:null}}function gw(s,l,d){var m=l.pendingProps,v=bn.current,E=!1,P=(l.flags&128)!==0,$;if(($=P)||($=s!==null&&s.memoizedState===null?!1:(v&2)!==0),$?(E=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),rn(bn,v&1),s===null)return mg(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(P=m.children,s=m.fallback,E?(m=l.mode,E=l.child,P={mode:"hidden",children:P},(m&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=P):E=sf(P,m,0,null),s=Go(s,m,d,null),E.return=l,s.return=l,E.sibling=s,l.child=E,l.child.memoizedState=zg(d),l.memoizedState=$g,s):Bg(l,P));if(v=s.memoizedState,v!==null&&($=v.dehydrated,$!==null))return aI(s,l,P,m,$,v,d);if(E){E=m.fallback,P=l.mode,v=s.child,$=v.sibling;var W={mode:"hidden",children:m.children};return(P&1)===0&&l.child!==v?(m=l.child,m.childLanes=0,m.pendingProps=W,l.deletions=null):(m=qa(v,W),m.subtreeFlags=v.subtreeFlags&14680064),$!==null?E=qa($,E):(E=Go(E,P,d,null),E.flags|=2),E.return=l,m.return=l,m.sibling=E,l.child=m,m=E,E=l.child,P=s.child.memoizedState,P=P===null?zg(d):{baseLanes:P.baseLanes|d,cachePool:null,transitions:P.transitions},E.memoizedState=P,E.childLanes=s.childLanes&~d,l.memoizedState=$g,m}return E=s.child,s=E.sibling,m=qa(E,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=d),m.return=l,m.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=m,l.memoizedState=null,m}function Bg(s,l){return l=sf({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Wh(s,l,d,m){return m!==null&&gg(m),ec(l,s.child,null,d),s=Bg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function aI(s,l,d,m,v,E,P){if(d)return l.flags&256?(l.flags&=-257,m=Lg(Error(n(422))),Wh(s,l,P,m)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(E=m.fallback,v=l.mode,m=sf({mode:"visible",children:m.children},v,0,null),E=Go(E,v,P,null),E.flags|=2,m.return=l,E.return=l,m.sibling=E,l.child=m,(l.mode&1)!==0&&ec(l,s.child,null,P),l.child.memoizedState=zg(P),l.memoizedState=$g,E);if((l.mode&1)===0)return Wh(s,l,P,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var $=m.dgst;return m=$,E=Error(n(419)),m=Lg(E,m,void 0),Wh(s,l,P,m)}if($=(P&s.childLanes)!==0,Xr||$){if(m=nr,m!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|P))!==0?0:v,v!==0&&v!==E.retryLane&&(E.retryLane=v,sa(s,v),Yi(m,s,v,-1))}return s0(),m=Lg(Error(n(421))),Wh(s,l,P,m)}return v.data==="$?"?(l.flags|=128,l.child=s.child,l=vI.bind(null,s),v._reactRetry=l,null):(s=E.treeContext,di=Ma(v.nextSibling),ui=l,mn=!0,Gi=null,s!==null&&(Si[Ti++]=ra,Si[Ti++]=ia,Si[Ti++]=Vo,ra=s.id,ia=s.overflow,Vo=l),l=Bg(l,m.children),l.flags|=4096,l)}function yw(s,l,d){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),bg(s.return,l,d)}function Hg(s,l,d,m,v){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=d,E.tailMode=v)}function xw(s,l,d){var m=l.pendingProps,v=m.revealOrder,E=m.tail;if(Vr(s,l,m.children,d),m=bn.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yw(s,d,l);else if(s.tag===19)yw(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(rn(bn,m),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(d=l.child,v=null;d!==null;)s=d.alternate,s!==null&&Vh(s)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),Hg(l,!1,v,d,E);break;case"backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(s=v.alternate,s!==null&&Vh(s)===null){l.child=v;break}s=v.sibling,v.sibling=d,d=v,v=s}Hg(l,!0,d,null,E);break;case"together":Hg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function qh(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function oa(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Bo|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,d=qa(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=qa(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function oI(s,l,d){switch(l.tag){case 3:pw(l),Zl();break;case 5:Pb(l);break;case 1:Kr(l.type)&&Ch(l);break;case 4:Eg(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,v=l.memoizedProps.value;rn(Dh,m._currentValue),m._currentValue=v;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(rn(bn,bn.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?gw(s,l,d):(rn(bn,bn.current&1),s=oa(s,l,d),s!==null?s.sibling:null);rn(bn,bn.current&1);break;case 19:if(m=(d&l.childLanes)!==0,(s.flags&128)!==0){if(m)return xw(s,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),rn(bn,bn.current),m)break;return null;case 22:case 23:return l.lanes=0,dw(s,l,d)}return oa(s,l,d)}var vw,Wg,bw,ww;vw=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Wg=function(){},bw=function(s,l,d,m){var v=s.memoizedProps;if(v!==m){s=l.stateNode,$o(xs.current);var E=null;switch(d){case"input":v=Ot(s,v),m=Ot(s,m),E=[];break;case"select":v=de({},v,{value:void 0}),m=de({},m,{value:void 0}),E=[];break;case"textarea":v=Nt(s,v),m=Nt(s,m),E=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Sh)}ze(d,m);var P;d=null;for(ae in v)if(!m.hasOwnProperty(ae)&&v.hasOwnProperty(ae)&&v[ae]!=null)if(ae==="style"){var $=v[ae];for(P in $)$.hasOwnProperty(P)&&(d||(d={}),d[P]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(i.hasOwnProperty(ae)?E||(E=[]):(E=E||[]).push(ae,null));for(ae in m){var W=m[ae];if($=v!=null?v[ae]:void 0,m.hasOwnProperty(ae)&&W!==$&&(W!=null||$!=null))if(ae==="style")if($){for(P in $)!$.hasOwnProperty(P)||W&&W.hasOwnProperty(P)||(d||(d={}),d[P]="");for(P in W)W.hasOwnProperty(P)&&$[P]!==W[P]&&(d||(d={}),d[P]=W[P])}else d||(E||(E=[]),E.push(ae,d)),d=W;else ae==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,$=$?$.__html:void 0,W!=null&&$!==W&&(E=E||[]).push(ae,W)):ae==="children"?typeof W!="string"&&typeof W!="number"||(E=E||[]).push(ae,""+W):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(i.hasOwnProperty(ae)?(W!=null&&ae==="onScroll"&&ln("scroll",s),E||$===W||(E=[])):(E=E||[]).push(ae,W))}d&&(E=E||[]).push("style",d);var ae=E;(l.updateQueue=ae)&&(l.flags|=4)}},ww=function(s,l,d,m){d!==m&&(l.flags|=4)};function ju(s,l){if(!mn)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function kr(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(l)for(var v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=m,s.childLanes=d,l}function lI(s,l,d){var m=l.pendingProps;switch(fg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(l),null;case 1:return Kr(l.type)&&Nh(),kr(l),null;case 3:return m=l.stateNode,rc(),cn(Gr),cn(_r),Tg(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(Ph(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Gi!==null&&(n0(Gi),Gi=null))),Wg(s,l),kr(l),null;case 5:kg(l);var v=$o(Su.current);if(d=l.type,s!==null&&l.stateNode!=null)bw(s,l,d,m,v),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(n(166));return kr(l),null}if(s=$o(xs.current),Ph(l)){m=l.stateNode,d=l.type;var E=l.memoizedProps;switch(m[ys]=l,m[bu]=E,s=(l.mode&1)!==0,d){case"dialog":ln("cancel",m),ln("close",m);break;case"iframe":case"object":case"embed":ln("load",m);break;case"video":case"audio":for(v=0;v<yu.length;v++)ln(yu[v],m);break;case"source":ln("error",m);break;case"img":case"image":case"link":ln("error",m),ln("load",m);break;case"details":ln("toggle",m);break;case"input":ie(m,E),ln("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!E.multiple},ln("invalid",m);break;case"textarea":At(m,E),ln("invalid",m)}ze(d,E),v=null;for(var P in E)if(E.hasOwnProperty(P)){var $=E[P];P==="children"?typeof $=="string"?m.textContent!==$&&(E.suppressHydrationWarning!==!0&&kh(m.textContent,$,s),v=["children",$]):typeof $=="number"&&m.textContent!==""+$&&(E.suppressHydrationWarning!==!0&&kh(m.textContent,$,s),v=["children",""+$]):i.hasOwnProperty(P)&&$!=null&&P==="onScroll"&&ln("scroll",m)}switch(d){case"input":_t(m),fe(m,E,!0);break;case"textarea":_t(m),ne(m);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(m.onclick=Sh)}m=v,l.updateQueue=m,m!==null&&(l.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ge(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=P.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=P.createElement(d,{is:m.is}):(s=P.createElement(d),d==="select"&&(P=s,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):s=P.createElementNS(s,d),s[ys]=l,s[bu]=m,vw(s,l,!1,!1),l.stateNode=s;e:{switch(P=q(d,m),d){case"dialog":ln("cancel",s),ln("close",s),v=m;break;case"iframe":case"object":case"embed":ln("load",s),v=m;break;case"video":case"audio":for(v=0;v<yu.length;v++)ln(yu[v],s);v=m;break;case"source":ln("error",s),v=m;break;case"img":case"image":case"link":ln("error",s),ln("load",s),v=m;break;case"details":ln("toggle",s),v=m;break;case"input":ie(s,m),v=Ot(s,m),ln("invalid",s);break;case"option":v=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},v=de({},m,{value:void 0}),ln("invalid",s);break;case"textarea":At(s,m),v=Nt(s,m),ln("invalid",s);break;default:v=m}ze(d,v),$=v;for(E in $)if($.hasOwnProperty(E)){var W=$[E];E==="style"?se(s,W):E==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&Ie(s,W)):E==="children"?typeof W=="string"?(d!=="textarea"||W!=="")&&B(s,W):typeof W=="number"&&B(s,""+W):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?W!=null&&E==="onScroll"&&ln("scroll",s):W!=null&&O(s,E,W,P))}switch(d){case"input":_t(s),fe(s,m,!1);break;case"textarea":_t(s),ne(s);break;case"option":m.value!=null&&s.setAttribute("value",""+Be(m.value));break;case"select":s.multiple=!!m.multiple,E=m.value,E!=null?jt(s,!!m.multiple,E,!1):m.defaultValue!=null&&jt(s,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=Sh)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return kr(l),null;case 6:if(s&&l.stateNode!=null)ww(s,l,s.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(n(166));if(d=$o(Su.current),$o(xs.current),Ph(l)){if(m=l.stateNode,d=l.memoizedProps,m[ys]=l,(E=m.nodeValue!==d)&&(s=ui,s!==null))switch(s.tag){case 3:kh(m.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&kh(m.nodeValue,d,(s.mode&1)!==0)}E&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[ys]=l,l.stateNode=m}return kr(l),null;case 13:if(cn(bn),m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(mn&&di!==null&&(l.mode&1)!==0&&(l.flags&128)===0)kb(),Zl(),l.flags|=98560,E=!1;else if(E=Ph(l),m!==null&&m.dehydrated!==null){if(s===null){if(!E)throw Error(n(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[ys]=l}else Zl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;kr(l),E=!1}else Gi!==null&&(n0(Gi),Gi=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(bn.current&1)!==0?Qn===0&&(Qn=3):s0())),l.updateQueue!==null&&(l.flags|=4),kr(l),null);case 4:return rc(),Wg(s,l),s===null&&xu(l.stateNode.containerInfo),kr(l),null;case 10:return vg(l.type._context),kr(l),null;case 17:return Kr(l.type)&&Nh(),kr(l),null;case 19:if(cn(bn),E=l.memoizedState,E===null)return kr(l),null;if(m=(l.flags&128)!==0,P=E.rendering,P===null)if(m)ju(E,!1);else{if(Qn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(P=Vh(s),P!==null){for(l.flags|=128,ju(E,!1),m=P.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)E=d,s=m,E.flags&=14680066,P=E.alternate,P===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=P.childLanes,E.lanes=P.lanes,E.child=P.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=P.memoizedProps,E.memoizedState=P.memoizedState,E.updateQueue=P.updateQueue,E.type=P.type,s=P.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return rn(bn,bn.current&1|2),l.child}s=s.sibling}E.tail!==null&&Yt()>oc&&(l.flags|=128,m=!0,ju(E,!1),l.lanes=4194304)}else{if(!m)if(s=Vh(P),s!==null){if(l.flags|=128,m=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),ju(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!mn)return kr(l),null}else 2*Yt()-E.renderingStartTime>oc&&d!==1073741824&&(l.flags|=128,m=!0,ju(E,!1),l.lanes=4194304);E.isBackwards?(P.sibling=l.child,l.child=P):(d=E.last,d!==null?d.sibling=P:l.child=P,E.last=P)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=Yt(),l.sibling=null,d=bn.current,rn(bn,m?d&1|2:d&1),l):(kr(l),null);case 22:case 23:return i0(),m=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(hi&1073741824)!==0&&(kr(l),l.subtreeFlags&6&&(l.flags|=8192)):kr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function cI(s,l){switch(fg(l),l.tag){case 1:return Kr(l.type)&&Nh(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return rc(),cn(Gr),cn(_r),Tg(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return kg(l),null;case 13:if(cn(bn),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Zl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return cn(bn),null;case 4:return rc(),null;case 10:return vg(l.type._context),null;case 22:case 23:return i0(),null;case 24:return null;default:return null}}var Gh=!1,Sr=!1,uI=typeof WeakSet=="function"?WeakSet:Set,tt=null;function sc(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){Nn(s,l,m)}else d.current=null}function qg(s,l,d){try{d()}catch(m){Nn(s,l,m)}}var _w=!1;function dI(s,l){if(ig=Pa,s=eb(),Qm(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var P=0,$=-1,W=-1,ae=0,Te=0,Ae=s,ke=null;t:for(;;){for(var Qe;Ae!==d||v!==0&&Ae.nodeType!==3||($=P+v),Ae!==E||m!==0&&Ae.nodeType!==3||(W=P+m),Ae.nodeType===3&&(P+=Ae.nodeValue.length),(Qe=Ae.firstChild)!==null;)ke=Ae,Ae=Qe;for(;;){if(Ae===s)break t;if(ke===d&&++ae===v&&($=P),ke===E&&++Te===m&&(W=P),(Qe=Ae.nextSibling)!==null)break;Ae=ke,ke=Ae.parentNode}Ae=Qe}d=$===-1||W===-1?null:{start:$,end:W}}else d=null}d=d||{start:0,end:0}}else d=null;for(sg={focusedElem:s,selectionRange:d},Pa=!1,tt=l;tt!==null;)if(l=tt,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,tt=s;else for(;tt!==null;){l=tt;try{var nt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var rt=nt.memoizedProps,Rn=nt.memoizedState,ee=l.stateNode,X=ee.getSnapshotBeforeUpdate(l.elementType===l.type?rt:Ki(l.type,rt),Rn);ee.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var re=l.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Re){Nn(l,l.return,Re)}if(s=l.sibling,s!==null){s.return=l.return,tt=s;break}tt=l.return}return nt=_w,_w=!1,nt}function Iu(s,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&s)===s){var E=v.destroy;v.destroy=void 0,E!==void 0&&qg(l,d,E)}v=v.next}while(v!==m)}}function Kh(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function Gg(s){var l=s.ref;if(l!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof l=="function"?l(s):l.current=s}}function Ew(s){var l=s.alternate;l!==null&&(s.alternate=null,Ew(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[ys],delete l[bu],delete l[cg],delete l[Gj],delete l[Kj])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function kw(s){return s.tag===5||s.tag===3||s.tag===4}function Sw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||kw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Kg(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Sh));else if(m!==4&&(s=s.child,s!==null))for(Kg(s,l,d),s=s.sibling;s!==null;)Kg(s,l,d),s=s.sibling}function Xg(s,l,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(Xg(s,l,d),s=s.sibling;s!==null;)Xg(s,l,d),s=s.sibling}var hr=null,Xi=!1;function $a(s,l,d){for(d=d.child;d!==null;)Tw(s,l,d),d=d.sibling}function Tw(s,l,d){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(Gs,d)}catch{}switch(d.tag){case 5:Sr||sc(d,l);case 6:var m=hr,v=Xi;hr=null,$a(s,l,d),hr=m,Xi=v,hr!==null&&(Xi?(s=hr,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):hr.removeChild(d.stateNode));break;case 18:hr!==null&&(Xi?(s=hr,d=d.stateNode,s.nodeType===8?lg(s.parentNode,d):s.nodeType===1&&lg(s,d),Hi(s)):lg(hr,d.stateNode));break;case 4:m=hr,v=Xi,hr=d.stateNode.containerInfo,Xi=!0,$a(s,l,d),hr=m,Xi=v;break;case 0:case 11:case 14:case 15:if(!Sr&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var E=v,P=E.destroy;E=E.tag,P!==void 0&&((E&2)!==0||(E&4)!==0)&&qg(d,l,P),v=v.next}while(v!==m)}$a(s,l,d);break;case 1:if(!Sr&&(sc(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch($){Nn(d,l,$)}$a(s,l,d);break;case 21:$a(s,l,d);break;case 22:d.mode&1?(Sr=(m=Sr)||d.memoizedState!==null,$a(s,l,d),Sr=m):$a(s,l,d);break;default:$a(s,l,d)}}function Nw(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new uI),l.forEach(function(m){var v=bI.bind(null,s,m);d.has(m)||(d.add(m),m.then(v,v))})}}function Qi(s,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m];try{var E=s,P=l,$=P;e:for(;$!==null;){switch($.tag){case 5:hr=$.stateNode,Xi=!1;break e;case 3:hr=$.stateNode.containerInfo,Xi=!0;break e;case 4:hr=$.stateNode.containerInfo,Xi=!0;break e}$=$.return}if(hr===null)throw Error(n(160));Tw(E,P,v),hr=null,Xi=!1;var W=v.alternate;W!==null&&(W.return=null),v.return=null}catch(ae){Nn(v,l,ae)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Cw(l,s),l=l.sibling}function Cw(s,l){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Qi(l,s),bs(s),m&4){try{Iu(3,s,s.return),Kh(3,s)}catch(rt){Nn(s,s.return,rt)}try{Iu(5,s,s.return)}catch(rt){Nn(s,s.return,rt)}}break;case 1:Qi(l,s),bs(s),m&512&&d!==null&&sc(d,d.return);break;case 5:if(Qi(l,s),bs(s),m&512&&d!==null&&sc(d,d.return),s.flags&32){var v=s.stateNode;try{B(v,"")}catch(rt){Nn(s,s.return,rt)}}if(m&4&&(v=s.stateNode,v!=null)){var E=s.memoizedProps,P=d!==null?d.memoizedProps:E,$=s.type,W=s.updateQueue;if(s.updateQueue=null,W!==null)try{$==="input"&&E.type==="radio"&&E.name!=null&&Fe(v,E),q($,P);var ae=q($,E);for(P=0;P<W.length;P+=2){var Te=W[P],Ae=W[P+1];Te==="style"?se(v,Ae):Te==="dangerouslySetInnerHTML"?Ie(v,Ae):Te==="children"?B(v,Ae):O(v,Te,Ae,ae)}switch($){case"input":je(v,E);break;case"textarea":_e(v,E);break;case"select":var ke=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!E.multiple;var Qe=E.value;Qe!=null?jt(v,!!E.multiple,Qe,!1):ke!==!!E.multiple&&(E.defaultValue!=null?jt(v,!!E.multiple,E.defaultValue,!0):jt(v,!!E.multiple,E.multiple?[]:"",!1))}v[bu]=E}catch(rt){Nn(s,s.return,rt)}}break;case 6:if(Qi(l,s),bs(s),m&4){if(s.stateNode===null)throw Error(n(162));v=s.stateNode,E=s.memoizedProps;try{v.nodeValue=E}catch(rt){Nn(s,s.return,rt)}}break;case 3:if(Qi(l,s),bs(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Hi(l.containerInfo)}catch(rt){Nn(s,s.return,rt)}break;case 4:Qi(l,s),bs(s);break;case 13:Qi(l,s),bs(s),v=s.child,v.flags&8192&&(E=v.memoizedState!==null,v.stateNode.isHidden=E,!E||v.alternate!==null&&v.alternate.memoizedState!==null||(Jg=Yt())),m&4&&Nw(s);break;case 22:if(Te=d!==null&&d.memoizedState!==null,s.mode&1?(Sr=(ae=Sr)||Te,Qi(l,s),Sr=ae):Qi(l,s),bs(s),m&8192){if(ae=s.memoizedState!==null,(s.stateNode.isHidden=ae)&&!Te&&(s.mode&1)!==0)for(tt=s,Te=s.child;Te!==null;){for(Ae=tt=Te;tt!==null;){switch(ke=tt,Qe=ke.child,ke.tag){case 0:case 11:case 14:case 15:Iu(4,ke,ke.return);break;case 1:sc(ke,ke.return);var nt=ke.stateNode;if(typeof nt.componentWillUnmount=="function"){m=ke,d=ke.return;try{l=m,nt.props=l.memoizedProps,nt.state=l.memoizedState,nt.componentWillUnmount()}catch(rt){Nn(m,d,rt)}}break;case 5:sc(ke,ke.return);break;case 22:if(ke.memoizedState!==null){Iw(Ae);continue}}Qe!==null?(Qe.return=ke,tt=Qe):Iw(Ae)}Te=Te.sibling}e:for(Te=null,Ae=s;;){if(Ae.tag===5){if(Te===null){Te=Ae;try{v=Ae.stateNode,ae?(E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):($=Ae.stateNode,W=Ae.memoizedProps.style,P=W!=null&&W.hasOwnProperty("display")?W.display:null,$.style.display=J("display",P))}catch(rt){Nn(s,s.return,rt)}}}else if(Ae.tag===6){if(Te===null)try{Ae.stateNode.nodeValue=ae?"":Ae.memoizedProps}catch(rt){Nn(s,s.return,rt)}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===s)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===s)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===s)break e;Te===Ae&&(Te=null),Ae=Ae.return}Te===Ae&&(Te=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}}break;case 19:Qi(l,s),bs(s),m&4&&Nw(s);break;case 21:break;default:Qi(l,s),bs(s)}}function bs(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(kw(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(B(v,""),m.flags&=-33);var E=Sw(s);Xg(s,E,v);break;case 3:case 4:var P=m.stateNode.containerInfo,$=Sw(s);Kg(s,$,P);break;default:throw Error(n(161))}}catch(W){Nn(s,s.return,W)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function hI(s,l,d){tt=s,Aw(s)}function Aw(s,l,d){for(var m=(s.mode&1)!==0;tt!==null;){var v=tt,E=v.child;if(v.tag===22&&m){var P=v.memoizedState!==null||Gh;if(!P){var $=v.alternate,W=$!==null&&$.memoizedState!==null||Sr;$=Gh;var ae=Sr;if(Gh=P,(Sr=W)&&!ae)for(tt=v;tt!==null;)P=tt,W=P.child,P.tag===22&&P.memoizedState!==null?Pw(v):W!==null?(W.return=P,tt=W):Pw(v);for(;E!==null;)tt=E,Aw(E),E=E.sibling;tt=v,Gh=$,Sr=ae}jw(s)}else(v.subtreeFlags&8772)!==0&&E!==null?(E.return=v,tt=E):jw(s)}}function jw(s){for(;tt!==null;){var l=tt;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Sr||Kh(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Sr)if(d===null)m.componentDidMount();else{var v=l.elementType===l.type?d.memoizedProps:Ki(l.type,d.memoizedProps);m.componentDidUpdate(v,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&Ib(l,E,m);break;case 3:var P=l.updateQueue;if(P!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Ib(l,P,d)}break;case 5:var $=l.stateNode;if(d===null&&l.flags&4){d=$;var W=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&d.focus();break;case"img":W.src&&(d.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ae=l.alternate;if(ae!==null){var Te=ae.memoizedState;if(Te!==null){var Ae=Te.dehydrated;Ae!==null&&Hi(Ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Sr||l.flags&512&&Gg(l)}catch(ke){Nn(l,l.return,ke)}}if(l===s){tt=null;break}if(d=l.sibling,d!==null){d.return=l.return,tt=d;break}tt=l.return}}function Iw(s){for(;tt!==null;){var l=tt;if(l===s){tt=null;break}var d=l.sibling;if(d!==null){d.return=l.return,tt=d;break}tt=l.return}}function Pw(s){for(;tt!==null;){var l=tt;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Kh(4,l)}catch(W){Nn(l,d,W)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var v=l.return;try{m.componentDidMount()}catch(W){Nn(l,v,W)}}var E=l.return;try{Gg(l)}catch(W){Nn(l,E,W)}break;case 5:var P=l.return;try{Gg(l)}catch(W){Nn(l,P,W)}}}catch(W){Nn(l,l.return,W)}if(l===s){tt=null;break}var $=l.sibling;if($!==null){$.return=l.return,tt=$;break}tt=l.return}}var fI=Math.ceil,Xh=F.ReactCurrentDispatcher,Qg=F.ReactCurrentOwner,Ai=F.ReactCurrentBatchConfig,zt=0,nr=null,$n=null,fr=0,hi=0,ac=Oa(0),Qn=0,Pu=null,Bo=0,Qh=0,Yg=0,Ru=null,Qr=null,Jg=0,oc=1/0,la=null,Yh=!1,Zg=null,za=null,Jh=!1,Ba=null,Zh=0,Du=0,e0=null,ef=-1,tf=0;function Fr(){return(zt&6)!==0?Yt():ef!==-1?ef:ef=Yt()}function Ha(s){return(s.mode&1)===0?1:(zt&2)!==0&&fr!==0?fr&-fr:Qj.transition!==null?(tf===0&&(tf=G()),tf):(s=Ge,s!==0||(s=window.event,s=s===void 0?16:lu(s.type)),s)}function Yi(s,l,d,m){if(50<Du)throw Du=0,e0=null,Error(n(185));Se(s,d,m),((zt&2)===0||s!==nr)&&(s===nr&&((zt&2)===0&&(Qh|=d),Qn===4&&Wa(s,fr)),Yr(s,m),d===1&&zt===0&&(l.mode&1)===0&&(oc=Yt()+500,Ah&&Va()))}function Yr(s,l){var d=s.callbackNode;_i(s,l);var m=Xs(s,s===nr?fr:0);if(m===0)d!==null&&oi(d),s.callbackNode=null,s.callbackPriority=0;else if(l=m&-m,s.callbackPriority!==l){if(d!=null&&oi(d),l===1)s.tag===0?Xj(Dw.bind(null,s)):vb(Dw.bind(null,s)),Wj(function(){(zt&6)===0&&Va()}),d=null;else{switch(Gt(m)){case 1:d=qs;break;case 4:d=cs;break;case 16:d=Dr;break;case 536870912:d=jl;break;default:d=Dr}d=zw(d,Rw.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function Rw(s,l){if(ef=-1,tf=0,(zt&6)!==0)throw Error(n(327));var d=s.callbackNode;if(lc()&&s.callbackNode!==d)return null;var m=Xs(s,s===nr?fr:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||l)l=nf(s,m);else{l=m;var v=zt;zt|=2;var E=Ow();(nr!==s||fr!==l)&&(la=null,oc=Yt()+500,Wo(s,l));do try{gI();break}catch($){Mw(s,$)}while(!0);xg(),Xh.current=E,zt=v,$n!==null?l=0:(nr=null,fr=0,l=Qn)}if(l!==0){if(l===2&&(v=Or(s),v!==0&&(m=v,l=t0(s,v))),l===1)throw d=Pu,Wo(s,0),Wa(s,m),Yr(s,Yt()),d;if(l===6)Wa(s,m);else{if(v=s.current.alternate,(m&30)===0&&!pI(v)&&(l=nf(s,m),l===2&&(E=Or(s),E!==0&&(m=E,l=t0(s,E))),l===1))throw d=Pu,Wo(s,0),Wa(s,m),Yr(s,Yt()),d;switch(s.finishedWork=v,s.finishedLanes=m,l){case 0:case 1:throw Error(n(345));case 2:qo(s,Qr,la);break;case 3:if(Wa(s,m),(m&130023424)===m&&(l=Jg+500-Yt(),10<l)){if(Xs(s,0)!==0)break;if(v=s.suspendedLanes,(v&m)!==m){Fr(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=og(qo.bind(null,s,Qr,la),l);break}qo(s,Qr,la);break;case 4:if(Wa(s,m),(m&4194240)===m)break;for(l=s.eventTimes,v=-1;0<m;){var P=31-cr(m);E=1<<P,P=l[P],P>v&&(v=P),m&=~E}if(m=v,m=Yt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*fI(m/1960))-m,10<m){s.timeoutHandle=og(qo.bind(null,s,Qr,la),m);break}qo(s,Qr,la);break;case 5:qo(s,Qr,la);break;default:throw Error(n(329))}}}return Yr(s,Yt()),s.callbackNode===d?Rw.bind(null,s):null}function t0(s,l){var d=Ru;return s.current.memoizedState.isDehydrated&&(Wo(s,l).flags|=256),s=nf(s,l),s!==2&&(l=Qr,Qr=d,l!==null&&n0(l)),s}function n0(s){Qr===null?Qr=s:Qr.push.apply(Qr,s)}function pI(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var v=d[m],E=v.getSnapshot;v=v.value;try{if(!qi(E(),v))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Wa(s,l){for(l&=~Yg,l&=~Qh,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-cr(l),m=1<<d;s[d]=-1,l&=~m}}function Dw(s){if((zt&6)!==0)throw Error(n(327));lc();var l=Xs(s,0);if((l&1)===0)return Yr(s,Yt()),null;var d=nf(s,l);if(s.tag!==0&&d===2){var m=Or(s);m!==0&&(l=m,d=t0(s,m))}if(d===1)throw d=Pu,Wo(s,0),Wa(s,l),Yr(s,Yt()),d;if(d===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,qo(s,Qr,la),Yr(s,Yt()),null}function r0(s,l){var d=zt;zt|=1;try{return s(l)}finally{zt=d,zt===0&&(oc=Yt()+500,Ah&&Va())}}function Ho(s){Ba!==null&&Ba.tag===0&&(zt&6)===0&&lc();var l=zt;zt|=1;var d=Ai.transition,m=Ge;try{if(Ai.transition=null,Ge=1,s)return s()}finally{Ge=m,Ai.transition=d,zt=l,(zt&6)===0&&Va()}}function i0(){hi=ac.current,cn(ac)}function Wo(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,Hj(d)),$n!==null)for(d=$n.return;d!==null;){var m=d;switch(fg(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Nh();break;case 3:rc(),cn(Gr),cn(_r),Tg();break;case 5:kg(m);break;case 4:rc();break;case 13:cn(bn);break;case 19:cn(bn);break;case 10:vg(m.type._context);break;case 22:case 23:i0()}d=d.return}if(nr=s,$n=s=qa(s.current,null),fr=hi=l,Qn=0,Pu=null,Yg=Qh=Bo=0,Qr=Ru=null,Uo!==null){for(l=0;l<Uo.length;l++)if(d=Uo[l],m=d.interleaved,m!==null){d.interleaved=null;var v=m.next,E=d.pending;if(E!==null){var P=E.next;E.next=v,m.next=P}d.pending=m}Uo=null}return s}function Mw(s,l){do{var d=$n;try{if(xg(),Fh.current=Bh,Uh){for(var m=wn.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}Uh=!1}if(zo=0,tr=Xn=wn=null,Tu=!1,Nu=0,Qg.current=null,d===null||d.return===null){Qn=1,Pu=l,$n=null;break}e:{var E=s,P=d.return,$=d,W=l;if(l=fr,$.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var ae=W,Te=$,Ae=Te.tag;if((Te.mode&1)===0&&(Ae===0||Ae===11||Ae===15)){var ke=Te.alternate;ke?(Te.updateQueue=ke.updateQueue,Te.memoizedState=ke.memoizedState,Te.lanes=ke.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var Qe=aw(P);if(Qe!==null){Qe.flags&=-257,ow(Qe,P,$,E,l),Qe.mode&1&&sw(E,ae,l),l=Qe,W=ae;var nt=l.updateQueue;if(nt===null){var rt=new Set;rt.add(W),l.updateQueue=rt}else nt.add(W);break e}else{if((l&1)===0){sw(E,ae,l),s0();break e}W=Error(n(426))}}else if(mn&&$.mode&1){var Rn=aw(P);if(Rn!==null){(Rn.flags&65536)===0&&(Rn.flags|=256),ow(Rn,P,$,E,l),gg(ic(W,$));break e}}E=W=ic(W,$),Qn!==4&&(Qn=2),Ru===null?Ru=[E]:Ru.push(E),E=P;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var ee=rw(E,W,l);jb(E,ee);break e;case 1:$=W;var X=E.type,re=E.stateNode;if((E.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(za===null||!za.has(re)))){E.flags|=65536,l&=-l,E.lanes|=l;var Re=iw(E,$,l);jb(E,Re);break e}}E=E.return}while(E!==null)}Vw(d)}catch(at){l=at,$n===d&&d!==null&&($n=d=d.return);continue}break}while(!0)}function Ow(){var s=Xh.current;return Xh.current=Bh,s===null?Bh:s}function s0(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),nr===null||(Bo&268435455)===0&&(Qh&268435455)===0||Wa(nr,fr)}function nf(s,l){var d=zt;zt|=2;var m=Ow();(nr!==s||fr!==l)&&(la=null,Wo(s,l));do try{mI();break}catch(v){Mw(s,v)}while(!0);if(xg(),zt=d,Xh.current=m,$n!==null)throw Error(n(261));return nr=null,fr=0,Qn}function mI(){for(;$n!==null;)Lw($n)}function gI(){for(;$n!==null&&!jo();)Lw($n)}function Lw(s){var l=$w(s.alternate,s,hi);s.memoizedProps=s.pendingProps,l===null?Vw(s):$n=l,Qg.current=null}function Vw(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=lI(d,l,hi),d!==null){$n=d;return}}else{if(d=cI(d,l),d!==null){d.flags&=32767,$n=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Qn=6,$n=null;return}}if(l=l.sibling,l!==null){$n=l;return}$n=l=s}while(l!==null);Qn===0&&(Qn=5)}function qo(s,l,d){var m=Ge,v=Ai.transition;try{Ai.transition=null,Ge=1,yI(s,l,d,m)}finally{Ai.transition=v,Ge=m}return null}function yI(s,l,d,m){do lc();while(Ba!==null);if((zt&6)!==0)throw Error(n(327));d=s.finishedWork;var v=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var E=d.lanes|d.childLanes;if(Ce(s,E),s===nr&&($n=nr=null,fr=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Jh||(Jh=!0,zw(Dr,function(){return lc(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=Ai.transition,Ai.transition=null;var P=Ge;Ge=1;var $=zt;zt|=4,Qg.current=null,dI(s,d),Cw(d,s),Lj(sg),Pa=!!ig,sg=ig=null,s.current=d,hI(d),Cl(),zt=$,Ge=P,Ai.transition=E}else s.current=d;if(Jh&&(Jh=!1,Ba=s,Zh=v),E=s.pendingLanes,E===0&&(za=null),Il(d.stateNode),Yr(s,Yt()),l!==null)for(m=s.onRecoverableError,d=0;d<l.length;d++)v=l[d],m(v.value,{componentStack:v.stack,digest:v.digest});if(Yh)throw Yh=!1,s=Zg,Zg=null,s;return(Zh&1)!==0&&s.tag!==0&&lc(),E=s.pendingLanes,(E&1)!==0?s===e0?Du++:(Du=0,e0=s):Du=0,Va(),null}function lc(){if(Ba!==null){var s=Gt(Zh),l=Ai.transition,d=Ge;try{if(Ai.transition=null,Ge=16>s?16:s,Ba===null)var m=!1;else{if(s=Ba,Ba=null,Zh=0,(zt&6)!==0)throw Error(n(331));var v=zt;for(zt|=4,tt=s.current;tt!==null;){var E=tt,P=E.child;if((tt.flags&16)!==0){var $=E.deletions;if($!==null){for(var W=0;W<$.length;W++){var ae=$[W];for(tt=ae;tt!==null;){var Te=tt;switch(Te.tag){case 0:case 11:case 15:Iu(8,Te,E)}var Ae=Te.child;if(Ae!==null)Ae.return=Te,tt=Ae;else for(;tt!==null;){Te=tt;var ke=Te.sibling,Qe=Te.return;if(Ew(Te),Te===ae){tt=null;break}if(ke!==null){ke.return=Qe,tt=ke;break}tt=Qe}}}var nt=E.alternate;if(nt!==null){var rt=nt.child;if(rt!==null){nt.child=null;do{var Rn=rt.sibling;rt.sibling=null,rt=Rn}while(rt!==null)}}tt=E}}if((E.subtreeFlags&2064)!==0&&P!==null)P.return=E,tt=P;else e:for(;tt!==null;){if(E=tt,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Iu(9,E,E.return)}var ee=E.sibling;if(ee!==null){ee.return=E.return,tt=ee;break e}tt=E.return}}var X=s.current;for(tt=X;tt!==null;){P=tt;var re=P.child;if((P.subtreeFlags&2064)!==0&&re!==null)re.return=P,tt=re;else e:for(P=X;tt!==null;){if($=tt,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Kh(9,$)}}catch(at){Nn($,$.return,at)}if($===P){tt=null;break e}var Re=$.sibling;if(Re!==null){Re.return=$.return,tt=Re;break e}tt=$.return}}if(zt=v,Va(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(Gs,s)}catch{}m=!0}return m}finally{Ge=d,Ai.transition=l}}return!1}function Fw(s,l,d){l=ic(d,l),l=rw(s,l,1),s=Ua(s,l,1),l=Fr(),s!==null&&(Se(s,1,l),Yr(s,l))}function Nn(s,l,d){if(s.tag===3)Fw(s,s,d);else for(;l!==null;){if(l.tag===3){Fw(l,s,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(za===null||!za.has(m))){s=ic(d,s),s=iw(l,s,1),l=Ua(l,s,1),s=Fr(),l!==null&&(Se(l,1,s),Yr(l,s));break}}l=l.return}}function xI(s,l,d){var m=s.pingCache;m!==null&&m.delete(l),l=Fr(),s.pingedLanes|=s.suspendedLanes&d,nr===s&&(fr&d)===d&&(Qn===4||Qn===3&&(fr&130023424)===fr&&500>Yt()-Jg?Wo(s,0):Yg|=d),Yr(s,l)}function Uw(s,l){l===0&&((s.mode&1)===0?l=1:(l=Aa,Aa<<=1,(Aa&130023424)===0&&(Aa=4194304)));var d=Fr();s=sa(s,l),s!==null&&(Se(s,l,d),Yr(s,d))}function vI(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),Uw(s,d)}function bI(s,l){var d=0;switch(s.tag){case 13:var m=s.stateNode,v=s.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(l),Uw(s,d)}var $w;$w=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||Gr.current)Xr=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return Xr=!1,oI(s,l,d);Xr=(s.flags&131072)!==0}else Xr=!1,mn&&(l.flags&1048576)!==0&&bb(l,Ih,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;qh(s,l),s=l.pendingProps;var v=Ql(l,_r.current);nc(l,d),v=Ag(null,l,m,s,v,d);var E=jg();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Kr(m)?(E=!0,Ch(l)):E=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,_g(l),v.updater=Hh,l.stateNode=v,v._reactInternals=l,Og(l,m,s,d),l=Ug(null,l,m,!0,E,d)):(l.tag=0,mn&&E&&hg(l),Vr(null,l,v,d),l=l.child),l;case 16:m=l.elementType;e:{switch(qh(s,l),s=l.pendingProps,v=m._init,m=v(m._payload),l.type=m,v=l.tag=_I(m),s=Ki(m,s),v){case 0:l=Fg(null,l,m,s,d);break e;case 1:l=fw(null,l,m,s,d);break e;case 11:l=lw(null,l,m,s,d);break e;case 14:l=cw(null,l,m,Ki(m.type,s),d);break e}throw Error(n(306,m,""))}return l;case 0:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:Ki(m,v),Fg(s,l,m,v,d);case 1:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:Ki(m,v),fw(s,l,m,v,d);case 3:e:{if(pw(l),s===null)throw Error(n(387));m=l.pendingProps,E=l.memoizedState,v=E.element,Ab(s,l),Lh(l,m,null,d);var P=l.memoizedState;if(m=P.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){v=ic(Error(n(423)),l),l=mw(s,l,m,d,v);break e}else if(m!==v){v=ic(Error(n(424)),l),l=mw(s,l,m,d,v);break e}else for(di=Ma(l.stateNode.containerInfo.firstChild),ui=l,mn=!0,Gi=null,d=Nb(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zl(),m===v){l=oa(s,l,d);break e}Vr(s,l,m,d)}l=l.child}return l;case 5:return Pb(l),s===null&&mg(l),m=l.type,v=l.pendingProps,E=s!==null?s.memoizedProps:null,P=v.children,ag(m,v)?P=null:E!==null&&ag(m,E)&&(l.flags|=32),hw(s,l),Vr(s,l,P,d),l.child;case 6:return s===null&&mg(l),null;case 13:return gw(s,l,d);case 4:return Eg(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=ec(l,null,m,d):Vr(s,l,m,d),l.child;case 11:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:Ki(m,v),lw(s,l,m,v,d);case 7:return Vr(s,l,l.pendingProps,d),l.child;case 8:return Vr(s,l,l.pendingProps.children,d),l.child;case 12:return Vr(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,v=l.pendingProps,E=l.memoizedProps,P=v.value,rn(Dh,m._currentValue),m._currentValue=P,E!==null)if(qi(E.value,P)){if(E.children===v.children&&!Gr.current){l=oa(s,l,d);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var $=E.dependencies;if($!==null){P=E.child;for(var W=$.firstContext;W!==null;){if(W.context===m){if(E.tag===1){W=aa(-1,d&-d),W.tag=2;var ae=E.updateQueue;if(ae!==null){ae=ae.shared;var Te=ae.pending;Te===null?W.next=W:(W.next=Te.next,Te.next=W),ae.pending=W}}E.lanes|=d,W=E.alternate,W!==null&&(W.lanes|=d),bg(E.return,d,l),$.lanes|=d;break}W=W.next}}else if(E.tag===10)P=E.type===l.type?null:E.child;else if(E.tag===18){if(P=E.return,P===null)throw Error(n(341));P.lanes|=d,$=P.alternate,$!==null&&($.lanes|=d),bg(P,d,l),P=E.sibling}else P=E.child;if(P!==null)P.return=E;else for(P=E;P!==null;){if(P===l){P=null;break}if(E=P.sibling,E!==null){E.return=P.return,P=E;break}P=P.return}E=P}Vr(s,l,v.children,d),l=l.child}return l;case 9:return v=l.type,m=l.pendingProps.children,nc(l,d),v=Ni(v),m=m(v),l.flags|=1,Vr(s,l,m,d),l.child;case 14:return m=l.type,v=Ki(m,l.pendingProps),v=Ki(m.type,v),cw(s,l,m,v,d);case 15:return uw(s,l,l.type,l.pendingProps,d);case 17:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:Ki(m,v),qh(s,l),l.tag=1,Kr(m)?(s=!0,Ch(l)):s=!1,nc(l,d),tw(l,m,v),Og(l,m,v,d),Ug(null,l,m,!0,s,d);case 19:return xw(s,l,d);case 22:return dw(s,l,d)}throw Error(n(156,l.tag))};function zw(s,l){return ls(s,l)}function wI(s,l,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(s,l,d,m){return new wI(s,l,d,m)}function a0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function _I(s){if(typeof s=="function")return a0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===Ke)return 14}return 2}function qa(s,l){var d=s.alternate;return d===null?(d=ji(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function rf(s,l,d,m,v,E){var P=2;if(m=s,typeof s=="function")a0(s)&&(P=1);else if(typeof s=="string")P=5;else e:switch(s){case R:return Go(d.children,v,E,l);case I:P=8,v|=8;break;case A:return s=ji(12,d,l,v|2),s.elementType=A,s.lanes=E,s;case D:return s=ji(13,d,l,v),s.elementType=D,s.lanes=E,s;case xe:return s=ji(19,d,l,v),s.elementType=xe,s.lanes=E,s;case qe:return sf(d,v,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:P=10;break e;case V:P=9;break e;case U:P=11;break e;case Ke:P=14;break e;case st:P=16,m=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=ji(P,d,l,v),l.elementType=s,l.type=m,l.lanes=E,l}function Go(s,l,d,m){return s=ji(7,s,m,l),s.lanes=d,s}function sf(s,l,d,m){return s=ji(22,s,m,l),s.elementType=qe,s.lanes=d,s.stateNode={isHidden:!1},s}function o0(s,l,d){return s=ji(6,s,null,l),s.lanes=d,s}function l0(s,l,d){return l=ji(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function EI(s,l,d,m,v){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pe(0),this.expirationTimes=pe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pe(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function c0(s,l,d,m,v,E,P,$,W){return s=new EI(s,l,d,$,W),l===1?(l=1,E===!0&&(l|=8)):l=0,E=ji(3,null,null,l),s.current=E,E.stateNode=s,E.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},_g(E),s}function kI(s,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:m==null?null:""+m,children:s,containerInfo:l,implementation:d}}function Bw(s){if(!s)return La;s=s._reactInternals;e:{if(Hr(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Kr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var d=s.type;if(Kr(d))return yb(s,d,l)}return l}function Hw(s,l,d,m,v,E,P,$,W){return s=c0(d,m,!0,s,v,E,P,$,W),s.context=Bw(null),d=s.current,m=Fr(),v=Ha(d),E=aa(m,v),E.callback=l??null,Ua(d,E,v),s.current.lanes=v,Se(s,v,m),Yr(s,m),s}function af(s,l,d,m){var v=l.current,E=Fr(),P=Ha(v);return d=Bw(d),l.context===null?l.context=d:l.pendingContext=d,l=aa(E,P),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=Ua(v,l,P),s!==null&&(Yi(s,v,P,E),Oh(s,v,P)),P}function of(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Ww(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function u0(s,l){Ww(s,l),(s=s.alternate)&&Ww(s,l)}function SI(){return null}var qw=typeof reportError=="function"?reportError:function(s){console.error(s)};function d0(s){this._internalRoot=s}lf.prototype.render=d0.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));af(s,l,null,null)},lf.prototype.unmount=d0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Ho(function(){af(null,s,null,null)}),l[ta]=null}};function lf(s){this._internalRoot=s}lf.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ui();s={blockedOn:null,target:s,priority:l};for(var d=0;d<fs.length&&l!==0&&l<fs[d].priority;d++);fs.splice(d,0,s),d===0&&uh(s)}};function h0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function cf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Gw(){}function TI(s,l,d,m,v){if(v){if(typeof m=="function"){var E=m;m=function(){var ae=of(P);E.call(ae)}}var P=Hw(l,m,s,0,null,!1,!1,"",Gw);return s._reactRootContainer=P,s[ta]=P.current,xu(s.nodeType===8?s.parentNode:s),Ho(),P}for(;v=s.lastChild;)s.removeChild(v);if(typeof m=="function"){var $=m;m=function(){var ae=of(W);$.call(ae)}}var W=c0(s,0,!1,null,null,!1,!1,"",Gw);return s._reactRootContainer=W,s[ta]=W.current,xu(s.nodeType===8?s.parentNode:s),Ho(function(){af(l,W,d,m)}),W}function uf(s,l,d,m,v){var E=d._reactRootContainer;if(E){var P=E;if(typeof v=="function"){var $=v;v=function(){var W=of(P);$.call(W)}}af(l,P,s,v)}else P=TI(d,l,s,v,m);return of(P)}Tn=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=ds(l.pendingLanes);d!==0&&(Ye(l,d|1),Yr(l,Yt()),(zt&6)===0&&(oc=Yt()+500,Va()))}break;case 13:Ho(function(){var m=sa(s,1);if(m!==null){var v=Fr();Yi(m,s,1,v)}}),u0(s,1)}},Fi=function(s){if(s.tag===13){var l=sa(s,134217728);if(l!==null){var d=Fr();Yi(l,s,134217728,d)}u0(s,134217728)}},Qs=function(s){if(s.tag===13){var l=Ha(s),d=sa(s,l);if(d!==null){var m=Fr();Yi(d,s,l,m)}u0(s,l)}},Ui=function(){return Ge},Jt=function(s,l){var d=Ge;try{return Ge=s,l()}finally{Ge=d}},dt=function(s,l,d){switch(l){case"input":if(je(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==s&&m.form===s.form){var v=Th(m);if(!v)throw Error(n(90));mt(m),je(m,v)}}}break;case"textarea":_e(s,d);break;case"select":l=d.value,l!=null&&jt(s,!!d.multiple,l,!1)}},ht=r0,Ht=Ho;var NI={usingClientEntryPoint:!1,Events:[wu,Kl,Th,Oe,It,r0]},Mu={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CI={bundleType:Mu.bundleType,version:Mu.version,rendererPackageName:Mu.rendererPackageName,rendererConfig:Mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=wi(s),s===null?null:s.stateNode},findFiberByHostInstance:Mu.findFiberByHostInstance||SI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{Gs=df.inject(CI),Mr=df}catch{}}return Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NI,Jr.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h0(l))throw Error(n(200));return kI(s,l,null,d)},Jr.createRoot=function(s,l){if(!h0(s))throw Error(n(299));var d=!1,m="",v=qw;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=c0(s,1,!1,null,null,d,!1,m,v),s[ta]=l.current,xu(s.nodeType===8?s.parentNode:s),new d0(l)},Jr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=wi(l),s=s===null?null:s.stateNode,s},Jr.flushSync=function(s){return Ho(s)},Jr.hydrate=function(s,l,d){if(!cf(l))throw Error(n(200));return uf(null,s,l,!0,d)},Jr.hydrateRoot=function(s,l,d){if(!h0(s))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,v=!1,E="",P=qw;if(d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(P=d.onRecoverableError)),l=Hw(l,null,s,1,d??null,v,!1,E,P),s[ta]=l.current,xu(s),m)for(s=0;s<m.length;s++)d=m[s],v=d._getVersion,v=v(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,v]:l.mutableSourceEagerHydrationData.push(d,v);return new lf(l)},Jr.render=function(s,l,d){if(!cf(l))throw Error(n(200));return uf(null,s,l,!1,d)},Jr.unmountComponentAtNode=function(s){if(!cf(s))throw Error(n(40));return s._reactRootContainer?(Ho(function(){uf(null,null,s,!1,function(){s._reactRootContainer=null,s[ta]=null})}),!0):!1},Jr.unstable_batchedUpdates=r0,Jr.unstable_renderSubtreeIntoContainer=function(s,l,d,m){if(!cf(d))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return uf(s,l,d,!1,m)},Jr.version="18.3.1-next-f1338f8080-20240426",Jr}var t2;function NS(){if(t2)return m0.exports;t2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),m0.exports=OI(),m0.exports}var n2;function LI(){if(n2)return hf;n2=1;var t=NS();return hf.createRoot=t.createRoot,hf.hydrateRoot=t.hydrateRoot,hf}var VI=LI();const FI=Fd(VI);var jx=NS();const UI=Fd(jx);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fd.apply(this,arguments)}var no;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(no||(no={}));const r2="popstate";function $I(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:c,hash:u}=r.location;return uy("",{pathname:a,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ap(i)}return BI(e,n,null,t)}function Ln(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zI(){return Math.random().toString(36).substr(2,8)}function i2(t,e){return{usr:t.state,key:t.key,idx:e}}function uy(t,e,n,r){return n===void 0&&(n=null),fd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wc(e):e,{state:n,key:e&&e.key||r||zI()})}function ap(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,u=no.Pop,h=null,f=g();f==null&&(f=0,c.replaceState(fd({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=no.Pop;let N=g(),j=N==null?null:N-f;f=N,h&&h({action:u,location:b.location,delta:j})}function x(N,j){u=no.Push;let M=uy(b.location,N,j);f=g()+1;let O=i2(M,f),F=b.createHref(M);try{c.pushState(O,"",F)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(F)}a&&h&&h({action:u,location:b.location,delta:1})}function w(N,j){u=no.Replace;let M=uy(b.location,N,j);f=g();let O=i2(M,f),F=b.createHref(M);c.replaceState(O,"",F),a&&h&&h({action:u,location:b.location,delta:0})}function S(N){let j=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof N=="string"?N:ap(N);return M=M.replace(/ $/,"%20"),Ln(j,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,j)}let b={get action(){return u},get location(){return t(i,c)},listen(N){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(r2,y),h=N,()=>{i.removeEventListener(r2,y),h=null}},createHref(N){return e(i,N)},createURL:S,encodeLocation(N){let j=S(N);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:w,go(N){return c.go(N)}};return b}var s2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(s2||(s2={}));function HI(t,e,n){return n===void 0&&(n="/"),WI(t,e,n)}function WI(t,e,n,r){let i=typeof e=="string"?Wc(e):e,a=Ix(i.pathname||"/",n);if(a==null)return null;let c=AS(t);qI(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=iP(a);u=tP(c[h],f)}return u}function AS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Ln(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=io([r,h.relativePath]),g=n.concat(h);a.children&&a.children.length>0&&(Ln(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),AS(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:ZI(f,a.index),routesMeta:g})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,c);else for(let h of jS(a.path))i(a,c,h)}),e}function jS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=jS(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),i&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function qI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GI=/^:[\w-]+$/,KI=3,XI=2,QI=1,YI=10,JI=-2,a2=t=>t==="*";function ZI(t,e){let n=t.split("/"),r=n.length;return n.some(a2)&&(r+=JI),e&&(r+=XI),n.filter(i=>!a2(i)).reduce((i,a)=>i+(GI.test(a)?KI:a===""?QI:YI),r)}function eP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function tP(t,e,n){let{routesMeta:r}=t,i={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=nP({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),x=h.route;if(!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:io([a,y.pathname]),pathnameBase:lP(io([a,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(a=io([a,y.pathnameBase]))}return c}function nP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:x,isOptional:w}=g;if(x==="*"){let b=u[y]||"";c=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const S=u[y];return w&&!S?f[x]=void 0:f[x]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function rP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),CS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return CS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ix(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wc(t):t;return{pathname:n?n.startsWith("/")?n:aP(n,e):e,search:cP(r),hash:uP(i)}}function aP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function x0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Px(t,e){let n=oP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Rx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wc(t):(i=fd({},t),Ln(!i.pathname||!i.pathname.includes("?"),x0("?","pathname","search",i)),Ln(!i.pathname||!i.pathname.includes("#"),x0("#","pathname","hash",i)),Ln(!i.search||!i.search.includes("#"),x0("#","search","hash",i)));let a=t===""||i.pathname==="",c=a?"/":i.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;i.pathname=x.join("/")}u=y>=0?e[y]:"/"}let h=sP(i,u),f=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const io=t=>t.join("/").replace(/\/\/+/g,"/"),lP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const IS=["post","put","patch","delete"];new Set(IS);const hP=["get",...IS];new Set(hP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}const Dx=T.createContext(null),fP=T.createContext(null),_o=T.createContext(null),Kp=T.createContext(null),Sa=T.createContext({outlet:null,matches:[],isDataRoute:!1}),PS=T.createContext(null);function pP(t,e){let{relative:n}=e===void 0?{}:e;qc()||Ln(!1);let{basename:r,navigator:i}=T.useContext(_o),{hash:a,pathname:c,search:u}=MS(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:io([r,c])),i.createHref({pathname:h,search:u,hash:a})}function qc(){return T.useContext(Kp)!=null}function Bs(){return qc()||Ln(!1),T.useContext(Kp).location}function RS(t){T.useContext(_o).static||T.useLayoutEffect(t)}function ai(){let{isDataRoute:t}=T.useContext(Sa);return t?NP():mP()}function mP(){qc()||Ln(!1);let t=T.useContext(Dx),{basename:e,future:n,navigator:r}=T.useContext(_o),{matches:i}=T.useContext(Sa),{pathname:a}=Bs(),c=JSON.stringify(Px(i,n.v7_relativeSplatPath)),u=T.useRef(!1);return RS(()=>{u.current=!0}),T.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=Rx(f,JSON.parse(c),a,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:io([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,a,t])}function DS(){let{matches:t}=T.useContext(Sa),e=t[t.length-1];return e?e.params:{}}function MS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(_o),{matches:i}=T.useContext(Sa),{pathname:a}=Bs(),c=JSON.stringify(Px(i,r.v7_relativeSplatPath));return T.useMemo(()=>Rx(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function gP(t,e){return yP(t,e)}function yP(t,e,n,r){qc()||Ln(!1);let{navigator:i}=T.useContext(_o),{matches:a}=T.useContext(Sa),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=Bs(),g;if(e){var y;let N=typeof e=="string"?Wc(e):e;h==="/"||(y=N.pathname)!=null&&y.startsWith(h)||Ln(!1),g=N}else g=f;let x=g.pathname||"/",w=x;if(h!=="/"){let N=h.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=HI(t,{pathname:w}),b=_P(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:io([h,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:io([h,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&b?T.createElement(Kp.Provider,{value:{location:pd({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:no.Pop}},b):b}function xP(){let t=TP(),e=dP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,null)}const vP=T.createElement(xP,null);class bP extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(Sa.Provider,{value:this.props.routeContext},T.createElement(PS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wP(t){let{routeContext:e,match:n,children:r}=t,i=T.useContext(Dx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Sa.Provider,{value:e},r)}function _P(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||Ln(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:x,errors:w}=n,S=y.route.loader&&x[y.route.id]===void 0&&(!w||w[y.route.id]===void 0);if(y.route.lazy||S){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,x)=>{let w,S=!1,b=null,N=null;n&&(w=u&&y.route.id?u[y.route.id]:void 0,b=y.route.errorElement||vP,h&&(f<0&&x===0?(CP("route-fallback"),S=!0,N=null):f===x&&(S=!0,N=y.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,x+1)),M=()=>{let O;return w?O=b:S?O=N:y.route.Component?O=T.createElement(y.route.Component,null):y.route.element?O=y.route.element:O=g,T.createElement(wP,{match:y,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:O})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?T.createElement(bP,{location:n.location,revalidation:n.revalidation,component:b,error:w,children:M(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):M()},null)}var OS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OS||{}),LS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(LS||{});function EP(t){let e=T.useContext(Dx);return e||Ln(!1),e}function kP(t){let e=T.useContext(fP);return e||Ln(!1),e}function SP(t){let e=T.useContext(Sa);return e||Ln(!1),e}function VS(t){let e=SP(),n=e.matches[e.matches.length-1];return n.route.id||Ln(!1),n.route.id}function TP(){var t;let e=T.useContext(PS),n=kP(),r=VS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function NP(){let{router:t}=EP(OS.UseNavigateStable),e=VS(LS.UseNavigateStable),n=T.useRef(!1);return RS(()=>{n.current=!0}),T.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pd({fromRouteId:e},a)))},[t,e])}const o2={};function CP(t,e,n){o2[t]||(o2[t]=!0)}function AP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function jP(t){let{to:e,replace:n,state:r,relative:i}=t;qc()||Ln(!1);let{future:a,static:c}=T.useContext(_o),{matches:u}=T.useContext(Sa),{pathname:h}=Bs(),f=ai(),g=Rx(e,Px(u,a.v7_relativeSplatPath),h,i==="path"),y=JSON.stringify(g);return T.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:i}),[f,y,i,n,r]),null}function ir(t){Ln(!1)}function IP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=no.Pop,navigator:a,static:c=!1,future:u}=t;qc()&&Ln(!1);let h=e.replace(/^\/*/,"/"),f=T.useMemo(()=>({basename:h,navigator:a,static:c,future:pd({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=Wc(r));let{pathname:g="/",search:y="",hash:x="",state:w=null,key:S="default"}=r,b=T.useMemo(()=>{let N=Ix(g,h);return N==null?null:{location:{pathname:N,search:y,hash:x,state:w,key:S},navigationType:i}},[h,g,y,x,w,S,i]);return b==null?null:T.createElement(_o.Provider,{value:f},T.createElement(Kp.Provider,{children:n,value:b}))}function PP(t){let{children:e,location:n}=t;return gP(dy(e),n)}new Promise(()=>{});function dy(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let a=[...e,i];if(r.type===T.Fragment){n.push.apply(n,dy(r.props.children,a));return}r.type!==ir&&Ln(!1),!r.props.index||!r.props.children||Ln(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=dy(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hy(){return hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hy.apply(this,arguments)}function RP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function DP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MP(t,e){return t.button===0&&(!e||e==="_self")&&!DP(t)}function fy(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function OP(t,e){let n=fy(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const LP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VP="6";try{window.__reactRouterVersion=VP}catch{}const FP="startTransition",l2=cy[FP];function UP(t){let{basename:e,children:n,future:r,window:i}=t,a=T.useRef();a.current==null&&(a.current=$I({window:i,v5Compat:!0}));let c=a.current,[u,h]=T.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=T.useCallback(y=>{f&&l2?l2(()=>h(y)):h(y)},[h,f]);return T.useLayoutEffect(()=>c.listen(g),[c,g]),T.useEffect(()=>AP(r),[r]),T.createElement(IP,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const $P=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=T.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y}=e,x=RP(e,LP),{basename:w}=T.useContext(_o),S,b=!1;if(typeof f=="string"&&zP.test(f)&&(S=f,$P))try{let O=new URL(window.location.href),F=f.startsWith("//")?new URL(O.protocol+f):new URL(f),H=Ix(F.pathname,w);F.origin===O.origin&&H!=null?f=H+F.search+F.hash:b=!0}catch{}let N=pP(f,{relative:i}),j=BP(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:i,viewTransition:y});function M(O){r&&r(O),O.defaultPrevented||j(O)}return T.createElement("a",hy({},x,{href:S||N,onClick:b||a?r:M,ref:n,target:h}))});var c2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(c2||(c2={}));var u2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(u2||(u2={}));function BP(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:c,viewTransition:u}=e===void 0?{}:e,h=ai(),f=Bs(),g=MS(t,{relative:c});return T.useCallback(y=>{if(MP(y,n)){y.preventDefault();let x=r!==void 0?r:ap(f)===ap(g);h(t,{replace:x,state:i,preventScrollReset:a,relative:c,viewTransition:u})}},[f,h,g,r,i,n,t,a,c,u])}function Mx(t){let e=T.useRef(fy(t)),n=T.useRef(!1),r=Bs(),i=T.useMemo(()=>OP(r.search,n.current?null:e.current),[r.search]),a=ai(),c=T.useCallback((u,h)=>{const f=fy(typeof u=="function"?u(i):u);n.current=!0,a("?"+f,h)},[a,i]);return[i,c]}const FS=T.createContext(),HP=({children:t})=>{const[e,n]=T.useState(()=>{const w=localStorage.getItem("carrito");return w?JSON.parse(w):[]}),[r,i]=T.useState(()=>{const w=localStorage.getItem("favoritos");return w?JSON.parse(w):[]});T.useEffect(()=>{localStorage.setItem("carrito",JSON.stringify(e))},[e]),T.useEffect(()=>{n(w=>w.map(S=>{if(S.maxStock!==void 0)return S;if(Array.isArray(S.variantes)&&S.colorSeleccionado){const b=S.variantes.find(N=>N.color===S.colorSeleccionado);if(b&&b.cantidad!==void 0)return{...S,maxStock:Number(b.cantidad)||0}}if(S.cantidadProducto!==void 0){const b=Number(S.cantidadProducto);if(!Number.isNaN(b))return{...S,maxStock:b}}return S}))},[]),T.useEffect(()=>{n(w=>{const S=new Map;for(const b of w){const N=`${b.id}__${b.colorSeleccionado??""}`,j=S.get(N);j?S.set(N,{...j,cantidad:(Number(j.cantidad)||0)+(Number(b.cantidad)||0),maxStock:Math.max(Number(j.maxStock??0)||0,Number(b.maxStock??0)||0)||j.maxStock||b.maxStock}):S.set(N,{...b})}return Array.from(S.values())})},[]),T.useEffect(()=>{localStorage.setItem("favoritos",JSON.stringify(r))},[r]);const a=w=>{try{const S=(w??"").toString().trim();return S||null}catch{return null}},c=(w,S=null)=>{n(b=>{const N=a(S),j=N&&Array.isArray(w.variantes)?w.variantes.find(F=>a(F.color)===N):null,M=(j&&Number(j.cantidad))??(w.maxStock!==void 0?Number(w.maxStock):void 0)??(w.cantidad!==void 0?Number(w.cantidad):void 0)??1/0,O=b.find(F=>F.id===w.id&&a(F.colorSeleccionado)===N);if(O){const F=Number.isFinite(M)?M:1/0,H=F;return O.cantidad<H?b.map(K=>K.id===w.id&&a(K.colorSeleccionado)===N?{...K,cantidad:K.cantidad+1,maxStock:F}:K):b}return M>0?[...b,{...w,cantidad:1,colorSeleccionado:N,maxStock:M}]:b})},u=(w,S=null)=>{const b=a(S);n(N=>N.map(j=>j.id===w&&a(j.colorSeleccionado)===b?{...j,cantidad:j.cantidad-1}:j).filter(j=>j.cantidad>0))},h=(w,S=null)=>{const b=a(S);n(N=>N.filter(j=>!(j.id===w&&a(j.colorSeleccionado)===b)))},f=w=>{n(S=>S.find(N=>N.id===w.id)?S.filter(N=>N.id!==w.id):[...S,{...w,cantidad:1}])},g=w=>{i(S=>S.find(b=>b.id===w.id)?S:[...S,w])},y=w=>{i(S=>S.filter(b=>b.id!==w))},x=()=>{n([])};return o.jsx(FS.Provider,{value:{carrito:e,favoritos:r,agregarAlCarrito:c,eliminarUnidadDelCarrito:u,quitarDelCarrito:h,toggleCarrito:f,agregarAFavoritos:g,eliminarDeFavoritos:y,vaciarCarrito:x},children:t})},Ud=()=>T.useContext(FS),US=T.createContext();function Gc(){return T.useContext(US)}function WP({children:t}){const[e,n]=T.useState(!1),[r,i]=T.useState("login");function a(u="login"){i(u),n(!0)}function c(){n(!1)}return o.jsx(US.Provider,{value:{modalAbierto:e,setModalAbierto:n,abrirModal:a,cerrarModal:c,modo:r,setModo:i},children:t})}const qP=()=>{};var d2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],c=t[n++],u=t[n++],h=((i&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},zS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],c=i+1<t.length,u=c?t[i+1]:0,h=i+2<t.length,f=h?t[i+2]:0,g=a>>2,y=(a&3)<<4|u>>4;let x=(u&15)<<2|f>>6,w=f&63;h||(w=64,c||(x=64)),r.push(n[g],n[y],n[x],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($S(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||u==null||f==null||y==null)throw new KP;const x=a<<2|u>>4;if(r.push(x),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const S=f<<6&192|y;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XP=function(t){const e=$S(t);return zS.encodeByteArray(e,!0)},op=function(t){return XP(t).replace(/\./g,"")},BS=function(t){try{return zS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=()=>QP().__FIREBASE_DEFAULTS__,JP=()=>{if(typeof process>"u"||typeof d2>"u")return;const t=d2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BS(t[1]);return e&&JSON.parse(e)},Xp=()=>{try{return qP()||YP()||JP()||ZP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HS=t=>{var e,n;return(n=(e=Xp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WS=t=>{const e=HS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qS=()=>{var t;return(t=Xp())===null||t===void 0?void 0:t.config},GS=t=>{var e;return(e=Xp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ox(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[op(JSON.stringify(n)),op(JSON.stringify(c)),""].join(".")}const Ju={};function t5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ju))Ju[e]?t.emulator.push(e):t.prod.push(e);return t}function n5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let h2=!1;function Lx(t,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Ju[t]===e||Ju[t]||h2)return;Ju[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=t5().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function h(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{h2=!0,c()},x}function g(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=n5(r),w=n("text"),S=document.getElementById(w)||document.createElement("span"),b=n("learnmore"),N=document.getElementById(b)||document.createElement("a"),j=n("preprendIcon"),M=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const O=x.element;u(O),g(N,b);const F=f();h(M,j),O.append(M,S,N,F),document.body.appendChild(O)}a?(S.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rr())}function i5(){var t;const e=(t=Xp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function o5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l5(){const t=Rr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function c5(){return!i5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u5(){try{return typeof indexedDB=="object"}catch{return!1}}function d5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="FirebaseError";class Hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h5,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$d.prototype.create)}}class $d{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?f5(a,r):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new Hs(i,u,r)}}function f5(t,e){return t.replace(p5,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const p5=/\{\$([^}]+)}/g;function m5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],c=e[i];if(f2(a)&&f2(c)){if(!hl(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function f2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function g5(t,e){const n=new y5(t,e);return n.subscribe.bind(n)}class y5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");x5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=v0),i.error===void 0&&(i.error=v0),i.complete===void 0&&(i.complete=v0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function v0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new e5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w5(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:b5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b5(t){return t===Qo?void 0:t}function w5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new v5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Lt||(Lt={}));const E5={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},k5=Lt.INFO,S5={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},T5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=S5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vx{constructor(e){this.name=e,this._logLevel=k5,this._logHandler=T5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const N5=(t,e)=>e.some(n=>t instanceof n);let p2,m2;function C5(){return p2||(p2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A5(){return m2||(m2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XS=new WeakMap,py=new WeakMap,QS=new WeakMap,b0=new WeakMap,Fx=new WeakMap;function j5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(so(t.result)),i()},c=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&XS.set(n,t)}).catch(()=>{}),Fx.set(e,t),e}function I5(t){if(py.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),i()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});py.set(t,e)}let my={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return py.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return so(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P5(t){my=t(my)}function R5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(w0(this),e,...n);return QS.set(r,e.sort?e.sort():[e]),so(r)}:A5().includes(t)?function(...e){return t.apply(w0(this),e),so(XS.get(this))}:function(...e){return so(t.apply(w0(this),e))}}function D5(t){return typeof t=="function"?R5(t):(t instanceof IDBTransaction&&I5(t),N5(t,C5())?new Proxy(t,my):t)}function so(t){if(t instanceof IDBRequest)return j5(t);if(b0.has(t))return b0.get(t);const e=D5(t);return e!==t&&(b0.set(t,e),Fx.set(e,t)),e}const w0=t=>Fx.get(t);function M5(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(t,e),u=so(c);return r&&c.addEventListener("upgradeneeded",h=>{r(so(c.result),h.oldVersion,h.newVersion,so(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const O5=["get","getKey","getAll","getAllKeys","count"],L5=["put","add","delete","clear"],_0=new Map;function g2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_0.get(e))return _0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=L5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||O5.includes(n)))return;const a=async function(c,...u){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&h.done]))[0]};return _0.set(e,a),a}P5(t=>({...t,get:(e,n,r)=>g2(e,n)||t.get(e,n,r),has:(e,n)=>!!g2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function F5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gy="@firebase/app",y2="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Vx("@firebase/app"),U5="@firebase/app-compat",$5="@firebase/analytics-compat",z5="@firebase/analytics",B5="@firebase/app-check-compat",H5="@firebase/app-check",W5="@firebase/auth",q5="@firebase/auth-compat",G5="@firebase/database",K5="@firebase/data-connect",X5="@firebase/database-compat",Q5="@firebase/functions",Y5="@firebase/functions-compat",J5="@firebase/installations",Z5="@firebase/installations-compat",e3="@firebase/messaging",t3="@firebase/messaging-compat",n3="@firebase/performance",r3="@firebase/performance-compat",i3="@firebase/remote-config",s3="@firebase/remote-config-compat",a3="@firebase/storage",o3="@firebase/storage-compat",l3="@firebase/firestore",c3="@firebase/ai",u3="@firebase/firestore-compat",d3="firebase",h3="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="[DEFAULT]",f3={[gy]:"fire-core",[U5]:"fire-core-compat",[z5]:"fire-analytics",[$5]:"fire-analytics-compat",[H5]:"fire-app-check",[B5]:"fire-app-check-compat",[W5]:"fire-auth",[q5]:"fire-auth-compat",[G5]:"fire-rtdb",[K5]:"fire-data-connect",[X5]:"fire-rtdb-compat",[Q5]:"fire-fn",[Y5]:"fire-fn-compat",[J5]:"fire-iid",[Z5]:"fire-iid-compat",[e3]:"fire-fcm",[t3]:"fire-fcm-compat",[n3]:"fire-perf",[r3]:"fire-perf-compat",[i3]:"fire-rc",[s3]:"fire-rc-compat",[a3]:"fire-gcs",[o3]:"fire-gcs-compat",[l3]:"fire-fst",[u3]:"fire-fst-compat",[c3]:"fire-vertex","fire-js":"fire-js",[d3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=new Map,p3=new Map,xy=new Map;function x2(t,e){try{t.container.addComponent(e)}catch(n){ya.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fl(t){const e=t.name;if(xy.has(e))return ya.debug(`There were multiple attempts to register component ${e}.`),!1;xy.set(e,t);for(const n of lp.values())x2(n,t);for(const n of p3.values())x2(n,t);return!0}function Qp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new $d("app","Firebase",m3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=h3;function YS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ao.create("bad-app-name",{appName:String(i)});if(n||(n=qS()),!n)throw ao.create("no-options");const a=lp.get(i);if(a){if(hl(n,a.options)&&hl(r,a.config))return a;throw ao.create("duplicate-app",{appName:i})}const c=new _5(i);for(const h of xy.values())c.addComponent(h);const u=new g3(n,r,c);return lp.set(i,u),u}function Ux(t=yy){const e=lp.get(t);if(!e&&t===yy&&qS())return YS();if(!e)throw ao.create("no-app",{appName:t});return e}function As(t,e,n){var r;let i=(r=f3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ya.warn(u.join(" "));return}fl(new co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3="firebase-heartbeat-database",x3=1,md="firebase-heartbeat-store";let E0=null;function JS(){return E0||(E0=M5(y3,x3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(md)}catch(n){console.warn(n)}}}}).catch(t=>{throw ao.create("idb-open",{originalErrorMessage:t.message})})),E0}async function v3(t){try{const n=(await JS()).transaction(md),r=await n.objectStore(md).get(ZS(t));return await n.done,r}catch(e){if(e instanceof Hs)ya.warn(e.message);else{const n=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ya.warn(n.message)}}}async function v2(t,e){try{const r=(await JS()).transaction(md,"readwrite");await r.objectStore(md).put(e,ZS(t)),await r.done}catch(n){if(n instanceof Hs)ya.warn(n.message);else{const r=ao.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ya.warn(r.message)}}}function ZS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=1024,w3=30;class _3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new k3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=b2();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>w3){const c=S3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ya.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b2(),{heartbeatsToSend:r,unsentEntries:i}=E3(this._heartbeatsCache.heartbeats),a=op(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ya.warn(n),""}}}function b2(){return new Date().toISOString().substring(0,10)}function E3(t,e=b3){const n=[];let r=t.slice();for(const i of t){const a=n.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),w2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),w2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class k3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u5()?d5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await v3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return v2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return v2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function w2(t){return op(JSON.stringify({version:2,heartbeats:t})).length}function S3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){fl(new co("platform-logger",e=>new V5(e),"PRIVATE")),fl(new co("heartbeat",e=>new _3(e),"PRIVATE")),As(gy,y2,t),As(gy,y2,"esm2017"),As("fire-js","")}T3("");function $x(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _l(t,e,n,r){function i(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function u(g){try{f(r.next(g))}catch(y){c(y)}}function h(g){try{f(r.throw(g))}catch(y){c(y)}}function f(g){g.done?a(g.value):i(g.value).then(u,h)}f((r=r.apply(t,e||[])).next())})}function eT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N3=eT,tT=new $d("auth","Firebase",eT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=new Vx("@firebase/auth");function C3(t,...e){cp.logLevel<=Lt.WARN&&cp.warn(`Auth (${wl}): ${t}`,...e)}function Ff(t,...e){cp.logLevel<=Lt.ERROR&&cp.error(`Auth (${wl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,...e){throw zx(t,...e)}function js(t,...e){return zx(t,...e)}function nT(t,e,n){const r=Object.assign(Object.assign({},N3()),{[e]:n});return new $d("auth","Firebase",r).create(e,{appName:t.name})}function pa(t){return nT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tT.create(t,...e)}function yt(t,e,...n){if(!t)throw zx(e,...n)}function ha(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ff(e),new Error(e)}function xa(t,e){t||ha(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function A3(){return _2()==="http:"||_2()==="https:"}function _2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A3()||a5()||"connection"in navigator)?navigator.onLine:!0}function I3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.shortDelay=e,this.longDelay=n,xa(n>e,"Short delay should be less than long delay!"),this.isMobile=r5()||o5()}get(){return j3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e){xa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D3=new Bd(3e4,6e4);function ko(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ta(t,e,n,r,i={}){return iT(t,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=zd(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},a);return s5()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(f.credentials="include"),rT.fetch()(await sT(t,t.config.apiHost,n,u),f)})}async function iT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},P3),e);try{const i=new O3(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw ff(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw ff(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw ff(t,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw nT(t,g,f);is(t,g)}}catch(i){if(i instanceof Hs)throw i;is(t,"network-request-failed",{message:String(i)})}}async function Hd(t,e,n,r,i={}){const a=await Ta(t,e,n,r,i);return"mfaPendingCredential"in a&&is(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function sT(t,e,n,r){const i=`${e}${n}?${r}`,a=t,c=a.config.emulator?Bx(t.config,i):`${t.config.apiScheme}://${i}`;return R3.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function M3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(js(this.auth,"network-request-failed")),D3.get())})}}function ff(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=js(t,e,r);return i.customData._tokenResponse=n,i}function E2(t){return t!==void 0&&t.enterprise!==void 0}class L3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return M3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V3(t,e){return Ta(t,"GET","/v2/recaptchaConfig",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(t,e){return Ta(t,"POST","/v1/accounts:delete",e)}async function up(t,e){return Ta(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function U3(t,e=!1){const n=on(t),r=await n.getIdToken(e),i=Hx(r);yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Zu(k0(i.auth_time)),issuedAtTime:Zu(k0(i.iat)),expirationTime:Zu(k0(i.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function k0(t){return Number(t)*1e3}function Hx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{const i=BS(n);return i?JSON.parse(i):(Ff("Failed to decode base64 JWT payload"),null)}catch(i){return Ff("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function k2(t){const e=Hx(t);return yt(e,"internal-error"),yt(typeof e.exp<"u","internal-error"),yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hs&&$3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Mc(t,up(n,{idToken:r}));yt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?aT(a.providerUserInfo):[],u=H3(t.providerData,c),h=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),g=h?f:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new by(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function B3(t){const e=on(t);await dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aT(t){return t.map(e=>{var{providerId:n}=e,r=$x(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e){const n=await iT(t,{},async()=>{const r=zd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,c=await sT(t,i,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(h.credentials="include"),rT.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q3(t,e){return Ta(t,"POST","/v2/accounts:revokeToken",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt(typeof e.idToken<"u","internal-error"),yt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){yt(e.length!==0,"internal-error");const n=k2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await W3(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,c=new Cc;return r&&(yt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(yt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(yt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cc,this.toJSON())}_performRefresh(){return ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){yt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ns{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=$x(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new by(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return U3(this,e)}reload(){return B3(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ns(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(pa(this.auth));const e=await this.getIdToken();return await Mc(this,F3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,c,u,h,f,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(u=n.tenantId)!==null&&u!==void 0?u:void 0,N=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,j=(f=n.createdAt)!==null&&f!==void 0?f:void 0,M=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:O,emailVerified:F,isAnonymous:H,providerData:K,stsTokenManager:R}=n;yt(O&&R,e,"internal-error");const I=Cc.fromJSON(this.name,R);yt(typeof O=="string",e,"internal-error"),Ka(y,e.name),Ka(x,e.name),yt(typeof F=="boolean",e,"internal-error"),yt(typeof H=="boolean",e,"internal-error"),Ka(w,e.name),Ka(S,e.name),Ka(b,e.name),Ka(N,e.name),Ka(j,e.name),Ka(M,e.name);const A=new ns({uid:O,auth:e,email:x,emailVerified:F,displayName:y,isAnonymous:H,photoURL:S,phoneNumber:w,tenantId:b,stsTokenManager:I,createdAt:j,lastLoginAt:M});return K&&Array.isArray(K)&&(A.providerData=K.map(k=>Object.assign({},k))),N&&(A._redirectEventId=N),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Cc;i.updateFromServerResponse(n);const a=new ns({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await dp(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];yt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?aT(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),u=new Cc;u.updateFromIdToken(r);const h=new ns({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new by(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Map;function fa(t){xa(t instanceof Function,"Expected a class definition");let e=S2.get(t);return e?(xa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oT.type="NONE";const T2=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ac{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Uf(this.userKey,i.apiKey,a),this.fullPersistenceKey=Uf("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await up(this.auth,{idToken:e}).catch(()=>{});return n?ns._fromGetAccountInfoResponse(this.auth,n,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ac(fa(T2),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||fa(T2);const c=Uf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const x=await up(e,{idToken:g}).catch(()=>{});if(!x)break;y=await ns._fromGetAccountInfoResponse(e,x,g)}else y=ns._fromJSON(e,g);f!==a&&(u=y),a=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Ac(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new Ac(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fT(e))return"Blackberry";if(pT(e))return"Webos";if(cT(e))return"Safari";if((e.includes("chrome/")||uT(e))&&!e.includes("edge/"))return"Chrome";if(hT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lT(t=Rr()){return/firefox\//i.test(t)}function cT(t=Rr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uT(t=Rr()){return/crios\//i.test(t)}function dT(t=Rr()){return/iemobile/i.test(t)}function hT(t=Rr()){return/android/i.test(t)}function fT(t=Rr()){return/blackberry/i.test(t)}function pT(t=Rr()){return/webos/i.test(t)}function Wx(t=Rr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function G3(t=Rr()){var e;return Wx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function K3(){return l5()&&document.documentMode===10}function mT(t=Rr()){return Wx(t)||hT(t)||pT(t)||fT(t)||/windows phone/i.test(t)||dT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t,e=[]){let n;switch(t){case"Browser":n=N2(Rr());break;case"Worker":n=`${N2(Rr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(t,e={}){return Ta(t,"GET","/v2/passwordPolicy",ko(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=6;class J3{constructor(e){var n,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:Y3,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C2(this),this.idTokenSubscription=new C2(this),this.beforeStateQueue=new X3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fa(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Ac.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await up(this,{idToken:e}),r=await ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=I3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(pa(this));const n=e?on(e):null;return n&&yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Q3(this),n=new J3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $d("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await q3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fa(e)||this._popupRedirectResolver;yt(n,this,"argument-error"),this.redirectPersistenceManager=await Ac.create(this,[fa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&C3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function El(t){return on(t)}class C2{constructor(e){this.auth=e,this.observer=null,this.addObserver=g5(n=>this.observer=n)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eR(t){Yp=t}function yT(t){return Yp.loadJS(t)}function tR(){return Yp.recaptchaEnterpriseScript}function nR(){return Yp.gapiScript}function rR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class iR{constructor(){this.enterprise=new sR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const aR="recaptcha-enterprise",xT="NO_RECAPTCHA";class oR{constructor(e){this.type=aR,this.auth=El(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{V3(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new L3(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function i(a,c,u){const h=window.grecaptcha;E2(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(xT)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iR().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&E2(window.grecaptcha))i(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=tR();h.length!==0&&(h+=u),yT(h).then(()=>{i(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function A2(t,e,n,r=!1,i=!1){const a=new oR(t);let c;if(i)c=xT;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function wy(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await A2(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await A2(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t,e){const n=Qp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(hl(a,e??{}))return i;is(i,"already-initialized")}return n.initialize({options:e})}function cR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uR(t,e,n){const r=El(t);yt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=vT(e),{host:c,port:u}=dR(e),h=u===null?"":`:${u}`,f={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){yt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),yt(hl(f,r.config.emulator)&&hl(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Eo(c)?(Ox(`${a}//${c}${h}`),Lx("Auth",!0)):hR()}function vT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dR(t){const e=vT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:j2(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:j2(c)}}}function j2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ha("not implemented")}_getIdTokenResponse(e){return ha("not implemented")}_linkToIdToken(e,n){return ha("not implemented")}_getReauthenticationResolver(e){return ha("not implemented")}}async function fR(t,e){return Ta(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e){return Hd(t,"POST","/v1/accounts:signInWithPassword",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(t,e){return Hd(t,"POST","/v1/accounts:signInWithEmailLink",ko(t,e))}async function gR(t,e){return Hd(t,"POST","/v1/accounts:signInWithEmailLink",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends qx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new gd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wy(e,n,"signInWithPassword",pR);case"emailLink":return mR(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wy(e,r,"signUpPassword",fR);case"emailLink":return gR(e,{idToken:n,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t,e){return Hd(t,"POST","/v1/accounts:signInWithIdp",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="http://localhost";class pl extends qx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=$x(n,["providerId","signInMethod"]);if(!r||!i)return null;const c=new pl(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return jc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,jc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jc(e,n)}buildRequest(){const e={requestUri:yR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vR(t){const e=Bu(Hu(t)).link,n=e?Bu(Hu(e)).deep_link_id:null,r=Bu(Hu(t)).deep_link_id;return(r?Bu(Hu(r)).link:null)||r||n||e||t}class Gx{constructor(e){var n,r,i,a,c,u;const h=Bu(Hu(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=xR((i=h.mode)!==null&&i!==void 0?i:null);yt(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=vR(e);try{return new Gx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.providerId=Kc.PROVIDER_ID}static credential(e,n){return gd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gx.parseLink(n);return yt(r,"argument-error"),gd._fromEmailAndCode(e,r.code,r.tenantId)}}Kc.PROVIDER_ID="password";Kc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Kc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends bT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Wd{constructor(){super("facebook.com")}static credential(e){return pl._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ya.credential(e.oauthAccessToken)}catch{return null}}}Ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Wd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pl._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ja.credential(n,r)}catch{return null}}}Ja.GOOGLE_SIGN_IN_METHOD="google.com";Ja.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends Wd{constructor(){super("github.com")}static credential(e){return pl._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch{return null}}}Za.GITHUB_SIGN_IN_METHOD="github.com";Za.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Wd{constructor(){super("twitter.com")}static credential(e,n){return pl._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return eo.credential(n,r)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(t,e){return Hd(t,"POST","/v1/accounts:signUp",ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ns._fromIdTokenResponse(e,r,i),c=I2(r);return new ml({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=I2(r);return new ml({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function I2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends Hs{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,hp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new hp(e,n,r,i)}}function wT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?hp._fromErrorAndOperation(t,a,e,r):a})}async function wR(t,e,n=!1){const r=await Mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ml._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e,n=!1){const{auth:r}=t;if(fi(r.app))return Promise.reject(pa(r));const i="reauthenticate";try{const a=await Mc(t,wT(r,i,e,t),n);yt(a.idToken,r,"internal-error");const c=Hx(a.idToken);yt(c,r,"internal-error");const{sub:u}=c;return yt(t.uid===u,r,"user-mismatch"),ml._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&is(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(t,e,n=!1){if(fi(t.app))return Promise.reject(pa(t));const r="signIn",i=await wT(t,r,e),a=await ml._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function ER(t,e){return _T(El(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t){const e=El(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kR(t,e,n){if(fi(t.app))return Promise.reject(pa(t));const r=El(t),c=await wy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bR).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&ET(t),h}),u=await ml._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function SR(t,e,n){return fi(t.app)?Promise.reject(pa(t)):ER(on(t),Kc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ET(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e){return Ta(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=on(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},c=await Mc(r,TR(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const u=r.providerData.find(({providerId:h})=>h==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function NR(t,e,n,r){return on(t).onIdTokenChanged(e,n,r)}function CR(t,e,n){return on(t).beforeAuthStateChanged(e,n)}function AR(t,e,n,r){return on(t).onAuthStateChanged(e,n,r)}function jR(t){return on(t).signOut()}const fp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fp,"1"),this.storage.removeItem(fp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1e3,PR=10;class ST extends kT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);K3()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,PR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ST.type="LOCAL";const RR=ST;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends kT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TT.type="SESSION";const NT=TT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Jp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(c).map(async f=>f(n.origin,a)),h=await DR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const f=Kx("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const x=y;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(x.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(){return window}function OR(t){Is().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){return typeof Is().WorkerGlobalScope<"u"&&typeof Is().importScripts=="function"}async function LR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function FR(){return CT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firebaseLocalStorageDb",UR=1,pp="firebaseLocalStorage",jT="fbase_key";class qd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zp(t,e){return t.transaction([pp],e?"readwrite":"readonly").objectStore(pp)}function $R(){const t=indexedDB.deleteDatabase(AT);return new qd(t).toPromise()}function _y(){const t=indexedDB.open(AT,UR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pp,{keyPath:jT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pp)?e(r):(r.close(),await $R(),e(await _y()))})})}async function P2(t,e,n){const r=Zp(t,!0).put({[jT]:e,value:n});return new qd(r).toPromise()}async function zR(t,e){const n=Zp(t,!1).get(e),r=await new qd(n).toPromise();return r===void 0?null:r.value}function R2(t,e){const n=Zp(t,!0).delete(e);return new qd(n).toPromise()}const BR=800,HR=3;class IT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _y(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jp._getInstance(FR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await LR(),!this.activeServiceWorker)return;this.sender=new MR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _y();return await P2(e,fp,"1"),await R2(e,fp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Zp(i,!1).getAll();return new qd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IT.type="LOCAL";const WR=IT;new Bd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e){return e?fa(e):(yt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends qx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GR(t){return _T(t.auth,new Xx(t),t.bypassAuthState)}function KR(t){const{auth:e,user:n}=t;return yt(n,e,"internal-error"),_R(n,new Xx(t),t.bypassAuthState)}async function XR(t){const{auth:e,user:n}=t;return yt(n,e,"internal-error"),wR(n,new Xx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GR;case"linkViaPopup":case"linkViaRedirect":return XR;case"reauthViaPopup":case"reauthViaRedirect":return KR;default:is(this.auth,"internal-error")}}resolve(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new Bd(2e3,1e4);class _c extends PT{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,_c.currentPopupAction&&_c.currentPopupAction.cancel(),_c.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){xa(this.filter.length===1,"Popup operations only handle one event");const e=Kx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(js(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(js(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_c.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(js(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QR.get())};e()}}_c.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="pendingRedirect",$f=new Map;class JR extends PT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$f.get(this.auth._key());if(!e){try{const r=await ZR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$f.set(this.auth._key(),e)}return this.bypassAuthState||$f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZR(t,e){const n=n6(e),r=t6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function e6(t,e){$f.set(t._key(),e)}function t6(t){return fa(t._redirectPersistence)}function n6(t){return Uf(YR,t.config.apiKey,t.name)}async function r6(t,e,n=!1){if(fi(t.app))return Promise.reject(pa(t));const r=El(t),i=qR(r,e),c=await new JR(r,i,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=10*60*1e3;class s6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(js(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i6&&this.cachedEventUids.clear(),this.cachedEventUids.has(D2(e))}saveEventToCache(e){this.cachedEventUids.add(D2(e)),this.lastProcessedEventTime=Date.now()}}function D2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function a6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(t,e={}){return Ta(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c6=/^https?/;async function u6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await o6(t);for(const n of e)try{if(d6(n))return}catch{}is(t,"unauthorized-domain")}function d6(t){const e=vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!c6.test(n))return!1;if(l6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new Bd(3e4,6e4);function M2(){const t=Is().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function f6(t){return new Promise((e,n)=>{var r,i,a;function c(){M2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M2(),n(js(t,"network-request-failed"))},timeout:h6.get()})}if(!((i=(r=Is().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Is().gapi)===null||a===void 0)&&a.load)c();else{const u=rR("iframefcb");return Is()[u]=()=>{gapi.load?c():n(js(t,"network-request-failed"))},yT(`${nR()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw zf=null,e})}let zf=null;function p6(t){return zf=zf||f6(t),zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=new Bd(5e3,15e3),g6="__/auth/iframe",y6="emulator/auth/iframe",x6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b6(t){const e=t.config;yt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bx(e,y6):`https://${t.config.authDomain}/${g6}`,r={apiKey:e.apiKey,appName:t.name,v:wl},i=v6.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${zd(r).slice(1)}`}async function w6(t){const e=await p6(t),n=Is().gapi;return yt(n,t,"internal-error"),e.open({where:document.body,url:b6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x6,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=js(t,"network-request-failed"),u=Is().setTimeout(()=>{a(c)},m6.get());function h(){Is().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E6=500,k6=600,S6="_blank",T6="http://localhost";class O2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N6(t,e,n,r=E6,i=k6){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},_6),{width:r.toString(),height:i.toString(),top:a,left:c}),f=Rr().toLowerCase();n&&(u=uT(f)?S6:n),lT(f)&&(e=e||T6,h.scrollbars="yes");const g=Object.entries(h).reduce((x,[w,S])=>`${x}${w}=${S},`,"");if(G3(f)&&u!=="_self")return C6(e||"",u),new O2(null);const y=window.open(e||"",u,g);yt(y,t,"popup-blocked");try{y.focus()}catch{}return new O2(y)}function C6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="__/auth/handler",j6="emulator/auth/handler",I6=encodeURIComponent("fac");async function L2(t,e,n,r,i,a){yt(t.config.authDomain,t,"auth-domain-config-required"),yt(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wl,eventId:i};if(e instanceof bT){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",m5(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Wd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await t._getAppCheckToken(),f=h?`#${I6}=${encodeURIComponent(h)}`:"";return`${P6(t)}?${zd(u).slice(1)}${f}`}function P6({config:t}){return t.emulator?Bx(t,j6):`https://${t.authDomain}/${A6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="webStorageSupport";class R6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NT,this._completeRedirectFn=r6,this._overrideRedirectResult=e6}async _openPopup(e,n,r,i){var a;xa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await L2(e,n,r,vy(),i);return N6(e,c,Kx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await L2(e,n,r,vy(),i);return OR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(xa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await w6(e),r=new s6(e);return n.register("authEvent",i=>(yt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(S0,{type:S0},i=>{var a;const c=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[S0];c!==void 0&&n(!!c),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mT()||cT()||Wx()}}const D6=R6;var V2="@firebase/auth",F2="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L6(t){fl(new co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;yt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gT(t)},f=new Z3(r,i,a,h);return cR(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fl(new co("auth-internal",e=>{const n=El(e.getProvider("auth").getImmediate());return(r=>new M6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(V2,F2,O6(t)),As(V2,F2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=5*60,F6=GS("authIdTokenMaxAge")||V6;let U2=null;const U6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F6)return;const i=n==null?void 0:n.token;U2!==i&&(U2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function $6(t=Ux()){const e=Qp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lR(t,{popupRedirectResolver:D6,persistence:[WR,RR,NT]}),r=GS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=U6(a.toString());CR(n,c,()=>c(n.currentUser)),NR(n,u=>c(u))}}const i=HS("auth");return i&&uR(n,`http://${i}`),n}function z6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}eR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=js("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",z6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L6("Browser");var $2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,DT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function A(){}A.prototype=I.prototype,R.D=I.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(k,V,U){for(var D=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)D[xe-2]=arguments[xe];return I.prototype[V].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,A){A||(A=0);var k=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)k[V]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(V=0;16>V;++V)k[V]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=R.g[0],A=R.g[1],V=R.g[2];var U=R.g[3],D=I+(U^A&(V^U))+k[0]+3614090360&4294967295;I=A+(D<<7&4294967295|D>>>25),D=U+(V^I&(A^V))+k[1]+3905402710&4294967295,U=I+(D<<12&4294967295|D>>>20),D=V+(A^U&(I^A))+k[2]+606105819&4294967295,V=U+(D<<17&4294967295|D>>>15),D=A+(I^V&(U^I))+k[3]+3250441966&4294967295,A=V+(D<<22&4294967295|D>>>10),D=I+(U^A&(V^U))+k[4]+4118548399&4294967295,I=A+(D<<7&4294967295|D>>>25),D=U+(V^I&(A^V))+k[5]+1200080426&4294967295,U=I+(D<<12&4294967295|D>>>20),D=V+(A^U&(I^A))+k[6]+2821735955&4294967295,V=U+(D<<17&4294967295|D>>>15),D=A+(I^V&(U^I))+k[7]+4249261313&4294967295,A=V+(D<<22&4294967295|D>>>10),D=I+(U^A&(V^U))+k[8]+1770035416&4294967295,I=A+(D<<7&4294967295|D>>>25),D=U+(V^I&(A^V))+k[9]+2336552879&4294967295,U=I+(D<<12&4294967295|D>>>20),D=V+(A^U&(I^A))+k[10]+4294925233&4294967295,V=U+(D<<17&4294967295|D>>>15),D=A+(I^V&(U^I))+k[11]+2304563134&4294967295,A=V+(D<<22&4294967295|D>>>10),D=I+(U^A&(V^U))+k[12]+1804603682&4294967295,I=A+(D<<7&4294967295|D>>>25),D=U+(V^I&(A^V))+k[13]+4254626195&4294967295,U=I+(D<<12&4294967295|D>>>20),D=V+(A^U&(I^A))+k[14]+2792965006&4294967295,V=U+(D<<17&4294967295|D>>>15),D=A+(I^V&(U^I))+k[15]+1236535329&4294967295,A=V+(D<<22&4294967295|D>>>10),D=I+(V^U&(A^V))+k[1]+4129170786&4294967295,I=A+(D<<5&4294967295|D>>>27),D=U+(A^V&(I^A))+k[6]+3225465664&4294967295,U=I+(D<<9&4294967295|D>>>23),D=V+(I^A&(U^I))+k[11]+643717713&4294967295,V=U+(D<<14&4294967295|D>>>18),D=A+(U^I&(V^U))+k[0]+3921069994&4294967295,A=V+(D<<20&4294967295|D>>>12),D=I+(V^U&(A^V))+k[5]+3593408605&4294967295,I=A+(D<<5&4294967295|D>>>27),D=U+(A^V&(I^A))+k[10]+38016083&4294967295,U=I+(D<<9&4294967295|D>>>23),D=V+(I^A&(U^I))+k[15]+3634488961&4294967295,V=U+(D<<14&4294967295|D>>>18),D=A+(U^I&(V^U))+k[4]+3889429448&4294967295,A=V+(D<<20&4294967295|D>>>12),D=I+(V^U&(A^V))+k[9]+568446438&4294967295,I=A+(D<<5&4294967295|D>>>27),D=U+(A^V&(I^A))+k[14]+3275163606&4294967295,U=I+(D<<9&4294967295|D>>>23),D=V+(I^A&(U^I))+k[3]+4107603335&4294967295,V=U+(D<<14&4294967295|D>>>18),D=A+(U^I&(V^U))+k[8]+1163531501&4294967295,A=V+(D<<20&4294967295|D>>>12),D=I+(V^U&(A^V))+k[13]+2850285829&4294967295,I=A+(D<<5&4294967295|D>>>27),D=U+(A^V&(I^A))+k[2]+4243563512&4294967295,U=I+(D<<9&4294967295|D>>>23),D=V+(I^A&(U^I))+k[7]+1735328473&4294967295,V=U+(D<<14&4294967295|D>>>18),D=A+(U^I&(V^U))+k[12]+2368359562&4294967295,A=V+(D<<20&4294967295|D>>>12),D=I+(A^V^U)+k[5]+4294588738&4294967295,I=A+(D<<4&4294967295|D>>>28),D=U+(I^A^V)+k[8]+2272392833&4294967295,U=I+(D<<11&4294967295|D>>>21),D=V+(U^I^A)+k[11]+1839030562&4294967295,V=U+(D<<16&4294967295|D>>>16),D=A+(V^U^I)+k[14]+4259657740&4294967295,A=V+(D<<23&4294967295|D>>>9),D=I+(A^V^U)+k[1]+2763975236&4294967295,I=A+(D<<4&4294967295|D>>>28),D=U+(I^A^V)+k[4]+1272893353&4294967295,U=I+(D<<11&4294967295|D>>>21),D=V+(U^I^A)+k[7]+4139469664&4294967295,V=U+(D<<16&4294967295|D>>>16),D=A+(V^U^I)+k[10]+3200236656&4294967295,A=V+(D<<23&4294967295|D>>>9),D=I+(A^V^U)+k[13]+681279174&4294967295,I=A+(D<<4&4294967295|D>>>28),D=U+(I^A^V)+k[0]+3936430074&4294967295,U=I+(D<<11&4294967295|D>>>21),D=V+(U^I^A)+k[3]+3572445317&4294967295,V=U+(D<<16&4294967295|D>>>16),D=A+(V^U^I)+k[6]+76029189&4294967295,A=V+(D<<23&4294967295|D>>>9),D=I+(A^V^U)+k[9]+3654602809&4294967295,I=A+(D<<4&4294967295|D>>>28),D=U+(I^A^V)+k[12]+3873151461&4294967295,U=I+(D<<11&4294967295|D>>>21),D=V+(U^I^A)+k[15]+530742520&4294967295,V=U+(D<<16&4294967295|D>>>16),D=A+(V^U^I)+k[2]+3299628645&4294967295,A=V+(D<<23&4294967295|D>>>9),D=I+(V^(A|~U))+k[0]+4096336452&4294967295,I=A+(D<<6&4294967295|D>>>26),D=U+(A^(I|~V))+k[7]+1126891415&4294967295,U=I+(D<<10&4294967295|D>>>22),D=V+(I^(U|~A))+k[14]+2878612391&4294967295,V=U+(D<<15&4294967295|D>>>17),D=A+(U^(V|~I))+k[5]+4237533241&4294967295,A=V+(D<<21&4294967295|D>>>11),D=I+(V^(A|~U))+k[12]+1700485571&4294967295,I=A+(D<<6&4294967295|D>>>26),D=U+(A^(I|~V))+k[3]+2399980690&4294967295,U=I+(D<<10&4294967295|D>>>22),D=V+(I^(U|~A))+k[10]+4293915773&4294967295,V=U+(D<<15&4294967295|D>>>17),D=A+(U^(V|~I))+k[1]+2240044497&4294967295,A=V+(D<<21&4294967295|D>>>11),D=I+(V^(A|~U))+k[8]+1873313359&4294967295,I=A+(D<<6&4294967295|D>>>26),D=U+(A^(I|~V))+k[15]+4264355552&4294967295,U=I+(D<<10&4294967295|D>>>22),D=V+(I^(U|~A))+k[6]+2734768916&4294967295,V=U+(D<<15&4294967295|D>>>17),D=A+(U^(V|~I))+k[13]+1309151649&4294967295,A=V+(D<<21&4294967295|D>>>11),D=I+(V^(A|~U))+k[4]+4149444226&4294967295,I=A+(D<<6&4294967295|D>>>26),D=U+(A^(I|~V))+k[11]+3174756917&4294967295,U=I+(D<<10&4294967295|D>>>22),D=V+(I^(U|~A))+k[2]+718787259&4294967295,V=U+(D<<15&4294967295|D>>>17),D=A+(U^(V|~I))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+U&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var A=I-this.blockSize,k=this.B,V=this.h,U=0;U<I;){if(V==0)for(;U<=A;)i(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<I;)if(k[V++]=R.charCodeAt(U++),V==this.blockSize){i(this,k),V=0;break}}else for(;U<I;)if(k[V++]=R[U++],V==this.blockSize){i(this,k),V=0;break}}this.h=V,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var A=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=A&255,A/=256;for(this.u(R),R=Array(16),I=A=0;4>I;++I)for(var k=0;32>k;k+=8)R[A++]=this.g[I]>>>k&255;return R};function a(R,I){var A=u;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=I(R)}function c(R,I){this.h=I;for(var A=[],k=!0,V=R.length-1;0<=V;V--){var U=R[V]|0;k&&U==I||(A[V]=U,k=!1)}this.g=A}var u={};function h(R){return-128<=R&&128>R?a(R,function(I){return new c([I|0],0>I?-1:0)}):new c([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return N(f(-R));for(var I=[],A=1,k=0;R>=A;k++)I[k]=R/A|0,A*=4294967296;return new c(I,0)}function g(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return N(g(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(I,8)),k=y,V=0;V<R.length;V+=8){var U=Math.min(8,R.length-V),D=parseInt(R.substring(V,V+U),I);8>U?(U=f(Math.pow(I,U)),k=k.j(U).add(f(D))):(k=k.j(A),k=k.add(f(D)))}return k}var y=h(0),x=h(1),w=h(16777216);t=c.prototype,t.m=function(){if(b(this))return-N(this).m();for(var R=0,I=1,A=0;A<this.g.length;A++){var k=this.i(A);R+=(0<=k?k:4294967296+k)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(S(this))return"0";if(b(this))return"-"+N(this).toString(R);for(var I=f(Math.pow(R,6)),A=this,k="";;){var V=F(A,I).g;A=j(A,V.j(I));var U=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=V,S(A))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function S(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function b(R){return R.h==-1}t.l=function(R){return R=j(this,R),b(R)?-1:S(R)?0:1};function N(R){for(var I=R.g.length,A=[],k=0;k<I;k++)A[k]=~R.g[k];return new c(A,~R.h).add(x)}t.abs=function(){return b(this)?N(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),A=[],k=0,V=0;V<=I;V++){var U=k+(this.i(V)&65535)+(R.i(V)&65535),D=(U>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);k=D>>>16,U&=65535,D&=65535,A[V]=D<<16|U}return new c(A,A[A.length-1]&-2147483648?-1:0)};function j(R,I){return R.add(N(I))}t.j=function(R){if(S(this)||S(R))return y;if(b(this))return b(R)?N(this).j(N(R)):N(N(this).j(R));if(b(R))return N(this.j(N(R)));if(0>this.l(w)&&0>R.l(w))return f(this.m()*R.m());for(var I=this.g.length+R.g.length,A=[],k=0;k<2*I;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var V=0;V<R.g.length;V++){var U=this.i(k)>>>16,D=this.i(k)&65535,xe=R.i(V)>>>16,Ke=R.i(V)&65535;A[2*k+2*V]+=D*Ke,M(A,2*k+2*V),A[2*k+2*V+1]+=U*Ke,M(A,2*k+2*V+1),A[2*k+2*V+1]+=D*xe,M(A,2*k+2*V+1),A[2*k+2*V+2]+=U*xe,M(A,2*k+2*V+2)}for(k=0;k<I;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=I;k<2*I;k++)A[k]=0;return new c(A,0)};function M(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function O(R,I){this.g=R,this.h=I}function F(R,I){if(S(I))throw Error("division by zero");if(S(R))return new O(y,y);if(b(R))return I=F(N(R),I),new O(N(I.g),N(I.h));if(b(I))return I=F(R,N(I)),new O(N(I.g),I.h);if(30<R.g.length){if(b(R)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var A=x,k=I;0>=k.l(R);)A=H(A),k=H(k);var V=K(A,1),U=K(k,1);for(k=K(k,2),A=K(A,2);!S(k);){var D=U.add(k);0>=D.l(R)&&(V=V.add(A),U=D),k=K(k,1),A=K(A,1)}return I=j(R,V.j(I)),new O(V,I)}for(V=y;0<=R.l(I);){for(A=Math.max(1,Math.floor(R.m()/I.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=f(A),D=U.j(I);b(D)||0<D.l(R);)A-=k,U=f(A),D=U.j(I);S(U)&&(U=x),V=V.add(U),R=j(R,D)}return new O(V,R)}t.A=function(R){return F(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)&R.i(k);return new c(A,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)|R.i(k);return new c(A,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),A=[],k=0;k<I;k++)A[k]=this.i(k)^R.i(k);return new c(A,this.h^R.h)};function H(R){for(var I=R.g.length+1,A=[],k=0;k<I;k++)A[k]=R.i(k)<<1|R.i(k-1)>>>31;return new c(A,R.h)}function K(R,I){var A=I>>5;I%=32;for(var k=R.g.length-A,V=[],U=0;U<k;U++)V[U]=0<I?R.i(U+A)>>>I|R.i(U+A+1)<<32-I:R.i(U+A);return new c(V,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,oo=c}).apply(typeof $2<"u"?$2:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MT,Wu,OT,Bf,Ey,LT,VT,FT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,_,C){return p==Array.prototype||p==Object.prototype||(p[_]=C.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var _=0;_<p.length;++_){var C=p[_];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(p,_){if(_)e:{var C=r;p=p.split(".");for(var L=0;L<p.length-1;L++){var Z=p[L];if(!(Z in C))break e;C=C[Z]}p=p[p.length-1],L=C[p],_=_(L),_!=L&&_!=null&&e(C,p,{configurable:!0,writable:!0,value:_})}}function a(p,_){p instanceof String&&(p+="");var C=0,L=!1,Z={next:function(){if(!L&&C<p.length){var he=C++;return{value:_(he,p[he]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}i("Array.prototype.values",function(p){return p||function(){return a(this,function(_,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(p){var _=typeof p;return _=_!="object"?_:p?Array.isArray(p)?"array":_:"null",_=="array"||_=="object"&&typeof p.length=="number"}function f(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function g(p,_,C){return p.call.apply(p.bind,arguments)}function y(p,_,C){if(!p)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,L),p.apply(_,Z)}}return function(){return p.apply(_,arguments)}}function x(p,_,C){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,x.apply(null,arguments)}function w(p,_){var C=Array.prototype.slice.call(arguments,1);return function(){var L=C.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function S(p,_){function C(){}C.prototype=_.prototype,p.aa=_.prototype,p.prototype=new C,p.prototype.constructor=p,p.Qb=function(L,Z,he){for(var $e=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)$e[Xt-2]=arguments[Xt];return _.prototype[Z].apply(L,$e)}}function b(p){const _=p.length;if(0<_){const C=Array(_);for(let L=0;L<_;L++)C[L]=p[L];return C}return[]}function N(p,_){for(let C=1;C<arguments.length;C++){const L=arguments[C];if(h(L)){const Z=p.length||0,he=L.length||0;p.length=Z+he;for(let $e=0;$e<he;$e++)p[Z+$e]=L[$e]}else p.push(L)}}class j{constructor(_,C){this.i=_,this.j=C,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function M(p){return/^[\s\xa0]*$/.test(p)}function O(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function F(p){return F[" "](p),p}F[" "]=function(){};var H=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function K(p,_,C){for(const L in p)_.call(C,p[L],L,p)}function R(p,_){for(const C in p)_.call(void 0,p[C],C,p)}function I(p){const _={};for(const C in p)_[C]=p[C];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(p,_){let C,L;for(let Z=1;Z<arguments.length;Z++){L=arguments[Z];for(C in L)p[C]=L[C];for(let he=0;he<A.length;he++)C=A[he],Object.prototype.hasOwnProperty.call(L,C)&&(p[C]=L[C])}}function V(p){var _=1;p=p.split(":");const C=[];for(;0<_&&p.length;)C.push(p.shift()),_--;return p.length&&C.push(p.join(":")),C}function U(p){u.setTimeout(()=>{throw p},0)}function D(){var p=ue;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class xe{constructor(){this.h=this.g=null}add(_,C){const L=Ke.get();L.set(_,C),this.h?this.h.next=L:this.g=L,this.h=L}}var Ke=new j(()=>new st,p=>p.reset());class st{constructor(){this.next=this.g=this.h=null}set(_,C){this.h=_,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,ce=!1,ue=new xe,de=()=>{const p=u.Promise.resolve(void 0);qe=()=>{p.then(z)}};var z=()=>{for(var p;p=D();){try{p.h.call(p.g)}catch(C){U(C)}var _=Ke;_.j(p),100>_.h&&(_.h++,p.next=_.g,_.g=p)}ce=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Me=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};u.addEventListener("test",C,_),u.removeEventListener("test",C,_)}catch{}return p}();function Ve(p,_){if(be.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var C=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget){if(H){e:{try{F(_.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(_=null)}}else C=="mouseover"?_=p.fromElement:C=="mouseout"&&(_=p.toElement);this.relatedTarget=_,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:it[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ve.aa.h.call(this)}}S(Ve,be);var it={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),Be=0;function et(p,_,C,L,Z){this.listener=p,this.proxy=null,this.src=_,this.type=C,this.capture=!!L,this.ha=Z,this.key=++Be,this.da=this.fa=!1}function ut(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function _t(p){this.src=p,this.g={},this.h=0}_t.prototype.add=function(p,_,C,L,Z){var he=p.toString();p=this.g[he],p||(p=this.g[he]=[],this.h++);var $e=kt(p,_,L,Z);return-1<$e?(_=p[$e],C||(_.fa=!1)):(_=new et(_,this.src,he,!!L,Z),_.fa=C,p.push(_)),_};function mt(p,_){var C=_.type;if(C in p.g){var L=p.g[C],Z=Array.prototype.indexOf.call(L,_,void 0),he;(he=0<=Z)&&Array.prototype.splice.call(L,Z,1),he&&(ut(_),p.g[C].length==0&&(delete p.g[C],p.h--))}}function kt(p,_,C,L){for(var Z=0;Z<p.length;++Z){var he=p[Z];if(!he.da&&he.listener==_&&he.capture==!!C&&he.ha==L)return Z}return-1}var Ot="closure_lm_"+(1e6*Math.random()|0),ie={};function Fe(p,_,C,L,Z){if(Array.isArray(_)){for(var he=0;he<_.length;he++)Fe(p,_[he],C,L,Z);return null}return C=ne(C),p&&p[ct]?p.K(_,C,f(L)?!!L.capture:!1,Z):je(p,_,C,!1,L,Z)}function je(p,_,C,L,Z,he){if(!_)throw Error("Invalid event type");var $e=f(Z)?!!Z.capture:!!Z,Xt=At(p);if(Xt||(p[Ot]=Xt=new _t(p)),C=Xt.add(_,C,L,$e,he),C.proxy)return C;if(L=fe(),C.proxy=L,L.src=p,L.listener=C,p.addEventListener)Me||(Z=$e),Z===void 0&&(Z=!1),p.addEventListener(_.toString(),L,Z);else if(p.attachEvent)p.attachEvent(jt(_.toString()),L);else if(p.addListener&&p.removeListener)p.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return C}function fe(){function p(C){return _.call(p.src,p.listener,C)}const _=Nt;return p}function Ze(p,_,C,L,Z){if(Array.isArray(_))for(var he=0;he<_.length;he++)Ze(p,_[he],C,L,Z);else L=f(L)?!!L.capture:!!L,C=ne(C),p&&p[ct]?(p=p.i,_=String(_).toString(),_ in p.g&&(he=p.g[_],C=kt(he,C,L,Z),-1<C&&(ut(he[C]),Array.prototype.splice.call(he,C,1),he.length==0&&(delete p.g[_],p.h--)))):p&&(p=At(p))&&(_=p.g[_.toString()],p=-1,_&&(p=kt(_,C,L,Z)),(C=-1<p?_[p]:null)&&Xe(C))}function Xe(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[ct])mt(_.i,p);else{var C=p.type,L=p.proxy;_.removeEventListener?_.removeEventListener(C,L,p.capture):_.detachEvent?_.detachEvent(jt(C),L):_.addListener&&_.removeListener&&_.removeListener(L),(C=At(_))?(mt(C,p),C.h==0&&(C.src=null,_[Ot]=null)):ut(p)}}}function jt(p){return p in ie?ie[p]:ie[p]="on"+p}function Nt(p,_){if(p.da)p=!0;else{_=new Ve(_,this);var C=p.listener,L=p.ha||p.src;p.fa&&Xe(p),p=C.call(L,_)}return p}function At(p){return p=p[Ot],p instanceof _t?p:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function ne(p){return typeof p=="function"?p:(p[_e]||(p[_e]=function(_){return p.handleEvent(_)}),p[_e])}function ge(){Y.call(this),this.i=new _t(this),this.M=this,this.F=null}S(ge,Y),ge.prototype[ct]=!0,ge.prototype.removeEventListener=function(p,_,C,L){Ze(this,p,_,C,L)};function Ne(p,_){var C,L=p.F;if(L)for(C=[];L;L=L.F)C.push(L);if(p=p.M,L=_.type||_,typeof _=="string")_=new be(_,p);else if(_ instanceof be)_.target=_.target||p;else{var Z=_;_=new be(L,p),k(_,Z)}if(Z=!0,C)for(var he=C.length-1;0<=he;he--){var $e=_.g=C[he];Z=te($e,L,!0,_)&&Z}if($e=_.g=p,Z=te($e,L,!0,_)&&Z,Z=te($e,L,!1,_)&&Z,C)for(he=0;he<C.length;he++)$e=_.g=C[he],Z=te($e,L,!1,_)&&Z}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var p=this.i,_;for(_ in p.g){for(var C=p.g[_],L=0;L<C.length;L++)ut(C[L]);delete p.g[_],p.h--}}this.F=null},ge.prototype.K=function(p,_,C,L){return this.i.add(String(p),_,!1,C,L)},ge.prototype.L=function(p,_,C,L){return this.i.add(String(p),_,!0,C,L)};function te(p,_,C,L){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();for(var Z=!0,he=0;he<_.length;++he){var $e=_[he];if($e&&!$e.da&&$e.capture==C){var Xt=$e.listener,Kn=$e.ha||$e.src;$e.fa&&mt(p.i,$e),Z=Xt.call(Kn,L)!==!1&&Z}}return Z&&!L.defaultPrevented}function Ie(p,_,C){if(typeof p=="function")C&&(p=x(p,C));else if(p&&typeof p.handleEvent=="function")p=x(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(p,_||0)}function B(p){p.g=Ie(()=>{p.g=null,p.i&&(p.i=!1,B(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class Q extends Y{constructor(_,C){super(),this.m=_,this.l=C,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:B(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(p){Y.call(this),this.h=p,this.g={}}S(le,Y);var J=[];function se(p){K(p.g,function(_,C){this.g.hasOwnProperty(C)&&Xe(_)},p),p.g={}}le.prototype.N=function(){le.aa.N.call(this),se(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ue=u.JSON.stringify,ze=u.JSON.parse,q=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Ee(){}Ee.prototype.h=null;function He(p){return p.h||(p.h=p.i())}function dt(){}var gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Le(){be.call(this,"d")}S(Le,be);function ve(){be.call(this,"c")}S(ve,be);var Oe={},It=null;function ht(){return It=It||new ge}Oe.La="serverreachability";function Ht(p){be.call(this,Oe.La,p)}S(Ht,be);function bt(p){const _=ht();Ne(_,new Ht(_))}Oe.STAT_EVENT="statevent";function Dt(p,_){be.call(this,Oe.STAT_EVENT,p),this.stat=_}S(Dt,be);function De(p){const _=ht();Ne(_,new Dt(_,p))}Oe.Ma="timingevent";function fn(p,_){be.call(this,Oe.Ma,p),this.size=_}S(fn,be);function Mt(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},_)}function br(){this.g=!0}br.prototype.xa=function(){this.g=!1};function wr(p,_,C,L,Z,he){p.info(function(){if(p.g)if(he)for(var $e="",Xt=he.split("&"),Kn=0;Kn<Xt.length;Kn++){var Ut=Xt[Kn].split("=");if(1<Ut.length){var er=Ut[0];Ut=Ut[1];var Un=er.split("_");$e=2<=Un.length&&Un[1]=="type"?$e+(er+"="+Ut+"&"):$e+(er+"=redacted&")}}else $e=null;else $e=he;return"XMLHTTP REQ ("+L+") [attempt "+Z+"]: "+_+`
`+C+`
`+$e})}function bi(p,_,C,L,Z,he,$e){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Z+"]: "+_+`
`+C+`
`+he+" "+$e})}function Fn(p,_,C,L){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+as(p,C)+(L?" "+L:"")})}function or(p,_){p.info(function(){return"TIMEOUT: "+_})}br.prototype.info=function(){};function as(p,_){if(!p.g)return _;if(!_)return null;try{var C=JSON.parse(_);if(C){for(p=0;p<C.length;p++)if(Array.isArray(C[p])){var L=C[p];if(!(2>L.length)){var Z=L[1];if(Array.isArray(Z)&&!(1>Z.length)){var he=Z[0];if(he!="noop"&&he!="stop"&&he!="close")for(var $e=1;$e<Z.length;$e++)Z[$e]=""}}}}return Ue(C)}catch{return _}}var Ws={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ao={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hr;function os(){}S(os,Ee),os.prototype.g=function(){return new XMLHttpRequest},os.prototype.i=function(){return{}},Hr=new os;function vn(p,_,C,L){this.j=p,this.i=_,this.l=C,this.R=L||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new su}function su(){this.i=null,this.g="",this.h=!1}var wi={},lr={};function ls(p,_,C){p.L=1,p.v=Ye(Or(_)),p.m=C,p.P=!0,oi(p,null)}function oi(p,_){p.F=Date.now(),Yt(p),p.A=Or(p.v);var C=p.A,L=p.R;Array.isArray(L)||(L=[String(L)]),Ia(C.i,"t",L),p.C=0,C=p.j.J,p.h=new su,p.g=gh(p.j,C?_:null,!p.m),0<p.O&&(p.M=new Q(x(p.Y,p,p.g),p.O)),_=p.U,C=p.g,L=p.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(J[0]=Z.toString()),Z=J);for(var he=0;he<Z.length;he++){var $e=Fe(C,Z[he],L||_.handleEvent,!1,_.h||_);if(!$e)break;_.g[$e.key]=$e}_=p.H?I(p.H):{},p.m?(p.u||(p.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,_)):(p.u="GET",p.g.ea(p.A,p.u,null,_)),bt(),wr(p.i,p.u,p.A,p.l,p.R,p.m)}vn.prototype.ca=function(p){p=p.target;const _=this.M;_&&qr(p)==3?_.j():this.Y(p)},vn.prototype.Y=function(p){try{if(p==this.g)e:{const Un=qr(this.g);var _=this.g.Ba();const ki=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||cu(this.g)))){this.J||Un!=4||_==7||(_==8||0>=ki?bt(3):bt(2)),qs(this);var C=this.g.Z();this.X=C;t:if(jo(this)){var L=cu(this.g);p="";var Z=L.length,he=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dr(this),cs(this);var $e="";break t}this.h.i=new u.TextDecoder}for(_=0;_<Z;_++)this.h.h=!0,p+=this.h.i.decode(L[_],{stream:!(he&&_==Z-1)});L.length=0,this.h.g+=p,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=C==200,bi(this.i,this.u,this.A,this.l,this.R,Un,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Xt,Kn=this.g;if((Xt=Kn.g?Kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(Xt)){var Ut=Xt;break t}}Ut=null}if(C=Ut)Fn(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,us(this,C);else{this.o=!1,this.s=3,De(12),Dr(this),cs(this);break e}}if(this.P){C=!0;let ci;for(;!this.J&&this.C<$e.length;)if(ci=Cl(this,$e),ci==lr){Un==4&&(this.s=4,De(14),C=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(ci==wi){this.s=4,De(15),Fn(this.i,this.l,$e,"[Invalid Chunk]"),C=!1;break}else Fn(this.i,this.l,ci,null),us(this,ci);if(jo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||$e.length!=0||this.h.h||(this.s=1,De(16),C=!1),this.o=this.o&&C,!C)Fn(this.i,this.l,$e,"[Invalid Chunked Response]"),Dr(this),cs(this);else if(0<$e.length&&!this.W){this.W=!0;var er=this.j;er.g==this&&er.ba&&!er.M&&(er.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),du(er),er.M=!0,De(11))}}else Fn(this.i,this.l,$e,null),us(this,$e);Un==4&&Dr(this),this.o&&!this.J&&(Un==4?Ul(this.j,this):(this.o=!1,Yt(this)))}else Ml(this.g),C==400&&0<$e.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),Dr(this),cs(this)}}}catch{}finally{}};function jo(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Cl(p,_){var C=p.C,L=_.indexOf(`
`,C);return L==-1?lr:(C=Number(_.substring(C,L)),isNaN(C)?wi:(L+=1,L+C>_.length?lr:(_=_.slice(L,L+C),p.C=L+C,_)))}vn.prototype.cancel=function(){this.J=!0,Dr(this)};function Yt(p){p.S=Date.now()+p.I,Al(p,p.I)}function Al(p,_){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Mt(x(p.ba,p),_)}function qs(p){p.B&&(u.clearTimeout(p.B),p.B=null)}vn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(or(this.i,this.A),this.L!=2&&(bt(),De(17)),Dr(this),this.s=2,cs(this)):Al(this,this.S-p)};function cs(p){p.j.G==0||p.J||Ul(p.j,p)}function Dr(p){qs(p);var _=p.M;_&&typeof _.ma=="function"&&_.ma(),p.M=null,se(p.U),p.g&&(_=p.g,p.g=null,_.abort(),_.ma())}function us(p,_){try{var C=p.j;if(C.G!=0&&(C.g==p||cr(C.h,p))){if(!p.K&&cr(C.h,p)&&C.G==3){try{var L=C.Da.g.parse(_)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Z=L;if(Z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<p.F)Fl(C),Wi(C);else break e;Vl(C),De(18)}}else C.za=Z[1],0<C.za-C.T&&37500>Z[2]&&C.F&&C.v==0&&!C.C&&(C.C=Mt(x(C.Za,C),6e3));if(1>=Il(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ea(C,11)}else if((p.K||C.g==p)&&Fl(C),!M(_))for(Z=C.Da.g.parse(_),_=0;_<Z.length;_++){let Ut=Z[_];if(C.T=Ut[0],Ut=Ut[1],C.G==2)if(Ut[0]=="c"){C.K=Ut[1],C.ia=Ut[2];const er=Ut[3];er!=null&&(C.la=er,C.j.info("VER="+C.la));const Un=Ut[4];Un!=null&&(C.Aa=Un,C.j.info("SVER="+C.Aa));const ki=Ut[5];ki!=null&&typeof ki=="number"&&0<ki&&(L=1.5*ki,C.L=L,C.j.info("backChannelRequestTimeoutMs_="+L)),L=C;const ci=p.g;if(ci){const Mo=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var he=L.h;he.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Io(he,he.h),he.h=null))}if(L.D){const zl=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(L.ya=zl,Ce(L.I,L.D,zl))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-p.F,C.j.info("Handshake RTT: "+C.R+"ms")),L=C;var $e=p;if(L.qa=mh(L,L.J?L.ia:null,L.W),$e.K){Ks(L.h,$e);var Xt=$e,Kn=L.L;Kn&&(Xt.I=Kn),Xt.B&&(qs(Xt),Yt(Xt)),L.g=$e}else Do(L);0<C.i.length&&ms(C)}else Ut[0]!="stop"&&Ut[0]!="close"||ea(C,7);else C.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?ea(C,7):dr(C):Ut[0]!="noop"&&C.l&&C.l.ta(Ut),C.v=0)}}bt(4)}catch{}}var jl=class{constructor(p,_){this.g=p,this.map=_}};function Gs(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Il(p){return p.h?1:p.g?p.g.size:0}function cr(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function Io(p,_){p.g?p.g.add(_):p.h=_}function Ks(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}Gs.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Pl(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const C of p.g.values())_=_.concat(C.D);return _}return b(p.i)}function Ca(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var _=[],C=p.length,L=0;L<C;L++)_.push(p[L]);return _}_=[],C=0;for(L in p)_[C++]=p[L];return _}function Aa(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var _=[];p=p.length;for(var C=0;C<p;C++)_.push(C);return _}_=[],C=0;for(const L in p)_[C++]=L;return _}}}function ds(p,_){if(p.forEach&&typeof p.forEach=="function")p.forEach(_,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,_,void 0);else for(var C=Aa(p),L=Ca(p),Z=L.length,he=0;he<Z;he++)_.call(void 0,L[he],C&&C[he],p)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function au(p,_){if(p){p=p.split("&");for(var C=0;C<p.length;C++){var L=p[C].indexOf("="),Z=null;if(0<=L){var he=p[C].substring(0,L);Z=p[C].substring(L+1)}else he=p[C];_(he,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function _i(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof _i){this.h=p.h,G(this,p.j),this.o=p.o,this.g=p.g,pe(this,p.s),this.l=p.l;var _=p.i,C=new hs;C.i=_.i,_.g&&(C.g=new Map(_.g),C.h=_.h),Se(this,C),this.m=p.m}else p&&(_=String(p).match(Xs))?(this.h=!1,G(this,_[1]||"",!0),this.o=Ge(_[2]||""),this.g=Ge(_[3]||"",!0),pe(this,_[4]),this.l=Ge(_[5]||"",!0),Se(this,_[6]||"",!0),this.m=Ge(_[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}_i.prototype.toString=function(){var p=[],_=this.j;_&&p.push(Gt(_,Fi,!0),":");var C=this.g;return(C||_=="file")&&(p.push("//"),(_=this.o)&&p.push(Gt(_,Fi,!0),"@"),p.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&p.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(Gt(C,C.charAt(0)=="/"?Ui:Qs,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",Gt(C,ja)),p.join("")};function Or(p){return new _i(p)}function G(p,_,C){p.j=C?Ge(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function pe(p,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);p.s=_}else p.s=null}function Se(p,_,C){_ instanceof hs?(p.i=_,fs(p.i,p.h)):(C||(_=Gt(_,Jt)),p.i=new hs(_,p.h))}function Ce(p,_,C){p.i.set(_,C)}function Ye(p){return Ce(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Ge(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Gt(p,_,C){return typeof p=="string"?(p=encodeURI(p).replace(_,Tn),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Tn(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Fi=/[#\/\?@]/g,Qs=/[#\?:]/g,Ui=/[#\?]/g,Jt=/[#\?@]/g,ja=/#/g;function hs(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function ur(p){p.g||(p.g=new Map,p.h=0,p.i&&au(p.i,function(_,C){p.add(decodeURIComponent(_.replace(/\+/g," ")),C)}))}t=hs.prototype,t.add=function(p,_){ur(this),this.i=null,p=Ei(this,p);var C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(_),this.h+=1,this};function $i(p,_){ur(p),_=Ei(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function zi(p,_){return ur(p),_=Ei(p,_),p.g.has(_)}t.forEach=function(p,_){ur(this),this.g.forEach(function(C,L){C.forEach(function(Z){p.call(_,Z,L,this)},this)},this)},t.na=function(){ur(this);const p=Array.from(this.g.values()),_=Array.from(this.g.keys()),C=[];for(let L=0;L<_.length;L++){const Z=p[L];for(let he=0;he<Z.length;he++)C.push(_[L])}return C},t.V=function(p){ur(this);let _=[];if(typeof p=="string")zi(this,p)&&(_=_.concat(this.g.get(Ei(this,p))));else{p=Array.from(this.g.values());for(let C=0;C<p.length;C++)_=_.concat(p[C])}return _},t.set=function(p,_){return ur(this),this.i=null,p=Ei(this,p),zi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},t.get=function(p,_){return p?(p=this.V(p),0<p.length?String(p[0]):_):_};function Ia(p,_,C){$i(p,_),0<C.length&&(p.i=null,p.g.set(Ei(p,_),b(C)),p.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(var C=0;C<_.length;C++){var L=_[C];const he=encodeURIComponent(String(L)),$e=this.V(L);for(L=0;L<$e.length;L++){var Z=he;$e[L]!==""&&(Z+="="+encodeURIComponent(String($e[L]))),p.push(Z)}}return this.i=p.join("&")};function Ei(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function fs(p,_){_&&!p.j&&(ur(p),p.i=null,p.g.forEach(function(C,L){var Z=L.toLowerCase();L!=Z&&($i(this,L),Ia(this,Z,C))},p)),p.j=_}function Hm(p,_){const C=new br;if(u.Image){const L=new Image;L.onload=w(Wr,C,"TestLoadImage: loaded",!0,_,L),L.onerror=w(Wr,C,"TestLoadImage: error",!1,_,L),L.onabort=w(Wr,C,"TestLoadImage: abort",!1,_,L),L.ontimeout=w(Wr,C,"TestLoadImage: timeout",!1,_,L),u.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else _(!1)}function ch(p,_){const C=new br,L=new AbortController,Z=setTimeout(()=>{L.abort(),Wr(C,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:L.signal}).then(he=>{clearTimeout(Z),he.ok?Wr(C,"TestPingServer: ok",!0,_):Wr(C,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Z),Wr(C,"TestPingServer: error",!1,_)})}function Wr(p,_,C,L,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),L(C)}catch{}}function Wm(){this.g=new q}function uh(p,_,C){const L=C||"";try{ds(p,function(Z,he){let $e=Z;f(Z)&&($e=Ue(Z)),_.push(L+he+"="+encodeURIComponent($e))})}catch(Z){throw _.push(L+"type="+encodeURIComponent("_badmap")),Z}}function Ys(p){this.l=p.Ub||null,this.j=p.eb||!1}S(Ys,Ee),Ys.prototype.g=function(){return new Po(this.l,this.j)},Ys.prototype.i=function(p){return function(){return p}}({});function Po(p,_){ge.call(this),this.D=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Po,ge),t=Po.prototype,t.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=_,this.readyState=1,Hi(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(_.body=p),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dh(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function dh(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?Bi(this):Hi(this),this.readyState==3&&dh(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Bi(this))},t.Qa=function(p){this.g&&(this.response=p,Bi(this))},t.ga=function(){this.g&&Bi(this)};function Bi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Hi(p)}t.setRequestHeader=function(p,_){this.u.append(p,_)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var C=_.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=_.next();return p.join(`\r
`)};function Hi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Js(p){let _="";return K(p,function(C,L){_+=L,_+=":",_+=C,_+=`\r
`}),_}function Pa(p,_,C){e:{for(L in C){var L=!1;break e}L=!0}L||(C=Js(C),typeof p=="string"?C!=null&&encodeURIComponent(String(C)):Ce(p,_,C))}function pn(p){ge.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(pn,ge);var qm=/^https?$/i,ou=["POST","PUT"];t=pn.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,_,C,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hr.g(),this.v=this.o?He(this.o):He(Hr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(he){Ro(this,he);return}if(p=C||"",C=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Z in L)C.set(Z,L[Z]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const he of L.keys())C.set(he,L.get(he));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(C.keys()).find(he=>he.toLowerCase()=="content-type"),Z=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ou,_,void 0))||L||Z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,$e]of C)this.g.setRequestHeader(he,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dl(this),this.u=!0,this.g.send(p),this.u=!1}catch(he){Ro(this,he)}};function Ro(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.m=5,Rl(p),li(p)}function Rl(p){p.A||(p.A=!0,Ne(p,"complete"),Ne(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ne(this,"complete"),Ne(this,"abort"),li(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),pn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lu(this):this.bb())},t.bb=function(){lu(this)};function lu(p){if(p.h&&typeof c<"u"&&(!p.v[1]||qr(p)!=4||p.Z()!=2)){if(p.u&&qr(p)==4)Ie(p.Ea,0,p);else if(Ne(p,"readystatechange"),qr(p)==4){p.h=!1;try{const $e=p.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var C;if(!(C=_)){var L;if(L=$e===0){var Z=String(p.D).match(Xs)[1]||null;!Z&&u.self&&u.self.location&&(Z=u.self.location.protocol.slice(0,-1)),L=!qm.test(Z?Z.toLowerCase():"")}C=L}if(C)Ne(p,"complete"),Ne(p,"success");else{p.m=6;try{var he=2<qr(p)?p.g.statusText:""}catch{he=""}p.l=he+" ["+p.Z()+"]",Rl(p)}}finally{li(p)}}}}function li(p,_){if(p.g){Dl(p);const C=p.g,L=p.v[0]?()=>{}:null;p.g=null,p.v=null,_||Ne(p,"ready");try{C.onreadystatechange=L}catch{}}}function Dl(p){p.I&&(u.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function qr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),ze(_)}};function cu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ml(p){const _={};p=(p.g&&2<=qr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<p.length;L++){if(M(p[L]))continue;var C=V(p[L]);const Z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const he=_[Z]||[];_[Z]=he,he.push(C)}R(_,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(p,_,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||_}function uu(p){this.Aa=0,this.i=[],this.j=new br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,p),this.cb=ps("retryDelaySeedMs",1e4,p),this.Wa=ps("forwardChannelMaxRetries",2,p),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Gs(p&&p.concurrentRequestLimit),this.Da=new Wm,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uu.prototype,t.la=8,t.G=1,t.connect=function(p,_,C,L){De(0),this.W=p,this.H=_||{},C&&L!==void 0&&(this.H.OSID=C,this.H.OAID=L),this.F=this.X,this.I=mh(this,null,this.W),ms(this)};function dr(p){if(Ol(p),p.G==3){var _=p.U++,C=Or(p.I);if(Ce(C,"SID",p.K),Ce(C,"RID",_),Ce(C,"TYPE","terminate"),Zs(p,C),_=new vn(p,p.j,_),_.L=2,_.v=Ye(Or(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!C&&u.Image&&(new Image().src=_.v,C=!0),C||(_.g=gh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Yt(_)}ph(p)}function Wi(p){p.g&&(du(p),p.g.cancel(),p.g=null)}function Ol(p){Wi(p),p.u&&(u.clearTimeout(p.u),p.u=null),Fl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function ms(p){if(!Mr(p.h)&&!p.s){p.s=!0;var _=p.Ga;qe||de(),ce||(qe(),ce=!0),ue.add(_,p),p.B=0}}function Gm(p,_){return Il(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=_.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Mt(x(p.Ga,p,_),fh(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Z=new vn(this,this.j,p);let he=this.o;if(this.S&&(he?(he=I(he),k(he,this.S)):he=this.S),this.m!==null||this.O||(Z.H=he,he=null),this.P)e:{for(var _=0,C=0;C<this.i.length;C++){t:{var L=this.i[C];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(_+=L,4096<_){_=C;break e}if(_===4096||C===this.i.length-1){_=C+1;break e}}_=1e3}else _=1e3;_=Ra(this,Z,_),C=Or(this.I),Ce(C,"RID",p),Ce(C,"CVER",22),this.D&&Ce(C,"X-HTTP-Session-Id",this.D),Zs(this,C),he&&(this.O?_="headers="+encodeURIComponent(String(Js(he)))+"&"+_:this.m&&Pa(C,this.m,he)),Io(this.h,Z),this.Ua&&Ce(C,"TYPE","init"),this.P?(Ce(C,"$req",_),Ce(C,"SID","null"),Z.T=!0,ls(Z,C,null)):ls(Z,C,_),this.G=2}}else this.G==3&&(p?Ll(this,p):this.i.length==0||Mr(this.h)||Ll(this))};function Ll(p,_){var C;_?C=_.l:C=p.U++;const L=Or(p.I);Ce(L,"SID",p.K),Ce(L,"RID",C),Ce(L,"AID",p.T),Zs(p,L),p.m&&p.o&&Pa(L,p.m,p.o),C=new vn(p,p.j,C,p.B+1),p.m===null&&(C.H=p.o),_&&(p.i=_.D.concat(p.i)),_=Ra(p,C,1e3),C.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Io(p.h,C),ls(C,L,_)}function Zs(p,_){p.H&&K(p.H,function(C,L){Ce(_,L,C)}),p.l&&ds({},function(C,L){Ce(_,L,C)})}function Ra(p,_,C){C=Math.min(p.i.length,C);var L=p.l?x(p.l.Na,p.l,p):null;e:{var Z=p.i;let he=-1;for(;;){const $e=["count="+C];he==-1?0<C?(he=Z[0].g,$e.push("ofs="+he)):he=0:$e.push("ofs="+he);let Xt=!0;for(let Kn=0;Kn<C;Kn++){let Ut=Z[Kn].g;const er=Z[Kn].map;if(Ut-=he,0>Ut)he=Math.max(0,Z[Kn].g-100),Xt=!1;else try{uh(er,$e,"req"+Ut+"_")}catch{L&&L(er)}}if(Xt){L=$e.join("&");break e}}}return p=p.i.splice(0,C),_.D=p,L}function Do(p){if(!p.g&&!p.u){p.Y=1;var _=p.Fa;qe||de(),ce||(qe(),ce=!0),ue.add(_,p),p.v=0}}function Vl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Mt(x(p.Fa,p),fh(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,hh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Mt(x(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Wi(this),hh(this))};function du(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function hh(p){p.g=new vn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var _=Or(p.qa);Ce(_,"RID","rpc"),Ce(_,"SID",p.K),Ce(_,"AID",p.T),Ce(_,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ce(_,"TO",p.ja),Ce(_,"TYPE","xmlhttp"),Zs(p,_),p.m&&p.o&&Pa(_,p.m,p.o),p.L&&(p.g.I=p.L);var C=p.g;p=p.ia,C.L=1,C.v=Ye(Or(_)),C.m=null,C.P=!0,oi(C,p)}t.Za=function(){this.C!=null&&(this.C=null,Wi(this),Vl(this),De(19))};function Fl(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Ul(p,_){var C=null;if(p.g==_){Fl(p),du(p),p.g=null;var L=2}else if(cr(p.h,_))C=_.D,Ks(p.h,_),L=1;else return;if(p.G!=0){if(_.o)if(L==1){C=_.m?_.m.length:0,_=Date.now()-_.F;var Z=p.B;L=ht(),Ne(L,new fn(L,C)),ms(p)}else Do(p);else if(Z=_.s,Z==3||Z==0&&0<_.X||!(L==1&&Gm(p,_)||L==2&&Vl(p)))switch(C&&0<C.length&&(_=p.h,_.i=_.i.concat(C)),Z){case 1:ea(p,5);break;case 4:ea(p,10);break;case 3:ea(p,6);break;default:ea(p,2)}}}function fh(p,_){let C=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(C*=2),C*_}function ea(p,_){if(p.j.info("Error code "+_),_==2){var C=x(p.fb,p),L=p.Xa;const Z=!L;L=new _i(L||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||G(L,"https"),Ye(L),Z?Hm(L.toString(),C):ch(L.toString(),C)}else De(2);p.G=0,p.l&&p.l.sa(_),ph(p),Ol(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function ph(p){if(p.G=0,p.ka=[],p.l){const _=Pl(p.h);(_.length!=0||p.i.length!=0)&&(N(p.ka,_),N(p.ka,p.i),p.h.i.length=0,b(p.i),p.i.length=0),p.l.ra()}}function mh(p,_,C){var L=C instanceof _i?Or(C):new _i(C);if(L.g!="")_&&(L.g=_+"."+L.g),pe(L,L.s);else{var Z=u.location;L=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;var he=new _i(null);L&&G(he,L),_&&(he.g=_),Z&&pe(he,Z),C&&(he.l=C),L=he}return C=p.D,_=p.ya,C&&_&&Ce(L,C,_),Ce(L,"VER",p.la),Zs(p,L),L}function gh(p,_,C){if(_&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Ca&&!p.pa?new pn(new Ys({eb:C})):new pn(p.pa),_.Ha(p.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hu(){}t=hu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $l(){}$l.prototype.g=function(p,_){return new Lr(p,_)};function Lr(p,_){ge.call(this),this.g=new uu(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(p?p["X-WebChannel-Client-Profile"]=_.va:p={"X-WebChannel-Client-Profile":_.va}),this.g.S=p,(p=_&&_.Sb)&&!M(p)&&(this.g.m=p),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!M(_)&&(this.g.D=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new gs(this)}S(Lr,ge),Lr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lr.prototype.close=function(){dr(this.g)},Lr.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.u&&(C={},C.__data__=Ue(p),p=C);_.i.push(new jl(_.Ya++,p)),_.G==3&&ms(_)},Lr.prototype.N=function(){this.g.l=null,delete this.j,dr(this.g),delete this.g,Lr.aa.N.call(this)};function yh(p){Le.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){e:{for(const C in _){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}S(yh,Le);function xh(){ve.call(this),this.status=1}S(xh,ve);function gs(p){this.g=p}S(gs,hu),gs.prototype.ua=function(){Ne(this.g,"a")},gs.prototype.ta=function(p){Ne(this.g,new yh(p))},gs.prototype.sa=function(p){Ne(this.g,new xh)},gs.prototype.ra=function(){Ne(this.g,"b")},$l.prototype.createWebChannel=$l.prototype.g,Lr.prototype.send=Lr.prototype.o,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,FT=function(){return new $l},VT=function(){return ht()},LT=Oe,Ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,Bf=Ws,Ao.COMPLETE="complete",OT=Ao,dt.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",ge.prototype.listen=ge.prototype.K,Wu=dt,pn.prototype.listenOnce=pn.prototype.L,pn.prototype.getLastError=pn.prototype.Ka,pn.prototype.getLastErrorCode=pn.prototype.Ba,pn.prototype.getStatus=pn.prototype.Z,pn.prototype.getResponseJson=pn.prototype.Oa,pn.prototype.getResponseText=pn.prototype.oa,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Ha,MT=pn}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const z2="@firebase/firestore",B2="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Vx("@firebase/firestore");function yc(){return gl.logLevel}function Je(t,...e){if(gl.logLevel<=Lt.DEBUG){const n=e.map(Qx);gl.debug(`Firestore (${Xc}): ${t}`,...n)}}function va(t,...e){if(gl.logLevel<=Lt.ERROR){const n=e.map(Qx);gl.error(`Firestore (${Xc}): ${t}`,...n)}}function uo(t,...e){if(gl.logLevel<=Lt.WARN){const n=e.map(Qx);gl.warn(`Firestore (${Xc}): ${t}`,...n)}}function Qx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,UT(t,r,n)}function UT(t,e,n){let r=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw va(r),new Error(r)}function Kt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||UT(e,i,r)}function Tt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ar.UNAUTHENTICATED))}shutdown(){}}class H6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class W6{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Kt(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new ma;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ma,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ma)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Kt(typeof r.accessToken=="string",31837,{l:r}),new $T(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kt(e===null||typeof e=="string",2055,{h:e}),new Ar(e)}}class q6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class G6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new q6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Kt(this.o===void 0,3512);const r=a=>{a.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new H2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Kt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new H2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=X6(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Pt(t,e){return t<e?-1:t>e?1:0}function ky(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Pt(r,i);{const a=zT(),c=Q6(a.encode(W2(t,n)),a.encode(W2(e,n)));return c!==0?c:Pt(r,i)}}n+=r>65535?2:1}return Pt(t.length,e.length)}function W2(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Q6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Pt(t[n],e[n]);return Pt(t.length,e.length)}function Oc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="__name__";class ks{constructor(e,n,r){n===void 0?n=0:n>e.length&&xt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ks.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Pt(e.length,n.length)}static compareSegments(e,n){const r=ks.isNumericId(e),i=ks.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ks.extractNumericId(e).compare(ks.extractNumericId(n)):ky(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class sn extends ks{construct(e,n,r){return new sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new sn(n)}static emptyPath(){return new sn([])}}const Y6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends ks{construct(e,n,r){return new yr(e,n,r)}static isValidIdentifier(e){return Y6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===q2}static keyField(){return new yr([q2])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new We(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new We(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new We(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(r+=u,i++):(a(),i++)}if(a(),c)throw new We(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(n)}static emptyPath(){return new yr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.path=e}static fromPath(e){return new lt(sn.fromString(e))}static fromName(e){return new lt(sn.fromString(e).popFirst(5))}static empty(){return new lt(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new sn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e,n){if(!n)throw new We(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J6(t,e,n,r){if(e===!0&&r===!0)throw new We(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function G2(t){if(!lt.isDocumentKey(t))throw new We(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K2(t){if(lt.isDocumentKey(t))throw new We(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function em(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xt(12329,{type:typeof t})}function ii(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=em(t);throw new We(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Z6(t,e){if(e<=0)throw new We(ye.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Gd(t,e){if(!HT(t))throw new We(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(i&&typeof c!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new We(ye.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=-62135596800,Q2=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Q2);return new un(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new We(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new We(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<X2)throw new We(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q2}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:un._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gd(e,un._jsonSchema))return new un(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-X2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}un._jsonSchemaVersion="firestore/timestamp/1.0",un._jsonSchema={type:Gn("string",un._jsonSchemaVersion),seconds:Gn("number"),nanoseconds:Gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static fromTimestamp(e){return new Et(e)}static min(){return new Et(new un(0,0))}static max(){return new Et(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=-1;function eD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(r===1e9?new un(n+1,0):new un(n,r));return new ho(i,lt.empty(),e)}function tD(t){return new ho(t.readTime,t.key,yd)}class ho{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ho(Et.min(),lt.empty(),yd)}static max(){return new ho(Et.max(),lt.empty(),yd)}}function nD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=lt.comparator(t.documentKey,e.documentKey),n!==0?n:Pt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==rD)throw t;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):we.reject(n)}static resolve(e){return new we((n,r)=>{n(e)})}static reject(e){return new we((n,r)=>{r(e)})}static waitFor(e){return new we((n,r)=>{let i=0,a=0,c=!1;e.forEach(u=>{++i,u.next(()=>{++a,c&&a===i&&n()},h=>r(h))}),c=!0,a===i&&n()})}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next(i=>i?we.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new we((r,i)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next(g=>{c[f]=g,++u,u===a&&r(c)},g=>i(g))}})}static doWhile(e,n){return new we((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function sD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}tm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=-1;function nm(t){return t==null}function mp(t){return t===0&&1/t==-1/0}function aD(t){return typeof t=="number"&&Number.isInteger(t)&&!mp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="";function oD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Y2(e)),e=lD(t.get(n),e);return Y2(e)}function lD(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case WT:n+="";break;default:n+=a}}return n}function Y2(t){return t+WT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??mr.RED,this.left=i??mr.EMPTY,this.right=a??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new mr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xt(27949);return e+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw xt(57766)}get value(){throw xt(16141)}get color(){throw xt(16727)}get left(){throw xt(29726)}get right(){throw xt(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.comparator=e,this.data=new kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z2(this.data.getIterator())}getIteratorFrom(e){return new Z2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zn(this.comparator);return n.data=e,n}}class Z2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new mi([])}unionWith(e){let n=new Zn(yr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new GT("Invalid base64 string: "+a):a}}(e);return new vr(n)}static fromUint8Array(e){const n=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new vr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vr.EMPTY_BYTE_STRING=new vr("");const cD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(t){if(Kt(!!t,39018),typeof t=="string"){let e=0;const n=cD.exec(t);if(Kt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(t.seconds),nanos:On(t.nanos)}}function On(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function po(t){return typeof t=="string"?vr.fromBase64String(t):vr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="server_timestamp",XT="__type__",QT="__previous_value__",YT="__local_write_time__";function Zx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[XT])===null||n===void 0?void 0:n.stringValue)===KT}function rm(t){const e=t.mapValue.fields[QT];return Zx(e)?rm(e):e}function xd(t){const e=fo(t.mapValue.fields[YT].timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,r,i,a,c,u,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const gp="(default)";class vd{constructor(e,n){this.projectId=e,this.database=n||gp}static empty(){return new vd("","")}get isDefaultDatabase(){return this.database===gp}isEqual(e){return e instanceof vd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="__type__",dD="__max__",gf={mapValue:{}},ZT="__vector__",yp="value";function mo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zx(t)?4:fD(t)?9007199254740991:hD(t)?10:11:xt(28295,{value:t})}function $s(t,e){if(t===e)return!0;const n=mo(t);if(n!==mo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xd(t).isEqual(xd(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=fo(i.timestampValue),u=fo(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return po(i.bytesValue).isEqual(po(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return On(i.geoPointValue.latitude)===On(a.geoPointValue.latitude)&&On(i.geoPointValue.longitude)===On(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return On(i.integerValue)===On(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=On(i.doubleValue),u=On(a.doubleValue);return c===u?mp(c)===mp(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return Oc(t.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return function(i,a){const c=i.mapValue.fields||{},u=a.mapValue.fields||{};if(J2(c)!==J2(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!$s(c[h],u[h])))return!1;return!0}(t,e);default:return xt(52216,{left:t})}}function bd(t,e){return(t.values||[]).find(n=>$s(n,e))!==void 0}function Lc(t,e){if(t===e)return 0;const n=mo(t),r=mo(e);if(n!==r)return Pt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pt(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=On(a.integerValue||a.doubleValue),h=On(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return e_(t.timestampValue,e.timestampValue);case 4:return e_(xd(t),xd(e));case 5:return ky(t.stringValue,e.stringValue);case 6:return function(a,c){const u=po(a),h=po(c);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=Pt(u[f],h[f]);if(g!==0)return g}return Pt(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=Pt(On(a.latitude),On(c.latitude));return u!==0?u:Pt(On(a.longitude),On(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return t_(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,f,g;const y=a.fields||{},x=c.fields||{},w=(u=y[yp])===null||u===void 0?void 0:u.arrayValue,S=(h=x[yp])===null||h===void 0?void 0:h.arrayValue,b=Pt(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return b!==0?b:t_(w,S)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===gf.mapValue&&c===gf.mapValue)return 0;if(a===gf.mapValue)return 1;if(c===gf.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const x=ky(h[y],g[y]);if(x!==0)return x;const w=Lc(u[h[y]],f[g[y]]);if(w!==0)return w}return Pt(h.length,g.length)}(t.mapValue,e.mapValue);default:throw xt(23264,{le:n})}}function e_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pt(t,e);const n=fo(t),r=fo(e),i=Pt(n.seconds,r.seconds);return i!==0?i:Pt(n.nanos,r.nanos)}function t_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Lc(n[i],r[i]);if(a)return a}return Pt(n.length,r.length)}function Vc(t){return Sy(t)}function Sy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return po(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return lt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Sy(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Sy(n.fields[c])}`;return i+"}"}(t.mapValue):xt(61005,{value:t})}function Hf(t){switch(mo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rm(t);return e?16+Hf(e):16;case 5:return 2*t.stringValue.length;case 6:return po(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Hf(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return So(r.fields,(a,c)=>{i+=a.length+Hf(c)}),i}(t.mapValue);default:throw xt(13486,{value:t})}}function n_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ty(t){return!!t&&"integerValue"in t}function ev(t){return!!t&&"arrayValue"in t}function r_(t){return!!t&&"nullValue"in t}function i_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wf(t){return!!t&&"mapValue"in t}function hD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[JT])===null||n===void 0?void 0:n.stringValue)===ZT}function ed(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ed(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ed(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ed(n)}setAll(e){let n=yr.emptyPath(),r={},i=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=u.popLast()}c?r[u.lastSegment()]=ed(c):i.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Wf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){So(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ni(ed(this.value))}}function eN(t){const e=[];return So(t.fields,(n,r)=>{const i=new yr([n]);if(Wf(r)){const a=eN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new mi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,i,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new jr(e,0,Et.min(),Et.min(),Et.min(),ni.empty(),0)}static newFoundDocument(e,n,r,i){return new jr(e,1,n,Et.min(),r,i,0)}static newNoDocument(e,n){return new jr(e,2,n,Et.min(),Et.min(),ni.empty(),0)}static newUnknownDocument(e,n){return new jr(e,3,n,Et.min(),Et.min(),ni.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.position=e,this.inclusive=n}}function s_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],c=t.position[i];if(a.field.isKeyField()?r=lt.comparator(lt.fromName(c.referenceValue),n.key):r=Lc(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function a_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$s(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n="asc"){this.field=e,this.dir=n}}function pD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{}class qn extends tN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gD(e,n,r):n==="array-contains"?new vD(e,r):n==="in"?new bD(e,r):n==="not-in"?new wD(e,r):n==="array-contains-any"?new _D(e,r):new qn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yD(e,r):new xD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lc(n,this.value)):n!==null&&mo(this.value)===mo(n)&&this.matchesComparison(Lc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends tN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new ss(e,n)}matches(e){return nN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function nN(t){return t.op==="and"}function rN(t){return mD(t)&&nN(t)}function mD(t){for(const e of t.filters)if(e instanceof ss)return!1;return!0}function Ny(t){if(t instanceof qn)return t.field.canonicalString()+t.op.toString()+Vc(t.value);if(rN(t))return t.filters.map(e=>Ny(e)).join(",");{const e=t.filters.map(n=>Ny(n)).join(",");return`${t.op}(${e})`}}function iN(t,e){return t instanceof qn?function(r,i){return i instanceof qn&&r.op===i.op&&r.field.isEqual(i.field)&&$s(r.value,i.value)}(t,e):t instanceof ss?function(r,i){return i instanceof ss&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,c,u)=>a&&iN(c,i.filters[u]),!0):!1}(t,e):void xt(19439)}function sN(t){return t instanceof qn?function(n){return`${n.field.canonicalString()} ${n.op} ${Vc(n.value)}`}(t):t instanceof ss?function(n){return n.op.toString()+" {"+n.getFilters().map(sN).join(" ,")+"}"}(t):"Filter"}class gD extends qn{constructor(e,n,r){super(e,n,r),this.key=lt.fromName(r.referenceValue)}matches(e){const n=lt.comparator(e.key,this.key);return this.matchesComparison(n)}}class yD extends qn{constructor(e,n){super(e,"in",n),this.keys=aN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xD extends qn{constructor(e,n){super(e,"not-in",n),this.keys=aN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>lt.fromName(r.referenceValue))}class vD extends qn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ev(n)&&bd(n.arrayValue,this.value)}}class bD extends qn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bd(this.value.arrayValue,n)}}class wD extends qn{constructor(e,n){super(e,"not-in",n)}matches(e){if(bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bd(this.value.arrayValue,n)}}class _D extends qn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ev(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n=null,r=[],i=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function o_(t,e=null,n=[],r=[],i=null,a=null,c=null){return new ED(t,e,n,r,i,a,c)}function tv(t){const e=Tt(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),nm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),e.Pe=n}return e.Pe}function nv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!a_(t.startAt,e.startAt)&&a_(t.endAt,e.endAt)}function Cy(t){return lt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n=null,r=[],i=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function kD(t,e,n,r,i,a,c,u){return new Jc(t,e,n,r,i,a,c,u)}function im(t){return new Jc(t)}function l_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oN(t){return t.collectionGroup!==null}function td(t){const e=Tt(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Zn(yr.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new wd(a,r))}),n.has(yr.keyField().canonicalString())||e.Te.push(new wd(yr.keyField(),r))}return e.Te}function Ps(t){const e=Tt(t);return e.Ie||(e.Ie=SD(e,td(t))),e.Ie}function SD(t,e){if(t.limitType==="F")return o_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new wd(i.field,a)});const n=t.endAt?new xp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xp(t.startAt.position,t.startAt.inclusive):null;return o_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ay(t,e){const n=t.filters.concat([e]);return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vp(t,e,n){return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sm(t,e){return nv(Ps(t),Ps(e))&&t.limitType===e.limitType}function lN(t){return`${tv(Ps(t))}|lt:${t.limitType}`}function xc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sN(i)).join(", ")}]`),nm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vc(i)).join(",")),`Target(${r})`}(Ps(t))}; limitType=${t.limitType})`}function am(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):lt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of td(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(c,u,h){const f=s_(c,u,h);return c.inclusive?f<=0:f<0}(r.startAt,td(r),i)||r.endAt&&!function(c,u,h){const f=s_(c,u,h);return c.inclusive?f>=0:f>0}(r.endAt,td(r),i))}(t,e)}function TD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cN(t){return(e,n)=>{let r=!1;for(const i of td(t)){const a=ND(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ND(t,e,n){const r=t.field.isKeyField()?lt.comparator(e.key,n.key):function(a,c,u){const h=c.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Lc(h,f):xt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return qT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new kn(lt.comparator);function ba(){return CD}const uN=new kn(lt.comparator);function qu(...t){let e=uN;for(const n of t)e=e.insert(n.key,n);return e}function dN(t){let e=uN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function el(){return nd()}function hN(){return nd()}function nd(){return new kl(t=>t.toString(),(t,e)=>t.isEqual(e))}const AD=new kn(lt.comparator),jD=new Zn(lt.comparator);function Vt(...t){let e=jD;for(const n of t)e=e.add(n);return e}const ID=new Zn(Pt);function PD(){return ID}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(e)?"-0":e}}function fN(t){return{integerValue:""+t}}function RD(t,e){return aD(e)?fN(e):rv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this._=void 0}}function DD(t,e,n){return t instanceof _d?function(i,a){const c={fields:{[XT]:{stringValue:KT},[YT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Zx(a)&&(a=rm(a)),a&&(c.fields[QT]=a),{mapValue:c}}(n,e):t instanceof Ed?mN(t,e):t instanceof kd?gN(t,e):function(i,a){const c=pN(i,a),u=c_(c)+c_(i.Ee);return Ty(c)&&Ty(i.Ee)?fN(u):rv(i.serializer,u)}(t,e)}function MD(t,e,n){return t instanceof Ed?mN(t,e):t instanceof kd?gN(t,e):n}function pN(t,e){return t instanceof bp?function(r){return Ty(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class _d extends om{}class Ed extends om{constructor(e){super(),this.elements=e}}function mN(t,e){const n=yN(e);for(const r of t.elements)n.some(i=>$s(i,r))||n.push(r);return{arrayValue:{values:n}}}class kd extends om{constructor(e){super(),this.elements=e}}function gN(t,e){let n=yN(e);for(const r of t.elements)n=n.filter(i=>!$s(i,r));return{arrayValue:{values:n}}}class bp extends om{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function c_(t){return On(t.integerValue||t.doubleValue)}function yN(t){return ev(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.field=e,this.transform=n}}function LD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ed&&i instanceof Ed||r instanceof kd&&i instanceof kd?Oc(r.elements,i.elements,$s):r instanceof bp&&i instanceof bp?$s(r.Ee,i.Ee):r instanceof _d&&i instanceof _d}(t.transform,e.transform)}class VD{constructor(e,n){this.version=e,this.transformResults=n}}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lm{}function xN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iv(t.key,Oi.none()):new Kd(t.key,t.data,Oi.none());{const n=t.data,r=ni.empty();let i=new Zn(yr.comparator);for(let a of e.fields)if(!i.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new To(t.key,r,new mi(i.toArray()),Oi.none())}}function FD(t,e,n){t instanceof Kd?function(i,a,c){const u=i.value.clone(),h=d_(i.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof To?function(i,a,c){if(!qf(i.precondition,a))return void a.convertToUnknownDocument(c.version);const u=d_(i.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(vN(i)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function rd(t,e,n,r){return t instanceof Kd?function(a,c,u,h){if(!qf(a.precondition,c))return u;const f=a.value.clone(),g=h_(a.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof To?function(a,c,u,h){if(!qf(a.precondition,c))return u;const f=h_(a.fieldTransforms,h,c),g=c.data;return g.setAll(vN(a)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(a,c,u){return qf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function UD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=pN(r.transform,i||null);a!=null&&(n===null&&(n=ni.empty()),n.set(r.field,a))}return n||null}function u_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oc(r,i,(a,c)=>LD(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kd extends lm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class To extends lm{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function d_(t,e,n){const r=new Map;Kt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],c=a.transform,u=e.data.field(a.field);r.set(a.field,MD(c,u,n[i]))}return r}function h_(t,e,n){const r=new Map;for(const i of t){const a=i.transform,c=n.data.field(i.field);r.set(i.field,DD(a,c,e))}return r}class iv extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $D extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&FD(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=rd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=rd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hN();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(i.key)?null:u;const h=xN(c,u);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Oc(this.mutations,e.mutations,(n,r)=>u_(n,r))&&Oc(this.baseMutations,e.baseMutations,(n,r)=>u_(n,r))}}class sv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Kt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return AD}();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new sv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zn,$t;function WD(t){switch(t){case ye.OK:return xt(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return xt(15467,{code:t})}}function bN(t){if(t===void 0)return va("GRPC error has no .code"),ye.UNKNOWN;switch(t){case zn.OK:return ye.OK;case zn.CANCELLED:return ye.CANCELLED;case zn.UNKNOWN:return ye.UNKNOWN;case zn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case zn.INTERNAL:return ye.INTERNAL;case zn.UNAVAILABLE:return ye.UNAVAILABLE;case zn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case zn.NOT_FOUND:return ye.NOT_FOUND;case zn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case zn.ABORTED:return ye.ABORTED;case zn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case zn.DATA_LOSS:return ye.DATA_LOSS;default:return xt(39323,{code:t})}}($t=zn||(zn={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new oo([4294967295,4294967295],0);function f_(t){const e=zT().encode(t),n=new DT;return n.update(e),new Uint8Array(n.digest())}function p_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new oo([n,r],0),new oo([i,a],0)]}class av{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gu(`Invalid padding: ${n}`);if(r<0)throw new Gu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=oo.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(oo.fromNumber(r)));return i.compare(qD)===1&&(i=new oo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=f_(e),[r,i]=p_(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);if(!this.ye(c))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new av(a,i,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=f_(e),[r,i]=p_(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cm(Et.min(),i,new kn(Pt),ba(),Vt())}}class Xd{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xd(r,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class wN{constructor(e,n){this.targetId=e,this.De=n}}class _N{constructor(e,n,r=vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class m_{constructor(){this.ve=0,this.Ce=g_(),this.Fe=vr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Vt(),n=Vt(),r=Vt();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:xt(38017,{changeType:a})}}),new Xd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=g_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class GD{constructor(e){this.We=e,this.Ge=new Map,this.ze=ba(),this.je=yf(),this.Je=yf(),this.He=new kn(Pt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:xt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(Cy(a))if(r===0){const c=new lt(a.path);this.Xe(n,c,jr.newNoDocument(c,Et.min()))}else Kt(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let c,u;try{c=po(r).toUint8Array()}catch(h){if(h instanceof GT)return uo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new av(c,i,a)}catch(h){return uo(h instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&Cy(u.target)){const h=new lt(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,jr.newNoDocument(h,e))}a.Ne&&(n.set(c,a.Le()),a.ke())}});let r=Vt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const i=new cm(e,n,this.He,this.ze,r);return this.ze=ba(),this.je=yf(),this.Je=yf(),this.He=new kn(Pt),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new m_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Zn(Pt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Zn(Pt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Je("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new m_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function yf(){return new kn(lt.comparator)}function g_(){return new kn(lt.comparator)}const KD={asc:"ASCENDING",desc:"DESCENDING"},XD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QD={and:"AND",or:"OR"};class YD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jy(t,e){return t.useProto3Json||nm(e)?e:{value:e}}function wp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JD(t,e){return wp(t,e.toTimestamp())}function Rs(t){return Kt(!!t,49232),Et.fromTimestamp(function(n){const r=fo(n);return new un(r.seconds,r.nanos)}(t))}function ov(t,e){return Iy(t,e).canonicalString()}function Iy(t,e){const n=function(i){return new sn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kN(t){const e=sn.fromString(t);return Kt(AN(e),10190,{key:e.toString()}),e}function Py(t,e){return ov(t.databaseId,e.path)}function T0(t,e){const n=kN(e);if(n.get(1)!==t.databaseId.projectId)throw new We(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new We(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lt(TN(n))}function SN(t,e){return ov(t.databaseId,e)}function ZD(t){const e=kN(t);return e.length===4?sn.emptyPath():TN(e)}function Ry(t){return new sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TN(t){return Kt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function y_(t,e,n){return{name:Py(t,e),fields:n.value.mapValue.fields}}function eM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:xt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,g){return f.useProto3Json?(Kt(g===void 0||typeof g=="string",58123),vr.fromBase64String(g||"")):(Kt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),vr.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const g=f.code===void 0?ye.UNKNOWN:bN(f.code);return new We(g,f.message||"")}(c);n=new _N(r,i,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=T0(t,r.document.name),a=Rs(r.document.updateTime),c=r.document.createTime?Rs(r.document.createTime):Et.min(),u=new ni({mapValue:{fields:r.document.fields}}),h=jr.newFoundDocument(i,a,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new Gf(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=T0(t,r.document),a=r.readTime?Rs(r.readTime):Et.min(),c=jr.newNoDocument(i,a),u=r.removedTargetIds||[];n=new Gf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=T0(t,r.document),a=r.removedTargetIds||[];n=new Gf([],a,i,null)}else{if(!("filter"in e))return xt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new HD(i,a),u=r.targetId;n=new wN(u,c)}}return n}function tM(t,e){let n;if(e instanceof Kd)n={update:y_(t,e.key,e.value)};else if(e instanceof iv)n={delete:Py(t,e.key)};else if(e instanceof To)n={update:y_(t,e.key,e.data),updateMask:uM(e.fieldMask)};else{if(!(e instanceof $D))return xt(16599,{Rt:e.type});n={verify:Py(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof _d)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ed)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof kd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof bp)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw xt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:JD(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xt(27497)}(t,e.precondition)),n}function nM(t,e){return t&&t.length>0?(Kt(e!==void 0,14353),t.map(n=>function(i,a){let c=i.updateTime?Rs(i.updateTime):Rs(a);return c.isEqual(Et.min())&&(c=Rs(a)),new VD(c,i.transformResults||[])}(n,e))):[]}function rM(t,e){return{documents:[SN(t,e.path)]}}function iM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SN(t,i);const a=function(f){if(f.length!==0)return CN(ss.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(g=>function(x){return{field:vc(x.field),direction:oM(x.dir)}}(g))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=jy(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:i}}function sM(t){let e=ZD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Kt(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(y){const x=NN(y);return x instanceof ss&&rN(x)?x.getFilters():[x]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(x=>function(S){return new wd(bc(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(x))}(n.orderBy));let u=null;n.limit&&(u=function(y){let x;return x=typeof y=="object"?y.value:y,nm(x)?null:x}(n.limit));let h=null;n.startAt&&(h=function(y){const x=!!y.before,w=y.values||[];return new xp(w,x)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const x=!y.before,w=y.values||[];return new xp(w,x)}(n.endAt)),kD(e,i,c,a,u,"F",h,f)}function aM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bc(n.unaryFilter.field);return qn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bc(n.unaryFilter.field);return qn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bc(n.unaryFilter.field);return qn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bc(n.unaryFilter.field);return qn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xt(61313);default:return xt(60726)}}(t):t.fieldFilter!==void 0?function(n){return qn.create(bc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xt(58110);default:return xt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ss.create(n.compositeFilter.filters.map(r=>NN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt(1026)}}(n.compositeFilter.op))}(t):xt(30097,{filter:t})}function oM(t){return KD[t]}function lM(t){return XD[t]}function cM(t){return QD[t]}function vc(t){return{fieldPath:t.canonicalString()}}function bc(t){return yr.fromServerFormat(t.fieldPath)}function CN(t){return t instanceof qn?function(n){if(n.op==="=="){if(i_(n.value))return{unaryFilter:{field:vc(n.field),op:"IS_NAN"}};if(r_(n.value))return{unaryFilter:{field:vc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(i_(n.value))return{unaryFilter:{field:vc(n.field),op:"IS_NOT_NAN"}};if(r_(n.value))return{unaryFilter:{field:vc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vc(n.field),op:lM(n.op),value:n.value}}}(t):t instanceof ss?function(n){const r=n.getFilters().map(i=>CN(i));return r.length===1?r[0]:{compositeFilter:{op:cM(n.op),filters:r}}}(t):xt(54877,{filter:t})}function uM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,r,i,a=Et.min(),c=Et.min(),u=vr.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.gt=e}}function hM(t){const e=sM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.Dn=new pM}addToCollectionParentIndex(e,n){return this.Dn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(ho.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class pM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zn(sn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zn(sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jN=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(jN,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fc(0)}static ur(){return new Fc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="LruGarbageCollector",mM=1048576;function b_([t,e],[n,r]){const i=Pt(t,n);return i===0?Pt(e,r):i}class gM{constructor(e){this.Tr=e,this.buffer=new Zn(b_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();b_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Je(v_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yc(n)?Je(v_,"Ignoring IndexedDB error during garbage collection: ",n):await Qc(n)}await this.Rr(3e5)})}}class xM{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return we.resolve(tm.ue);const r=new gM(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(x_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,c,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),yc()<=Lt.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:y})))}}function vM(t,e){return new xM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.changes=new kl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&rd(r.mutation,i,mi.empty(),un.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Vt()){const i=el();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let c=qu();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=el();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Vt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,i){let a=ba();const c=nd(),u=function(){return nd()}();return n.forEach((h,f)=>{const g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof To)?a=a.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),rd(g.mutation,f,g.mutation.getFieldMask(),un.now())):c.set(f.key,mi.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new wM(g,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=nd();let i=new kn((c,u)=>c-u),a=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let g=r.get(h)||mi.empty();g=u.applyToLocalView(f,g),r.set(h,g);const y=(i.get(u.batchId)||Vt()).add(h);i=i.insert(u.batchId,y)})}).next(()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,y=hN();g.forEach(x=>{if(!a.has(x)){const w=xN(n.get(x),r.get(x));w!==null&&y.set(x,w),a=a.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return we.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(c){return lt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):we.resolve(el());let u=yd,h=a;return c.next(f=>we.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(g)?we.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{h=h.insert(g,x)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,Vt())).next(g=>({batchId:u,changes:dN(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new lt(n)).next(r=>{let i=qu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let c=qu();return this.indexManager.getCollectionParents(e,a).next(u=>we.forEach(u,h=>{const f=function(y,x){return new Jc(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,x)=>{c=c.insert(y,x)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(c=>{a.forEach((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,jr.newInvalidDocument(g)))});let u=qu();return c.forEach((h,f)=>{const g=a.get(h);g!==void 0&&rd(g.mutation,f,mi.empty(),un.now()),am(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return we.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rs(i.createTime)}}(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:hM(i.bundledQuery),readTime:Rs(i.readTime)}}(n)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.overlays=new kn(lt.comparator),this.kr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=el();return we.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),we.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const i=el(),a=n.length+1,c=new lt(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return we.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new kn((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=a.get(f.largestBatchId);g===null&&(g=el(),a=a.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=el(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=i)););return we.resolve(u)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new BD(n,r));let a=this.kr.get(n);a===void 0&&(a=Vt(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(){this.sessionToken=vr.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.qr=new Zn(sr.Qr),this.$r=new Zn(sr.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new sr(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new sr(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new lt(new sn([])),r=new sr(n,e),i=new sr(n,e+1),a=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new lt(new sn([])),r=new sr(n,e),i=new sr(n,e+1);let a=Vt();return this.$r.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new sr(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sr{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return lt.comparator(e.key,n.key)||Pt(e.Hr,n.Hr)}static Ur(e,n){return Pt(e.Hr,n.Hr)||lt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Zn(sr.Qr)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zD(a,n,r,i);this.mutationQueue.push(c);for(const u of i)this.Yr=this.Yr.add(new sr(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return we.resolve(c)}lookupMutationBatch(e,n){return we.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return we.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Jx:this.er-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sr(n,0),i=new sr(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],c=>{const u=this.Zr(c.Hr);a.push(u)}),we.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zn(Pt);return n.forEach(i=>{const a=new sr(i,0),c=new sr(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),we.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;lt.isDocumentKey(a)||(a=a.child(""));const c=new sr(new lt(a),0);let u=new Zn(Pt);return this.Yr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Hr)),!0)},c),we.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Kt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return we.forEach(n.mutations,i=>{const a=new sr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new sr(n,0),i=this.Yr.firstAfterOrEqual(r);return we.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.ni=e,this.docs=function(){return new kn(lt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():jr.newInvalidDocument(n))}getEntries(e,n){let r=ba();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():jr.newInvalidDocument(i))}),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ba();const c=n.path,u=new lt(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||nD(tD(g),r)<=0||(i.has(g.key)||am(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return we.resolve(a)}getAllFromCollectionGroup(e,n,r,i){xt(9500)}ri(e,n){return we.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CM(this)}getSize(e){return we.resolve(this.size)}}class CM extends bM{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),we.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.persistence=e,this.ii=new kl(n=>tv(n),nv),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.si=0,this.oi=new lv,this.targetCount=0,this._i=Fc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),we.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Fc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.hr(n),we.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),we.waitFor(a).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),we.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n){this.ai={},this.overlays={},this.ui=new tm(0),this.ci=!1,this.ci=!0,this.li=new SM,this.referenceDelegate=e(this),this.hi=new AM(this),this.indexManager=new fM,this.remoteDocumentCache=function(i){return new NM(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new dM(n),this.Ti=new EM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new TM(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Je("MemoryPersistence","Starting transaction:",e);const i=new jM(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return we.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class jM extends iD{constructor(e){super(),this.currentSequenceNumber=e}}class cv{constructor(e){this.persistence=e,this.Ai=new lv,this.Ri=null}static Vi(e){return new cv(e)}get mi(){if(this.Ri)return this.Ri;throw xt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.mi,r=>{const i=lt.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,Et.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return we.or([()=>we.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class _p{constructor(e,n){this.persistence=e,this.gi=new kl(r=>oD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=vM(this,n)}static Vi(e,n){return new _p(e,n)}Ii(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return we.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?we.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,Et.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),we.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hf(e.data.value)),n}Sr(e,n,r){return we.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Vt(),i=Vt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new uv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return c5()?8:sD(Rr())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new IM;return this.ws(e,n,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(yc()<=Lt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",xc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),we.resolve()):(yc()<=Lt.DEBUG&&Je("QueryEngine","Query:",xc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(yc()<=Lt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",xc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(n))):we.resolve())}ps(e,n){if(l_(n))return we.resolve(null);let r=Ps(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vp(n,null,"F"),r=Ps(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Vt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.bs(n,u);return this.Ds(n,f,c,h.readTime)?this.ps(e,vp(n,null,"F")):this.vs(e,f,n,h)}))})))}ys(e,n,r,i){return l_(n)||i.isEqual(Et.min())?we.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(n,a);return this.Ds(n,c,r,i)?we.resolve(null):(yc()<=Lt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xc(n)),this.vs(e,c,n,eD(i,yd)).next(u=>u))})}bs(e,n){let r=new Zn(cN(e));return n.forEach((i,a)=>{am(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return yc()<=Lt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",xc(n)),this.gs.getDocumentsMatchingQuery(e,n,ho.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="LocalStore",RM=3e8;class DM{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new kn(Pt),this.Ms=new kl(a=>tv(a),nv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _M(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function MM(t,e,n,r){return new DM(t,e,n,r)}async function PN(t,e){const n=Tt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=Vt();for(const f of i){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of a){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(r,h).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function OM(t,e){const n=Tt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,f,g){const y=f.batch,x=y.keys();let w=we.resolve();return x.forEach(S=>{w=w.next(()=>g.getEntry(h,S)).next(b=>{const N=f.docVersions.get(S);Kt(N!==null,48541),b.version.compareTo(N)<0&&(y.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),g.addEntry(b)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Vt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RN(t){const e=Tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function LM(t,e){const n=Tt(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const x=i.get(y);if(!x)return;u.push(n.hi.removeMatchingKeys(a,g.removedDocuments,y).next(()=>n.hi.addMatchingKeys(a,g.addedDocuments,y)));let w=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(vr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(y,w),function(b,N,j){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=RM?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(x,w,g)&&u.push(n.hi.updateTargetData(a,w))});let h=ba(),f=Vt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push(VM(a,c,e.documentUpdates).next(g=>{h=g.Ls,f=g.ks})),!r.isEqual(Et.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next(y=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return we.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(n.Fs=i,a))}function VM(t,e,n){let r=Vt(),i=Vt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=ba();return n.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Et.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Je(dv,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Ls:c,ks:i}})}function FM(t,e){const n=Tt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function UM(t,e){const n=Tt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,we.resolve(i)):n.hi.allocateTargetId(r).next(c=>(i=new ro(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Dy(t,e,n){const r=Tt(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Yc(c))throw c;Je(dv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function w_(t,e,n){const r=Tt(t);let i=Et.min(),a=Vt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,f,g){const y=Tt(h),x=y.Ms.get(g);return x!==void 0?we.resolve(y.Fs.get(x)):y.hi.getTargetData(f,g)}(r,c,Ps(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?i:Et.min(),n?a:Vt())).next(u=>($M(r,TD(e),u),{documents:u,qs:a})))}function $M(t,e,n){let r=t.xs.get(e)||Et.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class __{constructor(){this.activeTargetIds=PD()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zM{constructor(){this.Fo=new __,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new __,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="ConnectivityMonitor";class k_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Je(E_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Je(E_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf=null;function My(){return xf===null?xf=function(){return 268435456+Math.round(2147483648*Math.random())}():xf++,"0x"+xf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="RestConnection",HM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===gp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const c=My(),u=this.Go(e,n.toUriEncodedString());Je(N0,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,i,a);const{host:f}=new URL(u),g=Eo(f);return this.jo(e,u,h,r,g).then(y=>(Je(N0,`Received RPC '${e}' ${c}: `,y),y),y=>{throw uo(N0,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,a,c){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=HM[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="WebChannelConnection";class GM extends WM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const c=My();return new Promise((u,h)=>{const f=new MT;f.setWithCredentials(!0),f.listenOnce(OT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Bf.NO_ERROR:const y=f.getResponseJson();Je(Tr,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Bf.TIMEOUT:Je(Tr,`RPC '${e}' ${c} timed out`),h(new We(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:const x=f.getStatus();if(Je(Tr,`RPC '${e}' ${c} failed with status:`,x,"response text:",f.getResponseText()),x>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const b=function(j){const M=j.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(M)>=0?M:ye.UNKNOWN}(S.status);h(new We(b,S.message))}else h(new We(ye.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new We(ye.UNAVAILABLE,"Connection failed."));break;default:xt(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Je(Tr,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(i);Je(Tr,`RPC '${e}' ${c} sending request:`,i),f.send(n,"POST",g,r,15)})}P_(e,n,r){const i=My(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=FT(),u=VT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const g=a.join("");Je(Tr,`Creating RPC '${e}' stream ${i}: ${g}`,h);const y=c.createWebChannel(g,h);this.T_(y);let x=!1,w=!1;const S=new qM({Ho:N=>{w?Je(Tr,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(x||(Je(Tr,`Opening RPC '${e}' stream ${i} transport.`),y.open(),x=!0),Je(Tr,`RPC '${e}' stream ${i} sending:`,N),y.send(N))},Yo:()=>y.close()}),b=(N,j,M)=>{N.listen(j,O=>{try{M(O)}catch(F){setTimeout(()=>{throw F},0)}})};return b(y,Wu.EventType.OPEN,()=>{w||(Je(Tr,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),b(y,Wu.EventType.CLOSE,()=>{w||(w=!0,Je(Tr,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(y))}),b(y,Wu.EventType.ERROR,N=>{w||(w=!0,uo(Tr,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),S.__(new We(ye.UNAVAILABLE,"The operation could not be completed")))}),b(y,Wu.EventType.MESSAGE,N=>{var j;if(!w){const M=N.data[0];Kt(!!M,16349);const O=M,F=(O==null?void 0:O.error)||((j=O[0])===null||j===void 0?void 0:j.error);if(F){Je(Tr,`RPC '${e}' stream ${i} received error:`,F);const H=F.status;let K=function(A){const k=zn[A];if(k!==void 0)return bN(k)}(H),R=F.message;K===void 0&&(K=ye.INTERNAL,R="Unknown error status: "+H+" with message "+F.message),w=!0,S.__(new We(K,R)),y.close()}else Je(Tr,`RPC '${e}' stream ${i} received:`,M),S.a_(M)}}),b(u,LT.STAT_EVENT,N=>{N.stat===Ey.PROXY?Je(Tr,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Ey.NOPROXY&&Je(Tr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function C0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t){return new YD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="PersistentStream";class MN{constructor(e,n,r,i,a,c,u,h){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new DN(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(va(n.toString()),va("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new We(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Je(S_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Je(S_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KM extends MN{constructor(e,n,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=eM(this.serializer,e),r=function(a){if(!("targetChange"in a))return Et.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Et.min():c.readTime?Rs(c.readTime):Et.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Ry(this.serializer),n.addTarget=function(a,c){let u;const h=c.target;if(u=Cy(h)?{documents:rM(a,h)}:{query:iM(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=EN(a,c.resumeToken);const f=jy(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(Et.min())>0){u.readTime=wp(a,c.snapshotVersion.toTimestamp());const f=jy(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=aM(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Ry(this.serializer),n.removeTarget=e,this.k_(n)}}class XM extends MN{constructor(e,n,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=nM(e.writeResults,e.commitTime),r=Rs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Ry(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tM(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{}class YM extends QM{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new We(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,Iy(n,r),i,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new We(ye.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,Iy(n,r),i,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new We(ye.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class JM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(va(n),this._a=!1):Je("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="RemoteStore";class ZM{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Sl(this)&&(Je(yl,"Restarting streams for network reachability change."),await async function(h){const f=Tt(h);f.Ia.add(4),await Qd(f),f.Aa.set("Unknown"),f.Ia.delete(4),await dm(f)}(this))})}),this.Aa=new JM(r,i)}}async function dm(t){if(Sl(t))for(const e of t.da)await e(!0)}async function Qd(t){for(const e of t.da)await e(!1)}function ON(t,e){const n=Tt(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),mv(n)?pv(n):Zc(n).x_()&&fv(n,e))}function hv(t,e){const n=Tt(t),r=Zc(n);n.Ta.delete(e),r.x_()&&LN(n,e),n.Ta.size===0&&(r.x_()?r.B_():Sl(n)&&n.Aa.set("Unknown"))}function fv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zc(t).H_(e)}function LN(t,e){t.Ra.$e(e),Zc(t).Y_(e)}function pv(t){t.Ra=new GD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Zc(t).start(),t.Aa.aa()}function mv(t){return Sl(t)&&!Zc(t).M_()&&t.Ta.size>0}function Sl(t){return Tt(t).Ia.size===0}function VN(t){t.Ra=void 0}async function eO(t){t.Aa.set("Online")}async function tO(t){t.Ta.forEach((e,n)=>{fv(t,e)})}async function nO(t,e){VN(t),mv(t)?(t.Aa.la(e),pv(t)):t.Aa.set("Unknown")}async function rO(t,e,n){if(t.Aa.set("Online"),e instanceof _N&&e.state===2&&e.cause)try{await async function(i,a){const c=a.cause;for(const u of a.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,c),i.Ta.delete(u),i.Ra.removeTarget(u))}(t,e)}catch(r){Je(yl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ep(t,r)}else if(e instanceof Gf?t.Ra.Ye(e):e instanceof wN?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Et.min()))try{const r=await RN(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(f);g&&a.Ta.set(f,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,f)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken(vr.EMPTY_BYTE_STRING,g.snapshotVersion)),LN(a,h);const y=new ro(g.target,h,f,g.sequenceNumber);fv(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Je(yl,"Failed to raise snapshot:",r),await Ep(t,r)}}async function Ep(t,e,n){if(!Yc(e))throw e;t.Ia.add(1),await Qd(t),t.Aa.set("Offline"),n||(n=()=>RN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Je(yl,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await dm(t)})}function FN(t,e){return e().catch(n=>Ep(t,n,e))}async function hm(t){const e=Tt(t),n=go(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Jx;for(;iO(e);)try{const i=await FM(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,sO(e,i)}catch(i){await Ep(e,i)}UN(e)&&$N(e)}function iO(t){return Sl(t)&&t.Pa.length<10}function sO(t,e){t.Pa.push(e);const n=go(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function UN(t){return Sl(t)&&!go(t).M_()&&t.Pa.length>0}function $N(t){go(t).start()}async function aO(t){go(t).na()}async function oO(t){const e=go(t);for(const n of t.Pa)e.X_(n.mutations)}async function lO(t,e,n){const r=t.Pa.shift(),i=sv.from(r,e,n);await FN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hm(t)}async function cO(t,e){e&&go(t).Z_&&await async function(r,i){if(function(c){return WD(c)&&c!==ye.ABORTED}(i.code)){const a=r.Pa.shift();go(r).N_(),await FN(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await hm(r)}}(t,e),UN(t)&&$N(t)}async function T_(t,e){const n=Tt(t);n.asyncQueue.verifyOperationInProgress(),Je(yl,"RemoteStore received new credentials");const r=Sl(n);n.Ia.add(3),await Qd(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await dm(n)}async function uO(t,e){const n=Tt(t);e?(n.Ia.delete(2),await dm(n)):e||(n.Ia.add(2),await Qd(n),n.Aa.set("Unknown"))}function Zc(t){return t.Va||(t.Va=function(n,r,i){const a=Tt(n);return a.ia(),new KM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:eO.bind(null,t),e_:tO.bind(null,t),n_:nO.bind(null,t),J_:rO.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),mv(t)?pv(t):t.Aa.set("Unknown")):(await t.Va.stop(),VN(t))})),t.Va}function go(t){return t.ma||(t.ma=function(n,r,i){const a=Tt(n);return a.ia(),new XM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:aO.bind(null,t),n_:cO.bind(null,t),ea:oO.bind(null,t),ta:lO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await hm(t)):(await t.ma.stop(),t.Pa.length>0&&(Je(yl,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const c=Date.now()+r,u=new gv(e,n,c,i,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yv(t,e){if(va("AsyncQueue",`${e}: ${t}`),Yc(t))return new We(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{static emptySet(e){return new Pc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||lt.comparator(n.key,r.key):(n,r)=>lt.comparator(n.key,r.key),this.keyedMap=qu(),this.sortedSet=new kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.fa=new kn(lt.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):xt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Uc{constructor(e,n,r,i,a,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new Uc(e,n,Pc.emptySet(n),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class hO{constructor(){this.queries=C_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Tt(n),a=i.queries;i.queries=C_(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new We(ye.ABORTED,"Firestore shutting down"))}}function C_(){return new kl(t=>lN(t),sm)}async function xv(t,e){const n=Tt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new dO,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(c){const u=yv(c,`Initialization of query '${xc(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&bv(n)}async function vv(t,e){const n=Tt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fO(t,e){const n=Tt(t);let r=!1;for(const i of e){const a=i.query,c=n.queries.get(a);if(c){for(const u of c.wa)u.Ca(i)&&(r=!0);c.ya=i}}r&&bv(n)}function pO(t,e,n){const r=Tt(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function bv(t){t.Da.forEach(e=>{e.next()})}var Oy,A_;(A_=Oy||(Oy={})).Fa="default",A_.Cache="cache";class wv{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Oy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.key=e}}class BN{constructor(e){this.key=e}}class mO{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Vt(),this.mutatedKeys=Vt(),this.Xa=cN(e),this.eu=new Pc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new N_,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,c=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const x=i.get(g),w=am(this.query,y)?y:null,S=!!x&&this.mutatedKeys.has(x.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;x&&w?x.data.isEqual(w.data)?S!==b&&(r.track({type:3,doc:w}),N=!0):this.iu(x,w)||(r.track({type:2,doc:w}),N=!0,(h&&this.Xa(w,h)>0||f&&this.Xa(w,f)<0)&&(u=!0)):!x&&w?(r.track({type:0,doc:w}),N=!0):x&&!w&&(r.track({type:1,doc:x}),N=!0,(h||f)&&(u=!0)),N&&(w?(c=c.add(w),a=b?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(w,S){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt(20277,{At:N})}};return b(w)-b(S)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],h=this.Za.size===0&&this.current&&!i?1:0,f=h!==this.Ya;return this.Ya=h,c.length!==0||f?{snapshot:new Uc(this.query,e.eu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new N_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Vt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new BN(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new zN(r))}),n}uu(e){this.Ha=e.qs,this.Za=Vt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Uc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const _v="SyncEngine";class gO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class yO{constructor(e){this.key=e,this.lu=!1}}class xO{constructor(e,n,r,i,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new kl(u=>lN(u),sm),this.Tu=new Map,this.Iu=new Set,this.du=new kn(lt.comparator),this.Eu=new Map,this.Au=new lv,this.Ru={},this.Vu=new Map,this.mu=Fc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function vO(t,e,n=!0){const r=XN(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await HN(r,e,n,!0),i}async function bO(t,e){const n=XN(t);await HN(n,e,!0,!1)}async function HN(t,e,n,r){const i=await UM(t.localStore,Ps(e)),a=i.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await wO(t,e,a,c==="current",i.resumeToken)),t.isPrimaryClient&&n&&ON(t.remoteStore,i),u}async function wO(t,e,n,r,i){t.gu=(y,x,w)=>async function(b,N,j,M){let O=N.view.nu(j);O.Ds&&(O=await w_(b.localStore,N.query,!1).then(({documents:R})=>N.view.nu(R,O)));const F=M&&M.targetChanges.get(N.targetId),H=M&&M.targetMismatches.get(N.targetId)!=null,K=N.view.applyChanges(O,b.isPrimaryClient,F,H);return I_(b,N.targetId,K._u),K.snapshot}(t,y,x,w);const a=await w_(t.localStore,e,!0),c=new mO(e,a.qs),u=c.nu(a.documents),h=Xd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=c.applyChanges(u,t.isPrimaryClient,h);I_(t,n,f._u);const g=new gO(e,n,c);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function _O(t,e,n){const r=Tt(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(c=>!sm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hv(r.remoteStore,i.targetId),Ly(r,i.targetId)}).catch(Qc)):(Ly(r,i.targetId),await Dy(r.localStore,i.targetId,!0))}async function EO(t,e){const n=Tt(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hv(n.remoteStore,r.targetId))}async function kO(t,e,n){const r=IO(t);try{const i=await function(c,u){const h=Tt(c),f=un.now(),g=u.reduce((w,S)=>w.add(S.key),Vt());let y,x;return h.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=ba(),b=Vt();return h.Os.getEntries(w,g).next(N=>{S=N,S.forEach((j,M)=>{M.isValidDocument()||(b=b.add(j))})}).next(()=>h.localDocuments.getOverlayedDocuments(w,S)).next(N=>{y=N;const j=[];for(const M of u){const O=UD(M,y.get(M.key).overlayedDocument);O!=null&&j.push(new To(M.key,O,eN(O.value.mapValue),Oi.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,j,u)}).next(N=>{x=N;const j=N.applyToLocalDocumentSet(y,b);return h.documentOverlayCache.saveOverlays(w,N.batchId,j)})}).then(()=>({batchId:x.batchId,changes:dN(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,u,h){let f=c.Ru[c.currentUser.toKey()];f||(f=new kn(Pt)),f=f.insert(u,h),c.Ru[c.currentUser.toKey()]=f}(r,i.batchId,n),await Yd(r,i.changes),await hm(r.remoteStore)}catch(i){const a=yv(i,"Failed to persist write");n.reject(a)}}async function WN(t,e){const n=Tt(t);try{const r=await LM(n.localStore,e);e.targetChanges.forEach((i,a)=>{const c=n.Eu.get(a);c&&(Kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?Kt(c.lu,14607):i.removedDocuments.size>0&&(Kt(c.lu,42227),c.lu=!1))}),await Yd(n,r,e)}catch(r){await Qc(r)}}function j_(t,e,n){const r=Tt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(c,u){const h=Tt(c);h.onlineState=u;let f=!1;h.queries.forEach((g,y)=>{for(const x of y.wa)x.va(u)&&(f=!0)}),f&&bv(h)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SO(t,e,n){const r=Tt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let c=new kn(lt.comparator);c=c.insert(a,jr.newNoDocument(a,Et.min()));const u=Vt().add(a),h=new cm(Et.min(),new Map,new kn(Pt),c,u);await WN(r,h),r.du=r.du.remove(a),r.Eu.delete(e),Ev(r)}else await Dy(r.localStore,e,!1).then(()=>Ly(r,e,n)).catch(Qc)}async function TO(t,e){const n=Tt(t),r=e.batch.batchId;try{const i=await OM(n.localStore,e);GN(n,r,null),qN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yd(n,i)}catch(i){await Qc(i)}}async function NO(t,e,n){const r=Tt(t);try{const i=await function(c,u){const h=Tt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(Kt(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(r.localStore,e);GN(r,e,n),qN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yd(r,i)}catch(i){await Qc(i)}}function qN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function GN(t,e,n){const r=Tt(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Ly(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||KN(t,r)})}function KN(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(hv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ev(t))}function I_(t,e,n){for(const r of n)r instanceof zN?(t.Au.addReference(r.key,e),CO(t,r)):r instanceof BN?(Je(_v,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||KN(t,r.key)):xt(19791,{yu:r})}function CO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Je(_v,"New document in limbo: "+n),t.Iu.add(r),Ev(t))}function Ev(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new lt(sn.fromString(e)),r=t.mu.next();t.Eu.set(r,new yO(n)),t.du=t.du.insert(n,r),ON(t.remoteStore,new ro(Ps(im(n.path)),r,"TargetPurposeLimboResolution",tm.ue))}}async function Yd(t,e,n){const r=Tt(t),i=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){i.push(f);const y=uv.Es(h.targetId,f);a.push(y)}}))}),await Promise.all(c),r.hu.J_(i),await async function(h,f){const g=Tt(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>we.forEach(f,x=>we.forEach(x.Is,w=>g.persistence.referenceDelegate.addReference(y,x.targetId,w)).next(()=>we.forEach(x.ds,w=>g.persistence.referenceDelegate.removeReference(y,x.targetId,w)))))}catch(y){if(!Yc(y))throw y;Je(dv,"Failed to update sequence numbers: "+y)}for(const y of f){const x=y.targetId;if(!y.fromCache){const w=g.Fs.get(x),S=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(x,b)}}}(r.localStore,a))}async function AO(t,e){const n=Tt(t);if(!n.currentUser.isEqual(e)){Je(_v,"User change. New user:",e.toKey());const r=await PN(n.localStore,e);n.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new We(ye.CANCELLED,c))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yd(n,r.Bs)}}function jO(t,e){const n=Tt(t),r=n.Eu.get(e);if(r&&r.lu)return Vt().add(r.key);{let i=Vt();const a=n.Tu.get(e);if(!a)return i;for(const c of a){const u=n.Pu.get(c);i=i.unionWith(u.view.tu)}return i}}function XN(t){const e=Tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SO.bind(null,e),e.hu.J_=fO.bind(null,e.eventManager),e.hu.pu=pO.bind(null,e.eventManager),e}function IO(t){const e=Tt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NO.bind(null,e),e}class kp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return MM(this.persistence,new PM,e.initialUser,this.serializer)}Du(e){return new IN(cv.Vi,this.serializer)}bu(e){return new zM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kp.provider={build:()=>new kp};class PO extends kp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Kt(this.persistence.referenceDelegate instanceof _p,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yM(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new IN(r=>_p.Vi(r,n),this.serializer)}}class Vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>j_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AO.bind(null,this.syncEngine),await uO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hO}()}createDatastore(e){const n=um(e.databaseInfo.databaseId),r=function(a){return new GM(a)}(e.databaseInfo);return function(a,c,u,h){return new YM(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,c,u){return new ZM(r,i,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>j_(this.syncEngine,n,0),function(){return k_.C()?new k_:new BM}())}createSyncEngine(e,n){return function(i,a,c,u,h,f,g){const y=new xO(i,a,c,u,h,f);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Tt(i);Je(yl,"RemoteStore shutting down."),a.Ia.add(5),await Qd(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Vy.provider={build:()=>new Vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):va("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="FirestoreClient";class RO{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ar.UNAUTHENTICATED,this.clientId=Yx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Je(yo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Je(yo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function A0(t,e){t.asyncQueue.verifyOperationInProgress(),Je(yo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await PN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{uo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Je("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{uo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function P_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DO(t);Je(yo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>T_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>T_(e.remoteStore,i)),t._onlineComponents=e}async function DO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Je(yo,"Using user provided OfflineComponentProvider");try{await A0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await A0(t,new kp)}}else Je(yo,"Using default OfflineComponentProvider"),await A0(t,new PO(void 0));return t._offlineComponents}async function QN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Je(yo,"Using user provided OnlineComponentProvider"),await P_(t,t._uninitializedComponentsProvider._online)):(Je(yo,"Using default OnlineComponentProvider"),await P_(t,new Vy))),t._onlineComponents}function MO(t){return QN(t).then(e=>e.syncEngine)}async function Sp(t){const e=await QN(t),n=e.eventManager;return n.onListen=vO.bind(null,e.syncEngine),n.onUnlisten=_O.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EO.bind(null,e.syncEngine),n}function OO(t,e,n={}){const r=new ma;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const g=new kv({next:x=>{g.Ou(),c.enqueueAndForget(()=>vv(a,y));const w=x.docs.has(u);!w&&x.fromCache?f.reject(new We(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&h&&h.source==="server"?f.reject(new We(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new wv(im(u.path),g,{includeMetadataChanges:!0,ka:!0});return xv(a,y)}(await Sp(t),t.asyncQueue,e,n,r)),r.promise}function LO(t,e,n={}){const r=new ma;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const g=new kv({next:x=>{g.Ou(),c.enqueueAndForget(()=>vv(a,y)),x.fromCache&&h.source==="server"?f.reject(new We(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new wv(u,g,{includeMetadataChanges:!0,ka:!0});return xv(a,y)}(await Sp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firestore.googleapis.com",D_=!0;class M_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new We(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JN,this.ssl=D_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:D_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mM)throw new We(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new We(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new We(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new We(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B6;switch(r.type){case"firstParty":return new G6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=R_.get(n);r&&(Je("ComponentProvider","Removing Datastore"),R_.delete(n),r.terminate())}(this),Promise.resolve()}}function VO(t,e,n,r={}){var i;t=ii(t,fm);const a=Eo(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),h=`${e}:${n}`;a&&(Ox(`https://${h}`),Lx("Firestore",!0)),c.host!==JN&&c.host!==h&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:h,ssl:a,emulatorOptions:r});if(!hl(f,u)&&(t._setSettings(f),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=Ar.MOCK_USER;else{g=KS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new We(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ar(x)}t._authCredentials=new H6(new $T(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class Pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}toJSON(){return{type:Pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Gd(n,Pn._jsonSchema))return new Pn(e,r||null,new lt(sn.fromString(n.referencePath)))}}Pn._jsonSchemaVersion="firestore/documentReference/1.0",Pn._jsonSchema={type:Gn("string",Pn._jsonSchemaVersion),referencePath:Gn("string")};class lo extends Na{constructor(e,n,r){super(e,n,im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new lt(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function Ft(t,e,...n){if(t=on(t),BT("collection","path",e),t instanceof fm){const r=sn.fromString(e,...n);return K2(r),new lo(t,null,r)}{if(!(t instanceof Pn||t instanceof lo))throw new We(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return K2(r),new lo(t.firestore,null,r)}}function ot(t,e,...n){if(t=on(t),arguments.length===1&&(e=Yx.newId()),BT("doc","path",e),t instanceof fm){const r=sn.fromString(e,...n);return G2(r),new Pn(t,null,new lt(r))}{if(!(t instanceof Pn||t instanceof lo))throw new We(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return G2(r),new Pn(t.firestore,t instanceof lo?t.converter:null,new lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="AsyncQueue";class L_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new DN(this,"async_queue_retry"),this.oc=()=>{const r=C0();r&&Je(O_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=C0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=C0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ma;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Yc(e))throw e;Je(O_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,va("INTERNAL UNHANDLED ERROR: ",V_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=gv.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&xt(47125,{hc:V_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function V_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class wa extends fm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new L_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L_(e),this._firestoreClient=void 0,await e}}}function FO(t,e){const n=typeof t=="object"?t:Ux(),r=typeof t=="string"?t:gp,i=Qp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=WS("firestore");a&&VO(i,...a)}return i}function pm(t){if(t._terminated)throw new We(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UO(t),t._firestoreClient}function UO(t){var e,n,r;const i=t._freezeSettings(),a=function(u,h,f,g){return new uD(u,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,YN(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new RO(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(vr.fromBase64String(e))}catch(n){throw new We(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Di(vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Di._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gd(e,Di._jsonSchema))return Di.fromBase64String(e.bytes)}}Di._jsonSchemaVersion="firestore/bytes/1.0",Di._jsonSchema={type:Gn("string",Di._jsonSchemaVersion),bytes:Gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new We(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new We(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new We(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(e){if(Gd(e,Ds._jsonSchema))return new Ds(e.latitude,e.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:Gn("string",Ds._jsonSchemaVersion),latitude:Gn("number"),longitude:Gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ms._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gd(e,Ms._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ms(e.vectorValues);throw new We(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ms._jsonSchemaVersion="firestore/vectorValue/1.0",Ms._jsonSchema={type:Gn("string",Ms._jsonSchemaVersion),vectorValues:Gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=/^__.*__$/;class zO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new To(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kd(e,this.data,n,this.fieldTransforms)}}class ZN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new To(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt(40011,{Ec:t})}}class Sv{constructor(e,n,r,i,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Sv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Tp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(eC(this.Ec)&&$O.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class BO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||um(e)}Dc(e,n,r,i=!1){return new Sv({Ec:e,methodName:n,bc:r,path:yr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ym(t){const e=t._freezeSettings(),n=um(t._databaseId);return new BO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tC(t,e,n,r,i,a={}){const c=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);Nv("Data must be an object, but it was:",c,r);const u=nC(r,c);let h,f;if(a.merge)h=new mi(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const x=Fy(e,y,n);if(!c.contains(x))throw new We(ye.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);iC(g,x)||g.push(x)}h=new mi(g),f=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=c.fieldTransforms;return new zO(new ni(u),h,f)}class xm extends gm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xm}}class Tv extends gm{_toFieldTransform(e){return new OD(e.path,new _d)}isEqual(e){return e instanceof Tv}}function HO(t,e,n,r){const i=t.Dc(1,e,n);Nv("Data must be an object, but it was:",i,r);const a=[],c=ni.empty();So(r,(h,f)=>{const g=Cv(e,h,n);f=on(f);const y=i.gc(g);if(f instanceof xm)a.push(g);else{const x=Jd(f,y);x!=null&&(a.push(g),c.set(g,x))}});const u=new mi(a);return new ZN(c,u,i.fieldTransforms)}function WO(t,e,n,r,i,a){const c=t.Dc(1,e,n),u=[Fy(e,r,n)],h=[i];if(a.length%2!=0)throw new We(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)u.push(Fy(e,a[x])),h.push(a[x+1]);const f=[],g=ni.empty();for(let x=u.length-1;x>=0;--x)if(!iC(f,u[x])){const w=u[x];let S=h[x];S=on(S);const b=c.gc(w);if(S instanceof xm)f.push(w);else{const N=Jd(S,b);N!=null&&(f.push(w),g.set(w,N))}}const y=new mi(f);return new ZN(g,y,c.fieldTransforms)}function qO(t,e,n,r=!1){return Jd(n,t.Dc(r?4:3,e))}function Jd(t,e){if(rC(t=on(t)))return Nv("Unsupported field value:",e,t),nC(t,e);if(t instanceof gm)return function(r,i){if(!eC(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let c=0;for(const u of r){let h=Jd(u,i.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=un.fromDate(r);return{timestampValue:wp(i.serializer,a)}}if(r instanceof un){const a=new un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wp(i.serializer,a)}}if(r instanceof Ds)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:EN(i.serializer,r._byteString)};if(r instanceof Pn){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ov(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ms)return function(c,u){return{mapValue:{fields:{[JT]:{stringValue:ZT},[yp]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return rv(u.serializer,f)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${em(r)}`)}(t,e)}function nC(t,e){const n={};return qT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,(r,i)=>{const a=Jd(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function rC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof un||t instanceof Ds||t instanceof Di||t instanceof Pn||t instanceof gm||t instanceof Ms)}function Nv(t,e,n){if(!rC(n)||!HT(n)){const r=em(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Fy(t,e,n){if((e=on(e))instanceof mm)return e._internalPath;if(typeof e=="string")return Cv(t,e);throw Tp("Field path arguments must be of type string or ",t,!1,void 0,n)}const GO=new RegExp("[~\\*/\\[\\]]");function Cv(t,e,n){if(e.search(GO)>=0)throw Tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mm(...e.split("."))._internalPath}catch{throw Tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tp(t,e,n,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new We(ye.INVALID_ARGUMENT,u+t+h)}function iC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KO extends sC{data(){return super.data()}}function vm(t,e){return typeof e=="string"?Cv(t,e):e instanceof mm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Av{}class jv extends Av{}function an(t,e,...n){let r=[];e instanceof Av&&r.push(e),r=r.concat(n),function(a){const c=a.filter(h=>h instanceof Iv).length,u=a.filter(h=>h instanceof bm).length;if(c>1||c>0&&u>0)throw new We(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class bm extends jv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bm(e,n,r)}_apply(e){const n=this._parse(e);return oC(e._query,n),new Na(e.firestore,e.converter,Ay(e._query,n))}_parse(e){const n=ym(e.firestore);return function(a,c,u,h,f,g,y){let x;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new We(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){$_(y,g);const S=[];for(const b of y)S.push(U_(h,a,b));x={arrayValue:{values:S}}}else x=U_(h,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||$_(y,g),x=qO(u,c,y,g==="in"||g==="not-in");return qn.create(f,g,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xr(t,e,n){const r=e,i=vm("where",t);return bm._create(i,r,n)}class Iv extends Av{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Iv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ss.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let c=i;const u=a.getFlattenedFilters();for(const h of u)oC(c,h),c=Ay(c,h)}(e._query,n),new Na(e.firestore,e.converter,Ay(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pv extends jv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pv(e,n)}_apply(e){const n=function(i,a,c){if(i.startAt!==null)throw new We(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wd(a,c)}(e._query,this._field,this._direction);return new Na(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new Jc(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function zs(t,e="asc"){const n=e,r=vm("orderBy",t);return Pv._create(r,n)}class Rv extends jv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rv(e,n,r)}_apply(e){return new Na(e.firestore,e.converter,vp(e._query,this._limit,this._limitType))}}function wm(t){return Z6("limit",t),Rv._create("limit",t,"F")}function U_(t,e,n){if(typeof(n=on(n))=="string"){if(n==="")throw new We(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oN(e)&&n.indexOf("/")!==-1)throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(sn.fromString(n));if(!lt.isDocumentKey(r))throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return n_(t,new lt(r))}if(n instanceof Pn)return n_(t,n._key);throw new We(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${em(n)}.`)}function $_(t,e){if(!Array.isArray(t)||t.length===0)throw new We(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oC(t,e){const n=function(i,a){for(const c of i)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new We(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XO{convertValue(e,n="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[yp].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>On(c.doubleValue));return new Ms(a)}convertGeoPoint(e){return new Ds(On(e.latitude),On(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xd(e));default:return null}}convertTimestamp(e){const n=fo(e);return new un(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=sn.fromString(e);Kt(AN(r),9688,{name:e});const i=new vd(r.get(1),r.get(3)),a=new lt(r.popFirst(5));return i.isEqual(n)||va(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ku{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class al extends sC{constructor(e,n,r,i,a,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new We(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=al._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}al._jsonSchemaVersion="firestore/documentSnapshot/1.0",al._jsonSchema={type:Gn("string",al._jsonSchemaVersion),bundleSource:Gn("string","DocumentSnapshot"),bundleName:Gn("string"),bundle:Gn("string")};class Kf extends al{data(e={}){return super.data(e)}}class ol{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ku(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kf(this._firestore,this._userDataWriter,r.key,r,new Ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new We(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(u=>{const h=new Kf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ku(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new Kf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ku(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:QO(u.type),doc:h,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new We(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ol._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){t=ii(t,Pn);const e=ii(t.firestore,wa);return OO(pm(e),t._key).then(n=>cC(e,t,n))}ol._jsonSchemaVersion="firestore/querySnapshot/1.0",ol._jsonSchema={type:Gn("string",ol._jsonSchemaVersion),bundleSource:Gn("string","QuerySnapshot"),bundleName:Gn("string"),bundle:Gn("string")};class Dv extends XO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function Ir(t){t=ii(t,Na);const e=ii(t.firestore,wa),n=pm(e),r=new Dv(e);return aC(t._query),LO(n,t._query).then(i=>new ol(e,r,t,i))}function Jn(t,e,n){t=ii(t,Pn);const r=ii(t.firestore,wa),i=lC(t.converter,e,n);return km(r,[tC(ym(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Oi.none())])}function Bn(t,e,n,...r){t=ii(t,Pn);const i=ii(t.firestore,wa),a=ym(i);let c;return c=typeof(e=on(e))=="string"||e instanceof mm?WO(a,"updateDoc",t._key,e,n,r):HO(a,"updateDoc",t._key,e),km(i,[c.toMutation(t._key,Oi.exists(!0))])}function _m(t){return km(ii(t.firestore,wa),[new iv(t._key,Oi.none())])}function Em(t,e){const n=ii(t.firestore,wa),r=ot(t),i=lC(t.converter,e);return km(n,[tC(ym(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Oi.exists(!1))]).then(()=>r)}function ar(t,...e){var n,r,i;t=on(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||F_(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(F_(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let h,f,g;if(t instanceof Pn)f=ii(t.firestore,wa),g=im(t._key.path),h={next:y=>{e[c]&&e[c](cC(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=ii(t,Na);f=ii(y.firestore,wa),g=y._query;const x=new Dv(f);h={next:w=>{e[c]&&e[c](new ol(f,x,y,w))},error:e[c+1],complete:e[c+2]},aC(t._query)}return function(x,w,S,b){const N=new kv(b),j=new wv(w,N,S);return x.asyncQueue.enqueueAndForget(async()=>xv(await Sp(x),j)),()=>{N.Ou(),x.asyncQueue.enqueueAndForget(async()=>vv(await Sp(x),j))}}(pm(f),g,u,h)}function km(t,e){return function(r,i){const a=new ma;return r.asyncQueue.enqueueAndForget(async()=>kO(await MO(r),i,a)),a.promise}(pm(t),e)}function cC(t,e,n){const r=n.docs.get(e._key),i=new Dv(t);return new al(t,i,e._key,r,new Ku(n.hasPendingWrites,n.fromCache),e.converter)}function uC(){return new Tv("serverTimestamp")}(function(e,n=!0){(function(i){Xc=i})(wl),fl(new co("firestore",(r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new wa(new W6(r.getProvider("auth-internal")),new K6(c,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new We(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vd(f.options.projectId,g)}(c,i),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),As(z2,B2,e),As(z2,B2,"esm2017")})();var YO="firebase",JO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(YO,JO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="firebasestorage.googleapis.com",hC="storageBucket",ZO=2*60*1e3,e9=10*60*1e3,t9=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends Hs{constructor(e,n,r=0){super(j0(e),`Firebase Storage: ${n} (${j0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Sn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return j0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hn||(hn={}));function j0(t){return"storage/"+t}function Mv(){const t="An unknown error occurred, please check the error payload for server response.";return new Sn(hn.UNKNOWN,t)}function n9(t){return new Sn(hn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function r9(t){return new Sn(hn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function i9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Sn(hn.UNAUTHENTICATED,t)}function s9(){return new Sn(hn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function a9(t){return new Sn(hn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fC(){return new Sn(hn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pC(){return new Sn(hn.CANCELED,"User canceled the upload/download.")}function o9(t){return new Sn(hn.INVALID_URL,"Invalid URL '"+t+"'.")}function l9(t){return new Sn(hn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function c9(){return new Sn(hn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hC+"' property when initializing the app?")}function mC(){return new Sn(hn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u9(){return new Sn(hn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function d9(){return new Sn(hn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function h9(t){return new Sn(hn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uy(t){return new Sn(hn.INVALID_ARGUMENT,t)}function gC(){return new Sn(hn.APP_DELETED,"The Firebase app was deleted.")}function f9(t){return new Sn(hn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function id(t,e){return new Sn(hn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Lu(t){throw new Sn(hn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gi.makeFromUrl(e,n)}catch{return new gi(e,"")}if(r.path==="")return r;throw l9(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+i+c,"i"),h={bucket:1,path:3};function f(F){F.path_=decodeURIComponent(F.path)}const g="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${i}/o${x}`,"i"),S={bucket:1,path:3},b=n===dC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",j=new RegExp(`^https?://${b}/${i}/${N}`,"i"),O=[{regex:u,indices:h,postModify:a},{regex:w,indices:S,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let F=0;F<O.length;F++){const H=O[F],K=H.regex.exec(e);if(K){const R=K[H.indices.bucket];let I=K[H.indices.path];I||(I=""),r=new gi(R,I),H.postModify(r);break}}if(r==null)throw o9(e);return r}}class p9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(t,e,n){let r=1,i=null,a=null,c=!1,u=0;function h(){return u===2}let f=!1;function g(...N){f||(f=!0,e.apply(null,N))}function y(N){i=setTimeout(()=>{i=null,t(w,h())},N)}function x(){a&&clearTimeout(a)}function w(N,...j){if(f){x();return}if(N){x(),g.call(null,N,...j);return}if(h()||c){x(),g.call(null,N,...j);return}r<64&&(r*=2);let O;u===1?(u=2,O=0):O=(r+Math.random())*1e3,y(O)}let S=!1;function b(N){S||(S=!0,x(),!f&&(i!==null?(N||(u=2),clearTimeout(i),y(0)):N||(u=1)))}return y(0),a=setTimeout(()=>{c=!0,b(!0)},n),b}function g9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t){return t!==void 0}function x9(t){return typeof t=="function"}function v9(t){return typeof t=="object"&&!Array.isArray(t)}function Sm(t){return typeof t=="string"||t instanceof String}function z_(t){return Ov()&&t instanceof Blob}function Ov(){return typeof Blob<"u"}function B_(t,e,n,r){if(r<e)throw Uy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Uy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function yC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ll;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ll||(ll={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n,r,i,a,c,u,h,f,g,y,x=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=x,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,b)=>{this.resolve_=S,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===ll.NO_ERROR,h=a.getStatus();if(!u||xC(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===ll.ABORT;r(!1,new vf(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new vf(f,a))})},n=(r,i)=>{const a=this.resolve_,c=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());y9(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=Mv();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(i.canceled){const h=this.appDelete_?gC():pC();c(h)}else{const h=fC();c(h)}};this.canceled_?n(!1,new vf(!1,null,!0)):this.backoffId_=m9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function w9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function E9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function k9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function S9(t,e,n,r,i,a,c=!0,u=!1){const h=yC(t.urlParams),f=t.url+h,g=Object.assign({},t.headers);return E9(g,e),w9(g,n),_9(g,a),k9(g,r),new b9(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function N9(...t){const e=T9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ov())return new Blob(t);throw new Sn(hn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t){if(typeof atob>"u")throw h9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class I0{constructor(e,n){this.data=e,this.contentType=n||null}}function j9(t,e){switch(t){case Cs.RAW:return new I0(vC(e));case Cs.BASE64:case Cs.BASE64URL:return new I0(bC(t,e));case Cs.DATA_URL:return new I0(P9(e),R9(e))}throw Mv()}function vC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,c=t.charCodeAt(++n);r=65536|(a&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function I9(t){let e;try{e=decodeURIComponent(t)}catch{throw id(Cs.DATA_URL,"Malformed data URL.")}return vC(e)}function bC(t,e){switch(t){case Cs.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw id(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Cs.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw id(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=A9(e)}catch(i){throw i.message.includes("polyfill")?i:id(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class wC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw id(Cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=D9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function P9(t){const e=new wC(t);return e.base64?bC(Cs.BASE64,e.rest):I9(e.rest)}function R9(t){return new wC(t).contentType}function D9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){let r=0,i="";z_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(z_(this.data_)){const r=this.data_,i=C9(r,e,n);return i===null?null:new da(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new da(r,!0)}}static getBlob(...e){if(Ov()){const n=e.map(r=>r instanceof da?r.data_:r);return new da(N9.apply(null,n))}else{const n=e.map(c=>Sm(c)?j9(Cs.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(c=>{for(let u=0;u<c.length;u++)i[a++]=c[u]}),new da(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){let e;try{e=JSON.parse(t)}catch{return null}return v9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function O9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function EC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t,e){return e}class Ur{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||L9}}let bf=null;function V9(t){return!Sm(t)||t.length<2?t:EC(t)}function Lv(){if(bf)return bf;const t=[];t.push(new Ur("bucket")),t.push(new Ur("generation")),t.push(new Ur("metageneration")),t.push(new Ur("name","fullPath",!0));function e(a,c){return V9(c)}const n=new Ur("name");n.xform=e,t.push(n);function r(a,c){return c!==void 0?Number(c):c}const i=new Ur("size");return i.xform=r,t.push(i),t.push(new Ur("timeCreated")),t.push(new Ur("updated")),t.push(new Ur("md5Hash",null,!0)),t.push(new Ur("cacheControl",null,!0)),t.push(new Ur("contentDisposition",null,!0)),t.push(new Ur("contentEncoding",null,!0)),t.push(new Ur("contentLanguage",null,!0)),t.push(new Ur("contentType",null,!0)),t.push(new Ur("metadata","customMetadata",!0)),bf=t,bf}function F9(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new gi(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function U9(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const c=n[a];r[c.local]=c.xform(r,e[c.server])}return F9(r,t),r}function kC(t,e,n){const r=_C(e);return r===null?null:U9(t,r,n)}function $9(t,e,n,r){const i=_C(e);if(i===null||!Sm(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(f=>{const g=t.bucket,y=t.fullPath,x="/b/"+c(g)+"/o/"+c(y),w=eu(x,n,r),S=yC({alt:"media",token:f});return w+S})[0]}function SC(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class Tl{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){if(!t)throw Mv()}function Vv(t,e){function n(r,i){const a=kC(t,i,e);return ga(a!==null),a}return n}function z9(t,e){function n(r,i){const a=kC(t,i,e);return ga(a!==null),$9(a,i,t.host,t._protocol)}return n}function Zd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=s9():i=i9():n.getStatus()===402?i=r9(t.bucket):n.getStatus()===403?i=a9(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Fv(t){const e=Zd(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=n9(t.path)),a.serverResponse=i.serverResponse,a}return n}function B9(t,e,n){const r=e.fullServerUrl(),i=eu(r,t.host,t._protocol),a="GET",c=t.maxOperationRetryTime,u=new Tl(i,a,Vv(t,n),c);return u.errorHandler=Fv(e),u}function H9(t,e,n){const r=e.fullServerUrl(),i=eu(r,t.host,t._protocol),a="GET",c=t.maxOperationRetryTime,u=new Tl(i,a,z9(t,n),c);return u.errorHandler=Fv(e),u}function W9(t,e){const n=e.fullServerUrl(),r=eu(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function c(h,f){}const u=new Tl(r,i,c,a);return u.successCodes=[200,204],u.errorHandler=Fv(e),u}function q9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function TC(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=q9(null,e)),r}function NC(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let O="";for(let F=0;F<2;F++)O=O+Math.random().toString().slice(2);return O}const h=u();c["Content-Type"]="multipart/related; boundary="+h;const f=TC(e,r,i),g=SC(f,n),y="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,x=`\r
--`+h+"--",w=da.getBlob(y,r,x);if(w===null)throw mC();const S={name:f.fullPath},b=eu(a,t.host,t._protocol),N="POST",j=t.maxUploadRetryTime,M=new Tl(b,N,Vv(t,n),j);return M.urlParams=S,M.headers=c,M.body=w.uploadData(),M.errorHandler=Zd(e),M}class Np{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Uv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ga(!1)}return ga(!!n&&(e||["active"]).indexOf(n)!==-1),n}function G9(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),c=TC(e,r,i),u={name:c.fullPath},h=eu(a,t.host,t._protocol),f="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},y=SC(c,n),x=t.maxUploadRetryTime;function w(b){Uv(b);let N;try{N=b.getResponseHeader("X-Goog-Upload-URL")}catch{ga(!1)}return ga(Sm(N)),N}const S=new Tl(h,f,w,x);return S.urlParams=u,S.headers=g,S.body=y,S.errorHandler=Zd(e),S}function K9(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function a(f){const g=Uv(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ga(!1)}y||ga(!1);const x=Number(y);return ga(!isNaN(x)),new Np(x,r.size(),g==="final")}const c="POST",u=t.maxUploadRetryTime,h=new Tl(n,c,a,u);return h.headers=i,h.errorHandler=Zd(e),h}const H_=256*1024;function X9(t,e,n,r,i,a,c,u){const h=new Np(0,0);if(c?(h.current=c.current,h.total=c.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw u9();const f=h.total-h.current;let g=f;i>0&&(g=Math.min(g,i));const y=h.current,x=y+g;let w="";g===0?w="finalize":f===g?w="upload, finalize":w="upload";const S={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${h.current}`},b=r.slice(y,x);if(b===null)throw mC();function N(F,H){const K=Uv(F,["active","final"]),R=h.current+g,I=r.size();let A;return K==="final"?A=Vv(e,a)(F,H):A=null,new Np(R,I,K==="final",A)}const j="POST",M=e.maxUploadRetryTime,O=new Tl(n,j,N,M);return O.headers=S,O.body=b.uploadData(),O.progressCallback=u||null,O.errorHandler=Zd(t),O}const ti={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function P0(t){switch(t){case"running":case"pausing":case"canceling":return ti.RUNNING;case"paused":return ti.PAUSED;case"success":return ti.SUCCESS;case"canceled":return ti.CANCELED;case"error":return ti.ERROR;default:return ti.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e,n,r){if(x9(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Y9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ll.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ll.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ll.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Lu("cannot .send() more than once");if(Eo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class J9 extends Y9{initXhr(){this.xhr_.responseType="text"}}function to(){return new J9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Lv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(hn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(xC(i.status,[]))if(a)i=fC();else{this.sleepTime=Math.max(this.sleepTime*2,t9),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(hn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=G9(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=K9(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,to,n,r);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=H_*this._chunkMultiplier,n=new Np(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=X9(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const u=this._ref.storage._makeRequest(c,to,i,a,!1);this._request=u,u.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){H_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=B9(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,to,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=NC(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=pC(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=P0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const a=new Q9(n||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(P0(this._state)){case ti.SUCCESS:cc(this._resolve.bind(null,this.snapshot))();break;case ti.CANCELED:case ti.ERROR:const n=this._reject;cc(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(P0(this._state)){case ti.RUNNING:case ti.PAUSED:e.next&&cc(e.next.bind(e,this.snapshot))();break;case ti.SUCCESS:e.complete&&cc(e.complete.bind(e))();break;case ti.CANCELED:case ti.ERROR:e.error&&cc(e.error.bind(e,this._error))();break;default:e.error&&cc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this._service=e,n instanceof gi?this._location=n:this._location=gi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xl(e,n)}get root(){const e=new gi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EC(this._location.path)}get storage(){return this._service}get parent(){const e=M9(this._location.path);if(e===null)return null;const n=new gi(this._location.bucket,e);return new xl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw f9(e)}}function eL(t,e,n){t._throwIfRoot("uploadBytes");const r=NC(t.storage,t._location,Lv(),new da(e,!0),n);return t.storage.makeRequestWithTokens(r,to).then(i=>({metadata:i,ref:t}))}function tL(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Z9(t,new da(e),n)}function nL(t){t._throwIfRoot("getDownloadURL");const e=H9(t.storage,t._location,Lv());return t.storage.makeRequestWithTokens(e,to).then(n=>{if(n===null)throw d9();return n})}function rL(t){t._throwIfRoot("deleteObject");const e=W9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,to)}function iL(t,e){const n=O9(t._location.path,e),r=new gi(t._location.bucket,n);return new xl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t){return/^[A-Za-z]+:\/\//.test(t)}function aL(t,e){return new xl(t,e)}function CC(t,e){if(t instanceof $v){const n=t;if(n._bucket==null)throw c9();const r=new xl(n,n._bucket);return e!=null?CC(r,e):r}else return e!==void 0?iL(t,e):t}function oL(t,e){if(e&&sL(e)){if(t instanceof $v)return aL(t,e);throw Uy("To use ref(service, url), the first argument must be a Storage instance.")}else return CC(t,e)}function W_(t,e){const n=e==null?void 0:e[hC];return n==null?null:gi.makeFromBucketSpec(n,t)}function lL(t,e,n,r={}){t.host=`${e}:${n}`;const i=Eo(e);i&&(Ox(`https://${t.host}/b`),Lx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:KS(a,t.app.options.projectId))}class $v{constructor(e,n,r,i,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=dC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZO,this._maxUploadRetryTime=e9,this._requests=new Set,i!=null?this._bucket=gi.makeFromBucketSpec(i,this._host):this._bucket=W_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gi.makeFromBucketSpec(this._url,e):this._bucket=W_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xl(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new p9(gC());{const c=S9(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const q_="@firebase/storage",G_="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="storage";function zv(t,e,n){return t=on(t),eL(t,e,n)}function K_(t,e,n){return t=on(t),tL(t,e,n)}function tl(t){return t=on(t),nL(t)}function cL(t){return t=on(t),rL(t)}function es(t,e){return t=on(t),oL(t,e)}function uL(t=Ux(),e){t=on(t);const r=Qp(t,AC).getImmediate({identifier:e}),i=WS("storage");return i&&dL(r,...i),r}function dL(t,e,n,r={}){lL(t,e,n,r)}function hL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $v(n,r,i,e,wl)}function fL(){fl(new co(AC,hL,"PUBLIC").setMultipleInstances(!0)),As(q_,G_,""),As(q_,G_,"esm2017")}fL();const pL={apiKey:"AIzaSyCraPDyyhOJs9IJtVMCe2b1VNFYkbtqWEg",authDomain:"playcenter-universal.firebaseapp.com",projectId:"playcenter-universal",storageBucket:"playcenter-universal.firebasestorage.app",messagingSenderId:"876884906641",appId:"1:876884906641:web:a0a5b7526b7f4161452530",measurementId:"G-4MPL62WSKW"},Bv=YS(pL),Pe=FO(Bv),Ko=$6(Bv),ts=uL(Bv);function X_(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e="0123456789";let n="USER-";for(let r=0;r<3;r++)n+=t.charAt(Math.floor(Math.random()*t.length));for(let r=0;r<3;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}const jC=T.createContext();function Br(){return T.useContext(jC)}function IC({children:t}){const[e,n]=T.useState(null),[r,i]=T.useState(null),[a,c]=T.useState(!0);T.useEffect(()=>{let b=null;const N=AR(Ko,async j=>{if(b){try{b()}catch{}b=null}if(n(j),!j){i(null),c(!1);return}try{const M=ot(Pe,"users",j.uid),O=ot(Pe,"usuarios",j.uid),[F,H]=await Promise.all([rs(M),rs(O)]);let K=null;if(F.exists())K=M;else if(H.exists())K=O;else{const I={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:X_(),displayName:j.displayName||"",email:j.email||"",createdAt:new Date};try{await Jn(M,I,{merge:!0})}catch(A){console.warn("No fue posible crear users/{uid} automáticamente:",A)}K=M}b=ar(K,R=>{if(R.exists()){const I=R.data()||{},A={uid:j.uid,...I,displayName:j.displayName||I.displayName||"",email:j.email||I.email||"",isAdmin:I.admin===!0,role:I.role||"buyer",isSeller:I.isSeller===!0||I.role==="seller",storeName:I.storeName||"",storeDescription:I.storeDescription||"",storeImage:I.storeImage||"",storePhone:I.storePhone||"",storeAddress:I.storeAddress||""};i(A)}else{const I={uid:j.uid,telefono:"",direccion:"",admin:!1,codigo:"",displayName:j.displayName||"",email:j.email||j.email,isAdmin:!1};i(I)}c(!1)},R=>{console.error("onSnapshot usuario error:",R),c(!1)})}catch(M){console.error("Error inicializando listener de usuario:",M);try{const O=ot(Pe,"users",j.uid),F=await rs(O),H=F.exists()?F.data():{},K={uid:j.uid,...H,displayName:j.displayName||H.displayName||"",email:j.email||H.email||"",isAdmin:H.admin===!0};i(K)}catch(O){console.error("Fallback read error:",O),i({uid:j.uid,displayName:j.displayName||"",email:j.email||"",telefono:"",direccion:"",isAdmin:!1,codigo:""})}finally{c(!1)}}});return()=>{try{N()}catch{}if(b)try{b()}catch{}}},[]);async function u(b,N,j){const M=await kR(Ko,b,N);await Ic(M.user,{displayName:j});const O=X_(),F={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:O,displayName:j,email:b,createdAt:new Date};await Jn(ot(Pe,"users",M.user.uid),F,{merge:!0}),n(Ko.currentUser),i({uid:M.user.uid,telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:O,displayName:j,email:b,isAdmin:!1})}function h(b,N){return SR(Ko,b,N)}function f(){return jR(Ko)}async function g(b){if(!e)throw new Error("No user logged in");const N=ot(Pe,"users",e.uid);try{await Jn(N,b,{merge:!0});const j=await rs(N),M=j.exists()?j.data():{},O={uid:e.uid,...M,displayName:e.displayName||M.displayName||"",email:e.email||M.email||"",isAdmin:M.admin===!0};if(i(O),b.displayName&&e.displayName!==b.displayName)try{await Ic(e,{displayName:b.displayName}),n(Ko.currentUser)}catch(F){console.warn("Error actualizando displayName en auth:",F)}return O}catch(j){throw console.error("actualizarUsuarioInfo error:",j),j}}async function y(b){if(!e)throw new Error("No user logged in");const N=es(ts,`usuarios/${e.uid}/perfil.jpg`);await zv(N,b);const j=await tl(N);await Ic(e,{photoURL:j}),n(Ko.currentUser);try{await Jn(ot(Pe,"users",e.uid),{fotoURL:j},{merge:!0}),i(M=>({...M,fotoURL:j}))}catch(M){console.warn("No se pudo persistir fotoURL en users/{uid}:",M)}return j}async function x(b){if(!e)throw new Error("No user logged in");const N=ot(Pe,"users",e.uid);try{const j={role:"seller",isSeller:!0,storeName:b.storeName||"",storeDescription:b.storeDescription||"",storeImage:b.storeImage||"",storePhone:b.storePhone||"",storeAddress:b.storeAddress||"",sellerActivatedAt:new Date};return await Jn(N,j,{merge:!0}),i(M=>({...M,...j})),!0}catch(j){throw console.error("Error al convertirse en vendedor:",j),j}}async function w(b){if(!e)throw new Error("No user logged in");if(!(r!=null&&r.isSeller))throw new Error("User is not a seller");const N=ot(Pe,"users",e.uid);try{return await Jn(N,b,{merge:!0}),i(j=>({...j,...b})),!0}catch(j){throw console.error("Error al actualizar tienda:",j),j}}const S={usuario:e,usuarioInfo:r,login:h,signup:u,logout:f,actualizarUsuarioInfo:g,subirImagen:y,convertirseEnVendedor:x,actualizarTienda:w};return o.jsx(jC.Provider,{value:S,children:!a&&t})}const PC=T.createContext(),Tm=()=>{const t=T.useContext(PC);if(!t)throw new Error("useTheme debe usarse dentro de ThemeProvider");return t},mL=({children:t})=>{const[e,n]=T.useState(()=>{try{return localStorage.getItem("pcu-theme")||"light"}catch{return"light"}});T.useEffect(()=>{const a=document.documentElement;e==="dark"?(a.classList.add("dark"),a.classList.add("dark-theme")):(a.classList.remove("dark"),a.classList.remove("dark-theme"));try{localStorage.setItem("pcu-theme",e)}catch(c){console.error("Error guardando tema:",c)}},[e]);const i={theme:e,toggleTheme:()=>{n(a=>a==="light"?"dark":"light")},isDark:e==="dark",isLight:e==="light"};return o.jsx(PC.Provider,{value:i,children:t})},gL=(t=!1)=>{const[e,n]=T.useState([]),[r,i]=T.useState(!0),[a,c]=T.useState(null);return T.useEffect(()=>{(async()=>{try{let h;return t?h=an(Ft(Pe,"productos"),zs("fechaCreacion","desc")):h=an(Ft(Pe,"productos"),xr("activo","==",!0),zs("fechaCreacion","desc")),ar(h,g=>{const y=g.docs.map(x=>({id:x.id,...x.data()}));n(y),i(!1)},g=>{console.error("Error fetching products:",g),c(g.message),i(!1)})}catch(h){console.error("Error setting up products listener:",h),c(h.message),i(!1)}})()},[t]),{products:e,loading:r,error:a}},RC=t=>{const[e,n]=T.useState([]),[r,i]=T.useState(!0),[a,c]=T.useState(null);return T.useEffect(()=>{(async()=>{try{let h;return!t||t===""||t==="todos"?h=an(Ft(Pe,"productos"),xr("activo","==",!0),zs("fechaCreacion","desc")):h=an(Ft(Pe,"productos"),xr("categoria","==",t),xr("activo","==",!0),zs("fechaCreacion","desc")),ar(h,g=>{const y=g.docs.map(x=>({id:x.id,...x.data()}));n(y),i(!1)},g=>{console.error("Error fetching products by category:",g),c(g.message),i(!1)})}catch(h){console.error("Error setting up products by category listener:",h),c(h.message),i(!1)}})()},[t]),{products:e,loading:r,error:a}},yL=t=>{const[e,n]=T.useState(null),[r,i]=T.useState(!0),[a,c]=T.useState(null);return T.useEffect(()=>{if(!t){n(null),i(!1);return}let u=null,h=null,f=!1;i(!0),c(null);const g=w=>(w||"").toLowerCase().replace(/[^a-z0-9]/g,""),y=w=>{try{const S=ot(Pe,"productos",w);return ar(S,b=>{b.exists()?(n({id:b.id,...b.data()}),c(null),i(!1)):(c("Producto no encontrado"),n(null),i(!1))},b=>{c((b==null?void 0:b.message)||"Error al cargar el producto"),i(!1)})}catch{return c("Error al suscribirse al producto"),i(!1),null}},x=async()=>{if(!f){f=!0;try{const w=an(Ft(Pe,"productos"),xr("slug","==",t),wm(1)),S=await Ir(w);if(!S.empty){const O=S.docs[0].id;h=y(O);return}const N=(await Ir(Ft(Pe,"productos"))).docs.map(O=>({id:O.id,...O.data()})),j=g(t),M=N.find(O=>g(O.slug||"")===j||g(O.nombre||"")===j||O.id===t);M?h=y(M.id):(c("Producto no encontrado"),n(null),i(!1))}catch{c("Error al cargar el producto"),n(null),i(!1)}}};try{const w=ot(Pe,"productos",t);u=ar(w,S=>{S.exists()?(n({id:S.id,...S.data()}),c(null),i(!1)):x()},S=>{x()})}catch{x()}return()=>{typeof u=="function"&&u(),typeof h=="function"&&h()}},[t]),{product:e,loading:r,error:a}},Hv=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),[i,a]=T.useState(null);return T.useEffect(()=>{(async()=>{try{const u=an(Ft(Pe,"categorias"),xr("activa","==",!0),zs("orden","asc"));return ar(u,f=>{const g=f.docs.map(y=>({id:y.id,...y.data()}));e(g),r(!1)},f=>{console.error("Error fetching categories:",f),a(f.message),r(!1)})}catch(u){console.error("Error setting up categories listener:",u),a(u.message),r(!1)}})()},[]),{categories:t,loading:n,error:i}},xL=()=>{const[t,e]=T.useState({}),[n,r]=T.useState([]),[i,a]=T.useState(!0),[c,u]=T.useState(null);return T.useEffect(()=>{let h=null,f=null,g=[],y=[],x=!1,w=!1;const S=()=>{if(!(!x||!w))try{const b={};g.forEach(N=>{b[N.id]=y.filter(j=>j.categoria===N.id)}),e(b),a(!1)}catch(b){console.error("Error grouping products by categories:",b),u(b.message||"Error agrupando productos"),a(!1)}};try{const b=an(Ft(Pe,"categorias"),xr("activa","==",!0),zs("orden","asc"));h=ar(b,j=>{g=j.docs.map(M=>({id:M.id,...M.data()})),r(g),x=!0,S()},j=>{console.error("Error fetching categories (rt):",j),u(j.message),a(!1)});const N=an(Ft(Pe,"productos"),xr("activo","==",!0),zs("fechaCreacion","desc"));f=ar(N,j=>{y=j.docs.map(M=>({id:M.id,...M.data()})),w=!0,S()},j=>{console.error("Error fetching products (rt):",j),u(j.message),a(!1)})}catch(b){console.error("Error setting up realtime listeners:",b),u(b.message),a(!1)}return()=>{typeof h=="function"&&h(),typeof f=="function"&&f()}},[]),{productsByCategory:t,categories:n,loading:i,error:c}},vL=(t,e="")=>{const[n,r]=T.useState([]),[i,a]=T.useState(!1),[c,u]=T.useState(null);return T.useEffect(()=>{if(!t||t.length<2){r([]);return}const f=setTimeout(async()=>{a(!0);try{let g=an(Ft(Pe,"productos"),xr("activo","==",!0));e&&(g=an(g,xr("categoria","==",e)));const x=(await Ir(g)).docs.map(b=>({id:b.id,...b.data()})),w=t.toLowerCase(),S=x.filter(b=>{var N,j,M,O;return((N=b.nombre)==null?void 0:N.toLowerCase().includes(w))||((j=b.descripcion)==null?void 0:j.toLowerCase().includes(w))||((M=b.empresa)==null?void 0:M.toLowerCase().includes(w))||((O=b.etiquetas)==null?void 0:O.some(F=>F.toLowerCase().includes(w)))});r(S)}catch(g){console.error("Error searching products:",g),u(g.message)}finally{a(!1)}},300);return()=>clearTimeout(f)},[t,e]),{results:n,loading:i,error:c}},Q_=T.forwardRef(({onClose:t,placeholder:e="Buscar en pcu.com.do"},n)=>{const[r,i]=T.useState(""),[a,c]=T.useState([]),[u,h]=T.useState(!1),f=T.useRef(null),g=ai(),{results:y,loading:x}=vL(r);T.useEffect(()=>{if(!r.trim()){c([]),h(!1);return}c(y),h(!0)},[r,y]),T.useEffect(()=>{const b=N=>{f.current&&!f.current.contains(N.target)&&h(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const w=b=>{b.preventDefault(),r.trim()&&(g(`/buscar?q=${encodeURIComponent(r.trim())}`),i(""),c([]),h(!1),t&&t())},S=b=>{const N=b.nombre.trim();g(`/buscar?q=${encodeURIComponent(N)}`),i(""),c([]),h(!1),t&&t()};return o.jsxs("div",{className:"relative w-full",ref:f,children:[o.jsxs("form",{onSubmit:w,className:"flex w-full",children:[o.jsx("input",{type:"text",ref:n,value:r,onChange:b=>i(b.target.value),placeholder:e,className:"flex-grow border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-md px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-300",autoComplete:"off"}),o.jsx("button",{type:"submit",className:"ml-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-md text-sm font-semibold transition",children:"Buscar"})]}),u&&o.jsxs("ul",{className:"absolute z-10 w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 mt-1 rounded-md shadow-md max-h-72 overflow-y-auto transition-colors duration-300",children:[x&&o.jsx("li",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"Buscando..."}),!x&&a.length===0&&o.jsx("li",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"Sin resultados"}),!x&&a.map(b=>o.jsxs("li",{onClick:()=>S(b),className:"px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition",title:`${b.nombre} ${b.empresa?"- "+b.empresa:""}`,children:[o.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:b.nombre}),b.empresa&&o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:b.empresa})]},b.id))]})]})}),Wv=T.createContext({});function qv(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gv=typeof window<"u",DC=Gv?T.useLayoutEffect:T.useEffect,Nm=T.createContext(null);function Kv(t,e){t.indexOf(e)===-1&&t.push(e)}function Xv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const _a=(t,e,n)=>n>e?e:n<t?t:n;let Qv=()=>{};const Ea={},MC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function OC(t){return typeof t=="object"&&t!==null}const LC=t=>/^0[^.\s]+$/u.test(t);function Yv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Li=t=>t,bL=(t,e)=>n=>e(t(n)),eh=(...t)=>t.reduce(bL),Sd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Jv{constructor(){this.subscriptions=[]}add(e){return Kv(this.subscriptions,e),()=>Xv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const c=this.subscriptions[a];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Os=t=>t*1e3,Ls=t=>t/1e3;function VC(t,e){return e?t*(1e3/e):0}const FC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,wL=1e-7,_L=12;function EL(t,e,n,r,i){let a,c,u=0;do c=e+(n-e)/2,a=FC(c,r,i)-t,a>0?n=c:e=c;while(Math.abs(a)>wL&&++u<_L);return c}function th(t,e,n,r){if(t===e&&n===r)return Li;const i=a=>EL(a,0,1,t,n);return a=>a===0||a===1?a:FC(i(a),e,r)}const UC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$C=t=>e=>1-t(1-e),zC=th(.33,1.53,.69,.99),Zv=$C(zC),BC=UC(Zv),HC=t=>(t*=2)<1?.5*Zv(t):.5*(2-Math.pow(2,-10*(t-1))),e1=t=>1-Math.sin(Math.acos(t)),WC=$C(e1),qC=UC(e1),kL=th(.42,0,1,1),SL=th(0,0,.58,1),GC=th(.42,0,.58,1),TL=t=>Array.isArray(t)&&typeof t[0]!="number",KC=t=>Array.isArray(t)&&typeof t[0]=="number",NL={linear:Li,easeIn:kL,easeInOut:GC,easeOut:SL,circIn:e1,circInOut:qC,circOut:WC,backIn:Zv,backInOut:BC,backOut:zC,anticipate:HC},CL=t=>typeof t=="string",Y_=t=>{if(KC(t)){Qv(t.length===4);const[e,n,r,i]=t;return th(e,n,r,i)}else if(CL(t))return NL[t];return t},wf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],J_={value:null};function AL(t,e){let n=new Set,r=new Set,i=!1,a=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},h=0;function f(y){c.has(y)&&(g.schedule(y),t()),h++,y(u)}const g={schedule:(y,x=!1,w=!1)=>{const b=w&&i?n:r;return x&&c.add(y),b.has(y)||b.add(y),y},cancel:y=>{r.delete(y),c.delete(y)},process:y=>{if(u=y,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(f),e&&J_.value&&J_.value.frameloop[e].push(h),h=0,n.clear(),i=!1,a&&(a=!1,g.process(y))}};return g}const jL=40;function XC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=wf.reduce((O,F)=>(O[F]=AL(a,e?F:void 0),O),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:g,update:y,preRender:x,render:w,postRender:S}=c,b=()=>{const O=Ea.useManualTiming?i.timestamp:performance.now();n=!1,Ea.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(O-i.timestamp,jL),1)),i.timestamp=O,i.isProcessing=!0,u.process(i),h.process(i),f.process(i),g.process(i),y.process(i),x.process(i),w.process(i),S.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},N=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:wf.reduce((O,F)=>{const H=c[F];return O[F]=(K,R=!1,I=!1)=>(n||N(),H.schedule(K,R,I)),O},{}),cancel:O=>{for(let F=0;F<wf.length;F++)c[wf[F]].cancel(O)},state:i,steps:c}}const{schedule:yn,cancel:xo,state:pr,steps:R0}=XC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Li,!0);let Xf;function IL(){Xf=void 0}const ri={now:()=>(Xf===void 0&&ri.set(pr.isProcessing||Ea.useManualTiming?pr.timestamp:performance.now()),Xf),set:t=>{Xf=t,queueMicrotask(IL)}},QC=t=>e=>typeof e=="string"&&e.startsWith(t),t1=QC("--"),PL=QC("var(--"),n1=t=>PL(t)?RL.test(t.split("/*")[0].trim()):!1,RL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Td={...tu,transform:t=>_a(0,1,t)},_f={...tu,default:1},sd=t=>Math.round(t*1e5)/1e5,r1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DL(t){return t==null}const ML=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,i1=(t,e)=>n=>!!(typeof n=="string"&&ML.test(n)&&n.startsWith(t)||e&&!DL(n)&&Object.prototype.hasOwnProperty.call(n,e)),YC=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,c,u]=r.match(r1);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},OL=t=>_a(0,255,t),D0={...tu,transform:t=>Math.round(OL(t))},nl={test:i1("rgb","red"),parse:YC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+D0.transform(t)+", "+D0.transform(e)+", "+D0.transform(n)+", "+sd(Td.transform(r))+")"};function LL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const $y={test:i1("#"),parse:LL,transform:nl.transform},nh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qa=nh("deg"),Vs=nh("%"),vt=nh("px"),VL=nh("vh"),FL=nh("vw"),Z_={...Vs,parse:t=>Vs.parse(t)/100,transform:t=>Vs.transform(t*100)},Ec={test:i1("hsl","hue"),parse:YC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Vs.transform(sd(e))+", "+Vs.transform(sd(n))+", "+sd(Td.transform(r))+")"},Hn={test:t=>nl.test(t)||$y.test(t)||Ec.test(t),parse:t=>nl.test(t)?nl.parse(t):Ec.test(t)?Ec.parse(t):$y.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?nl.transform(t):Ec.transform(t),getAnimatableNone:t=>{const e=Hn.parse(t);return e.alpha=0,Hn.transform(e)}},UL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $L(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(r1))==null?void 0:e.length)||0)+(((n=t.match(UL))==null?void 0:n.length)||0)>0}const JC="number",ZC="color",zL="var",BL="var(",eE="${}",HL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const u=e.replace(HL,h=>(Hn.test(h)?(r.color.push(a),i.push(ZC),n.push(Hn.parse(h))):h.startsWith(BL)?(r.var.push(a),i.push(zL),n.push(h)):(r.number.push(a),i.push(JC),n.push(parseFloat(h))),++a,eE)).split(eE);return{values:n,split:u,indexes:r,types:i}}function eA(t){return Nd(t).values}function tA(t){const{split:e,types:n}=Nd(t),r=e.length;return i=>{let a="";for(let c=0;c<r;c++)if(a+=e[c],i[c]!==void 0){const u=n[c];u===JC?a+=sd(i[c]):u===ZC?a+=Hn.transform(i[c]):a+=i[c]}return a}}const WL=t=>typeof t=="number"?0:Hn.test(t)?Hn.getAnimatableNone(t):t;function qL(t){const e=eA(t);return tA(t)(e.map(WL))}const vo={test:$L,parse:eA,createTransformer:tA,getAnimatableNone:qL};function M0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,c=0;if(!e)i=a=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;i=M0(h,u,t+1/3),a=M0(h,u,t),c=M0(h,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function Cp(t,e){return n=>n>0?e:t}const En=(t,e,n)=>t+(e-t)*n,O0=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},KL=[$y,nl,Ec],XL=t=>KL.find(e=>e.test(t));function tE(t){const e=XL(t);if(!e)return!1;let n=e.parse(t);return e===Ec&&(n=GL(n)),n}const nE=(t,e)=>{const n=tE(t),r=tE(e);if(!n||!r)return Cp(t,e);const i={...n};return a=>(i.red=O0(n.red,r.red,a),i.green=O0(n.green,r.green,a),i.blue=O0(n.blue,r.blue,a),i.alpha=En(n.alpha,r.alpha,a),nl.transform(i))},zy=new Set(["none","hidden"]);function QL(t,e){return zy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function YL(t,e){return n=>En(t,e,n)}function s1(t){return typeof t=="number"?YL:typeof t=="string"?n1(t)?Cp:Hn.test(t)?nE:e8:Array.isArray(t)?nA:typeof t=="object"?Hn.test(t)?nE:JL:Cp}function nA(t,e){const n=[...t],r=n.length,i=t.map((a,c)=>s1(a)(a,e[c]));return a=>{for(let c=0;c<r;c++)n[c]=i[c](a);return n}}function JL(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=s1(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function ZL(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],c=t.indexes[a][r[a]],u=t.values[c]??0;n[i]=u,r[a]++}return n}const e8=(t,e)=>{const n=vo.createTransformer(e),r=Nd(t),i=Nd(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?zy.has(t)&&!i.values.length||zy.has(e)&&!r.values.length?QL(t,e):eh(nA(ZL(r,i),i.values),n):Cp(t,e)};function rA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?En(t,e,n):s1(t)(t,e)}const t8=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>yn.update(e,n),stop:()=>xo(e),now:()=>pr.isProcessing?pr.timestamp:ri.now()}},iA=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ap=2e4;function a1(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Ap;)e+=n,r=t.next(e);return e>=Ap?1/0:e}function n8(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(a1(r),Ap);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Ls(i)}}const r8=5;function sA(t,e,n){const r=Math.max(e-r8,0);return VC(n-t(r),e-r)}const In={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},L0=.001;function i8({duration:t=In.duration,bounce:e=In.bounce,velocity:n=In.velocity,mass:r=In.mass}){let i,a,c=1-e;c=_a(In.minDamping,In.maxDamping,c),t=_a(In.minDuration,In.maxDuration,Ls(t)),c<1?(i=f=>{const g=f*c,y=g*t,x=g-n,w=By(f,c),S=Math.exp(-y);return L0-x/w*S},a=f=>{const y=f*c*t,x=y*n+n,w=Math.pow(c,2)*Math.pow(f,2)*t,S=Math.exp(-y),b=By(Math.pow(f,2),c);return(-i(f)+L0>0?-1:1)*((x-w)*S)/b}):(i=f=>{const g=Math.exp(-f*t),y=(f-n)*t+1;return-L0+g*y},a=f=>{const g=Math.exp(-f*t),y=(n-f)*(t*t);return g*y});const u=5/t,h=a8(i,a,u);if(t=Os(t),isNaN(h))return{stiffness:In.stiffness,damping:In.damping,duration:t};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:c*2*Math.sqrt(r*f),duration:t}}}const s8=12;function a8(t,e,n){let r=n;for(let i=1;i<s8;i++)r=r-t(r)/e(r);return r}function By(t,e){return t*Math.sqrt(1-e*e)}const o8=["duration","bounce"],l8=["stiffness","damping","mass"];function rE(t,e){return e.some(n=>t[n]!==void 0)}function c8(t){let e={velocity:In.velocity,stiffness:In.stiffness,damping:In.damping,mass:In.mass,isResolvedFromDuration:!1,...t};if(!rE(t,l8)&&rE(t,o8))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*_a(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:In.mass,stiffness:i,damping:a}}else{const n=i8(t);e={...e,...n,mass:In.mass},e.isResolvedFromDuration=!0}return e}function jp(t=In.visualDuration,e=In.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:h,damping:f,mass:g,duration:y,velocity:x,isResolvedFromDuration:w}=c8({...n,velocity:-Ls(n.velocity||0)}),S=x||0,b=f/(2*Math.sqrt(h*g)),N=c-a,j=Ls(Math.sqrt(h/g)),M=Math.abs(N)<5;r||(r=M?In.restSpeed.granular:In.restSpeed.default),i||(i=M?In.restDelta.granular:In.restDelta.default);let O;if(b<1){const H=By(j,b);O=K=>{const R=Math.exp(-b*j*K);return c-R*((S+b*j*N)/H*Math.sin(H*K)+N*Math.cos(H*K))}}else if(b===1)O=H=>c-Math.exp(-j*H)*(N+(S+j*N)*H);else{const H=j*Math.sqrt(b*b-1);O=K=>{const R=Math.exp(-b*j*K),I=Math.min(H*K,300);return c-R*((S+b*j*N)*Math.sinh(I)+H*N*Math.cosh(I))/H}}const F={calculatedDuration:w&&y||null,next:H=>{const K=O(H);if(w)u.done=H>=y;else{let R=H===0?S:0;b<1&&(R=H===0?Os(S):sA(O,H,K));const I=Math.abs(R)<=r,A=Math.abs(c-K)<=i;u.done=I&&A}return u.value=u.done?c:K,u},toString:()=>{const H=Math.min(a1(F),Ap),K=iA(R=>F.next(H*R).value,H,30);return H+"ms "+K},toTransition:()=>{}};return F}jp.applyToOptions=t=>{const e=n8(t,100,jp);return t.ease=e.ease,t.duration=Os(e.duration),t.type="keyframes",t};function Hy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:c,min:u,max:h,restDelta:f=.5,restSpeed:g}){const y=t[0],x={done:!1,value:y},w=I=>u!==void 0&&I<u||h!==void 0&&I>h,S=I=>u===void 0?h:h===void 0||Math.abs(u-I)<Math.abs(h-I)?u:h;let b=n*e;const N=y+b,j=c===void 0?N:c(N);j!==N&&(b=j-y);const M=I=>-b*Math.exp(-I/r),O=I=>j+M(I),F=I=>{const A=M(I),k=O(I);x.done=Math.abs(A)<=f,x.value=x.done?j:k};let H,K;const R=I=>{w(x.value)&&(H=I,K=jp({keyframes:[x.value,S(x.value)],velocity:sA(O,I,x.value),damping:i,stiffness:a,restDelta:f,restSpeed:g}))};return R(0),{calculatedDuration:null,next:I=>{let A=!1;return!K&&H===void 0&&(A=!0,F(I),R(I)),H!==void 0&&I>=H?K.next(I-H):(!A&&F(I),x)}}}function u8(t,e,n){const r=[],i=n||Ea.mix||rA,a=t.length-1;for(let c=0;c<a;c++){let u=i(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||Li:e;u=eh(h,u)}r.push(u)}return r}function d8(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(Qv(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=u8(e,r,i),h=u.length,f=g=>{if(c&&g<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const x=Sd(t[y],t[y+1],g);return u[y](x)};return n?g=>f(_a(t[0],t[a-1],g)):f}function h8(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Sd(0,e,r);t.push(En(n,1,i))}}function f8(t){const e=[0];return h8(e,t.length-1),e}function p8(t,e){return t.map(n=>n*e)}function m8(t,e){return t.map(()=>e||GC).splice(0,t.length-1)}function ad({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=TL(r)?r.map(Y_):Y_(r),a={done:!1,value:e[0]},c=p8(n&&n.length===e.length?n:f8(e),t),u=d8(c,e,{ease:Array.isArray(i)?i:m8(e,i)});return{calculatedDuration:t,next:h=>(a.value=u(h),a.done=h>=t,a)}}const g8=t=>t!==null;function o1(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(g8),u=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const y8={decay:Hy,inertia:Hy,tween:ad,keyframes:ad,spring:jp};function aA(t){typeof t.type=="string"&&(t.type=y8[t.type])}class l1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const x8=t=>t/100;class c1 extends l1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==ri.now()&&this.tick(ri.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;aA(e);const{type:n=ad,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:c=0}=e;let{keyframes:u}=e;const h=n||ad;h!==ad&&typeof u[0]!="number"&&(this.mixKeyframes=eh(x8,rA(u[0],u[1])),u=[0,100]);const f=h({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=a1(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:w,type:S,onUpdate:b,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?j<0:j>i;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let O=this.currentTime,F=r;if(y){const I=Math.min(this.currentTime,i)/u;let A=Math.floor(I),k=I%1;!k&&I>=1&&(k=1),k===1&&A--,A=Math.min(A,y+1),!!(A%2)&&(x==="reverse"?(k=1-k,w&&(k-=w/u)):x==="mirror"&&(F=c)),O=_a(0,1,k)*u}const H=M?{done:!1,value:g[0]}:F.next(O);a&&(H.value=a(H.value));let{done:K}=H;!M&&h!==null&&(K=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return R&&S!==Hy&&(H.value=o1(g,this.options,N,this.speed)),b&&b(H.value),R&&this.finish(),H}then(e,n){return this.finished.then(e,n)}get duration(){return Ls(this.calculatedDuration)}get time(){return Ls(this.currentTime)}set time(e){var n;e=Os(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ri.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ls(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=t8,startTime:n}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ri.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function v8(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const rl=t=>t*180/Math.PI,Wy=t=>{const e=rl(Math.atan2(t[1],t[0]));return qy(e)},b8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Wy,rotateZ:Wy,skewX:t=>rl(Math.atan(t[1])),skewY:t=>rl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},qy=t=>(t=t%360,t<0&&(t+=360),t),iE=Wy,sE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),aE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),w8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sE,scaleY:aE,scale:t=>(sE(t)+aE(t))/2,rotateX:t=>qy(rl(Math.atan2(t[6],t[5]))),rotateY:t=>qy(rl(Math.atan2(-t[2],t[0]))),rotateZ:iE,rotate:iE,skewX:t=>rl(Math.atan(t[4])),skewY:t=>rl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Gy(t){return t.includes("scale")?1:0}function Ky(t,e){if(!t||t==="none")return Gy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=w8,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=b8,i=u}if(!i)return Gy(e);const a=r[e],c=i[1].split(",").map(E8);return typeof a=="function"?a(c):c[a]}const _8=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ky(n,e)};function E8(t){return parseFloat(t.trim())}const nu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ru=new Set(nu),oE=t=>t===tu||t===vt,k8=new Set(["x","y","z"]),S8=nu.filter(t=>!k8.has(t));function T8(t){const e=[];return S8.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const cl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ky(e,"x"),y:(t,{transform:e})=>Ky(e,"y")};cl.translateX=cl.x;cl.translateY=cl.y;const ul=new Set;let Xy=!1,Qy=!1,Yy=!1;function oA(){if(Qy){const t=Array.from(ul).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=T8(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,c])=>{var u;(u=r.getValue(a))==null||u.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Qy=!1,Xy=!1,ul.forEach(t=>t.complete(Yy)),ul.clear()}function lA(){ul.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Qy=!0)})}function N8(){Yy=!0,lA(),oA(),Yy=!1}class u1{constructor(e,n,r,i,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(ul.add(this),Xy||(Xy=!0,yn.read(lA),yn.resolveKeyframes(oA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&a===void 0&&i.set(e[0])}v8(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ul.delete(this)}cancel(){this.state==="scheduled"&&(ul.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const C8=t=>t.startsWith("--");function A8(t,e,n){C8(e)?t.style.setProperty(e,n):t.style[e]=n}const j8=Yv(()=>window.ScrollTimeline!==void 0),I8={};function P8(t,e){const n=Yv(t);return()=>I8[e]??n()}const cA=P8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,lE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xu([0,.65,.55,1]),circOut:Xu([.55,0,1,.45]),backIn:Xu([.31,.01,.66,-.59]),backOut:Xu([.33,1.53,.69,.99])};function uA(t,e){if(t)return typeof t=="function"?cA()?iA(t,e):"ease-out":KC(t)?Xu(t):Array.isArray(t)?t.map(n=>uA(n,e)||lE.easeOut):lE[t]}function R8(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:c="loop",ease:u="easeOut",times:h}={},f=void 0){const g={[e]:n};h&&(g.offset=h);const y=uA(u,i);Array.isArray(y)&&(g.easing=y);const x={delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),t.animate(g,x)}function dA(t){return typeof t=="function"&&"applyToOptions"in t}function D8({type:t,...e}){return dA(t)&&cA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class M8 extends l1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,Qv(typeof e.type!="string");const f=D8(e);this.animation=R8(n,r,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=o1(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):A8(n,r,g),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ls(Number(e))}get time(){return Ls(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Os(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&j8()?(this.animation.timeline=e,Li):n(this)}}const hA={anticipate:HC,backInOut:BC,circInOut:qC};function O8(t){return t in hA}function L8(t){typeof t.ease=="string"&&O8(t.ease)&&(t.ease=hA[t.ease])}const cE=10;class V8 extends M8{constructor(e){L8(e),aA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new c1({...c,autoplay:!1}),h=Os(this.finishedTime??this.time);n.setWithVelocity(u.sample(h-cE).value,u.sample(h).value,cE),u.stop()}}const uE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vo.test(t)||t==="0")&&!t.startsWith("url("));function F8(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function U8(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=uE(i,e),u=uE(a,e);return!c||!u?!1:F8(t)||(n==="spring"||dA(n))&&r}function d1(t){return OC(t)&&"offsetHeight"in t}const $8=new Set(["opacity","clipPath","filter","transform"]),z8=Yv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function B8(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:c}=t;if(!d1((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return z8()&&n&&$8.has(n)&&(n!=="transform"||!h)&&!u&&!r&&i!=="mirror"&&a!==0&&c!=="inertia"}const H8=40;class W8 extends l1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:c="loop",keyframes:u,name:h,motionValue:f,element:g,...y}){var S;super(),this.stop=()=>{var b,N;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=ri.now();const x={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:c,name:h,motionValue:f,element:g,...y},w=(g==null?void 0:g.KeyframeResolver)||u1;this.keyframeResolver=new w(u,(b,N,j)=>this.onKeyframesResolved(b,N,x,!j),h,f,g),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:c,velocity:u,delay:h,isHandoff:f,onUpdate:g}=r;this.resolvedAt=ri.now(),U8(e,a,c,u)||((Ea.instantAnimations||!h)&&(g==null||g(o1(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>H8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!f&&B8(x)?new V8({...x,element:x.motionValue.owner.current}):new c1(x);w.finished.then(()=>this.notifyFinished()).catch(Li),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),N8()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const q8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function G8(t){const e=q8.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function fA(t,e,n=1){const[r,i]=G8(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return MC(c)?parseFloat(c):c}return n1(i)?fA(i,e,n+1):i}function h1(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const pA=new Set(["width","height","top","left","right","bottom",...nu]),K8={test:t=>t==="auto",parse:t=>t},mA=t=>e=>e.test(t),gA=[tu,vt,Vs,Qa,FL,VL,K8],dE=t=>gA.find(mA(t));function X8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LC(t):!0}const Q8=new Set(["brightness","contrast","saturate","opacity"]);function Y8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(r1)||[];if(!r)return t;const i=n.replace(r,"");let a=Q8.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const J8=/\b([a-z-]*)\(.*?\)/gu,Jy={...vo,getAnimatableNone:t=>{const e=t.match(J8);return e?e.map(Y8).join(" "):t}},hE={...tu,transform:Math.round},Z8={rotate:Qa,rotateX:Qa,rotateY:Qa,rotateZ:Qa,scale:_f,scaleX:_f,scaleY:_f,scaleZ:_f,skew:Qa,skewX:Qa,skewY:Qa,distance:vt,translateX:vt,translateY:vt,translateZ:vt,x:vt,y:vt,z:vt,perspective:vt,transformPerspective:vt,opacity:Td,originX:Z_,originY:Z_,originZ:vt},f1={borderWidth:vt,borderTopWidth:vt,borderRightWidth:vt,borderBottomWidth:vt,borderLeftWidth:vt,borderRadius:vt,radius:vt,borderTopLeftRadius:vt,borderTopRightRadius:vt,borderBottomRightRadius:vt,borderBottomLeftRadius:vt,width:vt,maxWidth:vt,height:vt,maxHeight:vt,top:vt,right:vt,bottom:vt,left:vt,padding:vt,paddingTop:vt,paddingRight:vt,paddingBottom:vt,paddingLeft:vt,margin:vt,marginTop:vt,marginRight:vt,marginBottom:vt,marginLeft:vt,backgroundPositionX:vt,backgroundPositionY:vt,...Z8,zIndex:hE,fillOpacity:Td,strokeOpacity:Td,numOctaves:hE},eV={...f1,color:Hn,backgroundColor:Hn,outlineColor:Hn,fill:Hn,stroke:Hn,borderColor:Hn,borderTopColor:Hn,borderRightColor:Hn,borderBottomColor:Hn,borderLeftColor:Hn,filter:Jy,WebkitFilter:Jy},yA=t=>eV[t];function xA(t,e){let n=yA(t);return n!==Jy&&(n=vo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const tV=new Set(["auto","none","0"]);function nV(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!tV.has(a)&&Nd(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=xA(n,i)}class rV extends u1{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),n1(f))){const g=fA(f,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!pA.has(r)||e.length!==2)return;const[i,a]=e,c=dE(i),u=dE(a);if(c!==u)if(oE(c)&&oE(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else cl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||X8(e[i]))&&r.push(i);r.length&&nV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=cl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=cl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function iV(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const vA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,fE=30,sV=t=>!isNaN(parseFloat(t));class aV{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var c,u;const a=ri.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty();i&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ri.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=sV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Jv);const r=this.events[e].add(n);return e==="change"?()=>{r(),yn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ri.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,fE);return VC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $c(t,e){return new aV(t,e)}const{schedule:p1}=XC(queueMicrotask,!1),Zi={x:!1,y:!1};function bA(){return Zi.x||Zi.y}function oV(t){return t==="x"||t==="y"?Zi[t]?null:(Zi[t]=!0,()=>{Zi[t]=!1}):Zi.x||Zi.y?null:(Zi.x=Zi.y=!0,()=>{Zi.x=Zi.y=!1})}function wA(t,e){const n=iV(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function pE(t){return!(t.pointerType==="touch"||bA())}function lV(t,e,n={}){const[r,i,a]=wA(t,n),c=u=>{if(!pE(u))return;const{target:h}=u,f=e(h,u);if(typeof f!="function"||!h)return;const g=y=>{pE(y)&&(f(y),h.removeEventListener("pointerleave",g))};h.addEventListener("pointerleave",g,i)};return r.forEach(u=>{u.addEventListener("pointerenter",c,i)}),a}const _A=(t,e)=>e?t===e?!0:_A(t,e.parentElement):!1,m1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,cV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function uV(t){return cV.has(t.tagName)||t.tabIndex!==-1}const Qf=new WeakSet;function mE(t){return e=>{e.key==="Enter"&&t(e)}}function V0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mE(()=>{if(Qf.has(n))return;V0(n,"down");const i=mE(()=>{V0(n,"up")}),a=()=>V0(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function gE(t){return m1(t)&&!bA()}function hV(t,e,n={}){const[r,i,a]=wA(t,n),c=u=>{const h=u.currentTarget;if(!gE(u))return;Qf.add(h);const f=e(h,u),g=(w,S)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),Qf.has(h)&&Qf.delete(h),gE(w)&&typeof f=="function"&&f(w,{success:S})},y=w=>{g(w,h===window||h===document||n.useGlobalTarget||_A(h,w.target))},x=w=>{g(w,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",x,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),d1(u)&&(u.addEventListener("focus",f=>dV(f,i)),!uV(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function EA(t){return OC(t)&&"ownerSVGElement"in t}function fV(t){return EA(t)&&t.tagName==="svg"}const Pr=t=>!!(t&&t.getVelocity),pV=[...gA,Hn,vo],mV=t=>pV.find(mA(t)),g1=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class gV extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=d1(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function yV({children:t,isPresent:e,anchorX:n,root:r}){const i=T.useId(),a=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=T.useContext(g1);return T.useInsertionEffect(()=>{const{width:h,height:f,top:g,left:y,right:x}=c.current;if(e||!a.current||!h||!f)return;const w=n==="left"?`left: ${y}`:`right: ${x}`;a.current.dataset.motionPopId=i;const S=document.createElement("style");u&&(S.nonce=u);const b=r??document.head;return b.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${g}px !important;
          }
        `),()=>{b.removeChild(S),b.contains(S)&&b.removeChild(S)}},[e]),o.jsx(gV,{isPresent:e,childRef:a,sizeRef:c,children:T.cloneElement(t,{ref:a})})}const xV=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:c,anchorX:u,root:h})=>{const f=qv(vV),g=T.useId();let y=!0,x=T.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:n,custom:i,onExitComplete:w=>{f.set(w,!0);for(const S of f.values())if(!S)return;r&&r()},register:w=>(f.set(w,!1),()=>f.delete(w))}),[n,f,r]);return a&&y&&(x={...x}),T.useMemo(()=>{f.forEach((w,S)=>f.set(S,!1))},[n]),T.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=o.jsx(yV,{isPresent:n,anchorX:u,root:h,children:t})),o.jsx(Nm.Provider,{value:x,children:t})};function vV(){return new Map}function kA(t=!0){const e=T.useContext(Nm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=T.useId();T.useEffect(()=>{if(t)return i(a)},[t]);const c=T.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,c]:[!0]}const Ef=t=>t.key||"";function yE(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const dn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:c=!1,anchorX:u="left",root:h})=>{const[f,g]=kA(c),y=T.useMemo(()=>yE(t),[t]),x=c&&!f?[]:y.map(Ef),w=T.useRef(!0),S=T.useRef(y),b=qv(()=>new Map),[N,j]=T.useState(y),[M,O]=T.useState(y);DC(()=>{w.current=!1,S.current=y;for(let K=0;K<M.length;K++){const R=Ef(M[K]);x.includes(R)?b.delete(R):b.get(R)!==!0&&b.set(R,!1)}},[M,x.length,x.join("-")]);const F=[];if(y!==N){let K=[...y];for(let R=0;R<M.length;R++){const I=M[R],A=Ef(I);x.includes(A)||(K.splice(R,0,I),F.push(I))}return a==="wait"&&F.length&&(K=F),O(yE(K)),j(y),null}const{forceRender:H}=T.useContext(Wv);return o.jsx(o.Fragment,{children:M.map(K=>{const R=Ef(K),I=c&&!f?!1:y===M||x.includes(R),A=()=>{if(b.has(R))b.set(R,!0);else return;let k=!0;b.forEach(V=>{V||(k=!1)}),k&&(H==null||H(),O(S.current),c&&(g==null||g()),r&&r())};return o.jsx(xV,{isPresent:I,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:h,onExitComplete:I?void 0:A,anchorX:u,children:K},R)})})},SA=T.createContext({strict:!1}),xE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zc={};for(const t in xE)zc[t]={isEnabled:e=>xE[t].some(n=>!!e[n])};function bV(t){for(const e in t)zc[e]={...zc[e],...t[e]}}const wV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ip(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wV.has(t)}let TA=t=>!Ip(t);function _V(t){typeof t=="function"&&(TA=e=>e.startsWith("on")?!Ip(e):t(e))}try{_V(require("@emotion/is-prop-valid").default)}catch{}function EV(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(TA(i)||n===!0&&Ip(i)||!e&&!Ip(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function kV(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Cm=T.createContext({});function Am(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Cd(t){return typeof t=="string"||Array.isArray(t)}const y1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x1=["initial",...y1];function jm(t){return Am(t.animate)||x1.some(e=>Cd(t[e]))}function NA(t){return!!(jm(t)||t.variants)}function SV(t,e){if(jm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cd(n)?n:void 0,animate:Cd(r)?r:void 0}}return t.inherit!==!1?e:{}}function TV(t){const{initial:e,animate:n}=SV(t,T.useContext(Cm));return T.useMemo(()=>({initial:e,animate:n}),[vE(e),vE(n)])}function vE(t){return Array.isArray(t)?t.join(" "):t}const NV=Symbol.for("motionComponentSymbol");function kc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function CV(t,e,n){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):kc(n)&&(n.current=r))},[e])}const v1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),AV="framerAppearId",CA="data-"+v1(AV),AA=T.createContext({});function jV(t,e,n,r,i){var b,N;const{visualElement:a}=T.useContext(Cm),c=T.useContext(SA),u=T.useContext(Nm),h=T.useContext(g1).reducedMotion,f=T.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,y=T.useContext(AA);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&IV(f.current,n,i,y);const x=T.useRef(!1);T.useInsertionEffect(()=>{g&&x.current&&g.update(n,u)});const w=n[CA],S=T.useRef(!!w&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,w))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,w)));return DC(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),p1.render(g.render),S.current&&g.animationState&&g.animationState.animateChanges())}),T.useEffect(()=>{g&&(!S.current&&g.animationState&&g.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,w)}),S.current=!1))}),g}function IV(t,e,n,r){const{layoutId:i,layout:a,drag:c,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:jA(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!c||u&&kc(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:h,layoutRoot:f})}function jA(t){if(t)return t.options.allowProjection!==!1?t.projection:jA(t.parent)}function PV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&bV(t);function a(u,h){let f;const g={...T.useContext(g1),...u,layoutId:RV(u)},{isStatic:y}=g,x=TV(u),w=r(u,y);if(!y&&Gv){DV();const S=MV(g);f=S.MeasureLayout,x.visualElement=jV(i,w,g,e,S.ProjectionNode)}return o.jsxs(Cm.Provider,{value:x,children:[f&&x.visualElement?o.jsx(f,{visualElement:x.visualElement,...g}):null,n(i,u,CV(w,x.visualElement,h),w,y,x.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const c=T.forwardRef(a);return c[NV]=i,c}function RV({layoutId:t}){const e=T.useContext(Wv).id;return e&&t!==void 0?e+"-"+t:t}function DV(t,e){T.useContext(SA).strict}function MV(t){const{drag:e,layout:n}=zc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Ad={};function OV(t){for(const e in t)Ad[e]=t[e],t1(e)&&(Ad[e].isCSSVariable=!0)}function IA(t,{layout:e,layoutId:n}){return ru.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ad[t]||t==="opacity")}const LV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},VV=nu.length;function FV(t,e,n){let r="",i=!0;for(let a=0;a<VV;a++){const c=nu[a],u=t[c];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(c.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const f=vA(u,f1[c]);if(!h){i=!1;const g=LV[c]||c;r+=`${g}(${f}) `}n&&(e[c]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function b1(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let c=!1,u=!1;for(const h in e){const f=e[h];if(ru.has(h)){c=!0;continue}else if(t1(h)){i[h]=f;continue}else{const g=vA(f,f1[h]);h.startsWith("origin")?(u=!0,a[h]=g):r[h]=g}}if(e.transform||(c||n?r.transform=FV(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:g=0}=a;r.transformOrigin=`${h} ${f} ${g}`}}const w1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function PA(t,e,n){for(const r in e)!Pr(e[r])&&!IA(r,n)&&(t[r]=e[r])}function UV({transformTemplate:t},e){return T.useMemo(()=>{const n=w1();return b1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function $V(t,e){const n=t.style||{},r={};return PA(r,n,t),Object.assign(r,UV(t,e)),r}function zV(t,e){const n={},r=$V(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const BV={offset:"stroke-dashoffset",array:"stroke-dasharray"},HV={offset:"strokeDashoffset",array:"strokeDasharray"};function WV(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?BV:HV;t[a.offset]=vt.transform(-r);const c=vt.transform(e),u=vt.transform(n);t[a.array]=`${c} ${u}`}function RA(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:c=0,...u},h,f,g){if(b1(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x}=t;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),i!==void 0&&WV(y,i,a,c,!1)}const DA=()=>({...w1(),attrs:{}}),MA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function qV(t,e,n,r){const i=T.useMemo(()=>{const a=DA();return RA(a,e,MA(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};PA(a,t.style,t),i.style={...a,...i.style}}return i}const GV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _1(t){return typeof t!="string"||t.includes("-")?!1:!!(GV.indexOf(t)>-1||/[A-Z]/u.test(t))}function KV(t=!1){return(n,r,i,{latestValues:a},c)=>{const h=(_1(n)?qV:zV)(r,a,c,n),f=EV(r,typeof n=="string",t),g=n!==T.Fragment?{...f,...h,ref:i}:{},{children:y}=r,x=T.useMemo(()=>Pr(y)?y.get():y,[y]);return T.createElement(n,{...g,children:x})}}function bE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function E1(t,e,n,r){if(typeof e=="function"){const[i,a]=bE(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=bE(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Yf(t){return Pr(t)?t.get():t}function XV({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:QV(n,r,i,t),renderState:e()}}const OA=t=>(e,n)=>{const r=T.useContext(Cm),i=T.useContext(Nm),a=()=>XV(t,e,r,i);return n?a():qv(a)};function QV(t,e,n,r){const i={},a=r(t,{});for(const x in a)i[x]=Yf(a[x]);let{initial:c,animate:u}=t;const h=jm(t),f=NA(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||c===!1;const y=g?u:c;if(y&&typeof y!="boolean"&&!Am(y)){const x=Array.isArray(y)?y:[y];for(let w=0;w<x.length;w++){const S=E1(t,x[w]);if(S){const{transitionEnd:b,transition:N,...j}=S;for(const M in j){let O=j[M];if(Array.isArray(O)){const F=g?O.length-1:0;O=O[F]}O!==null&&(i[M]=O)}for(const M in b)i[M]=b[M]}}}return i}function k1(t,e,n){var a;const{style:r}=t,i={};for(const c in r)(Pr(r[c])||e.style&&Pr(e.style[c])||IA(c,t)||((a=n==null?void 0:n.getValue(c))==null?void 0:a.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const YV={useVisualState:OA({scrapeMotionValuesFromProps:k1,createRenderState:w1})};function LA(t,e,n){const r=k1(t,e,n);for(const i in t)if(Pr(t[i])||Pr(e[i])){const a=nu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const JV={useVisualState:OA({scrapeMotionValuesFromProps:LA,createRenderState:DA})};function ZV(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const c={..._1(r)?JV:YV,preloadedFeatures:t,useRender:KV(i),createVisualElement:e,Component:r};return PV(c)}}function jd(t,e,n){const r=t.getProps();return E1(r,e,n!==void 0?n:r.custom,t)}const Zy=t=>Array.isArray(t);function e7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$c(n))}function t7(t){return Zy(t)?t[t.length-1]||0:t}function n7(t,e){const n=jd(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const c in a){const u=t7(a[c]);e7(t,c,u)}}function r7(t){return!!(Pr(t)&&t.add)}function ex(t,e){const n=t.getValue("willChange");if(r7(n))return n.add(e);if(!n&&Ea.WillChange){const r=new Ea.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function VA(t){return t.props[CA]}const i7=t=>t!==null;function s7(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(i7),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const a7={type:"spring",stiffness:500,damping:25,restSpeed:10},o7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),l7={type:"keyframes",duration:.8},c7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u7=(t,{keyframes:e})=>e.length>2?l7:ru.has(t)?t.startsWith("scale")?o7(e[1]):a7:c7;function d7({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:c,repeatDelay:u,from:h,elapsed:f,...g}){return!!Object.keys(g).length}const S1=(t,e,n,r={},i,a)=>c=>{const u=h1(r,t)||{},h=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Os(h);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:i};d7(u)||Object.assign(g,u7(t,g)),g.duration&&(g.duration=Os(g.duration)),g.repeatDelay&&(g.repeatDelay=Os(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),(Ea.instantAnimations||Ea.skipAnimations)&&(y=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!a&&e.get()!==void 0){const x=s7(g.keyframes,u);if(x!==void 0){yn.update(()=>{g.onUpdate(x),g.onComplete()});return}}return u.isSync?new c1(g):new W8(g)};function h7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function FA(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(a=r);const h=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const y=t.getValue(g,t.latestValues[g]??null),x=u[g];if(x===void 0||f&&h7(f,g))continue;const w={delay:n,...h1(a||{},g)},S=y.get();if(S!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===S&&!w.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const j=VA(t);if(j){const M=window.MotionHandoffAnimation(j,g,yn);M!==null&&(w.startTime=M,b=!0)}}ex(t,g),y.start(S1(g,y,x,t.shouldReduceMotion&&pA.has(g)?{type:!1}:w,t,b));const N=y.animation;N&&h.push(N)}return c&&Promise.all(h).then(()=>{yn.update(()=>{c&&n7(t,c)})}),h}function tx(t,e,n={}){var h;const r=jd(t,e,n.type==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(FA(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=i;return f7(t,e,f,g,y,x,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,g]=u==="beforeChildren"?[a,c]:[c,a];return f().then(()=>g())}else return Promise.all([a(),c(n.delay)])}function f7(t,e,n=0,r=0,i=0,a=1,c){const u=[],h=t.variantChildren.size,f=(h-1)*i,g=typeof r=="function",y=g?x=>r(x,h):a===1?(x=0)=>x*i:(x=0)=>f-x*i;return Array.from(t.variantChildren).sort(p7).forEach((x,w)=>{x.notify("AnimationStart",e),u.push(tx(x,e,{...c,delay:n+(g?0:r)+y(w)}).then(()=>x.notify("AnimationComplete",e)))}),Promise.all(u)}function p7(t,e){return t.sortNodePosition(e)}function m7(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>tx(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=tx(t,e,n);else{const i=typeof e=="function"?jd(t,e,n.custom):e;r=Promise.all(FA(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function UA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const g7=x1.length;function $A(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$A(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<g7;n++){const r=x1[n],i=t.props[r];(Cd(i)||i===!1)&&(e[r]=i)}return e}const y7=[...y1].reverse(),x7=y1.length;function v7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>m7(t,n,r)))}function b7(t){let e=v7(t),n=wE(),r=!0;const i=h=>(f,g)=>{var x;const y=jd(t,g,h==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:w,transitionEnd:S,...b}=y;f={...f,...b,...S}}return f};function a(h){e=h(t)}function c(h){const{props:f}=t,g=$A(t.parent)||{},y=[],x=new Set;let w={},S=1/0;for(let N=0;N<x7;N++){const j=y7[N],M=n[j],O=f[j]!==void 0?f[j]:g[j],F=Cd(O),H=j===h?M.isActive:null;H===!1&&(S=N);let K=O===g[j]&&O!==f[j]&&F;if(K&&r&&t.manuallyAnimateOnMount&&(K=!1),M.protectedKeys={...w},!M.isActive&&H===null||!O&&!M.prevProp||Am(O)||typeof O=="boolean")continue;const R=w7(M.prevProp,O);let I=R||j===h&&M.isActive&&!K&&F||N>S&&F,A=!1;const k=Array.isArray(O)?O:[O];let V=k.reduce(i(j),{});H===!1&&(V={});const{prevResolvedValues:U={}}=M,D={...U,...V},xe=qe=>{I=!0,x.has(qe)&&(A=!0,x.delete(qe)),M.needsAnimating[qe]=!0;const ce=t.getValue(qe);ce&&(ce.liveStyle=!1)};for(const qe in D){const ce=V[qe],ue=U[qe];if(w.hasOwnProperty(qe))continue;let de=!1;Zy(ce)&&Zy(ue)?de=!UA(ce,ue):de=ce!==ue,de?ce!=null?xe(qe):x.add(qe):ce!==void 0&&x.has(qe)?xe(qe):M.protectedKeys[qe]=!0}M.prevProp=O,M.prevResolvedValues=V,M.isActive&&(w={...w,...V}),r&&t.blockInitialAnimation&&(I=!1),I&&(!(K&&R)||A)&&y.push(...k.map(qe=>({animation:qe,options:{type:j}})))}if(x.size){const N={};if(typeof f.initial!="boolean"){const j=jd(t,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(N.transition=j.transition)}x.forEach(j=>{const M=t.getBaseTarget(j),O=t.getValue(j);O&&(O.liveStyle=!0),N[j]=M??null}),y.push({animation:N})}let b=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(y):Promise.resolve()}function u(h,f){var y;if(n[h].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(x=>{var w;return(w=x.animationState)==null?void 0:w.setActive(h,f)}),n[h].isActive=f;const g=c(h);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:c,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=wE(),r=!0}}}function w7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!UA(e,t):!1}function Xo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wE(){return{animate:Xo(!0),whileInView:Xo(),whileHover:Xo(),whileTap:Xo(),whileDrag:Xo(),whileFocus:Xo(),exit:Xo()}}class No{constructor(e){this.isMounted=!1,this.node=e}update(){}}class _7 extends No{constructor(e){super(e),e.animationState||(e.animationState=b7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Am(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let E7=0;class k7 extends No{constructor(){super(...arguments),this.id=E7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const S7={animation:{Feature:_7},exit:{Feature:k7}};function Id(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function rh(t){return{point:{x:t.pageX,y:t.pageY}}}const T7=t=>e=>m1(e)&&t(e,rh(e));function od(t,e,n,r){return Id(t,e,T7(n),r)}function zA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function N7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function C7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const BA=1e-4,A7=1-BA,j7=1+BA,HA=.01,I7=0-HA,P7=0+HA;function $r(t){return t.max-t.min}function R7(t,e,n){return Math.abs(t-e)<=n}function _E(t,e,n,r=.5){t.origin=r,t.originPoint=En(e.min,e.max,t.origin),t.scale=$r(n)/$r(e),t.translate=En(n.min,n.max,t.origin)-t.originPoint,(t.scale>=A7&&t.scale<=j7||isNaN(t.scale))&&(t.scale=1),(t.translate>=I7&&t.translate<=P7||isNaN(t.translate))&&(t.translate=0)}function ld(t,e,n,r){_E(t.x,e.x,n.x,r?r.originX:void 0),_E(t.y,e.y,n.y,r?r.originY:void 0)}function EE(t,e,n){t.min=n.min+e.min,t.max=t.min+$r(e)}function D7(t,e,n){EE(t.x,e.x,n.x),EE(t.y,e.y,n.y)}function kE(t,e,n){t.min=e.min-n.min,t.max=t.min+$r(e)}function cd(t,e,n){kE(t.x,e.x,n.x),kE(t.y,e.y,n.y)}const SE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sc=()=>({x:SE(),y:SE()}),TE=()=>({min:0,max:0}),Dn=()=>({x:TE(),y:TE()});function Pi(t){return[t("x"),t("y")]}function F0(t){return t===void 0||t===1}function nx({scale:t,scaleX:e,scaleY:n}){return!F0(t)||!F0(e)||!F0(n)}function Yo(t){return nx(t)||WA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function WA(t){return NE(t.x)||NE(t.y)}function NE(t){return t&&t!=="0%"}function Pp(t,e,n){const r=t-n,i=e*r;return n+i}function CE(t,e,n,r,i){return i!==void 0&&(t=Pp(t,i,r)),Pp(t,n,r)+e}function rx(t,e=0,n=1,r,i){t.min=CE(t.min,e,n,r,i),t.max=CE(t.max,e,n,r,i)}function qA(t,{x:e,y:n}){rx(t.x,e.translate,e.scale,e.originPoint),rx(t.y,n.translate,n.scale,n.originPoint)}const AE=.999999999999,jE=1.0000000000001;function M7(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,c;for(let u=0;u<i;u++){a=n[u],c=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Nc(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,qA(t,c)),r&&Yo(a.latestValues)&&Nc(t,a.latestValues))}e.x<jE&&e.x>AE&&(e.x=1),e.y<jE&&e.y>AE&&(e.y=1)}function Tc(t,e){t.min=t.min+e,t.max=t.max+e}function IE(t,e,n,r,i=.5){const a=En(t.min,t.max,i);rx(t,e,n,a,r)}function Nc(t,e){IE(t.x,e.x,e.scaleX,e.scale,e.originX),IE(t.y,e.y,e.scaleY,e.scale,e.originY)}function GA(t,e){return zA(C7(t.getBoundingClientRect(),e))}function O7(t,e,n){const r=GA(t,n),{scroll:i}=e;return i&&(Tc(r.x,i.offset.x),Tc(r.y,i.offset.y)),r}const KA=({current:t})=>t?t.ownerDocument.defaultView:null,PE=(t,e)=>Math.abs(t-e);function L7(t,e){const n=PE(t.x,e.x),r=PE(t.y,e.y);return Math.sqrt(n**2+r**2)}class XA{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=$0(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=L7(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!S)return;const{point:b}=x,{timestamp:N}=pr;this.history.push({...b,timestamp:N});const{onStart:j,onMove:M}=this.handlers;w||(j&&j(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,x)},this.handlePointerMove=(x,w)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=U0(w,this.transformPagePoint),yn.update(this.updatePoint,!0)},this.handlePointerUp=(x,w)=>{this.end();const{onEnd:S,onSessionEnd:b,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=$0(x.type==="pointercancel"?this.lastMoveEventInfo:U0(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(x,j),b&&b(x,j)},!m1(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const u=rh(e),h=U0(u,this.transformPagePoint),{point:f}=h,{timestamp:g}=pr;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,$0(h,this.history)),this.removeListeners=eh(od(this.contextWindow,"pointermove",this.handlePointerMove),od(this.contextWindow,"pointerup",this.handlePointerUp),od(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xo(this.updatePoint)}}function U0(t,e){return e?{point:e(t.point)}:t}function RE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $0({point:t},e){return{point:t,delta:RE(t,QA(e)),offset:RE(t,V7(e)),velocity:F7(e,.1)}}function V7(t){return t[0]}function QA(t){return t[t.length-1]}function F7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=QA(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Os(e)));)n--;if(!r)return{x:0,y:0};const a=Ls(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function U7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?En(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?En(n,t,r.max):Math.min(t,n)),t}function DE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function $7(t,{top:e,left:n,bottom:r,right:i}){return{x:DE(t.x,n,i),y:DE(t.y,e,r)}}function ME(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function z7(t,e){return{x:ME(t.x,e.x),y:ME(t.y,e.y)}}function B7(t,e){let n=.5;const r=$r(t),i=$r(e);return i>r?n=Sd(e.min,e.max-r,t.min):r>i&&(n=Sd(t.min,t.max-i,e.min)),_a(0,1,n)}function H7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ix=.35;function W7(t=ix){return t===!1?t=0:t===!0&&(t=ix),{x:OE(t,"left","right"),y:OE(t,"top","bottom")}}function OE(t,e,n){return{min:LE(t,e),max:LE(t,n)}}function LE(t,e){return typeof t=="number"?t:t[e]||0}const q7=new WeakMap;class G7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rh(y).point)},c=(y,x)=>{const{drag:w,dragPropagation:S,onDragStart:b}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oV(w),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pi(j=>{let M=this.getAxisMotionValue(j).get()||0;if(Vs.test(M)){const{projection:O}=this.visualElement;if(O&&O.layout){const F=O.layout.layoutBox[j];F&&(M=$r(F)*(parseFloat(M)/100))}}this.originPoint[j]=M}),b&&yn.postRender(()=>b(y,x)),ex(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},u=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:b,onDrag:N}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:j}=x;if(S&&this.currentDirection===null){this.currentDirection=K7(j),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",x.point,j),this.updateAxis("y",x.point,j),this.visualElement.render(),N&&N(y,x)},h=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Pi(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new XA(e,{onSessionStart:a,onStart:c,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:KA(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&yn.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!kf(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=U7(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&kc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=$7(r.layoutBox,e):this.constraints=!1,this.elastic=W7(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=H7(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!kc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=O7(r,i.root,this.visualElement.getTransformPagePoint());let c=z7(i.layout.layoutBox,a);if(n){const u=n(N7(c));this.hasMutatedConstraints=!!u,u&&(c=zA(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Pi(g=>{if(!kf(g,n,this.currentDirection))return;let y=h&&h[g]||{};c&&(y={min:0,max:0});const x=i?200:1e6,w=i?40:1e7,S={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,S)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ex(this.visualElement,e),r.start(S1(e,r,0,n,this.visualElement,!1))}stopAnimation(){Pi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pi(n=>{const{drag:r}=this.getProps();if(!kf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[n];a.set(e[n]-En(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!kc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Pi(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const h=u.get();i[c]=B7({min:h,max:h},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pi(c=>{if(!kf(c,e,null))return;const u=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];u.set(En(h,f,i[c]))})}addListeners(){if(!this.visualElement.current)return;q7.set(this.visualElement,this);const e=this.visualElement.current,n=od(e,"pointerdown",h=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();kc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),yn.read(r);const c=Id(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Pi(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=h[g].translate,y.set(y.get()+h[g].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:c=ix,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:c,dragMomentum:u}}}function kf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function K7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class X7 extends No{constructor(e){super(e),this.removeGroupControls=Li,this.removeListeners=Li,this.controls=new G7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Li}unmount(){this.removeGroupControls(),this.removeListeners()}}const VE=t=>(e,n)=>{t&&yn.postRender(()=>t(e,n))};class Q7 extends No{constructor(){super(...arguments),this.removePointerDownListener=Li}onPointerDown(e){this.session=new XA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:VE(e),onStart:VE(n),onMove:r,onEnd:(a,c)=>{delete this.session,i&&yn.postRender(()=>i(a,c))}}}mount(){this.removePointerDownListener=od(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(vt.test(t))t=parseFloat(t);else return t;const n=FE(t,e.target.x),r=FE(t,e.target.y);return`${n}% ${r}%`}},Y7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=vo.parse(t);if(i.length>5)return r;const a=vo.createTransformer(t),c=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;i[0+c]/=u,i[1+c]/=h;const f=En(u,h,.5);return typeof i[2+c]=="number"&&(i[2+c]/=f),typeof i[3+c]=="number"&&(i[3+c]/=f),a(i)}};let UE=!1;class J7 extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;OV(Z7),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),UE&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Jf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:c}=r;return c&&(c.isPresent=a,UE=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||yn.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),p1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function YA(t){const[e,n]=kA(),r=T.useContext(Wv);return o.jsx(J7,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(AA),isPresent:e,safeToRemove:n})}const Z7={borderRadius:{...Vu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vu,borderTopRightRadius:Vu,borderBottomLeftRadius:Vu,borderBottomRightRadius:Vu,boxShadow:Y7};function eF(t,e,n){const r=Pr(t)?t:$c(t);return r.start(S1("",r,e,n)),r.animation}const tF=(t,e)=>t.depth-e.depth;class nF{constructor(){this.children=[],this.isDirty=!1}add(e){Kv(this.children,e),this.isDirty=!0}remove(e){Xv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tF),this.isDirty=!1,this.children.forEach(e)}}function rF(t,e){const n=ri.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(xo(r),t(a-e))};return yn.setup(r,!0),()=>xo(r)}const JA=["TopLeft","TopRight","BottomLeft","BottomRight"],iF=JA.length,$E=t=>typeof t=="string"?parseFloat(t):t,zE=t=>typeof t=="number"||vt.test(t);function sF(t,e,n,r,i,a){i?(t.opacity=En(0,n.opacity??1,aF(r)),t.opacityExit=En(e.opacity??1,0,oF(r))):a&&(t.opacity=En(e.opacity??1,n.opacity??1,r));for(let c=0;c<iF;c++){const u=`border${JA[c]}Radius`;let h=BE(e,u),f=BE(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||zE(h)===zE(f)?(t[u]=Math.max(En($E(h),$E(f),r),0),(Vs.test(f)||Vs.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=En(e.rotate||0,n.rotate||0,r))}function BE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aF=ZA(0,.5,WC),oF=ZA(.5,.95,Li);function ZA(t,e,n){return r=>r<t?0:r>e?1:n(Sd(t,e,r))}function HE(t,e){t.min=e.min,t.max=e.max}function Ii(t,e){HE(t.x,e.x),HE(t.y,e.y)}function WE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function qE(t,e,n,r,i){return t-=e,t=Pp(t,1/n,r),i!==void 0&&(t=Pp(t,1/i,r)),t}function lF(t,e=0,n=1,r=.5,i,a=t,c=t){if(Vs.test(e)&&(e=parseFloat(e),e=En(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=En(a.min,a.max,r);t===a&&(u-=e),t.min=qE(t.min,e,n,u,i),t.max=qE(t.max,e,n,u,i)}function GE(t,e,[n,r,i],a,c){lF(t,e[n],e[r],e[i],e.scale,a,c)}const cF=["x","scaleX","originX"],uF=["y","scaleY","originY"];function KE(t,e,n,r){GE(t.x,e,cF,n?n.x:void 0,r?r.x:void 0),GE(t.y,e,uF,n?n.y:void 0,r?r.y:void 0)}function XE(t){return t.translate===0&&t.scale===1}function e4(t){return XE(t.x)&&XE(t.y)}function QE(t,e){return t.min===e.min&&t.max===e.max}function dF(t,e){return QE(t.x,e.x)&&QE(t.y,e.y)}function YE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function t4(t,e){return YE(t.x,e.x)&&YE(t.y,e.y)}function JE(t){return $r(t.x)/$r(t.y)}function ZE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hF{constructor(){this.members=[]}add(e){Kv(this.members,e),e.scheduleRender()}remove(e){if(Xv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fF(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((i||a||c)&&(r=`translate3d(${i}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:g,rotateX:y,rotateY:x,skewX:w,skewY:S}=n;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),w&&(r+=`skewX(${w}deg) `),S&&(r+=`skewY(${S}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const z0=["","X","Y","Z"],pF=1e3;let mF=0;function B0(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function n4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",yn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&n4(r)}function r4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},u=e==null?void 0:e()){this.id=mF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(xF),this.nodes.forEach(_F),this.nodes.forEach(EF),this.nodes.forEach(vF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new nF)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Jv),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const h=this.eventHandlers.get(c);h&&h.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=EA(c)&&!fV(c),this.instance=c;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),t){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;yn.read(()=>{y=window.innerWidth}),t(c,()=>{const w=window.innerWidth;w!==y&&(y=w,this.root.updateBlockedByResize=!0,g&&g(),g=rF(x,250),Jf.hasAnimatedSinceResize&&(Jf.hasAnimatedSinceResize=!1,this.nodes.forEach(nk)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||CF,{onLayoutAnimationStart:b,onLayoutAnimationComplete:N}=f.getProps(),j=!this.targetLayout||!t4(this.targetLayout,w),M=!y&&x;if(this.options.layoutRoot||this.resumeFrom||M||y&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...h1(S,"layout"),onPlay:b,onComplete:N};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(g,M)}else y||nk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kF),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&n4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ek);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(tk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wF),this.nodes.forEach(gF),this.nodes.forEach(yF)):this.nodes.forEach(tk),this.clearAllSnapshots();const u=ri.now();pr.delta=_a(0,1e3/60,u-pr.timestamp),pr.timestamp=u,pr.isProcessing=!0,R0.update.process(pr),R0.preRender.process(pr),R0.render.process(pr),pr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,p1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bF),this.sharedNodes.forEach(SF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$r(this.snapshot.measuredBox.x)&&!$r(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!e4(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||Yo(this.latestValues)||g)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return c&&(h=this.removeTransform(h)),AF(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:c}=this.options;if(!c)return Dn();const u=c.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(jF))){const{scroll:g}=this.root;g&&(Tc(u.x,g.offset.x),Tc(u.y,g.offset.y))}return u}removeElementScroll(c){var h;const u=Dn();if(Ii(u,c),(h=this.scroll)!=null&&h.wasRoot)return u;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&Ii(u,c),Tc(u.x,y.offset.x),Tc(u.y,y.offset.y))}return u}applyTransform(c,u=!1){const h=Dn();Ii(h,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Nc(h,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Yo(g.latestValues)&&Nc(h,g.latestValues)}return Yo(this.latestValues)&&Nc(h,this.latestValues),h}removeTransform(c){const u=Dn();Ii(u,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Yo(f.latestValues))continue;nx(f.latestValues)&&f.updateSnapshot();const g=Dn(),y=f.measurePageBox();Ii(g,y),KE(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Yo(this.latestValues)&&KE(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=pr.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),cd(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dn(),this.targetWithTransforms=Dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ii(this.target,this.layout.layoutBox),qA(this.target,this.targetDelta)):Ii(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),cd(this.relativeTargetOrigin,this.target,w.target),Ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||nx(this.parent.latestValues)||WA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===pr.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Ii(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;M7(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Dn());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WE(this.prevProjectionDelta.x,this.projectionDelta.x),WE(this.prevProjectionDelta.y,this.projectionDelta.y)),ld(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!ZE(this.projectionDelta.x,this.prevProjectionDelta.x)||!ZE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sc(),this.projectionDelta=Sc(),this.projectionDeltaWithTransform=Sc()}setAnimationOrigin(c,u=!1){const h=this.snapshot,f=h?h.latestValues:{},g={...this.latestValues},y=Sc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=Dn(),w=h?h.source:void 0,S=this.layout?this.layout.source:void 0,b=w!==S,N=this.getStack(),j=!N||N.members.length<=1,M=!!(b&&!j&&this.options.crossfade===!0&&!this.path.some(NF));this.animationProgress=0;let O;this.mixTargetDelta=F=>{const H=F/1e3;rk(y.x,c.x,H),rk(y.y,c.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TF(this.relativeTarget,this.relativeTargetOrigin,x,H),O&&dF(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Dn()),Ii(O,this.relativeTarget)),b&&(this.animationValues=g,sF(g,f,this.latestValues,H,M,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,h,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(xo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yn.update(()=>{Jf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$c(0)),this.currentAnimation=eF(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:g}=c;if(!(!u||!h||!f)){if(this!==c&&this.layout&&f&&i4(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Dn();const y=$r(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+y;const x=$r(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+x}Ii(u,h),Nc(u,g),ld(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new hF),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&B0("z",c,f,this.animationValues);for(let g=0;g<z0.length;g++)B0(`rotate${z0[g]}`,c,f,this.animationValues),B0(`skew${z0[g]}`,c,f,this.animationValues);c.render();for(const g in f)c.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Yf(u==null?void 0:u.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Yf(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Yo(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=fF(this.projectionDeltaWithTransform,this.treeScale,g);h&&(y=h(g,y)),c.transform=y;const{x,y:w}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${w.origin*100}% 0`,f.animationValues?c.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const S in Ad){if(g[S]===void 0)continue;const{correct:b,applyTo:N,isCSSVariable:j}=Ad[S],M=y==="none"?g[S]:b(g[S],f);if(N){const O=N.length;for(let F=0;F<O;F++)c[N[F]]=M}else j?this.options.visualElement.renderState.vars[S]=M:c[S]=M}this.options.layoutId&&(c.pointerEvents=f===this?Yf(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(ek),this.root.sharedNodes.clear()}}}function gF(t){t.updateLayout()}function yF(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,c=e.source!==t.layout.source;a==="size"?Pi(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],w=$r(x);x.min=r[y].min,x.max=x.min+w}):i4(a,e.layoutBox,r)&&Pi(y=>{const x=c?e.measuredBox[y]:e.layoutBox[y],w=$r(r[y]);x.max=x.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+w)});const u=Sc();ld(u,r,e.layoutBox);const h=Sc();c?ld(h,t.applyTransform(i,!0),e.measuredBox):ld(h,r,e.layoutBox);const f=!e4(u);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:w}=y;if(x&&w){const S=Dn();cd(S,e.layoutBox,x.layoutBox);const b=Dn();cd(b,r,w.layoutBox),t4(S,b)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=S,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function xF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bF(t){t.clearSnapshot()}function ek(t){t.clearMeasurements()}function tk(t){t.isLayoutDirty=!1}function wF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function nk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function _F(t){t.resolveTargetDelta()}function EF(t){t.calcProjection()}function kF(t){t.resetSkewAndRotation()}function SF(t){t.removeLeadSnapshot()}function rk(t,e,n){t.translate=En(e.translate,0,n),t.scale=En(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ik(t,e,n,r){t.min=En(e.min,n.min,r),t.max=En(e.max,n.max,r)}function TF(t,e,n,r){ik(t.x,e.x,n.x,r),ik(t.y,e.y,n.y,r)}function NF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const CF={duration:.45,ease:[.4,0,.1,1]},sk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ak=sk("applewebkit/")&&!sk("chrome/")?Math.round:Li;function ok(t){t.min=ak(t.min),t.max=ak(t.max)}function AF(t){ok(t.x),ok(t.y)}function i4(t,e,n){return t==="position"||t==="preserve-aspect"&&!R7(JE(e),JE(n),.2)}function jF(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const IF=r4({attachResizeListener:(t,e)=>Id(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),H0={current:void 0},s4=r4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!H0.current){const t=new IF({});t.mount(window),t.setOptions({layoutScroll:!0}),H0.current=t}return H0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PF={pan:{Feature:Q7},drag:{Feature:X7,ProjectionNode:s4,MeasureLayout:YA}};function lk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&yn.postRender(()=>a(e,rh(e)))}class RF extends No{mount(){const{current:e}=this.node;e&&(this.unmount=lV(e,(n,r)=>(lk(this.node,r,"Start"),i=>lk(this.node,i,"End"))))}unmount(){}}class DF extends No{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=eh(Id(this.node.current,"focus",()=>this.onFocus()),Id(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ck(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&yn.postRender(()=>a(e,rh(e)))}class MF extends No{mount(){const{current:e}=this.node;e&&(this.unmount=hV(e,(n,r)=>(ck(this.node,r,"Start"),(i,{success:a})=>ck(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sx=new WeakMap,W0=new WeakMap,OF=t=>{const e=sx.get(t.target);e&&e(t)},LF=t=>{t.forEach(OF)};function VF({root:t,...e}){const n=t||document;W0.has(n)||W0.set(n,{});const r=W0.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(LF,{root:t,...e})),r[i]}function FF(t,e,n){const r=VF(e);return sx.set(t,n),r.observe(t),()=>{sx.delete(t),r.unobserve(t)}}const UF={some:0,all:1};class $F extends No{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UF[i]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=f?g:y;x&&x(h)};return FF(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zF(e,n))&&this.startObserver()}unmount(){}}function zF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const BF={inView:{Feature:$F},tap:{Feature:MF},focus:{Feature:DF},hover:{Feature:RF}},HF={layout:{ProjectionNode:s4,MeasureLayout:YA}},ax={current:null},a4={current:!1};function WF(){if(a4.current=!0,!!Gv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ax.current=t.matches;t.addEventListener("change",e),e()}else ax.current=!1}const qF=new WeakMap;function GF(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Pr(i))t.addValue(r,i);else if(Pr(a))t.addValue(r,$c(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,$c(c!==void 0?c:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const uk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class KF{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=u1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=ri.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,yn.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=jm(n),this.isVariantNode=NA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in y){const w=y[x];h[x]!==void 0&&Pr(w)&&w.set(h[x],!1)}}mount(e){this.current=e,qF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),a4.current||WF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ax.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xo(this.notifyUpdate),xo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ru.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&yn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in zc){const n=zc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<uk.length;r++){const i=uk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,c=e[a];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=GF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=$c(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(MC(r)||LC(r))?r=parseFloat(r):!mV(r)&&vo.test(n)&&(r=xA(e,n)),this.setBaseTarget(e,Pr(r)?r.get():r)),Pr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=E1(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);c&&(r=c[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Pr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Jv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class o4 extends KF{constructor(){super(...arguments),this.KeyframeResolver=rV}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function l4(t,{style:e,vars:n},r,i){const a=t.style;let c;for(c in e)a[c]=e[c];i==null||i.applyProjectionStyles(a,r);for(c in n)a.setProperty(c,n[c])}function XF(t){return window.getComputedStyle(t)}class QF extends o4{constructor(){super(...arguments),this.type="html",this.renderInstance=l4}readValueFromInstance(e,n){var r;if(ru.has(n))return(r=this.projection)!=null&&r.isProjecting?Gy(n):_8(e,n);{const i=XF(e),a=(t1(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return GA(e,n)}build(e,n,r){b1(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return k1(e,n,r)}}const c4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YF(t,e,n,r){l4(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(c4.has(i)?i:v1(i),e.attrs[i])}class JF extends o4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ru.has(n)){const r=yA(n);return r&&r.default||0}return n=c4.has(n)?n:v1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return LA(e,n,r)}build(e,n,r){RA(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){YF(e,n,r,i)}mount(e){this.isSVGTag=MA(e.tagName),super.mount(e)}}const ZF=(t,e)=>_1(t)?new JF(e):new QF(e,{allowProjection:t!==T.Fragment}),eU=ZV({...S7,...BF,...PF,...HF},ZF),oe=kV(eU);var u4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dk=zr.createContext&&zr.createContext(u4),tU=["attr","size","title"];function nU(t,e){if(t==null)return{};var n=rU(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rU(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rp(){return Rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rp.apply(this,arguments)}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){iU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iU(t,e,n){return e=sU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sU(t){var e=aU(t,"string");return typeof e=="symbol"?e:e+""}function aU(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d4(t){return t&&t.map((e,n)=>zr.createElement(e.tag,Dp({key:n},e.attr),d4(e.child)))}function Ct(t){return e=>zr.createElement(oU,Rp({attr:Dp({},t.attr)},e),d4(t.child))}function oU(t){var e=n=>{var{attr:r,size:i,title:a}=t,c=nU(t,tU),u=i||n.size||"1em",h;return n.className&&(h=n.className),t.className&&(h=(h?h+" ":"")+t.className),zr.createElement("svg",Rp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:h,style:Dp(Dp({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&zr.createElement("title",null,a),t.children)};return dk!==void 0?zr.createElement(dk.Consumer,null,n=>e(n)):e(u4)}function Mp(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(t)}function fk(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function lU(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(t)}function cU(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function uU(t){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function dU(t){return Ct({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function T1(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function hU(t){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function ih(t){return Ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function fU(t){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 32H32C14.33 32 0 46.33 0 64v384c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM176 327.88V344c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-16.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V152c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v16.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07zM416 312c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h112c4.42 0 8 3.58 8 8v16zm160 0c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-96c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h272c4.42 0 8 3.58 8 8v16z"},child:[]}]})(t)}function ox(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(t)}function Op(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function pU(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(t)}function lx(t){return Ct({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function mU(t){return Ct({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(t)}function gU(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 216v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-80c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zM125.333 32H24C10.745 32 0 42.745 0 56v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zm80 448H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm-24-424v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24zm24 264H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24z"},child:[]}]})(t)}function q0(t){return Ct({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function cx(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function pk(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function yU(t){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(t)}function xU(t){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function h4(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function vU(t){return Ct({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"},child:[]}]})(t)}/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),mk=t=>{const e=wU(t);return e.charAt(0).toUpperCase()+e.slice(1)},f4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),_U=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...u},h)=>T.createElement("svg",{ref:h,...EU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:f4("lucide",i),...!a&&!_U(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>T.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=(t,e)=>{const n=T.forwardRef(({className:r,...i},a)=>T.createElement(kU,{ref:a,iconNode:e,className:f4(`lucide-${bU(mk(t))}`,`lucide-${t}`,r),...i}));return n.displayName=mk(t),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fu=xn("check",SU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],NU=xn("chevron-down",TU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],AU=xn("chevron-left",CU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],IU=xn("chevron-right",jU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ux=xn("circle-check-big",PU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Lp=xn("circle-x",RU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],p4=xn("clock",DU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],OU=xn("credit-card",MU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],VU=xn("download",LU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],UU=xn("gift",FU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ud=xn("house",$U);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BU=xn("locate-fixed",zU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Sf=xn("map",HU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],qU=xn("pencil",WU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],KU=xn("refresh-cw",GU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vp=xn("shield",XU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],YU=xn("shopping-cart",QU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ZU=xn("sparkles",JU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],t$=xn("star",e$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],G0=xn("store",n$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],i$=xn("trash-2",r$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gk=xn("triangle-alert",s$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],o$=xn("trophy",a$);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],m4=xn("zap",l$),yk=["Distrito Nacional","Santo Domingo","Santiago","La Vega","Puerto Plata","San Cristóbal","Duarte","La Romana","San Pedro de Macorís","Espaillat","Hermanas Mirabal","Monte Plata","San Juan","Azua","Peravia","Monseñor Nouel","Barahona","Sánchez Ramírez","Valverde","María Trinidad Sánchez","Monte Cristi","Samaná","El Seibo","Hato Mayor","Independencia","Pedernales","Elías Piña","Dajabón","Baoruco"],ca={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, República Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"};function c$({abierto:t,onClose:e,onPick:n,valorActual:r}){const[i,a]=T.useState(""),c=T.useMemo(()=>{if(!i)return yk;const u=i.toLowerCase();return yk.filter(h=>h.toLowerCase().includes(u))},[i]);return T.useEffect(()=>{t||a("")},[t]),typeof document>"u"?null:jx.createPortal(o.jsx(dn,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(oe.div,{className:"prov-picker-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),o.jsx(oe.div,{className:"prov-picker-modal",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},onClick:u=>u.stopPropagation(),children:o.jsxs("div",{className:"prov-dark-card",children:[o.jsxs("div",{className:"prov-dark-header",children:[o.jsx("h3",{className:"prov-dark-title",children:"Seleccionar Provincia"}),o.jsx("button",{onClick:e,className:"prov-close-white",children:"✕"})]}),o.jsx("div",{className:"prov-search-dark",children:o.jsx("input",{type:"text",placeholder:"Buscar provincia...",value:i,onChange:u=>a(u.target.value),className:"prov-input-dark",autoFocus:!0})}),o.jsx("div",{className:"prov-list-dark",children:c.length>0?c.map(u=>o.jsx("div",{className:`prov-item-dark ${r===u?"active":""}`,onClick:()=>{n(u),e()},children:u},u)):o.jsx("div",{className:"prov-empty-dark",children:"No se encontraron provincias"})})]})})]})}),document.body)}function g4({abierto:t,onClose:e,actualizarUsuarioInfo:n,actualizarLista:r,direccionEditar:i,usuarioId:a}){const{uid:c,usuario:u}=Br(),[h,f]=T.useState("domicilio"),[g,y]=T.useState([]),[x,w]=T.useState(!1),[S,b]=T.useState(null),[N,j]=T.useState(""),[M,O]=T.useState(""),[F,H]=T.useState(""),[K,R]=T.useState(""),[I,A]=T.useState(""),[k,V]=T.useState(""),[U,D]=T.useState(""),[xe,Ke]=T.useState(!1),[st,qe]=T.useState(!1),[ce,ue]=T.useState(!1),[de,z]=T.useState(null),[Y,be]=T.useState(""),[Me,Ve]=T.useState(!1),it=te=>te||"",[ct,Be]=T.useState(""),[et,ut]=T.useState(null),[_t,mt]=T.useState(!1),[kt,Ot]=T.useState(!1),ie=async()=>{const te=a||c||(u==null?void 0:u.uid);if(!te){y([]);return}w(!0);try{const Ie=an(Ft(Pe,"direcciones"),xr("usuarioId","==",te)),Q=(await Ir(Ie)).docs.map(le=>({id:le.id,...le.data()}));y(Q)}catch(Ie){console.error("fetchDirecciones error:",Ie),y([])}finally{w(!1)}};T.useEffect(()=>{const te=a||c||(u==null?void 0:u.uid);t&&te&&ie()},[t,c,u,a]),T.useEffect(()=>{t&&(ie(),i?(b(i.id),f(i.metodoEntrega||"domicilio"),j(i.provincia||""),O(i.ciudad||""),H(i.sector||""),R(i.numeroCalle||""),A(i.numeroCasa||""),V(i.telefono||""),D(i.referencia||""),Be(i.ubicacion||""),Ot(i.metodoEntrega==="tienda")):(b(null),f("domicilio"),j(""),O(""),H(""),R(""),A(""),V(""),D(""),Be(""),ut(null),Ot(!1)))},[t,i]),T.useEffect(()=>{if(!t)return;const te=Ie=>{Ie.key==="Escape"&&e&&e()};return document.body.style.overflow="hidden",document.addEventListener("keydown",te),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",te)}},[t,e]);const Fe=te=>{if(te==="tienda"){f("tienda"),j(ca.provincia),O(ca.ciudad),R(ca.numeroCalle),H(""),A(""),D(""),b(null),Be(""),ut(null),Ot(!0);return}if(te==="domicilio"){f("domicilio"),kt&&(j(""),O(""),S||(R(""),H(""),A(""),D("")),Ot(!1));return}f(te)},je=()=>[K,I?`Casa ${I}`:"",F,M,N,U?`Ref: ${U}`:""].filter(Boolean).join(", ").trim(),fe=async()=>{const te=c||(u==null?void 0:u.uid);if(console.log("Auth check:",{uid:c,usuario:u==null?void 0:u.uid,currentUid:te}),!te){alert("Error de autenticación. Recarga la página e intenta de nuevo.");return}Ke(!0);try{if(h==="tienda"){if(!k||k.trim()===""){be("El número de teléfono es obligatorio para recoger en tienda"),Ke(!1);return}typeof n=="function"&&await n({direccion:it(ca.direccionCompleta),metodoEntrega:"tienda",telefono:k}),e&&e(),typeof r=="function"&&r(),Ke(!1);return}if(!k||k.trim()===""){be("El número de teléfono es obligatorio"),Ke(!1);return}const Ie=!!et;if(!Ie&&!je()){alert("Completa provincia, ciudad y calle/número."),Ke(!1);return}const B=Ie?`${je()?je()+", ":""}Ubicación: ${ct} (${et==null?void 0:et.lat}, ${et==null?void 0:et.lon})`:je(),Q={metodoEntrega:"domicilio",provincia:N||null,ciudad:M||null,numeroCalle:K||null,numeroCasa:I||null,sector:F||null,referencia:U||null,telefono:k||null,direccionCompleta:B,ubicacion:ct||null,coords:et||null,usuarioId:te,updatedAt:new Date};if(S){const J=ot(Pe,"direcciones",S);await Bn(J,{...Q})}else await Em(Ft(Pe,"direcciones"),{...Q,createdAt:new Date});typeof n=="function"&&await n({direccion:it(B),metodoEntrega:"domicilio"}),qe(!0);const le={direccion:it(B),metodoEntrega:"domicilio",telefono:k,updatedAt:new Date};try{await Jn(ot(Pe,"users",te),le,{merge:!0})}catch(J){console.warn("No se pudo escribir users/{uid}:",J)}try{await Jn(ot(Pe,"usuarios",te),le,{merge:!0})}catch(J){console.warn("No se pudo escribir usuarios/{uid}:",J)}typeof n=="function"&&await n({telefono:k}),await ie(),typeof r=="function"&&r(),b(null),e&&e(),window.location.reload()}catch(Ie){console.error("handleGuardarDireccion error:",Ie),alert(`Error guardando dirección: ${(Ie==null?void 0:Ie.message)||Ie}`)}finally{Ke(!1)}},Ze=async te=>{try{const Ie=typeof te=="string"?te:(te==null?void 0:te.direccionCompleta)||"",B=te&&te.metodoEntrega?te.metodoEntrega:"domicilio",Q=c||(u==null?void 0:u.uid);qe(!0),typeof n=="function"&&await n({direccion:Ie,metodoEntrega:B,telefono:k});const le={direccion:Ie,metodoEntrega:B,telefono:k,updatedAt:new Date};try{await Jn(ot(Pe,"users",Q),le,{merge:!0})}catch(J){console.warn("No se pudo escribir users/{uid}:",J)}try{await Jn(ot(Pe,"usuarios",Q),le,{merge:!0})}catch(J){console.warn("No se pudo escribir usuarios/{uid}:",J)}try{let J=await rs(ot(Pe,"users",Q));if(J.exists()||(J=await rs(ot(Pe,"usuarios",Q))),J&&J.exists()){const se=J.data()||{};typeof n=="function"&&await n({direccion:se.direccion||Ie,metodoEntrega:se.metodoEntrega||B})}}catch(J){console.warn("No se pudo releer documento de usuario:",J)}await ie(),typeof r=="function"&&r(),e&&e(),window.location.reload()}catch(Ie){console.error("handleSeleccionarDireccion error:",Ie),qe(!1),alert(`Error seleccionando dirección: ${(Ie==null?void 0:Ie.message)||Ie}`)}},Xe=async te=>{try{await _m(ot(Pe,"direcciones",te)),await ie(),typeof r=="function"&&r(),alert("Dirección eliminada correctamente.")}catch(Ie){console.error("eliminarDireccion:",Ie),alert(`Error eliminando dirección: ${(Ie==null?void 0:Ie.message)||Ie}`)}},jt=te=>{z(te),ue(!0)},Nt=()=>{ue(!1),z(null)},At=()=>{de&&(Xe(de),ue(!1),z(null))},_e=te=>{!te||te.metodoEntrega==="tienda"||(b(te.id),f("domicilio"),j(te.provincia||""),O(te.ciudad||""),H(te.sector||""),R(te.numeroCalle||""),A(te.numeroCasa||""),V(te.telefono||""),D(te.referencia||""),Be(te.ubicacion||""),ut(te.coords||null),Ot(!1))},ne=()=>{if(!navigator.geolocation){alert("Geolocalización no soportada en este navegador.");return}mt(!0),navigator.geolocation.getCurrentPosition(te=>{const Ie=te.coords.latitude.toFixed(6),B=te.coords.longitude.toFixed(6),Q=`https://www.google.com/maps?q=${Ie},${B}`;Be(Q),ut({lat:Ie,lon:B}),R(`${Ie}, ${B}`),mt(!1)},te=>{console.error("Error geolocalización:",te);let Ie="No se pudo obtener la ubicación.";switch(te.code){case te.PERMISSION_DENIED:Ie="Permisos denegados. Haz clic en el candado 🔒 junto a la URL y permite la ubicación.";break;case te.POSITION_UNAVAILABLE:Ie="Ubicación no disponible. Asegúrate de estar conectado a internet y tener servicios de ubicación activados.";break;case te.TIMEOUT:Ie="Tiempo agotado. Intenta de nuevo.";break;default:Ie="Error desconocido. Verifica permisos del navegador."}alert(Ie),mt(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},ge=()=>{Be(""),ut(null),K&&/^\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?\s*$/.test(K)&&R("")};if(!t)return null;const Ne=g.filter(te=>te.metodoEntrega!=="tienda");return jx.createPortal(o.jsxs(o.Fragment,{children:[o.jsx(oe.div,{className:"entrega-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),o.jsx(oe.div,{className:"entrega-slider",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:200},role:"dialog","aria-modal":"true",onClick:te=>te.stopPropagation(),children:o.jsxs("div",{className:"entrega-slider-content","aria-labelledby":"entrega-title",children:[o.jsx("div",{className:"entrega-drag-handle"}),o.jsxs("div",{className:"entrega-header",children:[o.jsxs("div",{className:"entrega-header-content",children:[o.jsx("div",{className:"entrega-icon-wrapper",children:o.jsx("div",{className:"entrega-icon",children:"🚚"})}),o.jsxs("div",{className:"entrega-title-section",children:[o.jsx("h3",{id:"entrega-title",className:"entrega-title",children:"Método de entrega"}),o.jsx("p",{className:"entrega-subtitle",children:"Elige cómo quieres recibir tu pedido"})]})]}),o.jsx("button",{onClick:e,className:"entrega-close-btn","aria-label":"Cerrar",children:o.jsx(Lp,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"entrega-methods",children:[o.jsxs(oe.button,{type:"button",onClick:()=>Fe("domicilio"),className:`method-card ${h==="domicilio"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":h==="domicilio",children:[o.jsx("div",{className:"method-icon domicilio-icon",children:o.jsx(ud,{className:"w-6 h-6"})}),o.jsxs("div",{className:"method-info",children:[o.jsx("h4",{className:"method-title",children:"A domicilio"}),o.jsx("p",{className:"method-desc",children:"Entrega en tu dirección"})]}),h==="domicilio"&&o.jsx(oe.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:o.jsx(Fu,{className:"w-5 h-5"})})]}),o.jsxs(oe.button,{type:"button",onClick:()=>Fe("tienda"),className:`method-card ${h==="tienda"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":h==="tienda",children:[o.jsx("div",{className:"method-icon tienda-icon",children:o.jsx(G0,{className:"w-6 h-6"})}),o.jsxs("div",{className:"method-info",children:[o.jsx("h4",{className:"method-title",children:"Recoger en tienda"}),o.jsx("p",{className:"method-desc",children:"Playcenter Universal"})]}),h==="tienda"&&o.jsx(oe.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:o.jsx(Fu,{className:"w-5 h-5"})})]})]}),h==="domicilio"&&o.jsxs(oe.button,{type:"button",onClick:ne,className:`location-btn ${_t?"loading":""}`,disabled:_t,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[o.jsx(BU,{className:`w-5 h-5 ${_t?"animate-pulse":""}`}),o.jsx("span",{children:_t?"Obteniendo ubicación...":"Usar mi ubicación actual"})]}),h==="tienda"&&o.jsx(oe.div,{className:"tienda-phone-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Teléfono de contacto *"}),o.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:k,onChange:te=>{V(te.target.value),Y&&be("")},className:"form-input",required:!0}),Y&&o.jsx("div",{className:"phone-error-message",children:o.jsxs("span",{children:["⚠️ ",Y]})}),o.jsx("p",{className:"form-note",children:"📞 Te contactaremos cuando tu pedido esté listo para recoger"})]})}),o.jsxs("div",{className:"entrega-form",children:[o.jsx(dn,{children:et&&o.jsxs(oe.div,{className:"coords-display",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[o.jsxs("div",{className:"coords-header",children:[o.jsx(Sf,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"coords-title",children:"Ubicación detectada"}),o.jsx("button",{onClick:ge,className:"coords-remove","aria-label":"Quitar ubicación",children:o.jsx(Lp,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"coords-info",children:[o.jsxs("div",{className:"coord-item",children:[o.jsx("span",{className:"coord-label",children:"Lat:"}),o.jsx("span",{className:"coord-value",children:et.lat})]}),o.jsxs("div",{className:"coord-item",children:[o.jsx("span",{className:"coord-label",children:"Lng:"}),o.jsx("span",{className:"coord-value",children:et.lon})]})]})]})}),o.jsx(dn,{mode:"wait",children:h==="domicilio"?o.jsxs(oe.div,{className:"address-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[o.jsxs("div",{className:"form-section",children:[o.jsx("label",{className:"form-label",children:"Provincia *"}),o.jsxs("button",{type:"button",onClick:()=>Ve(!0),className:"province-selector","aria-haspopup":"dialog","aria-expanded":Me,children:[o.jsx("span",{className:`province-text ${N?"":"placeholder"}`,children:N||"Selecciona tu provincia"}),o.jsx(NU,{className:"province-chevron"})]})]}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Ciudad *"}),o.jsx("input",{placeholder:"Ej: Santiago",value:M,onChange:te=>O(te.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Sector"}),o.jsx("input",{placeholder:"Ej: Los Jardines",value:F,onChange:te=>H(te.target.value),className:"form-input"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Calle y número *"}),o.jsx("input",{placeholder:"Ej: Av. Juan Pablo Duarte #123",value:K,onChange:te=>R(te.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Número de casa"}),o.jsx("input",{placeholder:"Ej: 45-B",value:I,onChange:te=>A(te.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Teléfono *"}),o.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:k,onChange:te=>{V(te.target.value),Y&&be("")},className:"form-input",required:!0}),Y&&o.jsx("div",{className:"phone-error-message",children:o.jsxs("span",{children:["⚠️ ",Y]})})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{className:"form-label",children:"Referencia"}),o.jsx("input",{placeholder:"Ej: Casa azul",value:U,onChange:te=>D(te.target.value),className:"form-input"})]}),!et&&o.jsxs("div",{className:"form-note",children:["💡 ",o.jsx("strong",{children:"Tip:"}),' Usa "Mi ubicación actual" para completar automáticamente las coordenadas']})]},"domicilio-form"):o.jsxs(oe.div,{className:"store-info",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[o.jsxs("div",{className:"store-header",children:[o.jsx(G0,{className:"w-6 h-6 text-orange-500"}),o.jsx("h4",{className:"store-title",children:"Playcenter Universal"})]}),o.jsx("p",{className:"store-address",children:ca.direccionCompleta}),o.jsxs("a",{href:ca.ubicacion,target:"_blank",rel:"noreferrer",className:"store-map-link",children:[o.jsx(Sf,{className:"w-4 h-4"}),"Ver en Google Maps"]})]},"tienda-info")}),o.jsx(oe.button,{onClick:fe,disabled:xe,className:`save-btn ${xe?"loading":""}`,whileHover:{scale:xe?1:1.02},whileTap:{scale:xe?1:.98},children:xe?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("span",{children:"Guardando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Fu,{className:"w-5 h-5"}),o.jsx("span",{children:h==="tienda"?"Seleccionar Playcenter":S?"Actualizar dirección":"Guardar dirección"})]})})]}),o.jsxs("div",{className:"saved-addresses",children:[o.jsx("h4",{className:"saved-title",children:"Direcciones guardadas"}),x?o.jsxs("div",{className:"loading-state",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("span",{children:"Cargando direcciones..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs(oe.div,{className:"address-card store-card",whileHover:{scale:1.01},whileTap:{scale:.99},children:[o.jsxs("div",{className:"address-info",children:[o.jsxs("div",{className:"address-header",children:[o.jsx(G0,{className:"w-5 h-5 text-orange-500"}),o.jsx("span",{className:"address-type",children:"Recoger en tienda"})]}),o.jsx("p",{className:"address-name",children:"Playcenter Universal"}),o.jsx("p",{className:"address-details",children:ca.direccionCompleta}),o.jsxs("a",{href:ca.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[o.jsx(Sf,{className:"w-4 h-4"}),"Ver ubicación"]})]}),o.jsxs("button",{onClick:()=>Ze(ca),className:"address-select-btn store-select",children:[o.jsx(Fu,{className:"w-4 h-4"}),"Seleccionar"]})]}),o.jsx(dn,{children:Ne.length===0?o.jsxs(oe.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[o.jsx(ud,{className:"w-12 h-12 text-gray-300"}),o.jsx("p",{className:"empty-text",children:"No tienes direcciones guardadas"}),o.jsx("p",{className:"empty-subtext",children:"Agrega una dirección para entregas futuras"})]}):o.jsx("div",{className:"addresses-list",children:Ne.map((te,Ie)=>o.jsxs(oe.div,{className:"address-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:Ie*.1},whileHover:{scale:1.01},children:[o.jsxs("div",{className:"address-info",children:[o.jsxs("div",{className:"address-header",children:[o.jsx(ud,{className:"w-5 h-5 text-blue-500"}),o.jsx("span",{className:"address-type",children:"Domicilio"})]}),o.jsx("p",{className:"address-details",children:te.direccionCompleta}),te.ubicacion&&o.jsxs("a",{href:te.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[o.jsx(Sf,{className:"w-4 h-4"}),"Ver ubicación"]})]}),o.jsxs("div",{className:"address-actions",children:[o.jsx("button",{onClick:()=>_e(te),className:"address-action-btn edit-btn","aria-label":"Editar dirección",children:o.jsx(qU,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Ze(te),className:"address-action-btn select-btn","aria-label":"Seleccionar dirección",children:o.jsx(Fu,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>jt(te.id),className:"address-action-btn delete-btn","aria-label":"Eliminar dirección",children:o.jsx(i$,{className:"w-4 h-4"})})]})]},te.id))})})]})]})]})}),o.jsx(dn,{children:st&&o.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:o.jsxs("div",{className:"loaderInner",children:[o.jsx("div",{className:"loader",children:o.jsxs("div",{className:"truckWrapper",children:[o.jsx("div",{className:"truckBody",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 198 93",className:"trucksvg",children:[o.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#F83D3D",d:"M135 22.5H177.264C178.295 22.5 179.22 23.133 179.594 24.0939L192.33 56.8443C192.442 57.1332 192.5 57.4404 192.5 57.7504V89C192.5 90.3807 191.381 91.5 190 91.5H135C133.619 91.5 132.5 90.3807 132.5 89V25C132.5 23.6193 133.619 22.5 135 22.5Z"}),o.jsx("path",{strokeWidth:"3",stroke:"#282828",fill:"#7D7C7C",d:"M146 33.5H181.741C182.779 33.5 183.709 34.1415 184.078 35.112L190.538 52.112C191.16 53.748 189.951 55.5 188.201 55.5H146C144.619 55.5 143.5 54.3807 143.5 53V36C143.5 34.6193 144.619 33.5 146 33.5Z"}),o.jsx("path",{strokeWidth:"2",stroke:"#282828",fill:"#282828",d:"M150 65C150 65.39 149.763 65.8656 149.127 66.2893C148.499 66.7083 147.573 67 146.5 67C145.427 67 144.501 66.7083 143.873 66.2893C143.237 65.8656 143 65.39 143 65C143 64.61 143.237 64.1344 143.873 63.7107C144.501 63.2917 145.427 63 146.5 63C147.573 63 148.499 63.2917 149.127 63.7107C149.763 64.1344 150 64.61 150 65Z"}),o.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#FFFCAB",rx:"1",height:"7",width:"5",y:"63",x:"187"}),o.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#282828",rx:"1",height:"11",width:"4",y:"81",x:"193"}),o.jsx("rect",{strokeWidth:"3",stroke:"#282828",fill:"#DFDFDF",rx:"2.5",height:"90",width:"121",y:"1.5",x:"6.5"}),o.jsx("rect",{strokeWidth:"2",stroke:"#282828",fill:"#DFDFDF",rx:"2",height:"4",width:"6",y:"84",x:"1"})]})}),o.jsxs("div",{className:"truckTires",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[o.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),o.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]}),o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 30 30",className:"tiresvg",children:[o.jsx("circle",{strokeWidth:"3",stroke:"#282828",fill:"#282828",r:"13.5",cy:"15",cx:"15"}),o.jsx("circle",{fill:"#DFDFDF",r:"7",cy:"15",cx:"15"})]})]}),o.jsx("div",{className:"road"}),o.jsx("svg",{xmlSpace:"preserve",viewBox:"0 0 453.459 453.459",xmlns:"http://www.w3.org/2000/svg",className:"lampPost",fill:"#000000",children:o.jsx("path",{d:`M252.882,0c-37.781,0-68.686,29.953-70.245,67.358h-6.917v8.954c-26.109,2.163-45.463,10.011-45.463,19.366h9.993
c-1.65,5.146-2.507,10.54-2.507,16.017c0,28.956,23.558,52.514,52.514,52.514c28.956,0,52.514-23.558,52.514-52.514
c0-5.478-0.856-10.872-2.506-16.017h9.992c0-9.354-19.352-17.204-45.463-19.366v-8.954h-6.149C200.189,38.779,223.924,16,252.882,16
c29.952,0,54.32,24.368,54.32,54.32c0,28.774-11.078,37.009-25.105,47.437c-17.444,12.968-37.216,27.667-37.216,78.884v113.914
h-0.797c-5.068,0-9.174,4.108-9.174,9.177c0,2.844,1.293,5.383,3.321,7.066c-3.432,27.933-26.851,95.744-8.226,115.459v11.202h45.75
v-11.202c18.625-19.715-4.794-87.527-8.227-115.459c2.029-1.683,3.322-4.223,3.322-7.066c0-5.068-4.107-9.177-9.176-9.177h-0.795
V196.641c0-43.174,14.942-54.283,30.762-66.043c14.793-10.997,31.559-23.461,31.559-60.277C323.202,31.545,291.656,0,252.882,0z
M232.77,111.694c0,23.442-19.071,42.514-42.514,42.514c-23.442,0-42.514-19.072-42.514-42.514c0-5.531,1.078-10.957,3.141-16.017
h78.747C231.693,100.736,232.77,106.162,232.77,111.694z`})})]})}),o.jsx("div",{className:"loaderText",children:"¡Dirección seleccionada!"})]})})}),o.jsx(dn,{children:ce&&o.jsx(oe.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:o.jsxs(oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"¿Eliminar dirección?"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"¿Estás seguro que quieres eliminar esta dirección? Esta acción no se puede deshacer."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsx("button",{onClick:Nt,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:te=>te.target.style.backgroundColor="#f9fafb",onMouseOut:te=>te.target.style.backgroundColor="white",children:"Cancelar"}),o.jsx("button",{onClick:At,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:te=>te.target.style.backgroundColor="#dc2626",onMouseOut:te=>te.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),st&&o.jsxs("div",{className:"truck-loader-overlay",children:[o.jsxs("div",{className:"spinner",children:[o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{})]}),o.jsx("div",{className:"truck-loader-text",children:"Procesando entrega..."})]}),o.jsx(c$,{abierto:Me,onClose:()=>Ve(!1),onPick:te=>j(te),valorActual:N})]}),document.body)}const u$=()=>{var h;const{usuario:t,usuarioInfo:e,logout:n}=Br(),{setModalAbierto:r}=Gc(),i=T.useRef(null);ai();const[a,c]=T.useState(!1),u=(()=>{try{if(!t||!e||!e.metodoEntrega)return"Selecciona método de entrega";if((e.metodoEntrega||"").toLowerCase()==="tienda")return"Recoger en tienda";const g=(e.direccion||"").trim();return g?/maps\.|google\.com\/maps|Ubicación:/i.test(g)?"Dirección de Google Maps":g:"Selecciona método de entrega"}catch{return"Selecciona método de entrega"}})();return T.useEffect(()=>{i.current&&i.current.focus()},[]),T.useEffect(()=>{function f(){}return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]),o.jsxs(o.Fragment,{children:[o.jsx(oe.header,{initial:{y:-120,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,ease:"easeOut"},className:"fixed top-0 left-0 w-full bg-white dark:bg-gray-800 shadow-md z-[9999] pl-0 pr-4 py-3 transition-colors duration-300",style:{backdropFilter:"saturate(180%) blur(15px)",maxWidth:"100vw",overflowX:"hidden"},children:o.jsxs("div",{className:"flex items-center justify-between w-full gap-3",children:[o.jsx("div",{id:"search-bar-container",className:"flex-grow max-w-full px-2 xl:hidden",children:o.jsx(Q_,{onClose:()=>{},ref:i,placeholder:"Buscar en pcu.com.do"})}),o.jsxs("div",{className:"hidden xl:flex w-full items-center justify-between gap-6",children:[o.jsxs(St,{to:"/",className:"flex items-center gap-3 min-w-0 flex-shrink-0",children:[o.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal",className:"h-10 object-contain"}),o.jsxs("button",{type:"button",onClick:()=>{if(!t)return r(!0);c(!0)},className:"flex flex-col leading-tight text-left text-xs text-gray-700 dark:text-white font-medium hover:text-[#0ea5e9] dark:hover:text-[#60a5fa] transition",children:[o.jsxs("span",{className:"flex items-center gap-1 text-[11px] text-gray-500 dark:text-gray-300",children:[o.jsx(ih,{className:"text-[#4FC3F7]"}),"Método de entrega"]}),o.jsx("strong",{className:"block text-[12px] font-semibold text-gray-700 dark:text-white tracking-wide truncate max-w-[120px] sm:max-w-[160px] md:max-w-[200px] lg:max-w-[220px]",title:u,children:u})]})]}),o.jsx("div",{className:"flex-grow max-w-xl",children:o.jsx(Q_,{onClose:()=>{},ref:i,placeholder:"Buscar en pcu.com.do"})}),o.jsxs("div",{className:"flex items-center gap-6 text-sm font-medium text-gray-700 dark:text-white",children:[o.jsx(St,{to:"/",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Inicio"}),o.jsx(St,{to:"/categorias",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Categorías"}),o.jsx(St,{to:"/tiendas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Tiendas"}),o.jsx(St,{to:"/vender",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Vender"}),o.jsx(St,{to:"/nosotros",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Nosotros"}),o.jsx(St,{to:"/contacto",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Contáctanos"}),o.jsx(St,{to:"/estafetas",className:"nav-link text-gray-700 dark:text-white hover:text-[#4FC3F7] dark:hover:text-[#60a5fa] transition",children:"Estafetas"}),o.jsx(St,{to:"/carrito",className:"nav-link text-xl hover:scale-110 transition",children:"🛒"}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&o.jsx(St,{to:"/admin",className:"px-3 py-2 rounded bg-[#4FC3F7] text-white hover:bg-[#3BB0F3] shadow transition",children:"Panel Admin"}),t?o.jsx(oe.div,{className:"relative",whileTap:{scale:.95},children:o.jsx(St,{to:"/profile",children:o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[#4FC3F7] shadow hover:shadow-lg transition cursor-pointer bg-white dark:bg-gray-700",children:t.photoURL?o.jsx("img",{src:t.photoURL,alt:"Perfil",className:"w-full h-full object-cover rounded-full"}):o.jsx("div",{className:"w-full h-full bg-[#4FC3F7] text-white flex items-center justify-center font-bold text-base",children:((h=t.displayName)==null?void 0:h.charAt(0).toUpperCase())||"U"})})})}):o.jsx(oe.button,{onClick:()=>r(!0),className:"px-4 py-2 text-sm bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white rounded-lg font-semibold shadow transition",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Iniciar sesión"})]})]})]})}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&o.jsx("div",{className:"xl:hidden fixed bottom-[80px] right-4 z-[9999]",children:o.jsx(St,{to:"/admin",className:"bg-[#4FC3F7] hover:bg-[#3BB0F3] text-white px-5 py-3 rounded-full shadow-xl font-semibold text-base",children:"Panel Admin"})}),a&&t&&o.jsx(g4,{abierto:a,onClose:()=>c(!1),usuarioId:(e==null?void 0:e.uid)||(t==null?void 0:t.uid),direccionEditar:null,actualizarLista:()=>{}})]})};function Im({isOpen:t,onClose:e,onIniciarSesion:n}){return t?UI.createPortal(o.jsx("div",{onClick:e,className:"fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm z-[11000] flex items-center justify-center p-4",style:{top:0,left:0},children:o.jsxs(oe.div,{onClick:r=>r.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40 z-[11001]",children:[o.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold","aria-label":"Cerrar modal",children:"×"}),o.jsxs("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-[#3b82f6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A11.955 11.955 0 0112 15c2.32 0 4.47.66 6.264 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})}),"Inicia sesión"]}),o.jsx("p",{className:"mb-6 text-center text-gray-300",children:"Necesitas iniciar sesión para acceder a esta función"}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:()=>{e(),n()},className:"w-full max-w-[120px] px-5 py-2 bg-[#3b82f6] hover:bg-[#2563eb] rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Iniciar sesión"}),o.jsx("button",{onClick:e,className:"w-full max-w-[120px] px-5 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold shadow-lg transition transform hover:scale-105",children:"Cancelar"})]})]})}),document.body):null}function d$(){const{usuario:t}=Br(),e=ai(),{abrirModal:n}=Gc(),[r,i]=T.useState(!1),a=(h,f)=>{!t&&(f==="/carrito"||f==="/Profile")?(h.preventDefault(),i(!0)):e(f)},c=()=>i(!1),u=()=>{c(),n()};return o.jsx("div",{className:"footer-block",children:o.jsxs("footer",{className:"footer futuristic-footer relative bg-black text-gray-300 py-12 text-sm sm:text-base",children:[o.jsx("div",{className:"footer-bg-animated"}),o.jsx("div",{className:"w-full flex justify-center mb-10 relative z-20",children:o.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal Logo",className:"footer-logo-glow w-32 sm:w-44 xl:w-64 transition-transform duration-300 hover:scale-105"})}),o.jsxs("div",{className:"footer-cols-wrapper relative z-20 max-w-7xl mx-auto px-4 sm:px-6 xl:px-8 grid grid-cols-2 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Playcenter Universal"}),o.jsx("p",{children:"Tu universo de tecnología y gaming en Santiago, R.D."}),o.jsxs("p",{className:"mt-3 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(ih,{})," Av. Estrella Sadhalá #55, frente a la doble vía"]}),o.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(ox,{})," +1 (809) 582-1212 (Internet)"]}),o.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(ox,{})," +1 (849) 635-7000 (Tienda)"]}),o.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",children:[o.jsx(T1,{})," playcenter121@gmail.com"]})]}),o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Navegación"}),o.jsx("ul",{className:"footer-nav-list",children:[["Categorías","/categorias",!1],["Nosotros","/nosotros",!1],["Contáctanos","/contacto",!1],["Estafetas","/estafetas",!1],["Tiendas","/tiendas",!1],["Vender","/vender",!1],["Carrito","/carrito",!0],["Mi perfil","/Profile",!0]].map(([h,f,g])=>o.jsx("li",{children:g?o.jsx("a",{href:f,onClick:y=>a(y,f),className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm cursor-pointer",children:h}):o.jsx("a",{href:f,className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm",children:h})},h))})]}),o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",children:"Horario"}),o.jsx("p",{children:"Lunes a Viernes: 8:30am - 5:30pm"}),o.jsx("p",{children:"Sábados: 8:30am - 12:30pm"}),o.jsx("p",{children:"Domingos: Cerrado"})]}),o.jsxs("div",{className:"footer-col",children:[o.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",children:"Conéctate con nosotros"}),o.jsx("div",{className:"grid grid-cols-2 gap-4 justify-items-center sm:justify-items-start",children:[["https://www.facebook.com/pcu12","/Facebook.png","Facebook"],["https://www.instagram.com/playcenter_universal/?hl=es","/Instagram.png","Instagram"],["https://www.tiktok.com/@playcenter_universal?lang=es","/tiktok.png","TikTok"],["https://youtube.com/@playcenteruniversal1916","/Youtube.png","YouTube"]].map(([h,f,g])=>o.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"relative group",children:o.jsx("img",{src:f,alt:g,className:"footer-social-icon-neon w-12 h-12 sm:w-16 sm:h-16 rounded-full transition-transform duration-300 transform group-hover:scale-110"})},g))})]})]}),o.jsxs("p",{className:"footer-copyright text-center text-gray-500 text-[11px] sm:text-xs mt-10 relative z-20",children:["© ",new Date().getFullYear()," Playcenter Universal. Todos los derechos reservados."]}),o.jsx(Im,{isOpen:r,onClose:c,onIniciarSesion:u})]})})}var K0={exports:{}},X0,xk;function h$(){if(xk)return X0;xk=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return X0=t,X0}var Q0,vk;function f$(){if(vk)return Q0;vk=1;var t=h$();function e(){}function n(){}return n.resetWarningCache=e,Q0=function(){function r(c,u,h,f,g,y){if(y!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},Q0}var bk;function p$(){return bk||(bk=1,K0.exports=f$()()),K0.exports}var m$=p$();const en=Fd(m$),g$=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Bc(t,e,n){const r=y$(t),{webkitRelativePath:i}=t,a=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&wk(r,"path",a),wk(r,"relativePath",a),r}function y$(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=g$.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function wk(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const x$=[".DS_Store","Thumbs.db"];function v$(t){return _l(this,void 0,void 0,function*(){return Fp(t)&&b$(t.dataTransfer)?k$(t.dataTransfer,t.type):w$(t)?_$(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?E$(t):[]})}function b$(t){return Fp(t)}function w$(t){return Fp(t)&&Fp(t.target)}function Fp(t){return typeof t=="object"&&t!==null}function _$(t){return dx(t.target.files).map(e=>Bc(e))}function E$(t){return _l(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Bc(n))})}function k$(t,e){return _l(this,void 0,void 0,function*(){if(t.items){const n=dx(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(S$));return _k(y4(r))}return _k(dx(t.files).map(n=>Bc(n)))})}function _k(t){return t.filter(e=>x$.indexOf(e.name)===-1)}function dx(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function S$(t){if(typeof t.webkitGetAsEntry!="function")return Ek(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?x4(e):Ek(t,e)}function y4(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?y4(n):[n]],[])}function Ek(t,e){return _l(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const c=yield a.getFile();return c.handle=a,Bc(c)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Bc(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function T$(t){return _l(this,void 0,void 0,function*(){return t.isDirectory?x4(t):N$(t)})}function x4(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function a(){e.readEntries(c=>_l(this,void 0,void 0,function*(){if(c.length){const u=Promise.all(c.map(T$));i.push(u),a()}else try{const u=yield Promise.all(i);n(u)}catch(u){r(u)}}),c=>{r(c)})}a()})}function N$(t){return _l(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Bc(r,t.fullPath);e(i)},r=>{n(r)})})})}var Tf={},kk;function C$(){return kk||(kk=1,Tf.__esModule=!0,Tf.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?a===u.replace(/\/.*$/,""):i===u})}return!0}),Tf}var A$=C$();const Y0=Fd(A$);function Sk(t){return P$(t)||I$(t)||b4(t)||j$()}function j$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function P$(t){if(Array.isArray(t))return hx(t)}function Tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(n),!0).forEach(function(r){v4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pd(t,e){return M$(t)||D$(t,e)||b4(t,e)||R$()}function R$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b4(t,e){if(t){if(typeof t=="string")return hx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hx(t,e)}}function hx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function D$(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(h){a=!0,u=h}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw u}}return r}}function M$(t){if(Array.isArray(t))return t}var O$=typeof Y0=="function"?Y0:Y0.default,L$="file-invalid-type",V$="file-too-large",F$="file-too-small",U$="too-many-files",$$=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:L$,message:"File type must be ".concat(r)}},Ck=function(e){return{code:V$,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Ak=function(e){return{code:F$,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},z$={code:U$,message:"Too many files"};function w4(t,e){var n=t.type==="application/x-moz-file"||O$(t,e);return[n,n?null:$$(e)]}function _4(t,e,n){if(Zo(t.size))if(Zo(e)&&Zo(n)){if(t.size>n)return[!1,Ck(n)];if(t.size<e)return[!1,Ak(e)]}else{if(Zo(e)&&t.size<e)return[!1,Ak(e)];if(Zo(n)&&t.size>n)return[!1,Ck(n)]}return[!0,null]}function Zo(t){return t!=null}function B$(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,a=t.multiple,c=t.maxFiles,u=t.validator;return!a&&e.length>1||a&&c>=1&&e.length>c?!1:e.every(function(h){var f=w4(h,n),g=Pd(f,1),y=g[0],x=_4(h,r,i),w=Pd(x,1),S=w[0],b=u?u(h):null;return y&&S&&!b})}function Up(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Nf(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function jk(t){t.preventDefault()}function H$(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function W$(t){return t.indexOf("Edge/")!==-1}function q$(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return H$(t)||W$(t)}function ws(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];return e.some(function(u){return!Up(r)&&u&&u.apply(void 0,[r].concat(a)),Up(r)})}}function G$(){return"showOpenFilePicker"in window}function K$(t){if(Zo(t)){var e=Object.entries(t).filter(function(n){var r=Pd(n,2),i=r[0],a=r[1],c=!0;return E4(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(a)||!a.every(k4))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(n,r){var i=Pd(r,2),a=i[0],c=i[1];return Nk(Nk({},n),{},v4({},a,c))},{});return[{description:"Files",accept:e}]}return t}function X$(t){if(Zo(t))return Object.entries(t).reduce(function(e,n){var r=Pd(n,2),i=r[0],a=r[1];return[].concat(Sk(e),[i],Sk(a))},[]).filter(function(e){return E4(e)||k4(e)}).join(",")}function Q$(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Y$(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function E4(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function k4(t){return/^.*\.[\w]+$/.test(t)}var J$=["children"],Z$=["open"],ez=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],tz=["refKey","onChange","onClick"];function nz(t){return sz(t)||iz(t)||S4(t)||rz()}function rz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iz(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sz(t){if(Array.isArray(t))return fx(t)}function J0(t,e){return lz(t)||oz(t,e)||S4(t,e)||az()}function az(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S4(t,e){if(t){if(typeof t=="string")return fx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fx(t,e)}}function fx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,c,u;try{for(n=n.call(t);!(i=(c=n.next()).done)&&(r.push(c.value),!(e&&r.length===e));i=!0);}catch(h){a=!0,u=h}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw u}}return r}}function lz(t){if(Array.isArray(t))return t}function Ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ik(Object(n),!0).forEach(function(r){px(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function px(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $p(t,e){if(t==null)return{};var n=cz(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var N1=T.forwardRef(function(t,e){var n=t.children,r=$p(t,J$),i=N4(r),a=i.open,c=$p(i,Z$);return T.useImperativeHandle(e,function(){return{open:a}},[a]),zr.createElement(T.Fragment,null,n(_n(_n({},c),{},{open:a})))});N1.displayName="Dropzone";var T4={disabled:!1,getFilesFromEvent:v$,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};N1.defaultProps=T4;N1.propTypes={children:en.func,accept:en.objectOf(en.arrayOf(en.string)),multiple:en.bool,preventDropOnDocument:en.bool,noClick:en.bool,noKeyboard:en.bool,noDrag:en.bool,noDragEventsBubbling:en.bool,minSize:en.number,maxSize:en.number,maxFiles:en.number,disabled:en.bool,getFilesFromEvent:en.func,onFileDialogCancel:en.func,onFileDialogOpen:en.func,useFsAccessApi:en.bool,autoFocus:en.bool,onDragEnter:en.func,onDragLeave:en.func,onDragOver:en.func,onDrop:en.func,onDropAccepted:en.func,onDropRejected:en.func,onError:en.func,validator:en.func};var mx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function N4(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=_n(_n({},T4),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,c=e.minSize,u=e.multiple,h=e.maxFiles,f=e.onDragEnter,g=e.onDragLeave,y=e.onDragOver,x=e.onDrop,w=e.onDropAccepted,S=e.onDropRejected,b=e.onFileDialogCancel,N=e.onFileDialogOpen,j=e.useFsAccessApi,M=e.autoFocus,O=e.preventDropOnDocument,F=e.noClick,H=e.noKeyboard,K=e.noDrag,R=e.noDragEventsBubbling,I=e.onError,A=e.validator,k=T.useMemo(function(){return X$(n)},[n]),V=T.useMemo(function(){return K$(n)},[n]),U=T.useMemo(function(){return typeof N=="function"?N:Pk},[N]),D=T.useMemo(function(){return typeof b=="function"?b:Pk},[b]),xe=T.useRef(null),Ke=T.useRef(null),st=T.useReducer(uz,mx),qe=J0(st,2),ce=qe[0],ue=qe[1],de=ce.isFocused,z=ce.isFileDialogActive,Y=T.useRef(typeof window<"u"&&window.isSecureContext&&j&&G$()),be=function(){!Y.current&&z&&setTimeout(function(){if(Ke.current){var ne=Ke.current.files;ne.length||(ue({type:"closeDialog"}),D())}},300)};T.useEffect(function(){return window.addEventListener("focus",be,!1),function(){window.removeEventListener("focus",be,!1)}},[Ke,z,D,Y]);var Me=T.useRef([]),Ve=function(ne){xe.current&&xe.current.contains(ne.target)||(ne.preventDefault(),Me.current=[])};T.useEffect(function(){return O&&(document.addEventListener("dragover",jk,!1),document.addEventListener("drop",Ve,!1)),function(){O&&(document.removeEventListener("dragover",jk),document.removeEventListener("drop",Ve))}},[xe,O]),T.useEffect(function(){return!r&&M&&xe.current&&xe.current.focus(),function(){}},[xe,M,r]);var it=T.useCallback(function(_e){I?I(_e):console.error(_e)},[I]),ct=T.useCallback(function(_e){_e.preventDefault(),_e.persist(),Xe(_e),Me.current=[].concat(nz(Me.current),[_e.target]),Nf(_e)&&Promise.resolve(i(_e)).then(function(ne){if(!(Up(_e)&&!R)){var ge=ne.length,Ne=ge>0&&B$({files:ne,accept:k,minSize:c,maxSize:a,multiple:u,maxFiles:h,validator:A}),te=ge>0&&!Ne;ue({isDragAccept:Ne,isDragReject:te,isDragActive:!0,type:"setDraggedFiles"}),f&&f(_e)}}).catch(function(ne){return it(ne)})},[i,f,it,R,k,c,a,u,h,A]),Be=T.useCallback(function(_e){_e.preventDefault(),_e.persist(),Xe(_e);var ne=Nf(_e);if(ne&&_e.dataTransfer)try{_e.dataTransfer.dropEffect="copy"}catch{}return ne&&y&&y(_e),!1},[y,R]),et=T.useCallback(function(_e){_e.preventDefault(),_e.persist(),Xe(_e);var ne=Me.current.filter(function(Ne){return xe.current&&xe.current.contains(Ne)}),ge=ne.indexOf(_e.target);ge!==-1&&ne.splice(ge,1),Me.current=ne,!(ne.length>0)&&(ue({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Nf(_e)&&g&&g(_e))},[xe,g,R]),ut=T.useCallback(function(_e,ne){var ge=[],Ne=[];_e.forEach(function(te){var Ie=w4(te,k),B=J0(Ie,2),Q=B[0],le=B[1],J=_4(te,c,a),se=J0(J,2),Ue=se[0],ze=se[1],q=A?A(te):null;if(Q&&Ue&&!q)ge.push(te);else{var Ee=[le,ze];q&&(Ee=Ee.concat(q)),Ne.push({file:te,errors:Ee.filter(function(He){return He})})}}),(!u&&ge.length>1||u&&h>=1&&ge.length>h)&&(ge.forEach(function(te){Ne.push({file:te,errors:[z$]})}),ge.splice(0)),ue({acceptedFiles:ge,fileRejections:Ne,isDragReject:Ne.length>0,type:"setFiles"}),x&&x(ge,Ne,ne),Ne.length>0&&S&&S(Ne,ne),ge.length>0&&w&&w(ge,ne)},[ue,u,k,c,a,h,x,w,S,A]),_t=T.useCallback(function(_e){_e.preventDefault(),_e.persist(),Xe(_e),Me.current=[],Nf(_e)&&Promise.resolve(i(_e)).then(function(ne){Up(_e)&&!R||ut(ne,_e)}).catch(function(ne){return it(ne)}),ue({type:"reset"})},[i,ut,it,R]),mt=T.useCallback(function(){if(Y.current){ue({type:"openDialog"}),U();var _e={multiple:u,types:V};window.showOpenFilePicker(_e).then(function(ne){return i(ne)}).then(function(ne){ut(ne,null),ue({type:"closeDialog"})}).catch(function(ne){Q$(ne)?(D(ne),ue({type:"closeDialog"})):Y$(ne)?(Y.current=!1,Ke.current?(Ke.current.value=null,Ke.current.click()):it(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):it(ne)});return}Ke.current&&(ue({type:"openDialog"}),U(),Ke.current.value=null,Ke.current.click())},[ue,U,D,j,ut,it,V,u]),kt=T.useCallback(function(_e){!xe.current||!xe.current.isEqualNode(_e.target)||(_e.key===" "||_e.key==="Enter"||_e.keyCode===32||_e.keyCode===13)&&(_e.preventDefault(),mt())},[xe,mt]),Ot=T.useCallback(function(){ue({type:"focus"})},[]),ie=T.useCallback(function(){ue({type:"blur"})},[]),Fe=T.useCallback(function(){F||(q$()?setTimeout(mt,0):mt())},[F,mt]),je=function(ne){return r?null:ne},fe=function(ne){return H?null:je(ne)},Ze=function(ne){return K?null:je(ne)},Xe=function(ne){R&&ne.stopPropagation()},jt=T.useMemo(function(){return function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=_e.refKey,ge=ne===void 0?"ref":ne,Ne=_e.role,te=_e.onKeyDown,Ie=_e.onFocus,B=_e.onBlur,Q=_e.onClick,le=_e.onDragEnter,J=_e.onDragOver,se=_e.onDragLeave,Ue=_e.onDrop,ze=$p(_e,ez);return _n(_n(px({onKeyDown:fe(ws(te,kt)),onFocus:fe(ws(Ie,Ot)),onBlur:fe(ws(B,ie)),onClick:je(ws(Q,Fe)),onDragEnter:Ze(ws(le,ct)),onDragOver:Ze(ws(J,Be)),onDragLeave:Ze(ws(se,et)),onDrop:Ze(ws(Ue,_t)),role:typeof Ne=="string"&&Ne!==""?Ne:"presentation"},ge,xe),!r&&!H?{tabIndex:0}:{}),ze)}},[xe,kt,Ot,ie,Fe,ct,Be,et,_t,H,K,r]),Nt=T.useCallback(function(_e){_e.stopPropagation()},[]),At=T.useMemo(function(){return function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ne=_e.refKey,ge=ne===void 0?"ref":ne,Ne=_e.onChange,te=_e.onClick,Ie=$p(_e,tz),B=px({accept:k,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:je(ws(Ne,_t)),onClick:je(ws(te,Nt)),tabIndex:-1},ge,Ke);return _n(_n({},B),Ie)}},[Ke,n,u,_t,r]);return _n(_n({},ce),{},{isFocused:de&&!r,getRootProps:jt,getInputProps:At,rootRef:xe,inputRef:Ke,open:je(mt)})}function uz(t,e){switch(e.type){case"focus":return _n(_n({},t),{},{isFocused:!0});case"blur":return _n(_n({},t),{},{isFocused:!1});case"openDialog":return _n(_n({},mx),{},{isFileDialogActive:!0});case"closeDialog":return _n(_n({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return _n(_n({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return _n(_n({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return _n({},mx);default:return t}}function Pk(){}const dz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"ufu-dropzone-icon",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z"})}),hz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),fz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:o.jsx("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z"})}),pz=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 100-12 6 6 0 000 12zM12 14.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.5h13.628a2.31 2.31 0 011.642 3.953l-.837 1.172-3.44-3.44-3.44 3.44-.837-1.172a2.31 2.31 0 01-1.642-3.953H6.827z"})]}),mz=()=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"})}),gz=({file:t,onRemove:e,onSetMain:n,onMove:r,index:i,fileCount:a})=>{const{url:c,type:u,name:h,size:f,progress:g,error:y,isMain:x}=t,[w,S]=T.useState(!1),b=T.useRef(null),N=(j,M=2)=>{if(!j||j===0)return"0 Bytes";const O=1024,F=M<0?0:M,H=["Bytes","KB","MB","GB"],K=Math.floor(Math.log(j)/Math.log(O));return parseFloat((j/Math.pow(O,K)).toFixed(F))+" "+H[K]};return T.useEffect(()=>{if(u==="video"&&b.current){const j=()=>S(!0);return b.current.addEventListener("loadedmetadata",j),()=>{b.current&&b.current.removeEventListener("loadedmetadata",j)}}},[u]),o.jsxs(oe.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`ufu-preview-item ${x?"ufu-main-item":""}`,children:[o.jsx("div",{className:"ufu-preview-media",children:u==="image"?o.jsx("img",{src:c,alt:h,className:"object-contain w-full h-full",loading:"eager",onLoad:()=>{},onError:j=>{j.target.onerror=null,j.target.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}):u==="video"?o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:b,src:c,preload:"metadata",muted:!0,className:`object-contain w-full h-full ${w?"opacity-100":"opacity-0"}`,onError:j=>{j.target.onerror=null,S(!0)}}),o.jsx("div",{className:`video-overlay ${w?"with-thumbnail":""}`,children:o.jsx(fz,{})})]}):o.jsxs("div",{className:"document-preview",children:[o.jsx(hz,{}),o.jsx("span",{className:"document-ext",children:h.split(".").pop().toUpperCase()})]})}),o.jsxs("div",{className:"ufu-preview-item-info",children:[o.jsx("p",{className:"ufu-preview-item-name",title:h,children:h.length>20?h.substring(0,18)+"...":h}),o.jsx("p",{className:"ufu-preview-item-size",children:N(f)})]}),o.jsx(dn,{}),o.jsxs("div",{className:"ufu-controls-overlay",children:[o.jsx("button",{type:"button",onClick:j=>{if(j.stopPropagation(),u==="image"){const M=document.createElement("div");M.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const O=document.createElement("img");O.src=c,O.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                object-fit: contain;
                border-radius: 8px;
                cursor: default;
              `;const F=document.createElement("button");F.innerHTML="×",F.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,M.appendChild(O),M.appendChild(F),document.body.appendChild(M);const H=()=>{document.body.removeChild(M)};M.addEventListener("click",H),F.addEventListener("click",H);const K=R=>{R.key==="Escape"&&(H(),document.removeEventListener("keydown",K))};document.addEventListener("keydown",K),O.addEventListener("click",R=>R.stopPropagation())}else if(u==="video"){const M=document.createElement("div");M.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const O=document.createElement("video");O.src=c,O.controls=!0,O.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                border-radius: 8px;
                cursor: default;
              `;const F=document.createElement("button");F.innerHTML="×",F.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,M.appendChild(O),M.appendChild(F),document.body.appendChild(M);const H=()=>{O.pause(),document.body.removeChild(M)};M.addEventListener("click",H),F.addEventListener("click",H),O.addEventListener("click",K=>K.stopPropagation())}else{const M=document.createElement("a");M.href=c,M.download=h,M.click()}},className:"ufu-control-button ufu-preview-button",title:"Ver archivo","aria-label":"Ver archivo en pantalla completa",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),o.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),e(t.id)},className:"ufu-control-button ufu-delete-button",title:"Eliminar","aria-label":"Eliminar archivo",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),n&&!x&&o.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),n(t.id)},className:"ufu-control-button ufu-set-main-button",title:"Establecer como principal","aria-label":"Establecer como imagen principal",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.622l1.208 5.273a.563.563 0 01-.841.589l-4.743-2.85a.563.563 0 00-.586 0l-4.743 2.85a.563.563 0 01-.841-.589l1.208-5.273a.563.563 0 00-.182-.622l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),r&&a>1&&o.jsxs("div",{className:"ufu-reorder-buttons",children:[o.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),r(i,"up")},disabled:i===0,className:"ufu-control-button",title:"Mover arriba","aria-label":"Mover archivo hacia arriba",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})}),o.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),r(i,"down")},disabled:i===a-1,className:"ufu-control-button",title:"Mover abajo","aria-label":"Mover archivo hacia abajo",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]})]}),x&&o.jsxs("div",{className:"ufu-main-badge",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:o.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c.321-.772 1.415-.772 1.736 0l1.681 4.06c.064.155.24.263.415.284l4.473.65c.803.117 1.125 1.106.547 1.65l-3.238 3.153a.477.477 0 00-.137.53l.764 4.456c.138.806-.702 1.425-1.425 1.053l-3.992-2.1a.498.498 0 00-.465 0l-3.992 2.1c-.723.372-1.563-.247-1.425-1.053l.764-4.456a.477.477 0 00-.137-.53L2.24 9.667c-.578-.544-.256-1.533.547-1.65l4.473-.65a.476.476 0 00.415-.284l1.681-4.06z",clipRule:"evenodd"})}),o.jsx("span",{children:"Principal"})]})]})},Jo=zr.memo(({files:t=[],onFilesChange:e,acceptedTypes:n="image/*,video/*,application/pdf",multiple:r=!0,maxSize:i=100*1024*1024,maxFiles:a=null,label:c="Medios del Producto",placeholder:u="Arrastra archivos o haz clic para seleccionar",className:h="",showPreview:f=!0,allowReorder:g=!0,allowSetMain:y=!0})=>{const[x,w]=T.useState([]),[S,b]=T.useState(null),[N,j]=T.useState(!1),[M,O]=T.useState(void 0),F=T.useRef(null),[H,K]=T.useState([]),R=T.useRef(!1);T.useEffect(()=>{if(!t||t.length===0){w(de=>(de.length>0&&(R.current=!0),[]));return}const ue=t.map((de,z)=>{if(typeof de=="string"){const Y=de.split(".").pop().toLowerCase(),be=["mp4","mov","webm","avi","mkv","m4v"].includes(Y);return{id:`existing-${z}-${de}`,url:de,type:be?"video":"image",name:de.split("/").pop().split("?")[0],size:0,isMain:z===0,isUploaded:!0}}return de});w(de=>(JSON.stringify(de.map(Y=>Y.id))!==JSON.stringify(ue.map(Y=>Y.id))&&(R.current=!0),ue))},[t.length,t.map(ue=>typeof ue=="string"?ue:(ue==null?void 0:ue.id)||(ue==null?void 0:ue.url)).join("|")]);const I=T.useCallback((ue,de)=>{const z=ue.map(Y=>{let be="document";Y.type.startsWith("image/")?be="image":Y.type.startsWith("video/")&&(be="video");const Me=URL.createObjectURL(Y);return{id:`${Y.name}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,file:Y,url:Me,type:be,name:Y.name,size:Y.size,progress:0,error:null,isMain:!1,isUploading:!1,isUploaded:!1}});de.length>0&&(console.error("Archivos rechazados:",de),K(de.map(({file:Y,errors:be})=>({name:(Y==null?void 0:Y.name)||"Archivo",messages:(be||[]).map(Me=>Me.message)})))),w(Y=>{let be;if(r){const Me=[...Y,...z];be=a?Me.slice(0,a):Me,a&&Me.length>a&&(console.warn(`Límite de ${a} archivos alcanzado. Solo se mantuvieron los primeros ${a}.`),K(Ve=>[...Ve,{name:"Límite de archivos",messages:[`Límite de ${a} archivos alcanzado. Solo se mantuvieron los primeros ${a}.`]}]))}else be=z;return R.current=!0,be})},[r,a]),A=T.useMemo(()=>{const ue=(n||"").trim();if(!ue||ue==="*/*")return;const de=ue.split(",").reduce((z,Y)=>{const be=Y.trim();return be&&(z[be]=[]),z},{});return Object.keys(de).length?de:void 0},[n]),{getRootProps:k,getInputProps:V,isDragActive:U,open:D}=N4({onDrop:I,accept:A,maxSize:i,multiple:r,noClick:!1,noKeyboard:!1,preventDropOnDocument:!0}),xe=ue=>{w(de=>{const z=de.find(be=>be.id===ue);z&&z.url&&z.url.startsWith("blob:")&&URL.revokeObjectURL(z.url);const Y=de.filter(be=>be.id!==ue).map((be,Me)=>({...be,isMain:Me===0}));return R.current=!0,Y})},Ke=ue=>{y&&w(de=>{const z=de.find(Me=>Me.id===ue);if(!z)return de;const Y=de.filter(Me=>Me.id!==ue),be=[z,...Y].map((Me,Ve)=>({...Me,isMain:Ve===0}));return R.current=!0,be})},st=(ue,de)=>{g&&w(z=>{const Y=de==="up"?ue-1:ue+1;if(Y<0||Y>=z.length)return z;const be=[...z];[be[ue],be[Y]]=[be[Y],be[ue]];const Me=be.map((Ve,it)=>({...Ve,isMain:it===0}));return R.current=!0,Me})};T.useEffect(()=>{R.current&&(R.current=!1,typeof e=="function"?e(x):console.warn("⚠️ onFilesChange no es una función"))},[x]);const qe=ue=>{ue.stopPropagation(),O("environment"),setTimeout(()=>{D(),setTimeout(()=>O(void 0),0)},30)},ce=ue=>{ue.stopPropagation(),O(void 0),setTimeout(()=>{D()},0)};return o.jsxs("div",{className:`universal-file-uploader ${h}`,children:[o.jsxs("div",{...k({className:`ufu-dropzone ${U?"dragging":""} ${N?"drag-over":""}`}),ref:F,onDragEnter:()=>j(!0),onDragLeave:()=>j(!1),onDrop:()=>j(!1),children:[o.jsx("input",{...V({style:{display:"none"},multiple:r,capture:M})}),o.jsxs("div",{className:"ufu-dropzone-content",children:[o.jsx(dz,{}),o.jsxs("div",{className:"ufu-dropzone-desktop-text",children:[o.jsx("p",{className:"ufu-dropzone-text-main",children:c}),o.jsx("p",{className:"ufu-dropzone-text-sub",children:u}),o.jsx("button",{type:"button",onClick:ue=>{ue.stopPropagation(),D()},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Seleccionar Archivos"})]}),o.jsxs("div",{className:"ufu-mobile-buttons",children:[o.jsxs("button",{type:"button",onClick:qe,className:"ufu-mobile-button","aria-label":"Abrir cámara",children:[o.jsx(pz,{}),o.jsx("span",{children:"Cámara"})]}),o.jsxs("button",{type:"button",onClick:ce,className:"ufu-mobile-button","aria-label":"Abrir galería",children:[o.jsx(mz,{}),o.jsx("span",{children:"Galería"})]})]})]})]}),H.length>0&&o.jsxs("div",{className:"mt-3 p-3 rounded-md bg-red-50 border border-red-200 text-red-700 text-sm",role:"alert",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("span",{className:"font-semibold",children:"Algunos archivos fueron rechazados"}),o.jsx("button",{type:"button",onClick:()=>K([]),className:"ml-3 text-red-600 hover:text-red-800","aria-label":"Cerrar",title:"Cerrar",children:"×"})]}),o.jsx("ul",{className:"list-disc ml-5 mt-2",children:H.map((ue,de)=>o.jsxs("li",{children:[ue.name?o.jsxs("span",{className:"font-medium",children:[ue.name,": "]}):null,Array.isArray(ue.messages)?ue.messages.join(", "):String(ue)]},de))})]}),x.length>0?o.jsx("div",{className:"ufu-preview-grid",children:o.jsx(dn,{children:x.map((ue,de)=>o.jsx(gz,{file:ue,onRemove:xe,onSetMain:y?Ke:null,onMove:g?st:null,index:de,fileCount:x.length},ue.id))})}):o.jsx("div",{className:"text-center text-gray-500 text-sm mt-4 p-4 border-2 border-dashed border-gray-200 rounded",children:"📁 No hay archivos subidos aún - Arrastra o selecciona archivos arriba"})]})});Jo.displayName="UniversalFileUploader";const C4=({variantes:t=[],varianteSeleccionada:e=0,onVarianteChange:n,showStock:r=!0,showPrice:i=!0,className:a=""})=>{if(!t||t.length===0)return null;const c=t.filter(h=>h&&typeof h.color=="string"&&h.color.trim());if(c.length===0)return null;const u=h=>{n&&n(h)};return o.jsx("div",{className:`visual-variant-selector ${a}`,children:o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:c.map((h,f)=>{var w,S,b;const g=f===e,y=h.cantidad<=0,x=((S=(w=h.imagenPrincipal)==null?void 0:w[0])==null?void 0:S.url)||h.imagen||((b=h.imagenes)==null?void 0:b[0])||null;return o.jsxs(oe.button,{type:"button",onClick:()=>!y&&u(f),disabled:y,whileHover:y?{}:{scale:1.05},whileTap:y?{}:{scale:.95},className:`
                relative p-3 rounded-lg border-2 transition-all duration-200
                ${g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}
                ${y?"opacity-50 cursor-not-allowed":"hover:border-blue-300 dark:hover:border-blue-600 cursor-pointer"}
              `,children:[x&&o.jsx("div",{className:"aspect-square mb-2 rounded overflow-hidden bg-gray-100 dark:bg-gray-700",children:o.jsx("img",{src:x,alt:h.color,className:"w-full h-full object-contain"})}),o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:h.color}),r&&o.jsx("div",{className:`text-xs ${y?"text-red-600 dark:text-red-400":h.cantidad<5?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:y?"Agotado":`${h.cantidad} disponibles`}),i&&h.precio&&o.jsxs("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400 mt-1",children:["RD$ ",Number(h.precio).toFixed(2)]}),g&&o.jsx(oe.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),y&&o.jsx("div",{className:"absolute inset-0 bg-gray-900/50 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold text-sm",children:"Agotado"})})]},f)})})})},Qt={REQUIRED_FIELDS:["nombre","precio","categoria","descripcion"],MIN_TITLE_LENGTH:10,MAX_TITLE_LENGTH:200,MIN_DESCRIPTION_LENGTH:20,MAX_DESCRIPTION_LENGTH:5e3,MIN_PRICE:.01,MAX_PRICE:999999,MIN_STOCK:0,MAX_STOCK:999999,MAX_IMAGES:20,MAX_VIDEOS:10,MAX_EXTRAS:3,MAX_VARIANTS:50,MIN_VARIANT_NAME_LENGTH:2,MAX_VARIANT_NAME_LENGTH:100},Yn={MISSING_TITLE:"El título del producto es obligatorio",MISSING_PRICE:"El precio del producto es obligatorio",MISSING_CATEGORY:"Debe seleccionar una categoría",MISSING_DESCRIPTION:"La descripción del producto es obligatoria",MISSING_MAIN_IMAGE:"Debe subir al menos una imagen principal",TITLE_TOO_SHORT:`El título debe tener al menos ${Qt.MIN_TITLE_LENGTH} caracteres`,TITLE_TOO_LONG:`El título no puede exceder ${Qt.MAX_TITLE_LENGTH} caracteres`,DESCRIPTION_TOO_SHORT:`La descripción debe tener al menos ${Qt.MIN_DESCRIPTION_LENGTH} caracteres`,DESCRIPTION_TOO_LONG:`La descripción no puede exceder ${Qt.MAX_DESCRIPTION_LENGTH} caracteres`,INVALID_PRICE:`El precio debe estar entre $${Qt.MIN_PRICE} y $${Qt.MAX_PRICE}`,INVALID_STOCK:`El stock debe estar entre ${Qt.MIN_STOCK} y ${Qt.MAX_STOCK}`,TOO_MANY_IMAGES:`Máximo ${Qt.MAX_IMAGES} imágenes permitidas`,TOO_MANY_VIDEOS:`Máximo ${Qt.MAX_VIDEOS} videos permitidos`,TOO_MANY_EXTRAS:`Máximo ${Qt.MAX_EXTRAS} archivos extras permitidos`,TOO_MANY_VARIANTS:`Máximo ${Qt.MAX_VARIANTS} variantes permitidas`,VARIANT_NAME_TOO_SHORT:`El nombre de la variante debe tener al menos ${Qt.MIN_VARIANT_NAME_LENGTH} caracteres`,VARIANT_NAME_TOO_LONG:`El nombre de la variante no puede exceder ${Qt.MAX_VARIANT_NAME_LENGTH} caracteres`,DUPLICATE_VARIANT_NAMES:"No puede haber variantes con el mismo nombre",VARIANT_MISSING_STOCK:"Todas las variantes deben tener stock definido"},Mn={ERROR:"error",WARNING:"warning"},Rk=(t,e,n={})=>{const r=[];switch(t){case"nombre":if(!e||!e.trim())r.push({field:"nombre",message:Yn.MISSING_TITLE,severity:Mn.ERROR});else{const i=e.trim();i.length<Qt.MIN_TITLE_LENGTH&&r.push({field:"nombre",message:Yn.TITLE_TOO_SHORT,severity:Mn.ERROR}),i.length>Qt.MAX_TITLE_LENGTH&&r.push({field:"nombre",message:Yn.TITLE_TOO_LONG,severity:Mn.ERROR})}break;case"precio":if(!e&&e!==0)r.push({field:"precio",message:Yn.MISSING_PRICE,severity:Mn.ERROR});else{const i=parseFloat(e);(isNaN(i)||i<Qt.MIN_PRICE||i>Qt.MAX_PRICE)&&r.push({field:"precio",message:Yn.INVALID_PRICE,severity:Mn.ERROR})}break;case"categoria":(!e||!e.trim())&&r.push({field:"categoria",message:Yn.MISSING_CATEGORY,severity:Mn.ERROR});break;case"descripcion":if(!e||!e.trim())r.push({field:"descripcion",message:Yn.MISSING_DESCRIPTION,severity:Mn.ERROR});else{const i=e.trim();i.length<Qt.MIN_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:Yn.DESCRIPTION_TOO_SHORT,severity:Mn.ERROR}),i.length>Qt.MAX_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:Yn.DESCRIPTION_TOO_LONG,severity:Mn.WARNING})}break;case"cantidad":if(e!=null){const i=parseInt(e);(isNaN(i)||i<Qt.MIN_STOCK||i>Qt.MAX_STOCK)&&r.push({field:"cantidad",message:Yn.INVALID_STOCK,severity:Mn.ERROR})}break}return r},yz=(t=[])=>{const e=[];t.length>Qt.MAX_VARIANTS&&e.push({field:"variantes",message:Yn.TOO_MANY_VARIANTS,severity:Mn.ERROR});const n=[];return t.forEach((r,i)=>{if(!r||typeof r!="object")return;const a=r.color||r.name||"";a.trim().length<Qt.MIN_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:Yn.VARIANT_NAME_TOO_SHORT,severity:Mn.ERROR}),a.trim().length>Qt.MAX_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:Yn.VARIANT_NAME_TOO_LONG,severity:Mn.ERROR}),n.includes(a.trim().toLowerCase())?e.push({field:`variantes[${i}].color`,message:Yn.DUPLICATE_VARIANT_NAMES,severity:Mn.ERROR}):n.push(a.trim().toLowerCase());const c=parseInt(r.cantidad);(isNaN(c)||c<0)&&e.push({field:`variantes[${i}].cantidad`,message:Yn.VARIANT_MISSING_STOCK,severity:Mn.ERROR})}),e},xz=t=>{const e=[];return t.imagen||t.imagenPrincipal&&t.imagenPrincipal.length>0||e.push({field:"imagen",message:Yn.MISSING_MAIN_IMAGE,severity:Mn.ERROR}),(t.imagenes||[]).length+(t.imagenesExtra||[]).length>Qt.MAX_IMAGES&&e.push({field:"imagenes",message:Yn.TOO_MANY_IMAGES,severity:Mn.ERROR}),(t.videoUrls||[]).length+(t.videoAcercaArticulo||[]).length>Qt.MAX_VIDEOS&&e.push({field:"videos",message:Yn.TOO_MANY_VIDEOS,severity:Mn.ERROR}),(t.imagenesExtra||[]).length>Qt.MAX_EXTRAS&&e.push({field:"imagenesExtra",message:Yn.TOO_MANY_EXTRAS,severity:Mn.ERROR}),e},vz=t=>{if(!t||typeof t!="object")return[{field:"general",message:"Datos del producto no válidos",severity:Mn.ERROR}];let e=[];if(Qt.REQUIRED_FIELDS.forEach(n=>{try{e=e.concat(Rk(n,t[n],t))}catch(r){console.error(`Error validating field ${n}:`,r)}}),t.cantidad!==void 0)try{e=e.concat(Rk("cantidad",t.cantidad,t))}catch(n){console.error("Error validating cantidad:",n)}try{e=e.concat(xz(t))}catch(n){console.error("Error validating media:",n)}if(t.variantes&&Array.isArray(t.variantes)&&t.variantes.length>0)try{e=e.concat(yz(t.variantes))}catch(n){console.error("Error validating variants:",n)}return e},bz=t=>({isReady:!1,errorCount:1,warningCount:0,errors:[{field:"general",message:"Datos del producto no válidos",severity:Mn.ERROR}],canPublish:!1,status:"incomplete"}),wz=t=>{const[e,n]=zr.useState({isReady:!1,errorCount:0,warningCount:0,errors:[],canPublish:!1,status:"incomplete"});return zr.useEffect(()=>{const r=bz();n(r)},[t]),e},Dk={DRAFT:"draft"},zp={INTERSECTION_THRESHOLD:.1,INTERSECTION_ROOT_MARGIN:"50px",WEBP_SUPPORT:null,AVIF_SUPPORT:null},_z=()=>new Promise(t=>{const e={webp:!1,avif:!1};let n=2;const r=()=>{n--,n===0&&(zp.WEBP_SUPPORT=e.webp,zp.AVIF_SUPPORT=e.avif,t(e))},i=new Image;i.onload=i.onerror=()=>{e.webp=i.height===2,r()},i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";const a=new Image;a.onload=a.onerror=()=>{e.avif=a.height===2,r()},a.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A="});class Ez{constructor(){this.observer=null,this.loadedImages=new Set,this.init()}init(){"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(this.handleIntersection.bind(this),{threshold:zp.INTERSECTION_THRESHOLD,rootMargin:zp.INTERSECTION_ROOT_MARGIN}))}handleIntersection(e){e.forEach(n=>{n.isIntersecting&&(this.loadImage(n.target),this.observer.unobserve(n.target))})}loadImage(e){if(this.loadedImages.has(e))return;const n=e.dataset.src,r=e.dataset.srcset;n&&(e.src=n),r&&(e.srcset=r),e.classList.remove("lazy-loading"),e.classList.add("lazy-loaded"),this.loadedImages.add(e),e.dispatchEvent(new CustomEvent("lazyloaded",{detail:{src:n,srcSet:r}}))}observe(e){this.observer&&e?(e.classList.add("lazy-loading"),this.observer.observe(e)):this.loadImage(e)}unobserve(e){this.observer&&e&&this.observer.unobserve(e)}disconnect(){this.observer&&this.observer.disconnect()}}new Ez;const kz=(t,e="prefetch")=>{Array.isArray(t)&&t.forEach(n=>{const r=document.createElement("link");r.rel=e,r.href=n,e==="preload"&&(r.as="image"),document.head.appendChild(r)})},Sz=async()=>{await _z(),kz(["https://firebasestorage.googleapis.com","https://fonts.googleapis.com","https://fonts.gstatic.com"],"preconnect")},A4=({product:t,onClose:e,onSave:n,sellerId:r})=>{var te,Ie;const{usuario:i,usuarioInfo:a}=Br(),{validation:c,isValid:u,getFieldError:h}=wz(),[f,g]=T.useState({nombre:"",empresa:"",precio:"",cantidad:0,descripcion:"",categoria:"",nuevaCategoria:"",imagen:"",imagenes:[],imagenesExtra:[],videoUrl:"",videoUrls:[],videoAcercaArticulo:[],oferta:!1,precioOferta:"",estado:"Nuevo",acerca:[""],variantes:[{color:"",imagen:"",imagenes:[],cantidad:0,descripcion:"",precio:""}],etiquetas:[""],activo:!0,fechaPublicacion:new Date().toISOString().split("T")[0],peso:"",dimensiones:"",imagenPrincipal:[],galeriaImagenes:[],tresArchivosExtras:[],productStatus:Dk.DRAFT,validationScore:0,lastValidated:null}),[y,x]=T.useState([]),[w,S]=T.useState([]),[b,N]=T.useState(!1),[j,M]=T.useState((t==null?void 0:t.id)||null),[O,F]=T.useState(!1),[H,K]=T.useState(null),[R,I]=T.useState(!1),[A,k]=T.useState([]),[V,U]=T.useState(!1),[D,xe]=T.useState([]),[Ke,st]=T.useState(!1),[qe,ce]=T.useState(0);T.useEffect(()=>{var B;Sz(),it(),ct(),t&&g({...t,precio:((B=t.precio)==null?void 0:B.toString())||"",fechaPublicacion:t.fechaPublicacion||new Date().toISOString().split("T")[0],acerca:t.acerca||[""],etiquetas:t.etiquetas||[""],variantes:t.variantes||[{color:"",imagen:"",imagenes:[],cantidad:0}],videoUrl:t.videoUrl||"",videoUrls:t.videoUrls||[],videoAcercaArticulo:t.videoAcercaArticulo||[],imagenPrincipal:t.imagenPrincipal||(t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:t.galeriaImagenes||t.imagenes||[],tresArchivosExtras:t.tresArchivosExtras||t.imagenesExtra||[],productStatus:t.productStatus||t.estado||Dk.DRAFT})},[t]),T.useEffect(()=>{t!=null&&t.id&&j!==t.id&&M(t.id)},[t==null?void 0:t.id]),T.useEffect(()=>{const B=Q=>{var J;if((J=A==null?void 0:A.some)==null?void 0:J.call(A,se=>(se==null?void 0:se.status)==="uploading"))return Q.preventDefault(),Q.returnValue="",""};return window.addEventListener("beforeunload",B),()=>window.removeEventListener("beforeunload",B)},[A]),T.useEffect(()=>{const B=j||(t==null?void 0:t.id);if(!B)return;const Q=ar(ot(Pe,"productos",B),le=>{if(!le.exists())return;const J=le.data();g(se=>{var Ue,ze;return{...se,id:J.id||B,nombre:J.nombre??se.nombre,descripcion:J.descripcion??se.descripcion,empresa:J.empresa??se.empresa,categoria:J.categoria??se.categoria,precio:((ze=(Ue=J.precio??se.precio)==null?void 0:Ue.toString)==null?void 0:ze.call(Ue))||String(J.precio??se.precio??""),cantidad:J.cantidad??se.cantidad,etiquetas:Array.isArray(J.etiquetas)?J.etiquetas:se.etiquetas||[],acerca:Array.isArray(J.acerca)?J.acerca:se.acerca||[],imagen:J.imagen??se.imagen,imagenes:Array.isArray(J.imagenes)?J.imagenes:se.imagenes||[],videoUrl:J.videoUrl??se.videoUrl,videoUrls:Array.isArray(J.videoUrls)?J.videoUrls:se.videoUrls||[],videoAcercaArticulo:Array.isArray(J.videoAcercaArticulo)?J.videoAcercaArticulo:se.videoAcercaArticulo||[],variantes:Array.isArray(J.variantes)?J.variantes:se.variantes||[],activo:J.activo??se.activo}}),(async()=>{var ht,Ht,bt,Dt;const se=De=>{try{if(!De)return null;const fn=String(De);if(fn.includes("firebasestorage.googleapis.com")){const Mt=fn.match(/\/o\/([^?]+)/);if(Mt&&Mt[1]){const br=decodeURIComponent(Mt[1]);return es(ts,br)}}return es(ts,fn)}catch{return null}},Ue=De=>{try{return De?typeof De=="string"?De:typeof De=="object"&&De!==null&&typeof De.url=="string"?De.url:String(De||"").trim():""}catch{return""}},ze=async De=>{try{if(!De)return De;const fn=Ue(De),Mt=String(fn).trim();if(Mt.startsWith("blob:"))return Mt;if(/^https?:\/\//i.test(Mt)){if(Mt.includes("firebasestorage.googleapis.com")){const wr=se(Mt);if(wr)try{return await tl(wr)}catch{}return Mt}return Mt}const br=es(ts,Mt);return await tl(br)}catch{return De}},q=async De=>Array.isArray(De)?Promise.all(De.map(ze)):[],[Ee,He,dt,gt,Le,ve]=await Promise.all([ze(J.imagen??((Ht=(ht=J.imagenPrincipal)==null?void 0:ht[0])==null?void 0:Ht.url)),q(J.imagenes??J.galeriaImagenes),ze(J.videoUrl??((Dt=(bt=J.videoAcercaArticulo)==null?void 0:bt[0])==null?void 0:Dt.url)??J.video),q(J.videoUrls),q(J.imagenesExtra??J.tresArchivosExtras),q(J.videoAcercaArticulo)]),Oe=De=>{var bi,Fn;const fn=(De==null?void 0:De.imagen)??((Fn=(bi=De==null?void 0:De.imagenPrincipal)==null?void 0:bi[0])==null?void 0:Fn.url)??"",Mt=Array.isArray(De==null?void 0:De.imagenes)?De.imagenes:Array.isArray(De==null?void 0:De.galeriaImagenes)?De.galeriaImagenes:[],br=Array.isArray(De==null?void 0:De.videoUrls)?De.videoUrls:[],wr=or=>Ue(or);return{...De,imagen:wr(fn),imagenes:Mt.map(wr).filter(Boolean),videoUrls:br.map(wr).filter(Boolean)}},It=Array.isArray(J.variantes)?J.variantes.map(Oe):prev.variantes||[];g(De=>({...De,imagen:Ee||De.imagen,imagenes:He!=null&&He.length?He:De.imagenes,videoUrl:dt||De.videoUrl,videoUrls:gt!=null&&gt.length?gt:De.videoUrls,imagenesExtra:Le!=null&&Le.length?Le:De.imagenesExtra,videoAcercaArticulo:ve!=null&&ve.length?ve:De.videoAcercaArticulo,variantes:It}))})()});return()=>Q()},[j,t==null?void 0:t.id]);const ue=T.useRef(!1);T.useEffect(()=>{if(!ue.current){try{const B="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",Q=Array.isArray(f.videoAcercaArticulo)?f.videoAcercaArticulo:[];if(Q.some(J=>String(J).trim()===B)){const J=Q.filter(Ue=>String(Ue).trim()!==B);g(Ue=>({...Ue,videoAcercaArticulo:J}));const se=j||(t==null?void 0:t.id);se&&Bn(ot(Pe,"productos",se),{videoAcercaArticulo:J,fechaActualizacion:new Date}).catch(()=>{})}}catch{}ue.current=!0}},[f.videoAcercaArticulo,j,t==null?void 0:t.id]),T.useEffect(()=>{const Q=setTimeout(async()=>{const le=await vz(f);xe(le.errors||[]),g(J=>({...J,validationScore:le.score||0,lastValidated:new Date().toISOString()}))},500);return()=>clearTimeout(Q)},[f.nombre,f.precio,f.categoria,f.descripcion,f.imagenPrincipal,f.galeriaImagenes]);const de=async()=>t!=null&&t.id?t.id:f!=null&&f.id?f.id:j||null,z=async(B,Q)=>{if(!["nuevaCategoria","_tempVideoUrl"].includes(B))try{const le=(t==null?void 0:t.id)||(f==null?void 0:f.id)||j,J=!!le;let se=le;if(!se&&(J||(se=await de(),!se)))return;await Bn(ot(Pe,"productos",se),{[B]:Q,fechaActualizacion:new Date})}catch{}},Y=B=>String(B||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").slice(0,80),be=B=>{const Q=((B==null?void 0:B.name)||"file").replace(/[^a-zA-Z0-9_.-]/g,"_");return`${Date.now()}-${Math.random().toString(36).slice(2,8)}-${Q}`},Me=({productId:B,section:Q,file:le,variantId:J=null})=>{const se=be(le);if(J){if(Q==="main")return`products/${B}/variants/${J}/main/${se}`;if(Q==="gallery")return`products/${B}/variants/${J}/gallery/${se}`}else{if(Q==="main")return`products/${B}/main/${se}`;if(Q==="gallery")return`products/${B}/gallery/${se}`;if(Q==="videos")return`products/${B}/videos/${se}`;if(Q==="extras")return`products/${B}/extras/${se}`}return`products/${B}/misc/${se}`},Ve=B=>{const Q=(f.variantes||[])[B]||{};if(Q.id)return Q.id;const le=`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`;return g(J=>{const se=[...J.variantes||[]];se[B]={...se[B]||{},id:le};const Ue={...J,variantes:se},ze=j||(t==null?void 0:t.id);return ze&&Bn(ot(Pe,"productos",ze),{variantes:se,fechaActualizacion:new Date}).catch(()=>{}),Ue}),le},it=async()=>{try{const Q=(await Ir(Ft(Pe,"categorias"))).docs.map(le=>({id:le.id,...le.data()}));x(Q)}catch(B){console.error("Error loading categories:",B)}},ct=async()=>{try{const Q=(await Ir(Ft(Pe,"productos"))).docs.map(J=>{var se;return(se=J.data())==null?void 0:se.empresa}).filter(Boolean),le=Array.from(new Set(Q)).sort((J,se)=>J.localeCompare(se));S(le)}catch{}},Be=(B,Q)=>{g(le=>({...le,[B]:Q})),z(B,Q)},et=(B,Q,le)=>{g(J=>{const se=J[B].map((ze,q)=>q===Q?le:ze),Ue={...J,[B]:se};return z(B,se),Ue})},ut=B=>{g(Q=>{const le=[...Q[B],B==="variantes"?{color:"",imagen:"",imagenes:[],cantidad:0,descripcion:"",precio:""}:""],J={...Q,[B]:le};return z(B,le),J})},_t=(B,Q)=>{g(le=>{const J=le[B].filter((Ue,ze)=>ze!==Q),se={...le,[B]:J};return z(B,J),se})},mt=(B,Q,le)=>{g(se=>({...se,variantes:se.variantes.map((Ue,ze)=>ze===B?{...Ue,[Q]:le}:Ue)}));const J=j||(t==null?void 0:t.id);if(J)try{g(se=>{const Ue=se.variantes.map((ze,q)=>q===B?{...ze,[Q]:le}:ze);return Bn(ot(Pe,"productos",J),{variantes:Ue,fechaActualizacion:new Date}).catch(()=>{}),{...se,variantes:Ue}})}catch{}},kt=B=>{ce(B)},Ot=async(B,Q,le)=>new Promise((J,se)=>{try{const Ue=es(ts,Q),ze=K_(Ue,B);k(q=>q.map(Ee=>Ee.id===le?{...Ee,task:ze}:Ee)),ze.on("state_changed",q=>{const Ee=Math.round(q.bytesTransferred/q.totalBytes*100);K(Ee),k(He=>He.map(dt=>dt.id===le?{...dt,progress:Ee}:dt)),setTimeout(()=>{k(He=>{const dt=He.find(gt=>gt.id===le);if(dt&&dt.status==="uploading"&&(!dt.progress||dt.progress===0)&&dt.task){try{dt.task.cancel()}catch{}return He.map(gt=>gt.id===le?{...gt,status:"error"}:gt)}return He})},6e3)},q=>{k(Ee=>Ee.map(He=>He.id===le?{...He,status:"error"}:He)),se(q)},async()=>{const q=await tl(ze.snapshot.ref);k(Ee=>Ee.map(He=>He.id===le?{...He,status:"done"}:He)),J(q)})}catch(Ue){k(ze=>ze.map(q=>q.id===le?{...q,status:"error"}:q)),se(Ue)}}),ie=async(B,Q,le)=>new Promise((J,se)=>{try{const Ue=es(ts,Q),ze=K_(Ue,B);k(q=>q.map(Ee=>Ee.id===le?{...Ee,task:ze}:Ee)),ze.on("state_changed",q=>{const Ee=Math.round(q.bytesTransferred/q.totalBytes*100);K(Ee),k(He=>He.map(dt=>dt.id===le?{...dt,progress:Ee}:dt))},q=>{k(Ee=>Ee.map(He=>He.id===le?{...He,status:"error"}:He)),se(q)},async()=>{const q=await tl(ze.snapshot.ref);k(Ee=>Ee.map(He=>He.id===le?{...He,status:"done"}:He)),J(q)})}catch(Ue){k(ze=>ze.map(q=>q.id===le?{...q,status:"error"}:q)),se(Ue)}}),Fe=async(B,Q,le,J,se=2)=>{let Ue;for(let ze=0;ze<=se;ze++)try{return await B(Q,le,J)}catch(q){Ue=q,await new Promise(Ee=>setTimeout(Ee,500*(ze+1)))}throw Ue},je=async B=>{if(B)try{const le=(J=>{try{const se=String(J);if(se.startsWith("gs://"))return es(ts,se);if(se.includes("firebasestorage.googleapis.com")){const Ue=se.match(/\/o\/([^?]+)/);if(Ue&&Ue[1]){const ze=decodeURIComponent(Ue[1]);return es(ts,ze)}}return es(ts,se)}catch{return null}})(B);le&&await cL(le)}catch{}},fe=B=>{try{const Q=String(B).trim().toLowerCase();if(Q.includes("youtube.com")||Q.includes("youtu.be")||Q.includes("vimeo.com"))return"video";const J=Q.split("?")[0].split("#")[0].split(".").pop()||"";return["jpg","jpeg","png","gif","webp","bmp","svg"].includes(J)?"image":["mp4","mov","avi","mkv","webm","m4v"].includes(J)?"video":"document"}catch{return"document"}},Ze=async()=>{f.imagen&&await je(f.imagen),Be("imagen",""),Be("imagenPrincipal",[])},Xe=async B=>{try{F(!0);const Q=Array.isArray(B)?B:[];if(Q.length===0){setTempPreviews(se=>({...se,imagen:""})),await Ze();return}const le=Q[0],J=(le==null?void 0:le.url)||"";if(le!=null&&le.file){setTempPreviews(Ee=>({...Ee,imagen:J}));let se=j||(t==null?void 0:t.id);if(se||(se=await de()),!se)return;const Ue=`${Date.now()}_${le.file.name}_${Math.random().toString(36).slice(2,7)}`,ze=Me({productId:se,section:"main",file:le.file}),q=await Fe(Ot,le.file,ze,Ue);g(Ee=>{const He=Array.isArray(Ee.imagenes)?[...Ee.imagenes]:[];He.includes(q)||He.unshift(q);const dt=[{url:q}],gt={...Ee,imagen:q,imagenPrincipal:dt,imagenes:He};return Bn(ot(Pe,"productos",se),{imagen:q,imagenPrincipal:dt,imagenes:He,fechaActualizacion:new Date}).catch(Le=>{console.error("Error actualizando Firestore:",Le)}),gt})}else J&&!J.startsWith("blob:")&&(Be("imagen",J),Be("imagenPrincipal",[{url:J}]),setTempPreviews(se=>({...se,imagen:""})))}catch(Q){console.error("handleMainImageUFU error",Q)}finally{F(!1),K(null)}},jt=async B=>{var Q,le,J,se;try{F(!0);const Ue=Array.isArray(B)?B:[],ze=Ue.filter(Oe=>{var It,ht;return(Oe==null?void 0:Oe.file)&&((ht=(It=Oe.file.type)==null?void 0:It.startsWith)==null?void 0:ht.call(It,"image/"))}).map(Oe=>Oe.url).filter(Boolean),q=Ue.filter(Oe=>{var It,ht;return(Oe==null?void 0:Oe.file)&&((ht=(It=Oe.file.type)==null?void 0:It.startsWith)==null?void 0:ht.call(It,"video/"))}).map(Oe=>Oe.url).filter(Boolean);setTempPreviews(Oe=>({...Oe,imagenes:ze,productVideos:q}));const Ee=Ue.filter(Oe=>!(Oe!=null&&Oe.file)&&(Oe==null?void 0:Oe.url)&&!Oe.url.startsWith("blob:")).map(Oe=>Oe.url),He=Ee.filter(Oe=>fe(Oe)==="image"),dt=Ee.filter(Oe=>fe(Oe)==="video"),gt=Array.isArray(f.imagenes)?f.imagenes:[],Le=Array.isArray(f.videoUrls)?f.videoUrls:[];if(JSON.stringify(He)!==JSON.stringify(gt)){const Oe=j||(t==null?void 0:t.id);g(It=>{const ht={...It,imagenes:He};return Oe&&Bn(ot(Pe,"productos",Oe),{imagenes:He,fechaActualizacion:new Date}).catch(()=>{}),ht})}if(JSON.stringify(dt)!==JSON.stringify(Le)){const Oe=j||(t==null?void 0:t.id);g(It=>{const ht={...It,videoUrls:dt};return Oe&&Bn(ot(Pe,"productos",Oe),{videoUrls:dt,fechaActualizacion:new Date}).catch(()=>{}),ht})}let ve=j||(t==null?void 0:t.id);if(ve||(ve=await de()),!ve)return;for(const Oe of Ue)if(Oe!=null&&Oe.file&&((le=(Q=Oe.file.type)==null?void 0:Q.startsWith)!=null&&le.call(Q,"image/"))){const It=`${Date.now()}_${Oe.file.name}_${Math.random().toString(36).slice(2,7)}`,ht=Me({productId:ve,section:"gallery",file:Oe.file});try{const Ht=await Fe(Ot,Oe.file,ht,It);g(bt=>{const Dt=Array.isArray(bt.imagenes)?[...bt.imagenes,Ht]:[Ht],De=!bt.imagen&&(!Array.isArray(bt.imagenPrincipal)||bt.imagenPrincipal.length===0),fn={...bt,imagenes:Dt,...De?{imagen:Ht,imagenPrincipal:[{url:Ht}]}:{}},Mt=De?{imagenes:Dt,imagen:Ht,imagenPrincipal:[{url:Ht}],fechaActualizacion:new Date}:{imagenes:Dt,fechaActualizacion:new Date};return Bn(ot(Pe,"productos",ve),Mt).catch(()=>{}),fn})}catch(Ht){console.error("Gallery image upload error",Ht)}}else if(Oe!=null&&Oe.file&&((se=(J=Oe.file.type)==null?void 0:J.startsWith)!=null&&se.call(J,"video/"))){const It=`${Date.now()}_${Oe.file.name}_${Math.random().toString(36).slice(2,7)}`,ht=Me({productId:ve,section:"videos",file:Oe.file});try{const Ht=await Fe(ie,Oe.file,ht,It);g(bt=>{const Dt=Array.isArray(bt.videoUrls)?[...bt.videoUrls,Ht]:[Ht],De={...bt,videoUrls:Dt};return Bn(ot(Pe,"productos",ve),{videoUrls:Dt,fechaActualizacion:new Date}).catch(()=>{}),De})}catch(Ht){console.error("Gallery video upload error",Ht)}}}catch(Ue){console.error("handleGalleryUFU error",Ue)}finally{F(!1),K(null)}},Nt=async B=>{try{F(!0);const Q=Array.isArray(B)?B.slice(0,3):[],le=Q.filter(q=>q==null?void 0:q.file).map(q=>q.url).filter(Boolean);setTempPreviews(q=>({...q,extras:le}));const J=Q.filter(q=>!(q!=null&&q.file)&&(q==null?void 0:q.url)&&!q.url.startsWith("blob:")).map(q=>q.url),se=Array.isArray(f.imagenesExtra)?f.imagenesExtra:[],Ue=se.filter(q=>!J.includes(q));for(const q of Ue)await je(q);JSON.stringify(J)!==JSON.stringify(se)&&g(q=>{const Ee={...q,imagenesExtra:J},He=j||(t==null?void 0:t.id);return He&&Bn(ot(Pe,"productos",He),{imagenesExtra:J,fechaActualizacion:new Date}).catch(()=>{}),Ee});let ze=j||(t==null?void 0:t.id);if(ze||(ze=await de()),!ze)return;for(const q of Q)if(q!=null&&q.file){const Ee=`${Date.now()}_${q.file.name}_${Math.random().toString(36).slice(2,7)}`,He=Me({productId:ze,section:"extras",file:q.file});try{const dt=await Fe(Ot,q.file,He,Ee);g(gt=>{const Le=Array.isArray(gt.imagenesExtra)?[...gt.imagenesExtra,dt]:[dt],ve={...gt,imagenesExtra:Le};return Bn(ot(Pe,"productos",ze),{imagenesExtra:Le,fechaActualizacion:new Date}).catch(()=>{}),ve})}catch(dt){console.error("Extra file upload error",dt)}}}catch(Q){console.error("handleExtrasUFU error",Q)}finally{F(!1),K(null)}},At=async(B,Q)=>{try{F(!0);const le=Array.isArray(B)?B:[];if(le.length===0){setTempPreviews(se=>{var Ue;return{...se,variantes:{...se.variantes,[Q]:{...((Ue=se.variantes)==null?void 0:Ue[Q])||{},imagen:""}}}}),mt(Q,"imagen","");return}const J=le[0];if(J!=null&&J.file){setTempPreviews(He=>{var dt;return{...He,variantes:{...He.variantes,[Q]:{...((dt=He.variantes)==null?void 0:dt[Q])||{},imagen:J.url}}}});let se=j||(t==null?void 0:t.id);if(se||(se=await de()),!se)return;const Ue=Ve(Q),ze=`${Date.now()}_${J.file.name}_${Math.random().toString(36).slice(2,7)}`,q=Me({productId:se,section:"main",file:J.file,variantId:Ue}),Ee=await Fe(Ot,J.file,q,ze);mt(Q,"imagen",Ee)}else J!=null&&J.url&&!J.url.startsWith("blob:")&&(mt(Q,"imagen",J.url),setTempPreviews(se=>{var Ue;return{...se,variantes:{...se.variantes,[Q]:{...((Ue=se.variantes)==null?void 0:Ue[Q])||{},imagen:""}}}}))}catch(le){console.error("handleVariantMainUFU error",le)}finally{F(!1),K(null)}},_e=async(B,Q)=>{var le,J,se,Ue;try{F(!0);const ze=Array.isArray(B)?B:[],q=ze.filter(ve=>ve==null?void 0:ve.file).map(ve=>ve.url).filter(Boolean);setTempPreviews(ve=>{var Oe;return{...ve,variantes:{...ve.variantes,[Q]:{...((Oe=ve.variantes)==null?void 0:Oe[Q])||{},imagenes:q}}}});const Ee=ze.filter(ve=>!(ve!=null&&ve.file)&&(ve==null?void 0:ve.url)&&!ve.url.startsWith("blob:")).map(ve=>ve.url),He=Array.isArray((J=(le=f.variantes)==null?void 0:le[Q])==null?void 0:J.imagenes)?f.variantes[Q].imagenes:[],dt=He.filter(ve=>!Ee.includes(ve));for(const ve of dt)await je(ve);JSON.stringify(Ee)!==JSON.stringify(He)&&mt(Q,"imagenes",Ee);let gt=j||(t==null?void 0:t.id);if(gt||(gt=await de()),!gt)return;const Le=Ve(Q);for(const ve of ze)if(ve!=null&&ve.file&&((Ue=(se=ve.file.type)==null?void 0:se.startsWith)!=null&&Ue.call(se,"image/"))){const Oe=`${Date.now()}_${ve.file.name}_${Math.random().toString(36).slice(2,7)}`,It=Me({productId:gt,section:"gallery",file:ve.file,variantId:Le});try{const ht=await Fe(Ot,ve.file,It,Oe);g(Ht=>{var Mt;const bt=[...Ht.variantes||[]],Dt=Array.isArray((Mt=bt[Q])==null?void 0:Mt.imagenes)?bt[Q].imagenes:[];bt[Q]={...bt[Q]||{},imagenes:[...Dt,ht]};const De={...Ht,variantes:bt},fn=j||(t==null?void 0:t.id);return fn&&Bn(ot(Pe,"productos",fn),{variantes:bt,fechaActualizacion:new Date}).catch(()=>{}),De})}catch(ht){console.error("Variant gallery upload error",ht)}}}catch(ze){console.error("handleVariantGalleryUFU error",ze)}finally{F(!1),K(null)}},ne=async(B,Q)=>{var le,J,se,Ue;try{const ze=Array.isArray(B)?B:[],q=ze.filter(ve=>ve==null?void 0:ve.file).map(ve=>ve.url).filter(Boolean);setTempPreviews(ve=>{var Oe;return{...ve,variantes:{...ve.variantes,[Q]:{...((Oe=ve.variantes)==null?void 0:Oe[Q])||{},videos:q}}}});const Ee=ze.filter(ve=>!(ve!=null&&ve.file)&&(ve==null?void 0:ve.url)&&!ve.url.startsWith("blob:")).map(ve=>ve.url),He=Array.isArray((J=(le=f.variantes)==null?void 0:le[Q])==null?void 0:J.videoUrls)?f.variantes[Q].videoUrls:[],dt=He.filter(ve=>!Ee.includes(ve));for(const ve of dt)await je(ve);JSON.stringify(Ee)!==JSON.stringify(He)&&mt(Q,"videoUrls",Ee);let gt=j||(t==null?void 0:t.id);if(gt||(gt=await de()),!gt)return;const Le=Ve(Q);for(const ve of ze)if(ve!=null&&ve.file&&((Ue=(se=ve.file.type)==null?void 0:se.startsWith)!=null&&Ue.call(se,"video/"))){const Oe=`${Date.now()}_${ve.file.name}_${Math.random().toString(36).slice(2,7)}`,It=Me({productId:gt,section:"gallery",file:ve.file,variantId:Le});try{const ht=await Fe(ie,ve.file,It,Oe);g(Ht=>{var Mt;const bt=[...Ht.variantes||[]],Dt=Array.isArray((Mt=bt[Q])==null?void 0:Mt.videoUrls)?bt[Q].videoUrls:[];bt[Q]={...bt[Q]||{},videoUrls:[...Dt,ht]};const De={...Ht,variantes:bt},fn=j||(t==null?void 0:t.id);return fn&&Bn(ot(Pe,"productos",fn),{variantes:bt,fechaActualizacion:new Date}).catch(()=>{}),De})}catch(ht){console.error("Variant video upload error",ht)}}}catch(ze){console.error("handleVariantVideosUFU error",ze)}},ge=async B=>{try{const Q={nombre:B,ruta:B.toLowerCase().replace(/\s+/g,"-"),activa:!0,fechaCreacion:new Date,productCount:0};return await Jn(ot(Pe,"categorias",Q.ruta),Q),x(le=>[...le,{id:Q.ruta,...Q}]),Q.ruta}catch(Q){throw console.error("Error creating category:",Q),Q}},Ne=async B=>{B.preventDefault();const Q=[];String(f.nombre||"").trim()||Q.push("El nombre del producto es obligatorio"),String(f.empresa||"").trim();const J=q=>{if(typeof q=="number")return q;let Ee=String(q??"").trim();if(!Ee)return NaN;Ee=Ee.replace(/\s/g,""),Ee.includes(",")&&/,\d{1,2}$/.test(Ee)?Ee=Ee.replace(/\./g,"").replace(",","."):Ee=Ee.replace(/,/g,"");const He=parseFloat(Ee);return Number.isFinite(He)?He:NaN},se=J(f.precio);(!Number.isFinite(se)||se<0)&&Q.push("Precio inválido");const Ue=parseInt(f.cantidad);(!Number.isFinite(Ue)||Ue<0)&&Q.push("Cantidad inválida"),R&&(String(f.nuevaCategoria||"").trim()||Q.push("Escribe el nombre de la nueva categoría"));let ze=!1;if(f.oferta){const q=String(f.precioOferta??"").trim();if(!q)ze=!0;else{const Ee=J(q);(!Number.isFinite(Ee)||Ee<0||Number.isFinite(se)&&Ee>=se)&&(ze=!0)}}if(Q.length){alert(`Corrige los siguientes campos antes de guardar:
- `+Q.join(`
- `));return}N(!0);try{let q=f.categoria;R&&f.nuevaCategoria.trim()&&(q=await ge(f.nuevaCategoria.trim()));let Ee={...f,categoria:q,precio:Number.isFinite(se)?se:0,fechaActualizacion:new Date,acerca:(Array.isArray(f.acerca)?f.acerca:[]).filter(Le=>String(Le||"").trim()),etiquetas:(Array.isArray(f.etiquetas)?f.etiquetas:[]).filter(Le=>String(Le||"").trim()),variantes:(Array.isArray(f.variantes)?f.variantes:[]).map(Le=>{const ve=Number.isFinite(parseInt(Le==null?void 0:Le.cantidad))?parseInt(Le.cantidad):0,Oe=(Le==null?void 0:Le.precio)!==void 0&&(Le==null?void 0:Le.precio)!==null&&String(Le.precio).trim()!=="",It=Oe?J(Le.precio)||0:void 0;return{...Le,cantidad:ve,...Oe?{precio:It}:{}}})};ze&&(Ee.oferta=!1,delete Ee.precioOferta),Ee.activo=!!Ee.activo,delete Ee.nuevaCategoria,delete Ee._tempVideoUrl,Ee.empresa&&(Ee.empresa=Ee.empresa.trim(),Ee.empresaNorm=Ee.empresa.toLowerCase());const He=(t==null?void 0:t.id)||j||(f==null?void 0:f.id)||null;if(t&&!t.id)throw new Error("Producto en edición sin ID válido. No se guardó para evitar duplicados.");const dt=!He,gt=dt?`prod_${Date.now()}`:He;Ee.id=gt,Ee.nombre&&!Ee.slug&&(Ee.slug=Y(Ee.nombre)),dt&&(Ee.fechaCreacion=new Date,Ee.ownerUid||(Ee.ownerUid=(i==null?void 0:i.uid)||(a==null?void 0:a.uid)||null),Ee.ownerName||(Ee.ownerName=((a==null?void 0:a.displayName)||(i==null?void 0:i.email)||"").toString())),await Jn(ot(Pe,"productos",gt),{...Ee,fechaActualizacion:new Date},{merge:!0}),dt&&M(gt),typeof n=="function"&&n(),typeof e=="function"&&e()}catch(q){console.error("Error saving product:",q);let Ee="Error al guardar el producto";(q==null?void 0:q.code)==="permission-denied"?Ee="No tienes permisos para guardar este producto":(q==null?void 0:q.code)==="network-request-failed"?Ee="Error de conexión. Verifica tu internet e inténtalo de nuevo":typeof(q==null?void 0:q.message)=="string"&&q.message&&(Ee=q.message),alert(Ee)}finally{N(!1)}};return o.jsx(oe.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-stretch justify-stretch",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(oe.div,{className:"bg-white w-screen h-screen overflow-hidden flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[o.jsxs("div",{className:"bg-blue-700 text-white p-4 md:p-6 flex justify-between items-center sticky top-0 z-10 shadow",children:[o.jsx("h2",{className:"text-2xl font-bold",children:t?"Editar Producto":"Agregar Producto"}),o.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 text-2xl font-bold",children:"×"})]}),o.jsxs("form",{onSubmit:Ne,className:"flex-1 overflow-y-auto p-4 md:p-6",children:[o.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Información Básica"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Producto *"}),o.jsx("input",{type:"text",required:!0,value:f.nombre,onChange:B=>Be("nombre",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marca / Empresa"}),o.jsx("input",{type:"text",list:"brands-list",value:f.empresa||"",onChange:B=>Be("empresa",B.target.value),placeholder:"Ej. Xbox, PlayStation, Nintendo... (puedes escribir una nueva)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),o.jsx("datalist",{id:"brands-list",children:w.map(B=>o.jsx("option",{value:B},B))}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sugerencias basadas en tus marcas guardadas. Se guardará sin importar mayúsculas/minúsculas."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio *"}),o.jsx("input",{type:"number",step:"0.01",required:!0,value:f.precio,onChange:B=>Be("precio",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad en Stock *"}),o.jsx("input",{type:"number",min:"0",required:!0,value:f.cantidad,onChange:B=>Be("cantidad",parseInt(B.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),o.jsx("textarea",{value:f.descripcion||"",onChange:B=>Be("descripcion",B.target.value),placeholder:"Escribe la descripción del producto...",className:"w-full min-h-[140px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Categoría y Estado"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría *"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("select",{value:R?"":f.categoria,onChange:B=>{B.target.value==="nueva"?I(!0):(I(!1),Be("categoria",B.target.value))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"Seleccionar categoría"}),y.map(B=>o.jsx("option",{value:B.id,children:B.nombre},B.id)),o.jsx("option",{value:"nueva",children:"+ Crear nueva categoría"})]}),R&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Nombre de la nueva categoría",value:f.nuevaCategoria,onChange:B=>Be("nuevaCategoria",B.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),o.jsx("button",{type:"button",onClick:()=>{I(!1),Be("nuevaCategoria","")},className:"px-3 py-2 text-gray-500 hover:text-gray-700",children:"Cancelar"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),o.jsxs("select",{value:f.estado,onChange:B=>Be("estado",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"Nuevo",children:"Nuevo"}),o.jsx("option",{value:"Usado",children:"Usado"}),o.jsx("option",{value:"Reacondicionado",children:"Reacondicionado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Publicación"}),o.jsx("input",{type:"date",value:f.fechaPublicacion,onChange:B=>Be("fechaPublicacion",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:f.oferta,onChange:B=>Be("oferta",B.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"En oferta"]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:f.activo,onChange:B=>Be("activo",B.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Producto activo"]})]}),f.oferta&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de Oferta"}),o.jsx("input",{type:"number",step:"0.01",value:f.precioOferta,onChange:B=>Be("precioOferta",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Precio con descuento"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (opcional)"}),o.jsx("input",{type:"text",value:f.peso,onChange:B=>Be("peso",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 1.5 kg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensiones (opcional)"}),o.jsx("input",{type:"text",value:f.dimensiones,onChange:B=>Be("dimensiones",B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ej: 30x20x10 cm"})]})]})]})]})]}),o.jsxs("div",{className:"mt-8 space-y-4",children:[o.jsx("h3",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-fuchsia-600 via-pink-600 to-rose-600 border-b-4 border-rose-200 pb-2",children:"Imágenes y Multimedia"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"rounded-2xl border-2 border-rose-200/70 bg-gradient-to-br from-rose-50 via-pink-50 to-fuchsia-50 p-4 shadow-sm",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen Principal *"}),o.jsx(Jo,{files:f.imagenPrincipal||[],onFilesChange:Xe,acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen principal",allowReorder:!1,allowSetMain:!1})]}),o.jsxs("div",{className:"rounded-2xl border-2 border-pink-200/70 bg-gradient-to-br from-pink-50 via-rose-50 to-fuchsia-50 p-4 shadow-sm",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Galería (Imágenes y Videos)"}),o.jsx(Jo,{files:[...Array.isArray(f.galeriaImagenes)?f.galeriaImagenes:[],...Array.isArray(f.videoUrls)?f.videoUrls:[]],onFilesChange:jt,acceptedTypes:"image/*,video/*",multiple:!0,label:"Galería (Imágenes y Videos)",placeholder:"Arrastra o selecciona imágenes o videos",allowReorder:!0,allowSetMain:!0})]})]})]}),o.jsxs("div",{className:"mt-8 space-y-4",children:[o.jsx("h3",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-sky-600 via-blue-600 to-indigo-600 border-b-4 border-blue-200 pb-2",children:"Detalles del Producto"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Características (Acerca de)"}),f.acerca.map((B,Q)=>o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:B,onChange:le=>et("acerca",Q,le.target.value),placeholder:"Característica del producto",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("button",{type:"button",onClick:()=>_t("acerca",Q),className:"px-3 py-2 text-red-500 hover:text-red-700",children:"×"})]},Q)),o.jsx("button",{type:"button",onClick:()=>ut("acerca"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar característica"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiquetas (para búsqueda)"}),f.etiquetas.map((B,Q)=>o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"text",value:B,onChange:le=>et("etiquetas",Q,le.target.value),placeholder:"Etiqueta",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("button",{type:"button",onClick:()=>_t("etiquetas",Q),className:"px-3 py-2 text-red-500 hover:text-red-700",children:"×"})]},Q)),o.jsx("button",{type:"button",onClick:()=>ut("etiquetas"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar etiqueta"})]})]}),o.jsxs("div",{className:"mt-8 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-blue-900 border-b pb-2",children:"Variantes del Producto"}),f.variantes&&f.variantes.length>1&&o.jsx("div",{className:"mb-4",children:o.jsx(C4,{variants:f.variantes.map((B,Q)=>{var le,J;return{id:B.id||`var_${Q}`,name:B.color||`Variante ${Q+1}`,price:B.precio,stock:B.cantidad,image:((J=(le=B.imagenPrincipal)==null?void 0:le[0])==null?void 0:J.url)||B.imagen,isSelected:qe===Q}}),productMainImage:((Ie=(te=f.imagenPrincipal)==null?void 0:te[0])==null?void 0:Ie.url)||f.imagen,onVariantChange:kt,className:"max-w-md"})})]}),f.variantes.map((B,Q)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h4",{className:"font-medium",children:["Variante ",Q+1]}),o.jsx("button",{type:"button",onClick:()=>_t("variantes",Q),className:"text-red-500 hover:text-red-700",children:"Eliminar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color/Tipo"}),o.jsx("input",{type:"text",value:B.color,onChange:le=>mt(Q,"color",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),o.jsx("input",{type:"number",min:"0",value:B.cantidad,onChange:le=>mt(Q,"cantidad",parseInt(le.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción de la variante"}),o.jsx("textarea",{rows:2,value:B.descripcion||"",onChange:le=>mt(Q,"descripcion",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. Color neón, control edición especial, etc."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio de la variante (opcional)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:B.precio??"",onChange:le=>mt(Q,"precio",le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej. 1999.99"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen de Variante"}),o.jsx(Jo,{files:B.imagenPrincipal||[],onFilesChange:le=>At(le,Q),acceptedTypes:"image/*",multiple:!1,label:"Imagen de Variante",placeholder:"Arrastra o selecciona una imagen",allowReorder:!1,allowSetMain:!1})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imágenes adicionales de la variante"}),o.jsx(Jo,{files:B.imagenes||[],onFilesChange:le=>_e(le,Q),acceptedTypes:"image/*",multiple:!0,label:"Imágenes adicionales de la variante",placeholder:"Arrastra o selecciona imágenes",allowReorder:!0,allowSetMain:!0})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Videos de la variante"}),o.jsx(Jo,{files:B.videoUrls||[],onFilesChange:le=>ne(le,Q),acceptedTypes:"video/*",multiple:!0,label:"Videos de la variante",placeholder:"Arrastra o selecciona videos",allowReorder:!0,allowSetMain:!0})]})]},Q)),o.jsx("button",{type:"button",onClick:()=>ut("variantes"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ Agregar variante"})]}),o.jsxs("div",{className:"mt-8 space-y-4 rounded-2xl border-2 border-blue-200/70 bg-gradient-to-br from-blue-50 via-sky-50 to-cyan-50 p-6 shadow-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-sky-600 to-cyan-600 border-b-4 border-blue-200 pb-2",children:"📸 Imágenes con más información del artículo"}),o.jsxs("p",{className:"text-sm text-gray-600 bg-blue-50 border-l-4 border-blue-400 pl-4 py-2 rounded",children:["💡 ",o.jsx("strong",{children:"¿Para qué sirve?"}),' Estas imágenes se mostrarán en la sección "Más información del producto" debajo de la descripción. Son perfectas para:']}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 ml-6 list-disc",children:[o.jsx("li",{children:"Mostrar especificaciones técnicas detalladas en imagen"}),o.jsx("li",{children:"Comparativas de tamaño o características"}),o.jsx("li",{children:"Instrucciones de uso o instalación"}),o.jsx("li",{children:"Detalles ampliados del producto"})]}),o.jsxs("p",{className:"text-xs text-blue-600 font-medium bg-blue-100 px-3 py-2 rounded-lg inline-block",children:["📐 ",o.jsx("strong",{children:"Recomendación:"})," Usa imágenes de alta resolución (al menos 1200px de ancho) para que se vean perfectas en todos los dispositivos."]})]}),o.jsx(Jo,{files:[...(f.imagenesExtra||[]).map((B,Q)=>({id:`saved-info-${Q}`,url:B,type:fe(B),name:(String(B).split("/").pop()||`info-${Q+1}`).split("?")[0],size:0,isUploaded:!0}))],onFilesChange:Nt,acceptedTypes:"image/*",multiple:!0,label:"Imágenes informativas del producto",placeholder:"📸 Arrastra o selecciona imágenes de alta resolución con información adicional del producto",allowReorder:!0,allowSetMain:!1})]}),o.jsxs("div",{className:"mt-8 flex justify-end space-x-4 pt-6 border-t",children:[o.jsx("button",{type:"button",onClick:e,className:"px-8 py-3 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium text-lg",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:b,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg flex items-center space-x-2",children:b?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),o.jsx("span",{children:"Guardando..."})]}):o.jsx("span",{children:"Guardar Producto"})})]})]})]})})},Bp=({size:t="medium",color:e="blue",className:n="",fullScreen:r=!1,text:i=null})=>{const a={small:"loading-spinner-small",medium:"loading-spinner-medium",large:"loading-spinner-large",xlarge:"loading-spinner-xlarge"},c={blue:"loading-spinner-blue",white:"loading-spinner-white",gray:"loading-spinner-gray",green:"loading-spinner-green",red:"loading-spinner-red"};return r?o.jsx("div",{className:"loading-spinner-fullscreen",children:o.jsxs("div",{className:"loading-spinner-container",children:[o.jsx("div",{className:`loading-spinner ${a[t]} ${c[e]} ${n}`}),i&&o.jsx("p",{className:"loading-spinner-text",children:i})]})}):o.jsxs("div",{className:`loading-spinner-inline ${n}`,children:[o.jsx("div",{className:`loading-spinner ${a[t]} ${c[e]}`}),i&&o.jsx("span",{className:"loading-spinner-text-inline",children:i})]})};function Tz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function Nz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function Cz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function Az(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function jz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function Iz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function j4(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function C1(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function Pz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Rz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function Mk(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function I4(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function Dz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function Mz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function Ok(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function Oz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function P4(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function Lz(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function gx(t){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}const Vz="ZeiFzBgosCd0apv9cXL6aQZCYyu2",R4=({onAddProduct:t,onEditProduct:e})=>{const{usuario:n}=Br(),r=(n==null?void 0:n.uid)===Vz,[i,a]=T.useState([]),[c,u]=T.useState([]),[h,f]=T.useState(!0),[g,y]=T.useState(""),[x,w]=T.useState(""),[S,b]=T.useState("fechaCreacion"),[N,j]=T.useState("desc"),[M,O]=T.useState(!1),[F,H]=T.useState(null),[K,R]=T.useState(null),[I,A]=T.useState(null),[k,V]=T.useState(""),[U,D]=T.useState(""),[xe,Ke]=T.useState(""),[st,qe]=T.useState(""),[ce,ue]=T.useState(""),[de,z]=T.useState(""),[Y,be]=T.useState("");T.useEffect(()=>{Me()},[]),T.useEffect(()=>{const ie=Ve();return()=>{typeof ie=="function"&&ie()}},[n==null?void 0:n.uid]);const Me=async()=>{try{const Fe=(await Ir(Ft(Pe,"categorias"))).docs.map(je=>({id:je.id,...je.data()}));u(Fe)}catch(ie){console.error("Error loading categories:",ie)}},Ve=()=>{try{let ie;return r?ie=an(Ft(Pe,"productos"),zs("fechaCreacion","desc")):n!=null&&n.uid?ie=an(Ft(Pe,"productos"),xr("ownerUid","==",n.uid)):ie=an(Ft(Pe,"productos"),xr("activo","==",!0)),ar(ie,je=>{const fe=je.docs.map(Ze=>({id:Ze.id,...Ze.data()}));a(fe),f(!1)},()=>f(!1))}catch(ie){return console.error("Error loading products:",ie),f(!1),null}};T.useMemo(()=>{if(!r)return[];const ie=new Set;return i.forEach(Fe=>{const je=(Fe.ownerName||Fe.empresa||"").trim();je&&ie.add(je)}),Array.from(ie).sort((Fe,je)=>Fe.localeCompare(je))},[r,i]);const it=ie=>{try{return typeof(ie==null?void 0:ie.cantidad)=="number"?Number(ie.cantidad)||0:Array.isArray(ie==null?void 0:ie.variantes)&&ie.variantes.length?ie.variantes.reduce((Fe,je)=>Fe+(parseInt(je==null?void 0:je.cantidad)||0),0):Number.POSITIVE_INFINITY}catch{return Number.POSITIVE_INFINITY}},ct=async(ie,Fe)=>{try{console.log(`🔄 Cambiando estado del producto ${ie}: ${Fe} -> ${!Fe}`);const je=ot(Pe,"productos",ie);if(!(await rs(je)).exists())throw new Error("El producto no existe en la base de datos");await Bn(je,{activo:!Fe,fechaActualizacion:new Date}),console.log("✅ Estado actualizado exitosamente")}catch(je){console.error("❌ Error updating product status:",je),alert(`Error al actualizar el estado del producto: ${je.message}`)}},Be=async ie=>{try{console.log("🔄 Iniciando duplicación de producto:",ie.id);const Fe=ot(Pe,"productos",ie.id),je=await rs(Fe);if(!je.exists())throw new Error("El producto original no existe en la base de datos");const fe=je.data(),Ze=`prod_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,Xe=JSON.parse(JSON.stringify(fe));Xe.nombre=`${fe.nombre} (Copia)`,Xe.fechaCreacion=new Date,Xe.fechaActualizacion=new Date,!Xe.categoria&&fe.categoria&&(Xe.categoria=fe.categoria),Xe.activo=!0,Xe.estado||(Xe.estado="activo"),Array.isArray(Xe.variantes)&&Xe.variantes.length>0&&(Xe.variantes=Xe.variantes.map(jt=>{const Nt={...jt};return Nt.id=`var_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,Array.isArray(Nt.media)&&Nt.media.length>0&&(Nt.media=Nt.media.map(At=>({...At,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),Nt})),Array.isArray(Xe.media)&&Xe.media.length>0&&(Xe.media=Xe.media.map(jt=>({...jt,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),Array.isArray(Xe.imagenes)&&Xe.imagenes.length>0&&(Xe.imagenes=[...Xe.imagenes]),await Jn(ot(Pe,"productos",Ze),Xe),await new Promise(jt=>setTimeout(jt,500)),alert(`Producto duplicado exitosamente con ID: ${Ze}`)}catch(Fe){console.error("❌ Error duplicating product:",Fe),alert(`Error al duplicar el producto: ${Fe.message}`)}},et=async(ie,Fe,je)=>{try{console.log(`📝 Actualizando ${Fe} del producto ${ie}:`,je);const fe=ot(Pe,"productos",ie);if(!(await rs(fe)).exists())throw new Error("El producto no existe en la base de datos");await Bn(fe,{[Fe]:je,fechaActualizacion:new Date}),console.log(`✅ Campo ${Fe} actualizado exitosamente`)}catch(fe){console.error(`❌ Error updating ${Fe}:`,fe),alert(`Error al actualizar ${Fe}: ${fe.message}`)}},ut=async()=>{if(F)try{await _m(ot(Pe,"productos",F.id)),O(!1),H(null),alert("Producto eliminado exitosamente")}catch(ie){console.error("Error deleting product:",ie),alert("Error al eliminar el producto")}},_t=i.filter(ie=>{var Fe;try{const je=g.toLowerCase(),fe=(ie.nombre||"").toLowerCase().includes(je)||(ie.descripcion||"").toLowerCase().includes(je)||(ie.empresa||"").toLowerCase().includes(je)||(ie.categoria||"").toLowerCase().includes(je),Ze=!x||ie.categoria===x,Xe=!k||(k==="activo"?ie.activo!==!1:ie.activo===!1),jt=it(ie),Nt=Number.isFinite(jt)?jt<=0?"agotado":jt<=5?"bajo":"disponible":"disponible",At=!U||Nt===U,_e=parseFloat(ie.precio)||0,ne=(xe===""||_e>=parseFloat(xe))&&(st===""||_e<=parseFloat(st)),ge=(Fe=ie==null?void 0:ie.fechaCreacion)!=null&&Fe.seconds?ie.fechaCreacion.seconds*1e3:ie!=null&&ie.fechaCreacion?new Date(ie.fechaCreacion).getTime():null,Ne=!ce||ge&&ge>=new Date(ce).setHours(0,0,0,0),te=!de||ge&&ge<=new Date(de).setHours(23,59,59,999),Ie=Ne&&te,B=!r||!Y||(ie.ownerName||ie.empresa||"")===Y;return fe&&Ze&&Xe&&At&&ne&&Ie&&B}catch(je){return console.warn("Error filtrando producto:",ie==null?void 0:ie.id,je),!1}}).sort((ie,Fe)=>{let je=ie[S],fe=Fe[S];return S==="precio"?(je=parseFloat(je)||0,fe=parseFloat(fe)||0):(S==="fechaCreacion"||S==="fechaActualizacion")&&(je=new Date(je!=null&&je.seconds?je.seconds*1e3:je),fe=new Date(fe!=null&&fe.seconds?fe.seconds*1e3:fe)),N==="asc"?je>fe?1:-1:je<fe?1:-1}),mt=ie=>{const Fe=c.find(je=>je.id===ie);return(Fe==null?void 0:Fe.nombre)||ie},kt=ie=>ie?(ie.seconds?new Date(ie.seconds*1e3):new Date(ie)).toLocaleDateString("es-ES"):"N/A",Ot=ie=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(ie||0);return h?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Bp,{size:"large",color:"blue",text:"Cargando productos..."})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestión de Productos"}),o.jsxs("p",{className:"text-gray-600",children:[i.length," productos en total"]})]}),o.jsxs("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"+"}),"Agregar Producto"]})]}),o.jsx("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm border",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{children:o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",placeholder:"Buscar productos...",value:g,onChange:ie=>y(ie.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})})})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría"}),o.jsxs("select",{value:x,onChange:ie=>w(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"Todas las categorías"}),c.map(ie=>o.jsx("option",{value:ie.id,children:ie.nombre},ie.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordenar por"}),o.jsxs("select",{value:S,onChange:ie=>b(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"fechaCreacion",children:"Fecha de creación"}),o.jsx("option",{value:"fechaActualizacion",children:"Última actualización"}),o.jsx("option",{value:"nombre",children:"Nombre"}),o.jsx("option",{value:"precio",children:"Precio"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),o.jsxs("select",{value:N,onChange:ie=>j(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"desc",children:"Descendente"}),o.jsx("option",{value:"asc",children:"Ascendente"})]})]})]})}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 md:gap-6",children:o.jsx(dn,{children:_t.map(ie=>o.jsxs(oe.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"relative h-48 bg-white rounded-t-lg overflow-hidden flex items-center justify-center",children:[(()=>{try{const Fe=ie.imagen||(Array.isArray(ie.imagenes)&&ie.imagenes.length>0?ie.imagenes[0]:null)||(Array.isArray(ie.variantes)&&ie.variantes.length>0&&ie.variantes[0].imagen?ie.variantes[0].imagen:null);return Fe?o.jsx("img",{src:Fe,alt:ie.nombre||"Producto",className:"w-full h-full object-contain",onError:je=>{je.target.style.display="none",je.target.nextSibling.style.display="flex"}}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:o.jsx("span",{className:"text-sm",children:"Sin imagen"})})}catch(Fe){return console.warn("Error renderizando imagen del producto:",ie.id,Fe),o.jsx("div",{className:"w-full h-full flex items-center justify-center text-red-400 bg-red-50",children:o.jsx("span",{className:"text-sm",children:"Error en imagen"})})}})(),o.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 bg-gray-50",style:{display:"none"},children:o.jsxs("div",{className:"text-center",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsx("span",{className:"text-sm",children:"Sin imagen"})]})}),o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ie.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ie.activo?"Activo":"Inactivo"})}),ie.oferta&&o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Oferta"})})]}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:ie.nombre}),o.jsx("button",{onClick:()=>ct(ie.id,ie.activo),className:`ml-2 p-1 rounded ${ie.activo?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:ie.activo?"Desactivar":"Activar",children:ie.activo?o.jsx(C1,{}):o.jsx(j4,{})})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:mt(ie.categoria)}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[I===ie.id?o.jsx("input",{type:"number",step:"0.01",defaultValue:ie.precio,onBlur:Fe=>{et(ie.id,"precio",parseFloat(Fe.target.value)||0),A(null)},onKeyDown:Fe=>{Fe.key==="Enter"&&(et(ie.id,"precio",parseFloat(Fe.target.value)||0),A(null)),Fe.key==="Escape"&&A(null)},className:"text-lg font-bold text-blue-700 bg-blue-50 border border-blue-200 rounded px-2 py-1 w-24",autoFocus:!0}):o.jsx("p",{className:"text-lg font-bold text-blue-700 cursor-pointer hover:bg-blue-50 px-2 py-1 rounded",onClick:()=>A(ie.id),title:"Click para editar precio",children:Ot(ie.precio)}),ie.cantidad!==void 0&&o.jsx("div",{className:"text-sm",children:K===ie.id?o.jsx("input",{type:"number",min:"0",defaultValue:ie.cantidad,onBlur:Fe=>{et(ie.id,"cantidad",parseInt(Fe.target.value)||0),R(null)},onKeyDown:Fe=>{Fe.key==="Enter"&&(et(ie.id,"cantidad",parseInt(Fe.target.value)||0),R(null)),Fe.key==="Escape"&&R(null)},className:"bg-gray-50 border border-gray-200 rounded px-2 py-1 w-16 text-center",autoFocus:!0}):o.jsxs("span",{className:`cursor-pointer hover:bg-gray-50 px-2 py-1 rounded ${ie.cantidad<=5?"text-red-600 font-semibold":ie.cantidad<=20?"text-yellow-600":"text-green-600"}`,onClick:()=>R(ie.id),title:"Click para editar cantidad",children:["Stock: ",ie.cantidad]})})]}),o.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3",children:ie.descripcion}),o.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:[o.jsxs("p",{children:["Creado: ",kt(ie.fechaCreacion)]}),ie.fechaActualizacion&&o.jsxs("p",{children:["Actualizado: ",kt(ie.fechaActualizacion)]})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("button",{onClick:()=>e(ie),className:"px-3 py-2 border border-blue-300 text-blue-600 rounded text-sm hover:bg-blue-50 transition-colors",title:"Editar",children:"Editar"}),o.jsx("button",{onClick:()=>Be(ie),className:"px-3 py-2 border border-green-300 text-green-600 rounded text-sm hover:bg-green-50 transition-colors",title:"Duplicar",children:o.jsx(jz,{})}),o.jsx("button",{onClick:()=>{H(ie),O(!0)},className:"px-3 py-2 border border-red-300 text-red-600 rounded text-sm hover:bg-red-50 transition-colors",title:"Eliminar",children:o.jsx(P4,{})})]})]})]},ie.id))})}),_t.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 text-6xl mb-4 flex justify-center",children:o.jsx(I4,{})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron productos"}),o.jsx("p",{className:"text-gray-500 mb-4",children:g||x?"Intenta ajustar los filtros de búsqueda":"Comienza agregando tu primer producto"}),!g&&!x&&o.jsx("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Agregar Primer Producto"})]}),o.jsx(dn,{children:M&&o.jsx(oe.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsx(oe.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:o.jsx("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),o.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminación"}),o.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['¿Estás seguro de que deseas eliminar el producto "',F==null?void 0:F.nombre,'"? Esta acción no se puede deshacer.']}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{O(!1),H(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:ut,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},Fz=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),[i,a]=T.useState(!1),[c,u]=T.useState(null),[h,f]=T.useState(!1),[g,y]=T.useState(null),[x,w]=T.useState({nombre:"",descripcion:"",imagen:"",activa:!0,orden:0}),[S,b]=T.useState(!1);T.useEffect(()=>{N()},[]);const N=()=>{try{return ar(Ft(Pe,"categorias"),k=>{const V=k.docs.map(U=>({id:U.id,...U.data()})).sort((U,D)=>(U.orden||0)-(D.orden||0));e(V),r(!1)})}catch(A){console.error("Error loading categories:",A),r(!1)}},j=()=>{w({nombre:"",descripcion:"",imagen:"",activa:!0,orden:t.length}),u(null)},M=A=>{u(A),w({nombre:A.nombre||"",descripcion:A.descripcion||"",imagen:A.imagen||"",activa:A.activa!==!1,orden:A.orden||0}),a(!0)},O=async A=>{b(!0);try{const k=es(ts,`categorias/${Date.now()}_${A.name}`);await zv(k,A);const V=await tl(k);w(U=>({...U,imagen:V}))}catch(k){console.error("Error uploading image:",k),alert("Error al subir la imagen")}finally{b(!1)}},F=async A=>{A.preventDefault(),r(!0);try{const k={...x,ruta:x.nombre.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),fechaActualizacion:new Date};if(c)await Bn(ot(Pe,"categorias",c.id),k);else{k.fechaCreacion=new Date,k.productCount=0;const V=k.ruta;await Em(Ft(Pe,"categorias"),k)}a(!1),j()}catch(k){console.error("Error saving category:",k),alert("Error al guardar la categoría")}finally{r(!1)}},H=async(A,k)=>{try{await Bn(ot(Pe,"categorias",A),{activa:!k,fechaActualizacion:new Date})}catch(V){console.error("Error updating category status:",V),alert("Error al actualizar el estado de la categoría")}},K=async()=>{if(g)try{await _m(ot(Pe,"categorias",g.id)),f(!1),y(null),alert("Categoría eliminada exitosamente")}catch(A){console.error("Error deleting category:",A),alert("Error al eliminar la categoría")}},R=async(A,k)=>{const V=t.findIndex(D=>D.id===A);if(V===-1)return;const U=k==="up"?V-1:V+1;if(!(U<0||U>=t.length))try{const D=[],xe=t[V],Ke=t[U];D.push(Bn(ot(Pe,"categorias",xe.id),{orden:U}),Bn(ot(Pe,"categorias",Ke.id),{orden:V})),await Promise.all(D)}catch(D){console.error("Error reordering categories:",D),alert("Error al reordenar las categorías")}},I=A=>A?(A.seconds?new Date(A.seconds*1e3):new Date(A)).toLocaleDateString("es-ES"):"N/A";return n&&t.length===0?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Bp,{size:"large",color:"blue",text:"Cargando categorías..."})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestión de Categorías"}),o.jsxs("p",{className:"text-gray-600",children:[t.length," categorías en total"]})]}),o.jsxs("button",{onClick:()=>{j(),a(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:"+"}),"Agregar Categoría"]})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📁"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categorías"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Comienza creando tu primera categoría de productos"}),o.jsx("button",{onClick:()=>{j(),a(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Crear Primera Categoría"})]}):o.jsx("div",{className:"divide-y divide-gray-200",children:o.jsx(dn,{children:t.map((A,k)=>o.jsx(oe.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center",children:A.imagen?o.jsx("img",{src:A.imagen,alt:A.nombre,className:"w-full h-full object-cover"}):o.jsx(Pz,{className:"text-gray-400 text-2xl"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:A.nombre}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.activa?"Activa":"Inactiva"})]}),A.descripcion&&o.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:A.descripcion}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[o.jsxs("span",{children:["Ruta: /",A.ruta]}),o.jsxs("span",{children:["Productos: ",A.productCount||0]}),o.jsxs("span",{children:["Creada: ",I(A.fechaCreacion)]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("button",{onClick:()=>R(A.id,"up"),disabled:k===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover arriba",children:o.jsx(Az,{})}),o.jsx("button",{onClick:()=>R(A.id,"down"),disabled:k===t.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover abajo",children:o.jsx(Cz,{})})]}),o.jsx("button",{onClick:()=>H(A.id,A.activa),className:`p-2 rounded ${A.activa?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:A.activa?"Desactivar":"Activar",children:A.activa?o.jsx(C1,{}):o.jsx(j4,{})}),o.jsx("button",{onClick:()=>M(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:o.jsx(Iz,{})}),o.jsx("button",{onClick:()=>{y(A),f(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:o.jsx(P4,{})})]})]})},A.id))})})}),o.jsx(dn,{children:i&&o.jsx(oe.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(oe.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[o.jsxs("div",{className:"bg-blue-700 text-white p-6 flex justify-between items-center rounded-t-2xl",children:[o.jsx("h2",{className:"text-xl font-bold",children:c?"Editar Categoría":"Agregar Categoría"}),o.jsx("button",{onClick:()=>{a(!1),j()},className:"text-white hover:text-gray-200 text-2xl font-bold",children:"×"})]}),o.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Categoría *"}),o.jsx("input",{type:"text",required:!0,value:x.nombre,onChange:A=>w(k=>({...k,nombre:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Videojuegos"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),o.jsx("input",{type:"number",min:"0",value:x.orden,onChange:A=>w(k=>({...k,orden:parseInt(A.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),o.jsx("textarea",{rows:3,value:x.descripcion,onChange:A=>w(k=>({...k,descripcion:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción opcional de la categoría"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen de la Categoría"}),o.jsx("input",{type:"file",accept:"image/*",onChange:A=>{var k;return((k=A.target.files)==null?void 0:k[0])&&O(A.target.files[0])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),x.imagen&&o.jsx("div",{className:"mt-3",children:o.jsx("img",{src:x.imagen,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]}),o.jsx("div",{children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:x.activa,onChange:A=>w(k=>({...k,activa:A.target.checked})),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Categoría activa"]})}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[o.jsx("button",{type:"button",onClick:()=>{a(!1),j()},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),o.jsxs("button",{type:"submit",disabled:S,className:"px-6 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[S?o.jsx(Bp,{size:"small",color:"white",className:"mr-2"}):null,S?"Subiendo imagen...":c?"Actualizar":"Crear Categoría"]})]})]})]})})}),o.jsx(dn,{children:h&&o.jsx(oe.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsx(oe.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:o.jsx("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),o.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-2",children:"Confirmar Eliminación"}),o.jsxs("p",{className:"text-center text-gray-600 mb-6",children:['¿Estás seguro de que deseas eliminar la categoría "',g==null?void 0:g.nombre,'"? Esta acción no se puede deshacer y puede afectar los productos asociados.']}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{f(!1),y(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:K,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Eliminar"})]})]})})})})]})},Lk=()=>{const[t,e]=T.useState({productos:0,categorias:0,usuarios:0,pedidos:0}),[n,r]=T.useState([]),[i,a]=T.useState(!0);return T.useEffect(()=>{const c=async()=>{try{const f=an(Ft(Pe,"productos")),g=await Ir(f),y=an(Ft(Pe,"categorias")),x=await Ir(y),w=an(Ft(Pe,"usuarios")),S=await Ir(w);let b=0;try{const N=an(Ft(Pe,"pedidos"));b=(await Ir(N)).size}catch(N){console.log("No pedidos collection or other error:",N)}e({productos:g.size,categorias:x.size,usuarios:S.size,pedidos:b})}catch(f){console.error("Error fetching stats:",f)}},u=()=>{try{const f=an(Ft(Pe,"productos"),zs("fechaCreacion","desc"),wm(5));return ar(f,y=>{const x=y.docs.map(w=>({id:w.id,...w.data()}));r(x),a(!1)},y=>{console.error("Error fetching recent products:",y),a(!1)})}catch(f){console.error("Error setting up recent products listener:",f),a(!1)}};c();const h=u();return()=>{h&&h()}},[]),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Dashboard"}),o.jsx("p",{className:"text-gray-600",children:"Bienvenido al panel de administración"})]})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Cf,{title:"Productos",count:t.productos,icon:o.jsx(I4,{className:"text-blue-500",size:24}),linkTo:"/admin/productos"}),o.jsx(Cf,{title:"Categorías",count:t.categorias,icon:o.jsx(Rz,{className:"text-green-500",size:24}),linkTo:"/admin/categorias"}),o.jsx(Cf,{title:"Usuarios",count:t.usuarios,icon:o.jsx(gx,{className:"text-purple-500",size:24}),linkTo:"/admin/usuarios"}),o.jsx(Cf,{title:"Pedidos",count:t.pedidos,icon:o.jsx(Mz,{className:"text-orange-500",size:24}),linkTo:"/admin/pedidos"})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Productos Recientes"}),i?o.jsx("div",{className:"flex justify-center items-center h-32",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):n.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(c=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsxs("div",{className:"flex-shrink-0 h-10 w-10 relative",children:[(()=>{try{const u=c.imagen||(Array.isArray(c.imagenes)&&c.imagenes.length>0?c.imagenes[0]:null)||(Array.isArray(c.variantes)&&c.variantes.length>0&&c.variantes[0].imagen?c.variantes[0].imagen:null)||(Array.isArray(c.media)&&c.media.length>0?c.media[0].url:null)||(Array.isArray(c.variantes)&&c.variantes.length>0&&Array.isArray(c.variantes[0].media)&&c.variantes[0].media.length>0?c.variantes[0].media[0].url:null);return u?o.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:u,alt:"",onError:h=>{h.target.style.display="none",h.target.nextSibling.style.display="flex"}}):o.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"N/A"})}catch{return o.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-500 text-xs",children:"Error"})}})(),o.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",style:{display:"none"},children:"N/A"})]}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.nombre||"Sin nombre"}),o.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",c.id.substring(0,8),"..."]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(c.precio||0)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${c.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.activo?"Activo":"Inactivo"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[o.jsx(St,{to:`/admin/productos/editar/${c.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",children:"Editar"}),o.jsx(St,{to:`/producto/${c.id}`,className:"text-green-600 hover:text-green-900",target:"_blank",rel:"noopener noreferrer",children:"Ver"})]})]},c.id))})]})}):o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-500",children:"No hay productos recientes"})}),o.jsx("div",{className:"mt-4 text-right",children:o.jsx(St,{to:"/admin/productos",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Ver todos los productos →"})})]})]})},Cf=({title:t,count:e,icon:n,linkTo:r})=>o.jsx(oe.div,{whileHover:{y:-5,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},className:"bg-white p-6 rounded-lg shadow-sm border transition-all",children:o.jsx(St,{to:r,className:"block",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e})]}),o.jsx("div",{className:"p-3 bg-gray-50 rounded-full",children:n})]})})}),Uz=/\/(Productos|productospcu)\//i;function bo(t){return typeof t=="string"&&t.startsWith("/")&&Uz.test(t)}function $z(t=""){try{const e=t.indexOf("?"),n=e>=0?t.slice(0,e):t,r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}catch{return String(t||"")}}async function zz(t){const e=await fetch(t);if(!e.ok)throw new Error(`No se pudo leer ${t} (${e.status})`);return await e.blob()}async function Vk(t,e){const n=await zz(e),r=$z(e)||`file-${Date.now()}`,i=`productos/${t}/${Date.now()}-${r}`,a=es(ts,i);return await zv(a,n,{contentType:n.type||void 0}),await tl(a)}function Fk(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t||null))}}async function yx(t,e){if(!e)return e;if(typeof e=="string")return bo(e)?await Vk(t,e):e;if(typeof e=="object"){if(e.url&&bo(e.url)){const n=await Vk(t,e.url);return{...e,url:n}}return e}return e}async function Ji(t,e){const n=Array.isArray(e)?e:[],r=[];for(const i of n)r.push(await yx(t,i));return r}function jn(t){return(Array.isArray(t)?t:[]).some(e=>typeof e=="string"?bo(e):e&&typeof e=="object"?bo(e.url):!1)}function Bz(t){if(!t)return!1;if(bo(t.imagen)||jn(t.imagenPrincipal)||jn(t.imagenes)||jn(t.media)||jn(t.galeriaImagenes)||jn(t.imagenesExtra)||jn(t.tresArchivosExtras)||jn(t.videoAcercaArticulo))return!0;if(Array.isArray(t.variantes)){for(const e of t.variantes)if(e&&(bo(e.imagen)||jn(e.imagenPrincipal)||jn(e.imagenes)||jn(e.media)||jn(e.galeriaImagenes)))return!0}return!1}async function Hz(t){const n=(await Ir(Ft(Pe,"productos"))).docs.map(a=>({id:a.id,data:a.data()}));let r=0,i=n.length;for(let a=0;a<n.length;a++){const{id:c,data:u}=n[a];if(!Bz(u)){t==null||t({type:"skip",id:c,index:a+1,total:i});continue}const h=Fk({});if(bo(u.imagen)&&(h.imagen=await yx(c,u.imagen)),jn(u.imagenPrincipal)&&(h.imagenPrincipal=await Ji(c,u.imagenPrincipal)),jn(u.imagenes)&&(h.imagenes=await Ji(c,u.imagenes)),jn(u.media)&&(h.media=await Ji(c,u.media)),jn(u.galeriaImagenes)&&(h.galeriaImagenes=await Ji(c,u.galeriaImagenes)),jn(u.imagenesExtra)&&(h.imagenesExtra=await Ji(c,u.imagenesExtra)),jn(u.tresArchivosExtras)&&(h.tresArchivosExtras=await Ji(c,u.tresArchivosExtras)),jn(u.videoAcercaArticulo)&&(h.videoAcercaArticulo=await Ji(c,u.videoAcercaArticulo)),Array.isArray(u.variantes)){const f=[];for(const g of u.variantes){const y=Fk(g)||{};bo(y.imagen)&&(y.imagen=await yx(c,y.imagen)),jn(y.imagenPrincipal)&&(y.imagenPrincipal=await Ji(c,y.imagenPrincipal)),jn(y.imagenes)&&(y.imagenes=await Ji(c,y.imagenes)),jn(y.media)&&(y.media=await Ji(c,y.media)),jn(y.galeriaImagenes)&&(y.galeriaImagenes=await Ji(c,y.galeriaImagenes)),f.push(y)}h.variantes=f}h.fechaActualizacion=new Date,await Jn(ot(Pe,"productos",c),h,{merge:!0}),r++,t==null||t({type:"migrated",id:c,index:a+1,total:i})}return t==null||t({type:"done",migratedCount:r,total:i}),{migratedCount:r,total:i}}const Z0="text-blue-900",Wz="bg-blue-800",il="ZeiFzBgosCd0apv9cXL6aQZCYyu2";function qz(t=""){var n,r;if(!t)return"US";const e=t.trim().split(" ");return((((n=e[0])==null?void 0:n[0])||"")+(((r=e[1])==null?void 0:r[0])||"")).toUpperCase()}function Gz(t=""){if(!t)return null;const e=t.match(/(https?:\/\/[^\s]+)/i);if(e)return e[1];const n=t.match(/(maps\.app\.[^\s]+|goo\.gl\/[^\s]+|google\.com\/maps[^\s]*)/i);if(n){const r=n[0];return r.startsWith("http")?r:`https://${r}`}return null}function xx(t){if(!t)return null;if(typeof t=="object"&&t.seconds)return new Date(t.seconds*1e3).toLocaleString();const e=new Date(t);return isNaN(e.getTime())?String(t):e.toLocaleString()}function Kz({usuario:t,onClose:e}){const[n,r]=T.useState([]),[i,a]=T.useState(!0),[c,u]=T.useState(t),[h,f]=T.useState(null);T.useEffect(()=>{if(!(t!=null&&t.id))return;const x=ar(ot(Pe,"users",t.id),S=>{S.exists()&&u(b=>({...b,...S.data()}))}),w=ar(ot(Pe,"usuarios",t.id),S=>{S.exists()&&u(b=>({...b,...S.data()}))});return()=>{x(),w()}},[t==null?void 0:t.id]),T.useEffect(()=>{if(!t)return;const x=an(Ft(Pe,"orders")),w=ar(x,S=>{const b=S.docs.map(N=>({id:N.id,...N.data()})).filter(N=>String(N.userId)===String(t.id));r(b.sort((N,j)=>{var F,H;const M=((F=N.fecha)==null?void 0:F.seconds)||0;return(((H=j.fecha)==null?void 0:H.seconds)||0)-M})),a(!1)},()=>{r([]),a(!1)});return()=>w()},[t]),T.useEffect(()=>{!t||t.uid!==il||migrationRanRef.current||(migrationRanRef.current=!0,(async()=>{try{console.log("[Migración] Iniciando migración de medios legacy a Firebase Storage..."),await Hz(x=>{x&&(x.type==="skip"?console.log(`[Migración] (${x.index}/${x.total}) Sin cambios:`,x.id):x.type==="migrated"?console.log(`[Migración] (${x.index}/${x.total}) Migrado:`,x.id):x.type==="done"&&console.log(`[Migración] Completada. Migrados: ${x.migratedCount}/${x.total}`))})}catch(x){console.error("[Migración] Error ejecutando migración:",x)}})())},[t]),T.useEffect(()=>{const x=w=>{w.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e]);const g=(c==null?void 0:c.direccion)||(c==null?void 0:c.direccionCompleta)||"",y=(c==null?void 0:c.ubicacion)||Gz(g);return o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),o.jsxs("div",{role:"dialog","aria-modal":"true",className:"fixed top-0 left-0 w-full h-full max-h-none !rounded-none !shadow-none bg-white overflow-y-auto flex flex-col",style:{zIndex:1e4},onClick:x=>x.stopPropagation(),children:[o.jsxs("header",{className:`flex justify-between items-center px-6 py-4 shadow ${Wz}`,children:[o.jsxs("div",{className:"admin-user-header",children:[o.jsx("div",{className:"admin-user-avatar",children:qz((c==null?void 0:c.displayName)||(c==null?void 0:c.nombre))}),o.jsxs("div",{className:"admin-user-info",children:[o.jsx("h2",{className:"admin-user-name",children:(c==null?void 0:c.displayName)||(c==null?void 0:c.nombre)||"Usuario"}),o.jsx("p",{className:"admin-user-email",children:c==null?void 0:c.email}),o.jsx("div",{className:"admin-user-badges",children:o.jsx("span",{className:t.id===il?"badge-admin":"badge-user",children:t.id===il?"Admin":"Usuario"})})]})]}),o.jsx("button",{onClick:e,"aria-label":"Cerrar",className:"admin-close-btn",children:"×"})]}),o.jsxs("div",{className:"flex-1 px-2 sm:px-8 py-4 sm:py-8 space-y-7 bg-gray-50",children:[o.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:o.jsx(Lz,{})}),o.jsx("h3",{className:`text-xl font-bold ${Z0}`,children:"Información Personal"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[o.jsx(uc,{label:"Nombre Completo",value:c.displayName||"No especificado"}),o.jsx(uc,{label:"Email",value:c.email||"No especificado"}),o.jsx(uc,{label:"Teléfono",value:c.telefono||"No especificado"}),o.jsx(uc,{label:"Código de Usuario",value:c.codigo||"No asignado"}),o.jsx(uc,{label:"Método de Entrega",value:c.metodoEntrega||"No especificado"}),o.jsx(uc,{label:"Fecha de Registro",value:c.createdAt?xx(c.createdAt):"No disponible"})]})]}),o.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:o.jsx(Mk,{})}),o.jsx("h3",{className:`text-xl font-bold ${Z0}`,children:"Dirección y Ubicación"})]}),o.jsx("p",{className:"text-base text-blue-900 mb-4",children:g||"No se ha registrado dirección"}),y&&o.jsxs("a",{href:y,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors",children:[o.jsx(Mk,{})," Ver en Google Maps"]})]}),o.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:o.jsx(Ok,{})}),o.jsx("h3",{className:`text-xl font-bold ${Z0}`,children:"Historial de Compras"}),o.jsxs("span",{className:"bg-blue-100 text-blue-900 px-3 py-1 rounded-full text-sm font-bold",children:[n.length," ",n.length===1?"compra":"compras"]})]}),i?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Bp,{size:"medium",color:"blue",text:"Cargando compras..."})}):n.length===0?o.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-xl",children:[o.jsx("div",{className:"text-6xl mb-4 text-blue-700 flex items-center justify-center",children:o.jsx(Ok,{})}),o.jsx("p",{className:"text-xl text-blue-700 font-medium",children:"No hay compras registradas"})]}):o.jsx("div",{className:"admin-orders-grid",children:n.map(x=>{var w,S;return o.jsxs("div",{className:"admin-order-card",children:[o.jsxs("div",{className:"admin-order-header",children:[o.jsxs("div",{className:"order-info",children:[o.jsx("h4",{className:"order-number",children:x.numeroOrden||`#${x.id.slice(-8)}`}),o.jsx("p",{className:"order-date",children:xx(x.fecha)})]}),o.jsxs("div",{className:"order-status-price",children:[o.jsx("span",{className:`admin-status-badge ${x.estado||"pendiente"}`,children:x.estado==="completado"?"✓ Completado":x.estado==="cancelado"?"✗ Cancelado":"⏳ Pendiente"}),o.jsx("div",{className:"order-total",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(x.total||0)})]})]}),o.jsx("div",{className:"admin-order-customer",children:o.jsxs("div",{className:"customer-info",children:[o.jsx("span",{className:"customer-name",children:x.userName||"Usuario"}),o.jsx("span",{className:"customer-email",children:x.userEmail})]})}),o.jsxs("div",{className:"admin-products-preview",children:[(w=x.productos)==null?void 0:w.slice(0,3).map((b,N)=>o.jsx("div",{className:"admin-product-item",children:o.jsxs("div",{className:"admin-product-info",children:[o.jsx("span",{className:"product-name",children:b.nombre}),o.jsxs("span",{className:"product-quantity",children:["Cantidad: ",b.cantidad," • ",new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(b.precio)]}),o.jsx("button",{className:"btn-view-product",onClick:j=>{j.stopPropagation(),window.location.href=`/producto/${b.id}`},title:"Ver producto",children:o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(C1,{})," Ver producto"]})})]})},N)),((S=x.productos)==null?void 0:S.length)>3&&o.jsxs("div",{className:"more-products-admin",children:["+",x.productos.length-3," más productos"]})]}),o.jsxs("div",{className:"admin-order-actions",children:[o.jsx("button",{className:"btn-admin btn-view",onClick:()=>f(x),children:"Ver detalles"}),x.metodoPago&&o.jsx("span",{className:"payment-method",children:x.metodoPago})]})]},x.id)})})]})]}),o.jsx(dn,{children:h&&o.jsx(D4,{order:h,onClose:()=>f(null)})})]})]})}function uc({label:t,value:e}){return o.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[o.jsx("p",{className:"font-semibold text-blue-700 text-xs mb-1",children:t}),o.jsx("p",{className:"text-base font-medium text-blue-900 break-all",children:e})]})}function Xz(){const{usuario:t,usuarioInfo:e}=Br(),[n,r]=T.useState(!1),[i,a]=T.useState(null);return o.jsx("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel del Vendedor"}),o.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestiona tus productos en tiempo real"}),(e==null?void 0:e.empresa)&&o.jsx("div",{className:"mt-3 inline-flex items-center gap-2 bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold",children:e.empresa})]}),o.jsx(R4,{onAddProduct:()=>{a(null),r(!0)},onEditProduct:c=>{a(c),r(!0)}}),n&&o.jsx(A4,{product:i,onClose:()=>{r(!1),a(null)},onSave:()=>{r(!1),a(null)}})]})})}function Qz(){const{usuario:t,usuarioInfo:e}=Br(),[n,r]=T.useState([]),[i,a]=T.useState(""),[c,u]=T.useState(null),[h,f]=T.useState(null),[g,y]=T.useState("dashboard"),[x,w]=T.useState(!1),[S,b]=T.useState(null);if(T.useRef(!1),T.useEffect(()=>{if(!t||t.uid!==il)return;const F=ar(an(Ft(Pe,"users")),K=>{const R=K.docs.map(I=>({id:I.id,...I.data()}));r(I=>{const A=[...R];return I.forEach(k=>{const V=A.findIndex(U=>U.id===k.id);V>=0&&(A[V]={...A[V],...k})}),A})}),H=ar(an(Ft(Pe,"usuarios")),K=>{const R=K.docs.map(I=>({id:I.id,...I.data()}));r(I=>{const A=[...I];return R.forEach(k=>{const V=A.findIndex(U=>U.id===k.id);V>=0?A[V]={...A[V],...k}:A.push(k)}),A})});return()=>{F(),H()}},[t]),!t)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Inicia sesión"});const N=(t==null?void 0:t.uid)===il||(e==null?void 0:e.isAdmin)===!0,j=!!(e!=null&&e.isSeller||e!=null&&e.empresa||e!=null&&e.empresaId);if(!N&&j)return o.jsx(Xz,{});if(!N)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Sin acceso"});const M=n.filter(F=>{const H=i.toLowerCase();return(F.displayName||"").toLowerCase().includes(H)||(F.email||"").toLowerCase().includes(H)||(F.telefono||"").toLowerCase().includes(H)||(F.direccion||"").toLowerCase().includes(H)||(F.codigo||"").toLowerCase().includes(H)}),O=()=>{switch(g){case"dashboard":return o.jsx(Lk,{onAddProduct:()=>{b(null),w(!0),y("products")},onOpenCategories:()=>y("categories"),onViewAllProducts:()=>y("products"),onViewAllOrders:()=>y("orders")});case"products":return o.jsx(R4,{onAddProduct:()=>{b(null),w(!0)},onEditProduct:F=>{b(F),w(!0)}});case"categories":return o.jsx(Fz,{});case"users":return o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Usuarios"}),o.jsx("input",{type:"text",value:i,onChange:F=>a(F.target.value),placeholder:"Buscar por nombre, email, teléfono, dirección o código",className:"w-full sm:w-80 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"})]}),M.length===0?o.jsx("div",{className:"text-gray-600",children:"No hay usuarios que coincidan con la búsqueda."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teléfono"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registrado"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(F=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>u(F),children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 font-medium",children:F.displayName||F.nombre||"Usuario"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:F.email||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:F.telefono||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:F.codigo||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:xx(F.createdAt)||"-"}),o.jsx("td",{className:"px-4 py-2 text-sm",children:o.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${F.id===il?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:F.id===il?"Admin":"Usuario"})})]},F.id))})]})})]});default:return o.jsx(Lk,{})}};return o.jsxs("main",{className:"admin-page min-h-screen bg-blue-50 p-2 sm:p-6",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-3xl sm:text-5xl font-extrabold mb-3 text-blue-900",children:"Panel Administrativo"}),o.jsx("p",{className:"text-base sm:text-xl text-blue-700 font-medium",children:"Gestión Completa del Sistema"}),o.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-center gap-3",children:[o.jsxs("span",{className:"bg-blue-100 text-blue-900 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2",children:[o.jsx(gx,{})," ",n.length," ",n.length===1?"usuario":"usuarios"," registrados"]}),o.jsx("span",{className:"bg-green-100 text-green-900 px-4 py-2 rounded-full text-sm font-bold",children:"Sincronización en tiempo real"})]})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-lg p-1 mb-8 border border-blue-100",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:[{id:"dashboard",label:"Dashboard",icon:o.jsx(Tz,{})},{id:"products",label:"Productos",icon:o.jsx(Nz,{})},{id:"categories",label:"Categorías",icon:o.jsx(Oz,{})},{id:"orders",label:"Pedidos",icon:o.jsx(Dz,{})},{id:"users",label:"Usuarios",icon:o.jsx(gx,{})}].map(F=>o.jsx("button",{onClick:()=>y(F.id),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-medium transition-all duration-200 ${g===F.id?"bg-blue-700 text-white shadow-md":"text-blue-700 hover:bg-blue-50"}`,children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:F.icon}),o.jsx("span",{className:"hidden sm:inline",children:F.label})]})},F.id))})}),o.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:O()},g),c&&o.jsx(Kz,{usuario:c,onClose:()=>u(null)}),x&&o.jsx(A4,{product:S,onClose:()=>{w(!1),b(null)},onSave:()=>{w(!1),b(null)}})]}),o.jsx(dn,{children:h&&o.jsx(D4,{order:h,onClose:()=>f(null)})})]})}function D4({order:t,onClose:e}){var c,u;const n=h=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(h||0),r=h=>{if(!h)return"Fecha no disponible";let f;return typeof h=="object"&&h.seconds?f=new Date(h.seconds*1e3):f=new Date(h),f.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},i=h=>{switch(h){case"completado":return"status-completed";case"cancelado":return"status-cancelled";case"pendiente":return"status-pending";default:return"status-pending"}},a=h=>{switch(h){case"completado":return"✓ Completado";case"cancelado":return"✗ Cancelado";case"pendiente":return"⏳ Pendiente";default:return"⏳ Pendiente"}};return zr.useEffect(()=>{const h=f=>{f.key==="Escape"&&e()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[e]),o.jsx(oe.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:o.jsxs(oe.div,{className:"order-details-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{children:[o.jsx("h2",{children:t.numeroOrden||`Orden #${t.id.slice(-8)}`}),o.jsx("p",{className:"order-date-detail",children:r(t.fecha)})]}),o.jsx("button",{className:"close-btn",onClick:e,children:"×"})]}),o.jsxs("div",{className:"modal-content",children:[o.jsxs("div",{className:"order-status-section",children:[o.jsx("span",{className:`status-badge large ${i(t.estado)}`,children:a(t.estado)}),t.estadoPago&&o.jsxs("span",{className:"payment-status",children:["Pago: ",t.estadoPago==="pagado"?"✓ Pagado":"✗ Fallido"]})]}),o.jsxs("div",{className:"order-summary",children:[o.jsx("h3",{children:"Resumen de la orden"}),o.jsxs("div",{className:"summary-row total",children:[o.jsx("span",{children:"Total pagado:"}),o.jsx("span",{children:n(t.total)})]})]}),o.jsxs("div",{className:"products-section",children:[o.jsxs("h3",{children:["Productos (",((c=t.productos)==null?void 0:c.length)||0,")"]}),o.jsx("div",{className:"products-list",children:(u=t.productos)==null?void 0:u.map((h,f)=>o.jsx("div",{className:"product-detail-item",children:o.jsxs("div",{className:"product-detail-info",children:[o.jsx("h4",{children:h.nombre}),o.jsx("p",{className:"product-company",children:h.empresa||"N/A"}),o.jsxs("div",{className:"product-pricing",children:[o.jsxs("span",{className:"quantity",children:["Cantidad: ",h.cantidad]}),o.jsxs("span",{className:"price",children:["Precio unitario: ",n(h.precio)]}),o.jsxs("span",{className:"subtotal",children:["Subtotal: ",n(h.subtotal||h.precio*h.cantidad)]})]}),o.jsx("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${h.id}`,title:"Ver producto",children:"👁️ Ver producto"})]})},f))})]}),t.direccionEntrega&&o.jsxs("div",{className:"delivery-section",children:[o.jsx("h3",{children:"Información de entrega"}),o.jsx("p",{children:t.direccionEntrega}),t.telefonoContacto&&o.jsxs("p",{children:["Teléfono: ",t.telefonoContacto]})]}),t.metodoPago&&o.jsxs("div",{className:"payment-section",children:[o.jsx("h3",{children:"Información de pago"}),o.jsxs("p",{children:["Método: ",t.metodoPago]})]})]})]})})}const _s=[{id:1,img:"/ads/1.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/6.png",link:"https://playcenterwisp.com",isExternal:!0},{id:2,img:"/ads/2.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0},{id:3,img:"/ads/3.png",link:"/Productos/videojuegos",isExternal:!1},{id:4,img:"/ads/5.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:5,img:"/ads/4.png",link:"/Productos",isExternal:!1}];function Yz(){const[t,e]=T.useState(0),n=T.useRef(null),r=6e3,[i,a]=T.useState(!1),c=T.useCallback(()=>{clearTimeout(n.current),!i&&(n.current=setTimeout(()=>{e(S=>(S+1)%_s.length)},r))},[i]);T.useEffect(()=>(c(),()=>clearTimeout(n.current)),[t,c]),T.useEffect(()=>{const S=b=>{var N;try{const j=!!((N=b==null?void 0:b.detail)!=null&&N.paused);a(j),clearTimeout(n.current),j||(n.current=setTimeout(()=>{e(M=>(M+1)%_s.length)},r))}catch{}};return window.addEventListener("pcu:main-slider-toggle",S),()=>window.removeEventListener("pcu:main-slider-toggle",S)},[]);const u=()=>{clearTimeout(n.current),e(S=>S===0?_s.length-1:S-1)},h=()=>{clearTimeout(n.current),e(S=>(S+1)%_s.length)},f=T.useRef(0),g=T.useRef(0),y=S=>{f.current=S.touches[0].clientX},x=S=>{g.current=S.touches[0].clientX},w=()=>{const S=g.current-f.current;Math.abs(S)>50&&(S>0?u():h())};return o.jsxs("div",{onTouchStart:y,onTouchMove:x,onTouchEnd:w,className:`relative w-full max-w-[1600px] mx-auto overflow-hidden rounded-xl shadow-xl
        h-[140px] sm:h-[180px] md:h-[260px] lg:h-[400px]`,children:[o.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{width:`${_s.length*100}%`,transform:`translateX(-${t*(100/_s.length)}%)`},children:_s.map(S=>S.isExternal?o.jsx("a",{href:S.link,target:"_blank",rel:"noopener noreferrer",className:"w-full h-full flex-shrink-0",style:{width:`${100/_s.length}%`},children:o.jsx("img",{src:S.img,alt:`Anuncio ${S.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},S.id):o.jsx(St,{to:S.link,className:"w-full h-full flex-shrink-0",style:{width:`${100/_s.length}%`},children:o.jsx("img",{src:S.img,alt:`Anuncio ${S.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},S.id))}),o.jsx("button",{onClick:u,className:"absolute top-1/2 left-2 sm:left-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Anterior",children:o.jsx(AU,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),o.jsx("button",{onClick:h,className:"absolute top-1/2 right-2 sm:right-4 -translate-y-1/2 bg-black/40 hover:bg-black/60 backdrop-blur rounded-full p-1.5 sm:p-3 z-20 transition","aria-label":"Siguiente",children:o.jsx(IU,{className:"text-white w-4 h-4 sm:w-6 sm:h-6"})}),o.jsx("div",{className:"absolute bottom-3 sm:bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-20",children:_s.map((S,b)=>o.jsx("button",{onClick:()=>{clearTimeout(n.current),e(b)},"aria-label":`Ir al slide ${b+1}`,className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${b===t?"bg-white opacity-90 scale-110":"bg-white opacity-40"} transition`},b))})]})}const Jz=[{id:1,img:"/ads/movil/aficionados-movil.png",link:"/Productos/coleccionables",isExternal:!1},{id:2,img:"/ads/movil/articulosads.png",link:"/Productos/videojuegos",isExternal:!1},{id:3,img:"/ads/movil/internetads.png",link:"https://playcenterwisp.com",isExternal:!0},{id:4,img:"/ads/movil/camarasads.png",link:"/Productos/camaras",isExternal:!1},{id:5,img:"/ads/movil/consolaads.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/movil/ofertas.png",link:"/Productos/ofertas-especiales",isExternal:!1},{id:7,img:"/ads/movil/productosads.png",link:"/Productos",isExternal:!1},{id:8,img:"/ads/movil/retroads.png",link:"/Productos/retro-juegos",isExternal:!1},{id:9,img:"/ads/movil/nuestras-estafetas.png",link:"/estafetas",isExternal:!1},{id:10,img:"/ads/movil/ubicacionads.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0}];function Zz(){return o.jsx("div",{className:"block sm:hidden w-full max-w-[600px] mx-auto px-3 py-4",children:o.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide space-x-3",style:{scrollPaddingLeft:"12px",scrollPaddingRight:"12px"},children:Jz.map(t=>o.jsx("a",{href:t.link,target:t.isExternal?"_blank":"_self",rel:"noreferrer",className:"flex-shrink-0 w-[300px] h-[420px] rounded-xl overflow-hidden shadow-lg bg-white snap-center",children:o.jsx("img",{src:t.img,alt:`Anuncio ${t.id}`,className:"w-full h-full object-cover",draggable:!1})},t.id))})})}const Uk=["/animacion/img1.png","/animacion/img2.png","/animacion/img3.png","/animacion/img4.png","/animacion/img5.png","/animacion/img6.png","/animacion/img7.png","/animacion/img8.png","/animacion/img9.png","/animacion/img10.png"],eB=[...Uk,...Uk.slice(0,5)],tB=()=>o.jsx("div",{className:"loader",role:"presentation","aria-hidden":"true",children:eB.map((t,e)=>o.jsx("img",{src:t,alt:`Animación ${e+1}`},e))}),Zr={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7}}};Array.from({length:17},(t,e)=>`/animacion/${e+1}.png`);function nB(){const{productsByCategory:t,categories:e,loading:n,error:r}=xL(),{theme:i}=Tm();if(zr.useEffect(()=>{e.length>0&&(console.log("🎯 CATEGORÍAS DISPONIBLES EN INICIO:"),console.log("════════════════════════════════════════════════════════"),console.table(e.map(f=>({"📌 Nombre":f.nombre,"🔗 Ruta":f.ruta,"🆔 ID":f.id,"📦 Productos":(t[f.id]||[]).length}))),console.log("════════════════════════════════════════════════════════"),console.log("💡 COPIA las rutas exactas de arriba para usarlas en getProductsByRoute()"),console.log("════════════════════════════════════════════════════════"))},[e,t]),n)return null;if(r)return o.jsx("div",{className:"bg-gradient-to-br from-indigo-50 via-white to-blue-100 min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center text-red-600",children:[o.jsx("p",{className:"text-lg",children:"Error cargando productos"}),o.jsx("p",{className:"text-sm",children:r})]})});const a=f=>{try{return f?typeof f=="string"?f:typeof f=="object"&&f!==null?f.url||"":String(f||""):""}catch{return""}},c=f=>{var M,O;const g=a((M=f==null?void 0:f.imagenPrincipal)==null?void 0:M[0]);if(g)return g;const y=a(f==null?void 0:f.imagen);if(y)return y;const w=(Array.isArray(f==null?void 0:f.media)?f.media:[]).find(F=>{const H=((F==null?void 0:F.type)||"").toLowerCase();return a(F)&&(!H||H.includes("image")||H==="img"||H==="photo")});if(w)return a(w);const b=(Array.isArray(f==null?void 0:f.galeriaImagenes)?f.galeriaImagenes:[]).find(F=>{const H=((F==null?void 0:F.type)||"").toLowerCase();return a(F)&&(!H||H.includes("image")||H==="img"||H==="photo")});if(b)return a(b);const N=Array.isArray(f==null?void 0:f.imagenes)?f.imagenes:[];if(N.length>0)return a(N[0]);const j=Array.isArray(f==null?void 0:f.variantes)?f.variantes:[];for(const F of j){const H=a((O=F==null?void 0:F.imagenPrincipal)==null?void 0:O[0]);if(H)return H;const K=a(F==null?void 0:F.imagen);if(K)return K;const I=(Array.isArray(F==null?void 0:F.media)?F.media:[]).find(V=>{const U=((V==null?void 0:V.type)||"").toLowerCase();return a(V)&&(!U||U.includes("image")||U==="img"||U==="photo")});if(I)return a(I);const k=(Array.isArray(F==null?void 0:F.galeriaImagenes)?F.galeriaImagenes:[]).find(V=>{const U=((V==null?void 0:V.type)||"").toLowerCase();return a(V)&&(!U||U.includes("image")||U==="img"||U==="photo")});if(k)return a(k)}return""},u=f=>{let g=e.find(w=>((w==null?void 0:w.ruta)||"")===f);if(g)return g;const y=w=>(w||"").toLowerCase().replace(/á/g,"a").replace(/é/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n").replace(/[^a-z0-9]/g,""),x=y(f);return g=e.find(w=>{const S=y(w.nombre),b=y(w.ruta);return S===x||b===x||S.includes(x)||x.includes(S)}),g},h=f=>{const g=u(f);return g?t[g.id]||[]:(console.warn(`❌ Categoría no encontrada para ruta: "${f}"`),console.log("💡 Sugerencia: Verifica las categorías disponibles en la tabla arriba"),[])};return o.jsxs("div",{className:"bg-white dark:bg-black min-h-screen transition-colors duration-300",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsx(oe.div,{className:"block sm:hidden w-full max-w-[95%] mx-auto",style:{marginTop:0,marginBottom:0,padding:"0 0.5rem"},variants:Zr,initial:"hidden",animate:"visible",children:o.jsx(Zz,{})}),o.jsx("div",{className:"hidden sm:block w-full",style:{marginTop:0,marginBottom:0,padding:0},children:o.jsx("video",{src:i==="dark"?"/videos/pcu-intro-negro.mp4":"/videos/pcu-intro-blanco.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-auto object-cover",style:{marginTop:0,marginBottom:0,padding:0,display:"block",verticalAlign:"top"}},i)}),o.jsx(oe.div,{className:"hidden sm:block w-full max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-12",variants:Zr,initial:"hidden",animate:"visible",children:o.jsx("div",{className:"rounded-2xl overflow-hidden shadow-2xl ring-1 ring-indigo-100 dark:ring-gray-900",children:o.jsx(Yz,{})})}),o.jsx("section",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6 gap-0 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-14",children:e.slice(0,4).map((f,g)=>{const x=(t[f.id]||[]).slice(0,4);return o.jsxs(oe.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 group border border-gray-200 dark:border-gray-800",variants:Zr,initial:"hidden",animate:"visible",transition:{delay:.1*g},children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:f.nombre}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:x.map((w,S)=>{const b=c(w)||"/placeholder-product.svg";return o.jsx(St,{to:`/producto/${w.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:b,alt:w.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:N=>{N.target.onerror=null,N.target.src="/placeholder-product.svg"}})})},w.id)})}),o.jsxs(St,{to:`/Productos/${f.ruta}`,className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:["Explora ",f.nombre," →"]})]},f.id)})}),o.jsx(oe.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:Zr,initial:"hidden",animate:"visible",children:o.jsx(St,{to:"/Productos/coleccionables",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:o.jsx("img",{src:"/ads/aficionados.png",alt:"Ver Nuestras colecciones",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),o.jsx("section",{className:"hidden xl:grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-14",children:[{to:"/Productos/retro-consolas",src:"/ads/retro.png",alt:"Retro Consolas"},{to:"/Productos/camaras",src:"/ads/camaras.png",alt:"Cámaras"}].map((f,g)=>o.jsx(oe.div,{className:"overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition h-[220px] sm:h-[300px] md:h-[400px] group",whileHover:{scale:1.01},children:o.jsx(St,{to:f.to,className:"block w-full h-full",children:o.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-cover object-center group-hover:scale-110 transition-transform duration-400"})})},g))}),o.jsx(oe.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:Zr,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Explora nuestras categorías"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:[{to:"/Productos/audifonos",src:"/ads/audifonoscate.png",alt:"Audífonos"},{to:"/Productos/mouses",src:"/ads/mousecate.png",alt:"Mouses"},{to:"/Productos/teclados",src:"/ads/tecladocate.png",alt:"Teclados"},{to:"/Productos/camaras",src:"/ads/camaracate.png",alt:"Cámaras"},{to:"/Productos/discos-duros",src:"/ads/discodurocate.png",alt:"Discos Duros"},{to:"/Productos/controles",src:"/ads/controlcate.png",alt:"Controles"}].map((f,g)=>o.jsx(St,{to:f.to,children:o.jsx("img",{src:f.src,alt:f.alt,className:"rounded-xl hover:scale-110 transition object-cover w-full aspect-[1/1] shadow-sm"})},f.alt))}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(St,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Ver todas las categorías →"})})]})}),o.jsx(oe.div,{className:"hidden xl:block max-w-[1600px] mx-auto px-4 mt-10",variants:Zr,initial:"hidden",animate:"visible",children:o.jsx(St,{to:"/estafetas",className:"block overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl transition",children:o.jsx("img",{src:"/ads/ESTAFETAS.png",alt:"Ver Nuestras Estafetas",className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})})}),o.jsx(oe.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:Zr,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Descubre nuestros productos"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6 gap-4 sm:gap-7",children:Object.values(t).flat().slice(0,6).map(f=>o.jsx(St,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"bg-white dark:bg-black rounded-xl overflow-hidden shadow hover:shadow-md transition border border-gray-200 dark:border-gray-800",children:o.jsx("div",{className:"w-full aspect-[1/1] flex items-center justify-center p-2 overflow-hidden",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})})},f.id))}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(St,{to:"/Productos",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestros productos →"})})]})}),o.jsx(oe.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:Zr,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Hogar Inteligente en Oferta"}),o.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:h("hogar-inteligente").slice(0,10).map(f=>{const g=c(f)||"/placeholder-product.svg";return o.jsx(St,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",children:o.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:o.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(St,{to:"/Productos/hogar-inteligente",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Descubre cómo transformar tu casa en un hogar inteligente →"})})]})}),o.jsx(oe.section,{className:"max-w-[1600px] mx-auto mt-20 px-4",variants:Zr,initial:"hidden",animate:"visible",children:o.jsxs("div",{className:"bg-white dark:bg-black rounded-2xl shadow-lg p-8 transition-colors duration-300 border border-gray-200 dark:border-gray-800",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"Tu Rincón Variado"}),o.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4 scrollbar-hide",children:h("tu-rincon-variado").slice(0,12).map(f=>{const g=c(f)||"/placeholder-product.svg";return o.jsx(St,{to:`/producto/${f.id}`,className:"min-w-[180px] px-2",title:f.nombre,children:o.jsx("div",{className:"w-full h-[180px] bg-white dark:bg-gray-700 rounded-xl overflow-hidden flex items-center justify-center p-2",children:o.jsx("img",{src:g,alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-110 transition-transform duration-300",onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},f.id)})}),o.jsx("div",{className:"text-right mt-6",children:o.jsx(St,{to:"/Productos/tu-rincon-variado",className:"text-indigo-600 dark:text-indigo-400 hover:underline text-base font-medium",children:"Explora nuestro Rincón Variado →"})})]})}),o.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-16",children:[{to:"/Productos/consolas",src:"/ads/nintendoswtitchads.png",alt:"Consolas"},{to:"/Productos/controles",src:"/ads/controlads.png",alt:"Controles"}].map((f,g)=>o.jsx(oe.div,{className:"overflow-hidden rounded-2xl shadow-lg hover:shadow-2xl transition aspect-[16/9]",whileHover:{scale:1.01},children:o.jsx(St,{to:f.to,className:"block w-full h-full",children:o.jsx("img",{src:f.src,alt:f.alt,className:"w-full h-full object-contain object-center hover:scale-105 transition-transform duration-400 bg-black"})})},f.alt))}),o.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-16",children:[o.jsxs(oe.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:Zr,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cámaras de Vigilancia"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("camaras").slice(0,4).map(f=>o.jsx(St,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(St,{to:"/Productos/camaras",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Cámaras de Vigilancia →"})]}),o.jsxs(oe.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:Zr,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Discos Duros"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("discos-duros").slice(0,4).map(f=>o.jsx(St,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(St,{to:"/Productos/discos-duros",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Discos Duros →"})]}),o.jsxs(oe.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:Zr,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Memorias USB"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("memorias-usb").slice(0,4).map(f=>o.jsx(St,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(St,{to:"/Productos/memorias-usb",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Memorias USB →"})]}),o.jsxs(oe.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[380px] sm:h-[440px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-800",variants:Zr,initial:"hidden",animate:"visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cables"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:h("cables").slice(0,4).map(f=>o.jsx(St,{to:`/producto/${f.id}`,children:o.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",children:o.jsx("img",{src:c(f)||"/placeholder-product.svg",alt:f.nombre||"Cable",className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",onError:g=>{g.target.onerror=null,g.target.src="/placeholder-product.svg"}})})},f.id))}),o.jsx(St,{to:"/Productos/cables",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Cables →"})]})]}),o.jsx("div",{className:"max-w-[1600px] mx-auto mt-20 px-4",children:o.jsx(tB,{})}),o.jsxs(oe.section,{className:"max-w-4xl mx-auto px-6 py-20 text-center mt-10",variants:Zr,initial:"hidden",animate:"visible",children:[o.jsxs("h2",{className:"text-3xl sm:text-4xl font-extrabold mb-6 text-gray-800 dark:text-gray-100",children:["¿Tienes dudas?"," ",o.jsx("span",{className:"text-indigo-700",children:"Contáctanos ahora"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-10 max-w-xl mx-auto",children:"Nuestro equipo está listo para ayudarte por WhatsApp, teléfono o correo. Atención rápida y profesional."}),o.jsxs("div",{className:"bg-white dark:bg-black shadow-2xl rounded-2xl p-10 max-w-3xl mx-auto flex flex-col gap-6 border border-indigo-100 dark:border-gray-800 transition-colors duration-300",children:[o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(ih,{className:"text-indigo-700"}),o.jsx("span",{children:"Av. Estrella Sadhalá, Santiago, República Dominicana"})]}),o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(Op,{className:"text-indigo-700"}),o.jsx("span",{children:"+1 (849)-635-7000 (Tienda)"})]}),o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(Op,{className:"text-indigo-700"}),o.jsx("span",{children:"+1 (809)-582-1212 (Internet)"})]}),o.jsxs("p",{className:"flex items-center justify-center text-gray-700 dark:text-gray-300 gap-3",children:[o.jsx(T1,{className:"text-indigo-700"}),o.jsx("span",{children:"playcenter121@gmail.com"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center mt-4",children:[o.jsxs("a",{href:"https://wa.me/18496357000?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20página.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-700 text-white rounded-lg shadow-md hover:bg-indigo-800 transition w-full sm:w-auto",children:[o.jsx(Mp,{className:"text-xl"}),"WhatsApp Tienda"]}),o.jsxs("a",{href:"https://wa.me/18095821212?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20página.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-700 text-white rounded-lg shadow-md hover:bg-gray-800 transition w-full sm:w-auto",children:[o.jsx(Mp,{className:"text-xl"}),"WhatsApp Internet"]})]})]})]})]})}async function rB(t){const e="https://api.cloudinary.com/v1_1/dprojkgqf/image/upload",n=new FormData;n.append("file",t),n.append("upload_preset","perfil_usuarios"),n.append("folder","muestras/comercio electrónico"),console.log("Archivo que se va a subir:",t),console.log("Preset usado:","perfil_usuarios"),console.log("Carpeta folder usada:","muestras/comercio electrónico");const r=await fetch(e,{method:"POST",body:n});if(!r.ok){const a=await r.text();throw console.error("Error Cloudinary:",a),new Error("❌ Error al subir la imagen a Cloudinary")}const i=await r.json();return console.log("Respuesta de Cloudinary:",i),i.secure_url}const ey={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, República Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"},iB=(t="")=>String(t||"").trim()?String(t).trim().charAt(0).toUpperCase():"?",sB=(t="")=>{let e=0;for(let a=0;a<t.length;a++)e=t.charCodeAt(a)+((e<<5)-e),e=e&e;const n=e>>0&255,r=e>>8&255,i=e>>16&255;return`#${[n,r,i].map(a=>a.toString(16).padStart(2,"0")).join("")}`},aB=(t="",e=512)=>{const n=iB(t),r=sB(t||n),i=`<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${e}' viewBox='0 0 ${e} ${e}'>
    <rect width='100%' height='100%' fill='${r}' rx='${Math.floor(e*.12)}' />
    <text x='50%' y='50%' dy='.04em' font-family='Inter, system-ui, Arial' font-size='${Math.floor(e*.42)}' fill='#fff' text-anchor='middle' alignment-baseline='middle'>${n}</text>
  </svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(i)}`},oB={hidden:{opacity:0,y:10},enter:{opacity:1,y:0,transition:{duration:.36,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:-8,transition:{duration:.25}}},dd={hidden:{opacity:0,y:8},show:{opacity:1,y:0,transition:{duration:.26}}};function lB({historial:t}){var g,y;const[e,n]=T.useState(null),[r,i]=T.useState("all"),a=!1;if(!(t!=null&&t.length))return o.jsxs(oe.div,{variants:dd,className:"empty-state-beautiful",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("div",{className:"empty-illustration",children:o.jsx(oe.div,{className:"empty-box",animate:{y:[0,-10,0],rotateY:[0,5,0,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},"aria-hidden":!0,children:o.jsx(Package,{size:56})})}),o.jsx(oe.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"¡Tu historial está esperando!"}),o.jsx(oe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Cuando realices tu primera compra, aparecerá aquí."}),o.jsx(oe.div,{className:"empty-cta",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7},children:o.jsx("button",{className:"btn-beautiful-primary",children:"Explorar productos"})})]});const c=x=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(x||0),u=x=>{if(!x)return"—";let w;return x!=null&&x.seconds?w=new Date(x.seconds*1e3):w=new Date(x),isNaN(w)?"—":w.toLocaleString("es-DO",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},h=x=>{switch(x){case"completado":return{color:"status-completed",Icon:CheckCircle,text:"Completado",gradient:"linear-gradient(135deg, #10b981, #059669)"};case"cancelado":return{color:"status-cancelled",Icon:XCircle,text:"Cancelado",gradient:"linear-gradient(135deg, #ef4444, #dc2626)"};case"pendiente":default:return{color:"status-pending",Icon:Hourglass,text:"Pendiente",gradient:"linear-gradient(135deg, #f59e0b, #d97706)"}}},f=t.filter(x=>r==="all"?!0:x.estado===r);return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
        .history-compact { --fs-1:.95rem; --fs-2:.9rem; --fs-3:.85rem; --pad-1:.55rem; --pad-2:.8rem; --radius:12px; }
        .history-compact .order-card-beautiful { padding: var(--pad-2); border-radius: var(--radius); }
        .history-compact .order-number-beautiful { font-size: var(--fs-1); }
        .history-compact .order-date-beautiful { font-size: var(--fs-3); opacity:.8; }
        .history-compact .status-badge-beautiful { padding:.35rem .55rem; border-radius:999px; font-size: var(--fs-3); }
        .history-compact .order-total-beautiful { font-size: var(--fs-1); }
        .history-compact .products-grid { gap:.5rem; }
        .history-compact .product-preview-beautiful { padding: var(--pad-1); border-radius:10px; }
        .history-compact .product-name-beautiful { font-size: var(--fs-2); }
        .history-compact .product-details-beautiful { font-size: var(--fs-3); opacity:.85; }
      `}),a,o.jsx(oe.div,{variants:dd,className:"orders-container-beautiful history-compact",layout:!0,children:o.jsx(dn,{children:f.map((x,w)=>{var N,j;const S=h(x.estado),b=S.Icon;return o.jsxs(oe.div,{className:"order-card-beautiful",onClick:()=>n(x),initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,delay:w*.05,type:"spring",stiffness:120},whileHover:{scale:1.01,y:-3,boxShadow:"0 16px 32px rgba(0,0,0,0.08)"},whileTap:{scale:.99},layout:!0,children:[o.jsx("div",{className:"order-card-glow",style:{background:S.gradient}}),o.jsxs("div",{className:"order-header-beautiful",style:{display:"flex",justifyContent:"space-between",gap:"0.6rem"},children:[o.jsxs("div",{className:"order-info-beautiful",children:[o.jsx(oe.h4,{className:"order-number-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:x.numeroOrden||`Orden #${x.id.slice(-8)}`}),o.jsx(oe.p,{className:"order-date-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:o.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[o.jsx(Calendar,{size:14})," ",u(x.fecha)]})})]}),o.jsxs("div",{className:"order-status-beautiful",style:{display:"flex",alignItems:"center",gap:".5rem"},children:[o.jsxs(oe.div,{className:`status-badge-beautiful ${S.color}`,style:{background:S.gradient,display:"inline-flex",alignItems:"center",gap:6},whileHover:{scale:1.05},initial:{scale:0},animate:{scale:1},transition:{delay:.35,type:"spring"},children:[o.jsx(b,{size:14}),o.jsx("span",{className:"status-text",children:S.text})]}),o.jsx(oe.div,{className:"order-total-beautiful",initial:{opacity:0,x:12},animate:{opacity:1,x:0},transition:{delay:.4},children:c(x.total)})]})]}),o.jsxs(oe.div,{className:"order-products-preview-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.45},children:[o.jsx("div",{className:"products-grid",children:(N=x.productos)==null?void 0:N.slice(0,3).map((M,O)=>o.jsxs(oe.div,{className:"product-preview-beautiful",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5+O*.08},whileHover:{scale:1.03},children:[o.jsx("div",{className:"product-image-placeholder","aria-hidden":!0,style:{display:"flex",alignItems:"center"},children:o.jsx(Package,{size:18})}),o.jsxs("div",{className:"product-preview-info-beautiful",children:[o.jsx("span",{className:"product-name-beautiful",children:M.nombre}),o.jsxs("span",{className:"product-details-beautiful",children:[M.cantidad,"x •"," ",c(M.precio)]}),(M==null?void 0:M.id)&&o.jsxs("button",{className:"product-view-link",onClick:F=>{F.stopPropagation(),window.location.href=`/producto/${M.id}`},title:"Ver producto","aria-label":`Ver producto ${M.nombre}`,children:[o.jsx(Eye,{size:14}),"Ver producto",o.jsx(oe.span,{className:"pv-arrow",animate:{x:[0,4,0]},transition:{duration:1.6,repeat:1/0},children:o.jsx(ArrowRight,{size:14})})]})]})]},O))}),((j=x.productos)==null?void 0:j.length)>3&&o.jsxs(oe.div,{className:"more-products-beautiful",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},whileHover:{scale:1.06},children:[o.jsxs("span",{className:"more-count",children:["+",x.productos.length-3]}),o.jsx("span",{className:"more-text",children:"más productos"})]})]}),o.jsx(oe.div,{className:"order-card-footer",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:o.jsxs("div",{className:"view-details-hint",children:[o.jsx("span",{children:"Toque para ver detalles"}),o.jsx(oe.span,{className:"arrow-icon",animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},"aria-hidden":!0,children:o.jsx(ArrowRight,{size:16})})]})})]},x.id)})})}),o.jsx(dn,{children:e&&o.jsx(oe.div,{className:"order-modal-overlay-beautiful",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(null),children:o.jsxs(oe.div,{className:"order-modal-beautiful",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{className:"modal-header-beautiful",children:[o.jsxs("div",{className:"modal-title-section",children:[o.jsx("h3",{className:"modal-title",children:e.numeroOrden||`Orden #${e.id.slice(-8)}`}),o.jsx("div",{className:"modal-subtitle",children:"Detalles de tu compra"})]}),o.jsx("button",{className:"close-modal-beautiful",onClick:()=>n(null),children:"×"})]}),o.jsxs("div",{className:"modal-content-beautiful",children:[o.jsx("div",{className:"order-summary-beautiful",children:o.jsxs("div",{className:"summary-card",children:[o.jsxs("div",{className:"summary-item",children:[o.jsxs("span",{className:"summary-label",children:[o.jsx(Calendar,{size:14})," Fecha"]}),o.jsx("span",{className:"summary-value",children:new Date((g=e.fecha)!=null&&g.seconds?e.fecha.seconds*1e3:e.fecha).toLocaleString("es-DO")})]}),o.jsxs("div",{className:"summary-item",children:[o.jsxs("span",{className:"summary-label",children:[o.jsx(ShoppingBag,{size:14})," Estado"]}),o.jsx("span",{className:"summary-status",children:e.estado})]}),o.jsxs("div",{className:"summary-item",children:[o.jsxs("span",{className:"summary-label",children:[o.jsx(CircleDollarSign,{size:14})," Total"]}),o.jsxs("span",{className:"summary-total",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(e.total)]})]})]})}),o.jsx("div",{className:"products-grid-modal",children:(y=e.productos)==null?void 0:y.map((x,w)=>o.jsxs("div",{className:"product-item-beautiful",children:[o.jsxs("div",{className:"product-info-modal",children:[o.jsx("span",{className:"product-name-modal",children:x.nombre}),o.jsxs("span",{className:"product-details-modal",children:[x.cantidad," × DOP"," ",new Intl.NumberFormat("es-DO").format(x.precio)]})]}),o.jsxs("div",{className:"product-subtotal-beautiful",children:["DOP"," ",new Intl.NumberFormat("es-DO").format(x.cantidad*x.precio)]}),o.jsxs("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${x.id}`,children:[o.jsx(Eye,{size:16})," Ver producto"]})]},w))})]})]})})})]})}function Af({name:t}){const e={perfil:o.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),historial:o.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[o.jsx("path",{d:"M21 12a9 9 0 1 1-3-6.7L21 7"}),o.jsx("path",{d:"M12 7v6l4 2"})]}),direcciones:o.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[o.jsx("path",{d:"M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"}),o.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),logout:o.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[o.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),o.jsx("path",{d:"M16 17l5-5-5-5"}),o.jsx("path",{d:"M21 12H9"})]})};return o.jsx("span",{className:"icon",children:e[t]})}function cB({visible:t,text:e="Cargando..."}){return t?o.jsx("div",{className:"loaderOverlay",role:"status","aria-live":"polite",children:o.jsxs("div",{className:"loaderInner",children:[o.jsx("div",{className:"loader",children:o.jsxs("div",{className:"spinner",children:[o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{})]})}),o.jsx("p",{className:"loaderText",children:e})]})}):null}function $k({abierto:t,titulo:e,descripcion:n,onCancel:r,onConfirm:i,dangerText:a="Confirmar"}){return t?o.jsx("div",{className:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:o.jsxs(oe.div,{className:"modal-card card",initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},children:[o.jsx("h3",{id:"modal-title",className:"modal-title",children:e}),o.jsx("p",{className:"modal-desc",children:n}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"btn btn-ghost",onClick:r,children:"Cancelar"}),o.jsx("button",{className:"btn btn-danger",onClick:i,children:a})]})]})}):null}function uB(){const{usuario:t,usuarioInfo:e,actualizarUsuarioInfo:n,logout:r}=Br(),i=ai(),[a,c]=T.useState("perfil"),[u,h]=T.useState(!1),[f,g]=T.useState(!1),[y,x]=T.useState({text:"",tipo:""}),[w,S]=T.useState({nombre:(t==null?void 0:t.displayName)||"",email:(t==null?void 0:t.email)||"",telefono:"",direccion:"",fotoURL:(t==null?void 0:t.photoURL)||""}),[b,N]=T.useState(null),[j,M]=T.useState(null),[O,F]=T.useState([]),[H,K]=T.useState([]),[R,I]=T.useState(!1),[A,k]=T.useState(null),[V,U]=T.useState(!1),[D,xe]=T.useState(!1),[Ke,st]=T.useState(!1),[qe,ce]=T.useState(!1),[ue,de]=T.useState(null);T.useEffect(()=>{S(e?fe=>({...fe,telefono:e.telefono||"",direccion:e.direccion||"",fotoURL:e.fotoURL||(t==null?void 0:t.photoURL)||""}):fe=>({...fe,fotoURL:(t==null?void 0:t.photoURL)||""}))},[e,t==null?void 0:t.photoURL]),T.useEffect(()=>{t&&(z(),Y())},[t]);const z=async()=>{try{const fe=an(Ft(Pe,"orders"),xr("userId","==",t.uid)),Ze=await Ir(fe);F(Ze.docs.map(Xe=>({id:Xe.id,...Xe.data()})))}catch(fe){console.error("fetchHistorial:",fe)}},Y=async()=>{try{const fe=an(Ft(Pe,"direcciones"),xr("usuarioId","==",t.uid)),Ze=await Ir(fe);K(Ze.docs.map(Xe=>({id:Xe.id,...Xe.data()})))}catch(fe){console.error("fetchDirecciones:",fe)}},be=T.useMemo(()=>{if(j)return j;if(w.fotoURL)return w.fotoURL;const fe=w.nombre||w.email||(t==null?void 0:t.email)||"U";return aB(fe,512)},[j,w.fotoURL,w.nombre,w.email,t==null?void 0:t.email]),Me=T.useMemo(()=>{if(w.nombre&&w.nombre.trim())return w.nombre;const Ze=(w.email||(t==null?void 0:t.email)||"").split("@")[0]||"Usuario";return Ze.charAt(0).toUpperCase()+Ze.slice(1)},[w.nombre,w.email,t==null?void 0:t.email]),Ve=(fe,Ze="info",Xe=3500)=>{x({text:fe,tipo:Ze}),Xe&&setTimeout(()=>x({text:"",tipo:""}),Xe)},it=async()=>{try{xe(!1),await r(),i("/")}catch(fe){console.error("logout:",fe),Ve("Error cerrando sesión.","error",5e3)}},ct=fe=>S(Ze=>({...Ze,[fe.target.name]:fe.target.value})),Be=fe=>{var jt;const Ze=(jt=fe.target.files)==null?void 0:jt[0];if(!Ze)return;N(Ze);const Xe=URL.createObjectURL(Ze);M(Xe)},et=()=>{j&&URL.revokeObjectURL(j),N(null),M(null)},ut=async()=>{if(!b)return Ve("Selecciona una imagen primero.","error");g(!0);try{const fe=await rB(b);await n({fotoURL:fe}),await Ic(t,{photoURL:fe}),S(Ze=>({...Ze,fotoURL:fe})),et(),Ve("Foto actualizada.","success")}catch(fe){console.error("uploadLocalImage:",fe),Ve("Error subiendo imagen.","error",5e3)}finally{g(!1)}},_t=async()=>{g(!0);try{await n({telefono:w.telefono,direccion:w.direccion,displayName:w.nombre});const fe={telefono:w.telefono,direccion:w.direccion,displayName:w.nombre,updatedAt:new Date};try{await Jn(ot(Pe,"users",t.uid),fe,{merge:!0})}catch(Xe){console.warn("No se pudo escribir users/{uid}:",Xe)}try{await Jn(ot(Pe,"usuarios",t.uid),fe,{merge:!0})}catch(Xe){console.warn("No se pudo escribir usuarios/{uid}:",Xe)}const Ze={};t.displayName!==w.nombre&&(Ze.displayName=w.nombre),Object.keys(Ze).length&&await Ic(t,Ze),h(!1),Ve("Perfil guardado.","success")}catch(fe){console.error("Error guardando perfil:",fe),Ve("Error guardando perfil.","error")}finally{g(!1)}},mt=async()=>{g(!0);try{await Ic(t,{photoURL:""}),await n({fotoURL:""}),S(fe=>({...fe,fotoURL:""})),et(),Ve("Imagen de perfil removida.","success")}catch(fe){console.error("confirmRemoveImage:",fe),Ve("Error removiendo imagen.","error")}finally{g(!1),U(!1)}},kt=async fe=>{try{const Ze=typeof fe=="string"?fe:(fe==null?void 0:fe.direccionCompleta)||"",Xe=fe&&fe.metodoEntrega?fe.metodoEntrega:"domicilio";st(!0),await n({direccion:Ze,metodoEntrega:Xe});const jt={direccion:Ze,metodoEntrega:Xe,updatedAt:new Date};try{await Jn(ot(Pe,"users",t.uid),jt,{merge:!0})}catch(Nt){console.warn("No se pudo escribir users/{uid}:",Nt)}try{await Jn(ot(Pe,"usuarios",t.uid),jt,{merge:!0})}catch(Nt){console.warn("No se pudo escribir usuarios/{uid}:",Nt)}try{let Nt=await rs(ot(Pe,"users",t.uid));if(Nt.exists()||(Nt=await rs(ot(Pe,"usuarios",t.uid))),Nt&&Nt.exists()){const At=Nt.data()||{};await n({direccion:At.direccion||Ze,metodoEntrega:At.metodoEntrega||Xe})}}catch(Nt){console.warn("No se pudo releer documento de usuario:",Nt)}R&&I(!1),await Y(),S(Nt=>({...Nt,direccion:Ze})),Ve("Dirección seleccionada y guardada.","success"),window.location.reload()}catch(Ze){console.error("handleSeleccionarDireccion error:",Ze),st(!1),Ve("Error seleccionando dirección.","error",5e3)}},Ot=async fe=>{try{if(await _m(ot(Pe,"direcciones",fe)),t!=null&&t.direccion){const Ze=H.find(Xe=>Xe.id===fe);Ze&&t.direccion===Ze.direccionCompleta&&(await n({direccion:"",metodoEntrega:"",selectedDeliveryMethod:""}),setTimeout(()=>{window.location.reload()},1e3))}await Y(),Ve("Dirección eliminada correctamente.","success")}catch(Ze){console.error("eliminarDireccion:",Ze),Ve("Error eliminando dirección.","error")}},ie=fe=>{de(fe),ce(!0)},Fe=()=>{ce(!1),de(null)},je=()=>{ue&&(Ot(ue),ce(!1),de(null))};return!t||!e?o.jsx("main",{className:"min-h-screen flex items-start justify-center bg-slate-50",style:{paddingTop:"var(--content-offset, 100px)"},children:o.jsx("p",{className:"text-lg animate-pulse",children:"Cargando perfil..."})}):o.jsxs(oe.main,{className:"profile-page",variants:oB,initial:"hidden",animate:"enter",exit:"exit",children:[o.jsx("div",{className:"navigation-container",children:o.jsxs("nav",{className:"profile-dock","aria-label":"Navegación de perfil",children:[o.jsxs("button",{className:`dock-btn ${a==="perfil"?"active":""}`,onClick:()=>c("perfil"),"aria-label":"Perfil",children:[o.jsx(Af,{name:"perfil"}),o.jsx("span",{children:"Perfil"})]}),o.jsxs("button",{className:`dock-btn ${a==="historial"?"active":""}`,onClick:()=>c("historial"),"aria-label":"Historial",children:[o.jsx(Af,{name:"historial"}),o.jsx("span",{children:"Historial"})]}),o.jsxs("button",{className:`dock-btn ${a==="direcciones"?"active":""}`,onClick:()=>c("direcciones"),"aria-label":"Direcciones",children:[o.jsx(Af,{name:"direcciones"}),o.jsx("span",{children:"Direcciones"})]}),o.jsxs("button",{className:"dock-btn danger",onClick:()=>xe(!0),"aria-label":"Cerrar sesión",children:[o.jsx(Af,{name:"logout"}),o.jsx("span",{children:"Salir"})]})]})}),o.jsx("main",{className:"main-content",children:o.jsx("div",{className:"main-card",children:o.jsxs(dn,{mode:"wait",children:[a==="perfil"&&o.jsxs(oe.section,{variants:dd,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsxs("div",{className:"profile-header big",children:[o.jsx("div",{className:"avatar-block large",children:o.jsx("img",{src:be,alt:"Avatar",className:"avatar-img"})}),o.jsxs("div",{className:"profile-meta big",children:[o.jsx("h1",{className:"profile-name",children:Me}),o.jsx("p",{className:"profile-email",children:w.email}),o.jsxs("p",{className:"muted small",children:["UID: ",o.jsx("span",{className:"mono",children:t.uid})]}),o.jsxs("div",{className:"profile-actions",children:[o.jsxs("label",{className:"btn btn-primary upload-btn",children:["Subir foto",o.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:Be,className:"hidden","aria-label":"Subir foto"})]}),o.jsx("button",{className:"btn btn-ghost",onClick:()=>U(!0),children:"Quitar"}),j&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn btn-success",onClick:ut,disabled:f,children:"Guardar foto"}),o.jsx("button",{className:"btn btn-outline",onClick:et,children:"Cancelar"})]})]})]})]}),o.jsxs("div",{className:"form-grid big",children:[o.jsxs("div",{className:"form-row",children:[o.jsx("label",{children:"Nombre"}),o.jsx("input",{name:"nombre",value:w.nombre,onChange:ct,disabled:!u})]}),o.jsxs("div",{className:"form-row",children:[o.jsx("label",{children:"Email"}),o.jsx("input",{name:"email",value:w.email,disabled:!0})]}),o.jsxs("div",{className:"form-row",children:[o.jsx("label",{children:"Teléfono"}),o.jsx("input",{name:"telefono",value:w.telefono,onChange:ct,disabled:!u})]}),o.jsxs("div",{className:"form-row full",children:[o.jsx("label",{children:"Dirección completa"}),o.jsx("textarea",{name:"direccion",value:w.direccion,onChange:ct,disabled:!u,rows:4}),o.jsx("p",{className:"muted hint",children:'Pulsa "Editar" para modificar.'})]}),o.jsx("div",{className:"form-actions",children:u?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:_t,className:"btn btn-success",disabled:f,children:"Guardar"}),o.jsx("button",{onClick:()=>{h(!1),et()},className:"btn btn-ghost",children:"Cancelar"})]}):o.jsx("button",{onClick:()=>h(!0),className:"btn btn-primary",children:"Editar perfil"})})]})]},"perfil"),a==="historial"&&o.jsxs(oe.section,{variants:dd,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsx("h2",{className:"section-title large",children:"Historial de compras"}),o.jsx(lB,{historial:O})]},"historial"),a==="direcciones"&&o.jsxs(oe.section,{variants:dd,initial:"hidden",animate:"show",exit:"hidden",children:[o.jsxs("div",{className:"direcciones-head",children:[o.jsx("h2",{className:"section-title large",children:"Direcciones"}),o.jsx("div",{children:o.jsx("button",{className:"btn btn-primary",onClick:()=>{k(null),I(!0)},children:"Añadir dirección"})})]}),o.jsxs("div",{className:"cards-list",children:[o.jsxs("div",{className:"address-card large",children:[o.jsxs("div",{className:"address-content",children:[o.jsx("div",{className:"address-title",children:"Recoger en: Playcenter Universal Santiago"}),o.jsx("div",{className:"muted break-words",children:ey.direccionCompleta}),o.jsx("a",{href:ey.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),o.jsx("div",{className:"address-actions",children:o.jsx("button",{onClick:()=>kt(ey),className:"btn btn-success",children:"Seleccionar"})})]}),H.length===0?o.jsx("div",{className:"empty",children:"No tienes direcciones guardadas."}):H.map(fe=>o.jsxs("div",{className:"address-card large",children:[o.jsxs("div",{className:"address-content",children:[o.jsx("div",{className:"address-title break-words",children:fe.direccionCompleta||`${fe.numeroCalle||""} ${fe.numeroCasa?"Casa "+fe.numeroCasa:""}, ${fe.ciudad||""}, ${fe.provincia||""}`}),o.jsxs("div",{className:"muted",children:["Método: ",fe.metodoEntrega||"domicilio"]}),fe.referencia&&o.jsxs("div",{className:"muted",children:["Ref: ",fe.referencia]}),fe.ubicacion&&o.jsx("a",{href:fe.ubicacion,target:"_blank",rel:"noreferrer",className:"link",children:"Ver en Maps"})]}),o.jsxs("div",{className:"address-actions",children:[o.jsx("button",{onClick:()=>{k(fe),I(!0)},className:"address-action-btn edit-btn","aria-label":"Editar dirección",children:o.jsx(Pencil,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>kt(fe),className:"address-action-btn select-btn","aria-label":"Seleccionar dirección",children:o.jsx(Check,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>ie(fe.id),className:"address-action-btn delete-btn","aria-label":"Eliminar dirección",children:o.jsx(Trash2,{className:"w-4 h-4"})})]})]},fe.id))]}),R&&o.jsx(g4,{abierto:R,onClose:async()=>{I(!1),k(null),await Y()},usuarioId:t.uid,direccionEditar:A,actualizarLista:Y})]},"direcciones")]})})}),o.jsx($k,{abierto:V,titulo:"Quitar imagen de perfil",descripcion:"Se quitará la URL de tu perfil (no borra el archivo en Cloudinary).",onCancel:()=>U(!1),onConfirm:mt,dangerText:"Quitar imagen"}),o.jsx($k,{abierto:D,titulo:"Cerrar sesión",descripcion:"¿Estás seguro que quieres cerrar sesión?",onCancel:()=>xe(!1),onConfirm:it,dangerText:"Cerrar sesión"}),o.jsx(cB,{visible:Ke,text:"Guardando..."}),o.jsx(dn,{children:qe&&o.jsx(oe.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:o.jsxs(oe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[o.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"¿Eliminar dirección?"}),o.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"¿Estás seguro que quieres eliminar esta dirección? Esta acción no se puede deshacer."}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[o.jsx("button",{onClick:Fe,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:fe=>fe.target.style.backgroundColor="#f9fafb",onMouseOut:fe=>fe.target.style.backgroundColor="white",children:"Cancelar"}),o.jsx("button",{onClick:je,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:fe=>fe.target.style.backgroundColor="#dc2626",onMouseOut:fe=>fe.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),y.text&&o.jsx(oe.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`toast ${y.tipo==="success"?"toast-success":y.tipo==="error"?"toast-error":"toast-info"}`,children:y.text})]})}const M4="https://playcenter-universal.onrender.com",dB="https://ecommerce.cardnet.com.do/authorize",hB=async()=>{try{await fetch(`${M4}/cardnet/health`,{method:"GET",signal:AbortSignal.timeout(5e3)})}catch{console.log("Wake-up call al servidor")}},fB=async(t,e,n=2)=>{for(let r=0;r<=n;r++)try{const i=new AbortController,a=setTimeout(()=>i.abort(),3e4),c=await fetch(t,{...e,signal:i.signal});if(clearTimeout(a),!c.ok)throw new Error(`HTTP ${c.status}`);return c}catch(i){if(r===n)throw i;await new Promise(a=>setTimeout(a,1e3*Math.pow(2,r)))}};function vx({className:t,total:e,label:n}){const[r,i]=T.useState(null),[a,c]=T.useState(!1),u=typeof e=="number"?e/100:null,h=Number.isFinite(u)?new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(u):null,f=n||(h?`Comprar ahora • ${h}`:"Comprar ahora");T.useEffect(()=>{hB()},[]);const g=async()=>{if(a)return;c(!0);const y=document.querySelector(".pay-btn");try{y&&(y.disabled=!0,y.classList.add("loading")),console.log("🚀 Iniciando pago con Cardnet...");const w=await(await fB(`${M4}/cardnet/create-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({total:e})})).json();if(console.log("✅ Sesión creada:",w.SESSION),!w.SESSION)throw new Error("No se recibió SESSION del servidor");i(w.SESSION),setTimeout(()=>{const S=document.getElementById("cardnetForm");S&&(console.log("📤 Redirigiendo a Cardnet..."),S.submit())},100)}catch(x){console.error("❌ Error en pago:",x);let w="No se pudo procesar el pago";x.name==="AbortError"?w="La conexión está tardando demasiado. Por favor, intenta de nuevo.":x.message.includes("HTTP")?w="Error del servidor. Por favor, intenta de nuevo.":x.message.includes("Failed to fetch")&&(w="Error de conexión. Verifica tu internet e intenta de nuevo."),alert(`❌ ${w}`),y&&(y.disabled=!1,y.classList.remove("loading")),c(!1)}};return o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:g,className:`pay-btn ${t||""}`,disabled:a,children:[o.jsx("span",{className:"btn-text",children:f}),o.jsxs("div",{className:"icon-container",children:[o.jsx("svg",{viewBox:"0 0 24 24",className:"icon card-icon",children:o.jsx("path",{d:"M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18C2,19.11 2.89,20 4,20H20C21.11,20 22,19.11 22,18V6C22,4.89 21.11,4 20,4Z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon payment-icon",children:o.jsx("path",{d:"M2,17H22V21H2V17M6.25,7H9V6H6V3H18V6H15V7H17.75L19,17H5L6.25,7M9,10H15V8H9V10M9,13H15V11H9V13Z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon dollar-icon",children:o.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon wallet-icon default-icon",children:o.jsx("path",{d:"M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.9 10,8V16A2,2 0 0,0 12,18M12,16H22V8H12M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z",fill:"currentColor"})}),o.jsx("svg",{viewBox:"0 0 24 24",className:"icon check-icon",children:o.jsx("path",{d:"M9,16.17L4.83,12L3.41,13.41L9,19L21,7L19.59,5.59L9,16.17Z",fill:"currentColor"})})]})]}),r&&o.jsx("form",{id:"cardnetForm",action:dB,method:"post",children:o.jsx("input",{type:"hidden",name:"SESSION",value:r})})]})}function pB({productoActual:t,onProductoClick:e}){const{products:n,loading:r}=RC(t==null?void 0:t.categoria),i=T.useRef(null),[a,c]=T.useState(!1),[u,h]=T.useState(!1),f=T.useMemo(()=>!t||!n?[]:n.filter(b=>(b==null?void 0:b.id)!==(t==null?void 0:t.id)).slice(0,20),[n,t==null?void 0:t.id]),g=T.useCallback(()=>{const b=i.current;if(!b)return 1;const N=b.offsetWidth,j=b.querySelector(".prl-card");if(!j)return 1;const F=j.offsetWidth+20;return Math.floor(N/F)},[]),y=T.useCallback(()=>{const b=i.current;if(!b)return;const{scrollLeft:N,scrollWidth:j,clientWidth:M}=b;c(N>10),h(N<j-M-10)},[]),x=T.useCallback(b=>{const N=i.current;if(!N)return;const j=N.querySelector(".prl-card");if(!j)return;const F=j.offsetWidth+20,H=g(),K=b*H*F;N.scrollBy({left:K,behavior:"smooth"})},[g]);T.useEffect(()=>{const b=i.current;if(!b)return;y();const N=()=>{const j=b.parentElement;j&&b.scrollLeft>10&&j.classList.add("scrolled")};return b.addEventListener("scroll",y),b.addEventListener("scroll",N),window.addEventListener("resize",y),()=>{b.removeEventListener("scroll",y),b.removeEventListener("scroll",N),window.removeEventListener("resize",y)}},[y,f]);const w=b=>{b&&(e?e(b):window.location.href=`/producto/${b}`)},S=b=>{const N=Math.round(Number(b)||0);try{return new Intl.NumberFormat("es-DO").format(N)}catch{return String(N)}};return r?o.jsxs("div",{className:"productos-relacionados-container",children:[o.jsx("h3",{className:"prl-title",children:"Productos Relacionados"}),o.jsx("div",{className:"flex justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})]}):o.jsx("section",{className:"prl-section","aria-label":"Productos relacionados",children:o.jsxs("div",{className:"prl-container",children:[o.jsx("h2",{className:"prl-title",children:"Productos relacionados"}),o.jsxs("div",{className:"prl-wrapper","aria-roledescription":"carrusel",children:[a&&o.jsx("button",{className:"prl-arrow left",onClick:()=>x(-1),"aria-label":"Anterior",type:"button",children:o.jsx(uU,{size:18})}),o.jsx("div",{ref:i,className:"prl-rail",children:f.length>0?f.map(b=>{var O;const N=(b==null?void 0:b.imagen)||((O=b==null?void 0:b.imagenes)==null?void 0:O[0])||"",j=(b==null?void 0:b.nombre)||"Producto",M=Number(b==null?void 0:b.precio)||0;return o.jsxs("article",{className:"prl-card",role:"group","aria-label":j,onClick:()=>w(b.slug||b.id),children:[o.jsx("div",{className:"prl-imgbox",children:N?o.jsx("img",{src:N,alt:j,className:"prl-img",loading:"lazy",draggable:"false",decoding:"async"}):o.jsx("div",{className:"prl-img-fallback","aria-hidden":!0})}),o.jsxs("div",{className:"prl-meta",children:[o.jsx("h3",{className:"prl-name",title:j,children:j}),o.jsx("div",{className:"prl-price",children:M>0?o.jsxs("span",{children:["DOP ",o.jsx("strong",{children:S(M)})]}):o.jsx("span",{className:"prl-price-muted",children:"Sin precio"})})]})]},b==null?void 0:b.id)}):o.jsx("div",{className:"prl-empty",children:"No hay productos relacionados."})}),u&&o.jsx("button",{className:"prl-arrow right",onClick:()=>x(1),"aria-label":"Siguiente",type:"button",children:o.jsx(dU,{size:18})})]})]})})}function zk(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function mB(t){try{let e=String(t);return e=e.replace(/<\/(?:script|style)>/gi,"").replace(/<(?:script|style)[^>]*>[\s\S]*?<\/(?:script|style)>/gi,""),e=e.replace(/ on[a-z]+\s*=\s*"[^"]*"/gi,""),e=e.replace(/ on[a-z]+\s*=\s*'[^']*'/gi,""),e=e.replace(/ on[a-z]+\s*=\s*[^\s>]+/gi,""),e=e.replace(/javascript:\s*/gi,""),e}catch{return String(t)}}function Bk(t,e,n){try{const r={mode:t,items:e,total:n,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(r))}catch{}}function gB(){const{carrito:t,agregarAlCarrito:e,quitarDelCarrito:n,eliminarUnidadDelCarrito:r}=Ud(),{usuario:i}=Br(),{abrirModal:a}=Gc(),{theme:c,isDark:u}=Tm(),{id:h}=DS(),f=ai(),[g,y]=T.useState(!1),[x,w]=T.useState(0),[S,b]=T.useState(0),[N,j]=T.useState(!1),[M,O]=T.useState(0),[F,H]=T.useState(null),[K,R]=T.useState(!1),[I,A]=T.useState(!0),[k,V]=T.useState(0),[U,D]=T.useState(!1),[xe,Ke]=T.useState(!1),[st,qe]=T.useState(!1),[ce,ue]=T.useState("images"),[de,z]=T.useState(0),[Y,be]=T.useState(1),[Me,Ve]=T.useState({x:0,y:0}),[it,ct]=T.useState(0),[Be,et]=T.useState(1),[ut,_t]=T.useState(1),[mt,kt]=T.useState({x:0,y:0}),[Ot,ie]=T.useState(!1),[Fe,je]=T.useState(0),[fe,Ze]=T.useState(1),[Xe,jt]=T.useState({x:0,y:0}),Nt=T.useRef(null),At=T.useRef(0),_e=T.useRef(0),ne=T.useRef(null),ge=T.useRef(null),Ne=T.useRef(null),te=T.useRef(null),Ie=T.useRef(!1),B=T.useRef({x:50,y:50}),[Q,le]=T.useState(!1),[J,se]=T.useState(""),[Ue,ze]=T.useState({w:200,h:200}),{product:q,loading:Ee,error:He}=yL(h),dt=()=>{var Ye,Ge;if(!q)return[];const Se=(Array.isArray(q==null?void 0:q.variantes)?q.variantes:[]).filter(Gt=>Gt&&typeof Gt.color=="string"&&Gt.color.trim())[M]||null,Ce=((Ye=Se==null?void 0:Se.videoUrls)==null?void 0:Ye.length)>0?Se.videoUrls:((Ge=q==null?void 0:q.videoUrls)==null?void 0:Ge.length)>0?q.videoUrls:[];return Array.isArray(Ce)?Ce.filter(Gt=>Gt&&typeof Gt=="string"&&Gt.trim()):[]},gt=(G,pe)=>{var Ge,Gt;const Se=Tn=>Tn?String(Tn).split("?")[0].split("#")[0].trim():"",Ce=Tn=>{try{return typeof Tn=="string"?Tn:(Tn==null?void 0:Tn.url)||(Tn==null?void 0:Tn.src)||""}catch{return""}};let Ye=[];return((Ge=pe==null?void 0:pe.imagenes)==null?void 0:Ge.length)>0?Ye=pe.imagenes.map(Ce).filter(Boolean):pe!=null&&pe.imagen?Ye=[Ce(pe.imagen)]:((Gt=G==null?void 0:G.imagenes)==null?void 0:Gt.length)>0?Ye=G.imagenes.map(Ce).filter(Boolean):G!=null&&G.imagen&&(Ye=[Ce(G.imagen)]),[...new Set(Ye.map(Se).filter(Boolean))]};let Le=[],ve=0,Oe=0,It=[],ht=[],Ht=null,bt=[];if(q){It=Array.isArray(q==null?void 0:q.variantes)?q.variantes:[],ht=It.filter(Ce=>Ce&&typeof Ce.color=="string"&&Ce.color.trim()),Ht=ht[M]||null,bt=gt(q,Ht);const G=bt.map(Ce=>({type:"image",url:Ce})),Se=(dt()||[]).map(Ce=>({type:"video",url:Ce}));Le=[...G,...Se],Oe=Math.max(0,Math.min(S,Math.max(0,Le.length-1))),ve=F!==null?F:Oe}if(T.useEffect(()=>{if(q){const pe=(Array.isArray(q==null?void 0:q.variantes)?q.variantes:[]).filter(Se=>Se&&typeof Se.color=="string"&&Se.color.trim());pe.length>0&&(M<0||M>=pe.length)&&O(0)}},[q,M]),T.useEffect(()=>{be(1),Ve({x:0,y:0})},[de,ce]),T.useEffect(()=>{Ze(1),jt({x:0,y:0})},[Fe]),T.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<1280){const G=document.querySelector(".mobile-tablet-thumbs"),pe=G&&G.querySelector(".mt-thumb.active");G&&pe&&typeof pe.scrollIntoView=="function"&&pe.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[S]),T.useEffect(()=>{const G=Array.isArray(Le)&&Le[ve]||null;(!G||G.type!=="image")&&le(!1)},[ve]),T.useEffect(()=>{let G=window.scrollY;const pe=()=>{const Se=window.scrollY;Se>G&&Se>100?A(!1):A(!0),G=Se};return window.addEventListener("scroll",pe,{passive:!0}),()=>window.removeEventListener("scroll",pe)},[]),T.useEffect(()=>{if(q){const Se=(Array.isArray(q==null?void 0:q.variantes)?q.variantes:[]).filter(Ye=>Ye&&typeof Ye.color=="string"&&Ye.color.trim())[M]||null,Ce=t.find(Ye=>{var Ge;return Ye.id===q.id&&(!Se||((Ge=Ye.variante)==null?void 0:Ge.color)===(Se==null?void 0:Se.color))});V((Ce==null?void 0:Ce.cantidad)||0)}},[t,q,M]),T.useEffect(()=>{const G=()=>{const Se=Nt.current,Ce=document.querySelector(".amazon-thumbs-sidebar");if(Se&&Ce){const Ye=Se.offsetHeight;Ce.style.height=`${Ye}px`,Ce.style.maxHeight=`${Ye}px`}},pe=setTimeout(G,100);return window.addEventListener("resize",G),()=>{clearTimeout(pe),window.removeEventListener("resize",G)}},[S,q]),Ee)return null;if(He||!q){const G=()=>{window.history&&window.history.length>1?f(-1):f("/productos")};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-700 p-4",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsx("div",{className:"mb-4",children:o.jsx("svg",{className:"mx-auto h-16 w-16 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),o.jsx("p",{className:"text-lg sm:text-xl font-semibold mb-2 text-red-600",children:He?"Error al cargar el producto":"Producto no encontrado"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:He?`Error: ${He}`:`No se pudo encontrar el producto con ID: ${h}`}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{onClick:G,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver"}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Recargar"})]})]})})}const Dt=ht[M]||null,De=Dt,fn=()=>{var G,pe,Se,Ce;return(pe=(G=De==null?void 0:De.imagenPrincipal)==null?void 0:G[0])!=null&&pe.url?De.imagenPrincipal[0].url:(Ce=(Se=q.imagenPrincipal)==null?void 0:Se[0])!=null&&Ce.url?q.imagenPrincipal[0].url:De!=null&&De.imagen?De.imagen:q.imagen?q.imagen:null},Mt=()=>(q.tresArchivosExtras||q.imagenesExtra||[]).filter(pe=>(pe==null?void 0:pe.url)||typeof pe=="string").slice(0,3).map(pe=>typeof pe=="string"?pe:pe.url),br=()=>{window.history&&window.history.length>1?f(-1):f("/productos")},wr=G=>{O(G),w(0),b(0)},bi=G=>{try{const pe=(G??"").toString().trim();return pe||null}catch{return null}},Fn=bi(Dt==null?void 0:Dt.color),or=t.find(G=>G.id===q.id&&bi(G.colorSeleccionado)===Fn),as=(or==null?void 0:or.cantidad)||0,Ws=()=>{if(!i){y(!0);return}if(!or){const G={...q,cantidad:1,precio:Dt&&Number(Dt.precio)?Number(Dt.precio):Number(q.precio)||0,cantidadProducto:Number.isFinite(vn)?vn:void 0};e(G,Fn)}},Ao=()=>{if(!i){y(!0);return}const G={...q,precio:Dt&&Number(Dt.precio)?Number(Dt.precio):Number(q.precio)||0,cantidadProducto:Number.isFinite(vn)?vn:void 0};e(G,Fn)},Hr=()=>{if(!i){y(!0);return}r(q.id,Fn)},os=()=>{if(!i){y(!0);return}n(q.id,Fn)},vn=(Dt==null?void 0:Dt.cantidad)!==void 0?Number(Dt.cantidad)||0:q.cantidad!==void 0?Number(q.cantidad)||0:1/0,wi=(q==null?void 0:q.activo)!==!1&&vn>0,lr=Number.isFinite(vn)?Math.max(0,vn-((or==null?void 0:or.cantidad)||0)):1/0,ls=Dt&&Dt.precio!==void 0?Number(Dt.precio):NaN,oi=Number.isFinite(ls)&&ls>0?ls:Number(q.precio)||0,jo=[{id:q.id,nombre:q.nombre,precio:oi,cantidad:1}],Cl=()=>{j(!1)},Yt=bt.length>0;ht&&ht.length>1;const Al=Yt;bt.length;const qs=G=>({type:"image",url:G||""}),cs=bt.filter(Boolean).map(G=>qs(G)),Dr=new Set;cs.filter(G=>{const pe=(G.url||"").split("?")[0].split("#")[0].trim().toLowerCase();return!pe||Dr.has(pe)?!1:(Dr.add(pe),!0)}),Math.min(Math.max(x,0),Math.max(0,(bt.length||1)-1));const us=[...bt],jl=()=>{if(typeof window>"u"||window.innerWidth<1280)return;const G=Le&&Le[ve]||null;if(!G||G.type!=="image")return;const pe=G.url;se(pe);const Se=ge.current;if(Se&&Se.naturalWidth&&Se.naturalHeight){const Ce=Se.getBoundingClientRect(),Ye=Ce.width||Se.clientWidth||0,Ge=Ce.height||Se.clientHeight||0,Gt=Se.naturalWidth,Tn=Se.naturalHeight,Fi=Gt/Math.max(1,Ye),Qs=Tn/Math.max(1,Ge),Ui=Math.min(Fi,Qs),Jt=Math.min(4,Math.max(2,Ui)),ja=Ui>0?Jt/Ui:2;ze({w:Math.round(Gt*ja),h:Math.round(Tn*ja)}),te.current=Ce}else ze({w:1e3,h:1e3}),te.current=ne.current?ne.current.getBoundingClientRect():null;B.current={x:50,y:50},le(!0),requestAnimationFrame(()=>{const Ce=Ne.current;Ce&&(Ce.style.backgroundPosition="50% 50%")})},Gs=G=>{if(!Q||typeof window<"u"&&window.innerWidth<1280)return;const pe=te.current||ge.current&&ge.current.getBoundingClientRect()||ne.current&&ne.current.getBoundingClientRect();if(!pe)return;const Se=Math.max(0,Math.min(100,(G.clientX-pe.left)/pe.width*100)),Ce=Math.max(0,Math.min(100,(G.clientY-pe.top)/pe.height*100));B.current={x:Se,y:Ce},Ie.current||(Ie.current=!0,requestAnimationFrame(()=>{Ie.current=!1;const Ye=Ne.current;Ye&&(Ye.style.backgroundPosition=`${B.current.x}% ${B.current.y}%`)}))},Mr=()=>{le(!1),te.current=null},Il=G=>{window.innerWidth>=1280||(At.current=G.touches[0].clientX,_e.current=0)},cr=G=>{if(window.innerWidth>=1280||At.current===0)return;const pe=G.touches[0].clientX-At.current;_e.current=pe},Io=G=>{if(window.innerWidth>=1280)return;Math.abs(_e.current)>50&&(_e.current>0&&x>0?w(x-1):_e.current<0&&x<bt.length-1&&w(x+1)),At.current=0,_e.current=0},Ks=(G,pe)=>Math.sqrt(Math.pow(pe.clientX-G.clientX,2)+Math.pow(pe.clientY-G.clientY,2)),Pl=G=>{if(G.touches.length===2){const pe=Ks(G.touches[0],G.touches[1]);ct(pe),et(Y)}else G.touches.length===1&&(At.current=G.touches[0].clientX,_e.current=0)},Ca=G=>{if(G.touches.length===2){const Se=Ks(G.touches[0],G.touches[1])/it,Ce=Math.min(Math.max(Be*Se,1),4);be(Ce)}else if(G.touches.length===1)if(Y>1){const pe=G.touches[0].clientX-At.current,Se=G.touches[0].clientY-(At.current||0);Ve({x:pe,y:Se})}else{const pe=G.touches[0].clientX-At.current;_e.current=pe}},Aa=G=>{if(G.touches.length===0&&(Y<1.1&&(be(1),Ve({x:0,y:0})),Y===1)){const Se=Le;Math.abs(_e.current)>50&&(_e.current>0&&de>0?z(de-1):_e.current<0&&de<Se.length-1&&z(de+1)),At.current=0,_e.current=0}},ds=G=>{if(G.touches.length===2){const pe=Ks(G.touches[0],G.touches[1]);ct(pe),et(ut)}else G.touches.length===1&&(At.current=G.touches[0].clientX,_e.current=0)},Xs=G=>{if(G.touches.length===2){const Se=Ks(G.touches[0],G.touches[1])/it,Ce=Math.min(Math.max(Be*Se,1),4);_t(Ce)}else if(G.touches.length===1)if(ut>1){const pe=G.touches[0].clientX-At.current,Se=G.touches[0].clientY-(At.current||0);kt({x:pe,y:Se})}else{const pe=G.touches[0].clientX-At.current;_e.current=pe}},au=G=>{G.touches.length===0&&(ut<1.1&&(_t(1),kt({x:0,y:0})),ut===1&&(Math.abs(_e.current)>50&&(_e.current>0&&x>0?w(x-1):_e.current<0&&x<us.length-1&&w(x+1)),At.current=0,_e.current=0))},_i=(G,pe=0)=>{ue(G),z(Math.max(0,pe||0)),qe(!0)},Or=()=>qe(!1);return o.jsxs(o.Fragment,{children:[o.jsxs("main",{className:"vp-main min-h-screen bg-white px-4 sm:px-6 pb-16 text-gray-800 flex flex-col items-stretch overflow-visible",children:[o.jsx("div",{className:"hidden xl:flex w-full mb-3",children:o.jsx("button",{type:"button",className:"vp-back-top-btn",onClick:br,"aria-label":"Volver",children:o.jsx(fk,{size:16})})}),o.jsxs("section",{className:"w-full xl:grid xl:grid-cols-12 xl:gap-6 flex flex-col gap-8 overflow-visible",children:[Al&&o.jsxs(oe.div,{className:"relative flex flex-col items-start w-full xl:col-span-6 overflow-visible",children:[Le.length>0&&o.jsxs("div",{className:"amazon-gallery-layout flex",children:[o.jsxs("div",{className:"relative",children:[Le.length>4&&o.jsx("button",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 z-10 w-8 h-8 bg-white hover:bg-gray-50 border border-gray-300 hover:border-gray-400 rounded-full flex items-center justify-center transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>{const G=document.querySelector(".amazon-thumbs-sidebar");G&&G.scrollBy({top:-80,behavior:"smooth"})},children:o.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 15l7-7 7 7"})})}),o.jsx("div",{className:`amazon-thumbs-sidebar ${Le.length>4?"has-overflow":""}`,style:{paddingTop:Le.length>4?"28px":"0",paddingBottom:Le.length>4?"28px":"0"},onMouseLeave:()=>H(null),children:Le.map((G,pe)=>o.jsx("button",{type:"button",className:`amazon-thumb ${pe===Oe?"active":""}`,onClick:()=>{b(pe);const Se=Ye=>Ye?String(Ye).split("?")[0].split("#")[0].trim().toLowerCase():"",Ce=bt.findIndex(Ye=>Se(Ye)===Se(G.url));Ce>=0&&w(Ce)},onMouseEnter:()=>H(pe),onFocus:()=>H(pe),onMouseLeave:()=>H(null),"aria-label":`Miniatura ${pe+1}`,children:G.type==="video"?o.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[o.jsx("video",{src:G.url,preload:"metadata",muted:!0,className:"w-full h-full object-contain"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/95 rounded-full p-2 shadow",children:o.jsx("svg",{className:"w-5 h-5 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{src:G.url,alt:`Miniatura ${pe+1}`,className:"w-full h-full object-contain",loading:"lazy",onError:Se=>{Se.currentTarget.onerror=null,Se.currentTarget.src="/Productos/N.jpg"}})},`thumb-${pe}`))}),Le.length>4&&o.jsx("button",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 z-10 w-8 h-8 bg-white hover:bg-gray-50 border border-gray-300 hover:border-gray-400 rounded-full flex items-center justify-center transition-all duration-200 shadow-md hover:shadow-lg",onClick:()=>{const G=document.querySelector(".amazon-thumbs-sidebar");G&&G.scrollBy({top:80,behavior:"smooth"})},children:o.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})})]}),o.jsxs("div",{className:"amazon-main-image-container",children:[o.jsx("button",{className:"vp-back-fab xl:hidden",onClick:br,"aria-label":"Volver",type:"button",children:o.jsx(fk,{size:18})}),o.jsx("div",{ref:G=>{ne.current=G,Nt.current=G},className:`amazon-main-image-wrap ${Q?"zooming":""}`,onMouseEnter:jl,onMouseMove:Gs,onMouseLeave:Mr,onClick:()=>{const G=Le[ve];if((G==null?void 0:G.type)==="video"){const pe=(galleryVideosList||[]).findIndex(Se=>Se===G.url);_i("videos",Math.max(0,pe))}else _i("images",ve)},onTouchStart:Il,onTouchMove:cr,onTouchEnd:Io,role:"button","aria-label":"Ver imagen en pantalla completa",tabIndex:0,children:(()=>{const G=Le[ve];return G?G.type==="video"?o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center bg-white",children:[o.jsx("video",{src:G.url,preload:"metadata",playsInline:!0,muted:!0,className:"w-full h-full object-contain"},`main-vid-${ve}`),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/95 rounded-full p-4 shadow",children:o.jsx("svg",{className:"w-7 h-7 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{ref:ge,src:G.url,alt:q.nombre,className:"w-full h-full object-contain transition-opacity duration-300",draggable:!1,onLoad:()=>{setTimeout(()=>{const pe=Nt.current,Se=document.querySelector(".amazon-thumbs-sidebar");if(pe&&Se){const Ce=pe.offsetHeight;Se.style.height=`${Ce}px`,Se.style.maxHeight=`${Ce}px`}},50)},onError:pe=>{pe.currentTarget.onerror=null,pe.currentTarget.src="/Productos/N.jpg"}},`main-img-${Oe}`):null})()}),o.jsx("div",{ref:Ne,className:"vp-zoom-float vp-zoom-stage",style:{display:Q?"block":"none",backgroundImage:J?`url(${J})`:"none",backgroundRepeat:"no-repeat",backgroundSize:`${Ue.w}px ${Ue.h}px`,backgroundPosition:`${B.current.x}% ${B.current.y}%`}})]})]}),Le.length>1&&o.jsx("div",{className:"xl:hidden w-full mt-3",children:o.jsx("div",{className:"mobile-tablet-thumbs flex gap-3 overflow-x-auto pb-2",children:Le.map((G,pe)=>o.jsx("button",{type:"button",className:`mt-thumb ${pe===Oe?"active":""}`,onClick:()=>b(pe),"aria-label":`Vista ${pe+1}`,children:G.type==="video"?o.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[o.jsx("video",{src:G.url,preload:"metadata",muted:!0,className:"w-full h-full object-contain"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/95 rounded-full p-2 shadow",children:o.jsx("svg",{className:"w-5 h-5 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{src:G.url,alt:`Miniatura ${pe+1}`,className:"w-full h-full object-contain",loading:"lazy",onError:Se=>{Se.currentTarget.onerror=null,Se.currentTarget.src="/Productos/N.jpg"}})},`mt-thumb-${pe}`))})})]}),o.jsxs(oe.div,{className:"flex flex-col gap-4 sm:gap-5 w-full xl:col-span-4 overflow-visible",children:[o.jsx("h1",{className:"vp-title",children:q.nombre}),o.jsx("div",{className:"vp-desc prose max-w-none",dangerouslySetInnerHTML:{__html:mB(q.descripcion||"<p>Contáctanos para más detalles.</p>")}}),o.jsxs("p",{className:"vp-price",children:["DOP ",zk(oi)]}),o.jsxs("div",{className:`vp-variants mt-6 ${!ht||ht.length<=1?"hidden":""}`,children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Variantes disponibles:"}),o.jsx(C4,{variants:ht?ht.map((G,pe)=>{var Se,Ce;return{id:G.id||`var_${pe}`,name:G.color||`Variante ${pe+1}`,price:G.precio,stock:G.cantidad||0,image:((Ce=(Se=G.imagenPrincipal)==null?void 0:Se[0])==null?void 0:Ce.url)||G.imagen,isSelected:M===pe}}):[],productMainImage:fn(),onVariantChange:wr,className:"w-full"}),o.jsx("div",{className:"flex flex-wrap gap-3 hidden",children:ht.map((G,pe)=>{var Tn,Fi,Qs,Ui;const Se=Jt=>{try{return Jt?typeof Jt=="string"?Jt:typeof Jt=="object"&&Jt!==null?Jt.url||"":String(Jt||""):""}catch{return""}},Ye=((Tn=(Array.isArray(G==null?void 0:G.media)&&G.media.length>0?G.media:[]).find(Jt=>(Jt==null?void 0:Jt.type)==="image"&&(Jt==null?void 0:Jt.url)))==null?void 0:Tn.url)||Se((Fi=G==null?void 0:G.imagenPrincipal)==null?void 0:Fi[0])||(G==null?void 0:G.imagen)||Array.isArray(G==null?void 0:G.imagenes)&&G.imagenes[0]||Array.isArray(q==null?void 0:q.media)&&((Qs=q.media.find(Jt=>(Jt==null?void 0:Jt.type)==="image"))==null?void 0:Qs.url)||Se((Ui=q==null?void 0:q.imagenPrincipal)==null?void 0:Ui[0])||(q==null?void 0:q.imagen)||Array.isArray(q==null?void 0:q.imagenes)&&q.imagenes[0]||null,Ge=G.cantidad>0,Gt=M===pe;return o.jsxs("button",{className:`relative flex items-center gap-3 p-2 rounded-lg border-2 transition-all ${Gt?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${Ge?"":"opacity-70"}`,onClick:()=>O(pe),"aria-label":`Seleccionar variante ${G.color}${Ge?"":" (Agotado)"}`,disabled:!Ge&&!Gt,children:[o.jsxs("div",{className:"relative w-12 h-12 rounded-md overflow-hidden flex-shrink-0",children:[Ye?o.jsx("img",{src:Ye,alt:`${G.color}`,className:"w-full h-full object-contain",onError:Jt=>{Jt.target.onerror=null,Jt.target.src="https://via.placeholder.com/50?text=No+imagen"}}):o.jsx("div",{className:"w-full h-full",style:{backgroundColor:G.colorHex||"#ccc"}}),!Ge&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-red-600",children:"Agotado"})})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:"block font-medium text-gray-900",children:G.color}),G.cantidad!==void 0&&o.jsx("span",{className:`text-xs ${G.cantidad>0?"text-green-600":"text-red-600"}`,children:G.cantidad>0?`${G.cantidad} disponible${G.cantidad!==1?"s":""}`:"Agotado"})]}),Gt&&o.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center shadow-sm",children:o.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},`${G.color}-${pe}`)})})]}),q.sellerId&&o.jsx("div",{className:"vp-seller-info",children:o.jsxs("div",{className:"seller-content",children:[o.jsx("span",{className:"seller-label",children:"Vendido por:"}),o.jsx("button",{className:"seller-name",onClick:()=>f(`/tienda/${q.sellerId}`),children:q.sellerName||"Ver Tienda"})]})}),o.jsxs("div",{className:"xl:hidden flex flex-col gap-3 overflow-visible",children:[o.jsx("div",{className:`vp-stock ${lr===0?"vp-stock-out":lr<=2?"vp-stock-low":"vp-stock-ok"}`,children:lr===0?"No disponible":Number.isFinite(lr)?`Quedan ${lr} disponibles`:"Disponible"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 overflow-visible",children:[or?o.jsxs("div",{className:"vp-qty-row w-full sm:w-1/2",children:[o.jsx("button",{onClick:Hr,className:"vp-qty-btn",children:"−"}),o.jsx("span",{className:"vp-qty",children:as}),o.jsx("button",{onClick:Ao,className:"vp-qty-btn",disabled:as>=vn,title:as>=vn?"Has alcanzado el máximo disponible":"Agregar una unidad",children:"+"}),o.jsx("button",{onClick:os,className:"vp-remove",children:o.jsx(pk,{})})]}):o.jsx("button",{className:`button w-full sm:w-1/2 ${wi?"":"opacity-60 cursor-not-allowed"}`,onClick:Ws,disabled:!wi,title:wi?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),o.jsx("div",{className:"w-full sm:w-1/2",onClick:()=>Bk("single",jo,oi),children:o.jsx(vx,{className:"w-full",total:oi*100,label:"Comprar ahora"})})]})]}),Array.isArray(q.acerca)&&q.acerca.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"vp-subtitle",children:"Acerca de este artículo"}),o.jsx("ul",{className:"vp-bullets",children:q.acerca.map((G,pe)=>o.jsx("li",{children:G},pe))})]})]}),o.jsx("aside",{className:"vp-buy-card w-full xl:col-span-2 hidden xl:block",children:o.jsxs("div",{className:"vp-buy-inner",children:[o.jsxs("div",{className:"vp-buy-price",children:["DOP ",zk(oi)]}),o.jsx("div",{className:`vp-stock ${lr===0?"vp-stock-out":lr<=2?"vp-stock-low":"vp-stock-ok"}`,children:lr===0?"No disponible":Number.isFinite(lr)?`Quedan ${lr} disponibles`:"Disponible"}),o.jsxs("div",{className:"flex flex-col gap-3",children:[or?o.jsxs("div",{className:"vp-qty-row",children:[o.jsx("button",{onClick:Hr,className:"vp-qty-btn",children:"−"}),o.jsx("span",{className:"vp-qty",children:as}),o.jsx("button",{onClick:Ao,className:"vp-qty-btn",disabled:as>=vn,title:as>=vn?"Has alcanzado el máximo disponible":"Agregar una unidad",children:"+"}),o.jsx("button",{onClick:os,className:"vp-remove",children:o.jsx(pk,{})})]}):o.jsx("button",{className:`button w-full ${wi?"":"opacity-60 cursor-not-allowed"}`,onClick:Ws,disabled:!wi,title:wi?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),o.jsx("div",{onClick:()=>Bk("single",jo,oi),children:o.jsx(vx,{className:"w-full",total:oi*100,label:"Comprar ahora"})})]})]})})]}),q&&o.jsx("section",{className:"w-full mt-8 px-4 sm:px-6 xl:px-6",children:o.jsx(pB,{productoActual:q})}),(()=>{const G=Mt();return!G||G.length===0?null:o.jsxs("section",{className:"w-full mt-12 mb-8 px-4 sm:px-6",children:[o.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6 text-center",children:"Más información del producto"}),o.jsx("div",{className:"max-w-[1500px] mx-auto space-y-4",children:G.map((pe,Se)=>o.jsxs("div",{className:"relative w-full cursor-pointer group",onClick:()=>{je(Se),ie(!0)},children:[o.jsx("img",{src:pe,alt:`${q.nombre} - Información ${Se+1}`,className:"w-full h-auto object-contain bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300",style:{maxWidth:"1500px",margin:"0 auto",display:"block"},onError:Ce=>{Ce.currentTarget.onerror=null,Ce.currentTarget.src="/Productos/N.jpg"}}),o.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors duration-300 rounded-lg flex items-center justify-center",children:o.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white/90 rounded-full p-3 shadow-lg",children:o.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})]},`product-info-${Se}`))})]})})()]}),st&&(()=>{const G=dt(),pe=G.length>0,Se=ce==="videos"?G.map(Ye=>({type:"video",url:Ye})):Le,Ce=Math.min(de,Math.max(0,Se.length-1));return o.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${u?"bg-gray-900":"bg-white"}`,children:[o.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${ce==="images"?u?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":u?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{ue("images"),z(0),be(1),Ve({x:0,y:0})},children:"IMÁGENES"}),pe&&o.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${ce==="videos"?u?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":u?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{ue("videos"),z(0),be(1),Ve({x:0,y:0})},children:"VIDEOS"})]}),o.jsx("button",{type:"button",className:`transition-colors ${u?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:Or,children:o.jsx(q0,{className:"text-2xl"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[o.jsx("div",{className:`hidden md:block w-64 lg:w-80 border-r overflow-y-auto p-4 ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:Ye=>Ye.stopPropagation(),children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:`text-sm font-semibold mb-4 uppercase ${u?"text-gray-200":"text-gray-700"}`,children:ce==="videos"?"Videos":"Imágenes"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Se.map((Ye,Ge)=>o.jsx("button",{type:"button",className:`w-full aspect-square overflow-hidden rounded border-2 transition-all ${Ge===Ce?"":"border-gray-300 hover:border-gray-400"}`,style:Ge===Ce?{borderColor:"#0064D2"}:void 0,onClick:Gt=>{Gt.stopPropagation(),z(Ge),be(1),Ve({x:0,y:0})},"aria-label":`Vista ${Ge+1}`,children:ce==="videos"?o.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[o.jsx("video",{src:Ye.url,className:"w-full h-full object-contain",muted:!0}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/90 rounded-full p-2",children:o.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{src:Ye.url,alt:`Miniatura ${Ge+1}`,className:"w-full h-full object-contain bg-white p-1"})},`desktop-thumb-${Ge}`))})]})}),o.jsxs("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative ${u?"bg-gray-900":"bg-white"}`,onClick:Ye=>Ye.stopPropagation(),onTouchStart:ce==="images"?Pl:void 0,onTouchMove:ce==="images"?Ca:void 0,onTouchEnd:ce==="images"?Aa:void 0,children:[o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[Se.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:Ye=>{Ye.stopPropagation(),z(Ge=>(Ge-1+Se.length)%Se.length)},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:Ye=>{Ye.stopPropagation(),z(Ge=>(Ge+1)%Se.length)},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),o.jsx("div",{className:"w-full h-full flex items-center justify-center px-2 md:px-4",children:(()=>{const Ye=Se[Ce];return Ye?ce==="videos"?o.jsx("video",{src:Ye.url,controls:!0,className:"w-full h-full object-contain",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)"},onError:Ge=>{console.error("Error loading video:",Ye.url)}},`video-${Ce}`):o.jsx("img",{src:Ye.url,alt:`${(q==null?void 0:q.nombre)||"Imagen"}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${Y}) translate(${Me.x}px, ${Me.y}px)`,transition:Y===1?"transform 0.3s ease":"none",cursor:Y>1?"grab":"zoom-in"},draggable:!1,onDoubleClick:()=>{Y===1?be(2):(be(1),Ve({x:0,y:0}))}}):null})()})]}),o.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 xl:hidden flex flex-col items-center gap-2",children:[o.jsxs("div",{className:`px-4 py-2 rounded-full text-sm font-medium shadow-lg ${u?"bg-gray-800 text-white":"bg-white/95 text-gray-900"}`,children:[Ce+1," / ",Se.length]}),Se.length>1&&o.jsxs("div",{className:`text-xs px-3 py-1 rounded-full flex items-center gap-1 ${u?"bg-gray-800/90 text-gray-300":"bg-white/90 text-gray-600"}`,children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16l-4-4m0 0l4-4m-4 4h18"})}),o.jsx("span",{children:"Desliza"}),o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]})]}),o.jsx("div",{className:`md:hidden border-t p-4 overflow-x-auto ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:Ye=>Ye.stopPropagation(),children:o.jsx("div",{className:"flex gap-3 min-w-min",children:Se.map((Ye,Ge)=>o.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${Ge===Ce?"":"border-gray-300 hover:border-gray-400"}`,style:Ge===Ce?{borderColor:"#0064D2"}:void 0,onClick:Gt=>{Gt.stopPropagation(),z(Ge),be(1),Ve({x:0,y:0})},"aria-label":`Vista ${Ge+1}`,children:ce==="videos"?o.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[o.jsx("video",{src:Ye.url,className:"w-full h-full object-contain",muted:!0}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"bg-white/90 rounded-full p-1.5",children:o.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):o.jsx("img",{src:Ye.url,alt:`Miniatura ${Ge+1}`,className:"w-full h-full object-contain bg-white p-1"})},`mobile-thumb-${Ge}`))})})]})]})})(),o.jsx(Im,{isOpen:g,onClose:()=>y(!1),onIniciarSesion:()=>{try{a()}catch{}}}),N&&o.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[9999] flex flex-col",onClick:Cl,children:[o.jsx("div",{className:"absolute top-4 right-4 z-20",children:o.jsx("button",{className:"bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-colors",onClick:Cl,"aria-label":"Cerrar",children:o.jsx(q0,{size:20})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4 relative overflow-hidden",onClick:G=>G.stopPropagation(),onTouchStart:ds,onTouchMove:Xs,onTouchEnd:au,children:o.jsx("img",{src:us[x],alt:`${q==null?void 0:q.nombre}`,className:"max-w-full max-h-full object-contain select-none",style:{transform:`scale(${ut||1}) translate(${(mt==null?void 0:mt.x)||0}px, ${(mt==null?void 0:mt.y)||0}px)`,transition:(ut||1)===1?"transform 0.3s ease":"none"},draggable:!1,onDoubleClick:()=>{(ut||1)===1?_t&&_t(2):(_t&&_t(1),kt&&kt({x:0,y:0}))},onError:G=>{G.currentTarget.onerror=null,G.currentTarget.src="/Productos/N.jpg"}})}),us.length>1&&o.jsx("div",{className:"p-4",onClick:G=>G.stopPropagation(),children:o.jsx("div",{className:"flex gap-3 justify-center overflow-x-auto pb-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:us.map((G,pe)=>o.jsx("button",{className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ${pe===x?"border-white border-opacity-100":"border-gray-600 border-opacity-50"}`,onClick:Se=>{Se.stopPropagation(),w(pe),_t&&_t(1),kt&&kt({x:0,y:0})},"aria-label":`Miniatura ${pe+1}`,children:o.jsx("img",{src:G,alt:`Miniatura ${pe+1}`,className:"w-full h-full object-contain",loading:"lazy",onError:Se=>{Se.currentTarget.onerror=null,Se.currentTarget.src="/Productos/N.jpg"}})},pe))})})]}),Ot&&(()=>{const G=Mt();if(!G||G.length===0)return null;const pe=G[Fe],Se=G.length>1;return o.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${u?"bg-gray-900":"bg-white"}`,children:[o.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[o.jsxs("h2",{className:`text-lg font-semibold ${u?"text-white":"text-gray-900"}`,children:["Información del producto (",Fe+1," /"," ",G.length,")"]}),o.jsx("button",{type:"button",className:`transition-colors ${u?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:()=>ie(!1),children:o.jsx(q0,{className:"text-2xl"})})]}),o.jsx("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative overflow-auto ${u?"bg-gray-900":"bg-white"}`,children:o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[Se&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:()=>{je(Ce=>(Ce-1+G.length)%G.length)},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:()=>{je(Ce=>(Ce+1)%G.length)},children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),o.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden px-2 md:px-4",children:o.jsx("img",{src:pe,alt:`${q==null?void 0:q.nombre} - Información ${Fe+1}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${fe}) translate(${Xe.x}px, ${Xe.y}px)`,transition:fe===1?"transform 0.3s ease":"none",cursor:fe>1?"grab":"zoom-in"},draggable:!1,onDoubleClick:()=>{fe===1?Ze(2):(Ze(1),jt({x:0,y:0}))},onError:Ce=>{Ce.currentTarget.onerror=null,Ce.currentTarget.src="/Productos/N.jpg"}})})]})}),Se&&o.jsx("div",{className:`border-t p-4 overflow-x-auto ${u?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,children:o.jsx("div",{className:"flex gap-3 justify-center min-w-min",children:G.map((Ce,Ye)=>o.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${Ye===Fe?"border-blue-500 ring-2 ring-blue-500/30":"border-gray-300 hover:border-blue-500/50"}`,onClick:()=>je(Ye),"aria-label":`Vista ${Ye+1}`,children:o.jsx("img",{src:Ce,alt:`Miniatura ${Ye+1}`,className:"w-full h-full object-contain bg-white p-1",onError:Ge=>{Ge.currentTarget.onerror=null,Ge.currentTarget.src="/Productos/N.jpg"}})},`product-info-thumb-${Ye}`))})})]})})()]})}function yB(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function xB(t,e){if(!e)return bx(t);if(Array.isArray(e.variantes)&&t.colorSeleccionado){const n=e.variantes.find(r=>r.color===t.colorSeleccionado);if(n&&n.cantidad!==void 0)return Number(n.cantidad)||0}return e.cantidad!==void 0?Number(e.cantidad)||0:bx(t)}function bx(t){if(t.maxStock!==void 0&&t.maxStock!==null){const e=Number(t.maxStock);if(!Number.isNaN(e))return e}if(Array.isArray(t.variantes)&&t.colorSeleccionado){const e=t.variantes.find(n=>n.color===t.colorSeleccionado);if(e&&e.cantidad!==void 0)return Number(e.cantidad)||0}if(t.cantidadProducto!==void 0){const e=Number(t.cantidadProducto);if(!Number.isNaN(e))return e}return t.cantidad!==void 0&&t.cantidad,Number.POSITIVE_INFINITY}function vB(t,e){try{const n={mode:"cart",items:t,total:e,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(n))}catch{}}function bB(){const{carrito:t,agregarAlCarrito:e,eliminarUnidadDelCarrito:n,quitarDelCarrito:r}=Ud(),i=ai(),[a,c]=T.useState(null),[u,h]=T.useState({});T.useEffect(()=>{const y=[],x=new Set;return t.forEach(w=>{if(w!=null&&w.id&&!x.has(w.id)){x.add(w.id);const S=ot(Pe,"productos",w.id),b=ar(S,N=>{N.exists()&&h(j=>({...j,[w.id]:N.data()}))});y.push(b)}}),()=>{y.forEach(w=>w&&w())}},[t]);const f=t.reduce((y,x)=>y+(Number(x.precio)||0)*x.cantidad,0),g=t.map(y=>({id:y.id,nombre:y.nombre,precio:Number(y.precio)||0,cantidad:y.cantidad}));return o.jsxs("main",{className:"carrito-page",style:{paddingTop:"var(--content-offset, 100px)"},children:[t.length===0?o.jsx("div",{className:"carrito-empty-wrap",children:o.jsxs("div",{className:"carrito-empty-box",children:[o.jsx("img",{src:"/toy/asoma.png",alt:"Explora nuestros productos",className:"carrito-empty-figure",loading:"lazy"}),o.jsxs("div",{className:"carrito-empty-glass",children:[o.jsx("div",{className:"carrito-empty-icon","aria-hidden":"true",children:"🛒"}),o.jsx("h2",{className:"carrito-empty-title",children:"No hay nada en el carrito"}),o.jsx("p",{className:"carrito-empty-sub",children:"Explora nuestros productos"}),o.jsx("button",{type:"button",className:"carrito-empty-cta",onClick:()=>i("/categorias"),children:"Ver productos"})]})]})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"carrito-grid",children:t.map(y=>{const x=u[y.id];bx(y);const w=xB(y,x),S=Number.isFinite(w)?Math.max(0,w-(Number(y.cantidad)||0)):w,b=`${y.id}__${y.colorSeleccionado??""}`;return o.jsxs("div",{className:"carrito-card",onClick:()=>i(`/producto/${y.id}`),children:[(()=>{var K;const N=R=>{try{return R?typeof R=="string"?R:typeof R=="object"&&R!==null?R.url||"":String(R||""):""}catch{return""}},j=u[y.id]||y,M=()=>{var I;const R=Array.isArray(j.variantes)?j.variantes:[];for(const A of R){const k=N((I=A==null?void 0:A.imagenPrincipal)==null?void 0:I[0]);if(k)return k;if(A!=null&&A.imagen)return A.imagen;const U=(Array.isArray(A==null?void 0:A.media)?A.media:[]).find(D=>{const xe=((D==null?void 0:D.type)||"").toLowerCase();return N(D)&&(!xe||xe.includes("image")||xe==="img"||xe==="photo")});if(U)return N(U)}return""},F=(Array.isArray(j.media)?j.media:[]).find(R=>{const I=((R==null?void 0:R.type)||"").toLowerCase();return N(R)&&(!I||I.includes("image")||I==="img"||I==="photo")}),H=N((K=j==null?void 0:j.imagenPrincipal)==null?void 0:K[0])||(j==null?void 0:j.imagen)||(F?N(F):"")||N(Array.isArray(j==null?void 0:j.galeriaImagenes)&&j.galeriaImagenes[0])||N(Array.isArray(j==null?void 0:j.imagenes)&&j.imagenes[0])||M()||"";return o.jsx("img",{src:H,alt:y.nombre,className:"carrito-img"})})(),o.jsxs("div",{className:"carrito-info",children:[o.jsx("h2",{className:"carrito-nombre",children:y.nombre}),o.jsx("p",{className:`carrito-stock ${S===0?"stock-out":Number.isFinite(S)&&S<=2?"stock-low":"stock-ok"}`,children:S===0?"No disponible":Number.isFinite(S)&&S<=2?`Casi agotado (${S})`:Number.isFinite(S)?`Disponible (${S})`:"Disponible"}),o.jsxs("div",{className:"carrito-actions",children:[o.jsx("button",{onClick:N=>{N.stopPropagation(),n(y.id,y.colorSeleccionado??null)},className:"vp-qty-btn",children:"−"}),o.jsx("span",{className:"vp-qty",children:y.cantidad}),o.jsx("button",{onClick:N=>{N.stopPropagation(),(!Number.isFinite(w)||y.cantidad<w)&&e(y,y.colorSeleccionado??null)},className:"vp-qty-btn",disabled:Number.isFinite(w)&&y.cantidad>=w,children:"+"}),o.jsx("button",{onClick:N=>{N.stopPropagation(),c(y)},className:"vp-remove",title:"Quitar",children:o.jsx(cx,{})})]})]}),o.jsxs("div",{className:"carrito-subtotal",children:["DOP"," ",yB((Number(y.precio)||0)*y.cantidad)]})]},b)})}),o.jsx("div",{className:"carrito-footer",children:o.jsx("div",{className:"carrito-pay-wrap",onClick:()=>vB(g,f),children:o.jsx(vx,{className:"carrito-cardnet-btn w-full",total:f*100})})})]}),a&&o.jsx("div",{className:"modal-overlay",children:o.jsxs("div",{className:"modal",children:[o.jsx("h2",{children:"¿Eliminar producto?"}),o.jsxs("p",{children:["¿Seguro que quieres quitar"," ",o.jsx("strong",{children:a.nombre})," del carrito?"]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"btn-cancel",onClick:()=>c(null),children:"Cancelar"}),o.jsx("button",{className:"btn-confirm",onClick:()=>{r(a.id,a.colorSeleccionado??null),c(null)},children:"Sí, eliminar"})]})]})})]})}function O4(){return o.jsx("div",{className:"waves-container"})}function wB(){return o.jsxs("div",{className:"relative min-h-screen flex flex-col items-center px-4 sm:px-8 pb-20 font-sans text-gray-800 dark:text-gray-100 bg-gradient-to-b from-blue-50 via-blue-50 to-blue-100 dark:from-blue-950 dark:via-blue-950 dark:to-blue-900 overflow-hidden",style:{paddingTop:"calc(var(--content-offset, 100px) + 48px)"},children:[o.jsx(O4,{}),o.jsx("h1",{className:"text-2xl sm:text-5xl font-extrabold mb-4 text-center text-gray-800 dark:text-gray-100 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"CONTÁCTANOS"}),o.jsx("h2",{className:"text-lg sm:text-2xl font-semibold mb-10 text-center text-gray-600 dark:text-gray-300 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),o.jsxs("div",{className:"w-full max-w-3xl flex flex-col items-center z-10",style:{position:"relative"},children:[o.jsx("img",{src:"/toy/asoma.png",alt:"Muñeco asomándose",className:"pointer-events-none select-none absolute hidden sm:block",style:{top:"-118px",right:"0px",width:"min(220px, 40vw)",height:"auto",zIndex:50,filter:"drop-shadow(0 10px 20px rgba(2, 6, 23, 0.15))",pointerEvents:"none"}}),o.jsxs("div",{className:"relative w-full flex flex-col items-center gap-4 sm:gap-6 text-sm sm:text-lg px-4 py-4 sm:px-8 sm:py-6",style:{background:"rgba(239, 246, 255, 0.35)",borderRadius:"1rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(59, 130, 246, 0.25)",paddingTop:"1.5rem"},children:[o.jsx(jf,{icon:o.jsx(ih,{className:"text-blue-500 dark:text-blue-400"}),label:"Dirección",text:"Av. Estrella Sadhalá #55, Santiago, República Dominicana"}),o.jsx(jf,{icon:o.jsx(Op,{className:"text-blue-500 dark:text-blue-400"}),label:"Teléfono Tienda",text:"+1 (849)-635-7000"}),o.jsx(jf,{icon:o.jsx(Op,{className:"text-blue-500 dark:text-blue-400"}),label:"Teléfono Internet",text:"+1 (809)-582-1212"}),o.jsx(jf,{icon:o.jsx(T1,{className:"text-blue-500 dark:text-blue-400"}),label:"Correo",text:"playcenter121@gmail.com"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-6 justify-center mt-4 w-full",children:[o.jsx(Hk,{href:"https://wa.me/18496357000",text:"WhatsApp Tienda"}),o.jsx(Hk,{href:"https://wa.me/18095821212",text:"WhatsApp Internet"})]})]})]})]})}const jf=({icon:t,label:e,text:n})=>o.jsxs("div",{className:"flex items-start gap-3 w-full z-10",children:[o.jsx("div",{className:"text-xl sm:text-2xl text-gray-400 dark:text-gray-300",children:t}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-sm sm:text-base text-gray-700 dark:text-gray-300",children:[e,":"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base break-words",children:n})]})]}),Hk=({href:t,text:e})=>o.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 sm:gap-3 px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base font-bold rounded-xl transition-transform z-10 w-full sm:w-auto",style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:n=>{n.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",n.currentTarget.style.transform="scale(1.05)"},onMouseLeave:n=>{n.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",n.currentTarget.style.transform="scale(1)"},children:[o.jsx(Mp,{className:"text-lg sm:text-xl text-blue-500 dark:text-blue-400"}),e]});function _B(){return o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:o.jsx("div",{className:"max-w-2xl w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[o.jsx("div",{className:"mb-6",children:o.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Función No Disponible"}),o.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opción de ",o.jsx("strong",{children:"Vender"})," no está disponible en este momento."]}),o.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva más tarde. Estamos trabajando para habilitarla pronto."}),o.jsx("div",{className:"mt-10",children:o.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function EB(){return o.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{paddingTop:"var(--content-offset, 100px)"},children:o.jsx("div",{className:"max-w-2xl w-full text-center",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12 border-2 border-gray-100",children:[o.jsx("div",{className:"mb-6",children:o.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),o.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Función No Disponible"}),o.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["La opción de ",o.jsx("strong",{children:"Tiendas"})," no está disponible en este momento."]}),o.jsx("p",{className:"text-md text-gray-500",children:"Por favor, vuelva más tarde. Estamos trabajando para habilitarla pronto."}),o.jsx("div",{className:"mt-10",children:o.jsx("a",{href:"/",className:"inline-block px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors",children:"Volver al Inicio"})})]})})})}function kB(){return o.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-gray-800 mb-6",children:"Historial"}),o.jsx("p",{className:"text-gray-600",children:"Aquí verás tu historial de navegación o compras próximamente."})]})}function SB(){return o.jsxs("div",{className:`relative min-h-screen flex flex-col items-center px-4 pb-20 font-sans text-gray-800 dark:text-gray-100
                 bg-gradient-to-b from-blue-50 via-blue-50 to-blue-100 dark:from-blue-950 dark:via-blue-950 dark:to-blue-900 overflow-hidden`,style:{paddingTop:"calc(var(--content-offset, 100px) + 48px)"},children:[o.jsx(O4,{}),o.jsx("h1",{className:"text-5xl font-extrabold mb-4 text-center text-gray-800 dark:text-gray-100 z-10",style:{fontFamily:"'Orbitron', sans-serif"},children:"NOSOTROS"}),o.jsx("h2",{className:"text-2xl font-semibold mb-10 text-center text-gray-600 dark:text-gray-300 z-10",style:{fontFamily:"'Montserrat', sans-serif"},children:"PlayCenter Universal"}),o.jsxs("div",{className:"w-full max-w-3xl flex flex-col items-center z-10",style:{position:"relative"},children:[o.jsx("img",{src:"/toy/asoma.png",alt:"Muñeco asomándose",className:"pointer-events-none select-none absolute hidden sm:block",style:{top:"-118px",right:"0px",width:"min(220px, 40vw)",height:"auto",zIndex:50,filter:"drop-shadow(0 10px 20px rgba(2, 6, 23, 0.15))",pointerEvents:"none"}}),o.jsxs("div",{className:"relative w-full flex flex-col items-center gap-6 text-lg",style:{background:"rgba(239, 246, 255, 0.35)",borderRadius:"1rem",padding:"1.8rem",paddingTop:"2.6rem",backdropFilter:"blur(30px)",WebkitBackdropFilter:"blur(30px)",boxShadow:"0 0 40px rgba(255, 255, 255, 0.2)",border:"1px solid rgba(59, 130, 246, 0.25)",overflow:"visible"},children:[o.jsx(ty,{icon:o.jsx(lU,{className:"text-blue-500 dark:text-blue-400"}),label:"Quiénes somos",text:"Somos una empresa dominicana ubicada en Santiago, especializada en brindar lo último en tecnología, innovación y productos para el estilo de vida moderno."}),o.jsx(ty,{icon:o.jsx(pU,{className:"text-blue-500 dark:text-blue-400"}),label:"Nuestra misión",text:"Superar las expectativas de nuestros clientes ofreciendo artículos de calidad como consolas, videojuegos, tablets, móviles, accesorios y más, con un servicio humano, eficiente y profesional."}),o.jsx(ty,{icon:o.jsx(ih,{className:"text-blue-500 dark:text-blue-400"}),label:"Nuestro compromiso",text:"PlayCenter Universal no solo vende productos, crea experiencias memorables con cada compra. ¡Gracias por confiar en nosotros!"}),o.jsx("div",{className:"flex justify-center mt-6",children:o.jsxs(St,{to:"/contacto",className:`flex items-center gap-3 px-6 py-3 text-base font-bold
                         rounded-xl transition-transform z-10 animate-fade-in`,style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 0 20px rgba(255, 255, 255, 0.2)",color:"#333",transition:"all 0.3s ease"},onMouseEnter:t=>{t.currentTarget.style.boxShadow="0 0 30px rgba(255, 255, 255, 0.4)",t.currentTarget.style.transform="scale(1.05)"},onMouseLeave:t=>{t.currentTarget.style.boxShadow="0 0 20px rgba(255, 255, 255, 0.2)",t.currentTarget.style.transform="scale(1)"},children:[o.jsx(ox,{className:"text-xl text-blue-500 dark:text-blue-400"}),"Contáctanos"]})})]})]})]})}const ty=({icon:t,label:e,text:n})=>o.jsxs("div",{className:"flex items-start gap-4 w-full z-10",children:[o.jsx("div",{className:"text-2xl text-gray-400 dark:text-gray-300",children:t}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[e,":"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 break-words",children:n})]})]});function TB(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function NB(t){const n=(Number(t)||0).toFixed(2),[r,i]=n.split("."),a=Number(r);return{wholeFormatted:TB(a),fraction:i}}function L4({producto:t}){const{carrito:e,agregarAlCarrito:n,eliminarUnidadDelCarrito:r,quitarDelCarrito:i}=Ud(),{usuario:a,usuarioInfo:c}=Br(),{abrirModal:u}=Gc(),h=ai(),[f,g]=T.useState(!1),[y,x]=T.useState(!1);T.useEffect(()=>{x(!1)},[t==null?void 0:t.id,t==null?void 0:t.imagen,t==null?void 0:t.imagenPrincipal]);const S=!!(t!=null&&t.oferta&&(t!=null&&t.precioOferta))?Number(t==null?void 0:t.precioOferta)||Number(t==null?void 0:t.precio)||0:Number(t==null?void 0:t.precio)||0;NB(S);const N=(t==null?void 0:t.activo)!==!1&&(t.cantidad===void 0||t.cantidad>0),j=e.find(U=>U.id===t.id),M=(j==null?void 0:j.cantidad)||0,O=t.cantidad!==void 0?Number(t.cantidad)||0:1/0,F=U=>{if(U.stopPropagation(),!a){g(!0);return}if(!j){const D={...t,cantidad:1,cantidadProducto:Number.isFinite(O)?O:void 0};n(D)}},H=U=>{if(U.stopPropagation(),!a){g(!0);return}const D=Number.isFinite(O)?O:1/0;M<D&&n(t)},K=U=>{if(U.stopPropagation(),!a){g(!0);return}r(t.id)},R=U=>{if(U.stopPropagation(),!a){g(!0);return}i(t.id)},I=()=>{const U=t.slug||t.id;h(`/producto/${U}`)},A=U=>{try{return U?typeof U=="string"?U:typeof U=="object"&&U!==null?U.url||"":String(U||""):""}catch{return""}},V=(()=>{var Ke;const U=A((Ke=t==null?void 0:t.imagenPrincipal)==null?void 0:Ke[0]);if(U)return U;const D=A(t==null?void 0:t.imagen);if(D)return D;const xe=Array.isArray(t==null?void 0:t.imagenes)?t.imagenes:[];return xe.length>0?A(xe[0]):null})();return o.jsxs(o.Fragment,{children:[o.jsxs("article",{className:"hidden lg:flex flex-col bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-xl hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200",style:{width:"250px",minWidth:"250px",maxWidth:"250px",flexShrink:0},children:[o.jsx("div",{onClick:I,className:"w-full h-[250px] flex items-center justify-center overflow-hidden mb-3 cursor-pointer",style:{backgroundColor:"transparent"},children:V?o.jsx("img",{src:V,alt:t.nombre,className:"w-full h-full object-contain",loading:"lazy"}):o.jsx("div",{className:"text-gray-400 text-sm",children:"Sin imagen"})}),o.jsx("h3",{onClick:I,className:"text-gray-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 mb-2 cursor-pointer",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.4em",height:"2.8em",fontSize:"0.95rem"},children:t.nombre}),o.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"RD$"}),o.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:Number(t.precio).toFixed(2)})]}),j?o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("button",{onClick:K,className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"−"}),o.jsx("span",{className:"font-semibold",children:M}),o.jsx("button",{onClick:H,className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"+"}),o.jsx("button",{onClick:R,className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:o.jsx(cx,{})})]}):o.jsxs("button",{onClick:F,className:"w-full py-2 rounded text-sm font-medium transition-colors flex items-center justify-center gap-2",style:{backgroundColor:"#0066C0",color:"#FFFFFF",border:"1px solid #0066C0"},onMouseEnter:U=>U.currentTarget.style.backgroundColor="#004F9A",onMouseLeave:U=>U.currentTarget.style.backgroundColor="#0066C0",disabled:!N,children:[o.jsx(lx,{}),"Agregar al Carrito"]})]}),o.jsxs("article",{className:"flex lg:hidden flex-row bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:shadow-xl hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 w-full",children:[o.jsx("div",{onClick:I,className:"w-32 h-32 flex-shrink-0 flex items-center justify-center overflow-hidden mr-3 cursor-pointer",style:{backgroundColor:"transparent"},children:V?o.jsx("img",{src:V,alt:t.nombre,className:"w-full h-full object-contain",loading:"lazy"}):o.jsx("div",{className:"text-gray-400 text-xs",children:"Sin imagen"})}),o.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{onClick:I,className:"text-gray-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 mb-2 cursor-pointer text-sm font-medium",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.3em"},children:t.nombre}),o.jsxs("div",{className:"flex items-baseline gap-1 mb-2",children:[o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"RD$"}),o.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:Number(t.precio).toFixed(2)})]})]}),j?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:K,className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded text-xs",children:"−"}),o.jsx("span",{className:"text-sm font-semibold",children:M}),o.jsx("button",{onClick:H,className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded text-xs",children:"+"}),o.jsx("button",{onClick:R,className:"px-2 py-1 bg-red-500 text-white rounded text-xs",children:o.jsx(cx,{size:10})})]}):o.jsxs("button",{onClick:F,className:"w-full py-1.5 rounded text-xs font-medium transition-colors flex items-center justify-center gap-1",style:{backgroundColor:"#0066C0",color:"#FFFFFF",border:"1px solid #0066C0"},onMouseEnter:U=>U.currentTarget.style.backgroundColor="#004F9A",onMouseLeave:U=>U.currentTarget.style.backgroundColor="#0066C0",disabled:!N,children:[o.jsx(lx,{size:12}),"Agregar al Carrito"]})]})]}),o.jsx(Im,{isOpen:f,onClose:()=>g(!1),onIniciarSesion:()=>{g(!1),u()}})]})}function V4(){return o.jsxs("div",{className:"wave-background",children:[o.jsx("div",{className:"wave wave1"}),o.jsx("div",{className:"wave wave2"}),o.jsx("div",{className:"wave wave3"})]})}const Wk={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.2)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 4px rgba(60, 80, 120, 0.4)"}},CB={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.4)","0 0 10px rgba(80, 100, 140, 0.6)","0 0 4px rgba(80, 100, 140, 0.4)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function Hp({categoriaActiva:t,mostrarEnMovil:e,setMostrarEnMovil:n}){const r=ai(),{categories:i,loading:a,error:c}=Hv(),u=g=>{r(`/Productos/${g.ruta}`),n&&n(!1)},h=g=>g===t,f=[{nombre:"Todos",ruta:"",id:"todos"},...i];return a?o.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})}):c?o.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",children:o.jsx("div",{className:"text-red-500 text-sm p-4",children:"Error cargando categorías"})}):o.jsxs(o.Fragment,{children:[o.jsxs("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",style:{height:"100vh",paddingTop:0,backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Categorías",children:[o.jsx("div",{className:"absolute inset-0 z-0",style:{overflow:"visible",minHeight:"2000px",backgroundColor:"transparent",pointerEvents:"none"},children:o.jsx(V4,{})}),o.jsx("div",{className:"categorias-sidebar",children:o.jsx("div",{className:"categorias-scroll",children:o.jsxs("div",{className:"relative z-10 flex-1 pr-2",children:[o.jsx(oe.h2,{className:"text-lg font-semibold mb-4 text-center tracking-wide text-blue-700 dark:text-blue-400 select-none",variants:CB,animate:"animate",children:"Categorías"}),o.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>o.jsx(oe.li,{whileHover:{scale:1.02},children:o.jsx(oe.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:Wk,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${h(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))}),o.jsx("div",{className:"scroll-indicator",children:o.jsxs("div",{className:"scroll-dots",children:[o.jsx("div",{className:"scroll-dot"}),o.jsx("div",{className:"scroll-dot"}),o.jsx("div",{className:"scroll-dot"})]})})]})})})]}),o.jsx(dn,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(oe.div,{className:"fixed inset-0 bg-gray-200 dark:bg-gray-900 bg-opacity-40 backdrop-blur-sm z-[9998]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1)}),o.jsxs(oe.nav,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",stiffness:250,damping:30},className:"fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-300 dark:border-gray-700 z-[9999] flex flex-col shadow-md transition-colors duration-300",children:[o.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-400 tracking-wide select-none",children:"Categorías"}),o.jsx("button",{onClick:()=>n(!1),className:"text-red-500 font-bold text-2xl hover:text-red-700","aria-label":"Cerrar categorías",children:"✕"})]}),o.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-2 scrollbar-light",children:o.jsx("ul",{className:"space-y-2 text-sm",children:f.map((g,y)=>o.jsx(oe.li,{whileHover:{scale:1.02},children:o.jsx(oe.button,{onClick:()=>u(g),initial:"initial",whileHover:"hover",whileTap:"tap",variants:Wk,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-colors duration-200 ${h(g.nombre)?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 font-semibold":"bg-transparent text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900"}`,style:{border:"none",boxShadow:"none"},children:g.nombre})},g.id||y))})})]})]})})]})}function F4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=F4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fs(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=F4(t))&&(r&&(r+=" "),r+=e);return r}function U4(t,e,n=void 0){const r={};for(const i in t){const a=t[i];let c="",u=!0;for(let h=0;h<a.length;h+=1){const f=a[h];f&&(c+=(u===!0?"":" ")+e(f),u=!1,n&&n[f]&&(c+=" "+n[f]))}r[i]=c}return r}function vl(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function wc(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function A1(t,e=0,n=1){return wc(t,e,n)}function AB(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function wo(t){if(t.type)return t;if(t.charAt(0)==="#")return wo(AB(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(vl(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(vl(10,i))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:n,values:r,colorSpace:i}}const jB=t=>{const e=wo(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Qu=(t,e)=>{try{return jB(t)}catch{return t}};function Pm(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,a)=>a<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function $4(t){t=wo(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,a=r*Math.min(i,1-i),c=(f,g=(f+n/30)%12)=>i-a*Math.max(Math.min(g-3,9-g,1),-1);let u="rgb";const h=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return t.type==="hsla"&&(u+="a",h.push(e[3])),Pm({type:u,values:h})}function wx(t){t=wo(t);let e=t.type==="hsl"||t.type==="hsla"?wo($4(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function IB(t,e){const n=wx(t),r=wx(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function _x(t,e){return t=wo(t),e=A1(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Pm(t)}function If(t,e,n){try{return _x(t,e)}catch{return t}}function Rd(t,e){if(t=wo(t),e=A1(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Pm(t)}function tn(t,e,n){try{return Rd(t,e)}catch{return t}}function Dd(t,e){if(t=wo(t),e=A1(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Pm(t)}function nn(t,e,n){try{return Dd(t,e)}catch{return t}}function PB(t,e=.15){return wx(t)>.5?Rd(t,e):Dd(t,e)}function Pf(t,e,n){try{return PB(t,e)}catch{return t}}const RB=T.createContext(),DB=()=>T.useContext(RB)??!1;function z4(...t){const e=T.useRef(void 0),n=T.useCallback(r=>{const i=t.map(a=>{if(a==null)return null;if(typeof a=="function"){const c=a,u=c(r);return typeof u=="function"?u:()=>{c(null)}}return a.current=r,()=>{a.current=null}});return()=>{i.forEach(a=>a==null?void 0:a())}},t);return T.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function MB(t){return typeof t=="string"}function OB(t,e,n){return t===void 0||MB(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function Zf(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function qk(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function LB(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:a}=t;if(!e){const w=Fs(n==null?void 0:n.className,a,i==null?void 0:i.className,r==null?void 0:r.className),S={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},b={...n,...i,...r};return w.length>0&&(b.className=w),Object.keys(S).length>0&&(b.style=S),{props:b,internalRef:void 0}}const c=Zf({...i,...r}),u=qk(r),h=qk(i),f=e(c),g=Fs(f==null?void 0:f.className,n==null?void 0:n.className,a,i==null?void 0:i.className,r==null?void 0:r.className),y={...f==null?void 0:f.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},x={...f,...n,...h,...u};return g.length>0&&(x.className=g),Object.keys(y).length>0&&(x.style=y),{props:x,internalRef:f.ref}}function VB(t,e,n){return typeof t=="function"?t(e,n):t}function Xa(t){var y;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...a}=t,c=i?{}:VB(n,r),{props:u,internalRef:h}=LB({...a,externalSlotProps:c}),f=z4(h,c==null?void 0:c.ref,(y=t.additionalProps)==null?void 0:y.ref);return OB(e,{...u,ref:f},r)}function ep(t){return t&&t.ownerDocument||document}function FB(t){const{controlled:e,default:n}=t,{current:r}=T.useRef(e!==void 0),[i,a]=T.useState(n),c=r?e:i,u=T.useCallback(h=>{r||a(h)},[]);return[c,u]}const B4=typeof window<"u"?T.useLayoutEffect:T.useEffect;function ny(t){const e=T.useRef(t);return B4(()=>{e.current=t}),T.useRef((...n)=>(0,e.current)(...n)).current}function Gk(t){try{return t.matches(":focus-visible")}catch{}return!1}const UB={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function $B(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const zB=2;function dc(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function H4(t,e){return t-e}function Kk(t,e){const{index:n}=t.reduce((r,i,a)=>{const c=Math.abs(e-i);return r===null||c<r.distance||c===r.distance?{distance:c,index:a}:r},null)??{};return n}function Rf(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Wp(t,e,n){return(t-e)*100/(n-e)}function BB(t,e,n){return(n-e)*t+e}function HB(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function WB(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(HB(e)))}function Xk({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(H4)}function Df({sliderRef:t,activeIndex:e,setActive:n}){var i,a,c;const r=ep(t.current);(!((i=t.current)!=null&&i.contains(r.activeElement))||Number((a=r==null?void 0:r.activeElement)==null?void 0:a.getAttribute("data-index"))!==e)&&((c=t.current)==null||c.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function Mf(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?$B(t,e):!1}const qB={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},GB=t=>t;let Of;function Qk(){return Of===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Of=CSS.supports("touch-action","none"):Of=!0),Of}function KB(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:a=!1,marks:c=!1,max:u=100,min:h=0,name:f,onChange:g,onChangeCommitted:y,orientation:x="horizontal",rootRef:w,scale:S=GB,step:b=1,shiftStep:N=10,tabIndex:j,value:M}=t,O=T.useRef(void 0),[F,H]=T.useState(-1),[K,R]=T.useState(-1),[I,A]=T.useState(!1),k=T.useRef(0),V=T.useRef(null),[U,D]=FB({controlled:M,default:n??h}),xe=g&&((ne,ge,Ne)=>{const te=ne.nativeEvent||ne,Ie=new te.constructor(te.type,te);Object.defineProperty(Ie,"target",{writable:!0,value:{value:ge,name:f}}),V.current=ge,g(Ie,ge,Ne)}),Ke=Array.isArray(U);let st=Ke?U.slice().sort(H4):[U];st=st.map(ne=>ne==null?h:wc(ne,h,u));const qe=c===!0&&b!==null?[...Array(Math.floor((u-h)/b)+1)].map((ne,ge)=>({value:h+b*ge})):c||[],ce=qe.map(ne=>ne.value),[ue,de]=T.useState(-1),z=T.useRef(null),Y=z4(w,z),be=ne=>ge=>{var te;const Ne=Number(ge.currentTarget.getAttribute("data-index"));Gk(ge.target)&&de(Ne),R(Ne),(te=ne==null?void 0:ne.onFocus)==null||te.call(ne,ge)},Me=ne=>ge=>{var Ne;Gk(ge.target)||de(-1),R(-1),(Ne=ne==null?void 0:ne.onBlur)==null||Ne.call(ne,ge)},Ve=(ne,ge)=>{const Ne=Number(ne.currentTarget.getAttribute("data-index")),te=st[Ne],Ie=ce.indexOf(te);let B=ge;if(qe&&b==null){const Q=ce[ce.length-1];B>=Q?B=Q:B<=ce[0]?B=ce[0]:B=B<te?ce[Ie-1]:ce[Ie+1]}if(B=wc(B,h,u),Ke){i&&(B=wc(B,st[Ne-1]||-1/0,st[Ne+1]||1/0));const Q=B;B=Xk({values:st,newValue:B,index:Ne});let le=Ne;i||(le=B.indexOf(Q)),Df({sliderRef:z,activeIndex:le})}D(B),de(Ne),xe&&!Mf(B,U)&&xe(ne,B,Ne),y&&y(ne,V.current??B)},it=ne=>ge=>{var Ne;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(ge.key)){ge.preventDefault();const te=Number(ge.currentTarget.getAttribute("data-index")),Ie=st[te];let B=null;if(b!=null){const Q=ge.shiftKey?N:b;switch(ge.key){case"ArrowUp":B=dc(Ie,Q,1,h,u);break;case"ArrowRight":B=dc(Ie,Q,a?-1:1,h,u);break;case"ArrowDown":B=dc(Ie,Q,-1,h,u);break;case"ArrowLeft":B=dc(Ie,Q,a?1:-1,h,u);break;case"PageUp":B=dc(Ie,N,1,h,u);break;case"PageDown":B=dc(Ie,N,-1,h,u);break;case"Home":B=h;break;case"End":B=u;break}}else if(qe){const Q=ce[ce.length-1],le=ce.indexOf(Ie),J=[a?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],se=[a?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];J.includes(ge.key)?le===0?B=ce[0]:B=ce[le-1]:se.includes(ge.key)&&(le===ce.length-1?B=Q:B=ce[le+1])}B!=null&&Ve(ge,B)}(Ne=ne==null?void 0:ne.onKeyDown)==null||Ne.call(ne,ge)};B4(()=>{var ne;r&&z.current.contains(document.activeElement)&&((ne=document.activeElement)==null||ne.blur())},[r]),r&&F!==-1&&H(-1),r&&ue!==-1&&de(-1);const ct=ne=>ge=>{var Ne;(Ne=ne.onChange)==null||Ne.call(ne,ge),Ve(ge,ge.target.valueAsNumber)},Be=T.useRef(void 0);let et=x;a&&x==="horizontal"&&(et+="-reverse");const ut=({finger:ne,move:ge=!1})=>{const{current:Ne}=z,{width:te,height:Ie,bottom:B,left:Q}=Ne.getBoundingClientRect();let le;et.startsWith("vertical")?le=(B-ne.y)/Ie:le=(ne.x-Q)/te,et.includes("-reverse")&&(le=1-le);let J;if(J=BB(le,h,u),b)J=WB(J,b,h);else{const Ue=Kk(ce,J);J=ce[Ue]}J=wc(J,h,u);let se=0;if(Ke){ge?se=Be.current:se=Kk(st,J),i&&(J=wc(J,st[se-1]||-1/0,st[se+1]||1/0));const Ue=J;J=Xk({values:st,newValue:J,index:se}),i&&ge||(se=J.indexOf(Ue),Be.current=se)}return{newValue:J,activeIndex:se}},_t=ny(ne=>{const ge=Rf(ne,O);if(!ge)return;if(k.current+=1,ne.type==="mousemove"&&ne.buttons===0){mt(ne);return}const{newValue:Ne,activeIndex:te}=ut({finger:ge,move:!0});Df({sliderRef:z,activeIndex:te,setActive:H}),D(Ne),!I&&k.current>zB&&A(!0),xe&&!Mf(Ne,U)&&xe(ne,Ne,te)}),mt=ny(ne=>{const ge=Rf(ne,O);if(A(!1),!ge)return;const{newValue:Ne}=ut({finger:ge,move:!0});H(-1),ne.type==="touchend"&&R(-1),y&&y(ne,V.current??Ne),O.current=void 0,Ot()}),kt=ny(ne=>{if(r)return;Qk()||ne.preventDefault();const ge=ne.changedTouches[0];ge!=null&&(O.current=ge.identifier);const Ne=Rf(ne,O);if(Ne!==!1){const{newValue:Ie,activeIndex:B}=ut({finger:Ne});Df({sliderRef:z,activeIndex:B,setActive:H}),D(Ie),xe&&!Mf(Ie,U)&&xe(ne,Ie,B)}k.current=0;const te=ep(z.current);te.addEventListener("touchmove",_t,{passive:!0}),te.addEventListener("touchend",mt,{passive:!0})}),Ot=T.useCallback(()=>{const ne=ep(z.current);ne.removeEventListener("mousemove",_t),ne.removeEventListener("mouseup",mt),ne.removeEventListener("touchmove",_t),ne.removeEventListener("touchend",mt)},[mt,_t]);T.useEffect(()=>{const{current:ne}=z;return ne.addEventListener("touchstart",kt,{passive:Qk()}),()=>{ne.removeEventListener("touchstart",kt),Ot()}},[Ot,kt]),T.useEffect(()=>{r&&Ot()},[r,Ot]);const ie=ne=>ge=>{var Ie;if((Ie=ne.onMouseDown)==null||Ie.call(ne,ge),r||ge.defaultPrevented||ge.button!==0)return;ge.preventDefault();const Ne=Rf(ge,O);if(Ne!==!1){const{newValue:B,activeIndex:Q}=ut({finger:Ne});Df({sliderRef:z,activeIndex:Q,setActive:H}),D(B),xe&&!Mf(B,U)&&xe(ge,B,Q)}k.current=0;const te=ep(z.current);te.addEventListener("mousemove",_t,{passive:!0}),te.addEventListener("mouseup",mt)},Fe=Wp(Ke?st[0]:h,h,u),je=Wp(st[st.length-1],h,u)-Fe,fe=(ne={})=>{const ge=Zf(ne),Ne={onMouseDown:ie(ge||{})},te={...ge,...Ne};return{...ne,ref:Y,...te}},Ze=ne=>ge=>{var te;(te=ne.onMouseOver)==null||te.call(ne,ge);const Ne=Number(ge.currentTarget.getAttribute("data-index"));R(Ne)},Xe=ne=>ge=>{var Ne;(Ne=ne.onMouseLeave)==null||Ne.call(ne,ge),R(-1)},jt=(ne={})=>{const ge=Zf(ne),Ne={onMouseOver:Ze(ge||{}),onMouseLeave:Xe(ge||{})};return{...ne,...ge,...Ne}},Nt=ne=>({pointerEvents:F!==-1&&F!==ne?"none":void 0});let At;return x==="vertical"&&(At=a?"vertical-rl":"vertical-lr"),{active:F,axis:et,axisProps:qB,dragging:I,focusedThumbIndex:ue,getHiddenInputProps:(ne={})=>{const ge=Zf(ne),Ne={onChange:ct(ge||{}),onFocus:be(ge||{}),onBlur:Me(ge||{}),onKeyDown:it(ge||{})},te={...ge,...Ne};return{tabIndex:j,"aria-labelledby":e,"aria-orientation":x,"aria-valuemax":S(u),"aria-valuemin":S(h),name:f,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...ne,...te,style:{...UB,direction:a?"rtl":"ltr",width:"100%",height:"100%",writingMode:At}}},getRootProps:fe,getThumbProps:jt,marks:qe,open:K,range:Ke,rootRef:Y,trackLeap:je,trackOffset:Fe,values:st,getThumbStyle:Nt}}function tp(t){return typeof t=="string"}function yi(t){if(typeof t!="string")throw new Error(vl(7));return t.charAt(0).toUpperCase()+t.slice(1)}var ry={exports:{}},Zt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yk;function XB(){if(Yk)return Zt;Yk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),w=Symbol.for("react.client.reference");function S(b){if(typeof b=="object"&&b!==null){var N=b.$$typeof;switch(N){case t:switch(b=b.type,b){case n:case i:case r:case h:case f:case x:return b;default:switch(b=b&&b.$$typeof,b){case c:case u:case y:case g:return b;case a:return b;default:return N}}case e:return N}}}return Zt.ContextConsumer=a,Zt.ContextProvider=c,Zt.Element=t,Zt.ForwardRef=u,Zt.Fragment=n,Zt.Lazy=y,Zt.Memo=g,Zt.Portal=e,Zt.Profiler=i,Zt.StrictMode=r,Zt.Suspense=h,Zt.SuspenseList=f,Zt.isContextConsumer=function(b){return S(b)===a},Zt.isContextProvider=function(b){return S(b)===c},Zt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},Zt.isForwardRef=function(b){return S(b)===u},Zt.isFragment=function(b){return S(b)===n},Zt.isLazy=function(b){return S(b)===y},Zt.isMemo=function(b){return S(b)===g},Zt.isPortal=function(b){return S(b)===e},Zt.isProfiler=function(b){return S(b)===i},Zt.isStrictMode=function(b){return S(b)===r},Zt.isSuspense=function(b){return S(b)===h},Zt.isSuspenseList=function(b){return S(b)===f},Zt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===i||b===r||b===h||b===f||typeof b=="object"&&b!==null&&(b.$$typeof===y||b.$$typeof===g||b.$$typeof===c||b.$$typeof===a||b.$$typeof===u||b.$$typeof===w||b.getModuleId!==void 0)},Zt.typeOf=S,Zt}var Jk;function QB(){return Jk||(Jk=1,ry.exports=XB()),ry.exports}var W4=QB();function Ns(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function q4(t){if(T.isValidElement(t)||W4.isValidElementType(t)||!Ns(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=q4(t[n])}),e}function xi(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Ns(t)&&Ns(e)&&Object.keys(e).forEach(i=>{T.isValidElement(e[i])||W4.isValidElementType(e[i])?r[i]=e[i]:Ns(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Ns(t[i])?r[i]=xi(t[i],e[i],n):n.clone?r[i]=Ns(e[i])?q4(e[i]):e[i]:r[i]=e[i]}),r}function hd(t,e){return e?xi(t,e,{clone:!1}):t}function Zk(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var c,u;const a=/min-width:\s*([0-9.]+)/;return+(((c=r.match(a))==null?void 0:c[1])||0)-+(((u=i.match(a))==null?void 0:u[1])||0)});return n.length?n.reduce((r,i)=>{const a=e[i];return delete r[i],r[i]=a,r},{...e}):e}function YB(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function JB(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,a=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(a)}function ZB(t){const e=(a,c)=>a.replace("@media",c?`@container ${c}`:"@container");function n(a,c){a.up=(...u)=>e(t.breakpoints.up(...u),c),a.down=(...u)=>e(t.breakpoints.down(...u),c),a.between=(...u)=>e(t.breakpoints.between(...u),c),a.only=(...u)=>e(t.breakpoints.only(...u),c),a.not=(...u)=>{const h=e(t.breakpoints.not(...u),c);return h.includes("not all and")?h.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):h}}const r={},i=a=>(n(r,a),r);return n(i),{...t,containerQueries:i}}const Rm={xs:0,sm:600,md:900,lg:1200,xl:1536},eS={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Rm[t]}px)`},eH={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:Rm[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function ka(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const a=r.breakpoints||eS;return e.reduce((c,u,h)=>(c[a.up(a.keys[h])]=n(e[h]),c),{})}if(typeof e=="object"){const a=r.breakpoints||eS;return Object.keys(e).reduce((c,u)=>{if(YB(a.keys,u)){const h=JB(r.containerQueries?r:eH,u);h&&(c[h]=n(e[u],u))}else if(Object.keys(a.values||Rm).includes(u)){const h=a.up(u);c[h]=n(e[u],u)}else{const h=u;c[h]=e[h]}return c},{})}return n(e)}function tH(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const a=t.up(i);return r[a]={},r},{}))||{}}function tS(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Dm(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function qp(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Dm(t,n)||r,e&&(i=e(i,r,t)),i}function Vn(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,a=c=>{if(c[e]==null)return null;const u=c[e],h=c.theme,f=Dm(h,r)||{};return ka(c,u,y=>{let x=qp(f,i,y);return y===x&&typeof y=="string"&&(x=qp(f,i,`${e}${y==="default"?"":yi(y)}`,y)),n===!1?x:{[n]:x}})};return a.propTypes={},a.filterProps=[e],a}function nH(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const rH={m:"margin",p:"padding"},iH={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},nS={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},sH=nH(t=>{if(t.length>2)if(nS[t])t=nS[t];else return[t];const[e,n]=t.split(""),r=rH[e],i=iH[n]||"";return Array.isArray(i)?i.map(a=>r+a):[r+i]}),j1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],I1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...j1,...I1];function sh(t,e,n,r){const i=Dm(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?a=>typeof a=="string"?a:typeof i=="string"?i.startsWith("var(")&&a===0?0:i.startsWith("var(")&&a===1?i:`calc(${a} * ${i})`:i*a:Array.isArray(i)?a=>{if(typeof a=="string")return a;const c=Math.abs(a),u=i[c];return a>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof i=="function"?i:()=>{}}function P1(t){return sh(t,"spacing",8)}function ah(t,e){return typeof e=="string"||e==null?e:t(e)}function aH(t,e){return n=>t.reduce((r,i)=>(r[i]=ah(e,n),r),{})}function oH(t,e,n,r){if(!e.includes(n))return null;const i=sH(n),a=aH(i,r),c=t[n];return ka(t,c,a)}function G4(t,e){const n=P1(t.theme);return Object.keys(t).map(r=>oH(t,e,r,n)).reduce(hd,{})}function Cn(t){return G4(t,j1)}Cn.propTypes={};Cn.filterProps=j1;function An(t){return G4(t,I1)}An.propTypes={};An.filterProps=I1;function Mm(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(a=>{r[a]=i}),r),{}),n=r=>Object.keys(r).reduce((i,a)=>e[a]?hd(i,e[a](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Ri(t){return typeof t!="number"?t:`${t}px solid`}function Vi(t,e){return Vn({prop:t,themeKey:"borders",transform:e})}const lH=Vi("border",Ri),cH=Vi("borderTop",Ri),uH=Vi("borderRight",Ri),dH=Vi("borderBottom",Ri),hH=Vi("borderLeft",Ri),fH=Vi("borderColor"),pH=Vi("borderTopColor"),mH=Vi("borderRightColor"),gH=Vi("borderBottomColor"),yH=Vi("borderLeftColor"),xH=Vi("outline",Ri),vH=Vi("outlineColor"),Om=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=sh(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:ah(e,r)});return ka(t,t.borderRadius,n)}return null};Om.propTypes={};Om.filterProps=["borderRadius"];Mm(lH,cH,uH,dH,hH,fH,pH,mH,gH,yH,Om,xH,vH);const Lm=t=>{if(t.gap!==void 0&&t.gap!==null){const e=sh(t.theme,"spacing",8),n=r=>({gap:ah(e,r)});return ka(t,t.gap,n)}return null};Lm.propTypes={};Lm.filterProps=["gap"];const Vm=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=sh(t.theme,"spacing",8),n=r=>({columnGap:ah(e,r)});return ka(t,t.columnGap,n)}return null};Vm.propTypes={};Vm.filterProps=["columnGap"];const Fm=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=sh(t.theme,"spacing",8),n=r=>({rowGap:ah(e,r)});return ka(t,t.rowGap,n)}return null};Fm.propTypes={};Fm.filterProps=["rowGap"];const bH=Vn({prop:"gridColumn"}),wH=Vn({prop:"gridRow"}),_H=Vn({prop:"gridAutoFlow"}),EH=Vn({prop:"gridAutoColumns"}),kH=Vn({prop:"gridAutoRows"}),SH=Vn({prop:"gridTemplateColumns"}),TH=Vn({prop:"gridTemplateRows"}),NH=Vn({prop:"gridTemplateAreas"}),CH=Vn({prop:"gridArea"});Mm(Lm,Vm,Fm,bH,wH,_H,EH,kH,SH,TH,NH,CH);function Rc(t,e){return e==="grey"?e:t}const AH=Vn({prop:"color",themeKey:"palette",transform:Rc}),jH=Vn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Rc}),IH=Vn({prop:"backgroundColor",themeKey:"palette",transform:Rc});Mm(AH,jH,IH);function pi(t){return t<=1&&t!==0?`${t*100}%`:t}const PH=Vn({prop:"width",transform:pi}),R1=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,a,c,u,h;const r=((c=(a=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:a.values)==null?void 0:c[n])||Rm[n];return r?((h=(u=t.theme)==null?void 0:u.breakpoints)==null?void 0:h.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:pi(n)}};return ka(t,t.maxWidth,e)}return null};R1.filterProps=["maxWidth"];const RH=Vn({prop:"minWidth",transform:pi}),DH=Vn({prop:"height",transform:pi}),MH=Vn({prop:"maxHeight",transform:pi}),OH=Vn({prop:"minHeight",transform:pi});Vn({prop:"size",cssProperty:"width",transform:pi});Vn({prop:"size",cssProperty:"height",transform:pi});const LH=Vn({prop:"boxSizing"});Mm(PH,R1,RH,DH,MH,OH,LH);const oh={border:{themeKey:"borders",transform:Ri},borderTop:{themeKey:"borders",transform:Ri},borderRight:{themeKey:"borders",transform:Ri},borderBottom:{themeKey:"borders",transform:Ri},borderLeft:{themeKey:"borders",transform:Ri},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ri},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Om},color:{themeKey:"palette",transform:Rc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Rc},backgroundColor:{themeKey:"palette",transform:Rc},p:{style:An},pt:{style:An},pr:{style:An},pb:{style:An},pl:{style:An},px:{style:An},py:{style:An},padding:{style:An},paddingTop:{style:An},paddingRight:{style:An},paddingBottom:{style:An},paddingLeft:{style:An},paddingX:{style:An},paddingY:{style:An},paddingInline:{style:An},paddingInlineStart:{style:An},paddingInlineEnd:{style:An},paddingBlock:{style:An},paddingBlockStart:{style:An},paddingBlockEnd:{style:An},m:{style:Cn},mt:{style:Cn},mr:{style:Cn},mb:{style:Cn},ml:{style:Cn},mx:{style:Cn},my:{style:Cn},margin:{style:Cn},marginTop:{style:Cn},marginRight:{style:Cn},marginBottom:{style:Cn},marginLeft:{style:Cn},marginX:{style:Cn},marginY:{style:Cn},marginInline:{style:Cn},marginInlineStart:{style:Cn},marginInlineEnd:{style:Cn},marginBlock:{style:Cn},marginBlockStart:{style:Cn},marginBlockEnd:{style:Cn},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Lm},rowGap:{style:Fm},columnGap:{style:Vm},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:pi},maxWidth:{style:R1},minWidth:{transform:pi},height:{transform:pi},maxHeight:{transform:pi},minHeight:{transform:pi},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function VH(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function FH(t,e){return typeof t=="function"?t(e):t}function UH(){function t(n,r,i,a){const c={[n]:r,theme:i},u=a[n];if(!u)return{[n]:r};const{cssProperty:h=n,themeKey:f,transform:g,style:y}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const x=Dm(i,f)||{};return y?y(c):ka(c,r,S=>{let b=qp(x,g,S);return S===b&&typeof S=="string"&&(b=qp(x,g,`${n}${S==="default"?"":yi(S)}`,S)),h===!1?b:{[h]:b}})}function e(n){const{sx:r,theme:i={},nested:a}=n||{};if(!r)return null;const c=i.unstable_sxConfig??oh;function u(h){let f=h;if(typeof h=="function")f=h(i);else if(typeof h!="object")return h;if(!f)return null;const g=tH(i.breakpoints),y=Object.keys(g);let x=g;return Object.keys(f).forEach(w=>{const S=FH(f[w],i);if(S!=null)if(typeof S=="object")if(c[w])x=hd(x,t(w,S,i,c));else{const b=ka({theme:i},S,N=>({[w]:N}));VH(b,S)?x[w]=e({sx:S,theme:i,nested:!0}):x=hd(x,b)}else x=hd(x,t(w,S,i,c))}),!a&&i.modularCssLayers?{"@layer sx":Zk(i,tS(y,x))}:Zk(i,tS(y,x))}return Array.isArray(r)?r.map(u):u(r)}return e}const bl=UH();bl.filterProps=["sx"];const $H=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??oh;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function K4(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=$H(n);let a;return Array.isArray(e)?a=[r,...e]:typeof e=="function"?a=(...c)=>{const u=e(...c);return Ns(u)?{...r,...u}:r}:a={...r,...e},{...i,sx:a}}function Ex(){return Ex=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ex.apply(null,arguments)}function zH(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function BH(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var HH=function(){function t(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(BH(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=zH(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Cr="-ms-",Gp="-moz-",Wt="-webkit-",X4="comm",D1="rule",M1="decl",WH="@import",Q4="@keyframes",qH="@layer",GH=Math.abs,Um=String.fromCharCode,KH=Object.assign;function XH(t,e){return gr(t,0)^45?(((e<<2^gr(t,0))<<2^gr(t,1))<<2^gr(t,2))<<2^gr(t,3):0}function Y4(t){return t.trim()}function QH(t,e){return(t=e.exec(t))?t[0]:t}function qt(t,e,n){return t.replace(e,n)}function kx(t,e){return t.indexOf(e)}function gr(t,e){return t.charCodeAt(e)|0}function Md(t,e,n){return t.slice(e,n)}function Ss(t){return t.length}function O1(t){return t.length}function Lf(t,e){return e.push(t),t}function YH(t,e){return t.map(e).join("")}var $m=1,Hc=1,J4=0,si=0,Wn=0,iu="";function zm(t,e,n,r,i,a,c){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:$m,column:Hc,length:c,return:""}}function Uu(t,e){return KH(zm("",null,null,"",null,null,0),t,{length:-t.length},e)}function JH(){return Wn}function ZH(){return Wn=si>0?gr(iu,--si):0,Hc--,Wn===10&&(Hc=1,$m--),Wn}function vi(){return Wn=si<J4?gr(iu,si++):0,Hc++,Wn===10&&(Hc=1,$m++),Wn}function Us(){return gr(iu,si)}function np(){return si}function lh(t,e){return Md(iu,t,e)}function Od(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Z4(t){return $m=Hc=1,J4=Ss(iu=t),si=0,[]}function ej(t){return iu="",t}function rp(t){return Y4(lh(si-1,Sx(t===91?t+2:t===40?t+1:t)))}function eW(t){for(;(Wn=Us())&&Wn<33;)vi();return Od(t)>2||Od(Wn)>3?"":" "}function tW(t,e){for(;--e&&vi()&&!(Wn<48||Wn>102||Wn>57&&Wn<65||Wn>70&&Wn<97););return lh(t,np()+(e<6&&Us()==32&&vi()==32))}function Sx(t){for(;vi();)switch(Wn){case t:return si;case 34:case 39:t!==34&&t!==39&&Sx(Wn);break;case 40:t===41&&Sx(t);break;case 92:vi();break}return si}function nW(t,e){for(;vi()&&t+Wn!==57;)if(t+Wn===84&&Us()===47)break;return"/*"+lh(e,si-1)+"*"+Um(t===47?t:vi())}function rW(t){for(;!Od(Us());)vi();return lh(t,si)}function iW(t){return ej(ip("",null,null,null,[""],t=Z4(t),0,[0],t))}function ip(t,e,n,r,i,a,c,u,h){for(var f=0,g=0,y=c,x=0,w=0,S=0,b=1,N=1,j=1,M=0,O="",F=i,H=a,K=r,R=O;N;)switch(S=M,M=vi()){case 40:if(S!=108&&gr(R,y-1)==58){kx(R+=qt(rp(M),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:R+=rp(M);break;case 9:case 10:case 13:case 32:R+=eW(S);break;case 92:R+=tW(np()-1,7);continue;case 47:switch(Us()){case 42:case 47:Lf(sW(nW(vi(),np()),e,n),h);break;default:R+="/"}break;case 123*b:u[f++]=Ss(R)*j;case 125*b:case 59:case 0:switch(M){case 0:case 125:N=0;case 59+g:j==-1&&(R=qt(R,/\f/g,"")),w>0&&Ss(R)-y&&Lf(w>32?iS(R+";",r,n,y-1):iS(qt(R," ","")+";",r,n,y-2),h);break;case 59:R+=";";default:if(Lf(K=rS(R,e,n,f,g,i,u,O,F=[],H=[],y),a),M===123)if(g===0)ip(R,e,K,K,F,a,y,u,H);else switch(x===99&&gr(R,3)===110?100:x){case 100:case 108:case 109:case 115:ip(t,K,K,r&&Lf(rS(t,K,K,0,0,i,u,O,i,F=[],y),H),i,H,y,u,r?F:H);break;default:ip(R,K,K,K,[""],H,0,u,H)}}f=g=w=0,b=j=1,O=R="",y=c;break;case 58:y=1+Ss(R),w=S;default:if(b<1){if(M==123)--b;else if(M==125&&b++==0&&ZH()==125)continue}switch(R+=Um(M),M*b){case 38:j=g>0?1:(R+="\f",-1);break;case 44:u[f++]=(Ss(R)-1)*j,j=1;break;case 64:Us()===45&&(R+=rp(vi())),x=Us(),g=y=Ss(O=R+=rW(np())),M++;break;case 45:S===45&&Ss(R)==2&&(b=0)}}return a}function rS(t,e,n,r,i,a,c,u,h,f,g){for(var y=i-1,x=i===0?a:[""],w=O1(x),S=0,b=0,N=0;S<r;++S)for(var j=0,M=Md(t,y+1,y=GH(b=c[S])),O=t;j<w;++j)(O=Y4(b>0?x[j]+" "+M:qt(M,/&\f/g,x[j])))&&(h[N++]=O);return zm(t,e,n,i===0?D1:u,h,f,g)}function sW(t,e,n){return zm(t,e,n,X4,Um(JH()),Md(t,2,-2),0)}function iS(t,e,n,r){return zm(t,e,n,M1,Md(t,0,r),Md(t,r+1,-1),r)}function Dc(t,e){for(var n="",r=O1(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function aW(t,e,n,r){switch(t.type){case qH:if(t.children.length)break;case WH:case M1:return t.return=t.return||t.value;case X4:return"";case Q4:return t.return=t.value+"{"+Dc(t.children,r)+"}";case D1:t.value=t.props.join(",")}return Ss(n=Dc(t.children,r))?t.return=t.value+"{"+n+"}":""}function oW(t){var e=O1(t);return function(n,r,i,a){for(var c="",u=0;u<e;u++)c+=t[u](n,r,i,a)||"";return c}}function lW(t){return function(e){e.root||(e=e.return)&&t(e)}}function tj(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var cW=function(e,n,r){for(var i=0,a=0;i=a,a=Us(),i===38&&a===12&&(n[r]=1),!Od(a);)vi();return lh(e,si)},uW=function(e,n){var r=-1,i=44;do switch(Od(i)){case 0:i===38&&Us()===12&&(n[r]=1),e[r]+=cW(si-1,n,r);break;case 2:e[r]+=rp(i);break;case 4:if(i===44){e[++r]=Us()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Um(i)}while(i=vi());return e},dW=function(e,n){return ej(uW(Z4(e),n))},sS=new WeakMap,hW=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!sS.get(r))&&!i){sS.set(e,!0);for(var a=[],c=dW(n,a),u=r.props,h=0,f=0;h<c.length;h++)for(var g=0;g<u.length;g++,f++)e.props[f]=a[h]?c[h].replace(/&\f/g,u[g]):u[g]+" "+c[h]}}},fW=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function nj(t,e){switch(XH(t,e)){case 5103:return Wt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Wt+t+Gp+t+Cr+t+t;case 6828:case 4268:return Wt+t+Cr+t+t;case 6165:return Wt+t+Cr+"flex-"+t+t;case 5187:return Wt+t+qt(t,/(\w+).+(:[^]+)/,Wt+"box-$1$2"+Cr+"flex-$1$2")+t;case 5443:return Wt+t+Cr+"flex-item-"+qt(t,/flex-|-self/,"")+t;case 4675:return Wt+t+Cr+"flex-line-pack"+qt(t,/align-content|flex-|-self/,"")+t;case 5548:return Wt+t+Cr+qt(t,"shrink","negative")+t;case 5292:return Wt+t+Cr+qt(t,"basis","preferred-size")+t;case 6060:return Wt+"box-"+qt(t,"-grow","")+Wt+t+Cr+qt(t,"grow","positive")+t;case 4554:return Wt+qt(t,/([^-])(transform)/g,"$1"+Wt+"$2")+t;case 6187:return qt(qt(qt(t,/(zoom-|grab)/,Wt+"$1"),/(image-set)/,Wt+"$1"),t,"")+t;case 5495:case 3959:return qt(t,/(image-set\([^]*)/,Wt+"$1$`$1");case 4968:return qt(qt(t,/(.+:)(flex-)?(.*)/,Wt+"box-pack:$3"+Cr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wt+t+t;case 4095:case 3583:case 4068:case 2532:return qt(t,/(.+)-inline(.+)/,Wt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ss(t)-1-e>6)switch(gr(t,e+1)){case 109:if(gr(t,e+4)!==45)break;case 102:return qt(t,/(.+:)(.+)-([^]+)/,"$1"+Wt+"$2-$3$1"+Gp+(gr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~kx(t,"stretch")?nj(qt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(gr(t,e+1)!==115)break;case 6444:switch(gr(t,Ss(t)-3-(~kx(t,"!important")&&10))){case 107:return qt(t,":",":"+Wt)+t;case 101:return qt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wt+(gr(t,14)===45?"inline-":"")+"box$3$1"+Wt+"$2$3$1"+Cr+"$2box$3")+t}break;case 5936:switch(gr(t,e+11)){case 114:return Wt+t+Cr+qt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Wt+t+Cr+qt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Wt+t+Cr+qt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Wt+t+Cr+t+t}return t}var pW=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case M1:e.return=nj(e.value,e.length);break;case Q4:return Dc([Uu(e,{value:qt(e.value,"@","@"+Wt)})],i);case D1:if(e.length)return YH(e.props,function(a){switch(QH(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Dc([Uu(e,{props:[qt(a,/:(read-\w+)/,":"+Gp+"$1")]})],i);case"::placeholder":return Dc([Uu(e,{props:[qt(a,/:(plac\w+)/,":"+Wt+"input-$1")]}),Uu(e,{props:[qt(a,/:(plac\w+)/,":"+Gp+"$1")]}),Uu(e,{props:[qt(a,/:(plac\w+)/,Cr+"input-$1")]})],i)}return""})}},mW=[pW],gW=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var N=b.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||mW,a={},c,u=[];c=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var N=b.getAttribute("data-emotion").split(" "),j=1;j<N.length;j++)a[N[j]]=!0;u.push(b)});var h,f=[hW,fW];{var g,y=[aW,lW(function(b){g.insert(b)})],x=oW(f.concat(i,y)),w=function(N){return Dc(iW(N),x)};h=function(N,j,M,O){g=M,w(N?N+"{"+j.styles+"}":j.styles),O&&(S.inserted[j.name]=!0)}}var S={key:n,sheet:new HH({key:n,container:c,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:h};return S.sheet.hydrate(u),S},yW=!0;function xW(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var rj=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||yW===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},vW=function(e,n,r){rj(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function bW(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var wW={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_W=/[A-Z]|^ms/g,EW=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ij=function(e){return e.charCodeAt(1)===45},aS=function(e){return e!=null&&typeof e!="boolean"},iy=tj(function(t){return ij(t)?t:t.replace(_W,"-$&").toLowerCase()}),oS=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(EW,function(r,i,a){return Ts={name:i,styles:a,next:Ts},i})}return wW[e]!==1&&!ij(e)&&typeof n=="number"&&n!==0?n+"px":n};function Ld(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Ts={name:i.name,styles:i.styles,next:Ts},i.name;var a=n;if(a.styles!==void 0){var c=a.next;if(c!==void 0)for(;c!==void 0;)Ts={name:c.name,styles:c.styles,next:Ts},c=c.next;var u=a.styles+";";return u}return kW(t,e,n)}case"function":{if(t!==void 0){var h=Ts,f=n(t);return Ts=h,Ld(t,e,f)}break}}var g=n;if(e==null)return g;var y=e[g];return y!==void 0?y:g}function kW(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ld(t,e,n[i])+";";else for(var a in n){var c=n[a];if(typeof c!="object"){var u=c;e!=null&&e[u]!==void 0?r+=a+"{"+e[u]+"}":aS(u)&&(r+=iy(a)+":"+oS(a,u)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(e==null||e[c[0]]===void 0))for(var h=0;h<c.length;h++)aS(c[h])&&(r+=iy(a)+":"+oS(a,c[h])+";");else{var f=Ld(t,e,c);switch(a){case"animation":case"animationName":{r+=iy(a)+":"+f+";";break}default:r+=a+"{"+f+"}"}}}return r}var lS=/label:\s*([^\s;{]+)\s*(;|$)/g,Ts;function sj(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Ts=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,i+=Ld(n,e,a);else{var c=a;i+=c[0]}for(var u=1;u<t.length;u++)if(i+=Ld(n,e,t[u]),r){var h=a;i+=h[u]}lS.lastIndex=0;for(var f="",g;(g=lS.exec(i))!==null;)f+="-"+g[1];var y=bW(i)+f;return{name:y,styles:i,next:Ts}}var SW=function(e){return e()},TW=cy.useInsertionEffect?cy.useInsertionEffect:!1,NW=TW||SW,aj=T.createContext(typeof HTMLElement<"u"?gW({key:"css"}):null);aj.Provider;var CW=function(e){return T.forwardRef(function(n,r){var i=T.useContext(aj);return e(n,i,r)})},oj=T.createContext({}),AW=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,jW=tj(function(t){return AW.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),IW=jW,PW=function(e){return e!=="theme"},cS=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?IW:PW},uS=function(e,n,r){var i;if(n){var a=n.shouldForwardProp;i=e.__emotion_forwardProp&&a?function(c){return e.__emotion_forwardProp(c)&&a(c)}:a}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},RW=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return rj(n,r,i),NW(function(){return vW(n,r,i)}),null},DW=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,a,c;n!==void 0&&(a=n.label,c=n.target);var u=uS(e,n,r),h=u||cS(i),f=!h("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&y.push("label:"+a+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{var x=g[0];y.push(x[0]);for(var w=g.length,S=1;S<w;S++)y.push(g[S],x[S])}var b=CW(function(N,j,M){var O=f&&N.as||i,F="",H=[],K=N;if(N.theme==null){K={};for(var R in N)K[R]=N[R];K.theme=T.useContext(oj)}typeof N.className=="string"?F=xW(j.registered,H,N.className):N.className!=null&&(F=N.className+" ");var I=sj(y.concat(H),j.registered,K);F+=j.key+"-"+I.name,c!==void 0&&(F+=" "+c);var A=f&&u===void 0?cS(O):h,k={};for(var V in N)f&&V==="as"||A(V)&&(k[V]=N[V]);return k.className=F,M&&(k.ref=M),T.createElement(T.Fragment,null,T.createElement(RW,{cache:j,serialized:I,isStringTag:typeof O=="string"}),T.createElement(O,k))});return b.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=y,b.__emotion_forwardProp=u,Object.defineProperty(b,"toString",{value:function(){return"."+c}}),b.withComponent=function(N,j){var M=t(N,Ex({},n,j,{shouldForwardProp:uS(b,j,!0)}));return M.apply(void 0,y)},b}},MW=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Tx=DW.bind(null);MW.forEach(function(t){Tx[t]=Tx(t)});function lj(t,e){return Tx(t,e)}function OW(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const dS=[];function dl(t){return dS[0]=t,sj(dS)}const LW=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function VW(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,a=LW(e),c=Object.keys(a);function u(x){return`@media (min-width:${typeof e[x]=="number"?e[x]:x}${n})`}function h(x){return`@media (max-width:${(typeof e[x]=="number"?e[x]:x)-r/100}${n})`}function f(x,w){const S=c.indexOf(w);return`@media (min-width:${typeof e[x]=="number"?e[x]:x}${n}) and (max-width:${(S!==-1&&typeof e[c[S]]=="number"?e[c[S]]:w)-r/100}${n})`}function g(x){return c.indexOf(x)+1<c.length?f(x,c[c.indexOf(x)+1]):u(x)}function y(x){const w=c.indexOf(x);return w===0?u(c[1]):w===c.length-1?h(c[w]):f(x,c[c.indexOf(x)+1]).replace("@media","@media not all and")}return{keys:c,values:a,up:u,down:h,between:f,only:g,not:y,unit:n,...i}}const FW={borderRadius:4};function cj(t=8,e=P1({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(a=>{const c=e(a);return typeof c=="number"?`${c}px`:c}).join(" ");return n.mui=!0,n}function UW(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function L1(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:a={},...c}=t,u=VW(n),h=cj(i);let f=xi({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:h,shape:{...FW,...a}},c);return f=ZB(f),f.applyStyles=UW,f=e.reduce((g,y)=>xi(g,y),f),f.unstable_sxConfig={...oh,...c==null?void 0:c.unstable_sxConfig},f.unstable_sx=function(y){return bl({sx:y,theme:this})},f}function $W(t){return Object.keys(t).length===0}function zW(t=null){const e=T.useContext(oj);return!e||$W(e)?t:e}const BW=L1();function HW(t=BW){return zW(t)}const hS=t=>t,WW=()=>{let t=hS;return{configure(e){t=e},generate(e){return t(e)},reset(){t=hS}}},uj=WW();function qW(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,a=lj("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(bl);return T.forwardRef(function(h,f){const g=HW(n),{className:y,component:x="div",...w}=K4(h);return o.jsx(a,{as:x,ref:f,className:Fs(y,i?i(r):r),theme:e&&g[e]||g,...w})})}const GW={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function V1(t,e,n="Mui"){const r=GW[e];return r?`${n}-${r}`:`${uj.generate(t)}-${e}`}function F1(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=V1(t,i,n)}),r}function dj(t){const{variants:e,...n}=t,r={variants:e,style:dl(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=dl(i.style))}),r}const KW=L1();function sy(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function sl(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function XW(t){return t?(e,n)=>n[t]:null}function QW(t,e,n){t.theme=ZW(t.theme)?n:t.theme[e]||t.theme}function sp(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>sp(t,i,n));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=n?sl(r.style,n):r.style;else{const{variants:a,...c}=r;i=n?sl(dl(c),n):c}return hj(t,r.variants,[i],n)}return r!=null&&r.isProcessed?n?sl(dl(r.style),n):r.style:n?sl(dl(r),n):r}function hj(t,e,n=[],r=void 0){var a;let i;e:for(let c=0;c<e.length;c+=1){const u=e[c];if(typeof u.props=="function"){if(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),!u.props(i))continue}else for(const h in u.props)if(t[h]!==u.props[h]&&((a=t.ownerState)==null?void 0:a[h])!==u.props[h])continue e;typeof u.style=="function"?(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),n.push(r?sl(dl(u.style(i)),r):u.style(i))):n.push(r?sl(dl(u.style),r):u.style)}return n}function YW(t={}){const{themeId:e,defaultTheme:n=KW,rootShouldForwardProp:r=sy,slotShouldForwardProp:i=sy}=t;function a(u){QW(u,e,n)}return(u,h={})=>{OW(u,K=>K.filter(R=>R!==bl));const{name:f,slot:g,skipVariantsResolver:y,skipSx:x,overridesResolver:w=XW(tq(g)),...S}=h,b=f&&f.startsWith("Mui")||g?"components":"custom",N=y!==void 0?y:g&&g!=="Root"&&g!=="root"||!1,j=x||!1;let M=sy;g==="Root"||g==="root"?M=r:g?M=i:eq(u)&&(M=void 0);const O=lj(u,{shouldForwardProp:M,label:JW(),...S}),F=K=>{if(K.__emotion_real===K)return K;if(typeof K=="function")return function(I){return sp(I,K,I.theme.modularCssLayers?b:void 0)};if(Ns(K)){const R=dj(K);return function(A){return R.variants?sp(A,R,A.theme.modularCssLayers?b:void 0):A.theme.modularCssLayers?sl(R.style,b):R.style}}return K},H=(...K)=>{const R=[],I=K.map(F),A=[];if(R.push(a),f&&w&&A.push(function(D){var qe,ce;const Ke=(ce=(qe=D.theme.components)==null?void 0:qe[f])==null?void 0:ce.styleOverrides;if(!Ke)return null;const st={};for(const ue in Ke)st[ue]=sp(D,Ke[ue],D.theme.modularCssLayers?"theme":void 0);return w(D,st)}),f&&!N&&A.push(function(D){var st,qe;const xe=D.theme,Ke=(qe=(st=xe==null?void 0:xe.components)==null?void 0:st[f])==null?void 0:qe.variants;return Ke?hj(D,Ke,[],D.theme.modularCssLayers?"theme":void 0):null}),j||A.push(bl),Array.isArray(I[0])){const U=I.shift(),D=new Array(R.length).fill(""),xe=new Array(A.length).fill("");let Ke;Ke=[...D,...U,...xe],Ke.raw=[...D,...U.raw,...xe],R.unshift(Ke)}const k=[...R,...I,...A],V=O(...k);return u.muiName&&(V.muiName=u.muiName),V};return O.withConfig&&(H.withConfig=O.withConfig),H}}function JW(t,e){return void 0}function ZW(t){for(const e in t)return!1;return!0}function eq(t){return typeof t=="string"&&t.charCodeAt(0)>96}function tq(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Nx(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const a=i;if(a==="components"||a==="slots")r[a]={...t[a],...r[a]};else if(a==="componentsProps"||a==="slotProps"){const c=t[a],u=e[a];if(!u)r[a]=c||{};else if(!c)r[a]=u;else{r[a]={...u};for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h)){const f=h;r[a][f]=Nx(c[f],u[f],n)}}}else a==="className"&&n&&e.className?r.className=Fs(t==null?void 0:t.className,e==null?void 0:e.className):a==="style"&&n&&e.style?r.style={...t==null?void 0:t.style,...e==null?void 0:e.style}:r[a]===void 0&&(r[a]=t[a])}return r}const nq=T.createContext(void 0);function rq(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Nx(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?Nx(i,r,e.components.mergeClassNameAndStyle):r}function iq({props:t,name:e}){const n=T.useContext(nq);return rq({props:t,name:e,theme:{components:n}})}const fS={theme:void 0};function sq(t){let e,n;return function(i){let a=e;return(a===void 0||i.theme!==n)&&(fS.theme=i.theme,a=dj(t(fS)),e=a,n=i.theme),a}}function aq(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const pS=(t,e,n,r=[])=>{let i=t;e.forEach((a,c)=>{c===e.length-1?Array.isArray(i)?i[Number(a)]=n:i&&typeof i=="object"&&(i[a]=n):i&&typeof i=="object"&&(i[a]||(i[a]=r.includes(a)?[]:{}),i=i[a])})},oq=(t,e,n)=>{function r(i,a=[],c=[]){Object.entries(i).forEach(([u,h])=>{(!n||n&&!n([...a,u]))&&h!=null&&(typeof h=="object"&&Object.keys(h).length>0?r(h,[...a,u],Array.isArray(h)?[...c,u]:c):e([...a,u],h,c))})}r(t)},lq=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function ay(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},a={},c={};return oq(t,(u,h,f)=>{if((typeof h=="string"||typeof h=="number")&&(!r||!r(u,h))){const g=`--${n?`${n}-`:""}${u.join("-")}`,y=lq(u,h);Object.assign(i,{[g]:y}),pS(a,u,`var(${g})`,f),pS(c,u,`var(${g}, ${y})`,f)}},u=>u[0]==="vars"),{css:i,vars:a,varsWithDefaults:c}}function cq(t,e={}){const{getSelector:n=N,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:a={},components:c,defaultColorScheme:u="light",...h}=t,{vars:f,css:g,varsWithDefaults:y}=ay(h,e);let x=y;const w={},{[u]:S,...b}=a;if(Object.entries(b||{}).forEach(([O,F])=>{const{vars:H,css:K,varsWithDefaults:R}=ay(F,e);x=xi(x,R),w[O]={css:K,vars:H}}),S){const{css:O,vars:F,varsWithDefaults:H}=ay(S,e);x=xi(x,H),w[u]={css:O,vars:F}}function N(O,F){var K,R;let H=i;if(i==="class"&&(H=".%s"),i==="data"&&(H="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(H=`[${i}="%s"]`),O){if(H==="media")return t.defaultColorScheme===O?":root":{[`@media (prefers-color-scheme: ${((R=(K=a[O])==null?void 0:K.palette)==null?void 0:R.mode)||O})`]:{":root":F}};if(H)return t.defaultColorScheme===O?`:root, ${H.replace("%s",String(O))}`:H.replace("%s",String(O))}return":root"}return{vars:x,generateThemeVars:()=>{let O={...f};return Object.entries(w).forEach(([,{vars:F}])=>{O=xi(O,F)}),O},generateStyleSheets:()=>{var I,A;const O=[],F=t.defaultColorScheme||"light";function H(k,V){Object.keys(V).length&&O.push(typeof k=="string"?{[k]:{...V}}:k)}H(n(void 0,{...g}),g);const{[F]:K,...R}=w;if(K){const{css:k}=K,V=(A=(I=a[F])==null?void 0:I.palette)==null?void 0:A.mode,U=!r&&V?{colorScheme:V,...k}:{...k};H(n(F,{...U}),U)}return Object.entries(R).forEach(([k,{css:V}])=>{var xe,Ke;const U=(Ke=(xe=a[k])==null?void 0:xe.palette)==null?void 0:Ke.mode,D=!r&&U?{colorScheme:U,...V}:{...V};H(n(k,{...D}),D)}),O}}}function uq(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const Vd={black:"#000",white:"#fff"},dq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},hc={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},fc={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},$u={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},pc={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},mc={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},gc={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function fj(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Vd.white,default:Vd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const hq=fj();function pj(){return{text:{primary:Vd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Vd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const mS=pj();function gS(t,e,n,r){const i=r.light||r,a=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Dd(t.main,i):e==="dark"&&(t.dark=Rd(t.main,a)))}function fq(t="light"){return t==="dark"?{main:pc[200],light:pc[50],dark:pc[400]}:{main:pc[700],light:pc[400],dark:pc[800]}}function pq(t="light"){return t==="dark"?{main:hc[200],light:hc[50],dark:hc[400]}:{main:hc[500],light:hc[300],dark:hc[700]}}function mq(t="light"){return t==="dark"?{main:fc[500],light:fc[300],dark:fc[700]}:{main:fc[700],light:fc[400],dark:fc[800]}}function gq(t="light"){return t==="dark"?{main:mc[400],light:mc[300],dark:mc[700]}:{main:mc[700],light:mc[500],dark:mc[900]}}function yq(t="light"){return t==="dark"?{main:gc[400],light:gc[300],dark:gc[700]}:{main:gc[800],light:gc[500],dark:gc[900]}}function xq(t="light"){return t==="dark"?{main:$u[400],light:$u[300],dark:$u[700]}:{main:"#ed6c02",light:$u[500],dark:$u[900]}}function U1(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,a=t.primary||fq(e),c=t.secondary||pq(e),u=t.error||mq(e),h=t.info||gq(e),f=t.success||yq(e),g=t.warning||xq(e);function y(b){return IB(b,mS.text.primary)>=n?mS.text.primary:hq.text.primary}const x=({color:b,name:N,mainShade:j=500,lightShade:M=300,darkShade:O=700})=>{if(b={...b},!b.main&&b[j]&&(b.main=b[j]),!b.hasOwnProperty("main"))throw new Error(vl(11,N?` (${N})`:"",j));if(typeof b.main!="string")throw new Error(vl(12,N?` (${N})`:"",JSON.stringify(b.main)));return gS(b,"light",M,r),gS(b,"dark",O,r),b.contrastText||(b.contrastText=y(b.main)),b};let w;return e==="light"?w=fj():e==="dark"&&(w=pj()),xi({common:{...Vd},mode:e,primary:x({color:a,name:"primary"}),secondary:x({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:u,name:"error"}),warning:x({color:g,name:"warning"}),info:x({color:h,name:"info"}),success:x({color:f,name:"success"}),grey:dq,contrastThreshold:n,getContrastText:y,augmentColor:x,tonalOffset:r,...w},i)}function vq(t){const e={};return Object.entries(t).forEach(r=>{const[i,a]=r;typeof a=="object"&&(e[i]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function bq(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function wq(t){return Math.round(t*1e5)/1e5}const yS={textTransform:"uppercase"},xS='"Roboto", "Helvetica", "Arial", sans-serif';function _q(t,e){const{fontFamily:n=xS,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:h=16,allVariants:f,pxToRem:g,...y}=typeof e=="function"?e(t):e,x=r/14,w=g||(N=>`${N/h*x}rem`),S=(N,j,M,O,F)=>({fontFamily:n,fontWeight:N,fontSize:w(j),lineHeight:M,...n===xS?{letterSpacing:`${wq(O/j)}em`}:{},...F,...f}),b={h1:S(i,96,1.167,-1.5),h2:S(i,60,1.2,-.5),h3:S(a,48,1.167,0),h4:S(a,34,1.235,.25),h5:S(a,24,1.334,0),h6:S(c,20,1.6,.15),subtitle1:S(a,16,1.75,.15),subtitle2:S(c,14,1.57,.1),body1:S(a,16,1.5,.15),body2:S(a,14,1.43,.15),button:S(c,14,1.75,.4,yS),caption:S(a,12,1.66,.4),overline:S(a,12,2.66,1,yS),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xi({htmlFontSize:h,pxToRem:w,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:c,fontWeightBold:u,...b},y,{clone:!1})}const Eq=.2,kq=.14,Sq=.12;function gn(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Eq})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${kq})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Sq})`].join(",")}const Tq=["none",gn(0,2,1,-1,0,1,1,0,0,1,3,0),gn(0,3,1,-2,0,2,2,0,0,1,5,0),gn(0,3,3,-2,0,3,4,0,0,1,8,0),gn(0,2,4,-1,0,4,5,0,0,1,10,0),gn(0,3,5,-1,0,5,8,0,0,1,14,0),gn(0,3,5,-1,0,6,10,0,0,1,18,0),gn(0,4,5,-2,0,7,10,1,0,2,16,1),gn(0,5,5,-3,0,8,10,1,0,3,14,2),gn(0,5,6,-3,0,9,12,1,0,3,16,2),gn(0,6,6,-3,0,10,14,1,0,4,18,3),gn(0,6,7,-4,0,11,15,1,0,4,20,3),gn(0,7,8,-4,0,12,17,2,0,5,22,4),gn(0,7,8,-4,0,13,19,2,0,5,24,4),gn(0,7,9,-4,0,14,21,2,0,5,26,4),gn(0,8,9,-5,0,15,22,2,0,6,28,5),gn(0,8,10,-5,0,16,24,2,0,6,30,5),gn(0,8,11,-5,0,17,26,2,0,6,32,5),gn(0,9,11,-5,0,18,28,2,0,7,34,6),gn(0,9,12,-6,0,19,29,2,0,7,36,6),gn(0,10,13,-6,0,20,31,3,0,8,38,7),gn(0,10,13,-6,0,21,33,3,0,8,40,7),gn(0,10,14,-6,0,22,35,3,0,8,42,7),gn(0,11,14,-7,0,23,36,3,0,9,44,8),gn(0,11,15,-7,0,24,38,3,0,9,46,8)],Nq={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Cq={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function vS(t){return`${Math.round(t)}ms`}function Aq(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function jq(t){const e={...Nq,...t.easing},n={...Cq,...t.duration};return{getAutoHeightDuration:Aq,create:(i=["all"],a={})=>{const{duration:c=n.standard,easing:u=e.easeInOut,delay:h=0,...f}=a;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof c=="string"?c:vS(c)} ${u} ${typeof h=="string"?h:vS(h)}`).join(",")},...t,easing:e,duration:n}}const Iq={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Pq(t){return Ns(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function mj(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let a=0;a<i.length;a++){const[c,u]=i[a];!Pq(u)||c.startsWith("unstable_")?delete r[c]:Ns(u)&&(r[c]={...u},n(r[c]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Cx(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:a={},transitions:c={},typography:u={},shape:h,...f}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(vl(20));const g=U1(a),y=L1(t);let x=xi(y,{mixins:bq(y.breakpoints,r),palette:g,shadows:Tq.slice(),typography:_q(g,u),transitions:jq(c),zIndex:{...Iq}});return x=xi(x,f),x=e.reduce((w,S)=>xi(w,S),x),x.unstable_sxConfig={...oh,...f==null?void 0:f.unstable_sxConfig},x.unstable_sx=function(S){return bl({sx:S,theme:this})},x.toRuntimeSource=mj,x}function Rq(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const Dq=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=Rq(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function gj(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function yj(t){return t==="dark"?Dq:[]}function Mq(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,a=U1(e);return{palette:a,opacity:{...gj(a.mode),...n},overlays:r||yj(a.mode),...i}}function Oq(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const Lq=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],Vq=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let a=i;if(i==="class"&&(a=".%s"),i==="data"&&(a="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(a=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const c={};return Lq(t.cssVarPrefix).forEach(u=>{c[u]=n[u],delete n[u]}),a==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:c}}:a?{[a.replace("%s",e)]:c,[`${r}, ${a.replace("%s",e)}`]:n}:{[r]:{...n,...c}}}if(a&&a!=="media")return`${r}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(a)return a.replace("%s",String(e))}return r};function Fq(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function me(t,e,n){!t[e]&&n&&(t[e]=n)}function Yu(t){return typeof t!="string"||!t.startsWith("hsl")?t:$4(t)}function ua(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Qu(Yu(t[e])))}function Uq(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Es=t=>{try{return t()}catch{}},$q=(t="mui")=>aq(t);function oy(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=Mq({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:a,...c}=Cx({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:a,opacity:{...gj(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||yj(i)},c}function zq(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:c=Oq,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:h=":root",...f}=t,g=Object.keys(n)[0],y=r||(n.light&&g!=="light"?"light":g),x=$q(a),{[y]:w,light:S,dark:b,...N}=n,j={...N};let M=w;if((y==="dark"&&!("dark"in n)||y==="light"&&!("light"in n))&&(M=!0),!M)throw new Error(vl(21,y));const O=oy(j,M,f,y);S&&!j.light&&oy(j,S,void 0,"light"),b&&!j.dark&&oy(j,b,void 0,"dark");let F={defaultColorScheme:y,...O,cssVarPrefix:a,colorSchemeSelector:u,rootSelector:h,getCssVar:x,colorSchemes:j,font:{...vq(O.typography),...O.font},spacing:Uq(f.spacing)};Object.keys(F.colorSchemes).forEach(A=>{const k=F.colorSchemes[A].palette,V=U=>{const D=U.split("-"),xe=D[1],Ke=D[2];return x(U,k[xe][Ke])};if(k.mode==="light"&&(me(k.common,"background","#fff"),me(k.common,"onBackground","#000")),k.mode==="dark"&&(me(k.common,"background","#000"),me(k.common,"onBackground","#fff")),Fq(k,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),k.mode==="light"){me(k.Alert,"errorColor",tn(k.error.light,.6)),me(k.Alert,"infoColor",tn(k.info.light,.6)),me(k.Alert,"successColor",tn(k.success.light,.6)),me(k.Alert,"warningColor",tn(k.warning.light,.6)),me(k.Alert,"errorFilledBg",V("palette-error-main")),me(k.Alert,"infoFilledBg",V("palette-info-main")),me(k.Alert,"successFilledBg",V("palette-success-main")),me(k.Alert,"warningFilledBg",V("palette-warning-main")),me(k.Alert,"errorFilledColor",Es(()=>k.getContrastText(k.error.main))),me(k.Alert,"infoFilledColor",Es(()=>k.getContrastText(k.info.main))),me(k.Alert,"successFilledColor",Es(()=>k.getContrastText(k.success.main))),me(k.Alert,"warningFilledColor",Es(()=>k.getContrastText(k.warning.main))),me(k.Alert,"errorStandardBg",nn(k.error.light,.9)),me(k.Alert,"infoStandardBg",nn(k.info.light,.9)),me(k.Alert,"successStandardBg",nn(k.success.light,.9)),me(k.Alert,"warningStandardBg",nn(k.warning.light,.9)),me(k.Alert,"errorIconColor",V("palette-error-main")),me(k.Alert,"infoIconColor",V("palette-info-main")),me(k.Alert,"successIconColor",V("palette-success-main")),me(k.Alert,"warningIconColor",V("palette-warning-main")),me(k.AppBar,"defaultBg",V("palette-grey-100")),me(k.Avatar,"defaultBg",V("palette-grey-400")),me(k.Button,"inheritContainedBg",V("palette-grey-300")),me(k.Button,"inheritContainedHoverBg",V("palette-grey-A100")),me(k.Chip,"defaultBorder",V("palette-grey-400")),me(k.Chip,"defaultAvatarColor",V("palette-grey-700")),me(k.Chip,"defaultIconColor",V("palette-grey-700")),me(k.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),me(k.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),me(k.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),me(k.LinearProgress,"primaryBg",nn(k.primary.main,.62)),me(k.LinearProgress,"secondaryBg",nn(k.secondary.main,.62)),me(k.LinearProgress,"errorBg",nn(k.error.main,.62)),me(k.LinearProgress,"infoBg",nn(k.info.main,.62)),me(k.LinearProgress,"successBg",nn(k.success.main,.62)),me(k.LinearProgress,"warningBg",nn(k.warning.main,.62)),me(k.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.11)`),me(k.Slider,"primaryTrack",nn(k.primary.main,.62)),me(k.Slider,"secondaryTrack",nn(k.secondary.main,.62)),me(k.Slider,"errorTrack",nn(k.error.main,.62)),me(k.Slider,"infoTrack",nn(k.info.main,.62)),me(k.Slider,"successTrack",nn(k.success.main,.62)),me(k.Slider,"warningTrack",nn(k.warning.main,.62));const U=Pf(k.background.default,.8);me(k.SnackbarContent,"bg",U),me(k.SnackbarContent,"color",Es(()=>k.getContrastText(U))),me(k.SpeedDialAction,"fabHoverBg",Pf(k.background.paper,.15)),me(k.StepConnector,"border",V("palette-grey-400")),me(k.StepContent,"border",V("palette-grey-400")),me(k.Switch,"defaultColor",V("palette-common-white")),me(k.Switch,"defaultDisabledColor",V("palette-grey-100")),me(k.Switch,"primaryDisabledColor",nn(k.primary.main,.62)),me(k.Switch,"secondaryDisabledColor",nn(k.secondary.main,.62)),me(k.Switch,"errorDisabledColor",nn(k.error.main,.62)),me(k.Switch,"infoDisabledColor",nn(k.info.main,.62)),me(k.Switch,"successDisabledColor",nn(k.success.main,.62)),me(k.Switch,"warningDisabledColor",nn(k.warning.main,.62)),me(k.TableCell,"border",nn(If(k.divider,1),.88)),me(k.Tooltip,"bg",If(k.grey[700],.92))}if(k.mode==="dark"){me(k.Alert,"errorColor",nn(k.error.light,.6)),me(k.Alert,"infoColor",nn(k.info.light,.6)),me(k.Alert,"successColor",nn(k.success.light,.6)),me(k.Alert,"warningColor",nn(k.warning.light,.6)),me(k.Alert,"errorFilledBg",V("palette-error-dark")),me(k.Alert,"infoFilledBg",V("palette-info-dark")),me(k.Alert,"successFilledBg",V("palette-success-dark")),me(k.Alert,"warningFilledBg",V("palette-warning-dark")),me(k.Alert,"errorFilledColor",Es(()=>k.getContrastText(k.error.dark))),me(k.Alert,"infoFilledColor",Es(()=>k.getContrastText(k.info.dark))),me(k.Alert,"successFilledColor",Es(()=>k.getContrastText(k.success.dark))),me(k.Alert,"warningFilledColor",Es(()=>k.getContrastText(k.warning.dark))),me(k.Alert,"errorStandardBg",tn(k.error.light,.9)),me(k.Alert,"infoStandardBg",tn(k.info.light,.9)),me(k.Alert,"successStandardBg",tn(k.success.light,.9)),me(k.Alert,"warningStandardBg",tn(k.warning.light,.9)),me(k.Alert,"errorIconColor",V("palette-error-main")),me(k.Alert,"infoIconColor",V("palette-info-main")),me(k.Alert,"successIconColor",V("palette-success-main")),me(k.Alert,"warningIconColor",V("palette-warning-main")),me(k.AppBar,"defaultBg",V("palette-grey-900")),me(k.AppBar,"darkBg",V("palette-background-paper")),me(k.AppBar,"darkColor",V("palette-text-primary")),me(k.Avatar,"defaultBg",V("palette-grey-600")),me(k.Button,"inheritContainedBg",V("palette-grey-800")),me(k.Button,"inheritContainedHoverBg",V("palette-grey-700")),me(k.Chip,"defaultBorder",V("palette-grey-700")),me(k.Chip,"defaultAvatarColor",V("palette-grey-300")),me(k.Chip,"defaultIconColor",V("palette-grey-300")),me(k.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),me(k.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),me(k.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),me(k.LinearProgress,"primaryBg",tn(k.primary.main,.5)),me(k.LinearProgress,"secondaryBg",tn(k.secondary.main,.5)),me(k.LinearProgress,"errorBg",tn(k.error.main,.5)),me(k.LinearProgress,"infoBg",tn(k.info.main,.5)),me(k.LinearProgress,"successBg",tn(k.success.main,.5)),me(k.LinearProgress,"warningBg",tn(k.warning.main,.5)),me(k.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.13)`),me(k.Slider,"primaryTrack",tn(k.primary.main,.5)),me(k.Slider,"secondaryTrack",tn(k.secondary.main,.5)),me(k.Slider,"errorTrack",tn(k.error.main,.5)),me(k.Slider,"infoTrack",tn(k.info.main,.5)),me(k.Slider,"successTrack",tn(k.success.main,.5)),me(k.Slider,"warningTrack",tn(k.warning.main,.5));const U=Pf(k.background.default,.98);me(k.SnackbarContent,"bg",U),me(k.SnackbarContent,"color",Es(()=>k.getContrastText(U))),me(k.SpeedDialAction,"fabHoverBg",Pf(k.background.paper,.15)),me(k.StepConnector,"border",V("palette-grey-600")),me(k.StepContent,"border",V("palette-grey-600")),me(k.Switch,"defaultColor",V("palette-grey-300")),me(k.Switch,"defaultDisabledColor",V("palette-grey-600")),me(k.Switch,"primaryDisabledColor",tn(k.primary.main,.55)),me(k.Switch,"secondaryDisabledColor",tn(k.secondary.main,.55)),me(k.Switch,"errorDisabledColor",tn(k.error.main,.55)),me(k.Switch,"infoDisabledColor",tn(k.info.main,.55)),me(k.Switch,"successDisabledColor",tn(k.success.main,.55)),me(k.Switch,"warningDisabledColor",tn(k.warning.main,.55)),me(k.TableCell,"border",tn(If(k.divider,1),.68)),me(k.Tooltip,"bg",If(k.grey[700],.92))}ua(k.background,"default"),ua(k.background,"paper"),ua(k.common,"background"),ua(k.common,"onBackground"),ua(k,"divider"),Object.keys(k).forEach(U=>{const D=k[U];U!=="tonalOffset"&&D&&typeof D=="object"&&(D.main&&me(k[U],"mainChannel",Qu(Yu(D.main))),D.light&&me(k[U],"lightChannel",Qu(Yu(D.light))),D.dark&&me(k[U],"darkChannel",Qu(Yu(D.dark))),D.contrastText&&me(k[U],"contrastTextChannel",Qu(Yu(D.contrastText))),U==="text"&&(ua(k[U],"primary"),ua(k[U],"secondary")),U==="action"&&(D.active&&ua(k[U],"active"),D.selected&&ua(k[U],"selected")))})}),F=e.reduce((A,k)=>xi(A,k),F);const H={prefix:a,disableCssColorScheme:i,shouldSkipGeneratingVar:c,getSelector:Vq(F)},{vars:K,generateThemeVars:R,generateStyleSheets:I}=cq(F,H);return F.vars=K,Object.entries(F.colorSchemes[F.defaultColorScheme]).forEach(([A,k])=>{F[A]=k}),F.generateThemeVars=R,F.generateStyleSheets=I,F.generateSpacing=function(){return cj(f.spacing,P1(this))},F.getColorSchemeSelector=uq(u),F.spacing=F.generateSpacing(),F.shouldSkipGeneratingVar=c,F.unstable_sxConfig={...oh,...f==null?void 0:f.unstable_sxConfig},F.unstable_sx=function(k){return bl({sx:k,theme:this})},F.toRuntimeSource=mj,F}function bS(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:U1({...n===!0?{}:n.palette,mode:e})})}function xj(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:a=n==null?void 0:n.mode,...c}=t,u=a||"light",h=i==null?void 0:i[u],f={...i,...n?{[u]:{...typeof h!="boolean"&&h,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return Cx(t,...e);let g=n;"palette"in t||f[u]&&(f[u]!==!0?g=f[u].palette:u==="dark"&&(g={mode:"dark"}));const y=Cx({...t,palette:g},...e);return y.defaultColorScheme=u,y.colorSchemes=f,y.palette.mode==="light"&&(y.colorSchemes.light={...f.light!==!0&&f.light,palette:y.palette},bS(y,"dark",f.dark)),y.palette.mode==="dark"&&(y.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:y.palette},bS(y,"light",f.light)),y}return!n&&!("light"in f)&&u==="light"&&(f.light=!0),zq({...c,colorSchemes:f,defaultColorScheme:u,...typeof r!="boolean"&&r},...e)}const Bq=xj(),vj="$$material";function $1(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Hq=t=>$1(t)&&t!=="classes",Co=YW({themeId:vj,defaultTheme:Bq,rootShouldForwardProp:Hq});function Wq(){return K4}const Nl=sq;function bj(t){return iq(t)}const qq=t=>!t||!tp(t);function Gq(t){return typeof t.main=="string"}function Kq(t,e=[]){if(!Gq(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Bm(t=[]){return([,e])=>e&&Kq(e,t)}function Xq(t){return V1("MuiSlider",t)}const Mi=F1("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Qq=t=>{const{open:e}=t;return{offset:Fs(e&&Mi.valueLabelOpen),circle:Mi.valueLabelCircle,label:Mi.valueLabelLabel}};function Yq(t){const{children:e,className:n,value:r}=t,i=Qq(t);return e?T.cloneElement(e,{className:e.props.className},o.jsxs(T.Fragment,{children:[e.props.children,o.jsx("span",{className:Fs(i.offset,n),"aria-hidden":!0,children:o.jsx("span",{className:i.circle,children:o.jsx("span",{className:i.label,children:r})})})]})):null}function wS(t){return t}const Jq=Co("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${yi(n.color)}`],n.size!=="medium"&&e[`size${yi(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(Nl(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Mi.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Mi.dragging}`]:{[`& .${Mi.thumb}, & .${Mi.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(Bm()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Zq=Co("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),eG=Co("span",{name:"MuiSlider",slot:"Track"})(Nl(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(Bm()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:Dd(t.palette[e].main,.62),borderColor:Dd(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:Rd(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:Rd(t.palette[e].main,.5)})}}}))]}))),tG=Co("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${yi(n.color)}`],n.size!=="medium"&&e[`thumbSize${yi(n.size)}`]]}})(Nl(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Mi.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(Bm()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Mi.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${_x(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Mi.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${_x(t.palette[e].main,.16)}`}}}}))]}))),nG=Co(Yq,{name:"MuiSlider",slot:"ValueLabel"})(Nl(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Mi.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Mi.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),rG=Co("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>$1(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(Nl(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),iG=Co("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>$1(t)&&t!=="markLabelActive"})(Nl(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),sG=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:a,classes:c,color:u,size:h}=t,f={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",a==="inverted"&&"trackInverted",a===!1&&"trackFalse",u&&`color${yi(u)}`,h&&`size${yi(h)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",h&&`thumbSize${yi(h)}`,u&&`thumbColor${yi(u)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return U4(f,Xq,c)},aG=({children:t})=>t,wj=T.forwardRef(function(e,n){const r=bj({props:e,name:"MuiSlider"}),i=DB(),{"aria-label":a,"aria-valuetext":c,"aria-labelledby":u,component:h="span",components:f={},componentsProps:g={},color:y="primary",classes:x,className:w,disableSwap:S=!1,disabled:b=!1,getAriaLabel:N,getAriaValueText:j,marks:M=!1,max:O=100,min:F=0,name:H,onChange:K,onChangeCommitted:R,orientation:I="horizontal",shiftStep:A=10,size:k="medium",step:V=1,scale:U=wS,slotProps:D,slots:xe,tabIndex:Ke,track:st="normal",value:qe,valueLabelDisplay:ce="off",valueLabelFormat:ue=wS,...de}=r,z={...r,isRtl:i,max:O,min:F,classes:x,disabled:b,disableSwap:S,orientation:I,marks:M,color:y,size:k,step:V,shiftStep:A,scale:U,track:st,valueLabelDisplay:ce,valueLabelFormat:ue},{axisProps:Y,getRootProps:be,getHiddenInputProps:Me,getThumbProps:Ve,open:it,active:ct,axis:Be,focusedThumbIndex:et,range:ut,dragging:_t,marks:mt,values:kt,trackOffset:Ot,trackLeap:ie,getThumbStyle:Fe}=KB({...z,rootRef:n});z.marked=mt.length>0&&mt.some(Le=>Le.label),z.dragging=_t,z.focusedThumbIndex=et;const je=sG(z),fe=(xe==null?void 0:xe.root)??f.Root??Jq,Ze=(xe==null?void 0:xe.rail)??f.Rail??Zq,Xe=(xe==null?void 0:xe.track)??f.Track??eG,jt=(xe==null?void 0:xe.thumb)??f.Thumb??tG,Nt=(xe==null?void 0:xe.valueLabel)??f.ValueLabel??nG,At=(xe==null?void 0:xe.mark)??f.Mark??rG,_e=(xe==null?void 0:xe.markLabel)??f.MarkLabel??iG,ne=(xe==null?void 0:xe.input)??f.Input??"input",ge=(D==null?void 0:D.root)??g.root,Ne=(D==null?void 0:D.rail)??g.rail,te=(D==null?void 0:D.track)??g.track,Ie=(D==null?void 0:D.thumb)??g.thumb,B=(D==null?void 0:D.valueLabel)??g.valueLabel,Q=(D==null?void 0:D.mark)??g.mark,le=(D==null?void 0:D.markLabel)??g.markLabel,J=(D==null?void 0:D.input)??g.input,se=Xa({elementType:fe,getSlotProps:be,externalSlotProps:ge,externalForwardedProps:de,additionalProps:{...qq(fe)&&{as:h}},ownerState:{...z,...ge==null?void 0:ge.ownerState},className:[je.root,w]}),Ue=Xa({elementType:Ze,externalSlotProps:Ne,ownerState:z,className:je.rail}),ze=Xa({elementType:Xe,externalSlotProps:te,additionalProps:{style:{...Y[Be].offset(Ot),...Y[Be].leap(ie)}},ownerState:{...z,...te==null?void 0:te.ownerState},className:je.track}),q=Xa({elementType:jt,getSlotProps:Ve,externalSlotProps:Ie,ownerState:{...z,...Ie==null?void 0:Ie.ownerState},className:je.thumb}),Ee=Xa({elementType:Nt,externalSlotProps:B,ownerState:{...z,...B==null?void 0:B.ownerState},className:je.valueLabel}),He=Xa({elementType:At,externalSlotProps:Q,ownerState:z,className:je.mark}),dt=Xa({elementType:_e,externalSlotProps:le,ownerState:z,className:je.markLabel}),gt=Xa({elementType:ne,getSlotProps:Me,externalSlotProps:J,ownerState:z});return o.jsxs(fe,{...se,children:[o.jsx(Ze,{...Ue}),o.jsx(Xe,{...ze}),mt.filter(Le=>Le.value>=F&&Le.value<=O).map((Le,ve)=>{const Oe=Wp(Le.value,F,O),It=Y[Be].offset(Oe);let ht;return st===!1?ht=kt.includes(Le.value):ht=st==="normal"&&(ut?Le.value>=kt[0]&&Le.value<=kt[kt.length-1]:Le.value<=kt[0])||st==="inverted"&&(ut?Le.value<=kt[0]||Le.value>=kt[kt.length-1]:Le.value>=kt[0]),o.jsxs(T.Fragment,{children:[o.jsx(At,{"data-index":ve,...He,...!tp(At)&&{markActive:ht},style:{...It,...He.style},className:Fs(He.className,ht&&je.markActive)}),Le.label!=null?o.jsx(_e,{"aria-hidden":!0,"data-index":ve,...dt,...!tp(_e)&&{markLabelActive:ht},style:{...It,...dt.style},className:Fs(je.markLabel,dt.className,ht&&je.markLabelActive),children:Le.label}):null]},ve)}),kt.map((Le,ve)=>{const Oe=Wp(Le,F,O),It=Y[Be].offset(Oe),ht=ce==="off"?aG:Nt;return o.jsx(ht,{...!tp(ht)&&{valueLabelFormat:ue,valueLabelDisplay:ce,value:typeof ue=="function"?ue(U(Le),ve):ue,index:ve,open:it===ve||ct===ve||ce==="on",disabled:b},...Ee,children:o.jsx(jt,{"data-index":ve,...q,className:Fs(je.thumb,q.className,ct===ve&&je.active,et===ve&&je.focusVisible),style:{...It,...Fe(ve),...q.style},children:o.jsx(ne,{"data-index":ve,"aria-label":N?N(ve):a,"aria-valuenow":U(Le),"aria-labelledby":u,"aria-valuetext":j?j(U(Le),ve):c,value:kt[ve],...gt})})},ve)})]})});function oG(t){return V1("MuiTypography",t)}F1("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const lG={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},cG=Wq(),uG=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:a,classes:c}=t,u={root:["root",a,t.align!=="inherit"&&`align${yi(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return U4(u,oG,c)},dG=Co("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${yi(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Nl(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(Bm()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${yi(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),_S={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},_j=T.forwardRef(function(e,n){const{color:r,...i}=bj({props:e,name:"MuiTypography"}),a=!lG[r],c=cG({...i,...a&&{color:r}}),{align:u="inherit",className:h,component:f,gutterBottom:g=!1,noWrap:y=!1,paragraph:x=!1,variant:w="body1",variantMapping:S=_S,...b}=c,N={...c,align:u,color:r,className:h,component:f,gutterBottom:g,noWrap:y,paragraph:x,variant:w,variantMapping:S},j=f||(x?"p":S[w]||_S[w])||"span",M=uG(N);return o.jsx(dG,{as:j,ref:n,className:Fs(M.root,h),...b,ownerState:N,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...b.style}})}),hG=F1("MuiBox",["root"]),fG=xj(),Ej=qW({themeId:vj,defaultTheme:fG,defaultClassName:hG.root,generateClassName:uj.generate}),pG={initial:{scale:1,boxShadow:"none"},hover:{scale:1.04,boxShadow:"0 4px 8px rgba(60, 80, 120, 0.3)",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.97,boxShadow:"0 0 6px rgba(60, 80, 120, 0.5)"}},mG={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.6)","0 0 10px rgba(80, 100, 140, 0.9)","0 0 4px rgba(80, 100, 140, 0.6)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function kj({filtros:t,setFiltros:e,productosOriginales:n}){const[r,i]=T.useState([]);T.useEffect(()=>{let u=n;(t.estado.nuevo||t.estado.usado)&&(u=u.filter(g=>t.estado.nuevo&&t.estado.usado?!0:t.estado.nuevo?g.estado==="Nuevo":t.estado.usado?g.estado==="Usado":!0));const h=t.precio.min!==""?Number(t.precio.min):0,f=t.precio.max!==""?Number(t.precio.max):1/0;u=u.filter(g=>g.precio>=h&&g.precio<=f),i(u)},[t,n]);const a=(u,h)=>{e(f=>({...f,precio:{min:h[0],max:h[1]}}))},c=()=>{e({estado:{nuevo:!1,usado:!1},precio:{min:0,max:1e3}})};return o.jsxs("aside",{className:"hidden xl:block w-56 max-w-[240px] relative z-40",style:{height:"100vh",paddingTop:0,overflow:"hidden",backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Filtros",children:[o.jsx(V4,{}),o.jsxs("div",{style:{position:"relative",zIndex:1,height:"100%",overflowY:"auto",padding:"1rem",backgroundColor:"transparent",border:"none",boxShadow:"none"},children:[o.jsx(oe.h2,{className:"text-lg font-semibold mb-4 text-blue-800 dark:text-blue-400",variants:mG,animate:"animate",children:"Filtros"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-medium mb-2 text-gray-800 dark:text-gray-200",children:"Estado"}),o.jsxs("label",{className:"switch-container",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:t.estado.nuevo,onChange:()=>e(u=>({...u,estado:{...u.estado,nuevo:!u.estado.nuevo}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2",children:"Nuevo"})]}),o.jsxs("label",{className:"switch-container mt-2",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:t.estado.usado,onChange:()=>e(u=>({...u,estado:{...u.estado,usado:!u.estado.usado}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2",children:"Usado"})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx(_j,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),o.jsx(Ej,{sx:{px:1,"& .MuiSlider-thumb":{width:14,height:14,bgcolor:"#1976d2",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 8px rgba(25, 118, 210, 0.16)"}},"& .MuiSlider-rail":{height:6,opacity:.5,bgcolor:"#bfbfbf",borderRadius:3},"& .MuiSlider-track":{height:6,borderRadius:3},"& .MuiSlider-root":{padding:"15px 0"}},children:o.jsx(wj,{value:[typeof t.precio.min=="number"?t.precio.min:0,typeof t.precio.max=="number"?t.precio.max:1e3],onChange:a,valueLabelDisplay:"auto",min:0,max:1e3})}),o.jsxs("div",{className:"flex justify-between text-sm mt-2 text-gray-700 dark:text-gray-300",children:[o.jsxs("span",{children:["RD$",t.precio.min]}),o.jsxs("span",{children:["RD$",t.precio.max]})]})]}),o.jsx(oe.button,{onClick:c,variants:pG,initial:"initial",whileHover:"hover",whileTap:"tap",className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white text-sm px-3 py-2 rounded w-full",children:"Restablecer filtros"}),o.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:r.length===0?"No hay productos que coincidan con los filtros.":`Mostrando ${r.length} producto${r.length>1?"s":""}`})]})]})}function Sj({filtros:t,setFiltros:e,onReset:n,visible:r,onClose:i}){var y,x;const[a,c]=T.useState(t);T.useEffect(()=>{var S,b;const w={...t,precio:{min:((S=t.precio)==null?void 0:S.min)??0,max:((b=t.precio)==null?void 0:b.max)??1e3}};c(w)},[t,r]);const u=(w,S)=>{c(b=>({...b,precio:{min:S[0],max:S[1]}}))},h=Number.isFinite((y=a.precio)==null?void 0:y.min)?a.precio.min:0,f=Number.isFinite((x=a.precio)==null?void 0:x.max)?a.precio.max:1e4,g=[h,f];return o.jsxs("div",{className:`fixed top-0 right-0 h-full w-72 bg-white dark:bg-slate-900 border-l border-gray-300 dark:border-gray-700 shadow-lg z-[9999] transform transition-transform duration-300 ${r?"translate-x-0":"translate-x-full"}`,children:[o.jsxs("div",{className:"flex justify-between items-center px-4 py-4 border-b border-gray-300 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:"Filtros"}),o.jsx("button",{onClick:i,className:"text-blue-600 dark:text-blue-400 font-extrabold text-xl hover:text-blue-800 dark:hover:text-blue-300 transition-colors","aria-label":"Cerrar filtro",children:"✕"})]}),o.jsxs("div",{className:"p-4 pt-6 flex flex-col gap-6 overflow-y-auto text-gray-900 dark:text-gray-100",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-3 text-blue-700 dark:text-blue-300",children:"Estado"}),o.jsxs("label",{className:"switch-container mb-2",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:a.estado.nuevo,onChange:()=>c(w=>({...w,estado:{...w.estado,nuevo:!w.estado.nuevo}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Nuevo"})]}),o.jsxs("label",{className:"switch-container",children:[o.jsx("input",{type:"checkbox",className:"checkbox",checked:a.estado.usado,onChange:()=>c(w=>({...w,estado:{...w.estado,usado:!w.estado.usado}}))}),o.jsx("div",{className:"slider"}),o.jsx("span",{className:"ml-2 text-gray-800 dark:text-gray-200 font-medium",children:"Usado"})]})]}),o.jsxs("div",{children:[o.jsx(_j,{gutterBottom:!0,className:"text-sm font-semibold text-blue-700 dark:text-blue-300",children:"Precio (RD$)"}),o.jsx(Ej,{sx:{px:1,"& .MuiSlider-thumb":{width:16,height:16,bgcolor:"#1d4ed8",border:"2px solid white","&:focus, &:hover, &.Mui-active":{boxShadow:"0 0 0 10px rgba(29, 78, 216, 0.2)"}},"& .MuiSlider-rail":{height:8,opacity:.3,bgcolor:"#cbd5e1",borderRadius:4},"& .MuiSlider-track":{height:8,borderRadius:4,bgcolor:"#1d4ed8"},"& .MuiSlider-root":{padding:"20px 0"}},children:o.jsx(wj,{value:g,onChange:u,valueLabelDisplay:"auto",min:0,max:1e4})}),o.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 mt-1 font-semibold",children:[o.jsxs("span",{children:["RD$",g[0]]}),o.jsxs("span",{children:["RD$",g[1]]})]})]})]}),o.jsxs("div",{className:"flex justify-between gap-3 border-t border-gray-300 dark:border-gray-700 p-4 mt-4",children:[o.jsx("button",{onClick:()=>{n(),i()},className:"w-1/2 bg-blue-100 hover:bg-blue-200 text-blue-800 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-blue-300 font-semibold text-sm py-2 rounded transition-colors",children:"Restablecer"}),o.jsx("button",{onClick:()=>{e(a),i()},className:"w-1/2 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 rounded transition-colors",children:"Aplicar filtros"})]})]})}function Tj({onClick:t}){return o.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-900 dark:bg-slate-800 dark:text-blue-300 rounded-full text-sm font-medium hover:bg-gray-300 dark:hover:bg-slate-700 transition-colors",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Filtros"]})}const ly=t=>t?t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",Vf=(t,e,n=.6)=>{if(!t||!e)return!1;const r=t.toLowerCase(),i=e.toLowerCase();if(r===i||r.includes(i)||i.includes(r))return!0;const a=r.length,c=i.length,u=Math.max(a,c);if(u===0)return!1;let h=0;for(let g=0;g<Math.min(a,c);g++)r[g]===i[g]&&h++;return h/u>=n};function gG(){const t=Bs(),{products:e,loading:n}=gL(),[r,i]=T.useState({precio:{min:"",max:""},estado:{nuevo:!1,usado:!1}}),[a,c]=T.useState(!1),[u,h]=T.useState(!1),g=new URLSearchParams(t.search).get("q")||"",y=ly(g),x=T.useMemo(()=>(e||[]).filter(b=>{const N=ly(b.nombre),j=ly(b.empresa||"");return y.split(" ").filter(Boolean).some(O=>Vf(N,O)||Vf(j,O))||Vf(N,y)||Vf(j,y)}),[e,y]),w=T.useMemo(()=>x.filter(b=>{const N=r.precio.min===""||b.precio>=Number(r.precio.min),j=r.precio.max===""||b.precio<=Number(r.precio.max),M=!r.estado.nuevo&&!r.estado.usado||r.estado.nuevo&&b.estado==="Nuevo"||r.estado.usado&&b.estado==="Usado";return N&&j&&M}),[x,r]),S=()=>{i({precio:{min:"",max:""},estado:{nuevo:!1,usado:!1}})};return o.jsxs("div",{className:"flex flex-col xl:flex-row min-h-screen bg-white dark:bg-gray-900 pt-0",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsx("aside",{className:"hidden xl:block w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 sticky h-screen overflow-y-auto",children:o.jsx(Hp,{categoriaActiva:null,setMostrarEnMovil:h})}),o.jsxs("main",{className:"flex-1 p-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 px-2 xl:hidden",children:[o.jsx("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-800 dark:bg-slate-800 dark:text-blue-300 rounded-full text-sm font-medium",children:"📂 Categorías"}),o.jsx(Tj,{onClick:()=>c(!0)})]}),o.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"Resultados de búsqueda"}),n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-700"})}):w.length===0?o.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["No se encontraron productos relacionados con"," ",o.jsx("span",{className:"font-bold",children:g}),"."]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-[repeat(auto-fill,minmax(250px,1fr))] gap-2",children:w.map(b=>o.jsx(L4,{producto:b},b.id))})]}),o.jsx("aside",{className:"hidden xl:block w-64 bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 sticky h-screen overflow-y-auto",children:o.jsx(kj,{filtros:r,setFiltros:i,productosOriginales:x})}),u&&o.jsx(Hp,{categoriaActiva:null,mostrarEnMovil:u,setMostrarEnMovil:h}),o.jsx("div",{className:"xl:hidden",children:o.jsx(Sj,{filtros:r,setFiltros:i,visible:a,onClose:()=>c(!1),onReset:S})})]})}function ES(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")}function kS(){const{categoria:t}=DS(),e=ai(),{categories:n,loading:r}=Hv(),i=t&&t!=="todos"?t:"",{products:a,loading:c}=RC(i),[u,h]=T.useState({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),[f,g]=T.useState({norm:"",display:""}),[y,x]=T.useState(!1),[w,S]=T.useState(!1),[b,N]=T.useState("Todos"),[j,M]=T.useState(0);T.useEffect(()=>{function A(){const V=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),U=V?Math.ceil(V.getBoundingClientRect().height):0;M(U),document.documentElement.style.setProperty("--topbar-height",`${U}px`)}A(),window.addEventListener("resize",A);const k=new MutationObserver(A);return k.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",A),k.disconnect()}},[]),T.useEffect(()=>{if(!t||t==="todos")N("Todos");else{const A=n.find(k=>ES(k.ruta)===ES(t));N(A?A.nombre:"Todos")}},[t,n]);const O=T.useMemo(()=>b==="Todos"?a:a.filter(A=>A==null?void 0:A.id),[a,b]),F=T.useMemo(()=>(O||[]).filter(A=>{const k=A.precio>=u.precio.min,V=A.precio<=u.precio.max,U=!u.estado.nuevo&&!u.estado.usado||u.estado.nuevo&&A.estado==="Nuevo"||u.estado.usado&&A.estado==="Usado",D=A.empresaNorm||(A.empresa||"").toString().trim().toLowerCase(),xe=!f.norm||D===f.norm;return k&&V&&U&&xe}),[O,u,f]),H=(A,k)=>{e(`/productos/${k}`),x(!1),S(!1),g({norm:"",display:""})},K=()=>{h({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),g({norm:"",display:""})},R=[{nombre:"PlayStation",norm:"playstation",imagen:"/logos/PlayStation_logo.svg.png"},{nombre:"Xbox",norm:"xbox",imagen:"/logos/xbox-logo.png"},{nombre:"Nintendo",norm:"nintendo",imagen:"/logos/nintendo-logo.png"}],I=r||c;return o.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"var(--content-offset, 100px)",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[o.jsxs("div",{className:"flex-1 flex flex-col xl:grid xl:grid-cols-[auto_1fr_auto] w-full",style:{margin:0},children:[o.jsx(Hp,{categoriaActiva:b,onCategoriaClick:H,className:"bg-transparent border-none shadow-none xl:row-span-2"}),o.jsxs("main",{className:"flex-1 p-0 xl:p-4 relative pb-32",children:[o.jsxs("div",{className:"flex justify-between items-center px-3 py-2 xl:hidden bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 sticky transition-colors duration-300",style:{top:"var(--content-offset, 100px)",zIndex:40,marginTop:0,paddingTop:0},children:[o.jsx("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium transition-colors duration-300",children:"📂 Categorías"}),o.jsx(Tj,{onClick:()=>x(!0)})]}),o.jsxs("div",{className:"mb-6 mt-4 px-4 xl:px-0",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl xl:text-5xl font-extrabold text-gray-900 dark:text-gray-100 mb-3 tracking-tight leading-tight",children:b==="Todos"?"Todos los productos":b}),b!=="Todos"&&o.jsxs("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:["Encuentra lo mejor en"," ",o.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-400",children:b})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 px-4 xl:px-0 mb-6 justify-center sm:justify-start",children:[R.map(A=>{const k=f.norm===A.norm;return o.jsxs("button",{onClick:()=>g({norm:A.norm,display:A.nombre}),className:`group relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white dark:bg-gray-800 border-4 flex items-center justify-center shadow-xl hover:scale-110 transition-all duration-300 ${k?"border-blue-700 ring-4 ring-offset-2 ring-blue-500 animate-spin-slow":"border-gray-300 hover:border-blue-400"}`,title:A.nombre,children:[o.jsx("img",{src:A.imagen,alt:A.nombre,className:"w-8 h-8 sm:w-10 sm:h-10 object-contain z-10"}),k&&o.jsx("span",{className:"absolute inset-0 rounded-full border-4 border-blue-500 animate-pulse z-0"})]},A.norm)}),o.jsx("button",{onClick:()=>g({norm:"",display:""}),className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-4 flex items-center justify-center text-lg sm:text-xl font-bold bg-gradient-to-br from-red-100 to-red-300 text-red-700 border-red-600 shadow-lg hover:scale-110 transition-all duration-300",title:"Quitar filtro",children:"❌"})]}),I?null:F.length===0?o.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:"No hay productos que coincidan con tus filtros."}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-[repeat(auto-fill,minmax(250px,1fr))] gap-2",children:F.map(A=>o.jsx(L4,{producto:A},A.id))})]}),o.jsx(kj,{filtros:u,setFiltros:h,productosOriginales:O,className:"bg-transparent border-none shadow-none xl:row-span-2"})]}),w&&o.jsx(Hp,{categoriaActiva:b,onCategoriaClick:H,mostrarEnMovil:w,setMostrarEnMovil:S,className:"bg-transparent border-none shadow-none"}),o.jsx("div",{className:"xl:hidden",children:o.jsx(Sj,{filtros:u,setFiltros:h,visible:y,onClose:()=>x(!1),onReset:K})})]})}const yG=[{id:0,nombre:"Estafeta Principal (Oficina)",descripcion:"Playcenter Universal",direccion:"Av Estrella Sadhala Nº 55, Frente a la doble vía, Santiago",telefono:"809-582-1212",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'13.2%22N+70%C2%B041'23.3%22W/@19.436998,-70.689812,17z/data=!4m4!3m3!8m2!3d19.437!4d-70.6898056",imagen:"/estafetas/oficina.png"},{id:1,nombre:"Estafeta Villa-Olímpica",descripcion:"Minimarket Los Hermanos",direccion:"Calle Penetración Nº 1, Suburbanización Mare López, La villa-Olímpica, Próximo a la calle 1",telefono:"809-626-3262",ubicacionLink:"https://www.google.com/maps/place/19%C2%B025'43.1%22N+70%C2%B041'12.7%22W/@19.4286338,-70.6894342,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.4286338!4d-70.6868593?hl=es&entry=ttu",imagen:"/estafetas/loshermanos.png"},{id:2,nombre:"Estafeta Nibaje",descripcion:"Cafetería Guido",direccion:"Avenida Franco Vido, Nº 148, Nibaje",telefono:"829-324-2318",ubicacionLink:"https://www.google.com/maps/place//@19.420887,-70.6811611,3857m/data=!3m2!1e3!4b1?entry=ttu",imagen:"/estafetas/cafeteria-guido.png"},{id:3,nombre:"Estafeta El Ensueño",descripcion:"Salón y Cafetería Marais",direccion:"Calle Paseo de los Locutores, Esquina 11, El Ensueño",telefono:"829-755-3636",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'22.4%22N+70%C2%B041'26.1%22W/@19.439565,-70.690574,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.439565!4d-70.690574?entry=ttu",imagen:"/estafetas/salon-y-cafeteria-maraez.png"},{id:4,nombre:"Estafeta La Lotería",descripcion:"Colmado Espinal",direccion:"La Lotería, calle Salcedo, Nº 10",telefono:"829-288-9168",ubicacionLink:"https://www.google.com/maps/place/19.439565,-70.690574/data=!4m6!3m5!1s0!7e2!8m2!3d19.439564999999998!4d-70.690574",imagen:"/estafetas/colmado-espinal.png"},{id:5,nombre:"Estafeta La Villa-Olímpica",descripcion:"Palmatec Solutions",direccion:"Villa-Olímpica, frente Manzana F, al lado del antiguo Colegio Génesis",telefono:"809-785-3354",ubicacionLink:"https://www.google.com/maps/place/19.435309,-70.685961/data=!4m6!3m5!1s0!7e2!8m2!3d19.435309!4d-70.68596099999999",imagen:"/estafetas/palmatech-solution.png"},{id:6,nombre:"Estafeta Ensanche Bermúdez",descripcion:"St Electronics",direccion:"Calle 11, número 27, Ensanche Bermúdez",telefono:"849-437-3100",ubicacionLink:"https://www.google.com/maps/place/Espailla,+51000+Santiago+de+los+Caballeros/@19.4717075,-70.7148707,964m/data=!3m2!1e3!4b1!4m6!3m5!1s0x8eb1c5e2c3c79d7d:0x3a75c6d5f2312708!8m2!3d19.4717075!4d-70.7148707",imagen:"/estafetas/St electronics.png"},{id:7,nombre:"Estafeta Los Guandules",descripcion:"Mini Market El Vecino",direccion:"Estafeta de pago Los Guandules, próximo al puente",telefono:"+1 829 218 1889",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'15.3%22N+70%C2%B041'22.2%22W/@19.4381999,-70.6893169,526m/data=!3m1!1e3!4m4!3m3!8m2!3d19.437576!4d-70.689512?entry=ttu",imagen:"/estafetas/losguandules.png"}],xG=[{banco:"BANRESERVAS",numero:"9600153322",tipo:"Cuenta Corriente",titular:"PLAYCENTER"},{banco:"POPULAR",numero:"0798928750",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"BHD",numero:"18673320016",tipo:"Cuenta Corriente",titular:"FRANKLYN SANTOS"},{banco:"SantaCruz",numero:"11142010011632",tipo:"Cuenta Ahorro",titular:"PLAYCENTER"},{banco:"Scotiabank",numero:"12010008845",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"ASOC. CIBAO",numero:"100090238474",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"}];function vG(){const[t,e]=T.useState(null),n=(r,i)=>{navigator.clipboard.writeText(r),e(i),setTimeout(()=>e(null),2e3)};return o.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-10",style:{paddingTop:"var(--content-offset, 100px)"},children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-center mb-2 text-gray-800 dark:text-gray-100 tracking-tight",children:"Estafetas de Pago y Métodos de Pago"}),o.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-6",children:"Puedes pagar tu factura en cualquiera de nuestros puntos autorizados o mediante transferencia bancaria."}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-gray-800 dark:to-gray-900 border border-blue-200 dark:border-gray-700 rounded-2xl p-7 mb-12 shadow-lg",children:[o.jsxs("h2",{className:"text-2xl font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2 mb-3",children:[o.jsx(fU,{className:"text-blue-500 dark:text-blue-300"}),"Cuentas Bancarias para Transferencias"]}),o.jsxs("p",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:["⚠️ Incluye tu ",o.jsx("span",{className:"underline",children:"código de cliente"})," o",o.jsx("span",{className:"underline",children:" nombre completo"})," en la descripción del pago."]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-[15px]",children:["Es indispensable enviar el comprobante de pago al 809-582-1212 para poder aplicarlo.",o.jsx("br",{}),o.jsx("span",{className:"text-red-500 dark:text-red-400 font-bold",children:"Sin el comprobante no podremos procesar tu pago."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:xG.map((r,i)=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl p-5 flex flex-col shadow group hover:shadow-xl transition",children:[o.jsxs("h3",{className:"text-lg font-bold text-indigo-700 dark:text-indigo-300 flex items-center gap-2 mb-2",children:[o.jsx(yU,{className:"text-indigo-500 dark:text-indigo-300"}),r.banco]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-1 flex items-center",children:[o.jsx("span",{className:"font-semibold mr-1",children:"Número: "}),o.jsxs("span",{className:"text-gray-900 dark:text-gray-100 font-mono flex items-center",children:[r.numero,o.jsx("button",{onClick:()=>n(r.numero,i),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 ml-1",title:"Copiar número",children:t===i?o.jsx(cU,{}):o.jsx(vU,{})})]})]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-1",children:[o.jsx("span",{className:"font-semibold",children:"Tipo: "}),r.tipo]}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[o.jsx("span",{className:"font-semibold",children:"Titular: "}),r.titular]})]},i))})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:yG.map(r=>o.jsxs("div",{className:"flex flex-col md:flex-row bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700 hover:shadow-2xl transition",children:[o.jsx("div",{className:"w-full md:w-1/2 h-64 md:h-auto bg-blue-50 dark:bg-gray-700 flex items-center justify-center p-3",children:o.jsx("img",{src:r.imagen,alt:r.nombre,className:"w-full h-full object-contain rounded-xl"})}),o.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300 mb-1",children:r.nombre}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg font-medium mb-1",children:r.descripcion}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:r.direccion}),o.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-2 mb-2",children:[o.jsx(Mp,{className:"text-green-500 dark:text-green-300"}),r.telefono]})]}),o.jsxs("a",{href:r.ubicacionLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline mt-3 font-semibold flex items-center gap-2",children:[o.jsx("span",{role:"img","aria-label":"location",children:"📍"}),"Ver Ubicación"]})]})]},r.id))}),o.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mt-12 text-lg",children:"¡Agradecemos su preferencia! Estamos para servirle."})]})}function bG({children:t}){const{usuario:e}=Br();return e?t:o.jsx(jP,{to:"/login",replace:!0})}const SS="https://playcenter-universal.onrender.com";function wG(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function _G(){const[t]=Mx(),e=ai(),{usuario:n,usuarioInfo:r}=Br(),{carrito:i,vaciarCarrito:a}=Ud(),[c,u]=T.useState(1),[h,f]=T.useState(0);T.useEffect(()=>{const y=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=y}},[]),T.useEffect(()=>{const y=t.get("session"),x=wG(),w=setInterval(()=>{f(j=>j>=90?j:Math.min(90,j+Math.random()*15))},200),S=setTimeout(()=>u(2),900),b=setTimeout(()=>u(3),1600),N=async()=>{var j;try{if(!y){e("/payment/cancel");return}const M=await fetch(`${SS}/cardnet/get-sk/${y}`),{sk:O}=await M.json();if(!O){e(`/payment/cancel?session=${y}`);return}const H=await(await fetch(`${SS}/cardnet/verify/${y}/${O}`)).json(),K=(j=x==null?void 0:x.items)!=null&&j.length?x.items.map(A=>({id:A.id,nombre:A.nombre,precio:Number(A.precio)||0,cantidad:A.cantidad,imagen:A.imagen||"/Productos/default.jpg",empresa:A.empresa||"N/A",subtotal:(Number(A.precio)||0)*A.cantidad})):(i||[]).map(A=>({id:A.id,nombre:A.nombre,precio:Number(A.precio)||0,cantidad:A.cantidad,imagen:A.imagen||"/Productos/default.jpg",empresa:A.empresa||"N/A",subtotal:(Number(A.precio)||0)*A.cantidad})),R=(x==null?void 0:x.total)??(i||[]).reduce((A,k)=>A+(Number(k.precio)||0)*k.cantidad,0),I={userId:(n==null?void 0:n.uid)||null,userEmail:(r==null?void 0:r.email)||(n==null?void 0:n.email)||null,userName:(r==null?void 0:r.displayName)||null,userPhone:(r==null?void 0:r.telefono)||null,productos:K,total:R,subtotal:K.reduce((A,k)=>A+k.subtotal,0),impuestos:0,envio:0,estado:(H==null?void 0:H.ResponseCode)==="00"?"completado":"cancelado",estadoPago:(H==null?void 0:H.ResponseCode)==="00"?"pagado":"fallido",metodoPago:"CardNet",fecha:uC(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(x==null?void 0:x.mode)||(x?"unknown":"cart"),direccionEntrega:(r==null?void 0:r.direccionCompleta)||null,telefonoContacto:(r==null?void 0:r.telefono)||null,notasEspeciales:null,raw:{...H,SESSION:y}};try{await Em(Ft(Pe,"orders"),I)}catch(A){console.error("❌ Error guardando orden:",A)}try{sessionStorage.removeItem("checkoutPayload")}catch{}f(100),u(4),setTimeout(()=>{(H==null?void 0:H.ResponseCode)==="00"?(((x==null?void 0:x.mode)||"cart")==="cart"&&a(),e(`/payment/success?session=${y}`)):e(`/payment/cancel?session=${y}`)},900)}catch(M){console.error("❌ Error verificando pago:",M),e("/payment/cancel")}};if(y){const j=setTimeout(N,9e3);return()=>{clearTimeout(j),clearInterval(w),clearTimeout(S),clearTimeout(b)}}else e("/payment/cancel")},[t,e,n,r,i,a]);const g=[{id:1,icon:OU,title:"Conectando con CardNet",description:"Estableciendo conexión segura"},{id:2,icon:Vp,title:"Verificando seguridad",description:"Validando datos de pago"},{id:3,icon:m4,title:"Procesando transacción",description:"Confirmando tu compra"},{id:4,icon:ux,title:"¡Completado!",description:"Redirigiendo..."}];return o.jsxs(oe.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((y,x)=>o.jsx(oe.div,{className:"absolute w-2 h-2 bg-blue-200 rounded-full opacity-30",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*12+12,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},x))}),o.jsxs(oe.div,{className:"bg-white/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 rounded-2xl sm:rounded-3xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"mb-6 sm:mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3 sm:mb-4",children:[o.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Progreso"}),o.jsxs("span",{className:"text-xs sm:text-sm font-bold text-blue-600",children:[Math.round(h),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 sm:h-3 overflow-hidden",children:o.jsx(oe.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",initial:{width:0},animate:{width:`${h}%`},transition:{duration:.5,ease:"easeOut"}})})]}),o.jsx("div",{className:"mb-6 sm:mb-8",children:o.jsx(dn,{mode:"wait",children:g.map(y=>c>=y.id&&o.jsxs(oe.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.98},transition:{duration:.35,type:"spring"},className:`flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl sm:rounded-2xl mb-2 sm:mb-3 ${c===y.id?"bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[o.jsx(oe.div,{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl flex-shrink-0 ${c===y.id?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-green-100 text-green-600"}`,animate:c===y.id?{scale:[1,1.08,1],rotate:[0,5,-5,0]}:{},transition:{duration:2,repeat:1/0},children:o.jsx(y.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),o.jsxs("div",{className:"text-left flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-gray-800 text-base sm:text-lg",children:y.title}),o.jsx("p",{className:"text-gray-600 text-xs sm:text-sm break-words",children:y.description})]}),c>y.id&&o.jsx(oe.div,{initial:{scale:0},animate:{scale:1},className:"text-green-500 flex-shrink-0",children:o.jsx(ux,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]},y.id))})}),o.jsx("div",{className:"mb-6 sm:mb-8",children:o.jsxs("div",{className:"loader mx-auto",children:[o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__bar"}),o.jsx("div",{className:"loader__ball"})]})}),o.jsx(oe.h1,{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{opacity:[.85,1,.85]},transition:{duration:2,repeat:1/0},children:"Procesando tu pago"}),o.jsxs(oe.p,{className:"text-gray-600 mb-6 sm:mb-8 leading-relaxed text-sm sm:text-base",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Estamos verificando tu transacción con CardNet de forma segura.",o.jsx("br",{}),o.jsx("span",{className:"font-semibold text-blue-600",children:"Por favor, no cierres esta ventana."})]}),o.jsxs(oe.div,{className:"flex flex-wrap justify-center items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.6},children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsx(Vp,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),o.jsx("span",{children:"Conexión segura"})]}),o.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full hidden sm:block"}),o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsx(p4,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),o.jsx("span",{children:"Tiempo real"})]})]})]})]})]})}const TS="https://playcenter-universal.onrender.com";function EG(){var y,x;const[t]=Mx(),[e,n]=T.useState(null),[r,i]=T.useState(null),[a,c]=T.useState(!0),[u,h]=T.useState(!1);T.useEffect(()=>{const w=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=w}},[]),T.useEffect(()=>{const w=t.get("session");w&&(async()=>{try{const N=an(Ft(Pe,"orders"),xr("raw.SESSION","==",w),zs("fecha","desc"),wm(1)),j=await Ir(N);j.empty||n({id:j.docs[0].id,...j.docs[0].data()});const M=await fetch(`${TS}/cardnet/get-sk/${w}`),{sk:O}=await M.json();if(O){const H=await(await fetch(`${TS}/cardnet/verify/${w}/${O}`)).json();i(H)}}catch(N){console.error("Error cargando datos:",N)}})();const b=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(b)},[t]);const f=w=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(w||0),g=w=>{if(!w)return"Fecha no disponible";let S;return typeof w=="object"&&(w!=null&&w.seconds)?S=new Date(w.seconds*1e3):S=new Date(w),S.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return o.jsxs(oe.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[o.jsx(dn,{children:a&&o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((w,S)=>o.jsx(oe.div,{className:"absolute w-3 h-3 rounded-full",style:{backgroundColor:["#10b981","#059669","#34d399","#6ee7b7","#a7f3d0"][Math.floor(Math.random()*5)],left:Math.random()*100+"%",top:-10},animate:{y:window.innerHeight+50,x:[0,Math.random()*200-100,Math.random()*200-100],rotate:[0,360,720],scale:[1,.5,1]},transition:{duration:Math.random()*3+2,ease:"easeOut",delay:Math.random()*2},exit:{opacity:0}},S))})}),o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((w,S)=>o.jsx(oe.div,{className:"absolute w-2 h-2 bg-green-200 rounded-full opacity-30",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*15+15,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},S))}),o.jsxs(oe.div,{className:"bg-white/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-4xl w-full text-center relative overflow-hidden border border-white/30 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-emerald-500/5 rounded-3xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx(oe.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:o.jsxs(oe.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[o.jsx(ux,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-green-500 mx-auto drop-shadow-lg"}),o.jsx(oe.div,{className:"absolute -top-3 -right-3 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.25,1],rotate:[0,12,-12,0]},transition:{duration:2,repeat:1/0},children:o.jsx(o$,{className:"w-5 h-5 text-yellow-600"})}),o.jsx(oe.div,{className:"absolute -bottom-2 -left-2 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0,delay:.5},children:o.jsx(ZU,{className:"w-4 h-4 text-green-600"})})]})}),o.jsxs(oe.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:[o.jsx(oe.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{scale:[1,1.04,1]},transition:{duration:2,repeat:1/0},children:"¡Pago exitoso!"}),o.jsx(oe.div,{className:"flex items-center justify-center gap-2 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[...Array(5)].map((w,S)=>o.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+S*.08,type:"spring"},children:o.jsx(t$,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-400 fill-current"})},S))}),o.jsxs(oe.p,{className:"text-gray-700 text-sm sm:text-base md:text-lg leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:["Tu transacción fue procesada correctamente.",o.jsx("br",{}),"¡Gracias por tu compra en ",o.jsx("span",{className:"font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PlayCenter Universal"}),"!"]})]}),e?o.jsx(oe.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 border border-green-200",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[o.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(UU,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"}),"Resumen de tu compra"]}),o.jsx(oe.div,{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold",whileHover:{scale:1.05},children:"✓ Completado"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 text-xs sm:text-sm flex-shrink-0",children:"Orden ID:"}),o.jsx("span",{className:"font-mono text-xs sm:text-sm bg-gray-100 px-2 py-1 rounded break-all",children:e.numeroOrden||((y=e.id)==null?void 0:y.slice(-8))})]}),o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("span",{className:"text-gray-600 text-xs sm:text-sm flex-shrink-0",children:"Email:"}),o.jsx("span",{className:"font-medium text-xs sm:text-sm break-all text-right",children:e.userEmail})]}),o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("span",{className:"text-gray-600 text-xs sm:text-sm flex-shrink-0",children:"Fecha:"}),o.jsx("span",{className:"font-medium text-xs sm:text-sm text-right",children:g(e.fecha)})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("span",{className:"text-gray-600 text-xs sm:text-sm flex-shrink-0",children:"Método de pago:"}),o.jsxs("span",{className:"font-medium text-xs sm:text-sm flex items-center gap-1.5 sm:gap-2",children:[o.jsx(m4,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),"CardNet"]})]}),o.jsxs("div",{className:"flex justify-between items-center gap-2",children:[o.jsx("span",{className:"text-gray-600 text-xs sm:text-sm",children:"Total:"}),o.jsx("span",{className:"text-xl sm:text-2xl font-bold text-green-600",children:f(e.total)})]})]})]}),((x=e.productos)==null?void 0:x.length)>0&&o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>h(w=>!w),className:"flex items-center gap-2 text-green-600 hover:text-green-800 font-medium mb-3 sm:mb-4 transition-colors text-sm sm:text-base",type:"button",children:[o.jsxs("span",{children:["Ver productos (",e.productos.length,")"]}),o.jsx(oe.div,{animate:{rotate:u?180:0},transition:{duration:.25},children:"▼"})]}),o.jsx(dn,{children:u&&o.jsx(oe.div,{className:"space-y-2 sm:space-y-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:e.productos.map((w,S)=>o.jsxs(oe.div,{className:"flex items-center justify-between bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 border border-green-100 gap-3",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:S*.06},whileHover:{scale:1.02},children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0",children:"🎮"}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("span",{className:"font-semibold text-gray-800 text-sm sm:text-base block truncate",children:w.nombre}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:["Cantidad: ",w.cantidad," × ",f(w.precio)]})]})]}),o.jsx("span",{className:"font-bold text-green-600 text-sm sm:text-base flex-shrink-0",children:f((Number(w.precio)||0)*w.cantidad)})]},`${w.id}-${S}`))})})]})]})}):null,o.jsxs(oe.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center mb-6 sm:mb-8",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:1.2},children:[o.jsx(oe.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(St,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(ud,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Seguir comprando"})]})}),o.jsx(oe.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(St,{to:"/profile",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white text-gray-700 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 hover:border-gray-300 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(VU,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Ver historial"})]})})]}),r&&o.jsxs(oe.details,{className:"mt-2 text-left",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},children:[o.jsx("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-800 font-medium mb-2 text-xs sm:text-sm",children:"Detalles técnicos de la transacción"}),o.jsx("div",{className:"bg-gray-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 max-h-48 sm:max-h-64 overflow-y-auto",children:o.jsx("pre",{className:"whitespace-pre-wrap text-gray-600 text-xs font-mono",children:JSON.stringify(r,null,2)})})]})]})]})]})}function kG(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function SG(){const[t]=Mx(),{usuarioInfo:e}=Br(),{carrito:n}=Ud(),[r,i]=T.useState(!1),[a,c]=T.useState(!1);T.useEffect(()=>{const h=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=h}},[]),T.useEffect(()=>{const f=setTimeout(async()=>{var S;if(r)return;const g=t.get("session"),y=kG(),x=(S=y==null?void 0:y.items)!=null&&S.length?y.items:(n||[]).map(b=>({id:b.id,nombre:b.nombre,precio:Number(b.precio)||0,cantidad:b.cantidad})),w=(y==null?void 0:y.total)??(n||[]).reduce((b,N)=>b+(Number(N.precio)||0)*N.cantidad,0);try{if(g){const b=an(Ft(Pe,"orders"),xr("raw.SESSION","==",g),wm(1));if(!(await Ir(b)).empty){try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0);return}}if(e&&(x.length>0||w>=0)){const b=x.map(N=>({id:N.id,nombre:N.nombre,precio:Number(N.precio)||0,cantidad:N.cantidad,imagen:N.imagen||"/Productos/default.jpg",empresa:N.empresa||"N/A",subtotal:(Number(N.precio)||0)*N.cantidad}));await Em(Ft(Pe,"orders"),{userId:e.uid,userEmail:e.email,userName:e.displayName,userPhone:(e==null?void 0:e.telefono)||null,productos:b,total:w,subtotal:b.reduce((N,j)=>N+j.subtotal,0),impuestos:0,envio:0,estado:"cancelado",estadoPago:"fallido",metodoPago:"CardNet",fecha:uC(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(y==null?void 0:y.mode)||(y?"unknown":"cart"),direccionEntrega:(e==null?void 0:e.direccionCompleta)||null,telefonoContacto:(e==null?void 0:e.telefono)||null,notasEspeciales:null,raw:{SESSION:g||null}});try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0)}}catch(b){console.error("Error guardando orden cancelada:",b)}},600);return()=>clearTimeout(f)},[e,n,r,t]);const u=[{icon:Vp,title:"Datos incorrectos",desc:"Verifica la información de tu tarjeta"},{icon:p4,title:"Sesión expirada",desc:"El tiempo límite para el pago se agotó"},{icon:gk,title:"Fondos insuficientes",desc:"Tu tarjeta no tiene saldo disponible"},{icon:Lp,title:"Cancelado por el usuario",desc:"El pago fue cancelado manualmente"}];return o.jsxs(oe.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-rose-50 via-red-50 to-pink-50 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(16)].map((h,f)=>o.jsx(oe.div,{className:"absolute w-3 h-3 bg-red-200 rounded-full opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight],rotate:[0,360]},transition:{duration:Math.random()*14+14,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},f))}),o.jsxs(oe.div,{className:"bg-white/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-pink-500/5 rounded-3xl"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx(oe.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:o.jsxs(oe.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[o.jsx(Lp,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-red-500 mx-auto drop-shadow-lg"}),o.jsx(oe.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:o.jsx(gk,{className:"w-4 h-4 text-red-600"})})]})}),o.jsx(oe.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent mb-4 sm:mb-6",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:"Pago cancelado"}),o.jsxs(oe.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.45},children:[o.jsx("p",{className:"text-gray-700 text-base sm:text-lg leading-relaxed mb-4",children:"Tu transacción no pudo ser completada."}),o.jsxs(oe.div,{className:"inline-flex items-center gap-2 bg-green-50 text-green-700 px-4 py-2 rounded-full border border-green-200",initial:{scale:0},animate:{scale:1},transition:{delay:.65,type:"spring"},children:[o.jsx(Vp,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"No se realizó ningún cargo a tu tarjeta"})]})]}),o.jsxs(oe.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.6},children:[o.jsxs("button",{onClick:()=>c(h=>!h),className:"flex items-center gap-2 mx-auto text-gray-600 hover:text-gray-800 transition-colors",type:"button",children:[o.jsx("span",{className:"font-medium",children:"¿Por qué falló mi pago?"}),o.jsx(oe.div,{animate:{rotate:a?180:0},transition:{duration:.25},children:o.jsx(KU,{className:"w-4 h-4"})})]}),o.jsx(dn,{children:a&&o.jsx(oe.div,{className:"mt-4 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:u.map((h,f)=>o.jsx(oe.div,{className:"bg-gray-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:f*.08},whileHover:{scale:1.02,backgroundColor:"#f8fafc"},children:o.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[o.jsx("div",{className:"p-2 bg-red-100 rounded-lg flex-shrink-0",children:o.jsx(h.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"})}),o.jsxs("div",{className:"text-left flex-1 min-w-0",children:[o.jsx("h4",{className:"font-semibold text-gray-800 mb-1 text-sm sm:text-base",children:h.title}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 break-words",children:h.desc})]})]})},f))})})]}),o.jsxs(oe.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.8},children:[o.jsx(oe.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(St,{to:"/carrito",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(YU,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Intentar de nuevo"})]})}),o.jsx(oe.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:o.jsxs(St,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white text-gray-700 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 hover:border-gray-300 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[o.jsx(ud,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{children:"Ir al inicio"})]})})]}),o.jsxs(oe.div,{className:"mt-6 sm:mt-8 p-4 sm:p-5 bg-blue-50 rounded-lg sm:rounded-xl border border-blue-200",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:[o.jsx("h3",{className:"font-semibold text-blue-800 mb-2 text-sm sm:text-base",children:"¿Necesitas ayuda?"}),o.jsx("p",{className:"text-blue-700 text-xs sm:text-sm",children:"Si el problema persiste, contacta a nuestro equipo de soporte. Estamos aquí para ayudarte a completar tu compra."}),o.jsx(oe.a,{href:"/contacto",className:"mt-3 inline-block text-blue-600 font-semibold hover:text-blue-800 transition-colors",whileHover:{scale:1.03},children:"Contactar soporte →"})]})]})]})]})}function TG(){const t=Bs();return o.jsx(IC,{children:o.jsx(dn,{mode:"wait",children:o.jsxs(PP,{location:t,children:[o.jsx(ir,{path:"/",element:o.jsx(Nr,{children:o.jsx(nB,{})})}),o.jsx(ir,{path:"/profile",element:o.jsx(bG,{children:o.jsx(Nr,{children:o.jsx(uB,{})})})}),o.jsx(ir,{path:"/admin",element:o.jsx(Qz,{})}),o.jsx(ir,{path:"/producto/:id",element:o.jsx(Nr,{children:o.jsx(gB,{})})}),o.jsx(ir,{path:"/carrito",element:o.jsx(Nr,{children:o.jsx(bB,{})})}),o.jsx(ir,{path:"/contacto",element:o.jsx(Nr,{children:o.jsx(wB,{})})}),o.jsx(ir,{path:"/nosotros",element:o.jsx(Nr,{children:o.jsx(SB,{})})}),o.jsx(ir,{path:"/buscar",element:o.jsx(Nr,{children:o.jsx(gG,{})})}),o.jsx(ir,{path:"/categorias",element:o.jsx(Nr,{children:o.jsx(kS,{})})}),o.jsx(ir,{path:"/Productos/:categoria?",element:o.jsx(Nr,{children:o.jsx(kS,{})})}),o.jsx(ir,{path:"/estafetas",element:o.jsx(Nr,{children:o.jsx(vG,{})})}),o.jsx(ir,{path:"/vender",element:o.jsx(Nr,{children:o.jsx(_B,{})})}),o.jsx(ir,{path:"/tiendas",element:o.jsx(Nr,{children:o.jsx(EB,{})})}),o.jsx(ir,{path:"/historial",element:o.jsx(Nr,{children:o.jsx(kB,{})})}),o.jsx(ir,{path:"/payment/pending",element:o.jsx(Nr,{children:o.jsx(_G,{})})}),o.jsx(ir,{path:"/payment/success",element:o.jsx(Nr,{children:o.jsx(EG,{})})}),o.jsx(ir,{path:"/payment/cancel",element:o.jsx(Nr,{children:o.jsx(SG,{})})})]},t.pathname)})})}function Nr({children:t}){return o.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:t})}function NG(){const{pathname:t}=Bs(),e=ai(),{usuario:n}=Br(),{abrirModal:r}=Gc(),[i,a]=T.useState(!1),c=h=>t===h,u=h=>{(h==="/profile"||h==="/carrito")&&!n?a(!0):e(h)};return o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-md flex justify-around items-center h-14 text-sm xl:hidden transition-colors duration-300",children:[o.jsx(zu,{onClick:()=>u("/"),icon:o.jsx(hU,{}),label:"Inicio",active:c("/")}),o.jsx(zu,{onClick:()=>u("/tiendas"),icon:o.jsx(mU,{}),label:"Tiendas",active:c("/tiendas")}),o.jsx(zu,{onClick:()=>u("/categorias"),icon:o.jsx(gU,{}),label:"Categorías",active:c("/categorias")}),o.jsx(zu,{onClick:()=>u("/carrito"),icon:o.jsx(lx,{}),label:"Carrito",active:c("/carrito")}),o.jsx(zu,{onClick:()=>u("/profile"),icon:o.jsx(h4,{}),label:"Perfil",active:c("/profile")})]}),o.jsx(Im,{isOpen:i,onClose:()=>a(!1),onIniciarSesion:()=>{a(!1),r()}})]})}function zu({onClick:t,icon:e,label:n,active:r}){return o.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center w-full h-full transition-colors ${r?"text-[#4FC3F7] font-semibold":"text-gray-600 dark:text-gray-300 hover:text-[#4FC3F7] dark:hover:text-[#60a5fa]"}`,"aria-label":n,type:"button",children:[o.jsx("div",{className:"text-lg",children:e}),o.jsx("div",{children:n})]})}function CG(){const{modalAbierto:t,setModalAbierto:e,modo:n,setModo:r}=Gc(),{login:i,signup:a,usuario:c}=Br(),[u,h]=T.useState(n),[f,g]=T.useState(""),[y,x]=T.useState(""),[w,S]=T.useState(""),[b,N]=T.useState("");T.useEffect(()=>{h(n),N(""),g(""),x(""),S("")},[t,n]);async function j(M){M.preventDefault(),N("");try{if(u==="login")await i(f,y);else{const O=await a(f,y);await Jn(ot(Pe,"users",O.uid),{displayName:w||"Usuario",email:f,telefono:"",direccion:"",codigo:"",metodoEntrega:"",admin:!1,createdAt:new Date}),w&&await updateProfile(O,{displayName:w})}e(!1)}catch(O){N("Error: "+O.message)}}return t?o.jsx("div",{onClick:()=>e(!1),className:"fixed inset-0 bg-gradient-to-br from-black/90 to-gray-900/90 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:o.jsxs(oe.div,{onClick:M=>M.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"relative bg-[#0f172a] text-white rounded-xl shadow-2xl w-full max-w-md p-6 border border-[#3b82f6]/40",children:[o.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold",children:"×"}),o.jsx("h2",{className:"text-2xl font-bold mb-4 text-center flex items-center justify-center gap-2",children:u==="login"?o.jsxs(o.Fragment,{children:[o.jsx(h4,{className:"text-[#3b82f6]"})," Iniciar Sesión"]}):o.jsxs(o.Fragment,{children:[o.jsx(xU,{className:"text-[#3b82f6]"})," Registrarse"]})}),b&&o.jsx("p",{className:"text-red-400 mb-4 text-center font-semibold",children:b}),o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[u==="signup"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1",children:"Nombre de usuario"}),o.jsx("input",{type:"text",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:w,onChange:M=>S(M.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1",children:"Correo electrónico"}),o.jsx("input",{type:"email",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:f,onChange:M=>g(M.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm mb-1",children:"Contraseña"}),o.jsx("input",{type:"password",required:!0,className:"w-full bg-[#1e293b] border border-[#3b82f6]/40 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3b82f6]",value:y,onChange:M=>x(M.target.value)})]}),o.jsx("button",{type:"submit",className:"w-full bg-[#3b82f6] hover:bg-[#2563eb] text-white font-semibold py-2 rounded-lg shadow-lg transition transform hover:scale-105",children:u==="login"?"Iniciar sesión":"Registrarse"})]}),o.jsx("p",{className:"mt-4 text-center text-sm cursor-pointer text-[#3b82f6] hover:underline select-none",onClick:()=>{N("");const M=u==="login"?"signup":"login";h(M),r(M)},children:u==="login"?"¿No tienes una cuenta? Regístrate":"¿Ya tienes cuenta? Inicia sesión"})]})}):null}const AG=()=>{const{pathname:t}=Bs();return T.useEffect(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0;const e=document.querySelector("main");e&&(e.scrollTop=0)},[t]),null};function jG(){Hv();const{theme:t,toggleTheme:e}=Tm(),[n,r]=T.useState(0),i=T.useRef(null),[a,c]=T.useState(!0),u=T.useRef(typeof window<"u"?window.scrollY:0),h=T.useRef(!1),[f,g]=T.useState(!0);T.useEffect(()=>{const x=()=>{const b=document.querySelector("header"),N=b?Math.ceil(b.getBoundingClientRect().height):0;r(N);try{const j=i.current,M=j?Math.ceil(j.getBoundingClientRect().height):0;document.documentElement.style.setProperty("--topbar-height",`${M}px`);const O=N+M;document.documentElement.style.setProperty("--content-offset",`${O}px`)}catch{}};x();const w=()=>{try{typeof window<"u"&&g(window.innerWidth>=1280)}catch{}x()};let S=null;try{if(typeof window<"u"&&"ResizeObserver"in window){S=new ResizeObserver(()=>x());const b=document.querySelector("header");b&&S.observe(b),i.current&&S.observe(i.current)}else window.addEventListener("resize",w)}catch{window.addEventListener("resize",w)}return()=>{if(S)try{S.disconnect()}catch{}window.removeEventListener("resize",w)}},[]),T.useEffect(()=>{const x=()=>{h.current||(h.current=!0,requestAnimationFrame(()=>{const w=window.scrollY,S=u.current,b=w-S;w<=0?c(!0):Math.abs(b)<5||(b>0&&w>60?c(!1):b<0&&c(!0)),u.current=w,h.current=!1}))};return window.addEventListener("scroll",x,{passive:!0}),()=>window.removeEventListener("scroll",x)},[]);const y={position:"fixed",left:0,right:0,top:`${n}px`,zIndex:9990,transform:a?"translateY(0)":"translateY(-110%)",transition:"transform 220ms ease, opacity 220ms ease",pointerEvents:a?"auto":"none",display:"flex",margin:0,padding:0};return o.jsxs("div",{ref:i,style:{...y,padding:"0.25rem 0.5rem",margin:0},className:"flex topbar-base topbar-tech bg-white dark:bg-gradient-to-r dark:from-blue-900 dark:via-blue-800 dark:to-blue-900 shadow-md justify-between items-center transition-colors duration-300",role:"region","aria-label":"Top bar",children:[o.jsx("div",{className:"flex items-center text-[10px] sm:text-xs md:text-sm whitespace-nowrap theme-text text-gray-700 dark:text-gray-200",children:o.jsx("span",{children:"Sitio oficial de las tiendas de videojuegos de RD"})}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("label",{className:"theme-toggle",children:[o.jsx("input",{type:"checkbox",checked:t==="dark",onChange:e,className:"theme-toggle__input","aria-label":"Cambiar tema"}),o.jsxs("svg",{className:"theme-toggle__icon theme-toggle__icon--sun",fill:"none",height:"18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"18",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("line",{x1:"12",x2:"12",y1:"1",y2:"3"}),o.jsx("line",{x1:"12",x2:"12",y1:"21",y2:"23"}),o.jsx("line",{x1:"4.22",x2:"5.64",y1:"4.22",y2:"5.64"}),o.jsx("line",{x1:"18.36",x2:"19.78",y1:"18.36",y2:"19.78"}),o.jsx("line",{x1:"1",x2:"3",y1:"12",y2:"12"}),o.jsx("line",{x1:"21",x2:"23",y1:"12",y2:"12"}),o.jsx("line",{x1:"4.22",x2:"5.64",y1:"19.78",y2:"18.36"}),o.jsx("line",{x1:"18.36",x2:"19.78",y1:"5.64",y2:"4.22"})]}),o.jsx("svg",{className:"theme-toggle__icon theme-toggle__icon--moon",viewBox:"0 0 24 24",children:o.jsx("path",{d:"m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z"})})]})})]})}function IG(){const{theme:t}=Tm();return o.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-300",children:[o.jsx(u$,{}),o.jsx(jG,{}),o.jsxs("main",{className:"flex-grow",children:[o.jsx(AG,{}),o.jsx(TG,{})]}),o.jsx(d$,{}),o.jsx(NG,{}),o.jsx(CG,{})]})}function PG(){return o.jsx(mL,{children:o.jsx(IG,{})})}FI.createRoot(document.getElementById("root")).render(o.jsx(zr.StrictMode,{children:o.jsx(UP,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(IC,{children:o.jsx(HP,{children:o.jsx(WP,{children:o.jsx(PG,{})})})})})}));
