function PA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Sh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var My={exports:{}},wf={},Dy={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qj;function IA(){if(qj)return An;qj=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),h=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=h&&B[h]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,N={};function _(B,ce,Se){this.props=B,this.context=ce,this.refs=N,this.updater=Se||w}_.prototype.isReactComponent={},_.prototype.setState=function(B,ce){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ce,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function D(){}D.prototype=_.prototype;function A(B,ce,Se){this.props=B,this.context=ce,this.refs=N,this.updater=Se||w}var L=A.prototype=new D;L.constructor=A,S(L,_.prototype),L.isPureReactComponent=!0;var I=Array.isArray,F=Object.prototype.hasOwnProperty,R={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function M(B,ce,Se){var Ve,$e={},Ke=null,Ye=null;if(ce!=null)for(Ve in ce.ref!==void 0&&(Ye=ce.ref),ce.key!==void 0&&(Ke=""+ce.key),ce)F.call(ce,Ve)&&!E.hasOwnProperty(Ve)&&($e[Ve]=ce[Ve]);var lt=arguments.length-2;if(lt===1)$e.children=Se;else if(1<lt){for(var Re=Array(lt),Ct=0;Ct<lt;Ct++)Re[Ct]=arguments[Ct+2];$e.children=Re}if(B&&B.defaultProps)for(Ve in lt=B.defaultProps,lt)$e[Ve]===void 0&&($e[Ve]=lt[Ve]);return{$$typeof:t,type:B,key:Ke,ref:Ye,props:$e,_owner:R.current}}function O(B,ce){return{$$typeof:t,type:B.type,key:ce,ref:B.ref,props:B.props,_owner:B._owner}}function j(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function U(B){var ce={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Se){return ce[Se]})}var H=/\/+/g;function V(B,ce){return typeof B=="object"&&B!==null&&B.key!=null?U(""+B.key):ce.toString(36)}function K(B,ce,Se,Ve,$e){var Ke=typeof B;(Ke==="undefined"||Ke==="boolean")&&(B=null);var Ye=!1;if(B===null)Ye=!0;else switch(Ke){case"string":case"number":Ye=!0;break;case"object":switch(B.$$typeof){case t:case e:Ye=!0}}if(Ye)return Ye=B,$e=$e(Ye),B=Ve===""?"."+V(Ye,0):Ve,I($e)?(Se="",B!=null&&(Se=B.replace(H,"$&/")+"/"),K($e,ce,Se,"",function(Ct){return Ct})):$e!=null&&(j($e)&&($e=O($e,Se+(!$e.key||Ye&&Ye.key===$e.key?"":(""+$e.key).replace(H,"$&/")+"/")+B)),ce.push($e)),1;if(Ye=0,Ve=Ve===""?".":Ve+":",I(B))for(var lt=0;lt<B.length;lt++){Ke=B[lt];var Re=Ve+V(Ke,lt);Ye+=K(Ke,ce,Se,Re,$e)}else if(Re=y(B),typeof Re=="function")for(B=Re.call(B),lt=0;!(Ke=B.next()).done;)Ke=Ke.value,Re=Ve+V(Ke,lt++),Ye+=K(Ke,ce,Se,Re,$e);else if(Ke==="object")throw ce=String(B),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.");return Ye}function X(B,ce,Se){if(B==null)return B;var Ve=[],$e=0;return K(B,Ve,"","",function(Ke){return ce.call(Se,Ke,$e++)}),Ve}function ne(B){if(B._status===-1){var ce=B._result;ce=ce(),ce.then(function(Se){(B._status===0||B._status===-1)&&(B._status=1,B._result=Se)},function(Se){(B._status===0||B._status===-1)&&(B._status=2,B._result=Se)}),B._status===-1&&(B._status=0,B._result=ce)}if(B._status===1)return B._result.default;throw B._result}var we={current:null},Z={transition:null},le={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:Z,ReactCurrentOwner:R};function re(){throw Error("act(...) is not supported in production builds of React.")}return An.Children={map:X,forEach:function(B,ce,Se){X(B,function(){ce.apply(this,arguments)},Se)},count:function(B){var ce=0;return X(B,function(){ce++}),ce},toArray:function(B){return X(B,function(ce){return ce})||[]},only:function(B){if(!j(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},An.Component=_,An.Fragment=n,An.Profiler=i,An.PureComponent=A,An.StrictMode=r,An.Suspense=u,An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,An.act=re,An.cloneElement=function(B,ce,Se){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ve=S({},B.props),$e=B.key,Ke=B.ref,Ye=B._owner;if(ce!=null){if(ce.ref!==void 0&&(Ke=ce.ref,Ye=R.current),ce.key!==void 0&&($e=""+ce.key),B.type&&B.type.defaultProps)var lt=B.type.defaultProps;for(Re in ce)F.call(ce,Re)&&!E.hasOwnProperty(Re)&&(Ve[Re]=ce[Re]===void 0&&lt!==void 0?lt[Re]:ce[Re])}var Re=arguments.length-2;if(Re===1)Ve.children=Se;else if(1<Re){lt=Array(Re);for(var Ct=0;Ct<Re;Ct++)lt[Ct]=arguments[Ct+2];Ve.children=lt}return{$$typeof:t,type:B.type,key:$e,ref:Ke,props:Ve,_owner:Ye}},An.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},An.createElement=M,An.createFactory=function(B){var ce=M.bind(null,B);return ce.type=B,ce},An.createRef=function(){return{current:null}},An.forwardRef=function(B){return{$$typeof:d,render:B}},An.isValidElement=j,An.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:ne}},An.memo=function(B,ce){return{$$typeof:m,type:B,compare:ce===void 0?null:ce}},An.startTransition=function(B){var ce=Z.transition;Z.transition={};try{B()}finally{Z.transition=ce}},An.unstable_act=re,An.useCallback=function(B,ce){return we.current.useCallback(B,ce)},An.useContext=function(B){return we.current.useContext(B)},An.useDebugValue=function(){},An.useDeferredValue=function(B){return we.current.useDeferredValue(B)},An.useEffect=function(B,ce){return we.current.useEffect(B,ce)},An.useId=function(){return we.current.useId()},An.useImperativeHandle=function(B,ce,Se){return we.current.useImperativeHandle(B,ce,Se)},An.useInsertionEffect=function(B,ce){return we.current.useInsertionEffect(B,ce)},An.useLayoutEffect=function(B,ce){return we.current.useLayoutEffect(B,ce)},An.useMemo=function(B,ce){return we.current.useMemo(B,ce)},An.useReducer=function(B,ce,Se){return we.current.useReducer(B,ce,Se)},An.useRef=function(B){return we.current.useRef(B)},An.useState=function(B){return we.current.useState(B)},An.useSyncExternalStore=function(B,ce,Se){return we.current.useSyncExternalStore(B,ce,Se)},An.useTransition=function(){return we.current.useTransition()},An.version="18.3.1",An}var Gj;function h1(){return Gj||(Gj=1,Dy.exports=IA()),Dy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kj;function RA(){if(Kj)return wf;Kj=1;var t=h1(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,u,m){var g,h={},y=null,w=null;m!==void 0&&(y=""+m),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(w=u.ref);for(g in u)r.call(u,g)&&!a.hasOwnProperty(g)&&(h[g]=u[g]);if(d&&d.defaultProps)for(g in u=d.defaultProps,u)h[g]===void 0&&(h[g]=u[g]);return{$$typeof:e,type:d,key:y,ref:w,props:h,_owner:i.current}}return wf.Fragment=n,wf.jsx=l,wf.jsxs=l,wf}var Yj;function LA(){return Yj||(Yj=1,My.exports=RA()),My.exports}var s=LA(),b=h1();const Ns=Sh(b),$v=PA({__proto__:null,default:Ns},[b]);var Jp={},Oy={exports:{}},Fi={},Vy={exports:{}},zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xj;function MA(){return Xj||(Xj=1,function(t){function e(Z,le){var re=Z.length;Z.push(le);e:for(;0<re;){var B=re-1>>>1,ce=Z[B];if(0<i(ce,le))Z[B]=le,Z[re]=ce,re=B;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var le=Z[0],re=Z.pop();if(re!==le){Z[0]=re;e:for(var B=0,ce=Z.length,Se=ce>>>1;B<Se;){var Ve=2*(B+1)-1,$e=Z[Ve],Ke=Ve+1,Ye=Z[Ke];if(0>i($e,re))Ke<ce&&0>i(Ye,$e)?(Z[B]=Ye,Z[Ke]=re,B=Ke):(Z[B]=$e,Z[Ve]=re,B=Ve);else if(Ke<ce&&0>i(Ye,re))Z[B]=Ye,Z[Ke]=re,B=Ke;else break e}}return le}function i(Z,le){var re=Z.sortIndex-le.sortIndex;return re!==0?re:Z.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],m=[],g=1,h=null,y=3,w=!1,S=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Z){for(var le=n(m);le!==null;){if(le.callback===null)r(m);else if(le.startTime<=Z)r(m),le.sortIndex=le.expirationTime,e(u,le);else break;le=n(m)}}function I(Z){if(N=!1,L(Z),!S)if(n(u)!==null)S=!0,ne(F);else{var le=n(m);le!==null&&we(I,le.startTime-Z)}}function F(Z,le){S=!1,N&&(N=!1,D(M),M=-1),w=!0;var re=y;try{for(L(le),h=n(u);h!==null&&(!(h.expirationTime>le)||Z&&!U());){var B=h.callback;if(typeof B=="function"){h.callback=null,y=h.priorityLevel;var ce=B(h.expirationTime<=le);le=t.unstable_now(),typeof ce=="function"?h.callback=ce:h===n(u)&&r(u),L(le)}else r(u);h=n(u)}if(h!==null)var Se=!0;else{var Ve=n(m);Ve!==null&&we(I,Ve.startTime-le),Se=!1}return Se}finally{h=null,y=re,w=!1}}var R=!1,E=null,M=-1,O=5,j=-1;function U(){return!(t.unstable_now()-j<O)}function H(){if(E!==null){var Z=t.unstable_now();j=Z;var le=!0;try{le=E(!0,Z)}finally{le?V():(R=!1,E=null)}}else R=!1}var V;if(typeof A=="function")V=function(){A(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,X=K.port2;K.port1.onmessage=H,V=function(){X.postMessage(null)}}else V=function(){_(H,0)};function ne(Z){E=Z,R||(R=!0,V())}function we(Z,le){M=_(function(){Z(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,ne(F))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var re=y;y=le;try{return Z()}finally{y=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,le){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var re=y;y=Z;try{return le()}finally{y=re}},t.unstable_scheduleCallback=function(Z,le,re){var B=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?B+re:B):re=B,Z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=re+ce,Z={id:g++,callback:le,priorityLevel:Z,startTime:re,expirationTime:ce,sortIndex:-1},re>B?(Z.sortIndex=re,e(m,Z),n(u)===null&&Z===n(m)&&(N?(D(M),M=-1):N=!0,we(I,re-B))):(Z.sortIndex=ce,e(u,Z),S||w||(S=!0,ne(F))),Z},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(Z){var le=y;return function(){var re=y;y=le;try{return Z.apply(this,arguments)}finally{y=re}}}}(zy)),zy}var Qj;function DA(){return Qj||(Qj=1,Vy.exports=MA()),Vy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jj;function OA(){if(Jj)return Fi;Jj=1;var t=h1(),e=DA();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},h={};function y(o){return u.call(h,o)?!0:u.call(g,o)?!1:m.test(o)?h[o]=!0:(g[o]=!0,!1)}function w(o,c,f,x){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,f,x){if(c===null||typeof c>"u"||w(o,c,f,x))return!0;if(x)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function N(o,c,f,x,k,T,W){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=k,this.mustUseProperty=f,this.propertyName=o,this.type=c,this.sanitizeURL=T,this.removeEmptyString=W}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){_[o]=new N(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];_[c]=new N(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){_[o]=new N(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){_[o]=new N(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){_[o]=new N(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){_[o]=new N(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){_[o]=new N(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){_[o]=new N(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){_[o]=new N(o,5,!1,o.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function A(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(D,A);_[c]=new N(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(D,A);_[c]=new N(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(D,A);_[c]=new N(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){_[o]=new N(o,1,!1,o.toLowerCase(),null,!1,!1)}),_.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){_[o]=new N(o,1,!1,o.toLowerCase(),null,!0,!0)});function L(o,c,f,x){var k=_.hasOwnProperty(c)?_[c]:null;(k!==null?k.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,f,k,x)&&(f=null),x||k===null?y(c)&&(f===null?o.removeAttribute(c):o.setAttribute(c,""+f)):k.mustUseProperty?o[k.propertyName]=f===null?k.type===3?!1:"":f:(c=k.attributeName,x=k.attributeNamespace,f===null?o.removeAttribute(c):(k=k.type,f=k===3||k===4&&f===!0?"":""+f,x?o.setAttributeNS(x,c,f):o.setAttribute(c,f))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),R=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),Z=Symbol.iterator;function le(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var re=Object.assign,B;function ce(o){if(B===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);B=c&&c[1]||""}return`
`+B+o}var Se=!1;function Ve(o,c){if(!o||Se)return"";Se=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(_e){var x=_e}Reflect.construct(o,[],c)}else{try{c.call()}catch(_e){x=_e}o.call(c.prototype)}else{try{throw Error()}catch(_e){x=_e}o()}}catch(_e){if(_e&&x&&typeof _e.stack=="string"){for(var k=_e.stack.split(`
`),T=x.stack.split(`
`),W=k.length-1,ee=T.length-1;1<=W&&0<=ee&&k[W]!==T[ee];)ee--;for(;1<=W&&0<=ee;W--,ee--)if(k[W]!==T[ee]){if(W!==1||ee!==1)do if(W--,ee--,0>ee||k[W]!==T[ee]){var se=`
`+k[W].replace(" at new "," at ");return o.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",o.displayName)),se}while(1<=W&&0<=ee);break}}}finally{Se=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?ce(o):""}function $e(o){switch(o.tag){case 5:return ce(o.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return o=Ve(o.type,!1),o;case 11:return o=Ve(o.type.render,!1),o;case 1:return o=Ve(o.type,!0),o;default:return""}}function Ke(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case E:return"Fragment";case R:return"Portal";case O:return"Profiler";case M:return"StrictMode";case V:return"Suspense";case K:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case U:return(o.displayName||"Context")+".Consumer";case j:return(o._context.displayName||"Context")+".Provider";case H:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case X:return c=o.displayName||null,c!==null?c:Ke(o.type)||"Memo";case ne:c=o._payload,o=o._init;try{return Ke(o(c))}catch{}}return null}function Ye(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ke(c);case 8:return c===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function lt(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Re(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ct(o){var c=Re(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var k=f.get,T=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return k.call(this)},set:function(W){x=""+W,T.call(this,W)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(W){x=""+W},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ue(o){o._valueTracker||(o._valueTracker=Ct(o))}function ot(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),x="";return o&&(x=Re(o)?o.checked?"true":"false":o.value),o=x,o!==f?(c.setValue(o),!0):!1}function ct(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function it(o,c){var f=c.checked;return re({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function Lt(o,c){var f=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;f=lt(c.value!=null?c.value:f),o._wrapperState={initialChecked:x,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Bt(o,c){c=c.checked,c!=null&&L(o,"checked",c,!1)}function Ge(o,c){Bt(o,c);var f=lt(c.value),x=c.type;if(f!=null)x==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Wt(o,c.type,f):c.hasOwnProperty("defaultValue")&&Wt(o,c.type,lt(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function mn(o,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,f||c===o.value||(o.value=c),o.defaultValue=c}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function Wt(o,c,f){(c!=="number"||ct(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var an=Array.isArray;function At(o,c,f,x){if(o=o.options,c){c={};for(var k=0;k<f.length;k++)c["$"+f[k]]=!0;for(f=0;f<o.length;f++)k=c.hasOwnProperty("$"+o[f].value),o[f].selected!==k&&(o[f].selected=k),k&&x&&(o[f].defaultSelected=!0)}else{for(f=""+lt(f),c=null,k=0;k<o.length;k++){if(o[k].value===f){o[k].selected=!0,x&&(o[k].defaultSelected=!0);return}c!==null||o[k].disabled||(c=o[k])}c!==null&&(c.selected=!0)}}function bn(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return re({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ht(o,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(n(92));if(an(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),f=c}o._wrapperState={initialValue:lt(f)}}function ze(o,c){var f=lt(c.value),x=lt(c.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),c.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),x!=null&&(o.defaultValue=""+x)}function Y(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function ie(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?ie(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var he,He=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,x,k){MSApp.execUnsafeLocalFunction(function(){return o(c,f,x,k)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(he=he||document.createElement("div"),he.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=he.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function ge(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var Ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Be=["Webkit","ms","Moz","O"];Object.keys(Ae).forEach(function(o){Be.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ae[c]=Ae[o]})});function Ze(o,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||Ae.hasOwnProperty(o)&&Ae[o]?(""+c).trim():c+"px"}function Rt(o,c){o=o.style;for(var f in c)if(c.hasOwnProperty(f)){var x=f.indexOf("--")===0,k=Ze(f,c[f],x);f==="float"&&(f="cssFloat"),x?o.setProperty(f,k):o[f]=k}}var Ie=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(o,c){if(c){if(Ie[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function ft(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Te=null;function nt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ut=null,kn=null,Ce=null;function yt(o){if(o=md(o)){if(typeof ut!="function")throw Error(n(280));var c=o.stateNode;c&&(c=Nu(c),ut(o.stateNode,o.type,c))}}function on(o){kn?Ce?Ce.push(o):Ce=[o]:kn=o}function Nn(){if(kn){var o=kn,c=Ce;if(Ce=kn=null,yt(o),c)for(o=0;o<c.length;o++)yt(c[o])}}function Wn(o,c){return o(c)}function Ra(){}var Me=!1;function Xr(o,c,f){if(Me)return o(c,f);Me=!0;try{return Wn(o,c,f)}finally{Me=!1,(kn!==null||Ce!==null)&&(Ra(),Nn())}}function pn(o,c){var f=o.stateNode;if(f===null)return null;var x=Nu(f);if(x===null)return null;f=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var si=!1;if(d)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){si=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{si=!1}function Yi(o,c,f,x,k,T,W,ee,se){var _e=Array.prototype.slice.call(arguments,3);try{c.apply(f,_e)}catch(Je){this.onError(Je)}}var Ei=!1,wr=null,Cs=!1,jr=null,vi={onError:function(o){Ei=!0,wr=o}};function zs(o,c,f,x,k,T,W,ee,se){Ei=!1,wr=null,Yi.apply(vi,arguments)}function Xi(o,c,f,x,k,T,W,ee,se){if(zs.apply(this,arguments),Ei){if(Ei){var _e=wr;Ei=!1,wr=null}else throw Error(n(198));Cs||(Cs=!0,jr=_e)}}function J(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function te(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Le(o){if(J(o)!==o)throw Error(n(188))}function xe(o){var c=o.alternate;if(!c){if(c=J(o),c===null)throw Error(n(188));return c!==o?null:o}for(var f=o,x=c;;){var k=f.return;if(k===null)break;var T=k.alternate;if(T===null){if(x=k.return,x!==null){f=x;continue}break}if(k.child===T.child){for(T=k.child;T;){if(T===f)return Le(k),o;if(T===x)return Le(k),c;T=T.sibling}throw Error(n(188))}if(f.return!==x.return)f=k,x=T;else{for(var W=!1,ee=k.child;ee;){if(ee===f){W=!0,f=k,x=T;break}if(ee===x){W=!0,x=k,f=T;break}ee=ee.sibling}if(!W){for(ee=T.child;ee;){if(ee===f){W=!0,f=T,x=k;break}if(ee===x){W=!0,x=T,f=k;break}ee=ee.sibling}if(!W)throw Error(n(189))}}if(f.alternate!==x)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:c}function ve(o){return o=xe(o),o!==null?Xe(o):null}function Xe(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Xe(o);if(c!==null)return c;o=o.sibling}return null}var et=e.unstable_scheduleCallback,tt=e.unstable_cancelCallback,Pt=e.unstable_shouldYield,at=e.unstable_requestPaint,me=e.unstable_now,ke=e.unstable_getCurrentPriorityLevel,vt=e.unstable_ImmediatePriority,tn=e.unstable_UserBlockingPriority,Vn=e.unstable_NormalPriority,In=e.unstable_LowPriority,Qr=e.unstable_IdlePriority,Kn=null,zn=null;function os(o){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Kn,o,void 0,(o.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:bi,Es=Math.log,ii=Math.LN2;function bi(o){return o>>>=0,o===0?32:31-(Es(o)/ii|0)|0}var Qi=64,Ji=4194304;function Ts(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function wi(o,c){var f=o.pendingLanes;if(f===0)return 0;var x=0,k=o.suspendedLanes,T=o.pingedLanes,W=f&268435455;if(W!==0){var ee=W&~k;ee!==0?x=Ts(ee):(T&=W,T!==0&&(x=Ts(T)))}else W=f&~k,W!==0?x=Ts(W):T!==0&&(x=Ts(T));if(x===0)return 0;if(c!==0&&c!==x&&(c&k)===0&&(k=x&-x,T=c&-c,k>=T||k===16&&(T&4194240)!==0))return c;if((x&4)!==0&&(x|=f&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=x;0<c;)f=31-jt(c),k=1<<f,x|=o[f],c&=~k;return x}function Xt(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(o,c){for(var f=o.suspendedLanes,x=o.pingedLanes,k=o.expirationTimes,T=o.pendingLanes;0<T;){var W=31-jt(T),ee=1<<W,se=k[W];se===-1?((ee&f)===0||(ee&x)!==0)&&(k[W]=Xt(ee,c)):se<=c&&(o.expiredLanes|=ee),T&=~ee}}function Rr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Fr(){var o=Qi;return Qi<<=1,(Qi&4194240)===0&&(Qi=64),o}function Ti(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function Ai(o,c,f){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-jt(c),o[c]=f}function Sn(o,c){var f=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<f;){var k=31-jt(f),T=1<<k;c[k]=0,x[k]=-1,o[k]=-1,f&=~T}}function As(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var x=31-jt(f),k=1<<x;k&c|o[x]&c&&(o[x]|=c),f&=~k}}var hn=0;function Fs(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var mo,La,Zi,po,Yo,$s=!1,Pi=[],or=null,ls=null,ai=null,Jr=new Map,Cr=new Map,bs=[],Xo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ae(o,c){switch(o){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Jr.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cr.delete(c.pointerId)}}function Ee(o,c,f,x,k,T){return o===null||o.nativeEvent!==T?(o={blockedOn:c,domEventName:f,eventSystemFlags:x,nativeEvent:T,targetContainers:[k]},c!==null&&(c=md(c),c!==null&&La(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),o)}function ht(o,c,f,x,k){switch(c){case"focusin":return or=Ee(or,o,c,f,x,k),!0;case"dragenter":return ls=Ee(ls,o,c,f,x,k),!0;case"mouseover":return ai=Ee(ai,o,c,f,x,k),!0;case"pointerover":var T=k.pointerId;return Jr.set(T,Ee(Jr.get(T)||null,o,c,f,x,k)),!0;case"gotpointercapture":return T=k.pointerId,Cr.set(T,Ee(Cr.get(T)||null,o,c,f,x,k)),!0}return!1}function xt(o){var c=al(o.target);if(c!==null){var f=J(c);if(f!==null){if(c=f.tag,c===13){if(c=te(f),c!==null){o.blockedOn=c,Yo(o.priority,function(){Zi(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Et(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=Qo(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var x=new f.constructor(f.type,f);Te=x,f.target.dispatchEvent(x),Te=null}else return c=md(f),c!==null&&La(c),o.blockedOn=f,!1;c.shift()}return!0}function Mt(o,c,f){Et(o)&&f.delete(c)}function $t(){$s=!1,or!==null&&Et(or)&&(or=null),ls!==null&&Et(ls)&&(ls=null),ai!==null&&Et(ai)&&(ai=null),Jr.forEach(Mt),Cr.forEach(Mt)}function Ft(o,c){o.blockedOn===c&&(o.blockedOn=null,$s||($s=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$t)))}function hr(o){function c(k){return Ft(k,o)}if(0<Pi.length){Ft(Pi[0],o);for(var f=1;f<Pi.length;f++){var x=Pi[f];x.blockedOn===o&&(x.blockedOn=null)}}for(or!==null&&Ft(or,o),ls!==null&&Ft(ls,o),ai!==null&&Ft(ai,o),Jr.forEach(c),Cr.forEach(c),f=0;f<bs.length;f++)x=bs[f],x.blockedOn===o&&(x.blockedOn=null);for(;0<bs.length&&(f=bs[0],f.blockedOn===null);)xt(f),f.blockedOn===null&&bs.shift()}var $r=I.ReactCurrentBatchConfig,da=!0;function Yn(o,c,f,x){var k=hn,T=$r.transition;$r.transition=null;try{hn=1,ua(o,c,f,x)}finally{hn=k,$r.transition=T}}function go(o,c,f,x){var k=hn,T=$r.transition;$r.transition=null;try{hn=4,ua(o,c,f,x)}finally{hn=k,$r.transition=T}}function ua(o,c,f,x){if(da){var k=Qo(o,c,f,x);if(k===null)wu(o,c,x,Ma,f),ae(o,x);else if(ht(k,o,c,f,x))x.stopPropagation();else if(ae(o,x),c&4&&-1<Xo.indexOf(o)){for(;k!==null;){var T=md(k);if(T!==null&&mo(T),T=Qo(o,c,f,x),T===null&&wu(o,c,x,Ma,f),T===k)break;k=T}k!==null&&x.stopPropagation()}else wu(o,c,x,null,f)}}var Ma=null;function Qo(o,c,f,x){if(Ma=null,o=nt(x),o=al(o),o!==null)if(c=J(o),c===null)o=null;else if(f=c.tag,f===13){if(o=te(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Ma=o,null}function Da(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ke()){case vt:return 1;case tn:return 4;case Vn:case In:return 16;case Qr:return 536870912;default:return 16}default:return 16}}var Us=null,Jo=null,Bs=null;function ha(){if(Bs)return Bs;var o,c=Jo,f=c.length,x,k="value"in Us?Us.value:Us.textContent,T=k.length;for(o=0;o<f&&c[o]===k[o];o++);var W=f-o;for(x=1;x<=W&&c[f-x]===k[T-x];x++);return Bs=k.slice(o,1<x?1-x:void 0)}function $l(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ea(){return!0}function Ul(){return!1}function cs(o){function c(f,x,k,T,W){this._reactName=f,this._targetInst=k,this.type=x,this.nativeEvent=T,this.target=W,this.currentTarget=null;for(var ee in o)o.hasOwnProperty(ee)&&(f=o[ee],this[ee]=f?f(T):T[ee]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ea:Ul,this.isPropagationStopped=Ul,this}return re(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),c}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=cs(Ii),Ri=re({},Ii,{view:0,detail:0}),hu=cs(Ri),Bl,Oa,Va,xo=re({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Va&&(Va&&o.type==="mousemove"?(Bl=o.screenX-Va.screenX,Oa=o.screenY-Va.screenY):Oa=Bl=0,Va=o),Bl)},movementY:function(o){return"movementY"in o?o.movementY:Oa}}),za=cs(xo),Jc=re({},xo,{dataTransfer:0}),fu=cs(Jc),yo=re({},Ri,{relatedTarget:0}),el=cs(yo),Zc=re({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),Ws=cs(Zc),Wl=re({},Ii,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),mu=cs(Wl),ed=re({},Ii,{data:0}),td=cs(ed),Hl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nd(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=pu[o])?!!c[o]:!1}function ta(){return nd}var p=re({},Ri,{key:function(o){if(o.key){var c=Hl[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=$l(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Hs[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(o){return o.type==="keypress"?$l(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?$l(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),C=cs(p),z=re({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G=cs(z),ye=re({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),Pe=cs(ye),mt=re({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xn=cs(mt),Zr=re({},xo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=cs(Zr),ds=[9,13,27,32],Ur=d&&"CompositionEvent"in window,Li=null;d&&"documentMode"in document&&(Li=document.documentMode);var kr=d&&"TextEvent"in window&&!Li,vo=d&&(!Ur||Li&&8<Li&&11>=Li),tl=" ",qh=!1;function ap(o,c){switch(o){case"keyup":return ds.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function op(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var nl=!1;function gu(o,c){switch(o){case"compositionend":return op(c);case"keypress":return c.which!==32?null:(qh=!0,tl);case"textInput":return o=c.data,o===tl&&qh?null:o;default:return null}}function Lx(o,c){if(nl)return o==="compositionend"||!Ur&&ap(o,c)?(o=ha(),Bs=Jo=Us=null,nl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return vo&&c.locale!=="ko"?null:c.data;default:return null}}var Mx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gh(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Mx[o.type]:c==="textarea"}function lp(o,c,f,x){on(x),c=Yl(c,"onChange"),0<c.length&&(f=new Zo("onChange","change",null,f,x),o.push({event:f,listeners:c}))}var rd=null,ql=null;function cp(o){wp(o,0)}function sd(o){var c=Zl(o);if(ot(c))return o}function xu(o,c){if(o==="change")return c}var Kh=!1;if(d){var id;if(d){var oi="oninput"in document;if(!oi){var dp=document.createElement("div");dp.setAttribute("oninput","return;"),oi=typeof dp.oninput=="function"}id=oi}else id=!1;Kh=id&&(!document.documentMode||9<document.documentMode)}function up(){rd&&(rd.detachEvent("onpropertychange",Yh),ql=rd=null)}function Yh(o){if(o.propertyName==="value"&&sd(ql)){var c=[];lp(c,ql,o,nt(o)),Xr(cp,c)}}function hp(o,c,f){o==="focusin"?(up(),rd=c,ql=f,rd.attachEvent("onpropertychange",Yh)):o==="focusout"&&up()}function Dx(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return sd(ql)}function Ox(o,c){if(o==="click")return sd(c)}function Vx(o,c){if(o==="input"||o==="change")return sd(c)}function zx(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var na=typeof Object.is=="function"?Object.is:zx;function ad(o,c){if(na(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var k=f[x];if(!u.call(c,k)||!na(o[k],c[k]))return!1}return!0}function Xh(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Qh(o,c){var f=Xh(o);o=0;for(var x;f;){if(f.nodeType===3){if(x=o+f.textContent.length,o<=c&&x>=c)return{node:f,offset:c-o};o=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Xh(f)}}function yu(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?yu(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function fp(){for(var o=window,c=ct();c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=ct(o.document)}return c}function Jh(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function rl(o){var c=fp(),f=o.focusedElem,x=o.selectionRange;if(c!==f&&f&&f.ownerDocument&&yu(f.ownerDocument.documentElement,f)){if(x!==null&&Jh(f)){if(c=x.start,o=x.end,o===void 0&&(o=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(o,f.value.length);else if(o=(c=f.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var k=f.textContent.length,T=Math.min(x.start,k);x=x.end===void 0?T:Math.min(x.end,k),!o.extend&&T>x&&(k=x,x=T,T=k),k=Qh(f,T);var W=Qh(f,x);k&&W&&(o.rangeCount!==1||o.anchorNode!==k.node||o.anchorOffset!==k.offset||o.focusNode!==W.node||o.focusOffset!==W.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),o.removeAllRanges(),T>x?(o.addRange(c),o.extend(W.node,W.offset)):(c.setEnd(W.node,W.offset),o.addRange(c)))}}for(c=[],o=f;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)o=c[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Fa=d&&"documentMode"in document&&11>=document.documentMode,sl=null,Zh=null,Gl=null,vu=!1;function ef(o,c,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;vu||sl==null||sl!==ct(x)||(x=sl,"selectionStart"in x&&Jh(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Gl&&ad(Gl,x)||(Gl=x,x=Yl(Zh,"onSelect"),0<x.length&&(c=new Zo("onSelect","select",null,c,f),o.push({event:c,listeners:x}),c.target=sl)))}function od(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var Kl={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},tf={},mp={};d&&(mp=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function ld(o){if(tf[o])return tf[o];if(!Kl[o])return o;var c=Kl[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in mp)return tf[o]=c[f];return o}var nf=ld("animationend"),pp=ld("animationiteration"),gp=ld("animationstart"),xp=ld("transitionend"),yp=new Map,vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(o,c){yp.set(o,c),a(c,[o])}for(var bu=0;bu<vp.length;bu++){var rf=vp[bu],Fx=rf.toLowerCase(),$x=rf[0].toUpperCase()+rf.slice(1);Ps(Fx,"on"+$x)}Ps(nf,"onAnimationEnd"),Ps(pp,"onAnimationIteration"),Ps(gp,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(xp,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(cd));function bp(o,c,f){var x=o.type||"unknown-event";o.currentTarget=f,Xi(x,c,void 0,o),o.currentTarget=null}function wp(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var x=o[f],k=x.event;x=x.listeners;e:{var T=void 0;if(c)for(var W=x.length-1;0<=W;W--){var ee=x[W],se=ee.instance,_e=ee.currentTarget;if(ee=ee.listener,se!==T&&k.isPropagationStopped())break e;bp(k,ee,_e),T=se}else for(W=0;W<x.length;W++){if(ee=x[W],se=ee.instance,_e=ee.currentTarget,ee=ee.listener,se!==T&&k.isPropagationStopped())break e;bp(k,ee,_e),T=se}}}if(Cs)throw o=jr,Cs=!1,jr=null,o}function fr(o,c){var f=c[cf];f===void 0&&(f=c[cf]=new Set);var x=o+"__bubble";f.has(x)||(sf(c,o,2,!1),f.add(x))}function dd(o,c,f){var x=0;c&&(x|=4),sf(f,o,x,c)}var il="_reactListening"+Math.random().toString(36).slice(2);function ud(o){if(!o[il]){o[il]=!0,r.forEach(function(f){f!=="selectionchange"&&(Ux.has(f)||dd(f,!1,o),dd(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[il]||(c[il]=!0,dd("selectionchange",!1,c))}}function sf(o,c,f,x){switch(Da(c)){case 1:var k=Yn;break;case 4:k=go;break;default:k=ua}f=k.bind(null,c,f,o),k=void 0,!si||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),x?k!==void 0?o.addEventListener(c,f,{capture:!0,passive:k}):o.addEventListener(c,f,!0):k!==void 0?o.addEventListener(c,f,{passive:k}):o.addEventListener(c,f,!1)}function wu(o,c,f,x,k){var T=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var W=x.tag;if(W===3||W===4){var ee=x.stateNode.containerInfo;if(ee===k||ee.nodeType===8&&ee.parentNode===k)break;if(W===4)for(W=x.return;W!==null;){var se=W.tag;if((se===3||se===4)&&(se=W.stateNode.containerInfo,se===k||se.nodeType===8&&se.parentNode===k))return;W=W.return}for(;ee!==null;){if(W=al(ee),W===null)return;if(se=W.tag,se===5||se===6){x=T=W;continue e}ee=ee.parentNode}}x=x.return}Xr(function(){var _e=T,Je=nt(f),rt=[];e:{var Qe=yp.get(o);if(Qe!==void 0){var kt=Zo,Dt=o;switch(o){case"keypress":if($l(f)===0)break e;case"keydown":case"keyup":kt=C;break;case"focusin":Dt="focus",kt=el;break;case"focusout":Dt="blur",kt=el;break;case"beforeblur":case"afterblur":kt=el;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=Pe;break;case nf:case pp:case gp:kt=Ws;break;case xp:kt=Xn;break;case"scroll":kt=hu;break;case"wheel":kt=Rn;break;case"copy":case"cut":case"paste":kt=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=G}var zt=(c&4)!==0,ns=!zt&&o==="scroll",be=zt?Qe!==null?Qe+"Capture":null:Qe;zt=[];for(var ue=_e,je;ue!==null;){je=ue;var dt=je.stateNode;if(je.tag===5&&dt!==null&&(je=dt,be!==null&&(dt=pn(ue,be),dt!=null&&zt.push($a(ue,dt,je)))),ns)break;ue=ue.return}0<zt.length&&(Qe=new kt(Qe,Dt,null,f,Je),rt.push({event:Qe,listeners:zt}))}}if((c&7)===0){e:{if(Qe=o==="mouseover"||o==="pointerover",kt=o==="mouseout"||o==="pointerout",Qe&&f!==Te&&(Dt=f.relatedTarget||f.fromElement)&&(al(Dt)||Dt[qs]))break e;if((kt||Qe)&&(Qe=Je.window===Je?Je:(Qe=Je.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,kt?(Dt=f.relatedTarget||f.toElement,kt=_e,Dt=Dt?al(Dt):null,Dt!==null&&(ns=J(Dt),Dt!==ns||Dt.tag!==5&&Dt.tag!==6)&&(Dt=null)):(kt=null,Dt=_e),kt!==Dt)){if(zt=za,dt="onMouseLeave",be="onMouseEnter",ue="mouse",(o==="pointerout"||o==="pointerover")&&(zt=G,dt="onPointerLeave",be="onPointerEnter",ue="pointer"),ns=kt==null?Qe:Zl(kt),je=Dt==null?Qe:Zl(Dt),Qe=new zt(dt,ue+"leave",kt,f,Je),Qe.target=ns,Qe.relatedTarget=je,dt=null,al(Je)===_e&&(zt=new zt(be,ue+"enter",Dt,f,Je),zt.target=je,zt.relatedTarget=ns,dt=zt),ns=dt,kt&&Dt)t:{for(zt=kt,be=Dt,ue=0,je=zt;je;je=bo(je))ue++;for(je=0,dt=be;dt;dt=bo(dt))je++;for(;0<ue-je;)zt=bo(zt),ue--;for(;0<je-ue;)be=bo(be),je--;for(;ue--;){if(zt===be||be!==null&&zt===be.alternate)break t;zt=bo(zt),be=bo(be)}zt=null}else zt=null;kt!==null&&jp(rt,Qe,kt,zt,!1),Dt!==null&&ns!==null&&jp(rt,ns,Dt,zt,!0)}}e:{if(Qe=_e?Zl(_e):window,kt=Qe.nodeName&&Qe.nodeName.toLowerCase(),kt==="select"||kt==="input"&&Qe.type==="file")var Ut=xu;else if(Gh(Qe))if(Kh)Ut=Vx;else{Ut=Dx;var Jt=hp}else(kt=Qe.nodeName)&&kt.toLowerCase()==="input"&&(Qe.type==="checkbox"||Qe.type==="radio")&&(Ut=Ox);if(Ut&&(Ut=Ut(o,_e))){lp(rt,Ut,f,Je);break e}Jt&&Jt(o,Qe,_e),o==="focusout"&&(Jt=Qe._wrapperState)&&Jt.controlled&&Qe.type==="number"&&Wt(Qe,"number",Qe.value)}switch(Jt=_e?Zl(_e):window,o){case"focusin":(Gh(Jt)||Jt.contentEditable==="true")&&(sl=Jt,Zh=_e,Gl=null);break;case"focusout":Gl=Zh=sl=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,ef(rt,f,Je);break;case"selectionchange":if(Fa)break;case"keydown":case"keyup":ef(rt,f,Je)}var Zt;if(Ur)e:{switch(o){case"compositionstart":var fn="onCompositionStart";break e;case"compositionend":fn="onCompositionEnd";break e;case"compositionupdate":fn="onCompositionUpdate";break e}fn=void 0}else nl?ap(o,f)&&(fn="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(fn="onCompositionStart");fn&&(vo&&f.locale!=="ko"&&(nl||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&nl&&(Zt=ha()):(Us=Je,Jo="value"in Us?Us.value:Us.textContent,nl=!0)),Jt=Yl(_e,fn),0<Jt.length&&(fn=new td(fn,o,null,f,Je),rt.push({event:fn,listeners:Jt}),Zt?fn.data=Zt:(Zt=op(f),Zt!==null&&(fn.data=Zt)))),(Zt=kr?gu(o,f):Lx(o,f))&&(_e=Yl(_e,"onBeforeInput"),0<_e.length&&(Je=new td("onBeforeInput","beforeinput",null,f,Je),rt.push({event:Je,listeners:_e}),Je.data=Zt))}wp(rt,c)})}function $a(o,c,f){return{instance:o,listener:c,currentTarget:f}}function Yl(o,c){for(var f=c+"Capture",x=[];o!==null;){var k=o,T=k.stateNode;k.tag===5&&T!==null&&(k=T,T=pn(o,f),T!=null&&x.unshift($a(o,T,k)),T=pn(o,c),T!=null&&x.push($a(o,T,k))),o=o.return}return x}function bo(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function jp(o,c,f,x,k){for(var T=c._reactName,W=[];f!==null&&f!==x;){var ee=f,se=ee.alternate,_e=ee.stateNode;if(se!==null&&se===x)break;ee.tag===5&&_e!==null&&(ee=_e,k?(se=pn(f,T),se!=null&&W.unshift($a(f,se,ee))):k||(se=pn(f,T),se!=null&&W.push($a(f,se,ee)))),f=f.return}W.length!==0&&o.push({event:c,listeners:W})}var Bx=/\r\n?/g,Wx=/\u0000|\uFFFD/g;function wo(o){return(typeof o=="string"?o:""+o).replace(Bx,`
`).replace(Wx,"")}function ju(o,c,f){if(c=wo(c),wo(o)!==c&&f)throw Error(n(425))}function ku(){}var af=null,of=null;function Xl(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var hd=typeof setTimeout=="function"?setTimeout:void 0,Hx=typeof clearTimeout=="function"?clearTimeout:void 0,lf=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof lf<"u"?function(o){return lf.resolve(null).then(o).catch(Ql)}:hd;function Ql(o){setTimeout(function(){throw o})}function fd(o,c){var f=c,x=0;do{var k=f.nextSibling;if(o.removeChild(f),k&&k.nodeType===8)if(f=k.data,f==="/$"){if(x===0){o.removeChild(k),hr(c);return}x--}else f!=="$"&&f!=="$?"&&f!=="$!"||x++;f=k}while(f);hr(c)}function Ua(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function kp(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),fa="__reactFiber$"+Jl,Ba="__reactProps$"+Jl,qs="__reactContainer$"+Jl,cf="__reactEvents$"+Jl,Gx="__reactListeners$"+Jl,Kx="__reactHandles$"+Jl;function al(o){var c=o[fa];if(c)return c;for(var f=o.parentNode;f;){if(c=f[qs]||f[fa]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=kp(o);o!==null;){if(f=o[fa])return f;o=kp(o)}return c}o=f,f=o.parentNode}return null}function md(o){return o=o[fa]||o[qs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Zl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Nu(o){return o[Ba]||null}var df=[],ol=-1;function jo(o){return{current:o}}function lr(o){0>ol||(o.current=df[ol],df[ol]=null,ol--)}function tr(o,c){ol++,df[ol]=o.current,o.current=c}var Wa={},Er=jo(Wa),Gs=jo(!1),Ha=Wa;function ll(o,c){var f=o.type.contextTypes;if(!f)return Wa;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var k={},T;for(T in f)k[T]=c[T];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=k),k}function Is(o){return o=o.childContextTypes,o!=null}function pd(){lr(Gs),lr(Er)}function _u(o,c,f){if(Er.current!==Wa)throw Error(n(168));tr(Er,c),tr(Gs,f)}function Np(o,c,f){var x=o.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var k in x)if(!(k in c))throw Error(n(108,Ye(o)||"Unknown",k));return re({},f,x)}function ma(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Wa,Ha=Er.current,tr(Er,o),tr(Gs,Gs.current),!0}function qa(o,c,f){var x=o.stateNode;if(!x)throw Error(n(169));f?(o=Np(o,c,Ha),x.__reactInternalMemoizedMergedChildContext=o,lr(Gs),lr(Er),tr(Er,o)):lr(Gs),tr(Gs,f)}var Ga=null,Su=!1,uf=!1;function _p(o){Ga===null?Ga=[o]:Ga.push(o)}function Yx(o){Su=!0,_p(o)}function ko(){if(!uf&&Ga!==null){uf=!0;var o=0,c=hn;try{var f=Ga;for(hn=1;o<f.length;o++){var x=f[o];do x=x(!0);while(x!==null)}Ga=null,Su=!1}catch(k){throw Ga!==null&&(Ga=Ga.slice(o+1)),et(vt,ko),k}finally{hn=c,uf=!1}}return null}var ec=[],tc=0,gd=null,cl=0,Ks=[],Mi=0,dl=null,ji=1,$="";function v(o,c){ec[tc++]=cl,ec[tc++]=gd,gd=o,cl=c}function P(o,c,f){Ks[Mi++]=ji,Ks[Mi++]=$,Ks[Mi++]=dl,dl=o;var x=ji;o=$;var k=32-jt(x)-1;x&=~(1<<k),f+=1;var T=32-jt(c)+k;if(30<T){var W=k-k%5;T=(x&(1<<W)-1).toString(32),x>>=W,k-=W,ji=1<<32-jt(c)+k|f<<k|x,$=T+o}else ji=1<<T|f<<k|x,$=o}function q(o){o.return!==null&&(v(o,1),P(o,1,0))}function de(o){for(;o===gd;)gd=ec[--tc],ec[tc]=null,cl=ec[--tc],ec[tc]=null;for(;o===dl;)dl=Ks[--Mi],Ks[Mi]=null,$=Ks[--Mi],Ks[Mi]=null,ji=Ks[--Mi],Ks[Mi]=null}var fe=null,Ne=null,De=!1,st=null;function Nt(o,c){var f=ya(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=o,c=o.deletions,c===null?(o.deletions=[f],o.flags|=16):c.push(f)}function Tt(o,c){switch(o.tag){case 5:var f=o.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,fe=o,Ne=Ua(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,fe=o,Ne=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=dl!==null?{id:ji,overflow:$}:null,o.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=ya(18,null,null,0),f.stateNode=c,f.return=o,o.child=f,fe=o,Ne=null,!0):!1;default:return!1}}function bt(o){return(o.mode&1)!==0&&(o.flags&128)===0}function gn(o){if(De){var c=Ne;if(c){var f=c;if(!Tt(o,c)){if(bt(o))throw Error(n(418));c=Ua(f.nextSibling);var x=fe;c&&Tt(o,c)?Nt(x,f):(o.flags=o.flags&-4097|2,De=!1,fe=o)}}else{if(bt(o))throw Error(n(418));o.flags=o.flags&-4097|2,De=!1,fe=o}}}function Qt(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;fe=o}function ln(o){if(o!==fe)return!1;if(!De)return Qt(o),De=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Xl(o.type,o.memoizedProps)),c&&(c=Ne)){if(bt(o))throw cn(),Error(n(418));for(;c;)Nt(o,c),c=Ua(c.nextSibling)}if(Qt(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(c===0){Ne=Ua(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}o=o.nextSibling}Ne=null}}else Ne=fe?Ua(o.stateNode.nextSibling):null;return!0}function cn(){for(var o=Ne;o;)o=Ua(o.nextSibling)}function nn(){Ne=fe=null,De=!1}function qn(o){st===null?st=[o]:st.push(o)}var cr=I.ReactCurrentBatchConfig;function yn(o,c,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var x=f.stateNode}if(!x)throw Error(n(147,o));var k=x,T=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===T?c.ref:(c=function(W){var ee=k.refs;W===null?delete ee[T]:ee[T]=W},c._stringRef=T,c)}if(typeof o!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,o))}return o}function Ln(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function wn(o){var c=o._init;return c(o._payload)}function Tn(o){function c(be,ue){if(o){var je=be.deletions;je===null?(be.deletions=[ue],be.flags|=16):je.push(ue)}}function f(be,ue){if(!o)return null;for(;ue!==null;)c(be,ue),ue=ue.sibling;return null}function x(be,ue){for(be=new Map;ue!==null;)ue.key!==null?be.set(ue.key,ue):be.set(ue.index,ue),ue=ue.sibling;return be}function k(be,ue){return be=uc(be,ue),be.index=0,be.sibling=null,be}function T(be,ue,je){return be.index=je,o?(je=be.alternate,je!==null?(je=je.index,je<ue?(be.flags|=2,ue):je):(be.flags|=2,ue)):(be.flags|=1048576,ue)}function W(be){return o&&be.alternate===null&&(be.flags|=2),be}function ee(be,ue,je,dt){return ue===null||ue.tag!==6?(ue=Ty(je,be.mode,dt),ue.return=be,ue):(ue=k(ue,je),ue.return=be,ue)}function se(be,ue,je,dt){var Ut=je.type;return Ut===E?Je(be,ue,je.props.children,dt,je.key):ue!==null&&(ue.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===ne&&wn(Ut)===ue.type)?(dt=k(ue,je.props),dt.ref=yn(be,ue,je),dt.return=be,dt):(dt=Wp(je.type,je.key,je.props,null,be.mode,dt),dt.ref=yn(be,ue,je),dt.return=be,dt)}function _e(be,ue,je,dt){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==je.containerInfo||ue.stateNode.implementation!==je.implementation?(ue=Ay(je,be.mode,dt),ue.return=be,ue):(ue=k(ue,je.children||[]),ue.return=be,ue)}function Je(be,ue,je,dt,Ut){return ue===null||ue.tag!==7?(ue=Cd(je,be.mode,dt,Ut),ue.return=be,ue):(ue=k(ue,je),ue.return=be,ue)}function rt(be,ue,je){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=Ty(""+ue,be.mode,je),ue.return=be,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case F:return je=Wp(ue.type,ue.key,ue.props,null,be.mode,je),je.ref=yn(be,null,ue),je.return=be,je;case R:return ue=Ay(ue,be.mode,je),ue.return=be,ue;case ne:var dt=ue._init;return rt(be,dt(ue._payload),je)}if(an(ue)||le(ue))return ue=Cd(ue,be.mode,je,null),ue.return=be,ue;Ln(be,ue)}return null}function Qe(be,ue,je,dt){var Ut=ue!==null?ue.key:null;if(typeof je=="string"&&je!==""||typeof je=="number")return Ut!==null?null:ee(be,ue,""+je,dt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case F:return je.key===Ut?se(be,ue,je,dt):null;case R:return je.key===Ut?_e(be,ue,je,dt):null;case ne:return Ut=je._init,Qe(be,ue,Ut(je._payload),dt)}if(an(je)||le(je))return Ut!==null?null:Je(be,ue,je,dt,null);Ln(be,je)}return null}function kt(be,ue,je,dt,Ut){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return be=be.get(je)||null,ee(ue,be,""+dt,Ut);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case F:return be=be.get(dt.key===null?je:dt.key)||null,se(ue,be,dt,Ut);case R:return be=be.get(dt.key===null?je:dt.key)||null,_e(ue,be,dt,Ut);case ne:var Jt=dt._init;return kt(be,ue,je,Jt(dt._payload),Ut)}if(an(dt)||le(dt))return be=be.get(je)||null,Je(ue,be,dt,Ut,null);Ln(ue,dt)}return null}function Dt(be,ue,je,dt){for(var Ut=null,Jt=null,Zt=ue,fn=ue=0,Ms=null;Zt!==null&&fn<je.length;fn++){Zt.index>fn?(Ms=Zt,Zt=null):Ms=Zt.sibling;var Gn=Qe(be,Zt,je[fn],dt);if(Gn===null){Zt===null&&(Zt=Ms);break}o&&Zt&&Gn.alternate===null&&c(be,Zt),ue=T(Gn,ue,fn),Jt===null?Ut=Gn:Jt.sibling=Gn,Jt=Gn,Zt=Ms}if(fn===je.length)return f(be,Zt),De&&v(be,fn),Ut;if(Zt===null){for(;fn<je.length;fn++)Zt=rt(be,je[fn],dt),Zt!==null&&(ue=T(Zt,ue,fn),Jt===null?Ut=Zt:Jt.sibling=Zt,Jt=Zt);return De&&v(be,fn),Ut}for(Zt=x(be,Zt);fn<je.length;fn++)Ms=kt(Zt,be,fn,je[fn],dt),Ms!==null&&(o&&Ms.alternate!==null&&Zt.delete(Ms.key===null?fn:Ms.key),ue=T(Ms,ue,fn),Jt===null?Ut=Ms:Jt.sibling=Ms,Jt=Ms);return o&&Zt.forEach(function(hc){return c(be,hc)}),De&&v(be,fn),Ut}function zt(be,ue,je,dt){var Ut=le(je);if(typeof Ut!="function")throw Error(n(150));if(je=Ut.call(je),je==null)throw Error(n(151));for(var Jt=Ut=null,Zt=ue,fn=ue=0,Ms=null,Gn=je.next();Zt!==null&&!Gn.done;fn++,Gn=je.next()){Zt.index>fn?(Ms=Zt,Zt=null):Ms=Zt.sibling;var hc=Qe(be,Zt,Gn.value,dt);if(hc===null){Zt===null&&(Zt=Ms);break}o&&Zt&&hc.alternate===null&&c(be,Zt),ue=T(hc,ue,fn),Jt===null?Ut=hc:Jt.sibling=hc,Jt=hc,Zt=Ms}if(Gn.done)return f(be,Zt),De&&v(be,fn),Ut;if(Zt===null){for(;!Gn.done;fn++,Gn=je.next())Gn=rt(be,Gn.value,dt),Gn!==null&&(ue=T(Gn,ue,fn),Jt===null?Ut=Gn:Jt.sibling=Gn,Jt=Gn);return De&&v(be,fn),Ut}for(Zt=x(be,Zt);!Gn.done;fn++,Gn=je.next())Gn=kt(Zt,be,fn,Gn.value,dt),Gn!==null&&(o&&Gn.alternate!==null&&Zt.delete(Gn.key===null?fn:Gn.key),ue=T(Gn,ue,fn),Jt===null?Ut=Gn:Jt.sibling=Gn,Jt=Gn);return o&&Zt.forEach(function(AA){return c(be,AA)}),De&&v(be,fn),Ut}function ns(be,ue,je,dt){if(typeof je=="object"&&je!==null&&je.type===E&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case F:e:{for(var Ut=je.key,Jt=ue;Jt!==null;){if(Jt.key===Ut){if(Ut=je.type,Ut===E){if(Jt.tag===7){f(be,Jt.sibling),ue=k(Jt,je.props.children),ue.return=be,be=ue;break e}}else if(Jt.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===ne&&wn(Ut)===Jt.type){f(be,Jt.sibling),ue=k(Jt,je.props),ue.ref=yn(be,Jt,je),ue.return=be,be=ue;break e}f(be,Jt);break}else c(be,Jt);Jt=Jt.sibling}je.type===E?(ue=Cd(je.props.children,be.mode,dt,je.key),ue.return=be,be=ue):(dt=Wp(je.type,je.key,je.props,null,be.mode,dt),dt.ref=yn(be,ue,je),dt.return=be,be=dt)}return W(be);case R:e:{for(Jt=je.key;ue!==null;){if(ue.key===Jt)if(ue.tag===4&&ue.stateNode.containerInfo===je.containerInfo&&ue.stateNode.implementation===je.implementation){f(be,ue.sibling),ue=k(ue,je.children||[]),ue.return=be,be=ue;break e}else{f(be,ue);break}else c(be,ue);ue=ue.sibling}ue=Ay(je,be.mode,dt),ue.return=be,be=ue}return W(be);case ne:return Jt=je._init,ns(be,ue,Jt(je._payload),dt)}if(an(je))return Dt(be,ue,je,dt);if(le(je))return zt(be,ue,je,dt);Ln(be,je)}return typeof je=="string"&&je!==""||typeof je=="number"?(je=""+je,ue!==null&&ue.tag===6?(f(be,ue.sibling),ue=k(ue,je),ue.return=be,be=ue):(f(be,ue),ue=Ty(je,be.mode,dt),ue.return=be,be=ue),W(be)):f(be,ue)}return ns}var Mn=Tn(!0),Qn=Tn(!1),Un=jo(null),yr=null,us=null,ki=null;function ws(){ki=us=yr=null}function li(o){var c=Un.current;lr(Un),o._currentValue=c}function ci(o,c,f){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===f)break;o=o.return}}function sr(o,c){yr=o,ki=us=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Oi=!0),o.firstContext=null)}function Lr(o){var c=o._currentValue;if(ki!==o)if(o={context:o,memoizedValue:c,next:null},us===null){if(yr===null)throw Error(n(308));us=o,yr.dependencies={lanes:0,firstContext:o}}else us=us.next=o;return c}var Rs=null;function No(o){Rs===null?Rs=[o]:Rs.push(o)}function es(o,c,f,x){var k=c.interleaved;return k===null?(f.next=f,No(c)):(f.next=k.next,k.next=f),c.interleaved=f,Pn(o,x)}function Pn(o,c){o.lanes|=c;var f=o.alternate;for(f!==null&&(f.lanes|=c),f=o,o=o.return;o!==null;)o.childLanes|=c,f=o.alternate,f!==null&&(f.childLanes|=c),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Tr=!1;function di(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ka(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Di(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Ya(o,c,f){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(Hn&2)!==0){var k=x.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),x.pending=c,Pn(o,f)}return k=x.interleaved,k===null?(c.next=c,No(x)):(c.next=k.next,k.next=c),x.interleaved=c,Pn(o,f)}function xd(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,As(o,f)}}function yd(o,c){var f=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var k=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var W={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};T===null?k=T=W:T=T.next=W,f=f.next}while(f!==null);T===null?k=T=c:T=T.next=c}else k=T=c;f={baseState:x.baseState,firstBaseUpdate:k,lastBaseUpdate:T,shared:x.shared,effects:x.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}function Cu(o,c,f,x){var k=o.updateQueue;Tr=!1;var T=k.firstBaseUpdate,W=k.lastBaseUpdate,ee=k.shared.pending;if(ee!==null){k.shared.pending=null;var se=ee,_e=se.next;se.next=null,W===null?T=_e:W.next=_e,W=se;var Je=o.alternate;Je!==null&&(Je=Je.updateQueue,ee=Je.lastBaseUpdate,ee!==W&&(ee===null?Je.firstBaseUpdate=_e:ee.next=_e,Je.lastBaseUpdate=se))}if(T!==null){var rt=k.baseState;W=0,Je=_e=se=null,ee=T;do{var Qe=ee.lane,kt=ee.eventTime;if((x&Qe)===Qe){Je!==null&&(Je=Je.next={eventTime:kt,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var Dt=o,zt=ee;switch(Qe=c,kt=f,zt.tag){case 1:if(Dt=zt.payload,typeof Dt=="function"){rt=Dt.call(kt,rt,Qe);break e}rt=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=zt.payload,Qe=typeof Dt=="function"?Dt.call(kt,rt,Qe):Dt,Qe==null)break e;rt=re({},rt,Qe);break e;case 2:Tr=!0}}ee.callback!==null&&ee.lane!==0&&(o.flags|=64,Qe=k.effects,Qe===null?k.effects=[ee]:Qe.push(ee))}else kt={eventTime:kt,lane:Qe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Je===null?(_e=Je=kt,se=rt):Je=Je.next=kt,W|=Qe;if(ee=ee.next,ee===null){if(ee=k.shared.pending,ee===null)break;Qe=ee,ee=Qe.next,Qe.next=null,k.lastBaseUpdate=Qe,k.shared.pending=null}}while(!0);if(Je===null&&(se=rt),k.baseState=se,k.firstBaseUpdate=_e,k.lastBaseUpdate=Je,c=k.shared.interleaved,c!==null){k=c;do W|=k.lane,k=k.next;while(k!==c)}else T===null&&(k.shared.lanes=0);kd|=W,o.lanes=W,o.memoizedState=rt}}function Sp(o,c,f){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var x=o[c],k=x.callback;if(k!==null){if(x.callback=null,x=f,typeof k!="function")throw Error(n(191,k));k.call(x)}}}var ul={},pa=jo(ul),nc=jo(ul),vd=jo(ul);function _o(o){if(o===ul)throw Error(n(174));return o}function Eu(o,c){switch(tr(vd,c),tr(nc,o),tr(pa,ul),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:pe(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=pe(c,o)}lr(pa),tr(pa,c)}function rc(){lr(pa),lr(nc),lr(vd)}function Cp(o){_o(vd.current);var c=_o(pa.current),f=pe(c,o.type);c!==f&&(tr(nc,o),tr(pa,f))}function Xa(o){nc.current===o&&(lr(pa),lr(nc))}var dr=jo(0);function bd(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Tu=[];function wd(){for(var o=0;o<Tu.length;o++)Tu[o]._workInProgressVersionPrimary=null;Tu.length=0}var jd=I.ReactCurrentDispatcher,Au=I.ReactCurrentBatchConfig,So=0,vr=null,ts=null,hs=null,sc=!1,ic=!1,hf=0,JT=0;function ui(){throw Error(n(321))}function Xx(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!na(o[f],c[f]))return!1;return!0}function Qx(o,c,f,x,k,T){if(So=T,vr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,jd.current=o===null||o.memoizedState===null?nA:rA,o=f(x,k),ic){T=0;do{if(ic=!1,hf=0,25<=T)throw Error(n(301));T+=1,hs=ts=null,c.updateQueue=null,jd.current=sA,o=f(x,k)}while(ic)}if(jd.current=Ap,c=ts!==null&&ts.next!==null,So=0,hs=ts=vr=null,sc=!1,c)throw Error(n(300));return o}function Jx(){var o=hf!==0;return hf=0,o}function Co(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hs===null?vr.memoizedState=hs=o:hs=hs.next=o,hs}function ga(){if(ts===null){var o=vr.alternate;o=o!==null?o.memoizedState:null}else o=ts.next;var c=hs===null?vr.memoizedState:hs.next;if(c!==null)hs=c,ts=o;else{if(o===null)throw Error(n(310));ts=o,o={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},hs===null?vr.memoizedState=hs=o:hs=hs.next=o}return hs}function ff(o,c){return typeof c=="function"?c(o):c}function Zx(o){var c=ga(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var x=ts,k=x.baseQueue,T=f.pending;if(T!==null){if(k!==null){var W=k.next;k.next=T.next,T.next=W}x.baseQueue=k=T,f.pending=null}if(k!==null){T=k.next,x=x.baseState;var ee=W=null,se=null,_e=T;do{var Je=_e.lane;if((So&Je)===Je)se!==null&&(se=se.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),x=_e.hasEagerState?_e.eagerState:o(x,_e.action);else{var rt={lane:Je,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};se===null?(ee=se=rt,W=x):se=se.next=rt,vr.lanes|=Je,kd|=Je}_e=_e.next}while(_e!==null&&_e!==T);se===null?W=x:se.next=ee,na(x,c.memoizedState)||(Oi=!0),c.memoizedState=x,c.baseState=W,c.baseQueue=se,f.lastRenderedState=x}if(o=f.interleaved,o!==null){k=o;do T=k.lane,vr.lanes|=T,kd|=T,k=k.next;while(k!==o)}else k===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function ey(o){var c=ga(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var x=f.dispatch,k=f.pending,T=c.memoizedState;if(k!==null){f.pending=null;var W=k=k.next;do T=o(T,W.action),W=W.next;while(W!==k);na(T,c.memoizedState)||(Oi=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),f.lastRenderedState=T}return[T,x]}function Pw(){}function Iw(o,c){var f=vr,x=ga(),k=c(),T=!na(x.memoizedState,k);if(T&&(x.memoizedState=k,Oi=!0),x=x.queue,ty(Mw.bind(null,f,x,o),[o]),x.getSnapshot!==c||T||hs!==null&&hs.memoizedState.tag&1){if(f.flags|=2048,mf(9,Lw.bind(null,f,x,k,c),void 0,null),Ls===null)throw Error(n(349));(So&30)!==0||Rw(f,c,k)}return k}function Rw(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=vr.updateQueue,c===null?(c={lastEffect:null,stores:null},vr.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function Lw(o,c,f,x){c.value=f,c.getSnapshot=x,Dw(c)&&Ow(o)}function Mw(o,c,f){return f(function(){Dw(c)&&Ow(o)})}function Dw(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!na(o,f)}catch{return!0}}function Ow(o){var c=Pn(o,1);c!==null&&eo(c,o,1,-1)}function Vw(o){var c=Co();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:o},c.queue=o,o=o.dispatch=tA.bind(null,vr,o),[c.memoizedState,o]}function mf(o,c,f,x){return o={tag:o,create:c,destroy:f,deps:x,next:null},c=vr.updateQueue,c===null?(c={lastEffect:null,stores:null},vr.updateQueue=c,c.lastEffect=o.next=o):(f=c.lastEffect,f===null?c.lastEffect=o.next=o:(x=f.next,f.next=o,o.next=x,c.lastEffect=o)),o}function zw(){return ga().memoizedState}function Ep(o,c,f,x){var k=Co();vr.flags|=o,k.memoizedState=mf(1|c,f,void 0,x===void 0?null:x)}function Tp(o,c,f,x){var k=ga();x=x===void 0?null:x;var T=void 0;if(ts!==null){var W=ts.memoizedState;if(T=W.destroy,x!==null&&Xx(x,W.deps)){k.memoizedState=mf(c,f,T,x);return}}vr.flags|=o,k.memoizedState=mf(1|c,f,T,x)}function Fw(o,c){return Ep(8390656,8,o,c)}function ty(o,c){return Tp(2048,8,o,c)}function $w(o,c){return Tp(4,2,o,c)}function Uw(o,c){return Tp(4,4,o,c)}function Bw(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Ww(o,c,f){return f=f!=null?f.concat([o]):null,Tp(4,4,Bw.bind(null,c,o),f)}function ny(){}function Hw(o,c){var f=ga();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&Xx(c,x[1])?x[0]:(f.memoizedState=[o,c],o)}function qw(o,c){var f=ga();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&Xx(c,x[1])?x[0]:(o=o(),f.memoizedState=[o,c],o)}function Gw(o,c,f){return(So&21)===0?(o.baseState&&(o.baseState=!1,Oi=!0),o.memoizedState=f):(na(f,c)||(f=Fr(),vr.lanes|=f,kd|=f,o.baseState=!0),c)}function ZT(o,c){var f=hn;hn=f!==0&&4>f?f:4,o(!0);var x=Au.transition;Au.transition={};try{o(!1),c()}finally{hn=f,Au.transition=x}}function Kw(){return ga().memoizedState}function eA(o,c,f){var x=cc(o);if(f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},Yw(o))Xw(c,f);else if(f=es(o,c,f,x),f!==null){var k=_i();eo(f,o,x,k),Qw(f,c,x)}}function tA(o,c,f){var x=cc(o),k={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(Yw(o))Xw(c,k);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var W=c.lastRenderedState,ee=T(W,f);if(k.hasEagerState=!0,k.eagerState=ee,na(ee,W)){var se=c.interleaved;se===null?(k.next=k,No(c)):(k.next=se.next,se.next=k),c.interleaved=k;return}}catch{}finally{}f=es(o,c,k,x),f!==null&&(k=_i(),eo(f,o,x,k),Qw(f,c,x))}}function Yw(o){var c=o.alternate;return o===vr||c!==null&&c===vr}function Xw(o,c){ic=sc=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function Qw(o,c,f){if((f&4194240)!==0){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,As(o,f)}}var Ap={readContext:Lr,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},nA={readContext:Lr,useCallback:function(o,c){return Co().memoizedState=[o,c===void 0?null:c],o},useContext:Lr,useEffect:Fw,useImperativeHandle:function(o,c,f){return f=f!=null?f.concat([o]):null,Ep(4194308,4,Bw.bind(null,c,o),f)},useLayoutEffect:function(o,c){return Ep(4194308,4,o,c)},useInsertionEffect:function(o,c){return Ep(4,2,o,c)},useMemo:function(o,c){var f=Co();return c=c===void 0?null:c,o=o(),f.memoizedState=[o,c],o},useReducer:function(o,c,f){var x=Co();return c=f!==void 0?f(c):c,x.memoizedState=x.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},x.queue=o,o=o.dispatch=eA.bind(null,vr,o),[x.memoizedState,o]},useRef:function(o){var c=Co();return o={current:o},c.memoizedState=o},useState:Vw,useDebugValue:ny,useDeferredValue:function(o){return Co().memoizedState=o},useTransition:function(){var o=Vw(!1),c=o[0];return o=ZT.bind(null,o[1]),Co().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,f){var x=vr,k=Co();if(De){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),Ls===null)throw Error(n(349));(So&30)!==0||Rw(x,c,f)}k.memoizedState=f;var T={value:f,getSnapshot:c};return k.queue=T,Fw(Mw.bind(null,x,T,o),[o]),x.flags|=2048,mf(9,Lw.bind(null,x,T,f,c),void 0,null),f},useId:function(){var o=Co(),c=Ls.identifierPrefix;if(De){var f=$,x=ji;f=(x&~(1<<32-jt(x)-1)).toString(32)+f,c=":"+c+"R"+f,f=hf++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=JT++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},rA={readContext:Lr,useCallback:Hw,useContext:Lr,useEffect:ty,useImperativeHandle:Ww,useInsertionEffect:$w,useLayoutEffect:Uw,useMemo:qw,useReducer:Zx,useRef:zw,useState:function(){return Zx(ff)},useDebugValue:ny,useDeferredValue:function(o){var c=ga();return Gw(c,ts.memoizedState,o)},useTransition:function(){var o=Zx(ff)[0],c=ga().memoizedState;return[o,c]},useMutableSource:Pw,useSyncExternalStore:Iw,useId:Kw,unstable_isNewReconciler:!1},sA={readContext:Lr,useCallback:Hw,useContext:Lr,useEffect:ty,useImperativeHandle:Ww,useInsertionEffect:$w,useLayoutEffect:Uw,useMemo:qw,useReducer:ey,useRef:zw,useState:function(){return ey(ff)},useDebugValue:ny,useDeferredValue:function(o){var c=ga();return ts===null?c.memoizedState=o:Gw(c,ts.memoizedState,o)},useTransition:function(){var o=ey(ff)[0],c=ga().memoizedState;return[o,c]},useMutableSource:Pw,useSyncExternalStore:Iw,useId:Kw,unstable_isNewReconciler:!1};function Qa(o,c){if(o&&o.defaultProps){c=re({},c),o=o.defaultProps;for(var f in o)c[f]===void 0&&(c[f]=o[f]);return c}return c}function ry(o,c,f,x){c=o.memoizedState,f=f(x,c),f=f==null?c:re({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Pp={isMounted:function(o){return(o=o._reactInternals)?J(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var x=_i(),k=cc(o),T=Di(x,k);T.payload=c,f!=null&&(T.callback=f),c=Ya(o,T,k),c!==null&&(eo(c,o,k,x),xd(c,o,k))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var x=_i(),k=cc(o),T=Di(x,k);T.tag=1,T.payload=c,f!=null&&(T.callback=f),c=Ya(o,T,k),c!==null&&(eo(c,o,k,x),xd(c,o,k))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=_i(),x=cc(o),k=Di(f,x);k.tag=2,c!=null&&(k.callback=c),c=Ya(o,k,x),c!==null&&(eo(c,o,x,f),xd(c,o,x))}};function Jw(o,c,f,x,k,T,W){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,T,W):c.prototype&&c.prototype.isPureReactComponent?!ad(f,x)||!ad(k,T):!0}function Zw(o,c,f){var x=!1,k=Wa,T=c.contextType;return typeof T=="object"&&T!==null?T=Lr(T):(k=Is(c)?Ha:Er.current,x=c.contextTypes,T=(x=x!=null)?ll(o,k):Wa),c=new c(f,T),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Pp,o.stateNode=c,c._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=k,o.__reactInternalMemoizedMaskedChildContext=T),c}function ej(o,c,f,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==o&&Pp.enqueueReplaceState(c,c.state,null)}function sy(o,c,f,x){var k=o.stateNode;k.props=f,k.state=o.memoizedState,k.refs={},di(o);var T=c.contextType;typeof T=="object"&&T!==null?k.context=Lr(T):(T=Is(c)?Ha:Er.current,k.context=ll(o,T)),k.state=o.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(ry(o,c,T,f),k.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&Pp.enqueueReplaceState(k,k.state,null),Cu(o,f,k,x),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308)}function Pu(o,c){try{var f="",x=c;do f+=$e(x),x=x.return;while(x);var k=f}catch(T){k=`
Error generating stack: `+T.message+`
`+T.stack}return{value:o,source:c,stack:k,digest:null}}function iy(o,c,f){return{value:o,source:null,stack:f??null,digest:c??null}}function ay(o,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var iA=typeof WeakMap=="function"?WeakMap:Map;function tj(o,c,f){f=Di(-1,f),f.tag=3,f.payload={element:null};var x=c.value;return f.callback=function(){Vp||(Vp=!0,wy=x),ay(o,c)},f}function nj(o,c,f){f=Di(-1,f),f.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var k=c.value;f.payload=function(){return x(k)},f.callback=function(){ay(o,c)}}var T=o.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(f.callback=function(){ay(o,c),typeof x!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var W=c.stack;this.componentDidCatch(c.value,{componentStack:W!==null?W:""})}),f}function rj(o,c,f){var x=o.pingCache;if(x===null){x=o.pingCache=new iA;var k=new Set;x.set(c,k)}else k=x.get(c),k===void 0&&(k=new Set,x.set(c,k));k.has(f)||(k.add(f),o=vA.bind(null,o,c,f),c.then(o,o))}function sj(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function ij(o,c,f,x,k){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Di(-1,1),c.tag=2,Ya(f,c,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=k,o)}var aA=I.ReactCurrentOwner,Oi=!1;function Ni(o,c,f,x){c.child=o===null?Qn(c,null,f,x):Mn(c,o.child,f,x)}function aj(o,c,f,x,k){f=f.render;var T=c.ref;return sr(c,k),x=Qx(o,c,f,x,T,k),f=Jx(),o!==null&&!Oi?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,hl(o,c,k)):(De&&f&&q(c),c.flags|=1,Ni(o,c,x,k),c.child)}function oj(o,c,f,x,k){if(o===null){var T=f.type;return typeof T=="function"&&!Ey(T)&&T.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=T,lj(o,c,T,x,k)):(o=Wp(f.type,null,x,c,c.mode,k),o.ref=c.ref,o.return=c,c.child=o)}if(T=o.child,(o.lanes&k)===0){var W=T.memoizedProps;if(f=f.compare,f=f!==null?f:ad,f(W,x)&&o.ref===c.ref)return hl(o,c,k)}return c.flags|=1,o=uc(T,x),o.ref=c.ref,o.return=c,c.child=o}function lj(o,c,f,x,k){if(o!==null){var T=o.memoizedProps;if(ad(T,x)&&o.ref===c.ref)if(Oi=!1,c.pendingProps=x=T,(o.lanes&k)!==0)(o.flags&131072)!==0&&(Oi=!0);else return c.lanes=o.lanes,hl(o,c,k)}return oy(o,c,f,x,k)}function cj(o,c,f){var x=c.pendingProps,k=x.children,T=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(Ru,ra),ra|=f;else{if((f&1073741824)===0)return o=T!==null?T.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,tr(Ru,ra),ra|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=T!==null?T.baseLanes:f,tr(Ru,ra),ra|=x}else T!==null?(x=T.baseLanes|f,c.memoizedState=null):x=f,tr(Ru,ra),ra|=x;return Ni(o,c,k,f),c.child}function dj(o,c){var f=c.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function oy(o,c,f,x,k){var T=Is(f)?Ha:Er.current;return T=ll(c,T),sr(c,k),f=Qx(o,c,f,x,T,k),x=Jx(),o!==null&&!Oi?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,hl(o,c,k)):(De&&x&&q(c),c.flags|=1,Ni(o,c,f,k),c.child)}function uj(o,c,f,x,k){if(Is(f)){var T=!0;ma(c)}else T=!1;if(sr(c,k),c.stateNode===null)Rp(o,c),Zw(c,f,x),sy(c,f,x,k),x=!0;else if(o===null){var W=c.stateNode,ee=c.memoizedProps;W.props=ee;var se=W.context,_e=f.contextType;typeof _e=="object"&&_e!==null?_e=Lr(_e):(_e=Is(f)?Ha:Er.current,_e=ll(c,_e));var Je=f.getDerivedStateFromProps,rt=typeof Je=="function"||typeof W.getSnapshotBeforeUpdate=="function";rt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ee!==x||se!==_e)&&ej(c,W,x,_e),Tr=!1;var Qe=c.memoizedState;W.state=Qe,Cu(c,x,W,k),se=c.memoizedState,ee!==x||Qe!==se||Gs.current||Tr?(typeof Je=="function"&&(ry(c,f,Je,x),se=c.memoizedState),(ee=Tr||Jw(c,f,ee,x,Qe,se,_e))?(rt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(c.flags|=4194308)):(typeof W.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=se),W.props=x,W.state=se,W.context=_e,x=ee):(typeof W.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{W=c.stateNode,Ka(o,c),ee=c.memoizedProps,_e=c.type===c.elementType?ee:Qa(c.type,ee),W.props=_e,rt=c.pendingProps,Qe=W.context,se=f.contextType,typeof se=="object"&&se!==null?se=Lr(se):(se=Is(f)?Ha:Er.current,se=ll(c,se));var kt=f.getDerivedStateFromProps;(Je=typeof kt=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ee!==rt||Qe!==se)&&ej(c,W,x,se),Tr=!1,Qe=c.memoizedState,W.state=Qe,Cu(c,x,W,k);var Dt=c.memoizedState;ee!==rt||Qe!==Dt||Gs.current||Tr?(typeof kt=="function"&&(ry(c,f,kt,x),Dt=c.memoizedState),(_e=Tr||Jw(c,f,_e,x,Qe,Dt,se)||!1)?(Je||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(x,Dt,se),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(x,Dt,se)),typeof W.componentDidUpdate=="function"&&(c.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof W.componentDidUpdate!="function"||ee===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ee===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Dt),W.props=x,W.state=Dt,W.context=se,x=_e):(typeof W.componentDidUpdate!="function"||ee===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ee===o.memoizedProps&&Qe===o.memoizedState||(c.flags|=1024),x=!1)}return ly(o,c,f,x,T,k)}function ly(o,c,f,x,k,T){dj(o,c);var W=(c.flags&128)!==0;if(!x&&!W)return k&&qa(c,f,!1),hl(o,c,T);x=c.stateNode,aA.current=c;var ee=W&&typeof f.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,o!==null&&W?(c.child=Mn(c,o.child,null,T),c.child=Mn(c,null,ee,T)):Ni(o,c,ee,T),c.memoizedState=x.state,k&&qa(c,f,!0),c.child}function hj(o){var c=o.stateNode;c.pendingContext?_u(o,c.pendingContext,c.pendingContext!==c.context):c.context&&_u(o,c.context,!1),Eu(o,c.containerInfo)}function fj(o,c,f,x,k){return nn(),qn(k),c.flags|=256,Ni(o,c,f,x),c.child}var cy={dehydrated:null,treeContext:null,retryLane:0};function dy(o){return{baseLanes:o,cachePool:null,transitions:null}}function mj(o,c,f){var x=c.pendingProps,k=dr.current,T=!1,W=(c.flags&128)!==0,ee;if((ee=W)||(ee=o!==null&&o.memoizedState===null?!1:(k&2)!==0),ee?(T=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(k|=1),tr(dr,k&1),o===null)return gn(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(W=x.children,o=x.fallback,T?(x=c.mode,T=c.child,W={mode:"hidden",children:W},(x&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=W):T=Hp(W,x,0,null),o=Cd(o,x,f,null),T.return=c,o.return=c,T.sibling=o,c.child=T,c.child.memoizedState=dy(f),c.memoizedState=cy,o):uy(c,W));if(k=o.memoizedState,k!==null&&(ee=k.dehydrated,ee!==null))return oA(o,c,W,x,ee,k,f);if(T){T=x.fallback,W=c.mode,k=o.child,ee=k.sibling;var se={mode:"hidden",children:x.children};return(W&1)===0&&c.child!==k?(x=c.child,x.childLanes=0,x.pendingProps=se,c.deletions=null):(x=uc(k,se),x.subtreeFlags=k.subtreeFlags&14680064),ee!==null?T=uc(ee,T):(T=Cd(T,W,f,null),T.flags|=2),T.return=c,x.return=c,x.sibling=T,c.child=x,x=T,T=c.child,W=o.child.memoizedState,W=W===null?dy(f):{baseLanes:W.baseLanes|f,cachePool:null,transitions:W.transitions},T.memoizedState=W,T.childLanes=o.childLanes&~f,c.memoizedState=cy,x}return T=o.child,o=T.sibling,x=uc(T,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=f),x.return=c,x.sibling=null,o!==null&&(f=c.deletions,f===null?(c.deletions=[o],c.flags|=16):f.push(o)),c.child=x,c.memoizedState=null,x}function uy(o,c){return c=Hp({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Ip(o,c,f,x){return x!==null&&qn(x),Mn(c,o.child,null,f),o=uy(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function oA(o,c,f,x,k,T,W){if(f)return c.flags&256?(c.flags&=-257,x=iy(Error(n(422))),Ip(o,c,W,x)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(T=x.fallback,k=c.mode,x=Hp({mode:"visible",children:x.children},k,0,null),T=Cd(T,k,W,null),T.flags|=2,x.return=c,T.return=c,x.sibling=T,c.child=x,(c.mode&1)!==0&&Mn(c,o.child,null,W),c.child.memoizedState=dy(W),c.memoizedState=cy,T);if((c.mode&1)===0)return Ip(o,c,W,null);if(k.data==="$!"){if(x=k.nextSibling&&k.nextSibling.dataset,x)var ee=x.dgst;return x=ee,T=Error(n(419)),x=iy(T,x,void 0),Ip(o,c,W,x)}if(ee=(W&o.childLanes)!==0,Oi||ee){if(x=Ls,x!==null){switch(W&-W){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(x.suspendedLanes|W))!==0?0:k,k!==0&&k!==T.retryLane&&(T.retryLane=k,Pn(o,k),eo(x,o,k,-1))}return Cy(),x=iy(Error(n(421))),Ip(o,c,W,x)}return k.data==="$?"?(c.flags|=128,c.child=o.child,c=bA.bind(null,o),k._reactRetry=c,null):(o=T.treeContext,Ne=Ua(k.nextSibling),fe=c,De=!0,st=null,o!==null&&(Ks[Mi++]=ji,Ks[Mi++]=$,Ks[Mi++]=dl,ji=o.id,$=o.overflow,dl=c),c=uy(c,x.children),c.flags|=4096,c)}function pj(o,c,f){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),ci(o.return,c,f)}function hy(o,c,f,x,k){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:k}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=x,T.tail=f,T.tailMode=k)}function gj(o,c,f){var x=c.pendingProps,k=x.revealOrder,T=x.tail;if(Ni(o,c,x.children,f),x=dr.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&pj(o,f,c);else if(o.tag===19)pj(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(tr(dr,x),(c.mode&1)===0)c.memoizedState=null;else switch(k){case"forwards":for(f=c.child,k=null;f!==null;)o=f.alternate,o!==null&&bd(o)===null&&(k=f),f=f.sibling;f=k,f===null?(k=c.child,c.child=null):(k=f.sibling,f.sibling=null),hy(c,!1,k,f,T);break;case"backwards":for(f=null,k=c.child,c.child=null;k!==null;){if(o=k.alternate,o!==null&&bd(o)===null){c.child=k;break}o=k.sibling,k.sibling=f,f=k,k=o}hy(c,!0,f,null,T);break;case"together":hy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Rp(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function hl(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),kd|=c.lanes,(f&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,f=uc(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=uc(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function lA(o,c,f){switch(c.tag){case 3:hj(c),nn();break;case 5:Cp(c);break;case 1:Is(c.type)&&ma(c);break;case 4:Eu(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,k=c.memoizedProps.value;tr(Un,x._currentValue),x._currentValue=k;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(tr(dr,dr.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?mj(o,c,f):(tr(dr,dr.current&1),o=hl(o,c,f),o!==null?o.sibling:null);tr(dr,dr.current&1);break;case 19:if(x=(f&c.childLanes)!==0,(o.flags&128)!==0){if(x)return gj(o,c,f);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),tr(dr,dr.current),x)break;return null;case 22:case 23:return c.lanes=0,cj(o,c,f)}return hl(o,c,f)}var xj,fy,yj,vj;xj=function(o,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},fy=function(){},yj=function(o,c,f,x){var k=o.memoizedProps;if(k!==x){o=c.stateNode,_o(pa.current);var T=null;switch(f){case"input":k=it(o,k),x=it(o,x),T=[];break;case"select":k=re({},k,{value:void 0}),x=re({},x,{value:void 0}),T=[];break;case"textarea":k=bn(o,k),x=bn(o,x),T=[];break;default:typeof k.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=ku)}gt(f,x);var W;f=null;for(_e in k)if(!x.hasOwnProperty(_e)&&k.hasOwnProperty(_e)&&k[_e]!=null)if(_e==="style"){var ee=k[_e];for(W in ee)ee.hasOwnProperty(W)&&(f||(f={}),f[W]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(i.hasOwnProperty(_e)?T||(T=[]):(T=T||[]).push(_e,null));for(_e in x){var se=x[_e];if(ee=k!=null?k[_e]:void 0,x.hasOwnProperty(_e)&&se!==ee&&(se!=null||ee!=null))if(_e==="style")if(ee){for(W in ee)!ee.hasOwnProperty(W)||se&&se.hasOwnProperty(W)||(f||(f={}),f[W]="");for(W in se)se.hasOwnProperty(W)&&ee[W]!==se[W]&&(f||(f={}),f[W]=se[W])}else f||(T||(T=[]),T.push(_e,f)),f=se;else _e==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,ee=ee?ee.__html:void 0,se!=null&&ee!==se&&(T=T||[]).push(_e,se)):_e==="children"?typeof se!="string"&&typeof se!="number"||(T=T||[]).push(_e,""+se):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(i.hasOwnProperty(_e)?(se!=null&&_e==="onScroll"&&fr("scroll",o),T||ee===se||(T=[])):(T=T||[]).push(_e,se))}f&&(T=T||[]).push("style",f);var _e=T;(c.updateQueue=_e)&&(c.flags|=4)}},vj=function(o,c,f,x){f!==x&&(c.flags|=4)};function pf(o,c){if(!De)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function hi(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,x=0;if(c)for(var k=o.child;k!==null;)f|=k.lanes|k.childLanes,x|=k.subtreeFlags&14680064,x|=k.flags&14680064,k.return=o,k=k.sibling;else for(k=o.child;k!==null;)f|=k.lanes|k.childLanes,x|=k.subtreeFlags,x|=k.flags,k.return=o,k=k.sibling;return o.subtreeFlags|=x,o.childLanes=f,c}function cA(o,c,f){var x=c.pendingProps;switch(de(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(c),null;case 1:return Is(c.type)&&pd(),hi(c),null;case 3:return x=c.stateNode,rc(),lr(Gs),lr(Er),wd(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(ln(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,st!==null&&(Ny(st),st=null))),fy(o,c),hi(c),null;case 5:Xa(c);var k=_o(vd.current);if(f=c.type,o!==null&&c.stateNode!=null)yj(o,c,f,x,k),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(n(166));return hi(c),null}if(o=_o(pa.current),ln(c)){x=c.stateNode,f=c.type;var T=c.memoizedProps;switch(x[fa]=c,x[Ba]=T,o=(c.mode&1)!==0,f){case"dialog":fr("cancel",x),fr("close",x);break;case"iframe":case"object":case"embed":fr("load",x);break;case"video":case"audio":for(k=0;k<cd.length;k++)fr(cd[k],x);break;case"source":fr("error",x);break;case"img":case"image":case"link":fr("error",x),fr("load",x);break;case"details":fr("toggle",x);break;case"input":Lt(x,T),fr("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!T.multiple},fr("invalid",x);break;case"textarea":Ht(x,T),fr("invalid",x)}gt(f,T),k=null;for(var W in T)if(T.hasOwnProperty(W)){var ee=T[W];W==="children"?typeof ee=="string"?x.textContent!==ee&&(T.suppressHydrationWarning!==!0&&ju(x.textContent,ee,o),k=["children",ee]):typeof ee=="number"&&x.textContent!==""+ee&&(T.suppressHydrationWarning!==!0&&ju(x.textContent,ee,o),k=["children",""+ee]):i.hasOwnProperty(W)&&ee!=null&&W==="onScroll"&&fr("scroll",x)}switch(f){case"input":Ue(x),mn(x,T,!0);break;case"textarea":Ue(x),Y(x);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(x.onclick=ku)}x=k,c.updateQueue=x,x!==null&&(c.flags|=4)}else{W=k.nodeType===9?k:k.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ie(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=W.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=W.createElement(f,{is:x.is}):(o=W.createElement(f),f==="select"&&(W=o,x.multiple?W.multiple=!0:x.size&&(W.size=x.size))):o=W.createElementNS(o,f),o[fa]=c,o[Ba]=x,xj(o,c,!1,!1),c.stateNode=o;e:{switch(W=ft(f,x),f){case"dialog":fr("cancel",o),fr("close",o),k=x;break;case"iframe":case"object":case"embed":fr("load",o),k=x;break;case"video":case"audio":for(k=0;k<cd.length;k++)fr(cd[k],o);k=x;break;case"source":fr("error",o),k=x;break;case"img":case"image":case"link":fr("error",o),fr("load",o),k=x;break;case"details":fr("toggle",o),k=x;break;case"input":Lt(o,x),k=it(o,x),fr("invalid",o);break;case"option":k=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},k=re({},x,{value:void 0}),fr("invalid",o);break;case"textarea":Ht(o,x),k=bn(o,x),fr("invalid",o);break;default:k=x}gt(f,k),ee=k;for(T in ee)if(ee.hasOwnProperty(T)){var se=ee[T];T==="style"?Rt(o,se):T==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&He(o,se)):T==="children"?typeof se=="string"?(f!=="textarea"||se!=="")&&ge(o,se):typeof se=="number"&&ge(o,""+se):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(i.hasOwnProperty(T)?se!=null&&T==="onScroll"&&fr("scroll",o):se!=null&&L(o,T,se,W))}switch(f){case"input":Ue(o),mn(o,x,!1);break;case"textarea":Ue(o),Y(o);break;case"option":x.value!=null&&o.setAttribute("value",""+lt(x.value));break;case"select":o.multiple=!!x.multiple,T=x.value,T!=null?At(o,!!x.multiple,T,!1):x.defaultValue!=null&&At(o,!!x.multiple,x.defaultValue,!0);break;default:typeof k.onClick=="function"&&(o.onclick=ku)}switch(f){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return hi(c),null;case 6:if(o&&c.stateNode!=null)vj(o,c,o.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(n(166));if(f=_o(vd.current),_o(pa.current),ln(c)){if(x=c.stateNode,f=c.memoizedProps,x[fa]=c,(T=x.nodeValue!==f)&&(o=fe,o!==null))switch(o.tag){case 3:ju(x.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ju(x.nodeValue,f,(o.mode&1)!==0)}T&&(c.flags|=4)}else x=(f.nodeType===9?f:f.ownerDocument).createTextNode(x),x[fa]=c,c.stateNode=x}return hi(c),null;case 13:if(lr(dr),x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(De&&Ne!==null&&(c.mode&1)!==0&&(c.flags&128)===0)cn(),nn(),c.flags|=98560,T=!1;else if(T=ln(c),x!==null&&x.dehydrated!==null){if(o===null){if(!T)throw Error(n(318));if(T=c.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[fa]=c}else nn(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;hi(c),T=!1}else st!==null&&(Ny(st),st=null),T=!0;if(!T)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(dr.current&1)!==0?js===0&&(js=3):Cy())),c.updateQueue!==null&&(c.flags|=4),hi(c),null);case 4:return rc(),fy(o,c),o===null&&ud(c.stateNode.containerInfo),hi(c),null;case 10:return li(c.type._context),hi(c),null;case 17:return Is(c.type)&&pd(),hi(c),null;case 19:if(lr(dr),T=c.memoizedState,T===null)return hi(c),null;if(x=(c.flags&128)!==0,W=T.rendering,W===null)if(x)pf(T,!1);else{if(js!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(W=bd(o),W!==null){for(c.flags|=128,pf(T,!1),x=W.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=f,f=c.child;f!==null;)T=f,o=x,T.flags&=14680066,W=T.alternate,W===null?(T.childLanes=0,T.lanes=o,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=W.childLanes,T.lanes=W.lanes,T.child=W.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=W.memoizedProps,T.memoizedState=W.memoizedState,T.updateQueue=W.updateQueue,T.type=W.type,o=W.dependencies,T.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return tr(dr,dr.current&1|2),c.child}o=o.sibling}T.tail!==null&&me()>Lu&&(c.flags|=128,x=!0,pf(T,!1),c.lanes=4194304)}else{if(!x)if(o=bd(W),o!==null){if(c.flags|=128,x=!0,f=o.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),pf(T,!0),T.tail===null&&T.tailMode==="hidden"&&!W.alternate&&!De)return hi(c),null}else 2*me()-T.renderingStartTime>Lu&&f!==1073741824&&(c.flags|=128,x=!0,pf(T,!1),c.lanes=4194304);T.isBackwards?(W.sibling=c.child,c.child=W):(f=T.last,f!==null?f.sibling=W:c.child=W,T.last=W)}return T.tail!==null?(c=T.tail,T.rendering=c,T.tail=c.sibling,T.renderingStartTime=me(),c.sibling=null,f=dr.current,tr(dr,x?f&1|2:f&1),c):(hi(c),null);case 22:case 23:return Sy(),x=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(ra&1073741824)!==0&&(hi(c),c.subtreeFlags&6&&(c.flags|=8192)):hi(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function dA(o,c){switch(de(c),c.tag){case 1:return Is(c.type)&&pd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return rc(),lr(Gs),lr(Er),wd(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Xa(c),null;case 13:if(lr(dr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));nn()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return lr(dr),null;case 4:return rc(),null;case 10:return li(c.type._context),null;case 22:case 23:return Sy(),null;case 24:return null;default:return null}}var Lp=!1,fi=!1,uA=typeof WeakSet=="function"?WeakSet:Set,It=null;function Iu(o,c){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){Br(o,c,x)}else f.current=null}function my(o,c,f){try{f()}catch(x){Br(o,c,x)}}var bj=!1;function hA(o,c){if(af=da,o=fp(),Jh(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var k=x.anchorOffset,T=x.focusNode;x=x.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var W=0,ee=-1,se=-1,_e=0,Je=0,rt=o,Qe=null;t:for(;;){for(var kt;rt!==f||k!==0&&rt.nodeType!==3||(ee=W+k),rt!==T||x!==0&&rt.nodeType!==3||(se=W+x),rt.nodeType===3&&(W+=rt.nodeValue.length),(kt=rt.firstChild)!==null;)Qe=rt,rt=kt;for(;;){if(rt===o)break t;if(Qe===f&&++_e===k&&(ee=W),Qe===T&&++Je===x&&(se=W),(kt=rt.nextSibling)!==null)break;rt=Qe,Qe=rt.parentNode}rt=kt}f=ee===-1||se===-1?null:{start:ee,end:se}}else f=null}f=f||{start:0,end:0}}else f=null;for(of={focusedElem:o,selectionRange:f},da=!1,It=c;It!==null;)if(c=It,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,It=o;else for(;It!==null;){c=It;try{var Dt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Dt!==null){var zt=Dt.memoizedProps,ns=Dt.memoizedState,be=c.stateNode,ue=be.getSnapshotBeforeUpdate(c.elementType===c.type?zt:Qa(c.type,zt),ns);be.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:var je=c.stateNode.containerInfo;je.nodeType===1?je.textContent="":je.nodeType===9&&je.documentElement&&je.removeChild(je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(dt){Br(c,c.return,dt)}if(o=c.sibling,o!==null){o.return=c.return,It=o;break}It=c.return}return Dt=bj,bj=!1,Dt}function gf(o,c,f){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&o)===o){var T=k.destroy;k.destroy=void 0,T!==void 0&&my(c,f,T)}k=k.next}while(k!==x)}}function Mp(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&o)===o){var x=f.create;f.destroy=x()}f=f.next}while(f!==c)}}function py(o){var c=o.ref;if(c!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof c=="function"?c(o):c.current=o}}function wj(o){var c=o.alternate;c!==null&&(o.alternate=null,wj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[fa],delete c[Ba],delete c[cf],delete c[Gx],delete c[Kx])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function jj(o){return o.tag===5||o.tag===3||o.tag===4}function kj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||jj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function gy(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(o,c):f.insertBefore(o,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(o,f)):(c=f,c.appendChild(o)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=ku));else if(x!==4&&(o=o.child,o!==null))for(gy(o,c,f),o=o.sibling;o!==null;)gy(o,c,f),o=o.sibling}function xy(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(xy(o,c,f),o=o.sibling;o!==null;)xy(o,c,f),o=o.sibling}var Ys=null,Ja=!1;function ac(o,c,f){for(f=f.child;f!==null;)Nj(o,c,f),f=f.sibling}function Nj(o,c,f){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Kn,f)}catch{}switch(f.tag){case 5:fi||Iu(f,c);case 6:var x=Ys,k=Ja;Ys=null,ac(o,c,f),Ys=x,Ja=k,Ys!==null&&(Ja?(o=Ys,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):Ys.removeChild(f.stateNode));break;case 18:Ys!==null&&(Ja?(o=Ys,f=f.stateNode,o.nodeType===8?fd(o.parentNode,f):o.nodeType===1&&fd(o,f),hr(o)):fd(Ys,f.stateNode));break;case 4:x=Ys,k=Ja,Ys=f.stateNode.containerInfo,Ja=!0,ac(o,c,f),Ys=x,Ja=k;break;case 0:case 11:case 14:case 15:if(!fi&&(x=f.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){k=x=x.next;do{var T=k,W=T.destroy;T=T.tag,W!==void 0&&((T&2)!==0||(T&4)!==0)&&my(f,c,W),k=k.next}while(k!==x)}ac(o,c,f);break;case 1:if(!fi&&(Iu(f,c),x=f.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=f.memoizedProps,x.state=f.memoizedState,x.componentWillUnmount()}catch(ee){Br(f,c,ee)}ac(o,c,f);break;case 21:ac(o,c,f);break;case 22:f.mode&1?(fi=(x=fi)||f.memoizedState!==null,ac(o,c,f),fi=x):ac(o,c,f);break;default:ac(o,c,f)}}function _j(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new uA),c.forEach(function(x){var k=wA.bind(null,o,x);f.has(x)||(f.add(x),x.then(k,k))})}}function Za(o,c){var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var k=f[x];try{var T=o,W=c,ee=W;e:for(;ee!==null;){switch(ee.tag){case 5:Ys=ee.stateNode,Ja=!1;break e;case 3:Ys=ee.stateNode.containerInfo,Ja=!0;break e;case 4:Ys=ee.stateNode.containerInfo,Ja=!0;break e}ee=ee.return}if(Ys===null)throw Error(n(160));Nj(T,W,k),Ys=null,Ja=!1;var se=k.alternate;se!==null&&(se.return=null),k.return=null}catch(_e){Br(k,c,_e)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Sj(c,o),c=c.sibling}function Sj(o,c){var f=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Za(c,o),Eo(o),x&4){try{gf(3,o,o.return),Mp(3,o)}catch(zt){Br(o,o.return,zt)}try{gf(5,o,o.return)}catch(zt){Br(o,o.return,zt)}}break;case 1:Za(c,o),Eo(o),x&512&&f!==null&&Iu(f,f.return);break;case 5:if(Za(c,o),Eo(o),x&512&&f!==null&&Iu(f,f.return),o.flags&32){var k=o.stateNode;try{ge(k,"")}catch(zt){Br(o,o.return,zt)}}if(x&4&&(k=o.stateNode,k!=null)){var T=o.memoizedProps,W=f!==null?f.memoizedProps:T,ee=o.type,se=o.updateQueue;if(o.updateQueue=null,se!==null)try{ee==="input"&&T.type==="radio"&&T.name!=null&&Bt(k,T),ft(ee,W);var _e=ft(ee,T);for(W=0;W<se.length;W+=2){var Je=se[W],rt=se[W+1];Je==="style"?Rt(k,rt):Je==="dangerouslySetInnerHTML"?He(k,rt):Je==="children"?ge(k,rt):L(k,Je,rt,_e)}switch(ee){case"input":Ge(k,T);break;case"textarea":ze(k,T);break;case"select":var Qe=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!T.multiple;var kt=T.value;kt!=null?At(k,!!T.multiple,kt,!1):Qe!==!!T.multiple&&(T.defaultValue!=null?At(k,!!T.multiple,T.defaultValue,!0):At(k,!!T.multiple,T.multiple?[]:"",!1))}k[Ba]=T}catch(zt){Br(o,o.return,zt)}}break;case 6:if(Za(c,o),Eo(o),x&4){if(o.stateNode===null)throw Error(n(162));k=o.stateNode,T=o.memoizedProps;try{k.nodeValue=T}catch(zt){Br(o,o.return,zt)}}break;case 3:if(Za(c,o),Eo(o),x&4&&f!==null&&f.memoizedState.isDehydrated)try{hr(c.containerInfo)}catch(zt){Br(o,o.return,zt)}break;case 4:Za(c,o),Eo(o);break;case 13:Za(c,o),Eo(o),k=o.child,k.flags&8192&&(T=k.memoizedState!==null,k.stateNode.isHidden=T,!T||k.alternate!==null&&k.alternate.memoizedState!==null||(by=me())),x&4&&_j(o);break;case 22:if(Je=f!==null&&f.memoizedState!==null,o.mode&1?(fi=(_e=fi)||Je,Za(c,o),fi=_e):Za(c,o),Eo(o),x&8192){if(_e=o.memoizedState!==null,(o.stateNode.isHidden=_e)&&!Je&&(o.mode&1)!==0)for(It=o,Je=o.child;Je!==null;){for(rt=It=Je;It!==null;){switch(Qe=It,kt=Qe.child,Qe.tag){case 0:case 11:case 14:case 15:gf(4,Qe,Qe.return);break;case 1:Iu(Qe,Qe.return);var Dt=Qe.stateNode;if(typeof Dt.componentWillUnmount=="function"){x=Qe,f=Qe.return;try{c=x,Dt.props=c.memoizedProps,Dt.state=c.memoizedState,Dt.componentWillUnmount()}catch(zt){Br(x,f,zt)}}break;case 5:Iu(Qe,Qe.return);break;case 22:if(Qe.memoizedState!==null){Tj(rt);continue}}kt!==null?(kt.return=Qe,It=kt):Tj(rt)}Je=Je.sibling}e:for(Je=null,rt=o;;){if(rt.tag===5){if(Je===null){Je=rt;try{k=rt.stateNode,_e?(T=k.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(ee=rt.stateNode,se=rt.memoizedProps.style,W=se!=null&&se.hasOwnProperty("display")?se.display:null,ee.style.display=Ze("display",W))}catch(zt){Br(o,o.return,zt)}}}else if(rt.tag===6){if(Je===null)try{rt.stateNode.nodeValue=_e?"":rt.memoizedProps}catch(zt){Br(o,o.return,zt)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===o)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===o)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===o)break e;Je===rt&&(Je=null),rt=rt.return}Je===rt&&(Je=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:Za(c,o),Eo(o),x&4&&_j(o);break;case 21:break;default:Za(c,o),Eo(o)}}function Eo(o){var c=o.flags;if(c&2){try{e:{for(var f=o.return;f!==null;){if(jj(f)){var x=f;break e}f=f.return}throw Error(n(160))}switch(x.tag){case 5:var k=x.stateNode;x.flags&32&&(ge(k,""),x.flags&=-33);var T=kj(o);xy(o,T,k);break;case 3:case 4:var W=x.stateNode.containerInfo,ee=kj(o);gy(o,ee,W);break;default:throw Error(n(161))}}catch(se){Br(o,o.return,se)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function fA(o,c,f){It=o,Cj(o)}function Cj(o,c,f){for(var x=(o.mode&1)!==0;It!==null;){var k=It,T=k.child;if(k.tag===22&&x){var W=k.memoizedState!==null||Lp;if(!W){var ee=k.alternate,se=ee!==null&&ee.memoizedState!==null||fi;ee=Lp;var _e=fi;if(Lp=W,(fi=se)&&!_e)for(It=k;It!==null;)W=It,se=W.child,W.tag===22&&W.memoizedState!==null?Aj(k):se!==null?(se.return=W,It=se):Aj(k);for(;T!==null;)It=T,Cj(T),T=T.sibling;It=k,Lp=ee,fi=_e}Ej(o)}else(k.subtreeFlags&8772)!==0&&T!==null?(T.return=k,It=T):Ej(o)}}function Ej(o){for(;It!==null;){var c=It;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:fi||Mp(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!fi)if(f===null)x.componentDidMount();else{var k=c.elementType===c.type?f.memoizedProps:Qa(c.type,f.memoizedProps);x.componentDidUpdate(k,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var T=c.updateQueue;T!==null&&Sp(c,T,x);break;case 3:var W=c.updateQueue;if(W!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}Sp(c,W,f)}break;case 5:var ee=c.stateNode;if(f===null&&c.flags&4){f=ee;var se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&f.focus();break;case"img":se.src&&(f.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var _e=c.alternate;if(_e!==null){var Je=_e.memoizedState;if(Je!==null){var rt=Je.dehydrated;rt!==null&&hr(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}fi||c.flags&512&&py(c)}catch(Qe){Br(c,c.return,Qe)}}if(c===o){It=null;break}if(f=c.sibling,f!==null){f.return=c.return,It=f;break}It=c.return}}function Tj(o){for(;It!==null;){var c=It;if(c===o){It=null;break}var f=c.sibling;if(f!==null){f.return=c.return,It=f;break}It=c.return}}function Aj(o){for(;It!==null;){var c=It;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{Mp(4,c)}catch(se){Br(c,f,se)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var k=c.return;try{x.componentDidMount()}catch(se){Br(c,k,se)}}var T=c.return;try{py(c)}catch(se){Br(c,T,se)}break;case 5:var W=c.return;try{py(c)}catch(se){Br(c,W,se)}}}catch(se){Br(c,c.return,se)}if(c===o){It=null;break}var ee=c.sibling;if(ee!==null){ee.return=c.return,It=ee;break}It=c.return}}var mA=Math.ceil,Dp=I.ReactCurrentDispatcher,yy=I.ReactCurrentOwner,xa=I.ReactCurrentBatchConfig,Hn=0,Ls=null,fs=null,Xs=0,ra=0,Ru=jo(0),js=0,xf=null,kd=0,Op=0,vy=0,yf=null,Vi=null,by=0,Lu=1/0,fl=null,Vp=!1,wy=null,oc=null,zp=!1,lc=null,Fp=0,vf=0,jy=null,$p=-1,Up=0;function _i(){return(Hn&6)!==0?me():$p!==-1?$p:$p=me()}function cc(o){return(o.mode&1)===0?1:(Hn&2)!==0&&Xs!==0?Xs&-Xs:cr.transition!==null?(Up===0&&(Up=Fr()),Up):(o=hn,o!==0||(o=window.event,o=o===void 0?16:Da(o.type)),o)}function eo(o,c,f,x){if(50<vf)throw vf=0,jy=null,Error(n(185));Ai(o,f,x),((Hn&2)===0||o!==Ls)&&(o===Ls&&((Hn&2)===0&&(Op|=f),js===4&&dc(o,Xs)),zi(o,x),f===1&&Hn===0&&(c.mode&1)===0&&(Lu=me()+500,Su&&ko()))}function zi(o,c){var f=o.callbackNode;ar(o,c);var x=wi(o,o===Ls?Xs:0);if(x===0)f!==null&&tt(f),o.callbackNode=null,o.callbackPriority=0;else if(c=x&-x,o.callbackPriority!==c){if(f!=null&&tt(f),c===1)o.tag===0?Yx(Ij.bind(null,o)):_p(Ij.bind(null,o)),qx(function(){(Hn&6)===0&&ko()}),f=null;else{switch(Fs(x)){case 1:f=vt;break;case 4:f=tn;break;case 16:f=Vn;break;case 536870912:f=Qr;break;default:f=Vn}f=Fj(f,Pj.bind(null,o))}o.callbackPriority=c,o.callbackNode=f}}function Pj(o,c){if($p=-1,Up=0,(Hn&6)!==0)throw Error(n(327));var f=o.callbackNode;if(Mu()&&o.callbackNode!==f)return null;var x=wi(o,o===Ls?Xs:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||c)c=Bp(o,x);else{c=x;var k=Hn;Hn|=2;var T=Lj();(Ls!==o||Xs!==c)&&(fl=null,Lu=me()+500,_d(o,c));do try{xA();break}catch(ee){Rj(o,ee)}while(!0);ws(),Dp.current=T,Hn=k,fs!==null?c=0:(Ls=null,Xs=0,c=js)}if(c!==0){if(c===2&&(k=Rr(o),k!==0&&(x=k,c=ky(o,k))),c===1)throw f=xf,_d(o,0),dc(o,x),zi(o,me()),f;if(c===6)dc(o,x);else{if(k=o.current.alternate,(x&30)===0&&!pA(k)&&(c=Bp(o,x),c===2&&(T=Rr(o),T!==0&&(x=T,c=ky(o,T))),c===1))throw f=xf,_d(o,0),dc(o,x),zi(o,me()),f;switch(o.finishedWork=k,o.finishedLanes=x,c){case 0:case 1:throw Error(n(345));case 2:Sd(o,Vi,fl);break;case 3:if(dc(o,x),(x&130023424)===x&&(c=by+500-me(),10<c)){if(wi(o,0)!==0)break;if(k=o.suspendedLanes,(k&x)!==x){_i(),o.pingedLanes|=o.suspendedLanes&k;break}o.timeoutHandle=hd(Sd.bind(null,o,Vi,fl),c);break}Sd(o,Vi,fl);break;case 4:if(dc(o,x),(x&4194240)===x)break;for(c=o.eventTimes,k=-1;0<x;){var W=31-jt(x);T=1<<W,W=c[W],W>k&&(k=W),x&=~T}if(x=k,x=me()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*mA(x/1960))-x,10<x){o.timeoutHandle=hd(Sd.bind(null,o,Vi,fl),x);break}Sd(o,Vi,fl);break;case 5:Sd(o,Vi,fl);break;default:throw Error(n(329))}}}return zi(o,me()),o.callbackNode===f?Pj.bind(null,o):null}function ky(o,c){var f=yf;return o.current.memoizedState.isDehydrated&&(_d(o,c).flags|=256),o=Bp(o,c),o!==2&&(c=Vi,Vi=f,c!==null&&Ny(c)),o}function Ny(o){Vi===null?Vi=o:Vi.push.apply(Vi,o)}function pA(o){for(var c=o;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var k=f[x],T=k.getSnapshot;k=k.value;try{if(!na(T(),k))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function dc(o,c){for(c&=~vy,c&=~Op,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var f=31-jt(c),x=1<<f;o[f]=-1,c&=~x}}function Ij(o){if((Hn&6)!==0)throw Error(n(327));Mu();var c=wi(o,0);if((c&1)===0)return zi(o,me()),null;var f=Bp(o,c);if(o.tag!==0&&f===2){var x=Rr(o);x!==0&&(c=x,f=ky(o,x))}if(f===1)throw f=xf,_d(o,0),dc(o,c),zi(o,me()),f;if(f===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Sd(o,Vi,fl),zi(o,me()),null}function _y(o,c){var f=Hn;Hn|=1;try{return o(c)}finally{Hn=f,Hn===0&&(Lu=me()+500,Su&&ko())}}function Nd(o){lc!==null&&lc.tag===0&&(Hn&6)===0&&Mu();var c=Hn;Hn|=1;var f=xa.transition,x=hn;try{if(xa.transition=null,hn=1,o)return o()}finally{hn=x,xa.transition=f,Hn=c,(Hn&6)===0&&ko()}}function Sy(){ra=Ru.current,lr(Ru)}function _d(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,Hx(f)),fs!==null)for(f=fs.return;f!==null;){var x=f;switch(de(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&pd();break;case 3:rc(),lr(Gs),lr(Er),wd();break;case 5:Xa(x);break;case 4:rc();break;case 13:lr(dr);break;case 19:lr(dr);break;case 10:li(x.type._context);break;case 22:case 23:Sy()}f=f.return}if(Ls=o,fs=o=uc(o.current,null),Xs=ra=c,js=0,xf=null,vy=Op=kd=0,Vi=yf=null,Rs!==null){for(c=0;c<Rs.length;c++)if(f=Rs[c],x=f.interleaved,x!==null){f.interleaved=null;var k=x.next,T=f.pending;if(T!==null){var W=T.next;T.next=k,x.next=W}f.pending=x}Rs=null}return o}function Rj(o,c){do{var f=fs;try{if(ws(),jd.current=Ap,sc){for(var x=vr.memoizedState;x!==null;){var k=x.queue;k!==null&&(k.pending=null),x=x.next}sc=!1}if(So=0,hs=ts=vr=null,ic=!1,hf=0,yy.current=null,f===null||f.return===null){js=1,xf=c,fs=null;break}e:{var T=o,W=f.return,ee=f,se=c;if(c=Xs,ee.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var _e=se,Je=ee,rt=Je.tag;if((Je.mode&1)===0&&(rt===0||rt===11||rt===15)){var Qe=Je.alternate;Qe?(Je.updateQueue=Qe.updateQueue,Je.memoizedState=Qe.memoizedState,Je.lanes=Qe.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var kt=sj(W);if(kt!==null){kt.flags&=-257,ij(kt,W,ee,T,c),kt.mode&1&&rj(T,_e,c),c=kt,se=_e;var Dt=c.updateQueue;if(Dt===null){var zt=new Set;zt.add(se),c.updateQueue=zt}else Dt.add(se);break e}else{if((c&1)===0){rj(T,_e,c),Cy();break e}se=Error(n(426))}}else if(De&&ee.mode&1){var ns=sj(W);if(ns!==null){(ns.flags&65536)===0&&(ns.flags|=256),ij(ns,W,ee,T,c),qn(Pu(se,ee));break e}}T=se=Pu(se,ee),js!==4&&(js=2),yf===null?yf=[T]:yf.push(T),T=W;do{switch(T.tag){case 3:T.flags|=65536,c&=-c,T.lanes|=c;var be=tj(T,se,c);yd(T,be);break e;case 1:ee=se;var ue=T.type,je=T.stateNode;if((T.flags&128)===0&&(typeof ue.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&(oc===null||!oc.has(je)))){T.flags|=65536,c&=-c,T.lanes|=c;var dt=nj(T,ee,c);yd(T,dt);break e}}T=T.return}while(T!==null)}Dj(f)}catch(Ut){c=Ut,fs===f&&f!==null&&(fs=f=f.return);continue}break}while(!0)}function Lj(){var o=Dp.current;return Dp.current=Ap,o===null?Ap:o}function Cy(){(js===0||js===3||js===2)&&(js=4),Ls===null||(kd&268435455)===0&&(Op&268435455)===0||dc(Ls,Xs)}function Bp(o,c){var f=Hn;Hn|=2;var x=Lj();(Ls!==o||Xs!==c)&&(fl=null,_d(o,c));do try{gA();break}catch(k){Rj(o,k)}while(!0);if(ws(),Hn=f,Dp.current=x,fs!==null)throw Error(n(261));return Ls=null,Xs=0,js}function gA(){for(;fs!==null;)Mj(fs)}function xA(){for(;fs!==null&&!Pt();)Mj(fs)}function Mj(o){var c=zj(o.alternate,o,ra);o.memoizedProps=o.pendingProps,c===null?Dj(o):fs=c,yy.current=null}function Dj(o){var c=o;do{var f=c.alternate;if(o=c.return,(c.flags&32768)===0){if(f=cA(f,c,ra),f!==null){fs=f;return}}else{if(f=dA(f,c),f!==null){f.flags&=32767,fs=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{js=6,fs=null;return}}if(c=c.sibling,c!==null){fs=c;return}fs=c=o}while(c!==null);js===0&&(js=5)}function Sd(o,c,f){var x=hn,k=xa.transition;try{xa.transition=null,hn=1,yA(o,c,f,x)}finally{xa.transition=k,hn=x}return null}function yA(o,c,f,x){do Mu();while(lc!==null);if((Hn&6)!==0)throw Error(n(327));f=o.finishedWork;var k=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var T=f.lanes|f.childLanes;if(Sn(o,T),o===Ls&&(fs=Ls=null,Xs=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||zp||(zp=!0,Fj(Vn,function(){return Mu(),null})),T=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||T){T=xa.transition,xa.transition=null;var W=hn;hn=1;var ee=Hn;Hn|=4,yy.current=null,hA(o,f),Sj(f,o),rl(of),da=!!af,of=af=null,o.current=f,fA(f),at(),Hn=ee,hn=W,xa.transition=T}else o.current=f;if(zp&&(zp=!1,lc=o,Fp=k),T=o.pendingLanes,T===0&&(oc=null),os(f.stateNode),zi(o,me()),c!==null)for(x=o.onRecoverableError,f=0;f<c.length;f++)k=c[f],x(k.value,{componentStack:k.stack,digest:k.digest});if(Vp)throw Vp=!1,o=wy,wy=null,o;return(Fp&1)!==0&&o.tag!==0&&Mu(),T=o.pendingLanes,(T&1)!==0?o===jy?vf++:(vf=0,jy=o):vf=0,ko(),null}function Mu(){if(lc!==null){var o=Fs(Fp),c=xa.transition,f=hn;try{if(xa.transition=null,hn=16>o?16:o,lc===null)var x=!1;else{if(o=lc,lc=null,Fp=0,(Hn&6)!==0)throw Error(n(331));var k=Hn;for(Hn|=4,It=o.current;It!==null;){var T=It,W=T.child;if((It.flags&16)!==0){var ee=T.deletions;if(ee!==null){for(var se=0;se<ee.length;se++){var _e=ee[se];for(It=_e;It!==null;){var Je=It;switch(Je.tag){case 0:case 11:case 15:gf(8,Je,T)}var rt=Je.child;if(rt!==null)rt.return=Je,It=rt;else for(;It!==null;){Je=It;var Qe=Je.sibling,kt=Je.return;if(wj(Je),Je===_e){It=null;break}if(Qe!==null){Qe.return=kt,It=Qe;break}It=kt}}}var Dt=T.alternate;if(Dt!==null){var zt=Dt.child;if(zt!==null){Dt.child=null;do{var ns=zt.sibling;zt.sibling=null,zt=ns}while(zt!==null)}}It=T}}if((T.subtreeFlags&2064)!==0&&W!==null)W.return=T,It=W;else e:for(;It!==null;){if(T=It,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:gf(9,T,T.return)}var be=T.sibling;if(be!==null){be.return=T.return,It=be;break e}It=T.return}}var ue=o.current;for(It=ue;It!==null;){W=It;var je=W.child;if((W.subtreeFlags&2064)!==0&&je!==null)je.return=W,It=je;else e:for(W=ue;It!==null;){if(ee=It,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:Mp(9,ee)}}catch(Ut){Br(ee,ee.return,Ut)}if(ee===W){It=null;break e}var dt=ee.sibling;if(dt!==null){dt.return=ee.return,It=dt;break e}It=ee.return}}if(Hn=k,ko(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Kn,o)}catch{}x=!0}return x}finally{hn=f,xa.transition=c}}return!1}function Oj(o,c,f){c=Pu(f,c),c=tj(o,c,1),o=Ya(o,c,1),c=_i(),o!==null&&(Ai(o,1,c),zi(o,c))}function Br(o,c,f){if(o.tag===3)Oj(o,o,f);else for(;c!==null;){if(c.tag===3){Oj(c,o,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(oc===null||!oc.has(x))){o=Pu(f,o),o=nj(c,o,1),c=Ya(c,o,1),o=_i(),c!==null&&(Ai(c,1,o),zi(c,o));break}}c=c.return}}function vA(o,c,f){var x=o.pingCache;x!==null&&x.delete(c),c=_i(),o.pingedLanes|=o.suspendedLanes&f,Ls===o&&(Xs&f)===f&&(js===4||js===3&&(Xs&130023424)===Xs&&500>me()-by?_d(o,0):vy|=f),zi(o,c)}function Vj(o,c){c===0&&((o.mode&1)===0?c=1:(c=Ji,Ji<<=1,(Ji&130023424)===0&&(Ji=4194304)));var f=_i();o=Pn(o,c),o!==null&&(Ai(o,c,f),zi(o,f))}function bA(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),Vj(o,f)}function wA(o,c){var f=0;switch(o.tag){case 13:var x=o.stateNode,k=o.memoizedState;k!==null&&(f=k.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(c),Vj(o,f)}var zj;zj=function(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps||Gs.current)Oi=!0;else{if((o.lanes&f)===0&&(c.flags&128)===0)return Oi=!1,lA(o,c,f);Oi=(o.flags&131072)!==0}else Oi=!1,De&&(c.flags&1048576)!==0&&P(c,cl,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;Rp(o,c),o=c.pendingProps;var k=ll(c,Er.current);sr(c,f),k=Qx(null,c,x,o,k,f);var T=Jx();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Is(x)?(T=!0,ma(c)):T=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,di(c),k.updater=Pp,c.stateNode=k,k._reactInternals=c,sy(c,x,o,f),c=ly(null,c,x,!0,T,f)):(c.tag=0,De&&T&&q(c),Ni(null,c,k,f),c=c.child),c;case 16:x=c.elementType;e:{switch(Rp(o,c),o=c.pendingProps,k=x._init,x=k(x._payload),c.type=x,k=c.tag=kA(x),o=Qa(x,o),k){case 0:c=oy(null,c,x,o,f);break e;case 1:c=uj(null,c,x,o,f);break e;case 11:c=aj(null,c,x,o,f);break e;case 14:c=oj(null,c,x,Qa(x.type,o),f);break e}throw Error(n(306,x,""))}return c;case 0:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:Qa(x,k),oy(o,c,x,k,f);case 1:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:Qa(x,k),uj(o,c,x,k,f);case 3:e:{if(hj(c),o===null)throw Error(n(387));x=c.pendingProps,T=c.memoizedState,k=T.element,Ka(o,c),Cu(c,x,null,f);var W=c.memoizedState;if(x=W.element,T.isDehydrated)if(T={element:x,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){k=Pu(Error(n(423)),c),c=fj(o,c,x,f,k);break e}else if(x!==k){k=Pu(Error(n(424)),c),c=fj(o,c,x,f,k);break e}else for(Ne=Ua(c.stateNode.containerInfo.firstChild),fe=c,De=!0,st=null,f=Qn(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(nn(),x===k){c=hl(o,c,f);break e}Ni(o,c,x,f)}c=c.child}return c;case 5:return Cp(c),o===null&&gn(c),x=c.type,k=c.pendingProps,T=o!==null?o.memoizedProps:null,W=k.children,Xl(x,k)?W=null:T!==null&&Xl(x,T)&&(c.flags|=32),dj(o,c),Ni(o,c,W,f),c.child;case 6:return o===null&&gn(c),null;case 13:return mj(o,c,f);case 4:return Eu(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=Mn(c,null,x,f):Ni(o,c,x,f),c.child;case 11:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:Qa(x,k),aj(o,c,x,k,f);case 7:return Ni(o,c,c.pendingProps,f),c.child;case 8:return Ni(o,c,c.pendingProps.children,f),c.child;case 12:return Ni(o,c,c.pendingProps.children,f),c.child;case 10:e:{if(x=c.type._context,k=c.pendingProps,T=c.memoizedProps,W=k.value,tr(Un,x._currentValue),x._currentValue=W,T!==null)if(na(T.value,W)){if(T.children===k.children&&!Gs.current){c=hl(o,c,f);break e}}else for(T=c.child,T!==null&&(T.return=c);T!==null;){var ee=T.dependencies;if(ee!==null){W=T.child;for(var se=ee.firstContext;se!==null;){if(se.context===x){if(T.tag===1){se=Di(-1,f&-f),se.tag=2;var _e=T.updateQueue;if(_e!==null){_e=_e.shared;var Je=_e.pending;Je===null?se.next=se:(se.next=Je.next,Je.next=se),_e.pending=se}}T.lanes|=f,se=T.alternate,se!==null&&(se.lanes|=f),ci(T.return,f,c),ee.lanes|=f;break}se=se.next}}else if(T.tag===10)W=T.type===c.type?null:T.child;else if(T.tag===18){if(W=T.return,W===null)throw Error(n(341));W.lanes|=f,ee=W.alternate,ee!==null&&(ee.lanes|=f),ci(W,f,c),W=T.sibling}else W=T.child;if(W!==null)W.return=T;else for(W=T;W!==null;){if(W===c){W=null;break}if(T=W.sibling,T!==null){T.return=W.return,W=T;break}W=W.return}T=W}Ni(o,c,k.children,f),c=c.child}return c;case 9:return k=c.type,x=c.pendingProps.children,sr(c,f),k=Lr(k),x=x(k),c.flags|=1,Ni(o,c,x,f),c.child;case 14:return x=c.type,k=Qa(x,c.pendingProps),k=Qa(x.type,k),oj(o,c,x,k,f);case 15:return lj(o,c,c.type,c.pendingProps,f);case 17:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:Qa(x,k),Rp(o,c),c.tag=1,Is(x)?(o=!0,ma(c)):o=!1,sr(c,f),Zw(c,x,k),sy(c,x,k,f),ly(null,c,x,!0,o,f);case 19:return gj(o,c,f);case 22:return cj(o,c,f)}throw Error(n(156,c.tag))};function Fj(o,c){return et(o,c)}function jA(o,c,f,x){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(o,c,f,x){return new jA(o,c,f,x)}function Ey(o){return o=o.prototype,!(!o||!o.isReactComponent)}function kA(o){if(typeof o=="function")return Ey(o)?1:0;if(o!=null){if(o=o.$$typeof,o===H)return 11;if(o===X)return 14}return 2}function uc(o,c){var f=o.alternate;return f===null?(f=ya(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function Wp(o,c,f,x,k,T){var W=2;if(x=o,typeof o=="function")Ey(o)&&(W=1);else if(typeof o=="string")W=5;else e:switch(o){case E:return Cd(f.children,k,T,c);case M:W=8,k|=8;break;case O:return o=ya(12,f,c,k|2),o.elementType=O,o.lanes=T,o;case V:return o=ya(13,f,c,k),o.elementType=V,o.lanes=T,o;case K:return o=ya(19,f,c,k),o.elementType=K,o.lanes=T,o;case we:return Hp(f,k,T,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case j:W=10;break e;case U:W=9;break e;case H:W=11;break e;case X:W=14;break e;case ne:W=16,x=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=ya(W,f,c,k),c.elementType=o,c.type=x,c.lanes=T,c}function Cd(o,c,f,x){return o=ya(7,o,x,c),o.lanes=f,o}function Hp(o,c,f,x){return o=ya(22,o,x,c),o.elementType=we,o.lanes=f,o.stateNode={isHidden:!1},o}function Ty(o,c,f){return o=ya(6,o,null,c),o.lanes=f,o}function Ay(o,c,f){return c=ya(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function NA(o,c,f,x,k){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ti(0),this.expirationTimes=Ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.identifierPrefix=x,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Py(o,c,f,x,k,T,W,ee,se){return o=new NA(o,c,f,ee,se),c===1?(c=1,T===!0&&(c|=8)):c=0,T=ya(3,null,null,c),o.current=T,T.stateNode=o,T.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},di(T),o}function _A(o,c,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:x==null?null:""+x,children:o,containerInfo:c,implementation:f}}function $j(o){if(!o)return Wa;o=o._reactInternals;e:{if(J(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Is(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var f=o.type;if(Is(f))return Np(o,f,c)}return c}function Uj(o,c,f,x,k,T,W,ee,se){return o=Py(f,x,!0,o,k,T,W,ee,se),o.context=$j(null),f=o.current,x=_i(),k=cc(f),T=Di(x,k),T.callback=c??null,Ya(f,T,k),o.current.lanes=k,Ai(o,k,x),zi(o,x),o}function qp(o,c,f,x){var k=c.current,T=_i(),W=cc(k);return f=$j(f),c.context===null?c.context=f:c.pendingContext=f,c=Di(T,W),c.payload={element:o},x=x===void 0?null:x,x!==null&&(c.callback=x),o=Ya(k,c,W),o!==null&&(eo(o,k,W,T),xd(o,k,W)),W}function Gp(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Bj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Iy(o,c){Bj(o,c),(o=o.alternate)&&Bj(o,c)}function SA(){return null}var Wj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Ry(o){this._internalRoot=o}Kp.prototype.render=Ry.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));qp(o,c,null,null)},Kp.prototype.unmount=Ry.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Nd(function(){qp(null,o,null,null)}),c[qs]=null}};function Kp(o){this._internalRoot=o}Kp.prototype.unstable_scheduleHydration=function(o){if(o){var c=po();o={blockedOn:null,target:o,priority:c};for(var f=0;f<bs.length&&c!==0&&c<bs[f].priority;f++);bs.splice(f,0,o),f===0&&xt(o)}};function Ly(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Yp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Hj(){}function CA(o,c,f,x,k){if(k){if(typeof x=="function"){var T=x;x=function(){var _e=Gp(W);T.call(_e)}}var W=Uj(c,x,o,0,null,!1,!1,"",Hj);return o._reactRootContainer=W,o[qs]=W.current,ud(o.nodeType===8?o.parentNode:o),Nd(),W}for(;k=o.lastChild;)o.removeChild(k);if(typeof x=="function"){var ee=x;x=function(){var _e=Gp(se);ee.call(_e)}}var se=Py(o,0,!1,null,null,!1,!1,"",Hj);return o._reactRootContainer=se,o[qs]=se.current,ud(o.nodeType===8?o.parentNode:o),Nd(function(){qp(c,se,f,x)}),se}function Xp(o,c,f,x,k){var T=f._reactRootContainer;if(T){var W=T;if(typeof k=="function"){var ee=k;k=function(){var se=Gp(W);ee.call(se)}}qp(c,W,o,k)}else W=CA(f,c,o,k,x);return Gp(W)}mo=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var f=Ts(c.pendingLanes);f!==0&&(As(c,f|1),zi(c,me()),(Hn&6)===0&&(Lu=me()+500,ko()))}break;case 13:Nd(function(){var x=Pn(o,1);if(x!==null){var k=_i();eo(x,o,1,k)}}),Iy(o,1)}},La=function(o){if(o.tag===13){var c=Pn(o,134217728);if(c!==null){var f=_i();eo(c,o,134217728,f)}Iy(o,134217728)}},Zi=function(o){if(o.tag===13){var c=cc(o),f=Pn(o,c);if(f!==null){var x=_i();eo(f,o,c,x)}Iy(o,c)}},po=function(){return hn},Yo=function(o,c){var f=hn;try{return hn=o,c()}finally{hn=f}},ut=function(o,c,f){switch(c){case"input":if(Ge(o,f),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var x=f[c];if(x!==o&&x.form===o.form){var k=Nu(x);if(!k)throw Error(n(90));ot(x),Ge(x,k)}}}break;case"textarea":ze(o,f);break;case"select":c=f.value,c!=null&&At(o,!!f.multiple,c,!1)}},Wn=_y,Ra=Nd;var EA={usingClientEntryPoint:!1,Events:[md,Zl,Nu,on,Nn,_y]},bf={findFiberByHostInstance:al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TA={bundleType:bf.bundleType,version:bf.version,rendererPackageName:bf.rendererPackageName,rendererConfig:bf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ve(o),o===null?null:o.stateNode},findFiberByHostInstance:bf.findFiberByHostInstance||SA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qp.isDisabled&&Qp.supportsFiber)try{Kn=Qp.inject(TA),zn=Qp}catch{}}return Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EA,Fi.createPortal=function(o,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ly(c))throw Error(n(200));return _A(o,c,null,f)},Fi.createRoot=function(o,c){if(!Ly(o))throw Error(n(299));var f=!1,x="",k=Wj;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Py(o,1,!1,null,null,f,!1,x,k),o[qs]=c.current,ud(o.nodeType===8?o.parentNode:o),new Ry(c)},Fi.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=ve(c),o=o===null?null:o.stateNode,o},Fi.flushSync=function(o){return Nd(o)},Fi.hydrate=function(o,c,f){if(!Yp(c))throw Error(n(200));return Xp(null,o,c,!0,f)},Fi.hydrateRoot=function(o,c,f){if(!Ly(o))throw Error(n(405));var x=f!=null&&f.hydratedSources||null,k=!1,T="",W=Wj;if(f!=null&&(f.unstable_strictMode===!0&&(k=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onRecoverableError!==void 0&&(W=f.onRecoverableError)),c=Uj(c,null,o,1,f??null,k,!1,T,W),o[qs]=c.current,ud(o),x)for(o=0;o<x.length;o++)f=x[o],k=f._getVersion,k=k(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,k]:c.mutableSourceEagerHydrationData.push(f,k);return new Kp(c)},Fi.render=function(o,c,f){if(!Yp(c))throw Error(n(200));return Xp(null,o,c,!1,f)},Fi.unmountComponentAtNode=function(o){if(!Yp(o))throw Error(n(40));return o._reactRootContainer?(Nd(function(){Xp(null,null,o,!1,function(){o._reactRootContainer=null,o[qs]=null})}),!0):!1},Fi.unstable_batchedUpdates=_y,Fi.unstable_renderSubtreeIntoContainer=function(o,c,f,x){if(!Yp(f))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return Xp(o,c,f,!1,x)},Fi.version="18.3.1-next-f1338f8080-20240426",Fi}var Zj;function K5(){if(Zj)return Oy.exports;Zj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Oy.exports=OA(),Oy.exports}var ek;function VA(){if(ek)return Jp;ek=1;var t=K5();return Jp.createRoot=t.createRoot,Jp.hydrateRoot=t.hydrateRoot,Jp}var zA=VA();const FA=Sh(zA);var V0=K5();const f1=Sh(V0);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function im(){return im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},im.apply(this,arguments)}var wc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wc||(wc={}));const tk="popstate";function $A(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:l,hash:d}=r.location;return Uv("",{pathname:a,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Jg(i)}return BA(e,n,null,t)}function is(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Y5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UA(){return Math.random().toString(36).substr(2,8)}function nk(t,e){return{usr:t.state,key:t.key,idx:e}}function Uv(t,e,n,r){return n===void 0&&(n=null),im({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ch(e):e,{state:n,key:e&&e.key||r||UA()})}function Jg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ch(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d=wc.Pop,u=null,m=g();m==null&&(m=0,l.replaceState(im({},l.state,{idx:m}),""));function g(){return(l.state||{idx:null}).idx}function h(){d=wc.Pop;let _=g(),D=_==null?null:_-m;m=_,u&&u({action:d,location:N.location,delta:D})}function y(_,D){d=wc.Push;let A=Uv(N.location,_,D);m=g()+1;let L=nk(A,m),I=N.createHref(A);try{l.pushState(L,"",I)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(I)}a&&u&&u({action:d,location:N.location,delta:1})}function w(_,D){d=wc.Replace;let A=Uv(N.location,_,D);m=g();let L=nk(A,m),I=N.createHref(A);l.replaceState(L,"",I),a&&u&&u({action:d,location:N.location,delta:0})}function S(_){let D=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof _=="string"?_:Jg(_);return A=A.replace(/ $/,"%20"),is(D,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,D)}let N={get action(){return d},get location(){return t(i,l)},listen(_){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(tk,h),u=_,()=>{i.removeEventListener(tk,h),u=null}},createHref(_){return e(i,_)},createURL:S,encodeLocation(_){let D=S(_);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:y,replace:w,go(_){return l.go(_)}};return N}var rk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rk||(rk={}));function WA(t,e,n){return n===void 0&&(n="/"),HA(t,e,n)}function HA(t,e,n,r){let i=typeof e=="string"?Ch(e):e,a=m1(i.pathname||"/",n);if(a==null)return null;let l=X5(t);qA(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let m=sP(a);d=tP(l[u],m)}return d}function X5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,l,d)=>{let u={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};u.relativePath.startsWith("/")&&(is(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let m=_c([r,u.relativePath]),g=n.concat(u);a.children&&a.children.length>0&&(is(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),X5(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:ZA(m,a.index),routesMeta:g})};return t.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,l);else for(let u of Q5(a.path))i(a,l,u)}),e}function Q5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=Q5(r.join("/")),d=[];return d.push(...l.map(u=>u===""?a:[a,u].join("/"))),i&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function qA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GA=/^:[\w-]+$/,KA=3,YA=2,XA=1,QA=10,JA=-2,sk=t=>t==="*";function ZA(t,e){let n=t.split("/"),r=n.length;return n.some(sk)&&(r+=JA),e&&(r+=YA),n.filter(i=>!sk(i)).reduce((i,a)=>i+(GA.test(a)?KA:a===""?XA:QA),r)}function eP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function tP(t,e,n){let{routesMeta:r}=t,i={},a="/",l=[];for(let d=0;d<r.length;++d){let u=r[d],m=d===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",h=nP({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},g),y=u.route;if(!h)return null;Object.assign(i,h.params),l.push({params:i,pathname:_c([a,h.pathname]),pathnameBase:lP(_c([a,h.pathnameBase])),route:y}),h.pathnameBase!=="/"&&(a=_c([a,h.pathnameBase]))}return l}function nP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,g,h)=>{let{paramName:y,isOptional:w}=g;if(y==="*"){let N=d[h]||"";l=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const S=d[h];return w&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:t}}function rP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Y5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(r.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Y5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function m1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function iP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ch(t):t;return{pathname:n?n.startsWith("/")?n:aP(n,e):e,search:cP(r),hash:dP(i)}}function aP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function p1(t,e){let n=oP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function g1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ch(t):(i=im({},t),is(!i.pathname||!i.pathname.includes("?"),Fy("?","pathname","search",i)),is(!i.pathname||!i.pathname.includes("#"),Fy("#","pathname","hash",i)),is(!i.search||!i.search.includes("#"),Fy("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=n;else{let h=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),h-=1;i.pathname=y.join("/")}d=h>=0?e[h]:"/"}let u=iP(i,d),m=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(m||g)&&(u.pathname+="/"),u}const _c=t=>t.join("/").replace(/\/\/+/g,"/"),lP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const J5=["post","put","patch","delete"];new Set(J5);const hP=["get",...J5];new Set(hP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},am.apply(this,arguments)}const x1=b.createContext(null),fP=b.createContext(null),qc=b.createContext(null),z0=b.createContext(null),Ol=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Z5=b.createContext(null);function mP(t,e){let{relative:n}=e===void 0?{}:e;Eh()||is(!1);let{basename:r,navigator:i}=b.useContext(qc),{hash:a,pathname:l,search:d}=t3(t,{relative:n}),u=l;return r!=="/"&&(u=l==="/"?r:_c([r,l])),i.createHref({pathname:u,search:d,hash:a})}function Eh(){return b.useContext(z0)!=null}function uo(){return Eh()||is(!1),b.useContext(z0).location}function e3(t){b.useContext(qc).static||b.useLayoutEffect(t)}function Sr(){let{isDataRoute:t}=b.useContext(Ol);return t?CP():pP()}function pP(){Eh()||is(!1);let t=b.useContext(x1),{basename:e,future:n,navigator:r}=b.useContext(qc),{matches:i}=b.useContext(Ol),{pathname:a}=uo(),l=JSON.stringify(p1(i,n.v7_relativeSplatPath)),d=b.useRef(!1);return e3(()=>{d.current=!0}),b.useCallback(function(m,g){if(g===void 0&&(g={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let h=g1(m,JSON.parse(l),a,g.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:_c([e,h.pathname])),(g.replace?r.replace:r.push)(h,g.state,g)},[e,r,l,a,t])}function F0(){let{matches:t}=b.useContext(Ol),e=t[t.length-1];return e?e.params:{}}function t3(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(qc),{matches:i}=b.useContext(Ol),{pathname:a}=uo(),l=JSON.stringify(p1(i,r.v7_relativeSplatPath));return b.useMemo(()=>g1(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function gP(t,e){return xP(t,e)}function xP(t,e,n,r){Eh()||is(!1);let{navigator:i}=b.useContext(qc),{matches:a}=b.useContext(Ol),l=a[a.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let m=uo(),g;if(e){var h;let _=typeof e=="string"?Ch(e):e;u==="/"||(h=_.pathname)!=null&&h.startsWith(u)||is(!1),g=_}else g=m;let y=g.pathname||"/",w=y;if(u!=="/"){let _=u.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=WA(t,{pathname:w}),N=jP(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:_c([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:_c([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,r);return e&&N?b.createElement(z0.Provider,{value:{location:am({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:wc.Pop}},N):N}function yP(){let t=SP(),e=uP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const vP=b.createElement(yP,null);class bP extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Ol.Provider,{value:this.props.routeContext},b.createElement(Z5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wP(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(x1);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Ol.Provider,{value:e},r)}function jP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=(i=n)==null?void 0:i.errors;if(d!=null){let g=l.findIndex(h=>h.route.id&&(d==null?void 0:d[h.route.id])!==void 0);g>=0||is(!1),l=l.slice(0,Math.min(l.length,g+1))}let u=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let h=l[g];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(m=g),h.route.id){let{loaderData:y,errors:w}=n,S=h.route.loader&&y[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||S){u=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((g,h,y)=>{let w,S=!1,N=null,_=null;n&&(w=d&&h.route.id?d[h.route.id]:void 0,N=h.route.errorElement||vP,u&&(m<0&&y===0?(EP("route-fallback"),S=!0,_=null):m===y&&(S=!0,_=h.route.hydrateFallbackElement||null)));let D=e.concat(l.slice(0,y+1)),A=()=>{let L;return w?L=N:S?L=_:h.route.Component?L=b.createElement(h.route.Component,null):h.route.element?L=h.route.element:L=g,b.createElement(wP,{match:h,routeContext:{outlet:g,matches:D,isDataRoute:n!=null},children:L})};return n&&(h.route.ErrorBoundary||h.route.errorElement||y===0)?b.createElement(bP,{location:n.location,revalidation:n.revalidation,component:N,error:w,children:A(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):A()},null)}var n3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(n3||{}),r3=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(r3||{});function kP(t){let e=b.useContext(x1);return e||is(!1),e}function NP(t){let e=b.useContext(fP);return e||is(!1),e}function _P(t){let e=b.useContext(Ol);return e||is(!1),e}function s3(t){let e=_P(),n=e.matches[e.matches.length-1];return n.route.id||is(!1),n.route.id}function SP(){var t;let e=b.useContext(Z5),n=NP(),r=s3();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function CP(){let{router:t}=kP(n3.UseNavigateStable),e=s3(r3.UseNavigateStable),n=b.useRef(!1);return e3(()=>{n.current=!0}),b.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,am({fromRouteId:e},a)))},[t,e])}const ik={};function EP(t,e,n){ik[t]||(ik[t]=!0)}function TP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function AP(t){let{to:e,replace:n,state:r,relative:i}=t;Eh()||is(!1);let{future:a,static:l}=b.useContext(qc),{matches:d}=b.useContext(Ol),{pathname:u}=uo(),m=Sr(),g=g1(e,p1(d,a.v7_relativeSplatPath),u,i==="path"),h=JSON.stringify(g);return b.useEffect(()=>m(JSON.parse(h),{replace:n,state:r,relative:i}),[m,h,i,n,r]),null}function Pr(t){is(!1)}function PP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=wc.Pop,navigator:a,static:l=!1,future:d}=t;Eh()&&is(!1);let u=e.replace(/^\/*/,"/"),m=b.useMemo(()=>({basename:u,navigator:a,static:l,future:am({v7_relativeSplatPath:!1},d)}),[u,d,a,l]);typeof r=="string"&&(r=Ch(r));let{pathname:g="/",search:h="",hash:y="",state:w=null,key:S="default"}=r,N=b.useMemo(()=>{let _=m1(g,u);return _==null?null:{location:{pathname:_,search:h,hash:y,state:w,key:S},navigationType:i}},[u,g,h,y,w,S,i]);return N==null?null:b.createElement(qc.Provider,{value:m},b.createElement(z0.Provider,{children:n,value:N}))}function IP(t){let{children:e,location:n}=t;return gP(Bv(e),n)}new Promise(()=>{});function Bv(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let a=[...e,i];if(r.type===b.Fragment){n.push.apply(n,Bv(r.props.children,a));return}r.type!==Pr&&is(!1),!r.props.index||!r.props.children||is(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Bv(r.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wv(){return Wv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wv.apply(this,arguments)}function RP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MP(t,e){return t.button===0&&(!e||e==="_self")&&!LP(t)}function Hv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function DP(t,e){let n=Hv(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const OP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VP="6";try{window.__reactRouterVersion=VP}catch{}const zP="startTransition",ak=$v[zP];function FP(t){let{basename:e,children:n,future:r,window:i}=t,a=b.useRef();a.current==null&&(a.current=$A({window:i,v5Compat:!0}));let l=a.current,[d,u]=b.useState({action:l.action,location:l.location}),{v7_startTransition:m}=r||{},g=b.useCallback(h=>{m&&ak?ak(()=>u(h)):u(h)},[u,m]);return b.useLayoutEffect(()=>l.listen(g),[l,g]),b.useEffect(()=>TP(r),[r]),b.createElement(PP,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:l,future:r})}const $P=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yt=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:l,state:d,target:u,to:m,preventScrollReset:g,viewTransition:h}=e,y=RP(e,OP),{basename:w}=b.useContext(qc),S,N=!1;if(typeof m=="string"&&UP.test(m)&&(S=m,$P))try{let L=new URL(window.location.href),I=m.startsWith("//")?new URL(L.protocol+m):new URL(m),F=m1(I.pathname,w);I.origin===L.origin&&F!=null?m=F+I.search+I.hash:N=!0}catch{}let _=mP(m,{relative:i}),D=BP(m,{replace:l,state:d,target:u,preventScrollReset:g,relative:i,viewTransition:h});function A(L){r&&r(L),L.defaultPrevented||D(L)}return b.createElement("a",Wv({},y,{href:S||_,onClick:N||a?r:A,ref:n,target:u}))});var ok;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ok||(ok={}));var lk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(lk||(lk={}));function BP(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:l,viewTransition:d}=e===void 0?{}:e,u=Sr(),m=uo(),g=t3(t,{relative:l});return b.useCallback(h=>{if(MP(h,n)){h.preventDefault();let y=r!==void 0?r:Jg(m)===Jg(g);u(t,{replace:y,state:i,preventScrollReset:a,relative:l,viewTransition:d})}},[m,u,g,r,i,n,t,a,l,d])}function y1(t){let e=b.useRef(Hv(t)),n=b.useRef(!1),r=uo(),i=b.useMemo(()=>DP(r.search,n.current?null:e.current),[r.search]),a=Sr(),l=b.useCallback((d,u)=>{const m=Hv(typeof d=="function"?d(i):d);n.current=!0,a("?"+m,u)},[a,i]);return[i,l]}const WP=()=>{};var ck={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],d=t[n++],u=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},a3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,d=l?t[i+1]:0,u=i+2<t.length,m=u?t[i+2]:0,g=a>>2,h=(a&3)<<4|d>>4;let y=(d&15)<<2|m>>6,w=m&63;u||(w=64,l||(y=64)),r.push(n[g],n[h],n[y],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||d==null||m==null||h==null)throw new qP;const y=a<<2|d>>4;if(r.push(y),m!==64){const w=d<<4&240|m>>2;if(r.push(w),h!==64){const S=m<<6&192|h;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GP=function(t){const e=i3(t);return a3.encodeByteArray(e,!0)},Zg=function(t){return GP(t).replace(/\./g,"")},o3=function(t){try{return a3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=()=>KP().__FIREBASE_DEFAULTS__,XP=()=>{if(typeof process>"u"||typeof ck>"u")return;const t=ck.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&o3(t[1]);return e&&JSON.parse(e)},$0=()=>{try{return WP()||YP()||XP()||QP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l3=t=>{var e,n;return(n=(e=$0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},c3=t=>{const e=l3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},d3=()=>{var t;return(t=$0())===null||t===void 0?void 0:t.config},u3=t=>{var e;return(e=$0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function U0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zg(JSON.stringify(n)),Zg(JSON.stringify(l)),""].join(".")}const Of={};function eI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Of))Of[e]?t.emulator.push(e):t.prod.push(e);return t}function tI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dk=!1;function v1(t,e){if(typeof window>"u"||typeof document>"u"||!Vl(window.location.host)||Of[t]===e||Of[t]||dk)return;Of[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=eI().prod.length>0;function l(){const y=document.getElementById(r);y&&y.remove()}function d(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,w){y.setAttribute("width","24"),y.setAttribute("id",w),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function m(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{dk=!0,l()},y}function g(y,w){y.setAttribute("id",w),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function h(){const y=tI(r),w=n("text"),S=document.getElementById(w)||document.createElement("span"),N=n("learnmore"),_=document.getElementById(N)||document.createElement("a"),D=n("preprendIcon"),A=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const L=y.element;d(L),g(_,N);const I=m();u(A,D),L.append(A,S,_,I),document.body.appendChild(L)}a?(S.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yi())}function rI(){var t;const e=(t=$0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oI(){const t=yi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lI(){return!rI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cI(){try{return typeof indexedDB=="object"}catch{return!1}}function dI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="FirebaseError";class ho extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uI,Object.setPrototypeOf(this,ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Om.prototype.create)}}class Om{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?hI(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new ho(i,d,r)}}function hI(t,e){return t.replace(fI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fI=/\{\$([^}]+)}/g;function mI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(uk(a)&&uk(l)){if(!Kd(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ef(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Tf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pI(t,e){const n=new gI(t,e);return n.subscribe.bind(n)}class gI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$y),i.error===void 0&&(i.error=$y),i.complete===void 0&&(i.complete=$y);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $y(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){return t&&t._delegate?t._delegate:t}class _l{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bI(e))try{this.getOrInitializeService({instanceIdentifier:Td})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Td){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Td){return this.instances.has(e)}getOptions(e=Td){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Td){return this.component?this.component.multipleInstances?e:Td:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vI(t){return t===Td?void 0:t}function bI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dn||(Dn={}));const jI={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},kI=Dn.INFO,NI={[Dn.DEBUG]:"log",[Dn.VERBOSE]:"log",[Dn.INFO]:"info",[Dn.WARN]:"warn",[Dn.ERROR]:"error"},_I=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class b1{constructor(e){this.name=e,this._logLevel=kI,this._logHandler=_I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dn.DEBUG,...e),this._logHandler(this,Dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dn.VERBOSE,...e),this._logHandler(this,Dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dn.INFO,...e),this._logHandler(this,Dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dn.WARN,...e),this._logHandler(this,Dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dn.ERROR,...e),this._logHandler(this,Dn.ERROR,...e)}}const SI=(t,e)=>e.some(n=>t instanceof n);let hk,fk;function CI(){return hk||(hk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EI(){return fk||(fk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h3=new WeakMap,qv=new WeakMap,f3=new WeakMap,Uy=new WeakMap,w1=new WeakMap;function TI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Sc(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&h3.set(n,t)}).catch(()=>{}),w1.set(e,t),e}function AI(t){if(qv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});qv.set(t,e)}let Gv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||f3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PI(t){Gv=t(Gv)}function II(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(By(this),e,...n);return f3.set(r,e.sort?e.sort():[e]),Sc(r)}:EI().includes(t)?function(...e){return t.apply(By(this),e),Sc(h3.get(this))}:function(...e){return Sc(t.apply(By(this),e))}}function RI(t){return typeof t=="function"?II(t):(t instanceof IDBTransaction&&AI(t),SI(t,CI())?new Proxy(t,Gv):t)}function Sc(t){if(t instanceof IDBRequest)return TI(t);if(Uy.has(t))return Uy.get(t);const e=RI(t);return e!==t&&(Uy.set(t,e),w1.set(e,t)),e}const By=t=>w1.get(t);function LI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),d=Sc(l);return r&&l.addEventListener("upgradeneeded",u=>{r(Sc(l.result),u.oldVersion,u.newVersion,Sc(l.transaction),u)}),n&&l.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),d.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const MI=["get","getKey","getAll","getAllKeys","count"],DI=["put","add","delete","clear"],Wy=new Map;function mk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wy.get(e))return Wy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=DI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MI.includes(n)))return;const a=async function(l,...d){const u=this.transaction(l,i?"readwrite":"readonly");let m=u.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),i&&u.done]))[0]};return Wy.set(e,a),a}PI(t=>({...t,get:(e,n,r)=>mk(e,n)||t.get(e,n,r),has:(e,n)=>!!mk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kv="@firebase/app",pk="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new b1("@firebase/app"),zI="@firebase/app-compat",FI="@firebase/analytics-compat",$I="@firebase/analytics",UI="@firebase/app-check-compat",BI="@firebase/app-check",WI="@firebase/auth",HI="@firebase/auth-compat",qI="@firebase/database",GI="@firebase/data-connect",KI="@firebase/database-compat",YI="@firebase/functions",XI="@firebase/functions-compat",QI="@firebase/installations",JI="@firebase/installations-compat",ZI="@firebase/messaging",e9="@firebase/messaging-compat",t9="@firebase/performance",n9="@firebase/performance-compat",r9="@firebase/remote-config",s9="@firebase/remote-config-compat",i9="@firebase/storage",a9="@firebase/storage-compat",o9="@firebase/firestore",l9="@firebase/ai",c9="@firebase/firestore-compat",d9="firebase",u9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="[DEFAULT]",h9={[Kv]:"fire-core",[zI]:"fire-core-compat",[$I]:"fire-analytics",[FI]:"fire-analytics-compat",[BI]:"fire-app-check",[UI]:"fire-app-check-compat",[WI]:"fire-auth",[HI]:"fire-auth-compat",[qI]:"fire-rtdb",[GI]:"fire-data-connect",[KI]:"fire-rtdb-compat",[YI]:"fire-fn",[XI]:"fire-fn-compat",[QI]:"fire-iid",[JI]:"fire-iid-compat",[ZI]:"fire-fcm",[e9]:"fire-fcm-compat",[t9]:"fire-perf",[n9]:"fire-perf-compat",[r9]:"fire-rc",[s9]:"fire-rc-compat",[i9]:"fire-gcs",[a9]:"fire-gcs-compat",[o9]:"fire-fst",[c9]:"fire-fst-compat",[l9]:"fire-vertex","fire-js":"fire-js",[d9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new Map,f9=new Map,Xv=new Map;function gk(t,e){try{t.container.addComponent(e)}catch(n){Sl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ac(t){const e=t.name;if(Xv.has(e))return Sl.debug(`There were multiple attempts to register component ${e}.`),!1;Xv.set(e,t);for(const n of e0.values())gk(n,t);for(const n of f9.values())gk(n,t);return!0}function zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ei(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cc=new Om("app","Firebase",m9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _l("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=u9;function m3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Cc.create("bad-app-name",{appName:String(i)});if(n||(n=d3()),!n)throw Cc.create("no-options");const a=e0.get(i);if(a){if(Kd(n,a.options)&&Kd(r,a.config))return a;throw Cc.create("duplicate-app",{appName:i})}const l=new wI(i);for(const u of Xv.values())l.addComponent(u);const d=new p9(n,r,l);return e0.set(i,d),d}function j1(t=Yv){const e=e0.get(t);if(!e&&t===Yv&&d3())return m3();if(!e)throw Cc.create("no-app",{appName:t});return e}function Ca(t,e,n){var r;let i=(r=h9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sl.warn(d.join(" "));return}Ac(new _l(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="firebase-heartbeat-database",x9=1,om="firebase-heartbeat-store";let Hy=null;function p3(){return Hy||(Hy=LI(g9,x9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(om)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cc.create("idb-open",{originalErrorMessage:t.message})})),Hy}async function y9(t){try{const n=(await p3()).transaction(om),r=await n.objectStore(om).get(g3(t));return await n.done,r}catch(e){if(e instanceof ho)Sl.warn(e.message);else{const n=Cc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sl.warn(n.message)}}}async function xk(t,e){try{const r=(await p3()).transaction(om,"readwrite");await r.objectStore(om).put(e,g3(t)),await r.done}catch(n){if(n instanceof ho)Sl.warn(n.message);else{const r=Cc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sl.warn(r.message)}}}function g3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=1024,b9=30;class w9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new k9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=yk();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>b9){const l=N9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Sl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yk(),{heartbeatsToSend:r,unsentEntries:i}=j9(this._heartbeatsCache.heartbeats),a=Zg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Sl.warn(n),""}}}function yk(){return new Date().toISOString().substring(0,10)}function j9(t,e=v9){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),vk(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class k9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cI()?dI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await y9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return xk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return xk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vk(t){return Zg(JSON.stringify({version:2,heartbeats:t})).length}function N9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(t){Ac(new _l("platform-logger",e=>new OI(e),"PRIVATE")),Ac(new _l("heartbeat",e=>new w9(e),"PRIVATE")),Ca(Kv,pk,t),Ca(Kv,pk,"esm2017"),Ca("fire-js","")}_9("");var bk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ec,x3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,M){function O(){}O.prototype=M.prototype,E.D=M.prototype,E.prototype=new O,E.prototype.constructor=E,E.C=function(j,U,H){for(var V=Array(arguments.length-2),K=2;K<arguments.length;K++)V[K-2]=arguments[K];return M.prototype[U].apply(j,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,M,O){O||(O=0);var j=Array(16);if(typeof M=="string")for(var U=0;16>U;++U)j[U]=M.charCodeAt(O++)|M.charCodeAt(O++)<<8|M.charCodeAt(O++)<<16|M.charCodeAt(O++)<<24;else for(U=0;16>U;++U)j[U]=M[O++]|M[O++]<<8|M[O++]<<16|M[O++]<<24;M=E.g[0],O=E.g[1],U=E.g[2];var H=E.g[3],V=M+(H^O&(U^H))+j[0]+3614090360&4294967295;M=O+(V<<7&4294967295|V>>>25),V=H+(U^M&(O^U))+j[1]+3905402710&4294967295,H=M+(V<<12&4294967295|V>>>20),V=U+(O^H&(M^O))+j[2]+606105819&4294967295,U=H+(V<<17&4294967295|V>>>15),V=O+(M^U&(H^M))+j[3]+3250441966&4294967295,O=U+(V<<22&4294967295|V>>>10),V=M+(H^O&(U^H))+j[4]+4118548399&4294967295,M=O+(V<<7&4294967295|V>>>25),V=H+(U^M&(O^U))+j[5]+1200080426&4294967295,H=M+(V<<12&4294967295|V>>>20),V=U+(O^H&(M^O))+j[6]+2821735955&4294967295,U=H+(V<<17&4294967295|V>>>15),V=O+(M^U&(H^M))+j[7]+4249261313&4294967295,O=U+(V<<22&4294967295|V>>>10),V=M+(H^O&(U^H))+j[8]+1770035416&4294967295,M=O+(V<<7&4294967295|V>>>25),V=H+(U^M&(O^U))+j[9]+2336552879&4294967295,H=M+(V<<12&4294967295|V>>>20),V=U+(O^H&(M^O))+j[10]+4294925233&4294967295,U=H+(V<<17&4294967295|V>>>15),V=O+(M^U&(H^M))+j[11]+2304563134&4294967295,O=U+(V<<22&4294967295|V>>>10),V=M+(H^O&(U^H))+j[12]+1804603682&4294967295,M=O+(V<<7&4294967295|V>>>25),V=H+(U^M&(O^U))+j[13]+4254626195&4294967295,H=M+(V<<12&4294967295|V>>>20),V=U+(O^H&(M^O))+j[14]+2792965006&4294967295,U=H+(V<<17&4294967295|V>>>15),V=O+(M^U&(H^M))+j[15]+1236535329&4294967295,O=U+(V<<22&4294967295|V>>>10),V=M+(U^H&(O^U))+j[1]+4129170786&4294967295,M=O+(V<<5&4294967295|V>>>27),V=H+(O^U&(M^O))+j[6]+3225465664&4294967295,H=M+(V<<9&4294967295|V>>>23),V=U+(M^O&(H^M))+j[11]+643717713&4294967295,U=H+(V<<14&4294967295|V>>>18),V=O+(H^M&(U^H))+j[0]+3921069994&4294967295,O=U+(V<<20&4294967295|V>>>12),V=M+(U^H&(O^U))+j[5]+3593408605&4294967295,M=O+(V<<5&4294967295|V>>>27),V=H+(O^U&(M^O))+j[10]+38016083&4294967295,H=M+(V<<9&4294967295|V>>>23),V=U+(M^O&(H^M))+j[15]+3634488961&4294967295,U=H+(V<<14&4294967295|V>>>18),V=O+(H^M&(U^H))+j[4]+3889429448&4294967295,O=U+(V<<20&4294967295|V>>>12),V=M+(U^H&(O^U))+j[9]+568446438&4294967295,M=O+(V<<5&4294967295|V>>>27),V=H+(O^U&(M^O))+j[14]+3275163606&4294967295,H=M+(V<<9&4294967295|V>>>23),V=U+(M^O&(H^M))+j[3]+4107603335&4294967295,U=H+(V<<14&4294967295|V>>>18),V=O+(H^M&(U^H))+j[8]+1163531501&4294967295,O=U+(V<<20&4294967295|V>>>12),V=M+(U^H&(O^U))+j[13]+2850285829&4294967295,M=O+(V<<5&4294967295|V>>>27),V=H+(O^U&(M^O))+j[2]+4243563512&4294967295,H=M+(V<<9&4294967295|V>>>23),V=U+(M^O&(H^M))+j[7]+1735328473&4294967295,U=H+(V<<14&4294967295|V>>>18),V=O+(H^M&(U^H))+j[12]+2368359562&4294967295,O=U+(V<<20&4294967295|V>>>12),V=M+(O^U^H)+j[5]+4294588738&4294967295,M=O+(V<<4&4294967295|V>>>28),V=H+(M^O^U)+j[8]+2272392833&4294967295,H=M+(V<<11&4294967295|V>>>21),V=U+(H^M^O)+j[11]+1839030562&4294967295,U=H+(V<<16&4294967295|V>>>16),V=O+(U^H^M)+j[14]+4259657740&4294967295,O=U+(V<<23&4294967295|V>>>9),V=M+(O^U^H)+j[1]+2763975236&4294967295,M=O+(V<<4&4294967295|V>>>28),V=H+(M^O^U)+j[4]+1272893353&4294967295,H=M+(V<<11&4294967295|V>>>21),V=U+(H^M^O)+j[7]+4139469664&4294967295,U=H+(V<<16&4294967295|V>>>16),V=O+(U^H^M)+j[10]+3200236656&4294967295,O=U+(V<<23&4294967295|V>>>9),V=M+(O^U^H)+j[13]+681279174&4294967295,M=O+(V<<4&4294967295|V>>>28),V=H+(M^O^U)+j[0]+3936430074&4294967295,H=M+(V<<11&4294967295|V>>>21),V=U+(H^M^O)+j[3]+3572445317&4294967295,U=H+(V<<16&4294967295|V>>>16),V=O+(U^H^M)+j[6]+76029189&4294967295,O=U+(V<<23&4294967295|V>>>9),V=M+(O^U^H)+j[9]+3654602809&4294967295,M=O+(V<<4&4294967295|V>>>28),V=H+(M^O^U)+j[12]+3873151461&4294967295,H=M+(V<<11&4294967295|V>>>21),V=U+(H^M^O)+j[15]+530742520&4294967295,U=H+(V<<16&4294967295|V>>>16),V=O+(U^H^M)+j[2]+3299628645&4294967295,O=U+(V<<23&4294967295|V>>>9),V=M+(U^(O|~H))+j[0]+4096336452&4294967295,M=O+(V<<6&4294967295|V>>>26),V=H+(O^(M|~U))+j[7]+1126891415&4294967295,H=M+(V<<10&4294967295|V>>>22),V=U+(M^(H|~O))+j[14]+2878612391&4294967295,U=H+(V<<15&4294967295|V>>>17),V=O+(H^(U|~M))+j[5]+4237533241&4294967295,O=U+(V<<21&4294967295|V>>>11),V=M+(U^(O|~H))+j[12]+1700485571&4294967295,M=O+(V<<6&4294967295|V>>>26),V=H+(O^(M|~U))+j[3]+2399980690&4294967295,H=M+(V<<10&4294967295|V>>>22),V=U+(M^(H|~O))+j[10]+4293915773&4294967295,U=H+(V<<15&4294967295|V>>>17),V=O+(H^(U|~M))+j[1]+2240044497&4294967295,O=U+(V<<21&4294967295|V>>>11),V=M+(U^(O|~H))+j[8]+1873313359&4294967295,M=O+(V<<6&4294967295|V>>>26),V=H+(O^(M|~U))+j[15]+4264355552&4294967295,H=M+(V<<10&4294967295|V>>>22),V=U+(M^(H|~O))+j[6]+2734768916&4294967295,U=H+(V<<15&4294967295|V>>>17),V=O+(H^(U|~M))+j[13]+1309151649&4294967295,O=U+(V<<21&4294967295|V>>>11),V=M+(U^(O|~H))+j[4]+4149444226&4294967295,M=O+(V<<6&4294967295|V>>>26),V=H+(O^(M|~U))+j[11]+3174756917&4294967295,H=M+(V<<10&4294967295|V>>>22),V=U+(M^(H|~O))+j[2]+718787259&4294967295,U=H+(V<<15&4294967295|V>>>17),V=O+(H^(U|~M))+j[9]+3951481745&4294967295,E.g[0]=E.g[0]+M&4294967295,E.g[1]=E.g[1]+(U+(V<<21&4294967295|V>>>11))&4294967295,E.g[2]=E.g[2]+U&4294967295,E.g[3]=E.g[3]+H&4294967295}r.prototype.u=function(E,M){M===void 0&&(M=E.length);for(var O=M-this.blockSize,j=this.B,U=this.h,H=0;H<M;){if(U==0)for(;H<=O;)i(this,E,H),H+=this.blockSize;if(typeof E=="string"){for(;H<M;)if(j[U++]=E.charCodeAt(H++),U==this.blockSize){i(this,j),U=0;break}}else for(;H<M;)if(j[U++]=E[H++],U==this.blockSize){i(this,j),U=0;break}}this.h=U,this.o+=M},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var M=1;M<E.length-8;++M)E[M]=0;var O=8*this.o;for(M=E.length-8;M<E.length;++M)E[M]=O&255,O/=256;for(this.u(E),E=Array(16),M=O=0;4>M;++M)for(var j=0;32>j;j+=8)E[O++]=this.g[M]>>>j&255;return E};function a(E,M){var O=d;return Object.prototype.hasOwnProperty.call(O,E)?O[E]:O[E]=M(E)}function l(E,M){this.h=M;for(var O=[],j=!0,U=E.length-1;0<=U;U--){var H=E[U]|0;j&&H==M||(O[U]=H,j=!1)}this.g=O}var d={};function u(E){return-128<=E&&128>E?a(E,function(M){return new l([M|0],0>M?-1:0)}):new l([E|0],0>E?-1:0)}function m(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return _(m(-E));for(var M=[],O=1,j=0;E>=O;j++)M[j]=E/O|0,O*=4294967296;return new l(M,0)}function g(E,M){if(E.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(E.charAt(0)=="-")return _(g(E.substring(1),M));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=m(Math.pow(M,8)),j=h,U=0;U<E.length;U+=8){var H=Math.min(8,E.length-U),V=parseInt(E.substring(U,U+H),M);8>H?(H=m(Math.pow(M,H)),j=j.j(H).add(m(V))):(j=j.j(O),j=j.add(m(V)))}return j}var h=u(0),y=u(1),w=u(16777216);t=l.prototype,t.m=function(){if(N(this))return-_(this).m();for(var E=0,M=1,O=0;O<this.g.length;O++){var j=this.i(O);E+=(0<=j?j:4294967296+j)*M,M*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S(this))return"0";if(N(this))return"-"+_(this).toString(E);for(var M=m(Math.pow(E,6)),O=this,j="";;){var U=I(O,M).g;O=D(O,U.j(M));var H=((0<O.g.length?O.g[0]:O.h)>>>0).toString(E);if(O=U,S(O))return H+j;for(;6>H.length;)H="0"+H;j=H+j}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function S(E){if(E.h!=0)return!1;for(var M=0;M<E.g.length;M++)if(E.g[M]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=D(this,E),N(E)?-1:S(E)?0:1};function _(E){for(var M=E.g.length,O=[],j=0;j<M;j++)O[j]=~E.g[j];return new l(O,~E.h).add(y)}t.abs=function(){return N(this)?_(this):this},t.add=function(E){for(var M=Math.max(this.g.length,E.g.length),O=[],j=0,U=0;U<=M;U++){var H=j+(this.i(U)&65535)+(E.i(U)&65535),V=(H>>>16)+(this.i(U)>>>16)+(E.i(U)>>>16);j=V>>>16,H&=65535,V&=65535,O[U]=V<<16|H}return new l(O,O[O.length-1]&-2147483648?-1:0)};function D(E,M){return E.add(_(M))}t.j=function(E){if(S(this)||S(E))return h;if(N(this))return N(E)?_(this).j(_(E)):_(_(this).j(E));if(N(E))return _(this.j(_(E)));if(0>this.l(w)&&0>E.l(w))return m(this.m()*E.m());for(var M=this.g.length+E.g.length,O=[],j=0;j<2*M;j++)O[j]=0;for(j=0;j<this.g.length;j++)for(var U=0;U<E.g.length;U++){var H=this.i(j)>>>16,V=this.i(j)&65535,K=E.i(U)>>>16,X=E.i(U)&65535;O[2*j+2*U]+=V*X,A(O,2*j+2*U),O[2*j+2*U+1]+=H*X,A(O,2*j+2*U+1),O[2*j+2*U+1]+=V*K,A(O,2*j+2*U+1),O[2*j+2*U+2]+=H*K,A(O,2*j+2*U+2)}for(j=0;j<M;j++)O[j]=O[2*j+1]<<16|O[2*j];for(j=M;j<2*M;j++)O[j]=0;return new l(O,0)};function A(E,M){for(;(E[M]&65535)!=E[M];)E[M+1]+=E[M]>>>16,E[M]&=65535,M++}function L(E,M){this.g=E,this.h=M}function I(E,M){if(S(M))throw Error("division by zero");if(S(E))return new L(h,h);if(N(E))return M=I(_(E),M),new L(_(M.g),_(M.h));if(N(M))return M=I(E,_(M)),new L(_(M.g),M.h);if(30<E.g.length){if(N(E)||N(M))throw Error("slowDivide_ only works with positive integers.");for(var O=y,j=M;0>=j.l(E);)O=F(O),j=F(j);var U=R(O,1),H=R(j,1);for(j=R(j,2),O=R(O,2);!S(j);){var V=H.add(j);0>=V.l(E)&&(U=U.add(O),H=V),j=R(j,1),O=R(O,1)}return M=D(E,U.j(M)),new L(U,M)}for(U=h;0<=E.l(M);){for(O=Math.max(1,Math.floor(E.m()/M.m())),j=Math.ceil(Math.log(O)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),H=m(O),V=H.j(M);N(V)||0<V.l(E);)O-=j,H=m(O),V=H.j(M);S(H)&&(H=y),U=U.add(H),E=D(E,V)}return new L(U,E)}t.A=function(E){return I(this,E).h},t.and=function(E){for(var M=Math.max(this.g.length,E.g.length),O=[],j=0;j<M;j++)O[j]=this.i(j)&E.i(j);return new l(O,this.h&E.h)},t.or=function(E){for(var M=Math.max(this.g.length,E.g.length),O=[],j=0;j<M;j++)O[j]=this.i(j)|E.i(j);return new l(O,this.h|E.h)},t.xor=function(E){for(var M=Math.max(this.g.length,E.g.length),O=[],j=0;j<M;j++)O[j]=this.i(j)^E.i(j);return new l(O,this.h^E.h)};function F(E){for(var M=E.g.length+1,O=[],j=0;j<M;j++)O[j]=E.i(j)<<1|E.i(j-1)>>>31;return new l(O,E.h)}function R(E,M){var O=M>>5;M%=32;for(var j=E.g.length-O,U=[],H=0;H<j;H++)U[H]=0<M?E.i(H+O)>>>M|E.i(H+O+1)<<32-M:E.i(H+O);return new l(U,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x3=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=g,Ec=l}).apply(typeof bk<"u"?bk:typeof self<"u"?self:typeof window<"u"?window:{});var Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y3,Af,v3,Cg,Qv,b3,w3,j3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,C,z){return p==Array.prototype||p==Object.prototype||(p[C]=z.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zp=="object"&&Zp];for(var C=0;C<p.length;++C){var z=p[C];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=n(this);function i(p,C){if(C)e:{var z=r;p=p.split(".");for(var G=0;G<p.length-1;G++){var ye=p[G];if(!(ye in z))break e;z=z[ye]}p=p[p.length-1],G=z[p],C=C(G),C!=G&&C!=null&&e(z,p,{configurable:!0,writable:!0,value:C})}}function a(p,C){p instanceof String&&(p+="");var z=0,G=!1,ye={next:function(){if(!G&&z<p.length){var Pe=z++;return{value:C(Pe,p[Pe]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ye[Symbol.iterator]=function(){return ye},ye}i("Array.prototype.values",function(p){return p||function(){return a(this,function(C,z){return z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function u(p){var C=typeof p;return C=C!="object"?C:p?Array.isArray(p)?"array":C:"null",C=="array"||C=="object"&&typeof p.length=="number"}function m(p){var C=typeof p;return C=="object"&&p!=null||C=="function"}function g(p,C,z){return p.call.apply(p.bind,arguments)}function h(p,C,z){if(!p)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ye,G),p.apply(C,ye)}}return function(){return p.apply(C,arguments)}}function y(p,C,z){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:h,y.apply(null,arguments)}function w(p,C){var z=Array.prototype.slice.call(arguments,1);return function(){var G=z.slice();return G.push.apply(G,arguments),p.apply(this,G)}}function S(p,C){function z(){}z.prototype=C.prototype,p.aa=C.prototype,p.prototype=new z,p.prototype.constructor=p,p.Qb=function(G,ye,Pe){for(var mt=Array(arguments.length-2),Xn=2;Xn<arguments.length;Xn++)mt[Xn-2]=arguments[Xn];return C.prototype[ye].apply(G,mt)}}function N(p){const C=p.length;if(0<C){const z=Array(C);for(let G=0;G<C;G++)z[G]=p[G];return z}return[]}function _(p,C){for(let z=1;z<arguments.length;z++){const G=arguments[z];if(u(G)){const ye=p.length||0,Pe=G.length||0;p.length=ye+Pe;for(let mt=0;mt<Pe;mt++)p[ye+mt]=G[mt]}else p.push(G)}}class D{constructor(C,z){this.i=C,this.j=z,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function A(p){return/^[\s\xa0]*$/.test(p)}function L(){var p=d.navigator;return p&&(p=p.userAgent)?p:""}function I(p){return I[" "](p),p}I[" "]=function(){};var F=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function R(p,C,z){for(const G in p)C.call(z,p[G],G,p)}function E(p,C){for(const z in p)C.call(void 0,p[z],z,p)}function M(p){const C={};for(const z in p)C[z]=p[z];return C}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(p,C){let z,G;for(let ye=1;ye<arguments.length;ye++){G=arguments[ye];for(z in G)p[z]=G[z];for(let Pe=0;Pe<O.length;Pe++)z=O[Pe],Object.prototype.hasOwnProperty.call(G,z)&&(p[z]=G[z])}}function U(p){var C=1;p=p.split(":");const z=[];for(;0<C&&p.length;)z.push(p.shift()),C--;return p.length&&z.push(p.join(":")),z}function H(p){d.setTimeout(()=>{throw p},0)}function V(){var p=le;let C=null;return p.g&&(C=p.g,p.g=p.g.next,p.g||(p.h=null),C.next=null),C}class K{constructor(){this.h=this.g=null}add(C,z){const G=X.get();G.set(C,z),this.h?this.h.next=G:this.g=G,this.h=G}}var X=new D(()=>new ne,p=>p.reset());class ne{constructor(){this.next=this.g=this.h=null}set(C,z){this.h=C,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let we,Z=!1,le=new K,re=()=>{const p=d.Promise.resolve(void 0);we=()=>{p.then(B)}};var B=()=>{for(var p;p=V();){try{p.h.call(p.g)}catch(z){H(z)}var C=X;C.j(p),100>C.h&&(C.h++,p.next=C.g,C.g=p)}Z=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(p,C){this.type=p,this.g=this.target=C,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,C=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const z=()=>{};d.addEventListener("test",z,C),d.removeEventListener("test",z,C)}catch{}return p}();function $e(p,C){if(Se.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var z=this.type=p.type,G=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=C,C=p.relatedTarget){if(F){e:{try{I(C.nodeName);var ye=!0;break e}catch{}ye=!1}ye||(C=null)}}else z=="mouseover"?C=p.fromElement:z=="mouseout"&&(C=p.toElement);this.relatedTarget=C,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ke[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&$e.aa.h.call(this)}}S($e,Se);var Ke={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ye="closure_listenable_"+(1e6*Math.random()|0),lt=0;function Re(p,C,z,G,ye){this.listener=p,this.proxy=null,this.src=C,this.type=z,this.capture=!!G,this.ha=ye,this.key=++lt,this.da=this.fa=!1}function Ct(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ue(p){this.src=p,this.g={},this.h=0}Ue.prototype.add=function(p,C,z,G,ye){var Pe=p.toString();p=this.g[Pe],p||(p=this.g[Pe]=[],this.h++);var mt=ct(p,C,G,ye);return-1<mt?(C=p[mt],z||(C.fa=!1)):(C=new Re(C,this.src,Pe,!!G,ye),C.fa=z,p.push(C)),C};function ot(p,C){var z=C.type;if(z in p.g){var G=p.g[z],ye=Array.prototype.indexOf.call(G,C,void 0),Pe;(Pe=0<=ye)&&Array.prototype.splice.call(G,ye,1),Pe&&(Ct(C),p.g[z].length==0&&(delete p.g[z],p.h--))}}function ct(p,C,z,G){for(var ye=0;ye<p.length;++ye){var Pe=p[ye];if(!Pe.da&&Pe.listener==C&&Pe.capture==!!z&&Pe.ha==G)return ye}return-1}var it="closure_lm_"+(1e6*Math.random()|0),Lt={};function Bt(p,C,z,G,ye){if(Array.isArray(C)){for(var Pe=0;Pe<C.length;Pe++)Bt(p,C[Pe],z,G,ye);return null}return z=Y(z),p&&p[Ye]?p.K(C,z,m(G)?!!G.capture:!1,ye):Ge(p,C,z,!1,G,ye)}function Ge(p,C,z,G,ye,Pe){if(!C)throw Error("Invalid event type");var mt=m(ye)?!!ye.capture:!!ye,Xn=Ht(p);if(Xn||(p[it]=Xn=new Ue(p)),z=Xn.add(C,z,G,mt,Pe),z.proxy)return z;if(G=mn(),z.proxy=G,G.src=p,G.listener=z,p.addEventListener)Ve||(ye=mt),ye===void 0&&(ye=!1),p.addEventListener(C.toString(),G,ye);else if(p.attachEvent)p.attachEvent(At(C.toString()),G);else if(p.addListener&&p.removeListener)p.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return z}function mn(){function p(z){return C.call(p.src,p.listener,z)}const C=bn;return p}function Wt(p,C,z,G,ye){if(Array.isArray(C))for(var Pe=0;Pe<C.length;Pe++)Wt(p,C[Pe],z,G,ye);else G=m(G)?!!G.capture:!!G,z=Y(z),p&&p[Ye]?(p=p.i,C=String(C).toString(),C in p.g&&(Pe=p.g[C],z=ct(Pe,z,G,ye),-1<z&&(Ct(Pe[z]),Array.prototype.splice.call(Pe,z,1),Pe.length==0&&(delete p.g[C],p.h--)))):p&&(p=Ht(p))&&(C=p.g[C.toString()],p=-1,C&&(p=ct(C,z,G,ye)),(z=-1<p?C[p]:null)&&an(z))}function an(p){if(typeof p!="number"&&p&&!p.da){var C=p.src;if(C&&C[Ye])ot(C.i,p);else{var z=p.type,G=p.proxy;C.removeEventListener?C.removeEventListener(z,G,p.capture):C.detachEvent?C.detachEvent(At(z),G):C.addListener&&C.removeListener&&C.removeListener(G),(z=Ht(C))?(ot(z,p),z.h==0&&(z.src=null,C[it]=null)):Ct(p)}}}function At(p){return p in Lt?Lt[p]:Lt[p]="on"+p}function bn(p,C){if(p.da)p=!0;else{C=new $e(C,this);var z=p.listener,G=p.ha||p.src;p.fa&&an(p),p=z.call(G,C)}return p}function Ht(p){return p=p[it],p instanceof Ue?p:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(p){return typeof p=="function"?p:(p[ze]||(p[ze]=function(C){return p.handleEvent(C)}),p[ze])}function ie(){ce.call(this),this.i=new Ue(this),this.M=this,this.F=null}S(ie,ce),ie.prototype[Ye]=!0,ie.prototype.removeEventListener=function(p,C,z,G){Wt(this,p,C,z,G)};function pe(p,C){var z,G=p.F;if(G)for(z=[];G;G=G.F)z.push(G);if(p=p.M,G=C.type||C,typeof C=="string")C=new Se(C,p);else if(C instanceof Se)C.target=C.target||p;else{var ye=C;C=new Se(G,p),j(C,ye)}if(ye=!0,z)for(var Pe=z.length-1;0<=Pe;Pe--){var mt=C.g=z[Pe];ye=he(mt,G,!0,C)&&ye}if(mt=C.g=p,ye=he(mt,G,!0,C)&&ye,ye=he(mt,G,!1,C)&&ye,z)for(Pe=0;Pe<z.length;Pe++)mt=C.g=z[Pe],ye=he(mt,G,!1,C)&&ye}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var p=this.i,C;for(C in p.g){for(var z=p.g[C],G=0;G<z.length;G++)Ct(z[G]);delete p.g[C],p.h--}}this.F=null},ie.prototype.K=function(p,C,z,G){return this.i.add(String(p),C,!1,z,G)},ie.prototype.L=function(p,C,z,G){return this.i.add(String(p),C,!0,z,G)};function he(p,C,z,G){if(C=p.i.g[String(C)],!C)return!0;C=C.concat();for(var ye=!0,Pe=0;Pe<C.length;++Pe){var mt=C[Pe];if(mt&&!mt.da&&mt.capture==z){var Xn=mt.listener,Zr=mt.ha||mt.src;mt.fa&&ot(p.i,mt),ye=Xn.call(Zr,G)!==!1&&ye}}return ye&&!G.defaultPrevented}function He(p,C,z){if(typeof p=="function")z&&(p=y(p,z));else if(p&&typeof p.handleEvent=="function")p=y(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:d.setTimeout(p,C||0)}function ge(p){p.g=He(()=>{p.g=null,p.i&&(p.i=!1,ge(p))},p.l);const C=p.h;p.h=null,p.m.apply(null,C)}class Ae extends ce{constructor(C,z){super(),this.m=C,this.l=z,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Be(p){ce.call(this),this.h=p,this.g={}}S(Be,ce);var Ze=[];function Rt(p){R(p.g,function(C,z){this.g.hasOwnProperty(z)&&an(C)},p),p.g={}}Be.prototype.N=function(){Be.aa.N.call(this),Rt(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ie=d.JSON.stringify,gt=d.JSON.parse,ft=class{stringify(p){return d.JSON.stringify(p,void 0)}parse(p){return d.JSON.parse(p,void 0)}};function Te(){}Te.prototype.h=null;function nt(p){return p.h||(p.h=p.i())}function ut(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ce(){Se.call(this,"d")}S(Ce,Se);function yt(){Se.call(this,"c")}S(yt,Se);var on={},Nn=null;function Wn(){return Nn=Nn||new ie}on.La="serverreachability";function Ra(p){Se.call(this,on.La,p)}S(Ra,Se);function Me(p){const C=Wn();pe(C,new Ra(C))}on.STAT_EVENT="statevent";function Xr(p,C){Se.call(this,on.STAT_EVENT,p),this.stat=C}S(Xr,Se);function pn(p){const C=Wn();pe(C,new Xr(C,p))}on.Ma="timingevent";function si(p,C){Se.call(this,on.Ma,p),this.size=C}S(si,Se);function Vs(p,C){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){p()},C)}function Yi(){this.g=!0}Yi.prototype.xa=function(){this.g=!1};function Ei(p,C,z,G,ye,Pe){p.info(function(){if(p.g)if(Pe)for(var mt="",Xn=Pe.split("&"),Zr=0;Zr<Xn.length;Zr++){var Rn=Xn[Zr].split("=");if(1<Rn.length){var ds=Rn[0];Rn=Rn[1];var Ur=ds.split("_");mt=2<=Ur.length&&Ur[1]=="type"?mt+(ds+"="+Rn+"&"):mt+(ds+"=redacted&")}}else mt=null;else mt=Pe;return"XMLHTTP REQ ("+G+") [attempt "+ye+"]: "+C+`
`+z+`
`+mt})}function wr(p,C,z,G,ye,Pe,mt){p.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ye+"]: "+C+`
`+z+`
`+Pe+" "+mt})}function Cs(p,C,z,G){p.info(function(){return"XMLHTTP TEXT ("+C+"): "+vi(p,z)+(G?" "+G:"")})}function jr(p,C){p.info(function(){return"TIMEOUT: "+C})}Yi.prototype.info=function(){};function vi(p,C){if(!p.g)return C;if(!C)return null;try{var z=JSON.parse(C);if(z){for(p=0;p<z.length;p++)if(Array.isArray(z[p])){var G=z[p];if(!(2>G.length)){var ye=G[1];if(Array.isArray(ye)&&!(1>ye.length)){var Pe=ye[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var mt=1;mt<ye.length;mt++)ye[mt]=""}}}}return Ie(z)}catch{return C}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},J;function te(){}S(te,Te),te.prototype.g=function(){return new XMLHttpRequest},te.prototype.i=function(){return{}},J=new te;function Le(p,C,z,G){this.j=p,this.i=C,this.l=z,this.R=G||1,this.U=new Be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var ve={},Xe={};function et(p,C,z){p.L=1,p.v=As(Rr(C)),p.m=z,p.P=!0,tt(p,null)}function tt(p,C){p.F=Date.now(),me(p),p.A=Rr(p.v);var z=p.A,G=p.R;Array.isArray(G)||(G=[String(G)]),Jr(z.i,"t",G),p.C=0,z=p.j.J,p.h=new xe,p.g=ed(p.j,z?C:null,!p.m),0<p.O&&(p.M=new Ae(y(p.Y,p,p.g),p.O)),C=p.U,z=p.g,G=p.ca;var ye="readystatechange";Array.isArray(ye)||(ye&&(Ze[0]=ye.toString()),ye=Ze);for(var Pe=0;Pe<ye.length;Pe++){var mt=Bt(z,ye[Pe],G||C.handleEvent,!1,C.h||C);if(!mt)break;C.g[mt.key]=mt}C=p.H?M(p.H):{},p.m?(p.u||(p.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,C)):(p.u="GET",p.g.ea(p.A,p.u,null,C)),Me(),Ei(p.i,p.u,p.A,p.l,p.R,p.m)}Le.prototype.ca=function(p){p=p.target;const C=this.M;C&&Bs(p)==3?C.j():this.Y(p)},Le.prototype.Y=function(p){try{if(p==this.g)e:{const Ur=Bs(this.g);var C=this.g.Ba();const Li=this.g.Z();if(!(3>Ur)&&(Ur!=3||this.g&&(this.h.h||this.g.oa()||ha(this.g)))){this.J||Ur!=4||C==7||(C==8||0>=Li?Me(3):Me(2)),vt(this);var z=this.g.Z();this.X=z;t:if(Pt(this)){var G=ha(this.g);p="";var ye=G.length,Pe=Bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),tn(this);var mt="";break t}this.h.i=new d.TextDecoder}for(C=0;C<ye;C++)this.h.h=!0,p+=this.h.i.decode(G[C],{stream:!(Pe&&C==ye-1)});G.length=0,this.h.g+=p,this.C=0,mt=this.h.g}else mt=this.g.oa();if(this.o=z==200,wr(this.i,this.u,this.A,this.l,this.R,Ur,z),this.o){if(this.T&&!this.K){t:{if(this.g){var Xn,Zr=this.g;if((Xn=Zr.g?Zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Xn)){var Rn=Xn;break t}}Rn=null}if(z=Rn)Cs(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,In(this,z);else{this.o=!1,this.s=3,pn(12),Vn(this),tn(this);break e}}if(this.P){z=!0;let kr;for(;!this.J&&this.C<mt.length;)if(kr=at(this,mt),kr==Xe){Ur==4&&(this.s=4,pn(14),z=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(kr==ve){this.s=4,pn(15),Cs(this.i,this.l,mt,"[Invalid Chunk]"),z=!1;break}else Cs(this.i,this.l,kr,null),In(this,kr);if(Pt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ur!=4||mt.length!=0||this.h.h||(this.s=1,pn(16),z=!1),this.o=this.o&&z,!z)Cs(this.i,this.l,mt,"[Invalid Chunked Response]"),Vn(this),tn(this);else if(0<mt.length&&!this.W){this.W=!0;var ds=this.j;ds.g==this&&ds.ba&&!ds.M&&(ds.j.info("Great, no buffering proxy detected. Bytes received: "+mt.length),Jc(ds),ds.M=!0,pn(11))}}else Cs(this.i,this.l,mt,null),In(this,mt);Ur==4&&Vn(this),this.o&&!this.J&&(Ur==4?el(this.j,this):(this.o=!1,me(this)))}else $l(this.g),z==400&&0<mt.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),Vn(this),tn(this)}}}catch{}finally{}};function Pt(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function at(p,C){var z=p.C,G=C.indexOf(`
`,z);return G==-1?Xe:(z=Number(C.substring(z,G)),isNaN(z)?ve:(G+=1,G+z>C.length?Xe:(C=C.slice(G,G+z),p.C=G+z,C)))}Le.prototype.cancel=function(){this.J=!0,Vn(this)};function me(p){p.S=Date.now()+p.I,ke(p,p.I)}function ke(p,C){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Vs(y(p.ba,p),C)}function vt(p){p.B&&(d.clearTimeout(p.B),p.B=null)}Le.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(jr(this.i,this.A),this.L!=2&&(Me(),pn(17)),Vn(this),this.s=2,tn(this)):ke(this,this.S-p)};function tn(p){p.j.G==0||p.J||el(p.j,p)}function Vn(p){vt(p);var C=p.M;C&&typeof C.ma=="function"&&C.ma(),p.M=null,Rt(p.U),p.g&&(C=p.g,p.g=null,C.abort(),C.ma())}function In(p,C){try{var z=p.j;if(z.G!=0&&(z.g==p||jt(z.h,p))){if(!p.K&&jt(z.h,p)&&z.G==3){try{var G=z.Da.g.parse(C)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ye=G;if(ye[0]==0){e:if(!z.u){if(z.g)if(z.g.F+3e3<p.F)yo(z),Ii(z);else break e;za(z),pn(18)}}else z.za=ye[1],0<z.za-z.T&&37500>ye[2]&&z.F&&z.v==0&&!z.C&&(z.C=Vs(y(z.Za,z),6e3));if(1>=os(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else Ws(z,11)}else if((p.K||z.g==p)&&yo(z),!A(C))for(ye=z.Da.g.parse(C),C=0;C<ye.length;C++){let Rn=ye[C];if(z.T=Rn[0],Rn=Rn[1],z.G==2)if(Rn[0]=="c"){z.K=Rn[1],z.ia=Rn[2];const ds=Rn[3];ds!=null&&(z.la=ds,z.j.info("VER="+z.la));const Ur=Rn[4];Ur!=null&&(z.Aa=Ur,z.j.info("SVER="+z.Aa));const Li=Rn[5];Li!=null&&typeof Li=="number"&&0<Li&&(G=1.5*Li,z.L=G,z.j.info("backChannelRequestTimeoutMs_="+G)),G=z;const kr=p.g;if(kr){const vo=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vo){var Pe=G.h;Pe.g||vo.indexOf("spdy")==-1&&vo.indexOf("quic")==-1&&vo.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Es(Pe,Pe.h),Pe.h=null))}if(G.D){const tl=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(G.ya=tl,Sn(G.I,G.D,tl))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-p.F,z.j.info("Handshake RTT: "+z.R+"ms")),G=z;var mt=p;if(G.qa=mu(G,G.J?G.ia:null,G.W),mt.K){ii(G.h,mt);var Xn=mt,Zr=G.L;Zr&&(Xn.I=Zr),Xn.B&&(vt(Xn),me(Xn)),G.g=mt}else xo(G);0<z.i.length&&Ri(z)}else Rn[0]!="stop"&&Rn[0]!="close"||Ws(z,7);else z.G==3&&(Rn[0]=="stop"||Rn[0]=="close"?Rn[0]=="stop"?Ws(z,7):cs(z):Rn[0]!="noop"&&z.l&&z.l.ta(Rn),z.v=0)}}Me(4)}catch{}}var Qr=class{constructor(p,C){this.g=p,this.map=C}};function Kn(p){this.l=p||10,d.PerformanceNavigationTiming?(p=d.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zn(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function os(p){return p.h?1:p.g?p.g.size:0}function jt(p,C){return p.h?p.h==C:p.g?p.g.has(C):!1}function Es(p,C){p.g?p.g.add(C):p.h=C}function ii(p,C){p.h&&p.h==C?p.h=null:p.g&&p.g.has(C)&&p.g.delete(C)}Kn.prototype.cancel=function(){if(this.i=bi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function bi(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let C=p.i;for(const z of p.g.values())C=C.concat(z.D);return C}return N(p.i)}function Qi(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(u(p)){for(var C=[],z=p.length,G=0;G<z;G++)C.push(p[G]);return C}C=[],z=0;for(G in p)C[z++]=p[G];return C}function Ji(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(u(p)||typeof p=="string"){var C=[];p=p.length;for(var z=0;z<p;z++)C.push(z);return C}C=[],z=0;for(const G in p)C[z++]=G;return C}}}function Ts(p,C){if(p.forEach&&typeof p.forEach=="function")p.forEach(C,void 0);else if(u(p)||typeof p=="string")Array.prototype.forEach.call(p,C,void 0);else for(var z=Ji(p),G=Qi(p),ye=G.length,Pe=0;Pe<ye;Pe++)C.call(void 0,G[Pe],z&&z[Pe],p)}var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(p,C){if(p){p=p.split("&");for(var z=0;z<p.length;z++){var G=p[z].indexOf("="),ye=null;if(0<=G){var Pe=p[z].substring(0,G);ye=p[z].substring(G+1)}else Pe=p[z];C(Pe,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function ar(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ar){this.h=p.h,Fr(this,p.j),this.o=p.o,this.g=p.g,Ti(this,p.s),this.l=p.l;var C=p.i,z=new Pi;z.i=C.i,C.g&&(z.g=new Map(C.g),z.h=C.h),Ai(this,z),this.m=p.m}else p&&(C=String(p).match(wi))?(this.h=!1,Fr(this,C[1]||"",!0),this.o=hn(C[2]||""),this.g=hn(C[3]||"",!0),Ti(this,C[4]),this.l=hn(C[5]||"",!0),Ai(this,C[6]||"",!0),this.m=hn(C[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}ar.prototype.toString=function(){var p=[],C=this.j;C&&p.push(Fs(C,La,!0),":");var z=this.g;return(z||C=="file")&&(p.push("//"),(C=this.o)&&p.push(Fs(C,La,!0),"@"),p.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.s,z!=null&&p.push(":",String(z))),(z=this.l)&&(this.g&&z.charAt(0)!="/"&&p.push("/"),p.push(Fs(z,z.charAt(0)=="/"?po:Zi,!0))),(z=this.i.toString())&&p.push("?",z),(z=this.m)&&p.push("#",Fs(z,$s)),p.join("")};function Rr(p){return new ar(p)}function Fr(p,C,z){p.j=z?hn(C,!0):C,p.j&&(p.j=p.j.replace(/:$/,""))}function Ti(p,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);p.s=C}else p.s=null}function Ai(p,C,z){C instanceof Pi?(p.i=C,bs(p.i,p.h)):(z||(C=Fs(C,Yo)),p.i=new Pi(C,p.h))}function Sn(p,C,z){p.i.set(C,z)}function As(p){return Sn(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function hn(p,C){return p?C?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Fs(p,C,z){return typeof p=="string"?(p=encodeURI(p).replace(C,mo),z&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function mo(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var La=/[#\/\?@]/g,Zi=/[#\?:]/g,po=/[#\?]/g,Yo=/[#\?@]/g,$s=/#/g;function Pi(p,C){this.h=this.g=null,this.i=p||null,this.j=!!C}function or(p){p.g||(p.g=new Map,p.h=0,p.i&&Xt(p.i,function(C,z){p.add(decodeURIComponent(C.replace(/\+/g," ")),z)}))}t=Pi.prototype,t.add=function(p,C){or(this),this.i=null,p=Cr(this,p);var z=this.g.get(p);return z||this.g.set(p,z=[]),z.push(C),this.h+=1,this};function ls(p,C){or(p),C=Cr(p,C),p.g.has(C)&&(p.i=null,p.h-=p.g.get(C).length,p.g.delete(C))}function ai(p,C){return or(p),C=Cr(p,C),p.g.has(C)}t.forEach=function(p,C){or(this),this.g.forEach(function(z,G){z.forEach(function(ye){p.call(C,ye,G,this)},this)},this)},t.na=function(){or(this);const p=Array.from(this.g.values()),C=Array.from(this.g.keys()),z=[];for(let G=0;G<C.length;G++){const ye=p[G];for(let Pe=0;Pe<ye.length;Pe++)z.push(C[G])}return z},t.V=function(p){or(this);let C=[];if(typeof p=="string")ai(this,p)&&(C=C.concat(this.g.get(Cr(this,p))));else{p=Array.from(this.g.values());for(let z=0;z<p.length;z++)C=C.concat(p[z])}return C},t.set=function(p,C){return or(this),this.i=null,p=Cr(this,p),ai(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[C]),this.h+=1,this},t.get=function(p,C){return p?(p=this.V(p),0<p.length?String(p[0]):C):C};function Jr(p,C,z){ls(p,C),0<z.length&&(p.i=null,p.g.set(Cr(p,C),N(z)),p.h+=z.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],C=Array.from(this.g.keys());for(var z=0;z<C.length;z++){var G=C[z];const Pe=encodeURIComponent(String(G)),mt=this.V(G);for(G=0;G<mt.length;G++){var ye=Pe;mt[G]!==""&&(ye+="="+encodeURIComponent(String(mt[G]))),p.push(ye)}}return this.i=p.join("&")};function Cr(p,C){return C=String(C),p.j&&(C=C.toLowerCase()),C}function bs(p,C){C&&!p.j&&(or(p),p.i=null,p.g.forEach(function(z,G){var ye=G.toLowerCase();G!=ye&&(ls(this,G),Jr(this,ye,z))},p)),p.j=C}function Xo(p,C){const z=new Yi;if(d.Image){const G=new Image;G.onload=w(Ee,z,"TestLoadImage: loaded",!0,C,G),G.onerror=w(Ee,z,"TestLoadImage: error",!1,C,G),G.onabort=w(Ee,z,"TestLoadImage: abort",!1,C,G),G.ontimeout=w(Ee,z,"TestLoadImage: timeout",!1,C,G),d.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=p}else C(!1)}function ae(p,C){const z=new Yi,G=new AbortController,ye=setTimeout(()=>{G.abort(),Ee(z,"TestPingServer: timeout",!1,C)},1e4);fetch(p,{signal:G.signal}).then(Pe=>{clearTimeout(ye),Pe.ok?Ee(z,"TestPingServer: ok",!0,C):Ee(z,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ye),Ee(z,"TestPingServer: error",!1,C)})}function Ee(p,C,z,G,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),G(z)}catch{}}function ht(){this.g=new ft}function xt(p,C,z){const G=z||"";try{Ts(p,function(ye,Pe){let mt=ye;m(ye)&&(mt=Ie(ye)),C.push(G+Pe+"="+encodeURIComponent(mt))})}catch(ye){throw C.push(G+"type="+encodeURIComponent("_badmap")),ye}}function Et(p){this.l=p.Ub||null,this.j=p.eb||!1}S(Et,Te),Et.prototype.g=function(){return new Mt(this.l,this.j)},Et.prototype.i=function(p){return function(){return p}}({});function Mt(p,C){ie.call(this),this.D=p,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Mt,ie),t=Mt.prototype,t.open=function(p,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=C,this.readyState=1,hr(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(C.body=p),(this.D||d).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ft(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,hr(this)),this.g&&(this.readyState=3,hr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$t(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function $t(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var C=p.value?p.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!p.done}))&&(this.response=this.responseText+=C)}p.done?Ft(this):hr(this),this.readyState==3&&$t(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Ft(this))},t.Qa=function(p){this.g&&(this.response=p,Ft(this))},t.ga=function(){this.g&&Ft(this)};function Ft(p){p.readyState=4,p.l=null,p.j=null,p.v=null,hr(p)}t.setRequestHeader=function(p,C){this.u.append(p,C)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],C=this.h.entries();for(var z=C.next();!z.done;)z=z.value,p.push(z[0]+": "+z[1]),z=C.next();return p.join(`\r
`)};function hr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function $r(p){let C="";return R(p,function(z,G){C+=G,C+=":",C+=z,C+=`\r
`}),C}function da(p,C,z){e:{for(G in z){var G=!1;break e}G=!0}G||(z=$r(z),typeof p=="string"?z!=null&&encodeURIComponent(String(z)):Sn(p,C,z))}function Yn(p){ie.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Yn,ie);var go=/^https?$/i,ua=["POST","PUT"];t=Yn.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,C,z,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);C=C?C.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():J.g(),this.v=this.o?nt(this.o):nt(J),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(C,String(p),!0),this.B=!1}catch(Pe){Ma(this,Pe);return}if(p=z||"",z=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ye in G)z.set(ye,G[ye]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Pe of G.keys())z.set(Pe,G.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(z.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),ye=d.FormData&&p instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ua,C,void 0))||G||ye||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,mt]of z)this.g.setRequestHeader(Pe,mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jo(this),this.u=!0,this.g.send(p),this.u=!1}catch(Pe){Ma(this,Pe)}};function Ma(p,C){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=C,p.m=5,Qo(p),Us(p)}function Qo(p){p.A||(p.A=!0,pe(p,"complete"),pe(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,pe(this,"complete"),pe(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),Yn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},t.bb=function(){Da(this)};function Da(p){if(p.h&&typeof l<"u"&&(!p.v[1]||Bs(p)!=4||p.Z()!=2)){if(p.u&&Bs(p)==4)He(p.Ea,0,p);else if(pe(p,"readystatechange"),Bs(p)==4){p.h=!1;try{const mt=p.Z();e:switch(mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var z;if(!(z=C)){var G;if(G=mt===0){var ye=String(p.D).match(wi)[1]||null;!ye&&d.self&&d.self.location&&(ye=d.self.location.protocol.slice(0,-1)),G=!go.test(ye?ye.toLowerCase():"")}z=G}if(z)pe(p,"complete"),pe(p,"success");else{p.m=6;try{var Pe=2<Bs(p)?p.g.statusText:""}catch{Pe=""}p.l=Pe+" ["+p.Z()+"]",Qo(p)}}finally{Us(p)}}}}function Us(p,C){if(p.g){Jo(p);const z=p.g,G=p.v[0]?()=>{}:null;p.g=null,p.v=null,C||pe(p,"ready");try{z.onreadystatechange=G}catch{}}}function Jo(p){p.I&&(d.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Bs(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Bs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var C=this.g.responseText;return p&&C.indexOf(p)==0&&(C=C.substring(p.length)),gt(C)}};function ha(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function $l(p){const C={};p=(p.g&&2<=Bs(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<p.length;G++){if(A(p[G]))continue;var z=U(p[G]);const ye=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const Pe=C[ye]||[];C[ye]=Pe,Pe.push(z)}E(C,function(G){return G.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(p,C,z){return z&&z.internalChannelParams&&z.internalChannelParams[p]||C}function Ul(p){this.Aa=0,this.i=[],this.j=new Yi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,p),this.cb=ea("retryDelaySeedMs",1e4,p),this.Wa=ea("forwardChannelMaxRetries",2,p),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Kn(p&&p.concurrentRequestLimit),this.Da=new ht,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ul.prototype,t.la=8,t.G=1,t.connect=function(p,C,z,G){pn(0),this.W=p,this.H=C||{},z&&G!==void 0&&(this.H.OSID=z,this.H.OAID=G),this.F=this.X,this.I=mu(this,null,this.W),Ri(this)};function cs(p){if(Zo(p),p.G==3){var C=p.U++,z=Rr(p.I);if(Sn(z,"SID",p.K),Sn(z,"RID",C),Sn(z,"TYPE","terminate"),Oa(p,z),C=new Le(p,p.j,C),C.L=2,C.v=As(Rr(z)),z=!1,d.navigator&&d.navigator.sendBeacon)try{z=d.navigator.sendBeacon(C.v.toString(),"")}catch{}!z&&d.Image&&(new Image().src=C.v,z=!0),z||(C.g=ed(C.j,null),C.g.ea(C.v)),C.F=Date.now(),me(C)}Wl(p)}function Ii(p){p.g&&(Jc(p),p.g.cancel(),p.g=null)}function Zo(p){Ii(p),p.u&&(d.clearTimeout(p.u),p.u=null),yo(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&d.clearTimeout(p.s),p.s=null)}function Ri(p){if(!zn(p.h)&&!p.s){p.s=!0;var C=p.Ga;we||re(),Z||(we(),Z=!0),le.add(C,p),p.B=0}}function hu(p,C){return os(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=C.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Vs(y(p.Ga,p,C),Zc(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ye=new Le(this,this.j,p);let Pe=this.o;if(this.S&&(Pe?(Pe=M(Pe),j(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(ye.H=Pe,Pe=null),this.P)e:{for(var C=0,z=0;z<this.i.length;z++){t:{var G=this.i[z];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(C+=G,4096<C){C=z;break e}if(C===4096||z===this.i.length-1){C=z+1;break e}}C=1e3}else C=1e3;C=Va(this,ye,C),z=Rr(this.I),Sn(z,"RID",p),Sn(z,"CVER",22),this.D&&Sn(z,"X-HTTP-Session-Id",this.D),Oa(this,z),Pe&&(this.O?C="headers="+encodeURIComponent(String($r(Pe)))+"&"+C:this.m&&da(z,this.m,Pe)),Es(this.h,ye),this.Ua&&Sn(z,"TYPE","init"),this.P?(Sn(z,"$req",C),Sn(z,"SID","null"),ye.T=!0,et(ye,z,null)):et(ye,z,C),this.G=2}}else this.G==3&&(p?Bl(this,p):this.i.length==0||zn(this.h)||Bl(this))};function Bl(p,C){var z;C?z=C.l:z=p.U++;const G=Rr(p.I);Sn(G,"SID",p.K),Sn(G,"RID",z),Sn(G,"AID",p.T),Oa(p,G),p.m&&p.o&&da(G,p.m,p.o),z=new Le(p,p.j,z,p.B+1),p.m===null&&(z.H=p.o),C&&(p.i=C.D.concat(p.i)),C=Va(p,z,1e3),z.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Es(p.h,z),et(z,G,C)}function Oa(p,C){p.H&&R(p.H,function(z,G){Sn(C,G,z)}),p.l&&Ts({},function(z,G){Sn(C,G,z)})}function Va(p,C,z){z=Math.min(p.i.length,z);var G=p.l?y(p.l.Na,p.l,p):null;e:{var ye=p.i;let Pe=-1;for(;;){const mt=["count="+z];Pe==-1?0<z?(Pe=ye[0].g,mt.push("ofs="+Pe)):Pe=0:mt.push("ofs="+Pe);let Xn=!0;for(let Zr=0;Zr<z;Zr++){let Rn=ye[Zr].g;const ds=ye[Zr].map;if(Rn-=Pe,0>Rn)Pe=Math.max(0,ye[Zr].g-100),Xn=!1;else try{xt(ds,mt,"req"+Rn+"_")}catch{G&&G(ds)}}if(Xn){G=mt.join("&");break e}}}return p=p.i.splice(0,z),C.D=p,G}function xo(p){if(!p.g&&!p.u){p.Y=1;var C=p.Fa;we||re(),Z||(we(),Z=!0),le.add(C,p),p.v=0}}function za(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Vs(y(p.Fa,p),Zc(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Vs(y(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),Ii(this),fu(this))};function Jc(p){p.A!=null&&(d.clearTimeout(p.A),p.A=null)}function fu(p){p.g=new Le(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var C=Rr(p.qa);Sn(C,"RID","rpc"),Sn(C,"SID",p.K),Sn(C,"AID",p.T),Sn(C,"CI",p.F?"0":"1"),!p.F&&p.ja&&Sn(C,"TO",p.ja),Sn(C,"TYPE","xmlhttp"),Oa(p,C),p.m&&p.o&&da(C,p.m,p.o),p.L&&(p.g.I=p.L);var z=p.g;p=p.ia,z.L=1,z.v=As(Rr(C)),z.m=null,z.P=!0,tt(z,p)}t.Za=function(){this.C!=null&&(this.C=null,Ii(this),za(this),pn(19))};function yo(p){p.C!=null&&(d.clearTimeout(p.C),p.C=null)}function el(p,C){var z=null;if(p.g==C){yo(p),Jc(p),p.g=null;var G=2}else if(jt(p.h,C))z=C.D,ii(p.h,C),G=1;else return;if(p.G!=0){if(C.o)if(G==1){z=C.m?C.m.length:0,C=Date.now()-C.F;var ye=p.B;G=Wn(),pe(G,new si(G,z)),Ri(p)}else xo(p);else if(ye=C.s,ye==3||ye==0&&0<C.X||!(G==1&&hu(p,C)||G==2&&za(p)))switch(z&&0<z.length&&(C=p.h,C.i=C.i.concat(z)),ye){case 1:Ws(p,5);break;case 4:Ws(p,10);break;case 3:Ws(p,6);break;default:Ws(p,2)}}}function Zc(p,C){let z=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(z*=2),z*C}function Ws(p,C){if(p.j.info("Error code "+C),C==2){var z=y(p.fb,p),G=p.Xa;const ye=!G;G=new ar(G||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Fr(G,"https"),As(G),ye?Xo(G.toString(),z):ae(G.toString(),z)}else pn(2);p.G=0,p.l&&p.l.sa(C),Wl(p),Zo(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function Wl(p){if(p.G=0,p.ka=[],p.l){const C=bi(p.h);(C.length!=0||p.i.length!=0)&&(_(p.ka,C),_(p.ka,p.i),p.h.i.length=0,N(p.i),p.i.length=0),p.l.ra()}}function mu(p,C,z){var G=z instanceof ar?Rr(z):new ar(z);if(G.g!="")C&&(G.g=C+"."+G.g),Ti(G,G.s);else{var ye=d.location;G=ye.protocol,C=C?C+"."+ye.hostname:ye.hostname,ye=+ye.port;var Pe=new ar(null);G&&Fr(Pe,G),C&&(Pe.g=C),ye&&Ti(Pe,ye),z&&(Pe.l=z),G=Pe}return z=p.D,C=p.ya,z&&C&&Sn(G,z,C),Sn(G,"VER",p.la),Oa(p,G),G}function ed(p,C,z){if(C&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=p.Ca&&!p.pa?new Yn(new Et({eb:z})):new Yn(p.pa),C.Ha(p.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function td(){}t=td.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hl(){}Hl.prototype.g=function(p,C){return new Hs(p,C)};function Hs(p,C){ie.call(this),this.g=new Ul(C),this.l=p,this.h=C&&C.messageUrlParams||null,p=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(p?p["X-WebChannel-Content-Type"]=C.messageContentType:p={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(p?p["X-WebChannel-Client-Profile"]=C.va:p={"X-WebChannel-Client-Profile":C.va}),this.g.S=p,(p=C&&C.Sb)&&!A(p)&&(this.g.m=p),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!A(C)&&(this.g.D=C,p=this.h,p!==null&&C in p&&(p=this.h,C in p&&delete p[C])),this.j=new ta(this)}S(Hs,ie),Hs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hs.prototype.close=function(){cs(this.g)},Hs.prototype.o=function(p){var C=this.g;if(typeof p=="string"){var z={};z.__data__=p,p=z}else this.u&&(z={},z.__data__=Ie(p),p=z);C.i.push(new Qr(C.Ya++,p)),C.G==3&&Ri(C)},Hs.prototype.N=function(){this.g.l=null,delete this.j,cs(this.g),delete this.g,Hs.aa.N.call(this)};function pu(p){Ce.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var C=p.__sm__;if(C){e:{for(const z in C){p=z;break e}p=void 0}(this.i=p)&&(p=this.i,C=C!==null&&p in C?C[p]:void 0),this.data=C}else this.data=p}S(pu,Ce);function nd(){yt.call(this),this.status=1}S(nd,yt);function ta(p){this.g=p}S(ta,td),ta.prototype.ua=function(){pe(this.g,"a")},ta.prototype.ta=function(p){pe(this.g,new pu(p))},ta.prototype.sa=function(p){pe(this.g,new nd)},ta.prototype.ra=function(){pe(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,Hs.prototype.send=Hs.prototype.o,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,j3=function(){return new Hl},w3=function(){return Wn()},b3=on,Qv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Cg=zs,Xi.COMPLETE="complete",v3=Xi,ut.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",ie.prototype.listen=ie.prototype.K,Af=ut,Yn.prototype.listenOnce=Yn.prototype.L,Yn.prototype.getLastError=Yn.prototype.Ka,Yn.prototype.getLastErrorCode=Yn.prototype.Ba,Yn.prototype.getStatus=Yn.prototype.Z,Yn.prototype.getResponseJson=Yn.prototype.Oa,Yn.prototype.getResponseText=Yn.prototype.oa,Yn.prototype.send=Yn.prototype.ea,Yn.prototype.setWithCredentials=Yn.prototype.Ha,y3=Yn}).apply(typeof Zp<"u"?Zp:typeof self<"u"?self:typeof window<"u"?window:{});const wk="@firebase/firestore",jk="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ui=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ui.UNAUTHENTICATED=new Ui(null),Ui.GOOGLE_CREDENTIALS=new Ui("google-credentials-uid"),Ui.FIRST_PARTY=new Ui("first-party-uid"),Ui.MOCK_USER=new Ui("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new b1("@firebase/firestore");function qu(){return Pc.logLevel}function S9(t){Pc.setLogLevel(t)}function _t(t,...e){if(Pc.logLevel<=Dn.DEBUG){const n=e.map(k1);Pc.debug(`Firestore (${Th}): ${t}`,...n)}}function Cl(t,...e){if(Pc.logLevel<=Dn.ERROR){const n=e.map(k1);Pc.error(`Firestore (${Th}): ${t}`,...n)}}function Yd(t,...e){if(Pc.logLevel<=Dn.WARN){const n=e.map(k1);Pc.warn(`Firestore (${Th}): ${t}`,...n)}}function k1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,k3(t,r,n)}function k3(t,e,n){let r=`FIRESTORE (${Th}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Cl(r),new Error(r)}function rr(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||k3(e,i,r)}function vn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends ho{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ui.UNAUTHENTICATED))}shutdown(){}}class T9{constructor(e){this.t=e,this.currentUser=Ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rr(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new wl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new wl,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},d=u=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(u=>d(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wl)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rr(typeof r.accessToken=="string",31837,{l:r}),new C9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rr(e===null||typeof e=="string",2055,{h:e}),new Ui(e)}}class A9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ui.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class P9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new A9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rr(this.o===void 0,3512);const r=a=>{a.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,_t("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rr(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=R9(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function En(t,e){return t<e?-1:t>e?1:0}function Jv(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return En(r,i);{const a=N3(),l=L9(a.encode(Nk(t,n)),a.encode(Nk(e,n)));return l!==0?l:En(r,i)}}n+=r>65535?2:1}return En(t.length,e.length)}function Nk(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function L9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return En(t[n],e[n]);return En(t.length,e.length)}function hh(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="__name__";class Io{constructor(e,n,r){n===void 0?n=0:n>e.length&&dn(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&dn(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Io.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Io?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Io.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return En(e.length,n.length)}static compareSegments(e,n){const r=Io.isNumericId(e),i=Io.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Io.extractNumericId(e).compare(Io.extractNumericId(n)):Jv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ec.fromString(e.substring(4,e.length-2))}}class br extends Io{construct(e,n,r){return new br(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new wt(Fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new br(n)}static emptyPath(){return new br([])}}const M9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ti extends Io{construct(e,n,r){return new ti(e,n,r)}static isValidIdentifier(e){return M9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ti.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_k}static keyField(){return new ti([_k])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new wt(Fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new wt(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new wt(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new wt(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ti(n)}static emptyPath(){return new ti([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.path=e}static fromPath(e){return new Gt(br.fromString(e))}static fromName(e){return new Gt(br.fromString(e).popFirst(5))}static empty(){return new Gt(br.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&br.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return br.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Gt(new br(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e,n){if(!n)throw new wt(Fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function D9(t,e,n,r){if(e===!0&&r===!0)throw new wt(Fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sk(t){if(!Gt.isDocumentKey(t))throw new wt(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ck(t){if(Gt.isDocumentKey(t))throw new wt(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function S3(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function B0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":dn(12329,{type:typeof t})}function oa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new wt(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=B0(t);throw new wt(Fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function O9(t,e){if(e<=0)throw new wt(Fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,e){const n={typeString:t};return e&&(n.value=e),n}function Fm(t,e){if(!S3(t))throw new wt(Fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new wt(Fe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=-62135596800,Tk=1e6;class Nr{static now(){return Nr.fromMillis(Date.now())}static fromDate(e){return Nr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Tk);return new Nr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new wt(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new wt(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ek)throw new wt(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wt(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tk}_compareTo(e){return this.seconds===e.seconds?En(this.nanoseconds,e.nanoseconds):En(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fm(e,Nr._jsonSchema))return new Nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ek;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nr._jsonSchemaVersion="firestore/timestamp/1.0",Nr._jsonSchema={type:vs("string",Nr._jsonSchemaVersion),seconds:vs("number"),nanoseconds:vs("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{static fromTimestamp(e){return new xn(e)}static min(){return new xn(new Nr(0,0))}static max(){return new xn(new Nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=-1;function V9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=xn.fromTimestamp(r===1e9?new Nr(n+1,0):new Nr(n,r));return new Ic(i,Gt.empty(),e)}function z9(t){return new Ic(t.readTime,t.key,lm)}class Ic{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ic(xn.min(),Gt.empty(),lm)}static max(){return new Ic(xn.max(),Gt.empty(),lm)}}function F9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Gt.comparator(t.documentKey,e.documentKey),n!==0?n:En(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){if(t.code!==Fe.FAILED_PRECONDITION||t.message!==$9)throw t;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&dn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new qe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof qe?n:qe.resolve(n)}catch(n){return qe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):qe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):qe.reject(n)}static resolve(e){return new qe((n,r)=>{n(e)})}static reject(e){return new qe((n,r)=>{r(e)})}static waitFor(e){return new qe((n,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&n()},u=>r(u))}),l=!0,a===i&&n()})}static or(e){let n=qe.resolve(!1);for(const r of e)n=n.next(i=>i?qe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new qe((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let u=0;u<a;u++){const m=u;n(e[m]).next(g=>{l[m]=g,++d,d===a&&r(l)},g=>i(g))}})}static doWhile(e,n){return new qe((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function B9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ph(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}W0.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=-1;function H0(t){return t==null}function t0(t){return t===0&&1/t==-1/0}function W9(t){return typeof t=="number"&&Number.isInteger(t)&&!t0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="";function H9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ak(e)),e=q9(t.get(n),e);return Ak(e)}function q9(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case C3:n+="";break;default:n+=a}}return n}function Ak(t){return t+C3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function E3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this.comparator=e,this.root=n||Js.EMPTY}insert(e,n){return new Vr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Js.BLACK,null,null))}remove(e){return new Vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eg(this.root,e,this.comparator,!0)}}class eg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Js{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Js.RED,this.left=i??Js.EMPTY,this.right=a??Js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Js(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Js.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw dn(27949);return e+(this.isRed()?0:1)}}Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1;Js.EMPTY=new class{constructor(){this.size=0}get key(){throw dn(57766)}get value(){throw dn(16141)}get color(){throw dn(16727)}get left(){throw dn(29726)}get right(){throw dn(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Js(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.comparator=e,this.data=new Vr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ik(this.data.getIterator())}getIteratorFrom(e){return new Ik(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _s)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _s(this.comparator);return n.data=e,n}}class Ik{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.fields=e,e.sort(ti.comparator)}static empty(){return new ia([])}unionWith(e){let n=new _s(ti.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ia(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new T3("Invalid base64 string: "+a):a}}(e);return new ri(n)}static fromUint8Array(e){const n=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new ri(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return En(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ri.EMPTY_BYTE_STRING=new ri("");const G9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rc(t){if(rr(!!t,39018),typeof t=="string"){let e=0;const n=G9.exec(t);if(rr(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ss(t.seconds),nanos:ss(t.nanos)}}function ss(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lc(t){return typeof t=="string"?ri.fromBase64String(t):ri.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="server_timestamp",P3="__type__",I3="__previous_value__",R3="__local_write_time__";function S1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[P3])===null||n===void 0?void 0:n.stringValue)===A3}function q0(t){const e=t.mapValue.fields[I3];return S1(e)?q0(e):e}function cm(t){const e=Rc(t.mapValue.fields[R3].timestampValue);return new Nr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n,r,i,a,l,d,u,m,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=m,this.isUsingEmulator=g}}const n0="(default)";class dm{constructor(e,n){this.projectId=e,this.database=n||n0}static empty(){return new dm("","")}get isDefaultDatabase(){return this.database===n0}isEqual(e){return e instanceof dm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="__type__",Y9="__max__",tg={mapValue:{}},M3="__vector__",r0="value";function Mc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S1(t)?4:Q9(t)?9007199254740991:X9(t)?10:11:dn(28295,{value:t})}function Go(t,e){if(t===e)return!0;const n=Mc(t);if(n!==Mc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cm(t).isEqual(cm(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Rc(i.timestampValue),d=Rc(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Lc(i.bytesValue).isEqual(Lc(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return ss(i.geoPointValue.latitude)===ss(a.geoPointValue.latitude)&&ss(i.geoPointValue.longitude)===ss(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ss(i.integerValue)===ss(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=ss(i.doubleValue),d=ss(a.doubleValue);return l===d?t0(l)===t0(d):isNaN(l)&&isNaN(d)}return!1}(t,e);case 9:return hh(t.arrayValue.values||[],e.arrayValue.values||[],Go);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(Pk(l)!==Pk(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!Go(l[u],d[u])))return!1;return!0}(t,e);default:return dn(52216,{left:t})}}function um(t,e){return(t.values||[]).find(n=>Go(n,e))!==void 0}function fh(t,e){if(t===e)return 0;const n=Mc(t),r=Mc(e);if(n!==r)return En(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return En(t.booleanValue,e.booleanValue);case 2:return function(a,l){const d=ss(a.integerValue||a.doubleValue),u=ss(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1}(t,e);case 3:return Rk(t.timestampValue,e.timestampValue);case 4:return Rk(cm(t),cm(e));case 5:return Jv(t.stringValue,e.stringValue);case 6:return function(a,l){const d=Lc(a),u=Lc(l);return d.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,l){const d=a.split("/"),u=l.split("/");for(let m=0;m<d.length&&m<u.length;m++){const g=En(d[m],u[m]);if(g!==0)return g}return En(d.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,l){const d=En(ss(a.latitude),ss(l.latitude));return d!==0?d:En(ss(a.longitude),ss(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lk(t.arrayValue,e.arrayValue);case 10:return function(a,l){var d,u,m,g;const h=a.fields||{},y=l.fields||{},w=(d=h[r0])===null||d===void 0?void 0:d.arrayValue,S=(u=y[r0])===null||u===void 0?void 0:u.arrayValue,N=En(((m=w==null?void 0:w.values)===null||m===void 0?void 0:m.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return N!==0?N:Lk(w,S)}(t.mapValue,e.mapValue);case 11:return function(a,l){if(a===tg.mapValue&&l===tg.mapValue)return 0;if(a===tg.mapValue)return 1;if(l===tg.mapValue)return-1;const d=a.fields||{},u=Object.keys(d),m=l.fields||{},g=Object.keys(m);u.sort(),g.sort();for(let h=0;h<u.length&&h<g.length;++h){const y=Jv(u[h],g[h]);if(y!==0)return y;const w=fh(d[u[h]],m[g[h]]);if(w!==0)return w}return En(u.length,g.length)}(t.mapValue,e.mapValue);default:throw dn(23264,{le:n})}}function Rk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return En(t,e);const n=Rc(t),r=Rc(e),i=En(n.seconds,r.seconds);return i!==0?i:En(n.nanos,r.nanos)}function Lk(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=fh(n[i],r[i]);if(a)return a}return En(n.length,r.length)}function mh(t){return Zv(t)}function Zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Gt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Zv(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Zv(n.fields[l])}`;return i+"}"}(t.mapValue):dn(61005,{value:t})}function Eg(t){switch(Mc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=q0(t);return e?16+Eg(e):16;case 5:return 2*t.stringValue.length;case 6:return Lc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Eg(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Gc(r.fields,(a,l)=>{i+=a.length+Eg(l)}),i}(t.mapValue);default:throw dn(13486,{value:t})}}function Mk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function eb(t){return!!t&&"integerValue"in t}function C1(t){return!!t&&"arrayValue"in t}function Dk(t){return!!t&&"nullValue"in t}function Ok(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tg(t){return!!t&&"mapValue"in t}function X9(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[L3])===null||n===void 0?void 0:n.stringValue)===M3}function Vf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Q9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Y9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vf(n)}setAll(e){let n=ti.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!n.isImmediateParentOf(d)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=d.popLast()}l?r[d.lastSegment()]=Vf(l):i.push(d.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Tg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Go(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gc(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Hi(Vf(this.value))}}function D3(t){const e=[];return Gc(t.fields,(n,r)=>{const i=new ti([n]);if(Tg(r)){const a=D3(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new ia(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r,i,a,l,d){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new gi(e,0,xn.min(),xn.min(),xn.min(),Hi.empty(),0)}static newFoundDocument(e,n,r,i){return new gi(e,1,n,xn.min(),r,i,0)}static newNoDocument(e,n){return new gi(e,2,n,xn.min(),xn.min(),Hi.empty(),0)}static newUnknownDocument(e,n){return new gi(e,3,n,xn.min(),xn.min(),Hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.position=e,this.inclusive=n}}function Vk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=Gt.comparator(Gt.fromName(l.referenceValue),n.key):r=fh(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function zk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Go(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n="asc"){this.field=e,this.dir=n}}function J9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{}class ys extends O3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eR(e,n,r):n==="array-contains"?new rR(e,r):n==="in"?new sR(e,r):n==="not-in"?new iR(e,r):n==="array-contains-any"?new aR(e,r):new ys(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tR(e,r):new nR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fh(n,this.value)):n!==null&&Mc(this.value)===Mc(n)&&this.matchesComparison(fh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return dn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lo extends O3{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new lo(e,n)}matches(e){return V3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function V3(t){return t.op==="and"}function z3(t){return Z9(t)&&V3(t)}function Z9(t){for(const e of t.filters)if(e instanceof lo)return!1;return!0}function tb(t){if(t instanceof ys)return t.field.canonicalString()+t.op.toString()+mh(t.value);if(z3(t))return t.filters.map(e=>tb(e)).join(",");{const e=t.filters.map(n=>tb(n)).join(",");return`${t.op}(${e})`}}function F3(t,e){return t instanceof ys?function(r,i){return i instanceof ys&&r.op===i.op&&r.field.isEqual(i.field)&&Go(r.value,i.value)}(t,e):t instanceof lo?function(r,i){return i instanceof lo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,l,d)=>a&&F3(l,i.filters[d]),!0):!1}(t,e):void dn(19439)}function $3(t){return t instanceof ys?function(n){return`${n.field.canonicalString()} ${n.op} ${mh(n.value)}`}(t):t instanceof lo?function(n){return n.op.toString()+" {"+n.getFilters().map($3).join(" ,")+"}"}(t):"Filter"}class eR extends ys{constructor(e,n,r){super(e,n,r),this.key=Gt.fromName(r.referenceValue)}matches(e){const n=Gt.comparator(e.key,this.key);return this.matchesComparison(n)}}class tR extends ys{constructor(e,n){super(e,"in",n),this.keys=U3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nR extends ys{constructor(e,n){super(e,"not-in",n),this.keys=U3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function U3(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Gt.fromName(r.referenceValue))}class rR extends ys{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return C1(n)&&um(n.arrayValue,this.value)}}class sR extends ys{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&um(this.value.arrayValue,n)}}class iR extends ys{constructor(e,n){super(e,"not-in",n)}matches(e){if(um(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!um(this.value.arrayValue,n)}}class aR extends ys{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!C1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>um(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.Pe=null}}function Fk(t,e=null,n=[],r=[],i=null,a=null,l=null){return new oR(t,e,n,r,i,a,l)}function E1(t){const e=vn(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),H0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mh(r)).join(",")),e.Pe=n}return e.Pe}function T1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!J9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zk(t.startAt,e.startAt)&&zk(t.endAt,e.endAt)}function nb(t){return Gt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n=null,r=[],i=[],a=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function lR(t,e,n,r,i,a,l,d){return new Ih(t,e,n,r,i,a,l,d)}function G0(t){return new Ih(t)}function $k(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function B3(t){return t.collectionGroup!==null}function zf(t){const e=vn(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new _s(ti.comparator);return l.filters.forEach(u=>{u.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new hm(a,r))}),n.has(ti.keyField().canonicalString())||e.Te.push(new hm(ti.keyField(),r))}return e.Te}function Vo(t){const e=vn(t);return e.Ie||(e.Ie=cR(e,zf(t))),e.Ie}function cR(t,e){if(t.limitType==="F")return Fk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new hm(i.field,a)});const n=t.endAt?new s0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new s0(t.startAt.position,t.startAt.inclusive):null;return Fk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rb(t,e){const n=t.filters.concat([e]);return new Ih(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function i0(t,e,n){return new Ih(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function K0(t,e){return T1(Vo(t),Vo(e))&&t.limitType===e.limitType}function W3(t){return`${E1(Vo(t))}|lt:${t.limitType}`}function Gu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$3(i)).join(", ")}]`),H0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>mh(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>mh(i)).join(",")),`Target(${r})`}(Vo(t))}; limitType=${t.limitType})`}function Y0(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Gt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of zf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,d,u){const m=Vk(l,d,u);return l.inclusive?m<=0:m<0}(r.startAt,zf(r),i)||r.endAt&&!function(l,d,u){const m=Vk(l,d,u);return l.inclusive?m>=0:m>0}(r.endAt,zf(r),i))}(t,e)}function dR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function H3(t){return(e,n)=>{let r=!1;for(const i of zf(t)){const a=uR(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function uR(t,e,n){const r=t.field.isKeyField()?Gt.comparator(e.key,n.key):function(a,l,d){const u=l.data.field(a),m=d.data.field(a);return u!==null&&m!==null?fh(u,m):dn(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return dn(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gc(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return E3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Vr(Gt.comparator);function El(){return hR}const q3=new Vr(Gt.comparator);function Pf(...t){let e=q3;for(const n of t)e=e.insert(n.key,n);return e}function G3(t){let e=q3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Md(){return Ff()}function K3(){return Ff()}function Ff(){return new ou(t=>t.toString(),(t,e)=>t.isEqual(e))}const fR=new Vr(Gt.comparator),mR=new _s(Gt.comparator);function On(...t){let e=mR;for(const n of t)e=e.add(n);return e}const pR=new _s(En);function gR(){return pR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t0(e)?"-0":e}}function Y3(t){return{integerValue:""+t}}function X3(t,e){return W9(e)?Y3(e):A1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this._=void 0}}function xR(t,e,n){return t instanceof fm?function(i,a){const l={fields:{[P3]:{stringValue:A3},[R3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&S1(a)&&(a=q0(a)),a&&(l.fields[I3]=a),{mapValue:l}}(n,e):t instanceof mm?J3(t,e):t instanceof pm?Z3(t,e):function(i,a){const l=Q3(i,a),d=Uk(l)+Uk(i.Ee);return eb(l)&&eb(i.Ee)?Y3(d):A1(i.serializer,d)}(t,e)}function yR(t,e,n){return t instanceof mm?J3(t,e):t instanceof pm?Z3(t,e):n}function Q3(t,e){return t instanceof gm?function(r){return eb(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class fm extends X0{}class mm extends X0{constructor(e){super(),this.elements=e}}function J3(t,e){const n=eS(e);for(const r of t.elements)n.some(i=>Go(i,r))||n.push(r);return{arrayValue:{values:n}}}class pm extends X0{constructor(e){super(),this.elements=e}}function Z3(t,e){let n=eS(e);for(const r of t.elements)n=n.filter(i=>!Go(i,r));return{arrayValue:{values:n}}}class gm extends X0{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Uk(t){return ss(t.integerValue||t.doubleValue)}function eS(t){return C1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.field=e,this.transform=n}}function vR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof mm&&i instanceof mm||r instanceof pm&&i instanceof pm?hh(r.elements,i.elements,Go):r instanceof gm&&i instanceof gm?Go(r.Ee,i.Ee):r instanceof fm&&i instanceof fm}(t.transform,e.transform)}class bR{constructor(e,n){this.version=e,this.transformResults=n}}class Ea{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ea}static exists(e){return new Ea(void 0,e)}static updateTime(e){return new Ea(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ag(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Q0{}function nS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new P1(t.key,Ea.none()):new $m(t.key,t.data,Ea.none());{const n=t.data,r=Hi.empty();let i=new _s(ti.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Kc(t.key,r,new ia(i.toArray()),Ea.none())}}function wR(t,e,n){t instanceof $m?function(i,a,l){const d=i.value.clone(),u=Wk(i.fieldTransforms,a,l.transformResults);d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):t instanceof Kc?function(i,a,l){if(!Ag(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=Wk(i.fieldTransforms,a,l.transformResults),u=a.data;u.setAll(rS(i)),u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function $f(t,e,n,r){return t instanceof $m?function(a,l,d,u){if(!Ag(a.precondition,l))return d;const m=a.value.clone(),g=Hk(a.fieldTransforms,u,l);return m.setAll(g),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kc?function(a,l,d,u){if(!Ag(a.precondition,l))return d;const m=Hk(a.fieldTransforms,u,l),g=l.data;return g.setAll(rS(a)),g.setAll(m),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,l,d){return Ag(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(t,e,n)}function jR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Q3(r.transform,i||null);a!=null&&(n===null&&(n=Hi.empty()),n.set(r.field,a))}return n||null}function Bk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hh(r,i,(a,l)=>vR(a,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $m extends Q0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kc extends Q0{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function rS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wk(t,e,n){const r=new Map;rr(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,yR(l,d,n[i]))}return r}function Hk(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,xR(a,l,e))}return r}class P1 extends Q0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kR extends Q0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&wR(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$f(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$f(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=K3();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=n.has(i.key)?null:d;const u=nS(l,d);u!==null&&r.set(i.key,u),l.isValidDocument()||l.convertToNoDocument(xn.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),On())}isEqual(e){return this.batchId===e.batchId&&hh(this.mutations,e.mutations,(n,r)=>Bk(n,r))&&hh(this.baseMutations,e.baseMutations,(n,r)=>Bk(n,r))}}class I1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){rr(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return fR}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new I1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ms,Bn;function CR(t){switch(t){case Fe.OK:return dn(64938);case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0;default:return dn(15467,{code:t})}}function sS(t){if(t===void 0)return Cl("GRPC error has no .code"),Fe.UNKNOWN;switch(t){case ms.OK:return Fe.OK;case ms.CANCELLED:return Fe.CANCELLED;case ms.UNKNOWN:return Fe.UNKNOWN;case ms.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case ms.INTERNAL:return Fe.INTERNAL;case ms.UNAVAILABLE:return Fe.UNAVAILABLE;case ms.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case ms.NOT_FOUND:return Fe.NOT_FOUND;case ms.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case ms.ABORTED:return Fe.ABORTED;case ms.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case ms.DATA_LOSS:return Fe.DATA_LOSS;default:return dn(39323,{code:t})}}(Bn=ms||(ms={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new Ec([4294967295,4294967295],0);function qk(t){const e=N3().encode(t),n=new x3;return n.update(e),new Uint8Array(n.digest())}function Gk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ec([n,r],0),new Ec([i,a],0)]}class R1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new If(`Invalid padding: ${n}`);if(r<0)throw new If(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new If(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new If(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ec.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Ec.fromNumber(r)));return i.compare(ER)===1&&(i=new Ec([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=qk(e),[r,i]=Gk(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,i,a);if(!this.ye(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new R1(a,i,n);return r.forEach(d=>l.insert(d)),l}insert(e){if(this.fe===0)return;const n=qk(e),[r,i]=Gk(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,i,a);this.we(l)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class If extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Um.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new J0(xn.min(),i,new Vr(En),El(),On())}}class Um{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Um(r,n,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class iS{constructor(e,n){this.targetId=e,this.De=n}}class aS{constructor(e,n,r=ri.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Kk{constructor(){this.ve=0,this.Ce=Yk(),this.Fe=ri.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=On(),n=On(),r=On();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:dn(38017,{changeType:a})}}),new Um(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Yk()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,rr(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class TR{constructor(e){this.We=e,this.Ge=new Map,this.ze=El(),this.je=ng(),this.Je=ng(),this.He=new Vr(En)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:dn(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(nb(a))if(r===0){const l=new Gt(a.path);this.Xe(n,l,gi.newNoDocument(l,xn.min()))}else rr(r===1,20013,{expectedCount:r});else{const l=this.ot(n);if(l!==r){const d=this._t(e),u=d?this.ut(d,e,l):1;if(u!==0){this.rt(n);const m=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,m)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let l,d;try{l=Lc(r).toUint8Array()}catch(u){if(u instanceof T3)return Yd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new R1(l,i,a)}catch(u){return Yd(u instanceof If?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.fe===0?null:d}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const l=this.We.lt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,l)=>{const d=this.st(l);if(d){if(a.current&&nb(d.target)){const u=new Gt(d.target.path);this.Tt(u).has(l)||this.It(l,u)||this.Xe(l,u,gi.newNoDocument(u,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}});let r=On();this.Je.forEach((a,l)=>{let d=!0;l.forEachWhile(u=>{const m=this.st(u);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ze.forEach((a,l)=>l.setReadTime(e));const i=new J0(e,n,this.He,this.ze,r);return this.ze=El(),this.je=ng(),this.Je=ng(),this.He=new Vr(En),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Kk,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new _s(En),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new _s(En),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_t("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Kk),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ng(){return new Vr(Gt.comparator)}function Yk(){return new Vr(Gt.comparator)}const AR={asc:"ASCENDING",desc:"DESCENDING"},PR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IR={and:"AND",or:"OR"};class RR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sb(t,e){return t.useProto3Json||H0(e)?e:{value:e}}function a0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LR(t,e){return a0(t,e.toTimestamp())}function zo(t){return rr(!!t,49232),xn.fromTimestamp(function(n){const r=Rc(n);return new Nr(r.seconds,r.nanos)}(t))}function L1(t,e){return ib(t,e).canonicalString()}function ib(t,e){const n=function(i){return new br(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lS(t){const e=br.fromString(t);return rr(fS(e),10190,{key:e.toString()}),e}function ab(t,e){return L1(t.databaseId,e.path)}function qy(t,e){const n=lS(e);if(n.get(1)!==t.databaseId.projectId)throw new wt(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new wt(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Gt(dS(n))}function cS(t,e){return L1(t.databaseId,e)}function MR(t){const e=lS(t);return e.length===4?br.emptyPath():dS(e)}function ob(t){return new br(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dS(t){return rr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Xk(t,e,n){return{name:ab(t,e),fields:n.value.mapValue.fields}}function DR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:dn(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(m,g){return m.useProto3Json?(rr(g===void 0||typeof g=="string",58123),ri.fromBase64String(g||"")):(rr(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),ri.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(m){const g=m.code===void 0?Fe.UNKNOWN:sS(m.code);return new wt(g,m.message||"")}(l);n=new aS(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qy(t,r.document.name),a=zo(r.document.updateTime),l=r.document.createTime?zo(r.document.createTime):xn.min(),d=new Hi({mapValue:{fields:r.document.fields}}),u=gi.newFoundDocument(i,a,l,d),m=r.targetIds||[],g=r.removedTargetIds||[];n=new Pg(m,g,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qy(t,r.document),a=r.readTime?zo(r.readTime):xn.min(),l=gi.newNoDocument(i,a),d=r.removedTargetIds||[];n=new Pg([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qy(t,r.document),a=r.removedTargetIds||[];n=new Pg([],a,i,null)}else{if(!("filter"in e))return dn(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new SR(i,a),d=r.targetId;n=new iS(d,l)}}return n}function OR(t,e){let n;if(e instanceof $m)n={update:Xk(t,e.key,e.value)};else if(e instanceof P1)n={delete:ab(t,e.key)};else if(e instanceof Kc)n={update:Xk(t,e.key,e.data),updateMask:qR(e.fieldMask)};else{if(!(e instanceof kR))return dn(16599,{Rt:e.type});n={verify:ab(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const d=l.transform;if(d instanceof fm)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof mm)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof pm)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gm)return{fieldPath:l.field.canonicalString(),increment:d.Ee};throw dn(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:LR(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:dn(27497)}(t,e.precondition)),n}function VR(t,e){return t&&t.length>0?(rr(e!==void 0,14353),t.map(n=>function(i,a){let l=i.updateTime?zo(i.updateTime):zo(a);return l.isEqual(xn.min())&&(l=zo(a)),new bR(l,i.transformResults||[])}(n,e))):[]}function zR(t,e){return{documents:[cS(t,e.path)]}}function FR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cS(t,i);const a=function(m){if(m.length!==0)return hS(lo.create(m,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const l=function(m){if(m.length!==0)return m.map(g=>function(y){return{field:Ku(y.field),direction:BR(y.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const d=sb(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:n,parent:i}}function $R(t){let e=MR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){rr(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(h){const y=uS(h);return y instanceof lo&&z3(y)?y.getFilters():[y]}(n.where));let l=[];n.orderBy&&(l=function(h){return h.map(y=>function(S){return new hm(Yu(S.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(n.orderBy));let d=null;n.limit&&(d=function(h){let y;return y=typeof h=="object"?h.value:h,H0(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(h){const y=!!h.before,w=h.values||[];return new s0(w,y)}(n.startAt));let m=null;return n.endAt&&(m=function(h){const y=!h.before,w=h.values||[];return new s0(w,y)}(n.endAt)),lR(e,i,l,a,d,"F",u,m)}function UR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dn(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yu(n.unaryFilter.field);return ys.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yu(n.unaryFilter.field);return ys.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Yu(n.unaryFilter.field);return ys.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yu(n.unaryFilter.field);return ys.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dn(61313);default:return dn(60726)}}(t):t.fieldFilter!==void 0?function(n){return ys.create(Yu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dn(58110);default:return dn(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return lo.create(n.compositeFilter.filters.map(r=>uS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return dn(1026)}}(n.compositeFilter.op))}(t):dn(30097,{filter:t})}function BR(t){return AR[t]}function WR(t){return PR[t]}function HR(t){return IR[t]}function Ku(t){return{fieldPath:t.canonicalString()}}function Yu(t){return ti.fromServerFormat(t.fieldPath)}function hS(t){return t instanceof ys?function(n){if(n.op==="=="){if(Ok(n.value))return{unaryFilter:{field:Ku(n.field),op:"IS_NAN"}};if(Dk(n.value))return{unaryFilter:{field:Ku(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ok(n.value))return{unaryFilter:{field:Ku(n.field),op:"IS_NOT_NAN"}};if(Dk(n.value))return{unaryFilter:{field:Ku(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ku(n.field),op:WR(n.op),value:n.value}}}(t):t instanceof lo?function(n){const r=n.getFilters().map(i=>hS(i));return r.length===1?r[0]:{compositeFilter:{op:HR(n.op),filters:r}}}(t):dn(54877,{filter:t})}function qR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,i,a=xn.min(),l=xn.min(),d=ri.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new jc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.gt=e}}function KR(t){const e=$R({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?i0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.Dn=new XR}addToCollectionParentIndex(e,n){return this.Dn.add(n),qe.resolve()}getCollectionParents(e,n){return qe.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return qe.resolve()}deleteFieldIndex(e,n){return qe.resolve()}deleteAllFieldIndexes(e){return qe.resolve()}createTargetIndexes(e,n){return qe.resolve()}getDocumentsMatchingTarget(e,n){return qe.resolve(null)}getIndexType(e,n){return qe.resolve(0)}getFieldIndexes(e,n){return qe.resolve([])}getNextCollectionGroupToUpdate(e){return qe.resolve(null)}getMinOffset(e,n){return qe.resolve(Ic.min())}getMinOffsetFromCollectionGroup(e,n){return qe.resolve(Ic.min())}updateCollectionGroup(e,n,r){return qe.resolve()}updateIndexEntries(e,n){return qe.resolve()}}class XR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _s(br.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _s(br.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mS=41943040;class Bi{static withCacheSize(e){return new Bi(e,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(mS,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ph(0)}static ur(){return new ph(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="LruGarbageCollector",pS=1048576;function Zk([t,e],[n,r]){const i=En(t,n);return i===0?En(e,r):i}class QR{constructor(e){this.Tr=e,this.buffer=new _s(Zk),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Zk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_t(Jk,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ph(n)?_t(Jk,"Ignoring IndexedDB error during garbage collection: ",n):await Ah(n)}await this.Rr(3e5)})}}class ZR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return qe.resolve(W0.ue);const r=new QR(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),qe.resolve(Qk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qk):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,l,d,u,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,l=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,d=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(m=Date.now(),qu()<=Dn.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${a} targets in `+(u-d)+`ms
	Removed ${h} documents in `+(m-u)+`ms
Total Duration: ${m-g}ms`),qe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h})))}}function e8(t,e){return new ZR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(){this.changes=new ou(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?qe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$f(r.mutation,i,ia.empty(),Nr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,On()).next(()=>r))}getLocalViewOfDocuments(e,n,r=On()){const i=Md();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let l=Pf();return a.forEach((d,u)=>{l=l.insert(d,u.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Md();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,On()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{n.set(l,d)})})}computeViews(e,n,r,i){let a=El();const l=Ff(),d=function(){return Ff()}();return n.forEach((u,m)=>{const g=r.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof Kc)?a=a.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),$f(g.mutation,m,g.mutation.getFieldMask(),Nr.now())):l.set(m.key,ia.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((m,g)=>l.set(m,g)),n.forEach((m,g)=>{var h;return d.set(m,new n8(g,(h=l.get(m))!==null&&h!==void 0?h:null))}),d))}recalculateAndSaveOverlays(e,n){const r=Ff();let i=new Vr((l,d)=>l-d),a=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const d of l)d.keys().forEach(u=>{const m=n.get(u);if(m===null)return;let g=r.get(u)||ia.empty();g=d.applyToLocalView(m,g),r.set(u,g);const h=(i.get(d.batchId)||On()).add(u);i=i.insert(d.batchId,h)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),m=u.key,g=u.value,h=K3();g.forEach(y=>{if(!a.has(y)){const w=nS(n.get(y),r.get(y));w!==null&&h.set(y,w),a=a.add(y)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,h))}return qe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return Gt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):qe.resolve(Md());let d=lm,u=a;return l.next(m=>qe.forEach(m,(g,h)=>(d<h.largestBatchId&&(d=h.largestBatchId),a.get(g)?qe.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{u=u.insert(g,y)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,u,m,On())).next(g=>({batchId:d,changes:G3(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Gt(n)).next(r=>{let i=Pf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let l=Pf();return this.indexManager.getCollectionParents(e,a).next(d=>qe.forEach(d,u=>{const m=function(h,y){return new Ih(y,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(g=>{g.forEach((h,y)=>{l=l.insert(h,y)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(l=>{a.forEach((u,m)=>{const g=m.getKey();l.get(g)===null&&(l=l.insert(g,gi.newInvalidDocument(g)))});let d=Pf();return l.forEach((u,m)=>{const g=a.get(u);g!==void 0&&$f(g.mutation,m,ia.empty(),Nr.now()),Y0(n,m)&&(d=d.insert(u,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return qe.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zo(i.createTime)}}(n)),qe.resolve()}getNamedQuery(e,n){return qe.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:KR(i.bundledQuery),readTime:zo(i.readTime)}}(n)),qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this.overlays=new Vr(Gt.comparator),this.kr=new Map}getOverlay(e,n){return qe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Md();return qe.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),qe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),qe.resolve()}getOverlaysForCollection(e,n,r){const i=Md(),a=n.length+1,l=new Gt(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,m=u.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return qe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Vr((m,g)=>m-g);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=Md(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const d=Md(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((m,g)=>d.set(m,g)),!(d.size()>=i)););return qe.resolve(d)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new _R(n,r));let a=this.kr.get(n);a===void 0&&(a=On(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.sessionToken=ri.EMPTY_BYTE_STRING}getSessionToken(e){return qe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,qe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.qr=new _s(Os.Qr),this.$r=new _s(Os.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Os(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Os(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Gt(new br([])),r=new Os(n,e),i=new Os(n,e+1),a=[];return this.$r.forEachInRange([r,i],l=>{this.Wr(l),a.push(l.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Gt(new br([])),r=new Os(n,e),i=new Os(n,e+1);let a=On();return this.$r.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new Os(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Os{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Gt.comparator(e.key,n.key)||En(e.Hr,n.Hr)}static Ur(e,n){return En(e.Hr,n.Hr)||Gt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new _s(Os.Qr)}checkEmpty(e){return qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new NR(a,n,r,i);this.mutationQueue.push(l);for(const d of i)this.Yr=this.Yr.add(new Os(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return qe.resolve(l)}lookupMutationBatch(e,n){return qe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return qe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return qe.resolve(this.mutationQueue.length===0?_1:this.er-1)}getAllMutationBatches(e){return qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Os(n,0),i=new Os(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],l=>{const d=this.Zr(l.Hr);a.push(d)}),qe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _s(En);return n.forEach(i=>{const a=new Os(i,0),l=new Os(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],d=>{r=r.add(d.Hr)})}),qe.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Gt.isDocumentKey(a)||(a=a.child(""));const l=new Os(new Gt(a),0);let d=new _s(En);return this.Yr.forEachWhile(u=>{const m=u.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(u.Hr)),!0)},l),qe.resolve(this.ei(d))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){rr(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return qe.forEach(n.mutations,i=>{const a=new Os(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Os(n,0),i=this.Yr.firstAfterOrEqual(r);return qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,qe.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.ni=e,this.docs=function(){return new Vr(Gt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return qe.resolve(r?r.document.mutableCopy():gi.newInvalidDocument(n))}getEntries(e,n){let r=El();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():gi.newInvalidDocument(i))}),qe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=El();const l=n.path,d=new Gt(l.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:m,value:{document:g}}=u.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||F9(z9(g),r)<=0||(i.has(g.key)||Y0(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return qe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){dn(9500)}ri(e,n){return qe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new c8(this)}getSize(e){return qe.resolve(this.size)}}class c8 extends t8{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),qe.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e){this.persistence=e,this.ii=new ou(n=>E1(n),T1),this.lastRemoteSnapshotVersion=xn.min(),this.highestTargetId=0,this.si=0,this.oi=new M1,this.targetCount=0,this._i=ph.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),qe.resolve()}getLastRemoteSnapshotVersion(e){return qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),qe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),qe.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ph(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,qe.resolve()}updateTargetData(e,n){return this.hr(n),qe.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,qe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((l,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),qe.waitFor(a).next(()=>i)}getTargetCount(e){return qe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return qe.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),qe.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),qe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),qe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return qe.resolve(r)}containsKey(e,n){return qe.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.ai={},this.overlays={},this.ui=new W0(0),this.ci=!1,this.ci=!0,this.li=new a8,this.referenceDelegate=e(this),this.hi=new d8(this),this.indexManager=new YR,this.remoteDocumentCache=function(i){return new l8(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new GR(n),this.Ti=new s8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new i8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new o8(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){_t("MemoryPersistence","Starting transaction:",e);const i=new u8(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return qe.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class u8 extends U9{constructor(e){super(),this.currentSequenceNumber=e}}class D1{constructor(e){this.persistence=e,this.Ai=new M1,this.Ri=null}static Vi(e){return new D1(e)}get mi(){if(this.Ri)return this.Ri;throw dn(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),qe.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),qe.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),qe.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qe.forEach(this.mi,r=>{const i=Gt.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,xn.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return qe.or([()=>qe.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class o0{constructor(e,n){this.persistence=e,this.gi=new ou(r=>H9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=e8(this,n)}static Vi(e,n){return new o0(e,n)}Ii(){}di(e){return qe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return qe.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?qe.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,l=>this.Sr(e,l,n).next(d=>{d||(r++,a.removeEntry(l,xn.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),qe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),qe.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),qe.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),qe.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Eg(e.data.value)),n}Sr(e,n,r){return qe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return qe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=On(),i=On();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new O1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return lI()?8:B9(yi())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new h8;return this.ws(e,n,l).next(d=>{if(a.result=d,this.Rs)return this.Ss(e,n,l,d.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(qu()<=Dn.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",Gu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),qe.resolve()):(qu()<=Dn.DEBUG&&_t("QueryEngine","Query:",Gu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(qu()<=Dn.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",Gu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vo(n))):qe.resolve())}ps(e,n){if($k(n))return qe.resolve(null);let r=Vo(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=i0(n,null,"F"),r=Vo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=On(...a);return this.gs.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(u=>{const m=this.bs(n,d);return this.Ds(n,m,l,u.readTime)?this.ps(e,i0(n,null,"F")):this.vs(e,m,n,u)}))})))}ys(e,n,r,i){return $k(n)||i.isEqual(xn.min())?qe.resolve(null):this.gs.getDocuments(e,r).next(a=>{const l=this.bs(n,a);return this.Ds(n,l,r,i)?qe.resolve(null):(qu()<=Dn.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gu(n)),this.vs(e,l,n,V9(i,lm)).next(d=>d))})}bs(e,n){let r=new _s(H3(e));return n.forEach((i,a)=>{Y0(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return qu()<=Dn.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Gu(n)),this.gs.getDocumentsMatchingQuery(e,n,Ic.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="LocalStore",m8=3e8;class p8{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Vr(En),this.Ms=new ou(a=>E1(a),T1),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r8(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function g8(t,e,n,r){return new p8(t,e,n,r)}async function xS(t,e){const n=vn(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let u=On();for(const m of i){l.push(m.batchId);for(const g of m.mutations)u=u.add(g.key)}for(const m of a){d.push(m.batchId);for(const g of m.mutations)u=u.add(g.key)}return n.localDocuments.getDocuments(r,u).next(m=>({Bs:m,removedBatchIds:l,addedBatchIds:d}))})})}function x8(t,e){const n=vn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(d,u,m,g){const h=m.batch,y=h.keys();let w=qe.resolve();return y.forEach(S=>{w=w.next(()=>g.getEntry(u,S)).next(N=>{const _=m.docVersions.get(S);rr(_!==null,48541),N.version.compareTo(_)<0&&(h.applyToRemoteDocument(N,m),N.isValidDocument()&&(N.setReadTime(m.commitVersion),g.addEntry(N)))})}),w.next(()=>d.mutationQueue.removeMutationBatch(u,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let u=On();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(u=u.add(d.batch.mutations[m].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function yS(t){const e=vn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function y8(t,e){const n=vn(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const d=[];e.targetChanges.forEach((g,h)=>{const y=i.get(h);if(!y)return;d.push(n.hi.removeMatchingKeys(a,g.removedDocuments,h).next(()=>n.hi.addMatchingKeys(a,g.addedDocuments,h)));let w=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(ri.EMPTY_BYTE_STRING,xn.min()).withLastLimboFreeSnapshotVersion(xn.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(h,w),function(N,_,D){return N.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=m8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(y,w,g)&&d.push(n.hi.updateTargetData(a,w))});let u=El(),m=On();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),d.push(v8(a,l,e.documentUpdates).next(g=>{u=g.Ls,m=g.ks})),!r.isEqual(xn.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next(h=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(g)}return qe.waitFor(d).next(()=>l.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,m)).next(()=>u)}).then(a=>(n.Fs=i,a))}function v8(t,e,n){let r=On(),i=On();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let l=El();return n.forEach((d,u)=>{const m=a.get(d);u.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),u.isNoDocument()&&u.version.isEqual(xn.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!m.isValidDocument()||u.version.compareTo(m.version)>0||u.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):_t(V1,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",u.version)}),{Ls:l,ks:i}})}function b8(t,e){const n=vn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function w8(t,e){const n=vn(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,qe.resolve(i)):n.hi.allocateTargetId(r).next(l=>(i=new jc(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function lb(t,e,n){const r=vn(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Ph(l))throw l;_t(V1,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function e4(t,e,n){const r=vn(t);let i=xn.min(),a=On();return r.persistence.runTransaction("Execute query","readwrite",l=>function(u,m,g){const h=vn(u),y=h.Ms.get(g);return y!==void 0?qe.resolve(h.Fs.get(y)):h.hi.getTargetData(m,g)}(r,l,Vo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(l,d.targetId).next(u=>{a=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(l,e,n?i:xn.min(),n?a:On())).next(d=>(j8(r,dR(e),d),{documents:d,qs:a})))}function j8(t,e,n){let r=t.xs.get(e)||xn.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class t4{constructor(){this.activeTargetIds=gR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k8{constructor(){this.Fo=new t4,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new t4,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="ConnectivityMonitor";class r4{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_t(n4,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_t(n4,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg=null;function cb(){return rg===null?rg=function(){return 268435456+Math.round(2147483648*Math.random())}():rg++,"0x"+rg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="RestConnection",_8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S8{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===n0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const l=cb(),d=this.Go(e,n.toUriEncodedString());_t(Gy,`Sending RPC '${e}' ${l}:`,d,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,a);const{host:m}=new URL(d),g=Vl(m);return this.jo(e,d,u,r,g).then(h=>(_t(Gy,`Received RPC '${e}' ${l}: `,h),h),h=>{throw Yd(Gy,`RPC '${e}' ${l} failed with error: `,h,"url: ",d,"request:",r),h})}Jo(e,n,r,i,a,l){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Th}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=_8[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="WebChannelConnection";class E8 extends S8{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const l=cb();return new Promise((d,u)=>{const m=new y3;m.setWithCredentials(!0),m.listenOnce(v3.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Cg.NO_ERROR:const h=m.getResponseJson();_t(mi,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(h)),d(h);break;case Cg.TIMEOUT:_t(mi,`RPC '${e}' ${l} timed out`),u(new wt(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case Cg.HTTP_ERROR:const y=m.getStatus();if(_t(mi,`RPC '${e}' ${l} failed with status:`,y,"response text:",m.getResponseText()),y>0){let w=m.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const N=function(D){const A=D.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(A)>=0?A:Fe.UNKNOWN}(S.status);u(new wt(N,S.message))}else u(new wt(Fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else u(new wt(Fe.UNAVAILABLE,"Connection failed."));break;default:dn(9055,{c_:e,streamId:l,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{_t(mi,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(i);_t(mi,`RPC '${e}' ${l} sending request:`,i),m.send(n,"POST",g,r,15)})}P_(e,n,r){const i=cb(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=j3(),d=w3(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(u.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const g=a.join("");_t(mi,`Creating RPC '${e}' stream ${i}: ${g}`,u);const h=l.createWebChannel(g,u);this.T_(h);let y=!1,w=!1;const S=new C8({Ho:_=>{w?_t(mi,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(y||(_t(mi,`Opening RPC '${e}' stream ${i} transport.`),h.open(),y=!0),_t(mi,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},Yo:()=>h.close()}),N=(_,D,A)=>{_.listen(D,L=>{try{A(L)}catch(I){setTimeout(()=>{throw I},0)}})};return N(h,Af.EventType.OPEN,()=>{w||(_t(mi,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),N(h,Af.EventType.CLOSE,()=>{w||(w=!0,_t(mi,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(h))}),N(h,Af.EventType.ERROR,_=>{w||(w=!0,Yd(mi,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),S.__(new wt(Fe.UNAVAILABLE,"The operation could not be completed")))}),N(h,Af.EventType.MESSAGE,_=>{var D;if(!w){const A=_.data[0];rr(!!A,16349);const L=A,I=(L==null?void 0:L.error)||((D=L[0])===null||D===void 0?void 0:D.error);if(I){_t(mi,`RPC '${e}' stream ${i} received error:`,I);const F=I.status;let R=function(O){const j=ms[O];if(j!==void 0)return sS(j)}(F),E=I.message;R===void 0&&(R=Fe.INTERNAL,E="Unknown error status: "+F+" with message "+I.message),w=!0,S.__(new wt(R,E)),h.close()}else _t(mi,`RPC '${e}' stream ${i} received:`,A),S.a_(A)}}),N(d,b3.STAT_EVENT,_=>{_.stat===Qv.PROXY?_t(mi,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Qv.NOPROXY&&_t(mi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ky(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t){return new RR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&_t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="PersistentStream";class bS{constructor(e,n,r,i,a,l,d,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new vS(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Fe.RESOURCE_EXHAUSTED?(Cl(n.toString()),Cl("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new wt(Fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return _t(s4,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(_t(s4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T8 extends bS{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=DR(this.serializer,e),r=function(a){if(!("targetChange"in a))return xn.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?xn.min():l.readTime?zo(l.readTime):xn.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ob(this.serializer),n.addTarget=function(a,l){let d;const u=l.target;if(d=nb(u)?{documents:zR(a,u)}:{query:FR(a,u).Vt},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=oS(a,l.resumeToken);const m=sb(a,l.expectedCount);m!==null&&(d.expectedCount=m)}else if(l.snapshotVersion.compareTo(xn.min())>0){d.readTime=a0(a,l.snapshotVersion.toTimestamp());const m=sb(a,l.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=UR(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ob(this.serializer),n.removeTarget=e,this.k_(n)}}class A8 extends bS{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return rr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){rr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=VR(e.writeResults,e.commitTime),r=zo(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ob(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>OR(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{}class I8 extends P8{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new wt(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(e,ib(n,r),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new wt(Fe.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Jo(e,ib(n,r),i,l,d,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new wt(Fe.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class R8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Cl(n),this._a=!1):_t("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="RemoteStore";class L8{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(l=>{r.enqueueAndForget(async()=>{lu(this)&&(_t(Xd,"Restarting streams for network reachability change."),await async function(u){const m=vn(u);m.Ia.add(4),await Bm(m),m.Aa.set("Unknown"),m.Ia.delete(4),await ex(m)}(this))})}),this.Aa=new R8(r,i)}}async function ex(t){if(lu(t))for(const e of t.da)await e(!0)}async function Bm(t){for(const e of t.da)await e(!1)}function wS(t,e){const n=vn(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),U1(n)?$1(n):Rh(n).x_()&&F1(n,e))}function z1(t,e){const n=vn(t),r=Rh(n);n.Ta.delete(e),r.x_()&&jS(n,e),n.Ta.size===0&&(r.x_()?r.B_():lu(n)&&n.Aa.set("Unknown"))}function F1(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rh(t).H_(e)}function jS(t,e){t.Ra.$e(e),Rh(t).Y_(e)}function $1(t){t.Ra=new TR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Rh(t).start(),t.Aa.aa()}function U1(t){return lu(t)&&!Rh(t).M_()&&t.Ta.size>0}function lu(t){return vn(t).Ia.size===0}function kS(t){t.Ra=void 0}async function M8(t){t.Aa.set("Online")}async function D8(t){t.Ta.forEach((e,n)=>{F1(t,e)})}async function O8(t,e){kS(t),U1(t)?(t.Aa.la(e),$1(t)):t.Aa.set("Unknown")}async function V8(t,e,n){if(t.Aa.set("Online"),e instanceof aS&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const d of a.targetIds)i.Ta.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.Ta.delete(d),i.Ra.removeTarget(d))}(t,e)}catch(r){_t(Xd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await l0(t,r)}else if(e instanceof Pg?t.Ra.Ye(e):e instanceof iS?t.Ra.it(e):t.Ra.et(e),!n.isEqual(xn.min()))try{const r=await yS(t.localStore);n.compareTo(r)>=0&&await function(a,l){const d=a.Ra.Pt(l);return d.targetChanges.forEach((u,m)=>{if(u.resumeToken.approximateByteSize()>0){const g=a.Ta.get(m);g&&a.Ta.set(m,g.withResumeToken(u.resumeToken,l))}}),d.targetMismatches.forEach((u,m)=>{const g=a.Ta.get(u);if(!g)return;a.Ta.set(u,g.withResumeToken(ri.EMPTY_BYTE_STRING,g.snapshotVersion)),jS(a,u);const h=new jc(g.target,u,m,g.sequenceNumber);F1(a,h)}),a.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(r){_t(Xd,"Failed to raise snapshot:",r),await l0(t,r)}}async function l0(t,e,n){if(!Ph(e))throw e;t.Ia.add(1),await Bm(t),t.Aa.set("Offline"),n||(n=()=>yS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{_t(Xd,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await ex(t)})}function NS(t,e){return e().catch(n=>l0(t,n,e))}async function tx(t){const e=vn(t),n=Dc(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:_1;for(;z8(e);)try{const i=await b8(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,F8(e,i)}catch(i){await l0(e,i)}_S(e)&&SS(e)}function z8(t){return lu(t)&&t.Pa.length<10}function F8(t,e){t.Pa.push(e);const n=Dc(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function _S(t){return lu(t)&&!Dc(t).M_()&&t.Pa.length>0}function SS(t){Dc(t).start()}async function $8(t){Dc(t).na()}async function U8(t){const e=Dc(t);for(const n of t.Pa)e.X_(n.mutations)}async function B8(t,e,n){const r=t.Pa.shift(),i=I1.from(r,e,n);await NS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await tx(t)}async function W8(t,e){e&&Dc(t).Z_&&await async function(r,i){if(function(l){return CR(l)&&l!==Fe.ABORTED}(i.code)){const a=r.Pa.shift();Dc(r).N_(),await NS(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await tx(r)}}(t,e),_S(t)&&SS(t)}async function i4(t,e){const n=vn(t);n.asyncQueue.verifyOperationInProgress(),_t(Xd,"RemoteStore received new credentials");const r=lu(n);n.Ia.add(3),await Bm(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await ex(n)}async function H8(t,e){const n=vn(t);e?(n.Ia.delete(2),await ex(n)):e||(n.Ia.add(2),await Bm(n),n.Aa.set("Unknown"))}function Rh(t){return t.Va||(t.Va=function(n,r,i){const a=vn(n);return a.ia(),new T8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:M8.bind(null,t),e_:D8.bind(null,t),n_:O8.bind(null,t),J_:V8.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),U1(t)?$1(t):t.Aa.set("Unknown")):(await t.Va.stop(),kS(t))})),t.Va}function Dc(t){return t.ma||(t.ma=function(n,r,i){const a=vn(n);return a.ia(),new A8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:$8.bind(null,t),n_:W8.bind(null,t),ea:U8.bind(null,t),ta:B8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await tx(t)):(await t.ma.stop(),t.Pa.length>0&&(_t(Xd,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,d=new B1(e,n,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new wt(Fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function W1(t,e){if(Cl("AsyncQueue",`${e}: ${t}`),Ph(t))return new wt(Fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{static emptySet(e){return new sh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Gt.comparator(n.key,r.key):(n,r)=>Gt.comparator(n.key,r.key),this.keyedMap=Pf(),this.sortedSet=new Vr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.fa=new Vr(Gt.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):dn(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class gh{constructor(e,n,r,i,a,l,d,u,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach(d=>{l.push({type:0,doc:d})}),new gh(e,n,sh.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&K0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class G8{constructor(){this.queries=o4(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=vn(n),a=i.queries;i.queries=o4(),a.forEach((l,d)=>{for(const u of d.wa)u.onError(r)})})(this,new wt(Fe.ABORTED,"Firestore shutting down"))}}function o4(){return new ou(t=>W3(t),K0)}async function H1(t,e){const n=vn(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new q8,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const d=W1(l,`Initialization of query '${Gu(e.query)}' failed`);return void e.onError(d)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&G1(n)}async function q1(t,e){const n=vn(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function K8(t,e){const n=vn(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const d of l.wa)d.Ca(i)&&(r=!0);l.ya=i}}r&&G1(n)}function Y8(t,e,n){const r=vn(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function G1(t){t.Da.forEach(e=>{e.next()})}var db,l4;(l4=db||(db={})).Fa="default",l4.Cache="cache";class K1{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==db.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.key=e}}class ES{constructor(e){this.key=e}}class X8{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=On(),this.mutatedKeys=On(),this.Xa=H3(e),this.eu=new sh(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new a4,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,d=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,h)=>{const y=i.get(g),w=Y0(this.query,h)?h:null,S=!!y&&this.mutatedKeys.has(y.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;y&&w?y.data.isEqual(w.data)?S!==N&&(r.track({type:3,doc:w}),_=!0):this.iu(y,w)||(r.track({type:2,doc:w}),_=!0,(u&&this.Xa(w,u)>0||m&&this.Xa(w,m)<0)&&(d=!0)):!y&&w?(r.track({type:0,doc:w}),_=!0):y&&!w&&(r.track({type:1,doc:y}),_=!0,(u||m)&&(d=!0)),_&&(w?(l=l.add(w),a=N?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:l,ru:r,Ds:d,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((g,h)=>function(w,S){const N=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dn(20277,{At:_})}};return N(w)-N(S)}(g.type,h.type)||this.Xa(g.doc,h.doc)),this.su(r),i=i!=null&&i;const d=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,m=u!==this.Ya;return this.Ya=u,l.length!==0||m?{snapshot:new gh(this.query,e.eu,a,l,e.mutatedKeys,u===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new a4,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=On(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new ES(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new CS(r))}),n}uu(e){this.Ha=e.qs,this.Za=On();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return gh.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Y1="SyncEngine";class Q8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class J8{constructor(e){this.key=e,this.lu=!1}}class Z8{constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new ou(d=>W3(d),K0),this.Tu=new Map,this.Iu=new Set,this.du=new Vr(Gt.comparator),this.Eu=new Map,this.Au=new M1,this.Ru={},this.Vu=new Map,this.mu=ph.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function e7(t,e,n=!0){const r=LS(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await TS(r,e,n,!0),i}async function t7(t,e){const n=LS(t);await TS(n,e,!0,!1)}async function TS(t,e,n,r){const i=await w8(t.localStore,Vo(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let d;return r&&(d=await n7(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&wS(t.remoteStore,i),d}async function n7(t,e,n,r,i){t.gu=(h,y,w)=>async function(N,_,D,A){let L=_.view.nu(D);L.Ds&&(L=await e4(N.localStore,_.query,!1).then(({documents:E})=>_.view.nu(E,L)));const I=A&&A.targetChanges.get(_.targetId),F=A&&A.targetMismatches.get(_.targetId)!=null,R=_.view.applyChanges(L,N.isPrimaryClient,I,F);return d4(N,_.targetId,R._u),R.snapshot}(t,h,y,w);const a=await e4(t.localStore,e,!0),l=new X8(e,a.qs),d=l.nu(a.documents),u=Um.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=l.applyChanges(d,t.isPrimaryClient,u);d4(t,n,m._u);const g=new Q8(e,n,l);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),m.snapshot}async function r7(t,e,n){const r=vn(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(l=>!K0(l,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&z1(r.remoteStore,i.targetId),ub(r,i.targetId)}).catch(Ah)):(ub(r,i.targetId),await lb(r.localStore,i.targetId,!0))}async function s7(t,e){const n=vn(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),z1(n.remoteStore,r.targetId))}async function i7(t,e,n){const r=h7(t);try{const i=await function(l,d){const u=vn(l),m=Nr.now(),g=d.reduce((w,S)=>w.add(S.key),On());let h,y;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=El(),N=On();return u.Os.getEntries(w,g).next(_=>{S=_,S.forEach((D,A)=>{A.isValidDocument()||(N=N.add(D))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(_=>{h=_;const D=[];for(const A of d){const L=jR(A,h.get(A.key).overlayedDocument);L!=null&&D.push(new Kc(A.key,L,D3(L.value.mapValue),Ea.exists(!0)))}return u.mutationQueue.addMutationBatch(w,m,D,d)}).next(_=>{y=_;const D=_.applyToLocalDocumentSet(h,N);return u.documentOverlayCache.saveOverlays(w,_.batchId,D)})}).then(()=>({batchId:y.batchId,changes:G3(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,u){let m=l.Ru[l.currentUser.toKey()];m||(m=new Vr(En)),m=m.insert(d,u),l.Ru[l.currentUser.toKey()]=m}(r,i.batchId,n),await Wm(r,i.changes),await tx(r.remoteStore)}catch(i){const a=W1(i,"Failed to persist write");n.reject(a)}}async function AS(t,e){const n=vn(t);try{const r=await y8(n.localStore,e);e.targetChanges.forEach((i,a)=>{const l=n.Eu.get(a);l&&(rr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.lu=!0:i.modifiedDocuments.size>0?rr(l.lu,14607):i.removedDocuments.size>0&&(rr(l.lu,42227),l.lu=!1))}),await Wm(n,r,e)}catch(r){await Ah(r)}}function c4(t,e,n){const r=vn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,l)=>{const d=l.view.va(e);d.snapshot&&i.push(d.snapshot)}),function(l,d){const u=vn(l);u.onlineState=d;let m=!1;u.queries.forEach((g,h)=>{for(const y of h.wa)y.va(d)&&(m=!0)}),m&&G1(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a7(t,e,n){const r=vn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let l=new Vr(Gt.comparator);l=l.insert(a,gi.newNoDocument(a,xn.min()));const d=On().add(a),u=new J0(xn.min(),new Map,new Vr(En),l,d);await AS(r,u),r.du=r.du.remove(a),r.Eu.delete(e),X1(r)}else await lb(r.localStore,e,!1).then(()=>ub(r,e,n)).catch(Ah)}async function o7(t,e){const n=vn(t),r=e.batch.batchId;try{const i=await x8(n.localStore,e);IS(n,r,null),PS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wm(n,i)}catch(i){await Ah(i)}}async function l7(t,e,n){const r=vn(t);try{const i=await function(l,d){const u=vn(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return u.mutationQueue.lookupMutationBatch(m,d).next(h=>(rr(h!==null,37113),g=h.keys(),u.mutationQueue.removeMutationBatch(m,h))).next(()=>u.mutationQueue.performConsistencyCheck(m)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(m,g,d)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>u.localDocuments.getDocuments(m,g))})}(r.localStore,e);IS(r,e,n),PS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wm(r,i)}catch(i){await Ah(i)}}function PS(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function IS(t,e,n){const r=vn(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ub(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||RS(t,r)})}function RS(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(z1(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),X1(t))}function d4(t,e,n){for(const r of n)r instanceof CS?(t.Au.addReference(r.key,e),c7(t,r)):r instanceof ES?(_t(Y1,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||RS(t,r.key)):dn(19791,{yu:r})}function c7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(_t(Y1,"New document in limbo: "+n),t.Iu.add(r),X1(t))}function X1(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Gt(br.fromString(e)),r=t.mu.next();t.Eu.set(r,new J8(n)),t.du=t.du.insert(n,r),wS(t.remoteStore,new jc(Vo(G0(n.path)),r,"TargetPurposeLimboResolution",W0.ue))}}async function Wm(t,e,n){const r=vn(t),i=[],a=[],l=[];r.Pu.isEmpty()||(r.Pu.forEach((d,u)=>{l.push(r.gu(u,e,n).then(m=>{var g;if((m||n)&&r.isPrimaryClient){const h=m?!m.fromCache:(g=n==null?void 0:n.targetChanges.get(u.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(m){i.push(m);const h=O1.Es(u.targetId,m);a.push(h)}}))}),await Promise.all(l),r.hu.J_(i),await async function(u,m){const g=vn(u);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>qe.forEach(m,y=>qe.forEach(y.Is,w=>g.persistence.referenceDelegate.addReference(h,y.targetId,w)).next(()=>qe.forEach(y.ds,w=>g.persistence.referenceDelegate.removeReference(h,y.targetId,w)))))}catch(h){if(!Ph(h))throw h;_t(V1,"Failed to update sequence numbers: "+h)}for(const h of m){const y=h.targetId;if(!h.fromCache){const w=g.Fs.get(y),S=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(y,N)}}}(r.localStore,a))}async function d7(t,e){const n=vn(t);if(!n.currentUser.isEqual(e)){_t(Y1,"User change. New user:",e.toKey());const r=await xS(n.localStore,e);n.currentUser=e,function(a,l){a.Vu.forEach(d=>{d.forEach(u=>{u.reject(new wt(Fe.CANCELLED,l))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wm(n,r.Bs)}}function u7(t,e){const n=vn(t),r=n.Eu.get(e);if(r&&r.lu)return On().add(r.key);{let i=On();const a=n.Tu.get(e);if(!a)return i;for(const l of a){const d=n.Pu.get(l);i=i.unionWith(d.view.tu)}return i}}function LS(t){const e=vn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a7.bind(null,e),e.hu.J_=K8.bind(null,e.eventManager),e.hu.pu=Y8.bind(null,e.eventManager),e}function h7(t){const e=vn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l7.bind(null,e),e}class c0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Z0(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return g8(this.persistence,new f8,e.initialUser,this.serializer)}Du(e){return new gS(D1.Vi,this.serializer)}bu(e){return new k8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}c0.provider={build:()=>new c0};class f7 extends c0{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){rr(this.persistence.referenceDelegate instanceof o0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new JR(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Bi.withCacheSize(this.cacheSizeBytes):Bi.DEFAULT;return new gS(r=>o0.Vi(r,n),this.serializer)}}class hb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>c4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d7.bind(null,this.syncEngine),await H8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new G8}()}createDatastore(e){const n=Z0(e.databaseInfo.databaseId),r=function(a){return new E8(a)}(e.databaseInfo);return function(a,l,d,u){return new I8(a,l,d,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,l,d){return new L8(r,i,a,l,d)}(this.localStore,this.datastore,e.asyncQueue,n=>c4(this.syncEngine,n,0),function(){return r4.C()?new r4:new N8}())}createSyncEngine(e,n){return function(i,a,l,d,u,m,g){const h=new Z8(i,a,l,d,u,m);return g&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=vn(i);_t(Xd,"RemoteStore shutting down."),a.Ia.add(5),await Bm(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hb.provider={build:()=>new hb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Cl("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="FirestoreClient";class m7{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ui.UNAUTHENTICATED,this.clientId=N1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{_t(Oc,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(_t(Oc,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=W1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yy(t,e){t.asyncQueue.verifyOperationInProgress(),_t(Oc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Yd("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{_t("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Yd("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function u4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await p7(t);_t(Oc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>i4(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>i4(e.remoteStore,i)),t._onlineComponents=e}async function p7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_t(Oc,"Using user provided OfflineComponentProvider");try{await Yy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Fe.FAILED_PRECONDITION||i.code===Fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Yd("Error using user provided cache. Falling back to memory cache: "+n),await Yy(t,new c0)}}else _t(Oc,"Using default OfflineComponentProvider"),await Yy(t,new f7(void 0));return t._offlineComponents}async function MS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_t(Oc,"Using user provided OnlineComponentProvider"),await u4(t,t._uninitializedComponentsProvider._online)):(_t(Oc,"Using default OnlineComponentProvider"),await u4(t,new hb))),t._onlineComponents}function g7(t){return MS(t).then(e=>e.syncEngine)}async function d0(t){const e=await MS(t),n=e.eventManager;return n.onListen=e7.bind(null,e.syncEngine),n.onUnlisten=r7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s7.bind(null,e.syncEngine),n}function x7(t,e,n={}){const r=new wl;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,d,u,m){const g=new Q1({next:y=>{g.Ou(),l.enqueueAndForget(()=>q1(a,h));const w=y.docs.has(d);!w&&y.fromCache?m.reject(new wt(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&u&&u.source==="server"?m.reject(new wt(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(y)},error:y=>m.reject(y)}),h=new K1(G0(d.path),g,{includeMetadataChanges:!0,ka:!0});return H1(a,h)}(await d0(t),t.asyncQueue,e,n,r)),r.promise}function y7(t,e,n={}){const r=new wl;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,d,u,m){const g=new Q1({next:y=>{g.Ou(),l.enqueueAndForget(()=>q1(a,h)),y.fromCache&&u.source==="server"?m.reject(new wt(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(y)},error:y=>m.reject(y)}),h=new K1(d,g,{includeMetadataChanges:!0,ka:!0});return H1(a,h)}(await d0(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="firestore.googleapis.com",f4=!0;class m4{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new wt(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v7,this.ssl=f4}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:f4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pS)throw new wt(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new wt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new wt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new wt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class J1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new wt(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new wt(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new E9;switch(r.type){case"firstParty":return new P9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new wt(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=h4.get(n);r&&(_t("ComponentProvider","Removing Datastore"),h4.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zl(this.firestore,e,this._query)}}class Yr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yr(this.firestore,e,this._key)}toJSON(){return{type:Yr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fm(n,Yr._jsonSchema))return new Yr(e,r||null,new Gt(br.fromString(n.referencePath)))}}Yr._jsonSchemaVersion="firestore/documentReference/1.0",Yr._jsonSchema={type:vs("string",Yr._jsonSchemaVersion),referencePath:vs("string")};class Tc extends zl{constructor(e,n,r){super(e,n,G0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yr(this.firestore,null,new Gt(e))}withConverter(e){return new Tc(this.firestore,e,this._path)}}function pt(t,e,...n){if(t=$n(t),_3("collection","path",e),t instanceof J1){const r=br.fromString(e,...n);return Ck(r),new Tc(t,null,r)}{if(!(t instanceof Yr||t instanceof Tc))throw new wt(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(br.fromString(e,...n));return Ck(r),new Tc(t.firestore,null,r)}}function We(t,e,...n){if(t=$n(t),arguments.length===1&&(e=N1.newId()),_3("doc","path",e),t instanceof J1){const r=br.fromString(e,...n);return Sk(r),new Yr(t,null,new Gt(r))}{if(!(t instanceof Yr||t instanceof Tc))throw new wt(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(br.fromString(e,...n));return Sk(r),new Yr(t.firestore,t instanceof Tc?t.converter:null,new Gt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="AsyncQueue";class g4{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new vS(this,"async_queue_retry"),this.oc=()=>{const r=Ky();r&&_t(p4,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Ky();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ky();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new wl;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ph(e))throw e;_t(p4,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Cl("INTERNAL UNHANDLED ERROR: ",x4(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=B1.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&dn(47125,{hc:x4(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function x4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Tl extends J1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new g4,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g4(e),this._firestoreClient=void 0,await e}}}function b7(t,e,n){n||(n=n0);const r=zm(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Kd(a,e))return i;throw new wt(Fe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new wt(Fe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pS)throw new wt(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Vl(e.host)&&U0(e.host),r.initialize({options:e,instanceIdentifier:n})}function nx(t){if(t._terminated)throw new wt(Fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||w7(t),t._firestoreClient}function w7(t){var e,n,r;const i=t._freezeSettings(),a=function(d,u,m,g){return new K9(d,u,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,DS(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new m7(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(d){const u=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(ri.fromBase64String(e))}catch(n){throw new wt(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ja(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ja._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fm(e,ja._jsonSchema))return ja.fromBase64String(e.bytes)}}ja._jsonSchemaVersion="firestore/bytes/1.0",ja._jsonSchema={type:vs("string",ja._jsonSchemaVersion),bytes:vs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new wt(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ti(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new wt(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new wt(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return En(this._lat,e._lat)||En(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fo._jsonSchemaVersion}}static fromJSON(e){if(Fm(e,Fo._jsonSchema))return new Fo(e.latitude,e.longitude)}}Fo._jsonSchemaVersion="firestore/geoPoint/1.0",Fo._jsonSchema={type:vs("string",Fo._jsonSchemaVersion),latitude:vs("number"),longitude:vs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$o._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fm(e,$o._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $o(e.vectorValues);throw new wt(Fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$o._jsonSchemaVersion="firestore/vectorValue/1.0",$o._jsonSchema={type:vs("string",$o._jsonSchemaVersion),vectorValues:vs("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=/^__.*__$/;class k7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kc(e,this.data,this.fieldMask,n,this.fieldTransforms):new $m(e,this.data,n,this.fieldTransforms)}}class OS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dn(40011,{Ec:t})}}class Z1{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Z1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return u0(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(VS(this.Ec)&&j7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class N7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Z0(e)}Dc(e,n,r,i=!1){return new Z1({Ec:e,methodName:n,bc:r,path:ti.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sx(t){const e=t._freezeSettings(),n=Z0(t._databaseId);return new N7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zS(t,e,n,r,i,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);n2("Data must be an object, but it was:",l,r);const d=FS(r,l);let u,m;if(a.merge)u=new ia(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const h of a.mergeFields){const y=fb(e,h,n);if(!l.contains(y))throw new wt(Fe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);US(g,y)||g.push(y)}u=new ia(g),m=l.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,m=l.fieldTransforms;return new k7(new Hi(d),u,m)}class ix extends Hm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ix}}class e2 extends Hm{_toFieldTransform(e){return new tS(e.path,new fm)}isEqual(e){return e instanceof e2}}class t2 extends Hm{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new gm(e.serializer,X3(e.serializer,this.Cc));return new tS(e.path,n)}isEqual(e){return e instanceof t2&&this.Cc===e.Cc}}function _7(t,e,n,r){const i=t.Dc(1,e,n);n2("Data must be an object, but it was:",i,r);const a=[],l=Hi.empty();Gc(r,(u,m)=>{const g=r2(e,u,n);m=$n(m);const h=i.gc(g);if(m instanceof ix)a.push(g);else{const y=qm(m,h);y!=null&&(a.push(g),l.set(g,y))}});const d=new ia(a);return new OS(l,d,i.fieldTransforms)}function S7(t,e,n,r,i,a){const l=t.Dc(1,e,n),d=[fb(e,r,n)],u=[i];if(a.length%2!=0)throw new wt(Fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)d.push(fb(e,a[y])),u.push(a[y+1]);const m=[],g=Hi.empty();for(let y=d.length-1;y>=0;--y)if(!US(m,d[y])){const w=d[y];let S=u[y];S=$n(S);const N=l.gc(w);if(S instanceof ix)m.push(w);else{const _=qm(S,N);_!=null&&(m.push(w),g.set(w,_))}}const h=new ia(m);return new OS(g,h,l.fieldTransforms)}function C7(t,e,n,r=!1){return qm(n,t.Dc(r?4:3,e))}function qm(t,e){if($S(t=$n(t)))return n2("Unsupported field value:",e,t),FS(t,e);if(t instanceof Hm)return function(r,i){if(!VS(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let l=0;for(const d of r){let u=qm(d,i.yc(l));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),l++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=$n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return X3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Nr.fromDate(r);return{timestampValue:a0(i.serializer,a)}}if(r instanceof Nr){const a=new Nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:a0(i.serializer,a)}}if(r instanceof Fo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ja)return{bytesValue:oS(i.serializer,r._byteString)};if(r instanceof Yr){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:L1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $o)return function(l,d){return{mapValue:{fields:{[L3]:{stringValue:M3},[r0]:{arrayValue:{values:l.toArray().map(m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return A1(d.serializer,m)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${B0(r)}`)}(t,e)}function FS(t,e){const n={};return E3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(t,(r,i)=>{const a=qm(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function $S(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nr||t instanceof Fo||t instanceof ja||t instanceof Yr||t instanceof Hm||t instanceof $o)}function n2(t,e,n){if(!$S(n)||!S3(n)){const r=B0(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function fb(t,e,n){if((e=$n(e))instanceof rx)return e._internalPath;if(typeof e=="string")return r2(t,e);throw u0("Field path arguments must be of type string or ",t,!1,void 0,n)}const E7=new RegExp("[~\\*/\\[\\]]");function r2(t,e,n){if(e.search(E7)>=0)throw u0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rx(...e.split("."))._internalPath}catch{throw u0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function u0(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(a||l)&&(u+=" (found",a&&(u+=` in field ${r}`),l&&(u+=` in document ${i}`),u+=")"),new wt(Fe.INVALID_ARGUMENT,d+t+u)}function US(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ax("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class T7 extends BS{data(){return super.data()}}function ax(t,e){return typeof e=="string"?r2(t,e):e instanceof rx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new wt(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s2{}class i2 extends s2{}function Ot(t,e,...n){let r=[];e instanceof s2&&r.push(e),r=r.concat(n),function(a){const l=a.filter(u=>u instanceof a2).length,d=a.filter(u=>u instanceof ox).length;if(l>1||l>0&&d>0)throw new wt(Fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ox extends i2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ox(e,n,r)}_apply(e){const n=this._parse(e);return HS(e._query,n),new zl(e.firestore,e.converter,rb(e._query,n))}_parse(e){const n=sx(e.firestore);return function(a,l,d,u,m,g,h){let y;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new wt(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){b4(h,g);const S=[];for(const N of h)S.push(v4(u,a,N));y={arrayValue:{values:S}}}else y=v4(u,a,h)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||b4(h,g),y=C7(d,l,h,g==="in"||g==="not-in");return ys.create(m,g,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qt(t,e,n){const r=e,i=ax("where",t);return ox._create(i,r,n)}class a2 extends s2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new a2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:lo.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let l=i;const d=a.getFlattenedFilters();for(const u of d)HS(l,u),l=rb(l,u)}(e._query,n),new zl(e.firestore,e.converter,rb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class o2 extends i2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new o2(e,n)}_apply(e){const n=function(i,a,l){if(i.startAt!==null)throw new wt(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new wt(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hm(a,l)}(e._query,this._field,this._direction);return new zl(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new Ih(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ni(t,e="asc"){const n=e,r=ax("orderBy",t);return o2._create(r,n)}class l2 extends i2{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new l2(e,n,r)}_apply(e){return new zl(e.firestore,e.converter,i0(e._query,this._limit,this._limitType))}}function jl(t){return O9("limit",t),l2._create("limit",t,"F")}function v4(t,e,n){if(typeof(n=$n(n))=="string"){if(n==="")throw new wt(Fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B3(e)&&n.indexOf("/")!==-1)throw new wt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(br.fromString(n));if(!Gt.isDocumentKey(r))throw new wt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mk(t,new Gt(r))}if(n instanceof Yr)return Mk(t,n._key);throw new wt(Fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${B0(n)}.`)}function b4(t,e){if(!Array.isArray(t)||t.length===0)throw new wt(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HS(t,e){const n=function(i,a){for(const l of i)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new wt(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new wt(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class A7{convertValue(e,n="none"){switch(Mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ss(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw dn(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gc(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[r0].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>ss(l.doubleValue));return new $o(a)}convertGeoPoint(e){return new Fo(ss(e.latitude),ss(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=q0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cm(e));default:return null}}convertTimestamp(e){const n=Rc(e);return new Nr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=br.fromString(e);rr(fS(r),9688,{name:e});const i=new dm(r.get(1),r.get(3)),a=new Gt(r.popFirst(5));return i.isEqual(n)||Cl(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Rf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fd extends BS{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ig(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ax("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new wt(Fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fd._jsonSchema={type:vs("string",Fd._jsonSchemaVersion),bundleSource:vs("string","DocumentSnapshot"),bundleName:vs("string"),bundle:vs("string")};class Ig extends Fd{data(e={}){return super.data(e)}}class $d{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Rf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ig(this._firestore,this._userDataWriter,r.key,r,new Rf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new wt(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(d=>{const u=new Ig(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Rf(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const u=new Ig(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Rf(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,g=-1;return d.type!==0&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),g=l.indexOf(d.doc.key)),{type:P7(d.type),doc:u,oldIndex:m,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new wt(Fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$d._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=N1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dn(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t){t=oa(t,Yr);const e=oa(t.firestore,Tl);return x7(nx(e),t._key).then(n=>GS(e,t,n))}$d._jsonSchemaVersion="firestore/querySnapshot/1.0",$d._jsonSchema={type:vs("string",$d._jsonSchemaVersion),bundleSource:vs("string","QuerySnapshot"),bundleName:vs("string"),bundle:vs("string")};class c2 extends A7{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yr(this.firestore,null,n)}}function rn(t){t=oa(t,zl);const e=oa(t.firestore,Tl),n=nx(e),r=new c2(e);return WS(t._query),y7(n,t._query).then(i=>new $d(e,r,t,i))}function Cn(t,e,n){t=oa(t,Yr);const r=oa(t.firestore,Tl),i=qS(t.converter,e,n);return lx(r,[zS(sx(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ea.none())])}function jn(t,e,n,...r){t=oa(t,Yr);const i=oa(t.firestore,Tl),a=sx(i);let l;return l=typeof(e=$n(e))=="string"||e instanceof rx?S7(a,"updateDoc",t._key,e,n,r):_7(a,"updateDoc",t._key,e),lx(i,[l.toMutation(t._key,Ea.exists(!0))])}function co(t){return lx(oa(t.firestore,Tl),[new P1(t._key,Ea.none())])}function Yc(t,e){const n=oa(t.firestore,Tl),r=We(t),i=qS(t.converter,e);return lx(n,[zS(sx(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ea.exists(!1))]).then(()=>r)}function _n(t,...e){var n,r,i;t=$n(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||y4(e[l])||(a=e[l++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(y4(e[l])){const h=e[l];e[l]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[l+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[l+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,m,g;if(t instanceof Yr)m=oa(t.firestore,Tl),g=G0(t._key.path),u={next:h=>{e[l]&&e[l](GS(m,t,h))},error:e[l+1],complete:e[l+2]};else{const h=oa(t,zl);m=oa(h.firestore,Tl),g=h._query;const y=new c2(m);u={next:w=>{e[l]&&e[l](new $d(m,y,h,w))},error:e[l+1],complete:e[l+2]},WS(t._query)}return function(y,w,S,N){const _=new Q1(N),D=new K1(w,_,S);return y.asyncQueue.enqueueAndForget(async()=>H1(await d0(y),D)),()=>{_.Ou(),y.asyncQueue.enqueueAndForget(async()=>q1(await d0(y),D))}}(nx(m),g,d,u)}function lx(t,e){return function(r,i){const a=new wl;return r.asyncQueue.enqueueAndForget(async()=>i7(await g7(r),i,a)),a.promise}(nx(t),e)}function GS(t,e,n){const r=n.docs.get(e._key),i=new c2(t);return new Fd(t,i,e._key,r,new Rf(n.hasPendingWrites,n.fromCache),e.converter)}function Qd(){return new e2("serverTimestamp")}function kc(t){return new t2("increment",t)}(function(e,n=!0){(function(i){Th=i})(au),Ac(new _l("firestore",(r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new Tl(new T9(r.getProvider("auth-internal")),new I9(l,r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new wt(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dm(m.options.projectId,g)}(l,i),l);return a=Object.assign({useFetchStreams:n},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Ca(wk,jk,e),Ca(wk,jk,"esm2017")})();var I7="firebase",R7="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ca(I7,R7,"app");var mb=function(t,e){return mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},mb(t,e)};function L7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ds=function(){return Ds=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ds.apply(this,arguments)};function d2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function cu(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function d(g){try{m(r.next(g))}catch(h){l(h)}}function u(g){try{m(r.throw(g))}catch(h){l(h)}}function m(g){g.done?a(g.value):i(g.value).then(d,u)}m((r=r.apply(t,e||[])).next())})}function KS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M7=KS,YS=new Om("auth","Firebase",KS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new b1("@firebase/auth");function D7(t,...e){h0.logLevel<=Dn.WARN&&h0.warn(`Auth (${au}): ${t}`,...e)}function Rg(t,...e){h0.logLevel<=Dn.ERROR&&h0.error(`Auth (${au}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t,...e){throw h2(t,...e)}function ao(t,...e){return h2(t,...e)}function u2(t,e,n){const r=Object.assign(Object.assign({},M7()),{[e]:n});return new Om("auth","Firebase",r).create(e,{appName:t.name})}function oo(t){return u2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function O7(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Aa(t,"argument-error"),u2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function h2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YS.create(t,...e)}function en(t,e,...n){if(!t)throw h2(e,...n)}function vl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rg(e),new Error(e)}function Al(t,e){t||vl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XS(){return w4()==="http:"||w4()==="https:"}function w4(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XS()||iI()||"connection"in navigator)?navigator.onLine:!0}function z7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Al(n>e,"Short delay should be less than long delay!"),this.isMobile=nI()||aI()}get(){return V7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e){Al(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U7=new Gm(3e4,6e4);function fo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pa(t,e,n,r,i={}){return JS(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=Vm(Object.assign({key:t.config.apiKey},l)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:u},a);return sI()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Vl(t.emulatorConfig.host)&&(m.credentials="include"),QS.fetch()(await ZS(t,t.config.apiHost,n,d),m)})}async function JS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},F7),e);try{const i=new W7(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw sg(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[u,m]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sg(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw sg(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw sg(t,"user-disabled",l);const g=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw u2(t,g,m);Aa(t,g)}}catch(i){if(i instanceof ho)throw i;Aa(t,"network-request-failed",{message:String(i)})}}async function Lh(t,e,n,r,i={}){const a=await Pa(t,e,n,r,i);return"mfaPendingCredential"in a&&Aa(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function ZS(t,e,n,r){const i=`${e}${n}?${r}`,a=t,l=a.config.emulator?f2(t.config,i):`${t.config.apiScheme}://${i}`;return $7.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function B7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ao(this.auth,"network-request-failed")),U7.get())})}}function sg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ao(t,e,r);return i.customData._tokenResponse=n,i}function j4(t){return t!==void 0&&t.enterprise!==void 0}class H7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q7(t,e){return Pa(t,"GET","/v2/recaptchaConfig",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G7(t,e){return Pa(t,"POST","/v1/accounts:delete",e)}async function m0(t,e){return Pa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K7(t,e=!1){const n=$n(t),r=await n.getIdToken(e),i=m2(r);en(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Uf(Xy(i.auth_time)),issuedAtTime:Uf(Xy(i.iat)),expirationTime:Uf(Xy(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Xy(t){return Number(t)*1e3}function m2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rg("JWT malformed, contained fewer than 3 sections"),null;try{const i=o3(n);return i?JSON.parse(i):(Rg("Failed to decode base64 JWT payload"),null)}catch(i){return Rg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function k4(t){const e=m2(t);return en(e,"internal-error"),en(typeof e.exp<"u","internal-error"),en(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ho&&Y7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Y7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uf(this.lastLoginAt),this.creationTime=Uf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Jd(t,m0(n,{idToken:r}));en(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?eC(a.providerUserInfo):[],d=J7(t.providerData,l),u=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),g=u?m:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new pb(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,h)}async function Q7(t){const e=$n(t);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eC(t){return t.map(e=>{var{providerId:n}=e,r=d2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z7(t,e){const n=await JS(t,{},async()=>{const r=Vm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=await ZS(t,i,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:d,body:r};return t.emulatorConfig&&Vl(t.emulatorConfig.host)&&(u.credentials="include"),QS.fetch()(l,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eL(t,e){return Pa(t,"POST","/v2/accounts:revokeToken",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){en(e.idToken,"internal-error"),en(typeof e.idToken<"u","internal-error"),en(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){en(e.length!==0,"internal-error");const n=k4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(en(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Z7(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new ih;return r&&(en(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(en(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(en(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ih,this.toJSON())}_performRefresh(){return vl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e){en(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ro{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=d2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pb(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Jd(this,this.stsTokenManager.getToken(this.auth,e));return en(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K7(this,e)}reload(){return Q7(this)}_assign(e){this!==e&&(en(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ro(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await Jd(this,G7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,l,d,u,m,g;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,S=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(d=n.tenantId)!==null&&d!==void 0?d:void 0,_=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,D=(m=n.createdAt)!==null&&m!==void 0?m:void 0,A=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:L,emailVerified:I,isAnonymous:F,providerData:R,stsTokenManager:E}=n;en(L&&E,e,"internal-error");const M=ih.fromJSON(this.name,E);en(typeof L=="string",e,"internal-error"),fc(h,e.name),fc(y,e.name),en(typeof I=="boolean",e,"internal-error"),en(typeof F=="boolean",e,"internal-error"),fc(w,e.name),fc(S,e.name),fc(N,e.name),fc(_,e.name),fc(D,e.name),fc(A,e.name);const O=new ro({uid:L,auth:e,email:y,emailVerified:I,displayName:h,isAnonymous:F,photoURL:S,phoneNumber:w,tenantId:N,stsTokenManager:M,createdAt:D,lastLoginAt:A});return R&&Array.isArray(R)&&(O.providerData=R.map(j=>Object.assign({},j))),_&&(O._redirectEventId=_),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new ih;i.updateFromServerResponse(n);const a=new ro({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];en(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?eC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new ih;d.updateFromIdToken(r);const u=new ro({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new pb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,m),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new Map;function bl(t){Al(t instanceof Function,"Expected a class definition");let e=N4.get(t);return e?(Al(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,N4.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tC.type="NONE";const _4=tC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e,n){return`firebase:${t}:${e}:${n}`}class ah{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Lg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Lg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await m0(this.auth,{idToken:e}).catch(()=>{});return n?ro._fromGetAccountInfoResponse(this.auth,n,e):null}return ro._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ah(bl(_4),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||bl(_4);const l=Lg(r,e.config.apiKey,e.name);let d=null;for(const m of n)try{const g=await m._get(l);if(g){let h;if(typeof g=="string"){const y=await m0(e,{idToken:g}).catch(()=>{});if(!y)break;h=await ro._fromGetAccountInfoResponse(e,y,g)}else h=ro._fromJSON(e,g);m!==a&&(d=h),a=m;break}}catch{}const u=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new ah(a,e,r):(a=u[0],d&&await a._set(l,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new ah(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oC(e))return"Blackberry";if(lC(e))return"Webos";if(rC(e))return"Safari";if((e.includes("chrome/")||sC(e))&&!e.includes("edge/"))return"Chrome";if(aC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nC(t=yi()){return/firefox\//i.test(t)}function rC(t=yi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sC(t=yi()){return/crios\//i.test(t)}function iC(t=yi()){return/iemobile/i.test(t)}function aC(t=yi()){return/android/i.test(t)}function oC(t=yi()){return/blackberry/i.test(t)}function lC(t=yi()){return/webos/i.test(t)}function p2(t=yi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tL(t=yi()){var e;return p2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nL(){return oI()&&document.documentMode===10}function cC(t=yi()){return p2(t)||aC(t)||lC(t)||oC(t)||/windows phone/i.test(t)||iC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t,e=[]){let n;switch(t){case"Browser":n=S4(yi());break;case"Worker":n=`${S4(yi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${au}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,d)=>{try{const u=e(a);l(u)}catch(u){d(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e={}){return Pa(t,"GET","/v2/passwordPolicy",fo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=6;class aL{constructor(e){var n,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:iL,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,l,d;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(d=u.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C4(this),this.idTokenSubscription=new C4(this),this.beforeStateQueue=new rL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bl(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await ah.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await m0(this,{idToken:e}),r=await ro._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ei(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===d)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return en(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(oo(this));const n=e?$n(e):null;return n&&en(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&en(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sL(this),n=new aL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Om("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bl(e)||this._popupRedirectResolver;en(n,this,"argument-error"),this.redirectPersistenceManager=await ah.create(this,[bl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(en(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{l=!0,u()}}else{const u=e.addObserver(n);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&D7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ko(t){return $n(t)}class C4{constructor(e){this.auth=e,this.observer=null,this.addObserver=pI(n=>this.observer=n)}get next(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lL(t){cx=t}function uC(t){return cx.loadJS(t)}function cL(){return cx.recaptchaEnterpriseScript}function dL(){return cx.gapiScript}function uL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hL{constructor(){this.enterprise=new fL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mL="recaptcha-enterprise",hC="NO_RECAPTCHA";class pL{constructor(e){this.type=mL,this.auth=Ko(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,d)=>{q7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new H7(u);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(u=>{d(u)})})}function i(a,l,d){const u=window.grecaptcha;j4(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(hC)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hL().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(d=>{if(!n&&j4(window.grecaptcha))i(d,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=cL();u.length!==0&&(u+=d),uC(u).then(()=>{i(d,a,l)}).catch(m=>{l(m)})}}).catch(d=>{l(d)})})}}async function E4(t,e,n,r=!1,i=!1){const a=new pL(t);let l;if(i)l=hC;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const u=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const u=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function p0(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await E4(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await E4(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e){const n=zm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Kd(a,e??{}))return i;Aa(i,"already-initialized")}return n.initialize({options:e})}function xL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yL(t,e,n){const r=Ko(t);en(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=fC(e),{host:l,port:d}=vL(e),u=d===null?"":`:${d}`,m={url:`${a}//${l}${u}/`},g=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){en(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),en(Kd(m,r.config.emulator)&&Kd(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Vl(l)?(U0(`${a}//${l}${u}`),v1("Auth",!0)):bL()}function fC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vL(t){const e=fC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:T4(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:T4(l)}}}function T4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vl("not implemented")}_getIdTokenResponse(e){return vl("not implemented")}_linkToIdToken(e,n){return vl("not implemented")}_getReauthenticationResolver(e){return vl("not implemented")}}async function wL(t,e){return Pa(t,"POST","/v1/accounts:update",e)}async function jL(t,e){return Pa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e){return Lh(t,"POST","/v1/accounts:signInWithPassword",fo(t,e))}async function NL(t,e){return Pa(t,"POST","/v1/accounts:sendOobCode",fo(t,e))}async function _L(t,e){return NL(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e){return Lh(t,"POST","/v1/accounts:signInWithEmailLink",fo(t,e))}async function CL(t,e){return Lh(t,"POST","/v1/accounts:signInWithEmailLink",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym extends g2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ym(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ym(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p0(e,n,"signInWithPassword",kL);case"emailLink":return SL(e,{email:this._email,oobCode:this._password});default:Aa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p0(e,r,"signUpPassword",jL);case"emailLink":return CL(e,{idToken:n,email:this._email,oobCode:this._password});default:Aa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(t,e){return Lh(t,"POST","/v1/accounts:signInWithIdp",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="http://localhost";class Pl extends g2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Pl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Aa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=d2(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Pl(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return oh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oh(e,n)}buildRequest(){const e={requestUri:EL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vm(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AL(t){const e=Ef(Tf(t)).link,n=e?Ef(Tf(e)).deep_link_id:null,r=Ef(Tf(t)).deep_link_id;return(r?Ef(Tf(r)).link:null)||r||n||e||t}class x2{constructor(e){var n,r,i,a,l,d;const u=Ef(Tf(e)),m=(n=u.apiKey)!==null&&n!==void 0?n:null,g=(r=u.oobCode)!==null&&r!==void 0?r:null,h=TL((i=u.mode)!==null&&i!==void 0?i:null);en(m&&g&&h,"argument-error"),this.apiKey=m,this.operation=h,this.code=g,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=u.lang)!==null&&l!==void 0?l:null,this.tenantId=(d=u.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=AL(e);try{return new x2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.providerId=Xc.PROVIDER_ID}static credential(e,n){return ym._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=x2.parseLink(n);return en(r,"argument-error"),ym._fromEmailAndCode(e,r.code,r.tenantId)}}Xc.PROVIDER_ID="password";Xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends y2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bf extends Mh{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return en("providerId"in n&&"signInMethod"in n,"argument-error"),Pl._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return en(e.idToken||e.accessToken,"argument-error"),Pl._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Bf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Bf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:l,providerId:d}=e;if(!r&&!i&&!n&&!a||!d)return null;try{return new Bf(d)._credential({idToken:n,accessToken:r,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Mh{constructor(){super("facebook.com")}static credential(e){return Pl._fromParams({providerId:gc.PROVIDER_ID,signInMethod:gc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gc.credentialFromTaggedObject(e)}static credentialFromError(e){return gc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gc.credential(e.oauthAccessToken)}catch{return null}}}gc.FACEBOOK_SIGN_IN_METHOD="facebook.com";gc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Mh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Pl._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xl.credential(n,r)}catch{return null}}}xl.GOOGLE_SIGN_IN_METHOD="google.com";xl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends Mh{constructor(){super("github.com")}static credential(e){return Pl._fromParams({providerId:xc.PROVIDER_ID,signInMethod:xc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xc.credentialFromTaggedObject(e)}static credentialFromError(e){return xc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xc.credential(e.oauthAccessToken)}catch{return null}}}xc.GITHUB_SIGN_IN_METHOD="github.com";xc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Mh{constructor(){super("twitter.com")}static credential(e,n){return Pl._fromParams({providerId:yc.PROVIDER_ID,signInMethod:yc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yc.credentialFromTaggedObject(e)}static credentialFromError(e){return yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yc.credential(n,r)}catch{return null}}}yc.TWITTER_SIGN_IN_METHOD="twitter.com";yc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){return Lh(t,"POST","/v1/accounts:signUp",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ro._fromIdTokenResponse(e,r,i),l=A4(r);return new Vc({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=A4(r);return new Vc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function A4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends ho{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,g0.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new g0(e,n,r,i)}}function mC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?g0._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function pC(t,e,n=!1){const r=await Jd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vc._forOperation(t,"link",r)}async function RL(t,e,n){await xm(e);const r=IL(e.providerData);en(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(t,e,n=!1){const{auth:r}=t;if(ei(r.app))return Promise.reject(oo(r));const i="reauthenticate";try{const a=await Jd(t,mC(r,i,e,t),n);en(a.idToken,r,"internal-error");const l=m2(a.idToken);en(l,r,"internal-error");const{sub:d}=l;return en(t.uid===d,r,"user-mismatch"),Vc._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Aa(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e,n=!1){if(ei(t.app))return Promise.reject(oo(t));const r="signIn",i=await mC(t,r,e),a=await Vc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function LL(t,e){return xC(Ko(t),e)}async function ML(t,e){const n=$n(t);return await RL(!1,n,e.providerId),pC(n,e)}async function DL(t,e){return gC($n(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){return Lh(t,"POST","/v1/accounts:signInWithCustomToken",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e){if(ei(t.app))return Promise.reject(oo(t));const n=Ko(t),r=await OL(n,{token:e,returnSecureToken:!0}),i=await Vc._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(t){const e=Ko(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zL(t,e,n){const r=Ko(t);await p0(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_L)}async function FL(t,e,n){if(ei(t.app))return Promise.reject(oo(t));const r=Ko(t),l=await p0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&yC(t),u}),d=await Vc._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(d.user),d}function $L(t,e,n){return ei(t.app)?Promise.reject(oo(t)):LL($n(t),Xc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e){return Pa(t,"POST","/v1/accounts:createAuthUri",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e){const n=XS()?f0():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await UL($n(t),r);return i||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e){return Pa(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$n(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await Jd(r,WL(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const d=r.providerData.find(({providerId:u})=>u==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function HL(t,e){const n=$n(t);return ei(n.auth.app)?Promise.reject(oo(n.auth)):vC(n,e,null)}function qL(t,e){return vC($n(t),null,e)}async function vC(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const l=await Jd(t,wL(r,a));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t,e){return $n(t).setPersistence(e)}function KL(t,e,n,r){return $n(t).onIdTokenChanged(e,n,r)}function YL(t,e,n){return $n(t).beforeAuthStateChanged(e,n)}function XL(t,e,n,r){return $n(t).onAuthStateChanged(e,n,r)}function QL(t){return $n(t).signOut()}const x0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(x0,"1"),this.storage.removeItem(x0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=1e3,ZL=10;class wC extends bC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);nL()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ZL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},JL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wC.type="LOCAL";const jC=wC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC extends bC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kC.type="SESSION";const NC=kC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new dx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async m=>m(n.origin,a)),u=await eM(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,u)=>{const m=v2("",20);i.port1.start();const g=setTimeout(()=>{u(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(h){const y=h;if(y.data.eventId===m)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(y.data.response);break;default:clearTimeout(g),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(){return window}function nM(t){Uo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return typeof Uo().WorkerGlobalScope<"u"&&typeof Uo().importScripts=="function"}async function rM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iM(){return _C()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="firebaseLocalStorageDb",aM=1,y0="firebaseLocalStorage",CC="fbase_key";class Km{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ux(t,e){return t.transaction([y0],e?"readwrite":"readonly").objectStore(y0)}function oM(){const t=indexedDB.deleteDatabase(SC);return new Km(t).toPromise()}function gb(){const t=indexedDB.open(SC,aM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(y0,{keyPath:CC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(y0)?e(r):(r.close(),await oM(),e(await gb()))})})}async function P4(t,e,n){const r=ux(t,!0).put({[CC]:e,value:n});return new Km(r).toPromise()}async function lM(t,e){const n=ux(t,!1).get(e),r=await new Km(n).toPromise();return r===void 0?null:r.value}function I4(t,e){const n=ux(t,!0).delete(e);return new Km(n).toPromise()}const cM=800,dM=3;class EC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _C()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dx._getInstance(iM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rM(),!this.activeServiceWorker)return;this.sender=new tM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gb();return await P4(e,x0,"1"),await I4(e,x0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>I4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ux(i,!1).getAll();return new Km(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EC.type="LOCAL";const uM=EC;new Gm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e){return e?bl(e):(en(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2 extends g2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hM(t){return xC(t.auth,new b2(t),t.bypassAuthState)}function fM(t){const{auth:e,user:n}=t;return en(n,e,"internal-error"),gC(n,new b2(t),t.bypassAuthState)}async function mM(t){const{auth:e,user:n}=t;return en(n,e,"internal-error"),pC(n,new b2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hM;case"linkViaPopup":case"linkViaRedirect":return mM;case"reauthViaPopup":case"reauthViaRedirect":return fM;default:Aa(this.auth,"internal-error")}}resolve(e){Al(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Al(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=new Gm(2e3,1e4);async function R4(t,e,n){if(ei(t.app))return Promise.reject(ao(t,"operation-not-supported-in-this-environment"));const r=Ko(t);O7(t,e,y2);const i=TC(r,n);return new Dd(r,"signInViaPopup",e,i).executeNotNull()}class Dd extends AC{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Dd.currentPopupAction&&Dd.currentPopupAction.cancel(),Dd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return en(e,this.auth,"internal-error"),e}async onExecution(){Al(this.filter.length===1,"Popup operations only handle one event");const e=v2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ao(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ao(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ao(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pM.get())};e()}}Dd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="pendingRedirect",Dg=new Map;class xM extends AC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dg.get(this.auth._key());if(!e){try{const r=await yM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dg.set(this.auth._key(),e)}return this.bypassAuthState||Dg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yM(t,e){const n=wM(e),r=bM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function vM(t,e){Dg.set(t._key(),e)}function bM(t){return bl(t._redirectPersistence)}function wM(t){return Lg(gM,t.config.apiKey,t.name)}async function jM(t,e,n=!1){if(ei(t.app))return Promise.reject(oo(t));const r=Ko(t),i=TC(r,e),l=await new xM(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=10*60*1e3;class NM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_M(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ao(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kM&&this.cachedEventUids.clear(),this.cachedEventUids.has(L4(e))}saveEventToCache(e){this.cachedEventUids.add(L4(e)),this.lastProcessedEventTime=Date.now()}}function L4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _M(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t,e={}){return Pa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EM=/^https?/;async function TM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SM(t);for(const n of e)try{if(AM(n))return}catch{}Aa(t,"unauthorized-domain")}function AM(t){const e=f0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!EM.test(n))return!1;if(CM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new Gm(3e4,6e4);function M4(){const t=Uo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IM(t){return new Promise((e,n)=>{var r,i,a;function l(){M4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M4(),n(ao(t,"network-request-failed"))},timeout:PM.get()})}if(!((i=(r=Uo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Uo().gapi)===null||a===void 0)&&a.load)l();else{const d=uL("iframefcb");return Uo()[d]=()=>{gapi.load?l():n(ao(t,"network-request-failed"))},uC(`${dL()}?onload=${d}`).catch(u=>n(u))}}).catch(e=>{throw Og=null,e})}let Og=null;function RM(t){return Og=Og||IM(t),Og}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Gm(5e3,15e3),MM="__/auth/iframe",DM="emulator/auth/iframe",OM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zM(t){const e=t.config;en(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?f2(e,DM):`https://${t.config.authDomain}/${MM}`,r={apiKey:e.apiKey,appName:t.name,v:au},i=VM.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Vm(r).slice(1)}`}async function FM(t){const e=await RM(t),n=Uo().gapi;return en(n,t,"internal-error"),e.open({where:document.body,url:zM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OM,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=ao(t,"network-request-failed"),d=Uo().setTimeout(()=>{a(l)},LM.get());function u(){Uo().clearTimeout(d),i(r)}r.ping(u).then(u,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UM=500,BM=600,WM="_blank",HM="http://localhost";class D4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qM(t,e,n,r=UM,i=BM){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const u=Object.assign(Object.assign({},$M),{width:r.toString(),height:i.toString(),top:a,left:l}),m=yi().toLowerCase();n&&(d=sC(m)?WM:n),nC(m)&&(e=e||HM,u.scrollbars="yes");const g=Object.entries(u).reduce((y,[w,S])=>`${y}${w}=${S},`,"");if(tL(m)&&d!=="_self")return GM(e||"",d),new D4(null);const h=window.open(e||"",d,g);en(h,t,"popup-blocked");try{h.focus()}catch{}return new D4(h)}function GM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="__/auth/handler",YM="emulator/auth/handler",XM=encodeURIComponent("fac");async function O4(t,e,n,r,i,a){en(t.config.authDomain,t,"auth-domain-config-required"),en(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:au,eventId:i};if(e instanceof y2){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",mI(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,h]of Object.entries({}))l[g]=h}if(e instanceof Mh){const g=e.getScopes().filter(h=>h!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const u=await t._getAppCheckToken(),m=u?`#${XM}=${encodeURIComponent(u)}`:"";return`${QM(t)}?${Vm(d).slice(1)}${m}`}function QM({config:t}){return t.emulator?f2(t,YM):`https://${t.authDomain}/${KM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="webStorageSupport";class JM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NC,this._completeRedirectFn=jM,this._overrideRedirectResult=vM}async _openPopup(e,n,r,i){var a;Al((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await O4(e,n,r,f0(),i);return qM(e,l,v2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await O4(e,n,r,f0(),i);return nM(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Al(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FM(e),r=new NM(e);return n.register("authEvent",i=>(en(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qy,{type:Qy},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Qy];l!==void 0&&n(!!l),Aa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cC()||rC()||p2()}}const ZM=JM;var V4="@firebase/auth",z4="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nD(t){Ac(new _l("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;en(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dC(t)},m=new oL(r,i,a,u);return xL(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ac(new _l("auth-internal",e=>{const n=Ko(e.getProvider("auth").getImmediate());return(r=>new eD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ca(V4,z4,tD(t)),Ca(V4,z4,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=5*60,sD=u3("authIdTokenMaxAge")||rD;let F4=null;const iD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sD)return;const i=n==null?void 0:n.token;F4!==i&&(F4=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function aD(t=j1()){const e=zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gL(t,{popupRedirectResolver:ZM,persistence:[uM,jC,NC]}),r=u3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=iD(a.toString());YL(n,l,()=>l(n.currentUser)),KL(n,d=>l(d))}}const i=l3("auth");return i&&yL(n,`http://${i}`),n}function oD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=ao("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",oD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nD("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebasestorage.googleapis.com",RC="storageBucket",lD=2*60*1e3,cD=10*60*1e3,dD=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends ho{constructor(e,n,r=0){super(Jy(e),`Firebase Storage: ${n} (${Jy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _r;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_r||(_r={}));function Jy(t){return"storage/"+t}function w2(){const t="An unknown error occurred, please check the error payload for server response.";return new zr(_r.UNKNOWN,t)}function uD(t){return new zr(_r.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function hD(t){return new zr(_r.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function fD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zr(_r.UNAUTHENTICATED,t)}function mD(){return new zr(_r.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pD(t){return new zr(_r.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function LC(){return new zr(_r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MC(){return new zr(_r.CANCELED,"User canceled the upload/download.")}function gD(t){return new zr(_r.INVALID_URL,"Invalid URL '"+t+"'.")}function xD(t){return new zr(_r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yD(){return new zr(_r.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RC+"' property when initializing the app?")}function DC(){return new zr(_r.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vD(){return new zr(_r.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function bD(){return new zr(_r.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wD(t){return new zr(_r.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xb(t){return new zr(_r.INVALID_ARGUMENT,t)}function OC(){return new zr(_r.APP_DELETED,"The Firebase app was deleted.")}function jD(t){return new zr(_r.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wf(t,e){return new zr(_r.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function jf(t){throw new zr(_r.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=aa.makeFromUrl(e,n)}catch{return new aa(e,"")}if(r.path==="")return r;throw xD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+i+l,"i"),u={bucket:1,path:3};function m(I){I.path_=decodeURIComponent(I.path)}const g="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${h}/${g}/b/${i}/o${y}`,"i"),S={bucket:1,path:3},N=n===IC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",D=new RegExp(`^https?://${N}/${i}/${_}`,"i"),L=[{regex:d,indices:u,postModify:a},{regex:w,indices:S,postModify:m},{regex:D,indices:{bucket:1,path:2},postModify:m}];for(let I=0;I<L.length;I++){const F=L[I],R=F.regex.exec(e);if(R){const E=R[F.indices.bucket];let M=R[F.indices.path];M||(M=""),r=new aa(E,M),F.postModify(r);break}}if(r==null)throw gD(e);return r}}class kD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t,e,n){let r=1,i=null,a=null,l=!1,d=0;function u(){return d===2}let m=!1;function g(..._){m||(m=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(w,u())},_)}function y(){a&&clearTimeout(a)}function w(_,...D){if(m){y();return}if(_){y(),g.call(null,_,...D);return}if(u()||l){y(),g.call(null,_,...D);return}r<64&&(r*=2);let L;d===1?(d=2,L=0):L=(r+Math.random())*1e3,h(L)}let S=!1;function N(_){S||(S=!0,y(),!m&&(i!==null?(_||(d=2),clearTimeout(i),h(0)):_||(d=1)))}return h(0),a=setTimeout(()=>{l=!0,N(!0)},n),N}function _D(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){return t!==void 0}function CD(t){return typeof t=="function"}function ED(t){return typeof t=="object"&&!Array.isArray(t)}function hx(t){return typeof t=="string"||t instanceof String}function $4(t){return j2()&&t instanceof Blob}function j2(){return typeof Blob<"u"}function U4(t,e,n,r){if(r<e)throw xb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw xb(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function VC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ud;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ud||(Ud={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n,r,i,a,l,d,u,m,g,h,y=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=u,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=h,this.retry=y,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,N)=>{this.resolve_=S,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ig(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{const u=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Ud.NO_ERROR,u=a.getStatus();if(!d||zC(u,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Ud.ABORT;r(!1,new ig(!1,null,g));return}const m=this.successCodes_.indexOf(u)!==-1;r(!0,new ig(m,a))})},n=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(d,d.getResponse());SD(u)?a(u):a()}catch(u){l(u)}else if(d!==null){const u=w2();u.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,u)):l(u)}else if(i.canceled){const u=this.appDelete_?OC():MC();l(u)}else{const u=LC();l(u)}};this.canceled_?n(!1,new ig(!1,null,!0)):this.backoffId_=ND(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_D(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ig{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function AD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function PD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ID(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function LD(t,e,n,r,i,a,l=!0,d=!1){const u=VC(t.urlParams),m=t.url+u,g=Object.assign({},t.headers);return ID(g,e),AD(g,n),PD(g,a),RD(g,r),new TD(m,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DD(...t){const e=MD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(j2())return new Blob(t);throw new zr(_r.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function OD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){if(typeof atob>"u")throw wD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zy{constructor(e,n){this.data=e,this.contentType=n||null}}function zD(t,e){switch(t){case Do.RAW:return new Zy(FC(e));case Do.BASE64:case Do.BASE64URL:return new Zy($C(t,e));case Do.DATA_URL:return new Zy($D(e),UD(e))}throw w2()}function FC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=t.charCodeAt(++n);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function FD(t){let e;try{e=decodeURIComponent(t)}catch{throw Wf(Do.DATA_URL,"Malformed data URL.")}return FC(e)}function $C(t,e){switch(t){case Do.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Wf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Do.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Wf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VD(e)}catch(i){throw i.message.includes("polyfill")?i:Wf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class UC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wf(Do.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $D(t){const e=new UC(t);return e.base64?$C(Do.BASE64,e.rest):FD(e.rest)}function UD(t){return new UC(t).contentType}function BD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){let r=0,i="";$4(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if($4(this.data_)){const r=this.data_,i=OD(r,e,n);return i===null?null:new yl(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new yl(r,!0)}}static getBlob(...e){if(j2()){const n=e.map(r=>r instanceof yl?r.data_:r);return new yl(DD.apply(null,n))}else{const n=e.map(l=>hx(l)?zD(Do.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new yl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){let e;try{e=JSON.parse(t)}catch{return null}return ED(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function HD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t,e){return e}class Si{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||qD}}let ag=null;function GD(t){return!hx(t)||t.length<2?t:WC(t)}function k2(){if(ag)return ag;const t=[];t.push(new Si("bucket")),t.push(new Si("generation")),t.push(new Si("metageneration")),t.push(new Si("name","fullPath",!0));function e(a,l){return GD(l)}const n=new Si("name");n.xform=e,t.push(n);function r(a,l){return l!==void 0?Number(l):l}const i=new Si("size");return i.xform=r,t.push(i),t.push(new Si("timeCreated")),t.push(new Si("updated")),t.push(new Si("md5Hash",null,!0)),t.push(new Si("cacheControl",null,!0)),t.push(new Si("contentDisposition",null,!0)),t.push(new Si("contentEncoding",null,!0)),t.push(new Si("contentLanguage",null,!0)),t.push(new Si("contentType",null,!0)),t.push(new Si("metadata","customMetadata",!0)),ag=t,ag}function KD(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new aa(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function YD(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const l=n[a];r[l.local]=l.xform(r,e[l.server])}return KD(r,t),r}function HC(t,e,n){const r=BC(e);return r===null?null:YD(t,r,n)}function XD(t,e,n,r){const i=BC(e);if(i===null||!hx(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(m=>{const g=t.bucket,h=t.fullPath,y="/b/"+l(g)+"/o/"+l(h),w=Dh(y,n,r),S=VC({alt:"media",token:m});return w+S})[0]}function qC(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class du{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){if(!t)throw w2()}function N2(t,e){function n(r,i){const a=HC(t,i,e);return kl(a!==null),a}return n}function QD(t,e){function n(r,i){const a=HC(t,i,e);return kl(a!==null),XD(a,i,t.host,t._protocol)}return n}function Ym(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=mD():i=fD():n.getStatus()===402?i=hD(t.bucket):n.getStatus()===403?i=pD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function _2(t){const e=Ym(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=uD(t.path)),a.serverResponse=i.serverResponse,a}return n}function JD(t,e,n){const r=e.fullServerUrl(),i=Dh(r,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,d=new du(i,a,N2(t,n),l);return d.errorHandler=_2(e),d}function ZD(t,e,n){const r=e.fullServerUrl(),i=Dh(r,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,d=new du(i,a,QD(t,n),l);return d.errorHandler=_2(e),d}function eO(t,e){const n=e.fullServerUrl(),r=Dh(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function l(u,m){}const d=new du(r,i,l,a);return d.successCodes=[200,204],d.errorHandler=_2(e),d}function tO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GC(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=tO(null,e)),r}function KC(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function d(){let L="";for(let I=0;I<2;I++)L=L+Math.random().toString().slice(2);return L}const u=d();l["Content-Type"]="multipart/related; boundary="+u;const m=GC(e,r,i),g=qC(m,n),h="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+u+`\r
Content-Type: `+m.contentType+`\r
\r
`,y=`\r
--`+u+"--",w=yl.getBlob(h,r,y);if(w===null)throw DC();const S={name:m.fullPath},N=Dh(a,t.host,t._protocol),_="POST",D=t.maxUploadRetryTime,A=new du(N,_,N2(t,n),D);return A.urlParams=S,A.headers=l,A.body=w.uploadData(),A.errorHandler=Ym(e),A}class v0{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function S2(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{kl(!1)}return kl(!!n&&(e||["active"]).indexOf(n)!==-1),n}function nO(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),l=GC(e,r,i),d={name:l.fullPath},u=Dh(a,t.host,t._protocol),m="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},h=qC(l,n),y=t.maxUploadRetryTime;function w(N){S2(N);let _;try{_=N.getResponseHeader("X-Goog-Upload-URL")}catch{kl(!1)}return kl(hx(_)),_}const S=new du(u,m,w,y);return S.urlParams=d,S.headers=g,S.body=h,S.errorHandler=Ym(e),S}function rO(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function a(m){const g=S2(m,["active","final"]);let h=null;try{h=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kl(!1)}h||kl(!1);const y=Number(h);return kl(!isNaN(y)),new v0(y,r.size(),g==="final")}const l="POST",d=t.maxUploadRetryTime,u=new du(n,l,a,d);return u.headers=i,u.errorHandler=Ym(e),u}const B4=256*1024;function sO(t,e,n,r,i,a,l,d){const u=new v0(0,0);if(l?(u.current=l.current,u.total=l.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw vD();const m=u.total-u.current;let g=m;i>0&&(g=Math.min(g,i));const h=u.current,y=h+g;let w="";g===0?w="finalize":m===g?w="upload, finalize":w="upload";const S={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${u.current}`},N=r.slice(h,y);if(N===null)throw DC();function _(I,F){const R=S2(I,["active","final"]),E=u.current+g,M=r.size();let O;return R==="final"?O=N2(e,a)(I,F):O=null,new v0(E,M,R==="final",O)}const D="POST",A=e.maxUploadRetryTime,L=new du(n,D,_,A);return L.headers=S,L.body=N.uploadData(),L.progressCallback=d||null,L.errorHandler=Ym(t),L}const Wi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ev(t){switch(t){case"running":case"pausing":case"canceling":return Wi.RUNNING;case"paused":return Wi.PAUSED;case"success":return Wi.SUCCESS;case"canceled":return Wi.CANCELED;case"error":return Wi.ERROR;default:return Wi.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,r){if(CD(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class aO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ud.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ud.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ud.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw jf("cannot .send() more than once");if(Vl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oO extends aO{initXhr(){this.xhr_.responseType="text"}}function vc(){return new oO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=k2(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(_r.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(zC(i.status,[]))if(a)i=LC();else{this.sleepTime=Math.max(this.sleepTime*2,dD),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(_r.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=nO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vc,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=rO(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,vc,n,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=B4*this._chunkMultiplier,n=new v0(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=sO(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const d=this._ref.storage._makeRequest(l,vc,i,a,!1);this._request=d,d.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){B4*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=JD(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,vc,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=KC(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vc,e,n);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=MC(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ev(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const a=new iO(n||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ev(this._state)){case Wi.SUCCESS:Du(this._resolve.bind(null,this.snapshot))();break;case Wi.CANCELED:case Wi.ERROR:const n=this._reject;Du(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ev(this._state)){case Wi.RUNNING:case Wi.PAUSED:e.next&&Du(e.next.bind(e,this.snapshot))();break;case Wi.SUCCESS:e.complete&&Du(e.complete.bind(e))();break;case Wi.CANCELED:case Wi.ERROR:e.error&&Du(e.error.bind(e,this._error))();break;default:e.error&&Du(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this._service=e,n instanceof aa?this._location=n:this._location=aa.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zd(e,n)}get root(){const e=new aa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WC(this._location.path)}get storage(){return this._service}get parent(){const e=WD(this._location.path);if(e===null)return null;const n=new aa(this._location.bucket,e);return new Zd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jD(e)}}function cO(t,e,n){t._throwIfRoot("uploadBytes");const r=KC(t.storage,t._location,k2(),new yl(e,!0),n);return t.storage.makeRequestWithTokens(r,vc).then(i=>({metadata:i,ref:t}))}function dO(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new lO(t,new yl(e),n)}function uO(t){t._throwIfRoot("getDownloadURL");const e=ZD(t.storage,t._location,k2());return t.storage.makeRequestWithTokens(e,vc).then(n=>{if(n===null)throw bD();return n})}function hO(t){t._throwIfRoot("deleteObject");const e=eO(t.storage,t._location);return t.storage.makeRequestWithTokens(e,vc)}function fO(t,e){const n=HD(t._location.path,e),r=new aa(t._location.bucket,n);return new Zd(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){return/^[A-Za-z]+:\/\//.test(t)}function pO(t,e){return new Zd(t,e)}function YC(t,e){if(t instanceof C2){const n=t;if(n._bucket==null)throw yD();const r=new Zd(n,n._bucket);return e!=null?YC(r,e):r}else return e!==void 0?fO(t,e):t}function gO(t,e){if(e&&mO(e)){if(t instanceof C2)return pO(t,e);throw xb("To use ref(service, url), the first argument must be a Storage instance.")}else return YC(t,e)}function W4(t,e){const n=e==null?void 0:e[RC];return n==null?null:aa.makeFromBucketSpec(n,t)}function xO(t,e,n,r={}){t.host=`${e}:${n}`;const i=Vl(e);i&&(U0(`https://${t.host}/b`),v1("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:ZP(a,t.app.options.projectId))}class C2{constructor(e,n,r,i,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=IC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lD,this._maxUploadRetryTime=cD,this._requests=new Set,i!=null?this._bucket=aa.makeFromBucketSpec(i,this._host):this._bucket=W4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=aa.makeFromBucketSpec(this._url,e):this._bucket=W4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){U4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){U4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zd(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new kD(OC());{const l=LD(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const H4="@firebase/storage",q4="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="storage";function Oh(t,e,n){return t=$n(t),cO(t,e,n)}function G4(t,e,n){return t=$n(t),dO(t,e,n)}function zc(t){return t=$n(t),uO(t)}function QC(t){return t=$n(t),hO(t)}function so(t,e){return t=$n(t),gO(t,e)}function yO(t=j1(),e){t=$n(t);const r=zm(t,XC).getImmediate({identifier:e}),i=c3("storage");return i&&vO(r,...i),r}function vO(t,e,n,r={}){xO(t,e,n,r)}function bO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new C2(n,r,i,e,au)}function wO(){Ac(new _l(XC,bO,"PUBLIC").setMultipleInstances(!0)),Ca(H4,q4,""),Ca(H4,q4,"esm2017")}wO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="type.googleapis.com/google.protobuf.Int64Value",kO="type.googleapis.com/google.protobuf.UInt64Value";function JC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function b0(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>b0(e));if(typeof t=="function"||typeof t=="object")return JC(t,e=>b0(e));throw new Error("Data cannot be encoded in JSON: "+t)}function xh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case jO:case kO:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>xh(e)):typeof t=="function"||typeof t=="object"?JC(t,e=>xh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qi extends ho{constructor(e,n,r){super(`${E2}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,qi.prototype)}}function NO(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function w0(t,e){let n=NO(t),r=n,i;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!K4[l])return new qi("internal","internal");n=K4[l],r=l}const d=a.message;typeof d=="string"&&(r=d),i=a.details,i!==void 0&&(i=xh(i))}}catch{}return n==="ok"?null:new qi(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ei(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="us-central1",SO=/^data: (.*?)(?:\n|$)/;function CO(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new qi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class EO{constructor(e,n,r,i,a=yb,l=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new _O(e,n,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=yb}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function TO(t,e,n){const r=Vl(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(U0(t.emulatorOrigin),v1("Functions",!0))}function AO(t,e,n){const r=i=>IO(t,e,i,{});return r.stream=(i,a)=>LO(t,e,i,a),r}async function PO(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}async function ZC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function IO(t,e,n,r){const i=t._url(e);return RO(t,i,n,r)}async function RO(t,e,n,r){n=b0(n);const i={data:n},a=await ZC(t,r),l=r.timeout||7e4,d=CO(l),u=await Promise.race([PO(e,i,a,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!u)throw new qi("cancelled","Firebase Functions instance was deleted.");const m=w0(u.status,u.json);if(m)throw m;if(!u.json)throw new qi("internal","Response is not valid JSON object.");let g=u.json.data;if(typeof g>"u"&&(g=u.json.result),typeof g>"u")throw new qi("internal","Response is missing data field.");return{data:xh(g)}}function LO(t,e,n,r){const i=t._url(e);return MO(t,i,n,r||{})}async function MO(t,e,n,r){var i;n=b0(n);const a={data:n},l=await ZC(t,r);l["Content-Type"]="application/json",l.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:l,signal:r==null?void 0:r.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const N=new qi("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const S=w0(0,null);return{data:Promise.reject(S),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(S)}}}}}}let u,m;const g=new Promise((w,S)=>{u=w,m=S});(i=r==null?void 0:r.signal)===null||i===void 0||i.addEventListener("abort",()=>{const w=new qi("cancelled","Request was cancelled.");m(w)});const h=d.body.getReader(),y=DO(h,u,m,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const w=y.getReader();return{async next(){const{value:S,done:N}=await w.read();return{value:S,done:N}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:g}}function DO(t,e,n,r){const i=(l,d)=>{const u=l.match(SO);if(!u)return;const m=u[1];try{const g=JSON.parse(m);if("result"in g){e(xh(g.result));return}if("message"in g){d.enqueue(xh(g.message));return}if("error"in g){const h=w0(0,g);d.error(h),n(h);return}}catch(g){if(g instanceof qi){d.error(g),n(g);return}}},a=new TextDecoder;return new ReadableStream({start(l){let d="";return u();async function u(){if(r!=null&&r.aborted){const m=new qi("cancelled","Request was cancelled");return l.error(m),n(m),Promise.resolve()}try{const{value:m,done:g}=await t.read();if(g){d.trim()&&i(d.trim(),l),l.close();return}if(r!=null&&r.aborted){const y=new qi("cancelled","Request was cancelled");l.error(y),n(y),await t.cancel();return}d+=a.decode(m,{stream:!0});const h=d.split(`
`);d=h.pop()||"";for(const y of h)y.trim()&&i(y.trim(),l);return u()}catch(m){const g=m instanceof qi?m:w0(0,null);l.error(g),n(g)}}},cancel(){return t.cancel()}})}const Y4="@firebase/functions",X4="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="auth-internal",VO="app-check-internal",zO="messaging-internal";function FO(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(OO),l=n.getProvider(zO),d=n.getProvider(VO);return new EO(i,a,l,d,r)};Ac(new _l(E2,e,"PUBLIC").setMultipleInstances(!0)),Ca(Y4,X4,t),Ca(Y4,X4,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t=j1(),e=yb){const r=zm($n(t),E2).getImmediate({identifier:e}),i=c3("functions");return i&&$O(r,...i),r}function $O(t,e,n){TO($n(t),e,n)}function Na(t,e,n){return AO($n(t),e)}FO();S9("error");const UO={apiKey:"AIzaSyCraPDyyhOJs9IJtVMCe2b1VNFYkbtqWEg",authDomain:"playcenter-universal.firebaseapp.com",projectId:"playcenter-universal",storageBucket:"playcenter-universal.firebasestorage.app",messagingSenderId:"876884906641",appId:"1:876884906641:web:a0a5b7526b7f4161452530",measurementId:"G-4MPL62WSKW"},mx=m3(UO),oe=b7(mx,{experimentalForceLongPolling:!0,experimentalAutoDetectLongPolling:!1}),nr=aD(mx),io=yO(mx),T2=fx(mx);GL(nr,jC).then(()=>{}).catch(t=>{});const BO=["arisleidy0712@gmail.com"];function ml(t){if(!t)return!1;const e=t.toLowerCase().trim();return BO.includes(e)}function og(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e="0123456789";let n="USER-";for(let r=0;r<3;r++)n+=t.charAt(Math.floor(Math.random()*t.length));for(let r=0;r<3;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}const eE=b.createContext();function er(){return b.useContext(eE)}function WO({children:t}){const[e,n]=b.useState(null),[r,i]=b.useState(null),[a,l]=b.useState(!0);b.useEffect(()=>{let I=null;const F=XL(nr,async R=>{if(I){try{I()}catch{}I=null}if(n(R),!R){i(null),l(!1);return}try{const E=We(oe,"users",R.uid),M=We(oe,"usuarios",R.uid),[O,j]=await Promise.all([Fn(E),Fn(M)]);let U=null;if(O.exists())U=E;else if(j.exists())U=M;else{const V={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:og(),displayName:R.displayName||"",email:R.email||"",createdAt:new Date,stats:{seguidores:0,seguidos:0,publicaciones:0}};try{await Cn(E,V,{merge:!0})}catch{}U=E}I=_n(U,H=>{if(H.exists()){const V=H.data()||{},K=R.email||V.email||"",X={uid:R.uid,...V,displayName:R.displayName||V.displayName||"",email:K,fotoURL:V.fotoURL||R.photoURL||"",isAdmin:ml(K)||V.admin===!0,admin:ml(K)||V.admin===!0,role:V.role||"buyer",isSeller:V.isSeller===!0||V.role==="seller",storeId:V.storeId||null,storeName:V.storeName||"",storeDescription:V.storeDescription||"",storeImage:V.storeImage||"",storePhone:V.storePhone||"",storeAddress:V.storeAddress||"",stats:V.stats||{seguidores:0,seguidos:0,publicaciones:0}};i(X)}else{const V=R.email||"",K={uid:R.uid,telefono:"",direccion:"",admin:ml(V),codigo:"",displayName:R.displayName||"",email:V,fotoURL:R.photoURL||"",isAdmin:ml(V),isSeller:!1,storeId:null,storeName:""};i(K)}l(!1)},H=>{l(!1)})}catch{try{const M=We(oe,"users",R.uid),O=await Fn(M),j=O.exists()?O.data():{},U=R.email||j.email||"",H={uid:R.uid,...j,displayName:R.displayName||j.displayName||"",email:U,fotoURL:j.fotoURL||R.photoURL||"",isAdmin:ml(U)||j.admin===!0,admin:ml(U)||j.admin===!0,isSeller:j.isSeller===!0||j.role==="seller",storeId:j.storeId||null,storeName:j.storeName||""};i(H)}catch{const O=R.email||"";i({uid:R.uid,displayName:R.displayName||"",email:O,fotoURL:R.photoURL||"",telefono:"",direccion:"",isAdmin:ml(O),admin:ml(O),codigo:"",isSeller:!1,storeId:null,storeName:""})}finally{l(!1)}}});return()=>{try{F()}catch{}if(I)try{I()}catch{}}},[]);async function d(I,F,R){const E=await FL(nr,I,F);await Mg(E.user,{displayName:R});const M=og(),O=(I||"").toLowerCase().trim(),j=ml(O),U={telefono:"",direccion:"",admin:j,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:M,displayName:R,email:O,createdAt:new Date};await Cn(We(oe,"users",E.user.uid),U,{merge:!0}),n(nr.currentUser),i({uid:E.user.uid,telefono:"",direccion:"",admin:j,isAdmin:j,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:M,displayName:R,email:O})}function u(I,F){return $L(nr,I,F)}async function m(){try{n(null),i(null),await QL(nr),localStorage.removeItem("user"),localStorage.removeItem("usuarioInfo"),localStorage.removeItem("carrito"),localStorage.removeItem("favoritos"),localStorage.removeItem("lastLoginEmail"),localStorage.removeItem("lastUserData")}catch(I){throw n(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("usuarioInfo"),localStorage.removeItem("carrito"),localStorage.removeItem("favoritos"),I}}async function g(I){try{return await zL(nr,I),{success:!0}}catch(F){throw F}}async function h(I){try{return await BL(nr,I)}catch{return[]}}async function y(I){if(!e)throw new Error("No user logged in");try{const F=Xc.credential(e.email,I);return await ML(e,F),{success:!0}}catch(F){throw F}}async function w(I){if(!e)throw new Error("No user logged in");const F=We(oe,"users",e.uid);try{await Cn(F,I,{merge:!0});const R=await Fn(F),E=R.exists()?R.data():{},M={uid:e.uid,...E,displayName:e.displayName||E.displayName||"",email:e.email||E.email||"",isAdmin:E.admin===!0};if(i(M),I.displayName&&e.displayName!==I.displayName)try{await Mg(e,{displayName:I.displayName}),n(nr.currentUser)}catch{}return M}catch(R){throw R}}async function S(I){if(!e)throw new Error("No user logged in");const F=so(io,`usuarios/${e.uid}/perfil.jpg`);await Oh(F,I);const R=await zc(F);await Mg(e,{photoURL:R}),n(nr.currentUser);try{await Cn(We(oe,"users",e.uid),{fotoURL:R},{merge:!0}),i(E=>({...E,fotoURL:R}))}catch{}return R}async function N(I){if(!e)throw new Error("No user logged in");const F=We(oe,"users",e.uid);try{const R={role:"seller",isSeller:!0,storeName:I.storeName||"",storeDescription:I.storeDescription||"",storeImage:I.storeImage||"",storePhone:I.storePhone||"",storeAddress:I.storeAddress||"",sellerActivatedAt:new Date};return await Cn(F,R,{merge:!0}),i(E=>({...E,...R})),!0}catch(R){throw R}}async function _(I){if(!e)throw new Error("No user logged in");if(!(r!=null&&r.isSeller))throw new Error("User is not a seller");const F=We(oe,"users",e.uid);try{return await Cn(F,I,{merge:!0}),i(R=>({...R,...I})),!0}catch(R){throw R}}async function D(I){const F=new xl;F.setCustomParameters({prompt:"select_account",...I?{login_hint:I}:{}});try{const R=await R4(nr,F),E=R.user,M=We(oe,"users",E.uid),O=await Fn(M);if(O.exists())(E.email||"").toLowerCase().trim()==="arisleidy0712@gmail.com"&&!O.data().admin&&await Cn(M,{admin:!0,isAdmin:!0},{merge:!0});else{const j=(E.email||"").toLowerCase().trim(),U=og(),H={telefono:"",direccion:"",admin:j==="arisleidy0712@gmail.com",role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:U,displayName:E.displayName||"",email:j,fotoURL:E.photoURL||"",createdAt:new Date,loginMethod:"google"};await Cn(M,H,{merge:!0})}return R}catch(R){throw R}}async function A(){const I=new Bf("apple.com");I.addScope("email"),I.addScope("name");try{const F=await R4(nr,I),R=F.user,E=We(oe,"users",R.uid);if(!(await Fn(E)).exists()){const j={telefono:"",direccion:"",admin:!1,role:"buyer",isSeller:!1,storeName:"",storeDescription:"",storeImage:"",storePhone:"",storeAddress:"",codigo:og(),displayName:R.displayName||"Usuario Apple",email:R.email||"",fotoURL:R.photoURL||"",createdAt:new Date,loginMethod:"apple"};await Cn(E,j,{merge:!0})}return F}catch(F){throw F}}const L={usuario:e,usuarioInfo:r,login:u,signup:d,logout:m,resetPassword:g,checkSignInMethods:h,linkPasswordToAccount:y,actualizarUsuarioInfo:w,subirImagen:S,convertirseEnVendedor:N,actualizarTienda:_,loginWithGoogle:D,loginWithApple:A};return s.jsx(eE.Provider,{value:L,children:!a&&t})}const tE=b.createContext(),Hf=t=>{if(Array.isArray(t))return t.map(e=>Hf(e));if(t&&typeof t=="object"){const e={};return Object.keys(t).forEach(n=>{const r=t[n];r!==void 0&&(e[n]=Hf(r))}),e}return t},HO=({children:t})=>{const{usuario:e}=er(),[n,r]=b.useState(()=>{const A=localStorage.getItem("carrito");return A?JSON.parse(A):[]}),[i,a]=b.useState(()=>{const A=localStorage.getItem("favoritos");return A?JSON.parse(A):[]}),[l,d]=b.useState(!1),[u,m]=b.useState(!1);b.useEffect(()=>{e===null&&(r([]),a([]),m(!1))},[e]),b.useEffect(()=>{if(!(e!=null&&e.uid)||u)return;const A=localStorage.getItem("carrito");if(A)try{const L=JSON.parse(A);if(L.length>0){const I=We(oe,"usuarios",e.uid,"carrito","items"),F=Hf(L);Cn(I,{items:F},{merge:!0}).then(()=>{m(!0)}).catch(R=>{})}}catch{}},[e==null?void 0:e.uid,u]),b.useEffect(()=>{if(!(e!=null&&e.uid))return;d(!0);const A=We(oe,"usuarios",e.uid,"carrito","items"),L=_n(A,I=>{if(I.exists()){const F=I.data().items||[];r(F),localStorage.setItem("carrito",JSON.stringify(F))}d(!1)},I=>{d(!1)});return()=>L()},[e==null?void 0:e.uid]),b.useEffect(()=>{if(localStorage.setItem("carrito",JSON.stringify(n)),e!=null&&e.uid&&!l){const A=We(oe,"usuarios",e.uid,"carrito","items"),L=Hf(n);Cn(A,{items:L},{merge:!0}).catch(I=>{})}},[n,e==null?void 0:e.uid,l]),b.useEffect(()=>{l||e!=null&&e.uid||r(A=>A.map(L=>{if(L.maxStock!==void 0)return L;if(Array.isArray(L.variantes)&&L.colorSeleccionado){const I=L.variantes.find(F=>F.color===L.colorSeleccionado);if(I&&I.cantidad!==void 0)return{...L,maxStock:Number(I.cantidad)||0}}if(L.cantidadProducto!==void 0){const I=Number(L.cantidadProducto);if(!Number.isNaN(I))return{...L,maxStock:I}}return L}))},[l,e==null?void 0:e.uid]),b.useEffect(()=>{l||e!=null&&e.uid||r(A=>{const L=new Map;for(const I of A){const F=`${I.id}__${I.colorSeleccionado??""}`,R=L.get(F);R?L.set(F,{...R,cantidad:(Number(R.cantidad)||0)+(Number(I.cantidad)||0),maxStock:Math.max(Number(R.maxStock??0)||0,Number(I.maxStock??0)||0)||R.maxStock||I.maxStock}):L.set(F,{...I})}return Array.from(L.values())})},[l,e==null?void 0:e.uid]),b.useEffect(()=>{if(!(e!=null&&e.uid))return;const A=We(oe,"usuarios",e.uid,"favoritos","items"),L=_n(A,I=>{if(I.exists()){const F=I.data().items||[];a(F),localStorage.setItem("favoritos",JSON.stringify(F))}},I=>{});return()=>L()},[e==null?void 0:e.uid]),b.useEffect(()=>{if(localStorage.setItem("favoritos",JSON.stringify(i)),e!=null&&e.uid){const A=We(oe,"usuarios",e.uid,"favoritos","items"),L=Hf(i);Cn(A,{items:L},{merge:!0}).catch(I=>{})}},[i,e==null?void 0:e.uid]);const g=A=>{try{const L=(A??"").toString().trim();return L||null}catch{return null}},h=(A,L=null)=>{r(I=>{const F=g(L),R=F&&Array.isArray(A.variantes)?A.variantes.find(O=>g(O.color)===F):null,E=(R&&Number(R.cantidad))??(A.maxStock!==void 0?Number(A.maxStock):void 0)??(A.cantidad!==void 0?Number(A.cantidad):void 0)??1/0,M=I.find(O=>O.id===A.id&&g(O.colorSeleccionado)===F);if(M){const O=Number.isFinite(E)?E:1/0,j=O;return M.cantidad<j?I.map(U=>U.id===A.id&&g(U.colorSeleccionado)===F?{...U,cantidad:U.cantidad+1,maxStock:O}:U):I}return E>0?[...I,{...A,cantidad:1,colorSeleccionado:F,maxStock:E}]:I})},y=(A,L=null)=>{const I=g(L);r(F=>F.map(R=>R.id===A&&g(R.colorSeleccionado)===I?{...R,cantidad:R.cantidad-1}:R).filter(R=>R.cantidad>0))},w=(A,L=null)=>{const I=g(L);r(F=>F.filter(R=>!(R.id===A&&g(R.colorSeleccionado)===I)))},S=A=>{r(L=>L.find(F=>F.id===A.id)?L.filter(F=>F.id!==A.id):[...L,{...A,cantidad:1}])},N=A=>{a(L=>L.find(I=>I.id===A.id)?L:[...L,A])},_=A=>{a(L=>L.filter(I=>I.id!==A))},D=()=>{r([])};return s.jsx(tE.Provider,{value:{carrito:n,favoritos:i,agregarAlCarrito:h,eliminarUnidadDelCarrito:y,quitarDelCarrito:w,toggleCarrito:S,agregarAFavoritos:N,eliminarDeFavoritos:_,vaciarCarrito:D,cargandoCarrito:l},children:t})},Xm=()=>b.useContext(tE),nE=b.createContext();function Fl(){return b.useContext(nE)}function qO({children:t}){const[e,n]=b.useState(!1),[r,i]=b.useState("login");function a(d="login"){i(d),n(!0)}function l(){n(!1)}return s.jsx(nE.Provider,{value:{modalAbierto:e,setModalAbierto:n,abrirModal:a,cerrarModal:l,modo:r,setModo:i},children:t})}let vb=null;const Q4=t=>{vb=t},Vt=(t,e="info",n=null,r={})=>{typeof vb=="function"&&vb(t,e,n,r)},rE=b.createContext();function sE(){return b.useContext(rE)}function GO({children:t}){const[e,n]=b.useState([]),[r,i]=b.useState(null),[a,l]=b.useState(!1),{usuario:d,usuarioInfo:u}=er();b.useEffect(()=>{try{const y=localStorage.getItem("pcu_saved_accounts");y&&n(JSON.parse(y))}catch{}},[]),b.useEffect(()=>{d&&n(y=>{const w=y.filter(_=>_.uid!==d.uid),N=[{uid:d.uid,email:d.email,displayName:(u==null?void 0:u.displayName)||(d==null?void 0:d.displayName)||(d!=null&&d.email?d.email.split("@")[0]:"Usuario"),photoURL:(u==null?void 0:u.fotoURL)||(d==null?void 0:d.photoURL)||null,role:(u==null?void 0:u.role)||"user",lastActive:new Date().toISOString()},...w];try{localStorage.setItem("pcu_saved_accounts",JSON.stringify(N))}catch{}return N})},[d,u]);const m=y=>{try{n(w=>{const S=w.filter(N=>N.uid!==y);try{localStorage.setItem("pcu_saved_accounts",JSON.stringify(S))}catch{}return S})}catch{}},g=()=>i(null),h=async y=>{try{if(!(y!=null&&y.email)||d&&y.uid===d.uid)return;l(!0);const S=await Na(T2,"issueSwitchToken")({email:y.email}),{customToken:N}=S.data;if(!N){l(!1);return}try{await nr.signOut()}catch{}await VL(nr,N),await new Promise(_=>setTimeout(_,500)),l(!1)}catch{l(!1),Vt("Error al cambiar de cuenta. Por favor intenta de nuevo.","error","Error")}};return s.jsx(rE.Provider,{value:{savedAccounts:e,removeAccount:m,switchAccount:h,targetAccount:r,clearTarget:g,isSwitching:a},children:t})}const iE=b.createContext(),Ss=()=>{const t=b.useContext(iE);if(!t)throw new Error("useTheme debe usarse dentro de ThemeProvider");return t},KO=({children:t})=>{const[e,n]=b.useState(()=>{try{return localStorage.getItem("pcu-theme")||"light"}catch{return"light"}});b.useEffect(()=>{const a=document.documentElement;e==="dark"?(a.classList.add("dark"),a.classList.add("dark-theme")):(a.classList.remove("dark"),a.classList.remove("dark-theme"));try{localStorage.setItem("pcu-theme",e)}catch{}},[e]);const i={theme:e,toggleTheme:()=>{n(a=>a==="light"?"dark":"light")},isDark:e==="dark",isLight:e==="light"};return s.jsx(iE.Provider,{value:i,children:t})},A2=b.createContext({});function P2(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const I2=typeof window<"u",aE=I2?b.useLayoutEffect:b.useEffect,px=b.createContext(null);function R2(t,e){t.indexOf(e)===-1&&t.push(e)}function L2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Il=(t,e,n)=>n>e?e:n<t?t:n;let M2=()=>{};const Rl={},oE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function lE(t){return typeof t=="object"&&t!==null}const cE=t=>/^0[^.\s]+$/u.test(t);function D2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ta=t=>t,YO=(t,e)=>n=>e(t(n)),Qm=(...t)=>t.reduce(YO),vm=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class O2{constructor(){this.subscriptions=[]}add(e){return R2(this.subscriptions,e),()=>L2(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bo=t=>t*1e3,Wo=t=>t/1e3;function dE(t,e){return e?t*(1e3/e):0}const uE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,XO=1e-7,QO=12;function JO(t,e,n,r,i){let a,l,d=0;do l=e+(n-e)/2,a=uE(l,r,i)-t,a>0?n=l:e=l;while(Math.abs(a)>XO&&++d<QO);return l}function Jm(t,e,n,r){if(t===e&&n===r)return Ta;const i=a=>JO(a,0,1,t,n);return a=>a===0||a===1?a:uE(i(a),e,r)}const hE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,fE=t=>e=>1-t(1-e),mE=Jm(.33,1.53,.69,.99),V2=fE(mE),pE=hE(V2),gE=t=>(t*=2)<1?.5*V2(t):.5*(2-Math.pow(2,-10*(t-1))),z2=t=>1-Math.sin(Math.acos(t)),xE=fE(z2),yE=hE(z2),ZO=Jm(.42,0,1,1),eV=Jm(0,0,.58,1),vE=Jm(.42,0,.58,1),tV=t=>Array.isArray(t)&&typeof t[0]!="number",bE=t=>Array.isArray(t)&&typeof t[0]=="number",nV={linear:Ta,easeIn:ZO,easeInOut:vE,easeOut:eV,circIn:z2,circInOut:yE,circOut:xE,backIn:V2,backInOut:pE,backOut:mE,anticipate:gE},rV=t=>typeof t=="string",J4=t=>{if(bE(t)){M2(t.length===4);const[e,n,r,i]=t;return Jm(e,n,r,i)}else if(rV(t))return nV[t];return t},lg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Z4={value:null};function sV(t,e){let n=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},u=0;function m(h){l.has(h)&&(g.schedule(h),t()),u++,h(d)}const g={schedule:(h,y=!1,w=!1)=>{const N=w&&i?n:r;return y&&l.add(h),N.has(h)||N.add(h),h},cancel:h=>{r.delete(h),l.delete(h)},process:h=>{if(d=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(m),e&&Z4.value&&Z4.value.frameloop[e].push(u),u=0,n.clear(),i=!1,a&&(a=!1,g.process(h))}};return g}const iV=40;function wE(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=lg.reduce((L,I)=>(L[I]=sV(a,e?I:void 0),L),{}),{setup:d,read:u,resolveKeyframes:m,preUpdate:g,update:h,preRender:y,render:w,postRender:S}=l,N=()=>{const L=Rl.useManualTiming?i.timestamp:performance.now();n=!1,Rl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(L-i.timestamp,iV),1)),i.timestamp=L,i.isProcessing=!0,d.process(i),u.process(i),m.process(i),g.process(i),h.process(i),y.process(i),w.process(i),S.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(N))},_=()=>{n=!0,r=!0,i.isProcessing||t(N)};return{schedule:lg.reduce((L,I)=>{const F=l[I];return L[I]=(R,E=!1,M=!1)=>(n||_(),F.schedule(R,E,M)),L},{}),cancel:L=>{for(let I=0;I<lg.length;I++)l[lg[I]].cancel(L)},state:i,steps:l}}const{schedule:Ir,cancel:Fc,state:Qs,steps:tv}=wE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ta,!0);let Vg;function aV(){Vg=void 0}const Gi={now:()=>(Vg===void 0&&Gi.set(Qs.isProcessing||Rl.useManualTiming?Qs.timestamp:performance.now()),Vg),set:t=>{Vg=t,queueMicrotask(aV)}},jE=t=>e=>typeof e=="string"&&e.startsWith(t),F2=jE("--"),oV=jE("var(--"),$2=t=>oV(t)?lV.test(t.split("/*")[0].trim()):!1,lV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},bm={...Vh,transform:t=>Il(0,1,t)},cg={...Vh,default:1},qf=t=>Math.round(t*1e5)/1e5,U2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cV(t){return t==null}const dV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,B2=(t,e)=>n=>!!(typeof n=="string"&&dV.test(n)&&n.startsWith(t)||e&&!cV(n)&&Object.prototype.hasOwnProperty.call(n,e)),kE=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,l,d]=r.match(U2);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},uV=t=>Il(0,255,t),nv={...Vh,transform:t=>Math.round(uV(t))},Od={test:B2("rgb","red"),parse:kE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+nv.transform(t)+", "+nv.transform(e)+", "+nv.transform(n)+", "+qf(bm.transform(r))+")"};function hV(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const bb={test:B2("#"),parse:hV,transform:Od.transform},Zm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),pc=Zm("deg"),Ho=Zm("%"),un=Zm("px"),fV=Zm("vh"),mV=Zm("vw"),eN={...Ho,parse:t=>Ho.parse(t)/100,transform:t=>Ho.transform(t*100)},Ju={test:B2("hsl","hue"),parse:kE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ho.transform(qf(e))+", "+Ho.transform(qf(n))+", "+qf(bm.transform(r))+")"},ps={test:t=>Od.test(t)||bb.test(t)||Ju.test(t),parse:t=>Od.test(t)?Od.parse(t):Ju.test(t)?Ju.parse(t):bb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Od.transform(t):Ju.transform(t),getAnimatableNone:t=>{const e=ps.parse(t);return e.alpha=0,ps.transform(e)}},pV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(U2))==null?void 0:e.length)||0)+(((n=t.match(pV))==null?void 0:n.length)||0)>0}const NE="number",_E="color",xV="var",yV="var(",tN="${}",vV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wm(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(vV,u=>(ps.test(u)?(r.color.push(a),i.push(_E),n.push(ps.parse(u))):u.startsWith(yV)?(r.var.push(a),i.push(xV),n.push(u)):(r.number.push(a),i.push(NE),n.push(parseFloat(u))),++a,tN)).split(tN);return{values:n,split:d,indexes:r,types:i}}function SE(t){return wm(t).values}function CE(t){const{split:e,types:n}=wm(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const d=n[l];d===NE?a+=qf(i[l]):d===_E?a+=ps.transform(i[l]):a+=i[l]}return a}}const bV=t=>typeof t=="number"?0:ps.test(t)?ps.getAnimatableNone(t):t;function wV(t){const e=SE(t);return CE(t)(e.map(bV))}const $c={test:gV,parse:SE,createTransformer:CE,getAnimatableNone:wV};function rv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jV({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,l=0;if(!e)i=a=l=n;else{const d=n<.5?n*(1+e):n+e-n*e,u=2*n-d;i=rv(u,d,t+1/3),a=rv(u,d,t),l=rv(u,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function j0(t,e){return n=>n>0?e:t}const Or=(t,e,n)=>t+(e-t)*n,sv=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},kV=[bb,Od,Ju],NV=t=>kV.find(e=>e.test(t));function nN(t){const e=NV(t);if(!e)return!1;let n=e.parse(t);return e===Ju&&(n=jV(n)),n}const rN=(t,e)=>{const n=nN(t),r=nN(e);if(!n||!r)return j0(t,e);const i={...n};return a=>(i.red=sv(n.red,r.red,a),i.green=sv(n.green,r.green,a),i.blue=sv(n.blue,r.blue,a),i.alpha=Or(n.alpha,r.alpha,a),Od.transform(i))},wb=new Set(["none","hidden"]);function _V(t,e){return wb.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function SV(t,e){return n=>Or(t,e,n)}function W2(t){return typeof t=="number"?SV:typeof t=="string"?$2(t)?j0:ps.test(t)?rN:TV:Array.isArray(t)?EE:typeof t=="object"?ps.test(t)?rN:CV:j0}function EE(t,e){const n=[...t],r=n.length,i=t.map((a,l)=>W2(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=i[l](a);return n}}function CV(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=W2(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function EV(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=t.indexes[a][r[a]],d=t.values[l]??0;n[i]=d,r[a]++}return n}const TV=(t,e)=>{const n=$c.createTransformer(e),r=wm(t),i=wm(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?wb.has(t)&&!i.values.length||wb.has(e)&&!r.values.length?_V(t,e):Qm(EE(EV(r,i),i.values),n):j0(t,e)};function TE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Or(t,e,n):W2(t)(t,e)}const AV=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ir.update(e,n),stop:()=>Fc(e),now:()=>Qs.isProcessing?Qs.timestamp:Gi.now()}},AE=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},k0=2e4;function H2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<k0;)e+=n,r=t.next(e);return e>=k0?1/0:e}function PV(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(H2(r),k0);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Wo(i)}}const IV=5;function PE(t,e,n){const r=Math.max(e-IV,0);return dE(n-t(r),e-r)}const Kr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},iv=.001;function RV({duration:t=Kr.duration,bounce:e=Kr.bounce,velocity:n=Kr.velocity,mass:r=Kr.mass}){let i,a,l=1-e;l=Il(Kr.minDamping,Kr.maxDamping,l),t=Il(Kr.minDuration,Kr.maxDuration,Wo(t)),l<1?(i=m=>{const g=m*l,h=g*t,y=g-n,w=jb(m,l),S=Math.exp(-h);return iv-y/w*S},a=m=>{const h=m*l*t,y=h*n+n,w=Math.pow(l,2)*Math.pow(m,2)*t,S=Math.exp(-h),N=jb(Math.pow(m,2),l);return(-i(m)+iv>0?-1:1)*((y-w)*S)/N}):(i=m=>{const g=Math.exp(-m*t),h=(m-n)*t+1;return-iv+g*h},a=m=>{const g=Math.exp(-m*t),h=(n-m)*(t*t);return g*h});const d=5/t,u=MV(i,a,d);if(t=Bo(t),isNaN(u))return{stiffness:Kr.stiffness,damping:Kr.damping,duration:t};{const m=Math.pow(u,2)*r;return{stiffness:m,damping:l*2*Math.sqrt(r*m),duration:t}}}const LV=12;function MV(t,e,n){let r=n;for(let i=1;i<LV;i++)r=r-t(r)/e(r);return r}function jb(t,e){return t*Math.sqrt(1-e*e)}const DV=["duration","bounce"],OV=["stiffness","damping","mass"];function sN(t,e){return e.some(n=>t[n]!==void 0)}function VV(t){let e={velocity:Kr.velocity,stiffness:Kr.stiffness,damping:Kr.damping,mass:Kr.mass,isResolvedFromDuration:!1,...t};if(!sN(t,OV)&&sN(t,DV))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Il(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Kr.mass,stiffness:i,damping:a}}else{const n=RV(t);e={...e,...n,mass:Kr.mass},e.isResolvedFromDuration=!0}return e}function N0(t=Kr.visualDuration,e=Kr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],d={done:!1,value:a},{stiffness:u,damping:m,mass:g,duration:h,velocity:y,isResolvedFromDuration:w}=VV({...n,velocity:-Wo(n.velocity||0)}),S=y||0,N=m/(2*Math.sqrt(u*g)),_=l-a,D=Wo(Math.sqrt(u/g)),A=Math.abs(_)<5;r||(r=A?Kr.restSpeed.granular:Kr.restSpeed.default),i||(i=A?Kr.restDelta.granular:Kr.restDelta.default);let L;if(N<1){const F=jb(D,N);L=R=>{const E=Math.exp(-N*D*R);return l-E*((S+N*D*_)/F*Math.sin(F*R)+_*Math.cos(F*R))}}else if(N===1)L=F=>l-Math.exp(-D*F)*(_+(S+D*_)*F);else{const F=D*Math.sqrt(N*N-1);L=R=>{const E=Math.exp(-N*D*R),M=Math.min(F*R,300);return l-E*((S+N*D*_)*Math.sinh(M)+F*_*Math.cosh(M))/F}}const I={calculatedDuration:w&&h||null,next:F=>{const R=L(F);if(w)d.done=F>=h;else{let E=F===0?S:0;N<1&&(E=F===0?Bo(S):PE(L,F,R));const M=Math.abs(E)<=r,O=Math.abs(l-R)<=i;d.done=M&&O}return d.value=d.done?l:R,d},toString:()=>{const F=Math.min(H2(I),k0),R=AE(E=>I.next(F*E).value,F,30);return F+"ms "+R},toTransition:()=>{}};return I}N0.applyToOptions=t=>{const e=PV(t,100,N0);return t.ease=e.ease,t.duration=Bo(e.duration),t.type="keyframes",t};function kb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:u,restDelta:m=.5,restSpeed:g}){const h=t[0],y={done:!1,value:h},w=M=>d!==void 0&&M<d||u!==void 0&&M>u,S=M=>d===void 0?u:u===void 0||Math.abs(d-M)<Math.abs(u-M)?d:u;let N=n*e;const _=h+N,D=l===void 0?_:l(_);D!==_&&(N=D-h);const A=M=>-N*Math.exp(-M/r),L=M=>D+A(M),I=M=>{const O=A(M),j=L(M);y.done=Math.abs(O)<=m,y.value=y.done?D:j};let F,R;const E=M=>{w(y.value)&&(F=M,R=N0({keyframes:[y.value,S(y.value)],velocity:PE(L,M,y.value),damping:i,stiffness:a,restDelta:m,restSpeed:g}))};return E(0),{calculatedDuration:null,next:M=>{let O=!1;return!R&&F===void 0&&(O=!0,I(M),E(M)),F!==void 0&&M>=F?R.next(M-F):(!O&&I(M),y)}}}function zV(t,e,n){const r=[],i=n||Rl.mix||TE,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||Ta:e;d=Qm(u,d)}r.push(d)}return r}function FV(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(M2(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=zV(e,r,i),u=d.length,m=g=>{if(l&&g<t[0])return e[0];let h=0;if(u>1)for(;h<t.length-2&&!(g<t[h+1]);h++);const y=vm(t[h],t[h+1],g);return d[h](y)};return n?g=>m(Il(t[0],t[a-1],g)):m}function $V(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=vm(0,e,r);t.push(Or(n,1,i))}}function UV(t){const e=[0];return $V(e,t.length-1),e}function BV(t,e){return t.map(n=>n*e)}function WV(t,e){return t.map(()=>e||vE).splice(0,t.length-1)}function Gf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=tV(r)?r.map(J4):J4(r),a={done:!1,value:e[0]},l=BV(n&&n.length===e.length?n:UV(e),t),d=FV(l,e,{ease:Array.isArray(i)?i:WV(e,i)});return{calculatedDuration:t,next:u=>(a.value=d(u),a.done=u>=t,a)}}const HV=t=>t!==null;function q2(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(HV),d=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!d||r===void 0?a[d]:r}const qV={decay:kb,inertia:kb,tween:Gf,keyframes:Gf,spring:N0};function IE(t){typeof t.type=="string"&&(t.type=qV[t.type])}class G2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const GV=t=>t/100;class K2 extends G2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Gi.now()&&this.tick(Gi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;IE(e);const{type:n=Gf,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=e;let{keyframes:d}=e;const u=n||Gf;u!==Gf&&typeof d[0]!="number"&&(this.mixKeyframes=Qm(GV,TE(d[0],d[1])),d=[0,100]);const m=u({...e,keyframes:d});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...d].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=H2(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=m}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:g,repeat:h,repeatType:y,repeatDelay:w,type:S,onUpdate:N,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const D=this.currentTime-m*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?D<0:D>i;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let L=this.currentTime,I=r;if(h){const M=Math.min(this.currentTime,i)/d;let O=Math.floor(M),j=M%1;!j&&M>=1&&(j=1),j===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(y==="reverse"?(j=1-j,w&&(j-=w/d)):y==="mirror"&&(I=l)),L=Il(0,1,j)*d}const F=A?{done:!1,value:g[0]}:I.next(L);a&&(F.value=a(F.value));let{done:R}=F;!A&&u!==null&&(R=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return E&&S!==kb&&(F.value=q2(g,this.options,_,this.speed)),N&&N(F.value),E&&this.finish(),F}then(e,n){return this.finished.then(e,n)}get duration(){return Wo(this.calculatedDuration)}get time(){return Wo(this.currentTime)}set time(e){var n;e=Bo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Gi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Wo(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=AV,startTime:n}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function KV(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vd=t=>t*180/Math.PI,Nb=t=>{const e=Vd(Math.atan2(t[1],t[0]));return _b(e)},YV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Nb,rotateZ:Nb,skewX:t=>Vd(Math.atan(t[1])),skewY:t=>Vd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_b=t=>(t=t%360,t<0&&(t+=360),t),iN=Nb,aN=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),oN=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),XV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:aN,scaleY:oN,scale:t=>(aN(t)+oN(t))/2,rotateX:t=>_b(Vd(Math.atan2(t[6],t[5]))),rotateY:t=>_b(Vd(Math.atan2(-t[2],t[0]))),rotateZ:iN,rotate:iN,skewX:t=>Vd(Math.atan(t[4])),skewY:t=>Vd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Sb(t){return t.includes("scale")?1:0}function Cb(t,e){if(!t||t==="none")return Sb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=XV,i=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=YV,i=d}if(!i)return Sb(e);const a=r[e],l=i[1].split(",").map(JV);return typeof a=="function"?a(l):l[a]}const QV=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Cb(n,e)};function JV(t){return parseFloat(t.trim())}const zh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fh=new Set(zh),lN=t=>t===Vh||t===un,ZV=new Set(["x","y","z"]),ez=zh.filter(t=>!ZV.has(t));function tz(t){const e=[];return ez.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Bd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Cb(e,"x"),y:(t,{transform:e})=>Cb(e,"y")};Bd.translateX=Bd.x;Bd.translateY=Bd.y;const Wd=new Set;let Eb=!1,Tb=!1,Ab=!1;function RE(){if(Tb){const t=Array.from(Wd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=tz(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,l])=>{var d;(d=r.getValue(a))==null||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Tb=!1,Eb=!1,Wd.forEach(t=>t.complete(Ab)),Wd.clear()}function LE(){Wd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Tb=!0)})}function nz(){Ab=!0,LE(),RE(),Ab=!1}class Y2{constructor(e,n,r,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Wd.add(this),Eb||(Eb=!0,Ir.read(LE),Ir.resolveKeyframes(RE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const d=r.readValue(n,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}KV(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Wd.delete(this)}cancel(){this.state==="scheduled"&&(Wd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const rz=t=>t.startsWith("--");function sz(t,e,n){rz(e)?t.style.setProperty(e,n):t.style[e]=n}const iz=D2(()=>window.ScrollTimeline!==void 0),az={};function oz(t,e){const n=D2(t);return()=>az[e]??n()}const ME=oz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,cN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lf([0,.65,.55,1]),circOut:Lf([.55,0,1,.45]),backIn:Lf([.31,.01,.66,-.59]),backOut:Lf([.33,1.53,.69,.99])};function DE(t,e){if(t)return typeof t=="function"?ME()?AE(t,e):"ease-out":bE(t)?Lf(t):Array.isArray(t)?t.map(n=>DE(n,e)||cN.easeOut):cN[t]}function lz(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeOut",times:u}={},m=void 0){const g={[e]:n};u&&(g.offset=u);const h=DE(d,i);Array.isArray(h)&&(g.easing=h);const y={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return m&&(y.pseudoElement=m),t.animate(g,y)}function OE(t){return typeof t=="function"&&"applyToOptions"in t}function cz({type:t,...e}){return OE(t)&&ME()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class dz extends G2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:d,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,M2(typeof e.type!="string");const m=cz(e);this.animation=lz(n,r,i,m,a),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=q2(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):sz(n,r,g),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Wo(Number(e))}get time(){return Wo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Bo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&iz()?(this.animation.timeline=e,Ta):n(this)}}const VE={anticipate:gE,backInOut:pE,circInOut:yE};function uz(t){return t in VE}function hz(t){typeof t.ease=="string"&&uz(t.ease)&&(t.ease=VE[t.ease])}const dN=10;class fz extends dz{constructor(e){hz(e),IE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new K2({...l,autoplay:!1}),u=Bo(this.finishedTime??this.time);n.setWithVelocity(d.sample(u-dN).value,d.sample(u).value,dN),d.stop()}}const uN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($c.test(t)||t==="0")&&!t.startsWith("url("));function mz(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function pz(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=uN(i,e),d=uN(a,e);return!l||!d?!1:mz(t)||(n==="spring"||OE(n))&&r}function X2(t){return lE(t)&&"offsetHeight"in t}const gz=new Set(["opacity","clipPath","filter","transform"]),xz=D2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yz(t){var m;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:l}=t;if(!X2((m=e==null?void 0:e.owner)==null?void 0:m.current))return!1;const{onUpdate:d,transformTemplate:u}=e.owner.getProps();return xz()&&n&&gz.has(n)&&(n!=="transform"||!u)&&!d&&!r&&i!=="mirror"&&a!==0&&l!=="inertia"}const vz=40;class bz extends G2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:d,name:u,motionValue:m,element:g,...h}){var S;super(),this.stop=()=>{var N,_;this._animation&&(this._animation.stop(),(N=this.stopTimeline)==null||N.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=Gi.now();const y={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:l,name:u,motionValue:m,element:g,...h},w=(g==null?void 0:g.KeyframeResolver)||Y2;this.keyframeResolver=new w(d,(N,_,D)=>this.onKeyframesResolved(N,_,y,!D),u,m,g),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:d,delay:u,isHandoff:m,onUpdate:g}=r;this.resolvedAt=Gi.now(),pz(e,a,l,d)||((Rl.instantAnimations||!u)&&(g==null||g(q2(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>vz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!m&&yz(y)?new fz({...y,element:y.motionValue.owner.current}):new K2(y);w.finished.then(()=>this.notifyFinished()).catch(Ta),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),nz()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const wz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jz(t){const e=wz.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function zE(t,e,n=1){const[r,i]=jz(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return oE(l)?parseFloat(l):l}return $2(i)?zE(i,e,n+1):i}function Q2(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const FE=new Set(["width","height","top","left","right","bottom",...zh]),kz={test:t=>t==="auto",parse:t=>t},$E=t=>e=>e.test(t),UE=[Vh,un,Ho,pc,mV,fV,kz],hN=t=>UE.find($E(t));function Nz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||cE(t):!0}const _z=new Set(["brightness","contrast","saturate","opacity"]);function Sz(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(U2)||[];if(!r)return t;const i=n.replace(r,"");let a=_z.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Cz=/\b([a-z-]*)\(.*?\)/gu,Pb={...$c,getAnimatableNone:t=>{const e=t.match(Cz);return e?e.map(Sz).join(" "):t}},fN={...Vh,transform:Math.round},Ez={rotate:pc,rotateX:pc,rotateY:pc,rotateZ:pc,scale:cg,scaleX:cg,scaleY:cg,scaleZ:cg,skew:pc,skewX:pc,skewY:pc,distance:un,translateX:un,translateY:un,translateZ:un,x:un,y:un,z:un,perspective:un,transformPerspective:un,opacity:bm,originX:eN,originY:eN,originZ:un},J2={borderWidth:un,borderTopWidth:un,borderRightWidth:un,borderBottomWidth:un,borderLeftWidth:un,borderRadius:un,radius:un,borderTopLeftRadius:un,borderTopRightRadius:un,borderBottomRightRadius:un,borderBottomLeftRadius:un,width:un,maxWidth:un,height:un,maxHeight:un,top:un,right:un,bottom:un,left:un,padding:un,paddingTop:un,paddingRight:un,paddingBottom:un,paddingLeft:un,margin:un,marginTop:un,marginRight:un,marginBottom:un,marginLeft:un,backgroundPositionX:un,backgroundPositionY:un,...Ez,zIndex:fN,fillOpacity:bm,strokeOpacity:bm,numOctaves:fN},Tz={...J2,color:ps,backgroundColor:ps,outlineColor:ps,fill:ps,stroke:ps,borderColor:ps,borderTopColor:ps,borderRightColor:ps,borderBottomColor:ps,borderLeftColor:ps,filter:Pb,WebkitFilter:Pb},BE=t=>Tz[t];function WE(t,e){let n=BE(t);return n!==Pb&&(n=$c),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Az=new Set(["auto","none","0"]);function Pz(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Az.has(a)&&wm(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=WE(n,i)}class Iz extends Y2{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let m=e[u];if(typeof m=="string"&&(m=m.trim(),$2(m))){const g=zE(m,n.current);g!==void 0&&(e[u]=g),u===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!FE.has(r)||e.length!==2)return;const[i,a]=e,l=hN(i),d=hN(a);if(l!==d)if(lN(l)&&lN(d))for(let u=0;u<e.length;u++){const m=e[u];typeof m=="string"&&(e[u]=parseFloat(m))}else Bd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Nz(e[i]))&&r.push(i);r.length&&Pz(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var d;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=Bd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([u,m])=>{e.getValue(u).set(m)}),this.resolveNoneKeyframes()}}function Rz(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const HE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,mN=30,Lz=t=>!isNaN(parseFloat(t));class Mz{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var l,d;const a=Gi.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();i&&((d=this.events.renderRequest)==null||d.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Lz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new O2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ir.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mN)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mN);return dE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yh(t,e){return new Mz(t,e)}const{schedule:Z2}=wE(queueMicrotask,!1),no={x:!1,y:!1};function qE(){return no.x||no.y}function Dz(t){return t==="x"||t==="y"?no[t]?null:(no[t]=!0,()=>{no[t]=!1}):no.x||no.y?null:(no.x=no.y=!0,()=>{no.x=no.y=!1})}function GE(t,e){const n=Rz(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function pN(t){return!(t.pointerType==="touch"||qE())}function Oz(t,e,n={}){const[r,i,a]=GE(t,n),l=d=>{if(!pN(d))return;const{target:u}=d,m=e(u,d);if(typeof m!="function"||!u)return;const g=h=>{pN(h)&&(m(h),u.removeEventListener("pointerleave",g))};u.addEventListener("pointerleave",g,i)};return r.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const KE=(t,e)=>e?t===e?!0:KE(t,e.parentElement):!1,ew=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Vz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zz(t){return Vz.has(t.tagName)||t.tabIndex!==-1}const zg=new WeakSet;function gN(t){return e=>{e.key==="Enter"&&t(e)}}function av(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Fz=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=gN(()=>{if(zg.has(n))return;av(n,"down");const i=gN(()=>{av(n,"up")}),a=()=>av(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function xN(t){return ew(t)&&!qE()}function $z(t,e,n={}){const[r,i,a]=GE(t,n),l=d=>{const u=d.currentTarget;if(!xN(d))return;zg.add(u);const m=e(u,d),g=(w,S)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",y),zg.has(u)&&zg.delete(u),xN(w)&&typeof m=="function"&&m(w,{success:S})},h=w=>{g(w,u===window||u===document||n.useGlobalTarget||KE(u,w.target))},y=w=>{g(w,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",y,i)};return r.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),X2(d)&&(d.addEventListener("focus",m=>Fz(m,i)),!zz(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),a}function YE(t){return lE(t)&&"ownerSVGElement"in t}function Uz(t){return YE(t)&&t.tagName==="svg"}const xi=t=>!!(t&&t.getVelocity),Bz=[...UE,ps,$c],Wz=t=>Bz.find($E(t)),tw=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Hz extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=X2(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qz({children:t,isPresent:e,anchorX:n,root:r}){const i=b.useId(),a=b.useRef(null),l=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=b.useContext(tw);return b.useInsertionEffect(()=>{const{width:u,height:m,top:g,left:h,right:y}=l.current;if(e||!a.current||!u||!m)return;const w=n==="left"?`left: ${h}`:`right: ${y}`;a.current.dataset.motionPopId=i;const S=document.createElement("style");d&&(S.nonce=d);const N=r??document.head;return N.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${m}px !important;
            ${w}px !important;
            top: ${g}px !important;
          }
        `),()=>{N.removeChild(S),N.contains(S)&&N.removeChild(S)}},[e]),s.jsx(Hz,{isPresent:e,childRef:a,sizeRef:l,children:b.cloneElement(t,{ref:a})})}const Gz=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l,anchorX:d,root:u})=>{const m=P2(Kz),g=b.useId();let h=!0,y=b.useMemo(()=>(h=!1,{id:g,initial:e,isPresent:n,custom:i,onExitComplete:w=>{m.set(w,!0);for(const S of m.values())if(!S)return;r&&r()},register:w=>(m.set(w,!1),()=>m.delete(w))}),[n,m,r]);return a&&h&&(y={...y}),b.useMemo(()=>{m.forEach((w,S)=>m.set(S,!1))},[n]),b.useEffect(()=>{!n&&!m.size&&r&&r()},[n]),l==="popLayout"&&(t=s.jsx(qz,{isPresent:n,anchorX:d,root:u,children:t})),s.jsx(px.Provider,{value:y,children:t})};function Kz(){return new Map}function XE(t=!0){const e=b.useContext(px);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=b.useId();b.useEffect(()=>{if(t)return i(a)},[t]);const l=b.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const dg=t=>t.key||"";function yN(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const sn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:d="left",root:u})=>{const[m,g]=XE(l),h=b.useMemo(()=>yN(t),[t]),y=l&&!m?[]:h.map(dg),w=b.useRef(!0),S=b.useRef(h),N=P2(()=>new Map),[_,D]=b.useState(h),[A,L]=b.useState(h);aE(()=>{w.current=!1,S.current=h;for(let R=0;R<A.length;R++){const E=dg(A[R]);y.includes(E)?N.delete(E):N.get(E)!==!0&&N.set(E,!1)}},[A,y.length,y.join("-")]);const I=[];if(h!==_){let R=[...h];for(let E=0;E<A.length;E++){const M=A[E],O=dg(M);y.includes(O)||(R.splice(E,0,M),I.push(M))}return a==="wait"&&I.length&&(R=I),L(yN(R)),D(h),null}const{forceRender:F}=b.useContext(A2);return s.jsx(s.Fragment,{children:A.map(R=>{const E=dg(R),M=l&&!m?!1:h===A||y.includes(E),O=()=>{if(N.has(E))N.set(E,!0);else return;let j=!0;N.forEach(U=>{U||(j=!1)}),j&&(F==null||F(),L(S.current),l&&(g==null||g()),r&&r())};return s.jsx(Gz,{isPresent:M,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:M?void 0:O,anchorX:d,children:R},E)})})},QE=b.createContext({strict:!1}),vN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vh={};for(const t in vN)vh[t]={isEnabled:e=>vN[t].some(n=>!!e[n])};function Yz(t){for(const e in t)vh[e]={...vh[e],...t[e]}}const Xz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Xz.has(t)}let JE=t=>!_0(t);function Qz(t){typeof t=="function"&&(JE=e=>e.startsWith("on")?!_0(e):t(e))}try{Qz(require("@emotion/is-prop-valid").default)}catch{}function Jz(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(JE(i)||n===!0&&_0(i)||!e&&!_0(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Zz(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const gx=b.createContext({});function xx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function jm(t){return typeof t=="string"||Array.isArray(t)}const nw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rw=["initial",...nw];function yx(t){return xx(t.animate)||rw.some(e=>jm(t[e]))}function ZE(t){return!!(yx(t)||t.variants)}function eF(t,e){if(yx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||jm(n)?n:void 0,animate:jm(r)?r:void 0}}return t.inherit!==!1?e:{}}function tF(t){const{initial:e,animate:n}=eF(t,b.useContext(gx));return b.useMemo(()=>({initial:e,animate:n}),[bN(e),bN(n)])}function bN(t){return Array.isArray(t)?t.join(" "):t}const nF=Symbol.for("motionComponentSymbol");function Zu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rF(t,e,n){return b.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Zu(n)&&(n.current=r))},[e])}const sw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sF="framerAppearId",e6="data-"+sw(sF),t6=b.createContext({});function iF(t,e,n,r,i){var N,_;const{visualElement:a}=b.useContext(gx),l=b.useContext(QE),d=b.useContext(px),u=b.useContext(tw).reducedMotion,m=b.useRef(null);r=r||l.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:a,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const g=m.current,h=b.useContext(t6);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&aF(m.current,n,i,h);const y=b.useRef(!1);b.useInsertionEffect(()=>{g&&y.current&&g.update(n,d)});const w=n[e6],S=b.useRef(!!w&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,w))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,w)));return aE(()=>{g&&(y.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Z2.render(g.render),S.current&&g.animationState&&g.animationState.animateChanges())}),b.useEffect(()=>{g&&(!S.current&&g.animationState&&g.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,w)}),S.current=!1))}),g}function aF(t,e,n,r){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:m,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:n6(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&Zu(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:u,layoutRoot:m})}function n6(t){if(t)return t.options.allowProjection!==!1?t.projection:n6(t.parent)}function oF({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Yz(t);function a(d,u){let m;const g={...b.useContext(tw),...d,layoutId:lF(d)},{isStatic:h}=g,y=tF(d),w=r(d,h);if(!h&&I2){cF();const S=dF(g);m=S.MeasureLayout,y.visualElement=iF(i,w,g,e,S.ProjectionNode)}return s.jsxs(gx.Provider,{value:y,children:[m&&y.visualElement?s.jsx(m,{visualElement:y.visualElement,...g}):null,n(i,d,rF(w,y.visualElement,u),w,h,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=b.forwardRef(a);return l[nF]=i,l}function lF({layoutId:t}){const e=b.useContext(A2).id;return e&&t!==void 0?e+"-"+t:t}function cF(t,e){b.useContext(QE).strict}function dF(t){const{drag:e,layout:n}=vh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const km={};function uF(t){for(const e in t)km[e]=t[e],F2(e)&&(km[e].isCSSVariable=!0)}function r6(t,{layout:e,layoutId:n}){return Fh.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!km[t]||t==="opacity")}const hF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fF=zh.length;function mF(t,e,n){let r="",i=!0;for(let a=0;a<fF;a++){const l=zh[a],d=t[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||n){const m=HE(d,J2[l]);if(!u){i=!1;const g=hF[l]||l;r+=`${g}(${m}) `}n&&(e[l]=m)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function iw(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const u in e){const m=e[u];if(Fh.has(u)){l=!0;continue}else if(F2(u)){i[u]=m;continue}else{const g=HE(m,J2[u]);u.startsWith("origin")?(d=!0,a[u]=g):r[u]=g}}if(e.transform||(l||n?r.transform=mF(e,t.transform,n):r.transform&&(r.transform="none")),d){const{originX:u="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${u} ${m} ${g}`}}const aw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function s6(t,e,n){for(const r in e)!xi(e[r])&&!r6(r,n)&&(t[r]=e[r])}function pF({transformTemplate:t},e){return b.useMemo(()=>{const n=aw();return iw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function gF(t,e){const n=t.style||{},r={};return s6(r,n,t),Object.assign(r,pF(t,e)),r}function xF(t,e){const n={},r=gF(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const yF={offset:"stroke-dashoffset",array:"stroke-dasharray"},vF={offset:"strokeDashoffset",array:"strokeDasharray"};function bF(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?yF:vF;t[a.offset]=un.transform(-r);const l=un.transform(e),d=un.transform(n);t[a.array]=`${l} ${d}`}function i6(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...d},u,m,g){if(iw(t,d,m),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:y}=t;h.transform&&(y.transform=h.transform,delete h.transform),(y.transform||h.transformOrigin)&&(y.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),y.transform&&(y.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&bF(h,i,a,l,!1)}const a6=()=>({...aw(),attrs:{}}),o6=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wF(t,e,n,r){const i=b.useMemo(()=>{const a=a6();return i6(a,e,o6(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};s6(a,t.style,t),i.style={...a,...i.style}}return i}const jF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ow(t){return typeof t!="string"||t.includes("-")?!1:!!(jF.indexOf(t)>-1||/[A-Z]/u.test(t))}function kF(t=!1){return(n,r,i,{latestValues:a},l)=>{const u=(ow(n)?wF:xF)(r,a,l,n),m=Jz(r,typeof n=="string",t),g=n!==b.Fragment?{...m,...u,ref:i}:{},{children:h}=r,y=b.useMemo(()=>xi(h)?h.get():h,[h]);return b.createElement(n,{...g,children:y})}}function wN(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function lw(t,e,n,r){if(typeof e=="function"){const[i,a]=wN(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=wN(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Fg(t){return xi(t)?t.get():t}function NF({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:_F(n,r,i,t),renderState:e()}}const l6=t=>(e,n)=>{const r=b.useContext(gx),i=b.useContext(px),a=()=>NF(t,e,r,i);return n?a():P2(a)};function _F(t,e,n,r){const i={},a=r(t,{});for(const y in a)i[y]=Fg(a[y]);let{initial:l,animate:d}=t;const u=yx(t),m=ZE(t);e&&m&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const h=g?d:l;if(h&&typeof h!="boolean"&&!xx(h)){const y=Array.isArray(h)?h:[h];for(let w=0;w<y.length;w++){const S=lw(t,y[w]);if(S){const{transitionEnd:N,transition:_,...D}=S;for(const A in D){let L=D[A];if(Array.isArray(L)){const I=g?L.length-1:0;L=L[I]}L!==null&&(i[A]=L)}for(const A in N)i[A]=N[A]}}}return i}function cw(t,e,n){var a;const{style:r}=t,i={};for(const l in r)(xi(r[l])||e.style&&xi(e.style[l])||r6(l,t)||((a=n==null?void 0:n.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(i[l]=r[l]);return i}const SF={useVisualState:l6({scrapeMotionValuesFromProps:cw,createRenderState:aw})};function c6(t,e,n){const r=cw(t,e,n);for(const i in t)if(xi(t[i])||xi(e[i])){const a=zh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const CF={useVisualState:l6({scrapeMotionValuesFromProps:c6,createRenderState:a6})};function EF(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...ow(r)?CF:SF,preloadedFeatures:t,useRender:kF(i),createVisualElement:e,Component:r};return oF(l)}}function Nm(t,e,n){const r=t.getProps();return lw(r,e,n!==void 0?n:r.custom,t)}const Ib=t=>Array.isArray(t);function TF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yh(n))}function AF(t){return Ib(t)?t[t.length-1]||0:t}function PF(t,e){const n=Nm(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const l in a){const d=AF(a[l]);TF(t,l,d)}}function IF(t){return!!(xi(t)&&t.add)}function Rb(t,e){const n=t.getValue("willChange");if(IF(n))return n.add(e);if(!n&&Rl.WillChange){const r=new Rl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function d6(t){return t.props[e6]}const RF=t=>t!==null;function LF(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(RF),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const MF={type:"spring",stiffness:500,damping:25,restSpeed:10},DF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OF={type:"keyframes",duration:.8},VF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zF=(t,{keyframes:e})=>e.length>2?OF:Fh.has(t)?t.startsWith("scale")?DF(e[1]):MF:VF;function FF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:u,elapsed:m,...g}){return!!Object.keys(g).length}const dw=(t,e,n,r={},i,a)=>l=>{const d=Q2(r,t)||{},u=d.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Bo(u);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:y=>{e.set(y),d.onUpdate&&d.onUpdate(y)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};FF(d)||Object.assign(g,zF(t,g)),g.duration&&(g.duration=Bo(g.duration)),g.repeatDelay&&(g.repeatDelay=Bo(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let h=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(h=!0)),(Rl.instantAnimations||Rl.skipAnimations)&&(h=!0,g.duration=0,g.delay=0),g.allowFlatten=!d.type&&!d.ease,h&&!a&&e.get()!==void 0){const y=LF(g.keyframes,d);if(y!==void 0){Ir.update(()=>{g.onUpdate(y),g.onComplete()});return}}return d.isSync?new K2(g):new bz(g)};function $F({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function u6(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...d}=e;r&&(a=r);const u=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in d){const h=t.getValue(g,t.latestValues[g]??null),y=d[g];if(y===void 0||m&&$F(m,g))continue;const w={delay:n,...Q2(a||{},g)},S=h.get();if(S!==void 0&&!h.isAnimating&&!Array.isArray(y)&&y===S&&!w.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const D=d6(t);if(D){const A=window.MotionHandoffAnimation(D,g,Ir);A!==null&&(w.startTime=A,N=!0)}}Rb(t,g),h.start(dw(g,h,y,t.shouldReduceMotion&&FE.has(g)?{type:!1}:w,t,N));const _=h.animation;_&&u.push(_)}return l&&Promise.all(u).then(()=>{Ir.update(()=>{l&&PF(t,l)})}),u}function Lb(t,e,n={}){var u;const r=Nm(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(u6(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:h,staggerDirection:y}=i;return UF(t,e,m,g,h,y,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[m,g]=d==="beforeChildren"?[a,l]:[l,a];return m().then(()=>g())}else return Promise.all([a(),l(n.delay)])}function UF(t,e,n=0,r=0,i=0,a=1,l){const d=[],u=t.variantChildren.size,m=(u-1)*i,g=typeof r=="function",h=g?y=>r(y,u):a===1?(y=0)=>y*i:(y=0)=>m-y*i;return Array.from(t.variantChildren).sort(BF).forEach((y,w)=>{y.notify("AnimationStart",e),d.push(Lb(y,e,{...l,delay:n+(g?0:r)+h(w)}).then(()=>y.notify("AnimationComplete",e)))}),Promise.all(d)}function BF(t,e){return t.sortNodePosition(e)}function WF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Lb(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Lb(t,e,n);else{const i=typeof e=="function"?Nm(t,e,n.custom):e;r=Promise.all(u6(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function h6(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const HF=rw.length;function f6(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?f6(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<HF;n++){const r=rw[n],i=t.props[r];(jm(i)||i===!1)&&(e[r]=i)}return e}const qF=[...nw].reverse(),GF=nw.length;function KF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>WF(t,n,r)))}function YF(t){let e=KF(t),n=jN(),r=!0;const i=u=>(m,g)=>{var y;const h=Nm(t,g,u==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(h){const{transition:w,transitionEnd:S,...N}=h;m={...m,...N,...S}}return m};function a(u){e=u(t)}function l(u){const{props:m}=t,g=f6(t.parent)||{},h=[],y=new Set;let w={},S=1/0;for(let _=0;_<GF;_++){const D=qF[_],A=n[D],L=m[D]!==void 0?m[D]:g[D],I=jm(L),F=D===u?A.isActive:null;F===!1&&(S=_);let R=L===g[D]&&L!==m[D]&&I;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),A.protectedKeys={...w},!A.isActive&&F===null||!L&&!A.prevProp||xx(L)||typeof L=="boolean")continue;const E=XF(A.prevProp,L);let M=E||D===u&&A.isActive&&!R&&I||_>S&&I,O=!1;const j=Array.isArray(L)?L:[L];let U=j.reduce(i(D),{});F===!1&&(U={});const{prevResolvedValues:H={}}=A,V={...H,...U},K=we=>{M=!0,y.has(we)&&(O=!0,y.delete(we)),A.needsAnimating[we]=!0;const Z=t.getValue(we);Z&&(Z.liveStyle=!1)};for(const we in V){const Z=U[we],le=H[we];if(w.hasOwnProperty(we))continue;let re=!1;Ib(Z)&&Ib(le)?re=!h6(Z,le):re=Z!==le,re?Z!=null?K(we):y.add(we):Z!==void 0&&y.has(we)?K(we):A.protectedKeys[we]=!0}A.prevProp=L,A.prevResolvedValues=U,A.isActive&&(w={...w,...U}),r&&t.blockInitialAnimation&&(M=!1),M&&(!(R&&E)||O)&&h.push(...j.map(we=>({animation:we,options:{type:D}})))}if(y.size){const _={};if(typeof m.initial!="boolean"){const D=Nm(t,Array.isArray(m.initial)?m.initial[0]:m.initial);D&&D.transition&&(_.transition=D.transition)}y.forEach(D=>{const A=t.getBaseTarget(D),L=t.getValue(D);L&&(L.liveStyle=!0),_[D]=A??null}),h.push({animation:_})}let N=!!h.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(h):Promise.resolve()}function d(u,m){var h;if(n[u].isActive===m)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(y=>{var w;return(w=y.animationState)==null?void 0:w.setActive(u,m)}),n[u].isActive=m;const g=l(u);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>n,reset:()=>{n=jN(),r=!0}}}function XF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!h6(e,t):!1}function Ed(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jN(){return{animate:Ed(!0),whileInView:Ed(),whileHover:Ed(),whileTap:Ed(),whileDrag:Ed(),whileFocus:Ed(),exit:Ed()}}class Qc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class QF extends Qc{constructor(e){super(e),e.animationState||(e.animationState=YF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();xx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let JF=0;class ZF extends Qc{constructor(){super(...arguments),this.id=JF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const e$={animation:{Feature:QF},exit:{Feature:ZF}};function _m(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ep(t){return{point:{x:t.pageX,y:t.pageY}}}const t$=t=>e=>ew(e)&&t(e,ep(e));function Kf(t,e,n,r){return _m(t,e,t$(n),r)}function m6({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function n$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function r$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const p6=1e-4,s$=1-p6,i$=1+p6,g6=.01,a$=0-g6,o$=0+g6;function Ci(t){return t.max-t.min}function l$(t,e,n){return Math.abs(t-e)<=n}function kN(t,e,n,r=.5){t.origin=r,t.originPoint=Or(e.min,e.max,t.origin),t.scale=Ci(n)/Ci(e),t.translate=Or(n.min,n.max,t.origin)-t.originPoint,(t.scale>=s$&&t.scale<=i$||isNaN(t.scale))&&(t.scale=1),(t.translate>=a$&&t.translate<=o$||isNaN(t.translate))&&(t.translate=0)}function Yf(t,e,n,r){kN(t.x,e.x,n.x,r?r.originX:void 0),kN(t.y,e.y,n.y,r?r.originY:void 0)}function NN(t,e,n){t.min=n.min+e.min,t.max=t.min+Ci(e)}function c$(t,e,n){NN(t.x,e.x,n.x),NN(t.y,e.y,n.y)}function _N(t,e,n){t.min=e.min-n.min,t.max=t.min+Ci(e)}function Xf(t,e,n){_N(t.x,e.x,n.x),_N(t.y,e.y,n.y)}const SN=()=>({translate:0,scale:1,origin:0,originPoint:0}),eh=()=>({x:SN(),y:SN()}),CN=()=>({min:0,max:0}),rs=()=>({x:CN(),y:CN()});function ba(t){return[t("x"),t("y")]}function ov(t){return t===void 0||t===1}function Mb({scale:t,scaleX:e,scaleY:n}){return!ov(t)||!ov(e)||!ov(n)}function Ad(t){return Mb(t)||x6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function x6(t){return EN(t.x)||EN(t.y)}function EN(t){return t&&t!=="0%"}function S0(t,e,n){const r=t-n,i=e*r;return n+i}function TN(t,e,n,r,i){return i!==void 0&&(t=S0(t,i,r)),S0(t,n,r)+e}function Db(t,e=0,n=1,r,i){t.min=TN(t.min,e,n,r,i),t.max=TN(t.max,e,n,r,i)}function y6(t,{x:e,y:n}){Db(t.x,e.translate,e.scale,e.originPoint),Db(t.y,n.translate,n.scale,n.originPoint)}const AN=.999999999999,PN=1.0000000000001;function d$(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=n[d],l=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&nh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,y6(t,l)),r&&Ad(a.latestValues)&&nh(t,a.latestValues))}e.x<PN&&e.x>AN&&(e.x=1),e.y<PN&&e.y>AN&&(e.y=1)}function th(t,e){t.min=t.min+e,t.max=t.max+e}function IN(t,e,n,r,i=.5){const a=Or(t.min,t.max,i);Db(t,e,n,a,r)}function nh(t,e){IN(t.x,e.x,e.scaleX,e.scale,e.originX),IN(t.y,e.y,e.scaleY,e.scale,e.originY)}function v6(t,e){return m6(r$(t.getBoundingClientRect(),e))}function u$(t,e,n){const r=v6(t,n),{scroll:i}=e;return i&&(th(r.x,i.offset.x),th(r.y,i.offset.y)),r}const b6=({current:t})=>t?t.ownerDocument.defaultView:null,RN=(t,e)=>Math.abs(t-e);function h$(t,e){const n=RN(t.x,e.x),r=RN(t.y,e.y);return Math.sqrt(n**2+r**2)}class w6{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=cv(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=h$(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!S)return;const{point:N}=y,{timestamp:_}=Qs;this.history.push({...N,timestamp:_});const{onStart:D,onMove:A}=this.handlers;w||(D&&D(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=lv(w,this.transformPagePoint),Ir.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:S,onSessionEnd:N,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=cv(y.type==="pointercancel"?this.lastMoveEventInfo:lv(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(y,D),N&&N(y,D)},!ew(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=i||window;const d=ep(e),u=lv(d,this.transformPagePoint),{point:m}=u,{timestamp:g}=Qs;this.history=[{...m,timestamp:g}];const{onSessionStart:h}=n;h&&h(e,cv(u,this.history)),this.removeListeners=Qm(Kf(this.contextWindow,"pointermove",this.handlePointerMove),Kf(this.contextWindow,"pointerup",this.handlePointerUp),Kf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fc(this.updatePoint)}}function lv(t,e){return e?{point:e(t.point)}:t}function LN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function cv({point:t},e){return{point:t,delta:LN(t,j6(e)),offset:LN(t,f$(e)),velocity:m$(e,.1)}}function f$(t){return t[0]}function j6(t){return t[t.length-1]}function m$(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=j6(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Bo(e)));)n--;if(!r)return{x:0,y:0};const a=Wo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function p$(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Or(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Or(n,t,r.max):Math.min(t,n)),t}function MN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function g$(t,{top:e,left:n,bottom:r,right:i}){return{x:MN(t.x,n,i),y:MN(t.y,e,r)}}function DN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function x$(t,e){return{x:DN(t.x,e.x),y:DN(t.y,e.y)}}function y$(t,e){let n=.5;const r=Ci(t),i=Ci(e);return i>r?n=vm(e.min,e.max-r,t.min):r>i&&(n=vm(t.min,t.max-i,e.min)),Il(0,1,n)}function v$(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ob=.35;function b$(t=Ob){return t===!1?t=0:t===!0&&(t=Ob),{x:ON(t,"left","right"),y:ON(t,"top","bottom")}}function ON(t,e,n){return{min:VN(t,e),max:VN(t,n)}}function VN(t,e){return typeof t=="number"?t:t[e]||0}const w$=new WeakMap;class j${constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ep(h).point)},l=(h,y)=>{const{drag:w,dragPropagation:S,onDragStart:N}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Dz(w),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ba(D=>{let A=this.getAxisMotionValue(D).get()||0;if(Ho.test(A)){const{projection:L}=this.visualElement;if(L&&L.layout){const I=L.layout.layoutBox[D];I&&(A=Ci(I)*(parseFloat(A)/100))}}this.originPoint[D]=A}),N&&Ir.postRender(()=>N(h,y)),Rb(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},d=(h,y)=>{this.latestPointerEvent=h,this.latestPanInfo=y;const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:N,onDrag:_}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:D}=y;if(S&&this.currentDirection===null){this.currentDirection=k$(D),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",y.point,D),this.updateAxis("y",y.point,D),this.visualElement.render(),_&&_(h,y)},u=(h,y)=>{this.latestPointerEvent=h,this.latestPanInfo=y,this.stop(h,y),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>ba(h=>{var y;return this.getAnimationState(h)==="paused"&&((y=this.getAxisMotionValue(h).animation)==null?void 0:y.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new w6(e,{onSessionStart:a,onStart:l,onMove:d,onSessionEnd:u,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:r,contextWindow:b6(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&Ir.postRender(()=>d(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ug(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=p$(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Zu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=g$(r.layoutBox,e):this.constraints=!1,this.elastic=b$(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ba(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=v$(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=u$(r,i.root,this.visualElement.getTransformPagePoint());let l=x$(i.layout.layoutBox,a);if(n){const d=n(n$(l));this.hasMutatedConstraints=!!d,d&&(l=m6(d))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},m=ba(g=>{if(!ug(g,n,this.currentDirection))return;let h=u&&u[g]||{};l&&(h={min:0,max:0});const y=i?200:1e6,w=i?40:1e7,S={type:"inertia",velocity:r?e[g]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(g,S)});return Promise.all(m).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Rb(this.visualElement,e),r.start(dw(e,r,0,n,this.visualElement,!1))}stopAnimation(){ba(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ba(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ba(n=>{const{drag:r}=this.getProps();if(!ug(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[n];a.set(e[n]-Or(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ba(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();i[l]=y$({min:u,max:u},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ba(l=>{if(!ug(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:m}=this.constraints[l];d.set(Or(u,m,i[l]))})}addListeners(){if(!this.visualElement.current)return;w$.set(this.visualElement,this);const e=this.visualElement.current,n=Kf(e,"pointerdown",u=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Zu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ir.read(r);const l=_m(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:m})=>{this.isDragging&&m&&(ba(g=>{const h=this.getAxisMotionValue(g);h&&(this.originPoint[g]+=u[g].translate,h.set(h.get()+u[g].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=Ob,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function ug(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function k$(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class N$ extends Qc{constructor(e){super(e),this.removeGroupControls=Ta,this.removeListeners=Ta,this.controls=new j$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ta}unmount(){this.removeGroupControls(),this.removeListeners()}}const zN=t=>(e,n)=>{t&&Ir.postRender(()=>t(e,n))};class _$ extends Qc{constructor(){super(...arguments),this.removePointerDownListener=Ta}onPointerDown(e){this.session=new w6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:b6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:zN(e),onStart:zN(n),onMove:r,onEnd:(a,l)=>{delete this.session,i&&Ir.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=Kf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $g={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(un.test(t))t=parseFloat(t);else return t;const n=FN(t,e.target.x),r=FN(t,e.target.y);return`${n}% ${r}%`}},S$={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=$c.parse(t);if(i.length>5)return r;const a=$c.createTransformer(t),l=typeof i[0]!="number"?1:0,d=n.x.scale*e.x,u=n.y.scale*e.y;i[0+l]/=d,i[1+l]/=u;const m=Or(d,u,.5);return typeof i[2+l]=="number"&&(i[2+l]/=m),typeof i[3+l]=="number"&&(i[3+l]/=m),a(i)}};let $N=!1;class C$ extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;uF(E$),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),$N&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),$g.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,$N=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Ir.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Z2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function k6(t){const[e,n]=XE(),r=b.useContext(A2);return s.jsx(C$,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(t6),isPresent:e,safeToRemove:n})}const E$={borderRadius:{...kf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kf,borderTopRightRadius:kf,borderBottomLeftRadius:kf,borderBottomRightRadius:kf,boxShadow:S$};function T$(t,e,n){const r=xi(t)?t:yh(t);return r.start(dw("",r,e,n)),r.animation}const A$=(t,e)=>t.depth-e.depth;class P${constructor(){this.children=[],this.isDirty=!1}add(e){R2(this.children,e),this.isDirty=!0}remove(e){L2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(A$),this.isDirty=!1,this.children.forEach(e)}}function I$(t,e){const n=Gi.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Fc(r),t(a-e))};return Ir.setup(r,!0),()=>Fc(r)}const N6=["TopLeft","TopRight","BottomLeft","BottomRight"],R$=N6.length,UN=t=>typeof t=="string"?parseFloat(t):t,BN=t=>typeof t=="number"||un.test(t);function L$(t,e,n,r,i,a){i?(t.opacity=Or(0,n.opacity??1,M$(r)),t.opacityExit=Or(e.opacity??1,0,D$(r))):a&&(t.opacity=Or(e.opacity??1,n.opacity??1,r));for(let l=0;l<R$;l++){const d=`border${N6[l]}Radius`;let u=WN(e,d),m=WN(n,d);if(u===void 0&&m===void 0)continue;u||(u=0),m||(m=0),u===0||m===0||BN(u)===BN(m)?(t[d]=Math.max(Or(UN(u),UN(m),r),0),(Ho.test(m)||Ho.test(u))&&(t[d]+="%")):t[d]=m}(e.rotate||n.rotate)&&(t.rotate=Or(e.rotate||0,n.rotate||0,r))}function WN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const M$=_6(0,.5,xE),D$=_6(.5,.95,Ta);function _6(t,e,n){return r=>r<t?0:r>e?1:n(vm(t,e,r))}function HN(t,e){t.min=e.min,t.max=e.max}function va(t,e){HN(t.x,e.x),HN(t.y,e.y)}function qN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function GN(t,e,n,r,i){return t-=e,t=S0(t,1/n,r),i!==void 0&&(t=S0(t,1/i,r)),t}function O$(t,e=0,n=1,r=.5,i,a=t,l=t){if(Ho.test(e)&&(e=parseFloat(e),e=Or(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=Or(a.min,a.max,r);t===a&&(d-=e),t.min=GN(t.min,e,n,d,i),t.max=GN(t.max,e,n,d,i)}function KN(t,e,[n,r,i],a,l){O$(t,e[n],e[r],e[i],e.scale,a,l)}const V$=["x","scaleX","originX"],z$=["y","scaleY","originY"];function YN(t,e,n,r){KN(t.x,e,V$,n?n.x:void 0,r?r.x:void 0),KN(t.y,e,z$,n?n.y:void 0,r?r.y:void 0)}function XN(t){return t.translate===0&&t.scale===1}function S6(t){return XN(t.x)&&XN(t.y)}function QN(t,e){return t.min===e.min&&t.max===e.max}function F$(t,e){return QN(t.x,e.x)&&QN(t.y,e.y)}function JN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function C6(t,e){return JN(t.x,e.x)&&JN(t.y,e.y)}function ZN(t){return Ci(t.x)/Ci(t.y)}function e_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class $${constructor(){this.members=[]}add(e){R2(this.members,e),e.scheduleRender()}remove(e){if(L2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function U$(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:g,rotateX:h,rotateY:y,skewX:w,skewY:S}=n;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),h&&(r+=`rotateX(${h}deg) `),y&&(r+=`rotateY(${y}deg) `),w&&(r+=`skewX(${w}deg) `),S&&(r+=`skewY(${S}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(r+=`scale(${d}, ${u})`),r||"none"}const dv=["","X","Y","Z"],B$=1e3;let W$=0;function uv(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function E6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=d6(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ir,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&E6(r)}function T6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},d=e==null?void 0:e()){this.id=W$++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(G$),this.nodes.forEach(Q$),this.nodes.forEach(J$),this.nodes.forEach(K$)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new P$)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new O2),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=YE(l)&&!Uz(l),this.instance=l;const{layoutId:d,layout:u,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),t){let g,h=0;const y=()=>this.root.updateBlockedByResize=!1;Ir.read(()=>{h=window.innerWidth}),t(l,()=>{const w=window.innerWidth;w!==h&&(h=w,this.root.updateBlockedByResize=!0,g&&g(),g=I$(y,250),$g.hasAnimatedSinceResize&&($g.hasAnimatedSinceResize=!1,this.nodes.forEach(r_)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||u)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:h,hasRelativeLayoutChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||m.getDefaultTransition()||rU,{onLayoutAnimationStart:N,onLayoutAnimationComplete:_}=m.getProps(),D=!this.targetLayout||!C6(this.targetLayout,w),A=!h&&y;if(this.options.layoutRoot||this.resumeFrom||A||h&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const L={...Q2(S,"layout"),onPlay:N,onComplete:_};(m.shouldReduceMotion||this.options.layoutRoot)&&(L.delay=0,L.type=!1),this.startAnimation(L),this.setAnimationOrigin(g,A)}else h||r_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Z$),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&E6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const h=this.path[g];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(t_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(n_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(X$),this.nodes.forEach(H$),this.nodes.forEach(q$)):this.nodes.forEach(n_),this.clearAllSnapshots();const d=Gi.now();Qs.delta=Il(0,1e3/60,d-Qs.timestamp),Qs.timestamp=d,Qs.isProcessing=!0,tv.update.process(Qs),tv.preRender.process(Qs),tv.render.process(Qs),Qs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Z2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Y$),this.sharedNodes.forEach(eU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ir.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ir.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ci(this.snapshot.measuredBox.x)&&!Ci(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!S6(this.projectionDelta),u=this.getTransformTemplate(),m=u?u(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;l&&this.instance&&(d||Ad(this.latestValues)||g)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),sU(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return rs();const d=l.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(iU))){const{scroll:g}=this.root;g&&(th(d.x,g.offset.x),th(d.y,g.offset.y))}return d}removeElementScroll(l){var u;const d=rs();if(va(d,l),(u=this.scroll)!=null&&u.wasRoot)return d;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:h,options:y}=g;g!==this.root&&h&&y.layoutScroll&&(h.wasRoot&&va(d,l),th(d.x,h.offset.x),th(d.y,h.offset.y))}return d}applyTransform(l,d=!1){const u=rs();va(u,l);for(let m=0;m<this.path.length;m++){const g=this.path[m];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&nh(u,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Ad(g.latestValues)&&nh(u,g.latestValues)}return Ad(this.latestValues)&&nh(u,this.latestValues),u}removeTransform(l){const d=rs();va(d,l);for(let u=0;u<this.path.length;u++){const m=this.path[u];if(!m.instance||!Ad(m.latestValues))continue;Mb(m.latestValues)&&m.updateSnapshot();const g=rs(),h=m.measurePageBox();va(g,h),YN(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Ad(this.latestValues)&&YN(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var y;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(l||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:h}=this.options;if(!(!this.layout||!(g||h))){if(this.resolvedRelativeTargetAt=Qs.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rs(),this.relativeTargetOrigin=rs(),Xf(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=rs(),this.targetWithTransforms=rs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),c$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):va(this.target,this.layout.layoutBox),y6(this.target,this.targetDelta)):va(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rs(),this.relativeTargetOrigin=rs(),Xf(this.relativeTargetOrigin,this.target,w.target),va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Mb(this.parent.latestValues)||x6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Qs.timestamp&&(u=!1),u)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;va(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,y=this.treeScale.y;d$(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=rs());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qN(this.prevProjectionDelta.x,this.projectionDelta.x),qN(this.prevProjectionDelta.y,this.projectionDelta.y)),Yf(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==y||!e_(this.projectionDelta.x,this.prevProjectionDelta.x)||!e_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=eh(),this.projectionDelta=eh(),this.projectionDeltaWithTransform=eh()}setAnimationOrigin(l,d=!1){const u=this.snapshot,m=u?u.latestValues:{},g={...this.latestValues},h=eh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const y=rs(),w=u?u.source:void 0,S=this.layout?this.layout.source:void 0,N=w!==S,_=this.getStack(),D=!_||_.members.length<=1,A=!!(N&&!D&&this.options.crossfade===!0&&!this.path.some(nU));this.animationProgress=0;let L;this.mixTargetDelta=I=>{const F=I/1e3;s_(h.x,l.x,F),s_(h.y,l.y,F),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xf(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tU(this.relativeTarget,this.relativeTargetOrigin,y,F),L&&F$(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=rs()),va(L,this.relativeTarget)),N&&(this.animationValues=g,L$(g,m,this.latestValues,F,A,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var d,u,m;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(m=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Fc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ir.update(()=>{$g.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yh(0)),this.currentAnimation=T$(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B$),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:m,latestValues:g}=l;if(!(!d||!u||!m)){if(this!==l&&this.layout&&m&&A6(this.options.animationType,this.layout.layoutBox,m.layoutBox)){u=this.target||rs();const h=Ci(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+h;const y=Ci(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+y}va(d,u),nh(d,g),Yf(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new $$),this.sharedNodes.get(l).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var d;const{layoutId:l}=this.options;return l?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:l}=this.options;return l?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const m=this.getStack();m&&m.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const m={};u.z&&uv("z",l,m,this.animationValues);for(let g=0;g<dv.length;g++)uv(`rotate${dv[g]}`,l,m,this.animationValues),uv(`skew${dv[g]}`,l,m,this.animationValues);l.render();for(const g in m)l.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);l.scheduleRender()}applyProjectionStyles(l,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Fg(d==null?void 0:d.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Fg(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Ad(this.latestValues)&&(l.transform=u?u({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let h=U$(this.projectionDeltaWithTransform,this.treeScale,g);u&&(h=u(g,h)),l.transform=h;const{x:y,y:w}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,m.animationValues?l.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const S in km){if(g[S]===void 0)continue;const{correct:N,applyTo:_,isCSSVariable:D}=km[S],A=h==="none"?g[S]:N(g[S],m);if(_){const L=_.length;for(let I=0;I<L;I++)l[_[I]]=A}else D?this.options.visualElement.renderState.vars[S]=A:l[S]=A}this.options.layoutId&&(l.pointerEvents=m===this?Fg(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(t_),this.root.sharedNodes.clear()}}}function H$(t){t.updateLayout()}function q$(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?ba(h=>{const y=l?e.measuredBox[h]:e.layoutBox[h],w=Ci(y);y.min=r[h].min,y.max=y.min+w}):A6(a,e.layoutBox,r)&&ba(h=>{const y=l?e.measuredBox[h]:e.layoutBox[h],w=Ci(r[h]);y.max=y.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+w)});const d=eh();Yf(d,r,e.layoutBox);const u=eh();l?Yf(u,t.applyTransform(i,!0),e.measuredBox):Yf(u,r,e.layoutBox);const m=!S6(d);let g=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:y,layout:w}=h;if(y&&w){const S=rs();Xf(S,e.layoutBox,y.layoutBox);const N=rs();Xf(N,r,w.layoutBox),C6(S,N)||(g=!0),h.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=S,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function G$(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function K$(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Y$(t){t.clearSnapshot()}function t_(t){t.clearMeasurements()}function n_(t){t.isLayoutDirty=!1}function X$(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function r_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Q$(t){t.resolveTargetDelta()}function J$(t){t.calcProjection()}function Z$(t){t.resetSkewAndRotation()}function eU(t){t.removeLeadSnapshot()}function s_(t,e,n){t.translate=Or(e.translate,0,n),t.scale=Or(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function i_(t,e,n,r){t.min=Or(e.min,n.min,r),t.max=Or(e.max,n.max,r)}function tU(t,e,n,r){i_(t.x,e.x,n.x,r),i_(t.y,e.y,n.y,r)}function nU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rU={duration:.45,ease:[.4,0,.1,1]},a_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),o_=a_("applewebkit/")&&!a_("chrome/")?Math.round:Ta;function l_(t){t.min=o_(t.min),t.max=o_(t.max)}function sU(t){l_(t.x),l_(t.y)}function A6(t,e,n){return t==="position"||t==="preserve-aspect"&&!l$(ZN(e),ZN(n),.2)}function iU(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const aU=T6({attachResizeListener:(t,e)=>_m(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hv={current:void 0},P6=T6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!hv.current){const t=new aU({});t.mount(window),t.setOptions({layoutScroll:!0}),hv.current=t}return hv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oU={pan:{Feature:_$},drag:{Feature:N$,ProjectionNode:P6,MeasureLayout:k6}};function c_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Ir.postRender(()=>a(e,ep(e)))}class lU extends Qc{mount(){const{current:e}=this.node;e&&(this.unmount=Oz(e,(n,r)=>(c_(this.node,r,"Start"),i=>c_(this.node,i,"End"))))}unmount(){}}class cU extends Qc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qm(_m(this.node.current,"focus",()=>this.onFocus()),_m(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function d_(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Ir.postRender(()=>a(e,ep(e)))}class dU extends Qc{mount(){const{current:e}=this.node;e&&(this.unmount=$z(e,(n,r)=>(d_(this.node,r,"Start"),(i,{success:a})=>d_(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vb=new WeakMap,fv=new WeakMap,uU=t=>{const e=Vb.get(t.target);e&&e(t)},hU=t=>{t.forEach(uU)};function fU({root:t,...e}){const n=t||document;fv.has(n)||fv.set(n,{});const r=fv.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(hU,{root:t,...e})),r[i]}function mU(t,e,n){const r=fU(e);return Vb.set(t,n),r.observe(t),()=>{Vb.delete(t),r.unobserve(t)}}const pU={some:0,all:1};class gU extends Qc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pU[i]},d=u=>{const{isIntersecting:m}=u;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:h}=this.node.getProps(),y=m?g:h;y&&y(u)};return mU(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(xU(e,n))&&this.startObserver()}unmount(){}}function xU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const yU={inView:{Feature:gU},tap:{Feature:dU},focus:{Feature:cU},hover:{Feature:lU}},vU={layout:{ProjectionNode:P6,MeasureLayout:k6}},zb={current:null},I6={current:!1};function bU(){if(I6.current=!0,!!I2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zb.current=t.matches;t.addEventListener("change",e),e()}else zb.current=!1}const wU=new WeakMap;function jU(t,e,n){for(const r in e){const i=e[r],a=n[r];if(xi(i))t.addValue(r,i);else if(xi(a))t.addValue(r,yh(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,yh(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const u_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kU{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Y2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Gi.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ir.render(this.render,!1,!0))};const{latestValues:u,renderState:m}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=yx(n),this.isVariantNode=ZE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in h){const w=h[y];u[y]!==void 0&&xi(w)&&w.set(u[y],!1)}}mount(e){this.current=e,wU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),I6.current||bU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Fc(this.notifyUpdate),Fc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Fh.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Ir.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vh){const n=vh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<u_.length;r++){const i=u_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=jU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(oE(r)||cE(r))?r=parseFloat(r):!Wz(r)&&$c.test(n)&&(r=WE(e,n)),this.setBaseTarget(e,xi(r)?r.get():r)),xi(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=lw(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!xi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new O2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class R6 extends kU{constructor(){super(...arguments),this.KeyframeResolver=Iz}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function L6(t,{style:e,vars:n},r,i){const a=t.style;let l;for(l in e)a[l]=e[l];i==null||i.applyProjectionStyles(a,r);for(l in n)a.setProperty(l,n[l])}function NU(t){return window.getComputedStyle(t)}class _U extends R6{constructor(){super(...arguments),this.type="html",this.renderInstance=L6}readValueFromInstance(e,n){var r;if(Fh.has(n))return(r=this.projection)!=null&&r.isProjecting?Sb(n):QV(e,n);{const i=NU(e),a=(F2(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return v6(e,n)}build(e,n,r){iw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return cw(e,n,r)}}const M6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SU(t,e,n,r){L6(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(M6.has(i)?i:sw(i),e.attrs[i])}class CU extends R6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rs}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Fh.has(n)){const r=BE(n);return r&&r.default||0}return n=M6.has(n)?n:sw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return c6(e,n,r)}build(e,n,r){i6(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){SU(e,n,r,i)}mount(e){this.isSVGTag=o6(e.tagName),super.mount(e)}}const EU=(t,e)=>ow(t)?new CU(e):new _U(e,{allowProjection:t!==b.Fragment}),TU=EF({...e$,...yU,...oU,...vU},EU),Q=Zz(TU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),h_=t=>{const e=PU(t);return e.charAt(0).toUpperCase()+e.slice(1)},D6=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),IU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...d},u)=>b.createElement("svg",{ref:u,...RU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:D6("lucide",i),...!a&&!IU(d)&&{"aria-hidden":"true"},...d},[...l.map(([m,g])=>b.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(t,e)=>{const n=b.forwardRef(({className:r,...i},a)=>b.createElement(LU,{ref:a,iconNode:e,className:D6(`lucide-${AU(h_(t))}`,`lucide-${t}`,r),...i}));return n.displayName=h_(t),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Sm=St("arrow-left",MU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Hd=St("bell",DU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],O6=St("calendar",OU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Fb=St("camera",VU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ka=St("check",zU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$b=St("chevron-down",FU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],UU=St("chevron-left",$U);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_a=St("chevron-right",BU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nc=St("circle-alert",WU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ll=St("circle-check-big",HU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qf=St("circle-check",qU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bh=St("circle-x",GU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],$h=St("clock",KU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],uw=St("credit-card",YU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],QU=St("download",XU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ub=St("external-link",JU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Id=St("eye",ZU);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xu=St("eye-off",eB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],nB=St("fingerprint",tB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sB=St("funnel",rB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],aB=St("gift",iB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Bb=St("globe",oB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Jf=St("house",lB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],f_=St("image",cB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],V6=St("info",dB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Wb=St("key",uB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fB=St("locate-fixed",hB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pB=St("lock",mB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Cm=St("log-out",gB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Zf=St("mail",xB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Uh=St("map-pin",yB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],hg=St("map",vB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],m_=St("moon",bB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Uc=St("package",wB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],kB=St("palette",jB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],_B=St("pen-line",NB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],z6=St("pen",SB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],EB=St("pencil",CB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],hw=St("phone",TB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bh=St("plus",AB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],IB=St("refresh-cw",PB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],mv=St("rotate-cw",RB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],p_=St("save",LB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],C0=St("search",MB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],OB=St("send",DB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qd=St("settings",VB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],FB=St("share-2",zB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],UB=St("shield-check",$B);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Bc=St("shield",BB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],F6=St("shopping-bag",WB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],$6=St("shopping-cart",HB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],GB=St("smartphone",qB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],U6=St("sparkles",KB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],pv=St("square-pen",YB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],QB=St("star",XB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],xr=St("store",JB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],g_=St("sun",ZB);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],tW=St("tag",eW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],wh=St("trash-2",nW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],sW=St("trending-up",rW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Em=St("triangle-alert",iW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],oW=St("trophy",aW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],em=St("upload",lW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hb=St("user-check",cW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],eu=St("user-plus",dW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tu=St("user",uW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],nu=St("users",hW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gs=St("x",fW);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],B6=St("zap",mW),tp=({notifications:t,onRemove:e})=>{b.useEffect(()=>{t.forEach(i=>{if(!i.persistent){const a=setTimeout(()=>{e(i.id)},5e3);return()=>clearTimeout(a)}})},[t,e]);const n=i=>{switch(i){case"success":return s.jsx(Ll,{className:"w-5 h-5"});case"error":return s.jsx(Nc,{className:"w-5 h-5"});case"warning":return s.jsx(Em,{className:"w-5 h-5"});default:return s.jsx(V6,{className:"w-5 h-5"})}},r=i=>{switch(i){case"success":return{light:"bg-green-50 border-green-200 text-green-800",dark:"dark:bg-green-900/20 dark:border-green-800 dark:text-green-200",icon:"text-green-600 dark:text-green-400"};case"error":return{light:"bg-red-50 border-red-200 text-red-800",dark:"dark:bg-red-900/20 dark:border-red-800 dark:text-red-200",icon:"text-red-600 dark:text-red-400"};case"warning":return{light:"bg-yellow-50 border-yellow-200 text-yellow-800",dark:"dark:bg-yellow-900/20 dark:border-yellow-800 dark:text-yellow-200",icon:"text-yellow-600 dark:text-yellow-400"};default:return{light:"bg-blue-50 border-blue-200 text-blue-800",dark:"dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-200",icon:"text-blue-600 dark:text-blue-400"}}};return s.jsx("div",{className:"fixed top-4 right-4 z-[99999] flex flex-col gap-3 pointer-events-none max-w-[calc(100vw-2rem)] sm:max-w-md",children:s.jsx(sn,{mode:"popLayout",children:t.map(i=>{const a=r(i.type);return s.jsx(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.95},transition:{duration:.2},className:`pointer-events-auto ${a.light} ${a.dark} border-2 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden`,children:s.jsxs("div",{className:"flex items-start gap-3 p-4",children:[s.jsx("div",{className:`flex-shrink-0 ${a.icon}`,children:n(i.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[i.title&&s.jsx("h4",{className:"font-semibold text-sm mb-1",children:i.title}),s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:i.message})]}),s.jsx("button",{onClick:()=>e(i.id),className:"flex-shrink-0 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-lg transition-colors","aria-label":"Cerrar notificacin",children:s.jsx(gs,{className:"w-4 h-4"})})]})},i.id)})})})},pW=b.createContext({showNotification:()=>{}}),gW=({children:t})=>{const[e,n]=b.useState([]),r=b.useCallback((a,l="info",d=null,u={})=>{if(!a)return;const m=Date.now()+Math.random();n(g=>[...g,{id:m,message:a,type:l,title:d,...u}])},[]);b.useEffect(()=>(Q4(()=>r),()=>Q4(null)),[r]);const i=b.useCallback(a=>{n(l=>l.filter(d=>d.id!==a))},[]);return s.jsxs(pW.Provider,{value:{showNotification:r},children:[t,s.jsx(tp,{notifications:e,onRemove:i})]})},fw=(t=!1)=>{const[e,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState(null),[d,u]=b.useState(0);return b.useEffect(()=>{const m=()=>{u(g=>g+1)};return window.addEventListener("productSaved",m),()=>{window.removeEventListener("productSaved",m)}},[]),b.useEffect(()=>{(async()=>{try{let g;return t?g=Ot(pt(oe,"productos"),ni("fechaCreacion","desc")):g=Ot(pt(oe,"productos"),qt("activo","==",!0),ni("fechaCreacion","desc")),_n(g,y=>{const w=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),S=[];y.docs.forEach(N=>{!w.includes(N.id)&&N.exists()&&S.push({id:N.id,...N.data()})}),n(S),i(!1)},y=>{l(y.message),i(!1)})}catch(g){l(g.message),i(!1)}})()},[t,d]),{products:e,loading:r,error:a}},xW=t=>{const[e,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState(null),[d,u]=b.useState(0);return b.useEffect(()=>{const m=h=>{h.key==="phantomProducts"&&u(y=>y+1)},g=()=>{u(h=>h+1)};return window.addEventListener("storage",m),window.addEventListener("productSaved",g),()=>{window.removeEventListener("storage",m),window.removeEventListener("productSaved",g)}},[]),b.useEffect(()=>{(async()=>{try{let g;return!t||t===""||t==="todos"?g=Ot(pt(oe,"productos"),qt("activo","==",!0),ni("fechaCreacion","desc")):g=Ot(pt(oe,"productos"),qt("categoria","==",t),qt("activo","==",!0)),_n(g,y=>{const w=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),S=[];y.docs.forEach(_=>{!w.includes(_.id)&&_.exists()&&S.push({id:_.id,..._.data()})});const N=t&&t!=="todos"?S.sort((_,D)=>{var I,F,R,E;const A=((F=(I=_.fechaCreacion)==null?void 0:I.toDate)==null?void 0:F.call(I))||new Date(0);return(((E=(R=D.fechaCreacion)==null?void 0:R.toDate)==null?void 0:E.call(R))||new Date(0))-A}):S;n(N),i(!1)},y=>{l(y.message),i(!1)})}catch(g){l(g.message),i(!1)}})()},[t,d]),{products:e,loading:r,error:a}},yW=t=>{const[e,n]=b.useState(null),[r,i]=b.useState(!0),[a,l]=b.useState(null);return b.useEffect(()=>{if(!t){n(null),i(!1);return}let d=null,u=null,m=!1;i(!0),l(null);const g=w=>(w||"").toLowerCase().replace(/[^a-z0-9]/g,""),h=w=>{try{const S=We(oe,"productos",w);return _n(S,N=>{N.exists()?(n({id:N.id,...N.data()}),l(null),i(!1)):(l("Producto no encontrado"),n(null),i(!1))},N=>{l((N==null?void 0:N.message)||"Error al cargar el producto"),i(!1)})}catch{return l("Error al suscribirse al producto"),i(!1),null}},y=async()=>{if(!m){m=!0;try{const w=Ot(pt(oe,"productos"),qt("slug","==",t),jl(1)),S=await rn(w);if(!S.empty){const L=S.docs[0].id;u=h(L);return}const _=(await rn(pt(oe,"productos"))).docs.map(L=>({id:L.id,...L.data()})),D=g(t),A=_.find(L=>g(L.slug||"")===D||g(L.nombre||"")===D||L.id===t);A?u=h(A.id):(l("Producto no encontrado"),n(null),i(!1))}catch{l("Error al cargar el producto"),n(null),i(!1)}}};try{const w=We(oe,"productos",t);d=_n(w,S=>{S.exists()?(n({id:S.id,...S.data()}),l(null),i(!1)):y()},S=>{y()})}catch{y()}return()=>{typeof d=="function"&&d(),typeof u=="function"&&u()}},[t]),{product:e,loading:r,error:a}},mw=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,a]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const d=Ot(pt(oe,"categorias"),qt("activa","==",!0),ni("orden","asc"));return _n(d,m=>{const g=m.docs.map(h=>({id:h.id,...h.data()}));e(g),r(!1)},m=>{a(m.message),r(!1)})}catch(d){a(d.message),r(!1)}})()},[]),{categories:t,loading:n,error:i}},vW=()=>{const[t,e]=b.useState({}),[n,r]=b.useState([]),[i,a]=b.useState(!0),[l,d]=b.useState(null);return b.useEffect(()=>{let u=null,m=null,g=[],h=[],y=!1,w=!1;const S=()=>{if(!(!y||!w))try{const N={};g.forEach(_=>{N[_.id]=h.filter(D=>D.categoria===_.id)}),e(N),a(!1)}catch(N){d(N.message||"Error agrupando productos"),a(!1)}};try{const N=Ot(pt(oe,"categorias"),qt("activa","==",!0),ni("orden","asc"));u=_n(N,D=>{g=D.docs.map(A=>({id:A.id,...A.data()})),r(g),y=!0,S()},D=>{d(D.message),a(!1)});const _=Ot(pt(oe,"productos"),qt("activo","==",!0),ni("fechaCreacion","desc"));m=_n(_,D=>{const A=JSON.parse(localStorage.getItem("phantomProducts")||"[]");h=[],D.docs.forEach(L=>{!A.includes(L.id)&&L.exists()&&h.push({id:L.id,...L.data()})}),w=!0,S()},D=>{d(D.message),a(!1)})}catch(N){d(N.message),a(!1)}return()=>{typeof u=="function"&&u(),typeof m=="function"&&m()}},[]),{productsByCategory:t,categories:n,loading:i,error:l}},bW=(t,e="")=>{const[n,r]=b.useState([]),[i,a]=b.useState(!1),[l,d]=b.useState(null);return b.useEffect(()=>{if(!t||t.length<2){r([]);return}const m=setTimeout(async()=>{a(!0);try{let g=Ot(pt(oe,"productos"),qt("activo","==",!0));e&&(g=Ot(g,qt("categoria","==",e)));const h=await rn(g),y=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),w=[];h.docs.forEach(_=>{!y.includes(_.id)&&_.exists()&&w.push({id:_.id,..._.data()})});const S=t.toLowerCase(),N=w.filter(_=>{var D,A,L,I;return((D=_.nombre)==null?void 0:D.toLowerCase().includes(S))||((A=_.descripcion)==null?void 0:A.toLowerCase().includes(S))||((L=_.empresa)==null?void 0:L.toLowerCase().includes(S))||((I=_.etiquetas)==null?void 0:I.some(F=>F.toLowerCase().includes(S)))});r(N)}catch(g){d(g.message)}finally{a(!1)}},300);return()=>clearTimeout(m)},[t,e]),{results:n,loading:i,error:l}};var W6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x_=Ns.createContext&&Ns.createContext(W6),wW=["attr","size","title"];function jW(t,e){if(t==null)return{};var n=kW(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function E0(){return E0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E0.apply(this,arguments)}function y_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y_(Object(n),!0).forEach(function(r){NW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NW(t,e,n){return e=_W(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _W(t){var e=SW(t,"string");return typeof e=="symbol"?e:e+""}function SW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H6(t){return t&&t.map((e,n)=>Ns.createElement(e.tag,T0({key:n},e.attr),H6(e.child)))}function Kt(t){return e=>Ns.createElement(CW,E0({attr:T0({},t.attr)},e),H6(t.child))}function CW(t){var e=n=>{var{attr:r,size:i,title:a}=t,l=jW(t,wW),d=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Ns.createElement("svg",E0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:u,style:T0(T0({color:t.color||n.color},n.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&Ns.createElement("title",null,a),t.children)};return x_!==void 0?Ns.createElement(x_.Consumer,null,n=>e(n)):e(W6)}function A0(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(t)}function EW(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function TW(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(t)}function gv(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function AW(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function PW(t){return Kt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function qb(t){return Kt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function IW(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function lh(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function v_(t){return Kt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(t)}function b_(t){return Kt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function RW(t){return Kt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function LW(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(t)}function fg(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function jh(t){return Kt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function MW(t){return Kt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 32H32C14.33 32 0 46.33 0 64v384c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM176 327.88V344c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-16.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V152c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v16.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07zM416 312c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h112c4.42 0 8 3.58 8 8v16zm160 0c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-96c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h272c4.42 0 8 3.58 8 8v16z"},child:[]}]})(t)}function Gb(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(t)}function Tm(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function DW(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"},child:[]}]})(t)}function xv(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function q6(t){return Kt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"},child:[]}]})(t)}function OW(t){return Kt({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"},child:[]}]})(t)}function VW(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 216v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-80c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zM125.333 32H24C10.745 32 0 42.745 0 56v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zm80 448H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm-24-424v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24zm24 264H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24z"},child:[]}]})(t)}function ch(t){return Kt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function G6(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function w_(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function zW(t){return Kt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(t)}function FW(t){return Kt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function rh(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function $W(t){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"},child:[]}]})(t)}const Rd=t=>t?t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",UW=(t,e)=>{if(!e)return{coincide:!1,score:0};const n=Rd(e),r=n.split(" ").filter(Boolean),i=Rd(t.nombre||""),a=Rd(t.descripcion||""),l=Rd(t.categoria||""),d=Rd(t.empresa||t.marca||"");let u=0,m=0;return i===n?{coincide:!0,score:1e3}:i.startsWith(n)?{coincide:!0,score:900}:i.includes(n)?{coincide:!0,score:800}:d.includes(n)?{coincide:!0,score:700}:l.includes(n)?{coincide:!0,score:600}:a.includes(n)?{coincide:!0,score:500}:(r.forEach(h=>{i.includes(h)&&(u+=100,m++),d.includes(h)&&(u+=70,m++),l.includes(h)&&(u+=50,m++),a.includes(h)&&(u+=20,m++)}),{coincide:m>0||u>0,score:u>0?u:10})},j_=b.forwardRef(({onClose:t,placeholder:e="Buscar en pcu.com.do"},n)=>{const[r,i]=b.useState(""),[a,l]=b.useState([]),[d,u]=b.useState(!1),[m,g]=b.useState([]),[h,y]=b.useState([]),[w,S]=b.useState("todas"),[N,_]=b.useState(!1),D=b.useRef(null),A=b.useRef(null),L=Sr(),{isDark:I}=Ss(),{results:F,loading:R}=bW(r),{products:E}=fw(),M=b.useMemo(()=>{const X=new Set;return(E||[]).forEach(ne=>{ne.categoria&&X.add(ne.categoria)}),Array.from(X).sort()},[E]);b.useEffect(()=>{const X=JSON.parse(localStorage.getItem("historialBusquedas")||"[]");g(X.slice(0,5))},[]),b.useEffect(()=>{if(!r.trim()){l([]),y([]);return}u(!0);let X=F.map(Z=>{const{coincide:le,score:re}=UW(Z,r);return{...Z,score:re,coincide:le}}).filter(Z=>Z.coincide);w!=="todas"&&(X=X.filter(Z=>Rd(Z.categoria||"")===Rd(w))),X=X.sort((Z,le)=>le.score-Z.score).slice(0,8),l(X);const ne=[];X.forEach(Z=>{const le=Z.nombre;le&&!ne.includes(le)&&ne.push(le)});const we=new Set;X.forEach(Z=>{Z.categoria&&we.add(Z.categoria)}),we.forEach(Z=>{const le=`${r} en ${Z}`;ne.includes(le)||ne.push(le)}),y(ne.slice(0,8))},[r,F,w]),b.useEffect(()=>{const X=ne=>{D.current&&!D.current.contains(ne.target)&&u(!1),A.current&&!A.current.contains(ne.target)&&_(!1)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[]);const O=X=>{if(!X.trim())return;const ne=JSON.parse(localStorage.getItem("historialBusquedas")||"[]"),we=[X,...ne.filter(Z=>Z!==X)].slice(0,10);localStorage.setItem("historialBusquedas",JSON.stringify(we)),g(we.slice(0,5))},j=X=>{if(X.preventDefault(),r.trim()){let ne=r.trim();w!=="todas"&&(ne=`${r.trim()} en ${w}`),O(ne),L(`/buscar?q=${encodeURIComponent(ne)}`),i(""),l([]),y([]),u(!1),t&&t()}},U=X=>{O(X.nombre.trim()),L(`/producto/${X.id}`),i(""),l([]),y([]),u(!1),t&&t()},H=X=>{O(X),X.includes(" en ")?L(`/buscar?q=${encodeURIComponent(X)}`):L(`/buscar?q=${encodeURIComponent(X)}`),i(""),l([]),y([]),u(!1),t&&t()},V=X=>{i(X)},K=(X,ne)=>{ne.stopPropagation();const Z=JSON.parse(localStorage.getItem("historialBusquedas")||"[]").filter(le=>le!==X);localStorage.setItem("historialBusquedas",JSON.stringify(Z)),g(Z.slice(0,5))};return s.jsxs("div",{className:"relative w-full",ref:D,children:[s.jsxs("form",{onSubmit:j,className:"flex w-full gap-0",style:{alignItems:"center",height:"42px",margin:0,padding:0},children:[s.jsxs("div",{className:"relative",ref:A,style:{height:"42px",margin:0,padding:0},children:[s.jsxs("button",{type:"button",onClick:()=>_(!N),className:"px-3 md:px-4 rounded-l-md text-xs md:text-sm font-semibold transition-all duration-200 flex items-center gap-2 min-w-[100px] md:min-w-[140px] shadow-sm hover:shadow",style:{height:"42px",background:I?"linear-gradient(to bottom, #374151, #1f2937)":"linear-gradient(to bottom, #f9fafb, #e5e7eb)",border:I?"1px solid #4b5563":"1px solid #d1d5db",color:I?"#f3f4f6":"#1f2937",margin:0,paddingTop:0,paddingBottom:0},onMouseEnter:X=>{X.currentTarget.style.background=I?"linear-gradient(to bottom, #4b5563, #374151)":"linear-gradient(to bottom, #e5e7eb, #d1d5db)"},onMouseLeave:X=>{X.currentTarget.style.background=I?"linear-gradient(to bottom, #374151, #1f2937)":"linear-gradient(to bottom, #f9fafb, #e5e7eb)"},children:[s.jsx("span",{className:"flex-1",style:{background:"transparent",backgroundColor:"transparent",boxShadow:"none",outline:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:w==="todas"?"Todas":w}),s.jsx("svg",{className:"flex-shrink-0 transition-transform duration-200",style:{width:"12px",height:"12px",transform:N?"rotate(180deg)":"rotate(0deg)",background:"transparent",backgroundColor:"transparent"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 9l-7 7-7-7"})})]}),N&&s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-80 md:w-96 max-h-[500px] overflow-hidden rounded-xl shadow-2xl z-[10000] backdrop-blur-sm",style:{backgroundColor:I?"#111827":"#ffffff",border:I?"1px solid #374151":"1px solid #e5e7eb",opacity:1},children:[s.jsx("div",{className:"px-4 py-3 border-b",style:{background:I?"linear-gradient(to right, #2563eb, #1d4ed8)":"linear-gradient(to right, #3b82f6, #2563eb)",borderBottomColor:I?"#1e40af":"#60a5fa"},children:s.jsx("p",{className:"text-sm font-bold text-white",children:"Selecciona una categora"})}),s.jsxs("div",{className:"overflow-y-auto max-h-[420px] custom-scrollbar",children:[s.jsxs("button",{type:"button",onClick:()=>{S("todas"),_(!1)},className:"w-full text-left px-4 py-3.5 text-sm font-medium transition-all duration-200 flex items-center gap-3",style:{backgroundColor:w==="todas"?I?"rgba(37, 99, 235, 0.2)":"#eff6ff":"transparent",color:w==="todas"?I?"#93c5fd":"#1d4ed8":I?"#d1d5db":"#374151",borderLeft:w==="todas"?"4px solid #2563eb":"4px solid transparent"},onMouseEnter:X=>{w!=="todas"&&(X.currentTarget.style.backgroundColor=I?"#1f2937":"#f9fafb")},onMouseLeave:X=>{w!=="todas"&&(X.currentTarget.style.backgroundColor="transparent")},children:[w==="todas"?s.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 dark:border-gray-600 flex-shrink-0"}),s.jsx("span",{className:"flex-1",children:"Todas las categoras"})]}),s.jsx("div",{className:"h-px my-1",style:{background:I?"linear-gradient(to right, transparent, #374151, transparent)":"linear-gradient(to right, transparent, #e5e7eb, transparent)"}}),M.map((X,ne)=>s.jsxs("button",{type:"button",onClick:()=>{S(X),_(!1)},className:"w-full text-left px-4 py-3.5 text-sm font-medium transition-all duration-200 flex items-center gap-3",style:{backgroundColor:w===X?I?"rgba(37, 99, 235, 0.2)":"#eff6ff":"transparent",color:w===X?I?"#93c5fd":"#1d4ed8":I?"#d1d5db":"#374151",borderLeft:w===X?"4px solid #2563eb":"4px solid transparent",animationDelay:`${ne*20}ms`},onMouseEnter:we=>{w!==X&&(we.currentTarget.style.backgroundColor=I?"#1f2937":"#f9fafb")},onMouseLeave:we=>{w!==X&&(we.currentTarget.style.backgroundColor="transparent")},children:[w===X?s.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-300 dark:border-gray-600 flex-shrink-0"}),s.jsx("span",{className:"flex-1",children:X})]},X))]})]})]}),s.jsxs("div",{className:"flex-grow relative",style:{height:"42px",margin:0,padding:0},children:[s.jsx(xv,{className:"absolute pointer-events-none",style:{left:"12px",top:"50%",transform:"translateY(-50%)",color:I?"#6b7280":"#9ca3af",fontSize:"13px"}}),s.jsx("input",{type:"text",ref:n,value:r,onChange:X=>i(X.target.value),onFocus:()=>u(!0),placeholder:e,className:"w-full pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"13px",height:"42px",borderTop:I?"1px solid #4b5563":"1px solid #d1d5db",borderBottom:I?"1px solid #4b5563":"1px solid #d1d5db",borderLeft:"none",borderRight:"none",backgroundColor:I?"#1f2937":"#ffffff",color:I?"#f3f4f6":"#111827",paddingTop:"0",paddingBottom:"0",lineHeight:"42px"},autoComplete:"off"})]}),s.jsx("button",{type:"submit",className:"w-12 text-white rounded-r-md transition flex items-center justify-center flex-shrink-0",style:{height:"42px",backgroundColor:"#2563eb",margin:0,paddingTop:0,paddingBottom:0},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="#1d4ed8"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="#2563eb"},title:"Buscar",children:s.jsx(xv,{className:"text-sm"})})]}),d&&s.jsxs("div",{className:"search-dropdown-scroll absolute z-[9999] w-full border border-gray-300 dark:border-gray-700 mt-1 rounded-md shadow-xl overflow-y-auto",style:{backgroundColor:I?"#111827":"#ffffff",opacity:1,backdropFilter:"none",WebkitBackdropFilter:"none",maxHeight:"min(80vh, 700px)",scrollBehavior:"smooth",overscrollBehavior:"contain"},children:[R&&s.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),"Buscando..."]}),!r.trim()&&m.length>0&&s.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:"Bsquedas recientes"}),m.map((X,ne)=>s.jsxs("div",{onClick:()=>V(X),className:"px-4 py-3.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center justify-between group transition active:bg-gray-200 dark:active:bg-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(IW,{className:"text-gray-400 dark:text-gray-500 text-sm"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:X})]}),s.jsx("button",{onClick:we=>K(X,we),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition",children:s.jsx(ch,{className:"text-xs"})})]},ne))]}),r.trim()&&w!=="todas"&&s.jsx("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900 border-b border-blue-200 dark:border-blue-700",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:["Buscando en: ",w]}),s.jsx("button",{onClick:()=>S("todas"),className:"ml-auto text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 font-medium",children:" Todos"})]})}),r.trim()&&h.length>0&&s.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:["Sugerencias (",h.length,")"]}),h.map((X,ne)=>s.jsxs("div",{onClick:()=>H(X),className:"px-4 py-3.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-3 transition group active:bg-gray-200 dark:active:bg-gray-600",children:[s.jsx(xv,{className:"text-gray-400 dark:text-gray-500 text-sm flex-shrink-0"}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium group-hover:text-blue-600 dark:group-hover:text-blue-400 break-words",children:X})]},ne))]}),r.trim()&&!R&&a.length===0&&s.jsxs("div",{className:"px-4 py-12 text-center",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("p",{className:"text-base font-medium text-gray-600 dark:text-gray-400",children:"No encontramos resultados"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Intenta con otras palabras"})]}),r.trim()&&!R&&a.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"px-4 py-3 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase sticky top-0 bg-white dark:bg-gray-900 z-10 border-b border-gray-200 dark:border-gray-700",children:["Productos (",a.length,")"]}),a.map(X=>s.jsx("div",{onClick:()=>U(X),className:"px-4 py-4 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition active:bg-gray-200 dark:active:bg-gray-600",children:s.jsxs("div",{className:"flex items-center gap-3",children:[X.imagen&&s.jsx("img",{src:X.imagen,alt:X.nombre,className:"w-14 h-14 object-cover rounded border border-gray-200 dark:border-gray-600 flex-shrink-0",loading:"lazy"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-base text-gray-900 dark:text-gray-100 line-clamp-2",children:X.nombre}),s.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[X.empresa&&s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:X.empresa}),X.categoria&&s.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:[" ",X.categoria]})]}),X.precio&&s.jsxs("div",{className:"text-base font-bold text-blue-600 dark:text-blue-400 mt-1.5",children:["RD$",X.precio.toLocaleString()]})]})]})},X.id))]})]})]})}),k_=["Distrito Nacional","Santo Domingo","Santiago","La Vega","Puerto Plata","San Cristbal","Duarte","La Romana","San Pedro de Macors","Espaillat","Hermanas Mirabal","Monte Plata","San Juan","Azua","Peravia","Monseor Nouel","Barahona","Snchez Ramrez","Valverde","Mara Trinidad Snchez","Monte Cristi","Saman","El Seibo","Hato Mayor","Independencia","Pedernales","Elas Pia","Dajabn","Baoruco"],pl={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, Repblica Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"};function BW({abierto:t,onClose:e,onPick:n,valorActual:r}){const[i,a]=b.useState(""),l=b.useMemo(()=>{if(!i)return k_;const d=i.toLowerCase();return k_.filter(u=>u.toLowerCase().includes(d))},[i]);return b.useEffect(()=>{t||a("")},[t]),typeof document>"u"?null:V0.createPortal(s.jsx(sn,{children:t&&s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{className:"prov-picker-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),s.jsx(Q.div,{className:"prov-picker-modal",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},onClick:d=>d.stopPropagation(),children:s.jsxs("div",{className:"prov-dark-card",children:[s.jsxs("div",{className:"prov-dark-header",children:[s.jsx("h3",{className:"prov-dark-title",children:"Seleccionar Provincia"}),s.jsx("button",{onClick:e,className:"prov-close-white",children:""})]}),s.jsx("div",{className:"prov-search-dark",children:s.jsx("input",{type:"text",placeholder:"Buscar provincia...",value:i,onChange:d=>a(d.target.value),className:"prov-input-dark",autoFocus:!0})}),s.jsx("div",{className:"prov-list-dark",children:l.length>0?l.map(d=>s.jsx("div",{className:`prov-item-dark ${r===d?"active":""}`,onClick:()=>{n(d),e()},children:d},d)):s.jsx("div",{className:"prov-empty-dark",children:"No se encontraron provincias"})})]})})]})}),document.body)}function K6({abierto:t,onClose:e,actualizarUsuarioInfo:n,actualizarLista:r,direccionEditar:i,usuarioId:a}){const{uid:l,usuario:d}=er(),[u,m]=b.useState("domicilio"),[g,h]=b.useState([]),[y,w]=b.useState(!1),[S,N]=b.useState(null),[_,D]=b.useState(""),[A,L]=b.useState(""),[I,F]=b.useState(""),[R,E]=b.useState(""),[M,O]=b.useState(""),[j,U]=b.useState(""),[H,V]=b.useState(""),[K,X]=b.useState(!1),[ne,we]=b.useState(!1),[Z,le]=b.useState(!1),[re,B]=b.useState(null),[ce,Se]=b.useState(""),[Ve,$e]=b.useState(!1),Ke=he=>he||"",[Ye,lt]=b.useState(""),[Re,Ct]=b.useState(null),[Ue,ot]=b.useState(!1),[ct,it]=b.useState(!1),Lt=async()=>{const he=a||l||(d==null?void 0:d.uid);if(!he){h([]);return}w(!0);try{const He=Ot(pt(oe,"direcciones"),qt("usuarioId","==",he)),Ae=(await rn(He)).docs.map(Be=>({id:Be.id,...Be.data()}));h(Ae)}catch{h([])}finally{w(!1)}};b.useEffect(()=>{const he=a||l||(d==null?void 0:d.uid);t&&he&&Lt()},[t,l,d,a]),b.useEffect(()=>{t&&(Lt(),i?(N(i.id),m(i.metodoEntrega||"domicilio"),D(i.provincia||""),L(i.ciudad||""),F(i.sector||""),E(i.numeroCalle||""),O(i.numeroCasa||""),U(i.telefono||""),V(i.referencia||""),lt(i.ubicacion||""),it(i.metodoEntrega==="tienda")):(N(null),m("domicilio"),D(""),L(""),F(""),E(""),O(""),U(""),V(""),lt(""),Ct(null),it(!1)))},[t,i]),b.useEffect(()=>{if(!t)return;const he=He=>{He.key==="Escape"&&e&&e()};return document.body.style.overflow="hidden",document.addEventListener("keydown",he),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",he)}},[t,e]);const Bt=he=>{if(he==="tienda"){m("tienda"),D(pl.provincia),L(pl.ciudad),E(pl.numeroCalle),F(""),O(""),V(""),N(null),lt(""),Ct(null),it(!0);return}if(he==="domicilio"){m("domicilio"),ct&&(D(""),L(""),S||(E(""),F(""),O(""),V("")),it(!1));return}m(he)},Ge=()=>[R,M?`Casa ${M}`:"",I,A,_,H?`Ref: ${H}`:""].filter(Boolean).join(", ").trim(),mn=async()=>{const he=l||(d==null?void 0:d.uid);if(!he){Vt("Error de autenticacin. Recarga la pgina e intenta de nuevo.","error","Error de autenticacin");return}X(!0);try{if(u==="tienda"){if(!j||j.trim()===""){Se("El nmero de telfono es obligatorio para recoger en tienda"),X(!1);return}const Ze={direccion:Ke(pl.direccionCompleta),metodoEntrega:"tienda",telefono:j,updatedAt:new Date};typeof n=="function"&&await n({...Ze});try{const Rt=l||(d==null?void 0:d.uid);Rt&&(await Cn(We(oe,"users",Rt),Ze,{merge:!0}),await Cn(We(oe,"usuarios",Rt),Ze,{merge:!0}))}catch{}e&&e(),typeof r=="function"&&r(),X(!1);return}if(!j||j.trim()===""){Se("El nmero de telfono es obligatorio"),X(!1);return}const He=!!Re;if(!He&&!Ge()){Vt("Completa provincia, ciudad y calle/nmero.","warning","Campos requeridos"),X(!1);return}const ge=He?`${Ge()?Ge()+", ":""}Ubicacin: ${Ye} (${Re==null?void 0:Re.lat}, ${Re==null?void 0:Re.lon})`:Ge(),Ae={metodoEntrega:"domicilio",provincia:_||null,ciudad:A||null,numeroCalle:R||null,numeroCasa:M||null,sector:I||null,referencia:H||null,telefono:j||null,direccionCompleta:ge,ubicacion:Ye||null,coords:Re||null,usuarioId:he,updatedAt:new Date};if(S){const Ze=We(oe,"direcciones",S);await jn(Ze,{...Ae})}else await Yc(pt(oe,"direcciones"),{...Ae,createdAt:new Date});typeof n=="function"&&await n({direccion:Ke(ge),metodoEntrega:"domicilio"}),we(!0);const Be={direccion:Ke(ge),metodoEntrega:"domicilio",telefono:j,updatedAt:new Date};try{await Cn(We(oe,"users",he),Be,{merge:!0})}catch{}try{await Cn(We(oe,"usuarios",he),Be,{merge:!0})}catch{}typeof n=="function"&&await n({telefono:j}),await Lt(),typeof r=="function"&&r(),N(null),e&&e(),window.location.reload()}catch(He){Vt(`Error guardando direccin: ${(He==null?void 0:He.message)||He}`,"error","Error")}finally{X(!1)}},Wt=async he=>{try{const He=typeof he=="string"?he:(he==null?void 0:he.direccionCompleta)||"",ge=he&&he.metodoEntrega?he.metodoEntrega:"domicilio",Ae=l||(d==null?void 0:d.uid);we(!0),typeof n=="function"&&await n({direccion:He,metodoEntrega:ge,telefono:j});const Be={direccion:He,metodoEntrega:ge,telefono:j,updatedAt:new Date};try{await Cn(We(oe,"users",Ae),Be,{merge:!0})}catch{}try{await Cn(We(oe,"usuarios",Ae),Be,{merge:!0})}catch{}try{let Ze=await Fn(We(oe,"users",Ae));if(Ze.exists()||(Ze=await Fn(We(oe,"usuarios",Ae))),Ze&&Ze.exists()){const Rt=Ze.data()||{};typeof n=="function"&&await n({direccion:Rt.direccion||He,metodoEntrega:Rt.metodoEntrega||ge})}}catch{}await Lt(),typeof r=="function"&&r(),e&&e(),window.location.reload()}catch(He){we(!1),Vt(`Error seleccionando direccin: ${(He==null?void 0:He.message)||He}`,"error","Error")}},an=async he=>{try{await co(We(oe,"direcciones",he)),await Lt(),typeof r=="function"&&r(),Vt("Direccin eliminada correctamente.","success","Eliminada")}catch(He){Vt(`Error eliminando direccin: ${(He==null?void 0:He.message)||He}`,"error","Error")}},At=he=>{B(he),le(!0)},bn=()=>{le(!1),B(null)},Ht=()=>{re&&(an(re),le(!1),B(null))},ze=he=>{!he||he.metodoEntrega==="tienda"||(N(he.id),m("domicilio"),D(he.provincia||""),L(he.ciudad||""),F(he.sector||""),E(he.numeroCalle||""),O(he.numeroCasa||""),U(he.telefono||""),V(he.referencia||""),lt(he.ubicacion||""),Ct(he.coords||null),it(!1))},Y=()=>{if(!navigator.geolocation){Vt("Geolocalizacin no soportada en este navegador.","warning","Advertencia");return}ot(!0),navigator.geolocation.getCurrentPosition(he=>{const He=he.coords.latitude.toFixed(6),ge=he.coords.longitude.toFixed(6),Ae=`https://www.google.com/maps?q=${He},${ge}`;lt(Ae),Ct({lat:He,lon:ge}),E(`${He}, ${ge}`),ot(!1)},he=>{let He="No se pudo obtener la ubicacin.";switch(he.code){case he.PERMISSION_DENIED:He="Permisos denegados. Haz clic en el candado  junto a la URL y permite la ubicacin.";break;case he.POSITION_UNAVAILABLE:He="Ubicacin no disponible. Asegrate de estar conectado a internet y tener servicios de ubicacin activados.";break;case he.TIMEOUT:He="Tiempo agotado. Intenta de nuevo.";break;default:He="Error desconocido. Verifica permisos del navegador."}Vt(He,"error","Error de ubicacin"),ot(!1)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},ie=()=>{lt(""),Ct(null),R&&/^\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?\s*$/.test(R)&&E("")};if(!t)return null;const pe=g.filter(he=>he.metodoEntrega!=="tienda");return V0.createPortal(s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{className:"entrega-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),s.jsx(Q.div,{className:"entrega-slider",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:200},role:"dialog","aria-modal":"true",onClick:he=>he.stopPropagation(),children:s.jsxs("div",{className:"entrega-slider-content","aria-labelledby":"entrega-title",children:[s.jsx("div",{className:"entrega-drag-handle"}),s.jsxs("div",{className:"entrega-header",children:[s.jsxs("div",{className:"entrega-header-content",children:[s.jsx("div",{className:"entrega-icon-wrapper",children:s.jsx("div",{className:"entrega-icon",children:""})}),s.jsxs("div",{className:"entrega-title-section",children:[s.jsx("h3",{id:"entrega-title",className:"entrega-title",children:"Mtodo de entrega"}),s.jsx("p",{className:"entrega-subtitle",children:"Elige cmo quieres recibir tu pedido"})]})]}),s.jsx("button",{onClick:e,className:"entrega-close-btn","aria-label":"Cerrar",children:s.jsx(bh,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"entrega-methods",children:[s.jsxs(Q.button,{type:"button",onClick:()=>Bt("domicilio"),className:`method-card ${u==="domicilio"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":u==="domicilio",children:[s.jsx("div",{className:"method-icon domicilio-icon",children:s.jsx(Jf,{className:"w-6 h-6"})}),s.jsxs("div",{className:"method-info",children:[s.jsx("h4",{className:"method-title",children:"A domicilio"}),s.jsx("p",{className:"method-desc",children:"Entrega en tu direccin"})]}),u==="domicilio"&&s.jsx(Q.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:s.jsx(ka,{className:"w-5 h-5"})})]}),s.jsxs(Q.button,{type:"button",onClick:()=>Bt("tienda"),className:`method-card ${u==="tienda"?"active":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-pressed":u==="tienda",children:[s.jsx("div",{className:"method-icon tienda-icon",children:s.jsx(xr,{className:"w-6 h-6"})}),s.jsxs("div",{className:"method-info",children:[s.jsx("h4",{className:"method-title",children:"Recoger en tienda"}),s.jsx("p",{className:"method-desc",children:"Playcenter Universal"})]}),u==="tienda"&&s.jsx(Q.div,{className:"method-check",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500},children:s.jsx(ka,{className:"w-5 h-5"})})]})]}),s.jsxs(sn,{mode:"wait",children:[u==="domicilio"&&s.jsxs(Q.button,{type:"button",onClick:Y,className:`location-btn ${Ue?"loading":""}`,disabled:Ue,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,height:0,y:10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3,ease:[.4,0,.2,1]},children:[s.jsx(fB,{className:`w-5 h-5 ${Ue?"animate-pulse":""}`}),s.jsx("span",{children:Ue?"Obteniendo ubicacin...":"Usar mi ubicacin actual"})]},"location-btn"),u==="tienda"&&s.jsx(Q.div,{className:"tienda-phone-form",initial:{opacity:0,height:0,y:20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-20},transition:{duration:.4,ease:[.4,0,.2,1],height:{duration:.4}},children:s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Telfono de contacto *"}),s.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:j,onChange:he=>{U(he.target.value),ce&&Se("")},className:"form-input",required:!0}),ce&&s.jsx("div",{className:"phone-error-message",children:s.jsxs("span",{children:[" ",ce]})}),s.jsx("p",{className:"form-note",children:" Te contactaremos cuando tu pedido est listo para recoger"})]})},"tienda-form")]}),s.jsxs("div",{className:"entrega-form",children:[s.jsx(sn,{children:Re&&s.jsxs(Q.div,{className:"coords-display",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[s.jsxs("div",{className:"coords-header",children:[s.jsx(hg,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"coords-title",children:"Ubicacin detectada"}),s.jsx("button",{onClick:ie,className:"coords-remove","aria-label":"Quitar ubicacin",children:s.jsx(bh,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"coords-info",children:[s.jsxs("div",{className:"coord-item",children:[s.jsx("span",{className:"coord-label",children:"Lat:"}),s.jsx("span",{className:"coord-value",children:Re.lat})]}),s.jsxs("div",{className:"coord-item",children:[s.jsx("span",{className:"coord-label",children:"Lng:"}),s.jsx("span",{className:"coord-value",children:Re.lon})]})]})]})}),s.jsx(sn,{mode:"wait",children:u==="domicilio"?s.jsxs(Q.div,{className:"address-form",initial:{opacity:0,height:0,y:20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-20},transition:{duration:.4,ease:[.4,0,.2,1],height:{duration:.4}},children:[s.jsxs("div",{className:"form-section",children:[s.jsx("label",{className:"form-label",children:"Provincia *"}),s.jsxs("button",{type:"button",onClick:()=>$e(!0),className:"province-selector","aria-haspopup":"dialog","aria-expanded":Ve,children:[s.jsx("span",{className:`province-text ${_?"":"placeholder"}`,children:_||"Selecciona tu provincia"}),s.jsx($b,{className:"province-chevron"})]})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Ciudad *"}),s.jsx("input",{placeholder:"Ej: Santiago",value:A,onChange:he=>L(he.target.value),className:"form-input"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Sector"}),s.jsx("input",{placeholder:"Ej: Los Jardines",value:I,onChange:he=>F(he.target.value),className:"form-input"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Calle y nmero *"}),s.jsx("input",{placeholder:"Ej: Av. Juan Pablo Duarte #123",value:R,onChange:he=>E(he.target.value),className:"form-input"})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Nmero de casa"}),s.jsx("input",{placeholder:"Ej: 45-B",value:M,onChange:he=>O(he.target.value),className:"form-input"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Telfono *"}),s.jsx("input",{type:"tel",placeholder:"Ej: 809-555-1234",value:j,onChange:he=>{U(he.target.value),ce&&Se("")},className:"form-input",required:!0}),ce&&s.jsx("div",{className:"phone-error-message",children:s.jsxs("span",{children:[" ",ce]})})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{className:"form-label",children:"Referencia"}),s.jsx("input",{placeholder:"Ej: Casa azul",value:H,onChange:he=>V(he.target.value),className:"form-input"})]}),!Re&&s.jsxs("div",{className:"form-note",children:[" ",s.jsx("strong",{children:"Tip:"}),' Usa "Mi ubicacin actual" para completar automticamente las coordenadas']})]},"domicilio-form"):s.jsxs(Q.div,{className:"store-info",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[s.jsxs("div",{className:"store-header",children:[s.jsx(xr,{className:"w-6 h-6 text-orange-500"}),s.jsx("h4",{className:"store-title",children:"Playcenter Universal"})]}),s.jsx("p",{className:"store-address",children:pl.direccionCompleta}),s.jsxs("a",{href:pl.ubicacion,target:"_blank",rel:"noreferrer",className:"store-map-link",children:[s.jsx(hg,{className:"w-4 h-4"}),"Ver en Google Maps"]})]},"tienda-info")}),s.jsx(Q.button,{onClick:mn,disabled:K,className:`save-btn ${K?"loading":""}`,whileHover:{scale:K?1:1.02},whileTap:{scale:K?1:.98},children:K?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Guardando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ka,{className:"w-5 h-5"}),s.jsx("span",{children:u==="tienda"?"Seleccionar Playcenter":S?"Actualizar direccin":"Guardar direccin"})]})})]}),s.jsxs("div",{className:"saved-addresses",children:[s.jsx("h4",{className:"saved-title",children:"Direcciones guardadas"}),y?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Cargando direcciones..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs(Q.div,{className:"address-card store-card",whileHover:{scale:1.01},whileTap:{scale:.99},children:[s.jsxs("div",{className:"address-info",children:[s.jsxs("div",{className:"address-header",children:[s.jsx(xr,{className:"w-5 h-5 text-orange-500"}),s.jsx("span",{className:"address-type",children:"Recoger en tienda"})]}),s.jsx("p",{className:"address-name",children:"Playcenter Universal"}),s.jsx("p",{className:"address-details",children:pl.direccionCompleta}),s.jsxs("a",{href:pl.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[s.jsx(hg,{className:"w-4 h-4"}),"Ver ubicacin"]})]}),s.jsxs("button",{onClick:()=>Wt(pl),className:"address-select-btn store-select",children:[s.jsx(ka,{className:"w-4 h-4"}),"Seleccionar"]})]}),s.jsx(sn,{children:pe.length===0?s.jsxs(Q.div,{className:"empty-state",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsx(Jf,{className:"w-12 h-12 text-gray-300"}),s.jsx("p",{className:"empty-text",children:"No tienes direcciones guardadas"}),s.jsx("p",{className:"empty-subtext",children:"Agrega una direccin para entregas futuras"})]}):s.jsx("div",{className:"addresses-list",children:pe.map((he,He)=>s.jsxs(Q.div,{className:"address-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:He*.1},whileHover:{scale:1.01},children:[s.jsxs("div",{className:"address-info",children:[s.jsxs("div",{className:"address-header",children:[s.jsx(Jf,{className:"w-5 h-5 text-blue-500"}),s.jsx("span",{className:"address-type",children:"Domicilio"})]}),s.jsx("p",{className:"address-details",children:he.direccionCompleta}),he.ubicacion&&s.jsxs("a",{href:he.ubicacion,target:"_blank",rel:"noreferrer",className:"address-map-link",children:[s.jsx(hg,{className:"w-4 h-4"}),"Ver ubicacin"]})]}),s.jsxs("div",{className:"address-actions",children:[s.jsx("button",{onClick:()=>ze(he),className:"address-action-btn edit-btn","aria-label":"Editar direccin",children:s.jsx(EB,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Wt(he),className:"address-action-btn select-btn","aria-label":"Seleccionar direccin",children:s.jsx(ka,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>At(he.id),className:"address-action-btn delete-btn","aria-label":"Eliminar direccin",children:s.jsx(wh,{className:"w-4 h-4"})})]})]},he.id))})})]})]})]})}),s.jsx(sn,{children:ne&&s.jsx(Q.div,{className:"spinner-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},role:"status","aria-live":"polite",children:s.jsxs("div",{className:"spinner-container",children:[s.jsxs("div",{className:"spinner",children:[s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{})]}),s.jsx(Q.div,{className:"spinner-text",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:"Procesando entrega..."})]})})}),s.jsx(sn,{children:Z&&s.jsx(Q.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999},children:s.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",maxWidth:"400px",width:"90%",textAlign:"center",zIndex:9999999},children:[s.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"Eliminar direccin?"}),s.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem",lineHeight:"1.5"},children:"Ests seguro que quieres eliminar esta direccin? Esta accin no se puede deshacer."}),s.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[s.jsx("button",{onClick:bn,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"2px solid #e5e7eb",backgroundColor:"white",color:"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:he=>he.target.style.backgroundColor="#f9fafb",onMouseOut:he=>he.target.style.backgroundColor="white",children:"Cancelar"}),s.jsx("button",{onClick:Ht,style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",backgroundColor:"#ef4444",color:"white",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseOver:he=>he.target.style.backgroundColor="#dc2626",onMouseOut:he=>he.target.style.backgroundColor="#ef4444",children:"Eliminar"})]})]})})}),s.jsx(BW,{abierto:Ve,onClose:()=>$e(!1),onPick:he=>D(he),valorActual:_})]}),document.body)}function vx(){const{usuario:t,usuarioInfo:e}=er(),[n,r]=b.useState([]),[i,a]=b.useState([]),[l,d]=b.useState([]),[u,m]=b.useState(0),[g,h]=b.useState(!0),y=(e==null?void 0:e.email)==="arisleidy0712@gmail.com"||(e==null?void 0:e.isAdmin),w=(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId);b.useEffect(()=>{if(!t||!y){a([]);return}const A=pt(oe,"solicitudes_vendedor"),L=Ot(A,qt("estado","==","pendiente"),ni("fechaSolicitud","desc")),I=_n(L,F=>{const R=F.docs.map(E=>{var M,O;return{id:`solicitud_${E.id}`,type:"solicitud_vendedor",title:"Nueva solicitud de tienda",message:`${E.data().nombreContacto||"Alguien"} quiere abrir "${E.data().tiendaNombre}"`,actionUrl:"/admin?tab=solicitudes",actionLabel:"Ver solicitud",read:!1,createdAt:((O=(M=E.data().fechaSolicitud)==null?void 0:M.toDate)==null?void 0:O.call(M))||new Date,metadata:{solicitudId:E.id,tiendaNombre:E.data().tiendaNombre,email:E.data().email}}});a(R)},F=>{console.error("Error fetching solicitudes:",F)});return()=>I()},[t,y]),b.useEffect(()=>{if(!t){r([]),m(0),h(!1);return}const A=pt(oe,"notifications");let L;y?L=Ot(A,qt("targetType","==","admin"),ni("createdAt","desc"),jl(50)):L=Ot(A,qt("targetUserId","==",t.uid),ni("createdAt","desc"),jl(50));const I=_n(L,F=>{const E=F.docs.map(M=>{var O,j;return{id:M.id,...M.data(),createdAt:((j=(O=M.data().createdAt)==null?void 0:O.toDate)==null?void 0:j.call(O))||new Date}}).filter(M=>!!(y&&M.targetType==="admin"||M.targetUserId===t.uid));r(E),h(!1)},F=>{console.error("Error fetching notifications:",F),h(!1)});return()=>I()},[t,y]);const N=[...i.map(A=>({...A,read:l.includes(A.id)})),...n].sort((A,L)=>new Date(L.createdAt)-new Date(A.createdAt));return b.useEffect(()=>{const A=i.filter(I=>!l.includes(I.id)).length,L=n.filter(I=>!I.read).length;m(A+L)},[i,n,l]),{notifications:N,unreadCount:u,loading:g,markAsRead:async A=>{if(A.startsWith("solicitud_")){d(L=>[...L,A]);return}try{const L=We(oe,"notifications",A);await jn(L,{read:!0})}catch(L){console.error("Error marking notification as read:",L)}},markAllAsRead:async()=>{const A=i.map(L=>L.id);d(L=>[...L,...A]);try{const L=n.filter(I=>!I.read);await Promise.all(L.map(I=>jn(We(oe,"notifications",I.id),{read:!0})))}catch(L){console.error("Error marking all as read:",L)}},isAdmin:y,isSeller:w}}async function Ou({type:t,title:e,message:n,targetUserId:r=null,targetType:i="user",actionUrl:a=null,actionLabel:l=null,metadata:d={}}){try{return await Yc(pt(oe,"notifications"),{type:t,title:e,message:n,targetUserId:r,targetType:i,actionUrl:a,actionLabel:l,metadata:d,read:!1,createdAt:Qd()}),!0}catch(u){return console.error("Error creating notification:",u),!1}}const Kb={newSellerRequest:async t=>Ou({type:"solicitud_vendedor",title:"Nueva solicitud de tienda",message:`${t.nombreContacto} quiere abrir la tienda "${t.tiendaNombre}"`,targetType:"admin",actionUrl:"/admin?tab=solicitudes",actionLabel:"Ver solicitud",metadata:{solicitudId:t.id,tiendaNombre:t.tiendaNombre,email:t.email}}),sellerApproved:async(t,e,n)=>Ou({type:"solicitud_aprobada",title:"Tu tienda fue aprobada",message:`Tu tienda "${e}" ya est activa. Ahora puedes acceder al Panel de Administracin para subir productos y comenzar a vender.`,targetUserId:t,targetType:"user",actionUrl:"/admin",actionLabel:"Ir al Panel Admin",metadata:{storeId:n,tiendaNombre:e}}),sellerRejected:async(t,e,n)=>Ou({type:"solicitud_rechazada",title:"Solicitud no aprobada",message:`Tu solicitud para "${e}" no fue aprobada. ${n?`Motivo: ${n}`:""}`,targetUserId:t,targetType:"user",actionUrl:null,actionLabel:null,metadata:{tiendaNombre:e,motivo:n}}),newOrder:async(t,e)=>{var n,r;return Ou({type:"nuevo_pedido",title:"Nuevo pedido! ",message:`Tienes un nuevo pedido por RD$${((n=e.total)==null?void 0:n.toLocaleString())||"0"}`,targetUserId:t,targetType:"seller",actionUrl:"/admin?tab=orders",actionLabel:"Ver pedido",metadata:{orderId:e.id,total:e.total,items:((r=e.items)==null?void 0:r.length)||0}})},orderUpdated:async(t,e,n)=>Ou({type:"pedido_actualizado",title:"Actualizacin de pedido",message:`Tu pedido ${{pendiente:"est pendiente",procesando:"est siendo procesado",enviado:"ha sido enviado ",entregado:"ha sido entregado ",cancelado:"fue cancelado"}[n]||n}`,targetUserId:t,targetType:"user",actionUrl:"/perfil?vista=historial",actionLabel:"Ver pedido",metadata:{orderId:e,estado:n}}),newFollower:async(t,e)=>Ou({type:"nuevo_seguidor",title:"Nuevo seguidor",message:`${e} comenz a seguirte`,targetUserId:t,targetType:"user",actionUrl:"/perfil?vista=seguidores",actionLabel:"Ver perfil",metadata:{followerName:e}})},N_={solicitud_vendedor:{icon:xr,color:"#2563eb",bg:"#dbeafe",darkBg:"rgba(37, 99, 235, 0.15)"},solicitud_aprobada:{icon:ka,color:"#16a34a",bg:"#dcfce7",darkBg:"rgba(22, 163, 74, 0.15)"},solicitud_rechazada:{icon:gs,color:"#dc2626",bg:"#fee2e2",darkBg:"rgba(220, 38, 38, 0.15)"},nuevo_pedido:{icon:$6,color:"#2563eb",bg:"#dbeafe",darkBg:"rgba(37, 99, 235, 0.15)"},pedido_actualizado:{icon:Uc,color:"#0891b2",bg:"#cffafe",darkBg:"rgba(8, 145, 178, 0.15)"},nuevo_seguidor:{icon:eu,color:"#2563eb",bg:"#dbeafe",darkBg:"rgba(37, 99, 235, 0.15)"},producto_agotado:{icon:Nc,color:"#dc2626",bg:"#fee2e2",darkBg:"rgba(220, 38, 38, 0.15)"},default:{icon:Hd,color:"#6b7280",bg:"#f3f4f6",darkBg:"rgba(107, 114, 128, 0.15)"}};function WW(t){if(!t)return"";const n=new Date-new Date(t),r=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<1?"Ahora":r<60?`Hace ${r}m`:i<24?`Hace ${i}h`:a<7?`Hace ${a}d`:new Date(t).toLocaleDateString("es-DO",{day:"numeric",month:"short"})}function HW({notification:t,onRead:e,onNavigate:n,isDark:r}){const i=N_[t.type]||N_.default,a=i.icon,l=t.type==="solicitud_aprobada",d=t.type==="solicitud_rechazada";return s.jsx("div",{className:"cursor-pointer",style:{padding:"14px 16px",margin:"0",borderBottom:r?"1px solid #374151":"1px solid #e5e7eb",backgroundColor:t.read?"transparent":r?"rgba(37, 99, 235, 0.08)":"rgba(37, 99, 235, 0.04)",transition:"background-color 0.2s"},onClick:()=>{e(t.id),t.actionUrl&&n(t.actionUrl)},children:s.jsxs("div",{className:"d-flex gap-3 align-items-start",children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",borderRadius:"10px",backgroundColor:r?i.darkBg:i.bg},children:s.jsx(a,{size:20,style:{color:i.color}})}),s.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-start gap-2 mb-1",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("h6",{className:"mb-0",style:{fontSize:"14px",fontWeight:"600",color:r?"#f1f5f9":"#1e293b",lineHeight:"1.3"},children:t.title}),!t.read&&s.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#2563eb",display:"inline-block"}})]}),s.jsxs("span",{className:"d-flex align-items-center gap-1",style:{fontSize:"11px",color:r?"#64748b":"#94a3b8",whiteSpace:"nowrap"},children:[s.jsx($h,{size:12}),WW(t.createdAt)]})]}),s.jsx("p",{className:"mb-0",style:{fontSize:"13px",color:r?"#94a3b8":"#64748b",lineHeight:"1.5",marginBottom:t.actionLabel?"12px":"0"},children:t.message}),t.actionLabel&&s.jsxs("button",{className:"btn d-flex align-items-center gap-1 mt-2",style:{fontSize:"13px",padding:"6px 12px",backgroundColor:l?"#16a34a":d?"#dc2626":"#2563eb",color:"#ffffff",border:"none",borderRadius:"6px",fontWeight:"500"},onClick:u=>{u.stopPropagation(),e(t.id),t.actionUrl&&n(t.actionUrl)},children:[t.actionLabel,s.jsx(_a,{size:16})]})]})]})})}function qW({isOpen:t,onClose:e,isDark:n}){const r=Sr(),[i,a]=b.useState(!1),{notifications:l,unreadCount:d,loading:u,markAsRead:m}=vx(),g=i?l:l.filter(y=>!y.read),h=y=>{e(),r(y)};return s.jsx(sn,{children:t&&s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"position-fixed d-none d-md-block",style:{top:0,left:0,right:0,bottom:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99998},onClick:e}),s.jsxs(Q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"position-fixed notifications-panel-responsive",style:{backgroundColor:n?"#1e293b":"#ffffff",zIndex:99999,overflow:"hidden",display:"flex",flexDirection:"column",border:n?"1px solid #374151":"1px solid #e5e7eb",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center px-4 py-3",style:{backgroundColor:n?"#1e293b":"#ffffff",borderBottom:n?"1px solid #374151":"1px solid #e5e7eb"},children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx(Hd,{size:20,style:{color:n?"#f1f5f9":"#1e293b"}}),s.jsx("h5",{className:"mb-0",style:{fontSize:"18px",fontWeight:"600",color:n?"#f1f5f9":"#1e293b"},children:"Notificaciones"}),d>0&&s.jsx("span",{style:{fontSize:"12px",padding:"2px 8px",backgroundColor:"#dc2626",color:"#ffffff",borderRadius:"10px",fontWeight:"600"},children:d})]}),s.jsx("button",{onClick:e,className:"btn d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",padding:"0",backgroundColor:n?"#374151":"#f1f5f9",border:"none",borderRadius:"8px",color:n?"#9ca3af":"#6b7280"},children:s.jsx(gs,{size:20})})]}),s.jsx("div",{className:"flex-grow-1",style:{overflowY:"auto",flex:1,paddingTop:"8px",paddingBottom:"16px"},children:u?s.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{padding:"60px 20px"},children:[s.jsx(Q.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"48px",height:"48px",borderRadius:"50%",border:"3px solid",borderColor:n?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",borderTopColor:"#3b82f6"}}),s.jsx("p",{style:{marginTop:"16px",color:n?"#94a3b8":"#64748b",fontSize:"14px"},children:"Cargando..."})]}):g.length===0?s.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{padding:"40px 20px"},children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:n?"#374151":"#f3f4f6",marginBottom:"16px"},children:s.jsx(Hd,{size:28,style:{color:n?"#6b7280":"#9ca3af"}})}),s.jsx("p",{style:{fontSize:"15px",fontWeight:"500",color:n?"#9ca3af":"#6b7280",textAlign:"center"},children:i?"No hay notificaciones en el historial":"No tienes notificaciones nuevas"})]}):s.jsx(s.Fragment,{children:g.map(y=>s.jsx(HW,{notification:y,onRead:m,onNavigate:h,isDark:n},y.id))})}),s.jsx("div",{style:{padding:"12px 16px",borderTop:n?"1px solid #374151":"1px solid #e5e7eb",backgroundColor:n?"#1e293b":"#ffffff"},children:s.jsx("button",{onClick:()=>a(!i),className:"btn w-100 d-flex align-items-center justify-content-center gap-2",style:{padding:"10px",backgroundColor:i?n?"#374151":"#e5e7eb":n?"#1e293b":"#f9fafb",border:n?"1px solid #4b5563":"1px solid #d1d5db",borderRadius:"8px",color:n?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"500"},children:i?s.jsxs(s.Fragment,{children:[s.jsx(Hd,{size:16}),"Ver solo nuevas"]}):s.jsxs(s.Fragment,{children:[s.jsx($h,{size:16}),"Ver historial"]})})})]})]})})}function GW({isDark:t,onClick:e,className:n=""}){const{unreadCount:r}=vx();return s.jsxs("button",{onClick:e,className:`position-relative btn p-0 ${n}`,style:{backgroundColor:"transparent",border:"none",padding:"6px"},title:"Notificaciones",children:[s.jsx(Hd,{size:22,style:{color:t?"#e2e8f0":"#1e293b"}}),r>0&&s.jsx("span",{className:"position-absolute d-flex align-items-center justify-content-center",style:{top:"-2px",right:"-2px",minWidth:"16px",height:"16px",padding:"0 4px",backgroundColor:"#dc2626",color:"#ffffff",fontSize:"10px",fontWeight:"700",borderRadius:"8px",border:"2px solid",borderColor:t?"#1e293b":"#ffffff"},children:r>9?"9+":r})]})}const KW=()=>{var I,F;const{usuario:t,usuarioInfo:e,logout:n,actualizarUsuarioInfo:r}=er(),{setModalAbierto:i}=Fl(),{isDark:a,toggleTheme:l}=Ss(),d=b.useRef(null),u=Sr(),[m,g]=b.useState(!1),[h,y]=b.useState(!1),[w,S]=b.useState(!1),[N,_]=b.useState(!1),{unreadCount:D}=vx();b.useEffect(()=>{if(m){const R=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${R}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,R)}}},[m]);const A=(()=>{try{if(!t||!e||!e.metodoEntrega)return"Selecciona mtodo de entrega";if((e.metodoEntrega||"").toLowerCase()==="tienda")return"Playcenter Universal";const E=(e.direccion||"").trim();return E?/maps\.|google\.com\/maps|Ubicacin:/i.test(E)?"Direccin de Google Maps":E:"Selecciona mtodo de entrega"}catch{return"Selecciona mtodo de entrega"}})(),L=async()=>{try{await n(),u("/",{replace:!0})}catch{u("/",{replace:!0})}};return b.useEffect(()=>{if(d.current)try{d.current.focus()}catch{}},[]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("header",{className:"navbar navbar-expand-xl",style:{background:a?"linear-gradient(135deg, rgba(17, 24, 39, 0.98) 0%, rgba(31, 41, 55, 0.98) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(249, 250, 251, 0.98) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderBottom:a?"1px solid rgba(59, 130, 246, 0.15)":"1px solid rgba(59, 130, 246, 0.12)",boxShadow:a?"0 4px 32px rgba(0, 0, 0, 0.5), 0 0 48px rgba(59, 130, 246, 0.08)":"0 2px 24px rgba(0, 0, 0, 0.08), 0 0 48px rgba(59, 130, 246, 0.05)",paddingLeft:"0",paddingRight:"0",paddingTop:"0.75rem",paddingBottom:"0.75rem",height:"64px"},children:s.jsx("div",{className:"container-fluid",children:s.jsxs("div",{className:"d-flex align-items-center justify-content-between w-100",children:[s.jsx("div",{id:"search-bar-container",className:"flex-grow-1 px-0 d-lg-none",children:s.jsx(j_,{onClose:()=>{},ref:d,placeholder:"Buscar en pcu.com.do"})}),s.jsxs("button",{onClick:()=>g(!0),className:"navbar-toggler d-lg-none btn btn-outline-secondary rounded-3 position-relative",type:"button","aria-label":"Abrir men",style:{height:"40px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:[s.jsx("svg",{className:"hamburger-icon",width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),D>0&&s.jsx("span",{className:"position-absolute d-flex align-items-center justify-content-center",style:{top:"-4px",left:"-4px",minWidth:"16px",height:"16px",padding:"0 3px",background:"#ef4444",color:"#ffffff",fontSize:"9px",fontWeight:"700",borderRadius:"8px",border:"1.5px solid #ffffff"},children:D>9?"9+":D})]}),s.jsx("div",{className:"navbar-collapse d-none d-lg-flex w-100 align-items-center justify-content-between",children:s.jsxs("div",{className:"header-grid w-100",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",style:{paddingLeft:"0.5rem",minWidth:"0"},children:[s.jsx(Yt,{to:"/",className:"d-flex align-items-center",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",padding:"0"},children:s.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal",className:"img-fluid",style:{height:"36px",width:"auto",objectFit:"contain"}})}),s.jsxs("button",{onClick:()=>{t?y(!0):S(!0)},className:"btn btn-sm delivery-btn d-flex align-items-center gap-1",style:{whiteSpace:"nowrap"},children:[s.jsx(jh,{size:10,className:"delivery-icon"}),s.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[s.jsx("div",{style:{fontSize:"9px",opacity:.7},children:"Enviar a"}),s.jsx("div",{style:{fontSize:"10px",fontWeight:"600"},children:A.length>15?A.substring(0,15)+"...":A})]})]})]}),s.jsx("div",{className:"header-search",style:{maxWidth:"1600px",width:"100%",flex:"1 1 auto",display:"flex",alignItems:"center",minHeight:"42px",overflow:"visible"},children:s.jsx(j_,{onClose:()=>{},ref:d,placeholder:"Buscar en pcu.com.do"})}),s.jsx("div",{className:"header-actions",style:{display:"flex",alignItems:"center",justifyContent:"flex-end",minWidth:"0",gap:"0.75rem",paddingRight:"0.5rem"},children:s.jsxs("nav",{className:"navbar-nav d-flex flex-row align-items-center gap-2",children:[s.jsx(Yt,{to:"/carrito",className:"text-decoration-none d-flex align-items-center justify-content-center",style:{padding:"6px",transition:"all 0.15s ease"},children:s.jsx("svg",{width:"24",height:"24",fill:"none",className:"cart-icon",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),t&&s.jsx(GW,{isDark:a,onClick:()=>_(!0)}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&s.jsxs(Yt,{to:"/admin",className:"btn btn-sm position-relative",style:{fontSize:"10px",padding:"4px 10px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",border:"none",color:"#ffffff",fontWeight:"600",borderRadius:"5px",marginLeft:"4px",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.2)",transition:"all 0.2s ease"},children:["Admin",D>0&&s.jsx("span",{className:"position-absolute d-flex align-items-center justify-content-center",style:{top:"-8px",right:"-8px",minWidth:"18px",height:"18px",padding:"0 4px",backgroundColor:"#ef4444",color:"#ffffff",fontSize:"10px",fontWeight:"700",borderRadius:"9px",border:"2px solid #ffffff",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:D>99?"99+":D})]}),t?s.jsx(Q.div,{className:"position-relative",style:{marginLeft:"4px"},whileTap:{scale:.95},children:s.jsx(Yt,{to:"/profile",className:"text-decoration-none",children:s.jsx("div",{className:"rounded-circle overflow-hidden d-flex align-items-center justify-content-center",style:{width:"36px",height:"36px",border:"2px solid rgba(59, 130, 246, 0.4)",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.2)",background:a?"#1f2937":"#ffffff",transition:"all 0.2s ease",overflow:"hidden"},children:e!=null&&e.fotoURL||t.photoURL?s.jsx("img",{src:(e==null?void 0:e.fotoURL)||t.photoURL,alt:"Perfil",className:"w-100 h-100",style:{objectFit:"cover"}}):s.jsx("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center fw-bold",style:{fontSize:"14px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#ffffff"},children:((I=t.displayName)==null?void 0:I.charAt(0).toUpperCase())||"U"})})})}):s.jsx(Q.button,{onClick:()=>i(!0),className:"btn",style:{fontSize:"10px",padding:"4px 10px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",border:"none",color:"#ffffff",fontWeight:"600",borderRadius:"5px",marginLeft:"4px",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.2)",transition:"all 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Iniciar sesin"})]})})]})})]})})}),s.jsx("div",{className:"d-none d-lg-block",style:{background:a?"linear-gradient(135deg, rgba(31, 41, 55, 0.98) 0%, rgba(17, 24, 39, 0.98) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(249, 250, 251, 0.98) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderBottom:a?"1px solid rgba(59, 130, 246, 0.15)":"1px solid rgba(59, 130, 246, 0.12)",padding:"0.75rem 0",boxShadow:a?"0 4px 16px rgba(0, 0, 0, 0.4), 0 0 32px rgba(59, 130, 246, 0.08)":"0 2px 12px rgba(0, 0, 0, 0.08), 0 0 32px rgba(59, 130, 246, 0.05)",overflowX:"auto",overflowY:"hidden"},children:s.jsx("div",{className:"container-fluid",style:{minWidth:"max-content"},children:s.jsxs("div",{className:"d-flex align-items-center justify-content-between",style:{paddingLeft:"1rem",paddingRight:"1rem",minWidth:"max-content"},children:[s.jsxs("nav",{className:"d-flex align-items-center",style:{gap:"0.5rem"},children:[s.jsxs(Yt,{to:"/",className:"text-decoration-none d-flex align-items-center gap-2",style:{color:a?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px",transition:"all 0.2s ease",background:"transparent"},onMouseEnter:R=>{R.currentTarget.style.background=a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",R.currentTarget.style.color="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=a?"#e5e7eb":"#374151"},children:[s.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Inicio"]}),s.jsx("div",{style:{width:"1px",height:"24px",background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),s.jsxs(Yt,{to:"/categorias",className:"text-decoration-none d-flex align-items-center gap-2",style:{color:a?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px",transition:"all 0.2s ease",background:"transparent"},onMouseEnter:R=>{R.currentTarget.style.background=a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",R.currentTarget.style.color="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=a?"#e5e7eb":"#374151"},children:[s.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Categoras"]}),s.jsx("div",{style:{width:"1px",height:"24px",background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),s.jsxs(Yt,{to:"/tiendas",className:"text-decoration-none d-flex align-items-center gap-2",style:{color:a?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px",transition:"all 0.2s ease",background:"transparent"},onMouseEnter:R=>{R.currentTarget.style.background=a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",R.currentTarget.style.color="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=a?"#e5e7eb":"#374151"},children:[s.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Tiendas"]}),s.jsx("div",{style:{width:"1px",height:"24px",background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),s.jsxs(Yt,{to:"/vender",className:"text-decoration-none d-flex align-items-center gap-2",style:{color:a?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px",transition:"all 0.2s ease",background:"transparent"},onMouseEnter:R=>{R.currentTarget.style.background=a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",R.currentTarget.style.color="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=a?"#e5e7eb":"#374151"},children:[s.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Vender"]}),s.jsx("div",{style:{width:"1px",height:"24px",background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),s.jsxs(Yt,{to:"/nosotros",className:"text-decoration-none d-flex align-items-center gap-2",style:{color:a?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px",transition:"all 0.2s ease",background:"transparent"},onMouseEnter:R=>{R.currentTarget.style.background=a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",R.currentTarget.style.color="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=a?"#e5e7eb":"#374151"},children:[s.jsxs("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Nosotros"]}),s.jsx("div",{style:{width:"1px",height:"24px",background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),s.jsxs(Yt,{to:"/contacto",className:"text-decoration-none d-flex align-items-center gap-2",style:{color:a?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px",transition:"all 0.2s ease",background:"transparent"},onMouseEnter:R=>{R.currentTarget.style.background=a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",R.currentTarget.style.color="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=a?"#e5e7eb":"#374151"},children:[s.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contacto"]}),s.jsx("div",{style:{width:"1px",height:"24px",background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),s.jsxs(Yt,{to:"/carrito",className:"text-decoration-none d-flex align-items-center gap-2 cart-link",style:{fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px"},children:[s.jsx("svg",{width:"20",height:"20",fill:"none",className:"cart-icon",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Carrito"]}),s.jsx("div",{style:{width:"1px",height:"24px",background:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),s.jsxs(Yt,{to:"/estafetas",className:"text-decoration-none d-flex align-items-center gap-2",style:{color:a?"#e5e7eb":"#374151",fontSize:"14px",fontWeight:"600",padding:"0.5rem 1rem",borderRadius:"6px",transition:"all 0.2s ease",background:"transparent"},onMouseEnter:R=>{R.currentTarget.style.background=a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",R.currentTarget.style.color="#3b82f6"},onMouseLeave:R=>{R.currentTarget.style.background="transparent",R.currentTarget.style.color=a?"#e5e7eb":"#374151"},children:[s.jsxs("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Estafetas"]})]}),s.jsx("button",{onClick:l,className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",background:a?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":"Cambiar tema",children:a?s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#60a5fa",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),s.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),s.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),s.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),s.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),s.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),s.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),s.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):s.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"#3b82f6",children:s.jsx("path",{d:"m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z"})})})]})})})]}),h&&s.jsx(K6,{abierto:h,onClose:()=>y(!1),usuarioId:(e==null?void 0:e.uid)||(t==null?void 0:t.uid),actualizarUsuarioInfo:r,direccionEditar:null,actualizarLista:()=>{}}),f1.createPortal(s.jsx(sn,{children:m&&s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>g(!1),className:"d-xl-none position-fixed top-0 start-0 w-100 h-100",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:99999998,backdropFilter:"blur(4px)"}}),s.jsxs(Q.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"d-xl-none position-fixed top-0 end-0 h-100 shadow-lg overflow-auto",style:{width:"min(320px, 85vw)",maxWidth:"100vw",zIndex:99999999,backgroundColor:a?"#111827":"#ffffff",overscrollBehavior:"contain",WebkitOverflowScrolling:"touch"},children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between p-4 border-bottom",children:[s.jsx("h2",{className:"h4 fw-bold mb-0",style:{color:"#2563eb"},children:"Men"}),s.jsx("button",{onClick:()=>g(!1),className:"btn",style:{backgroundColor:"#2563eb",border:"none",color:"#ffffff",width:"40px",height:"40px",minWidth:"40px",minHeight:"40px",maxWidth:"40px",maxHeight:"40px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",flexShrink:0},"aria-label":"Cerrar men",children:s.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"#ffffff",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),t?s.jsx("div",{className:"p-4 border-bottom",children:s.jsxs(Yt,{to:"/profile",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 p-3 text-decoration-none rounded-3 hover-primary",children:[s.jsx("div",{className:"rounded-circle overflow-hidden border border-2 border-primary shadow",style:{width:"56px",height:"56px",minWidth:"56px",minHeight:"56px",backgroundColor:a?"#374151":"#ffffff"},children:e!=null&&e.fotoURL||t.photoURL?s.jsx("img",{src:(e==null?void 0:e.fotoURL)||t.photoURL,alt:"Perfil",className:"w-100 h-100",style:{objectFit:"contain"}}):s.jsx("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center fw-bold fs-5",style:{backgroundColor:a?"#2563eb":"#3b82f6",color:"#ffffff"},children:((F=t.displayName)==null?void 0:F.charAt(0).toUpperCase())||"U"})}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("p",{className:"fw-semibold mb-1",style:{color:a?"#f9fafb":"#111827"},children:t.displayName||"Usuario"}),s.jsx("p",{className:"small mb-0",style:{color:a?"#9ca3af":"#6b7280"},children:"Ver perfil"})]}),s.jsx("svg",{width:"20",height:"20",className:"text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}):s.jsx("div",{className:"p-4 border-bottom",children:s.jsxs("button",{onClick:()=>{g(!1),i(!0)},className:"btn w-100 fw-semibold d-flex align-items-center justify-content-center gap-2",style:{backgroundColor:"#2563eb",border:"none",color:"#ffffff",borderRadius:"10px",padding:"14px 24px",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 12px rgba(37, 99, 235, 0.4)",minHeight:"50px"},children:[s.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Iniciar sesin"]})}),s.jsxs("nav",{className:"p-2",children:[s.jsxs(Yt,{to:"/",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Inicio"]}),s.jsxs(Yt,{to:"/categorias",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Categoras"]}),s.jsxs(Yt,{to:"/tiendas",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Tiendas"]}),s.jsxs(Yt,{to:"/vender",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Vender"]}),s.jsxs(Yt,{to:"/nosotros",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Nosotros"]}),s.jsxs(Yt,{to:"/contacto",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Contctanos"]}),s.jsxs(Yt,{to:"/estafetas",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Estafetas"]}),s.jsxs(Yt,{to:"/carrito",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium",style:{color:a?"#f9fafb":"#111827"},children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Carrito"]}),t&&s.jsxs("button",{onClick:()=>{g(!1),_(!0)},className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium w-100 border-0 text-start position-relative",style:{color:a?"#f9fafb":"#111827",backgroundColor:D>0?a?"rgba(59, 130, 246, 0.1)":"rgba(59, 130, 246, 0.05)":"transparent"},children:[s.jsxs("div",{className:"position-relative",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{width:"24px",height:"24px"},children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),D>0&&s.jsx("span",{className:"position-absolute d-flex align-items-center justify-content-center",style:{top:"-6px",right:"-6px",minWidth:"18px",height:"18px",padding:"0 4px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#ffffff",fontSize:"10px",fontWeight:"700",borderRadius:"9px",boxShadow:"0 2px 6px rgba(239, 68, 68, 0.4)"},children:D>99?"99+":D})]}),s.jsxs("span",{className:"d-flex align-items-center gap-2",children:["Notificaciones",D>0&&s.jsxs("span",{style:{fontSize:"12px",padding:"2px 8px",background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"#ffffff",borderRadius:"12px",fontWeight:"600"},children:[D," ",D===1?"nueva":"nuevas"]})]})]}),s.jsx("div",{className:"px-2 py-2",children:s.jsxs("button",{onClick:()=>{t?(g(!1),y(!0)):(g(!1),S(!0))},className:"w-100 d-flex align-items-center gap-3 px-3 py-3 rounded-3 border-0 text-start",style:{background:a?"linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.15))":"linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(37, 99, 235, 0.08))",border:a?"1px solid rgba(59, 130, 246, 0.3)":"1px solid rgba(59, 130, 246, 0.2)",transition:"all 0.2s ease",cursor:"pointer"},onMouseEnter:R=>{R.currentTarget.style.background=a?"linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(37, 99, 235, 0.25))":"linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(37, 99, 235, 0.12))",R.currentTarget.style.transform="translateY(-2px)",R.currentTarget.style.boxShadow=a?"0 4px 12px rgba(59, 130, 246, 0.3)":"0 4px 12px rgba(59, 130, 246, 0.2)"},onMouseLeave:R=>{R.currentTarget.style.background=a?"linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.15))":"linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(37, 99, 235, 0.08))",R.currentTarget.style.transform="translateY(0)",R.currentTarget.style.boxShadow="none"},children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center rounded-circle",style:{width:"40px",height:"40px",minWidth:"40px",background:a?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #60a5fa, #3b82f6)",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.3)"},children:s.jsx(jh,{size:18,color:"#ffffff"})}),s.jsxs("div",{className:"d-flex flex-column flex-grow-1",children:[s.jsx("span",{className:"fw-bold",style:{color:a?"#f9fafb":"#111827",fontSize:"14px",marginBottom:"2px"},children:"Mtodo de entrega"}),s.jsx("span",{className:"small",style:{color:a?"#9ca3af":"#6b7280",fontSize:"12px",lineHeight:"1.3"},children:A.length>35?A.substring(0,35)+"...":A})]}),s.jsx("svg",{width:"20",height:"20",fill:"none",stroke:a?"#60a5fa":"#3b82f6",viewBox:"0 0 24 24",style:{minWidth:"20px"},children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),((e==null?void 0:e.isAdmin)||(e==null?void 0:e.isSeller)||(e==null?void 0:e.empresa)||(e==null?void 0:e.empresaId))&&s.jsxs(Yt,{to:"/admin",onClick:()=>g(!1),className:"d-flex align-items-center gap-3 px-4 py-3 text-decoration-none rounded-3 hover-primary fw-medium mt-2",style:{color:a?"#f9fafb":"#111827"},children:[s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Panel Admin"]})]}),t&&s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 mt-auto",children:s.jsxs("button",{onClick:()=>{L(),g(!1)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors font-medium",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Cerrar sesin"]})})]})]})}),document.body),s.jsx(sn,{children:w&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99999,backdropFilter:"blur(4px)"},onClick:()=>S(!1),children:s.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-4 shadow-lg",style:{maxWidth:"400px",width:"90%",padding:"32px",backgroundColor:a?"#1e293b":"#ffffff"},onClick:R=>R.stopPropagation(),children:[s.jsx("div",{className:"d-flex justify-content-center mb-4",children:s.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"72px",height:"72px",backgroundColor:"#2563eb",boxShadow:"0 4px 12px rgba(37, 99, 235, 0.3)"},children:s.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"12",cy:"7",r:"4"})]})})}),s.jsx("h3",{className:"text-center fw-bold mb-2",style:{fontSize:"22px",color:a?"#f1f5f9":"#1e293b",letterSpacing:"-0.02em"},children:"Debes iniciar sesin"}),s.jsx("p",{className:"text-center mb-4",style:{fontSize:"15px",color:a?"#94a3b8":"#64748b",lineHeight:"1.5"},children:"Para seleccionar un mtodo de entrega, primero debes iniciar sesin en tu cuenta."}),s.jsxs("div",{className:"d-flex gap-3",children:[s.jsx("button",{onClick:()=>S(!1),className:"btn flex-fill",style:{backgroundColor:a?"#334155":"#f1f5f9",color:a?"#f1f5f9":"#475569",padding:"12px",fontSize:"15px",fontWeight:"600",borderRadius:"10px",border:"none"},children:"Cancelar"}),s.jsx("button",{onClick:()=>{S(!1),i(!0)},className:"btn flex-fill",style:{backgroundColor:"#2563eb",color:"#ffffff",padding:"12px",fontSize:"15px",fontWeight:"600",borderRadius:"10px",border:"none",transition:"all 0.2s"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#1d4ed8",R.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="#2563eb",R.currentTarget.style.transform="translateY(0)"},children:"Iniciar sesin"})]})]})})}),s.jsx(qW,{isOpen:N,onClose:()=>_(!1),isDark:a})]})};function bx({isOpen:t,onClose:e,onIniciarSesion:n}){return t?f1.createPortal(s.jsx("div",{onClick:e,className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[11000] flex items-center justify-center p-4",style:{top:0,left:0},children:s.jsxs(Q.div,{onClick:r=>r.stopPropagation(),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-sm mx-auto z-[11001]",style:{border:"1px solid rgba(229, 231, 235, 0.2)",overflow:"hidden"},children:[s.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-9 h-9 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-500 dark:text-gray-400 hover:text-red-500 transition-all duration-200 z-10","aria-label":"Cerrar modal",children:s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),s.jsxs("div",{className:"px-6 py-8 text-center",children:[s.jsx("div",{className:"mb-5 flex justify-center",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500/10 dark:bg-blue-500/20 flex items-center justify-center",children:s.jsx(rh,{className:"text-blue-500 text-2xl"})})}),s.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-900 dark:text-white",children:"Inicia sesin"}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-300 mb-8 px-2",children:"Necesitas iniciar sesin para acceder a esta funcin"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(Q.button,{onClick:()=>{e(),n()},whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 px-6 py-3.5 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all duration-200",style:{minHeight:"48px"},children:"Iniciar sesin"}),s.jsx(Q.button,{onClick:e,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 px-6 py-3.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-xl font-semibold transition-all duration-200",style:{minHeight:"48px"},children:"Cancelar"})]})]})]})}),document.body):null}function YW(){const{usuario:t}=er(),e=Sr(),{abrirModal:n}=Fl(),[r,i]=b.useState(!1),a=(u,m)=>{!t&&(m==="/carrito"||m==="/Profile")?(u.preventDefault(),i(!0)):e(m)},l=()=>i(!1),d=()=>{l(),n()};return s.jsx("div",{className:"footer-block",style:{background:"#000000c1"},children:s.jsxs("footer",{className:"footer futuristic-footer relative py-12 text-sm sm:text-base",style:{color:"#d1d5db !important"},children:[s.jsx("div",{className:"footer-bg-animated"}),s.jsx("div",{className:"w-full flex justify-center mb-10 relative z-20",children:s.jsx("img",{src:"/Playlogo.png",alt:"Playcenter Universal Logo",className:"footer-logo-glow w-32 sm:w-44 xl:w-64 transition-transform duration-300 hover:scale-105"})}),s.jsxs("div",{className:"footer-cols-wrapper relative z-20 max-w-7xl mx-auto px-4 sm:px-6 xl:px-8 grid grid-cols-2 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"footer-col",children:[s.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",style:{color:"#ffffff"},children:"Playcenter Universal"}),s.jsx("p",{style:{color:"#d1d5db"},children:"Tu universo de tecnologa y gaming en Santiago, R.D."}),s.jsxs("p",{className:"mt-3 flex justify-center sm:justify-start items-center gap-2",style:{color:"#d1d5db"},children:[s.jsx(jh,{})," Av. Estrella Sadhal #55, frente a la doble va"]}),s.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",style:{color:"#d1d5db"},children:[s.jsx(Gb,{})," +1 (809) 582-1212 (Internet)"]}),s.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",style:{color:"#d1d5db"},children:[s.jsx(Gb,{})," +1 (849) 635-7000 (Tienda)"]}),s.jsxs("p",{className:"mt-2 flex justify-center sm:justify-start items-center gap-2",style:{color:"#d1d5db"},children:[s.jsx(lh,{})," playcenter121@gmail.com"]})]}),s.jsxs("div",{className:"footer-col",children:[s.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",style:{color:"#ffffff"},children:"Navegacin"}),s.jsx("ul",{className:"footer-nav-list",children:[["Categoras","/categorias",!1],["Nosotros","/nosotros",!1],["Contctanos","/contacto",!1],["Estafetas","/estafetas",!1],["Tiendas","/tiendas",!1],["Vender","/vender",!1],["Carrito","/carrito",!0],["Mi perfil","/Profile",!0]].map(([u,m,g])=>s.jsx("li",{children:g?s.jsx("a",{href:m,onClick:h=>a(h,m),className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm cursor-pointer",children:u}):s.jsx("a",{href:m,className:"footer-link-neon hover:text-cyan-400 transition duration-300 ease-in-out text-xs sm:text-sm",children:u})},u))})]}),s.jsxs("div",{className:"footer-col",children:[s.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-semibold mb-3",style:{color:"#ffffff"},children:"Horario"}),s.jsx("p",{style:{color:"#d1d5db"},children:"Lunes a Viernes: 8:30am - 5:30pm"}),s.jsx("p",{style:{color:"#d1d5db"},children:"Sbados: 8:30am - 12:30pm"}),s.jsx("p",{style:{color:"#d1d5db"},children:"Domingos: Cerrado"})]}),s.jsxs("div",{className:"footer-col",children:[s.jsx("h3",{className:"footer-title-neon text-base sm:text-lg font-bold mb-3",style:{color:"#ffffff"},children:"Conctate con nosotros"}),s.jsx("div",{className:"grid grid-cols-2 gap-4 justify-items-center sm:justify-items-start",children:[["https://www.facebook.com/pcu12","/Facebook.png","Facebook"],["https://www.instagram.com/playcenter_universal/?hl=es","/Instagram.png","Instagram"],["https://www.tiktok.com/@playcenter_universal?lang=es","/tiktok.png","TikTok"],["https://youtube.com/@playcenteruniversal1916","/Youtube.png","YouTube"]].map(([u,m,g])=>s.jsx("a",{href:u,target:"_blank",rel:"noreferrer",className:"relative group",children:s.jsx("img",{src:m,alt:g,className:"footer-social-icon-neon w-12 h-12 sm:w-16 sm:h-16 rounded-full transition-transform duration-300 transform group-hover:scale-110"})},g))})]})]}),s.jsxs("p",{className:"footer-copyright text-center text-[11px] sm:text-xs mt-10 relative z-20",style:{color:"#6b7280"},children:[new Date().getFullYear()," Playcenter Universal. Todos los derechos reservados."]}),s.jsx(bx,{isOpen:r,onClose:l,onIniciarSesion:d})]})})}function pw(){const{usuario:t,usuarioInfo:e}=er(),[n,r]=b.useState(null),[i,a]=b.useState(!0),[l,d]=b.useState("personal");b.useEffect(()=>{if(!t){r(null),a(!1);return}const h=pt(oe,"stores"),y=Ot(h,qt("ownerUid","==",t.uid)),w=_n(y,async S=>{if(S.empty)r(null);else{const N={id:S.docs[0].id,...S.docs[0].data()};if(r(N),t!=null&&t.uid&&N.id){const D=e==null?void 0:e.storeId,A=e==null?void 0:e.storeName,L=N.nombre||N.name||"";if(D!==N.id||A!==L)try{const I=We(oe,"users",t.uid);await jn(I,{storeId:N.id,storeName:L,isSeller:!0,role:"seller"})}catch{}}window.location.pathname.startsWith("/admin")&&(e!=null&&e.isSeller||(e==null?void 0:e.role)==="seller")&&d("tienda")}a(!1)},S=>{r(null),a(!1)});return()=>w()},[t,e]);const u=h=>h==="tienda"&&!n?!1:(d(h),localStorage.setItem("modoActual",h),!0),m=!!n;return{tienda:n,tieneTienda:m,loadingTienda:i,modoActual:l,cambiarModo:u,esVendedor:l==="tienda"&&m}}var yv={exports:{}},vv,__;function XW(){if(__)return vv;__=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return vv=t,vv}var bv,S_;function QW(){if(S_)return bv;S_=1;var t=XW();function e(){}function n(){}return n.resetWarningCache=e,bv=function(){function r(l,d,u,m,g,h){if(h!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},bv}var C_;function JW(){return C_||(C_=1,yv.exports=QW()()),yv.exports}var ZW=JW();const mr=Sh(ZW),eH=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function kh(t,e,n){const r=tH(t),{webkitRelativePath:i}=t,a=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&E_(r,"path",a),E_(r,"relativePath",a),r}function tH(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=eH.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function E_(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const nH=[".DS_Store","Thumbs.db"];function rH(t){return cu(this,void 0,void 0,function*(){return P0(t)&&sH(t.dataTransfer)?lH(t.dataTransfer,t.type):iH(t)?aH(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?oH(t):[]})}function sH(t){return P0(t)}function iH(t){return P0(t)&&P0(t.target)}function P0(t){return typeof t=="object"&&t!==null}function aH(t){return Yb(t.target.files).map(e=>kh(e))}function oH(t){return cu(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>kh(n))})}function lH(t,e){return cu(this,void 0,void 0,function*(){if(t.items){const n=Yb(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(cH));return T_(Y6(r))}return T_(Yb(t.files).map(n=>kh(n)))})}function T_(t){return t.filter(e=>nH.indexOf(e.name)===-1)}function Yb(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function cH(t){if(typeof t.webkitGetAsEntry!="function")return A_(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?X6(e):A_(t,e)}function Y6(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?Y6(n):[n]],[])}function A_(t,e){return cu(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const l=yield a.getFile();return l.handle=a,kh(l)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return kh(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function dH(t){return cu(this,void 0,void 0,function*(){return t.isDirectory?X6(t):uH(t)})}function X6(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function a(){e.readEntries(l=>cu(this,void 0,void 0,function*(){if(l.length){const d=Promise.all(l.map(dH));i.push(d),a()}else try{const d=yield Promise.all(i);n(d)}catch(d){r(d)}}),l=>{r(l)})}a()})}function uH(t){return cu(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=kh(r,t.fullPath);e(i)},r=>{n(r)})})})}var mg={},P_;function hH(){return P_||(P_=1,mg.__esModule=!0,mg.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(l){var d=l.trim().toLowerCase();return d.charAt(0)==="."?r.toLowerCase().endsWith(d):d.endsWith("/*")?a===d.replace(/\/.*$/,""):i===d})}return!0}),mg}var fH=hH();const wv=Sh(fH);function I_(t){return gH(t)||pH(t)||J6(t)||mH()}function mH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gH(t){if(Array.isArray(t))return Xb(t)}function R_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R_(Object(n),!0).forEach(function(r){Q6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Am(t,e){return vH(t)||yH(t,e)||J6(t,e)||xH()}function xH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J6(t,e){if(t){if(typeof t=="string")return Xb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xb(t,e)}}function Xb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yH(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,l,d;try{for(n=n.call(t);!(i=(l=n.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,d=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw d}}return r}}function vH(t){if(Array.isArray(t))return t}var bH=typeof wv=="function"?wv:wv.default,wH="file-invalid-type",jH="file-too-large",kH="file-too-small",NH="too-many-files",_H=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:wH,message:"File type must be ".concat(r)}},M_=function(e){return{code:jH,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},D_=function(e){return{code:kH,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},SH={code:NH,message:"Too many files"};function Z6(t,e){var n=t.type==="application/x-moz-file"||bH(t,e);return[n,n?null:_H(e)]}function eT(t,e,n){if(Ld(t.size))if(Ld(e)&&Ld(n)){if(t.size>n)return[!1,M_(n)];if(t.size<e)return[!1,D_(e)]}else{if(Ld(e)&&t.size<e)return[!1,D_(e)];if(Ld(n)&&t.size>n)return[!1,M_(n)]}return[!0,null]}function Ld(t){return t!=null}function CH(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,a=t.multiple,l=t.maxFiles,d=t.validator;return!a&&e.length>1||a&&l>=1&&e.length>l?!1:e.every(function(u){var m=Z6(u,n),g=Am(m,1),h=g[0],y=eT(u,r,i),w=Am(y,1),S=w[0],N=d?d(u):null;return h&&S&&!N})}function I0(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function pg(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function O_(t){t.preventDefault()}function EH(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function TH(t){return t.indexOf("Edge/")!==-1}function AH(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return EH(t)||TH(t)}function To(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return e.some(function(d){return!I0(r)&&d&&d.apply(void 0,[r].concat(a)),I0(r)})}}function PH(){return"showOpenFilePicker"in window}function IH(t){if(Ld(t)){var e=Object.entries(t).filter(function(n){var r=Am(n,2),i=r[0],a=r[1],l=!0;return tT(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(a)||!a.every(nT))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(n,r){var i=Am(r,2),a=i[0],l=i[1];return L_(L_({},n),{},Q6({},a,l))},{});return[{description:"Files",accept:e}]}return t}function RH(t){if(Ld(t))return Object.entries(t).reduce(function(e,n){var r=Am(n,2),i=r[0],a=r[1];return[].concat(I_(e),[i],I_(a))},[]).filter(function(e){return tT(e)||nT(e)}).join(",")}function LH(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function MH(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function tT(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function nT(t){return/^.*\.[\w]+$/.test(t)}var DH=["children"],OH=["open"],VH=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zH=["refKey","onChange","onClick"];function FH(t){return BH(t)||UH(t)||rT(t)||$H()}function $H(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BH(t){if(Array.isArray(t))return Qb(t)}function jv(t,e){return qH(t)||HH(t,e)||rT(t,e)||WH()}function WH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rT(t,e){if(t){if(typeof t=="string")return Qb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qb(t,e)}}function Qb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function HH(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,l,d;try{for(n=n.call(t);!(i=(l=n.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,d=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw d}}return r}}function qH(t){if(Array.isArray(t))return t}function V_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V_(Object(n),!0).forEach(function(r){Jb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R0(t,e){if(t==null)return{};var n=GH(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GH(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var gw=b.forwardRef(function(t,e){var n=t.children,r=R0(t,DH),i=iT(r),a=i.open,l=R0(i,OH);return b.useImperativeHandle(e,function(){return{open:a}},[a]),Ns.createElement(b.Fragment,null,n(Mr(Mr({},l),{},{open:a})))});gw.displayName="Dropzone";var sT={disabled:!1,getFilesFromEvent:rH,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};gw.defaultProps=sT;gw.propTypes={children:mr.func,accept:mr.objectOf(mr.arrayOf(mr.string)),multiple:mr.bool,preventDropOnDocument:mr.bool,noClick:mr.bool,noKeyboard:mr.bool,noDrag:mr.bool,noDragEventsBubbling:mr.bool,minSize:mr.number,maxSize:mr.number,maxFiles:mr.number,disabled:mr.bool,getFilesFromEvent:mr.func,onFileDialogCancel:mr.func,onFileDialogOpen:mr.func,useFsAccessApi:mr.bool,autoFocus:mr.bool,onDragEnter:mr.func,onDragLeave:mr.func,onDragOver:mr.func,onDrop:mr.func,onDropAccepted:mr.func,onDropRejected:mr.func,onError:mr.func,validator:mr.func};var Zb={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function iT(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Mr(Mr({},sT),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,l=e.minSize,d=e.multiple,u=e.maxFiles,m=e.onDragEnter,g=e.onDragLeave,h=e.onDragOver,y=e.onDrop,w=e.onDropAccepted,S=e.onDropRejected,N=e.onFileDialogCancel,_=e.onFileDialogOpen,D=e.useFsAccessApi,A=e.autoFocus,L=e.preventDropOnDocument,I=e.noClick,F=e.noKeyboard,R=e.noDrag,E=e.noDragEventsBubbling,M=e.onError,O=e.validator,j=b.useMemo(function(){return RH(n)},[n]),U=b.useMemo(function(){return IH(n)},[n]),H=b.useMemo(function(){return typeof _=="function"?_:z_},[_]),V=b.useMemo(function(){return typeof N=="function"?N:z_},[N]),K=b.useRef(null),X=b.useRef(null),ne=b.useReducer(KH,Zb),we=jv(ne,2),Z=we[0],le=we[1],re=Z.isFocused,B=Z.isFileDialogActive,ce=b.useRef(typeof window<"u"&&window.isSecureContext&&D&&PH()),Se=function(){!ce.current&&B&&setTimeout(function(){if(X.current){var Y=X.current.files;Y.length||(le({type:"closeDialog"}),V())}},300)};b.useEffect(function(){return window.addEventListener("focus",Se,!1),function(){window.removeEventListener("focus",Se,!1)}},[X,B,V,ce]);var Ve=b.useRef([]),$e=function(Y){K.current&&K.current.contains(Y.target)||(Y.preventDefault(),Ve.current=[])};b.useEffect(function(){return L&&(document.addEventListener("dragover",O_,!1),document.addEventListener("drop",$e,!1)),function(){L&&(document.removeEventListener("dragover",O_),document.removeEventListener("drop",$e))}},[K,L]),b.useEffect(function(){return!r&&A&&K.current&&K.current.focus(),function(){}},[K,A,r]);var Ke=b.useCallback(function(ze){M?M(ze):console.error(ze)},[M]),Ye=b.useCallback(function(ze){ze.preventDefault(),ze.persist(),an(ze),Ve.current=[].concat(FH(Ve.current),[ze.target]),pg(ze)&&Promise.resolve(i(ze)).then(function(Y){if(!(I0(ze)&&!E)){var ie=Y.length,pe=ie>0&&CH({files:Y,accept:j,minSize:l,maxSize:a,multiple:d,maxFiles:u,validator:O}),he=ie>0&&!pe;le({isDragAccept:pe,isDragReject:he,isDragActive:!0,type:"setDraggedFiles"}),m&&m(ze)}}).catch(function(Y){return Ke(Y)})},[i,m,Ke,E,j,l,a,d,u,O]),lt=b.useCallback(function(ze){ze.preventDefault(),ze.persist(),an(ze);var Y=pg(ze);if(Y&&ze.dataTransfer)try{ze.dataTransfer.dropEffect="copy"}catch{}return Y&&h&&h(ze),!1},[h,E]),Re=b.useCallback(function(ze){ze.preventDefault(),ze.persist(),an(ze);var Y=Ve.current.filter(function(pe){return K.current&&K.current.contains(pe)}),ie=Y.indexOf(ze.target);ie!==-1&&Y.splice(ie,1),Ve.current=Y,!(Y.length>0)&&(le({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),pg(ze)&&g&&g(ze))},[K,g,E]),Ct=b.useCallback(function(ze,Y){var ie=[],pe=[];ze.forEach(function(he){var He=Z6(he,j),ge=jv(He,2),Ae=ge[0],Be=ge[1],Ze=eT(he,l,a),Rt=jv(Ze,2),Ie=Rt[0],gt=Rt[1],ft=O?O(he):null;if(Ae&&Ie&&!ft)ie.push(he);else{var Te=[Be,gt];ft&&(Te=Te.concat(ft)),pe.push({file:he,errors:Te.filter(function(nt){return nt})})}}),(!d&&ie.length>1||d&&u>=1&&ie.length>u)&&(ie.forEach(function(he){pe.push({file:he,errors:[SH]})}),ie.splice(0)),le({acceptedFiles:ie,fileRejections:pe,isDragReject:pe.length>0,type:"setFiles"}),y&&y(ie,pe,Y),pe.length>0&&S&&S(pe,Y),ie.length>0&&w&&w(ie,Y)},[le,d,j,l,a,u,y,w,S,O]),Ue=b.useCallback(function(ze){ze.preventDefault(),ze.persist(),an(ze),Ve.current=[],pg(ze)&&Promise.resolve(i(ze)).then(function(Y){I0(ze)&&!E||Ct(Y,ze)}).catch(function(Y){return Ke(Y)}),le({type:"reset"})},[i,Ct,Ke,E]),ot=b.useCallback(function(){if(ce.current){le({type:"openDialog"}),H();var ze={multiple:d,types:U};window.showOpenFilePicker(ze).then(function(Y){return i(Y)}).then(function(Y){Ct(Y,null),le({type:"closeDialog"})}).catch(function(Y){LH(Y)?(V(Y),le({type:"closeDialog"})):MH(Y)?(ce.current=!1,X.current?(X.current.value=null,X.current.click()):Ke(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ke(Y)});return}X.current&&(le({type:"openDialog"}),H(),X.current.value=null,X.current.click())},[le,H,V,D,Ct,Ke,U,d]),ct=b.useCallback(function(ze){!K.current||!K.current.isEqualNode(ze.target)||(ze.key===" "||ze.key==="Enter"||ze.keyCode===32||ze.keyCode===13)&&(ze.preventDefault(),ot())},[K,ot]),it=b.useCallback(function(){le({type:"focus"})},[]),Lt=b.useCallback(function(){le({type:"blur"})},[]),Bt=b.useCallback(function(){I||(AH()?setTimeout(ot,0):ot())},[I,ot]),Ge=function(Y){return r?null:Y},mn=function(Y){return F?null:Ge(Y)},Wt=function(Y){return R?null:Ge(Y)},an=function(Y){E&&Y.stopPropagation()},At=b.useMemo(function(){return function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=ze.refKey,ie=Y===void 0?"ref":Y,pe=ze.role,he=ze.onKeyDown,He=ze.onFocus,ge=ze.onBlur,Ae=ze.onClick,Be=ze.onDragEnter,Ze=ze.onDragOver,Rt=ze.onDragLeave,Ie=ze.onDrop,gt=R0(ze,VH);return Mr(Mr(Jb({onKeyDown:mn(To(he,ct)),onFocus:mn(To(He,it)),onBlur:mn(To(ge,Lt)),onClick:Ge(To(Ae,Bt)),onDragEnter:Wt(To(Be,Ye)),onDragOver:Wt(To(Ze,lt)),onDragLeave:Wt(To(Rt,Re)),onDrop:Wt(To(Ie,Ue)),role:typeof pe=="string"&&pe!==""?pe:"presentation"},ie,K),!r&&!F?{tabIndex:0}:{}),gt)}},[K,ct,it,Lt,Bt,Ye,lt,Re,Ue,F,R,r]),bn=b.useCallback(function(ze){ze.stopPropagation()},[]),Ht=b.useMemo(function(){return function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=ze.refKey,ie=Y===void 0?"ref":Y,pe=ze.onChange,he=ze.onClick,He=R0(ze,zH),ge=Jb({accept:j,multiple:d,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ge(To(pe,Ue)),onClick:Ge(To(he,bn)),tabIndex:-1},ie,X);return Mr(Mr({},ge),He)}},[X,n,d,Ue,r]);return Mr(Mr({},Z),{},{isFocused:re&&!r,getRootProps:At,getInputProps:Ht,rootRef:K,inputRef:X,open:Ge(ot)})}function KH(t,e){switch(e.type){case"focus":return Mr(Mr({},t),{},{isFocused:!0});case"blur":return Mr(Mr({},t),{},{isFocused:!1});case"openDialog":return Mr(Mr({},Zb),{},{isFileDialogActive:!0});case"closeDialog":return Mr(Mr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Mr(Mr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Mr(Mr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Mr({},Zb);default:return t}}function z_(){}const YH=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"ufu-dropzone-icon",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3 17.25V6.75A2.25 2.25 0 015.25 4.5h13.5A2.25 2.25 0 0121 6.75v10.5A2.25 2.25 0 0118.75 19.5H5.25A2.25 2.25 0 013 17.25z"})}),XH=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),QH=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8",children:s.jsx("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z"})}),JH=()=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 100-12 6 6 0 000 12zM12 14.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.5h13.628a2.31 2.31 0 011.642 3.953l-.837 1.172-3.44-3.44-3.44 3.44-.837-1.172a2.31 2.31 0 01-1.642-3.953H6.827z"})]}),ZH=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5z"})}),eq=({file:t,onRemove:e,onSetMain:n,onMove:r,index:i,fileCount:a})=>{var D;const{url:l,type:d,name:u,size:m,progress:g,error:h,isMain:y}=t,[w,S]=b.useState(!1),N=b.useRef(null),_=(A,L=2)=>{if(!A||A===0)return"0 Bytes";const I=1024,F=L<0?0:L,R=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(A)/Math.log(I));return parseFloat((A/Math.pow(I,E)).toFixed(F))+" "+R[E]};return b.useEffect(()=>{if(d==="video"&&N.current){const A=()=>S(!0);return N.current.addEventListener("loadedmetadata",A),()=>{N.current&&N.current.removeEventListener("loadedmetadata",A)}}},[d]),s.jsxs("div",{className:`ufu-preview-item ${y?"ufu-main-item":""}`,children:[s.jsx("div",{className:"ufu-preview-media",children:d==="image"?s.jsx("img",{src:l,alt:u,className:"object-contain w-full h-full",loading:"eager",onLoad:()=>{},onError:A=>{A.target.onerror=null,A.target.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}):d==="video"?s.jsxs(s.Fragment,{children:[s.jsx("video",{ref:N,src:l,preload:"metadata",playsInline:!0,muted:!0,loop:!0,autoPlay:!0,controls:!1,onLoadedMetadata:()=>S(!0),className:`object-contain w-full h-full ${w?"opacity-100":"opacity-0"}`,onError:A=>{A.target.onerror=null,S(!0)}}),s.jsx("div",{className:`video-overlay ${w?"with-thumbnail":""}`,children:s.jsx(QH,{})})]}):s.jsxs("div",{className:"document-preview",children:[s.jsx(XH,{}),s.jsx("span",{className:"document-ext",children:u&&((D=u.split(".").pop())==null?void 0:D.toUpperCase())||"FILE"})]})}),s.jsxs("div",{className:"ufu-preview-item-info",children:[s.jsx("p",{className:"ufu-preview-item-name",title:u||"Archivo",children:u&&u.length>20?u.substring(0,18)+"...":u||"Archivo"}),s.jsx("p",{className:"ufu-preview-item-size",children:_(m)})]}),s.jsx(sn,{}),s.jsxs("div",{className:"ufu-controls-overlay",children:[s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation();const L=document.createElement("a");if(L.href=l,L.download=u||"archivo",L.target="_blank",l.includes("firebase")){const I=new URL(l);I.searchParams.set("response-content-disposition",`attachment; filename="${u||"archivo"}"`),L.href=I.toString()}document.body.appendChild(L),L.click(),document.body.removeChild(L)},className:"ufu-control-button ufu-download-button",title:"Descargar archivo","aria-label":"Descargar archivo a tu dispositivo",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})})}),s.jsx("button",{type:"button",onClick:A=>{if(A.stopPropagation(),d==="image"){const L=document.createElement("div");L.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const I=document.createElement("img");I.src=l,I.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                object-fit: contain;
                border-radius: 8px;
                cursor: default;
              `;const F=document.createElement("button");F.innerHTML="",F.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,L.appendChild(I),L.appendChild(F),document.body.appendChild(L);const R=()=>{document.body.removeChild(L)};L.addEventListener("click",R),F.addEventListener("click",R);const E=M=>{M.key==="Escape"&&(R(),document.removeEventListener("keydown",E))};document.addEventListener("keydown",E),I.addEventListener("click",M=>M.stopPropagation())}else if(d==="video"){const L=document.createElement("div");L.style.cssText=`
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                cursor: pointer;
              `;const I=document.createElement("video");I.src=l,I.controls=!0,I.style.cssText=`
                max-width: 90%;
                max-height: 90%;
                border-radius: 8px;
                cursor: default;
              `;const F=document.createElement("button");F.innerHTML="",F.style.cssText=`
                position: absolute;
                top: 20px;
                right: 30px;
                background: rgba(255,255,255,0.9);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #333;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
              `,L.appendChild(I),L.appendChild(F),document.body.appendChild(L);const R=()=>{I.pause(),document.body.removeChild(L)};L.addEventListener("click",R),F.addEventListener("click",R),I.addEventListener("click",E=>E.stopPropagation())}else{const L=document.createElement("a");L.href=l,L.download=u,L.click()}},className:"ufu-control-button ufu-preview-button",title:"Ver archivo","aria-label":"Ver archivo en pantalla completa",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),e(t.id)},className:"ufu-control-button ufu-delete-button",title:"Eliminar","aria-label":"Eliminar archivo",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),n&&!y&&s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),n(t.id)},className:"ufu-control-button ufu-set-main-button",title:"Establecer como principal","aria-label":"Establecer como imagen principal",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.622l1.208 5.273a.563.563 0 01-.841.589l-4.743-2.85a.563.563 0 00-.586 0l-4.743 2.85a.563.563 0 01-.841-.589l1.208-5.273a.563.563 0 00-.182-.622l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),r&&a>1&&s.jsxs("div",{className:"ufu-reorder-buttons",children:[s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),r(i,"up")},disabled:i===0,className:"ufu-control-button",title:"Mover arriba","aria-label":"Mover archivo hacia arriba",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})}),s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),r(i,"down")},disabled:i===a-1,className:"ufu-control-button",title:"Mover abajo","aria-label":"Mover archivo hacia abajo",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]})]}),y&&s.jsxs("div",{className:"ufu-main-badge",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:s.jsx("path",{fillRule:"evenodd",d:"M10.868 2.884c.321-.772 1.415-.772 1.736 0l1.681 4.06c.064.155.24.263.415.284l4.473.65c.803.117 1.125 1.106.547 1.65l-3.238 3.153a.477.477 0 00-.137.53l.764 4.456c.138.806-.702 1.425-1.425 1.053l-3.992-2.1a.498.498 0 00-.465 0l-3.992 2.1c-.723.372-1.563-.247-1.425-1.053l.764-4.456a.477.477 0 00-.137-.53L2.24 9.667c-.578-.544-.256-1.533.547-1.65l4.473-.65a.476.476 0 00.415-.284l1.681-4.06z",clipRule:"evenodd"})}),s.jsx("span",{children:"Principal"})]})]})},Pd=Ns.memo(({files:t=[],onFilesChange:e,acceptedTypes:n="image/*,video/*,application/pdf",multiple:r=!0,maxSize:i=100*1024*1024,maxFiles:a=null,label:l="Medios del Producto",placeholder:d="Arrastra archivos o haz clic para seleccionar",className:u="",showPreview:m=!0,allowReorder:g=!0,allowSetMain:h=!0})=>{const[y,w]=b.useState([]),[S,N]=b.useState(null),[_,D]=b.useState(!1),[A,L]=b.useState(void 0),I=b.useRef(null),[F,R]=b.useState([]),E=b.useRef(null);b.useEffect(()=>{if(!t||t.length===0){w(B=>B.some(Se=>Se.file||Se.url&&Se.url.startsWith("blob:"))?B:B.length>0?[]:B);return}const re=t.map((B,ce)=>{if(typeof B=="string"){const Se=B.split(".").pop().toLowerCase(),Ve=["mp4","mov","webm","avi","mkv","m4v"].includes(Se),$e=B.split("/").pop().split("?")[0],Ke=decodeURIComponent($e);return{id:`existing-${ce}-${B}`,url:B,type:Ve?"video":"image",name:Ke,size:0,isMain:ce===0,isUploaded:!0}}return B});w(B=>{const ce=new Set(re.map(Ke=>{var Ye,lt;return((lt=(Ye=Ke.name)==null?void 0:Ye.toLowerCase)==null?void 0:lt.call(Ye))||""})),Se=B.filter(Ke=>{var Re,Ct;if(!(Ke.file||Ke.url&&Ke.url.startsWith("blob:")))return!1;const lt=((Ct=(Re=Ke.name)==null?void 0:Re.toLowerCase)==null?void 0:Ct.call(Re))||"";return ce.has(lt)?(Ke.url&&Ke.url.startsWith("blob:")&&URL.revokeObjectURL(Ke.url),!1):!0}),Ve=B.map(Ke=>Ke.id),$e=re.map(Ke=>Ke.id);if(JSON.stringify(Ve)===JSON.stringify($e)&&Se.length===0)return B;if(Se.length>0){const Ke=new Set(re.map(lt=>lt.id)),Ye=Se.filter(lt=>!Ke.has(lt.id));return[...re,...Ye]}return re})},[t.length,t.map(re=>typeof re=="string"?re:(re==null?void 0:re.id)||(re==null?void 0:re.url)).join("|")]);const M=b.useCallback((re,B)=>{const ce=re.map(Se=>{let Ve="document";Se.type.startsWith("image/")?Ve="image":Se.type.startsWith("video/")&&(Ve="video");const $e=URL.createObjectURL(Se);return{id:`${Se.name}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,file:Se,url:$e,type:Ve,name:Se.name,size:Se.size,progress:0,error:null,isMain:!1,isUploading:!1,isUploaded:!1}});B.length>0&&R(B.map(({file:Se,errors:Ve})=>({name:(Se==null?void 0:Se.name)||"Archivo",messages:(Ve||[]).map($e=>$e.message)}))),w(Se=>{let Ve;if(r){const $e=new Set(Se.map(lt=>lt.name)),Ke=ce.filter(lt=>!$e.has(lt.name)),Ye=[...Se,...Ke];Ve=a?Ye.slice(0,a):Ye,a&&Ye.length>a&&R(lt=>[...lt,{name:"Lmite de archivos",messages:[`Lmite de ${a} archivos alcanzado. Solo se mantuvieron los primeros ${a}.`]}])}else Ve=ce;return E.current=Ve,Ve})},[r,a]),O=b.useMemo(()=>{const re=(n||"").trim();if(!re||re==="*/*")return;const B=re.split(",").reduce((ce,Se)=>{const Ve=Se.trim();return Ve&&(ce[Ve]=[]),ce},{});return Object.keys(B).length?B:void 0},[n]),{getRootProps:j,getInputProps:U,isDragActive:H,open:V}=iT({onDrop:M,accept:O,maxSize:i,multiple:r,noClick:!1,noKeyboard:!1,preventDropOnDocument:!0}),K=re=>{w(B=>{const ce=B.find(Ve=>Ve.id===re);ce&&ce.url&&ce.url.startsWith("blob:")&&URL.revokeObjectURL(ce.url);const Se=B.filter(Ve=>Ve.id!==re).map((Ve,$e)=>({...Ve,isMain:$e===0}));return E.current=Se,Se})},X=re=>{h&&w(B=>{const ce=B.find($e=>$e.id===re);if(!ce)return B;const Se=B.filter($e=>$e.id!==re),Ve=[ce,...Se].map(($e,Ke)=>({...$e,isMain:Ke===0}));return E.current=Ve,Ve})},ne=(re,B)=>{g&&w(ce=>{const Se=B==="up"?re-1:re+1;if(Se<0||Se>=ce.length)return ce;const Ve=[...ce];[Ve[re],Ve[Se]]=[Ve[Se],Ve[re]];const $e=Ve.map((Ke,Ye)=>({...Ke,isMain:Ye===0}));return E.current=$e,$e})},we=b.useRef(null);b.useEffect(()=>{if(!E.current)return;const re=E.current;E.current=null;const B=re.map(ce=>ce.id).join("|");we.current!==B&&(we.current=B,typeof e=="function"&&e(re))},[y]);const Z=re=>{re.stopPropagation(),L("environment"),setTimeout(()=>{V(),setTimeout(()=>L(void 0),0)},30)},le=re=>{re.stopPropagation(),L(void 0),setTimeout(()=>{V()},0)};return s.jsxs("div",{className:`universal-file-uploader ${u}`,children:[s.jsxs("div",{...j({className:`ufu-dropzone ${H?"dragging":""} ${_?"drag-over":""}`}),ref:I,onDragEnter:()=>D(!0),onDragLeave:()=>D(!1),onDrop:()=>D(!1),children:[s.jsx("input",{...U({style:{display:"none"},multiple:r,capture:A})}),s.jsxs("div",{className:"ufu-dropzone-content",children:[s.jsx(YH,{}),s.jsxs("div",{className:"ufu-dropzone-desktop-text",children:[s.jsx("p",{className:"ufu-dropzone-text-main",children:l}),s.jsx("p",{className:"ufu-dropzone-text-sub",children:d}),s.jsx("button",{type:"button",onClick:re=>{re.stopPropagation(),V()},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Seleccionar Archivos"})]}),s.jsxs("div",{className:"ufu-mobile-buttons",children:[s.jsxs("button",{type:"button",onClick:Z,className:"ufu-mobile-button","aria-label":"Abrir cmara",children:[s.jsx(JH,{}),s.jsx("span",{children:"Cmara"})]}),s.jsxs("button",{type:"button",onClick:le,className:"ufu-mobile-button","aria-label":"Abrir galera",children:[s.jsx(ZH,{}),s.jsx("span",{children:"Galera"})]})]})]})]}),F.length>0&&s.jsxs("div",{className:"mt-3 p-3 rounded-md bg-red-50 border border-red-200 text-red-700 text-sm",role:"alert",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Algunos archivos fueron rechazados"}),s.jsx("button",{type:"button",onClick:()=>R([]),className:"ml-3 text-red-600 hover:text-red-800","aria-label":"Cerrar",title:"Cerrar",children:""})]}),s.jsx("ul",{className:"list-disc ml-5 mt-2",children:F.map((re,B)=>s.jsxs("li",{children:[re.name?s.jsxs("span",{className:"font-medium",children:[re.name,": "]}):null,Array.isArray(re.messages)?re.messages.join(", "):String(re)]},`rejected-${B}-${re.name||"unknown"}`))})]}),y.length>0?s.jsx("div",{className:"ufu-preview-grid",children:y.map((re,B)=>{const ce=re.id||`file-${B}-${re.name||"unknown"}-${Date.now()}`;return s.jsx(eq,{file:re,onRemove:K,onSetMain:h?X:null,onMove:g?ne:null,index:B,fileCount:y.length},ce)})}):s.jsx("div",{className:"text-center text-gray-500 text-sm mt-4 p-4 border-2 border-dashed border-gray-200 rounded",children:" No hay archivos subidos an - Arrastra o selecciona archivos arriba"})]})});Pd.displayName="UniversalFileUploader";const aT=({variantes:t=[],varianteSeleccionada:e=0,onVarianteChange:n,showStock:r=!1,showPrice:i=!0,basePrice:a=0,className:l=""})=>{if(!t||t.length===0)return null;const d=t.filter(h=>h&&typeof h.color=="string"&&h.color.trim());if(d.length===0)return null;const u=h=>{n&&n(h)},m=h=>`RD$ ${Number(h||0).toLocaleString("es-DO",{minimumFractionDigits:2,maximumFractionDigits:2})}`,g=({variante:h,index:y,isSelected:w,isOutOfStock:S,onClick:N})=>{var D,A,L;const _=((A=(D=h.imagenPrincipal)==null?void 0:D[0])==null?void 0:A.url)||h.imagen||((L=h.imagenes)==null?void 0:L[0])||null;return s.jsx("button",{type:"button",onClick:N,className:`
          relative rounded-lg transition-all duration-150 flex-shrink-0 
          w-[100px] sm:w-[110px] xl:w-[120px]
          ${w?"border-[2.5px] border-blue-600":"border border-gray-300 hover:border-gray-400"}
          ${S?"opacity-60 cursor-not-allowed":"cursor-pointer"}
          bg-white overflow-hidden
        `,style:{zIndex:1},disabled:S,children:s.jsxs("div",{className:"flex flex-col w-full",children:[_&&s.jsxs("div",{className:"relative w-full bg-white p-2.5",children:[s.jsx("div",{className:"pt-[100%]"}),s.jsx("img",{src:_,alt:h.color,className:"absolute inset-0 w-full h-full object-contain"})]}),s.jsx("div",{className:"w-full text-center px-2 pt-1.5 pb-1",children:s.jsx("div",{className:"text-[11px] sm:text-[12px] font-medium text-gray-700 truncate",children:h.color})}),i&&s.jsx("div",{className:"w-full text-center px-2 pb-1.5",children:s.jsx("div",{className:"text-[12px] sm:text-[13px] font-bold text-gray-900",style:{fontFamily:"Inter, system-ui, -apple-system, sans-serif"},children:m((h==null?void 0:h.precio)??a)})})]})},y)};return s.jsx("div",{className:`visual-variant-selector ${l}`,style:{zIndex:1,position:"relative"},children:s.jsx("div",{className:"w-full overflow-x-auto scrollbar-hide",children:s.jsx("div",{className:"flex gap-2 pb-2",children:d.map((h,y)=>{const w=Number(h==null?void 0:h.cantidad),S=Number.isFinite(w)&&!Number.isNaN(w)?w<=0:!1;return s.jsx(g,{variante:h,index:y,isSelected:y===e,isOutOfStock:S,onClick:()=>u(y)},y)})})})})},tq=({categoriaId:t,value:e={},onChange:n})=>{const[r,i]=b.useState([]),[a,l]=b.useState(!1),[d,u]=b.useState(""),[m,g]=b.useState("");b.useEffect(()=>{if(e){const N=Object.keys(e).filter(_=>_!=="__customFields"&&!_.endsWith("_description"));N.length>0&&i(N)}},[e]);const h=(N,_)=>{const D={...e,[N]:_};n(D)},y=()=>{if(!d.trim()&&!m.trim())return;let N;d.trim()?N=d.toLowerCase().trim().replace(/[^a-z0-9]+/g,"_"):N=`caracteristica_${r.filter(D=>D.startsWith("caracteristica_")).length+1}`,r.includes(N)||(i([...r,N]),h(N,m.trim())),u(""),g(""),l(!1)},w=N=>{i(r.filter(D=>D!==N));const _={...e};delete _[N],delete _[`${N}_description`],n(_)},S=(N,_=!1)=>{var A,L;const D=(e==null?void 0:e[N.id])||"";switch(N.tipo){case"select":return s.jsxs("select",{value:D,onChange:F=>h(N.id,F.target.value),className:"w-full px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",children:[s.jsx("option",{value:"",children:N.placeholder||"Selecciona una opcin..."}),(A=N.opciones)==null?void 0:A.map(F=>s.jsx("option",{value:F,children:F},F))]});case"multiselect":const I=Array.isArray(D)?D:D?D.split(",").map(F=>F.trim()):[];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:I.map((F,R)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[F,s.jsx("button",{type:"button",onClick:()=>{const E=I.filter((M,O)=>O!==R);h(N.id,E.length>0?E:"")},className:"hover:text-blue-900",children:""})]},R))}),s.jsxs("select",{value:"",onChange:F=>{if(F.target.value&&!I.includes(F.target.value)){const R=[...I,F.target.value];h(N.id,R)}},className:"w-full px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"",children:N.placeholder||"Selecciona opciones..."}),(L=N.opciones)==null?void 0:L.map(F=>s.jsx("option",{value:F,disabled:I.includes(F),children:F},F))]})]});case"textarea":return s.jsx("textarea",{value:D,onChange:F=>h(N.id,F.target.value),placeholder:N.placeholder,rows:3,className:"w-full px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white resize-none transition-all"});case"number":return s.jsx("input",{type:"number",value:D,onChange:F=>h(N.id,F.target.value),placeholder:N.placeholder,className:"w-full px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"});case"text":default:return s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:D,onChange:F=>h(N.id,F.target.value),placeholder:N.placeholder,className:"flex-1 px-3 py-2 border-2 border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),_&&s.jsx("button",{type:"button",onClick:()=>w(N.id),className:"px-3 py-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar campo personalizado",children:s.jsx(wh,{size:16})})]})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(qd,{size:20})," Caractersticas Adicionales"]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Informacin adicional del producto"})]}),s.jsxs("button",{type:"button",onClick:()=>l(!a),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center gap-2",children:[s.jsx(Bh,{size:16})," Agregar Campo"]})]}),s.jsx(sn,{children:a&&s.jsxs(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-700",children:[s.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Nombre de la caracterstica (opcional):"}),s.jsx("input",{type:"text",value:d,onChange:N=>u(N.target.value),onKeyPress:N=>{N.key==="Enter"&&(N.preventDefault(),document.getElementById("field-description").focus())},placeholder:"Ej: Fabricante, Dimensiones, Peso, Material, etc.",className:"w-full px-3 py-2 border-2 border-blue-200 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white mb-3",autoFocus:!0}),s.jsx("label",{className:"block text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Informacin / Valor:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{id:"field-description",type:"text",value:m,onChange:N=>g(N.target.value),onKeyPress:N=>{N.key==="Enter"&&(N.preventDefault(),y())},placeholder:"Ej: Nintendo, 15cm x 10cm x 5cm, Incluye bateras, etc.",className:"flex-1 px-3 py-2 border-2 border-blue-200 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Agregar campo",children:s.jsx(ka,{size:16})}),s.jsx("button",{type:"button",onClick:()=>{l(!1),u(""),g("")},className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",title:"Cancelar",children:s.jsx(gs,{size:16})})]})]})}),r.length>0?s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl shadow-md p-4 md:p-6 border-l-4 border-green-400",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(qd,{size:18})," Caractersticas Agregadas"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(N=>{const _=N.split("_").map(D=>D.charAt(0).toUpperCase()+D.slice(1)).join(" ");return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:_}),S({id:N,tipo:"text",placeholder:`Ingresa ${_.toLowerCase()}`},!0)]},N)})})]}):!a&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl shadow-md p-6 text-center border-2 border-dashed border-gray-300 dark:border-gray-600",children:[s.jsx(qd,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-3"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["No hay caractersticas adicionales an. Haz clic en ",s.jsx("strong",{children:'"Agregar Campo"'})," para comenzar."]})]})]})},ir={REQUIRED_FIELDS:["nombre","precio","categoria","descripcion"],MIN_TITLE_LENGTH:10,MAX_TITLE_LENGTH:200,MIN_DESCRIPTION_LENGTH:20,MAX_DESCRIPTION_LENGTH:5e3,MIN_PRICE:.01,MAX_PRICE:1e6,MIN_STOCK:0,MAX_STOCK:999999,MAX_IMAGES:20,MAX_VIDEOS:10,MAX_EXTRAS:3,MAX_VARIANTS:50,MIN_VARIANT_NAME_LENGTH:2,MAX_VARIANT_NAME_LENGTH:100},ks={MISSING_TITLE:"El ttulo del producto es obligatorio",MISSING_PRICE:"El precio del producto es obligatorio",MISSING_CATEGORY:"Debe seleccionar una categora",MISSING_DESCRIPTION:"La descripcin del producto es obligatoria",MISSING_MAIN_IMAGE:"Debe subir al menos una imagen principal",TITLE_TOO_SHORT:`El ttulo debe tener al menos ${ir.MIN_TITLE_LENGTH} caracteres`,TITLE_TOO_LONG:`El ttulo no puede exceder ${ir.MAX_TITLE_LENGTH} caracteres`,DESCRIPTION_TOO_SHORT:`La descripcin debe tener al menos ${ir.MIN_DESCRIPTION_LENGTH} caracteres`,DESCRIPTION_TOO_LONG:`La descripcin no puede exceder ${ir.MAX_DESCRIPTION_LENGTH} caracteres`,INVALID_PRICE:`El precio debe estar entre $${ir.MIN_PRICE} y $${ir.MAX_PRICE}`,INVALID_STOCK:`El stock debe estar entre ${ir.MIN_STOCK} y ${ir.MAX_STOCK}`,TOO_MANY_IMAGES:`Mximo ${ir.MAX_IMAGES} imgenes permitidas`,TOO_MANY_VIDEOS:`Mximo ${ir.MAX_VIDEOS} videos permitidos`,TOO_MANY_EXTRAS:`Mximo ${ir.MAX_EXTRAS} archivos extras permitidos`,TOO_MANY_VARIANTS:`Mximo ${ir.MAX_VARIANTS} variantes permitidas`,VARIANT_NAME_TOO_SHORT:`El nombre de la variante debe tener al menos ${ir.MIN_VARIANT_NAME_LENGTH} caracteres`,VARIANT_NAME_TOO_LONG:`El nombre de la variante no puede exceder ${ir.MAX_VARIANT_NAME_LENGTH} caracteres`,DUPLICATE_VARIANT_NAMES:"No puede haber variantes con el mismo nombre",VARIANT_MISSING_STOCK:"Todas las variantes deben tener stock definido"},Dr={ERROR:"error",WARNING:"warning"},F_=(t,e,n={})=>{const r=[];switch(t){case"nombre":if(!e||!e.trim())r.push({field:"nombre",message:ks.MISSING_TITLE,severity:Dr.ERROR});else{const i=e.trim();i.length<ir.MIN_TITLE_LENGTH&&r.push({field:"nombre",message:ks.TITLE_TOO_SHORT,severity:Dr.ERROR}),i.length>ir.MAX_TITLE_LENGTH&&r.push({field:"nombre",message:ks.TITLE_TOO_LONG,severity:Dr.ERROR})}break;case"precio":if(!e&&e!==0)r.push({field:"precio",message:ks.MISSING_PRICE,severity:Dr.ERROR});else{const i=parseFloat(e);(isNaN(i)||i<ir.MIN_PRICE||i>ir.MAX_PRICE)&&r.push({field:"precio",message:ks.INVALID_PRICE,severity:Dr.ERROR})}break;case"categoria":(!e||!e.trim())&&r.push({field:"categoria",message:ks.MISSING_CATEGORY,severity:Dr.ERROR});break;case"descripcion":if(!e||!e.trim())r.push({field:"descripcion",message:ks.MISSING_DESCRIPTION,severity:Dr.ERROR});else{const i=e.trim();i.length<ir.MIN_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:ks.DESCRIPTION_TOO_SHORT,severity:Dr.ERROR}),i.length>ir.MAX_DESCRIPTION_LENGTH&&r.push({field:"descripcion",message:ks.DESCRIPTION_TOO_LONG,severity:Dr.WARNING})}break;case"cantidad":if(e!=null){const i=parseInt(e);(isNaN(i)||i<ir.MIN_STOCK||i>ir.MAX_STOCK)&&r.push({field:"cantidad",message:ks.INVALID_STOCK,severity:Dr.ERROR})}break}return r},nq=(t=[])=>{const e=[];t.length>ir.MAX_VARIANTS&&e.push({field:"variantes",message:ks.TOO_MANY_VARIANTS,severity:Dr.ERROR});const n=[];return t.forEach((r,i)=>{if(!r||typeof r!="object")return;const a=r.color||r.name||"";a.trim().length<ir.MIN_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:ks.VARIANT_NAME_TOO_SHORT,severity:Dr.ERROR}),a.trim().length>ir.MAX_VARIANT_NAME_LENGTH&&e.push({field:`variantes[${i}].color`,message:ks.VARIANT_NAME_TOO_LONG,severity:Dr.ERROR}),n.includes(a.trim().toLowerCase())?e.push({field:`variantes[${i}].color`,message:ks.DUPLICATE_VARIANT_NAMES,severity:Dr.ERROR}):n.push(a.trim().toLowerCase());const l=parseInt(r.cantidad);(isNaN(l)||l<0)&&e.push({field:`variantes[${i}].cantidad`,message:ks.VARIANT_MISSING_STOCK,severity:Dr.ERROR})}),e},rq=t=>{const e=[];return t.imagen||t.imagenPrincipal&&t.imagenPrincipal.length>0||e.push({field:"imagen",message:ks.MISSING_MAIN_IMAGE,severity:Dr.ERROR}),(t.imagenes||[]).length+(t.imagenesExtra||[]).length>ir.MAX_IMAGES&&e.push({field:"imagenes",message:ks.TOO_MANY_IMAGES,severity:Dr.ERROR}),(t.videoUrls||[]).length+(t.videoAcercaArticulo||[]).length>ir.MAX_VIDEOS&&e.push({field:"videos",message:ks.TOO_MANY_VIDEOS,severity:Dr.ERROR}),(t.imagenesExtra||[]).length>ir.MAX_EXTRAS&&e.push({field:"imagenesExtra",message:ks.TOO_MANY_EXTRAS,severity:Dr.ERROR}),e},sq=t=>{if(!t||typeof t!="object")return[{field:"general",message:"Datos del producto no vlidos",severity:Dr.ERROR}];let e=[];if(ir.REQUIRED_FIELDS.forEach(n=>{try{e=e.concat(F_(n,t[n],t))}catch{}}),t.cantidad!==void 0)try{e=e.concat(F_("cantidad",t.cantidad,t))}catch{}try{e=e.concat(rq(t))}catch{}if(t.variantes&&Array.isArray(t.variantes)&&t.variantes.length>0)try{e=e.concat(nq(t.variantes))}catch{}return e},iq=t=>{if(!t||typeof t!="object")return{isReady:!1,errorCount:1,warningCount:0,errors:[{field:"general",message:"Datos del producto no vlidos",severity:Dr.ERROR}],canPublish:!1,status:"incomplete"};const e=sq(t),n=e.filter(a=>a.severity===Dr.ERROR).length,r=e.filter(a=>a.severity===Dr.WARNING).length,i=n===0;return{isReady:i,errorCount:n,warningCount:r,errors:e,canPublish:i,status:i?"ready":"incomplete"}},oT=({product:t,onClose:e,onSave:n,sellerId:r})=>{var vi,zs,Xi;const{usuario:i,usuarioInfo:a}=er(),{tienda:l,tieneTienda:d}=pw(),u=()=>{const J=(a==null?void 0:a.isAdmin)===!0&&(a==null?void 0:a.email)==="arisleidy0712@gmail.com";if(t){const te=t.storeId||t.tienda_id||(a==null?void 0:a.storeId)||null,Le=t.storeName||t.tienda_nombre||(a==null?void 0:a.storeName)||"Mi Tienda";if(te)return{storeId:te,storeName:Le,ownerUid:t.ownerUid||(i==null?void 0:i.uid)||null,ownerName:t.ownerName||(a==null?void 0:a.displayName)||(i==null?void 0:i.displayName)||""}}return l!=null&&l.id||d?{storeId:(l==null?void 0:l.id)||(a==null?void 0:a.storeId)||null,storeName:(l==null?void 0:l.nombre)||(l==null?void 0:l.name)||(a==null?void 0:a.storeName)||"Mi Tienda",ownerUid:(l==null?void 0:l.ownerUid)||(l==null?void 0:l.ownerId)||(i==null?void 0:i.uid)||null,ownerName:(l==null?void 0:l.ownerName)||(l==null?void 0:l.nombre)||(a==null?void 0:a.displayName)||(i==null?void 0:i.displayName)||""}:a!=null&&a.storeId?{storeId:a.storeId,storeName:a.storeName||"Mi Tienda",ownerUid:i==null?void 0:i.uid,ownerName:(a==null?void 0:a.displayName)||""}:J?{storeId:"playcenter_universal",storeName:"Playcenter Universal",ownerUid:i==null?void 0:i.uid,ownerName:(a==null?void 0:a.displayName)||"Playcenter"}:null},[m,g]=b.useState(!0),[h,y]=b.useState(()=>({nombre:(t==null?void 0:t.nombre)||"",empresa:(t==null?void 0:t.empresa)||"",precio:(t==null?void 0:t.precio)||"",cantidad:(t==null?void 0:t.cantidad)||0,descripcion:(t==null?void 0:t.descripcion)||"",categoria:(t==null?void 0:t.categoria)||"",nuevaCategoria:"",imagen:(t==null?void 0:t.imagen)||"",imagenes:(t==null?void 0:t.imagenes)||[],imagenesExtra:(t==null?void 0:t.imagenesExtra)||[],videoUrl:(t==null?void 0:t.videoUrl)||"",videoUrls:(t==null?void 0:t.videoUrls)||[],videoAcercaArticulo:(t==null?void 0:t.videoAcercaArticulo)||[],oferta:(t==null?void 0:t.oferta)||!1,precioOferta:(t==null?void 0:t.precioOferta)||"",estado:(t==null?void 0:t.estado)||"Nuevo",acerca:(t==null?void 0:t.acerca)||[""],variantes:(t==null?void 0:t.variantes)||[],etiquetas:(t==null?void 0:t.etiquetas)||[""],activo:(t==null?void 0:t.activo)!==void 0?t.activo:!0,fechaPublicacion:(t==null?void 0:t.fechaPublicacion)||new Date().toISOString().split("T")[0],peso:(t==null?void 0:t.peso)||"",dimensiones:(t==null?void 0:t.dimensiones)||"",varianteImagenPrincipal:(t==null?void 0:t.varianteImagenPrincipal)||"",imagenPrincipal:(t==null?void 0:t.imagenPrincipal)||(t!=null&&t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:(t==null?void 0:t.galeriaImagenes)||(t==null?void 0:t.imagenes)||[],tresArchivosExtras:(t==null?void 0:t.tresArchivosExtras)||(t==null?void 0:t.imagenesExtra)||[],productStatus:(t==null?void 0:t.productStatus)||"draft",validationScore:(t==null?void 0:t.validationScore)||0,lastValidated:(t==null?void 0:t.lastValidated)||null,caracteristicasAdicionales:(t==null?void 0:t.caracteristicasAdicionales)||{}})),[w,S]=b.useState([]),[N,_]=b.useState([]),[D,A]=b.useState(!1),[L,I]=b.useState(!1),[F,R]=b.useState(""),[E,M]=b.useState((t==null?void 0:t.id)||null),[O,j]=b.useState(!1),[U,H]=b.useState(null),[V,K]=b.useState(!1),X=b.useRef(!0),ne=b.useRef(!1),[we,Z]=b.useState({imagen:"",imagenes:[],productVideos:[],acercaVideos:[],variantes:{},extras:[]}),[le,re]=b.useState([]),[B,ce]=b.useState({open:!1,label:"",action:null}),[Se,Ve]=b.useState(!1),$e="pf_skip_delete_confirm",Ke=()=>typeof window<"u"&&localStorage.getItem($e)==="true",Ye=(J,te)=>{if(Ke()){typeof te=="function"&&te();return}ce({open:!0,label:J,action:te}),Ve(!1)},[lt,Re]=b.useState(!1),[Ct,Ue]=b.useState([]),[ot,ct]=b.useState(!1),[it,Lt]=b.useState(0),[Bt,Ge]=b.useState(!1),[mn,Wt]=b.useState(null),[an,At]=b.useState(!1),[bn,Ht]=b.useState([]),ze=(J,te="info",Le=null)=>{const xe=Date.now()+Math.random();Ht(ve=>[...ve,{id:xe,message:J,type:te,title:Le}])},Y=J=>{Ht(te=>te.filter(Le=>Le.id!==J))},ie=()=>{const J=`product_draft_${(a==null?void 0:a.uid)||"guest"}`;localStorage.removeItem(J),Ge(!1),Wt(null),At(!1),ze("Borrador descartado","info","Borrador eliminado"),window.location.reload()};b.useEffect(()=>{Ie(),gt();const J=`product_draft_${(a==null?void 0:a.uid)||"guest"}`,te=localStorage.getItem(J);if(te&&!t)try{const Le=JSON.parse(te);Le.formData&&y(xe=>({...xe,...Le.formData})),Ge(!0),Wt(new Date(Le.timestamp))}catch{}},[]),b.useEffect(()=>{if(t)return;const J=`product_draft_${(a==null?void 0:a.uid)||"guest"}`,te=setInterval(()=>{const Le=new Date;if(!h.nombre&&!h.descripcion&&!h.precio)return;const xe={formData:{...h,imagen:h.imagen||"",imagenes:h.imagenes||[],imagenPrincipal:h.imagenPrincipal||[],galeriaImagenes:h.galeriaImagenes||[]},timestamp:Le.toISOString()};localStorage.setItem(J,JSON.stringify(xe)),Wt(Le),Ge(!0)},3e3);return()=>clearInterval(te)},[h,a==null?void 0:a.uid,t]),b.useEffect(()=>{t&&(y({...h,nombre:t.nombre||"",empresa:t.empresa||"",precio:t.precio||"",cantidad:t.cantidad||0,descripcion:t.descripcion||"",categoria:t.categoria||"",acerca:t.acerca||[""],etiquetas:t.etiquetas||[""],variantes:t.variantes||[],oferta:t.oferta||!1,precioOferta:t.precioOferta||"",estado:t.estado||"Nuevo",activo:t.activo!==void 0?t.activo:!0,imagen:t.imagen||"",imagenes:(t.imagenes||[]).filter(J=>J&&typeof J=="string"&&J.trim()!==""),videoUrls:(t.videoUrls||[]).filter(J=>J&&typeof J=="string"&&J.trim()!==""),imagenesExtra:(t.imagenesExtra||[]).filter(J=>J&&typeof J=="string"&&J.trim()!==""),videoUrl:t.videoUrl||"",videoAcercaArticulo:t.videoAcercaArticulo||[],varianteImagenPrincipal:t.varianteImagenPrincipal||"",imagenPrincipal:t.imagenPrincipal||(t.imagen?[{url:t.imagen}]:[]),galeriaImagenes:t.galeriaImagenes||t.imagenes||[],tresArchivosExtras:t.tresArchivosExtras||t.imagenesExtra||[],productStatus:t.productStatus||t.estado||"draft"}),setTimeout(()=>{ne.current=!0,X.current=!1},500))},[t==null?void 0:t.id]),b.useEffect(()=>{t!=null&&t.id&&E!==t.id&&M(t.id)},[t==null?void 0:t.id]),b.useEffect(()=>{t||setTimeout(()=>{ne.current=!0,X.current=!1},200)},[t]),b.useEffect(()=>{const J=te=>{var xe;if((xe=le==null?void 0:le.some)==null?void 0:xe.call(le,ve=>(ve==null?void 0:ve.status)==="uploading"))return te.preventDefault(),te.returnValue="",""};return window.addEventListener("beforeunload",J),()=>window.removeEventListener("beforeunload",J)},[le]),b.useEffect(()=>{const J=E||(t==null?void 0:t.id);if(!J)return;const te=_n(We(oe,"productos",J),Le=>{if(!Le.exists())return;const xe=Le.data();y(ve=>{var at,me,ke,vt,tn,Vn;const Xe=((me=(at=xe.imagenPrincipal)==null?void 0:at[0])==null?void 0:me.url)||xe.imagen||((vt=(ke=ve.imagenPrincipal)==null?void 0:ke[0])==null?void 0:vt.url)||ve.imagen,et=(In=[])=>Array.isArray(In)?In.filter(Qr=>Qr&&typeof Qr=="string"&&Qr.trim()!==""&&Qr!==Xe):[],tt=Array.isArray(xe.imagenes)&&xe.imagenes.length>0?et(xe.imagenes):ve.imagenes||[],Pt=Array.isArray(xe.galeriaImagenes)&&xe.galeriaImagenes.length>0?et(xe.galeriaImagenes):ve.galeriaImagenes||[];return{...ve,id:xe.id||J,nombre:xe.nombre??ve.nombre,descripcion:xe.descripcion??ve.descripcion,empresa:xe.empresa??ve.empresa,categoria:xe.categoria??ve.categoria,precio:((Vn=(tn=xe.precio??ve.precio)==null?void 0:tn.toString)==null?void 0:Vn.call(tn))||String(xe.precio??ve.precio??""),cantidad:xe.cantidad??ve.cantidad,etiquetas:Array.isArray(xe.etiquetas)?xe.etiquetas:ve.etiquetas||[],acerca:Array.isArray(xe.acerca)?xe.acerca:ve.acerca||[],imagen:xe.imagen?xe.imagen:ve.imagen,imagenes:tt,imagenPrincipal:Array.isArray(xe.imagenPrincipal)?xe.imagenPrincipal:ve.imagenPrincipal||[],galeriaImagenes:Pt,tresArchivosExtras:Array.isArray(xe.tresArchivosExtras)?xe.tresArchivosExtras:ve.tresArchivosExtras||[],imagenesExtra:Array.isArray(xe.imagenesExtra)&&xe.imagenesExtra.length>0?xe.imagenesExtra.filter(In=>In&&typeof In=="string"&&In.trim()!==""):ve.imagenesExtra||[],videoUrl:xe.videoUrl||xe.video||ve.videoUrl,videoUrls:Array.isArray(xe.videoUrls)&&xe.videoUrls.length>0?xe.videoUrls.filter(In=>In&&typeof In=="string"&&In.trim()!==""):ve.videoUrls||[],videoAcercaArticulo:Array.isArray(xe.videoAcercaArticulo)?xe.videoAcercaArticulo:ve.videoAcercaArticulo||[],variantes:Array.isArray(xe.variantes)?xe.variantes:ve.variantes||[],activo:xe.activo??ve.activo}})});return()=>te()},[E,t==null?void 0:t.id]);const pe=b.useRef(!1);b.useEffect(()=>{if(!pe.current){try{const J="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",te=Array.isArray(h.videoAcercaArticulo)?h.videoAcercaArticulo:[];if(te.some(xe=>String(xe).trim()===J)){const xe=te.filter(Xe=>String(Xe).trim()!==J);y(Xe=>({...Xe,videoAcercaArticulo:xe}));const ve=E||(t==null?void 0:t.id);ve&&jn(We(oe,"productos",ve),{videoAcercaArticulo:xe,fechaActualizacion:new Date})}}catch{}pe.current=!0}},[h.videoAcercaArticulo,E,t==null?void 0:t.id]),b.useEffect(()=>{const te=setTimeout(()=>{try{const Le=iq(h);Ue(Le.errors||[]);const xe=typeof Le.errorCount=="number"?Math.max(0,100-Le.errorCount*20):Le.isReady?100:0;y(ve=>({...ve,validationScore:xe,lastValidated:new Date().toISOString()}))}catch{}},500);return()=>clearTimeout(te)},[h.nombre,h.precio,h.categoria,h.descripcion,h.imagenPrincipal,h.galeriaImagenes]),b.useMemo(()=>({id:E||(t==null?void 0:t.id)||"nuevo",nombre:h.nombre||"",precio:parseFloat(h.precio)||0,cantidad:Number(h.cantidad)||0}),[E,t==null?void 0:t.id,h.nombre,h.precio,h.cantidad]);const he=async()=>{if(t!=null&&t.id)return t.id;if(h!=null&&h.id)return h.id;if(E)return E;try{const J=`prod_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,te=u(),Le={id:J,nombre:(h==null?void 0:h.nombre)||"",descripcion:(h==null?void 0:h.descripcion)||"",empresa:(h==null?void 0:h.empresa)||"",categoria:(h==null?void 0:h.categoria)||"",precio:parseFloat(h==null?void 0:h.precio)||0,cantidad:Number(h==null?void 0:h.cantidad)||0,etiquetas:Array.isArray(h==null?void 0:h.etiquetas)?h.etiquetas:[],acerca:Array.isArray(h==null?void 0:h.acerca)?h.acerca:[],variantes:Array.isArray(h==null?void 0:h.variantes)?h.variantes:[],imagen:"",imagenPrincipal:[],imagenes:[],videoUrls:[],videoAcercaArticulo:[],imagenesExtra:[],activo:!1,ownerUid:(i==null?void 0:i.uid)||null,ownerName:(a==null?void 0:a.displayName)||(i==null?void 0:i.displayName)||"",storeId:(te==null?void 0:te.storeId)||null,storeName:(te==null?void 0:te.storeName)||"",fechaCreacion:new Date,fechaActualizacion:new Date};return await Cn(We(oe,"productos",J),Le),M(J),y(xe=>({...xe,id:J})),J}catch{return null}},He=async(J,te)=>{if(J)try{await jn(We(oe,"productos",J),{...te,fechaActualizacion:new Date})}catch(Le){if(Le.code==="not-found")return}},ge=J=>String(J||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").slice(0,80),Ae=J=>(J==null?void 0:J.name)||"file",Be=({productId:J,section:te,file:Le,variantId:xe=null})=>{const ve=Ae(Le);if(xe){if(te==="main")return`products/${J}/variants/${xe}/main/${ve}`;if(te==="gallery")return`products/${J}/variants/${xe}/gallery/${ve}`}else{if(te==="main")return`products/${J}/main/${ve}`;if(te==="gallery")return`products/${J}/gallery/${ve}`;if(te==="videos")return`products/${J}/videos/${ve}`;if(te==="extras")return`products/${J}/extras/${ve}`}return`products/${J}/misc/${ve}`},Ze=J=>{const te=(h.variantes||[])[J]||{};if(te.id)return te.id;const Le=`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`;return y(xe=>{const ve=[...xe.variantes||[]];ve[J]={...ve[J]||{},id:Le};const Xe={...xe,variantes:ve},et=E||(t==null?void 0:t.id);return et&&jn(We(oe,"productos",et),{variantes:ve,fechaActualizacion:new Date}).catch(()=>{}),Xe}),Le},Rt=async()=>{try{const te=(await rn(pt(oe,"categorias"))).docs.map(Le=>({id:Le.id,...Le.data()}));S(te)}catch{}},Ie=()=>{Rt()},gt=()=>{ft()},ft=async()=>{try{const te=(await rn(pt(oe,"productos"))).docs.map(xe=>{var ve;return(ve=xe.data())==null?void 0:ve.empresa}).filter(Boolean),Le=Array.from(new Set(te)).sort((xe,ve)=>xe.localeCompare(ve));_(Le)}catch{_([])}},Te=(J,te)=>{y(Le=>({...Le,[J]:te}))},nt=(J,te,Le)=>{y(xe=>{const ve=(xe[J]||[]).map((et,tt)=>tt===te?Le:et);return{...xe,[J]:ve}})},ut=J=>{y(te=>{const Le=[...te[J],J==="variantes"?{color:"",imagen:"",imagenes:[],cantidad:0,descripcion:"",precio:""}:""];return{...te,[J]:Le}})},kn=(J,te)=>{y(Le=>{const xe=Le[J].filter((Xe,et)=>et!==te);return{...Le,[J]:xe}})},Ce=(J,te,Le)=>{y(xe=>({...xe,variantes:xe.variantes.map((ve,Xe)=>Xe===J?{...ve,[te]:Le}:ve)}))},yt=J=>{Lt(J)},on=async(J,te,Le)=>new Promise((xe,ve)=>{try{const Xe=so(io,te),et=G4(Xe,J);re(tt=>tt.map(Pt=>Pt.id===Le?{...Pt,task:et}:Pt)),et.on("state_changed",tt=>{const Pt=Math.round(tt.bytesTransferred/tt.totalBytes*100);H(Pt),re(at=>at.map(me=>me.id===Le?{...me,progress:Pt}:me)),setTimeout(()=>{re(at=>{const me=at.find(ke=>ke.id===Le);if(me&&me.status==="uploading"&&(!me.progress||me.progress===0)&&me.task){try{me.task.cancel()}catch{}return at.map(ke=>ke.id===Le?{...ke,status:"error"}:ke)}return at})},6e3)},tt=>{re(Pt=>Pt.map(at=>at.id===Le?{...at,status:"error"}:at)),ve(tt)},async()=>{const tt=await zc(et.snapshot.ref);re(Pt=>Pt.map(at=>at.id===Le?{...at,status:"done"}:at)),xe(tt)})}catch(Xe){re(et=>et.map(tt=>tt.id===Le?{...tt,status:"error"}:tt)),ve(Xe)}}),Nn=async(J,te,Le)=>new Promise((xe,ve)=>{try{const Xe=so(io,te),et=G4(Xe,J);re(tt=>tt.map(Pt=>Pt.id===Le?{...Pt,task:et}:Pt)),et.on("state_changed",tt=>{const Pt=Math.round(tt.bytesTransferred/tt.totalBytes*100);H(Pt),re(at=>at.map(me=>me.id===Le?{...me,progress:Pt}:me))},tt=>{re(Pt=>Pt.map(at=>at.id===Le?{...at,status:"error"}:at)),ve(tt)},async()=>{const tt=await zc(et.snapshot.ref);re(Pt=>Pt.map(at=>at.id===Le?{...at,status:"done"}:at)),xe(tt)})}catch(Xe){re(et=>et.map(tt=>tt.id===Le?{...tt,status:"error"}:tt)),ve(Xe)}}),Wn=async(J,te,Le,xe,ve=2)=>{let Xe;for(let et=0;et<=ve;et++)try{return await J(te,Le,xe)}catch(tt){Xe=tt,await new Promise(Pt=>setTimeout(Pt,500*(et+1)))}throw Xe},Ra=async J=>{if(J)try{const te=String(J).trim();if(te.startsWith("/")||te.startsWith("./")||te.startsWith("../")||!te.startsWith("gs://")&&!te.includes("firebasestorage.googleapis.com"))return;const xe=(ve=>{try{const Xe=String(ve);if(Xe.startsWith("gs://"))return so(io,Xe);if(Xe.includes("firebasestorage.googleapis.com")){const et=Xe.match(/\/o\/([^?]+)/);if(et&&et[1]){const tt=decodeURIComponent(et[1]);return so(io,tt)}}return null}catch{return null}})(te);xe&&await QC(xe)}catch{}},Me=J=>{try{const te=String(J).trim().toLowerCase();if(te.includes("youtube.com")||te.includes("youtu.be")||te.includes("vimeo.com"))return"video";const xe=te.split("?")[0].split("#")[0].split(".").pop()||"";return["jpg","jpeg","png","gif","webp","bmp","svg"].includes(xe)?"image":["mp4","mov","avi","mkv","webm","m4v"].includes(xe)?"video":"document"}catch{return"document"}},Xr=async()=>{Ye("la imagen principal",async()=>{h.imagen&&await Ra(h.imagen),Te("imagen",""),Te("imagenPrincipal",[])})},pn=async J=>{const te=Array.isArray(J)?J:[],Le=te.some(xe=>xe==null?void 0:xe.file);if(!((X.current||!ne.current)&&!Le))try{if(j(!0),te.length===0){ne.current&&!X.current&&(Z(Xe=>({...Xe,imagen:""})),await Xr());return}const xe=te[0],ve=(xe==null?void 0:xe.url)||"";if(xe!=null&&xe.file){Z(at=>({...at,imagen:""})),Z(at=>({...at,imagen:ve}));let Xe=E||(t==null?void 0:t.id);if(Xe||(Xe=await he()),!Xe)return;const et=`${Date.now()}_${xe.file.name}_${Math.random().toString(36).slice(2,7)}`,tt=Be({productId:Xe,section:"main",file:xe.file}),Pt=await Wn(on,xe.file,tt,et);Z(at=>({...at,imagen:""})),y(at=>{const me=[{url:Pt,nombreOriginal:xe.file.name}],ke={...at,imagen:Pt,imagenPrincipal:me};return He(Xe,{imagen:Pt,imagenPrincipal:me}).then(()=>{}).catch(vt=>{}),ke})}else ve&&!ve.startsWith("blob:")&&(Te("imagen",ve),Te("imagenPrincipal",[{url:ve}]),Z(Xe=>({...Xe,imagen:""})))}catch{}finally{j(!1),H(null)}},si=async J=>{const te=Array.isArray(J)?J:[],Le=te.some(xe=>xe==null?void 0:xe.file);if(!((X.current||!ne.current)&&!Le))try{j(!0);let xe=E||(t==null?void 0:t.id);if(xe||(xe=await he()),!xe)return;const ve=te.filter(ke=>{var vt,tn;return(ke==null?void 0:ke.file)&&((tn=(vt=ke.file.type)==null?void 0:vt.startsWith)==null?void 0:tn.call(vt,"image/"))}),Xe=te.filter(ke=>{var vt,tn;return(ke==null?void 0:ke.file)&&((tn=(vt=ke.file.type)==null?void 0:vt.startsWith)==null?void 0:tn.call(vt,"video/"))}),et=te.filter(ke=>!(ke!=null&&ke.file)&&(ke==null?void 0:ke.url)&&!ke.url.startsWith("blob:")).map(ke=>ke.url),tt=et.filter(ke=>Me(ke)==="image"),Pt=et.filter(ke=>Me(ke)==="video"),at=[];for(const ke of ve)try{const vt=Be({productId:xe,section:"gallery",file:ke.file}),tn=await Wn(on,ke.file,vt,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);at.push({url:tn,nombreOriginal:ke.file.name})}catch{}const me=[];for(const ke of Xe)try{const vt=Be({productId:xe,section:"videos",file:ke.file}),tn=await Wn(Nn,ke.file,vt,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);me.push({url:tn,nombreOriginal:ke.file.name})}catch{}y(ke=>{var Ts,wi;const vt=tt.filter(Xt=>Xt&&typeof Xt=="string"&&Xt.trim()!=="").map(Xt=>({url:Xt,nombreOriginal:Xt.split("/").pop().split("?")[0]})),tn=at.filter(Xt=>(Xt==null?void 0:Xt.url)&&typeof Xt.url=="string"&&Xt.url.trim()!==""),Vn=Pt.filter(Xt=>Xt&&typeof Xt=="string"&&Xt.trim()!=="").map(Xt=>({url:Xt,nombreOriginal:Xt.split("/").pop().split("?")[0]})),In=me.filter(Xt=>(Xt==null?void 0:Xt.url)&&typeof Xt.url=="string"&&Xt.url.trim()!==""),Qr=[...vt.map(Xt=>Xt.url),...tn.map(Xt=>Xt.url)],Kn=[...new Set(Qr)],zn=[...Vn.map(Xt=>Xt.url),...In.map(Xt=>Xt.url)],os=[...new Set(zn)],jt=!ke.imagen&&Kn.length>0,Es=jt?Kn[0]:ke.imagen,ii=jt?{url:Kn[0],nombreOriginal:((Ts=tn[0])==null?void 0:Ts.nombreOriginal)||Kn[0].split("/").pop().split("?")[0]}:((wi=ke.imagenPrincipal)==null?void 0:wi[0])||{};let bi=Kn;jt&&Kn.length>0&&(bi=Kn.slice(1));const Qi={...ke,imagenes:bi,videoUrls:os,...jt?{imagen:Es,imagenPrincipal:[ii]}:{}},Ji={imagenes:bi,videoUrls:os,...jt?{imagen:Es,imagenPrincipal:[ii]}:{}};return He(xe,Ji).then(()=>{}).catch(Xt=>{}),Qi}),Z(ke=>({...ke,imagenes:[],productVideos:[]}))}catch{}finally{j(!1),H(null)}},Vs=async J=>{const te=Array.isArray(J)?J:[],Le=te.some(xe=>xe==null?void 0:xe.file);if(!((X.current||!ne.current)&&!Le))try{j(!0);let xe=E||(t==null?void 0:t.id);if(xe||(xe=await he()),!xe)return;const ve=te.filter(tt=>tt==null?void 0:tt.file),Xe=te.filter(tt=>!(tt!=null&&tt.file)&&(tt==null?void 0:tt.url)&&!tt.url.startsWith("blob:")).map(tt=>tt.url),et=[];for(const tt of ve)try{const Pt=Be({productId:xe,section:"extras",file:tt.file}),at=await Wn(on,tt.file,Pt,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);et.push(at)}catch{}y(tt=>{const Pt=Xe.filter(vt=>vt&&typeof vt=="string"&&vt.trim()!==""),at=et.filter(vt=>vt&&typeof vt=="string"&&vt.trim()!==""),me=Array.from(new Set([...Pt,...at])),ke={...tt,imagenesExtra:me};return He(xe,{imagenesExtra:me}).then(()=>{}).catch(vt=>{}),ke}),Z(tt=>({...tt,extras:[]}))}catch{}finally{j(!1),H(null)}},Yi=async(J,te)=>{const Le=Array.isArray(J)?J:[],xe=Le.some(ve=>ve==null?void 0:ve.file);if(!((X.current||!ne.current)&&!xe))try{if(j(!0),Le.length===0){ne.current&&!X.current&&(Z(Xe=>{var et;return{...Xe,variantes:{...Xe.variantes,[te]:{...((et=Xe.variantes)==null?void 0:et[te])||{},imagen:""}}}}),Ce(te,"imagen",""));return}const ve=Le[0];if(ve!=null&&ve.file){Z(me=>{var ke;return{...me,variantes:{...me.variantes,[te]:{...((ke=me.variantes)==null?void 0:ke[te])||{},imagen:""}}}}),Z(me=>{var ke;return{...me,variantes:{...me.variantes,[te]:{...((ke=me.variantes)==null?void 0:ke[te])||{},imagen:ve.url}}}});let Xe=E||(t==null?void 0:t.id);Xe||(Xe=await he());const et=Ze(te),tt=`${Date.now()}_${ve.file.name}_${Math.random().toString(36).slice(2,7)}`,Pt=Be({productId:Xe,section:"main",file:ve.file,variantId:et}),at=await Wn(on,ve.file,Pt,tt);Z(me=>{var ke;return{...me,variantes:{...me.variantes,[te]:{...((ke=me.variantes)==null?void 0:ke[te])||{},imagen:""}}}}),Ce(te,"imagen",at)}else ve!=null&&ve.url&&!ve.url.startsWith("blob:")&&(Ce(te,"imagen",ve.url),Z(Xe=>{var et;return{...Xe,variantes:{...Xe.variantes,[te]:{...((et=Xe.variantes)==null?void 0:et[te])||{},imagen:""}}}}))}catch{}finally{j(!1),H(null)}},Ei=async(J,te)=>{const Le=Array.isArray(J)?J:[],xe=Le.some(ve=>ve==null?void 0:ve.file);if(!((X.current||!ne.current)&&!xe))try{j(!0);const ve=Le.filter(ke=>!(ke!=null&&ke.file)&&(ke==null?void 0:ke.url)&&!ke.url.startsWith("blob:")&&ke.type==="image").map(ke=>ke.url),Xe=Le.filter(ke=>{var vt,tn;return(ke==null?void 0:ke.file)&&((tn=(vt=ke.file.type)==null?void 0:vt.startsWith)==null?void 0:tn.call(vt,"image/"))});let et=E||(t==null?void 0:t.id);if(!et&&Xe.length>0&&(et=await he()),!et&&Xe.length>0)return;const tt=Ze(te),Pt=[];for(const ke of Xe){const vt=Be({productId:et,section:"gallery",file:ke.file,variantId:tt});try{const tn=await Wn(on,ke.file,vt,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);Pt.push(tn)}catch{}}const at=[...ve,...Pt],me=[...new Set(at)];y(ke=>{const vt=[...ke.variantes||[]];vt[te]={...vt[te]||{},imagenes:me};const tn={...ke,variantes:vt},Vn=E||(t==null?void 0:t.id);return Vn&&jn(We(oe,"productos",Vn),{variantes:vt,fechaActualizacion:new Date}).catch(()=>{}),tn}),Z(ke=>{var vt;return{...ke,variantes:{...ke.variantes,[te]:{...((vt=ke.variantes)==null?void 0:vt[te])||{},imagenes:[]}}}})}catch{}finally{j(!1),H(null)}},wr=async(J,te)=>{const Le=Array.isArray(J)?J:[],xe=Le.some(ve=>ve==null?void 0:ve.file);if(!((X.current||!ne.current)&&!xe))try{j(!0);const ve=Le.filter(ke=>!(ke!=null&&ke.file)&&(ke==null?void 0:ke.url)&&!ke.url.startsWith("blob:")).map(ke=>ke.url),Xe=Le.filter(ke=>{var vt,tn;return(ke==null?void 0:ke.file)&&((tn=(vt=ke.file.type)==null?void 0:vt.startsWith)==null?void 0:tn.call(vt,"video/"))});let et=E||(t==null?void 0:t.id);if(!et&&Xe.length>0&&(et=await he()),!et&&Xe.length>0)return;const tt=Ze(te),Pt=[];for(const ke of Xe){const vt=Be({productId:et,section:"gallery",file:ke.file,variantId:tt});try{const tn=await Wn(Nn,ke.file,vt,`${Date.now()}_${Math.random().toString(36).slice(2,7)}`);Pt.push(tn)}catch{}}const at=[...ve,...Pt],me=[...new Set(at)];y(ke=>{const vt=[...ke.variantes||[]];vt[te]={...vt[te]||{},videoUrls:me};const tn={...ke,variantes:vt},Vn=E||(t==null?void 0:t.id);return Vn&&jn(We(oe,"productos",Vn),{variantes:vt,fechaActualizacion:new Date}).catch(()=>{}),tn}),Z(ke=>{var vt;return{...ke,variantes:{...ke.variantes,[te]:{...((vt=ke.variantes)==null?void 0:vt[te])||{},videos:[]}}}})}catch{}finally{j(!1),H(null)}},Cs=async J=>{try{const te={nombre:J,ruta:J.toLowerCase().replace(/\s+/g,"-"),activa:!0,fechaCreacion:new Date,productCount:0};return await Cn(We(oe,"categorias",te.ruta),te),S(Le=>[...Le,{id:te.ruta,...te}]),te.ruta}catch(te){throw te}},jr=async J=>{var tt,Pt;J.preventDefault();const te=[];String(h.nombre||"").trim()||te.push("El nombre del producto es obligatorio"),String(h.empresa||"").trim();const xe=at=>{if(typeof at=="number")return at;let me=String(at??"").trim();if(!me)return NaN;me=me.replace(/\s/g,""),me.includes(",")&&/,\d{1,2}$/.test(me)?me=me.replace(/\./g,"").replace(",","."):me=me.replace(/,/g,"");const ke=parseFloat(me);return Number.isFinite(ke)?ke:NaN},ve=xe(h.precio);(!Number.isFinite(ve)||ve<0)&&te.push("Precio invlido");const Xe=parseInt(h.cantidad);(!Number.isFinite(Xe)||Xe<0)&&te.push("Cantidad invlida"),V&&(String(h.nuevaCategoria||"").trim()||te.push("Escribe el nombre de la nueva categora"));let et=!1;if(h.oferta){const at=String(h.precioOferta??"").trim();if(!at)et=!0;else{const me=xe(at);(!Number.isFinite(me)||me<0||Number.isFinite(ve)&&me>=ve)&&(et=!0)}}if((!h.categoria||h.categoria.trim()==="")&&(!V||!h.nuevaCategoria||h.nuevaCategoria.trim()==="")&&te.push("Debes seleccionar o crear una categora para que el producto aparezca"),te.length){ze(`Corrige los siguientes campos:
- `+te.join(`
- `),"warning","Campos requeridos");return}A(!0);try{let at=h.categoria;V&&h.nuevaCategoria.trim()&&(at=await Cs(h.nuevaCategoria.trim()));let me={...h,categoria:at,precio:Number.isFinite(ve)?ve:0,fechaActualizacion:new Date,acerca:(Array.isArray(h.acerca)?h.acerca:[]).filter(jt=>String(jt||"").trim()),etiquetas:(Array.isArray(h.etiquetas)?h.etiquetas:[]).filter(jt=>String(jt||"").trim()),variantes:(Array.isArray(h.variantes)?h.variantes:[]).map(jt=>{const Es=Number.isFinite(parseInt(jt==null?void 0:jt.cantidad))?parseInt(jt.cantidad):0,ii=(jt==null?void 0:jt.precio)!==void 0&&(jt==null?void 0:jt.precio)!==null&&String(jt.precio).trim()!=="",bi=ii?xe(jt.precio)||0:void 0;return{...jt,cantidad:Es,...ii?{precio:bi}:{},id:(jt==null?void 0:jt.id)||`var_${Date.now()}_${Math.random().toString(36).slice(2,6)}`,imagenPrincipal:(jt==null?void 0:jt.imagenPrincipal)||[],galeriaImagenes:(jt==null?void 0:jt.galeriaImagenes)||[],imagen:(jt==null?void 0:jt.imagen)||"",imagenes:(jt==null?void 0:jt.imagenes)||[],videoUrls:(jt==null?void 0:jt.videoUrls)||[]}})};et&&(me.oferta=!1,delete me.precioOferta),delete me.nuevaCategoria,delete me._tempVideoUrl,delete me.media,me.imagenPrincipal=h.imagenPrincipal||[],me.galeriaImagenes=h.galeriaImagenes||[],me.tresArchivosExtras=h.tresArchivosExtras||[],me.videoAcercaArticulo=h.videoAcercaArticulo||[],me.imagenesExtra=h.imagenesExtra||[],me.imagen=h.imagen||"";const ke=h.imagen||((Pt=(tt=h.imagenPrincipal)==null?void 0:tt[0])==null?void 0:Pt.url)||"",vt=jt=>{if(!jt||typeof jt!="string")return"";try{return decodeURIComponent(jt.split("?")[0].split("#")[0].trim().toLowerCase())}catch{return jt.split("?")[0].split("#")[0].trim().toLowerCase()}},tn=vt(ke),Vn=h.imagenes||[];me.imagenes=Vn.filter(jt=>{const Es=typeof jt=="string"?jt:(jt==null?void 0:jt.url)||"";return vt(Es)!==tn}),me.videoUrls=h.videoUrls||[],me.videoUrl=h.videoUrl||"",me.varianteImagenPrincipal=h.varianteImagenPrincipal||"",me.caracteristicasAdicionales=h.caracteristicasAdicionales||{},me.empresa&&(me.empresa=me.empresa.trim(),me.empresaNorm=me.empresa.toLowerCase());const In=(t==null?void 0:t.id)||E||(h==null?void 0:h.id)||null;if(t&&!t.id)throw new Error("Producto en edicin sin ID vlido. No se guard para evitar duplicados.");const Qr=!In;Qr?me.activo=!0:me.activo=!!me.activo;const Kn=Qr?`prod_${Date.now()}`:In;me.id=Kn,me.nombre&&!me.slug&&(me.slug=ge(me.nombre));const zn=u();if(!zn){ze("No tienes una tienda asociada. Por favor crea tu tienda primero.","error","Tienda requerida"),A(!1);return}me.storeId=zn.storeId,me.storeName=zn.storeName,me.ownerUid=zn.ownerUid,me.ownerName=zn.ownerName,Qr&&(me.fechaCreacion=new Date),await Cn(We(oe,"productos",Kn),{...me,fechaActualizacion:new Date},{merge:!0}),Qr&&M(Kn),window.dispatchEvent(new CustomEvent("productSaved",{detail:{productId:Kn,categoria:me.categoria,activo:me.activo}}));const os=`product_draft_${(a==null?void 0:a.uid)||"guest"}`;localStorage.removeItem(os),ze("Producto guardado exitosamente","success","Listo!"),setTimeout(()=>{typeof n=="function"&&n(),typeof e=="function"&&e()},500)}catch(at){let me="Error al guardar el producto";(at==null?void 0:at.code)==="permission-denied"?me="No tienes permisos para guardar este producto":(at==null?void 0:at.code)==="network-request-failed"?me="Error de conexin. Verifica tu internet e intntalo de nuevo":typeof(at==null?void 0:at.message)=="string"&&at.message&&(me=at.message),ze(me,"error","Error al guardar")}finally{A(!1)}};return s.jsx(sn,{children:s.jsxs(Q.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-stretch justify-stretch",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsxs(Q.div,{className:"bg-white dark:bg-gray-900 w-screen h-screen overflow-hidden flex flex-col text-gray-900 dark:text-gray-100",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[s.jsx("div",{className:"w-full bg-blue-700 text-white shadow",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-3 md:px-6 py-3 md:py-6 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg md:text-2xl font-bold",children:t?"Editar Producto":"Agregar Producto"}),Bt&&mn&&!t&&s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[s.jsxs("p",{className:"text-xs md:text-sm text-blue-200",children:["Borrador guardado"," ",new Date(mn).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})]}),s.jsx("button",{onClick:()=>At(!0),className:"text-xs text-blue-200 hover:text-white underline",children:"Descartar"})]})]}),s.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 text-xl md:text-2xl font-bold",children:""})]})}),s.jsx("div",{className:"max-w-6xl mx-auto w-full",children:s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-2 border-blue-400 p-2 mx-3 md:mx-0 mt-2 rounded",children:s.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[s.jsx("span",{className:"font-semibold",children:"Tienda:"})," ",((vi=u())==null?void 0:vi.storeName)||"Mi Tienda"]})})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx("form",{onSubmit:jr,className:"max-w-6xl mx-auto w-full p-3 md:p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[s.jsxs("h3",{className:"text-base md:text-base md:text-lg font-bold text-gray-900 dark:text-white mb-3 md:mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""})," Informacin Bsica"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Nombre del Producto *"]})}),s.jsx("input",{type:"text",required:!0,value:h.nombre,onChange:J=>Te("nombre",J.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all duration-200 text-lg font-medium",placeholder:"Ej: iPhone 15 Pro Max"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Marca / Empresa"]})}),s.jsxs("select",{value:L?"__nueva__":h.empresa||"",onChange:J=>{J.target.value==="__nueva__"?(I(!0),R("")):(I(!1),Te("empresa",J.target.value))},className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all duration-200 appearance-none bg-white dark:bg-gray-700",children:[s.jsx("option",{value:"",children:"Selecciona una marca..."}),N.map(J=>s.jsx("option",{value:J,children:J},J)),s.jsx("option",{value:"__nueva__",className:"font-semibold text-purple-600",children:"+ Agregar nueva marca..."})]}),L&&s.jsxs("div",{className:"mt-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border-2 border-purple-200 dark:border-purple-700",children:[s.jsx("label",{className:"block text-sm font-medium text-purple-700 dark:text-purple-300 mb-2",children:"Nueva marca / empresa:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:F,onChange:J=>R(J.target.value),onKeyPress:J=>{J.key==="Enter"&&F.trim()&&(Te("empresa",F.trim()),_(te=>[...te,F.trim()].sort((Le,xe)=>Le.localeCompare(xe))),I(!1),R(""))},className:"flex-1 px-3 py-2 border-2 border-purple-300 dark:border-purple-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Ej: Apple, Samsung, Sony...",autoFocus:!0}),s.jsx("button",{type:"button",onClick:()=>{F.trim()&&(Te("empresa",F.trim()),_(J=>[...J,F.trim()].sort((te,Le)=>te.localeCompare(Le))),I(!1),R(""))},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium",children:""}),s.jsx("button",{type:"button",onClick:()=>{I(!1),R("")},className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:""})]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Selecciona una marca existente o agrega una nueva."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio *"}),s.jsx("input",{type:"number",step:"0.01",required:!0,value:h.precio,onChange:J=>Te("precio",J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cantidad en Stock *"}),s.jsx("input",{type:"number",min:"0",required:!0,value:h.cantidad,onChange:J=>Te("cantidad",parseInt(J.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),s.jsx("textarea",{value:h.descripcion||"",onChange:J=>Te("descripcion",J.target.value),placeholder:"Escribe la descripcin del producto...",className:"w-full min-h-[140px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Peso del Producto"}),s.jsx("input",{type:"text",value:h.peso||"",onChange:J=>Te("peso",J.target.value),placeholder:"Ej: 500g, 1.5kg, 2 libras",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dimensiones"}),s.jsx("input",{type:"text",value:h.dimensiones||"",onChange:J=>Te("dimensiones",J.target.value),placeholder:"Ej: 20cm x 15cm x 10cm",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-blue-900 dark:text-blue-300 border-b border-gray-200 dark:border-gray-600 pb-2",children:"Categora y Estado"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Categora *"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("select",{value:V?"":h.categoria,onChange:J=>{J.target.value==="nueva"?K(!0):(K(!1),Te("categoria",J.target.value))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Seleccionar categora"}),w.map(J=>s.jsx("option",{value:J.id,children:J.nombre},J.id)),s.jsx("option",{value:"nueva",children:"+ Crear nueva categora"})]}),V&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Nombre de la nueva categora",value:h.nuevaCategoria,onChange:J=>Te("nuevaCategoria",J.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0}),s.jsx("button",{type:"button",onClick:()=>{K(!1),Te("nuevaCategoria","")},className:"px-3 py-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Cancelar"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),s.jsxs("select",{value:h.estado,onChange:J=>Te("estado",J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"Nuevo",children:"Nuevo"}),s.jsx("option",{value:"Usado",children:"Usado"}),s.jsx("option",{value:"Usado como nuevo",children:"Usado como nuevo"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Publicacin"}),s.jsx("input",{type:"date",value:h.fechaPublicacion,onChange:J=>Te("fechaPublicacion",J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:h.oferta,onChange:J=>Te("oferta",J.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),"En oferta"]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:h.activo,onChange:J=>Te("activo",J.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),"Producto activo"]})]}),h.oferta&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio de Oferta"}),s.jsx("input",{type:"number",step:"0.01",value:h.precioOferta,onChange:J=>Te("precioOferta",J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Precio con descuento"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Peso (opcional)"}),s.jsx("input",{type:"text",value:h.peso,onChange:J=>Te("peso",J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ej: 1.5 kg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dimensiones (opcional)"}),s.jsx("input",{type:"text",value:h.dimensiones,onChange:J=>Te("dimensiones",J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ej: 30x20x10 cm"})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[s.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""})," Imgenes y Multimedia"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Imagen Principal *"}),s.jsx(Pd,{files:h.imagen&&typeof h.imagen=="string"?(()=>{var te,Le,xe,ve;let J="imagen-principal";try{if((Le=(te=h.imagenPrincipal)==null?void 0:te[0])!=null&&Le.nombreOriginal)J=h.imagenPrincipal[0].nombreOriginal;else if(h.imagen){const Xe=h.imagen,et=((xe=Xe.split("/o/")[1])==null?void 0:xe.split("?")[0])||((ve=Xe.split("/").pop())==null?void 0:ve.split("?")[0]);J=decodeURIComponent(et||"").split("/").pop()||"imagen-principal"}}catch{J="imagen-principal"}return[{id:`saved-main-${J}`,url:h.imagen,type:"image",name:J,size:0,isUploaded:!0}]})():[],onFilesChange:pn,acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen principal",allowReorder:!1,allowSetMain:!1}),h.imagen&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" De qu variante/color es esta imagen principal?"}),s.jsx("input",{type:"text",value:h.varianteImagenPrincipal||"",onChange:J=>{const te=J.target.value;y(Le=>({...Le,varianteImagenPrincipal:te})),(E||t!=null&&t.id)&&He(E||t.id,{varianteImagenPrincipal:te}).catch(Le=>{})},placeholder:"Ej: Negro, Azul, Rojo, etc. (Dejar vaco si es genrica)",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:" Escribe el color o variante que representa esta imagen. En VistaProducto ser parte del selector de variantes."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Galera (Imgenes y Videos)"}),s.jsx(Pd,{files:[...Array.isArray(h.imagenes)&&h.imagenes.length>0?h.imagenes.map((J,te)=>{var ve,Xe;const Le=typeof J=="string"?J:(J==null?void 0:J.url)||J;let xe=`imagen-${te+1}`;try{if(typeof J=="object"&&(J!=null&&J.nombreOriginal))xe=J.nombreOriginal;else if(Le){const et=((ve=Le.split("/o/")[1])==null?void 0:ve.split("?")[0])||((Xe=Le.split("/").pop())==null?void 0:Xe.split("?")[0]);xe=decodeURIComponent(et||"").split("/").pop()||`imagen-${te+1}`}}catch{xe=`imagen-${te+1}`}return{id:`saved-img-${te}-${xe}`,url:Le,type:"image",name:xe,size:0,isUploaded:!0}}):[],...Array.isArray(h.videoUrls)&&h.videoUrls.length>0?h.videoUrls.map((J,te)=>{var ve,Xe;const Le=typeof J=="string"?J:(J==null?void 0:J.url)||J;let xe=`video-${te+1}`;try{if(typeof J=="object"&&(J!=null&&J.nombreOriginal))xe=J.nombreOriginal;else if(Le){const et=((ve=Le.split("/o/")[1])==null?void 0:ve.split("?")[0])||((Xe=Le.split("/").pop())==null?void 0:Xe.split("?")[0]);xe=decodeURIComponent(et||"").split("/").pop()||`video-${te+1}`}}catch{xe=`video-${te+1}`}return{id:`saved-vid-${te}-${xe}`,url:Le,type:"video",name:xe,size:0,isUploaded:!0}}):[]],onFilesChange:si,acceptedTypes:"image/*,video/*",multiple:!0,label:"Galera (Imgenes y Videos)",placeholder:"Arrastra o selecciona imgenes o videos",allowReorder:!0,allowSetMain:!0})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[s.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""})," Detalles del Producto"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Caractersticas (Acerca de)"}),h.acerca.map((J,te)=>s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"text",value:J,onChange:Le=>nt("acerca",te,Le.target.value),placeholder:"Caracterstica del producto",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>kn("acerca",te),className:"px-3 py-2 text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:""})]},te)),s.jsxs("button",{type:"button",onClick:()=>ut("acerca"),className:"mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar caracterstica"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Etiquetas (para bsqueda)"}),h.etiquetas.map((J,te)=>s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"text",value:J,onChange:Le=>nt("etiquetas",te,Le.target.value),placeholder:"Etiqueta",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>kn("etiquetas",te),className:"px-3 py-2 text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:""})]},te)),s.jsxs("button",{type:"button",onClick:()=>ut("etiquetas"),className:"mt-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar etiqueta"]})]})]}),s.jsx("div",{className:"bg-gradient-to-br from-blue-50 via-sky-50 to-cyan-50 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:s.jsx(tq,{categoriaId:h.categoria,value:h.caracteristicasAdicionales,onChange:J=>Te("caracteristicasAdicionales",J)})}),s.jsxs("div",{className:"mt-8 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-blue-900 dark:text-blue-300 border-b border-gray-200 dark:border-gray-600 pb-2",children:"Variantes del Producto"}),h.variantes&&h.variantes.length>1&&s.jsx("div",{className:"mb-4",children:s.jsx(aT,{variants:h.variantes.map((J,te)=>{var Le,xe;return{id:J.id||`var_${te}`,name:J.color||`Variante ${te+1}`,price:J.precio,stock:J.cantidad,image:((xe=(Le=J.imagenPrincipal)==null?void 0:Le[0])==null?void 0:xe.url)||J.imagen,isSelected:it===te}}),productMainImage:((Xi=(zs=h.imagenPrincipal)==null?void 0:zs[0])==null?void 0:Xi.url)||h.imagen,onVariantChange:yt,className:"max-w-md"})})]}),h.variantes.map((J,te)=>{var Le,xe,ve,Xe,et,tt,Pt,at;return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-6 space-y-6 bg-gray-50 dark:bg-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h4",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:["Variante ",te+1]}),s.jsx("button",{type:"button",onClick:()=>kn("variantes",te),className:"px-4 py-2 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:"Eliminar"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color/Tipo"}),s.jsx("input",{type:"text",value:J.color,onChange:me=>Ce(te,"color",me.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ej. Rojo, Azul, Edicin Especial"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cantidad en Stock"}),s.jsx("input",{type:"number",min:"0",value:J.cantidad,onChange:me=>Ce(te,"cantidad",parseInt(me.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio de la variante (opcional)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:J.precio??"",onChange:me=>Ce(te,"precio",me.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ej. 1999.99"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin de la variante"}),s.jsx("textarea",{rows:2,value:J.descripcion||"",onChange:me=>Ce(te,"descripcion",me.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ej. Color nen, control edicin especial, etc."})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[s.jsx("h5",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:"Imgenes de la Variante"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Imagen Principal de Variante"}),s.jsx(Pd,{files:[...(xe=(Le=we.variantes)==null?void 0:Le[te])!=null&&xe.imagen?[{id:`temp-var${te}-main`,url:we.variantes[te].imagen,type:"image",name:`var${te}-imagen`,size:0,isUploaded:!1}]:[],...J.imagen&&typeof J.imagen=="string"?[{id:`saved-var${te}-main`,url:J.imagen,type:"image",name:`var${te}-imagen`,size:0,isUploaded:!0}]:[]],onFilesChange:me=>Yi(me,te),acceptedTypes:"image/*",multiple:!1,maxFiles:1,label:"Imagen Principal",placeholder:"Arrastra o selecciona una imagen",allowReorder:!1,allowSetMain:!1})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Galera de Medios (Imgenes y Videos)"}),s.jsx(Pd,{files:[...Array.isArray(J.imagenes)?J.imagenes.map((me,ke)=>({id:`saved-var${te}-img-${ke}`,url:typeof me=="string"?me:(me==null?void 0:me.url)||me,type:"image",name:`var${te}-img-${ke+1}`,size:0,isUploaded:!0})):[],...Array.isArray(J.videoUrls)?J.videoUrls.map((me,ke)=>({id:`saved-var${te}-vid-${ke}`,url:typeof me=="string"?me:(me==null?void 0:me.url)||me,type:"video",name:`var${te}-video-${ke+1}`,size:0,isUploaded:!0})):[],...(((Xe=(ve=we.variantes)==null?void 0:ve[te])==null?void 0:Xe.imagenes)||[]).map((me,ke)=>({id:`temp-var${te}-img-${ke}`,url:me,type:"image",name:`var${te}-img-${ke+1}`,size:0,isUploaded:!1})),...(((tt=(et=we.variantes)==null?void 0:et[te])==null?void 0:tt.videos)||[]).map((me,ke)=>({id:`temp-var${te}-video-${ke}`,url:me,type:"video",name:`var${te}-video-${ke+1}`,size:0,isUploaded:!1}))],onFilesChange:me=>Ei(me,te),acceptedTypes:"image/*,video/*",multiple:!0,label:"Galera",placeholder:"Arrastra imgenes y videos",allowReorder:!0,allowSetMain:!0})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:" Videos de la Variante (Opcional)"}),s.jsx(Pd,{files:[...Array.isArray(J.videoUrls)?J.videoUrls.map((me,ke)=>({id:`saved-var${te}-vid-${ke}`,url:typeof me=="string"?me:(me==null?void 0:me.url)||me,type:"video",name:`video-${ke+1}`,size:0,isUploaded:!0})):[],...(((at=(Pt=we.variantes)==null?void 0:Pt[te])==null?void 0:at.videos)||[]).map((me,ke)=>({id:`temp-var${te}-video-${ke}`,url:me,type:"video",name:`video-${ke+1}`,size:0,isUploaded:!1}))],onFilesChange:me=>wr(me,te),acceptedTypes:"video/*",multiple:!0,label:"Videos",placeholder:"Arrastra o selecciona videos",allowReorder:!0,allowSetMain:!0})]})]})]},te)}),s.jsxs("button",{type:"button",onClick:()=>ut("variantes"),className:"w-full md:w-auto px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Agregar Variante"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-3 md:p-6 border-l-4 border-blue-500",children:[s.jsxs("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{children:""})," Imgenes con ms informacin del artculo"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:'Imgenes que se mostrarn en la seccin "Ms informacin del producto"'}),s.jsx(Pd,{files:[...(h.imagenesExtra||[]).map((J,te)=>({id:`saved-info-${te}`,url:J,type:Me(J),name:(String(J).split("/").pop()||`info-${te+1}`).split("?")[0],size:0,isUploaded:!0})),...(we.extras||[]).map((J,te)=>({id:`temp-info-${te}`,url:J,type:"image",name:`info-${te+1}`,size:0,isUploaded:!1}))],onFilesChange:Vs,acceptedTypes:"image/*",multiple:!0,label:"Imgenes informativas del producto",placeholder:" Arrastra o selecciona imgenes de alta resolucin con informacin adicional del producto",allowReorder:!0,allowSetMain:!1})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("button",{type:"button",onClick:e,className:"px-8 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium text-lg",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:D,className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-lg flex items-center space-x-2",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Guardando..."})]}):s.jsx("span",{children:"Guardar Producto"})})]})]})})})]}),s.jsx(sn,{children:(O||(le==null?void 0:le.some(J=>J.status==="uploading")))&&s.jsxs(Q.div,{className:"fixed inset-0 bg-white/40 dark:bg-slate-900/40 backdrop-blur-md flex flex-col items-center justify-center z-[99998]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-3"}),s.jsx("p",{className:"text-sm font-bold text-blue-700 dark:text-blue-400",children:"Subiendo archivos..."}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(le==null?void 0:le.filter(J=>J.status==="uploading").length)||0," ","archivo(s) en progreso"]})]})}),s.jsx(sn,{children:D&&s.jsxs(Q.div,{className:"fixed inset-0 bg-white/40 dark:bg-slate-900/40 backdrop-blur-md flex flex-col items-center justify-center z-[99998]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-3"}),s.jsx("p",{className:"text-sm font-bold text-blue-700 dark:text-blue-400",children:"Guardando producto..."})]})}),s.jsx(tp,{notifications:bn,onRemove:Y}),s.jsx(sn,{children:an&&s.jsx(Q.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[99999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>At(!1),children:s.jsx(Q.div,{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:J=>J.stopPropagation(),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Descartar borrador?"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6",children:"Se perdern todos los cambios no guardados. Esta accin no se puede deshacer."}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>At(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:ie,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Descartar"})]})]})]})})})})]})})},Ml=({size:t="medium",color:e="blue",className:n="",fullScreen:r=!1,text:i=null,variant:a="dots"})=>{const l={small:"loading-size-small",medium:"loading-size-medium",large:"loading-size-large",xlarge:"loading-size-xlarge"},d={blue:"loading-color-blue",white:"loading-color-white",gray:"loading-color-gray",green:"loading-color-green",red:"loading-color-red"},u=()=>{switch(a){case"dots":return s.jsxs("div",{className:`loading-dots ${l[t]} ${d[e]}`,children:[s.jsx("div",{className:"loading-dot"}),s.jsx("div",{className:"loading-dot"}),s.jsx("div",{className:"loading-dot"})]});case"pulse":return s.jsxs("div",{className:`loading-pulse ${l[t]} ${d[e]}`,children:[s.jsx("div",{className:"loading-pulse-circle"}),s.jsx("div",{className:"loading-pulse-circle"})]});case"bars":return s.jsxs("div",{className:`loading-bars ${l[t]} ${d[e]}`,children:[s.jsx("div",{className:"loading-bar"}),s.jsx("div",{className:"loading-bar"}),s.jsx("div",{className:"loading-bar"}),s.jsx("div",{className:"loading-bar"})]});case"spin":default:return s.jsx("div",{className:`loading-spinner ${l[t]} ${d[e]}`})}};return r?s.jsx("div",{className:"loading-spinner-fullscreen",children:s.jsxs("div",{className:"loading-spinner-container",children:[u(),i&&s.jsx("p",{className:"loading-spinner-text",children:i})]})}):s.jsxs("div",{className:`loading-spinner-inline ${n}`,children:[u(),i&&s.jsx("span",{className:"loading-spinner-text-inline",children:i})]})};function aq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function oq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function lq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function cq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function dq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function uq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function hq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function fq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function lT(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function wx(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}function mq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},child:[]}]})(t)}function pq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function gq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function kv(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function tm(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(t)}function xq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function cT(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"path",attr:{d:"M16 10a4 4 0 0 1-8 0"},child:[]}]})(t)}function nm(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(t)}function yq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(t)}function Ug(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function $_(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function vq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function Bg(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function bq(t){return Kt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const ru="phantomCategories",xw=()=>{try{const t=localStorage.getItem(ru);return t?JSON.parse(t):[]}catch{return[]}},wq=t=>{try{const e=xw();return e.includes(t)?!1:(e.push(t),localStorage.setItem(ru,JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:ru,newValue:JSON.stringify(e),url:window.location.href})),!0)}catch{return!1}},jq=()=>{try{const e=xw().length;return localStorage.setItem(ru,JSON.stringify([])),window.dispatchEvent(new StorageEvent("storage",{key:ru,newValue:JSON.stringify([]),url:window.location.href})),e}catch{return 0}},kq=async t=>{try{const e=We(oe,"categorias",t);return(await Fn(e)).exists()?!0:(wq(t),!1)}catch{return!1}},Nq=async()=>{try{const t=xw(),e=[],n=[];for(const r of t)await kq(r)?n.push(r):e.push(r);return localStorage.setItem(ru,JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:ru,newValue:JSON.stringify(e),url:window.location.href})),{total:t.length,recovered:n.length,stillPhantoms:e.length}}catch{return null}},dT=({onAddProduct:t,onEditProduct:e})=>{var ze;const{usuario:n,usuarioInfo:r}=er(),{tienda:i}=pw(),{isDark:a}=Ss(),l=(r==null?void 0:r.isAdmin)===!0,[d,u]=b.useState([]),[m,g]=b.useState([]),[h,y]=b.useState(!0),[w,S]=b.useState(""),[N,_]=b.useState(""),[D,A]=b.useState("nombre"),[L,I]=b.useState(()=>{try{const Y=localStorage.getItem("phantomProducts");return Y?JSON.parse(Y):[]}catch{return[]}});b.useEffect(()=>{},[n]);const[F,R]=b.useState("asc"),[E,M]=b.useState(!1),[O,j]=b.useState(null),[U,H]=b.useState(null),[V,K]=b.useState(null),[X,ne]=b.useState(""),[we,Z]=b.useState(""),[le,re]=b.useState(""),[B,ce]=b.useState(""),[Se,Ve]=b.useState(""),[$e,Ke]=b.useState(""),[Ye,lt]=b.useState(""),[Re,Ct]=b.useState(""),[Ue,ot]=b.useState([]);b.useEffect(()=>{ct()},[]),b.useEffect(()=>{const Y=it();return()=>{typeof Y=="function"&&Y()}},[n==null?void 0:n.uid,r==null?void 0:r.isAdmin,r==null?void 0:r.storeId,i==null?void 0:i.id]),b.useEffect(()=>{const Y=ie=>{if(ie.key==="phantomProducts")try{const pe=ie.newValue?JSON.parse(ie.newValue):[];I(pe)}catch{}};return window.addEventListener("storage",Y),()=>window.removeEventListener("storage",Y)},[]);const ct=async()=>{try{const ie=(await rn(pt(oe,"categorias"))).docs.map(pe=>({id:pe.id,...pe.data()}));g(ie)}catch{}},it=()=>{try{let Y;if(l)Y=Ot(pt(oe,"productos"),ni("fechaCreacion","desc"));else if(r!=null&&r.storeId||i!=null&&i.id){const pe=(r==null?void 0:r.storeId)||(i==null?void 0:i.id);Y=Ot(pt(oe,"productos"),qt("storeId","==",pe),ni("fechaCreacion","desc"))}else return u([]),y(!1),()=>{};return _n(Y,pe=>{I(he=>{const He=[];return pe.docs.forEach(ge=>{!he.includes(ge.id)&&ge.exists()&&He.push({id:ge.id,...ge.data()})}),u(He),y(!1),he})},pe=>{y(!1)})}catch{return y(!1),null}};b.useMemo(()=>{if(!l)return[];const Y=new Set;return d.forEach(ie=>{const pe=(ie.ownerName||ie.empresa||"").trim();pe&&Y.add(pe)}),Array.from(Y).sort((ie,pe)=>ie.localeCompare(pe))},[l,d]);const Lt=b.useMemo(()=>{if(!l)return[];const Y=new Map;return d.forEach(ie=>{ie.storeId&&ie.storeName&&Y.set(ie.storeId,ie.storeName)}),Array.from(Y.entries()).map(([ie,pe])=>({id:ie,name:pe})).sort((ie,pe)=>ie.name.localeCompare(pe.name))},[l,d]),Bt=Y=>{try{return typeof(Y==null?void 0:Y.cantidad)=="number"?Number(Y.cantidad)||0:Array.isArray(Y==null?void 0:Y.variantes)&&Y.variantes.length?Y.variantes.reduce((ie,pe)=>ie+(parseInt(pe==null?void 0:pe.cantidad)||0),0):Number.POSITIVE_INFINITY}catch{return Number.POSITIVE_INFINITY}},Ge=async(Y,ie)=>{try{const pe=We(oe,"productos",Y);if(!(await Fn(pe)).exists()){u(He=>He.filter(ge=>ge.id!==Y)),Vt("Este producto no existe en la base de datos y ha sido eliminado de la lista.","info","Producto eliminado");return}await jn(pe,{activo:!ie,fechaActualizacion:new Date})}catch(pe){Vt(`Error al actualizar el estado del producto: ${pe.message}`,"error","Error")}},mn=async Y=>{try{const ie=We(oe,"productos",Y.id),pe=await Fn(ie);if(!pe.exists()){u(Ae=>Ae.filter(Be=>Be.id!==Y.id)),Vt("Este producto no existe en la base de datos y ha sido eliminado de la lista. No se puede duplicar.","warning","Producto no encontrado");return}const he=pe.data(),He=`prod_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,ge=JSON.parse(JSON.stringify(he));ge.nombre=`${he.nombre} (Copia)`,ge.fechaCreacion=new Date,ge.fechaActualizacion=new Date,!ge.categoria&&he.categoria&&(ge.categoria=he.categoria),ge.activo=!0,ge.estado||(ge.estado="activo"),Array.isArray(ge.variantes)&&ge.variantes.length>0&&(ge.variantes=ge.variantes.map(Ae=>{const Be={...Ae};return Be.id=`var_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,Array.isArray(Be.media)&&Be.media.length>0&&(Be.media=Be.media.map(Ze=>({...Ze,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),Be})),Array.isArray(ge.media)&&ge.media.length>0&&(ge.media=ge.media.map(Ae=>({...Ae,id:`med_${Date.now()}_${Math.random().toString(36).substring(2,7)}`}))),Array.isArray(ge.imagenes)&&ge.imagenes.length>0&&(ge.imagenes=[...ge.imagenes]),await Cn(We(oe,"productos",He),ge),await new Promise(Ae=>setTimeout(Ae,500)),Vt(`Producto duplicado exitosamente con ID: ${He}`,"success","Producto duplicado")}catch(ie){Vt(`Error al duplicar el producto: ${ie.message}`,"error","Error")}},Wt=async(Y,ie,pe)=>{try{const he=We(oe,"productos",Y);if(!(await Fn(he)).exists()){u(ge=>ge.filter(Ae=>Ae.id!==Y)),Vt("Este producto no existe en la base de datos y ha sido eliminado de la lista.","info","Producto eliminado");return}await jn(he,{[ie]:pe,fechaActualizacion:new Date})}catch(he){Vt(`Error al actualizar ${ie}: ${he.message}`,"error","Error")}},an=async()=>{if(!O)return;const Y=O.id,ie=O.nombre||"Producto";M(!1),j(null);try{const pe=We(oe,"productos",Y);if(!(await Fn(pe)).exists()){I(Be=>{if(!Be.includes(Y)){const Ze=[...Be,Y];return localStorage.setItem("phantomProducts",JSON.stringify(Ze)),Ze}return Be}),u(Be=>Be.filter(Ze=>Ze.id!==Y));const Ae=document.createElement("div");Ae.textContent=`"${ie}" eliminado permanentemente (fantasma limpiado)`,Ae.style.cssText=`
          position: fixed;
          top: 20px;
          right: 20px;
          background: #dc2626;
          color: white;
          padding: 16px 24px;
          border-radius: 8px;
          font-weight: 600;
          z-index: 10000;
          box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        `,document.body.appendChild(Ae),setTimeout(()=>Ae.remove(),3e3);return}if(await co(pe),(await Fn(pe)).exists()){Vt("Error: No se pudo eliminar de Firebase. Verifica los permisos.","error","Error al eliminar");return}u(Ae=>Ae.filter(Be=>Be.id!==Y));const ge=document.createElement("div");ge.textContent=`"${ie}" eliminado`,ge.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #2563eb;
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        font-weight: 600;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      `,document.body.appendChild(ge),setTimeout(()=>ge.remove(),3e3)}catch(pe){Vt(`Error: ${pe.message}`,"error","Error")}},At=d.filter(Y=>{var ie;try{const pe=w.toLowerCase(),he=(Y.nombre||"").toLowerCase().includes(pe)||(Y.descripcion||"").toLowerCase().includes(pe)||(Y.empresa||"").toLowerCase().includes(pe)||(Y.categoria||"").toLowerCase().includes(pe),He=!N||Y.categoria===N,ge=!X||(X==="activo"?Y.activo!==!1:Y.activo===!1),Ae=Bt(Y),Be=Number.isFinite(Ae)?Ae<=0?"agotado":Ae<=5?"bajo":"disponible":"disponible",Ze=!we||Be===we,Rt=parseFloat(Y.precio)||0,Ie=(le===""||Rt>=parseFloat(le))&&(B===""||Rt<=parseFloat(B)),gt=(ie=Y==null?void 0:Y.fechaCreacion)!=null&&ie.seconds?Y.fechaCreacion.seconds*1e3:Y!=null&&Y.fechaCreacion?new Date(Y.fechaCreacion).getTime():null,ft=!Se||gt&&gt>=new Date(Se).setHours(0,0,0,0),Te=!$e||gt&&gt<=new Date($e).setHours(23,59,59,999),nt=ft&&Te,ut=!l||!Ye||(Y.ownerName||Y.empresa||"")===Ye,kn=!l||!Re||Y.storeId===Re;return he&&He&&ge&&Ze&&Ie&&nt&&ut&&kn}catch{return!1}}).sort((Y,ie)=>{let pe=Y[D],he=ie[D];return D==="precio"?(pe=parseFloat(pe)||0,he=parseFloat(he)||0):(D==="fechaCreacion"||D==="fechaActualizacion")&&(pe=new Date(pe!=null&&pe.seconds?pe.seconds*1e3:pe),he=new Date(he!=null&&he.seconds?he.seconds*1e3:he)),F==="asc"?pe>he?1:-1:pe<he?1:-1}),bn=Y=>{const ie=m.find(pe=>pe.id===Y);return(ie==null?void 0:ie.nombre)||Y},Ht=Y=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(Y||0);return h?s.jsx("div",{className:"flex justify-center items-center h-64 bg-gradient-to-br from-blue-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ml,{size:"xlarge",color:"blue",variant:"bars"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg font-semibold mt-4 animate-pulse",children:"Cargando productos..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestin de Productos"}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("p",{className:"text-gray-600",children:[At.length," de ",d.length," productos"]}),l&&Re&&s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[""," ",((ze=Lt.find(Y=>Y.id===Re))==null?void 0:ze.name)||"Tienda seleccionada"]})]})]}),s.jsxs("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"+"}),"Agregar Producto"]})]}),s.jsx("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm border",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Buscar productos...",value:w,onChange:Y=>S(Y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})})})})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categora"}),s.jsxs("select",{value:N,onChange:Y=>_(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Todas las categoras"}),m.map(Y=>s.jsx("option",{value:Y.id,children:Y.nombre},Y.id))]})]}),l&&Lt.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Filtrar por Tienda"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:Re,onChange:Y=>Ct(Y.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gradient-to-r from-blue-50 to-purple-50",children:[s.jsx("option",{value:"",children:" Todas las tiendas"}),Lt.map(Y=>s.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),Re&&s.jsx("button",{onClick:()=>Ct(""),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",title:"Limpiar filtro de tienda",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordenar por"}),s.jsxs("select",{value:D,onChange:Y=>A(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"nombre",children:"Nombre"}),s.jsx("option",{value:"precio",children:"Precio"}),s.jsx("option",{value:"fechaCreacion",children:"Fecha de creacin"}),s.jsx("option",{value:"fechaActualizacion",children:"ltima actualizacin"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),s.jsxs("select",{value:F,onChange:Y=>R(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"desc",children:"Descendente"}),s.jsx("option",{value:"asc",children:"Ascendente"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 md:gap-6",children:s.jsx(sn,{children:At.map(Y=>s.jsxs(Q.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"relative h-48 bg-white rounded-t-lg overflow-hidden flex items-center justify-center",children:[(()=>{try{const ie=Y.imagen||(Array.isArray(Y.imagenes)&&Y.imagenes.length>0?Y.imagenes[0]:null)||(Array.isArray(Y.variantes)&&Y.variantes.length>0&&Y.variantes[0].imagen?Y.variantes[0].imagen:null);return ie?s.jsx("img",{src:ie,alt:Y.nombre||"Producto",className:"w-full h-full object-contain",onError:pe=>{pe.target.style.display="none",pe.target.nextSibling.style.display="flex"}}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s.jsx("span",{className:"text-sm",children:"Sin imagen"})})}catch{return s.jsx("div",{className:"w-full h-full flex items-center justify-center text-red-400 bg-red-50",children:s.jsx("span",{className:"text-sm",children:"Error en imagen"})})}})(),s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 bg-gray-50",style:{display:"none"},children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{className:"text-sm",children:"Sin imagen"})]})}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Y.activo?"Activo":"Inactivo"})}),Y.oferta&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Oferta"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:Y.nombre}),s.jsx("button",{onClick:()=>Ge(Y.id,Y.activo),className:`ml-2 p-1 rounded ${Y.activo?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:Y.activo?"Desactivar":"Activar",children:Y.activo?s.jsx(wx,{}):s.jsx(lT,{})})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:bn(Y.categoria)}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[V===Y.id?s.jsx("input",{type:"number",step:"0.01",defaultValue:Y.precio,onBlur:ie=>{Wt(Y.id,"precio",parseFloat(ie.target.value)||0),K(null)},onKeyDown:ie=>{ie.key==="Enter"&&(Wt(Y.id,"precio",parseFloat(ie.target.value)||0),K(null)),ie.key==="Escape"&&K(null)},className:"text-lg font-bold text-blue-700 bg-blue-50 border border-blue-200 rounded px-2 py-1 w-24",autoFocus:!0}):s.jsx("p",{className:"text-lg font-bold text-blue-700 cursor-pointer hover:bg-blue-50 px-2 py-1 rounded",onClick:()=>K(Y.id),title:"Click para editar precio",children:Ht(Y.precio)}),Y.cantidad!==void 0&&s.jsx("div",{className:"text-sm",children:U===Y.id?s.jsx("input",{type:"number",min:"0",defaultValue:Y.cantidad,onBlur:ie=>{Wt(Y.id,"cantidad",parseInt(ie.target.value)||0),H(null)},onKeyDown:ie=>{ie.key==="Enter"&&(Wt(Y.id,"cantidad",parseInt(ie.target.value)||0),H(null)),ie.key==="Escape"&&H(null)},className:"bg-gray-50 border border-gray-200 rounded px-2 py-1 w-16 text-center",autoFocus:!0}):s.jsxs("span",{className:`cursor-pointer hover:bg-gray-50 px-2 py-1 rounded ${Y.cantidad<=5?"text-red-600 font-semibold":Y.cantidad<=20?"text-yellow-600":"text-green-600"}`,onClick:()=>H(Y.id),title:"Click para editar cantidad",children:["Stock: ",Y.cantidad]})})]}),s.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-4",children:Y.descripcion}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{onClick:()=>e(Y),className:"px-3 py-2 border border-blue-300 text-blue-600 rounded text-sm hover:bg-blue-50 transition-colors",title:"Editar",children:"Editar"}),s.jsx("button",{onClick:()=>mn(Y),className:"px-3 py-2 border border-green-300 text-green-600 rounded text-sm hover:bg-green-50 transition-colors",title:"Duplicar",children:s.jsx(uq,{})}),s.jsx("button",{onClick:()=>{j(Y),M(!0)},className:"px-3 py-2 border border-red-300 text-red-600 rounded text-sm hover:bg-red-50 transition-colors",title:"Eliminar",children:s.jsx(Ug,{})})]})]})]},Y.id))})}),At.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 dark:text-gray-600 text-6xl mb-4 flex justify-center",children:s.jsx(tm,{})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:w||N?"No se encontraron productos":l?"No hay productos en el sistema":"No tienes productos todava"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:w||N?"Intenta ajustar los filtros de bsqueda":l?"Los productos aparecern aqu cuando los vendedores los creen":"Comienza agregando tu primer producto para vender"}),!w&&!N&&!l&&s.jsx("button",{onClick:t,className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Agregar Primer Producto"})]}),s.jsx(sn,{children:E&&s.jsx(Q.div,{className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center p-4",style:{backgroundColor:"#000000",zIndex:9999},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsx(Q.div,{className:"rounded-4 shadow-lg w-100",style:{backgroundColor:a?"#1f2937":"#ffffff",border:`2px solid ${a?"#ef4444":"#dc2626"}`,maxWidth:"400px"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center rounded-circle mx-auto mb-4",style:{width:"60px",height:"60px",backgroundColor:a?"#dc2626":"#fee2e2",color:a?"#ffffff":"#dc2626"},children:s.jsx("span",{className:"fs-2 fw-bold",children:"!"})}),s.jsx("h3",{className:"h5 fw-bold text-center mb-3",style:{color:a?"#f9fafb":"#111827"},children:"Confirmar Eliminacin"}),s.jsxs("p",{className:"text-center mb-4",style:{color:a?"#d1d5db":"#6b7280"},children:['Ests seguro de que deseas eliminar el producto "',O==null?void 0:O.nombre,'"? Esta accin no se puede deshacer.']}),s.jsxs("div",{className:"d-flex gap-3",children:[s.jsx("button",{onClick:()=>{M(!1),j(null)},className:"btn flex-fill",style:{backgroundColor:a?"#374151":"#f3f4f6",borderColor:a?"#4b5563":"#d1d5db",color:a?"#f9fafb":"#374151"},children:"Cancelar"}),s.jsx("button",{onClick:an,className:"btn flex-fill",style:{backgroundColor:"#dc2626",borderColor:"#dc2626",color:"#ffffff"},children:"Eliminar"})]})]})})})})]})},_q=()=>{const{isDark:t}=Ss(),[e,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState(!1),[d,u]=b.useState(null),[m,g]=b.useState(!1),[h,y]=b.useState(null),[w,S]=b.useState({nombre:"",descripcion:"",imagen:"",activa:!0,orden:0}),[N,_]=b.useState(!1),[D,A]=b.useState(!1),[L,I]=b.useState(()=>{try{const K=localStorage.getItem("phantomCategories");return K?JSON.parse(K):[]}catch{return[]}});b.useEffect(()=>{const K=F(),X=ne=>{if(ne.key==="phantomCategories")try{const we=ne.newValue?JSON.parse(ne.newValue):[];I(we)}catch{}};return window.addEventListener("storage",X),()=>{K&&K(),window.removeEventListener("storage",X)}},[]);const F=()=>{try{return _n(pt(oe,"categorias"),X=>{I(ne=>{const we=[];return X.docs.forEach(Z=>{!ne.includes(Z.id)&&Z.exists()&&we.push({id:Z.id,...Z.data()})}),we.sort((Z,le)=>(Z.orden||0)-(le.orden||0)),n(we),i(!1),ne})})}catch{i(!1)}},R=()=>{S({nombre:"",descripcion:"",imagen:"",activa:!0,orden:e.length}),u(null)},E=K=>{u(K),S({nombre:K.nombre||"",descripcion:K.descripcion||"",imagen:K.imagen||"",activa:K.activa!==!1,orden:K.orden||0}),l(!0)},M=async K=>{_(!0);try{const X=so(io,`categorias/${Date.now()}_${K.name}`);await Oh(X,K);const ne=await zc(X);S(we=>({...we,imagen:ne}))}catch{Vt("Error al subir la imagen","error","Error al subir imagen")}finally{_(!1)}},O=async K=>{K.preventDefault(),i(!0);try{const X={...w,ruta:w.nombre.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),fechaActualizacion:new Date};if(d)await jn(We(oe,"categorias",d.id),X);else{X.fechaCreacion=new Date,X.productCount=0;const ne=X.ruta;await Yc(pt(oe,"categorias"),X)}l(!1),R()}catch{Vt("Error al guardar la categora","error","Error al guardar")}finally{i(!1)}},j=async(K,X)=>{try{await jn(We(oe,"categorias",K),{activa:!X,fechaActualizacion:new Date})}catch{Vt("Error al actualizar el estado de la categora","error","Error al actualizar")}},U=async()=>{if(!h)return;const K=h.id,X=h.nombre||"Categora";g(!1),y(null);try{const ne=We(oe,"categorias",K);if(!(await Fn(ne)).exists()){I(le=>{if(!le.includes(K)){const re=[...le,K];return localStorage.setItem("phantomCategories",JSON.stringify(re)),re}return le}),n(le=>le.filter(re=>re.id!==K)),Vt(`"${X}" eliminada (era un fantasma del cach)`,"success","Eliminada");return}if(await co(ne),await new Promise(le=>setTimeout(le,500)),(await Fn(ne)).exists()){Vt("No se pudo eliminar de Firebase. Verifica permisos o conexin.","error","Error de eliminacin");return}n(le=>le.filter(re=>re.id!==K)),Vt(`"${X}" eliminada exitosamente`,"success","Eliminada")}catch(ne){ne.code==="permission-denied"?Vt("No tienes permiso para eliminar esta categora.","error","Error de permisos"):Vt(`Error: ${ne.message}`,"error","Error")}},H=async(K,X)=>{const ne=e.findIndex(Z=>Z.id===K);if(ne===-1)return;const we=X==="up"?ne-1:ne+1;if(!(we<0||we>=e.length))try{const Z=[],le=e[ne],re=e[we];Z.push(jn(We(oe,"categorias",le.id),{orden:we}),jn(We(oe,"categorias",re.id),{orden:ne})),await Promise.all(Z)}catch{Vt("Error al reordenar las categoras","error","Error")}},V=K=>K?(K.seconds?new Date(K.seconds*1e3):new Date(K)).toLocaleDateString("es-ES"):"N/A";return r&&e.length===0?s.jsx("div",{className:"flex justify-center items-center h-64 bg-gradient-to-br from-blue-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ml,{size:"xlarge",color:"blue",variant:"pulse"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg font-semibold mt-4 animate-pulse",children:"Cargando categoras..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"Gestin de Categoras"}),s.jsxs("p",{className:"text-gray-600",children:[e.length," categoras en total"]})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[L.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:async()=>{if(confirm(`Verificar y limpiar ${L.length} categoras fantasma?

Esto verificar si alguna volvi a existir en Firebase.`)){const K=await Nq();K&&(Vt(`Limpieza completada: ${K.recovered} recuperadas, ${K.stillPhantoms} fantasmas`,"success","Limpieza completada"),window.location.reload())}},className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm flex items-center gap-1",title:"Verificar y limpiar categoras fantasma",children:[s.jsx(Ug,{size:14}),"Verificar (",L.length,")"]}),s.jsxs("button",{onClick:()=>{if(confirm(`Limpiar TODAS las ${L.length} categoras fantasma?

 Esto las eliminar sin verificar si existen en Firebase.`)){const K=jq();I([]),Vt(`${K} categoras fantasma limpiadas`,"success","Limpieza completada"),window.location.reload()}},className:"px-3 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-sm flex items-center gap-1",title:"Forzar limpieza de cach de categoras fantasma",children:[s.jsx(Ug,{size:14}),"Limpiar (",L.length,")"]})]}),s.jsxs("button",{onClick:()=>{R(),l(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"+"}),"Agregar Categora"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categoras"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Comienza creando tu primera categora de productos"}),s.jsx("button",{onClick:()=>{R(),l(!0)},className:"bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition-colors",children:"Crear Primera Categora"})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:s.jsx(sn,{children:e.map((K,X)=>s.jsx(Q.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center",children:K.imagen?s.jsx("img",{src:K.imagen,alt:K.nombre,className:"w-full h-full object-cover"}):s.jsx(mq,{className:"text-gray-400 text-2xl"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:K.nombre}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${K.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:K.activa?"Activa":"Inactiva"})]}),K.descripcion&&s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:K.descripcion}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{children:["Ruta: /",K.ruta]}),s.jsxs("span",{children:["Productos: ",K.productCount||0]}),s.jsxs("span",{children:["Creada: ",V(K.fechaCreacion)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("button",{onClick:()=>H(K.id,"up"),disabled:X===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover arriba",children:s.jsx(dq,{})}),s.jsx("button",{onClick:()=>H(K.id,"down"),disabled:X===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Mover abajo",children:s.jsx(cq,{})})]}),s.jsx("button",{onClick:()=>j(K.id,K.activa),className:`p-2 rounded ${K.activa?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"}`,title:K.activa?"Desactivar":"Activar",children:K.activa?s.jsx(wx,{}):s.jsx(lT,{})}),s.jsx("button",{onClick:()=>E(K),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Editar",children:s.jsx(fq,{})}),s.jsx("button",{onClick:()=>{y(K),g(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:s.jsx(Ug,{})})]})]})},K.id))})})}),s.jsx(sn,{children:a&&s.jsx(Q.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsxs(Q.div,{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[s.jsxs("div",{className:"bg-blue-700 text-white p-6 flex justify-between items-center rounded-t-2xl",children:[s.jsx("h2",{className:"text-xl font-bold",children:d?"Editar Categora":"Agregar Categora"}),s.jsx("button",{onClick:()=>{l(!1),R()},className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),s.jsxs("form",{onSubmit:O,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Categora *"}),s.jsx("input",{type:"text",required:!0,value:w.nombre,onChange:K=>S(X=>({...X,nombre:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Videojuegos"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orden"}),s.jsx("input",{type:"number",min:"0",value:w.orden,onChange:K=>S(X=>({...X,orden:parseInt(K.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("textarea",{rows:3,value:w.descripcion,onChange:K=>S(X=>({...X,descripcion:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripcin opcional de la categora"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen de la Categora"}),s.jsx("input",{type:"file",accept:"image/*",onChange:K=>{var X;return((X=K.target.files)==null?void 0:X[0])&&M(K.target.files[0])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),w.imagen&&s.jsx("div",{className:"mt-3",children:s.jsx("img",{src:w.imagen,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:w.activa,onChange:K=>S(X=>({...X,activa:K.target.checked})),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),"Categora activa"]})}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>{l(!1),R()},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancelar"}),s.jsxs("button",{type:"submit",disabled:N,className:"px-6 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[N?s.jsx(Ml,{size:"small",color:"white",className:"mr-2"}):null,N?"Subiendo imagen...":d?"Actualizar":"Crear Categora"]})]})]})]})})}),s.jsx(sn,{children:m&&s.jsx(Q.div,{className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center p-4",style:{backgroundColor:"#000000",zIndex:9999},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsx(Q.div,{className:"rounded-4 shadow-lg w-100",style:{backgroundColor:t?"#1f2937":"#ffffff",border:`2px solid ${t?"#ef4444":"#dc2626"}`,maxWidth:"400px"},initial:{scale:.9},animate:{scale:1},exit:{scale:.9},children:s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center rounded-circle mx-auto mb-4",style:{width:"60px",height:"60px",backgroundColor:t?"#dc2626":"#fee2e2",color:t?"#ffffff":"#dc2626"},children:s.jsx("span",{className:"fs-2 fw-bold",children:""})}),s.jsx("h3",{className:"h5 fw-bold text-center mb-3",style:{color:t?"#f9fafb":"#111827"},children:"Confirmar Eliminacin"}),s.jsxs("p",{className:"text-center mb-4",style:{color:t?"#d1d5db":"#6b7280"},children:['Ests seguro de que deseas eliminar la categora "',h==null?void 0:h.nombre,'"? Esta accin no se puede deshacer y puede afectar los productos asociados.']}),s.jsxs("div",{className:"d-flex gap-3",children:[s.jsx("button",{onClick:()=>{g(!1),y(null)},className:"btn flex-fill",style:{backgroundColor:t?"#374151":"#f3f4f6",borderColor:t?"#4b5563":"#d1d5db",color:t?"#f9fafb":"#374151"},children:"Cancelar"}),s.jsx("button",{onClick:U,className:"btn flex-fill",style:{backgroundColor:"#dc2626",borderColor:"#dc2626",color:"#ffffff"},children:"Eliminar"})]})]})})})})]})},U_=({onEditProduct:t,onViewUsers:e,onViewOrders:n,onViewProducts:r,onViewCategories:i})=>{const[a,l]=b.useState({productos:0,categorias:0,usuarios:0,pedidos:0}),[d,u]=b.useState([]),[m,g]=b.useState(!0);return b.useEffect(()=>{const h=_n(Ot(pt(oe,"productos")),D=>{const A=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),L=D.docs.filter(I=>!A.includes(I.id)).length;l(I=>({...I,productos:L}))},D=>{}),y=_n(Ot(pt(oe,"usuarios")),D=>{l(A=>({...A,usuarios:D.size}))},D=>{}),w=_n(Ot(pt(oe,"categorias")),D=>{l(A=>({...A,categorias:D.size}))},D=>{}),S=_n(Ot(pt(oe,"pedidos")),D=>{l(A=>({...A,pedidos:D.size}))},D=>{}),_=(()=>{try{const D=Ot(pt(oe,"productos"),ni("fechaCreacion","desc"),jl(5));return _n(D,L=>{const I=JSON.parse(localStorage.getItem("phantomProducts")||"[]"),F=L.docs.filter(R=>R.exists()&&!I.includes(R.id)).map(R=>({id:R.id,...R.data()}));u(F),g(!1)},L=>{g(!1)})}catch{g(!1)}})();return()=>{h&&h(),y&&y(),w&&w(),S&&S(),_&&_()}},[]),s.jsxs("div",{className:"w-full space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-900",children:"Dashboard"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Bienvenido al panel de administracin"})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-4",children:[s.jsx(gg,{title:"Productos",count:a.productos,icon:s.jsx(tm,{className:"text-blue-500",size:24}),onClick:r}),s.jsx(gg,{title:"Categoras",count:a.categorias,icon:s.jsx(pq,{className:"text-green-500",size:24}),onClick:i}),s.jsx(gg,{title:"Usuarios",count:a.usuarios,icon:s.jsx(Bg,{className:"text-purple-500",size:24}),onClick:e}),s.jsx(gg,{title:"Pedidos",count:a.pedidos,icon:s.jsx(cT,{className:"text-orange-500",size:24}),onClick:n})]}),s.jsxs("div",{className:"w-full bg-white p-6 rounded-lg shadow-sm border",children:[s.jsx("div",{className:"flex justify-between items-center mb-4",children:s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Productos Recientes"})}),m?s.jsx("div",{className:"flex justify-center items-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):d.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(h=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"flex-shrink-0 h-10 w-10 relative",children:[(()=>{try{const y=h.imagen||(Array.isArray(h.imagenes)&&h.imagenes.length>0?h.imagenes[0]:null)||(Array.isArray(h.variantes)&&h.variantes.length>0&&h.variantes[0].imagen?h.variantes[0].imagen:null)||(Array.isArray(h.media)&&h.media.length>0?h.media[0].url:null)||(Array.isArray(h.variantes)&&h.variantes.length>0&&Array.isArray(h.variantes[0].media)&&h.variantes[0].media.length>0?h.variantes[0].media[0].url:null);return y?s.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:y,alt:"",onError:w=>{w.target.style.display="none",w.target.nextSibling.style.display="flex"}}):s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",children:"N/A"})}catch{return s.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-500 text-xs",children:"Error"})}})(),s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs",style:{display:"none"},children:"N/A"})]}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.nombre||"Sin nombre"}),s.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",h.id.substring(0,8),"..."]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(h.precio||0)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${h.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.activo?"Activo":"Inactivo"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[s.jsx("button",{onClick:()=>t&&t(h),className:"text-blue-600 hover:text-blue-900 mr-4 font-medium cursor-pointer",children:"Editar"}),s.jsx(Yt,{to:`/producto/${h.id}`,className:"text-green-600 hover:text-green-900",target:"_blank",rel:"noopener noreferrer",children:"Ver"})]})]},h.id))})]})}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No hay productos recientes"})}),s.jsx("div",{className:"mt-4 text-right",children:s.jsx("button",{onClick:r,className:"text-blue-600 hover:text-blue-800 text-sm font-medium cursor-pointer",children:"Ver todos los productos "})})]})]})},gg=({title:t,count:e,icon:n,onClick:r})=>s.jsx(Q.div,{whileHover:{y:-5,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},className:"bg-white p-6 rounded-lg shadow-sm border transition-all cursor-pointer",onClick:r,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e})]}),s.jsx("div",{children:n})]})}),B_=fx();function Sq(){const{usuarioInfo:t}=er(),[e,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState("pendiente"),[d,u]=b.useState(null),[m,g]=b.useState(!1),[h,y]=b.useState(null),w=(t==null?void 0:t.email)==="arisleidy0712@gmail.com";b.useEffect(()=>{if(!w)return;const A=pt(oe,"solicitudes_vendedor"),L=Ot(A,ni("fechaSolicitud","desc")),I=_n(L,F=>{const R=F.docs.map(E=>({id:E.id,...E.data()}));n(R),i(!1)});return()=>I()},[w]);const S=async A=>{u(A.id);try{if(!A.userId){y(A),g(!0),u(null);return}const L={nombre:A.tiendaNombre,descripcion:A.tiendaDescripcion||"",eslogan:A.tiendaEslogan||"",logo:A.tiendaLogo||"",banner:A.tiendaBanner||"",telefono:A.tiendaTelefono||"",direccion:A.tiendaDireccion||"",ownerUid:A.userId,ownerEmail:A.email,ownerName:A.nombreContacto,createdAt:new Date,activa:!0,stats:{productos:0,ventas:0,calificacion:5}},I=await Yc(pt(oe,"stores"),L);A.userId&&await Cn(We(oe,"users",A.userId),{role:"seller",isSeller:!0,storeId:I.id,storeName:L.nombre||L.name||""},{merge:!0}),await jn(We(oe,"solicitudes_vendedor",A.id),{estado:"aprobada",revisadoPor:t.email,fechaRevision:new Date,storeId:I.id}),console.log(" Solicitud marcada como aprobada"),console.log(" Paso 4/4: Enviando email con Resend...");try{await Na(B_,"sendStoreApprovedEmail")({email:A.email,nombreContacto:A.nombreContacto,tiendaNombre:A.tiendaNombre,storeId:I.id}),console.log(" Email de aprobacin enviado exitosamente")}catch(R){console.error(" Error al enviar email (no crtico):",R)}if(A.userId)try{await Kb.sellerApproved(A.userId,A.tiendaNombre,I.id),console.log(" Notificacin in-app creada")}catch(R){console.error(" Error al crear notificacin:",R)}const F=A.userId?` Tienda "${A.tiendaNombre}" aprobada exitosamente!

 El vendedor ahora puede:
 Ver su tienda en /tiendas
 Acceder a su panel en /admin
 Subir productos

 Email enviado a: ${A.email}
 Notificacin enviada`:` Tienda "${A.tiendaNombre}" CREADA!

 NOTA: El solicitante NO estaba logueado.

 La tienda es visible en /tiendas
 Pero debes vincular manualmente al usuario

 Email enviado a: ${A.email}`;Vt(F,"success","Solicitud aprobada")}catch(L){Vt(`Error al aprobar la solicitud: ${L.message}`,"error","Error")}finally{u(null)}},N=async(A,L="")=>{const I=L||prompt("Motivo del rechazo (opcional):");u(A.id);try{await jn(We(oe,"solicitudes_vendedor",A.id),{estado:"rechazada",revisadoPor:t.email,fechaRevision:new Date,notasAdmin:I||"Rechazada sin motivo especificado"}),console.log(" Enviando email de rechazo con Resend...");try{await Na(B_,"sendStoreRejectedEmail")({email:A.email,nombreContacto:A.nombreContacto,tiendaNombre:A.tiendaNombre,motivo:I||""}),console.log(" Email de rechazo enviado exitosamente")}catch(F){console.error(" Error al enviar email (no crtico):",F)}if(A.userId)try{await Kb.sellerRejected(A.userId,A.tiendaNombre,I),console.log(" Notificacin in-app creada")}catch(F){console.error(" Error al crear notificacin:",F)}Vt(`Solicitud rechazada.
 Email enviado a: ${A.email}`,"info","Solicitud procesada")}catch{Vt("Hubo un error al rechazar la solicitud.","error","Error")}finally{u(null)}};if(!w)return s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-red-600 font-semibold",children:" Acceso denegado. Solo el super admin puede ver las solicitudes."})});if(r)return s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});const _=e.filter(A=>a==="todas"?!0:A.estado===a),D={pendientes:e.filter(A=>A.estado==="pendiente").length,aprobadas:e.filter(A=>A.estado==="aprobada").length,rechazadas:e.filter(A=>A.estado==="rechazada").length};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Solicitudes de Vendedor"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Aprueba o rechaza las solicitudes para vender en Playcenter"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx($h,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:D.pendientes}),s.jsx("p",{className:"text-sm text-yellow-700",children:"Pendientes"})]})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ll,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-900",children:D.aprobadas}),s.jsx("p",{className:"text-sm text-green-700",children:"Aprobadas"})]})]})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(bh,{className:"w-8 h-8 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-red-900",children:D.rechazadas}),s.jsx("p",{className:"text-sm text-red-700",children:"Rechazadas"})]})]})})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:[{valor:"pendiente",label:"Pendientes",color:"yellow"},{valor:"aprobada",label:"Aprobadas",color:"green"},{valor:"rechazada",label:"Rechazadas",color:"red"},{valor:"todas",label:"Todas",color:"gray"}].map(A=>s.jsx("button",{onClick:()=>l(A.valor),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${a===A.valor?`bg-${A.color}-600 text-white`:`bg-${A.color}-100 text-${A.color}-700 hover:bg-${A.color}-200`}`,children:A.label},A.valor))}),s.jsx("div",{className:"space-y-4",children:_.length===0?s.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-gray-500",children:["No hay solicitudes ",a!=="todas"&&a]})}):_.map(A=>{var L,I;return s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-xl shadow-sm border-2 p-6 ${A.estado==="pendiente"?"border-yellow-300":A.estado==="aprobada"?"border-green-300":"border-red-300"}`,children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"flex gap-4",children:[A.tiendaLogo&&s.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden border-2 border-gray-200 flex-shrink-0",children:s.jsx("img",{src:A.tiendaLogo,alt:"Logo",className:"w-full h-full object-cover"})}),A.tiendaBanner&&s.jsx("div",{className:"w-48 h-24 rounded-lg overflow-hidden border-2 border-gray-200 flex-shrink-0",children:s.jsx("img",{src:A.tiendaBanner,alt:"Banner",className:"w-full h-full object-cover"})})]}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(xr,{className:"w-5 h-5 text-blue-600"}),A.tiendaNombre]}),A.tiendaEslogan&&s.jsxs("p",{className:"text-sm text-gray-600 italic mt-1",children:['"',A.tiendaEslogan,'"']})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${A.estado==="pendiente"?"bg-yellow-100 text-yellow-800":A.estado==="aprobada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.estado==="pendiente"?" Pendiente":A.estado==="aprobada"?" Aprobada":" Rechazada"})]}),A.tiendaDescripcion&&s.jsx("p",{className:"text-gray-700",children:A.tiendaDescripcion}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(tu,{className:"w-4 h-4"}),s.jsx("span",{children:A.nombreContacto})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(Zf,{className:"w-4 h-4"}),s.jsx("span",{children:A.email})]}),A.tiendaTelefono&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(hw,{className:"w-4 h-4"}),s.jsx("span",{children:A.tiendaTelefono})]}),A.tiendaDireccion&&s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(Uh,{className:"w-4 h-4"}),s.jsx("span",{children:A.tiendaDireccion})]}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx(O6,{className:"w-4 h-4"}),s.jsx("span",{children:(L=A.fechaSolicitud)!=null&&L.toDate?A.fechaSolicitud.toDate().toLocaleDateString():"N/A"})]})]}),A.estado==="pendiente"&&s.jsxs("div",{className:"flex gap-3 pt-3",children:[s.jsx("button",{onClick:()=>S(A),disabled:d===A.id,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d===A.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Procesando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ll,{className:"w-4 h-4"}),"Aprobar"]})}),s.jsxs("button",{onClick:()=>N(A),disabled:d===A.id,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(bh,{className:"w-4 h-4"}),"Rechazar"]})]}),A.estado!=="pendiente"&&s.jsxs("div",{className:"pt-3 border-t text-sm text-gray-600",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Revisado por:"})," ",A.revisadoPor]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Fecha:"})," ",(I=A.fechaRevision)!=null&&I.toDate?A.fechaRevision.toDate().toLocaleString():"N/A"]}),A.notasAdmin&&s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{children:"Notas:"})," ",A.notasAdmin]})]})]})]})},A.id)})})]})}function Cq(){const{usuarioInfo:t}=er(),[e,n]=b.useState([]),[r,i]=b.useState(!0),[a,l]=b.useState(""),[d,u]=b.useState(null),[m,g]=b.useState(null),[h,y]=b.useState(!1),w=(t==null?void 0:t.email)==="arisleidy0712@gmail.com";b.useEffect(()=>{if(!w)return;(async()=>{try{const R=(await rn(pt(oe,"tiendas"))).docs.map(j=>({id:j.id,...j.data(),coleccion:"tiendas",principal:j.id==="playcenter_universal",activa:j.data().estado==="activa"})),M=(await rn(pt(oe,"stores"))).docs.map(j=>({id:j.id,...j.data(),coleccion:"stores",principal:!1})),O=[...R,...M];O.sort((j,U)=>{var K,X,ne,we;if(j.principal&&!U.principal)return-1;if(!j.principal&&U.principal)return 1;const H=((X=(K=j.createdAt)==null?void 0:K.toDate)==null?void 0:X.call(K))||new Date(0);return(((we=(ne=U.createdAt)==null?void 0:ne.toDate)==null?void 0:we.call(ne))||new Date(0))-H}),n(O),i(!1)}catch{i(!1)}})()},[w]);const S=I=>{if(I.id==="playcenter_universal"){Vt("No puedes eliminar la tienda principal de Playcenter Universal","error","Accin no permitida");return}g(I),y(!0)},N=()=>{y(!1),g(null)},_=async()=>{if(!m)return;const I=m;y(!1),u(I.id);try{const F=I.coleccion||"stores";if(await co(We(oe,F,I.id)),I.ownerUid)try{await jn(We(oe,"users",I.ownerUid),{role:"user",isSeller:!1,storeId:null,storeName:null})}catch{}Vt(`Tienda "${I.nombre}" eliminada correctamente`,"success","Tienda eliminada"),(async()=>{const M=(await rn(pt(oe,"tiendas"))).docs.map(H=>({id:H.id,...H.data(),coleccion:"tiendas",principal:H.id==="playcenter_universal",activa:H.data().estado==="activa"})),j=(await rn(pt(oe,"stores"))).docs.map(H=>({id:H.id,...H.data(),coleccion:"stores",principal:!1})),U=[...M,...j];U.sort((H,V)=>{var ne,we,Z,le;if(H.principal&&!V.principal)return-1;if(!H.principal&&V.principal)return 1;const K=((we=(ne=H.createdAt)==null?void 0:ne.toDate)==null?void 0:we.call(ne))||new Date(0);return(((le=(Z=V.createdAt)==null?void 0:Z.toDate)==null?void 0:le.call(Z))||new Date(0))-K}),n(U)})()}catch{Vt("Error al eliminar la tienda. Intenta de nuevo.","error","Error")}finally{u(null),g(null)}},D=async I=>{try{(I.coleccion||"stores")==="tiendas"?await jn(We(oe,"tiendas",I.id),{estado:I.activa?"inactiva":"activa"}):await jn(We(oe,"stores",I.id),{activa:!I.activa}),Vt(`Tienda "${I.nombre}" ${I.activa?"desactivada":"activada"}`,"success","Estado actualizado")}catch{Vt("Error al cambiar el estado de la tienda.","error","Error")}},A=async()=>{Vt("Para crear una nueva tienda de vendedor: 1) El usuario debe ir a /solicitar-vender 2) Llenar el formulario de solicitud 3) T aprobars la solicitud desde la pestaa 'Solicitudes' 4) La tienda se crear automticamente. Este panel es solo para VER y GESTIONAR las tiendas existentes.","info","Crear tienda")};if(!w)return s.jsx("div",{className:"p-8 text-center",children:s.jsx("p",{className:"text-red-600 font-semibold",children:"Acceso denegado. Solo el super admin puede gestionar tiendas."})});if(r)return s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});const L=e.filter(I=>{var F,R,E;return((F=I.nombre)==null?void 0:F.toLowerCase().includes(a.toLowerCase()))||((R=I.ownerEmail)==null?void 0:R.toLowerCase().includes(a.toLowerCase()))||((E=I.ownerName)==null?void 0:E.toLowerCase().includes(a.toLowerCase()))});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestin de Tiendas"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Administra todas las tiendas de la plataforma"})]}),s.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:[s.jsx(Bh,{className:"w-4 h-4"}),"Cmo crear tienda?"]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx(C0,{className:"w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:a,onChange:I=>l(I.target.value),placeholder:"Buscar por nombre, email o dueo...",className:"flex-1 bg-transparent outline-none text-gray-900 dark:text-white"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:e.length}),s.jsx("p",{className:"text-sm text-blue-700",children:"Total de Tiendas"})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-2xl font-bold text-green-900",children:e.filter(I=>I.activa).length}),s.jsx("p",{className:"text-sm text-green-700",children:"Tiendas Activas"})]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-2xl font-bold text-red-900",children:e.filter(I=>!I.activa).length}),s.jsx("p",{className:"text-sm text-red-700",children:"Tiendas Inactivas"})]})]}),s.jsx("div",{className:"space-y-4",children:L.length===0?s.jsxs("div",{className:"text-center py-12 bg-yellow-50 border-2 border-yellow-300 rounded-lg",children:[s.jsx(xr,{className:"w-16 h-16 mx-auto text-yellow-600 mb-4"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:a?"No se encontraron tiendas":"No hay tiendas creadas"}),!a&&s.jsx("p",{className:"text-gray-600 mb-4",children:'Haz clic en "Crear Tienda Principal" para empezar'})]}):L.map(I=>{var F;return s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm border-2 p-6 ${I.principal?"border-yellow-400 bg-yellow-50/50 dark:bg-yellow-900/10":I.activa?"border-green-300":"border-red-300"}`,children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"flex gap-4",children:[I.logo&&s.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden border-2 border-gray-200 flex-shrink-0",children:s.jsx("img",{src:I.logo,alt:"Logo",className:"w-full h-full object-cover"})}),I.banner&&s.jsx("div",{className:"w-40 h-20 rounded-lg overflow-hidden border-2 border-gray-200 flex-shrink-0",children:s.jsx("img",{src:I.banner,alt:"Banner",className:"w-full h-full object-cover"})})]}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[s.jsx(xr,{className:"w-5 h-5 inline mr-2 text-blue-600"}),I.nombre]}),I.principal&&s.jsx("span",{className:"px-2 py-1 bg-yellow-400 text-yellow-900 rounded-full text-xs font-bold",children:" PRINCIPAL"})]}),I.eslogan&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 italic mt-1",children:['"',I.eslogan,'"']})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${I.activa?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.activa?"Activa":"Inactiva"})]}),I.descripcion&&s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm",children:I.descripcion}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Dueo:"})," ",I.ownerName]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Email:"})," ",I.ownerEmail]}),I.telefono&&s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Telfono:"})," ",I.telefono]}),I.direccion&&s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Direccin:"})," ",I.direccion]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Creada:"})," ",(F=I.createdAt)!=null&&F.toDate?I.createdAt.toDate().toLocaleDateString():"N/A"]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"ID:"})," ",s.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:I.id})]})]}),s.jsxs("div",{className:"flex gap-3 pt-3",children:[s.jsx("button",{onClick:()=>D(I),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${I.activa?"bg-orange-600 text-white hover:bg-orange-700":"bg-green-600 text-white hover:bg-green-700"}`,children:I.activa?s.jsxs(s.Fragment,{children:[s.jsx(Xu,{className:"w-4 h-4"}),"Desactivar"]}):s.jsxs(s.Fragment,{children:[s.jsx(Id,{className:"w-4 h-4"}),"Activar"]})}),s.jsxs("a",{href:`/tiendas/${I.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:[s.jsx(Id,{className:"w-4 h-4"}),"Ver Tienda"]}),!I.principal&&s.jsx("button",{onClick:()=>S(I),disabled:d===I.id,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d===I.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Eliminando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(wh,{className:"w-4 h-4"}),"Eliminar"]})})]}),I.principal&&s.jsxs("div",{className:"flex items-start gap-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 rounded-lg p-3 mt-2",children:[s.jsx(Em,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[s.jsx("strong",{children:"Tienda Principal:"})," Esta es la tienda oficial de Playcenter. No se puede eliminar."]})]})]})]})},I.id)})}),s.jsx(sn,{children:h&&m&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:N,children:s.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6",onClick:I=>I.stopPropagation(),children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:s.jsx(Em,{className:"w-8 h-8 text-red-600"})})}),s.jsx("h3",{className:"text-xl font-bold text-center text-gray-900 dark:text-white mb-2",children:"Eliminar tienda?"}),s.jsxs("p",{className:"text-center text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4",children:['"',m.nombre,'"']}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium mb-2",children:"Esto tambin:"}),s.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1",children:[s.jsx("li",{children:" Eliminar la tienda de la vista pblica"}),s.jsx("li",{children:" El usuario perder acceso de vendedor"}),s.jsx("li",{children:" Los productos NO se eliminarn (puedes hacerlo manual)"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:N,className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:_,disabled:d===(m==null?void 0:m.id),className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d===(m==null?void 0:m.id)?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Eliminando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(wh,{className:"w-4 h-4"}),"S, eliminar"]})})]})]})})})]})}const Eq=/\/(Productos|productospcu)\//i;function Wc(t){return typeof t=="string"&&t.startsWith("/")&&Eq.test(t)}function Tq(t=""){try{const e=t.indexOf("?"),n=e>=0?t.slice(0,e):t,r=n.lastIndexOf("/");return r>=0?n.slice(r+1):n}catch{return String(t||"")}}async function Aq(t){const e=await fetch(t);if(!e.ok)throw new Error(`No se pudo leer ${t} (${e.status})`);return await e.blob()}async function W_(t,e){const n=await Aq(e),r=Tq(e)||`file-${Date.now()}`,i=`productos/${t}/${Date.now()}-${r}`,a=so(io,i);return await Oh(a,n,{contentType:n.type||void 0}),await zc(a)}function H_(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t||null))}}async function e1(t,e){if(!e)return e;if(typeof e=="string")return Wc(e)?await W_(t,e):e;if(typeof e=="object"){if(e.url&&Wc(e.url)){const n=await W_(t,e.url);return{...e,url:n}}return e}return e}async function to(t,e){const n=Array.isArray(e)?e:[],r=[];for(const i of n)r.push(await e1(t,i));return r}function Gr(t){return(Array.isArray(t)?t:[]).some(e=>typeof e=="string"?Wc(e):e&&typeof e=="object"?Wc(e.url):!1)}function Pq(t){if(!t)return!1;if(Wc(t.imagen)||Gr(t.imagenPrincipal)||Gr(t.imagenes)||Gr(t.media)||Gr(t.galeriaImagenes)||Gr(t.imagenesExtra)||Gr(t.tresArchivosExtras)||Gr(t.videoAcercaArticulo))return!0;if(Array.isArray(t.variantes)){for(const e of t.variantes)if(e&&(Wc(e.imagen)||Gr(e.imagenPrincipal)||Gr(e.imagenes)||Gr(e.media)||Gr(e.galeriaImagenes)))return!0}return!1}async function Iq(t){const n=(await rn(pt(oe,"productos"))).docs.map(a=>({id:a.id,data:a.data()}));let r=0,i=n.length;for(let a=0;a<n.length;a++){const{id:l,data:d}=n[a];if(!Pq(d))continue;const u=H_({});if(Wc(d.imagen)&&(u.imagen=await e1(l,d.imagen)),Gr(d.imagenPrincipal)&&(u.imagenPrincipal=await to(l,d.imagenPrincipal)),Gr(d.imagenes)&&(u.imagenes=await to(l,d.imagenes)),Gr(d.media)&&(u.media=await to(l,d.media)),Gr(d.galeriaImagenes)&&(u.galeriaImagenes=await to(l,d.galeriaImagenes)),Gr(d.imagenesExtra)&&(u.imagenesExtra=await to(l,d.imagenesExtra)),Gr(d.tresArchivosExtras)&&(u.tresArchivosExtras=await to(l,d.tresArchivosExtras)),Gr(d.videoAcercaArticulo)&&(u.videoAcercaArticulo=await to(l,d.videoAcercaArticulo)),Array.isArray(d.variantes)){const m=[];for(const g of d.variantes){const h=H_(g)||{};Wc(h.imagen)&&(h.imagen=await e1(l,h.imagen)),Gr(h.imagenPrincipal)&&(h.imagenPrincipal=await to(l,h.imagenPrincipal)),Gr(h.imagenes)&&(h.imagenes=await to(l,h.imagenes)),Gr(h.media)&&(h.media=await to(l,h.media)),Gr(h.galeriaImagenes)&&(h.galeriaImagenes=await to(l,h.galeriaImagenes)),m.push(h)}u.variantes=m}u.fechaActualizacion=new Date,await Cn(We(oe,"productos",l),u,{merge:!0}),r++}return{migratedCount:r,total:i}}const Nv="text-blue-900",Rq="bg-blue-800";function Lq(t=""){var n,r;if(!t)return"US";const e=t.trim().split(" ");return((((n=e[0])==null?void 0:n[0])||"")+(((r=e[1])==null?void 0:r[0])||"")).toUpperCase()}function q_(t=""){if(!t)return null;typeof t!="string"&&(t=String(t));const e=t.match(/(https?:\/\/[^\s]+)/i);if(e)return e[1];const n=t.match(/(?:^|\s)(maps\.app\.[^\s]+|goo\.gl\/[^\s]+|(?:www\.)?google\.com\/maps[^\s]*)/i);if(n){const i=n[1]||n[0];return i.startsWith("http")?i:`https://${i}`}const r=t.match(/(-?\d{1,2}\.\d+)\s*,\s*(-?\d{1,3}\.\d+)/);if(r){const i=parseFloat(r[1]),a=parseFloat(r[2]);if(!isNaN(i)&&!isNaN(a)&&Math.abs(i)<=90&&Math.abs(a)<=180)return`https://www.google.com/maps?q=${i},${a}`}return null}function t1(t){if(!t)return null;if(typeof t=="object"&&t.seconds)return new Date(t.seconds*1e3).toLocaleString();const e=new Date(t);return isNaN(e.getTime())?String(t):e.toLocaleString()}function Mq({usuario:t,onClose:e}){const[n,r]=b.useState([]),[i,a]=b.useState(!0),[l,d]=b.useState(t),[u,m]=b.useState(null),g=b.useRef(!1);b.useEffect(()=>{if(!(t!=null&&t.id))return;const w=_n(We(oe,"users",t.id),N=>{N.exists()&&d(_=>({..._,...N.data()}))}),S=_n(We(oe,"usuarios",t.id),N=>{N.exists()&&d(_=>({..._,...N.data()}))});return()=>{w(),S()}},[t==null?void 0:t.id]),b.useEffect(()=>{if(!t)return;const w=Ot(pt(oe,"orders")),S=_n(w,N=>{const _=N.docs.map(D=>({id:D.id,...D.data()})).filter(D=>String(D.userId)===String(t.id));r(_.sort((D,A)=>{var F,R;const L=((F=D.fecha)==null?void 0:F.seconds)||0;return(((R=A.fecha)==null?void 0:R.seconds)||0)-L})),a(!1)},()=>{r([]),a(!1)});return()=>S()},[t]),b.useEffect(()=>{!t||!(l!=null&&l.admin)||g.current||(g.current=!0,(async()=>{try{await Iq(()=>{})}catch{}})())},[t]),b.useEffect(()=>{const w=S=>{S.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[e]);const h=(l==null?void 0:l.direccion)||(l==null?void 0:l.direccionCompleta)||"",y=q_(l==null?void 0:l.ubicacion)||q_(h);return s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e,"aria-hidden":"true"}),s.jsxs("div",{role:"dialog","aria-modal":"true",className:"fixed top-0 left-0 w-full h-full max-h-none !rounded-none !shadow-none bg-white overflow-y-auto flex flex-col",style:{zIndex:1e4},onClick:w=>w.stopPropagation(),children:[s.jsxs("header",{className:`flex justify-between items-center px-6 py-4 shadow ${Rq}`,children:[s.jsxs("div",{className:"admin-user-header",children:[s.jsx("div",{className:"admin-user-avatar",children:Lq((l==null?void 0:l.displayName)||(l==null?void 0:l.nombre))}),s.jsxs("div",{className:"admin-user-info",children:[s.jsx("h2",{className:"admin-user-name",children:(l==null?void 0:l.displayName)||(l==null?void 0:l.nombre)||"Usuario"}),s.jsx("p",{className:"admin-user-email",children:l==null?void 0:l.email}),s.jsx("div",{className:"admin-user-badges",children:s.jsx("span",{className:l!=null&&l.admin?"badge-admin":"badge-user",children:l!=null&&l.admin?"Admin":"Usuario"})})]})]}),s.jsx("button",{onClick:e,"aria-label":"Cerrar",className:"admin-close-btn",children:""})]}),s.jsxs("div",{className:"flex-1 px-2 sm:px-8 py-4 sm:py-8 space-y-7 bg-gray-50",children:[s.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:s.jsx(vq,{})}),s.jsx("h3",{className:`text-xl font-bold ${Nv}`,children:"Informacin Personal"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[s.jsx(Vu,{label:"Nombre Completo",value:l.displayName||"No especificado"}),s.jsx(Vu,{label:"Email",value:l.email||"No especificado"}),s.jsx(Vu,{label:"Telfono",value:l.telefono||"No especificado"}),s.jsx(Vu,{label:"Cdigo de Usuario",value:l.codigo||"No asignado"}),s.jsx(Vu,{label:"Mtodo de Entrega",value:l.metodoEntrega||"No especificado"}),s.jsx(Vu,{label:"Fecha de Registro",value:l.createdAt?t1(l.createdAt):"No disponible"})]})]}),s.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:s.jsx(kv,{})}),s.jsx("h3",{className:`text-xl font-bold ${Nv}`,children:"Direccin y Ubicacin"})]}),s.jsx("p",{className:"text-base text-blue-900 mb-4",children:y?s.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 underline inline-flex items-center gap-2",title:"Abrir ubicacin en Google Maps",children:[s.jsx(kv,{})," ",h||"Abrir en Google Maps"]}):h||"No se ha registrado direccin"}),y&&s.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors",children:[s.jsx(kv,{})," Ver en Google Maps"]})]}),s.jsxs("section",{className:"bg-white rounded-xl border shadow p-4 sm:p-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-700",children:s.jsx(nm,{})}),s.jsx("h3",{className:`text-xl font-bold ${Nv}`,children:"Historial de Compras"}),s.jsxs("span",{className:"bg-blue-100 text-blue-900 px-3 py-1 rounded-full text-sm font-bold",children:[n.length," ",n.length===1?"compra":"compras"]})]}),i?s.jsx("div",{className:"flex items-center justify-center py-12 bg-gradient-to-br from-blue-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ml,{size:"large",color:"blue",variant:"dots"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base font-semibold mt-4",children:"Cargando compras..."})]})}):n.length===0?s.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-xl",children:[s.jsx("div",{className:"text-6xl mb-4 text-blue-700 flex items-center justify-center",children:s.jsx(nm,{})}),s.jsx("p",{className:"text-xl text-blue-700 font-medium",children:"No hay compras registradas"})]}):s.jsx("div",{className:"admin-orders-grid",children:n.map(w=>{var S,N;return s.jsxs("div",{className:"admin-order-card",children:[s.jsxs("div",{className:"admin-order-header",children:[s.jsxs("div",{className:"order-info",children:[s.jsx("h4",{className:"order-number",children:w.numeroOrden||`#${w.id.slice(-8)}`}),s.jsx("p",{className:"order-date",children:t1(w.fecha)})]}),s.jsxs("div",{className:"order-status-price",children:[s.jsx("span",{className:`admin-status-badge ${w.estado||"pendiente"}`,children:w.estado==="completado"?" Completado":w.estado==="cancelado"?" Cancelado":" Pendiente"}),s.jsx("div",{className:"order-total",children:new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(w.total||0)})]})]}),s.jsx("div",{className:"admin-order-customer",children:s.jsxs("div",{className:"customer-info",children:[s.jsx("span",{className:"customer-name",children:w.userName||"Usuario"}),s.jsx("span",{className:"customer-email",children:w.userEmail})]})}),s.jsxs("div",{className:"admin-products-preview",children:[(S=w.productos)==null?void 0:S.slice(0,3).map((_,D)=>s.jsx("div",{className:"admin-product-item",children:s.jsxs("div",{className:"admin-product-info",children:[s.jsx("span",{className:"product-name",children:_.nombre}),s.jsxs("span",{className:"product-quantity",children:["Cantidad: ",_.cantidad," "," ",new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(_.precio)]}),s.jsx("button",{className:"btn-view-product",onClick:A=>{A.stopPropagation(),window.location.href=`/producto/${_.id}`},title:"Ver producto",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(wx,{})," Ver producto"]})})]})},D)),((N=w.productos)==null?void 0:N.length)>3&&s.jsxs("div",{className:"more-products-admin",children:["+",w.productos.length-3," ms productos"]})]}),s.jsxs("div",{className:"admin-order-actions",children:[s.jsx("button",{className:"btn-admin btn-view",onClick:()=>m(w),children:"Ver detalles"}),w.metodoPago&&s.jsx("span",{className:"payment-method",children:w.metodoPago})]})]},w.id)})})]})]}),s.jsx(sn,{children:u&&s.jsx(uT,{order:u,onClose:()=>m(null)})})]})]})}function Vu({label:t,value:e}){return s.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[s.jsx("p",{className:"font-semibold text-blue-700 text-xs mb-1",children:t}),s.jsx("p",{className:"text-base font-medium text-blue-900 break-all",children:e})]})}function Dq(){var A,L,I;const{usuario:t,usuarioInfo:e}=er(),{tienda:n}=pw(),[r,i]=b.useState(!1),[a,l]=b.useState(null),[d,u]=b.useState("dashboard"),[m,g]=b.useState({productos:0,pedidos:0,ventas:0}),[h,y]=b.useState([]),[w,S]=b.useState(null),N=(e==null?void 0:e.storeId)||(n==null?void 0:n.id),_=(e==null?void 0:e.storeName)||(n==null?void 0:n.nombre)||(n==null?void 0:n.name)||"Mi Tienda";b.useEffect(()=>{if(!N)return;const F=_n(Ot(pt(oe,"productos"),qt("storeId","==",N)),E=>{g(M=>({...M,productos:E.size}))}),R=_n(Ot(pt(oe,"orders")),E=>{const O=E.docs.map(j=>({id:j.id,...j.data()})).filter(j=>{var U;return(U=j.items)==null?void 0:U.some(H=>H.storeId===N)});y(O),g(j=>({...j,pedidos:O.length,ventas:O.reduce((U,H)=>U+(H.total||0),0)}))});return()=>{F(),R()}},[N]);const D=[{id:"dashboard",label:"Dashboard",icon:gq},{id:"products",label:"Productos",icon:tm},{id:"orders",label:"Pedidos",icon:nm}];return s.jsx("main",{className:"admin-page min-h-screen bg-gray-50 dark:bg-gray-900 px-2 sm:px-6 pt-2 pb-2 sm:pb-6",children:s.jsxs("div",{className:"w-full px-2",children:[s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2 text-gray-900 dark:text-white",children:"Panel del Vendedor"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-gray-700 dark:text-gray-300 font-medium",children:_}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-3",children:[s.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-300 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2",children:[s.jsx(tm,{})," ",m.productos," ",m.productos===1?"producto":"productos"]}),s.jsxs("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-900 dark:text-green-300 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2",children:[s.jsx(nm,{})," ",m.pedidos," ",m.pedidos===1?"pedido":"pedidos"]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-1 mb-4 border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:D.map(F=>s.jsx("button",{onClick:()=>u(F.id),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-medium transition-all duration-200 ${d===F.id?"bg-blue-600 dark:bg-blue-500 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:s.jsx(F.icon,{})}),s.jsx("span",{className:"hidden sm:inline",children:F.label})]})},F.id))})}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[d==="dashboard"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Productos"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:m.productos})]}),s.jsx(tm,{className:"w-12 h-12 text-blue-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pedidos"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:m.pedidos})]}),s.jsx(nm,{className:"w-12 h-12 text-green-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ventas"}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["$",m.ventas.toFixed(2)]})]}),s.jsx(hq,{className:"w-12 h-12 text-yellow-500"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Informacin de tu Tienda"}),s.jsxs("div",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Nombre:"})," ",_]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"ID de Tienda:"})," ",N||"No asignado"]})]})]})]}),d==="products"&&s.jsx("div",{children:s.jsx(dT,{onAddProduct:()=>{l(null),i(!0)},onEditProduct:F=>{l(F),i(!0)}})}),d==="orders"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Pedidos de tu Tienda"}),h.length===0?s.jsx("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg border border-gray-200 dark:border-gray-700 text-center",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No tienes pedidos todava"})}):s.jsx("div",{className:"space-y-4",children:h.map(F=>{var R,E,M;return s.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 cursor-pointer hover:border-blue-500 transition-colors",onClick:()=>S(F),children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Pedido #",F.id.slice(0,8)]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:((R=F.cliente)==null?void 0:R.nombre)||"Cliente"}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(E=F.items)==null?void 0:E.filter(O=>O.storeId===N).length," ","productos"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["$",(M=F.items)==null?void 0:M.filter(O=>O.storeId===N).reduce((O,j)=>O+j.precio*j.cantidad,0).toFixed(2)]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${F.estado==="entregado"?"bg-green-100 text-green-800":F.estado==="en camino"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:F.estado||"Pendiente"})]})]})},F.id)})})]})]},d),r&&s.jsx(oT,{product:a,onClose:()=>{i(!1),l(null)},onSave:()=>{i(!1),l(null)}}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Detalles del Pedido"}),s.jsx("button",{onClick:()=>S(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(bq,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ID del Pedido"}),s.jsx("p",{className:"font-mono text-gray-900 dark:text-white",children:w.id})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cliente"}),s.jsx("p",{className:"text-gray-900 dark:text-white",children:((A=w.cliente)==null?void 0:A.nombre)||"N/A"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:((L=w.cliente)==null?void 0:L.email)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Productos de tu tienda"}),s.jsx("div",{className:"space-y-2",children:(I=w.items)==null?void 0:I.filter(F=>F.storeId===(e==null?void 0:e.storeId)).map((F,R)=>s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:F.nombre}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Cantidad: ",F.cantidad]})]}),s.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["$",(F.precio*F.cantidad).toFixed(2)]})]},R))})]})]})]})})]})})}function Oq(){const{usuario:t,usuarioInfo:e}=er(),[n,r]=b.useState([]),[i,a]=b.useState(""),[l,d]=b.useState(null),[u,m]=b.useState(null),[g,h]=b.useState("dashboard"),[y,w]=b.useState(!1),[S,N]=b.useState(null),[_,D]=b.useState(!1),[A,L]=b.useState(null),[I,F]=b.useState(0);if(b.useRef(!1),b.useEffect(()=>{if((e==null?void 0:e.email)!=="arisleidy0712@gmail.com")return;const j=pt(oe,"solicitudes_vendedor"),U=Ot(j,qt("estado","==","pendiente")),H=_n(U,V=>{F(V.docs.length)});return()=>H()},[e==null?void 0:e.email]),b.useEffect(()=>{if(!t||!(e!=null&&e.isAdmin))return;const j=async(V,K,X)=>{if((K||"").toLowerCase().trim()==="arisleidy0712@gmail.com"&&!X)try{await jn(We(oe,"users",V),{admin:!0,isAdmin:!0});try{await jn(We(oe,"usuarios",V),{admin:!0,isAdmin:!0})}catch{}}catch{}},U=_n(Ot(pt(oe,"users")),V=>{const K=V.docs.map(X=>{const ne=X.data(),Z=(ne.email||"").toLowerCase().trim()==="arisleidy0712@gmail.com";return Z&&!ne.admin&&j(X.id,ne.email,ne.admin),{id:X.id,...ne,admin:Z||ne.admin,isAdmin:Z||ne.isAdmin}});r(X=>{const ne=[...K];return X.forEach(we=>{const Z=ne.findIndex(le=>le.id===we.id);Z>=0&&(ne[Z]={...ne[Z],...we})}),ne})}),H=_n(Ot(pt(oe,"usuarios")),V=>{const K=V.docs.map(X=>{const ne=X.data(),Z=(ne.email||"").toLowerCase().trim()==="arisleidy0712@gmail.com";return Z&&!ne.admin&&j(X.id,ne.email,ne.admin),{id:X.id,...ne,admin:Z||ne.admin,isAdmin:Z||ne.isAdmin}});r(X=>{const ne=[...X];return K.forEach(we=>{const Z=ne.findIndex(le=>le.id===we.id);Z>=0?ne[Z]={...ne[Z],...we}:ne.push(we)}),ne})});return()=>{U(),H()}},[t,e]),!t)return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Inicia sesin"});const R=(e==null?void 0:e.isAdmin)===!0,E=!!(e!=null&&e.isSeller||e!=null&&e.empresa||e!=null&&e.empresaId);if(!R&&E)return s.jsx(Dq,{});if(!R)return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-blue-50",children:"Sin acceso"});const M=n.filter(j=>{const U=i.toLowerCase();return(j.displayName||"").toLowerCase().includes(U)||(j.email||"").toLowerCase().includes(U)||(j.telefono||"").toLowerCase().includes(U)||(j.direccion||"").toLowerCase().includes(U)||(j.codigo||"").toLowerCase().includes(U)}),O=()=>{switch(g){case"dashboard":return s.jsx(U_,{onAddProduct:()=>{N(null),w(!0),h("products")},onEditProduct:j=>{N(j),w(!0)},onOpenCategories:()=>h("categories"),onViewAllProducts:()=>h("products"),onViewAllOrders:()=>h("orders"),onViewProducts:()=>h("products"),onViewCategories:()=>h("categories"),onViewUsers:()=>h("users"),onViewOrders:()=>h("orders")});case"products":return s.jsx(dT,{onAddProduct:()=>{N(null),w(!0)},onEditProduct:j=>{N(j),w(!0)}});case"categories":return s.jsx(_q,{});case"users":return s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Gestin de Usuarios"}),s.jsx("input",{type:"text",value:i,onChange:j=>a(j.target.value),placeholder:"Buscar por nombre, email, telfono, direccin o cdigo",className:"w-full sm:w-80 border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none"})]}),M.length===0?s.jsx("div",{className:"text-gray-600",children:"No hay usuarios que coincidan con la bsqueda."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telfono"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registrado"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(j=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 font-medium",children:j.displayName||j.nombre||"Usuario"}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:j.email||"-"}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:j.telefono||"-"}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:j.codigo||"-"}),s.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:t1(j.createdAt)||"-"}),s.jsx("td",{className:"px-4 py-2 text-sm",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j.admin||j.isAdmin?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:j.admin||j.isAdmin?"Admin":"Usuario"})}),s.jsx("td",{className:"px-4 py-2 text-sm",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:U=>{U.stopPropagation(),d(j)},className:"text-blue-600 hover:text-blue-800 font-medium",title:"Ver detalles",children:s.jsx(wx,{size:18})}),(j.email||"").toLowerCase().trim()==="arisleidy0712@gmail.com"&&!(j.admin||j.isAdmin)&&s.jsx("button",{onClick:async U=>{U.stopPropagation();try{await jn(We(oe,"users",j.id),{admin:!0,isAdmin:!0});try{await jn(We(oe,"usuarios",j.id),{admin:!0,isAdmin:!0})}catch{}Vt(" Ahora eres Admin! Refresca la pgina.","success","Admin asignado")}catch(H){Vt("Error: "+H.message,"error","Error")}},className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs font-bold",title:"Convertir en Admin",children:" ADMIN"}),s.jsx("button",{onClick:U=>{U.stopPropagation(),L(j),D(!0)},className:"text-red-600 hover:text-red-800 font-medium",title:"Eliminar usuario",children:""})]})})]},j.id))})]})})]});case"orders":return s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Gestin de Pedidos"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Aqu aparecern los pedidos filtrados por tienda"}),s.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-500",children:"Funcionalidad de pedidos por tienda - En desarrollo"})})]});case"tiendas":return s.jsx(Cq,{});case"solicitudes":return s.jsx(Sq,{});default:return s.jsx(U_,{})}};return s.jsxs("main",{className:"admin-page min-h-screen bg-gray-50 dark:bg-gray-900 px-2 sm:px-6 pt-2 pb-2 sm:pb-6",children:[s.jsxs("div",{className:"w-full px-2",children:[s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2 text-gray-900 dark:text-white",children:"Panel Administrativo"}),s.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-gray-700 dark:text-gray-300 font-medium",children:"Gestin Completa del Sistema"}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-3",children:[s.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-300 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2",children:[s.jsx(Bg,{})," ",n.length," ",n.length===1?"usuario":"usuarios"," registrados"]}),I>0&&s.jsxs("button",{onClick:()=>h("solicitudes"),className:"bg-red-100 dark:bg-red-900/30 text-red-900 dark:text-red-300 px-4 py-2 rounded-full text-sm font-bold inline-flex items-center gap-2 hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors cursor-pointer border-0",children:[s.jsx($_,{})," ",I," ",I===1?"solicitud pendiente":"solicitudes pendientes"]}),s.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-900 dark:text-green-300 px-4 py-2 rounded-full text-sm font-bold",children:"Sincronizacin en tiempo real"})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-1 mb-4 border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:[{id:"dashboard",label:"Dashboard",icon:s.jsx(oq,{})},{id:"products",label:"Productos",icon:s.jsx(lq,{})},{id:"categories",label:"Categoras",icon:s.jsx(yq,{})},{id:"orders",label:"Pedidos",icon:s.jsx(xq,{})},{id:"users",label:"Usuarios",icon:s.jsx(Bg,{})},...(e==null?void 0:e.email)==="arisleidy0712@gmail.com"?[{id:"tiendas",label:"Tiendas",icon:s.jsx(cT,{})},{id:"solicitudes",label:"Solicitudes",icon:s.jsx($_,{}),badge:I}]:[]].map(j=>s.jsx("button",{onClick:()=>h(j.id),className:`flex-1 min-w-[120px] px-4 py-3 rounded-lg font-medium transition-all duration-200 relative ${g===j.id?"bg-blue-600 dark:bg-blue-500 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:j.icon}),s.jsx("span",{className:"hidden sm:inline",children:j.label}),j.badge>0&&s.jsx("span",{className:"inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold rounded-full",style:{backgroundColor:g===j.id?"#ffffff":"#ef4444",color:g===j.id?"#2563eb":"#ffffff",minWidth:"20px"},children:j.badge>99?"99+":j.badge})]})},j.id))})}),s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:O()},g),l&&s.jsx(Mq,{usuario:l,onClose:()=>d(null)}),y&&s.jsx(oT,{product:S,onClose:()=>{w(!1),N(null)},onSave:()=>{w(!1),N(null)}})]}),s.jsx(sn,{children:u&&s.jsx(uT,{order:u,onClose:()=>m(null)})}),s.jsx(sn,{children:_&&A&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:()=>{D(!1),L(null)},children:s.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6",onClick:j=>j.stopPropagation(),children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:s.jsx(Bg,{className:"w-8 h-8 text-red-600"})})}),s.jsx("h3",{className:"text-xl font-bold text-center text-gray-900 dark:text-white mb-2",children:"Eliminar usuario?"}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"text-center text-lg font-semibold text-gray-700 dark:text-gray-300",children:A.email||A.displayName||"Usuario"}),s.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mt-1",children:["UID: ",A.id]})]}),s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium text-center",children:" Esta accin NO se puede deshacer"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{D(!1),L(null)},className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:async()=>{try{const j=We(oe,"users",A.id);await co(j);try{const U=We(oe,"usuarios",A.id);await co(U)}catch{}Vt("Usuario eliminado exitosamente","success","Eliminado")}catch(j){Vt("Error al eliminar usuario: "+j.message,"error","Error")}finally{D(!1),L(null)}},className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),"S, eliminar"]})]})]})})})]})}function uT({order:t,onClose:e}){var l,d;const n=u=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(u||0),r=u=>{if(!u)return"Fecha no disponible";let m;return typeof u=="object"&&u.seconds?m=new Date(u.seconds*1e3):m=new Date(u),m.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},i=u=>{switch(u){case"completado":return"status-completed";case"cancelado":return"status-cancelled";case"pendiente":return"status-pending";default:return"status-pending"}},a=u=>{switch(u){case"completado":return" Completado";case"cancelado":return" Cancelado";case"pendiente":return" Pendiente";default:return" Pendiente"}};return Ns.useEffect(()=>{const u=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e]),s.jsx(Q.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:s.jsxs(Q.div,{className:"order-details-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:t.numeroOrden||`Orden #${t.id.slice(-8)}`}),s.jsx("p",{className:"order-date-detail",children:r(t.fecha)})]}),s.jsx("button",{className:"close-btn",onClick:e,children:""})]}),s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"order-status-section",children:[s.jsx("span",{className:`status-badge large ${i(t.estado)}`,children:a(t.estado)}),t.estadoPago&&s.jsxs("span",{className:"payment-status",children:["Pago: ",t.estadoPago==="pagado"?" Pagado":" Fallido"]})]}),s.jsxs("div",{className:"order-summary",children:[s.jsx("h3",{children:"Resumen de la orden"}),s.jsxs("div",{className:"summary-row total",children:[s.jsx("span",{children:"Total pagado:"}),s.jsx("span",{children:n(t.total)})]})]}),s.jsxs("div",{className:"products-section",children:[s.jsxs("h3",{children:["Productos (",((l=t.productos)==null?void 0:l.length)||0,")"]}),s.jsx("div",{className:"products-list",children:(d=t.productos)==null?void 0:d.map((u,m)=>s.jsx("div",{className:"product-detail-item",children:s.jsxs("div",{className:"product-detail-info",children:[s.jsx("h4",{children:u.nombre}),s.jsx("p",{className:"product-company",children:u.empresa||"N/A"}),s.jsxs("div",{className:"product-pricing",children:[s.jsxs("span",{className:"quantity",children:["Cantidad: ",u.cantidad]}),s.jsxs("span",{className:"price",children:["Precio unitario: ",n(u.precio)]}),s.jsxs("span",{className:"subtotal",children:["Subtotal:"," ",n(u.subtotal||u.precio*u.cantidad)]})]}),s.jsx("button",{className:"btn-view-product-modal",onClick:()=>window.location.href=`/producto/${u.id}`,title:"Ver producto",children:" Ver producto"})]})},m))})]}),t.direccionEntrega&&s.jsxs("div",{className:"delivery-section",children:[s.jsx("h3",{children:"Informacin de entrega"}),s.jsx("p",{children:t.direccionEntrega}),t.telefonoContacto&&s.jsxs("p",{children:["Telfono: ",t.telefonoContacto]})]}),t.metodoPago&&s.jsxs("div",{className:"payment-section",children:[s.jsx("h3",{children:"Informacin de pago"}),s.jsxs("p",{children:["Mtodo: ",t.metodoPago]})]})]})]})})}const Ao=[{id:1,img:"/ads/1.png",link:"/Productos/consolas",isExternal:!1},{id:6,img:"/ads/2.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0},{id:2,img:"/ads/3.png",link:"/Productos",isExternal:!1},{id:3,img:"/ads/4.png",link:"/Productos/videojuegos",isExternal:!1},{id:5,img:"/ads/5.png",link:"https://playcenterwisp.com",isExternal:!0}];function Vq(){const[t,e]=b.useState(0),n=b.useRef(null),r=6e3,[i,a]=b.useState(!1),l=b.useCallback(()=>{clearTimeout(n.current),!i&&(n.current=setTimeout(()=>{e(S=>(S+1)%Ao.length)},r))},[i]);b.useEffect(()=>(l(),()=>clearTimeout(n.current)),[t,l]),b.useEffect(()=>{const S=N=>{var _;try{const D=!!((_=N==null?void 0:N.detail)!=null&&_.paused);a(D),clearTimeout(n.current),D||(n.current=setTimeout(()=>{e(A=>(A+1)%Ao.length)},r))}catch{}};return window.addEventListener("pcu:main-slider-toggle",S),()=>window.removeEventListener("pcu:main-slider-toggle",S)},[]);const d=()=>{clearTimeout(n.current),e(S=>S===0?Ao.length-1:S-1)},u=()=>{clearTimeout(n.current),e(S=>(S+1)%Ao.length)},m=b.useRef(0),g=b.useRef(0),h=S=>{m.current=S.touches[0].clientX},y=S=>{g.current=S.touches[0].clientX},w=()=>{const S=g.current-m.current;Math.abs(S)>50&&(S>0?d():u())};return s.jsxs("div",{onTouchStart:h,onTouchMove:y,onTouchEnd:w,className:`relative w-full max-w-[1600px] mx-auto overflow-hidden rounded-xl shadow-xl
        h-[140px] sm:h-[180px] md:h-[260px] lg:h-[400px]`,children:[s.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{width:`${Ao.length*100}%`,transform:`translateX(-${t*(100/Ao.length)}%)`},children:Ao.map(S=>S.isExternal?s.jsx("a",{href:S.link,target:"_blank",rel:"noopener noreferrer",className:"w-full h-full flex-shrink-0",style:{width:`${100/Ao.length}%`},children:s.jsx("img",{src:S.img,alt:`Anuncio ${S.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},S.id):s.jsx(Yt,{to:S.link,className:"w-full h-full flex-shrink-0",style:{width:`${100/Ao.length}%`},children:s.jsx("img",{src:S.img,alt:`Anuncio ${S.id}`,loading:"lazy",className:"w-full h-full object-cover object-center transition-transform duration-500 hover:scale-[1.02]"})},S.id))}),s.jsx("button",{onClick:d,style:{all:"unset",position:"absolute",top:"50%",left:"16px",transform:"translateY(-50%)",cursor:"pointer"},children:s.jsx(UU,{size:40,color:"#ffffff",strokeWidth:3})}),s.jsx("button",{onClick:u,style:{all:"unset",position:"absolute",top:"50%",right:"16px",transform:"translateY(-50%)",cursor:"pointer"},children:s.jsx(_a,{size:40,color:"#ffffff",strokeWidth:3})}),s.jsx("div",{style:{position:"absolute",bottom:window.innerWidth<640?"12px":"20px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"10px",zIndex:20,padding:"8px 12px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"20px",backdropFilter:"blur(8px)"},children:Ao.map((S,N)=>s.jsx("button",{onClick:()=>{clearTimeout(n.current),e(N)},"aria-label":`Ir al slide ${N+1}`,style:{width:window.innerWidth<640?"8px":"10px",height:window.innerWidth<640?"8px":"10px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:N===t?1:.6,transform:N===t?"scale(1.3)":"scale(1)",transition:"all 0.3s ease",border:"1px solid #ffffff",cursor:"pointer",outline:"none",boxShadow:N===t?"0 0 8px rgba(255, 255, 255, 0.8), 0 2px 4px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.3)",padding:0},onMouseEnter:_=>{N!==t&&(_.currentTarget.style.opacity="0.9",_.currentTarget.style.transform="scale(1.2)")},onMouseLeave:_=>{N!==t&&(_.currentTarget.style.opacity="0.6",_.currentTarget.style.transform="scale(1)")}},N))})]})}const zq=[{id:1,img:"/ads/movil/aficionados-movil.png",link:"/Productos/coleccionables",isExternal:!1},{id:2,img:"/ads/movil/articulosads.png",link:"/Productos/videojuegos",isExternal:!1},{id:3,img:"/ads/movil/internetads.png",link:"https://playcenterwisp.com",isExternal:!0},{id:4,img:"/ads/movil/camarasads.png",link:"/Productos/camaras",isExternal:!1},{id:5,img:"/ads/movil/consolaads.png",link:"/Productos/consolas",isExternal:!1},{id:7,img:"/ads/movil/productosads.png",link:"/Productos",isExternal:!1},{id:8,img:"/ads/movil/retroads.png",link:"/Productos/retro-juegos",isExternal:!1},{id:9,img:"/ads/movil/nuestras-estafetas.png",link:"/estafetas",isExternal:!1},{id:10,img:"/ads/movil/ubicacionads.png",link:"https://maps.app.goo.gl/ZSXza3ESVeLEPPx78",isExternal:!0}];function Fq(){return s.jsx("div",{className:"block sm:hidden w-full max-w-[100%] mx-auto px-0 py-2",children:s.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide gap-3 px-3",style:{scrollPaddingLeft:"12px",scrollPaddingRight:"12px"},children:zq.map(t=>s.jsx("a",{href:t.link,target:t.isExternal?"_blank":"_self",rel:"noreferrer",className:"flex-shrink-0 w-[300px] h-[420px] rounded-xl overflow-hidden snap-center bg-transparent shadow-none",children:s.jsx("img",{src:t.img,alt:`Anuncio ${t.id}`,className:"w-full h-full object-cover block rounded-xl",draggable:!1})},t.id))})})}const G_=["/animacion/img1.png","/animacion/img2.png","/animacion/img3.png","/animacion/img4.png","/animacion/img5.png","/animacion/img6.png","/animacion/img7.png","/animacion/img8.png","/animacion/img9.png","/animacion/img10.png"],$q=[...G_,...G_.slice(0,5)],Uq=()=>s.jsx("div",{className:"loader",role:"presentation","aria-hidden":"true",children:$q.map((t,e)=>s.jsx("img",{src:t,alt:`Animacin ${e+1}`},e))}),$i={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7}}};Array.from({length:17},(t,e)=>`/animacion/${e+1}.png`);function Bq(){const{productsByCategory:t,categories:e,loading:n,error:r}=vW(),{theme:i,isDark:a}=Ss(),l=Ns.useRef(null);if(Ns.useEffect(()=>{const h=i==="dark"?"/videos/pcu-intro-negro.mp4":"/videos/pcu-intro-blanco.mp4";if(l.current){const y=l.current.querySelector("source");y&&(y.src=h),l.current.load(),l.current.play().catch(w=>{})}},[i]),n)return null;if(r)return s.jsx("div",{style:{backgroundColor:a?"#000000":"#ffffff",minHeight:"100vh"},children:s.jsxs("div",{className:"text-center text-danger",children:[s.jsx("p",{className:"fs-5",children:"Error cargando productos"}),s.jsx("p",{className:"small",children:r})]})});const d=h=>{try{return h?typeof h=="string"?h:typeof h=="object"&&h!==null?h.url||"":String(h||""):""}catch{return""}},u=h=>{var I,F;const y=d((I=h==null?void 0:h.imagenPrincipal)==null?void 0:I[0]);if(y)return y;const w=d(h==null?void 0:h.imagen);if(w)return w;const N=(Array.isArray(h==null?void 0:h.media)?h.media:[]).find(R=>{const E=((R==null?void 0:R.type)||"").toLowerCase();return d(R)&&(!E||E.includes("image")||E==="img"||E==="photo")});if(N)return d(N);const D=(Array.isArray(h==null?void 0:h.galeriaImagenes)?h.galeriaImagenes:[]).find(R=>{const E=((R==null?void 0:R.type)||"").toLowerCase();return d(R)&&(!E||E.includes("image")||E==="img"||E==="photo")});if(D)return d(D);const A=Array.isArray(h==null?void 0:h.imagenes)?h.imagenes:[];if(A.length>0)return d(A[0]);const L=Array.isArray(h==null?void 0:h.variantes)?h.variantes:[];for(const R of L){const E=d((F=R==null?void 0:R.imagenPrincipal)==null?void 0:F[0]);if(E)return E;const M=d(R==null?void 0:R.imagen);if(M)return M;const j=(Array.isArray(R==null?void 0:R.media)?R.media:[]).find(V=>{const K=((V==null?void 0:V.type)||"").toLowerCase();return d(V)&&(!K||K.includes("image")||K==="img"||K==="photo")});if(j)return d(j);const H=(Array.isArray(R==null?void 0:R.galeriaImagenes)?R.galeriaImagenes:[]).find(V=>{const K=((V==null?void 0:V.type)||"").toLowerCase();return d(V)&&(!K||K.includes("image")||K==="img"||K==="photo")});if(H)return d(H)}return""},m=h=>{let y=e.find(N=>((N==null?void 0:N.ruta)||"")===h);if(y)return y;const w=N=>(N||"").toLowerCase().replace(//g,"a").replace(//g,"e").replace(//g,"i").replace(//g,"o").replace(//g,"u").replace(//g,"n").replace(/[^a-z0-9]/g,""),S=w(h);return y=e.find(N=>{const _=w(N.nombre),D=w(N.ruta);return _===S||D===S||_.includes(S)||S.includes(_)}),y},g=h=>{const y=m(h);return y?t[y.id]||[]:[]};return s.jsxs("div",{className:"min-vh-100",style:{backgroundColor:a?"#000000":"#ffffff"},children:[s.jsx(Q.div,{className:"d-block d-sm-none w-100 mx-auto",style:{marginTop:0,marginBottom:0,padding:0},variants:$i,initial:"hidden",animate:"visible",children:s.jsx(Fq,{})}),s.jsx("div",{className:"d-none d-sm-block w-100",style:{marginTop:0,marginBottom:0,padding:0},children:s.jsx("video",{ref:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-100 h-auto",style:{marginTop:0,marginBottom:0,padding:0,display:"block",verticalAlign:"top",objectFit:"cover"},children:s.jsx("source",{src:i==="dark"?"/videos/pcu-intro-negro.mp4":"/videos/pcu-intro-blanco.mp4",type:"video/mp4"})},i)}),s.jsx(Q.div,{className:"d-none d-sm-block w-100 container-fluid px-2 px-sm-4 mt-5",style:{maxWidth:"95%",maxWidthLg:"1600px"},variants:$i,initial:"hidden",animate:"visible",children:s.jsx(Vq,{})}),s.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-16",children:e.slice(0,4).map((h,y)=>{const S=(t[h.id]||[]).slice(0,4);return s.jsxs(Q.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[320px] max-h-[400px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-600",variants:$i,initial:"hidden",animate:"visible",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:h.nombre}),s.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:S.map(N=>{const _=u(N)||"/placeholder-product.svg";return s.jsx(Yt,{to:`/producto/${N.id}`,children:s.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",style:{maxHeight:"120px"},children:s.jsx("img",{src:_,alt:N.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",style:{maxHeight:"110px"},onError:D=>{D.target.onerror=null,D.target.src="/placeholder-product.svg"}})})},N.id)})}),s.jsxs(Yt,{to:`/Productos/${h.ruta}`,className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:["Explora ",h.nombre," "]})]},h.id)})}),s.jsx(Q.div,{className:"d-none d-xl-block container-fluid px-4 mt-5",style:{maxWidth:"1600px"},variants:$i,initial:"hidden",animate:"visible",children:s.jsx(Yt,{to:"/Productos/coleccionables",className:"d-block overflow-hidden rounded-4 shadow-lg hover-shadow text-decoration-none",children:s.jsx("img",{src:"/ads/aficionados.png",alt:"Ver Nuestras colecciones",className:"w-100 h-auto hover-lift",style:{objectFit:"cover"}})})}),s.jsx("section",{className:"container-fluid px-3 px-md-4 mt-4 mt-md-5",style:{maxWidth:"1600px"},children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[{to:"/Productos/retro-consolas",src:"/ads/ads-videos/Retro-consolas.mp4",alt:"Retro Consolas",isVideo:!0},{to:"/Productos/camaras",src:"/ads/camaras.png",alt:"Cmaras",isVideo:!1}].map((h,y)=>s.jsx("div",{children:s.jsx("div",{className:"overflow-hidden rounded-2xl md:rounded-3xl shadow-lg border-2 border-gray-300 dark:border-gray-600",style:{height:"clamp(200px, 40vw, 400px)"},children:s.jsx(Yt,{to:h.to,className:"block w-full h-full",children:h.isVideo?s.jsx("video",{src:h.src,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover rounded-2xl md:rounded-3xl"}):s.jsx("img",{src:h.src,alt:h.alt,className:"w-full h-full object-cover rounded-2xl md:rounded-3xl"})})})},y))})}),s.jsx(Q.section,{className:"container-fluid mt-4 px-3 px-md-4",style:{maxWidth:"1600px"},variants:$i,initial:"hidden",animate:"visible",children:s.jsx("div",{className:"shadow",style:{backgroundColor:a?"#1e293b":"#ffffff",border:a?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"0.5rem",height:"auto",width:"100%"},children:s.jsxs("div",{className:"card-body p-2 p-md-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"h6 fw-bold text-dark dark:text-gray-100 mb-0",style:{fontSize:"clamp(14px, 2vw, 18px)"},children:"Explora nuestras categoras"}),s.jsx(Yt,{to:"/Productos",className:"text-primary dark:text-blue-400 text-decoration-none fw-medium text-xs sm:text-sm",style:{fontSize:"clamp(11px, 2vw, 13px)"},children:"Ver todas "})]}),s.jsx("div",{className:"d-flex flex-nowrap gap-2 gap-md-3 overflow-x-auto pb-1",style:{scrollbarWidth:"thin",scrollbarColor:a?"#475569 #1e293b":"#cbd5e1 #f1f5f9",WebkitOverflowScrolling:"touch",alignItems:"flex-start",minHeight:"unset"},children:[{to:"/Productos/audifonos",src:"/ads/audifonoscate.png",alt:"Audfonos"},{to:"/Productos/mouses",src:"/ads/mousecate.png",alt:"Mouses"},{to:"/Productos/teclados",src:"/ads/tecladocate.png",alt:"Teclados"},{to:"/Productos/camaras",src:"/ads/camaracate.png",alt:"Cmaras"},{to:"/Productos/discos-duros",src:"/ads/discodurocate.png",alt:"Discos Duros"},{to:"/Productos/controles",src:"/ads/controlcate.png",alt:"Controles"}].map((h,y)=>s.jsx(Yt,{to:h.to,className:"text-decoration-none flex-shrink-0",children:s.jsx("div",{className:"rounded-3 overflow-hidden d-flex align-items-center justify-content-center w-[140px] h-[140px] md:w-[180px] md:h-[180px]",style:{backgroundColor:a?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.02)",border:a?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",backdropFilter:"blur(10px)"},children:s.jsx("img",{src:h.src,alt:h.alt,className:"w-100 h-100 object-contain hover-lift"})})},h.alt))})]})})}),s.jsx(Q.div,{className:"d-none d-xl-block container-fluid px-4 mt-5",style:{maxWidth:"1600px"},variants:$i,initial:"hidden",animate:"visible",children:s.jsx(Yt,{to:"/estafetas",className:"d-block overflow-hidden rounded-4 shadow-lg hover-shadow text-decoration-none",children:s.jsx("img",{src:"/ads/ESTAFETAS.png",alt:"Ver Nuestras Estafetas",className:"w-100 h-auto hover-lift",style:{objectFit:"cover"}})})}),s.jsx(Q.section,{className:"container-fluid mt-4 px-3 px-md-4",style:{maxWidth:"1600px"},variants:$i,initial:"hidden",animate:"visible",children:s.jsx("div",{className:"shadow",style:{backgroundColor:a?"#1e293b":"#ffffff",border:a?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"0.5rem",height:"auto",width:"100%"},children:s.jsxs("div",{className:"card-body p-2 p-md-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"h6 fw-bold text-dark dark:text-gray-100 mb-0",style:{fontSize:"clamp(14px, 2vw, 18px)"},children:"Descubre nuestros productos"}),s.jsx(Yt,{to:"/Productos",className:"text-primary dark:text-blue-400 text-decoration-none fw-medium text-xs sm:text-sm",style:{fontSize:"clamp(11px, 2vw, 13px)"},children:"Ver ms "})]}),s.jsx("div",{className:"d-flex flex-nowrap gap-2 gap-md-3 overflow-x-auto pb-1",style:{scrollbarWidth:"thin",scrollbarColor:a?"#475569 #1e293b":"#cbd5e1 #f1f5f9",WebkitOverflowScrolling:"touch",alignItems:"flex-start",minHeight:"unset"},children:Object.values(t).flat().slice(0,10).map(h=>{const y=u(h)||"/placeholder-product.svg";return s.jsx(Yt,{to:`/producto/${h.id}`,className:"text-decoration-none flex-shrink-0",title:h.nombre,children:s.jsx("div",{className:"rounded-3 overflow-hidden d-flex align-items-center justify-content-center w-[140px] h-[140px] md:w-[180px] md:h-[180px]",style:{backgroundColor:a?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.02)",border:a?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",backdropFilter:"blur(10px)"},children:s.jsx("img",{src:y,alt:h.nombre,className:"w-100 h-100 object-contain hover-lift",onError:w=>{w.target.onerror=null,w.target.src="/placeholder-product.svg"}})})},h.id)})})]})})}),s.jsx(Q.section,{className:"container-fluid mt-4 px-3 px-md-4",style:{maxWidth:"1600px"},variants:$i,initial:"hidden",animate:"visible",children:s.jsx("div",{className:"shadow",style:{backgroundColor:a?"#1e293b":"#ffffff",border:a?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"0.5rem",height:"auto",width:"100%"},children:s.jsxs("div",{className:"card-body p-2 p-md-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"h6 fw-bold text-dark dark:text-gray-100 mb-0",style:{fontSize:"clamp(12px, 2vw, 16px)"},children:"Hogar Inteligente en Oferta"}),s.jsx(Yt,{to:"/Productos/hogar-inteligente",className:"text-primary dark:text-blue-400 text-decoration-none fw-medium text-xs sm:text-sm",style:{fontSize:"clamp(11px, 2vw, 13px)"},children:"Ver ms "})]}),s.jsx("div",{className:"d-flex flex-nowrap gap-2 gap-md-3 overflow-x-auto pb-1",style:{scrollbarWidth:"thin",scrollbarColor:a?"#475569 #1e293b":"#cbd5e1 #f1f5f9",WebkitOverflowScrolling:"touch",alignItems:"flex-start",minHeight:"unset"},children:g("hogar-inteligente").slice(0,10).map(h=>{const y=u(h)||"/placeholder-product.svg";return s.jsx(Yt,{to:`/producto/${h.id}`,className:"text-decoration-none flex-shrink-0",children:s.jsx("div",{className:"rounded-3 overflow-hidden d-flex align-items-center justify-content-center w-[140px] h-[140px] md:w-[180px] md:h-[180px]",style:{backgroundColor:a?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.02)",border:a?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",backdropFilter:"blur(10px)"},children:s.jsx("img",{src:y,alt:h.nombre,className:"w-100 h-100 object-contain hover-lift",onError:w=>{w.target.onerror=null,w.target.src="/placeholder-product.svg"}})})},h.id)})})]})})}),s.jsx(Q.section,{className:"container-fluid mt-4 px-3 px-md-4",style:{maxWidth:"1600px"},variants:$i,initial:"hidden",animate:"visible",children:s.jsx("div",{className:"shadow",style:{backgroundColor:a?"#1e293b":"#ffffff",border:a?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"0.5rem",height:"auto",width:"100%"},children:s.jsxs("div",{className:"card-body p-2 p-md-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"h6 fw-bold text-dark dark:text-gray-100 mb-0",style:{fontSize:"clamp(12px, 2vw, 16px)"},children:"Tu Rincn Variado"}),s.jsx(Yt,{to:"/Productos/tu-rincon-variado",className:"text-primary dark:text-blue-400 text-decoration-none fw-medium text-xs sm:text-sm",style:{fontSize:"clamp(11px, 2vw, 13px)"},children:"Ver ms "})]}),s.jsx("div",{className:"d-flex flex-nowrap gap-2 gap-md-3 overflow-x-auto pb-1",style:{scrollbarWidth:"thin",scrollbarColor:a?"#475569 #1e293b":"#cbd5e1 #f1f5f9",WebkitOverflowScrolling:"touch",alignItems:"flex-start",minHeight:"unset"},children:g("tu-rincon-variado").slice(0,12).map(h=>{const y=u(h)||"/placeholder-product.svg";return s.jsx(Yt,{to:`/producto/${h.id}`,className:"text-decoration-none flex-shrink-0",title:h.nombre,children:s.jsx("div",{className:"rounded-3 overflow-hidden d-flex align-items-center justify-content-center w-[140px] h-[140px] md:w-[180px] md:h-[180px]",style:{backgroundColor:a?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.02)",border:a?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)",backdropFilter:"blur(10px)"},children:s.jsx("img",{src:y,alt:h.nombre,className:"w-100 h-100 object-contain hover-lift",onError:w=>{w.target.onerror=null,w.target.src="/placeholder-product.svg"}})})},h.id)})})]})})}),s.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-[1600px] mx-auto px-4 mt-16",children:[{to:"/Productos/hogar-inteligente",src:"/ads/ads-videos/smart.mp4",alt:"Smart Home",isVideo:!0},{to:"/Productos/controles",src:"/ads/controlads.png",alt:"Controles",isVideo:!1}].map((h,y)=>s.jsx("div",{className:"overflow-hidden rounded-2xl shadow-lg border-2 border-gray-300 dark:border-gray-600 aspect-[16/9]",children:s.jsx(Yt,{to:h.to,className:"block w-full h-full",children:h.isVideo?s.jsx("video",{src:h.src,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover rounded-2xl"}):s.jsx("img",{src:h.src,alt:h.alt,className:"w-full h-full object-cover rounded-2xl"})})},h.alt))}),s.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 max-w-[95%] lg:max-w-[1600px] mx-auto px-2 sm:px-4 mt-8 sm:mt-16",children:[s.jsxs(Q.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[320px] max-h-[400px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-600",variants:$i,initial:"hidden",animate:"visible",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cmaras de Vigilancia"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:g("camaras").slice(0,4).map(h=>s.jsx(Yt,{to:`/producto/${h.id}`,children:s.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",style:{maxHeight:"120px"},children:s.jsx("img",{src:u(h)||"/placeholder-product.svg",alt:h.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain group-hover:scale-105 transition-transform",style:{maxHeight:"110px"},onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},h.id))}),s.jsx(Yt,{to:"/Productos/camaras",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Cmaras de Vigilancia "})]}),s.jsxs(Q.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[320px] max-h-[400px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-600",variants:$i,initial:"hidden",animate:"visible",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Discos Duros"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:g("discos-duros").slice(0,4).map(h=>s.jsx(Yt,{to:`/producto/${h.id}`,children:s.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",style:{maxHeight:"120px"},children:s.jsx("img",{src:u(h)||"/placeholder-product.svg",alt:h.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",style:{maxHeight:"110px"},onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},h.id))}),s.jsx(Yt,{to:"/Productos/discos-duros",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Discos Duros "})]}),s.jsxs(Q.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[320px] max-h-[400px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-600",variants:$i,initial:"hidden",animate:"visible",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Memorias USB"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:g("memorias-usb").slice(0,4).map(h=>s.jsx(Yt,{to:`/producto/${h.id}`,children:s.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",style:{maxHeight:"120px"},children:s.jsx("img",{src:u(h)||"/placeholder-product.svg",alt:h.nombre,className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",style:{maxHeight:"110px"},onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},h.id))}),s.jsx(Yt,{to:"/Productos/memorias-usb",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestras Memorias USB "})]}),s.jsxs(Q.div,{className:"bg-white dark:bg-black rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition min-h-[320px] max-h-[400px] flex flex-col justify-between p-4 sm:p-5 border border-gray-200 dark:border-gray-600",variants:$i,initial:"hidden",animate:"visible",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-indigo-700 dark:text-indigo-400 tracking-tight",children:"Cables"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 flex-grow",children:g("cables").slice(0,4).map(h=>s.jsx(Yt,{to:`/producto/${h.id}`,children:s.jsx("div",{className:"w-full aspect-[4/3] bg-gray-50 dark:bg-gray-800 rounded-lg overflow-hidden flex items-center justify-center p-1 sm:p-2",style:{maxHeight:"120px"},children:s.jsx("img",{src:u(h)||"/placeholder-product.svg",alt:h.nombre||"Cable",className:"max-w-full max-h-full w-auto h-auto object-contain hover:scale-105 transition-transform",style:{maxHeight:"110px"},onError:y=>{y.target.onerror=null,y.target.src="/placeholder-product.svg"}})})},h.id))}),s.jsx(Yt,{to:"/Productos/cables",className:"text-indigo-600 dark:text-indigo-400 text-xs sm:text-sm mt-2 sm:mt-3 hover:underline font-medium",children:"Explora nuestros Cables "})]})]}),s.jsx("div",{className:"max-w-[1600px] mx-auto mt-20 px-4",children:s.jsx(Uq,{})}),s.jsxs(Q.section,{className:"container-fluid px-3 px-md-4 py-5 mt-5",style:{maxWidth:"1400px"},variants:$i,initial:"hidden",animate:"visible",children:[s.jsxs("div",{className:"text-center mb-4 mb-md-5",children:[s.jsxs("h2",{className:"h3 h2-md fw-bold mb-2 mb-md-3",style:{color:a?"#f1f5f9":"#1e293b",fontSize:"clamp(1.5rem, 4vw, 2.5rem)"},children:["Tienes dudas?"," ",s.jsx("span",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Contctanos ahora"})]}),s.jsx("p",{className:"text-muted mb-0",style:{fontSize:"clamp(0.875rem, 2vw, 1.1rem)",maxWidth:"600px",margin:"0 auto"},children:"Atencin rpida y profesional. Estamos aqu para ayudarte."})]}),s.jsxs("div",{className:"rounded-4 p-3 p-md-4 p-lg-5 shadow-lg",style:{background:a?"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)":"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",border:`2px solid ${a?"#334155":"#cbd5e1"}`},children:[s.jsxs("div",{className:"row g-3 g-md-4 mb-4",children:[s.jsx("div",{className:"col-12 col-md-6",children:s.jsxs("div",{className:"h-100 rounded-3 p-3 p-md-4 d-flex align-items-center gap-3 shadow-sm",style:{backgroundColor:a?"#1e293b":"#ffffff",border:`1px solid ${a?"#475569":"#e2e8f0"}`,transition:"all 0.3s ease"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-4px)",h.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.15)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=""},children:[s.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)"},children:s.jsx(jh,{className:"text-white",size:20})}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("p",{className:"small text-muted mb-1 fw-medium",children:"Ubicacin"}),s.jsx("p",{className:"mb-0 fw-semibold",style:{color:a?"#f1f5f9":"#1e293b",fontSize:"clamp(0.8rem, 1.5vw, 0.95rem)"},children:"Av. Estrella Sadhal, Santiago"})]})]})}),s.jsx("div",{className:"col-12 col-md-6",children:s.jsxs("div",{className:"h-100 rounded-3 p-3 p-md-4 d-flex align-items-center gap-3 shadow-sm",style:{backgroundColor:a?"#1e293b":"#ffffff",border:`1px solid ${a?"#475569":"#e2e8f0"}`,transition:"all 0.3s ease"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-4px)",h.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.15)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=""},children:[s.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:s.jsx(Tm,{className:"text-white",size:18})}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("p",{className:"small text-muted mb-1 fw-medium",children:"Tienda"}),s.jsx("p",{className:"mb-0 fw-semibold",style:{color:a?"#f1f5f9":"#1e293b",fontSize:"clamp(0.8rem, 1.5vw, 0.95rem)"},children:"+1 (849)-635-7000"})]})]})}),s.jsx("div",{className:"col-12 col-md-6",children:s.jsxs("div",{className:"h-100 rounded-3 p-3 p-md-4 d-flex align-items-center gap-3 shadow-sm",style:{backgroundColor:a?"#1e293b":"#ffffff",border:`1px solid ${a?"#475569":"#e2e8f0"}`,transition:"all 0.3s ease"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-4px)",h.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.15)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=""},children:[s.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)"},children:s.jsx(Tm,{className:"text-white",size:18})}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("p",{className:"small text-muted mb-1 fw-medium",children:"Internet"}),s.jsx("p",{className:"mb-0 fw-semibold",style:{color:a?"#f1f5f9":"#1e293b",fontSize:"clamp(0.8rem, 1.5vw, 0.95rem)"},children:"+1 (809)-582-1212"})]})]})}),s.jsx("div",{className:"col-12 col-md-6",children:s.jsxs("div",{className:"h-100 rounded-3 p-3 p-md-4 d-flex align-items-center gap-3 shadow-sm",style:{backgroundColor:a?"#1e293b":"#ffffff",border:`1px solid ${a?"#475569":"#e2e8f0"}`,transition:"all 0.3s ease"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-4px)",h.currentTarget.style.boxShadow="0 8px 16px rgba(0,0,0,0.15)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow=""},children:[s.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},children:s.jsx(lh,{className:"text-white",size:18})}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("p",{className:"small text-muted mb-1 fw-medium",children:"Email"}),s.jsx("p",{className:"mb-0 fw-semibold",style:{color:a?"#f1f5f9":"#1e293b",fontSize:"clamp(0.8rem, 1.5vw, 0.95rem)"},children:"playcenter121@gmail.com"})]})]})})]}),s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-12 col-md-6",children:s.jsxs("a",{href:"https://wa.me/18496357000?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20pgina.",target:"_blank",rel:"noopener noreferrer",className:"btn w-100 d-flex align-items-center justify-content-center gap-2 py-3 fw-bold shadow-lg",style:{background:"linear-gradient(135deg, #25d366 0%, #128c7e 100%)",color:"#ffffff",fontSize:"clamp(0.9rem, 2vw, 1.05rem)",border:"none",transition:"all 0.3s ease"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.03)",h.currentTarget.style.boxShadow="0 10px 25px rgba(37, 211, 102, 0.4)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow=""},children:[s.jsx(A0,{size:24}),"WhatsApp Tienda"]})}),s.jsx("div",{className:"col-12 col-md-6",children:s.jsxs("a",{href:"https://wa.me/18095821212?text=Hola%20PlayCenter%2C%20estoy%20interesad%40%20en%20un%20producto%20que%20vi%20en%20su%20pgina.",target:"_blank",rel:"noopener noreferrer",className:"btn w-100 d-flex align-items-center justify-content-center gap-2 py-3 fw-bold shadow-lg",style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"#ffffff",fontSize:"clamp(0.9rem, 2vw, 1.05rem)",border:"none",transition:"all 0.3s ease"},onMouseEnter:h=>{h.currentTarget.style.transform="scale(1.03)",h.currentTarget.style.boxShadow="0 10px 25px rgba(59, 130, 246, 0.4)"},onMouseLeave:h=>{h.currentTarget.style.transform="scale(1)",h.currentTarget.style.boxShadow=""},children:[s.jsx(A0,{size:24}),"WhatsApp Internet"]})})]})]})]})]})}function Wq({activeView:t,setView:e,onLogout:n,userInfo:r}){const i=b.useMemo(()=>[{id:"perfil",title:"Informacin Personal",description:"Editar nombre, celular y correo electrnico",icon:tu},{id:"pedidos",title:"Mis Pedidos",description:"Rastrear envos, devoluciones y compras pasadas",icon:F6},{id:"ubicaciones",title:"Direcciones",description:"Preferencias de envo y lugares de entrega",icon:Uh},{id:"pagos",title:"Pagos y Billetera",description:"Gestionar tarjetas, saldos y cupones",icon:uw},{id:"seguridad",title:"Inicio de Sesin y Seguridad",description:"Cambiar contrasea y proteger la cuenta",icon:Wb},{id:"tiendas",title:((r==null?void 0:r.isAdmin)===!0||(r==null?void 0:r.admin)===!0||(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="seller"||(r==null?void 0:r.isSeller)===!0,"Mi Tienda"),description:"Panel de vendedor y estadsticas",icon:xr},{id:"configuracion",title:"Ajustes",description:"Configuracin general de la app",icon:qd}],[r]);return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        .psb-shell {
          --psb-bg: #f4f7f6;
          --psb-card-bg: #ffffff;
          --psb-card-border: #e5e7eb;
          --psb-card-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
          --psb-title: #111827;
          --psb-desc: #6b7280;
          --psb-icon: #4b5563;
          --psb-arrow: #9ca3af;
          --psb-active-border: #2563eb;
          --psb-active-glow: rgba(37, 99, 235, 0.15);
          --psb-logout-bg: #fef2f2;
          --psb-logout-border: #fecaca;
          --psb-logout-icon: #dc2626;
        }

        .dark .psb-shell {
          --psb-bg: #121212;
          --psb-card-bg: #1e1e1e;
          --psb-card-border: #333333;
          --psb-card-shadow: 0 1px 3px rgba(0, 0, 0, 0.35);
          --psb-title: #e0e0e0;
          --psb-desc: #a0a0a0;
          --psb-icon: #e0e0e0;
          --psb-arrow: #9ca3af;
          --psb-active-border: #3b82f6;
          --psb-active-glow: rgba(59, 130, 246, 0.2);
          --psb-logout-bg: rgba(220, 38, 38, 0.1);
          --psb-logout-border: rgba(220, 38, 38, 0.3);
          --psb-logout-icon: #f87171;
        }

        .psb-shell {
          background: var(--psb-bg);
          width: 100%;
        }

        .psb-menu {
          width: 100%;
          max-width: 1100px;
          margin: 0 auto;
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
          gap: 14px;
          padding: 16px;
        }

        .psb-card {
          display: flex;
          align-items: center;
          gap: 16px;
          padding: 18px 20px;
          background: var(--psb-card-bg);
          border: 1px solid var(--psb-card-border);
          border-radius: 12px;
          box-shadow: var(--psb-card-shadow);
          cursor: pointer;
          transition: all 0.2s ease;
          width: 100%;
          min-height: 88px;
          text-align: left;
        }

        .psb-card:hover {
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
          border-color: #d1d5db;
          transform: translateY(-1px);
        }

        .psb-card:active {
          transform: translateY(0);
        }

        .psb-card.psb-active {
          border-color: var(--psb-active-border);
          box-shadow: 0 0 0 2px var(--psb-active-glow);
        }

        .psb-icon-wrapper {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 44px;
          height: 44px;
          background: #f3f4f6;
          border-radius: 10px;
          flex-shrink: 0;
        }

        .dark .psb-icon-wrapper {
          background: #2c2c2c;
          border: 1px solid #3a3a3a;
        }

        .psb-icon {
          color: var(--psb-icon);
        }

        .psb-card.psb-active .psb-icon-wrapper {
          background: #eff6ff;
          border: 1px solid #bfdbfe;
        }

        .dark .psb-card.psb-active .psb-icon-wrapper {
          background: rgba(59, 130, 246, 0.15);
          border: 1px solid #3b82f6;
        }

        .psb-content {
          flex: 1;
          min-width: 0;
        }

        .psb-title {
          font-size: 15px;
          font-weight: 600;
          color: var(--psb-title);
          margin: 0 0 2px 0;
          line-height: 1.3;
        }

        .psb-description {
          font-size: 13px;
          color: var(--psb-desc);
          margin: 0;
          line-height: 1.4;
        }

        .psb-arrow {
          color: var(--psb-arrow);
          flex-shrink: 0;
          transition: transform 0.2s ease;
        }

        .psb-card:hover .psb-arrow {
          transform: translateX(3px);
          color: #6b7280;
        }

        .dark .psb-card:hover .psb-arrow {
          color: #cbd5e1;
        }

        .psb-logout-card {
          margin-top: 8px;
          border-color: var(--psb-logout-border);
          background: var(--psb-logout-bg);
        }

        .psb-logout-card .psb-icon-wrapper {
          background: var(--psb-logout-bg);
          border: 1px solid var(--psb-logout-border);
        }

        .psb-logout-card .psb-icon {
          color: var(--psb-logout-icon);
        }

        .psb-logout-card .psb-title {
          color: var(--psb-logout-icon);
        }

        .psb-logout-card .psb-description {
          color: var(--psb-logout-icon);
          opacity: 0.9;
        }

        .psb-logout-card:hover {
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(220, 38, 38, 0.15);
        }

        @media (max-width: 768px) {
          .psb-menu {
            max-width: none;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            padding: 12px;
            gap: 10px;
          }

          .psb-card {
            padding: 14px 16px;
            min-height: 70px;
          }

          .psb-icon-wrapper {
            width: 40px;
            height: 40px;
          }

          .psb-title {
            font-size: 14px;
          }

          .psb-description {
            font-size: 12px;
          }
        }
      `}),s.jsx("div",{className:"psb-shell",children:s.jsxs("nav",{className:"psb-menu",children:[i.map(a=>{const l=t===a.id,d=a.icon;return s.jsxs("button",{onClick:()=>e(a.id),className:`psb-card ${l?"psb-active":""}`,children:[s.jsx("div",{className:"psb-icon-wrapper",children:s.jsx(d,{size:22,className:"psb-icon"})}),s.jsxs("div",{className:"psb-content",children:[s.jsx("p",{className:"psb-title",children:a.title}),s.jsx("p",{className:"psb-description",children:a.description})]}),s.jsx(_a,{size:20,className:"psb-arrow"})]},a.id)}),s.jsxs("button",{onClick:n,className:"psb-card psb-logout-card",children:[s.jsx("div",{className:"psb-icon-wrapper",children:s.jsx(Cm,{size:22,className:"psb-icon"})}),s.jsxs("div",{className:"psb-content",children:[s.jsx("p",{className:"psb-title",children:"Cerrar Sesin"}),s.jsx("p",{className:"psb-description",children:"Salir de tu cuenta"})]}),s.jsx(_a,{size:20,className:"psb-arrow"})]})]})})]})}function Hq({activeView:t,setView:e,userInfo:n}){const r=(n==null?void 0:n.isAdmin)===!0||(n==null?void 0:n.admin)===!0||(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="seller"||(n==null?void 0:n.isSeller)===!0?"Mi Tienda":"Vender",i=[{id:"perfil",label:"Perfil",icon:tu},{id:"pedidos",label:"Pedidos",icon:F6},{id:"ubicaciones",label:"Direcciones",icon:Uh},{id:"pagos",label:"Pagos",icon:uw},{id:"tiendas",label:r,icon:xr},{id:"seguridad",label:"Seguridad",icon:Bc},{id:"configuracion",label:"Ajustes",icon:qd}],a=b.useRef(null),l=b.useRef(null),d=b.useRef({}),[u,m]=b.useState({left:0,width:0});return b.useEffect(()=>{const g=d.current[t],h=l.current;if(g&&h){const y=g.getBoundingClientRect(),w=h.getBoundingClientRect();m({left:y.left-w.left,width:y.width})}},[t]),b.useEffect(()=>{const g=()=>{const y=d.current[t],w=l.current;if(y&&w){const S=y.getBoundingClientRect(),N=w.getBoundingClientRect();m({left:S.left-N.left,width:S.width})}},h=a.current;return h&&h.addEventListener("scroll",g,{passive:!0}),()=>h&&h.removeEventListener("scroll",g)},[t]),s.jsx("div",{className:"z-30",role:"tablist","aria-label":"Navegacin de perfil",children:s.jsx("div",{className:"overflow-x-auto scrollbar-hide",ref:a,children:s.jsxs("div",{className:"relative flex gap-2 min-w-max px-2 py-2 mx-2",ref:l,children:[s.jsx(Q.div,{layout:!0,className:"hidden",style:{left:u.left,width:u.width}}),i.map(g=>{const h=g.icon,y=t===g.id;return s.jsxs(Q.button,{onClick:()=>e(g.id),role:"tab","aria-selected":y,ref:w=>d.current[g.id]=w,className:`flex flex-col items-center gap-1 px-3 py-2 rounded-2xl min-w-[76px] border transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 ${y?"bg-blue-50 text-blue-700 border-blue-200 shadow-sm":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,whileTap:{scale:.96},children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${y?"bg-blue-600 text-white shadow-sm":"bg-gray-100 text-gray-600"}`,children:s.jsx(h,{size:18})}),s.jsx("span",{className:"text-[10px] font-medium",children:g.label})]},g.id)})]})})})}function K_({currentUser:t,onAddAccount:e,onLogout:n,onClose:r,onSwitchAccount:i}){var y;const[a,l]=b.useState(!1),d=sE(),u=(d==null?void 0:d.savedAccounts)||[],m=(d==null?void 0:d.switchAccount)||(()=>{}),g=(d==null?void 0:d.removeAccount)||(()=>{}),{unreadCount:h}=vx();return s.jsxs("div",{className:"w-full min-w-[280px] max-w-[320px] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-600 overflow-hidden",children:[s.jsxs("div",{className:"p-2 max-h-96 overflow-y-auto",children:[s.jsx("p",{className:"px-3 py-2 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cambiar Cuentas"}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-blue-50 dark:bg-blue-500/20 mb-2 border border-blue-100 dark:border-blue-500/30",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:(t==null?void 0:t.photoURL)||"https://via.placeholder.com/150",className:"w-10 h-10 rounded-full object-cover border-2 border-white dark:border-slate-800",alt:"Active"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"}),h>0&&s.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center",style:{minWidth:"18px",height:"18px",padding:"0 4px",backgroundColor:"#dc2626",color:"#ffffff",fontSize:"10px",fontWeight:"700",borderRadius:"9px",border:"2px solid #ffffff"},children:h>9?"9+":h})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:(t==null?void 0:t.displayName)||((y=t==null?void 0:t.email)==null?void 0:y.split("@")[0])||"Usuario"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t==null?void 0:t.email})]}),s.jsx(ka,{size:18,className:"text-blue-600",title:"Cuenta activa"})]}),u.filter(w=>w.uid!==(t==null?void 0:t.uid)).map(w=>s.jsxs("div",{onClick:()=>i?i(()=>m(w)):m(w),className:"group relative flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer",children:[s.jsx("img",{src:w.photoURL||"https://via.placeholder.com/150",className:"w-9 h-9 rounded-full object-cover border border-gray-200 dark:border-white/10",alt:"Saved"}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate group-hover:text-gray-900 dark:group-hover:text-white",children:w.displayName}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:w.email})]}),s.jsx("button",{className:"p-1.5 rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors opacity-0 group-hover:opacity-100",onClick:S=>{S.stopPropagation(),g(w.uid)},title:"Eliminar de la lista",children:s.jsx(gs,{size:16})})]},w.uid)),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-2 mt-1 rounded-xl text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[s.jsx("div",{className:"w-9 h-9 rounded-full border border-dashed border-blue-300 flex items-center justify-center",children:s.jsx(Bh,{size:18})}),s.jsx("span",{className:"text-sm font-medium",children:"Agregar cuenta"})]})]}),s.jsx("div",{className:"h-px bg-gray-200 dark:bg-slate-700 mx-4"}),s.jsx("div",{className:"p-2",children:a?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-red-50 dark:bg-red-500/20 text-red-700 dark:text-red-300",children:[s.jsx(Nc,{size:18}),s.jsx("span",{className:"text-sm font-medium",children:"Ests seguro?"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{n(),l(!1)},className:"flex-1 px-3 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm font-medium transition-colors",children:"S, salir"}),s.jsx("button",{onClick:()=>l(!1),className:"flex-1 px-3 py-2 rounded-lg bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 text-gray-700 dark:text-white text-sm font-medium transition-colors",children:"Cancelar"})]})]}):s.jsxs("button",{onClick:()=>l(!0),className:"w-full flex items-center gap-3 p-3 rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/20 transition-colors",children:[s.jsx(Cm,{size:18}),s.jsx("span",{className:"text-sm font-medium",children:"Cerrar Sesin"})]})})]})}function Y_({isOpen:t,onClose:e,currentUser:n,onAddAccount:r,onLogout:i}){const a=l=>{e(),setTimeout(()=>l(),50)};return s.jsx(sn,{children:t&&s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},onClick:e,className:"fixed inset-0 z-[99998] bg-black/40"}),s.jsx(Q.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.18},className:"hidden md:block absolute z-[99999]",style:{left:"0",top:"calc(100% + 8px)",width:"min(320px, calc(100vw - 32px))"},children:s.jsx(K_,{currentUser:n,onAddAccount:r,onLogout:i,onClose:e,onSwitchAccount:a})}),s.jsx(Q.div,{initial:{opacity:0,y:-8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.98},transition:{duration:.18},className:"md:hidden fixed z-[99999] bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-600 overflow-hidden",style:{width:"calc(100vw - 32px)",maxWidth:"320px",top:"80px",left:"16px",right:"16px",transform:"none"},children:s.jsx(K_,{currentUser:n,onAddAccount:r,onLogout:i,onClose:e,onSwitchAccount:a})})]})})}function X_({user:t,userInfo:e,onLogout:n,onAddAccount:r,setView:i,simple:a=!1}){const[l,d]=b.useState(!1),u=(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Usuario",m=(e==null?void 0:e.fotoURL)||(t==null?void 0:t.photoURL)||"",g={uid:t==null?void 0:t.uid,email:t==null?void 0:t.email,displayName:u,photoURL:m};return a?s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>d(h=>!h),className:`w-full flex items-center justify-between gap-2 px-2 py-1.5 rounded-lg transition-all duration-300 border ${l?"bg-gray-100 dark:bg-slate-700/50 border-gray-300 dark:border-slate-600":"hover:bg-gray-50 dark:hover:bg-slate-700/30 border-transparent"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-100 dark:bg-slate-700 flex-shrink-0",children:m?s.jsx("img",{src:m,alt:"Avatar",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold",children:String(u).charAt(0).toUpperCase()})}),s.jsx("div",{className:"min-w-0 flex-1 text-left",children:s.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:u})})]}),s.jsx($b,{size:16,className:`flex-shrink-0 text-gray-500 dark:text-gray-400 transition-transform duration-300 ${l?"rotate-180":""}`})]}),s.jsx(Y_,{isOpen:l,onClose:()=>d(!1),currentUser:g,onAddAccount:()=>{d(!1),r&&r()},onLogout:()=>{d(!1),n&&n()}})]})}):s.jsx("div",{className:"pl-1 pr-3 sm:pr-4 py-1.5 md:py-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>d(h=>!h),className:`flex items-center gap-2 pl-0.5 pr-2.5 py-1 rounded-full transition-all duration-300 border ${l?"bg-gray-100 dark:bg-slate-700/50 border-gray-300 dark:border-slate-600":"hover:bg-gray-50 dark:hover:bg-slate-700/30 border-transparent"}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-slate-700 p-[2px] flex-shrink-0",children:s.jsx("img",{src:m||"https://via.placeholder.com/150",alt:"Avatar",className:"w-full h-full rounded-full object-cover border-2 border-white dark:border-slate-800"})}),s.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-none truncate max-w-[100px]",children:String(u).split(" ")[0]}),s.jsx($b,{size:14,className:`flex-shrink-0 text-gray-500 dark:text-gray-400 transition-transform duration-300 ${l?"rotate-180":""}`})]})]}),s.jsx(Y_,{isOpen:l,onClose:()=>d(!1),currentUser:g,onAddAccount:()=>{d(!1),r&&r()},onLogout:()=>{d(!1),n&&n()}})]}),s.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white hidden md:block",children:"Mi Perfil"})]})})}function qq({isOpen:t,onClose:e,onConfirm:n}){return s.jsx(sn,{children:t&&s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{duration:.2},className:"relative bg-white dark:bg-[#1E293B] rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden",children:[s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-6 flex flex-col items-center justify-center border-b border-red-100 dark:border-red-900/30",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/50 text-red-600 rounded-full flex items-center justify-center mb-3 shadow-inner",children:s.jsx(Cm,{size:32})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Cerrar Sesin?"})]}),s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-300 mb-8",children:"Ests segura de que quieres salir? Tendrs que ingresar tus datos nuevamente para acceder a tu tienda."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl font-bold text-gray-700 dark:text-white bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:n,className:"flex-1 py-3 px-4 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 shadow-lg shadow-red-600/30 transition-transform active:scale-95",children:"S, Salir"})]})]})]})]})})}function Q_({visible:t,text:e="Cargando..."}){return t?s.jsx(Ml,{fullScreen:!0,text:e}):null}function Gq({user:t,info:e,stats:n,onEdit:r,onOpenFollowers:i,onOpenFollowing:a}){var d;const l=(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"Usuario";return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex gap-6 items-start pb-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full overflow-hidden bg-gray-100 dark:bg-slate-700 flex items-center justify-center text-gray-700 dark:text-white text-2xl md:text-3xl font-bold shadow-lg",children:e!=null&&e.fotoURL||t!=null&&t.photoURL?s.jsx("img",{src:(e==null?void 0:e.fotoURL)||(t==null?void 0:t.photoURL),alt:l,className:"w-full h-full object-cover"}):s.jsx("span",{children:((d=l==null?void 0:l.charAt(0))==null?void 0:d.toUpperCase())||"U"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:l}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("button",{onClick:i,className:"hover:text-blue-600 dark:hover:text-blue-400 hover:underline transition-colors cursor-pointer",children:[s.jsx("span",{className:"font-semibold",children:(n==null?void 0:n.seguidores)||0})," ","seguidores"]}),s.jsx("span",{children:""}),s.jsxs("button",{onClick:a,className:"hover:text-blue-600 dark:hover:text-blue-400 hover:underline transition-colors cursor-pointer",children:[s.jsx("span",{className:"font-semibold",children:(n==null?void 0:n.seguidos)||0})," ","seguidos"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[s.jsx("span",{className:"font-semibold",children:(n==null?void 0:n.publicaciones)||0})," ","publicaciones"]})]}),s.jsxs("button",{onClick:r,className:"mt-4 flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-full font-medium text-sm hover:opacity-90 transition-opacity",children:[s.jsx(z6,{size:14}),s.jsx("span",{children:"Editar Perfil"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Informacin Personal"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Administra tu informacin de contacto"})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"group",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 block",children:"Correo Electrnico"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center group-hover:bg-gray-200 dark:group-hover:bg-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white break-all",children:(e==null?void 0:e.email)||(t==null?void 0:t.email)||"No configurado"})})]})]})})}),s.jsx("div",{className:"group",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 block",children:"Telfono"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center group-hover:bg-gray-200 dark:group-hover:bg-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:(e==null?void 0:e.telefono)||s.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"Sin agregar"})})})]})]})})}),s.jsx("div",{className:"group",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 block",children:"Direccin Principal"}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center group-hover:bg-gray-200 dark:group-hover:bg-gray-600 transition-colors",children:s.jsxs("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx("div",{className:"flex-1",children:e!=null&&e.direccion?s.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e.direccion)}`,target:"_blank",rel:"noopener noreferrer",className:"text-base font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors inline-flex items-center gap-2 group/link",children:[s.jsx("span",{className:"border-b border-transparent group-hover/link:border-blue-600 dark:group-hover/link:border-blue-400",children:e.direccion}),s.jsx("svg",{className:"w-4 h-4 opacity-0 group-hover/link:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):s.jsx("p",{className:"text-base font-medium text-gray-400 dark:text-gray-500",children:"Sin direccin configurada"})})]})]})})})]}),s.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),'Para actualizar tu informacin, haz clic en "Editar Perfil"']})})]})]})}function Kq({className:t=""}){return s.jsx("div",{className:`animate-pulse bg-gray-200 rounded-md ${t}`,"aria-hidden":!0})}function _v({className:t="h-3 w-24"}){return s.jsx(Kq,{className:t})}function rm({className:t=""}){return s.jsx("div",{className:`bg-white rounded-xl p-6 border border-gray-200 ${t}`,children:s.jsxs("div",{className:"space-y-3",children:[s.jsx(_v,{className:"h-4 w-32"}),s.jsx(_v,{className:"h-3 w-48"}),s.jsx(_v,{className:"h-3 w-24"})]})})}const Yq=t=>{const e=String(t||"").toLowerCase();return e==="completado"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-200 dark:border-green-800":e==="cancelado"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 border-amber-200 dark:border-amber-800"};function Xq({orders:t=[],loading:e=!1,onOpenOrder:n}){if(e)return s.jsxs("div",{className:"space-y-4",children:[s.jsx(rm,{}),s.jsx(rm,{})]});if(!(t!=null&&t.length))return s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white dark:bg-slate-800 rounded-2xl border border-dashed border-gray-300 dark:border-slate-600",children:[s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-700 rounded-full mb-4",children:s.jsx(Uc,{size:40,className:"text-gray-400"})}),s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"An no hay pedidos"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:"Es hora de estrenar el carrito!"})]});const r=[...t].sort((l,d)=>{var u,m;return(((u=d.fecha)==null?void 0:u.seconds)||0)-(((m=l.fecha)==null?void 0:m.seconds)||0)}),i={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06,when:"beforeChildren"}}},a={hidden:{opacity:0,y:12},show:{opacity:1,y:0}};return s.jsxs(Q.div,{className:"space-y-6",variants:i,initial:"hidden",animate:"show",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Historial de Pedidos"}),s.jsx("div",{className:"space-y-4",children:s.jsx(sn,{children:r.map((l,d)=>{var u,m,g;return s.jsx(Q.div,{variants:a,initial:"hidden",animate:"show",transition:{delay:d*.05},onClick:()=>n&&n(l),className:"group cursor-pointer bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-xl hover:border-blue-200 dark:hover:border-blue-800 transition-all duration-300 overflow-hidden",children:s.jsxs("div",{className:"p-6 flex flex-col sm:flex-row gap-6",children:[s.jsxs("div",{className:"flex -space-x-3 overflow-hidden py-1 pl-1",children:[(u=l.productos)==null?void 0:u.slice(0,3).map((h,y)=>s.jsx("div",{className:"relative w-16 h-16 rounded-xl border-2 border-white dark:border-slate-800 shadow-sm overflow-hidden bg-gray-100 dark:bg-slate-700 z-0 hover:z-10 transition-all hover:scale-110",children:s.jsx("img",{src:h.imagen||"https://via.placeholder.com/64",alt:"",className:"w-full h-full object-cover"})},y)),((m=l.productos)==null?void 0:m.length)>3&&s.jsxs("div",{className:"w-16 h-16 rounded-xl border-2 border-white dark:border-slate-800 bg-gray-100 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-gray-500 z-0",children:["+",l.productos.length-3]})]}),s.jsx("div",{className:"flex-1 flex flex-col justify-center",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:["Pedido #",l.numeroOrden||l.id.slice(0,8)]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:(g=l.fecha)!=null&&g.seconds?new Date(l.fecha.seconds*1e3).toLocaleDateString(void 0,{dateStyle:"long"}):"Fecha desconocida"})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${Yq(l.estado)}`,children:l.estado})]})}),s.jsxs("div",{className:"flex flex-row sm:flex-col items-center sm:items-end justify-between sm:justify-center border-t sm:border-t-0 border-gray-100 dark:border-slate-700 pt-4 sm:pt-0 mt-2 sm:mt-0",children:[s.jsxs("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["RD$ ",l.total]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-blue-600 font-medium group-hover:translate-x-1 transition-transform mt-1",children:["Ver detalles ",s.jsx(_a,{size:16})]})]})]})},l.id)})})})]})}function Qq({addresses:t,userId:e,onAdd:n,onEdit:r,onDelete:i,onSetDefault:a,defaultDireccion:l="",defaultMetodoEntrega:d="",loading:u=!1}){const m={provincia:"Santiago",ciudad:"Santiago de los Caballeros",numeroCalle:"Av. Juan Pablo Duarte 68",direccionCompleta:"Playcenter Universal, Av. Juan Pablo Duarte 68, Santiago de los Caballeros 51000, Repblica Dominicana",ubicacion:"https://maps.app.goo.gl/kszSTHedLYWCby1E7",metodoEntrega:"tienda"},g={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06,when:"beforeChildren"}}},h={hidden:{opacity:0,y:12},show:{opacity:1,y:0}},[y,w]=b.useState(null),[S,N]=b.useState(!1),[_,D]=b.useState(null);return s.jsxs(Q.div,{className:"space-y-6",variants:g,initial:"hidden",animate:"show",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Mis Direcciones"}),s.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-sm font-semibold text-blue-600 hover:text-blue-700 bg-blue-50 dark:bg-blue-900/20 px-4 py-2 rounded-lg transition-colors",children:[s.jsx(Bh,{size:18})," Nueva Direccin"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u&&s.jsxs(s.Fragment,{children:[s.jsx(rm,{}),s.jsx(rm,{}),s.jsx(rm,{})]}),s.jsxs(Q.div,{variants:h,whileHover:{y:-6,scale:1.02},whileTap:{scale:.95},onClick:()=>{d!=="tienda"&&(D("playcenter"),setTimeout(async()=>{await(a==null?void 0:a(m)),D(null)},600))},className:"relative bg-gradient-to-br from-amber-50 to-orange-50 dark:from-slate-800 dark:to-slate-800 border-2 rounded-3xl p-6 shadow-lg hover:shadow-2xl transition-all cursor-pointer overflow-hidden",style:{borderColor:d==="tienda"?"#f59e0b":"#fde68a",borderWidth:d==="tienda"?"3px":"2px"},children:[s.jsx("div",{className:"absolute top-5 right-5 z-10",children:d==="tienda"?s.jsx(Q.div,{initial:{scale:0},animate:{scale:1},className:"w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-lg",children:s.jsx(ka,{size:20,className:"text-white font-bold",strokeWidth:3})}):s.jsx("div",{className:"w-10 h-10 rounded-full border-3 border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-700 shadow-md"})}),s.jsx(sn,{children:_==="playcenter"&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white/40 dark:bg-slate-900/40 backdrop-blur-md flex flex-col items-center justify-center z-20 rounded-3xl",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-3"}),s.jsx("p",{className:"text-sm font-bold text-amber-700 dark:text-amber-400",children:"Guardando..."})]})}),s.jsx("div",{className:"w-12 h-12 rounded-xl bg-amber-100 text-amber-600 flex items-center justify-center mb-4",children:s.jsx(xr,{size:24})}),s.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-lg flex items-center gap-2",children:["Playcenter Universal",s.jsx(UB,{size:16,className:"text-blue-500"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 leading-relaxed",children:m.direccionCompleta}),s.jsx("div",{className:"mt-4 pt-4 border-t border-amber-100 dark:border-slate-700",children:s.jsx("span",{className:"text-xs font-bold text-amber-700 dark:text-amber-500 uppercase tracking-wide",children:"Punto de Recogida Oficial"})})]}),!u&&(t==null?void 0:t.map(A=>{const L=d!=="tienda"&&l&&A.direccionCompleta===l,I=_===A.id;return s.jsxs(Q.div,{variants:h,whileHover:{y:-6,scale:1.02},whileTap:{scale:.95},onClick:()=>{L||(D(A.id),setTimeout(async()=>{await(a==null?void 0:a(A)),D(null)},600))},className:`relative rounded-3xl p-6 transition-all cursor-pointer overflow-hidden shadow-lg hover:shadow-2xl ${L?"bg-blue-50 dark:bg-blue-950/20":"bg-white dark:bg-slate-800"}`,style:{borderWidth:L?"3px":"2px",borderColor:L?"#3b82f6":"#e5e7eb"},children:[s.jsx("div",{className:"absolute top-5 right-5 z-10",children:L?s.jsx(Q.div,{initial:{scale:0},animate:{scale:1},className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:s.jsx(ka,{size:20,className:"text-white font-bold",strokeWidth:3})}):s.jsx("div",{className:"w-10 h-10 rounded-full border-3 border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-700 shadow-md"})}),s.jsx(sn,{children:I&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white/40 dark:bg-slate-900/40 backdrop-blur-md flex flex-col items-center justify-center z-20 rounded-3xl",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-3"}),s.jsx("p",{className:"text-sm font-bold text-blue-700 dark:text-blue-400",children:"Guardando..."})]})}),s.jsxs("div",{className:"absolute top-5 right-16 z-10 flex items-center gap-2",children:[s.jsx("button",{onClick:F=>{F.stopPropagation(),r==null||r(A)},className:"p-2.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-700 rounded-full transition-all hover:scale-110 shadow-md bg-white dark:bg-slate-800","aria-label":"Editar",children:s.jsx(z6,{size:16})}),s.jsx("button",{onClick:F=>{F.stopPropagation(),w(A.id),N(!0)},className:"p-2.5 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-slate-700 rounded-full transition-all hover:scale-110 shadow-md bg-white dark:bg-slate-800","aria-label":"Eliminar",children:s.jsx(wh,{size:16})})]}),s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-gray-300 flex items-center justify-center mb-4",children:s.jsx(Uh,{size:24})}),s.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg mb-2",children:A.provincia}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-2 min-h-[40px]",children:A.direccionCompleta}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:L&&s.jsxs("span",{className:"inline-flex items-center gap-2 text-xs font-semibold text-gray-700 bg-gray-100 dark:text-gray-200 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-gray-300 dark:border-slate-600",children:[s.jsx(Ll,{size:14,className:"text-green-600 dark:text-green-500"}),"Direccin Activa"]})})]},A.id)}))]}),s.jsx(sn,{children:S&&s.jsxs(Q.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>N(!1)}),s.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative bg-white dark:bg-slate-800 rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden",children:[s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-6 flex flex-col items-center justify-center border-b border-red-100 dark:border-red-900/30",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/50 text-red-600 rounded-full flex items-center justify-center mb-3 shadow-inner",children:s.jsx(wh,{size:32})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Borrar esta direccin?"})]}),s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-300 mb-8",children:"Esta accin no se puede deshacer."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 px-4 rounded-xl font-bold text-gray-700 dark:text-white bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:()=>{const A=y;N(!1),w(null),i&&A&&i(A)},className:"flex-1 py-3 px-4 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 shadow-lg shadow-red-600/30 transition-transform active:scale-95",children:"Eliminar"})]})]})]})]})})]})}function Jq(){const[t,e]=b.useState(!0),[n,r]=b.useState(!0),[i,a]=b.useState(!1),[l,d]=b.useState(!1),{theme:u,toggleTheme:m}=Ss(),{logout:g}=er(),h=Sr(),y=u==="dark",w=()=>{g(),h("/")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`rounded-2xl p-6 border transition-all duration-300 ${y?"bg-gray-800 border-gray-700":"bg-white border-gray-200 shadow-sm"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:`p-2 rounded-xl ${y?"bg-purple-600/20":"bg-purple-50"}`,children:s.jsx(kB,{className:y?"text-purple-400":"text-purple-600",size:24})}),s.jsx("h2",{className:`text-xl font-bold ${y?"text-white":"text-gray-900"}`,children:"Apariencia"})]}),s.jsx("div",{className:`rounded-xl p-4 transition-all duration-300 ${y?"bg-gray-700/30":"bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${y?"bg-indigo-600/20 text-indigo-400":"bg-blue-50 text-blue-600"}`,children:y?s.jsx(m_,{size:20}):s.jsx(g_,{size:20})}),s.jsxs("div",{children:[s.jsxs("p",{className:`font-semibold ${y?"text-white":"text-gray-900"}`,children:["Modo ",y?"oscuro":"claro"]}),s.jsx("p",{className:`text-sm ${y?"text-gray-400":"text-gray-600"}`,children:y?"Cambia a modo claro":"Cambia a modo oscuro"})]})]}),s.jsx("button",{onClick:m,className:`relative inline-flex h-8 w-16 items-center rounded-full transition-all duration-300 focus:outline-none focus-visible:ring-4 focus-visible:ring-blue-500/50 ${y?"bg-gradient-to-r from-indigo-500 to-purple-600":"bg-gradient-to-r from-blue-400 to-blue-500"}`,children:s.jsx(Q.span,{layout:!0,transition:{type:"spring",stiffness:700,damping:30},className:`inline-flex h-6 w-6 items-center justify-center transform rounded-full bg-white shadow-lg ${y?"translate-x-9":"translate-x-1"}`,children:y?s.jsx(m_,{className:"text-indigo-600",size:14}):s.jsx(g_,{className:"text-blue-600",size:14})})})]})})]}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`rounded-2xl p-6 border transition-all duration-300 ${y?"bg-gray-800 border-gray-700":"bg-white border-gray-200 shadow-sm"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:`p-2 rounded-xl ${y?"bg-green-600/20":"bg-green-50"}`,children:s.jsx(Hd,{className:y?"text-green-400":"text-green-600",size:24})}),s.jsx("h2",{className:`text-xl font-bold ${y?"text-white":"text-gray-900"}`,children:"Notificaciones"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Sv,{icon:s.jsx(Hd,{size:20}),label:"Notificaciones por email",description:"Recibe actualizaciones en tu correo",checked:t,onChange:()=>e(S=>!S),isDark:y}),s.jsx(Sv,{icon:s.jsx(Uc,{size:20}),label:"Actualizaciones de pedidos",description:"Estado de tus compras en tiempo real",checked:n,onChange:()=>r(S=>!S),isDark:y}),s.jsx(Sv,{icon:s.jsx(tW,{size:20}),label:"Ofertas y promociones",description:"Descuentos exclusivos para ti",checked:i,onChange:()=>a(S=>!S),isDark:y})]})]}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`rounded-2xl p-6 border transition-all duration-300 ${y?"bg-gray-800 border-gray-700":"bg-white border-gray-200 shadow-sm"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:`p-2 rounded-xl ${y?"bg-red-600/20":"bg-red-50"}`,children:s.jsx(Cm,{className:y?"text-red-400":"text-red-600",size:24})}),s.jsx("h2",{className:`text-xl font-bold ${y?"text-white":"text-gray-900"}`,children:"Cuenta"})]}),l?s.jsxs(Q.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:`rounded-xl p-4 border ${y?"bg-red-600/10 border-red-600/20":"bg-red-50 border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Nc,{className:y?"text-red-400":"text-red-600",size:20}),s.jsx("p",{className:`font-semibold ${y?"text-white":"text-gray-900"}`,children:"Ests seguro de que quieres cerrar sesin?"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,className:`flex-1 px-4 py-2.5 rounded-lg font-medium transition-all duration-300 ${y?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/30":"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/20"}`,children:"S, cerrar sesin"}),s.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(!1),className:`flex-1 px-4 py-2.5 rounded-lg font-medium transition-all duration-300 ${y?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Cancelar"})]})]}):s.jsxs(Q.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d(!0),className:`w-full flex items-center gap-4 p-4 rounded-xl transition-all duration-300 ${y?"bg-red-600/10 border border-red-600/20 hover:bg-red-600/20":"bg-red-50 border border-red-100 hover:bg-red-100"}`,children:[s.jsx("div",{className:`p-2 rounded-lg ${y?"bg-red-600/20 text-red-400":"bg-red-100 text-red-600"}`,children:s.jsx(Cm,{size:20})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("p",{className:`font-semibold ${y?"text-white":"text-gray-900"}`,children:"Cerrar Sesin"}),s.jsx("p",{className:`text-sm ${y?"text-gray-400":"text-gray-600"}`,children:"Salir de tu cuenta actual"})]})]})]})]})}function Sv({icon:t,label:e,description:n,checked:r,onChange:i,isDark:a}){return s.jsx("div",{className:`rounded-xl p-4 transition-all duration-300 hover:scale-[1.02] ${a?"bg-gray-700/30":"bg-gray-50 hover:bg-gray-100"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:`p-2 rounded-lg ${r?a?"bg-blue-600/20 text-blue-400":"bg-blue-50 text-blue-600":a?"bg-gray-600/50 text-gray-400":"bg-gray-100 text-gray-400"}`,children:t}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:e}),s.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:n})]})]}),s.jsx("button",{role:"switch","aria-checked":r,onClick:i,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-300 focus:outline-none focus-visible:ring-4 focus-visible:ring-blue-500/50 ${r?"bg-gradient-to-r from-blue-500 to-blue-600 shadow-lg shadow-blue-500/50":a?"bg-gray-600":"bg-gray-300"}`,children:s.jsx(Q.span,{layout:!0,transition:{type:"spring",stiffness:700,damping:30},className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg ${r?"translate-x-6":"translate-x-1"}`})})]})})}const xg=fx(),zu=({size:t=28})=>{const e=Array.from({length:12},(n,r)=>r);return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        .ios-spinner {
          position: relative;
          display: inline-block;
          width: ${t}px;
          height: ${t}px;
        }
        .ios-spinner .blade {
          position: absolute;
          left: ${t*.4629}px;
          bottom: 0;
          width: ${t*.074}px;
          height: ${t*.2777}px;
          border-radius: ${t*.0555}px;
          background-color: transparent;
          transform-origin: center ${t*-.2222}px;
          animation: ios-spinner-fade 1s infinite linear;
        }
        .ios-spinner .blade:nth-child(1) { animation-delay: 0s; transform: rotate(0deg); }
        .ios-spinner .blade:nth-child(2) { animation-delay: 0.083s; transform: rotate(30deg); }
        .ios-spinner .blade:nth-child(3) { animation-delay: 0.166s; transform: rotate(60deg); }
        .ios-spinner .blade:nth-child(4) { animation-delay: 0.249s; transform: rotate(90deg); }
        .ios-spinner .blade:nth-child(5) { animation-delay: 0.332s; transform: rotate(120deg); }
        .ios-spinner .blade:nth-child(6) { animation-delay: 0.415s; transform: rotate(150deg); }
        .ios-spinner .blade:nth-child(7) { animation-delay: 0.498s; transform: rotate(180deg); }
        .ios-spinner .blade:nth-child(8) { animation-delay: 0.581s; transform: rotate(210deg); }
        .ios-spinner .blade:nth-child(9) { animation-delay: 0.664s; transform: rotate(240deg); }
        .ios-spinner .blade:nth-child(10) { animation-delay: 0.747s; transform: rotate(270deg); }
        .ios-spinner .blade:nth-child(11) { animation-delay: 0.83s; transform: rotate(300deg); }
        .ios-spinner .blade:nth-child(12) { animation-delay: 0.913s; transform: rotate(330deg); }
        @keyframes ios-spinner-fade {
          0% { background-color: #69717d; }
          100% { background-color: transparent; }
        }
      `}),s.jsx("div",{className:"ios-spinner",children:e.map(n=>s.jsx("div",{className:"blade"},n))})]})},J_=({message:t,onClose:e})=>s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4",children:s.jsxs(Q.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"w-full max-w-sm bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:s.jsx(Ll,{size:32,className:"text-green-600 dark:text-green-400"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Listo!"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:t}),s.jsx("button",{onClick:e,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl transition-colors",children:"Aceptar"})]})});function Zq(){const t=Sr(),{theme:e}=Ss(),{usuario:n,usuarioInfo:r,actualizarUsuarioInfo:i}=er(),a=b.useRef(null),l=b.useRef(null),[d,u]=b.useState(!1),[m,g]=b.useState("loading"),[h,y]=b.useState(!1),[w,S]=b.useState(!1),[N,_]=b.useState(""),[D,A]=b.useState({nombre:"",email:"",telefono:"",photoURL:""}),[L,I]=b.useState(""),[F,R]=b.useState(!1),[E,M]=b.useState(!1),[O,j]=b.useState(""),[U,H]=b.useState(""),[V,K]=b.useState(!1),[X,ne]=b.useState(!1),[we,Z]=b.useState(""),[le,re]=b.useState(!1),[B,ce]=b.useState(""),[Se,Ve]=b.useState(""),[$e,Ke]=b.useState(!1),[Ye,lt]=b.useState(!1),[Re,Ct]=b.useState(!1),[Ue,ot]=b.useState(null),[ct,it]=b.useState(""),[Lt,Bt]=b.useState(""),[Ge,mn]=b.useState(""),[Wt,an]=b.useState(!1),[At,bn]=b.useState(!1),[Ht,ze]=b.useState(!1),[Y,ie]=b.useState(""),[pe,he]=b.useState(!1);b.useEffect(()=>{(async()=>{var on;const yt=nr.currentUser||n;if(yt){const Nn=localStorage.getItem(`security_verified_${yt.uid}`);let Wn=!1;if(Nn)try{const{timestamp:Xr}=JSON.parse(Nn),pn=2*60*60*1e3;Date.now()-Xr<pn&&(u(!0),g("verified"),Wn=!0)}catch{localStorage.removeItem(`security_verified_${yt.uid}`)}try{const Xr=await Fn(We(oe,"users",yt.uid));if(Xr.exists()){const pn=Xr.data();A({nombre:pn.nombre||pn.displayName||yt.displayName||"",email:pn.email||yt.email||"",telefono:pn.telefono||pn.phone||"",photoURL:pn.fotoURL||pn.photoURL||(r==null?void 0:r.fotoURL)||yt.photoURL||(r==null?void 0:r.photoURL)||""})}else A({nombre:yt.displayName||"",email:yt.email||"",telefono:"",photoURL:(r==null?void 0:r.fotoURL)||yt.photoURL||(r==null?void 0:r.photoURL)||""})}catch(Xr){console.error("Error cargando datos:",Xr)}const Me=(((on=yt.providerData)==null?void 0:on.map(Xr=>Xr.providerId))||[]).includes("password");y(Me),Wn||g("password")}else g("password")})()},[n==null?void 0:n.uid,r]),b.useEffect(()=>{r&&A(Ce=>{var yt,on;return{nombre:r.nombre||r.displayName||Ce.nombre,email:r.email||((yt=nr.currentUser)==null?void 0:yt.email)||Ce.email,telefono:r.telefono||r.phone||Ce.telefono,photoURL:r.fotoURL||r.photoURL||((on=nr.currentUser)==null?void 0:on.photoURL)||Ce.photoURL}})},[r]),b.useEffect(()=>{const Ce=setTimeout(()=>{m==="password"&&a.current&&a.current.focus(),m==="code"&&l.current&&l.current.focus()},150);return()=>clearTimeout(Ce)},[m]);const He=Ce=>{_(Ce),S(!0)},ge=async Ce=>{if(!(!Ce||le)){K(!0);try{await Na(xg,"sendVerificationCode")({email:Ce,userName:D.nombre||"Usuario"}),re(!0)}catch(yt){console.error("Error enviando cdigo:",yt),Z("Error al enviar cdigo")}finally{K(!1)}}},Ae=()=>t("/perfil"),Be=()=>{const Ce=nr.currentUser;Ce&&localStorage.setItem(`security_verified_${Ce.uid}`,JSON.stringify({timestamp:Date.now()}))},Ze=async()=>{var Ce,yt,on;if(!h){const Nn=((Ce=nr.currentUser)==null?void 0:Ce.email)||D.email;g("code"),Nn&&!le&&ge(Nn);return}if(!L.trim()){j("Ingresa tu contrasea");return}M(!0),j("");try{const Nn=nr.currentUser;if(!Nn){j("Sesin expirada");return}const Wn=Xc.credential(Nn.email,L);await DL(Nn,Wn),Be(),u(!0),He("Identidad verificada")}catch(Nn){console.error("Error auth:",Nn),Nn.code==="auth/invalid-credential"||Nn.code==="auth/wrong-password"?(j("Contrasea incorrecta. Prueba con el cdigo por email."),g("code"),ge(((yt=nr.currentUser)==null?void 0:yt.email)||D.email)):Nn.code==="auth/too-many-requests"?(j("Demasiados intentos. Usa cdigo por email."),g("code"),ge(((on=nr.currentUser)==null?void 0:on.email)||D.email)):j("Error de autenticacin")}finally{M(!1)}},Rt=async()=>{var yt;const Ce=((yt=nr.currentUser)==null?void 0:yt.email)||D.email;if(Ce){K(!0),Z("");try{await Na(xg,"sendVerificationCode")({email:Ce,userName:D.nombre||"Usuario"}),re(!0),g("code")}catch(on){console.error("Error enviando cdigo:",on),Z("Error al enviar cdigo")}finally{K(!1)}}},Ie=async()=>{var Ce;if(U.length!==6){Z("El cdigo debe tener 6 dgitos");return}ne(!0),Z("");try{const yt=((Ce=nr.currentUser)==null?void 0:Ce.email)||D.email,Nn=await Na(xg,"verifyCode")({email:yt,code:U});Nn.data.success?h&&m==="code"?g("newPassword"):(Be(),u(!0),He("Identidad verificada")):Z(Nn.data.error||"Cdigo invlido")}catch(yt){console.error("Error verificando cdigo:",yt),Z("Error al verificar")}finally{ne(!1)}},gt=async()=>{var Ce;if(B.length<6){Z("Mnimo 6 caracteres");return}if(B!==Se){Z("Las contraseas no coinciden");return}Ct(!0),Z("");try{const yt=((Ce=nr.currentUser)==null?void 0:Ce.email)||D.email,Nn=await Na(xg,"resetUserPassword")({email:yt,code:U,newPassword:B});Nn.data.success?(Be(),u(!0),y(!0),He("Contrasea actualizada")):Z(Nn.data.error||"Error")}catch(yt){console.error("Error:",yt),Z("Error al cambiar contrasea")}finally{Ct(!1)}},ft=async()=>{var Ce;if(ct.trim()){ze(!0),ie("");try{const yt=((Ce=nr.currentUser)==null?void 0:Ce.uid)||(n==null?void 0:n.uid);await jn(We(oe,"users",yt),{nombre:ct.trim(),displayName:ct.trim()}),A(on=>({...on,nombre:ct.trim()})),i==null||i({nombre:ct.trim(),displayName:ct.trim()}),He("Nombre actualizado"),ot(null)}catch{ie("Error al actualizar")}finally{ze(!1)}}},Te=async()=>{if(ct.includes("@")){ze(!0),ie("");try{const Ce=nr.currentUser;Ce&&await HL(Ce,ct.trim());const yt=(Ce==null?void 0:Ce.uid)||(n==null?void 0:n.uid);await jn(We(oe,"users",yt),{email:ct.trim()}),A(on=>({...on,email:ct.trim()})),He("Email actualizado"),ot(null)}catch{ie("Error al actualizar email")}finally{ze(!1)}}},nt=async()=>{var Ce;ze(!0),ie("");try{const yt=((Ce=nr.currentUser)==null?void 0:Ce.uid)||(n==null?void 0:n.uid);await jn(We(oe,"users",yt),{telefono:ct.trim(),phone:ct.trim()}),A(on=>({...on,telefono:ct.trim()})),i==null||i({telefono:ct.trim(),phone:ct.trim()}),He("Telfono actualizado"),ot(null)}catch{ie("Error al actualizar")}finally{ze(!1)}},ut=async()=>{if(Lt.length<6){ie("Mnimo 6 caracteres");return}if(Lt!==Ge){ie("Las contraseas no coinciden");return}ze(!0),ie("");try{const Ce=nr.currentUser;Ce&&(await qL(Ce,Lt),He("Contrasea actualizada"),ot(null),Bt(""),mn(""))}catch{ie("Error al actualizar")}finally{ze(!1)}},kn=Ce=>{ot(Ce),ie(""),Ce==="name"?it(D.nombre):Ce==="email"?it(D.email):Ce==="phone"&&it(D.telefono)};return m==="loading"?s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx(zu,{size:40}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Cargando..."})]})}):d?s.jsxs(s.Fragment,{children:[s.jsx(sn,{children:w&&s.jsx(J_,{message:N,onClose:()=>S(!1)})}),s.jsxs("div",{className:"space-y-6 pb-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 shadow-sm",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:s.jsx(Wb,{size:28,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Inicio de sesin y seguridad"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Administra tu contrasea y acceso a la cuenta"})]})]})}),s.jsx("style",{children:`
          .security-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            overflow: hidden;
          }
          .dark .security-card {
            background: linear-gradient(145deg, #1f2937 0%, #111827 100%);
            border-color: rgba(75, 85, 99, 0.4);
          }
          .security-card-header {
            padding: 16px;
            border-bottom: 1px solid #e5e7eb;
            background: #f9fafb;
          }
          .dark .security-card-header {
            border-color: rgba(75, 85, 99, 0.3);
            background: rgba(31, 41, 55, 0.5);
          }
          .security-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            width: 100%;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
          }
          .security-item:hover {
            background: rgba(59, 130, 246, 0.04);
          }
          .dark .security-item:hover {
            background: rgba(96, 165, 250, 0.06);
          }
          .security-icon-box {
            padding: 10px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
          }
          .security-icon-box.blue {
            background: rgba(59, 130, 246, 0.1);
          }
          .dark .security-icon-box.blue {
            background: rgba(59, 130, 246, 0.15);
          }
          .security-icon-box.purple {
            background: rgba(139, 92, 246, 0.1);
          }
          .dark .security-icon-box.purple {
            background: rgba(139, 92, 246, 0.15);
          }
          .security-icon-box.green {
            background: rgba(34, 197, 94, 0.1);
          }
          .dark .security-icon-box.green {
            background: rgba(34, 197, 94, 0.15);
          }
          .security-icon-box.orange {
            background: rgba(249, 115, 22, 0.1);
          }
          .dark .security-icon-box.orange {
            background: rgba(249, 115, 22, 0.15);
          }
          .security-icon-box.pink {
            background: rgba(236, 72, 153, 0.1);
          }
          .dark .security-icon-box.pink {
            background: rgba(236, 72, 153, 0.15);
          }
          .security-icon-box.cyan {
            background: rgba(6, 182, 212, 0.1);
          }
          .dark .security-icon-box.cyan {
            background: rgba(6, 182, 212, 0.15);
          }
          .security-divider {
            height: 1px;
            background: #f3f4f6;
            margin: 0 16px;
          }
          .dark .security-divider {
            background: rgba(75, 85, 99, 0.3);
          }
        `}),s.jsxs("div",{className:"security-card",children:[s.jsx("div",{className:"security-card-header",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center",children:s.jsx(tu,{size:20,className:"text-blue-500"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Informacin personal"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Datos de tu cuenta"})]})]})}),s.jsx("div",{children:[{icon:tu,label:"Nombre",value:D.nombre,field:"name",color:"blue",iconColor:"text-blue-500"},{icon:Zf,label:"Email",value:D.email,field:"email",color:"blue",iconColor:"text-blue-500"},{icon:hw,label:"Telfono",value:D.telefono,field:"phone",color:"blue",iconColor:"text-blue-500"},{icon:pB,label:"Contrasea",value:"",field:"password",color:"blue",iconColor:"text-blue-500"}].map((Ce,yt,on)=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>kn(Ce.field),className:"security-item",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`security-icon-box ${Ce.color}`,children:s.jsx(Ce.icon,{size:20,className:Ce.iconColor})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ce.label}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Ce.value||"No configurado"})]})]}),s.jsx(_B,{size:16,className:"text-gray-400 dark:text-gray-500"})]}),yt<on.length-1&&s.jsx("div",{className:"security-divider"})]},Ce.field))})]}),s.jsxs("div",{className:"security-card",children:[s.jsx("div",{className:"security-card-header",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:s.jsx(Bc,{size:20,className:"text-gray-600 dark:text-gray-300"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Opciones de seguridad"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Proteccin adicional"})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"security-item",style:{cursor:"default"},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"security-icon-box blue",children:s.jsx(GB,{size:20,className:"text-blue-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Verificacin en dos pasos"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Proteccin extra"})]})]}),s.jsx("button",{onClick:()=>{he(!pe),He(pe?"Desactivado":"Activado")},className:`w-12 h-7 rounded-full transition-all relative ${pe?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`,children:s.jsx("span",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform ${pe?"left-6":"left-1"}`})})]}),s.jsx("div",{className:"security-divider"}),s.jsxs("button",{onClick:()=>He("Prximamente"),className:"security-item",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"security-icon-box blue",children:s.jsx(nB,{size:20,className:"text-blue-500"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Clave de acceso"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Huella o Face ID"})]})]}),s.jsx(_a,{size:18,className:"text-gray-400 dark:text-gray-500"})]})]})]})]}),s.jsx(sn,{children:Ue&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4",children:s.jsxs(Q.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-xl",children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[Ue==="name"&&"Editar nombre",Ue==="email"&&"Editar email",Ue==="phone"&&"Editar telfono",Ue==="password"&&"Cambiar contrasea"]}),s.jsx("button",{onClick:()=>ot(null),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(gs,{size:20,className:"text-gray-500"})})]}),s.jsx("div",{className:"p-5 space-y-4",children:Ht?s.jsxs("div",{className:"py-12 flex flex-col items-center",children:[s.jsx(zu,{size:36}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Guardando..."})]}):s.jsxs(s.Fragment,{children:[Ue==="password"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Nueva contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:Wt?"text":"password",value:Lt,onChange:Ce=>Bt(Ce.target.value),placeholder:"Mnimo 6 caracteres",className:"w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>an(!Wt),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:Wt?s.jsx(Xu,{size:20,className:"text-gray-500"}):s.jsx(Id,{size:20,className:"text-gray-500"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Confirmar"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:At?"text":"password",value:Ge,onChange:Ce=>mn(Ce.target.value),placeholder:"Repite la contrasea",className:"w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>bn(!At),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:At?s.jsx(Xu,{size:20,className:"text-gray-500"}):s.jsx(Id,{size:20,className:"text-gray-500"})})]})]})]}):s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:[Ue==="name"&&"Nombre",Ue==="email"&&"Email",Ue==="phone"&&"Telfono"]}),s.jsx("input",{type:Ue==="email"?"email":Ue==="phone"?"tel":"text",value:ct,onChange:Ce=>it(Ce.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Y&&s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[s.jsx(Nc,{size:14})," ",Y]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{onClick:()=>ot(null),className:"flex-1 py-3 rounded-xl font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:()=>{Ue==="name"?ft():Ue==="email"?Te():Ue==="phone"?nt():Ue==="password"&&ut()},className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-colors",children:"Guardar"})]})]})})]})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(sn,{children:w&&s.jsx(J_,{message:N,onClose:()=>S(!1)})}),s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4",children:s.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[m==="password"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 rounded-xl bg-blue-100 dark:bg-blue-900/30",children:s.jsx(Bc,{size:24,className:"text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Verificar identidad"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Para proteger tu cuenta"})]})]}),s.jsx("button",{onClick:Ae,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(gs,{size:20,className:"text-gray-500"})})]}),s.jsx("div",{className:"p-5 space-y-4",children:E?s.jsxs("div",{className:"py-12 flex flex-col items-center",children:[s.jsx(zu,{size:36}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verificando..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:a,type:F?"text":"password",value:L,onChange:Ce=>{I(Ce.target.value),j("")},onKeyDown:Ce=>Ce.key==="Enter"&&Ze(),placeholder:"Tu contrasea",className:`w-full px-4 py-3 pr-12 rounded-xl border ${O?"border-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"} text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500`}),s.jsx("button",{onClick:()=>R(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:F?s.jsx(Xu,{size:20,className:"text-gray-500"}):s.jsx(Id,{size:20,className:"text-gray-500"})})]}),O&&s.jsxs("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[s.jsx(Nc,{size:14})," ",O]})]}),s.jsx("button",{onClick:Ze,disabled:!L,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white font-semibold rounded-xl transition-colors",children:"Continuar"}),s.jsxs("div",{className:"relative py-2",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),s.jsx("div",{className:"relative flex justify-center",children:s.jsx("span",{className:"px-3 text-sm bg-white dark:bg-gray-800 text-gray-500",children:"o"})})]}),s.jsxs("button",{onClick:Rt,disabled:V,className:"w-full py-3 rounded-xl font-medium bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 flex items-center justify-center gap-2 transition-colors",children:[V?s.jsx(zu,{size:20}):s.jsx(Zf,{size:20}),V?"Enviando...":"Verificar con email"]})]})})]}),m==="code"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex items-center gap-3",children:[h&&s.jsx("button",{onClick:()=>g("password"),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(Sm,{size:20,className:"text-gray-500"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Cdigo de verificacin"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:D.email})]}),s.jsx("button",{onClick:Ae,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(gs,{size:20,className:"text-gray-500"})})]}),s.jsx("div",{className:"p-5 space-y-4",children:V||X?s.jsxs("div",{className:"py-12 flex flex-col items-center",children:[s.jsx(zu,{size:36}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:V?"Enviando cdigo...":"Verificando..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:s.jsx(Zf,{size:32,className:"text-blue-600 dark:text-blue-400"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:le?"Revisa tu correo":"Te enviaremos un cdigo"})]}),s.jsx("input",{ref:l,type:"text",inputMode:"numeric",maxLength:6,value:U,onChange:Ce=>{H(Ce.target.value.replace(/\D/g,"")),Z("")},onKeyDown:Ce=>Ce.key==="Enter"&&U.length===6&&Ie(),placeholder:"000000",className:`w-full text-center text-3xl font-mono tracking-widest px-4 py-4 rounded-xl border ${we?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500`}),we&&s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 text-center flex items-center justify-center gap-1",children:[s.jsx(Nc,{size:14})," ",we]}),s.jsx("button",{onClick:Ie,disabled:U.length!==6,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white font-semibold rounded-xl transition-colors",children:"Verificar cdigo"}),s.jsx("button",{onClick:Rt,disabled:V,className:"w-full py-2 text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"Reenviar cdigo"})]})})]}),m==="newPassword"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2.5 rounded-xl bg-blue-50 dark:bg-blue-900/20",children:s.jsx(Wb,{size:24,className:"text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Nueva contrasea"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Crea una contrasea segura"})]})]}),s.jsx("button",{onClick:Ae,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(gs,{size:20,className:"text-gray-500"})})]}),s.jsx("div",{className:"p-5 space-y-4",children:Re?s.jsxs("div",{className:"py-12 flex flex-col items-center",children:[s.jsx(zu,{size:36}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Guardando..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Nueva contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:$e?"text":"password",value:B,onChange:Ce=>ce(Ce.target.value),placeholder:"Mnimo 6 caracteres",className:"w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500"}),s.jsx("button",{onClick:()=>Ke(!$e),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:$e?s.jsx(Xu,{size:20,className:"text-gray-500"}):s.jsx(Id,{size:20,className:"text-gray-500"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Confirmar"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:Ye?"text":"password",value:Se,onChange:Ce=>Ve(Ce.target.value),placeholder:"Repite la contrasea",className:"w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500"}),s.jsx("button",{onClick:()=>lt(!Ye),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:Ye?s.jsx(Xu,{size:20,className:"text-gray-500"}):s.jsx(Id,{size:20,className:"text-gray-500"})})]})]}),we&&s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[s.jsx(Nc,{size:14})," ",we]}),s.jsxs("button",{onClick:gt,disabled:B.length<6||B!==Se,className:"w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 text-white font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[s.jsx(Ll,{size:20}),"Guardar contrasea"]})]})})]})]})})]})}function eG(){const{usuario:t,usuarioInfo:e,actualizarUsuarioInfo:n}=er(),[r,i]=b.useState(!1),[a,l]=b.useState(!!(e!=null&&e.preferenciaPagoEnTienda)),[d,u]=b.useState("");b.useEffect(()=>{l(!!(e!=null&&e.preferenciaPagoEnTienda))},[e==null?void 0:e.preferenciaPagoEnTienda]);const m=async h=>{if(t)try{i(!0),await n({preferenciaPagoEnTienda:h});const y={preferenciaPagoEnTienda:h,updatedAt:new Date};await Cn(We(oe,"users",t.uid),y,{merge:!0}),await Cn(We(oe,"usuarios",t.uid),y,{merge:!0}),u("Preferencia guardada"),setTimeout(()=>u(""),2e3)}catch{}finally{i(!1)}},g=async()=>{const h=!a;l(h),await m(h)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billetera"}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-900 font-semibold",children:"Pagar en tienda"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Usa el mtodo de pago en tienda (paga cuando recojas)."})]}),s.jsx("button",{onClick:g,disabled:r,role:"switch","aria-checked":a,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 ${a?"bg-blue-600":"bg-gray-300"} disabled:opacity-60`,children:s.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ${a?"translate-x-5":"translate-x-1"}`})})]}),d&&s.jsx("p",{className:"text-xs text-green-600 mt-2",children:d})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:"Mtodos guardados"}),s.jsx("button",{className:"px-3 py-1.5 text-sm font-medium rounded-lg bg-blue-600 text-white hover:bg-blue-700",children:"Agregar"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Prximamente podrs vincular tarjetas y cuentas."})]})]})}function tG({stats:t,user:e,userInfo:n,store:r,storeId:i}){const{convertirseEnVendedor:a}=er(),l=Sr();((t==null?void 0:t.publicaciones)||0)>0;const d=(r==null?void 0:r.nombre)||(r==null?void 0:r.name)||(n==null?void 0:n.storeName)||(n==null?void 0:n.displayName)||"Mi Tienda",u=(r==null?void 0:r.logo)||(r==null?void 0:r.logoUrl)||(r==null?void 0:r.logoURL)||(r==null?void 0:r.tiendaLogo)||(r==null?void 0:r.storeImage)||(r==null?void 0:r.image)||(r==null?void 0:r.imageUrl)||(r==null?void 0:r.foto)||(r==null?void 0:r.fotoUrl)||(r==null?void 0:r.fotoURL)||"",m=(r==null?void 0:r.banner)||(r==null?void 0:r.bannerUrl)||(r==null?void 0:r.bannerURL)||(r==null?void 0:r.tiendaBanner)||(r==null?void 0:r.storeBanner)||(r==null?void 0:r.cover)||(r==null?void 0:r.portada)||(r==null?void 0:r.coverUrl)||(r==null?void 0:r.coverURL)||"",[g,h]=Ns.useState({id:"",logo:"",banner:""});Ns.useEffect(()=>{let _=!0;return(async()=>{try{if(!!u&&!!m)return;let I=i||(r==null?void 0:r.id)||(n==null?void 0:n.storeId)||"",F=null;const R=async(j,U)=>{try{const H=await Fn(We(oe,j,U));if(H.exists())return H.data()}catch{}return null},E=async(j,U,H)=>{for(const V of U)try{const K=Ot(pt(oe,j),qt(V,"==",H)),X=await rn(K);if(!X.empty){const ne=X.docs[0];return{id:ne.id,data:ne.data()}}}catch{}return null};if(I&&(F=await R("tiendas",I)||await R("stores",I)),!F){const j=[e==null?void 0:e.uid,n==null?void 0:n.uid,n==null?void 0:n.ownerUid,n==null?void 0:n.storeOwnerId].filter(Boolean),U=((n==null?void 0:n.email)||(e==null?void 0:e.email)||"").toLowerCase().trim(),H=["ownerId","owner_id","propietarioId","propietario_id","userId","createdBy"],V=["ownerUid","ownerId","owner_id","userId","createdBy"];for(const K of j){if(F)break;const X=await E("tiendas",H,K);if(X){I=X.id,F=X.data;break}const ne=await E("stores",V,K);if(ne){I=ne.id,F=ne.data;break}}if(!F&&U){const K=await E("stores",["ownerEmail"],U);K&&(I=K.id,F=K.data)}}if(!F)return;const M=F.logo||F.logoUrl||F.logoURL||F.tiendaLogo||F.storeImage||F.image||F.imageUrl||F.foto||F.fotoUrl||F.fotoURL||"",O=F.banner||F.bannerUrl||F.bannerURL||F.tiendaBanner||F.storeBanner||F.cover||F.portada||F.coverUrl||F.coverURL||"";_&&h({id:I,logo:M,banner:O})}catch{}})(),()=>{_=!1}},[i,r==null?void 0:r.id,n==null?void 0:n.storeId,u,m,e==null?void 0:e.uid,n==null?void 0:n.uid,n==null?void 0:n.email]);const y=m||g.banner,w=u||g.logo,S=(r==null?void 0:r.descripcion)||(r==null?void 0:r.description)||(n==null?void 0:n.storeDescription)||`Tienda de ${(n==null?void 0:n.displayName)||"productos"}. ${(t==null?void 0:t.publicaciones)||0} productos disponibles.`,N=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.admin)===!0||(n==null?void 0:n.isAdmin)===!0;return(n==null?void 0:n.role)==="seller"||(n==null||n.isSeller),!r&&!i?s.jsx("div",{className:"w-full max-w-3xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl md:rounded-3xl border border-gray-200 dark:border-slate-700 shadow-sm p-6 md:p-8 text-center",children:[s.jsx("div",{className:"mx-auto mb-3 md:mb-4 w-10 h-10 md:w-12 md:h-12 rounded-xl md:rounded-2xl bg-blue-50 text-blue-700 flex items-center justify-center",children:s.jsx(xr,{size:20,className:"md:w-[22px] md:h-[22px]"})}),s.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Todava no tienes una tienda"}),s.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mb-4 md:mb-6",children:"Crea tu tienda y empieza a vender."}),s.jsxs("button",{onClick:async()=>{try{await a({storeName:(n==null?void 0:n.displayName)||"Mi Tienda"}),window.location.href="/admin"}catch{}},className:"inline-flex items-center justify-center gap-2 px-4 py-2 md:px-5 md:py-2.5 bg-blue-600 text-white rounded-lg md:rounded-xl font-semibold text-sm md:text-base shadow-lg shadow-blue-600/30 hover:bg-blue-700 transition-colors",children:[s.jsx(Bh,{size:16,className:"md:w-[18px] md:h-[18px]"}),"Empezar a vender"]})]})}):s.jsxs("div",{className:"space-y-4 md:space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:"Mi Tienda"}),N&&s.jsx("a",{href:"/admin",className:"text-xs md:text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 hidden md:inline",children:"Dashboard "})]}),N?s.jsxs("div",{className:"group bg-white dark:bg-slate-800 rounded-2xl md:rounded-3xl overflow-hidden shadow-lg md:shadow-xl border border-gray-100 dark:border-slate-700",children:[s.jsxs("div",{className:"h-32 md:h-48 w-full bg-gray-200 dark:bg-slate-700 relative overflow-hidden flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 w-full h-full bg-gray-100 dark:bg-slate-700"}),y&&s.jsx("img",{src:y,alt:"Portada",className:"relative z-10 w-full h-full object-contain",onError:_=>{try{_.currentTarget.style.display="none"}catch{}}})]}),s.jsx("div",{className:"px-4 py-4 md:px-8 md:py-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6 items-start md:items-center",children:[s.jsx("div",{className:"flex-shrink-0 mx-auto md:mx-0",children:s.jsxs("div",{className:"w-16 h-16 md:w-24 md:h-24 rounded-xl md:rounded-2xl bg-white dark:bg-slate-800 p-1.5 md:p-2 shadow-md md:shadow-lg border border-gray-100 dark:border-slate-600",children:[s.jsx("div",{className:"logo-fallback w-full h-full rounded-lg md:rounded-xl bg-gray-50 dark:bg-slate-700 flex items-center justify-center",children:s.jsx(xr,{size:24,className:"text-gray-400 dark:text-gray-300 md:w-8 md:h-8"})}),w&&s.jsx("img",{src:w,alt:"Logo",className:"w-full h-full rounded-lg md:rounded-xl object-contain bg-gray-50 dark:bg-slate-700",onLoad:_=>{try{const D=_.currentTarget.parentElement,A=D&&D.querySelector(".logo-fallback");A&&(A.style.display="none")}catch{}},onError:_=>{try{const D=_.currentTarget.parentElement,A=D&&D.querySelector(".logo-fallback");A&&(A.style.display=""),_.currentTarget.style.display="none"}catch{}}})]})}),s.jsxs("div",{className:"flex-1 w-full md:w-auto min-w-0 text-center md:text-left",children:[s.jsx("h3",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white mb-1 md:mb-2 truncate",children:d}),s.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-300 leading-relaxed line-clamp-2",children:S||`${(t==null?void 0:t.publicaciones)||0} productos activos  Calificacin 5.0`})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:gap-3 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{const _=i||(r==null?void 0:r.id)||(g==null?void 0:g.id);l(_?`/tiendas/${_}`:"/tiendas")},className:"flex justify-center items-center gap-1.5 px-3 py-2 md:px-5 md:py-2.5 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg md:rounded-xl font-medium md:font-semibold text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors shadow-sm",children:[s.jsx(Ub,{size:16,className:"md:w-[18px] md:h-[18px]"}),s.jsx("span",{className:"text-xs md:text-sm",children:"Ver Tienda"})]}),s.jsxs("button",{onClick:()=>l("/admin"),className:"flex justify-center items-center gap-1.5 px-3 py-2 md:px-5 md:py-2.5 bg-blue-600 text-white rounded-lg md:rounded-xl font-medium md:font-semibold text-sm shadow-md md:shadow-lg shadow-blue-600/20 md:shadow-blue-600/30 hover:bg-blue-700 transition-colors",children:[s.jsx(qd,{size:16,className:"md:w-[18px] md:h-[18px]"}),s.jsx("span",{className:"text-xs md:text-sm",children:"Gestionar"})]})]})]})})]}):s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl md:rounded-3xl shadow-lg md:shadow-xl border border-gray-100 dark:border-slate-700 p-6 md:p-8",children:s.jsxs("div",{className:"text-center md:text-left",children:[s.jsx("h3",{className:"text-lg md:text-2xl font-bold text-gray-900 dark:text-white mb-4 md:mb-6",children:d}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 justify-center md:justify-start",children:[s.jsxs("button",{onClick:()=>{const _=i||(r==null?void 0:r.id)||(g==null?void 0:g.id);l(_?`/tiendas/${_}`:"/tiendas")},className:"flex justify-center items-center gap-2 px-4 py-2.5 md:px-6 md:py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg md:rounded-xl font-medium text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-slate-600 transition-colors shadow-sm",children:[s.jsx(Ub,{size:18}),s.jsx("span",{children:"Ver Tienda"})]}),s.jsxs("button",{onClick:()=>l("/admin"),className:"flex justify-center items-center gap-2 px-4 py-2.5 md:px-6 md:py-3 bg-blue-600 text-white rounded-lg md:rounded-xl font-medium text-sm shadow-md md:shadow-lg shadow-blue-600/20 hover:bg-blue-700 transition-colors",children:[s.jsx(qd,{size:18}),s.jsx("span",{children:"Gestionar"})]})]})]})})]})}function nG({open:t,onClose:e,initialInfo:n,onSave:r,saving:i}){var F,R;const[a,l]=b.useState(""),[d,u]=b.useState(""),[m,g]=b.useState(""),[h,y]=b.useState(null),[w,S]=b.useState(null),[N,_]=b.useState(!1),D=b.useRef(null);b.useEffect(()=>{t&&(l((n==null?void 0:n.displayName)||""),u((n==null?void 0:n.telefono)||""),g((n==null?void 0:n.direccion)||""),S((n==null?void 0:n.fotoURL)||null),y(null),_(!1))},[t,n]);const A=E=>{var O;const M=(O=E.target.files)==null?void 0:O[0];if(M&&M.type.startsWith("image/")){y(M),_(!1);const j=new FileReader;j.onloadend=()=>{S(j.result)},j.readAsDataURL(M)}},L=()=>{y(null),S(null),_(!0),D.current&&(D.current.value="")},I=()=>{r({displayName:a,telefono:d,direccion:m,newPhoto:h,removePhoto:N})};return s.jsx(sn,{children:t&&s.jsxs("div",{className:"fixed inset-0 z-[999999]",role:"dialog","aria-modal":!0,onClick:e,style:{zIndex:999999},children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50",style:{zIndex:999998}}),s.jsxs(Q.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:260},className:"absolute left-0 right-0 bottom-0 bg-white rounded-t-2xl shadow-2xl p-6 md:hidden max-h-[85vh] overflow-y-auto",style:{zIndex:999999},onClick:E=>E.stopPropagation(),children:[s.jsx("div",{className:"mx-auto h-1.5 w-14 bg-gray-300 rounded-full mb-4"}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Editar Perfil"}),s.jsx("button",{className:"p-2 rounded hover:bg-gray-100",onClick:e,children:""})]}),s.jsxs("div",{className:"flex flex-col items-center mb-6",style:{position:"relative",zIndex:1},children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-100 dark:bg-slate-700 flex items-center justify-center text-gray-700 dark:text-white text-2xl font-bold shadow-lg",children:w?s.jsx("img",{src:w,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{children:((F=a==null?void 0:a.charAt(0))==null?void 0:F.toUpperCase())||"U"})}),w&&s.jsx("button",{onClick:L,className:"absolute -top-1 -right-1 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg",style:{position:"absolute",zIndex:2},children:s.jsx(gs,{size:14})})]}),s.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:A,className:"hidden"}),s.jsxs("button",{onClick:()=>{var E;return(E=D.current)==null?void 0:E.click()},className:"mt-3 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors flex items-center gap-2 text-sm font-medium",style:{position:"relative",zIndex:1},children:[s.jsx(Fb,{size:16}),w?"Cambiar foto":"Subir foto"]})]}),s.jsxs("div",{className:"space-y-4",style:{position:"relative",zIndex:1},children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),s.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},value:a,onChange:E=>l(E.target.value),placeholder:"Tu nombre"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),s.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},value:d,onChange:E=>u(E.target.value),placeholder:"809-555-1234"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direccin"}),s.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},rows:3,value:m,onChange:E=>g(E.target.value),placeholder:"Tu direccin completa"})]})]}),s.jsxs("div",{className:"mt-6 flex gap-2",style:{position:"relative",zIndex:1},children:[s.jsx("button",{className:"flex-1 px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},onClick:e,children:"Cancelar"}),s.jsx("button",{disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50",style:{position:"relative",zIndex:1},onClick:I,children:i?"Guardando...":"Guardar cambios"})]})]}),s.jsx("div",{className:"hidden md:flex items-center justify-center h-full",style:{zIndex:999999},onClick:E=>E.stopPropagation(),children:s.jsxs(Q.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6",style:{position:"relative",zIndex:999999},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Editar Perfil"}),s.jsx("button",{className:"p-2 rounded hover:bg-gray-100",onClick:e,children:""})]}),s.jsxs("div",{className:"flex flex-col items-center mb-6",style:{position:"relative",zIndex:1},children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-100 dark:bg-slate-700 flex items-center justify-center text-gray-700 dark:text-white text-2xl font-bold shadow-lg",children:w?s.jsx("img",{src:w,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{children:((R=a==null?void 0:a.charAt(0))==null?void 0:R.toUpperCase())||"U"})}),w&&s.jsx("button",{onClick:L,className:"absolute -top-1 -right-1 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg",style:{position:"absolute",zIndex:2},children:s.jsx(gs,{size:14})})]}),s.jsxs("button",{onClick:()=>{var E;return(E=D.current)==null?void 0:E.click()},className:"mt-3 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors flex items-center gap-2 text-sm font-medium",style:{position:"relative",zIndex:1},children:[s.jsx(Fb,{size:16}),w?"Cambiar foto":"Subir foto"]})]}),s.jsxs("div",{className:"space-y-4",style:{position:"relative",zIndex:1},children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),s.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},value:a,onChange:E=>l(E.target.value),placeholder:"Tu nombre"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),s.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},value:d,onChange:E=>u(E.target.value),placeholder:"809-555-1234"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direccin"}),s.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},rows:3,value:m,onChange:E=>g(E.target.value),placeholder:"Tu direccin completa"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",style:{position:"relative",zIndex:1},children:[s.jsx("button",{className:"px-4 py-2 border rounded-lg",style:{position:"relative",zIndex:1},onClick:e,children:"Cancelar"}),s.jsx("button",{disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50",style:{position:"relative",zIndex:1},onClick:I,children:i?"Guardando...":"Guardar cambios"})]})]})})]})})}function rG({open:t,onClose:e,order:n}){var r,i;return t?s.jsx(sn,{children:t&&s.jsxs("div",{className:"fixed inset-0 z-[9999]",onClick:e,children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40"}),s.jsxs(Q.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:260},className:"absolute left-0 right-0 bottom-0 bg-white rounded-t-2xl shadow-2xl p-5 max-h-[85vh] overflow-y-auto md:hidden",onClick:a=>a.stopPropagation(),children:[s.jsx("div",{className:"mx-auto h-1.5 w-14 bg-gray-300 rounded-full mb-4"}),s.jsx("h3",{className:"text-lg font-bold mb-3",children:"Detalles del pedido"}),n?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Pedido #"}),s.jsx("span",{className:"font-semibold",children:n.numeroOrden||n.id})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Fecha"}),s.jsx("span",{className:"font-semibold",children:(r=n.fecha)!=null&&r.seconds?new Date(n.fecha.seconds*1e3).toLocaleDateString():"-"})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{className:"font-semibold",children:["RD$ ",n.total]})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Productos"}),s.jsx("div",{className:"space-y-3",children:(i=n.productos)==null?void 0:i.map((a,l)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-16 w-16 rounded-md bg-gray-50 border border-gray-200 flex items-center justify-center overflow-hidden",children:a.imagen?s.jsx("img",{src:a.imagen,alt:a.nombre,className:"h-full w-full object-cover"}):s.jsx("div",{className:"text-gray-400 text-xs",children:"IMG"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:a.nombre}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Cant: ",a.cantidad]})]}),s.jsxs("div",{className:"text-sm font-semibold text-blue-600 whitespace-nowrap",children:["RD$ ",a.precio]})]},l))})]})]}):s.jsx("p",{className:"text-gray-500",children:"Sin informacin."}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:e,className:"flex-1 py-2 border rounded-lg",children:"Cerrar"}),s.jsx("button",{className:"flex-1 py-2 bg-blue-600 text-white rounded-lg",children:"Comprar de nuevo"})]})]})]})}):null}function sG(t){const{usuario:e}=er(),[n,r]=b.useState(!1),[i,a]=b.useState(!0);return b.useEffect(()=>{if(!e||!t){a(!1);return}if(e.uid===t){r(!1),a(!1);return}(async()=>{try{const u=We(oe,"users",t,"followers",e.uid),m=await Fn(u);r(m.exists())}catch{r(!1)}finally{a(!1)}})()},[e,t]),{isFollowing:n,toggleFollow:async()=>{if(!e){Vt("Debes iniciar sesin para seguir cuentas.","warning","Inicia sesin");return}if(e.uid===t)return;const d=n;r(!n);try{const u=We(oe,"users",t),m=We(oe,"users",e.uid),g=We(oe,"users",t,"followers",e.uid),h=We(oe,"users",e.uid,"following",t);if(d===!0)(await Fn(g)).exists()&&(await co(g),await co(h),await jn(u,{"stats.seguidores":kc(-1)}),await jn(m,{"stats.seguidos":kc(-1)}));else{if((await Fn(g)).exists()){r(!0);return}const S=(await Fn(u)).data();await Cn(g,{uid:e.uid,displayName:e.displayName||"Usuario",photoURL:e.photoURL||null,seguidoEn:Qd()}),await Cn(h,{uid:t,displayName:(S==null?void 0:S.displayName)||"Usuario",photoURL:(S==null?void 0:S.photoURL)||null,storeName:(S==null?void 0:S.storeName)||null,seguidoEn:Qd()}),await jn(u,{"stats.seguidores":kc(1)}),await jn(m,{"stats.seguidos":kc(1)})}}catch(u){r(d),u.code==="permission-denied"?Vt("No tienes permisos para realizar esta accin.","error","Permiso denegado"):Vt("Error al seguir/dejar de seguir. Intenta de nuevo.","error","Error")}},loading:i}}function L0({targetUserId:t,variant:e="default",customClass:n=""}){const{isFollowing:r,toggleFollow:i,loading:a}=sG(t),[l,d]=Ns.useState(!1);return a?s.jsx("div",{className:`
          bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse
          ${e==="compact"?"w-16 h-7":"w-24 h-9"}
          ${n}
        `}):e==="icon-only"?s.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),i()},className:`
          p-2 rounded-full transition-all duration-200
          ${r?"bg-gray-100 text-gray-700 hover:bg-red-50 hover:text-red-500":"bg-blue-600 text-white hover:bg-blue-700"}
          ${n}
        `,title:r?"Dejar de seguir":"Seguir",children:r?s.jsx(ka,{size:18}):s.jsx(eu,{size:18})}):s.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),i()},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:`
        font-semibold rounded-lg transition-all duration-200 
        flex items-center justify-center gap-2
        ${e==="compact"?"px-4 py-1.5 text-xs":"px-6 py-2 text-sm"}
        ${r?`
            bg-transparent border border-gray-300 text-gray-700
            hover:border-red-500 hover:text-red-500 hover:bg-red-50
            dark:border-gray-600 dark:text-gray-300
            dark:hover:border-red-400 dark:hover:text-red-400 dark:hover:bg-red-950
          `:`
            bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg
            dark:bg-blue-500 dark:hover:bg-blue-600
          `}
        active:scale-95
        ${n}
      `,children:r?s.jsx(s.Fragment,{children:l?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs md:text-sm",children:""}),s.jsx("span",{children:"Dejar de seguir"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ka,{size:e==="compact"?14:16}),s.jsx("span",{children:"Siguiendo"})]})}):s.jsxs(s.Fragment,{children:[s.jsx(eu,{size:e==="compact"?14:16}),s.jsx("span",{children:"Seguir"})]})})}function hT({isOpen:t,onClose:e,userId:n,type:r="seguidores"}){const i=Sr(),[a,l]=b.useState([]),[d,u]=b.useState(!0),[m,g]=b.useState("todos");if(b.useEffect(()=>{if(!t||!n)return;(async()=>{u(!0);try{let D=[];const L=pt(oe,`users/${n}/${r==="seguidores"?"followers":"following"}`),F=(await rn(L)).docs.map(async R=>{const E=R.id,M=We(oe,"users",E),O=await Fn(M);if(O.exists()){const j=O.data(),U=!!(j.storeName||j.storeId||j.role==="vendedor"||j.isVendedor||j.tiendaId);let H=null;if(U&&j.storeId)try{const V=await Fn(We(oe,"stores",j.storeId));if(V.exists())H=V.data();else{const K=await Fn(We(oe,"tiendas",j.storeId));K.exists()&&(H=K.data())}}catch{}return{uid:E,...j,isStore:U,storeInfo:H,seguidoEn:R.data().seguidoEn}}return null});D=(await Promise.all(F)).filter(Boolean),D.sort((R,E)=>R.isStore&&!E.isStore?-1:!R.isStore&&E.isStore?1:0),l(D)}catch{}finally{u(!1)}})()},[t,n,r]),!t)return null;const h=r==="seguidores"?"Seguidores":"Siguiendo",y=r==="seguidores"?"Personas y tiendas que te siguen":"Personas y tiendas que sigues",w=a.filter(_=>m==="todos"?!0:m==="tiendas"?_.isStore:m==="usuarios"?!_.isStore:!0),S=a.filter(_=>_.isStore).length,N=a.filter(_=>!_.isStore).length;return s.jsx("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/80 px-4",onClick:e,children:s.jsxs("div",{onClick:_=>_.stopPropagation(),className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(gs,{size:22,className:"text-gray-500"})})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y}),!d&&a.length>0&&s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsxs("button",{onClick:()=>g("todos"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${m==="todos"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(nu,{size:14}),"Todos (",a.length,")"]}),s.jsxs("button",{onClick:()=>g("tiendas"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${m==="tiendas"?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(xr,{size:14}),"Tiendas (",S,")"]}),s.jsxs("button",{onClick:()=>g("usuarios"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${m==="usuarios"?"bg-green-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(tu,{size:14}),"Usuarios (",N,")"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[s.jsx(Ml,{size:"large",color:"blue",variant:"dots"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-base font-medium mt-4",children:["Cargando ",r,"..."]})]}):a.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:s.jsx(nu,{size:36,className:"text-gray-400"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center font-medium",children:r==="seguidores"?"An no tienes seguidores":"An no sigues a nadie"}),s.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm text-center mt-1",children:r==="seguidores"?"Cuando alguien te siga, aparecer aqu":"Explora tiendas y usuarios para seguir"})]}):w.length===0?s.jsx("div",{className:"flex flex-col items-center justify-center py-16 px-6",children:s.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:["No hay ",m==="tiendas"?"tiendas":"usuarios"," en esta lista"]})}):s.jsx("div",{className:"p-3 space-y-2",children:w.map(_=>{var D;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer min-w-0",onClick:()=>{_.isStore&&_.storeId?i(`/tienda/${_.storeId}`):i(`/user/${_.uid}`),e()},children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("img",{src:_.photoURL||((D=_.storeInfo)==null?void 0:D.logo)||`https://ui-avatars.com/api/?name=${encodeURIComponent(_.displayName||_.storeName||"User")}&size=200&background=${_.isStore?"7c3aed":"2563eb"}&color=fff&bold=true`,alt:_.displayName||_.storeName,className:`w-12 h-12 rounded-full object-cover border-2 ${_.isStore?"border-purple-500":"border-blue-500"}`}),s.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center ${_.isStore?"bg-purple-500":"bg-blue-500"}`,children:_.isStore?s.jsx(xr,{size:10,className:"text-white"}):s.jsx(tu,{size:10,className:"text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:_.displayName||_.storeName||"Usuario"})}),_.isStore?s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400 bg-purple-100 dark:bg-purple-900/30 px-2 py-0.5 rounded-full",children:"Tienda"}),_.storeName&&_.storeName!==_.displayName&&s.jsx("span",{className:"text-xs text-gray-500 truncate",children:_.storeName})]}):s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-0.5 rounded-full",children:"Usuario"}),_.email&&s.jsx("span",{className:"text-xs text-gray-400 truncate",children:_.email.split("@")[0]})]})]})]}),s.jsx("div",{className:"flex-shrink-0 ml-2",children:s.jsx(L0,{targetUserId:_.uid,variant:"compact"})})]},_.uid)})})}),s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:s.jsx("button",{onClick:e,className:"w-full px-4 py-3 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-xl font-medium hover:opacity-90 transition-opacity",children:"Cerrar"})})]})})}function Z_(){const{usuario:t,usuarioInfo:e,logout:n,actualizarUsuarioInfo:r}=er(),i=Sr(),{abrirModal:a}=Fl(),[l,d]=b.useState("perfil"),[u,m]=b.useState(!1),[g,h]=b.useState(!1),[y,w]=b.useState(!1),[S,N]=b.useState(!1),[_,D]=b.useState(!1),[A,L]=b.useState(null),[I,F]=b.useState(!1),[R,E]=b.useState(0),[M,O]=b.useState(!1),[j,U]=b.useState("seguidores"),[H,V]=b.useState([]),[K,X]=b.useState([]),[ne,we]=b.useState(!1),[Z,le]=b.useState(!1),[re,B]=b.useState(!1),[ce,Se]=b.useState(null),[Ve,$e]=b.useState({seguidos:0,seguidores:0,publicaciones:0}),[Ke,Ye]=b.useState(null),[lt,Re]=b.useState(null);b.useEffect(()=>{if(!t)return;const Ue=async()=>{try{we(!0);const ct=Ot(pt(oe,"orders"),qt("userId","==",t.uid)),it=await rn(ct);V(it.docs.map(Lt=>({id:Lt.id,...Lt.data()})))}catch{}finally{we(!1)}},ot=async()=>{try{le(!0);const ct=Ot(pt(oe,"direcciones"),qt("usuarioId","==",t.uid)),it=await rn(ct);X(it.docs.map(Lt=>({id:Lt.id,...Lt.data()})))}catch{}finally{le(!1)}};return Ue(),ot(),()=>{}},[t]),b.useEffect(()=>{if(!t)return;let Ue=null;const ot=(it,Lt)=>{try{Ue&&Ue(),Ue=_n(We(oe,it,Lt),Bt=>{if(Bt.exists()){const Ge={id:Bt.id,...Bt.data()};Re(Bt.id),Ye(Ge)}})}catch{}};return(async()=>{try{if(e!=null&&e.storeId){try{const Ge=await Fn(We(oe,"tiendas",e.storeId));if(Ge.exists()){Re(Ge.id),Ye({id:Ge.id,...Ge.data()}),ot("tiendas",e.storeId);return}}catch{}try{const Ge=await Fn(We(oe,"stores",e.storeId));if(Ge.exists()){Re(Ge.id),Ye({id:Ge.id,...Ge.data()}),ot("stores",e.storeId);return}}catch{}}const it=async Ge=>{const mn=Ot(pt(oe,"tiendas"),qt(Ge,"==",t.uid)),Wt=await rn(mn);if(!Wt.empty){const an=Wt.docs[0],At={id:an.id,...an.data()};return Re(an.id),Ye(At),ot("tiendas",an.id),!0}return!1};if(await it("ownerId")||await it("owner_id")||await it("propietarioId")||await it("propietario_id")||await it("createdBy")||await it("userId")||await(async()=>{const Ge=["ownerUid","ownerId","owner_id","userId","createdBy"];for(const mn of Ge){const Wt=Ot(pt(oe,"stores"),qt(mn,"==",t.uid)),an=await rn(Wt);if(!an.empty){const At=an.docs[0],bn={id:At.id,...At.data()};Re(At.id),Ye(bn),ot("stores",At.id);try{await Cn(We(oe,"users",t.uid),{storeId:At.id,storeName:bn.nombre||bn.name||"",role:"seller",isSeller:!0},{merge:!0})}catch{}return!0}}if(t.email)try{const mn=(t.email||"").toLowerCase().trim(),Wt=Ot(pt(oe,"stores"),qt("ownerEmail","==",mn)),an=await rn(Wt);if(!an.empty){const At=an.docs[0],bn={id:At.id,...At.data()};return Re(At.id),Ye(bn),ot("stores",At.id),!0}}catch{}return!1})())return;if((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.isAdmin)===!0||(e==null?void 0:e.admin)===!0){Re("playcenter_universal"),ot("tiendas","playcenter_universal");return}}catch{}})(),()=>{try{Ue&&Ue()}catch{}}},[t==null?void 0:t.uid,e==null?void 0:e.storeId,e==null?void 0:e.role,e==null?void 0:e.isAdmin,e==null?void 0:e.admin]),b.useEffect(()=>{if(!t)return;const Ue=We(oe,"users",t.uid),ot=_n(Ue,async ct=>{var it,Lt;if(ct.exists()){const Bt=ct.data();let Ge=((it=Bt.stats)==null?void 0:it.seguidores)||0,mn=((Lt=Bt.stats)==null?void 0:Lt.seguidos)||0;if(Ge===0||mn===0)try{const Wt=pt(oe,`users/${t.uid}/followers`),At=(await rn(Wt)).size,bn=pt(oe,`users/${t.uid}/following`),ze=(await rn(bn)).size;Ge=Math.max(Ge,At),mn=Math.max(mn,ze)}catch{}$e(Wt=>({...Wt,seguidores:Ge,seguidos:mn}))}});return()=>{try{ot()}catch{}}},[t]),b.useEffect(()=>{if(!t)return;(async()=>{try{const ot=new Set,ct=Ot(pt(oe,"productos"),qt("creadoPor","==",t.uid));(await rn(ct)).docs.forEach(Ge=>{Ge.data().activo!==!1&&ot.add(Ge.id)});const Lt=Ot(pt(oe,"productos"),qt("ownerUid","==",t.uid));if((await rn(Lt)).docs.forEach(Ge=>{Ge.data().activo!==!1&&ot.add(Ge.id)}),lt){const Ge=Ot(pt(oe,"productos"),qt("storeId","==",lt));(await rn(Ge)).docs.forEach(Ht=>{Ht.data().activo!==!1&&ot.add(Ht.id)});const Wt=Ot(pt(oe,"productos"),qt("tiendaId","==",lt));(await rn(Wt)).docs.forEach(Ht=>{Ht.data().activo!==!1&&ot.add(Ht.id)});const At=Ot(pt(oe,"productos"),qt("tienda_id","==",lt));(await rn(At)).docs.forEach(Ht=>{Ht.data().activo!==!1&&ot.add(Ht.id)})}$e(Ge=>({...Ge,publicaciones:ot.size}))}catch{}})()},[t,lt]);const Ct=async()=>{try{h(!0),await n(),i("/",{replace:!0})}finally{h(!1)}};return t?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[s.jsx("div",{className:"max-w-[1920px] mx-auto",children:s.jsxs("div",{className:"flex gap-0",children:[s.jsx("aside",{className:"hidden xl:block w-72 flex-shrink-0",children:s.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(X_,{user:t,userInfo:e,simple:!0,onLogout:()=>F(!0),onAddAccount:()=>a("login"),setView:d},R)}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx(Wq,{activeView:l,setView:d,onLogout:()=>F(!0),onAddAccount:()=>a("login"),user:t,userInfo:e})})]})}),s.jsxs("main",{className:"flex-1 w-full p-4 md:p-6 lg:p-8 overflow-x-hidden min-w-0",children:[s.jsxs("div",{className:"xl:hidden mb-6 overflow-visible",children:[s.jsx(X_,{user:t,userInfo:e,onLogout:()=>F(!0),onAddAccount:()=>a("login"),setView:d},R),s.jsx("div",{className:"mt-4",children:s.jsx(Hq,{activeView:l,setView:d,userInfo:e})})]}),s.jsx(sn,{mode:"wait",children:s.jsxs(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,ease:"easeOut"},className:"w-full max-w-5xl mx-auto",children:[l==="perfil"&&s.jsx(Gq,{user:t,info:e,stats:Ve,onEdit:()=>w(!0),onOpenFollowers:()=>{U("seguidores"),O(!0)},onOpenFollowing:()=>{U("seguidos"),O(!0)}},R),l==="pedidos"&&s.jsx(Xq,{orders:H,loading:ne,onOpenOrder:Ue=>{Se(Ue),B(!0)}}),l==="ubicaciones"&&s.jsx(Qq,{addresses:K,userId:t.uid,defaultDireccion:e==null?void 0:e.direccion,defaultMetodoEntrega:e==null?void 0:e.metodoEntrega,loading:Z,onAdd:()=>{L(null),N(!0)},onEdit:Ue=>{L(Ue),N(!0)},onDelete:async Ue=>{try{await co(We(oe,"direcciones",Ue));const ot=Ot(pt(oe,"direcciones"),qt("usuarioId","==",t.uid)),ct=await rn(ot);X(ct.docs.map(it=>({id:it.id,...it.data()})))}catch{}},onSetDefault:async Ue=>{try{const ot=(Ue==null?void 0:Ue.direccionCompleta)||"",ct=(Ue==null?void 0:Ue.metodoEntrega)||"domicilio";await r({direccion:ot,metodoEntrega:ct});const it={direccion:ot,metodoEntrega:ct,updatedAt:new Date};await Cn(We(oe,"users",t.uid),it,{merge:!0}),await Cn(We(oe,"usuarios",t.uid),it,{merge:!0})}catch{}}}),l==="configuracion"&&s.jsx(Jq,{}),l==="seguridad"&&s.jsx(Zq,{}),l==="pagos"&&s.jsx(eG,{}),l==="tiendas"&&s.jsx(tG,{stats:Ve,user:t,userInfo:e,store:Ke,storeId:lt})]},l)})]})]})}),s.jsx(nG,{open:y,onClose:()=>w(!1),initialInfo:e,saving:_,onSave:async Ue=>{try{D(!0);let ot=e==null?void 0:e.fotoURL;if(Ue.newPhoto){const it=so(io,`usuarios/${t.uid}/profile.jpg`);await Oh(it,Ue.newPhoto),ot=await zc(it)}if(Ue.removePhoto){ot=null;try{const it=so(io,`usuarios/${t.uid}/profile.jpg`);await QC(it)}catch{}}await r({displayName:Ue.displayName,telefono:Ue.telefono,direccion:Ue.direccion,fotoURL:ot});const ct={displayName:Ue.displayName,telefono:Ue.telefono,direccion:Ue.direccion,fotoURL:ot,updatedAt:new Date};await Cn(We(oe,"users",t.uid),ct,{merge:!0}),await Cn(We(oe,"usuarios",t.uid),ct,{merge:!0}),E(it=>it+1),w(!1)}catch(ot){Vt("Error al guardar: "+ot.message,"error","Error")}finally{D(!1)}}}),S&&s.jsx(K6,{abierto:S,onClose:async()=>{N(!1),L(null);try{const Ue=Ot(pt(oe,"direcciones"),qt("usuarioId","==",t.uid)),ot=await rn(Ue);X(ot.docs.map(ct=>({id:ct.id,...ct.data()})))}catch{}},actualizarUsuarioInfo:r,usuarioId:t.uid,direccionEditar:A,actualizarLista:async()=>{try{const Ue=Ot(pt(oe,"direcciones"),qt("usuarioId","==",t.uid)),ot=await rn(Ue);X(ot.docs.map(ct=>({id:ct.id,...ct.data()})))}catch{}}}),s.jsx(rG,{open:re,order:ce,onClose:()=>{B(!1),Se(null)}}),s.jsx(qq,{isOpen:I,onClose:()=>F(!1),onConfirm:async()=>{F(!1),await Ct()}}),s.jsx(hT,{isOpen:M,onClose:()=>O(!1),userId:t==null?void 0:t.uid,type:j}),s.jsx(Q_,{visible:g})]}):s.jsx(Q_,{visible:!0})}function iG(){var D;const{userId:t}=F0(),{usuario:e}=er(),n=Sr(),[r,i]=b.useState(null),[a,l]=b.useState(!0),[d,u]=b.useState({seguidores:0,seguidos:0,publicaciones:0}),[m,g]=b.useState([]),[h,y]=b.useState(!1),[w,S]=b.useState("seguidores");b.useEffect(()=>{if(!t)return;if(e&&t===e.uid){n("/profile");return}const A=We(oe,"users",t),L=_n(A,async I=>{var F,R,E;if(I.exists()){const M=I.data();i(M);let O=((F=M.stats)==null?void 0:F.seguidores)||0,j=((R=M.stats)==null?void 0:R.seguidos)||0;if(O===0||j===0)try{const U=pt(oe,`users/${t}/followers`),V=(await rn(U)).size,K=pt(oe,`users/${t}/following`),ne=(await rn(K)).size;O=Math.max(O,V),j=Math.max(j,ne)}catch{}u({seguidores:O,seguidos:j,publicaciones:((E=M.stats)==null?void 0:E.publicaciones)||0})}l(!1)},I=>{l(!1)});return()=>L()},[t,e,n]),b.useEffect(()=>{if(!t)return;(async()=>{try{const L=new Set,I=new Map,F=Ot(pt(oe,"productos"),qt("creadoPor","==",t));(await rn(F)).docs.forEach(H=>{const V=H.data();V.activo!==!1&&(L.add(H.id),I.set(H.id,{id:H.id,...V}))});const E=Ot(pt(oe,"productos"),qt("ownerUid","==",t));(await rn(E)).docs.forEach(H=>{const V=H.data();V.activo!==!1&&(L.add(H.id),I.set(H.id,{id:H.id,...V}))});const O=Ot(pt(oe,"productos"),qt("usuario_id","==",t));(await rn(O)).docs.forEach(H=>{const V=H.data();V.activo!==!1&&(L.add(H.id),I.set(H.id,{id:H.id,...V}))});const U=Array.from(I.values());g(U),u(H=>({...H,publicaciones:U.length}))}catch{}})()},[t]);const N=(r==null?void 0:r.photoURL)||`https://ui-avatars.com/api/?name=${encodeURIComponent((r==null?void 0:r.displayName)||"Usuario")}&size=200&background=2563eb&color=fff&bold=true`,_=(r==null?void 0:r.displayName)||((D=r==null?void 0:r.email)==null?void 0:D.split("@")[0])||"Usuario";return a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ml,{size:"xlarge",color:"blue",variant:"pulse"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xl font-semibold mt-6 animate-pulse",children:"Cargando perfil..."}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"Obteniendo informacin"})]})}):r?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-12",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n(-1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx(Sm,{size:24,className:"text-gray-700 dark:text-gray-300"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:_}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d.publicaciones," publicaciones"]})]})]})}),s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-8",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("img",{src:N,alt:_,className:"w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-blue-500 shadow-xl"}),r.isSeller&&s.jsx("div",{className:"absolute bottom-2 right-2 bg-blue-600 text-white p-2 rounded-full shadow-lg",children:s.jsx(xr,{size:20})})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 mb-4",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:_}),e&&t!==e.uid&&s.jsx(L0,{targetUserId:t,variant:"default",customClass:"md:ml-auto"})]}),r.storeName&&s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-blue-600 dark:text-blue-400 mb-4",children:[s.jsx(xr,{size:18}),s.jsx("span",{className:"font-semibold",children:r.storeName})]}),s.jsxs("div",{className:"flex justify-center md:justify-start gap-8 mb-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.publicaciones}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Publicaciones"})]}),s.jsxs("button",{onClick:()=>{S("seguidores"),y(!0)},className:"text-center hover:opacity-75 transition-opacity group",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:d.seguidores}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Seguidores"})]}),s.jsxs("button",{onClick:()=>{S("seguidos"),y(!0)},className:"text-center hover:opacity-75 transition-opacity group",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:d.seguidos}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Siguiendo"})]})]}),s.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[r.email&&s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[s.jsx(Zf,{size:16}),s.jsx("span",{className:"text-sm",children:r.email})]}),r.telefono&&s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[s.jsx(hw,{size:16}),s.jsx("span",{className:"text-sm",children:r.telefono})]}),r.direccion&&s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[s.jsx(Uh,{size:16}),s.jsx("span",{className:"text-sm",children:r.direccion})]}),r.createdAt&&s.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[s.jsx(O6,{size:16}),s.jsxs("span",{className:"text-sm",children:["Miembro desde"," ",new Date(r.createdAt.seconds*1e3).toLocaleDateString()]})]})]})]})]})}),m.length>0&&s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[s.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(Uc,{size:24}),"Productos de ",_]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(A=>{var I,F;const L=A.imagen||((I=A.imagenes)==null?void 0:I[0])||"/placeholder.png";return s.jsxs(Q.div,{whileHover:{scale:1.05},onClick:()=>n(`/producto/${A.id}`),className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-all cursor-pointer overflow-hidden",children:[s.jsx("img",{src:L,alt:A.nombre,className:"w-full h-48 object-contain bg-gray-100 dark:bg-gray-700"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white line-clamp-2 mb-2",children:A.nombre}),s.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["RD$ ",(F=A.precio)==null?void 0:F.toFixed(2)]})]})]},A.id)})})]}),m.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Uc,{size:64,className:"text-gray-400 mx-auto mb-4"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[_," an no tiene productos publicados"]})]})]}),s.jsx(hT,{isOpen:h,onClose:()=>y(!1),userId:t,type:w})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(nu,{size:64,className:"text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Usuario no encontrado"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"El perfil que buscas no existe o fue eliminado"}),s.jsx("button",{onClick:()=>n("/"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Volver al inicio"})]})})}function aG({user:t,variant:e="default"}){var a,l,d,u,m;const n=Sr();if(!t)return null;const r=t.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.displayName||"Usuario")}&size=200&background=2563eb&color=fff&bold=true`,i=t.displayName||((a=t.email)==null?void 0:a.split("@")[0])||"Usuario";return e==="compact"?s.jsxs(Q.div,{whileHover:{scale:1.02},className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-all border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>n(`/user/${t.uid}`),children:[s.jsx("img",{src:r,alt:i,className:"w-12 h-12 rounded-full object-cover border-2 border-blue-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:i}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[((l=t.stats)==null?void 0:l.seguidores)||0," seguidores"]}),t.isSeller&&s.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[s.jsx(xr,{size:14}),"Tienda"]})]})]})]}),s.jsx(L0,{targetUserId:t.uid,variant:"compact"})]}):s.jsxs(Q.div,{whileHover:{y:-4},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl hover:shadow-2xl transition-all overflow-hidden border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-blue-500 to-purple-600",children:[s.jsx("div",{className:"absolute -bottom-12 left-1/2 -translate-x-1/2",children:s.jsx("img",{src:r,alt:i,className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-xl cursor-pointer hover:scale-105 transition-transform",onClick:()=>n(`/user/${t.uid}`)})}),t.isSeller&&s.jsxs("div",{className:"absolute top-4 right-4 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-1 shadow-lg",children:[s.jsx(xr,{size:14}),"Tienda"]})]}),s.jsxs("div",{className:"pt-16 pb-6 px-6 text-center",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:()=>n(`/user/${t.uid}`),children:i}),t.storeName&&s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mb-3 font-medium",children:t.storeName}),s.jsxs("div",{className:"flex justify-center gap-6 py-4 border-y border-gray-200 dark:border-gray-700 mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((d=t.stats)==null?void 0:d.publicaciones)||0}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Productos"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((u=t.stats)==null?void 0:u.seguidores)||0}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Seguidores"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:((m=t.stats)==null?void 0:m.seguidos)||0}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Siguiendo"})]})]}),(t.direccion||t.ciudad)&&s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[s.jsx(Uh,{size:14}),s.jsx("span",{children:t.ciudad||t.direccion})]}),s.jsx(L0,{targetUserId:t.uid,variant:"default",customClass:"w-full"}),s.jsx("button",{onClick:()=>n(`/user/${t.uid}`),className:"w-full mt-3 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Ver Perfil Completo"})]})]})}function oG(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,a]=b.useState(""),[l,d]=b.useState("all"),[u,m]=b.useState("followers");b.useEffect(()=>{let h=pt(oe,"users");l==="sellers"&&(h=Ot(h,qt("isSeller","==",!0))),u==="followers"?h=Ot(h,ni("stats.seguidores","desc"),jl(50)):u==="products"?h=Ot(h,ni("stats.publicaciones","desc"),jl(50)):h=Ot(h,ni("createdAt","desc"),jl(50));const y=_n(h,w=>{const S=w.docs.map(N=>({uid:N.id,...N.data()}));e(S),r(!1)},w=>{r(!1)});return()=>y()},[l,u]);const g=t.filter(h=>{var w,S,N;const y=i.toLowerCase();return((w=h.displayName)==null?void 0:w.toLowerCase().includes(y))||((S=h.storeName)==null?void 0:S.toLowerCase().includes(y))||((N=h.email)==null?void 0:N.toLowerCase().includes(y))});return n?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ml,{size:"xlarge",color:"blue",variant:"dots"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xl font-semibold mt-6 animate-pulse",children:"Cargando usuarios..."}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"Descubriendo la comunidad"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(Q.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsxs("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2 flex items-center gap-3",children:[s.jsx(nu,{size:36,className:"text-blue-600"}),"Explorar Usuarios y Tiendas"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Descubre vendedores, tiendas y usuarios. Sguelos para ver sus publicaciones!"})]}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-8",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx(C0,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, tienda o email...",value:i,onChange:h=>a(h.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-[200px]",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx(sB,{size:16}),"Tipo"]}),s.jsxs("select",{value:l,onChange:h=>d(h.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"Todos"}),s.jsx("option",{value:"sellers",children:"Solo Tiendas"}),s.jsx("option",{value:"users",children:"Solo Usuarios"})]})]}),s.jsxs("div",{className:"flex-1 min-w-[200px]",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx(sW,{size:16}),"Ordenar por"]}),s.jsxs("select",{value:u,onChange:h=>m(h.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"followers",children:"Ms Seguidores"}),s.jsx("option",{value:"products",children:"Ms Productos"}),s.jsx("option",{value:"recent",children:"Ms Recientes"})]})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mostrando ",g.length," ",g.length===1?"usuario":"usuarios"]}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.filter(h=>h.isSeller).length," tiendas activas"]})]})]}),g.length>0?s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map((h,y)=>s.jsx(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:y*.05},children:s.jsx(aG,{user:h,variant:"default"})},h.uid))}):s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[s.jsx(nu,{size:64,className:"text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No se encontraron usuarios"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i?`No hay resultados para "${i}"`:"Ajusta los filtros para ver ms usuarios"})]})]})})}const lG="https://lab.cardnet.com.do/authorize";function n1({className:t,total:e,label:n,items:r}){const[i,a]=b.useState(!1),[l,d]=b.useState(null),u=typeof e=="number"?e/100:null,m=Number.isFinite(u)?new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(u):null,g=n||(m?`Comprar ahora  ${m}`:"Comprar ahora"),h=async()=>{if(!i)try{if(a(!0),d(null),!e||e<=0)throw new Error("Monto invlido");const y=`ORD-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,w=Na(T2,"createCardnetSession"),S=new Promise((A,L)=>setTimeout(()=>L(new Error("Tiempo de espera agotado. Intenta de nuevo.")),2e4)),N=await Promise.race([w({amount:u,orderId:y,items:r||[]}),S]);if(!N.data.success||!N.data.session)throw new Error("No se pudo crear la sesin de pago");sessionStorage.setItem("cardnetSessionKey",N.data.sessionKey),sessionStorage.setItem("cardnetOrderId",N.data.orderId),sessionStorage.setItem("cardnetTransactionId",N.data.transactionId);const _=document.createElement("form");_.method="POST",_.action=lG;const D=document.createElement("input");D.type="hidden",D.name="SESSION",D.value=N.data.session,_.appendChild(D),document.body.appendChild(_),_.submit()}catch(y){let w="Error al procesar el pago";y.code==="deadline-exceeded"?w="La pasarela de pago tard mucho en responder. Por favor intenta de nuevo.":y.code==="failed-precondition"?w="Hay un problema con la configuracin de pagos. Contacta a soporte.":y.message&&(w=y.message),d(w),a(!1),Vt(`Error: ${w}. Por favor, intenta de nuevo en unos segundos.`,"error","Error de pago")}};return s.jsxs("button",{onClick:h,className:`pay-btn ${t||""}`,disabled:i,children:[s.jsx("span",{className:"btn-text",children:g}),s.jsxs("div",{className:"icon-container",children:[s.jsx("svg",{viewBox:"0 0 24 24",className:"icon card-icon",children:s.jsx("path",{d:"M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18C2,19.11 2.89,20 4,20H20C21.11,20 22,19.11 22,18V6C22,4.89 21.11,4 20,4Z",fill:"currentColor"})}),s.jsx("svg",{viewBox:"0 0 24 24",className:"icon payment-icon",children:s.jsx("path",{d:"M2,17H22V21H2V17M6.25,7H9V6H6V3H18V6H15V7H17.75L19,17H5L6.25,7M9,10H15V8H9V10M9,13H15V11H9V13Z",fill:"currentColor"})}),s.jsx("svg",{viewBox:"0 0 24 24",className:"icon dollar-icon",children:s.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z",fill:"currentColor"})}),s.jsx("svg",{viewBox:"0 0 24 24",className:"icon wallet-icon default-icon",children:s.jsx("path",{d:"M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.9 10,8V16A2,2 0 0,0 12,18M12,16H22V8H12M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z",fill:"currentColor"})}),s.jsx("svg",{viewBox:"0 0 24 24",className:"icon check-icon",children:s.jsx("path",{d:"M9,16.17L4.83,12L3.41,13.41L9,19L21,7L19.59,5.59L9,16.17Z",fill:"currentColor"})})]})]})}function cG({productoActual:t,onProductoClick:e}){const{products:n,loading:r}=fw(!1),i=b.useRef(null),[a,l]=b.useState(!1),[d,u]=b.useState(!1),[m,g]=b.useState(!1),[h,y]=b.useState(!1),w=b.useMemo(()=>{if(!t||!n||n.length===0)return[];const R=t.etiquetas||[],E=t.categoria;return n.filter(M=>(M==null?void 0:M.id)===(t==null?void 0:t.id)?!1:!!(M.categoria===E||R.length>0&&M.etiquetas&&M.etiquetas.length>0&&M.etiquetas.some(j=>R.includes(j)))).slice(0,24)},[n,t]),S=b.useCallback(()=>{const R=i.current;if(!R)return 1;const E=R.offsetWidth,M=R.querySelector(".prl-card-desktop");if(!M)return 1;const U=M.offsetWidth+12;return Math.floor(E/U)},[]),N=b.useCallback(()=>{const R=i.current;if(!R)return;const{scrollLeft:E,scrollWidth:M,clientWidth:O}=R,j=M-O>12;y(j),l(E>10),u(j&&E<M-O-4)},[]),_=b.useCallback(R=>{const E=i.current;if(!E)return;const M=E.querySelector(".prl-card-desktop")||E.querySelector(".prl-card");if(!M)return;const U=M.offsetWidth+12,H=S(),V=R*H*U;E.scrollBy({left:V,behavior:"smooth"})},[S]);b.useEffect(()=>{const R=i.current;if(!R)return;N();const E=requestAnimationFrame(N),M=()=>{const O=R.parentElement;O&&R.scrollLeft>10&&O.classList.add("scrolled")};return R.addEventListener("scroll",N),R.addEventListener("scroll",M),window.addEventListener("resize",N),()=>{R.removeEventListener("scroll",N),R.removeEventListener("scroll",M),window.removeEventListener("resize",N),cancelAnimationFrame(E)}},[N,w]);const D=R=>{R&&(e?e(R):(window.location.href=`/producto/${R}`,window.scrollTo(0,0)))},A=()=>{g(!0)},L=R=>{const E=Math.round(Number(R)||0);try{return new Intl.NumberFormat("es-DO").format(E)}catch{return String(E)}};if(r)return s.jsxs("div",{className:"productos-relacionados-container",children:[s.jsx("h3",{className:"prl-title",children:"Productos Relacionados"}),s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})]});const I=m?w:w.slice(0,6),F=w.length>6;return s.jsx("section",{className:"prl-section","aria-label":"Productos relacionados",children:s.jsxs("div",{className:"prl-container",children:[s.jsx("h2",{className:"prl-title",children:"Productos relacionados"}),s.jsx("div",{className:"prl-grid-mobile",children:I.length>0?I.map(R=>{var j;const E=(R==null?void 0:R.imagen)||((j=R==null?void 0:R.imagenes)==null?void 0:j[0])||"",M=(R==null?void 0:R.nombre)||"Producto",O=Number(R==null?void 0:R.precio)||0;return s.jsxs("article",{className:"prl-card-mobile",onClick:()=>D(R.slug||R.id),children:[s.jsx("div",{className:"prl-img-wrapper",children:E?s.jsx("img",{src:E,alt:M,className:"prl-img",loading:"lazy"}):s.jsx("div",{className:"prl-img-fallback"})}),s.jsxs("div",{className:"prl-content",children:[s.jsx("h3",{className:"prl-name",title:M,children:M}),s.jsx("div",{className:"prl-price-mobile",children:O>0?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"currency",children:"RD$"}),s.jsx("strong",{className:"amount",children:L(O)})]}):s.jsx("span",{className:"no-price",children:"Consultar"})})]})]},R==null?void 0:R.id)}):s.jsx("div",{className:"prl-empty",children:"No hay productos relacionados."})}),!m&&F&&s.jsxs("button",{className:"prl-show-more-btn",onClick:A,children:["Ver ms productos relacionados",s.jsx(qb,{className:"ml-2"})]}),s.jsxs("div",{className:"prl-wrapper-desktop","aria-roledescription":"carrusel",children:[h&&s.jsx("button",{className:`prl-arrow left ${a?"":"prl-arrow-disabled"}`,onClick:()=>a&&_(-1),"aria-label":"Anterior",type:"button",disabled:!a,children:s.jsx(PW,{size:18})}),s.jsx("div",{ref:i,className:"prl-rail-desktop",children:w.length>0?w.map(R=>{var j;const E=(R==null?void 0:R.imagen)||((j=R==null?void 0:R.imagenes)==null?void 0:j[0])||"",M=(R==null?void 0:R.nombre)||"Producto",O=Number(R==null?void 0:R.precio)||0;return s.jsxs("article",{className:"prl-card-desktop",onClick:()=>D(R.slug||R.id),children:[s.jsx("div",{className:"prl-img-wrapper",children:E?s.jsx("img",{src:E,alt:M,className:"prl-img",loading:"lazy"}):s.jsx("div",{className:"prl-img-fallback"})}),s.jsxs("div",{className:"prl-content",children:[s.jsx("h3",{className:"prl-name",title:M,children:M}),s.jsx("div",{className:"prl-price-desktop",children:O>0?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"currency",children:"RD$"}),s.jsx("strong",{className:"amount",children:L(O)})]}):s.jsx("span",{className:"no-price",children:"Consultar"})})]})]},R==null?void 0:R.id)}):s.jsx("div",{className:"prl-empty",children:"No hay productos relacionados."})}),h&&s.jsx("button",{className:`prl-arrow right ${d?"":"prl-arrow-disabled"}`,onClick:()=>d&&_(1),"aria-label":"Siguiente",type:"button",disabled:!d,children:s.jsx(qb,{size:18})})]})]})})}function e5(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function dG(t){try{let e=String(t);return e=e.replace(/<\/(?:script|style)>/gi,"").replace(/<(?:script|style)[^>]*>[\s\S]*?<\/(?:script|style)>/gi,""),e=e.replace(/ on[a-z]+\s*=\s*"[^"]*"/gi,""),e=e.replace(/ on[a-z]+\s*=\s*'[^']*'/gi,""),e=e.replace(/ on[a-z]+\s*=\s*[^\s>]+/gi,""),e=e.replace(/javascript:\s*/gi,""),e}catch{return String(t)}}function t5(t,e,n){try{const r={mode:t,items:e,total:n,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(r))}catch{}}function uG({producto:t}){const[e,n]=b.useState(!1),r=500,i=3,a=8,l=[];if(Array.isArray(t.acerca)&&l.push(...t.acerca.filter(h=>h&&h.trim())),(t.empresa||t.marca)&&l.push(`Marca: ${t.empresa||t.marca}`),t.modelo&&l.push(`Modelo: ${t.modelo}`),t.colorPrincipal&&l.push(`Color: ${t.colorPrincipal}`),t.material&&l.push(`Material: ${t.material}`),t.peso&&l.push(`Peso: ${t.peso}`),t.dimensiones&&l.push(`Dimensiones: ${t.dimensiones}`),t.conectividad&&l.push(`Conectividad: ${t.conectividad}`),t.garantia&&l.push(`Garanta: ${t.garantia}`),t.estado&&l.push(`Estado: ${t.estado}`),l.length===0)return null;const u=(()=>{let h=0,y=0;for(let w=0;w<l.length;w++){const S=l[w].length;if(h+=S,h<=r||y<i)y++;else break;if(y>=a)break}return Math.max(y,i)})(),m=l.length>u,g=e?l:l.slice(0,u);return s.jsxs("div",{className:"space-y-4 xl:order-4 order-4 -mt-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wide mb-4 flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-5 bg-gradient-to-b from-blue-500 to-blue-600 rounded-full"}),"Acerca de este artculo"]}),s.jsxs("ul",{className:"space-y-3",children:[s.jsx("div",{className:"hidden xl:block",children:l.map((h,y)=>s.jsxs("li",{className:"flex items-start gap-3 text-sm leading-relaxed group hover:translate-x-1 transition-all duration-200 mb-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 mt-1.5 flex-shrink-0 shadow-sm group-hover:scale-125 group-hover:shadow-md transition-all duration-200"}),s.jsx("span",{className:"flex-1 text-gray-800 dark:text-gray-200 font-medium group-hover:text-gray-900 dark:group-hover:text-white transition-colors duration-200",children:h})]},y))}),s.jsx("div",{className:"xl:hidden",children:g.map((h,y)=>s.jsxs("li",{className:"flex items-start gap-3 text-sm leading-relaxed group hover:translate-x-1 transition-all duration-200 mb-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 mt-1.5 flex-shrink-0 shadow-sm group-hover:scale-125 group-hover:shadow-md transition-all duration-200"}),s.jsx("span",{className:"flex-1 text-gray-800 dark:text-gray-200 font-medium group-hover:text-gray-900 dark:group-hover:text-white transition-colors duration-200",children:h})]},y))})]}),m&&s.jsxs("button",{onClick:()=>n(!e),className:"xl:hidden w-full text-center text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 py-2 px-4 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-800 transition-all duration-200 flex items-center justify-center gap-2 group",children:[s.jsx("span",{children:e?"Ver menos":`Ver ms (${l.length-u} ms)`}),s.jsx("svg",{className:`w-4 h-4 transition-transform duration-300 ${e?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})}function hG({producto:t,allVariantes:e}){const n=[],r=[],i=[];if((t.empresa||t.marca)&&n.push({label:"Marca",value:t.empresa||t.marca}),t.modelo&&n.push({label:"Modelo",value:t.modelo}),t.colorPrincipal)n.push({label:"Color",value:t.colorPrincipal});else if(e&&e.length>0){const m=e.filter(g=>g.color).map(g=>g.color).join(", ");m&&n.push({label:"Color",value:m})}if(t.material&&n.push({label:"Material",value:t.material}),t.peso&&n.push({label:"Peso del producto",value:t.peso}),t.dimensiones&&n.push({label:"Dimensiones",value:t.dimensiones}),t.conectividad&&n.push({label:"Interfaz de hardware",value:t.conectividad}),t.fuenteAlimentacion&&n.push({label:"Fuente de alimentacin",value:t.fuenteAlimentacion}),t.caracteristicasAdicionales){const m=t.caracteristicasAdicionales;Object.keys(m).forEach(g=>{const h=m[g];if(h&&String(h).trim()){const y=g.split("_").map(S=>S.charAt(0).toUpperCase()+S.slice(1)).join(" ").replace(/([A-Z])/g," $1").replace(/\s+/g," ").trim(),w=Array.isArray(h)?h.join(", "):String(h);n.push({label:y,value:w})}})}if(t.fabricante?r.push({label:"Fabricante",value:t.fabricante}):(t.empresa||t.marca)&&r.push({label:"Fabricante",value:t.empresa||t.marca}),t.garantia&&r.push({label:"Garanta",value:t.garantia}),t.paisFabricacion&&r.push({label:"Pas de fabricacin",value:t.paisFabricacion}),t.estado&&r.push({label:"Estado",value:t.estado}),t.fechaPublicacion){const g=new Date(t.fechaPublicacion).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});r.push({label:"Fecha de publicacin",value:g})}const[a,l]=Ns.useState({caracteristicas:!0,detalles:!0,adicionales:!0}),d=m=>{l(g=>({...g,[m]:!g[m]}))};return n.length>0||r.length>0||i.length>0?s.jsx("section",{className:"w-full mt-8 mb-8 px-4 sm:px-6",children:s.jsxs("div",{className:"max-w-[1200px] mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Informacin del producto"}),s.jsxs("div",{className:"space-y-6",children:[r.length>0&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[s.jsxs("button",{onClick:()=>d("detalles"),className:"w-full flex items-center justify-between py-2 text-left",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Detalles del producto"}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${a.detalles?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.detalles&&s.jsx("div",{className:"mt-4 space-y-2",children:r.map((m,g)=>s.jsxs("div",{className:"flex justify-between items-start gap-4 py-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[140px]",children:m.label}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-200 text-right flex-1",children:m.value})]},g))})]}),n.length>0&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[s.jsxs("button",{onClick:()=>d("caracteristicas"),className:"w-full flex items-center justify-between py-2 text-left",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Caractersticas y especificaciones"}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${a.caracteristicas?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.caracteristicas&&s.jsx("div",{className:"mt-4 space-y-2",children:n.map((m,g)=>s.jsxs("div",{className:"flex justify-between items-start gap-4 py-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[140px]",children:m.label}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-200 text-right flex-1",children:m.value})]},g))})]}),i.length>0&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[s.jsxs("button",{onClick:()=>d("adicionales"),className:"w-full flex items-center justify-between py-2 text-left",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Detalles adicionales"}),s.jsx("svg",{className:`w-5 h-5 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${a.adicionales?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.adicionales&&s.jsx("div",{className:"mt-4 space-y-2",children:i.map((m,g)=>s.jsxs("div",{className:"flex justify-between items-start gap-4 py-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 min-w-[140px]",children:m.label}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-200 text-right flex-1",children:m.value})]},g))})]})]})]})}):null}function fG(){var bs,Xo;const{carrito:t,agregarAlCarrito:e,quitarDelCarrito:n,eliminarUnidadDelCarrito:r}=Xm(),{usuario:i}=er(),{abrirModal:a}=Fl(),{theme:l,isDark:d}=Ss(),{id:u}=F0(),m=Sr(),[g,h]=b.useState(!1),[y,w]=b.useState(0),[S,N]=b.useState(0),[_,D]=b.useState(!1),[A,L]=b.useState(0),[I,F]=b.useState(null),[R,E]=b.useState(!1),[M,O]=b.useState(!0),[j,U]=b.useState(0),[H,V]=b.useState(!1),[K,X]=b.useState(null),[ne,we]=b.useState(!1),[Z,le]=b.useState(!1),[re,B]=b.useState("images"),[ce,Se]=b.useState(0),[Ve,$e]=b.useState(1),[Ke,Ye]=b.useState({x:0,y:0}),[lt,Re]=b.useState(0),[Ct,Ue]=b.useState(1),[ot,ct]=b.useState(!1),[it,Lt]=b.useState(1),[Bt,Ge]=b.useState({x:0,y:0}),[mn,Wt]=b.useState(!1),[an,At]=b.useState(!1),[bn,Ht]=b.useState(0),[ze,Y]=b.useState(1),[ie,pe]=b.useState({x:50,y:50}),[he,He]=b.useState(!1),ge=b.useRef(null),Ae=b.useRef(0),Be=b.useRef(0),[Ze,Rt]=b.useState(!1),Ie=b.useRef(null),gt=b.useRef(null),ft=b.useRef(null),Te=b.useRef(null),nt=b.useRef(null),ut=b.useRef(!1),kn=b.useRef({x:50,y:50}),[Ce,yt]=b.useState(!1),[on,Nn]=b.useState(""),[Wn,Ra]=b.useState({w:200,h:200}),{product:Me,loading:Xr,error:pn}=yW(u),[si,Vs]=b.useState([]),Yi=ae=>{Vs(Ee=>Ee.filter(ht=>ht.id!==ae))},Ei=Array.isArray(Me==null?void 0:Me.variantes)?Me.variantes:[],wr=Ei.filter(ae=>ae&&typeof ae.color=="string"&&ae.color.trim()),Cs=()=>{if(!Me)return[];const ae=[],Ee=new Set,ht=["mp4","mov","webm","avi","mkv","m4v","ogg","ogv"],xt=Mt=>{var hr,$r;if(!Mt||typeof Mt!="string")return!1;const $t=Mt.trim();if(!$t)return!1;const Ft=(($r=(hr=$t.split(".").pop())==null?void 0:hr.split("?")[0])==null?void 0:$r.toLowerCase())||"";return ht.includes(Ft)},Et=Mt=>{if(!Mt)return;const $t=String(Mt).trim();if(!$t||!xt($t))return;const Ft=$t.split("?")[0].split("#")[0].toLowerCase();!Ft||Ee.has(Ft)||(Ee.add(Ft),ae.push($t))};if(Array.isArray(Me.videoUrls)&&Me.videoUrls.forEach(Mt=>{const $t=typeof Mt=="string"?Mt:Mt==null?void 0:Mt.url;Et($t)}),A>=0&&wr[A]){const Mt=wr[A];Array.isArray(Mt==null?void 0:Mt.videoUrls)&&Mt.videoUrls.forEach($t=>{const Ft=typeof $t=="string"?$t:$t==null?void 0:$t.url;Et(Ft)})}return ae};if(b.useEffect(()=>{L(-1),w(0),N(0),F(null)},[u]),b.useEffect(()=>{},[A]),b.useEffect(()=>{$e(1),Ye({x:0,y:0})},[ce,re]),b.useEffect(()=>{Y(1),pe({x:0,y:0})},[bn]),b.useEffect(()=>{if(typeof window<"u"&&window.innerWidth<1280){const ae=document.querySelector(".mobile-tablet-thumbs"),Ee=ae&&ae.querySelector(".mt-thumb.active");ae&&Ee&&typeof Ee.scrollIntoView=="function"&&Ee.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[S]),b.useEffect(()=>{let ae=window.scrollY;const Ee=()=>{const ht=window.scrollY;ht>ae&&ht>100?O(!1):O(!0),ae=ht};return window.addEventListener("scroll",Ee,{passive:!0}),()=>window.removeEventListener("scroll",Ee)},[]),b.useEffect(()=>{if(Me){const ae=wr[A]||null,Ee=t.find(ht=>{var xt;return ht.id===Me.id&&(!ae||((xt=ht.variante)==null?void 0:xt.color)===(ae==null?void 0:ae.color))});U((Ee==null?void 0:Ee.cantidad)||0)}},[t,Me,A,wr]),b.useEffect(()=>{(async()=>{if(Me!=null&&Me.storeName){X(Me.storeName);return}if(Me!=null&&Me.tienda_nombre){X(Me.tienda_nombre);return}if(Me!=null&&Me.tienda_id)try{const Ee=We(oe,"tiendas",Me.tienda_id),ht=await Fn(Ee);ht.exists()&&X(ht.data().nombre)}catch{X(null)}else X(null)})()},[Me==null?void 0:Me.storeId,Me==null?void 0:Me.storeName,Me==null?void 0:Me.tienda_id,Me==null?void 0:Me.tienda_nombre]),b.useEffect(()=>{const ae=()=>{const ht=ge.current,xt=document.querySelector(".amazon-thumbs-sidebar");if(ht&&xt){const Et=ht.offsetHeight;xt.style.height=`${Et}px`,xt.style.maxHeight=`${Et}px`}},Ee=setTimeout(ae,100);return window.addEventListener("resize",ae),()=>{clearTimeout(Ee),window.removeEventListener("resize",ae)}},[S,Me]),b.useEffect(()=>{if(!u)return;const ae=Ee=>{var ht;((ht=Ee.detail)==null?void 0:ht.productId)===u&&(L(xt=>xt),w(0),N(0))};return window.addEventListener("productSaved",ae),window.addEventListener("forceProductUpdate",ae),window.addEventListener(`productUpdate:${u}`,ae),()=>{window.removeEventListener("productSaved",ae),window.removeEventListener("forceProductUpdate",ae),window.removeEventListener(`productUpdate:${u}`,ae)}},[u]),Xr)return null;if(pn||!Me){const ae=()=>{window.history&&window.history.length>1?m(-1):m("/productos")};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-700 p-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"mb-4",children:s.jsx("svg",{className:"mx-auto h-16 w-16 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("p",{className:"text-lg sm:text-xl font-semibold mb-2 text-blue-600",children:pn?"Error al cargar el producto":"Producto no encontrado"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:pn?`Error: ${pn}`:`No se pudo encontrar el producto con ID: ${u}`}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx("button",{onClick:ae,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver"}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Recargar"})]})]})})}const jr=A===-1||A===null?null:wr[A]||null,vi=()=>{var ae,Ee,ht,xt;if(A>=0&&wr[A]){const Et=wr[A];return((Ee=(ae=Et==null?void 0:Et.imagenPrincipal)==null?void 0:ae[0])==null?void 0:Ee.url)||(Et==null?void 0:Et.imagen)||""}return((xt=(ht=Me==null?void 0:Me.imagenPrincipal)==null?void 0:ht[0])==null?void 0:xt.url)||(Me==null?void 0:Me.imagen)||""},zs=()=>{const ae=Ft=>{if(!Ft||typeof Ft!="string")return null;try{const hr=Ft.split("?")[0].split("#")[0].trim().toLowerCase();return decodeURIComponent(hr)}catch{return Ft.split("?")[0].split("#")[0].trim().toLowerCase()}},Ee=vi(),ht=Ee?ae(Ee):null;let xt=[];if(A>=0&&wr[A]){const Ft=wr[A];xt=Array.isArray(Ft==null?void 0:Ft.imagenes)&&Ft.imagenes.length>0?Ft.imagenes:Array.isArray(Ft==null?void 0:Ft.galeriaImagenes)?Ft.galeriaImagenes:[]}else xt=Array.isArray(Me==null?void 0:Me.imagenes)&&Me.imagenes.length>0?Me.imagenes:Array.isArray(Me==null?void 0:Me.galeriaImagenes)?Me.galeriaImagenes:[];const Et=new Set;ht&&Et.add(ht);const Mt=[];xt.forEach(Ft=>{var go,ua;const hr=typeof Ft=="string"?Ft:(Ft==null?void 0:Ft.url)||null;if(!hr||((Ft==null?void 0:Ft.type)||"").toLowerCase()==="video")return;const da=((ua=(go=hr.split(".").pop())==null?void 0:go.split("?")[0])==null?void 0:ua.toLowerCase())||"";if(["mp4","mov","webm","avi","mkv","m4v"].includes(da))return;const Yn=ae(hr);!Yn||Et.has(Yn)||(Et.add(Yn),Mt.push(hr))});const $t=[];return Ee&&$t.push(Ee),$t.push(...Mt),$t},Xi=()=>((Me==null?void 0:Me.imagenesExtra)||[]).slice(0,3),J=zs(),te=Cs(),Le=J.map(ae=>({type:"image",url:ae})),xe=(te||[]).map(ae=>({type:"video",url:ae})),ve=[...Le,...xe],Xe=Math.max(0,Math.min(S,Math.max(0,ve.length-1))),et=I!==null?I:Xe,tt=ae=>{try{const Ee=(ae??"").toString().trim();return Ee||null}catch{return null}},Pt=tt(jr==null?void 0:jr.color),at=t.find(ae=>ae.id===Me.id&&tt(ae.colorSeleccionado)===Pt),me=(at==null?void 0:at.cantidad)||0,ke=()=>{if(!i){h(!0);return}if(!at){const ae={...Me,cantidad:1,precio:jr&&Number(jr.precio)?Number(jr.precio):Number(Me.precio)||0,cantidadProducto:Number.isFinite(In)?In:void 0};e(ae,Pt)}},vt=()=>{if(!i){h(!0);return}const ae={...Me,precio:jr&&Number(jr.precio)?Number(jr.precio):Number(Me.precio)||0,cantidadProducto:Number.isFinite(In)?In:void 0};e(ae,Pt)},tn=()=>{if(!i){h(!0);return}r(Me.id,Pt)},Vn=()=>{if(!i){h(!0);return}n(Me.id,Pt)},In=(jr==null?void 0:jr.cantidad)!==void 0?Number(jr.cantidad)||0:Me.cantidad!==void 0?Number(Me.cantidad)||0:1/0,Kn=(Me==null?void 0:Me.activo)!==!1&&In>0,zn=Number.isFinite(In)?Math.max(0,In-((at==null?void 0:at.cantidad)||0)):1/0,os=(()=>{if(A>=0&&wr[A]){const ae=wr[A],Ee=Number(ae==null?void 0:ae.precio);if(Number.isFinite(Ee)&&Ee>0)return Ee}return Number(Me==null?void 0:Me.precio)||0})(),jt=[{id:Me.id,nombre:Me.nombre,precio:os,cantidad:1}],Es=()=>{D(!1)},ii=J.length>0,bi=!!(wr&&wr.length>0),Qi=ii;J.length;const Ji=ae=>({type:"image",url:ae||""}),Ts=J.filter(ae=>!(!ae||typeof ae!="string"||ae.trim()==="")),wi=Ts.map(ae=>Ji(ae)),Xt=new Set;wi.filter(ae=>{const Ee=(ae.url||"").split("?")[0].split("#")[0].trim().toLowerCase();return!Ee||Xt.has(Ee)?!1:(Xt.add(Ee),!0)}),Math.min(Math.max(y,0),Math.max(0,(Ts.length||1)-1));const ar=[...Ts],Rr=ae=>{if(typeof window>"u"||window.innerWidth<1280)return;const Ee=ve&&ve[et]||null;if(!Ee||Ee.type!=="image")return;Nn(Ee.url);const ht=ft.current;ht?nt.current=ht.getBoundingClientRect():gt.current&&(nt.current=gt.current.getBoundingClientRect());const xt=nt.current;if(xt&&ae){const Et=Math.max(0,Math.min(100,(ae.clientX-xt.left)/xt.width*100)),Mt=Math.max(0,Math.min(100,(ae.clientY-xt.top)/xt.height*100));kn.current={x:Et,y:Mt}}else kn.current={x:50,y:50};yt(!0),requestAnimationFrame(()=>{const Et=Te.current;Et&&(Et.style.backgroundPosition=`${kn.current.x}% ${kn.current.y}%`)})},Fr=ae=>{if(!Ce||typeof window<"u"&&window.innerWidth<1280)return;const Ee=nt.current||ft.current&&ft.current.getBoundingClientRect()||gt.current&&gt.current.getBoundingClientRect();if(!Ee)return;const ht=Math.max(0,Math.min(100,(ae.clientX-Ee.left)/Ee.width*100)),xt=Math.max(0,Math.min(100,(ae.clientY-Ee.top)/Ee.height*100));kn.current={x:ht,y:xt},ut.current||(ut.current=!0,requestAnimationFrame(()=>{ut.current=!1;const Et=Te.current;Et&&(Et.style.backgroundPosition=`${kn.current.x}% ${kn.current.y}%`)}))},Ti=()=>{yt(!1),nt.current=null},Ai=ae=>{window.innerWidth>=1280||(Ae.current=ae.touches[0].clientX,Be.current=0)},Sn=ae=>{if(window.innerWidth>=1280||Ae.current===0)return;const Ee=ae.touches[0].clientX-Ae.current;Be.current=Ee},As=ae=>{if(window.innerWidth>=1280)return;Math.abs(Be.current)>50&&(Be.current>0&&S>0?N(S-1):Be.current<0&&S<ve.length-1&&N(S+1)),Ae.current=0,Be.current=0},hn=(ae,Ee)=>Math.sqrt(Math.pow(Ee.clientX-ae.clientX,2)+Math.pow(Ee.clientY-ae.clientY,2)),Fs=ae=>{if(ae.touches.length===2){const Ee=hn(ae.touches[0],ae.touches[1]);Re(Ee),Ue(Ve)}else ae.touches.length===1&&(Ae.current=ae.touches[0].clientX,Be.current=0)},mo=ae=>{if(ae.touches.length===2){const ht=hn(ae.touches[0],ae.touches[1])/lt,xt=Math.min(Math.max(Ct*ht,1),4);$e(xt)}else if(ae.touches.length===1)if(Ve>1){const Ee=ae.touches[0].clientX-Ae.current,ht=ae.touches[0].clientY-(Ae.current||0);Ye({x:Ee,y:ht})}else{const Ee=ae.touches[0].clientX-Ae.current;Be.current=Ee}},La=ae=>{if(ae.touches.length===0&&(Ve<1.1&&($e(1),Ye({x:0,y:0})),Ve===1)){const ht=ve;Math.abs(Be.current)>50&&(Be.current>0&&ce>0?Se(ce-1):Be.current<0&&ce<ht.length-1&&Se(ce+1)),Ae.current=0,Be.current=0}},Zi=ae=>{if(ae.touches.length===2){const Ee=hn(ae.touches[0],ae.touches[1]);Re(Ee),Ue(it)}else ae.touches.length===1&&(Ae.current=ae.touches[0].clientX,Be.current=0)},po=ae=>{if(ae.touches.length===2){const ht=hn(ae.touches[0],ae.touches[1])/lt,xt=Math.min(Math.max(Ct*ht,1),4);Lt(xt)}else if(ae.touches.length===1)if(it>1){const Ee=ae.touches[0].clientX-Ae.current,ht=ae.touches[0].clientY-(Ae.current||0);Ge({x:Ee,y:ht})}else{const Ee=ae.touches[0].clientX-Ae.current;Be.current=Ee}},Yo=ae=>{ae.touches.length===0&&(it<1.1&&(Lt(1),Ge({x:0,y:0})),it===1&&(Math.abs(Be.current)>50&&(Be.current>0&&y>0?w(y-1):Be.current<0&&y<ar.length-1&&w(y+1)),Ae.current=0,Be.current=0))},$s=ae=>{if(ae.touches.length===2){const Ee=hn(ae.touches[0],ae.touches[1]);Re(Ee),Ue(ze)}else ae.touches.length===1&&(Ae.current=ae.touches[0].clientX,Be.current=0)},Pi=ae=>{if(ae.touches.length===2){const ht=hn(ae.touches[0],ae.touches[1])/lt,xt=Math.min(Math.max(Ct*ht,1),4);Y(xt)}else if(ae.touches.length===1)if(ze>1){const Ee=ae.touches[0].clientX-Ae.current,ht=ae.touches[0].clientY-(Ae.current||0);pe({x:Ee,y:ht})}else{const Ee=ae.touches[0].clientX-Ae.current;Be.current=Ee}},or=ae=>{if(ae.touches.length===0){if(ze<1.1&&(Y(1),pe({x:50,y:50})),Math.abs(Be.current)>50&&ze===1){const ht=Xi();Be.current>0?Ht(xt=>(xt-1+ht.length)%ht.length):Ht(xt=>(xt+1)%ht.length),Y(1),pe({x:50,y:50})}Ae.current=0,Be.current=0}},ls=(ae,Ee=0)=>{B(ae),Se(Math.max(0,Ee||0)),le(!0)},ai=()=>le(!1),Jr=nt.current,Cr={display:Ce&&Jr?"block":"none",backgroundImage:on?`url(${on})`:"none",backgroundRepeat:"no-repeat"};if(Jr&&typeof window<"u"&&window.innerWidth>=1280){const ae=Jr.width,Ee=Jr.height,ht=2.5,xt=Math.round(ae*ht),Et=Math.round(Ee*ht),Mt=Jr.right+16;Cr.position="fixed",Cr.top=`${Jr.top}px`,Cr.left=`${Mt}px`,Cr.width=`${ae}px`,Cr.height=`${Ee}px`,Cr.backgroundSize=`${xt}px ${Et}px`}return s.jsxs(s.Fragment,{children:[s.jsxs("main",{className:"min-h-screen bg-white px-4 sm:px-6 pb-16 text-gray-800",children:[s.jsxs("section",{className:"w-full flex flex-col gap-8 xl:grid xl:grid-cols-12 xl:gap-6 xl:items-start",children:[Qi&&s.jsxs("div",{className:"flex flex-col items-start w-full xl:col-span-6 xl:sticky xl:top-4 xl:h-fit",children:[ve.length>0&&s.jsxs("div",{className:"amazon-gallery-layout flex",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`amazon-thumbs-sidebar ${ve.length>4?"has-overflow":""}`,onMouseLeave:()=>F(null),children:ve.map((ae,Ee)=>s.jsx("button",{type:"button",className:`amazon-thumb ${Ee===Xe?"active":""}`,onClick:()=>{N(Ee);const ht=Et=>Et?String(Et).split("?")[0].split("#")[0].trim().toLowerCase():"",xt=J.findIndex(Et=>ht(Et)===ht(ae.url));xt>=0&&w(xt)},onMouseEnter:()=>F(Ee),onFocus:()=>F(Ee),onMouseLeave:()=>F(null),"aria-label":`Miniatura ${Ee+1}`,children:ae.type==="video"?s.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[s.jsx("video",{src:ae.url,preload:"metadata",muted:!0,className:"w-full h-full object-contain"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"bg-white/95 rounded-full p-2 shadow",children:s.jsx("svg",{className:"w-5 h-5 text-gray-800",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):s.jsx("img",{src:ae.url,alt:`Miniatura ${Ee+1}`,className:"w-full h-full object-contain",loading:"lazy"})},`thumb-${Ee}`))}),ve.length>4&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"ebay-arrow-overlay ebay-arrow-up",onClick:()=>{const ae=document.querySelector(".amazon-thumbs-sidebar");ae&&ae.scrollBy({top:-100,behavior:"smooth"})},children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 15l7-7 7 7"})})}),s.jsx("button",{className:"ebay-arrow-overlay ebay-arrow-down",onClick:()=>{const ae=document.querySelector(".amazon-thumbs-sidebar");ae&&ae.scrollBy({top:100,behavior:"smooth"})},children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M19 9l-7 7-7-7"})})})]})]}),s.jsxs("div",{className:"amazon-main-image-container vp-main-image-sticky",children:[s.jsx("div",{ref:ae=>{gt.current=ae,ge.current=ae},className:`amazon-main-image-wrap ${Ce?"zooming":""}`,onMouseEnter:Rr,onMouseMove:Fr,onMouseLeave:Ti,onClick:()=>{const ae=ve[et];if((ae==null?void 0:ae.type)==="video"){const Ee=(te||[]).findIndex(ht=>ht===ae.url);ls("videos",Math.max(0,Ee))}else ls("images",et)},onTouchStart:Ai,onTouchMove:Sn,onTouchEnd:As,role:"button","aria-label":"Ver imagen en pantalla completa",tabIndex:0,children:(()=>{const ae=ve[et];return ae?ae.type==="video"?s.jsx("div",{className:"relative w-full h-full flex items-center justify-center bg-white",children:s.jsx("video",{src:ae.url,controls:!0,preload:"metadata",playsInline:!0,className:"w-full h-full object-contain"},`main-vid-${et}`)}):s.jsx("img",{ref:ft,src:ae.url,alt:Me.nombre,className:"w-full h-full object-contain transition-opacity duration-300",draggable:!1,onLoad:()=>{setTimeout(()=>{const Ee=ge.current,ht=document.querySelector(".amazon-thumbs-sidebar");if(Ee&&ht){const xt=Ee.offsetHeight;ht.style.height=`${xt}px`,ht.style.maxHeight=`${xt}px`}},50)}},`main-img-${Xe}`):null})()}),s.jsx("div",{className:"hidden xl:block text-center mt-3",children:s.jsx("button",{onClick:()=>ls("images",et),className:"text-blue-600 hover:text-blue-800 text-sm font-medium transition-colors duration-200",children:"Ver vista completa"})})]})]}),ve.length>1&&s.jsx("div",{className:"xl:hidden w-full mt-4 flex justify-center",children:s.jsx("div",{className:"flex gap-2 items-center",children:ve.map((ae,Ee)=>s.jsx("button",{type:"button",className:`dot-indicator ${Ee===Xe?"dot-active":""}`,onClick:()=>N(Ee),"aria-label":`Imagen ${Ee+1} de ${ve.length}`},`dot-${Ee}`))})})]}),s.jsxs("div",{className:"flex flex-col gap-4 sm:gap-5 w-full xl:col-span-4",children:[s.jsx("h1",{className:"vp-title",children:Me.nombre}),(Me.storeId||Me.tienda_id)&&K?s.jsxs(Yt,{to:`/tiendas/${Me.storeId||Me.tienda_id}`,className:"text-blue-600 hover:text-blue-800 underline hover:underline transition-colors w-fit block mb-4 font-semibold","aria-label":`Visitar tienda de ${K}`,children:["Visitar tienda de ",K]}):Me.creadorId&&s.jsx("div",{className:"text-red-500 text-sm mb-4",children:"Producto sin tienda asignada"}),s.jsx("div",{className:"vp-desc prose max-w-none",dangerouslySetInnerHTML:{__html:dG(Me.descripcion||"<p>Contctanos para ms detalles.</p>")}}),s.jsx("div",{children:s.jsx("div",{className:"flex flex-col",children:s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"DOP"}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"$"}),s.jsx("span",{className:"text-3xl font-bold text-blue-700",children:e5(os)})]})})}),bi&&s.jsx("div",{className:"-mt-2",children:s.jsx(aT,{producto:Me,variantes:[{id:"principal",color:"Principal",nombre:"Producto Principal",precio:Me==null?void 0:Me.precio,imagen:((Xo=(bs=Me==null?void 0:Me.imagenPrincipal)==null?void 0:bs[0])==null?void 0:Xo.url)||(Me==null?void 0:Me.imagen),imagenPrincipal:Me==null?void 0:Me.imagenPrincipal,galeriaImagenes:Me==null?void 0:Me.galeriaImagenes,cantidad:Me==null?void 0:Me.cantidad},...wr],varianteSeleccionada:A===-1?0:A+1,onVarianteChange:ae=>{L(ae===0?-1:ae-1),w(0),N(0)}})}),s.jsx("div",{children:s.jsx(uG,{producto:Me})}),s.jsxs("div",{className:"xl:hidden flex flex-col gap-3 overflow-visible",children:[s.jsx("div",{className:`vp-stock ${zn===0?"vp-stock-out":zn<=2?"vp-stock-low":"vp-stock-ok"}`,children:zn===0?"No disponible":Number.isFinite(zn)?`Quedan ${zn} disponibles`:"Disponible"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 overflow-visible",children:[at?s.jsxs("div",{className:"vp-qty-row w-full sm:w-1/2",children:[s.jsx("button",{onClick:tn,className:"vp-qty-btn",children:""}),s.jsx("span",{className:"vp-qty",children:me}),s.jsx("button",{onClick:vt,className:"vp-qty-btn",disabled:me>=In,title:me>=In?"Has alcanzado el mximo disponible":"Agregar una unidad",children:"+"}),s.jsx("button",{onClick:Vn,className:"vp-remove",children:s.jsx(w_,{})})]}):s.jsx("button",{className:`w-full sm:w-1/2 px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl ${Kn?"":"opacity-60 cursor-not-allowed hover:scale-100 hover:bg-blue-600"}`,onClick:ke,disabled:!Kn,title:Kn?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),s.jsx("div",{className:"w-full sm:w-1/2",onClick:()=>t5("single",jt,os),children:s.jsx(n1,{className:"w-full",total:os*100,label:"Comprar ahora"})})]})]})]}),s.jsx("aside",{className:"vp-buy-card w-full xl:col-span-2 hidden xl:block",children:s.jsxs("div",{className:"vp-buy-inner",children:[s.jsxs("div",{className:"vp-buy-price text-xl font-semibold",children:["DOP ",e5(os)]}),s.jsx("div",{className:`vp-stock ${zn===0?"vp-stock-out":zn<=2?"vp-stock-low":"vp-stock-ok"}`,children:zn===0?"No disponible":Number.isFinite(zn)?`Quedan ${zn} disponibles`:"Disponible"}),s.jsxs("div",{className:"flex flex-col gap-3",children:[at?s.jsxs("div",{className:"vp-qty-row",children:[s.jsx("button",{onClick:tn,className:"vp-qty-btn",children:""}),s.jsx("span",{className:"vp-qty",children:me}),s.jsx("button",{onClick:vt,className:"vp-qty-btn",disabled:me>=In,title:me>=In?"Has alcanzado el mximo disponible":"Agregar una unidad",children:"+"}),s.jsx("button",{onClick:Vn,className:"vp-remove",children:s.jsx(w_,{})})]}):s.jsx("button",{className:`w-full px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl whitespace-nowrap ${Kn?"":"opacity-60 cursor-not-allowed hover:scale-100 hover:bg-blue-600"}`,onClick:ke,disabled:!Kn,title:Kn?"Agregar al carrito":"No disponible",children:"Agregar al carrito"}),s.jsx("div",{onClick:()=>t5("single",jt,os),children:s.jsx(n1,{className:"w-full",total:os*100,label:"Comprar ahora"})})]})]})})]}),typeof document<"u"&&V0.createPortal(s.jsx("div",{ref:Te,className:"vp-zoom-float vp-zoom-stage",style:Cr}),document.body),Me&&s.jsx("section",{className:"w-full mt-8 px-4 sm:px-6 xl:px-6",children:s.jsx(cG,{productoActual:Me})}),(()=>{const ae=Xi();return!ae||ae.length===0?null:s.jsxs("section",{className:"w-full mt-8 xl:mt-12 mb-0 xl:mb-8",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4 xl:mb-6 text-center px-4 xl:px-6",children:"Ms informacin del producto"}),s.jsx("div",{className:"-mx-4 sm:-mx-6 xl:max-w-[1500px] xl:mx-auto xl:px-6 xl:space-y-4",children:ae.map((Ee,ht)=>s.jsx("div",{className:"relative w-full cursor-pointer",onClick:()=>{Ht(ht),At(!0)},children:s.jsx("img",{src:Ee,alt:`${Me.nombre} - Informacin ${ht+1}`,className:"w-full h-auto object-cover xl:object-contain bg-white dark:bg-gray-800 xl:rounded-lg",style:{display:"block"}})},`product-info-${ht}`))})]})})(),s.jsx(hG,{producto:Me,allVariantes:Ei})]}),Z&&(()=>{const ae=Cs(),Ee=zs(),ht=ae.length>0,xt=re==="videos"?ae.map(Mt=>({type:"video",url:Mt})):Ee.map(Mt=>({type:"image",url:Mt})),Et=Math.min(ce,Math.max(0,xt.length-1));return s.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${d?"bg-gray-900":"bg-white"}`,children:[s.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${d?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${re==="images"?d?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":d?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{B("images"),Se(0),$e(1),Ye({x:0,y:0})},children:"IMGENES"}),ht&&s.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium transition-all rounded-t ${re==="videos"?d?"text-blue-400 border-b-2 border-blue-400 bg-gray-700":"text-[#007185] border-b-2 border-[#007185] bg-gray-50":d?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>{B("videos"),Se(0),$e(1),Ye({x:0,y:0})},children:"VIDEOS"})]}),s.jsx("button",{type:"button",className:`transition-colors ${d?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:ai,children:s.jsx(ch,{className:"text-2xl"})})]}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:`hidden md:block w-64 lg:w-80 border-r relative group ${d?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:Mt=>Mt.stopPropagation(),onMouseEnter:()=>Rt(!0),onMouseLeave:()=>Rt(!1),children:[Ze&&xt.length>4&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:`absolute top-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all border ${d?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-gray-50 text-gray-800 border-gray-300"}`,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},onClick:()=>{Ie.current&&Ie.current.scrollBy({top:-200,behavior:"smooth"})},"aria-label":"Scroll arriba",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"})})}),s.jsx("button",{type:"button",className:`absolute bottom-2 left-1/2 -translate-x-1/2 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all border ${d?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-white hover:bg-gray-50 text-gray-800 border-gray-300"}`,style:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},onClick:()=>{Ie.current&&Ie.current.scrollBy({top:200,behavior:"smooth"})},"aria-label":"Scroll abajo",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})})]}),s.jsx("div",{ref:Ie,className:"overflow-y-auto p-4 h-full",style:{scrollbarWidth:"thin"},children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:`text-sm font-semibold mb-4 uppercase ${d?"text-gray-200":"text-gray-700"}`,children:re==="videos"?"Videos":"Imgenes"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:xt.map((Mt,$t)=>s.jsx("button",{type:"button",className:`w-full aspect-square overflow-hidden rounded border-2 transition-all ${$t===Et?"":"border-gray-300 hover:border-gray-400"}`,style:$t===Et?{borderColor:"#0064D2"}:void 0,onClick:Ft=>{Ft.stopPropagation(),Se($t),$e(1),Ye({x:0,y:0})},"aria-label":`Vista ${$t+1}`,children:re==="videos"?s.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[s.jsx("video",{src:Mt.url,className:"w-full h-full object-contain",muted:!0}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"bg-white/90 rounded-full p-2",children:s.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):s.jsx("img",{src:Mt.url,alt:`Miniatura ${$t+1}`,className:"w-full h-full object-contain bg-white p-1"})},`desktop-thumb-${$t}`))})]})})]}),s.jsxs("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative ${d?"bg-gray-900":"bg-white"}`,onClick:Mt=>Mt.stopPropagation(),onTouchStart:re==="images"?Fs:void 0,onTouchMove:re==="images"?mo:void 0,onTouchEnd:re==="images"?La:void 0,children:[s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[xt.length>1&&Ve===1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:Mt=>{Mt.stopPropagation(),Se($t=>($t-1+xt.length)%xt.length)},children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:Mt=>{Mt.stopPropagation(),Se($t=>($t+1)%xt.length)},children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),s.jsx("div",{className:"w-full h-full flex items-center justify-center px-2 md:px-4",children:(()=>{const Mt=xt[Et];return Mt?re==="videos"?s.jsx("video",{src:Mt.url,controls:!0,className:"w-full h-full object-contain",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)"},onError:$t=>{}},`video-${Et}`):s.jsx("img",{src:Mt.url,alt:`${(Me==null?void 0:Me.nombre)||"Imagen"}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${Ve}) translate(${Ke.x}px, ${Ke.y}px)`,transition:Ve===1?"transform 0.3s ease":"none",cursor:Ve>1?"zoom-out":"zoom-in"},draggable:!1,onClick:$t=>{if(Ve===1){const Ft=$t.currentTarget.getBoundingClientRect(),hr=(($t.clientX-Ft.left)/Ft.width-.5)*-100,$r=(($t.clientY-Ft.top)/Ft.height-.5)*-100;$e(2),Ye({x:hr,y:$r})}else $e(1),Ye({x:0,y:0})},onMouseMove:$t=>{if(Ve>1){const Ft=$t.currentTarget.getBoundingClientRect(),hr=(($t.clientX-Ft.left)/Ft.width-.5)*-100,$r=(($t.clientY-Ft.top)/Ft.height-.5)*-100;Ye({x:hr,y:$r})}}}):null})()})]}),s.jsx("div",{className:"absolute bottom-4 right-4 xl:hidden",children:s.jsxs("div",{className:`text-xs font-medium px-2 py-1 rounded ${d?"bg-black/50 text-white":"bg-black/40 text-white"}`,children:[Et+1," / ",xt.length]})})]}),s.jsx("div",{className:`md:hidden border-t p-4 overflow-x-auto ${d?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,onClick:Mt=>Mt.stopPropagation(),children:s.jsx("div",{className:"flex gap-3 min-w-min",children:xt.map((Mt,$t)=>s.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${$t===Et?"":"border-gray-300 hover:border-gray-400"}`,style:$t===Et?{borderColor:"#0064D2"}:void 0,onClick:Ft=>{Ft.stopPropagation(),Se($t),$e(1),Ye({x:0,y:0})},"aria-label":`Vista ${$t+1}`,children:re==="videos"?s.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[s.jsx("video",{src:Mt.url,className:"w-full h-full object-contain",muted:!0}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"bg-white/90 rounded-full p-1.5",children:s.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}):s.jsx("img",{src:Mt.url,alt:`Miniatura ${$t+1}`,className:"w-full h-full object-contain bg-white p-1"})},`mobile-thumb-${$t}`))})})]})]})})(),s.jsx(bx,{isOpen:g,onClose:()=>h(!1),onIniciarSesion:()=>{try{a()}catch{}}}),_&&s.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[9999] flex flex-col",onClick:Es,children:[s.jsx("div",{className:"absolute top-4 right-4 z-20",children:s.jsx("button",{className:"bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-colors",onClick:Es,"aria-label":"Cerrar",children:s.jsx(ch,{size:20})})}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-4 relative overflow-hidden",onClick:ae=>ae.stopPropagation(),onTouchStart:Zi,onTouchMove:po,onTouchEnd:Yo,children:s.jsx("img",{src:ar[y],alt:`${Me==null?void 0:Me.nombre}`,className:"max-w-full max-h-full object-contain select-none",style:{transform:`scale(${it||1}) translate(${(Bt==null?void 0:Bt.x)||0}px, ${(Bt==null?void 0:Bt.y)||0}px)`,transition:(it||1)===1?"transform 0.3s ease":"none",cursor:(it||1)>1?"zoom-out":"zoom-in"},draggable:!1,onClick:ae=>{if(ae.stopPropagation(),(it||1)===1){const Ee=ae.currentTarget.getBoundingClientRect(),ht=((ae.clientX-Ee.left)/Ee.width-.5)*-100,xt=((ae.clientY-Ee.top)/Ee.height-.5)*-100;Lt&&Lt(2),Ge&&Ge({x:ht,y:xt})}else Lt&&Lt(1),Ge&&Ge({x:0,y:0})},onMouseMove:ae=>{if((it||1)>1){const Ee=ae.currentTarget.getBoundingClientRect(),ht=((ae.clientX-Ee.left)/Ee.width-.5)*-100,xt=((ae.clientY-Ee.top)/Ee.height-.5)*-100;Ge&&Ge({x:ht,y:xt})}}})}),ar.length>1&&s.jsx("div",{className:"p-4",onClick:ae=>ae.stopPropagation(),children:s.jsx("div",{className:"flex gap-3 justify-center overflow-x-auto pb-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:ar.map((ae,Ee)=>s.jsx("button",{className:`flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ${Ee===y?"border-white border-opacity-100":"border-gray-600 border-opacity-50"}`,onClick:ht=>{ht.stopPropagation(),w(Ee),Lt&&Lt(1),Ge&&Ge({x:0,y:0})},"aria-label":`Miniatura ${Ee+1}`,children:s.jsx("img",{src:ae,alt:`Miniatura ${Ee+1}`,className:"w-full h-full object-contain",loading:"lazy"})},Ee))})})]}),an&&(()=>{const ae=Xi();if(!ae||ae.length===0)return null;const Ee=ae[bn],ht=ae.length>1;return s.jsxs("div",{className:`fixed inset-0 z-[9999] flex flex-col ${d?"bg-gray-900":"bg-white"}`,children:[s.jsxs("div",{className:`border-b px-4 py-3 flex items-center justify-between ${d?"border-gray-700 bg-gray-800":"border-[#DDD] bg-white"}`,children:[s.jsxs("h2",{className:`text-lg font-semibold ${d?"text-white":"text-gray-900"}`,children:["Informacin del producto (",bn+1," /"," ",ae.length,")"]}),s.jsx("button",{type:"button",className:`transition-colors ${d?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Cerrar",onClick:()=>At(!1),children:s.jsx(ch,{className:"text-2xl"})})]}),s.jsx("div",{className:`flex-1 flex items-center justify-center p-4 md:p-8 relative overflow-auto ${d?"bg-gray-900":"bg-white"}`,onTouchStart:$s,onTouchMove:Pi,onTouchEnd:or,children:s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center max-w-[1500px]",children:[ht&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Anterior",onClick:()=>{Ht(xt=>(xt-1+ae.length)%ae.length),Y(1),pe({x:50,y:50})},children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{type:"button",className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-white/90 hover:bg-white shadow-lg rounded-full p-3 text-gray-700 hover:text-gray-900 transition-all hidden xl:flex items-center justify-center","aria-label":"Siguiente",onClick:()=>{Ht(xt=>(xt+1)%ae.length),Y(1),pe({x:50,y:50})},children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),s.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden px-2 md:px-4",children:s.jsx("img",{src:Ee,alt:`${Me==null?void 0:Me.nombre} - Informacin ${bn+1}`,className:"w-full h-full object-contain select-none",style:{maxWidth:"min(100vw - 2rem, 1500px)",maxHeight:"min(90vh, 100%)",transform:`scale(${ze})`,transformOrigin:`${ie.x}% ${ie.y}%`,transition:ze===1?"transform 0.3s ease":"none",cursor:ze>1?"zoom-out":"zoom-in"},draggable:!1,onClick:xt=>{if(ze===1){const Et=xt.currentTarget.getBoundingClientRect(),Mt=(xt.clientX-Et.left)/Et.width*100,$t=(xt.clientY-Et.top)/Et.height*100;Y(2.5),pe({x:Mt,y:$t})}else Y(1),pe({x:50,y:50})},onMouseMove:xt=>{if(ze>1){const Et=xt.currentTarget.getBoundingClientRect(),Mt=(xt.clientX-Et.left)/Et.width*100,$t=(xt.clientY-Et.top)/Et.height*100;pe({x:Mt,y:$t})}}})})]})}),ht&&s.jsx("div",{className:`border-t p-4 overflow-x-auto ${d?"border-gray-700 bg-gray-800":"border-[#DDD] bg-gray-50"}`,children:s.jsx("div",{className:"flex gap-3 justify-center min-w-min",children:ae.map((xt,Et)=>s.jsx("button",{type:"button",className:`flex-shrink-0 w-20 h-20 overflow-hidden rounded border-2 transition-all ${Et===bn?"border-blue-500 ring-2 ring-blue-500/30":"border-gray-300 hover:border-blue-500/50"}`,onClick:()=>Ht(Et),"aria-label":`Vista ${Et+1}`,children:s.jsx("img",{src:xt,alt:`Miniatura ${Et+1}`,className:"w-full h-full object-contain bg-white p-1"})},`product-info-thumb-${Et}`))})})]})})(),s.jsx(tp,{notifications:si,onRemove:Yi})]})}function mG(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function pG(t,e){if(!e)return r1(t);if(Array.isArray(e.variantes)&&t.colorSeleccionado){const n=e.variantes.find(r=>r.color===t.colorSeleccionado);if(n&&n.cantidad!==void 0)return Number(n.cantidad)||0}return e.cantidad!==void 0?Number(e.cantidad)||0:r1(t)}function r1(t){if(t.maxStock!==void 0&&t.maxStock!==null){const e=Number(t.maxStock);if(!Number.isNaN(e))return e}if(Array.isArray(t.variantes)&&t.colorSeleccionado){const e=t.variantes.find(n=>n.color===t.colorSeleccionado);if(e&&e.cantidad!==void 0)return Number(e.cantidad)||0}if(t.cantidadProducto!==void 0){const e=Number(t.cantidadProducto);if(!Number.isNaN(e))return e}return t.cantidad!==void 0&&t.cantidad,Number.POSITIVE_INFINITY}function gG(t,e){try{const n={mode:"cart",items:t,total:e,at:Date.now()};sessionStorage.setItem("checkoutPayload",JSON.stringify(n))}catch{}}function xG(){const{carrito:t,agregarAlCarrito:e,eliminarUnidadDelCarrito:n,quitarDelCarrito:r}=Xm(),i=Sr(),[a,l]=b.useState(null),[d,u]=b.useState({});b.useEffect(()=>{const h=[],y=new Set;return t.forEach(w=>{if(w!=null&&w.id&&!y.has(w.id)){y.add(w.id);const S=We(oe,"productos",w.id),N=_n(S,_=>{_.exists()&&u(D=>({...D,[w.id]:_.data()}))});h.push(N)}}),()=>{h.forEach(w=>w&&w())}},[t]);const m=t.reduce((h,y)=>h+(Number(y.precio)||0)*y.cantidad,0),g=t.map(h=>({id:h.id,nombre:h.nombre,precio:Number(h.precio)||0,cantidad:h.cantidad}));return s.jsxs(s.Fragment,{children:[s.jsx("main",{className:"carrito-page",style:{paddingTop:"40px"},children:t.length===0?s.jsx("div",{className:"carrito-empty-wrap",children:s.jsxs("div",{className:"carrito-empty-box",children:[s.jsx("img",{src:"/toy/asoma.png",alt:"Explora nuestros productos",className:"carrito-empty-figure",loading:"lazy"}),s.jsxs("div",{className:"carrito-empty-glass",children:[s.jsx("div",{className:"carrito-empty-icon","aria-hidden":"true",children:""}),s.jsx("h2",{className:"carrito-empty-title",children:"No hay nada en el carrito"}),s.jsx("p",{className:"carrito-empty-sub",children:"Explora nuestros productos"}),s.jsx("button",{type:"button",className:"carrito-empty-cta",onClick:()=>i("/categorias"),children:"Ver productos"})]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"carrito-grid",children:t.map(h=>{const y=d[h.id];r1(h);const w=pG(h,y),S=Number.isFinite(w)?Math.max(0,w-(Number(h.cantidad)||0)):w,N=`${h.id}__${h.colorSeleccionado??""}`;return s.jsxs("div",{className:"carrito-card",onClick:()=>i(`/producto/${h.id}`),children:[(()=>{var R;const _=E=>{try{return E?typeof E=="string"?E:typeof E=="object"&&E!==null?E.url||"":String(E||""):""}catch{return""}},D=d[h.id]||h,A=()=>{var M;const E=Array.isArray(D.variantes)?D.variantes:[];for(const O of E){const j=_((M=O==null?void 0:O.imagenPrincipal)==null?void 0:M[0]);if(j)return j;if(O!=null&&O.imagen)return O.imagen;const H=(Array.isArray(O==null?void 0:O.media)?O.media:[]).find(V=>{const K=((V==null?void 0:V.type)||"").toLowerCase();return _(V)&&(!K||K.includes("image")||K==="img"||K==="photo")});if(H)return _(H)}return""},I=(Array.isArray(D.media)?D.media:[]).find(E=>{const M=((E==null?void 0:E.type)||"").toLowerCase();return _(E)&&(!M||M.includes("image")||M==="img"||M==="photo")}),F=_((R=D==null?void 0:D.imagenPrincipal)==null?void 0:R[0])||(D==null?void 0:D.imagen)||(I?_(I):"")||_(Array.isArray(D==null?void 0:D.galeriaImagenes)&&D.galeriaImagenes[0])||_(Array.isArray(D==null?void 0:D.imagenes)&&D.imagenes[0])||A()||"";return s.jsx("img",{src:F,alt:h.nombre,className:"carrito-img"})})(),s.jsxs("div",{className:"carrito-info",children:[s.jsx("h2",{className:"carrito-nombre",children:h.nombre}),s.jsxs("div",{className:"carrito-subtotal",children:["RD$"," ",mG((Number(h.precio)||0)*h.cantidad)]}),s.jsx("p",{className:`carrito-stock ${S===0?"stock-out":Number.isFinite(S)&&S<=2?"stock-low":"stock-ok"}`,children:S===0?"No disponible":Number.isFinite(S)&&S<=2?`Solo quedan ${S}`:Number.isFinite(S)?`${S} disponibles`:"Disponible"}),s.jsxs("div",{className:"carrito-actions",children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("button",{onClick:_=>{_.stopPropagation(),n(h.id,h.colorSeleccionado??null)},className:"vp-qty-btn","aria-label":"Disminuir cantidad",children:""}),s.jsx("span",{className:"vp-qty",children:h.cantidad}),s.jsx("button",{onClick:_=>{if(_.stopPropagation(),!Number.isFinite(w)||h.cantidad<w){const D=d[h.id]||h;e(D,h.colorSeleccionado??null)}},className:"vp-qty-btn",disabled:Number.isFinite(w)&&h.cantidad>=w,"aria-label":"Aumentar cantidad",children:"+"})]}),s.jsx("button",{onClick:_=>{_.stopPropagation(),l(h)},className:"vp-remove",title:"Eliminar producto","aria-label":"Eliminar del carrito",children:s.jsx(G6,{})})]})]})]},N)})}),s.jsx("div",{className:"carrito-footer",children:s.jsx("div",{className:"carrito-pay-wrap",onClick:()=>gG(g,m),children:s.jsx(n1,{className:"carrito-cardnet-btn w-full",total:m*100})})})]})}),a&&f1.createPortal(s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2147483647},onClick:()=>l(null),children:s.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"1rem",maxWidth:"420px",width:"90%",textAlign:"center",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.4)"},onClick:h=>h.stopPropagation(),children:[s.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:800,marginBottom:"1rem",color:"#111827"},children:"Eliminar producto?"}),s.jsxs("p",{style:{fontSize:"1.05rem",marginBottom:"1.75rem",color:"#374151"},children:["Seguro que quieres quitar"," ",s.jsx("strong",{children:a.nombre})," del carrito?"]}),s.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[s.jsx("button",{style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"2px solid #d1d5db",background:"#f9fafb",color:"#374151",fontSize:"1rem",fontWeight:600,cursor:"pointer"},onClick:()=>l(null),children:"Cancelar"}),s.jsx("button",{style:{padding:"0.75rem 1.5rem",borderRadius:"0.5rem",border:"2px solid #ef4444",background:"#ef4444",color:"white",fontSize:"1rem",fontWeight:600,cursor:"pointer"},onClick:()=>{r(a.id,a.colorSeleccionado??null),l(null)},children:"S, eliminar"})]})]})}),document.body)]})}function fT(){return s.jsx("div",{className:"waves-container"})}function yG(){const{isDark:t}=Ss(),[e,n]=b.useState(0),r=["/vender/1-.mp4","/vender/2-.mp4","/vender/3-.mp4","/vender/4-.mp4","/vender/5-.mp4"];b.useEffect(()=>{const l=setInterval(()=>{n(d=>(d+1)%r.length)},5e3);return()=>clearInterval(l)},[r.length]);const i={hidden:{opacity:0,y:60},visible:{opacity:1,y:0}},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}};return s.jsxs("div",{className:`min-h-screen transition-colors duration-500 ${t?"bg-slate-900":"bg-gradient-to-br from-blue-50 via-slate-50 to-indigo-50"}`,style:{paddingTop:"0px"},children:[s.jsx(fT,{}),s.jsx("section",{className:`py-6 sm:py-8 lg:py-10 transition-colors duration-500 ${t?"bg-slate-800":"bg-gradient-to-br from-blue-50 via-indigo-50 to-slate-50"}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx(Q.div,{initial:"hidden",animate:"visible",variants:a,className:"text-center mb-12",children:s.jsx(Q.h1,{variants:i,className:`text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 transition-colors duration-300 ${t?"text-white":"text-slate-900"}`,style:{fontFamily:"'Orbitron', sans-serif"},children:"CONTCTANOS"})}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[s.jsxs(Q.div,{initial:{opacity:0,x:-40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`p-4 sm:p-6 lg:p-8 rounded-3xl ${t?"bg-slate-900":"bg-white shadow-xl"}`,children:[s.jsx("h2",{className:`text-lg sm:text-xl lg:text-2xl xl:text-3xl font-extrabold mb-4 sm:mb-6 lg:mb-8 transition-colors duration-300 ${t?"text-white":"text-slate-900"}`,children:"Estamos aqu para ayudarte"}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[s.jsx(yg,{icon:s.jsx(jh,{}),label:"Direccin",text:"Av. Estrella Sadhal #55, Santiago, Repblica Dominicana",isDark:t}),s.jsx(yg,{icon:s.jsx(Tm,{}),label:"Telfono Tienda",text:"+1 (849)-635-7000",isDark:t}),s.jsx(yg,{icon:s.jsx(Tm,{}),label:"Telfono Internet",text:"+1 (809)-582-1212",isDark:t}),s.jsx(yg,{icon:s.jsx(lh,{}),label:"Correo",text:"playcenter121@gmail.com",isDark:t})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mt-4 sm:mt-6 lg:mt-8",children:[s.jsx(n5,{href:"https://wa.me/18496357000",text:"WhatsApp Tienda",isDark:t}),s.jsx(n5,{href:"https://wa.me/18095821212",text:"WhatsApp Internet",isDark:t})]})]}),s.jsxs(Q.div,{initial:{opacity:0,x:40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`relative overflow-hidden rounded-3xl aspect-square ${t?"bg-slate-800":"bg-white shadow-xl"}`,children:[s.jsx("div",{className:"relative w-full h-full",children:r.map((l,d)=>s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${d===e?"opacity-100":"opacity-0"}`,children:s.jsx("source",{src:l,type:"video/mp4"})},d))}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:r.map((l,d)=>s.jsx("button",{onClick:()=>n(d),className:`w-2 h-2 rounded-full transition-all duration-300 ${d===e?t?"bg-yellow-400 w-8":"bg-blue-600 w-8":t?"bg-white/40":"bg-slate-400/40"}`},d))})]})]})]})})]})}const yg=({icon:t,label:e,text:n,isDark:r})=>s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 w-full",children:[s.jsx("div",{className:`flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-lg lg:rounded-xl flex items-center justify-center transition-colors duration-300 ${r?"bg-yellow-400":"bg-blue-600"}`,children:s.jsx("div",{className:`text-sm sm:text-base lg:text-xl ${r?"text-gray-900":"text-white"}`,children:t})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`text-sm sm:text-base lg:text-lg font-bold mb-1 sm:mb-1.5 lg:mb-2 transition-colors duration-300 ${r?"text-white":"text-gray-900"}`,children:e}),s.jsx("p",{className:`text-xs sm:text-sm lg:text-base leading-relaxed transition-colors duration-300 ${r?"text-gray-100":"text-gray-600"}`,children:n})]})]}),n5=({href:t,text:e,isDark:n})=>s.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center justify-center gap-2 px-3 sm:px-4 lg:px-6 py-2 sm:py-2.5 lg:py-3 rounded-lg font-bold text-white transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl flex-1 ${n?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-500 hover:bg-emerald-600"}`,children:[s.jsx(A0,{className:"text-base lg:text-lg"}),s.jsx("span",{className:"text-xs sm:text-sm lg:text-base",children:e})]});function vG(){const t=Sr(),{isDark:e}=Ss(),{usuario:n,usuarioInfo:r}=er(),[i,a]=b.useState(0),[l,d]=b.useState(0),[u,m]=b.useState(0),[g,h]=b.useState(0),[y,w]=b.useState(!1),[S,N]=b.useState(!1),[_,D]=b.useState(""),[A,L]=b.useState(""),[I,F]=b.useState(!1),R=["/vender/2.png","/vender/3.png","/vender/4.png"],E=["/vender/1-.mp4","/vender/2-.mp4","/vender/3-.mp4","/vender/4-.mp4","/vender/5-.mp4"],M=["/vender/6-.mp4","/vender/8-.mp4","/vender/9-.mp4","/vender/10-.mp4"];b.useEffect(()=>{const V=()=>a(window.scrollY);return window.addEventListener("scroll",V),()=>window.removeEventListener("scroll",V)},[]),b.useEffect(()=>{const V=setInterval(()=>{d(K=>(K+1)%R.length)},4e3);return()=>clearInterval(V)},[R.length]),b.useEffect(()=>{const V=setInterval(()=>{m(K=>(K+1)%E.length)},5e3);return()=>clearInterval(V)},[E.length]),b.useEffect(()=>{const V=setInterval(()=>{h(K=>(K+1)%M.length)},5e3);return()=>clearInterval(V)},[M.length]),b.useEffect(()=>{(async()=>{if(!n){N(!1),w(!1);return}try{if(w(!0),(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.isAdmin)===!0||(r==null?void 0:r.admin)===!0){const le=await Fn(We(oe,"tiendas","playcenter_universal"));if(le.exists()){const re=le.data();N(!0),D(re.nombre||re.name||"Playcenter Universal"),L("playcenter_universal"),w(!1);return}}const X=["ownerId","owner_id","propietarioId","userId"];for(const le of X){const re=Ot(pt(oe,"tiendas"),qt(le,"==",n.uid)),B=await rn(re);if(!B.empty){const ce=B.docs[0].data(),Se=B.docs[0].id;N(!0),D(ce.nombre||ce.name||"Mi Tienda"),L(Se),w(!1);return}}const ne=pt(oe,"stores"),we=Ot(ne,qt("ownerUid","==",n.uid)),Z=await rn(we);if(!Z.empty){const le=Z.docs[0].data(),re=Z.docs[0].id;N(!0),D(le.nombre||le.name||"Mi Tienda"),L(re),w(!1);return}N(!1),L("")}catch{N(!1)}finally{w(!1)}})()},[n,r]);const O=()=>{if(S){F(!0);return}t("/solicitar-vender")},j=()=>{F(!1),t(A?`/tiendas/${A}`:"/admin")},U={hidden:{opacity:0,y:60},visible:{opacity:1,y:0}},H={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}};return s.jsxs("div",{className:`min-h-screen transition-colors duration-500 ${e?"bg-slate-900":"bg-gradient-to-br from-blue-50 via-slate-50 to-indigo-50"}`,style:{paddingTop:"20px"},children:[s.jsxs("section",{className:`relative pt-20 pb-20 lg:pb-32 overflow-x-clip transition-colors duration-500 ${e?"bg-slate-900":"bg-gradient-to-br from-blue-100 via-indigo-100 to-slate-100"}`,children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:`absolute -top-40 -right-40 w-80 h-80 rounded-full blur-3xl ${e?"bg-yellow-400/10":"bg-blue-400/10"}`}),s.jsx("div",{className:`absolute top-60 -left-40 w-96 h-96 rounded-full blur-3xl ${e?"bg-blue-500/10":"bg-indigo-400/10"}`})]}),s.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid lg:grid-cols-[45%_55%] gap-8 lg:gap-12 items-center",children:[s.jsxs(Q.div,{initial:"hidden",animate:"visible",variants:H,className:"text-left",children:[s.jsxs(Q.h1,{variants:U,className:`text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold leading-tight mb-6 transition-colors duration-300 ${e?"text-white":"text-slate-900"}`,children:["Crea una cuenta de vendedor de"," ",s.jsx("span",{className:e?"text-yellow-400":"text-blue-600",children:"Playcenter Universal"})]}),s.jsxs(Q.div,{variants:U,className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-start gap-3 sm:gap-4 mb-8",children:[s.jsx("button",{onClick:O,disabled:y,className:`group px-6 py-3 sm:px-8 sm:py-3.5 lg:px-10 lg:py-4 rounded-lg font-bold text-sm sm:text-base lg:text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ${e?"bg-yellow-400 text-slate-900 hover:bg-yellow-500 shadow-lg":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Verificando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"COMENZAR"}),s.jsx(_a,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:translate-x-1 transition-transform"})]})}),s.jsx("button",{onClick:()=>document.getElementById("beneficios").scrollIntoView({behavior:"smooth"}),className:`px-6 py-3 sm:px-8 sm:py-3.5 lg:px-10 lg:py-4 rounded-lg font-semibold text-sm sm:text-base lg:text-lg transition-all duration-300 border-2 ${e?"border-yellow-400/40 text-yellow-400 hover:bg-yellow-400/10 hover:border-yellow-400/60":"border-blue-600/40 text-blue-700 hover:bg-blue-600/10 hover:border-blue-600/60"}`,children:"Conocer ms"})]}),s.jsxs(Q.div,{variants:U,className:"flex flex-wrap items-center justify-start gap-4 sm:gap-8",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qf,{className:`w-5 h-5 ${e?"text-yellow-400":"text-blue-600"}`}),s.jsx("span",{className:`text-sm sm:text-base ${e?"text-gray-200":"text-gray-600"}`,children:"Sin costos iniciales"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qf,{className:`w-5 h-5 ${e?"text-yellow-400":"text-blue-600"}`}),s.jsx("span",{className:`text-sm sm:text-base ${e?"text-gray-200":"text-gray-600"}`,children:"Gestin 100% digital"})]})]})]}),s.jsx(Q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"relative flex items-center justify-center lg:justify-start overflow-visible -mr-8 lg:-mr-16",children:s.jsx("img",{src:"/vender/vender.png",alt:"Vendedor Playcenter",className:"w-[180%] sm:w-[170%] md:w-[220%] lg:w-[280%] xl:w-[350%] 2xl:w-[400%] h-auto object-contain"})})]})})]}),s.jsx("section",{id:"beneficios",className:`py-20 lg:py-32 transition-colors duration-500 ${e?"bg-slate-800":"bg-gradient-to-br from-blue-50 via-indigo-50 to-slate-50"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[s.jsxs(Q.div,{initial:{opacity:0,x:-40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`p-8 sm:p-10 lg:p-12 rounded-3xl ${e?"bg-slate-900":"bg-white shadow-xl"}`,children:[s.jsx("h2",{className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-6 transition-colors duration-300 ${e?"text-white":"text-slate-900"}`,children:"Por qu vender aqu?"}),s.jsx("p",{className:`text-base sm:text-lg md:text-xl mb-8 leading-relaxed transition-colors duration-300 ${e?"text-gray-100":"text-gray-700"}`,children:"Descubre todas las ventajas de unirte al marketplace lder en tecnologa gaming"}),s.jsx("div",{className:"space-y-4",children:["Audiencia Gamer: Accede a una comunidad de gamers activos que buscan productos gaming de calidad todos los das.","Pagos Rpidos: Recibe tus pagos de forma segura y rpida. Procesamiento automtico cada semana sin complicaciones.","Gestin Total: Dashboard completo para gestionar inventario, pedidos, estadsticas y ms. Todo en un solo lugar."].map((V,K)=>s.jsxs(Q.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5,delay:K*.1},className:"flex items-start gap-3",children:[s.jsx(Qf,{className:`w-6 h-6 flex-shrink-0 mt-1 ${e?"text-yellow-400":"text-blue-600"}`}),s.jsx("p",{className:`text-sm sm:text-base ${e?"text-gray-200":"text-gray-600"}`,children:V})]},K))})]}),s.jsxs(Q.div,{initial:{opacity:0,x:40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`relative overflow-hidden rounded-3xl aspect-square ${e?"bg-slate-900":"bg-white shadow-xl"}`,children:[s.jsx("div",{className:"relative w-full h-full",children:R.map((V,K)=>s.jsx("img",{src:V,alt:`Beneficio ${K+1}`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${K===l?"opacity-100":"opacity-0"}`},K))}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:R.map((V,K)=>s.jsx("button",{onClick:()=>d(K),className:`w-2 h-2 rounded-full transition-all duration-300 ${K===l?e?"bg-yellow-400 w-8":"bg-blue-600 w-8":e?"bg-white/40":"bg-slate-400/40"}`},K))})]})]})})}),s.jsx("section",{className:`py-20 lg:py-32 transition-colors duration-500 ${e?"bg-slate-900":"bg-gradient-to-br from-indigo-50 via-blue-50 to-slate-50"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[s.jsxs(Q.div,{initial:{opacity:0,x:-40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`hidden lg:block relative overflow-hidden rounded-3xl aspect-square ${e?"bg-slate-800":"bg-white shadow-xl"}`,children:[s.jsx("div",{className:"relative w-full h-full",children:E.map((V,K)=>s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${K===u?"opacity-100":"opacity-0"}`,children:s.jsx("source",{src:V,type:"video/mp4"})},K))}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:E.map((V,K)=>s.jsx("button",{onClick:()=>m(K),className:`w-2 h-2 rounded-full transition-all duration-300 ${K===u?e?"bg-yellow-400 w-8":"bg-blue-600 w-8":e?"bg-white/40":"bg-slate-400/40"}`},K))})]}),s.jsxs(Q.div,{initial:{opacity:0,x:40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`p-6 sm:p-8 lg:p-10 rounded-3xl aspect-square flex flex-col justify-center ${e?"bg-slate-800":"bg-white shadow-xl"}`,children:[s.jsxs("h2",{className:`text-xl sm:text-2xl md:text-3xl lg:text-4xl font-extrabold mb-3 transition-colors duration-300 ${e?"text-white":"text-slate-900"}`,children:["Todo lo que necesitas para"," ",s.jsx("span",{className:e?"text-yellow-400":"text-blue-600",children:"vender ms"})]}),s.jsx("p",{className:`text-sm sm:text-base md:text-lg mb-4 leading-relaxed transition-colors duration-300 ${e?"text-gray-100":"text-gray-700"}`,children:"Herramientas profesionales diseadas para que tu negocio crezca sin lmites"}),s.jsx("div",{className:"space-y-3",children:[{icon:Uc,title:"Inventario ilimitado",desc:"Publica todos los productos que quieras"},{icon:Bc,title:"Proteccin de ventas",desc:"Garanta en cada transaccin"},{icon:Bb,title:"Envos a todo el pas",desc:"Logstica integrada"}].map((V,K)=>s.jsxs(Q.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5,delay:K*.1},className:`flex items-start space-x-3 p-3 rounded-2xl transition-all duration-300 ${e?"hover:bg-slate-800/50":"hover:bg-white/50"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 transition-colors duration-300 ${e?"bg-yellow-400":"bg-blue-600"}`,children:s.jsx(V.icon,{className:`w-5 h-5 ${e?"text-gray-900":"text-white"}`})}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-base sm:text-lg font-bold mb-1 transition-colors duration-300 ${e?"text-white":"text-gray-900"}`,children:V.title}),s.jsx("p",{className:`text-sm sm:text-base transition-colors duration-300 ${e?"text-gray-100":"text-gray-600"}`,children:V.desc})]})]},K))})]})]})})}),s.jsxs("section",{className:`relative py-20 lg:py-32 overflow-hidden transition-colors duration-500 ${e?"bg-slate-900":"bg-gradient-to-br from-blue-100 via-indigo-100 to-slate-100"}`,children:[s.jsx("div",{className:"absolute inset-0 overflow-hidden",children:s.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full blur-3xl ${e?"bg-yellow-400/20":"bg-blue-400/20"}`})}),s.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[s.jsxs(Q.div,{initial:{opacity:0,x:-40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:"text-left",children:[s.jsx("h2",{className:`text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold mb-6 transition-colors duration-300 ${e?"text-white":"text-slate-900"}`,children:"Listo para empezar?"}),s.jsx("p",{className:`text-base sm:text-lg md:text-xl mb-8 transition-colors duration-300 ${e?"text-gray-100":"text-gray-700"}`,children:"nete a cientos de vendedores que ya estn creciendo con Playcenter Universal"}),s.jsxs("button",{onClick:O,className:`group w-full lg:w-auto px-6 py-3 sm:px-8 sm:py-3.5 lg:px-10 lg:py-4 rounded-lg font-bold text-sm sm:text-base lg:text-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl inline-flex items-center justify-center gap-2 ${e?"bg-yellow-400 text-slate-900 hover:bg-yellow-500 shadow-lg":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg"}`,children:[s.jsx("span",{children:"COMENZAR"}),s.jsx(_a,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:translate-x-1 transition-transform"})]}),s.jsx("p",{className:`mt-8 text-base sm:text-lg transition-colors duration-300 ${e?"text-gray-200":"text-gray-600"}`,children:"Sin costos de registro  Configura tu tienda en minutos  Soporte 24/7"})]}),s.jsxs(Q.div,{initial:{opacity:0,x:40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`relative overflow-hidden rounded-3xl aspect-square ${e?"bg-slate-800":"bg-white shadow-xl"}`,children:[s.jsx("div",{className:"relative w-full h-full",children:M.map((V,K)=>s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${K===g?"opacity-100":"opacity-0"}`,children:s.jsx("source",{src:V,type:"video/mp4"})},K))}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:M.map((V,K)=>s.jsx("button",{onClick:()=>h(K),className:`w-2 h-2 rounded-full transition-all duration-300 ${K===g?e?"bg-yellow-400 w-8":"bg-blue-600 w-8":e?"bg-white/40":"bg-slate-400/40"}`},K))})]})]})})]}),s.jsx(sn,{children:I&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:()=>F(!1),children:s.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",duration:.5},onClick:V=>V.stopPropagation(),className:`relative max-w-md w-full rounded-2xl p-6 sm:p-8 shadow-2xl ${e?"bg-slate-800":"bg-white"}`,children:[s.jsx("button",{onClick:()=>F(!1),className:`absolute top-4 right-4 p-2 rounded-full transition-colors ${e?"hover:bg-slate-700 text-gray-300":"hover:bg-gray-100 text-gray-600"}`,children:s.jsx(gs,{size:20})}),s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${e?"bg-yellow-400/20":"bg-blue-100"}`,children:s.jsx(xr,{className:`w-8 h-8 ${e?"text-yellow-400":"text-blue-600"}`})})}),s.jsx("h2",{className:`text-2xl sm:text-3xl font-bold text-center mb-4 ${e?"text-white":"text-gray-900"}`,children:"Ya tienes una tienda!"}),s.jsxs("p",{className:`text-center mb-6 text-base sm:text-lg ${e?"text-gray-300":"text-gray-600"}`,children:["Ya cuentas con tu tienda"," ",s.jsxs("span",{className:`font-bold ${e?"text-yellow-400":"text-blue-600"}`,children:['"',_,'"']}),". No puedes crear otra tienda con esta cuenta."]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("button",{onClick:j,className:`w-full py-3 px-6 rounded-lg font-bold text-white transition-all duration-300 hover:scale-105 shadow-lg flex items-center justify-center gap-2 ${e?"bg-yellow-400 hover:bg-yellow-500 text-gray-900":"bg-blue-600 hover:bg-blue-700"}`,children:[s.jsx(xr,{size:20}),s.jsx("span",{children:"Ver mi tienda"}),s.jsx(Ub,{size:16})]}),s.jsx("button",{onClick:()=>{F(!1),t("/admin")},className:`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 border-2 ${e?"border-yellow-400/40 text-yellow-400 hover:bg-yellow-400/10":"border-blue-600/40 text-blue-700 hover:bg-blue-600/10"}`,children:"Ir al panel de administracin"}),s.jsx("button",{onClick:()=>F(!1),className:`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 border-2 ${e?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Cerrar"})]})]})})})]})}function bG(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),{isDark:i}=Ss(),[a,l]=b.useState([]),d=(g,h="info",y=null)=>{const w=Date.now()+Math.random();l(S=>[...S,{id:w,message:g,type:h,title:y}])},u=g=>{l(h=>h.filter(y=>y.id!==g))};b.useEffect(()=>{m()},[]);const m=async()=>{try{const g=Ot(pt(oe,"tiendas"),qt("estado","==","activa")),y=(await rn(g)).docs.map(D=>({id:D.id,...D.data(),principal:D.id==="playcenter_universal"})),w=Ot(pt(oe,"stores"),qt("activa","==",!0)),N=(await rn(w)).docs.map(D=>({id:D.id,...D.data(),principal:!1}));let _=[...y,...N];_.sort((D,A)=>{var F,R,E,M;if(D.principal&&!A.principal)return-1;if(!D.principal&&A.principal)return 1;const L=((R=(F=D.createdAt)==null?void 0:F.toDate)==null?void 0:R.call(F))||new Date(0);return(((M=(E=A.createdAt)==null?void 0:E.toDate)==null?void 0:M.call(E))||new Date(0))-L}),e(_)}catch{}finally{r(!1)}};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ml,{size:"xlarge",color:"blue",variant:"pulse"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xl font-semibold mt-6 animate-pulse",children:"Cargando tiendas..."}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"Un momento por favor"})]})}):s.jsx("div",{className:"min-h-screen",style:{paddingTop:"10px",backgroundColor:i?"#000000":"#f9fafb"},children:s.jsxs("div",{className:"w-full px-2 py-2 md:px-3",children:[t.length===0?s.jsxs(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-16 px-4",children:[s.jsx(xr,{size:64,className:"mx-auto text-gray-300 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No hay tiendas disponibles"}),s.jsx("p",{className:"text-gray-500",children:"Pronto habr tiendas para explorar"})]}):s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:t.map((g,h)=>s.jsx(wG,{tienda:g,index:h,showNotification:d},g.id))})}),s.jsx(tp,{notifications:a,onRemove:u})]})})}function wG({tienda:t,index:e,showNotification:n}){const{usuario:r}=er(),{isDark:i}=Ss(),[a,l]=b.useState(!1),[d,u]=b.useState(t.seguidores||0),[m,g]=b.useState(t.productos||0),[h,y]=b.useState(!1),w=t.principal?"tiendas":"stores";b.useEffect(()=>{if(!t.id)return;(async()=>{try{const _=new Set,D=Ot(pt(oe,"productos"),qt("storeId","==",t.id),qt("activo","==",!0));(await rn(D)).docs.forEach(O=>_.add(O.id));const L=Ot(pt(oe,"productos"),qt("storeId","==",t.id));(await rn(L)).docs.forEach(O=>{O.data().activo!==!1&&_.add(O.id)});const F=Ot(pt(oe,"productos"),qt("tiendaId","==",t.id));(await rn(F)).docs.forEach(O=>{O.data().activo!==!1&&_.add(O.id)});const E=Ot(pt(oe,"productos"),qt("tienda_id","==",t.id));(await rn(E)).docs.forEach(O=>{O.data().activo!==!1&&_.add(O.id)}),g(_.size)}catch{}})()},[t.id]),b.useEffect(()=>{if(!r||!t.id)return;const N=We(oe,w,t.id,"seguidores",r.uid),_=_n(N,D=>{l(D.exists())},D=>{});return()=>_()},[r,t.id,w]),b.useEffect(()=>{if(!t.id)return;const N=We(oe,w,t.id),_=_n(N,D=>{if(D.exists()){const A=D.data();u(A.seguidores||0)}},D=>{});return()=>_()},[t.id,w]);const S=async N=>{if(N.preventDefault(),N.stopPropagation(),!r){n("Debes iniciar sesin para seguir tiendas","warning","Iniciar sesin");return}y(!0);try{const _=We(oe,w,t.id),D=We(oe,w,t.id,"seguidores",r.uid),A=We(oe,"users",r.uid);if(a){await co(D),await jn(_,{seguidores:kc(-1)});const L=await Fn(A);if(L.exists()){const I=L.data().tiendasSeguidas||[];await jn(A,{tiendasSeguidas:I.filter(F=>F!==t.id)})}l(!1),u(I=>Math.max(0,I-1))}else{await Cn(D,{usuarioId:r.uid,fechaSeguimiento:new Date}),await jn(_,{seguidores:kc(1)});const L=await Fn(A);if(L.exists()){const I=L.data().tiendasSeguidas||[];I.includes(t.id)||await jn(A,{tiendasSeguidas:[...I,t.id]})}else await Cn(A,{tiendasSeguidas:[t.id]},{merge:!0});l(!0),u(I=>I+1)}}catch{n("Error al procesar la accin. Intenta de nuevo.","error","Error")}finally{y(!1)}};return s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.08,type:"spring",stiffness:100},className:"group",children:s.jsx(Yt,{to:`/tiendas/${t.id}`,className:"block h-full",style:{textDecoration:"none"},"aria-label":`Ver tienda ${t.nombre}`,children:s.jsxs("div",{className:"rounded-3xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-2 h-full",style:{backgroundColor:i?"#1e293b":"#ffffff",border:i?"1px solid rgba(59, 130, 246, 0.2)":"1px solid rgba(229, 231, 235, 0.8)"},children:[s.jsx("div",{className:"relative w-full flex justify-center items-center overflow-hidden",style:{backgroundColor:"transparent",minHeight:"140px",maxHeight:"140px"},children:t.banner?s.jsx("img",{src:t.banner,alt:`Banner de ${t.nombre}`,className:"w-full h-auto object-contain transition-transform duration-300 group-hover:scale-105",style:{objectFit:"contain",imageRendering:"auto",opacity:1,visibility:"visible",display:"block"},loading:"eager"}):s.jsx("div",{className:"w-full h-48 flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:s.jsx(xr,{size:64,className:"text-white opacity-40"})})}),s.jsxs("div",{className:"p-3 md:p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-white dark:bg-gray-700 rounded-full shadow-lg border-2 border-gray-200 dark:border-gray-600 flex-shrink-0 overflow-hidden flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl",children:t.logo?s.jsx("img",{src:t.logo,alt:`Logo de ${t.nombre}`,className:"w-full h-full object-contain p-2 transition-transform duration-300 group-hover:scale-110",style:{imageRendering:"auto"},loading:"lazy"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-full",children:s.jsx(xr,{size:24,className:"text-gray-400 dark:text-gray-500"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900 dark:text-white transition-colors duration-200 tracking-tight line-clamp-1",style:{textDecoration:"none",borderBottom:"none",border:"none",overflow:"hidden",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",letterSpacing:"-0.02em",lineHeight:"1.2"},children:t.nombre}),t.descripcion&&s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1 leading-snug line-clamp-2",style:{overflow:"hidden",textDecoration:"none",borderBottom:"none",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",lineHeight:"1.4"},children:t.descripcion})]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-blue-100 to-blue-50 dark:from-blue-900/40 dark:to-blue-900/20 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-semibold shadow-sm",children:[s.jsx(nu,{className:"w-3.5 h-3.5"}),s.jsx("span",{style:{fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif"},children:d})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-cyan-100 to-cyan-50 dark:from-cyan-900/40 dark:to-cyan-900/20 text-cyan-700 dark:text-cyan-300 px-2 py-1 rounded-full text-xs font-semibold shadow-sm",children:[s.jsx(Uc,{className:"w-3.5 h-3.5"}),s.jsx("span",{style:{fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif"},children:m})]})]}),s.jsx("button",{onClick:r?S:()=>{window.location.href="/login"},disabled:h,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full font-semibold text-xs transition-all duration-200 hover:scale-105 active:scale-95 shadow-md hover:shadow-lg ${a?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white"} ${h?"opacity-50 cursor-not-allowed":""}`,style:{fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif"},children:h?s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-white border-t-transparent"}):r?a?s.jsxs(s.Fragment,{children:[s.jsx(Hb,{size:14}),s.jsx("span",{className:"hidden sm:inline",children:"Siguiendo"})]}):s.jsxs(s.Fragment,{children:[s.jsx(eu,{size:14}),s.jsx("span",{className:"hidden sm:inline",children:"Seguir"})]}):s.jsxs(s.Fragment,{children:[s.jsx(eu,{size:14}),s.jsx("span",{className:"hidden sm:inline",children:"Seguir"})]})})]})]})]})})})}var Cv,r5;function jG(){if(r5)return Cv;r5=1;var t=!1,e,n,r,i,a,l,d,u,m,g,h,y,w,S,N;function _(){if(!t){t=!0;var A=navigator.userAgent,L=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(A),I=/(Mac OS X)|(Windows)|(Linux)/.exec(A);if(y=/\b(iPhone|iP[ao]d)/.exec(A),w=/\b(iP[ao]d)/.exec(A),g=/Android/i.exec(A),S=/FBAN\/\w+;/i.exec(A),N=/Mobile/i.exec(A),h=!!/Win64/.exec(A),L){e=L[1]?parseFloat(L[1]):L[5]?parseFloat(L[5]):NaN,e&&document&&document.documentMode&&(e=document.documentMode);var F=/(?:Trident\/(\d+.\d+))/.exec(A);l=F?parseFloat(F[1])+4:e,n=L[2]?parseFloat(L[2]):NaN,r=L[3]?parseFloat(L[3]):NaN,i=L[4]?parseFloat(L[4]):NaN,i?(L=/(?:Chrome\/(\d+\.\d+))/.exec(A),a=L&&L[1]?parseFloat(L[1]):NaN):a=NaN}else e=n=r=a=i=NaN;if(I){if(I[1]){var R=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(A);d=R?parseFloat(R[1].replace("_",".")):!0}else d=!1;u=!!I[2],m=!!I[3]}else d=u=m=!1}}var D={ie:function(){return _()||e},ieCompatibilityMode:function(){return _()||l>e},ie64:function(){return D.ie()&&h},firefox:function(){return _()||n},opera:function(){return _()||r},webkit:function(){return _()||i},safari:function(){return D.webkit()},chrome:function(){return _()||a},windows:function(){return _()||u},osx:function(){return _()||d},linux:function(){return _()||m},iphone:function(){return _()||y},mobile:function(){return _()||y||w||g||N},nativeApp:function(){return _()||S},android:function(){return _()||g},ipad:function(){return _()||w}};return Cv=D,Cv}var Ev,s5;function kG(){if(s5)return Ev;s5=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),e={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return Ev=e,Ev}var Tv,i5;function NG(){if(i5)return Tv;i5=1;var t=kG(),e;t.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function n(r,i){if(!t.canUseDOM||i&&!("addEventListener"in document))return!1;var a="on"+r,l=a in document;if(!l){var d=document.createElement("div");d.setAttribute(a,"return;"),l=typeof d[a]=="function"}return!l&&e&&r==="wheel"&&(l=document.implementation.hasFeature("Events.wheel","3.0")),l}return Tv=n,Tv}var Av,a5;function _G(){if(a5)return Av;a5=1;var t=jG(),e=NG(),n=10,r=40,i=800;function a(l){var d=0,u=0,m=0,g=0;return"detail"in l&&(u=l.detail),"wheelDelta"in l&&(u=-l.wheelDelta/120),"wheelDeltaY"in l&&(u=-l.wheelDeltaY/120),"wheelDeltaX"in l&&(d=-l.wheelDeltaX/120),"axis"in l&&l.axis===l.HORIZONTAL_AXIS&&(d=u,u=0),m=d*n,g=u*n,"deltaY"in l&&(g=l.deltaY),"deltaX"in l&&(m=l.deltaX),(m||g)&&l.deltaMode&&(l.deltaMode==1?(m*=r,g*=r):(m*=i,g*=i)),m&&!d&&(d=m<1?-1:1),g&&!u&&(u=g<1?-1:1),{spinX:d,spinY:u,pixelX:m,pixelY:g}}return a.getEventType=function(){return t.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},Av=a,Av}var Pv,o5;function SG(){return o5||(o5=1,Pv=_G()),Pv}var CG=SG();const EG=Sh(CG);function TG(t,e,n,r,i,a){a===void 0&&(a=0);var l=Nh(t,e,a),d=l.width,u=l.height,m=Math.min(d,n),g=Math.min(u,r);return m>g*i?{width:g*i,height:g}:{width:m,height:m/i}}function AG(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Nf(t,e,n,r,i){i===void 0&&(i=0);var a=Nh(e.width,e.height,i),l=a.width,d=a.height;return{x:l5(t.x,l,n.width,r),y:l5(t.y,d,n.height,r)}}function l5(t,e,n,r){var i=e*r/2-n/2;return jx(t,-i,i)}function c5(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function d5(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function PG(t,e,n,r,i,a,l){a===void 0&&(a=0),l===void 0&&(l=!0);var d=l?IG:RG,u=Nh(e.width,e.height,a),m=Nh(e.naturalWidth,e.naturalHeight,a),g={x:d(100,((u.width-n.width/i)/2-t.x/i)/u.width*100),y:d(100,((u.height-n.height/i)/2-t.y/i)/u.height*100),width:d(100,n.width/u.width*100/i),height:d(100,n.height/u.height*100/i)},h=Math.round(d(m.width,g.width*m.width/100)),y=Math.round(d(m.height,g.height*m.height/100)),w=m.width>=m.height*r,S=w?{width:Math.round(y*r),height:y}:{width:h,height:Math.round(h/r)},N=Ds(Ds({},S),{x:Math.round(d(m.width-S.width,g.x*m.width/100)),y:Math.round(d(m.height-S.height,g.y*m.height/100))});return{croppedAreaPercentages:g,croppedAreaPixels:N}}function IG(t,e){return Math.min(t,Math.max(0,e))}function RG(t,e){return e}function LG(t,e,n,r,i,a){var l=Nh(e.width,e.height,n),d=jx(r.width/l.width*(100/t.width),i,a),u={x:d*l.width/2-r.width/2-l.width*d*(t.x/100),y:d*l.height/2-r.height/2-l.height*d*(t.y/100)};return{crop:u,zoom:d}}function MG(t,e,n){var r=AG(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function DG(t,e,n,r,i,a){n===void 0&&(n=0);var l=Nh(e.naturalWidth,e.naturalHeight,n),d=jx(MG(t,e,r),i,a),u=r.height>r.width?r.height/t.height:r.width/t.width,m={x:((l.width-t.width)/2-t.x)*u,y:((l.height-t.height)/2-t.y)*u};return{crop:m,zoom:d}}function u5(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function OG(t){return t*Math.PI/180}function Nh(t,e,n){var r=OG(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function jx(t,e,n){return Math.min(Math.max(t,e),n)}function vg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var VG=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,zG=1,FG=3,$G=1,UG=function(t){L7(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=b.createRef(),n.imageRef=b.createRef(),n.videoRef=b.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=LG(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),a=i.crop,l=i.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(l)}else if(n.props.initialCroppedAreaPixels){var d=DG(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),a=d.crop,l=d.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(l)}},n.computeSizes=function(){var r,i,a,l,d,u,m=n.imageRef.current||n.videoRef.current;if(m&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var g=n.containerRect.width/n.containerRect.height,h=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,y=((a=n.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((l=n.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,w=m.offsetWidth<h||m.offsetHeight<y,S=h/y,N=void 0;if(w)switch(n.state.mediaObjectFit){default:case"contain":N=g>S?{width:n.containerRect.height*S,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/S};break;case"horizontal-cover":N={width:n.containerRect.width,height:n.containerRect.width/S};break;case"vertical-cover":N={width:n.containerRect.height*S,height:n.containerRect.height};break}else N={width:m.offsetWidth,height:m.offsetHeight};n.mediaSize=Ds(Ds({},N),{naturalWidth:h,naturalHeight:y}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var _=n.props.cropSize?n.props.cropSize:TG(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((d=n.state.cropSize)===null||d===void 0?void 0:d.height)!==_.height||((u=n.state.cropSize)===null||u===void 0?void 0:u.width)!==_.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(_),n.setState({cropSize:_},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(_),_}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),a=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(a,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var l=n.gestureRotationStart+r.rotation;n.props.onRotationChange(l)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,a,l=r.x,d=r.y;n.dragStartPosition={x:l,y:d},n.dragStartCrop=Ds({},n.props.crop),(a=(i=n.props).onInteractionStart)===null||a===void 0||a.call(i)},n.onDrag=function(r){var i=r.x,a=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||a===void 0)){var l=i-n.dragStartPosition.x,d=a-n.dragStartPosition.y,u={x:n.dragStartCrop.x+l,y:n.dragStartCrop.y+d},m=n.props.restrictPosition?Nf(u,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):u;n.props.onCropChange(m)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),a=EG(r).pixelY,l=n.props.zoom-a*n.props.zoomSpeed/200;n.setNewZoom(l,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var d,u;return(u=(d=n.props).onInteractionStart)===null||u===void 0?void 0:u.call(d)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var d,u;return(u=(d=n.props).onInteractionEnd)===null||u===void 0?void 0:u.call(d)})},250)}},n.getPointOnContainer=function(r,i){var a=r.x,l=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(a-i.x),y:n.containerRect.height/2-(l-i.y)}},n.getPointOnMedia=function(r){var i=r.x,a=r.y,l=n.props,d=l.crop,u=l.zoom;return{x:(i+d.x)/u,y:(a+d.y)/u}},n.setNewZoom=function(r,i,a){var l=a===void 0?{}:a,d=l.shouldUpdatePosition,u=d===void 0?!0:d;if(!(!n.state.cropSize||!n.props.onZoomChange)){var m=jx(r,n.props.minZoom,n.props.maxZoom);if(u){var g=n.getPointOnContainer(i,n.containerPosition),h=n.getPointOnMedia(g),y={x:h.x*m-g.x,y:h.y*m-g.y},w=n.props.restrictPosition?Nf(y,n.mediaSize,n.state.cropSize,m,n.props.rotation):y;n.props.onCropChange(w)}n.props.onZoomChange(m)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?Nf(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return PG(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,a=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,a),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,a)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,a=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,a)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var r=n.props.crop;if(n.isInitialized&&n.previousCropSize){var i=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(i){var a=n.state.cropSize.width/n.previousCropSize.width,l=n.state.cropSize.height/n.previousCropSize.height;r={x:n.props.crop.x*a,y:n.props.crop.y*l}}}var d=n.props.restrictPosition?Nf(r,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):r;n.previousCropSize=n.state.cropSize,n.props.onCropChange(d),n.emitCropData()}},n.onKeyDown=function(r){var i,a,l=n.props,d=l.crop,u=l.onCropChange,m=l.keyboardStep,g=l.zoom,h=l.rotation,y=m;if(n.state.cropSize){r.shiftKey&&(y*=.2);var w=Ds({},d);switch(r.key){case"ArrowUp":w.y-=y,r.preventDefault();break;case"ArrowDown":w.y+=y,r.preventDefault();break;case"ArrowLeft":w.x-=y,r.preventDefault();break;case"ArrowRight":w.x+=y,r.preventDefault();break;default:return}n.props.restrictPosition&&(w=Nf(w,n.mediaSize,n.state.cropSize,g,h)),r.repeat||(a=(i=n.props).onInteractionStart)===null||a===void 0||a.call(i),u(w)}},n.onKeyUp=function(r){var i,a;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(a=(i=n.props).onInteractionEnd)===null||a===void 0||a.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=VG,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,a,l,d,u,m,g,h;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((a=n.cropSize)===null||a===void 0?void 0:a.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((d=n.crop)===null||d===void 0?void 0:d.x)!==((u=this.props.crop)===null||u===void 0?void 0:u.x)||((m=n.crop)===null||m===void 0?void 0:m.y)!==((g=this.props.crop)===null||g===void 0?void 0:g.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((h=this.videoRef.current)===null||h===void 0||h.load());var y=this.getObjectFit();y!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:y},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,a;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var d=this.containerRect.width/this.containerRect.height,u=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,m=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,g=u/m;return g<d?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=c5(r,i),this.lastPinchRotation=d5(r,i),this.onDragStart(u5(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),a=e.getTouchPoint(n.touches[1]),l=u5(i,a);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var d=c5(i,a),u=r.props.zoom*(d/r.lastPinchDistance);r.setNewZoom(u,l,{shouldUpdatePosition:!1}),r.lastPinchDistance=d;var m=d5(i,a),g=r.props.rotation+(m-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(g),r.lastPinchRotation=m})}},e.prototype.render=function(){var n=this,r,i=this.props,a=i.image,l=i.video,d=i.mediaProps,u=i.cropperProps,m=i.transform,g=i.crop,h=g.x,y=g.y,w=i.rotation,S=i.zoom,N=i.cropShape,_=i.showGrid,D=i.roundCropAreaPixels,A=i.style,L=A.containerStyle,I=A.cropAreaStyle,F=A.mediaStyle,R=i.classes,E=R.containerClassName,M=R.cropAreaClassName,O=R.mediaClassName,j=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return b.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(H){return n.containerRef=H},"data-testid":"container",style:L,className:vg("reactEasyCrop_Container",E)},a?b.createElement("img",Ds({alt:"",className:vg("reactEasyCrop_Image",j==="contain"&&"reactEasyCrop_Contain",j==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",j==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",O)},d,{src:a,ref:this.imageRef,style:Ds(Ds({},F),{transform:m||"translate(".concat(h,"px, ").concat(y,"px) rotate(").concat(w,"deg) scale(").concat(S,")")}),onLoad:this.onMediaLoad})):l&&b.createElement("video",Ds({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:vg("reactEasyCrop_Video",j==="contain"&&"reactEasyCrop_Contain",j==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",j==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",O)},d,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Ds(Ds({},F),{transform:m||"translate(".concat(h,"px, ").concat(y,"px) rotate(").concat(w,"deg) scale(").concat(S,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(U){return b.createElement("source",Ds({key:U.src},U))})),this.state.cropSize&&b.createElement("div",Ds({ref:this.cropperRef,style:Ds(Ds({},I),{width:D?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:D?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:vg("reactEasyCrop_CropArea",N==="round"&&"reactEasyCrop_CropAreaRound",_&&"reactEasyCrop_CropAreaGrid",M)},u)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:FG,minZoom:zG,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:$G},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(b.Component);function BG(t){const e=Math.round(Number(t)||0);return new Intl.NumberFormat("es-DO").format(e)}function WG(t){const n=(Number(t)||0).toFixed(2),[r,i]=n.split("."),a=Number(r);return{wholeFormatted:BG(a),fraction:i}}function yw({producto:t}){const{carrito:e,agregarAlCarrito:n,eliminarUnidadDelCarrito:r,quitarDelCarrito:i}=Xm(),{usuario:a,usuarioInfo:l}=er(),{abrirModal:d}=Fl(),{isDark:u}=Ss(),m=Sr(),[g,h]=b.useState(!1),[y,w]=b.useState(!1);b.useEffect(()=>{w(!1)},[t==null?void 0:t.id,t==null?void 0:t.imagen,t==null?void 0:t.imagenPrincipal]);const N=!!(t!=null&&t.oferta&&(t!=null&&t.precioOferta))?Number(t==null?void 0:t.precioOferta)||Number(t==null?void 0:t.precio)||0:Number(t==null?void 0:t.precio)||0;WG(N);const D=(t==null?void 0:t.activo)!==!1&&(t.cantidad===void 0||t.cantidad>0),A=e.find(V=>V.id===t.id),L=(A==null?void 0:A.cantidad)||0,I=t.cantidad!==void 0?Number(t.cantidad)||0:1/0,F=V=>{if(V.stopPropagation(),!a){h(!0);return}if(!A){const K={...t,cantidad:1,cantidadProducto:Number.isFinite(I)?I:void 0};n(K)}},R=V=>{if(V.stopPropagation(),!a){h(!0);return}const K=Number.isFinite(I)?I:1/0;L<K&&n(t)},E=V=>{if(V.stopPropagation(),!a){h(!0);return}r(t.id)},M=V=>{if(V.stopPropagation(),!a){h(!0);return}i(t.id)},O=()=>{const V=t.slug||t.id;m(`/producto/${V}`)},j=V=>{try{return V?typeof V=="string"?V:typeof V=="object"&&V!==null?V.url||"":String(V||""):""}catch{return""}},H=(()=>{var ne;const V=j((ne=t==null?void 0:t.imagenPrincipal)==null?void 0:ne[0]);if(V)return V;const K=j(t==null?void 0:t.imagen);if(K)return K;const X=Array.isArray(t==null?void 0:t.imagenes)?t.imagenes:[];return X.length>0?j(X[0]):null})();return s.jsxs(s.Fragment,{children:[s.jsxs("article",{className:"card h-100 border-2 shadow-sm hover-lift hover-shadow bg-white dark:bg-gray-800",children:[s.jsx("div",{onClick:O,className:"d-flex d-lg-block position-relative overflow-hidden",style:{cursor:"pointer",minHeight:"128px",width:"128px"},children:s.jsx("div",{className:"d-flex align-items-center justify-content-center w-100 h-100 bg-white dark:bg-gray-700",children:H?s.jsx("img",{src:H,alt:t.nombre,className:"w-100 h-100",style:{objectFit:"contain"},loading:"lazy"}):s.jsx("div",{className:"small text-gray-600 dark:text-gray-400",children:"Sin imagen"})})}),s.jsxs("div",{className:"card-body d-flex flex-column justify-content-between flex-grow-1 p-3",children:[s.jsxs("div",{children:[s.jsx("h3",{onClick:O,className:"card-title fw-semibold mb-2 text-gray-900 dark:text-gray-100",style:{cursor:"pointer",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:"1.3em",maxHeight:"2.6em",fontSize:"clamp(0.875rem, 2vw, 1.125rem)"},children:t.nombre}),s.jsxs("div",{className:"d-flex align-items-baseline gap-1 mb-2",children:[s.jsx("span",{className:"small text-gray-600 dark:text-gray-400",children:"RD$"}),s.jsx("span",{className:"h5 fw-bold mb-0 text-gray-900 dark:text-gray-100",children:Number(t.precio).toFixed(2)})]})]}),A?s.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2",children:[s.jsx("button",{onClick:E,className:"btn btn-outline-secondary btn-sm rounded-3 fw-semibold",children:""}),s.jsx("span",{className:"fw-semibold",children:L}),s.jsx("button",{onClick:R,className:"btn btn-outline-secondary btn-sm rounded-3 fw-semibold",children:"+"}),s.jsx("button",{onClick:M,className:"btn btn-danger btn-sm rounded-3",children:s.jsx(G6,{})})]}):s.jsxs("button",{onClick:F,className:"btn btn-primary w-100 rounded-3 fw-semibold d-flex align-items-center justify-content-center gap-2 shadow",disabled:!D,children:[s.jsx(q6,{}),s.jsx("span",{className:"d-none d-sm-inline d-lg-none",children:"Agregar"}),s.jsx("span",{className:"d-none d-lg-inline",children:"Agregar al Carrito"}),s.jsx("span",{className:"d-sm-none",children:"+"})]})]})]}),s.jsx(bx,{isOpen:g,onClose:()=>h(!1),onIniciarSesion:()=>{h(!1),d()}})]})}function HG(){const{id:t}=F0(),e=Sr(),{usuario:n}=er(),{isDark:r}=Ss(),{setModalAbierto:i}=Fl(),[a,l]=b.useState(null),[d,u]=b.useState(null),[m,g]=b.useState([]),[h,y]=b.useState({}),[w,S]=b.useState([]),[N,_]=b.useState(!0),[D,A]=b.useState(!0),[L,I]=b.useState("todas"),[F,R]=b.useState(""),[E,M]=b.useState(!1),[O,j]=b.useState(!1),[U,H]=b.useState(!1),[V,K]=b.useState({nombre:"",descripcion:"",banner:"",logo:"",enlaces:[]}),[X,ne]=b.useState(!1),[we,Z]=b.useState(null),[le,re]=b.useState(null),[B,ce]=b.useState(!1),[Se,Ve]=b.useState(!1),[$e,Ke]=b.useState(null),[Ye,lt]=b.useState(null),[Re,Ct]=b.useState({x:0,y:0}),[Ue,ot]=b.useState(1),[ct,it]=b.useState(0),[Lt,Bt]=b.useState(null),[Ge,mn]=b.useState(!1),[Wt,an]=b.useState(0),[At,bn]=b.useState(!1),Ht=n&&a&&(n.uid===a.ownerUid||n.uid===a.ownerId||n.uid===a.owner_id||n.uid===a.createdBy||n.email==="arisleidy0712@gmail.com");b.useEffect(()=>{let Ie=null;return(async()=>{try{const ft=await Fn(We(oe,"tiendas",t));if(ft.exists()){l({id:ft.id,...ft.data()}),u("tiendas"),_(!1),Ie=_n(We(oe,"tiendas",t),nt=>{nt.exists()&&l({id:nt.id,...nt.data()})});return}const Te=await Fn(We(oe,"stores",t));if(Te.exists()){l({id:Te.id,...Te.data()}),u("stores"),_(!1),Ie=_n(We(oe,"stores",t),nt=>{nt.exists()&&l({id:nt.id,...nt.data()})});return}_(!1)}catch{Vt("Error al cargar la tienda. Por favor intenta de nuevo.","error","Error de carga"),_(!1)}})(),ze(),()=>{Ie&&Ie()}},[t]),b.useEffect(()=>{E&&a&&K({nombre:a.nombre||"",descripcion:a.descripcion||"",banner:a.banner||"",logo:a.logo||"",enlaces:a.enlaces||[]})},[E,a]),b.useEffect(()=>{if(!t||!d)return;const Ie=We(oe,d,t),gt=_n(Ie,Te=>{if(Te.exists()){const nt=Te.data();an(nt.seguidores||0)}},Te=>{});let ft=null;if(n){const Te=We(oe,d,t,"seguidores",n.uid);ft=_n(Te,nt=>{mn(nt.exists())},nt=>{})}return()=>{gt(),ft&&ft()}},[t,n,d]);const ze=async()=>{try{const Ie=Ot(pt(oe,"productos"),qt("storeId","==",t),qt("activo","==",!0));let ft=(await rn(Ie)).docs.map(ut=>({id:ut.id,...ut.data()}));if(ft.length===0&&(a!=null&&a.ownerId)){const ut=Ot(pt(oe,"productos"),qt("ownerUid","==",a.ownerId),qt("activo","==",!0));ft=(await rn(ut)).docs.map(Ce=>({id:Ce.id,...Ce.data()}))}if(ft.length===0){const ut=Ot(pt(oe,"productos"),qt("tiendaId","==",t),qt("activo","==",!0));ft=(await rn(ut)).docs.map(Ce=>({id:Ce.id,...Ce.data()}))}if(ft.length===0){const ut=Ot(pt(oe,"productos"),qt("tienda_id","==",t),qt("activo","==",!0));ft=(await rn(ut)).docs.map(Ce=>({id:Ce.id,...Ce.data()}))}g(ft);const Te={},nt=new Set;ft.forEach(ut=>{const kn=ut.categoria||"Sin categora";nt.add(kn),Te[kn]||(Te[kn]=[]),Te[kn].push(ut)}),y(Te),S(["todas",...Array.from(nt)])}catch{Vt("Error al cargar productos de la tienda","error","Error")}finally{A(!1)}},Y=async(Ie,gt)=>{const ft=Ie.target.files[0];if(ft&&ft.type.startsWith("image/")){if(!d){Vt("Error: No se pudo determinar la tienda","error","Error");return}ce(!0);try{const Te=`tiendas/${t}/${gt}-${Date.now()}`,nt=await ge(ft,Te),ut=We(oe,d,t);await jn(ut,{[gt]:nt}),Vt(`${gt==="banner"?"Banner":"Logo"} actualizado correctamente`,"success","Actualizado")}catch(Te){let nt=`No se pudo actualizar el ${gt==="banner"?"banner":"logo"}`;Te.code==="not-found"?nt="La tienda no existe. Por favor recarga la pgina.":Te.code==="permission-denied"?nt="No tienes permiso para editar esta tienda.":Te.message&&(nt+=": "+Te.message),Vt(nt,"error","Error")}finally{ce(!1)}}},ie=b.useCallback((Ie,gt)=>{Bt(gt)},[]),pe=async()=>{if(!(!Lt||!Ye))try{const Ie=await he(Ye,Lt,ct);await Ae(Ie,$e),Ve(!1),lt(null),Ke(null),Bt(null)}catch{Vt("Error al procesar la imagen","error","Error")}},he=async(Ie,gt,ft=0)=>{const Te=await He(Ie),nt=document.createElement("canvas"),ut=nt.getContext("2d"),Ce=2*(Math.max(Te.width,Te.height)/2*Math.sqrt(2));nt.width=Ce,nt.height=Ce,ut.translate(Ce/2,Ce/2),ut.rotate(ft*Math.PI/180),ut.translate(-Ce/2,-Ce/2),ut.drawImage(Te,Ce/2-Te.width*.5,Ce/2-Te.height*.5);const yt=ut.getImageData(0,0,Ce,Ce);return nt.width=gt.width,nt.height=gt.height,ut.putImageData(yt,0-Ce/2+Te.width*.5-gt.x,0-Ce/2+Te.height*.5-gt.y),new Promise(on=>{nt.toBlob(Nn=>{on(Nn)},"image/jpeg",.95)})},He=Ie=>new Promise((gt,ft)=>{const Te=new Image;Te.addEventListener("load",()=>gt(Te)),Te.addEventListener("error",nt=>ft(nt)),Te.setAttribute("crossOrigin","anonymous"),Te.src=Ie}),ge=async(Ie,gt)=>{const ft=so(io,gt),Te=await Oh(ft,Ie);return await zc(Te.ref)},Ae=async(Ie,gt)=>{if(!(!Ht||!d)){ce(!0);try{const ft=`tiendas/${t}/${gt}-${Date.now()}`,Te=await ge(Ie,ft),nt=We(oe,d,t);await jn(nt,{[gt]:Te});const ut=document.createElement("div");ut.className="fixed top-24 right-4 bg-green-600 text-white px-6 py-3 rounded-full shadow-2xl z-[10000] flex items-center gap-3 font-semibold",ut.style.opacity="0",ut.style.transform="translateY(-20px)",ut.style.transition="all 0.3s ease-out",ut.innerHTML=`
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        <span>${gt==="banner"?"Banner":"Logo"} actualizado correctamente</span>
      `,document.body.appendChild(ut),setTimeout(()=>{ut.style.opacity="1",ut.style.transform="translateY(0)"},10),setTimeout(()=>{ut.style.opacity="0",ut.style.transform="translateY(-20px)",setTimeout(()=>{ut.parentNode&&document.body.removeChild(ut)},300)},3e3)}catch{Vt(`Error al actualizar ${gt}`,"error","Error")}finally{ce(!1)}}},Be=async()=>{if(Ht){ce(!0);try{const Ie={nombre:V.nombre,descripcion:V.descripcion,enlaces:V.enlaces||[]};if(we){const ft=await ge(we,`tiendas/${t}/banner-${Date.now()}`);Ie.banner=ft}if(le){const ft=await ge(le,`tiendas/${t}/logo-${Date.now()}`);Ie.logo=ft}if(!d){mostrarNotificacion("Error: No se pudo determinar la tienda","error");return}const gt=We(oe,d,t);await jn(gt,Ie),l(ft=>({...ft,...Ie})),M(!1),Z(null),re(null),H(!0)}catch{Vt("Error al actualizar la tienda. Por favor intenta de nuevo.","error","Error")}finally{ce(!1)}}},Ze=async()=>{if(!n){i(!0);return}if(Ht){Vt("No puedes seguir tu propia tienda","warning","Advertencia");return}if(bn(!0),!d){Vt("Error: No se pudo cargar la tienda","error","Error"),bn(!1);return}try{const Ie=We(oe,d,t),gt=We(oe,d,t,"seguidores",n.uid),ft=We(oe,"usuarios",n.uid);if(Ge){await co(gt),await jn(Ie,{seguidores:kc(-1)});const Te=await Fn(ft);if(Te.exists()){const nt=Te.data().tiendasSeguidas||[];await jn(ft,{tiendasSeguidas:nt.filter(ut=>ut!==t)})}mn(!1),an(nt=>Math.max(0,nt-1))}else{await Cn(gt,{usuarioId:n.uid,fechaSeguimiento:new Date}),await jn(Ie,{seguidores:kc(1)});const Te=await Fn(ft);if(Te.exists()){const nt=Te.data().tiendasSeguidas||[];nt.includes(t)||await jn(ft,{tiendasSeguidas:[...nt,t]})}else await Cn(ft,{tiendasSeguidas:[t]},{merge:!0});mn(!0),an(nt=>nt+1)}}catch{Vt("Error al procesar la accin. Intenta de nuevo.","error","Error")}finally{bn(!1)}},Rt=m.filter(Ie=>{var Te,nt;const gt=((Te=Ie.nombre)==null?void 0:Te.toLowerCase().includes(F.toLowerCase()))||((nt=Ie.descripcion)==null?void 0:nt.toLowerCase().includes(F.toLowerCase())),ft=L==="todas"||Ie.categoria===L;return gt&&ft});return N?s.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Cargando tienda..."})]})}):!N&&!a?s.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(xr,{size:64,className:"mx-auto mb-3 text-muted"}),s.jsx("h2",{children:"Tienda no encontrada"}),s.jsx("p",{className:"text-muted",children:"La tienda que buscas no existe o ha sido eliminada."}),s.jsx("button",{onClick:()=>e("/tiendas"),className:"btn btn-primary mt-3",children:"Ver todas las tiendas"})]})}):s.jsxs("div",{className:"min-vh-100",style:{paddingTop:"20px"},children:[s.jsxs("div",{className:"position-relative w-100 bg-light d-flex justify-content-center align-items-center overflow-hidden",style:{marginLeft:"calc(-50vw + 50%)",width:"100vw"},children:[a.banner?s.jsx("img",{src:a.banner,alt:`Banner de ${a.nombre}`,className:"w-100 h-auto",style:{objectFit:"contain",imageRendering:"auto",transition:"all 0.3s ease-in-out"}}):s.jsx("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center bg-light",children:s.jsx("div",{className:"text-muted fs-6",children:"Sin banner"})}),s.jsx("button",{onClick:()=>e("/tiendas"),className:"position-absolute top-0 start-0 m-3 btn btn-dark btn-sm rounded-circle p-2",style:{width:"40px",height:"40px"},children:s.jsx(Sm,{size:16})})]}),s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container-fluid",style:{maxWidth:"1800px"},children:s.jsxs("div",{className:"px-3 px-md-4 py-4",children:[s.jsxs("div",{className:"d-flex align-items-start gap-3 gap-lg-4",children:[s.jsx(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.4},className:"position-relative flex-shrink-0",children:s.jsx("img",{src:a.logo||"",alt:`Logo de ${a.nombre}`,className:"rounded-circle shadow-lg",style:{width:"80px",height:"80px",objectFit:"cover",backgroundColor:a.logo?"transparent":"#f3f4f6"},onError:Ie=>{Ie.target.style.display="none"}})}),s.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3,duration:.5},className:"flex-grow-1",style:{minWidth:0},children:[s.jsx("h1",{className:"h2 h1-lg fw-bold mb-2 mb-lg-3",style:{color:r?"#f9fafb":"#111827"},children:a.nombre}),s.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2 small mb-2 mb-lg-3",style:{color:r?"#9ca3af":"#6b7280"},children:[s.jsxs("span",{children:[Wt.toLocaleString()," seguidores"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[m.length," productos"]})]}),a.descripcion&&s.jsx("p",{className:"small mb-3 mb-lg-4",style:{maxWidth:"48rem",color:r?"#d1d5db":"#6b7280"},children:a.descripcion}),s.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"d-none d-lg-flex flex-wrap align-items-center gap-3 mt-4",children:[s.jsxs("button",{onClick:()=>ne(!0),className:"btn btn-primary btn-sm d-flex align-items-center gap-2 shadow-sm",children:[s.jsx(_a,{size:14}),s.jsx("span",{children:"Ms informacin"})]}),!Ht&&s.jsx("button",{onClick:Ze,disabled:At,className:"btn btn-sm d-flex align-items-center gap-2",style:{backgroundColor:Ge?r?"#374151":"#e5e7eb":"#3b82f6",color:Ge?r?"#f3f4f6":"#1f2937":"#ffffff",border:Ge?`1px solid ${r?"#4b5563":"#d1d5db"}`:"none",opacity:At?.6:1,cursor:At?"not-allowed":"pointer"},children:At?s.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):Ge?s.jsxs(s.Fragment,{children:[s.jsx(Hb,{size:14}),s.jsx("span",{children:"Siguiendo"})]}):s.jsxs(s.Fragment,{children:[s.jsx(eu,{size:14}),s.jsx("span",{children:n?"Seguir":"Seguir "})]})}),Ht&&s.jsxs("button",{onClick:()=>M(!0),className:"btn btn-primary btn-sm d-flex align-items-center gap-2 shadow-sm",children:[s.jsx(pv,{size:14}),s.jsx("span",{children:"Editar tienda"})]})]})]})]}),s.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"d-flex d-lg-none flex-wrap align-items-center gap-3 mt-4",children:[s.jsxs("button",{onClick:()=>ne(!0),className:"btn btn-primary btn-sm flex-fill flex-sm-grow-0 d-flex align-items-center justify-content-center gap-2 shadow-sm",children:[s.jsx(_a,{size:14}),s.jsx("span",{children:"Ms informacin"})]}),!Ht&&s.jsx("button",{onClick:Ze,disabled:At,className:"btn btn-sm d-flex align-items-center gap-2",style:{backgroundColor:Ge?r?"#374151":"#e5e7eb":"#3b82f6",color:Ge?r?"#f3f4f6":"#1f2937":"#ffffff",border:Ge?`1px solid ${r?"#4b5563":"#d1d5db"}`:"none",opacity:At?.6:1,cursor:At?"not-allowed":"pointer"},children:At?s.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):Ge?s.jsxs(s.Fragment,{children:[s.jsx(Hb,{size:14}),s.jsx("span",{children:"Siguiendo"})]}):s.jsxs(s.Fragment,{children:[s.jsx(eu,{size:14}),s.jsx("span",{children:"Seguir"})]})}),Ht&&s.jsxs("button",{onClick:()=>M(!0),className:"btn btn-primary btn-sm d-flex align-items-center gap-2 shadow-sm",children:[s.jsx(pv,{size:14}),s.jsx("span",{children:"Editar tienda"})]})]})]})}),s.jsx("div",{className:"container-fluid py-4",style:{maxWidth:"1800px"},children:s.jsxs("div",{className:"px-3 px-lg-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"d-none d-lg-flex align-items-center gap-3",children:[s.jsxs("div",{className:"position-relative flex-grow-1",style:{maxWidth:"28rem"},children:[s.jsx(C0,{className:"position-absolute start-0 top-50 translate-middle-y text-muted ms-3",size:20}),s.jsx("input",{type:"text",placeholder:"Buscar productos...",value:F,onChange:Ie=>R(Ie.target.value),className:"form-control form-control-lg rounded-pill ps-5 pe-5 shadow-sm border-2",style:{paddingLeft:"3rem",paddingRight:F?"3rem":"1rem"}}),F&&s.jsx("button",{onClick:()=>R(""),className:"btn btn-link position-absolute end-0 top-50 translate-middle-y text-muted me-2 p-1",style:{border:"none"},children:s.jsx(gs,{size:16})})]}),s.jsx(Q.div,{layout:!0,className:"d-flex align-items-center bg-white rounded-pill px-4 py-2 shadow-sm border",children:s.jsx("select",{value:L,onChange:Ie=>I(Ie.target.value),className:"form-select border-0 bg-transparent fw-semibold",style:{minWidth:"200px"},children:w.map(Ie=>s.jsx("option",{value:Ie,children:Ie==="todas"?"Todas las categoras":Ie},Ie))})})]}),s.jsxs("div",{className:"d-lg-none d-flex flex-column gap-3",children:[s.jsxs("div",{className:"position-relative w-100",children:[s.jsx(C0,{className:"position-absolute start-0 top-50 translate-middle-y text-muted ms-2",size:16}),s.jsx("input",{type:"text",placeholder:"Buscar...",value:F,onChange:Ie=>R(Ie.target.value),className:"form-control form-control-sm rounded-2 ps-4 pe-4 shadow-sm",style:{paddingLeft:"2.25rem",paddingRight:F?"2.25rem":"0.75rem",fontSize:"0.875rem"}}),F&&s.jsx("button",{onClick:()=>R(""),className:"btn btn-link position-absolute end-0 top-50 translate-middle-y text-muted me-1 p-1",style:{border:"none"},children:s.jsx(gs,{size:16})})]}),s.jsxs("button",{onClick:()=>j(!0),className:"btn btn-outline-secondary btn-sm d-flex align-items-center justify-content-between w-100 rounded-2 shadow-sm",style:{fontSize:"0.875rem",padding:"0.5rem 0.75rem"},children:[s.jsx("span",{className:"fw-medium",children:L==="todas"?"Todas":L}),s.jsx(_a,{size:16,className:"text-muted"})]})]})]}),D?s.jsx(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"d-flex justify-content-center align-items-center py-5",children:s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Cargando productos..."})]})}):Rt.length===0?s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-5",children:s.jsxs("div",{className:"bg-light dark:bg-gray-800 rounded-4 p-5 mx-auto border border-2 border-dashed border-secondary dark:border-gray-600",style:{maxWidth:"48rem"},children:[s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-4 shadow dark:shadow-gray-900",style:{width:"6rem",height:"6rem"},children:s.jsx(xr,{size:48,className:"text-muted dark:text-gray-400"})}),s.jsx("h3",{className:"h2 fw-bold text-dark dark:text-white mb-3",children:F||L!=="todas"?" No hay coincidencias":" Sin productos disponibles"}),s.jsx("p",{className:"text-muted dark:text-gray-400 fs-5 mb-4",children:F||L!=="todas"?"Intenta ajustar tus filtros de bsqueda o explora otras categoras":"Esta tienda an no tiene productos disponibles. Vuelve pronto!"}),(F||L!=="todas")&&s.jsxs("button",{onClick:()=>{R(""),I("todas")},className:"btn btn-primary btn-lg d-inline-flex align-items-center gap-2 shadow",children:[s.jsx(mv,{size:20}),"Ver todos los productos"]})]})}):s.jsx("div",{className:"row g-3 g-lg-4",children:s.jsx(sn,{children:Rt.map((Ie,gt)=>s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:gt*.05},className:"col-12 col-md-6 col-lg-4 col-xl-3",children:s.jsx(yw,{producto:Ie})},Ie.id))})})]})}),E&&s.jsxs("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex flex-column",style:{backgroundColor:"#ffffff",opacity:1,zIndex:9999},children:[s.jsx("style",{children:`
            .dark .modal-edit-tienda {
              background-color: #111827 !important;
            }
            .modal-edit-tienda {
              background-color: #ffffff !important;
            }
          `}),s.jsxs("div",{className:"modal-edit-tienda w-100 h-100 d-flex flex-column",children:[s.jsx("div",{className:"flex-shrink-0 bg-white border-bottom shadow-sm",style:{padding:"12px 24px"},children:s.jsxs("div",{className:"d-flex align-items-center justify-content-between",style:{maxWidth:"1200px",margin:"0 auto"},children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx(pv,{size:20,className:"text-primary"}),s.jsx("h5",{className:"mb-0 fw-bold",style:{fontSize:"18px",fontFamily:"system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif"},children:"Editar Tienda"})]}),s.jsx("button",{onClick:()=>M(!1),className:"btn btn-sm btn-light rounded-circle p-2",style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(gs,{size:18})})]})}),s.jsx("div",{className:"flex-grow-1 overflow-auto",style:{backgroundColor:r?"#0f172a":"#f8fafc"},children:s.jsxs("div",{className:"container-fluid px-4 py-4",style:{maxWidth:"80rem"},children:[s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"row g-3 mb-4",children:[s.jsxs("div",{className:"col-12 col-lg-6",children:[s.jsxs("label",{className:"form-label fw-semibold d-flex align-items-center gap-2 mb-2",style:{fontSize:"14px",color:r?"#cbd5e1":"#475569"},children:[s.jsx(xr,{size:16,className:"text-primary"}),"Nombre de la Tienda"]}),s.jsx("input",{type:"text",value:V.nombre,onChange:Ie=>K(gt=>({...gt,nombre:Ie.target.value})),className:"form-control form-control-lg border-2",placeholder:"Ej: Mi Tienda Oficial",style:{borderRadius:"12px",backgroundColor:r?"#1e293b":"#ffffff",borderColor:r?"#334155":"#e2e8f0",color:r?"#f1f5f9":"#1e293b",padding:"12px 16px"}})]}),s.jsxs("div",{className:"col-12 col-lg-6",children:[s.jsxs("label",{className:"form-label fw-semibold d-flex align-items-center gap-2 mb-2",style:{fontSize:"14px",color:r?"#cbd5e1":"#475569"},children:[s.jsx(V6,{size:16,className:"text-info"}),"Descripcin"]}),s.jsx("textarea",{value:V.descripcion,onChange:Ie=>K(gt=>({...gt,descripcion:Ie.target.value})),rows:4,className:"form-control border-2",placeholder:"Describe tu tienda, productos y servicios...",style:{resize:"none",borderRadius:"12px",backgroundColor:r?"#1e293b":"#ffffff",borderColor:r?"#334155":"#e2e8f0",color:r?"#f1f5f9":"#1e293b",padding:"12px 16px"}})]})]}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-4",children:[s.jsxs("label",{className:"form-label fw-semibold d-flex align-items-center gap-2 mb-3",style:{fontSize:"15px",color:r?"#cbd5e1":"#475569"},children:[s.jsx(Fb,{size:18,className:"text-warning"}),"Banner de la Tienda"]}),s.jsxs("div",{style:{backgroundColor:r?"#1e293b":"#ffffff",borderRadius:"16px",border:`2px solid ${r?"#334155":"#e2e8f0"}`,padding:"16px"},children:[V.banner&&s.jsx("div",{className:"mb-3",style:{backgroundColor:r?"#0f172a":"#f1f5f9",borderRadius:"12px",overflow:"hidden",height:"280px",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("img",{src:V.banner,alt:"Preview banner",className:"w-100 h-100",style:{objectFit:"contain"}})}),s.jsxs("label",{className:"d-flex align-items-center justify-content-center w-100 py-3 border-2 border-dashed",style:{borderRadius:"12px",borderColor:r?"#475569":"#cbd5e1",backgroundColor:r?"#0f172a":"#f8fafc",cursor:"pointer"},children:[s.jsx(em,{size:18,className:"me-2",style:{color:r?"#94a3b8":"#64748b"}}),s.jsx("span",{style:{color:r?"#cbd5e1":"#475569",fontSize:"14px",fontWeight:"500"},children:V.banner?"Cambiar Banner":"Subir Banner"}),s.jsx("input",{type:"file",accept:"image/*",onChange:Ie=>Y(Ie,"banner"),className:"d-none"})]})]})]}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"mb-4",children:[s.jsxs("label",{className:"form-label fw-semibold d-flex align-items-center gap-2 mb-3",style:{fontSize:"15px",color:r?"#cbd5e1":"#475569"},children:[s.jsx(em,{size:18,className:"text-success"}),"Logo de la Tienda"]}),s.jsx("div",{style:{backgroundColor:r?"#1e293b":"#ffffff",borderRadius:"16px",border:`2px solid ${r?"#334155":"#e2e8f0"}`,padding:"20px"},children:s.jsxs("div",{className:"d-flex align-items-center gap-4",children:[V.logo&&s.jsx("div",{style:{width:"100px",height:"100px",backgroundColor:r?"#0f172a":"#f1f5f9",borderRadius:"50%",border:`3px solid ${r?"#334155":"#e2e8f0"}`,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",flexShrink:0},children:s.jsx("img",{src:V.logo,alt:"Preview logo",style:{width:"100%",height:"100%",objectFit:"contain",padding:"8px"}})}),s.jsxs("label",{className:"d-flex align-items-center justify-content-center flex-grow-1 py-3 border-2 border-dashed",style:{borderRadius:"12px",borderColor:r?"#475569":"#cbd5e1",backgroundColor:r?"#0f172a":"#f8fafc",cursor:"pointer",minHeight:"60px"},children:[s.jsx(em,{size:18,className:"me-2",style:{color:r?"#94a3b8":"#64748b"}}),s.jsx("span",{style:{color:r?"#cbd5e1":"#475569",fontSize:"14px",fontWeight:"500"},children:V.logo?"Cambiar Logo":"Subir Logo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:Ie=>Y(Ie,"logo"),className:"d-none"})]})]})})]}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},style:{backgroundColor:r?"#1e293b":"#ffffff",borderRadius:"16px",border:`2px solid ${r?"#334155":"#e2e8f0"}`,padding:"24px"},children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[s.jsxs("h3",{className:"mb-0 fw-bold d-flex align-items-center gap-2",style:{fontSize:"16px",color:r?"#f1f5f9":"#1e293b"},children:[s.jsx(Bb,{size:20,className:"text-primary"}),"Enlaces y Redes Sociales"]}),s.jsxs("button",{type:"button",onClick:()=>{K(Ie=>({...Ie,enlaces:[...Ie.enlaces||[],{titulo:"",tipo:"otro",url:""}]}))},className:"btn btn-primary btn-sm d-flex align-items-center gap-2",style:{borderRadius:"10px",padding:"8px 16px",fontSize:"13px",fontWeight:"600"},children:[s.jsx(Bh,{size:16}),"Agregar"]})]}),s.jsxs("div",{className:"d-flex flex-column gap-3",children:[(V.enlaces||[]).map((Ie,gt)=>s.jsx(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:gt*.05},style:{padding:"16px",backgroundColor:r?"#0f172a":"#f8fafc",borderRadius:"12px",border:`1px solid ${r?"#334155":"#e2e8f0"}`},children:s.jsxs("div",{className:"row g-2 align-items-end",children:[s.jsxs("div",{className:"col-12 col-md-4",children:[s.jsx("label",{className:"form-label mb-1",style:{fontSize:"12px",color:r?"#94a3b8":"#64748b",fontWeight:"600"},children:"Ttulo"}),s.jsx("input",{type:"text",value:Ie.titulo||"",onChange:ft=>{const Te=[...V.enlaces];Te[gt].titulo=ft.target.value,K(nt=>({...nt,enlaces:Te}))},placeholder:"Ej: TikTok oficial",className:"form-control form-control-sm",style:{borderRadius:"8px",backgroundColor:r?"#1e293b":"#ffffff",borderColor:r?"#475569":"#cbd5e1",color:r?"#f1f5f9":"#1e293b",fontSize:"13px"}})]}),s.jsxs("div",{className:"col-12 col-md-3",children:[s.jsx("label",{className:"form-label mb-1",style:{fontSize:"12px",color:r?"#94a3b8":"#64748b",fontWeight:"600"},children:"Tipo"}),s.jsxs("select",{value:Ie.tipo||"otro",onChange:ft=>{const Te=[...V.enlaces];Te[gt].tipo=ft.target.value,K(nt=>({...nt,enlaces:Te}))},className:"form-select form-select-sm",style:{borderRadius:"8px",backgroundColor:r?"#1e293b":"#ffffff",borderColor:r?"#475569":"#cbd5e1",color:r?"#f1f5f9":"#1e293b",fontSize:"13px"},children:[s.jsx("option",{value:"otro",children:"Genrico"}),s.jsx("option",{value:"website",children:"Web"}),s.jsx("option",{value:"whatsapp",children:"WhatsApp"}),s.jsx("option",{value:"facebook",children:"Facebook"}),s.jsx("option",{value:"instagram",children:"Instagram"}),s.jsx("option",{value:"youtube",children:"YouTube"}),s.jsx("option",{value:"tiktok",children:"TikTok"}),s.jsx("option",{value:"twitter",children:"Twitter/X"}),s.jsx("option",{value:"telegram",children:"Telegram"})]})]}),s.jsxs("div",{className:"col-12 col-md-4",children:[s.jsx("label",{className:"form-label mb-1",style:{fontSize:"12px",color:r?"#94a3b8":"#64748b",fontWeight:"600"},children:"URL"}),s.jsx("input",{type:"text",value:Ie.url||"",onChange:ft=>{const Te=[...V.enlaces];Te[gt].url=ft.target.value,K(nt=>({...nt,enlaces:Te}))},placeholder:"https://...",className:"form-control form-control-sm",style:{borderRadius:"8px",backgroundColor:r?"#1e293b":"#ffffff",borderColor:r?"#475569":"#cbd5e1",color:r?"#f1f5f9":"#1e293b",fontSize:"13px"}})]}),s.jsx("div",{className:"col-12 col-md-1 d-flex align-items-end",children:s.jsx("button",{type:"button",onClick:()=>{const ft=V.enlaces.filter((Te,nt)=>nt!==gt);K(Te=>({...Te,enlaces:ft}))},className:"btn btn-danger btn-sm w-100",style:{borderRadius:"8px",padding:"6px"},children:s.jsx(gs,{size:14})})})]})},gt)),(!V.enlaces||V.enlaces.length===0)&&s.jsx("p",{className:"text-center mb-0",style:{color:r?"#94a3b8":"#64748b",fontSize:"14px",padding:"24px 0"},children:'No hay enlaces. Haz clic en "Agregar" para comenzar.'})]})]})]})}),s.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3 d-flex justify-content-end",children:s.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s.jsx("button",{onClick:()=>M(!1),className:"px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl font-semibold transition-all duration-200 border-2 border-gray-300 dark:border-gray-600 hover:scale-105",children:"Cancelar"}),s.jsx("button",{onClick:Be,disabled:B,className:"flex items-center gap-2 px-8 py-3 bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all duration-200 shadow-md hover:shadow-lg hover:scale-[1.02]",children:B?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Guardando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(p_,{size:18}),"Guardar Cambios"]})})]})})})]})]}),s.jsx(sn,{children:Se&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black flex items-center justify-center z-[9999]",children:s.jsxs("div",{className:"w-[98vw] h-[95vh] bg-black flex flex-col",children:[s.jsxs(Q.div,{initial:{y:-50},animate:{y:0},className:"flex items-center justify-between p-3 bg-black text-white border-b border-gray-800",children:[s.jsx("button",{onClick:()=>{Ve(!1),lt(null),Ke(null)},className:"p-2.5 hover:bg-gray-800 rounded-full transition-colors",disabled:B,children:s.jsx(gs,{size:24,className:"text-white"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-lg font-semibold",children:$e==="banner"?" Banner Horizontal":" Ajustar Logo"}),$e==="banner"&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Usa el zoom para ajustar tu imagen horizontal"})]}),s.jsx("button",{onClick:pe,disabled:B||!Lt,className:`px-5 py-2 rounded-lg font-semibold transition-all ${B||!Lt?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white hover:scale-105"}`,children:B?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Guardando..."]}):s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(p_,{size:16}),"Guardar"]})})]}),s.jsx("div",{className:"flex-1 relative overflow-hidden bg-black",children:Ye&&s.jsx(UG,{image:Ye,crop:Re,zoom:Ue,rotation:ct,aspect:$e==="logo"?1:void 0,restrictPosition:!1,objectFit:"contain",onCropChange:Ct,onZoomChange:ot,onRotationChange:it,onCropComplete:ie,showGrid:!0,cropShape:$e==="logo"?"round":"rect",style:{containerStyle:{backgroundColor:"#000",width:"100%",height:"100%"},cropAreaStyle:{border:"2px solid #3b82f6",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.6)"},mediaStyle:{width:"100%",height:"100%"}}})}),s.jsxs(Q.div,{initial:{y:50},animate:{y:0},className:"p-3 bg-black border-t border-gray-800 space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-white text-sm",children:[s.jsx("span",{className:"font-medium",children:" Zoom"}),s.jsxs("span",{className:"text-gray-400",children:[Ue.toFixed(1),"x"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>ot(Math.max(.5,Ue-.1)),className:"w-9 h-9 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center text-white text-lg font-bold transition-colors",disabled:B,children:"-"}),s.jsx("input",{type:"range",min:.5,max:3,step:.1,value:Ue,onChange:Ie=>ot(parseFloat(Ie.target.value)),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600",disabled:B}),s.jsx("button",{onClick:()=>ot(Math.min(3,Ue+.2)),className:"w-9 h-9 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center text-white text-lg font-bold transition-colors",disabled:B,children:"+"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-white text-sm",children:[s.jsx("span",{className:"font-medium",children:" Rotacin"}),s.jsxs("span",{className:"text-gray-400",children:[ct,""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>it(Math.max(-180,ct-15)),className:"w-9 h-9 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center text-white transition-colors",disabled:B,children:s.jsx(mv,{size:16,className:"transform -scale-x-100"})}),s.jsx("input",{type:"range",min:-180,max:180,step:1,value:ct,onChange:Ie=>it(parseInt(Ie.target.value)),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600",disabled:B}),s.jsx("button",{onClick:()=>it(Math.min(180,ct+15)),className:"w-9 h-9 bg-gray-800 hover:bg-gray-700 rounded-full flex items-center justify-center text-white transition-colors",disabled:B,children:s.jsx(mv,{size:16})})]})]}),s.jsx("button",{onClick:()=>{ot(1),it(0),Ct({x:0,y:0})},className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm font-medium",disabled:B,children:" Restablecer"}),s.jsx("div",{className:"text-center pt-2",children:s.jsx("p",{className:"text-gray-400 text-xs leading-relaxed",children:" Arrastra la imagen  Pellizca para zoom  Usa los controles para ajustar"})})]})]})})}),s.jsx(sn,{children:X&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 flex items-center justify-center z-[99999] p-4 md:p-6",style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",backgroundColor:"rgba(0, 0, 0, 0.7)"},onClick:()=>ne(!1),children:s.jsxs(Q.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},onClick:Ie=>Ie.stopPropagation(),className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden",children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center z-10",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a.nombre}),s.jsx("button",{onClick:()=>ne(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors duration-200",title:"Cerrar",children:s.jsx(gs,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),s.jsxs("div",{className:"p-6 md:p-7 space-y-6 overflow-y-auto max-h-[calc(85vh-120px)]",children:[a.descripcion&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:a.descripcion})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Estadsticas"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-600",children:[s.jsx(nu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Seguidores"}),s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:Wt.toLocaleString()})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-600",children:[s.jsx(Uc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Productos"}),s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:m.length})]})]})]})]}),a.enlaces&&a.enlaces.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Enlaces"}),s.jsx("div",{className:"space-y-2",children:a.enlaces.map((Ie,gt)=>{const ft=ut=>{switch(ut){case"whatsapp":case"whatsapp2":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.304-1.654a11.882 11.882 0 005.713 1.456h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})});case"youtube":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})});case"facebook":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})});case"instagram":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"})});case"tiktok":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})});case"twitter":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})});case"telegram":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})});case"email":return s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})});case"website":default:return s.jsx(Bb,{className:"w-5 h-5"})}},Te=ut=>ut.tipo==="whatsapp"||ut.tipo==="whatsapp2"?`https://wa.me/${ut.url.replace(/\D/g,"")}`:ut.tipo==="email"?`mailto:${ut.url}`:ut.tipo==="telegram"?`https://t.me/${ut.url.replace("@","")}`:ut.url,nt=ut=>ut.titulo&&ut.titulo.trim()?ut.titulo:ut.etiqueta&&ut.etiqueta.trim()?ut.etiqueta:ut.url?ut.url.replace(/^https?:\/\//,"").substring(0,50):"Enlace";return s.jsxs("a",{href:Te(Ie),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900 rounded-lg text-sm text-gray-900 dark:text-white font-medium transition-colors duration-200 border-2 border-gray-200 dark:border-gray-600 hover:border-blue-500",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 w-5 h-5 flex-shrink-0",children:ft(Ie.tipo)}),s.jsx("span",{className:"flex-1 truncate",children:nt(Ie)}),s.jsx(_a,{size:16,className:"text-gray-400 flex-shrink-0"})]},gt)})})]}),s.jsxs("button",{onClick:()=>{const Ie=window.location.href;navigator.share?navigator.share({title:`Tienda ${a.nombre}`,url:Ie}):(navigator.clipboard.writeText(Ie),Vt("Enlace copiado al portapapeles","success","Copiado!"))},className:"w-full px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-lg transition-colors duration-200 flex items-center justify-center gap-2 shadow-sm",children:[s.jsx(FB,{className:"w-4 h-4"}),s.jsx("span",{children:"Compartir tienda"})]})]})]})})}),O&&s.jsxs("div",{className:"lg:hidden fixed inset-0 z-[99999] flex flex-col",style:{backgroundColor:r?"rgba(15, 23, 42, 0.95) !important":"#ffffff !important",backdropFilter:r?"blur(10px)":"none",opacity:"1 !important",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,right:0,bottom:0},children:[s.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-transparent border-b border-gray-200 dark:border-gray-600/30 px-3 py-2 flex items-center justify-between",style:{backgroundColor:r?"transparent":"#ffffff",opacity:1},children:[s.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Categoras"}),s.jsx("button",{onClick:()=>j(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:s.jsx(gs,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-3",style:{backgroundColor:r?"transparent":"#ffffff",opacity:1},children:s.jsx("div",{className:"space-y-1.5",children:w.map((Ie,gt)=>s.jsxs("button",{onClick:()=>{I(Ie),j(!1)},className:`w-full text-left px-3 py-2.5 rounded-lg transition-all duration-200 flex items-center justify-between ${L===Ie?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg":"bg-white dark:bg-transparent text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-white/5 shadow-sm hover:shadow-md border border-gray-200 dark:border-gray-600/30"}`,style:{opacity:1},children:[s.jsx("span",{className:"font-semibold text-sm",children:Ie==="todas"?"Todas":Ie}),L===Ie&&s.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center shadow-md",children:s.jsx("div",{className:"w-2.5 h-2.5 bg-blue-600 rounded-full"})})]},Ie))})}),s.jsx("div",{className:"flex-shrink-0 bg-gray-50 dark:bg-transparent border-t border-gray-200 dark:border-gray-600/30 px-3 py-2",style:{backgroundColor:r?"transparent":"#f9fafb",opacity:1},children:s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:[m.length," productos"]})})]}),s.jsx(sn,{children:U&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e4,backdropFilter:"blur(4px)"},onClick:()=>H(!1),children:s.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-3 shadow-lg",style:{maxWidth:"400px",width:"90%",padding:"32px",backgroundColor:r?"#1e293b":"#ffffff"},onClick:Ie=>Ie.stopPropagation(),children:[s.jsx("div",{className:"d-flex justify-content-center mb-4",children:s.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"64px",height:"64px",backgroundColor:"#10b981",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})})}),s.jsx("h3",{className:"text-center fw-bold mb-2",style:{fontSize:"22px",color:r?"#f1f5f9":"#1e293b",letterSpacing:"-0.02em"},children:"Guardado exitosamente"}),s.jsx("p",{className:"text-center mb-4",style:{fontSize:"15px",color:r?"#94a3b8":"#64748b",lineHeight:"1.5"},children:"Los cambios de tu tienda se han guardado correctamente."}),s.jsx("button",{onClick:()=>H(!1),className:"btn w-100",style:{backgroundColor:"#475569",color:"#ffffff",padding:"12px",fontSize:"15px",fontWeight:"600",borderRadius:"10px",border:"none",transition:"all 0.2s"},onMouseEnter:Ie=>{Ie.currentTarget.style.backgroundColor="#334155",Ie.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:Ie=>{Ie.currentTarget.style.backgroundColor="#475569",Ie.currentTarget.style.transform="translateY(0)"},children:"OK"})]})})})]})}function qG(){return s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",style:{paddingTop:"180px"},children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-gray-800 mb-6",children:"Historial"}),s.jsx("p",{className:"text-gray-600",children:"Aqu vers tu historial de navegacin o compras prximamente."})]})}function GG(){const{isDark:t}=Ss(),[e,n]=b.useState(0),r=["/vender/11-.mp4","/vender/12-.mp4","/vender/13-.mp4"];b.useEffect(()=>{const l=setInterval(()=>{n(d=>(d+1)%r.length)},5e3);return()=>clearInterval(l)},[r.length]);const i={hidden:{opacity:0,y:60},visible:{opacity:1,y:0}},a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}};return s.jsxs("div",{className:`min-h-screen transition-colors duration-500 ${t?"bg-slate-900":"bg-gradient-to-br from-blue-50 via-slate-50 to-indigo-50"}`,style:{paddingTop:"0px"},children:[s.jsx(fT,{}),s.jsx("section",{className:`py-6 sm:py-8 lg:py-10 transition-colors duration-500 ${t?"bg-slate-800":"bg-gradient-to-br from-blue-50 via-indigo-50 to-slate-50"}`,children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx(Q.div,{initial:"hidden",animate:"visible",variants:a,className:"text-center mb-12",children:s.jsx(Q.h1,{variants:i,className:`text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 transition-colors duration-300 ${t?"text-white":"text-slate-900"}`,style:{fontFamily:"'Orbitron', sans-serif"},children:"NOSOTROS"})}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[s.jsxs(Q.div,{initial:{opacity:0,x:-40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`p-4 sm:p-6 lg:p-8 rounded-3xl ${t?"bg-slate-900":"bg-white shadow-xl"}`,children:[s.jsx("h2",{className:`text-lg sm:text-xl lg:text-2xl xl:text-3xl font-extrabold mb-4 sm:mb-6 lg:mb-8 transition-colors duration-300 ${t?"text-white":"text-slate-900"}`,children:"Conoce nuestra historia"}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6",children:[s.jsx(Iv,{icon:s.jsx(TW,{}),label:"Quines somos",text:"Somos una empresa dominicana ubicada en Santiago, especializada en brindar lo ltimo en tecnologa, innovacin y productos para el estilo de vida moderno.",isDark:t}),s.jsx(Iv,{icon:s.jsx(DW,{}),label:"Nuestra misin",text:"Superar las expectativas de nuestros clientes ofreciendo artculos de calidad como consolas, videojuegos, tablets, mviles, accesorios y ms, con un servicio humano, eficiente y profesional.",isDark:t}),s.jsx(Iv,{icon:s.jsx(jh,{}),label:"Nuestro compromiso",text:"PlayCenter Universal no solo vende productos, crea experiencias memorables con cada compra. Gracias por confiar en nosotros!",isDark:t})]}),s.jsx("div",{className:"flex justify-center mt-4 sm:mt-6 lg:mt-8",children:s.jsxs(Yt,{to:"/contacto",className:"inline-flex items-center gap-2 lg:gap-3 px-4 sm:px-6 lg:px-8 py-2 sm:py-3 lg:py-4 rounded-lg lg:rounded-xl font-bold text-white transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl bg-blue-600 hover:bg-blue-700",children:[s.jsx(Gb,{className:"text-sm sm:text-base lg:text-lg"}),s.jsx("span",{className:"text-sm sm:text-base lg:text-lg",children:"Contctanos"})]})})]}),s.jsxs(Q.div,{initial:{opacity:0,x:40},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:`relative overflow-hidden rounded-3xl aspect-square ${t?"bg-slate-800":"bg-white shadow-xl"}`,children:[s.jsx("div",{className:"relative w-full h-full",children:r.map((l,d)=>s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${d===e?"opacity-100":"opacity-0"}`,children:s.jsx("source",{src:l,type:"video/mp4"})},d))}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10",children:r.map((l,d)=>s.jsx("button",{onClick:()=>n(d),className:`w-2 h-2 rounded-full transition-all duration-300 ${d===e?t?"bg-yellow-400 w-8":"bg-blue-600 w-8":t?"bg-white/40":"bg-slate-400/40"}`},d))})]})]})]})})]})}const Iv=({icon:t,label:e,text:n,isDark:r})=>s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 w-full",children:[s.jsx("div",{className:`flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-lg lg:rounded-xl flex items-center justify-center transition-colors duration-300 ${r?"bg-yellow-400":"bg-blue-600"}`,children:s.jsx("div",{className:`text-sm sm:text-base lg:text-xl ${r?"text-gray-900":"text-white"}`,children:t})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`text-sm sm:text-base lg:text-lg font-bold mb-1 sm:mb-1.5 lg:mb-2 transition-colors duration-300 ${r?"text-white":"text-gray-900"}`,children:e}),s.jsx("p",{className:`text-xs sm:text-sm lg:text-base leading-relaxed transition-colors duration-300 ${r?"text-gray-100":"text-gray-600"}`,children:n})]})]});function KG(){return s.jsxs("div",{className:"wave-background",children:[s.jsx("div",{className:"wave wave1"}),s.jsx("div",{className:"wave wave2"}),s.jsx("div",{className:"wave wave3"})]})}const h5={initial:{scale:1,boxShadow:"none"},hover:{scale:1.02,boxShadow:"none",transition:{type:"spring",stiffness:200,damping:20}},tap:{scale:.98,boxShadow:"none"}},YG={animate:{textShadow:["0 0 4px rgba(80, 100, 140, 0.4)","0 0 10px rgba(80, 100, 140, 0.6)","0 0 4px rgba(80, 100, 140, 0.4)"],transition:{repeat:1/0,repeatType:"mirror",duration:3,ease:"easeInOut"}}};function mT({categoriaActiva:t,mostrarEnMovil:e,setMostrarEnMovil:n}){const r=Sr(),{categories:i,loading:a,error:l}=mw(),[d,u]=b.useState(!1);b.useEffect(()=>{const y=()=>{u(document.documentElement.classList.contains("dark")||document.documentElement.classList.contains("dark-theme"))};y();const w=new MutationObserver(y);return w.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>w.disconnect()},[]);const m=y=>{r(`/Productos/${y.ruta}`),n&&n(!1)},g=y=>y===t,h=[{nombre:"Todos",ruta:"",id:"todos"},...i];return a?s.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",style:{paddingTop:"60px"},children:s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})})}):l?s.jsx("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",style:{paddingTop:"60px"},children:s.jsx("div",{className:"text-red-500 text-sm p-4",children:"Error cargando categoras"})}):s.jsxs(s.Fragment,{children:[s.jsxs("aside",{className:"hidden xl:flex flex-col w-56 px-2 relative z-40",style:{height:"100vh",paddingTop:"60px",backgroundColor:"transparent",border:"none",boxShadow:"none"},"aria-label":"Categoras",children:[s.jsx("div",{className:"absolute inset-0 z-0",style:{overflow:"visible",minHeight:"2000px",backgroundColor:"transparent",pointerEvents:"none"},children:s.jsx(KG,{})}),s.jsx("div",{className:"categorias-sidebar",children:s.jsx("div",{className:"categorias-scroll",children:s.jsxs("div",{className:"relative z-10 flex-1 pr-2",children:[s.jsx(Q.h2,{className:"text-lg font-semibold mb-4 text-center tracking-wide text-blue-700 dark:text-blue-400 select-none",variants:YG,animate:"animate",children:"Categoras"}),s.jsx("ul",{className:"space-y-2 text-sm",children:h.map((y,w)=>s.jsx(Q.li,{whileHover:{scale:1.02},children:s.jsx(Q.button,{onClick:()=>m(y),initial:"initial",whileHover:"hover",whileTap:"tap",variants:h5,className:`w-full text-left px-4 py-2 rounded-md font-medium transition-all duration-200 ${g(y.nombre)?"text-blue-900 dark:text-blue-100 font-semibold border border-blue-300 dark:border-blue-400":"text-blue-700 dark:text-blue-300 border border-gray-200 dark:border-gray-600"}`,style:{backgroundColor:g(y.nombre)?"rgba(255, 255, 255, 0.25)":"rgba(255, 255, 255, 0.12)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",boxShadow:"none"},children:y.nombre})},y.id||w))}),s.jsx("div",{className:"scroll-indicator",children:s.jsxs("div",{className:"scroll-dots",children:[s.jsx("div",{className:"scroll-dot"}),s.jsx("div",{className:"scroll-dot"}),s.jsx("div",{className:"scroll-dot"})]})})]})})})]}),s.jsx(sn,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{className:"fixed inset-0 z-[9998]",style:{background:d?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1)}),s.jsxs(Q.nav,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",stiffness:250,damping:30},className:"fixed top-0 left-0 h-full w-72 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 z-[9999] flex flex-col shadow-2xl transition-colors duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center px-4 py-4 bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-700 dark:to-blue-800",children:[s.jsxs("h2",{className:"text-lg font-bold text-white tracking-wide select-none flex items-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:s.jsx("path",{d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Categoras"]}),s.jsx("button",{onClick:()=>n(!1),className:"text-white font-bold text-2xl hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center transition-all duration-200","aria-label":"Cerrar categoras",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 bg-gradient-to-b from-gray-50 to-white dark:from-gray-800 dark:to-gray-900",children:s.jsx("ul",{className:"space-y-2 text-sm",children:h.map((y,w)=>s.jsx(Q.li,{whileHover:{scale:1.02},children:s.jsx(Q.button,{onClick:()=>m(y),initial:"initial",whileHover:"hover",whileTap:"tap",variants:h5,className:`w-full text-left px-4 py-3 rounded-xl font-semibold transition-all duration-300 border-2 shadow-sm hover:shadow-md ${g(y.nombre)?"text-blue-800 dark:text-blue-100 border-blue-400 dark:border-blue-500 shadow-blue-200 dark:shadow-blue-900/30":"text-gray-700 dark:text-gray-200 border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-600"}`,style:{backgroundColor:g(y.nombre)?d?"rgba(37, 99, 235, 0.15)":"rgba(219, 234, 254, 0.8)":d?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:y.nombre})},y.id||w))})})]})]})})]})}function pT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=pT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Nl(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=pT(t))&&(r&&(r+=" "),r+=e);return r}function XG(t,e,n=void 0){const r={};for(const i in t){const a=t[i];let l="",d=!0;for(let u=0;u<a.length;u+=1){const m=a[u];m&&(l+=(d===!0?"":" ")+e(m),d=!1,n&&n[m]&&(l+=" "+n[m]))}r[i]=l}return r}function su(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function Qu(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function vw(t,e=0,n=1){return Qu(t,e,n)}function QG(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Hc(t){if(t.type)return t;if(t.charAt(0)==="#")return Hc(QG(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(su(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(su(10,i))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:n,values:r,colorSpace:i}}const JG=t=>{const e=Hc(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Mf=(t,e)=>{try{return JG(t)}catch{return t}};function kx(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,a)=>a<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function gT(t){t=Hc(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,a=r*Math.min(i,1-i),l=(m,g=(m+n/30)%12)=>i-a*Math.max(Math.min(g-3,9-g,1),-1);let d="rgb";const u=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return t.type==="hsla"&&(d+="a",u.push(e[3])),kx({type:d,values:u})}function s1(t){t=Hc(t);let e=t.type==="hsl"||t.type==="hsla"?Hc(gT(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function ZG(t,e){const n=s1(t),r=s1(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function i1(t,e){return t=Hc(t),e=vw(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,kx(t)}function bg(t,e,n){try{return i1(t,e)}catch{return t}}function Pm(t,e){if(t=Hc(t),e=vw(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return kx(t)}function pr(t,e,n){try{return Pm(t,e)}catch{return t}}function Im(t,e){if(t=Hc(t),e=vw(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return kx(t)}function gr(t,e,n){try{return Im(t,e)}catch{return t}}function eK(t,e=.15){return s1(t)>.5?Pm(t,e):Im(t,e)}function wg(t,e,n){try{return eK(t,e)}catch{return t}}const tK=b.createContext(),nK=()=>b.useContext(tK)??!1;function xT(...t){const e=b.useRef(void 0),n=b.useCallback(r=>{const i=t.map(a=>{if(a==null)return null;if(typeof a=="function"){const l=a,d=l(r);return typeof d=="function"?d:()=>{l(null)}}return a.current=r,()=>{a.current=null}});return()=>{i.forEach(a=>a==null?void 0:a())}},t);return b.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function rK(t){return typeof t=="string"}function sK(t,e,n){return t===void 0||rK(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function Wg(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function f5(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function iK(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:a}=t;if(!e){const w=Nl(n==null?void 0:n.className,a,i==null?void 0:i.className,r==null?void 0:r.className),S={...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},N={...n,...i,...r};return w.length>0&&(N.className=w),Object.keys(S).length>0&&(N.style=S),{props:N,internalRef:void 0}}const l=Wg({...i,...r}),d=f5(r),u=f5(i),m=e(l),g=Nl(m==null?void 0:m.className,n==null?void 0:n.className,a,i==null?void 0:i.className,r==null?void 0:r.className),h={...m==null?void 0:m.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...r==null?void 0:r.style},y={...m,...n,...u,...d};return g.length>0&&(y.className=g),Object.keys(h).length>0&&(y.style=h),{props:y,internalRef:m.ref}}function aK(t,e,n){return typeof t=="function"?t(e,n):t}function mc(t){var h;const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...a}=t,l=i?{}:aK(n,r),{props:d,internalRef:u}=iK({...a,externalSlotProps:l}),m=xT(u,l==null?void 0:l.ref,(h=t.additionalProps)==null?void 0:h.ref);return sK(e,{...d,ref:m},r)}function Hg(t){return t&&t.ownerDocument||document}function oK(t){const{controlled:e,default:n}=t,{current:r}=b.useRef(e!==void 0),[i,a]=b.useState(n),l=r?e:i,d=b.useCallback(u=>{r||a(u)},[]);return[l,d]}const yT=typeof window<"u"?b.useLayoutEffect:b.useEffect;function Rv(t){const e=b.useRef(t);return yT(()=>{e.current=t}),b.useRef((...n)=>(0,e.current)(...n)).current}function m5(t){try{return t.matches(":focus-visible")}catch{}return!1}const lK={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function cK(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const dK=2;function Fu(t,e,n,r,i){return n===1?Math.min(t+e,i):Math.max(t-e,r)}function vT(t,e){return t-e}function p5(t,e){const{index:n}=t.reduce((r,i,a)=>{const l=Math.abs(e-i);return r===null||l<r.distance||l===r.distance?{distance:l,index:a}:r},null)??{};return n}function jg(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function M0(t,e,n){return(t-e)*100/(n-e)}function uK(t,e,n){return(n-e)*t+e}function hK(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function fK(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(hK(e)))}function g5({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(vT)}function kg({sliderRef:t,activeIndex:e,setActive:n}){var i,a,l;const r=Hg(t.current);(!((i=t.current)!=null&&i.contains(r.activeElement))||Number((a=r==null?void 0:r.activeElement)==null?void 0:a.getAttribute("data-index"))!==e)&&((l=t.current)==null||l.querySelector(`[type="range"][data-index="${e}"]`).focus()),n&&n(e)}function Ng(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?cK(t,e):!1}const mK={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},pK=t=>t;let _g;function x5(){return _g===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?_g=CSS.supports("touch-action","none"):_g=!0),_g}function gK(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:a=!1,marks:l=!1,max:d=100,min:u=0,name:m,onChange:g,onChangeCommitted:h,orientation:y="horizontal",rootRef:w,scale:S=pK,step:N=1,shiftStep:_=10,tabIndex:D,value:A}=t,L=b.useRef(void 0),[I,F]=b.useState(-1),[R,E]=b.useState(-1),[M,O]=b.useState(!1),j=b.useRef(0),U=b.useRef(null),[H,V]=oK({controlled:A,default:n??u}),K=g&&((Y,ie,pe)=>{const he=Y.nativeEvent||Y,He=new he.constructor(he.type,he);Object.defineProperty(He,"target",{writable:!0,value:{value:ie,name:m}}),U.current=ie,g(He,ie,pe)}),X=Array.isArray(H);let ne=X?H.slice().sort(vT):[H];ne=ne.map(Y=>Y==null?u:Qu(Y,u,d));const we=l===!0&&N!==null?[...Array(Math.floor((d-u)/N)+1)].map((Y,ie)=>({value:u+N*ie})):l||[],Z=we.map(Y=>Y.value),[le,re]=b.useState(-1),B=b.useRef(null),ce=xT(w,B),Se=Y=>ie=>{var he;const pe=Number(ie.currentTarget.getAttribute("data-index"));m5(ie.target)&&re(pe),E(pe),(he=Y==null?void 0:Y.onFocus)==null||he.call(Y,ie)},Ve=Y=>ie=>{var pe;m5(ie.target)||re(-1),E(-1),(pe=Y==null?void 0:Y.onBlur)==null||pe.call(Y,ie)},$e=(Y,ie)=>{const pe=Number(Y.currentTarget.getAttribute("data-index")),he=ne[pe],He=Z.indexOf(he);let ge=ie;if(we&&N==null){const Ae=Z[Z.length-1];ge>=Ae?ge=Ae:ge<=Z[0]?ge=Z[0]:ge=ge<he?Z[He-1]:Z[He+1]}if(ge=Qu(ge,u,d),X){i&&(ge=Qu(ge,ne[pe-1]||-1/0,ne[pe+1]||1/0));const Ae=ge;ge=g5({values:ne,newValue:ge,index:pe});let Be=pe;i||(Be=ge.indexOf(Ae)),kg({sliderRef:B,activeIndex:Be})}V(ge),re(pe),K&&!Ng(ge,H)&&K(Y,ge,pe),h&&h(Y,U.current??ge)},Ke=Y=>ie=>{var pe;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(ie.key)){ie.preventDefault();const he=Number(ie.currentTarget.getAttribute("data-index")),He=ne[he];let ge=null;if(N!=null){const Ae=ie.shiftKey?_:N;switch(ie.key){case"ArrowUp":ge=Fu(He,Ae,1,u,d);break;case"ArrowRight":ge=Fu(He,Ae,a?-1:1,u,d);break;case"ArrowDown":ge=Fu(He,Ae,-1,u,d);break;case"ArrowLeft":ge=Fu(He,Ae,a?1:-1,u,d);break;case"PageUp":ge=Fu(He,_,1,u,d);break;case"PageDown":ge=Fu(He,_,-1,u,d);break;case"Home":ge=u;break;case"End":ge=d;break}}else if(we){const Ae=Z[Z.length-1],Be=Z.indexOf(He),Ze=[a?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Rt=[a?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Ze.includes(ie.key)?Be===0?ge=Z[0]:ge=Z[Be-1]:Rt.includes(ie.key)&&(Be===Z.length-1?ge=Ae:ge=Z[Be+1])}ge!=null&&$e(ie,ge)}(pe=Y==null?void 0:Y.onKeyDown)==null||pe.call(Y,ie)};yT(()=>{var Y;r&&B.current.contains(document.activeElement)&&((Y=document.activeElement)==null||Y.blur())},[r]),r&&I!==-1&&F(-1),r&&le!==-1&&re(-1);const Ye=Y=>ie=>{var pe;(pe=Y.onChange)==null||pe.call(Y,ie),$e(ie,ie.target.valueAsNumber)},lt=b.useRef(void 0);let Re=y;a&&y==="horizontal"&&(Re+="-reverse");const Ct=({finger:Y,move:ie=!1})=>{const{current:pe}=B,{width:he,height:He,bottom:ge,left:Ae}=pe.getBoundingClientRect();let Be;Re.startsWith("vertical")?Be=(ge-Y.y)/He:Be=(Y.x-Ae)/he,Re.includes("-reverse")&&(Be=1-Be);let Ze;if(Ze=uK(Be,u,d),N)Ze=fK(Ze,N,u);else{const Ie=p5(Z,Ze);Ze=Z[Ie]}Ze=Qu(Ze,u,d);let Rt=0;if(X){ie?Rt=lt.current:Rt=p5(ne,Ze),i&&(Ze=Qu(Ze,ne[Rt-1]||-1/0,ne[Rt+1]||1/0));const Ie=Ze;Ze=g5({values:ne,newValue:Ze,index:Rt}),i&&ie||(Rt=Ze.indexOf(Ie),lt.current=Rt)}return{newValue:Ze,activeIndex:Rt}},Ue=Rv(Y=>{const ie=jg(Y,L);if(!ie)return;if(j.current+=1,Y.type==="mousemove"&&Y.buttons===0){ot(Y);return}const{newValue:pe,activeIndex:he}=Ct({finger:ie,move:!0});kg({sliderRef:B,activeIndex:he,setActive:F}),V(pe),!M&&j.current>dK&&O(!0),K&&!Ng(pe,H)&&K(Y,pe,he)}),ot=Rv(Y=>{const ie=jg(Y,L);if(O(!1),!ie)return;const{newValue:pe}=Ct({finger:ie,move:!0});F(-1),Y.type==="touchend"&&E(-1),h&&h(Y,U.current??pe),L.current=void 0,it()}),ct=Rv(Y=>{if(r)return;x5()||Y.preventDefault();const ie=Y.changedTouches[0];ie!=null&&(L.current=ie.identifier);const pe=jg(Y,L);if(pe!==!1){const{newValue:He,activeIndex:ge}=Ct({finger:pe});kg({sliderRef:B,activeIndex:ge,setActive:F}),V(He),K&&!Ng(He,H)&&K(Y,He,ge)}j.current=0;const he=Hg(B.current);he.addEventListener("touchmove",Ue,{passive:!0}),he.addEventListener("touchend",ot,{passive:!0})}),it=b.useCallback(()=>{const Y=Hg(B.current);Y.removeEventListener("mousemove",Ue),Y.removeEventListener("mouseup",ot),Y.removeEventListener("touchmove",Ue),Y.removeEventListener("touchend",ot)},[ot,Ue]);b.useEffect(()=>{const{current:Y}=B;return Y.addEventListener("touchstart",ct,{passive:x5()}),()=>{Y.removeEventListener("touchstart",ct),it()}},[it,ct]),b.useEffect(()=>{r&&it()},[r,it]);const Lt=Y=>ie=>{var He;if((He=Y.onMouseDown)==null||He.call(Y,ie),r||ie.defaultPrevented||ie.button!==0)return;ie.preventDefault();const pe=jg(ie,L);if(pe!==!1){const{newValue:ge,activeIndex:Ae}=Ct({finger:pe});kg({sliderRef:B,activeIndex:Ae,setActive:F}),V(ge),K&&!Ng(ge,H)&&K(ie,ge,Ae)}j.current=0;const he=Hg(B.current);he.addEventListener("mousemove",Ue,{passive:!0}),he.addEventListener("mouseup",ot)},Bt=M0(X?ne[0]:u,u,d),Ge=M0(ne[ne.length-1],u,d)-Bt,mn=(Y={})=>{const ie=Wg(Y),pe={onMouseDown:Lt(ie||{})},he={...ie,...pe};return{...Y,ref:ce,...he}},Wt=Y=>ie=>{var he;(he=Y.onMouseOver)==null||he.call(Y,ie);const pe=Number(ie.currentTarget.getAttribute("data-index"));E(pe)},an=Y=>ie=>{var pe;(pe=Y.onMouseLeave)==null||pe.call(Y,ie),E(-1)},At=(Y={})=>{const ie=Wg(Y),pe={onMouseOver:Wt(ie||{}),onMouseLeave:an(ie||{})};return{...Y,...ie,...pe}},bn=Y=>({pointerEvents:I!==-1&&I!==Y?"none":void 0});let Ht;return y==="vertical"&&(Ht=a?"vertical-rl":"vertical-lr"),{active:I,axis:Re,axisProps:mK,dragging:M,focusedThumbIndex:le,getHiddenInputProps:(Y={})=>{const ie=Wg(Y),pe={onChange:Ye(ie||{}),onFocus:Se(ie||{}),onBlur:Ve(ie||{}),onKeyDown:Ke(ie||{})},he={...ie,...pe};return{tabIndex:D,"aria-labelledby":e,"aria-orientation":y,"aria-valuemax":S(d),"aria-valuemin":S(u),name:m,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...Y,...he,style:{...lK,direction:a?"rtl":"ltr",width:"100%",height:"100%",writingMode:Ht}}},getRootProps:mn,getThumbProps:At,marks:we,open:R,range:X,rootRef:ce,trackLeap:Ge,trackOffset:Bt,values:ne,getThumbStyle:bn}}function qg(t){return typeof t=="string"}function Oo(t){if(typeof t!="string")throw new Error(su(7));return t.charAt(0).toUpperCase()+t.slice(1)}var Lv={exports:{}},ur={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5;function xK(){if(y5)return ur;y5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),w=Symbol.for("react.client.reference");function S(N){if(typeof N=="object"&&N!==null){var _=N.$$typeof;switch(_){case t:switch(N=N.type,N){case n:case i:case r:case u:case m:case y:return N;default:switch(N=N&&N.$$typeof,N){case l:case d:case h:case g:return N;case a:return N;default:return _}}case e:return _}}}return ur.ContextConsumer=a,ur.ContextProvider=l,ur.Element=t,ur.ForwardRef=d,ur.Fragment=n,ur.Lazy=h,ur.Memo=g,ur.Portal=e,ur.Profiler=i,ur.StrictMode=r,ur.Suspense=u,ur.SuspenseList=m,ur.isContextConsumer=function(N){return S(N)===a},ur.isContextProvider=function(N){return S(N)===l},ur.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},ur.isForwardRef=function(N){return S(N)===d},ur.isFragment=function(N){return S(N)===n},ur.isLazy=function(N){return S(N)===h},ur.isMemo=function(N){return S(N)===g},ur.isPortal=function(N){return S(N)===e},ur.isProfiler=function(N){return S(N)===i},ur.isStrictMode=function(N){return S(N)===r},ur.isSuspense=function(N){return S(N)===u},ur.isSuspenseList=function(N){return S(N)===m},ur.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===i||N===r||N===u||N===m||typeof N=="object"&&N!==null&&(N.$$typeof===h||N.$$typeof===g||N.$$typeof===l||N.$$typeof===a||N.$$typeof===d||N.$$typeof===w||N.getModuleId!==void 0)},ur.typeOf=S,ur}var v5;function yK(){return v5||(v5=1,Lv.exports=xK()),Lv.exports}var bT=yK();function Mo(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function wT(t){if(b.isValidElement(t)||bT.isValidElementType(t)||!Mo(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=wT(t[n])}),e}function la(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Mo(t)&&Mo(e)&&Object.keys(e).forEach(i=>{b.isValidElement(e[i])||bT.isValidElementType(e[i])?r[i]=e[i]:Mo(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Mo(t[i])?r[i]=la(t[i],e[i],n):n.clone?r[i]=Mo(e[i])?wT(e[i]):e[i]:r[i]=e[i]}),r}function sm(t,e){return e?la(t,e,{clone:!1}):t}function b5(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var l,d;const a=/min-width:\s*([0-9.]+)/;return+(((l=r.match(a))==null?void 0:l[1])||0)-+(((d=i.match(a))==null?void 0:d[1])||0)});return n.length?n.reduce((r,i)=>{const a=e[i];return delete r[i],r[i]=a,r},{...e}):e}function vK(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function bK(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,a=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(a)}function wK(t){const e=(a,l)=>a.replace("@media",l?`@container ${l}`:"@container");function n(a,l){a.up=(...d)=>e(t.breakpoints.up(...d),l),a.down=(...d)=>e(t.breakpoints.down(...d),l),a.between=(...d)=>e(t.breakpoints.between(...d),l),a.only=(...d)=>e(t.breakpoints.only(...d),l),a.not=(...d)=>{const u=e(t.breakpoints.not(...d),l);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},i=a=>(n(r,a),r);return n(i),{...t,containerQueries:i}}const Nx={xs:0,sm:600,md:900,lg:1200,xl:1536},w5={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Nx[t]}px)`},jK={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:Nx[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Dl(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const a=r.breakpoints||w5;return e.reduce((l,d,u)=>(l[a.up(a.keys[u])]=n(e[u]),l),{})}if(typeof e=="object"){const a=r.breakpoints||w5;return Object.keys(e).reduce((l,d)=>{if(vK(a.keys,d)){const u=bK(r.containerQueries?r:jK,d);u&&(l[u]=n(e[d],d))}else if(Object.keys(a.values||Nx).includes(d)){const u=a.up(d);l[u]=n(e[d],d)}else{const u=d;l[u]=e[u]}return l},{})}return n(e)}function kK(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,i)=>{const a=t.up(i);return r[a]={},r},{}))||{}}function j5(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function _x(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function D0(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=_x(t,n)||r,e&&(i=e(i,r,t)),i}function as(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,a=l=>{if(l[e]==null)return null;const d=l[e],u=l.theme,m=_x(u,r)||{};return Dl(l,d,h=>{let y=D0(m,i,h);return h===y&&typeof h=="string"&&(y=D0(m,i,`${e}${h==="default"?"":Oo(h)}`,h)),n===!1?y:{[n]:y}})};return a.propTypes={},a.filterProps=[e],a}function NK(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const _K={m:"margin",p:"padding"},SK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},k5={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},CK=NK(t=>{if(t.length>2)if(k5[t])t=k5[t];else return[t];const[e,n]=t.split(""),r=_K[e],i=SK[n]||"";return Array.isArray(i)?i.map(a=>r+a):[r+i]}),bw=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ww=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...bw,...ww];function np(t,e,n,r){const i=_x(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?a=>typeof a=="string"?a:typeof i=="string"?i.startsWith("var(")&&a===0?0:i.startsWith("var(")&&a===1?i:`calc(${a} * ${i})`:i*a:Array.isArray(i)?a=>{if(typeof a=="string")return a;const l=Math.abs(a),d=i[l];return a>=0?d:typeof d=="number"?-d:typeof d=="string"&&d.startsWith("var(")?`calc(-1 * ${d})`:`-${d}`}:typeof i=="function"?i:()=>{}}function jw(t){return np(t,"spacing",8)}function rp(t,e){return typeof e=="string"||e==null?e:t(e)}function EK(t,e){return n=>t.reduce((r,i)=>(r[i]=rp(e,n),r),{})}function TK(t,e,n,r){if(!e.includes(n))return null;const i=CK(n),a=EK(i,r),l=t[n];return Dl(t,l,a)}function jT(t,e){const n=jw(t.theme);return Object.keys(t).map(r=>TK(t,e,r,n)).reduce(sm,{})}function Hr(t){return jT(t,bw)}Hr.propTypes={};Hr.filterProps=bw;function qr(t){return jT(t,ww)}qr.propTypes={};qr.filterProps=ww;function Sx(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(a=>{r[a]=i}),r),{}),n=r=>Object.keys(r).reduce((i,a)=>e[a]?sm(i,e[a](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function wa(t){return typeof t!="number"?t:`${t}px solid`}function Ia(t,e){return as({prop:t,themeKey:"borders",transform:e})}const AK=Ia("border",wa),PK=Ia("borderTop",wa),IK=Ia("borderRight",wa),RK=Ia("borderBottom",wa),LK=Ia("borderLeft",wa),MK=Ia("borderColor"),DK=Ia("borderTopColor"),OK=Ia("borderRightColor"),VK=Ia("borderBottomColor"),zK=Ia("borderLeftColor"),FK=Ia("outline",wa),$K=Ia("outlineColor"),Cx=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=np(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:rp(e,r)});return Dl(t,t.borderRadius,n)}return null};Cx.propTypes={};Cx.filterProps=["borderRadius"];Sx(AK,PK,IK,RK,LK,MK,DK,OK,VK,zK,Cx,FK,$K);const Ex=t=>{if(t.gap!==void 0&&t.gap!==null){const e=np(t.theme,"spacing",8),n=r=>({gap:rp(e,r)});return Dl(t,t.gap,n)}return null};Ex.propTypes={};Ex.filterProps=["gap"];const Tx=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=np(t.theme,"spacing",8),n=r=>({columnGap:rp(e,r)});return Dl(t,t.columnGap,n)}return null};Tx.propTypes={};Tx.filterProps=["columnGap"];const Ax=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=np(t.theme,"spacing",8),n=r=>({rowGap:rp(e,r)});return Dl(t,t.rowGap,n)}return null};Ax.propTypes={};Ax.filterProps=["rowGap"];const UK=as({prop:"gridColumn"}),BK=as({prop:"gridRow"}),WK=as({prop:"gridAutoFlow"}),HK=as({prop:"gridAutoColumns"}),qK=as({prop:"gridAutoRows"}),GK=as({prop:"gridTemplateColumns"}),KK=as({prop:"gridTemplateRows"}),YK=as({prop:"gridTemplateAreas"}),XK=as({prop:"gridArea"});Sx(Ex,Tx,Ax,UK,BK,WK,HK,qK,GK,KK,YK,XK);function dh(t,e){return e==="grey"?e:t}const QK=as({prop:"color",themeKey:"palette",transform:dh}),JK=as({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:dh}),ZK=as({prop:"backgroundColor",themeKey:"palette",transform:dh});Sx(QK,JK,ZK);function sa(t){return t<=1&&t!==0?`${t*100}%`:t}const eY=as({prop:"width",transform:sa}),kw=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var i,a,l,d,u;const r=((l=(a=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:a.values)==null?void 0:l[n])||Nx[n];return r?((u=(d=t.theme)==null?void 0:d.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:sa(n)}};return Dl(t,t.maxWidth,e)}return null};kw.filterProps=["maxWidth"];const tY=as({prop:"minWidth",transform:sa}),nY=as({prop:"height",transform:sa}),rY=as({prop:"maxHeight",transform:sa}),sY=as({prop:"minHeight",transform:sa});as({prop:"size",cssProperty:"width",transform:sa});as({prop:"size",cssProperty:"height",transform:sa});const iY=as({prop:"boxSizing"});Sx(eY,kw,tY,nY,rY,sY,iY);const sp={border:{themeKey:"borders",transform:wa},borderTop:{themeKey:"borders",transform:wa},borderRight:{themeKey:"borders",transform:wa},borderBottom:{themeKey:"borders",transform:wa},borderLeft:{themeKey:"borders",transform:wa},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:wa},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Cx},color:{themeKey:"palette",transform:dh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:dh},backgroundColor:{themeKey:"palette",transform:dh},p:{style:qr},pt:{style:qr},pr:{style:qr},pb:{style:qr},pl:{style:qr},px:{style:qr},py:{style:qr},padding:{style:qr},paddingTop:{style:qr},paddingRight:{style:qr},paddingBottom:{style:qr},paddingLeft:{style:qr},paddingX:{style:qr},paddingY:{style:qr},paddingInline:{style:qr},paddingInlineStart:{style:qr},paddingInlineEnd:{style:qr},paddingBlock:{style:qr},paddingBlockStart:{style:qr},paddingBlockEnd:{style:qr},m:{style:Hr},mt:{style:Hr},mr:{style:Hr},mb:{style:Hr},ml:{style:Hr},mx:{style:Hr},my:{style:Hr},margin:{style:Hr},marginTop:{style:Hr},marginRight:{style:Hr},marginBottom:{style:Hr},marginLeft:{style:Hr},marginX:{style:Hr},marginY:{style:Hr},marginInline:{style:Hr},marginInlineStart:{style:Hr},marginInlineEnd:{style:Hr},marginBlock:{style:Hr},marginBlockStart:{style:Hr},marginBlockEnd:{style:Hr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ex},rowGap:{style:Ax},columnGap:{style:Tx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sa},maxWidth:{style:kw},minWidth:{transform:sa},height:{transform:sa},maxHeight:{transform:sa},minHeight:{transform:sa},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function aY(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function oY(t,e){return typeof t=="function"?t(e):t}function lY(){function t(n,r,i,a){const l={[n]:r,theme:i},d=a[n];if(!d)return{[n]:r};const{cssProperty:u=n,themeKey:m,transform:g,style:h}=d;if(r==null)return null;if(m==="typography"&&r==="inherit")return{[n]:r};const y=_x(i,m)||{};return h?h(l):Dl(l,r,S=>{let N=D0(y,g,S);return S===N&&typeof S=="string"&&(N=D0(y,g,`${n}${S==="default"?"":Oo(S)}`,S)),u===!1?N:{[u]:N}})}function e(n){const{sx:r,theme:i={},nested:a}=n||{};if(!r)return null;const l=i.unstable_sxConfig??sp;function d(u){let m=u;if(typeof u=="function")m=u(i);else if(typeof u!="object")return u;if(!m)return null;const g=kK(i.breakpoints),h=Object.keys(g);let y=g;return Object.keys(m).forEach(w=>{const S=oY(m[w],i);if(S!=null)if(typeof S=="object")if(l[w])y=sm(y,t(w,S,i,l));else{const N=Dl({theme:i},S,_=>({[w]:_}));aY(N,S)?y[w]=e({sx:S,theme:i,nested:!0}):y=sm(y,N)}else y=sm(y,t(w,S,i,l))}),!a&&i.modularCssLayers?{"@layer sx":b5(i,j5(h,y))}:b5(i,j5(h,y))}return Array.isArray(r)?r.map(d):d(r)}return e}const iu=lY();iu.filterProps=["sx"];const cY=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??sp;return Object.keys(t).forEach(i=>{n[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function dY(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=cY(n);let a;return Array.isArray(e)?a=[r,...e]:typeof e=="function"?a=(...l)=>{const d=e(...l);return Mo(d)?{...r,...d}:r}:a={...r,...e},{...i,sx:a}}function a1(){return a1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a1.apply(null,arguments)}function uY(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function hY(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var fY=function(){function t(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(hY(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=uY(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),pi="-ms-",O0="-moz-",Jn="-webkit-",kT="comm",Nw="rule",_w="decl",mY="@import",NT="@keyframes",pY="@layer",gY=Math.abs,Px=String.fromCharCode,xY=Object.assign;function yY(t,e){return Zs(t,0)^45?(((e<<2^Zs(t,0))<<2^Zs(t,1))<<2^Zs(t,2))<<2^Zs(t,3):0}function _T(t){return t.trim()}function vY(t,e){return(t=e.exec(t))?t[0]:t}function Zn(t,e,n){return t.replace(e,n)}function o1(t,e){return t.indexOf(e)}function Zs(t,e){return t.charCodeAt(e)|0}function Rm(t,e,n){return t.slice(e,n)}function Ro(t){return t.length}function Sw(t){return t.length}function Sg(t,e){return e.push(t),t}function bY(t,e){return t.map(e).join("")}var Ix=1,_h=1,ST=0,Ki=0,xs=0,Wh="";function Rx(t,e,n,r,i,a,l){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:Ix,column:_h,length:l,return:""}}function _f(t,e){return xY(Rx("",null,null,"",null,null,0),t,{length:-t.length},e)}function wY(){return xs}function jY(){return xs=Ki>0?Zs(Wh,--Ki):0,_h--,xs===10&&(_h=1,Ix--),xs}function ca(){return xs=Ki<ST?Zs(Wh,Ki++):0,_h++,xs===10&&(_h=1,Ix++),xs}function qo(){return Zs(Wh,Ki)}function Gg(){return Ki}function ip(t,e){return Rm(Wh,t,e)}function Lm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CT(t){return Ix=_h=1,ST=Ro(Wh=t),Ki=0,[]}function ET(t){return Wh="",t}function Kg(t){return _T(ip(Ki-1,l1(t===91?t+2:t===40?t+1:t)))}function kY(t){for(;(xs=qo())&&xs<33;)ca();return Lm(t)>2||Lm(xs)>3?"":" "}function NY(t,e){for(;--e&&ca()&&!(xs<48||xs>102||xs>57&&xs<65||xs>70&&xs<97););return ip(t,Gg()+(e<6&&qo()==32&&ca()==32))}function l1(t){for(;ca();)switch(xs){case t:return Ki;case 34:case 39:t!==34&&t!==39&&l1(xs);break;case 40:t===41&&l1(t);break;case 92:ca();break}return Ki}function _Y(t,e){for(;ca()&&t+xs!==57;)if(t+xs===84&&qo()===47)break;return"/*"+ip(e,Ki-1)+"*"+Px(t===47?t:ca())}function SY(t){for(;!Lm(qo());)ca();return ip(t,Ki)}function CY(t){return ET(Yg("",null,null,null,[""],t=CT(t),0,[0],t))}function Yg(t,e,n,r,i,a,l,d,u){for(var m=0,g=0,h=l,y=0,w=0,S=0,N=1,_=1,D=1,A=0,L="",I=i,F=a,R=r,E=L;_;)switch(S=A,A=ca()){case 40:if(S!=108&&Zs(E,h-1)==58){o1(E+=Zn(Kg(A),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:E+=Kg(A);break;case 9:case 10:case 13:case 32:E+=kY(S);break;case 92:E+=NY(Gg()-1,7);continue;case 47:switch(qo()){case 42:case 47:Sg(EY(_Y(ca(),Gg()),e,n),u);break;default:E+="/"}break;case 123*N:d[m++]=Ro(E)*D;case 125*N:case 59:case 0:switch(A){case 0:case 125:_=0;case 59+g:D==-1&&(E=Zn(E,/\f/g,"")),w>0&&Ro(E)-h&&Sg(w>32?_5(E+";",r,n,h-1):_5(Zn(E," ","")+";",r,n,h-2),u);break;case 59:E+=";";default:if(Sg(R=N5(E,e,n,m,g,i,d,L,I=[],F=[],h),a),A===123)if(g===0)Yg(E,e,R,R,I,a,h,d,F);else switch(y===99&&Zs(E,3)===110?100:y){case 100:case 108:case 109:case 115:Yg(t,R,R,r&&Sg(N5(t,R,R,0,0,i,d,L,i,I=[],h),F),i,F,h,d,r?I:F);break;default:Yg(E,R,R,R,[""],F,0,d,F)}}m=g=w=0,N=D=1,L=E="",h=l;break;case 58:h=1+Ro(E),w=S;default:if(N<1){if(A==123)--N;else if(A==125&&N++==0&&jY()==125)continue}switch(E+=Px(A),A*N){case 38:D=g>0?1:(E+="\f",-1);break;case 44:d[m++]=(Ro(E)-1)*D,D=1;break;case 64:qo()===45&&(E+=Kg(ca())),y=qo(),g=h=Ro(L=E+=SY(Gg())),A++;break;case 45:S===45&&Ro(E)==2&&(N=0)}}return a}function N5(t,e,n,r,i,a,l,d,u,m,g){for(var h=i-1,y=i===0?a:[""],w=Sw(y),S=0,N=0,_=0;S<r;++S)for(var D=0,A=Rm(t,h+1,h=gY(N=l[S])),L=t;D<w;++D)(L=_T(N>0?y[D]+" "+A:Zn(A,/&\f/g,y[D])))&&(u[_++]=L);return Rx(t,e,n,i===0?Nw:d,u,m,g)}function EY(t,e,n){return Rx(t,e,n,kT,Px(wY()),Rm(t,2,-2),0)}function _5(t,e,n,r){return Rx(t,e,n,_w,Rm(t,0,r),Rm(t,r+1,-1),r)}function uh(t,e){for(var n="",r=Sw(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function TY(t,e,n,r){switch(t.type){case pY:if(t.children.length)break;case mY:case _w:return t.return=t.return||t.value;case kT:return"";case NT:return t.return=t.value+"{"+uh(t.children,r)+"}";case Nw:t.value=t.props.join(",")}return Ro(n=uh(t.children,r))?t.return=t.value+"{"+n+"}":""}function AY(t){var e=Sw(t);return function(n,r,i,a){for(var l="",d=0;d<e;d++)l+=t[d](n,r,i,a)||"";return l}}function PY(t){return function(e){e.root||(e=e.return)&&t(e)}}function TT(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var IY=function(e,n,r){for(var i=0,a=0;i=a,a=qo(),i===38&&a===12&&(n[r]=1),!Lm(a);)ca();return ip(e,Ki)},RY=function(e,n){var r=-1,i=44;do switch(Lm(i)){case 0:i===38&&qo()===12&&(n[r]=1),e[r]+=IY(Ki-1,n,r);break;case 2:e[r]+=Kg(i);break;case 4:if(i===44){e[++r]=qo()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Px(i)}while(i=ca());return e},LY=function(e,n){return ET(RY(CT(e),n))},S5=new WeakMap,MY=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!S5.get(r))&&!i){S5.set(e,!0);for(var a=[],l=LY(n,a),d=r.props,u=0,m=0;u<l.length;u++)for(var g=0;g<d.length;g++,m++)e.props[m]=a[u]?l[u].replace(/&\f/g,d[g]):d[g]+" "+l[u]}}},DY=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function AT(t,e){switch(yY(t,e)){case 5103:return Jn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Jn+t+O0+t+pi+t+t;case 6828:case 4268:return Jn+t+pi+t+t;case 6165:return Jn+t+pi+"flex-"+t+t;case 5187:return Jn+t+Zn(t,/(\w+).+(:[^]+)/,Jn+"box-$1$2"+pi+"flex-$1$2")+t;case 5443:return Jn+t+pi+"flex-item-"+Zn(t,/flex-|-self/,"")+t;case 4675:return Jn+t+pi+"flex-line-pack"+Zn(t,/align-content|flex-|-self/,"")+t;case 5548:return Jn+t+pi+Zn(t,"shrink","negative")+t;case 5292:return Jn+t+pi+Zn(t,"basis","preferred-size")+t;case 6060:return Jn+"box-"+Zn(t,"-grow","")+Jn+t+pi+Zn(t,"grow","positive")+t;case 4554:return Jn+Zn(t,/([^-])(transform)/g,"$1"+Jn+"$2")+t;case 6187:return Zn(Zn(Zn(t,/(zoom-|grab)/,Jn+"$1"),/(image-set)/,Jn+"$1"),t,"")+t;case 5495:case 3959:return Zn(t,/(image-set\([^]*)/,Jn+"$1$`$1");case 4968:return Zn(Zn(t,/(.+:)(flex-)?(.*)/,Jn+"box-pack:$3"+pi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jn+t+t;case 4095:case 3583:case 4068:case 2532:return Zn(t,/(.+)-inline(.+)/,Jn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ro(t)-1-e>6)switch(Zs(t,e+1)){case 109:if(Zs(t,e+4)!==45)break;case 102:return Zn(t,/(.+:)(.+)-([^]+)/,"$1"+Jn+"$2-$3$1"+O0+(Zs(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~o1(t,"stretch")?AT(Zn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Zs(t,e+1)!==115)break;case 6444:switch(Zs(t,Ro(t)-3-(~o1(t,"!important")&&10))){case 107:return Zn(t,":",":"+Jn)+t;case 101:return Zn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jn+(Zs(t,14)===45?"inline-":"")+"box$3$1"+Jn+"$2$3$1"+pi+"$2box$3")+t}break;case 5936:switch(Zs(t,e+11)){case 114:return Jn+t+pi+Zn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Jn+t+pi+Zn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Jn+t+pi+Zn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Jn+t+pi+t+t}return t}var OY=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case _w:e.return=AT(e.value,e.length);break;case NT:return uh([_f(e,{value:Zn(e.value,"@","@"+Jn)})],i);case Nw:if(e.length)return bY(e.props,function(a){switch(vY(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return uh([_f(e,{props:[Zn(a,/:(read-\w+)/,":"+O0+"$1")]})],i);case"::placeholder":return uh([_f(e,{props:[Zn(a,/:(plac\w+)/,":"+Jn+"input-$1")]}),_f(e,{props:[Zn(a,/:(plac\w+)/,":"+O0+"$1")]}),_f(e,{props:[Zn(a,/:(plac\w+)/,pi+"input-$1")]})],i)}return""})}},VY=[OY],zY=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(N){var _=N.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var i=e.stylisPlugins||VY,a={},l,d=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(N){for(var _=N.getAttribute("data-emotion").split(" "),D=1;D<_.length;D++)a[_[D]]=!0;d.push(N)});var u,m=[MY,DY];{var g,h=[TY,PY(function(N){g.insert(N)})],y=AY(m.concat(i,h)),w=function(_){return uh(CY(_),y)};u=function(_,D,A,L){g=A,w(_?_+"{"+D.styles+"}":D.styles),L&&(S.inserted[D.name]=!0)}}var S={key:n,sheet:new fY({key:n,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:u};return S.sheet.hydrate(d),S},FY=!0;function $Y(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var PT=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||FY===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},UY=function(e,n,r){PT(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function BY(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var WY={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},HY=/[A-Z]|^ms/g,qY=/_EMO_([^_]+?)_([^]*?)_EMO_/g,IT=function(e){return e.charCodeAt(1)===45},C5=function(e){return e!=null&&typeof e!="boolean"},Mv=TT(function(t){return IT(t)?t:t.replace(HY,"-$&").toLowerCase()}),E5=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(qY,function(r,i,a){return Lo={name:i,styles:a,next:Lo},i})}return WY[e]!==1&&!IT(e)&&typeof n=="number"&&n!==0?n+"px":n};function Mm(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Lo={name:i.name,styles:i.styles,next:Lo},i.name;var a=n;if(a.styles!==void 0){var l=a.next;if(l!==void 0)for(;l!==void 0;)Lo={name:l.name,styles:l.styles,next:Lo},l=l.next;var d=a.styles+";";return d}return GY(t,e,n)}case"function":{if(t!==void 0){var u=Lo,m=n(t);return Lo=u,Mm(t,e,m)}break}}var g=n;if(e==null)return g;var h=e[g];return h!==void 0?h:g}function GY(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Mm(t,e,n[i])+";";else for(var a in n){var l=n[a];if(typeof l!="object"){var d=l;e!=null&&e[d]!==void 0?r+=a+"{"+e[d]+"}":C5(d)&&(r+=Mv(a)+":"+E5(a,d)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)C5(l[u])&&(r+=Mv(a)+":"+E5(a,l[u])+";");else{var m=Mm(t,e,l);switch(a){case"animation":case"animationName":{r+=Mv(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var T5=/label:\s*([^\s;{]+)\s*(;|$)/g,Lo;function RT(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Lo=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,i+=Mm(n,e,a);else{var l=a;i+=l[0]}for(var d=1;d<t.length;d++)if(i+=Mm(n,e,t[d]),r){var u=a;i+=u[d]}T5.lastIndex=0;for(var m="",g;(g=T5.exec(i))!==null;)m+="-"+g[1];var h=BY(i)+m;return{name:h,styles:i,next:Lo}}var KY=function(e){return e()},YY=$v.useInsertionEffect?$v.useInsertionEffect:!1,XY=YY||KY,LT=b.createContext(typeof HTMLElement<"u"?zY({key:"css"}):null);LT.Provider;var QY=function(e){return b.forwardRef(function(n,r){var i=b.useContext(LT);return e(n,i,r)})},MT=b.createContext({}),JY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ZY=TT(function(t){return JY.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),eX=ZY,tX=function(e){return e!=="theme"},A5=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?eX:tX},P5=function(e,n,r){var i;if(n){var a=n.shouldForwardProp;i=e.__emotion_forwardProp&&a?function(l){return e.__emotion_forwardProp(l)&&a(l)}:a}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},nX=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return PT(n,r,i),XY(function(){return UY(n,r,i)}),null},rX=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,a,l;n!==void 0&&(a=n.label,l=n.target);var d=P5(e,n,r),u=d||A5(i),m=!u("as");return function(){var g=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&h.push("label:"+a+";"),g[0]==null||g[0].raw===void 0)h.push.apply(h,g);else{var y=g[0];h.push(y[0]);for(var w=g.length,S=1;S<w;S++)h.push(g[S],y[S])}var N=QY(function(_,D,A){var L=m&&_.as||i,I="",F=[],R=_;if(_.theme==null){R={};for(var E in _)R[E]=_[E];R.theme=b.useContext(MT)}typeof _.className=="string"?I=$Y(D.registered,F,_.className):_.className!=null&&(I=_.className+" ");var M=RT(h.concat(F),D.registered,R);I+=D.key+"-"+M.name,l!==void 0&&(I+=" "+l);var O=m&&d===void 0?A5(L):u,j={};for(var U in _)m&&U==="as"||O(U)&&(j[U]=_[U]);return j.className=I,A&&(j.ref=A),b.createElement(b.Fragment,null,b.createElement(nX,{cache:D,serialized:M,isStringTag:typeof L=="string"}),b.createElement(L,j))});return N.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",N.defaultProps=e.defaultProps,N.__emotion_real=N,N.__emotion_base=i,N.__emotion_styles=h,N.__emotion_forwardProp=d,Object.defineProperty(N,"toString",{value:function(){return"."+l}}),N.withComponent=function(_,D){var A=t(_,a1({},n,D,{shouldForwardProp:P5(N,D,!0)}));return A.apply(void 0,h)},N}},sX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],c1=rX.bind(null);sX.forEach(function(t){c1[t]=c1(t)});function DT(t,e){return c1(t,e)}function iX(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const I5=[];function Gd(t){return I5[0]=t,RT(I5)}const aX=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function oX(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,a=aX(e),l=Object.keys(a);function d(y){return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n})`}function u(y){return`@media (max-width:${(typeof e[y]=="number"?e[y]:y)-r/100}${n})`}function m(y,w){const S=l.indexOf(w);return`@media (min-width:${typeof e[y]=="number"?e[y]:y}${n}) and (max-width:${(S!==-1&&typeof e[l[S]]=="number"?e[l[S]]:w)-r/100}${n})`}function g(y){return l.indexOf(y)+1<l.length?m(y,l[l.indexOf(y)+1]):d(y)}function h(y){const w=l.indexOf(y);return w===0?d(l[1]):w===l.length-1?u(l[w]):m(y,l[l.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:l,values:a,up:d,down:u,between:m,only:g,not:h,unit:n,...i}}const lX={borderRadius:4};function OT(t=8,e=jw({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(a=>{const l=e(a);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function cX(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return n.palette.mode===t?e:{}}function Cw(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:a={},...l}=t,d=oX(n),u=OT(i);let m=la({breakpoints:d,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...lX,...a}},l);return m=wK(m),m.applyStyles=cX,m=e.reduce((g,h)=>la(g,h),m),m.unstable_sxConfig={...sp,...l==null?void 0:l.unstable_sxConfig},m.unstable_sx=function(h){return iu({sx:h,theme:this})},m}function dX(t){return Object.keys(t).length===0}function uX(t=null){const e=b.useContext(MT);return!e||dX(e)?t:e}const hX=Cw();function fX(t=hX){return uX(t)}const R5=t=>t,mX=()=>{let t=R5;return{configure(e){t=e},generate(e){return t(e)},reset(){t=R5}}},VT=mX();function pX(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,a=DT("div",{shouldForwardProp:d=>d!=="theme"&&d!=="sx"&&d!=="as"})(iu);return b.forwardRef(function(u,m){const g=fX(n),{className:h,component:y="div",...w}=dY(u);return s.jsx(a,{as:y,ref:m,className:Nl(h,i?i(r):r),theme:e&&g[e]||g,...w})})}const gX={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function zT(t,e,n="Mui"){const r=gX[e];return r?`${n}-${r}`:`${VT.generate(t)}-${e}`}function FT(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=zT(t,i,n)}),r}function $T(t){const{variants:e,...n}=t,r={variants:e,style:Gd(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=Gd(i.style))}),r}const xX=Cw();function Dv(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function zd(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function yX(t){return t?(e,n)=>n[t]:null}function vX(t,e,n){t.theme=jX(t.theme)?n:t.theme[e]||t.theme}function Xg(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>Xg(t,i,n));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=n?zd(r.style,n):r.style;else{const{variants:a,...l}=r;i=n?zd(Gd(l),n):l}return UT(t,r.variants,[i],n)}return r!=null&&r.isProcessed?n?zd(Gd(r.style),n):r.style:n?zd(Gd(r),n):r}function UT(t,e,n=[],r=void 0){var a;let i;e:for(let l=0;l<e.length;l+=1){const d=e[l];if(typeof d.props=="function"){if(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),!d.props(i))continue}else for(const u in d.props)if(t[u]!==d.props[u]&&((a=t.ownerState)==null?void 0:a[u])!==d.props[u])continue e;typeof d.style=="function"?(i??(i={...t,...t.ownerState,ownerState:t.ownerState}),n.push(r?zd(Gd(d.style(i)),r):d.style(i))):n.push(r?zd(Gd(d.style),r):d.style)}return n}function bX(t={}){const{themeId:e,defaultTheme:n=xX,rootShouldForwardProp:r=Dv,slotShouldForwardProp:i=Dv}=t;function a(d){vX(d,e,n)}return(d,u={})=>{iX(d,R=>R.filter(E=>E!==iu));const{name:m,slot:g,skipVariantsResolver:h,skipSx:y,overridesResolver:w=yX(NX(g)),...S}=u,N=m&&m.startsWith("Mui")||g?"components":"custom",_=h!==void 0?h:g&&g!=="Root"&&g!=="root"||!1,D=y||!1;let A=Dv;g==="Root"||g==="root"?A=r:g?A=i:kX(d)&&(A=void 0);const L=DT(d,{shouldForwardProp:A,label:wX(),...S}),I=R=>{if(R.__emotion_real===R)return R;if(typeof R=="function")return function(M){return Xg(M,R,M.theme.modularCssLayers?N:void 0)};if(Mo(R)){const E=$T(R);return function(O){return E.variants?Xg(O,E,O.theme.modularCssLayers?N:void 0):O.theme.modularCssLayers?zd(E.style,N):E.style}}return R},F=(...R)=>{const E=[],M=R.map(I),O=[];if(E.push(a),m&&w&&O.push(function(V){var we,Z;const X=(Z=(we=V.theme.components)==null?void 0:we[m])==null?void 0:Z.styleOverrides;if(!X)return null;const ne={};for(const le in X)ne[le]=Xg(V,X[le],V.theme.modularCssLayers?"theme":void 0);return w(V,ne)}),m&&!_&&O.push(function(V){var ne,we;const K=V.theme,X=(we=(ne=K==null?void 0:K.components)==null?void 0:ne[m])==null?void 0:we.variants;return X?UT(V,X,[],V.theme.modularCssLayers?"theme":void 0):null}),D||O.push(iu),Array.isArray(M[0])){const H=M.shift(),V=new Array(E.length).fill(""),K=new Array(O.length).fill("");let X;X=[...V,...H,...K],X.raw=[...V,...H.raw,...K],E.unshift(X)}const j=[...E,...M,...O],U=L(...j);return d.muiName&&(U.muiName=d.muiName),U};return L.withConfig&&(F.withConfig=L.withConfig),F}}function wX(t,e){return void 0}function jX(t){for(const e in t)return!1;return!0}function kX(t){return typeof t=="string"&&t.charCodeAt(0)>96}function NX(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function d1(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const a=i;if(a==="components"||a==="slots")r[a]={...t[a],...r[a]};else if(a==="componentsProps"||a==="slotProps"){const l=t[a],d=e[a];if(!d)r[a]=l||{};else if(!l)r[a]=d;else{r[a]={...d};for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u)){const m=u;r[a][m]=d1(l[m],d[m],n)}}}else a==="className"&&n&&e.className?r.className=Nl(t==null?void 0:t.className,e==null?void 0:e.className):a==="style"&&n&&e.style?r.style={...t==null?void 0:t.style,...e==null?void 0:e.style}:r[a]===void 0&&(r[a]=t[a])}return r}const _X=b.createContext(void 0);function SX(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?d1(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?d1(i,r,e.components.mergeClassNameAndStyle):r}function CX({props:t,name:e}){const n=b.useContext(_X);return SX({props:t,name:e,theme:{components:n}})}const L5={theme:void 0};function EX(t){let e,n;return function(i){let a=e;return(a===void 0||i.theme!==n)&&(L5.theme=i.theme,a=$T(t(L5)),e=a,n=i.theme),a}}function TX(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const M5=(t,e,n,r=[])=>{let i=t;e.forEach((a,l)=>{l===e.length-1?Array.isArray(i)?i[Number(a)]=n:i&&typeof i=="object"&&(i[a]=n):i&&typeof i=="object"&&(i[a]||(i[a]=r.includes(a)?[]:{}),i=i[a])})},AX=(t,e,n)=>{function r(i,a=[],l=[]){Object.entries(i).forEach(([d,u])=>{(!n||n&&!n([...a,d]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...a,d],Array.isArray(u)?[...l,d]:l):e([...a,d],u,l))})}r(t)},PX=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function Ov(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},a={},l={};return AX(t,(d,u,m)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(d,u))){const g=`--${n?`${n}-`:""}${d.join("-")}`,h=PX(d,u);Object.assign(i,{[g]:h}),M5(a,d,`var(${g})`,m),M5(l,d,`var(${g}, ${h})`,m)}},d=>d[0]==="vars"),{css:i,vars:a,varsWithDefaults:l}}function IX(t,e={}){const{getSelector:n=_,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:a={},components:l,defaultColorScheme:d="light",...u}=t,{vars:m,css:g,varsWithDefaults:h}=Ov(u,e);let y=h;const w={},{[d]:S,...N}=a;if(Object.entries(N||{}).forEach(([L,I])=>{const{vars:F,css:R,varsWithDefaults:E}=Ov(I,e);y=la(y,E),w[L]={css:R,vars:F}}),S){const{css:L,vars:I,varsWithDefaults:F}=Ov(S,e);y=la(y,F),w[d]={css:L,vars:I}}function _(L,I){var R,E;let F=i;if(i==="class"&&(F=".%s"),i==="data"&&(F="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(F=`[${i}="%s"]`),L){if(F==="media")return t.defaultColorScheme===L?":root":{[`@media (prefers-color-scheme: ${((E=(R=a[L])==null?void 0:R.palette)==null?void 0:E.mode)||L})`]:{":root":I}};if(F)return t.defaultColorScheme===L?`:root, ${F.replace("%s",String(L))}`:F.replace("%s",String(L))}return":root"}return{vars:y,generateThemeVars:()=>{let L={...m};return Object.entries(w).forEach(([,{vars:I}])=>{L=la(L,I)}),L},generateStyleSheets:()=>{var M,O;const L=[],I=t.defaultColorScheme||"light";function F(j,U){Object.keys(U).length&&L.push(typeof j=="string"?{[j]:{...U}}:j)}F(n(void 0,{...g}),g);const{[I]:R,...E}=w;if(R){const{css:j}=R,U=(O=(M=a[I])==null?void 0:M.palette)==null?void 0:O.mode,H=!r&&U?{colorScheme:U,...j}:{...j};F(n(I,{...H}),H)}return Object.entries(E).forEach(([j,{css:U}])=>{var K,X;const H=(X=(K=a[j])==null?void 0:K.palette)==null?void 0:X.mode,V=!r&&H?{colorScheme:H,...U}:{...U};F(n(j,{...V}),V)}),L}}}function RX(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const Dm={black:"#000",white:"#fff"},LX={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$u={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Uu={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Sf={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Bu={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Wu={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Hu={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function BT(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Dm.white,default:Dm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const MX=BT();function WT(){return{text:{primary:Dm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Dm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const D5=WT();function O5(t,e,n,r){const i=r.light||r,a=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Im(t.main,i):e==="dark"&&(t.dark=Pm(t.main,a)))}function DX(t="light"){return t==="dark"?{main:Bu[200],light:Bu[50],dark:Bu[400]}:{main:Bu[700],light:Bu[400],dark:Bu[800]}}function OX(t="light"){return t==="dark"?{main:$u[200],light:$u[50],dark:$u[400]}:{main:$u[500],light:$u[300],dark:$u[700]}}function VX(t="light"){return t==="dark"?{main:Uu[500],light:Uu[300],dark:Uu[700]}:{main:Uu[700],light:Uu[400],dark:Uu[800]}}function zX(t="light"){return t==="dark"?{main:Wu[400],light:Wu[300],dark:Wu[700]}:{main:Wu[700],light:Wu[500],dark:Wu[900]}}function FX(t="light"){return t==="dark"?{main:Hu[400],light:Hu[300],dark:Hu[700]}:{main:Hu[800],light:Hu[500],dark:Hu[900]}}function $X(t="light"){return t==="dark"?{main:Sf[400],light:Sf[300],dark:Sf[700]}:{main:"#ed6c02",light:Sf[500],dark:Sf[900]}}function Ew(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,a=t.primary||DX(e),l=t.secondary||OX(e),d=t.error||VX(e),u=t.info||zX(e),m=t.success||FX(e),g=t.warning||$X(e);function h(N){return ZG(N,D5.text.primary)>=n?D5.text.primary:MX.text.primary}const y=({color:N,name:_,mainShade:D=500,lightShade:A=300,darkShade:L=700})=>{if(N={...N},!N.main&&N[D]&&(N.main=N[D]),!N.hasOwnProperty("main"))throw new Error(su(11,_?` (${_})`:"",D));if(typeof N.main!="string")throw new Error(su(12,_?` (${_})`:"",JSON.stringify(N.main)));return O5(N,"light",A,r),O5(N,"dark",L,r),N.contrastText||(N.contrastText=h(N.main)),N};let w;return e==="light"?w=BT():e==="dark"&&(w=WT()),la({common:{...Dm},mode:e,primary:y({color:a,name:"primary"}),secondary:y({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:d,name:"error"}),warning:y({color:g,name:"warning"}),info:y({color:u,name:"info"}),success:y({color:m,name:"success"}),grey:LX,contrastThreshold:n,getContrastText:h,augmentColor:y,tonalOffset:r,...w},i)}function UX(t){const e={};return Object.entries(t).forEach(r=>{const[i,a]=r;typeof a=="object"&&(e[i]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function BX(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function WX(t){return Math.round(t*1e5)/1e5}const V5={textTransform:"uppercase"},z5='"Roboto", "Helvetica", "Arial", sans-serif';function HX(t,e){const{fontFamily:n=z5,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:l=500,fontWeightBold:d=700,htmlFontSize:u=16,allVariants:m,pxToRem:g,...h}=typeof e=="function"?e(t):e,y=r/14,w=g||(_=>`${_/u*y}rem`),S=(_,D,A,L,I)=>({fontFamily:n,fontWeight:_,fontSize:w(D),lineHeight:A,...n===z5?{letterSpacing:`${WX(L/D)}em`}:{},...I,...m}),N={h1:S(i,96,1.167,-1.5),h2:S(i,60,1.2,-.5),h3:S(a,48,1.167,0),h4:S(a,34,1.235,.25),h5:S(a,24,1.334,0),h6:S(l,20,1.6,.15),subtitle1:S(a,16,1.75,.15),subtitle2:S(l,14,1.57,.1),body1:S(a,16,1.5,.15),body2:S(a,14,1.43,.15),button:S(l,14,1.75,.4,V5),caption:S(a,12,1.66,.4),overline:S(a,12,2.66,1,V5),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return la({htmlFontSize:u,pxToRem:w,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:l,fontWeightBold:d,...N},h,{clone:!1})}const qX=.2,GX=.14,KX=.12;function Ar(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${qX})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${GX})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${KX})`].join(",")}const YX=["none",Ar(0,2,1,-1,0,1,1,0,0,1,3,0),Ar(0,3,1,-2,0,2,2,0,0,1,5,0),Ar(0,3,3,-2,0,3,4,0,0,1,8,0),Ar(0,2,4,-1,0,4,5,0,0,1,10,0),Ar(0,3,5,-1,0,5,8,0,0,1,14,0),Ar(0,3,5,-1,0,6,10,0,0,1,18,0),Ar(0,4,5,-2,0,7,10,1,0,2,16,1),Ar(0,5,5,-3,0,8,10,1,0,3,14,2),Ar(0,5,6,-3,0,9,12,1,0,3,16,2),Ar(0,6,6,-3,0,10,14,1,0,4,18,3),Ar(0,6,7,-4,0,11,15,1,0,4,20,3),Ar(0,7,8,-4,0,12,17,2,0,5,22,4),Ar(0,7,8,-4,0,13,19,2,0,5,24,4),Ar(0,7,9,-4,0,14,21,2,0,5,26,4),Ar(0,8,9,-5,0,15,22,2,0,6,28,5),Ar(0,8,10,-5,0,16,24,2,0,6,30,5),Ar(0,8,11,-5,0,17,26,2,0,6,32,5),Ar(0,9,11,-5,0,18,28,2,0,7,34,6),Ar(0,9,12,-6,0,19,29,2,0,7,36,6),Ar(0,10,13,-6,0,20,31,3,0,8,38,7),Ar(0,10,13,-6,0,21,33,3,0,8,40,7),Ar(0,10,14,-6,0,22,35,3,0,8,42,7),Ar(0,11,14,-7,0,23,36,3,0,9,44,8),Ar(0,11,15,-7,0,24,38,3,0,9,46,8)],XX={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},QX={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function F5(t){return`${Math.round(t)}ms`}function JX(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function ZX(t){const e={...XX,...t.easing},n={...QX,...t.duration};return{getAutoHeightDuration:JX,create:(i=["all"],a={})=>{const{duration:l=n.standard,easing:d=e.easeInOut,delay:u=0,...m}=a;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof l=="string"?l:F5(l)} ${d} ${typeof u=="string"?u:F5(u)}`).join(",")},...t,easing:e,duration:n}}const eQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function tQ(t){return Mo(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function HT(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let a=0;a<i.length;a++){const[l,d]=i[a];!tQ(d)||l.startsWith("unstable_")?delete r[l]:Mo(d)&&(r[l]={...d},n(r[l]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function u1(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:a={},transitions:l={},typography:d={},shape:u,...m}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(su(20));const g=Ew(a),h=Cw(t);let y=la(h,{mixins:BX(h.breakpoints,r),palette:g,shadows:YX.slice(),typography:HX(g,d),transitions:ZX(l),zIndex:{...eQ}});return y=la(y,m),y=e.reduce((w,S)=>la(w,S),y),y.unstable_sxConfig={...sp,...m==null?void 0:m.unstable_sxConfig},y.unstable_sx=function(S){return iu({sx:S,theme:this})},y.toRuntimeSource=HT,y}function nQ(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const rQ=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=nQ(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function qT(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function GT(t){return t==="dark"?rQ:[]}function sQ(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,a=Ew(e);return{palette:a,opacity:{...qT(a.mode),...n},overlays:r||GT(a.mode),...i}}function iQ(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const aQ=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],oQ=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let a=i;if(i==="class"&&(a=".%s"),i==="data"&&(a="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(a=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const l={};return aQ(t.cssVarPrefix).forEach(d=>{l[d]=n[d],delete n[d]}),a==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:l}}:a?{[a.replace("%s",e)]:l,[`${r}, ${a.replace("%s",e)}`]:n}:{[r]:{...n,...l}}}if(a&&a!=="media")return`${r}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(a)return a.replace("%s",String(e))}return r};function lQ(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Oe(t,e,n){!t[e]&&n&&(t[e]=n)}function Df(t){return typeof t!="string"||!t.startsWith("hsl")?t:gT(t)}function gl(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Mf(Df(t[e])))}function cQ(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Po=t=>{try{return t()}catch{}},dQ=(t="mui")=>TX(t);function Vv(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=sQ({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:a,...l}=u1({...n,palette:{mode:i,...e==null?void 0:e.palette}});return t[r]={...e,palette:a,opacity:{...qT(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||GT(i)},l}function uQ(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:l=iQ,colorSchemeSelector:d=n.light&&n.dark?"media":void 0,rootSelector:u=":root",...m}=t,g=Object.keys(n)[0],h=r||(n.light&&g!=="light"?"light":g),y=dQ(a),{[h]:w,light:S,dark:N,..._}=n,D={..._};let A=w;if((h==="dark"&&!("dark"in n)||h==="light"&&!("light"in n))&&(A=!0),!A)throw new Error(su(21,h));const L=Vv(D,A,m,h);S&&!D.light&&Vv(D,S,void 0,"light"),N&&!D.dark&&Vv(D,N,void 0,"dark");let I={defaultColorScheme:h,...L,cssVarPrefix:a,colorSchemeSelector:d,rootSelector:u,getCssVar:y,colorSchemes:D,font:{...UX(L.typography),...L.font},spacing:cQ(m.spacing)};Object.keys(I.colorSchemes).forEach(O=>{const j=I.colorSchemes[O].palette,U=H=>{const V=H.split("-"),K=V[1],X=V[2];return y(H,j[K][X])};if(j.mode==="light"&&(Oe(j.common,"background","#fff"),Oe(j.common,"onBackground","#000")),j.mode==="dark"&&(Oe(j.common,"background","#000"),Oe(j.common,"onBackground","#fff")),lQ(j,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),j.mode==="light"){Oe(j.Alert,"errorColor",pr(j.error.light,.6)),Oe(j.Alert,"infoColor",pr(j.info.light,.6)),Oe(j.Alert,"successColor",pr(j.success.light,.6)),Oe(j.Alert,"warningColor",pr(j.warning.light,.6)),Oe(j.Alert,"errorFilledBg",U("palette-error-main")),Oe(j.Alert,"infoFilledBg",U("palette-info-main")),Oe(j.Alert,"successFilledBg",U("palette-success-main")),Oe(j.Alert,"warningFilledBg",U("palette-warning-main")),Oe(j.Alert,"errorFilledColor",Po(()=>j.getContrastText(j.error.main))),Oe(j.Alert,"infoFilledColor",Po(()=>j.getContrastText(j.info.main))),Oe(j.Alert,"successFilledColor",Po(()=>j.getContrastText(j.success.main))),Oe(j.Alert,"warningFilledColor",Po(()=>j.getContrastText(j.warning.main))),Oe(j.Alert,"errorStandardBg",gr(j.error.light,.9)),Oe(j.Alert,"infoStandardBg",gr(j.info.light,.9)),Oe(j.Alert,"successStandardBg",gr(j.success.light,.9)),Oe(j.Alert,"warningStandardBg",gr(j.warning.light,.9)),Oe(j.Alert,"errorIconColor",U("palette-error-main")),Oe(j.Alert,"infoIconColor",U("palette-info-main")),Oe(j.Alert,"successIconColor",U("palette-success-main")),Oe(j.Alert,"warningIconColor",U("palette-warning-main")),Oe(j.AppBar,"defaultBg",U("palette-grey-100")),Oe(j.Avatar,"defaultBg",U("palette-grey-400")),Oe(j.Button,"inheritContainedBg",U("palette-grey-300")),Oe(j.Button,"inheritContainedHoverBg",U("palette-grey-A100")),Oe(j.Chip,"defaultBorder",U("palette-grey-400")),Oe(j.Chip,"defaultAvatarColor",U("palette-grey-700")),Oe(j.Chip,"defaultIconColor",U("palette-grey-700")),Oe(j.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Oe(j.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Oe(j.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Oe(j.LinearProgress,"primaryBg",gr(j.primary.main,.62)),Oe(j.LinearProgress,"secondaryBg",gr(j.secondary.main,.62)),Oe(j.LinearProgress,"errorBg",gr(j.error.main,.62)),Oe(j.LinearProgress,"infoBg",gr(j.info.main,.62)),Oe(j.LinearProgress,"successBg",gr(j.success.main,.62)),Oe(j.LinearProgress,"warningBg",gr(j.warning.main,.62)),Oe(j.Skeleton,"bg",`rgba(${U("palette-text-primaryChannel")} / 0.11)`),Oe(j.Slider,"primaryTrack",gr(j.primary.main,.62)),Oe(j.Slider,"secondaryTrack",gr(j.secondary.main,.62)),Oe(j.Slider,"errorTrack",gr(j.error.main,.62)),Oe(j.Slider,"infoTrack",gr(j.info.main,.62)),Oe(j.Slider,"successTrack",gr(j.success.main,.62)),Oe(j.Slider,"warningTrack",gr(j.warning.main,.62));const H=wg(j.background.default,.8);Oe(j.SnackbarContent,"bg",H),Oe(j.SnackbarContent,"color",Po(()=>j.getContrastText(H))),Oe(j.SpeedDialAction,"fabHoverBg",wg(j.background.paper,.15)),Oe(j.StepConnector,"border",U("palette-grey-400")),Oe(j.StepContent,"border",U("palette-grey-400")),Oe(j.Switch,"defaultColor",U("palette-common-white")),Oe(j.Switch,"defaultDisabledColor",U("palette-grey-100")),Oe(j.Switch,"primaryDisabledColor",gr(j.primary.main,.62)),Oe(j.Switch,"secondaryDisabledColor",gr(j.secondary.main,.62)),Oe(j.Switch,"errorDisabledColor",gr(j.error.main,.62)),Oe(j.Switch,"infoDisabledColor",gr(j.info.main,.62)),Oe(j.Switch,"successDisabledColor",gr(j.success.main,.62)),Oe(j.Switch,"warningDisabledColor",gr(j.warning.main,.62)),Oe(j.TableCell,"border",gr(bg(j.divider,1),.88)),Oe(j.Tooltip,"bg",bg(j.grey[700],.92))}if(j.mode==="dark"){Oe(j.Alert,"errorColor",gr(j.error.light,.6)),Oe(j.Alert,"infoColor",gr(j.info.light,.6)),Oe(j.Alert,"successColor",gr(j.success.light,.6)),Oe(j.Alert,"warningColor",gr(j.warning.light,.6)),Oe(j.Alert,"errorFilledBg",U("palette-error-dark")),Oe(j.Alert,"infoFilledBg",U("palette-info-dark")),Oe(j.Alert,"successFilledBg",U("palette-success-dark")),Oe(j.Alert,"warningFilledBg",U("palette-warning-dark")),Oe(j.Alert,"errorFilledColor",Po(()=>j.getContrastText(j.error.dark))),Oe(j.Alert,"infoFilledColor",Po(()=>j.getContrastText(j.info.dark))),Oe(j.Alert,"successFilledColor",Po(()=>j.getContrastText(j.success.dark))),Oe(j.Alert,"warningFilledColor",Po(()=>j.getContrastText(j.warning.dark))),Oe(j.Alert,"errorStandardBg",pr(j.error.light,.9)),Oe(j.Alert,"infoStandardBg",pr(j.info.light,.9)),Oe(j.Alert,"successStandardBg",pr(j.success.light,.9)),Oe(j.Alert,"warningStandardBg",pr(j.warning.light,.9)),Oe(j.Alert,"errorIconColor",U("palette-error-main")),Oe(j.Alert,"infoIconColor",U("palette-info-main")),Oe(j.Alert,"successIconColor",U("palette-success-main")),Oe(j.Alert,"warningIconColor",U("palette-warning-main")),Oe(j.AppBar,"defaultBg",U("palette-grey-900")),Oe(j.AppBar,"darkBg",U("palette-background-paper")),Oe(j.AppBar,"darkColor",U("palette-text-primary")),Oe(j.Avatar,"defaultBg",U("palette-grey-600")),Oe(j.Button,"inheritContainedBg",U("palette-grey-800")),Oe(j.Button,"inheritContainedHoverBg",U("palette-grey-700")),Oe(j.Chip,"defaultBorder",U("palette-grey-700")),Oe(j.Chip,"defaultAvatarColor",U("palette-grey-300")),Oe(j.Chip,"defaultIconColor",U("palette-grey-300")),Oe(j.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Oe(j.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Oe(j.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Oe(j.LinearProgress,"primaryBg",pr(j.primary.main,.5)),Oe(j.LinearProgress,"secondaryBg",pr(j.secondary.main,.5)),Oe(j.LinearProgress,"errorBg",pr(j.error.main,.5)),Oe(j.LinearProgress,"infoBg",pr(j.info.main,.5)),Oe(j.LinearProgress,"successBg",pr(j.success.main,.5)),Oe(j.LinearProgress,"warningBg",pr(j.warning.main,.5)),Oe(j.Skeleton,"bg",`rgba(${U("palette-text-primaryChannel")} / 0.13)`),Oe(j.Slider,"primaryTrack",pr(j.primary.main,.5)),Oe(j.Slider,"secondaryTrack",pr(j.secondary.main,.5)),Oe(j.Slider,"errorTrack",pr(j.error.main,.5)),Oe(j.Slider,"infoTrack",pr(j.info.main,.5)),Oe(j.Slider,"successTrack",pr(j.success.main,.5)),Oe(j.Slider,"warningTrack",pr(j.warning.main,.5));const H=wg(j.background.default,.98);Oe(j.SnackbarContent,"bg",H),Oe(j.SnackbarContent,"color",Po(()=>j.getContrastText(H))),Oe(j.SpeedDialAction,"fabHoverBg",wg(j.background.paper,.15)),Oe(j.StepConnector,"border",U("palette-grey-600")),Oe(j.StepContent,"border",U("palette-grey-600")),Oe(j.Switch,"defaultColor",U("palette-grey-300")),Oe(j.Switch,"defaultDisabledColor",U("palette-grey-600")),Oe(j.Switch,"primaryDisabledColor",pr(j.primary.main,.55)),Oe(j.Switch,"secondaryDisabledColor",pr(j.secondary.main,.55)),Oe(j.Switch,"errorDisabledColor",pr(j.error.main,.55)),Oe(j.Switch,"infoDisabledColor",pr(j.info.main,.55)),Oe(j.Switch,"successDisabledColor",pr(j.success.main,.55)),Oe(j.Switch,"warningDisabledColor",pr(j.warning.main,.55)),Oe(j.TableCell,"border",pr(bg(j.divider,1),.68)),Oe(j.Tooltip,"bg",bg(j.grey[700],.92))}gl(j.background,"default"),gl(j.background,"paper"),gl(j.common,"background"),gl(j.common,"onBackground"),gl(j,"divider"),Object.keys(j).forEach(H=>{const V=j[H];H!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&Oe(j[H],"mainChannel",Mf(Df(V.main))),V.light&&Oe(j[H],"lightChannel",Mf(Df(V.light))),V.dark&&Oe(j[H],"darkChannel",Mf(Df(V.dark))),V.contrastText&&Oe(j[H],"contrastTextChannel",Mf(Df(V.contrastText))),H==="text"&&(gl(j[H],"primary"),gl(j[H],"secondary")),H==="action"&&(V.active&&gl(j[H],"active"),V.selected&&gl(j[H],"selected")))})}),I=e.reduce((O,j)=>la(O,j),I);const F={prefix:a,disableCssColorScheme:i,shouldSkipGeneratingVar:l,getSelector:oQ(I)},{vars:R,generateThemeVars:E,generateStyleSheets:M}=IX(I,F);return I.vars=R,Object.entries(I.colorSchemes[I.defaultColorScheme]).forEach(([O,j])=>{I[O]=j}),I.generateThemeVars=E,I.generateStyleSheets=M,I.generateSpacing=function(){return OT(m.spacing,jw(this))},I.getColorSchemeSelector=RX(d),I.spacing=I.generateSpacing(),I.shouldSkipGeneratingVar=l,I.unstable_sxConfig={...sp,...m==null?void 0:m.unstable_sxConfig},I.unstable_sx=function(j){return iu({sx:j,theme:this})},I.toRuntimeSource=HT,I}function $5(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:Ew({...n===!0?{}:n.palette,mode:e})})}function KT(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:a=n==null?void 0:n.mode,...l}=t,d=a||"light",u=i==null?void 0:i[d],m={...i,...n?{[d]:{...typeof u!="boolean"&&u,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return u1(t,...e);let g=n;"palette"in t||m[d]&&(m[d]!==!0?g=m[d].palette:d==="dark"&&(g={mode:"dark"}));const h=u1({...t,palette:g},...e);return h.defaultColorScheme=d,h.colorSchemes=m,h.palette.mode==="light"&&(h.colorSchemes.light={...m.light!==!0&&m.light,palette:h.palette},$5(h,"dark",m.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...m.dark!==!0&&m.dark,palette:h.palette},$5(h,"light",m.light)),h}return!n&&!("light"in m)&&d==="light"&&(m.light=!0),uQ({...l,colorSchemes:m,defaultColorScheme:d,...typeof r!="boolean"&&r},...e)}const hQ=KT(),YT="$$material";function Tw(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const fQ=t=>Tw(t)&&t!=="classes",uu=bX({themeId:YT,defaultTheme:hQ,rootShouldForwardProp:fQ}),Hh=EX;function mQ(t){return CX(t)}const pQ=t=>!t||!qg(t);function gQ(t){return typeof t.main=="string"}function xQ(t,e=[]){if(!gQ(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Aw(t=[]){return([,e])=>e&&xQ(e,t)}function yQ(t){return zT("MuiSlider",t)}const Sa=FT("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),vQ=t=>{const{open:e}=t;return{offset:Nl(e&&Sa.valueLabelOpen),circle:Sa.valueLabelCircle,label:Sa.valueLabelLabel}};function bQ(t){const{children:e,className:n,value:r}=t,i=vQ(t);return e?b.cloneElement(e,{className:e.props.className},s.jsxs(b.Fragment,{children:[e.props.children,s.jsx("span",{className:Nl(i.offset,n),"aria-hidden":!0,children:s.jsx("span",{className:i.circle,children:s.jsx("span",{className:i.label,children:r})})})]})):null}function U5(t){return t}const wQ=uu("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Oo(n.color)}`],n.size!=="medium"&&e[`size${Oo(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(Hh(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Sa.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Sa.dragging}`]:{[`& .${Sa.thumb}, & .${Sa.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(Aw()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),jQ=uu("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),kQ=uu("span",{name:"MuiSlider",slot:"Track"})(Hh(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(Aw()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:Im(t.palette[e].main,.62),borderColor:Im(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:Pm(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:Pm(t.palette[e].main,.5)})}}}))]}))),NQ=uu("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${Oo(n.color)}`],n.size!=="medium"&&e[`thumbSize${Oo(n.size)}`]]}})(Hh(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Sa.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(Aw()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Sa.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${i1(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Sa.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${i1(t.palette[e].main,.16)}`}}}}))]}))),_Q=uu(bQ,{name:"MuiSlider",slot:"ValueLabel"})(Hh(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Sa.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Sa.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),SQ=uu("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>Tw(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(Hh(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),CQ=uu("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>Tw(t)&&t!=="markLabelActive"})(Hh(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),EQ=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:a,classes:l,color:d,size:u}=t,m={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",a==="inverted"&&"trackInverted",a===!1&&"trackFalse",d&&`color${Oo(d)}`,u&&`size${Oo(u)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",u&&`thumbSize${Oo(u)}`,d&&`thumbColor${Oo(d)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return XG(m,yQ,l)},TQ=({children:t})=>t,AQ=b.forwardRef(function(e,n){const r=mQ({props:e,name:"MuiSlider"}),i=nK(),{"aria-label":a,"aria-valuetext":l,"aria-labelledby":d,component:u="span",components:m={},componentsProps:g={},color:h="primary",classes:y,className:w,disableSwap:S=!1,disabled:N=!1,getAriaLabel:_,getAriaValueText:D,marks:A=!1,max:L=100,min:I=0,name:F,onChange:R,onChangeCommitted:E,orientation:M="horizontal",shiftStep:O=10,size:j="medium",step:U=1,scale:H=U5,slotProps:V,slots:K,tabIndex:X,track:ne="normal",value:we,valueLabelDisplay:Z="off",valueLabelFormat:le=U5,...re}=r,B={...r,isRtl:i,max:L,min:I,classes:y,disabled:N,disableSwap:S,orientation:M,marks:A,color:h,size:j,step:U,shiftStep:O,scale:H,track:ne,valueLabelDisplay:Z,valueLabelFormat:le},{axisProps:ce,getRootProps:Se,getHiddenInputProps:Ve,getThumbProps:$e,open:Ke,active:Ye,axis:lt,focusedThumbIndex:Re,range:Ct,dragging:Ue,marks:ot,values:ct,trackOffset:it,trackLeap:Lt,getThumbStyle:Bt}=gK({...B,rootRef:n});B.marked=ot.length>0&&ot.some(Ce=>Ce.label),B.dragging=Ue,B.focusedThumbIndex=Re;const Ge=EQ(B),mn=(K==null?void 0:K.root)??m.Root??wQ,Wt=(K==null?void 0:K.rail)??m.Rail??jQ,an=(K==null?void 0:K.track)??m.Track??kQ,At=(K==null?void 0:K.thumb)??m.Thumb??NQ,bn=(K==null?void 0:K.valueLabel)??m.ValueLabel??_Q,Ht=(K==null?void 0:K.mark)??m.Mark??SQ,ze=(K==null?void 0:K.markLabel)??m.MarkLabel??CQ,Y=(K==null?void 0:K.input)??m.Input??"input",ie=(V==null?void 0:V.root)??g.root,pe=(V==null?void 0:V.rail)??g.rail,he=(V==null?void 0:V.track)??g.track,He=(V==null?void 0:V.thumb)??g.thumb,ge=(V==null?void 0:V.valueLabel)??g.valueLabel,Ae=(V==null?void 0:V.mark)??g.mark,Be=(V==null?void 0:V.markLabel)??g.markLabel,Ze=(V==null?void 0:V.input)??g.input,Rt=mc({elementType:mn,getSlotProps:Se,externalSlotProps:ie,externalForwardedProps:re,additionalProps:{...pQ(mn)&&{as:u}},ownerState:{...B,...ie==null?void 0:ie.ownerState},className:[Ge.root,w]}),Ie=mc({elementType:Wt,externalSlotProps:pe,ownerState:B,className:Ge.rail}),gt=mc({elementType:an,externalSlotProps:he,additionalProps:{style:{...ce[lt].offset(it),...ce[lt].leap(Lt)}},ownerState:{...B,...he==null?void 0:he.ownerState},className:Ge.track}),ft=mc({elementType:At,getSlotProps:$e,externalSlotProps:He,ownerState:{...B,...He==null?void 0:He.ownerState},className:Ge.thumb}),Te=mc({elementType:bn,externalSlotProps:ge,ownerState:{...B,...ge==null?void 0:ge.ownerState},className:Ge.valueLabel}),nt=mc({elementType:Ht,externalSlotProps:Ae,ownerState:B,className:Ge.mark}),ut=mc({elementType:ze,externalSlotProps:Be,ownerState:B,className:Ge.markLabel}),kn=mc({elementType:Y,getSlotProps:Ve,externalSlotProps:Ze,ownerState:B});return s.jsxs(mn,{...Rt,children:[s.jsx(Wt,{...Ie}),s.jsx(an,{...gt}),ot.filter(Ce=>Ce.value>=I&&Ce.value<=L).map((Ce,yt)=>{const on=M0(Ce.value,I,L),Nn=ce[lt].offset(on);let Wn;return ne===!1?Wn=ct.includes(Ce.value):Wn=ne==="normal"&&(Ct?Ce.value>=ct[0]&&Ce.value<=ct[ct.length-1]:Ce.value<=ct[0])||ne==="inverted"&&(Ct?Ce.value<=ct[0]||Ce.value>=ct[ct.length-1]:Ce.value>=ct[0]),s.jsxs(b.Fragment,{children:[s.jsx(Ht,{"data-index":yt,...nt,...!qg(Ht)&&{markActive:Wn},style:{...Nn,...nt.style},className:Nl(nt.className,Wn&&Ge.markActive)}),Ce.label!=null?s.jsx(ze,{"aria-hidden":!0,"data-index":yt,...ut,...!qg(ze)&&{markLabelActive:Wn},style:{...Nn,...ut.style},className:Nl(Ge.markLabel,ut.className,Wn&&Ge.markLabelActive),children:Ce.label}):null]},yt)}),ct.map((Ce,yt)=>{const on=M0(Ce,I,L),Nn=ce[lt].offset(on),Wn=Z==="off"?TQ:bn;return s.jsx(Wn,{...!qg(Wn)&&{valueLabelFormat:le,valueLabelDisplay:Z,value:typeof le=="function"?le(H(Ce),yt):le,index:yt,open:Ke===yt||Ye===yt||Z==="on",disabled:N},...Te,children:s.jsx(At,{"data-index":yt,...ft,className:Nl(Ge.thumb,ft.className,Ye===yt&&Ge.active,Re===yt&&Ge.focusVisible),style:{...Nn,...Bt(yt),...ft.style},children:s.jsx(Y,{"data-index":yt,"aria-label":_?_(yt):a,"aria-valuenow":H(Ce),"aria-labelledby":d,"aria-valuetext":D?D(H(Ce),yt):l,value:ct[yt],...kn})})},yt)})]})}),PQ=FT("MuiBox",["root"]),IQ=KT(),RQ=pX({themeId:YT,defaultTheme:IQ,defaultClassName:PQ.root,generateClassName:VT.generate});function XT({filtros:t,setFiltros:e,onReset:n,visible:r,onClose:i,productosOriginales:a}){var S,N,_,D,A,L,I,F,R,E,M,O,j,U,H,V,K,X,ne,we;const[l,d]=b.useState(t),[u,m]=b.useState([]);b.useEffect(()=>{var le,re,B;const Z={...t,precio:{min:((le=t.precio)==null?void 0:le.min)??0,max:((re=t.precio)==null?void 0:re.max)>=1e6?5e4:((B=t.precio)==null?void 0:B.max)??5e4}};d(Z)},[t,r]),b.useEffect(()=>{var ce,Se,Ve;if(!a||a.length===0){m([]);return}let Z=[...a];(((ce=l.estado)==null?void 0:ce.nuevo)||((Se=l.estado)==null?void 0:Se.usado)||((Ve=l.estado)==null?void 0:Ve.usadoComoNuevo))&&(Z=Z.filter($e=>!!(l.estado.nuevo&&$e.estado==="Nuevo"||l.estado.usado&&$e.estado==="Usado"||l.estado.usadoComoNuevo&&$e.estado==="Usado como nuevo")));const re=l.precio.min!==""&&Number.isFinite(l.precio.min)?Number(l.precio.min):0,B=l.precio.max!==""&&Number.isFinite(l.precio.max)?Number(l.precio.max):1e6;Z=Z.filter($e=>{const Ke=Number($e.precio)||0;return B>=1e6?Ke>=re:Ke>=re&&Ke<=B}),m(Z)},[l,a]);const g=Z=>{const le=Z.target.value.replace(/,/g,"");(le===""||/^\d+$/.test(le))&&d(re=>({...re,precio:{...re.precio,min:le===""?0:Number(le)}}))},h=Z=>{const le=Z.target.value.replace(/,/g,"");(le===""||/^\d+$/.test(le))&&d(re=>({...re,precio:{...re.precio,max:le===""?1e6:Number(le)}}))},y=Number.isFinite((S=l.precio)==null?void 0:S.min)?l.precio.min:0,w=Number.isFinite((N=l.precio)==null?void 0:N.max)?l.precio.max:1e6;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 z-[9998] transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,style:{background:"rgba(0, 0, 0, 0.3)",backdropFilter:"blur(4px)"},onClick:i}),s.jsxs("div",{className:`fixed top-0 right-0 h-full w-80 bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 z-[9999] flex flex-col shadow-2xl transform transition-all duration-300 ${r?"translate-x-0":"translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[s.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),s.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),s.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),s.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),s.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),s.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),s.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),s.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),s.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Filtros"})]}),s.jsx("button",{onClick:i,className:"ml-auto p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all duration-200 hover:scale-110",children:s.jsx("svg",{className:"w-5 h-5 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:s.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Estado del Producto"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${(_=l.estado)!=null&&_.nuevo?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>d(Z=>{var le;return{...Z,estado:{...Z.estado,nuevo:!((le=Z.estado)!=null&&le.nuevo)}}}),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${(D=l.estado)!=null&&D.nuevo?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-600"}`,children:((A=l.estado)==null?void 0:A.nuevo)&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:`font-medium ${(L=l.estado)!=null&&L.nuevo?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:"Nuevo"})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${(I=l.estado)!=null&&I.nuevo?"bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-200":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"}`,children:(F=l.estado)!=null&&F.nuevo?"Activo":"Inactivo"})]}),s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${(R=l.estado)!=null&&R.usado?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>d(Z=>{var le;return{...Z,estado:{...Z.estado,usado:!((le=Z.estado)!=null&&le.usado)}}}),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${(E=l.estado)!=null&&E.usado?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-600"}`,children:((M=l.estado)==null?void 0:M.usado)&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:`font-medium ${(O=l.estado)!=null&&O.usado?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:"Usado"})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${(j=l.estado)!=null&&j.usado?"bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-200":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"}`,children:(U=l.estado)!=null&&U.usado?"Activo":"Inactivo"})]}),s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 hover:shadow-md ${(H=l.estado)!=null&&H.usadoComoNuevo?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>d(Z=>{var le;return{...Z,estado:{...Z.estado,usadoComoNuevo:!((le=Z.estado)!=null&&le.usadoComoNuevo)}}}),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${(V=l.estado)!=null&&V.usadoComoNuevo?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-600"}`,children:((K=l.estado)==null?void 0:K.usadoComoNuevo)&&s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("span",{className:`font-medium ${(X=l.estado)!=null&&X.usadoComoNuevo?"text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:"Usado como nuevo"})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${(ne=l.estado)!=null&&ne.usadoComoNuevo?"bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-200":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"}`,children:(we=l.estado)!=null&&we.usadoComoNuevo?"Activo":"Inactivo"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rango de Precio"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mnimo"}),s.jsx("input",{type:"text",value:y===0?"":y.toLocaleString("es-DO"),onChange:g,placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mximo"}),s.jsx("input",{type:"text",value:w>=1e6?"":w.toLocaleString("es-DO"),onChange:h,placeholder:"Sin lmite",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-white"})]})]}),s.jsx(RQ,{sx:{px:1},children:s.jsx(AQ,{value:[y,w>=1e6?5e4:w],onChange:(Z,le)=>{d(re=>({...re,precio:{min:le[0],max:le[1]>=5e4?1e6:le[1]}}))},valueLabelDisplay:"auto",min:0,max:5e4,step:500,sx:{color:"#3b82f6","& .MuiSlider-thumb":{backgroundColor:"#3b82f6"},"& .MuiSlider-track":{backgroundColor:"#3b82f6"},"& .MuiSlider-rail":{backgroundColor:"#e5e7eb"}}})}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:["RD$",y.toLocaleString("es-DO")]}),s.jsx("span",{children:w>=5e4?"RD$50,000+":`RD$${w.toLocaleString("es-DO")}`})]})]}),s.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 text-center",children:u.length===0?"No hay productos que coincidan":`${u.length} producto${u.length!==1?"s":""} encontrado${u.length!==1?"s":""}`})})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{d({estado:{},precio:{min:0,max:1e6}})},className:"flex-1 px-4 py-3 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors font-medium",children:"Limpiar"}),s.jsx("button",{onClick:()=>{e(l),i()},className:"flex-1 px-4 py-3 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors font-medium",children:"Aplicar"})]})})]})]})}function QT({onClick:t,className:e=""}){const[n,r]=b.useState(!1);return b.useEffect(()=>{const i=()=>{r(document.documentElement.classList.contains("dark")||document.documentElement.classList.contains("dark-theme"))};i();const a=new MutationObserver(i);return a.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>a.disconnect()},[]),s.jsxs("button",{onClick:t,className:`modern-btn modern-btn-filters ${e}`,"aria-label":"Abrir filtros",children:[s.jsxs("svg",{className:"modern-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[s.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),s.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),s.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),s.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),s.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),s.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),s.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),s.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),s.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]}),s.jsx("span",{className:"font-semibold tracking-wide",children:"Filtros"})]})}const bc=t=>t?t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",LQ=(t,e)=>{if(!e)return!0;const n=bc(e),r=n.split(" ").filter(Boolean),i=bc(t.nombre||""),a=bc(t.descripcion||""),l=bc(t.categoria||""),d=bc(t.empresa||t.marca||"");if(i===n||i.startsWith(n)||i.includes(n)||d.includes(n)||l.includes(n)||a.includes(n))return!0;let u=0;return r.forEach(m=>{i.includes(m)&&u++,d.includes(m)&&u++,l.includes(m)&&u++,a.includes(m)&&u++}),u>0};function MQ(){const t=uo(),{products:e,loading:n}=fw(),[r,i]=b.useState({precio:{min:0,max:1e4},estado:{nuevo:!1,usado:!1}}),[a,l]=b.useState(!1),[d,u]=b.useState(!1),[m,g]=b.useState(0),[h,y]=b.useState(!1),[w,S]=b.useState(!1);b.useEffect(()=>{const R=()=>{y(document.documentElement.classList.contains("dark")||document.documentElement.classList.contains("dark-theme"))};R();const E=new MutationObserver(R);return E.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>E.disconnect()},[]),b.useEffect(()=>{function R(){const M=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),O=M?Math.ceil(M.getBoundingClientRect().height):0;g(O),document.documentElement.style.setProperty("--topbar-height",`${O}px`)}R(),window.addEventListener("resize",R);const E=new MutationObserver(R);return E.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",R),E.disconnect()}},[]),b.useEffect(()=>{const R=()=>{const E=window.scrollY;S(E>50)};return window.addEventListener("scroll",R,{passive:!0}),()=>window.removeEventListener("scroll",R)},[]);const _=new URLSearchParams(t.search).get("q")||"";bc(_);const D=_.includes(" en ");let A=_,L=null;if(D){const R=_.split(" en ");A=R[0].trim(),L=R[1].trim()}const I=b.useMemo(()=>(e||[]).filter(R=>{const E=LQ(R,A);if(L){const M=bc(R.categoria||""),O=bc(L);return E&&M===O}return E}),[e,A,L]),F=b.useMemo(()=>I.filter(R=>{const E=R.precio>=r.precio.min,M=R.precio<=r.precio.max,O=!r.estado.nuevo&&!r.estado.usado||r.estado.nuevo&&R.estado==="Nuevo"||r.estado.usado&&R.estado==="Usado";return E&&M&&O}),[I,r]);return s.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"10px",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[s.jsx("div",{className:"flex-1 flex flex-col w-full",style:{margin:0},children:s.jsxs("main",{className:"flex-1 p-0 relative pb-32",children:[s.jsxs("div",{className:`flex justify-between items-start px-4 sm:px-6 py-3 transition-all duration-500 ease-in-out ${w?"sticky top-0 z-[850] bg-white/90 dark:bg-gray-900/90 backdrop-blur-md shadow-lg":"relative z-[850]"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>u(!0),className:`modern-btn modern-btn-categories ${w?"floating":""}`,"aria-label":"Abrir categoras",children:[s.jsx("svg",{className:"modern-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:s.jsx("path",{d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),s.jsx("span",{className:"font-semibold tracking-wide",children:"Categoras"})]}),s.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl xl:text-4xl font-extrabold text-gray-900 dark:text-gray-100 tracking-tight leading-tight",children:"Resultados de bsqueda"})]}),s.jsx(QT,{onClick:()=>l(!0),className:w?"floating":""})]}),w&&s.jsx("div",{style:{height:"80px"}}),_&&s.jsxs("div",{className:"px-4 sm:px-6 mb-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[s.jsxs("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:["Buscaste:"," ",s.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:A})]}),L&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium",children:[" ",L]})]}),F.length>0&&s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[F.length," ",F.length===1?"producto encontrado":"productos encontrados"]})]}),n?null:F.length===0?s.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:["No se encontraron productos relacionados con"," ",s.jsx("span",{className:"font-bold",children:_}),"."]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3 lg:gap-4 px-2 sm:px-4 xl:px-6",children:F.map(R=>s.jsx(yw,{producto:R},R.id))})]})}),d&&s.jsx(mT,{categoriaActiva:null,mostrarEnMovil:d,setMostrarEnMovil:u,className:"bg-transparent border-none shadow-none"}),s.jsx(XT,{filtros:r,setFiltros:i,onReset:()=>i({estado:{},precio:{min:0,max:1e6}}),visible:a,onClose:()=>l(!1),productosOriginales:e})]})}function B5(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")}function W5(){const{categoria:t="Todos"}=F0(),e=Sr(),{categories:n,loading:r}=mw(),a=(t||"").toLowerCase()!=="todos"&&t?t:"",{products:l,loading:d}=xW(a),[u,m]=b.useState({precio:{min:0,max:1e6},estado:{nuevo:!1,usado:!1,usadoComoNuevo:!1,reacondicionado:!1,reparado:!1}}),[g,h]=b.useState({norm:"",display:""}),[y,w]=b.useState(!1),[S,N]=b.useState(!1),[_,D]=b.useState("Todos"),[A,L]=b.useState(0),[I,F]=b.useState(!1),[R,E]=b.useState(!1),[M,O]=b.useState(0);b.useEffect(()=>{const X=()=>{F(document.documentElement.classList.contains("dark")||document.documentElement.classList.contains("dark-theme"))};X();const ne=new MutationObserver(X);return ne.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>ne.disconnect()},[]),b.useEffect(()=>{function X(){const we=document.querySelector(".shadow-md.px-4.py-2.flex.justify-between.items-center"),Z=document.querySelector("header"),le=we?Math.ceil(we.getBoundingClientRect().height):0,re=Z?Math.ceil(Z.getBoundingClientRect().height):0;L(le),O(re),document.documentElement.style.setProperty("--topbar-height",`${le}px`),document.documentElement.style.setProperty("--header-height",`${re}px`)}X(),window.addEventListener("resize",X);const ne=new MutationObserver(X);return ne.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),()=>{window.removeEventListener("resize",X),ne.disconnect()}},[]),b.useEffect(()=>{const X=()=>{const ne=window.scrollY;E(ne>50)};return window.addEventListener("scroll",X,{passive:!0}),()=>window.removeEventListener("scroll",X)},[]),b.useEffect(()=>{if(!t||t==="todos")D("Todos");else{const X=n.find(ne=>B5(ne.ruta)===B5(t));D(X?X.nombre:"Todos")}},[t,n]);const j=b.useMemo(()=>{if(!l||l.length===0)return[];const X=(t||"").toLowerCase();return _==="Todos"||!t||X==="todos"?l:l.filter(ne=>{const we=ne.categoria||ne.categoriaId||"";return we===_||we===t})},[l,_,t]),U=b.useMemo(()=>!j||j.length===0?[]:j.filter(ne=>{const we=Number(ne.precio),Z=Number.isFinite(we)&&we>0?we:0,le=Z===0||Z>=(u.precio.min||0),re=Z===0||Z<=(u.precio.max||1e6),B=!u.estado.nuevo&&!u.estado.usado&&!u.estado.usadoComoNuevo&&!u.estado.reacondicionado&&!u.estado.reparado||u.estado.nuevo&&ne.estado==="Nuevo"||u.estado.usado&&ne.estado==="Usado"||u.estado.usadoComoNuevo&&ne.estado==="Usado como nuevo"||u.estado.reacondicionado&&ne.estado==="Reacondicionado"||u.estado.reparado&&ne.estado==="Reparado",ce=ne.empresaNorm||(ne.empresa||"").toString().trim().toLowerCase(),Se=!g.norm||ce===g.norm;return le&&re&&B&&Se}),[j,u,g]),H=(X,ne)=>{e(`/productos/${ne}`),w(!1),N(!1),h({norm:"",display:""})},V=[{nombre:"PlayStation",norm:"playstation",imagen:"/logos/PlayStation_logo.svg.png"},{nombre:"Xbox",norm:"xbox",imagen:"/logos/xbox-logo.png"},{nombre:"Nintendo",norm:"nintendo",imagen:"/logos/nintendo-logo.png"}],K=r||d;return s.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-[96px] transition-colors duration-300",style:{position:"relative",margin:0,paddingTop:"10px",transition:"padding-top 0.2s",boxSizing:"border-box"},children:[s.jsx("div",{className:"flex-1 flex flex-col w-full",style:{margin:0},children:s.jsxs("main",{className:"flex-1 p-0 relative pb-32",children:[s.jsxs("div",{className:`flex justify-between items-start px-4 sm:px-6 py-3 transition-all duration-500 ease-in-out ${R?"sticky top-0 z-[850] bg-white/90 dark:bg-gray-900/90 backdrop-blur-md shadow-lg":"relative z-[850]"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>N(!0),className:`modern-btn modern-btn-categories ${R?"floating":""}`,"aria-label":"Abrir categoras",children:[s.jsx("svg",{className:"modern-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:s.jsx("path",{d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),s.jsx("span",{className:"font-semibold tracking-wide",children:"Categoras"})]}),s.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl xl:text-4xl font-extrabold text-gray-900 dark:text-gray-100 tracking-tight leading-tight",children:_==="Todos"?"Todos los productos":_})]}),s.jsx(QT,{onClick:()=>w(!0),className:R?"floating":""})]}),R&&s.jsx("div",{style:{height:"80px"}}),_!=="Todos"&&s.jsx("div",{className:"px-4 sm:px-6 mb-2",children:s.jsxs("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400",children:["Encuentra lo mejor en"," ",s.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:_})]})}),s.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 md:gap-4 px-4 sm:px-6 mb-4 justify-start",children:[V.map(X=>{const ne=g.norm===X.norm;return s.jsxs("button",{onClick:()=>h({norm:X.norm,display:X.nombre}),className:`group relative w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-full bg-white dark:bg-gray-800 border-2 sm:border-4 flex items-center justify-center shadow-xl hover:scale-110 transition-all duration-300 ${ne?"border-blue-700 ring-2 sm:ring-4 ring-offset-1 sm:ring-offset-2 ring-blue-500 animate-spin-slow":"border-gray-300 hover:border-blue-400"}`,title:X.nombre,children:[s.jsx("img",{src:X.imagen,alt:X.nombre,className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 object-contain z-10"}),ne&&s.jsx("span",{className:"absolute inset-0 rounded-full border-4 border-blue-500 animate-pulse z-0"})]},X.norm)}),s.jsx("button",{onClick:()=>h({norm:"",display:""}),className:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-full border-2 sm:border-4 flex items-center justify-center text-base sm:text-lg md:text-xl font-bold bg-gradient-to-br from-red-100 to-red-300 text-red-700 border-red-600 shadow-lg hover:scale-110 transition-all duration-300",title:"Quitar filtro",children:""})]}),K?null:U.length===0?s.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-10",children:"No hay productos que coincidan con tus filtros."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3 lg:gap-4 px-2 sm:px-4 xl:px-6",children:U.map(X=>s.jsx(yw,{producto:X},X.id))})]})}),S&&s.jsx(mT,{categoriaActiva:_,onCategoriaClick:H,mostrarEnMovil:S,setMostrarEnMovil:N,className:"bg-transparent border-none shadow-none"}),s.jsx(XT,{filtros:u,setFiltros:m,onReset:()=>m({estado:{},precio:{min:0,max:1e6}}),visible:y,onClose:()=>w(!1),productosOriginales:l})]})}const DQ=[{id:0,nombre:"Estafeta Principal (Oficina)",descripcion:"Playcenter Universal",direccion:"Av Estrella Sadhala N 55, Frente a la doble va, Santiago",telefono:"809-582-1212",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'13.2%22N+70%C2%B041'23.3%22W/@19.436998,-70.689812,17z/data=!4m4!3m3!8m2!3d19.437!4d-70.6898056",imagen:"/estafetas/oficina.png"},{id:1,nombre:"Estafeta Marilpez",descripcion:"Minimarket Los Hermanos",direccion:"Calle Penetracin N 1, Suburbanizacin Mare Lpez, La villa-Olmpica, Prximo a la calle 1",telefono:"809-626-3262",ubicacionLink:"https://www.google.com/maps/place/19%C2%B025'43.1%22N+70%C2%B041'12.7%22W/@19.4286338,-70.6894342,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.4286338!4d-70.6868593?hl=es&entry=ttu",imagen:"/estafetas/loshermanos.png"},{id:2,nombre:"Estafeta Nibaje",descripcion:"Cafetera Guido",direccion:"Avenida Franco Vido, N 148, Nibaje",telefono:"829-324-2318",ubicacionLink:"https://www.google.com/maps/place//@19.420887,-70.6811611,3857m/data=!3m2!1e3!4b1?entry=ttu",imagen:"/estafetas/cafeteria-guido.png"},{id:3,nombre:"Estafeta El Ensueo",descripcion:"Saln y Cafetera Marais",direccion:"Calle Paseo de los Locutores, Esquina 11, El Ensueo",telefono:"829-755-3636",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'22.4%22N+70%C2%B041'26.1%22W/@19.439565,-70.690574,964m/data=!3m2!1e3!4b1!4m4!3m3!8m2!3d19.439565!4d-70.690574?entry=ttu",imagen:"/estafetas/salon-y-cafeteria-maraez.png"},{id:4,nombre:"Estafeta Korea",descripcion:"Bodega Vasquez",direccion:"Calle 6 esquina 2",telefono:"",ubicacionLink:"https://maps.google.com/?q=19.429781,-70.693405",imagen:"/estafetas/estafeta korea.jpeg"},{id:5,nombre:"Estafeta La Villa-Olmpica",descripcion:"Palmatec Solutions",direccion:"Villa-Olmpica, frente Manzana F, al lado del antiguo Colegio Gnesis",telefono:"809-785-3354",ubicacionLink:"https://www.google.com/maps/place/19.435309,-70.685961/data=!4m6!3m5!1s0!7e2!8m2!3d19.435309!4d-70.68596099999999",imagen:"/estafetas/palmatech-solution.png"},{id:6,nombre:"Estafeta Ensanche Bermdez",descripcion:"St Electronics",direccion:"Calle 11, nmero 27, Ensanche Bermdez",telefono:"849-437-3100",ubicacionLink:"https://www.google.com/maps/place/Espailla,+51000+Santiago+de+los+Caballeros/@19.4717075,-70.7148707,964m/data=!3m2!1e3!4b1!4m6!3m5!1s0x8eb1c5e2c3c79d7d:0x3a75c6d5f2312708!8m2!3d19.4717075!4d-70.7148707",imagen:"/estafetas/St electronics.png"},{id:7,nombre:"Estafeta Los Guandules",descripcion:"Mini Market El Vecino",direccion:"Estafeta de pago Los Guandules, prximo al puente",telefono:"+1 829 218 1889",ubicacionLink:"https://www.google.com/maps/place/19%C2%B026'15.3%22N+70%C2%B041'22.2%22W/@19.4381999,-70.6893169,526m/data=!3m1!1e3!4m4!3m3!8m2!3d19.437576!4d-70.689512?entry=ttu",imagen:"/estafetas/losguandules.png"}],OQ=[{banco:"BANRESERVAS",numero:"9600153322",tipo:"Cuenta Corriente",titular:"PLAYCENTER"},{banco:"POPULAR",numero:"0798928750",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"BHD",numero:"18673320016",tipo:"Cuenta Corriente",titular:"FRANKLYN SANTOS"},{banco:"SantaCruz",numero:"11142010011632",tipo:"Cuenta Ahorro",titular:"PLAYCENTER"},{banco:"Scotiabank",numero:"12010008845",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"},{banco:"ASOC. CIBAO",numero:"100090238474",tipo:"Cuenta Ahorro",titular:"FRANKLYN SANTOS"}];function VQ(){const[t,e]=b.useState(null),[n,r]=b.useState(!1),[i,a]=b.useState(null),l={hidden:{opacity:0,y:60},visible:{opacity:1,y:0}},d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15}}},u=(h,y)=>{navigator.clipboard.writeText(h),e(y),setTimeout(()=>e(null),2e3)},m=h=>{a(h),r(!0)},g=()=>{r(!1),setTimeout(()=>a(null),300)};return b.useEffect(()=>{const h=y=>{y.key==="Escape"&&n&&g()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n]),b.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[n]),s.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-10",style:{paddingTop:"30px"},children:[s.jsxs(Q.div,{initial:"hidden",animate:"visible",variants:d,className:"text-center mb-8",children:[s.jsx(Q.h1,{variants:l,className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100 tracking-tight mb-2",children:"Estafetas de Pago y Mtodos de Pago"}),s.jsx(Q.p,{variants:l,className:"text-gray-600 dark:text-gray-300",children:"Puedes pagar tu factura en cualquiera de nuestros puntos autorizados o mediante transferencia bancaria."})]}),s.jsxs(Q.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-gray-800 dark:to-gray-900 border border-blue-200 dark:border-gray-700 rounded-xl p-4 md:p-6 mb-8 md:mb-12 shadow-lg",children:[s.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2 mb-2",children:[s.jsx(MW,{className:"text-base md:text-lg"}),"Cuentas Bancarias"]}),s.jsx("p",{className:"text-xs md:text-sm text-red-600 dark:text-red-400 font-semibold mb-2",children:" Incluye tu cdigo o nombre en la descripcin del pago"}),s.jsxs("p",{className:"text-xs md:text-sm text-gray-700 dark:text-gray-300 mb-3 md:mb-4",children:["Enva el comprobante al"," ",s.jsx("span",{className:"font-bold",children:"809-582-1212"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:OQ.map((h,y)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3 md:p-4 shadow-sm hover:shadow-md transition",children:[s.jsxs("h3",{className:"text-sm md:text-base font-bold text-indigo-700 dark:text-indigo-300 flex items-center gap-1 mb-2",children:[s.jsx(zW,{className:"text-xs md:text-sm"}),h.banco]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 flex items-center justify-between",children:[s.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100 text-xs md:text-sm",children:h.numero}),s.jsx("button",{onClick:()=>u(h.numero,y),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 ml-2 p-1",title:"Copiar",children:t===y?s.jsx(AW,{size:14}):s.jsx($W,{size:14})})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:h.tipo}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:h.titular})]})]},y))})]}),s.jsx(Q.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:d,className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:DQ.map((h,y)=>s.jsxs(Q.div,{variants:l,transition:{duration:.5,delay:y*.1},className:"flex flex-col md:flex-row bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700 hover:shadow-2xl transition",children:[s.jsx("div",{className:"w-full md:w-1/2 h-64 md:h-auto bg-gradient-to-br from-blue-50 to-slate-50 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center p-3 cursor-pointer transition-colors",onClick:()=>m(h),title:"Click para ver imagen completa",children:s.jsx("img",{src:h.imagen,alt:h.nombre,className:"w-full h-full object-contain rounded-xl"})}),s.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300 mb-1",children:h.nombre}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg font-medium mb-1",children:h.descripcion}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1",children:h.direccion}),s.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-2 mb-2",children:[s.jsx(A0,{className:"text-green-500 dark:text-green-300"}),h.telefono]})]}),s.jsxs("a",{href:h.ubicacionLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline mt-3 font-semibold flex items-center gap-2",children:[s.jsx("span",{role:"img","aria-label":"location",children:""}),"Ver Ubicacin"]})]})]},h.id))}),s.jsx(Q.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"text-center text-gray-500 dark:text-gray-400 mt-12 text-lg",children:"Agradecemos su preferencia! Estamos para servirle."}),n&&i&&s.jsxs("div",{className:"estafeta-modal-bg fixed inset-0 z-[9999] flex flex-col",style:{backgroundColor:"#ffffff"},onClick:g,children:[s.jsx("style",{children:`
              @media (prefers-color-scheme: dark) {
                .estafeta-modal-bg {
                  background-color: #000000 !important;
                }
                .estafeta-modal-header {
                  background-color: #000000 !important;
                  border-color: #1f2937 !important;
                }
                .estafeta-modal-info {
                  background-color: #000000 !important;
                  border-color: #1f2937 !important;
                }
                .estafeta-modal-btn {
                  background-color: #374151 !important;
                  color: #ffffff !important;
                }
                .estafeta-modal-btn:hover {
                  background-color: #4b5563 !important;
                }
              }
              html.dark .estafeta-modal-bg {
                background-color: #000000 !important;
              }
              html.dark .estafeta-modal-header {
                background-color: #000000 !important;
                border-color: #1f2937 !important;
              }
              html.dark .estafeta-modal-info {
                background-color: #000000 !important;
                border-color: #1f2937 !important;
              }
              html.dark .estafeta-modal-btn {
                background-color: #374151 !important;
                color: #ffffff !important;
              }
              html.dark .estafeta-modal-btn:hover {
                background-color: #4b5563 !important;
              }
            `}),s.jsxs("div",{className:"estafeta-modal-header flex items-center justify-between px-4 md:px-8 py-4 md:py-6 border-b",style:{backgroundColor:"#ffffff",borderColor:"#e5e7eb"},children:[s.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-blue-600 dark:text-blue-400 flex-1 pr-4",children:i.nombre}),s.jsx("button",{onClick:g,className:"estafeta-modal-btn p-3 md:p-4 rounded-full transition-all duration-300 shadow-2xl hover:scale-110 hover:rotate-90 flex-shrink-0",style:{backgroundColor:"#f3f4f6",color:"#111827"},title:"Cerrar",children:s.jsx(ch,{size:20,className:"md:w-[22px] md:h-[22px]"})})]}),s.jsx("div",{className:"flex-1 w-full flex items-center justify-center px-4 py-4 md:px-8 md:py-6",onClick:h=>h.stopPropagation(),children:s.jsx("img",{src:i.imagen,alt:i.nombre,className:"max-w-full max-h-full object-contain",style:{maxHeight:"70vh",maxWidth:"90%",width:"auto",height:"auto"}})}),s.jsx("div",{className:"estafeta-modal-info border-t-2 p-4 md:p-6",style:{backgroundColor:"#ffffff",borderColor:"#e5e7eb"},children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("p",{className:"text-base md:text-lg lg:text-xl text-gray-700 dark:text-gray-200 text-center font-medium leading-relaxed",children:i.descripcion})})})]})]})}function H5({children:t}){const{usuario:e}=er();return e?t:s.jsx(AP,{to:"/",replace:!0})}const q5="https://playcenter-universal.onrender.com";function zQ(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function FQ(){const[t]=y1(),e=Sr(),{usuario:n,usuarioInfo:r}=er(),{carrito:i,vaciarCarrito:a}=Xm(),[l,d]=b.useState(1),[u,m]=b.useState(0);b.useEffect(()=>{const h=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=h}},[]),b.useEffect(()=>{const h=t.get("session"),y=zQ(),w=setInterval(()=>{m(D=>D>=90?D:Math.min(90,D+Math.random()*15))},200),S=setTimeout(()=>d(2),900),N=setTimeout(()=>d(3),1600),_=async()=>{var D;try{if(!h){e("/payment/cancel");return}const A=await fetch(`${q5}/cardnet/get-sk/${h}`),{sk:L}=await A.json();if(!L){e(`/payment/cancel?session=${h}`);return}const F=await(await fetch(`${q5}/cardnet/verify/${h}/${L}`)).json(),R=(D=y==null?void 0:y.items)!=null&&D.length?y.items.map(O=>({id:O.id,nombre:O.nombre,precio:Number(O.precio)||0,cantidad:O.cantidad,imagen:O.imagen||"/Productos/default.jpg",empresa:O.empresa||"N/A",subtotal:(Number(O.precio)||0)*O.cantidad})):(i||[]).map(O=>({id:O.id,nombre:O.nombre,precio:Number(O.precio)||0,cantidad:O.cantidad,imagen:O.imagen||"/Productos/default.jpg",empresa:O.empresa||"N/A",subtotal:(Number(O.precio)||0)*O.cantidad})),E=(y==null?void 0:y.total)??(i||[]).reduce((O,j)=>O+(Number(j.precio)||0)*j.cantidad,0),M={userId:(n==null?void 0:n.uid)||null,userEmail:(r==null?void 0:r.email)||(n==null?void 0:n.email)||null,userName:(r==null?void 0:r.displayName)||null,userPhone:(r==null?void 0:r.telefono)||null,productos:R,total:E,subtotal:R.reduce((O,j)=>O+j.subtotal,0),impuestos:0,envio:0,estado:(F==null?void 0:F.ResponseCode)==="00"?"completado":"cancelado",estadoPago:(F==null?void 0:F.ResponseCode)==="00"?"pagado":"fallido",metodoPago:"CardNet",fecha:Qd(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(y==null?void 0:y.mode)||(y?"unknown":"cart"),direccionEntrega:(r==null?void 0:r.direccionCompleta)||null,telefonoContacto:(r==null?void 0:r.telefono)||null,notasEspeciales:null,raw:{...F,SESSION:h}};try{await Yc(pt(oe,"orders"),M)}catch{}try{sessionStorage.removeItem("checkoutPayload")}catch{}m(100),d(4),setTimeout(()=>{(F==null?void 0:F.ResponseCode)==="00"?(((y==null?void 0:y.mode)||"cart")==="cart"&&a(),e(`/payment/success?session=${h}`)):e(`/payment/cancel?session=${h}`)},900)}catch{e("/payment/cancel")}};if(h){const D=setTimeout(_,9e3);return()=>{clearTimeout(D),clearInterval(w),clearTimeout(S),clearTimeout(N)}}else e("/payment/cancel")},[t,e,n,r,i,a]);const g=[{id:1,icon:uw,title:"Conectando con CardNet",description:"Estableciendo conexin segura"},{id:2,icon:Bc,title:"Verificando seguridad",description:"Validando datos de pago"},{id:3,icon:B6,title:"Procesando transaccin",description:"Confirmando tu compra"},{id:4,icon:Ll,title:"Completado!",description:"Redirigiendo..."}];return s.jsxs(Q.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((h,y)=>s.jsx(Q.div,{className:"absolute w-2 h-2 bg-blue-200 dark:bg-blue-800 rounded-full opacity-30 dark:opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*12+12,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},y))}),s.jsxs(Q.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5 dark:from-blue-500/10 dark:to-purple-500/10 rounded-2xl sm:rounded-3xl"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3 sm:mb-4",children:[s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Progreso"}),s.jsxs("span",{className:"text-xs sm:text-sm font-bold text-blue-600 dark:text-blue-400",children:[Math.round(u),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 sm:h-3 overflow-hidden",children:s.jsx(Q.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full",initial:{width:0},animate:{width:`${u}%`},transition:{duration:.5,ease:"easeOut"}})})]}),s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsx(sn,{mode:"wait",children:g.map(h=>l>=h.id&&s.jsxs(Q.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:.98},transition:{duration:.35,type:"spring"},className:`flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl sm:rounded-2xl mb-2 sm:mb-3 ${l===h.id?"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30 border-2 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-700"}`,children:[s.jsx(Q.div,{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl flex-shrink-0 ${l===h.id?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-green-100 text-green-600"}`,animate:l===h.id?{scale:[1,1.08,1],rotate:[0,5,-5,0]}:{},transition:{duration:2,repeat:1/0},children:s.jsx(h.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),s.jsxs("div",{className:"text-left flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100 text-base sm:text-lg",children:h.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm break-words",children:h.description})]}),l>h.id&&s.jsx(Q.div,{initial:{scale:0},animate:{scale:1},className:"text-green-500 flex-shrink-0",children:s.jsx(Ll,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]},h.id))})}),s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsxs("div",{className:"loader mx-auto",children:[s.jsx("div",{className:"loader__bar"}),s.jsx("div",{className:"loader__bar"}),s.jsx("div",{className:"loader__bar"}),s.jsx("div",{className:"loader__bar"}),s.jsx("div",{className:"loader__bar"}),s.jsx("div",{className:"loader__ball"})]})}),s.jsx(Q.h1,{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{opacity:[.85,1,.85]},transition:{duration:2,repeat:1/0},children:"Procesando tu pago"}),s.jsxs(Q.p,{className:"text-gray-600 dark:text-gray-300 mb-6 sm:mb-8 leading-relaxed text-sm sm:text-base",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:["Estamos verificando tu transaccin con CardNet de forma segura.",s.jsx("br",{}),s.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Por favor, no cierres esta ventana."})]}),s.jsxs(Q.div,{className:"flex flex-wrap justify-center items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.6},children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx(Bc,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500"}),s.jsx("span",{children:"Conexin segura"})]}),s.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full hidden sm:block"}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx($h,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),s.jsx("span",{children:"Tiempo real"})]})]})]})]})]})}function $Q(){var w,S;const[t]=y1(),[e,n]=b.useState(null),[r,i]=b.useState(null),[a,l]=b.useState(!0),[d,u]=b.useState(!1),[m,g]=b.useState(!1);b.useEffect(()=>{const N=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=N}},[]),b.useEffect(()=>{const N=t.get("session");N&&!m&&(async()=>{try{const A=Ot(pt(oe,"orders"),qt("raw.SESSION","==",N),ni("fecha","desc"),jl(1)),L=await rn(A);if(!L.empty){n({id:L.docs[0].id,...L.docs[0].data()}),g(!0);return}const I=sessionStorage.getItem("cardnetSessionKey");if(!I){i({error:"Sesin invlida"});return}const E=(await Na(T2,"verifyCardnetTransaction")({session:N,sessionKey:I})).data;if(i(E),E.ResponseCode==="00"&&!m){const M=sessionStorage.getItem("checkoutPayload"),O=M?JSON.parse(M):null,j=nr.currentUser;if(O&&j){const U={numeroOrden:`ORD-${Date.now()}`,userId:j.uid,userEmail:j.email,email:j.email,customerEmail:j.email,customerName:j.displayName||j.email,productos:O.items||[],total:O.total/100,estado:"Completado",metodoPago:"CardNet",fecha:Qd(),createdAt:Qd(),emailSent:!1,raw:{SESSION:N,cardnetData:E,orderId:sessionStorage.getItem("cardnetOrderId"),transactionId:sessionStorage.getItem("cardnetTransactionId")}},H=await Yc(pt(oe,"orders"),U);n({id:H.id,...U}),g(!0),sessionStorage.removeItem("checkoutPayload"),sessionStorage.removeItem("cardnetSessionKey"),sessionStorage.removeItem("cardnetOrderId"),sessionStorage.removeItem("cardnetTransactionId")}}}catch{}})();const D=setTimeout(()=>l(!1),3e3);return()=>clearTimeout(D)},[t,m]);const h=N=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP",minimumFractionDigits:2}).format(N||0),y=N=>{if(!N)return"Fecha no disponible";let _;return typeof N=="object"&&(N!=null&&N.seconds)?_=new Date(N.seconds*1e3):_=new Date(N),_.toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return s.jsxs(Q.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-green-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[s.jsx(sn,{children:a&&s.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(50)].map((N,_)=>s.jsx(Q.div,{className:"absolute w-3 h-3 rounded-full dark:opacity-70",style:{backgroundColor:["#10b981","#059669","#34d399","#6ee7b7","#a7f3d0"][Math.floor(Math.random()*5)],left:Math.random()*100+"%",top:-10},animate:{y:window.innerHeight+50,x:[0,Math.random()*200-100,Math.random()*200-100],rotate:[0,360,720],scale:[1,.5,1]},transition:{duration:Math.random()*3+2,ease:"easeOut",delay:Math.random()*2},exit:{opacity:0}},_))})}),s.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((N,_)=>s.jsx(Q.div,{className:"absolute w-2 h-2 bg-green-200 dark:bg-green-800 rounded-full opacity-30 dark:opacity-20",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight]},transition:{duration:Math.random()*15+15,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},_))}),s.jsxs(Q.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-4xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-emerald-500/5 dark:from-green-500/10 dark:to-emerald-500/10 rounded-3xl"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Q.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:s.jsxs(Q.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[s.jsx(Ll,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-green-500 mx-auto drop-shadow-lg"}),s.jsx(Q.div,{className:"absolute -top-3 -right-3 w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.25,1],rotate:[0,12,-12,0]},transition:{duration:2,repeat:1/0},children:s.jsx(oW,{className:"w-5 h-5 text-yellow-600"})}),s.jsx(Q.div,{className:"absolute -bottom-2 -left-2 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0,delay:.5},children:s.jsx(U6,{className:"w-4 h-4 text-green-600"})})]})}),s.jsxs(Q.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:[s.jsx(Q.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-400 dark:to-emerald-400 bg-clip-text text-transparent mb-3 sm:mb-4",animate:{scale:[1,1.04,1]},transition:{duration:2,repeat:1/0},children:"Pago exitoso!"}),s.jsx(Q.div,{className:"flex items-center justify-center gap-2 mb-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[...Array(5)].map((N,_)=>s.jsx(Q.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.7+_*.08,type:"spring"},children:s.jsx(QB,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-400 fill-current"})},_))}),s.jsxs(Q.p,{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base md:text-lg leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},children:["Tu transaccin fue procesada correctamente.",s.jsx("br",{}),"Gracias por tu compra en ",s.jsx("span",{className:"font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:"PlayCenter Universal"}),"!"]})]}),e?s.jsx(Q.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 rounded-xl sm:rounded-2xl p-4 sm:p-5 md:p-6 border border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[s.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[s.jsx(aB,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600"}),"Resumen de tu compra"]}),s.jsx(Q.div,{className:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold",whileHover:{scale:1.05},children:" Completado"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Orden ID:"}),s.jsx("span",{className:"font-mono text-xs sm:text-sm bg-gray-100 dark:bg-gray-700 dark:text-gray-200 px-2 py-1 rounded break-all",children:e.numeroOrden||((w=e.id)==null?void 0:w.slice(-8))})]}),s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Email:"}),s.jsx("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm break-all text-right",children:e.userEmail})]}),s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Fecha:"}),s.jsx("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm text-right",children:y(e.fecha)})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm flex-shrink-0",children:"Mtodo de pago:"}),s.jsxs("span",{className:"font-medium dark:text-gray-200 text-xs sm:text-sm flex items-center gap-1.5 sm:gap-2",children:[s.jsx(B6,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-500"}),"CardNet"]})]}),s.jsxs("div",{className:"flex justify-between items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm",children:"Total:"}),s.jsx("span",{className:"text-xl sm:text-2xl font-bold text-green-600 dark:text-green-400",children:h(e.total)})]})]})]}),((S=e.productos)==null?void 0:S.length)>0&&s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>u(N=>!N),className:"flex items-center gap-2 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 font-medium mb-3 sm:mb-4 transition-colors text-sm sm:text-base",type:"button",children:[s.jsxs("span",{children:["Ver productos (",e.productos.length,")"]}),s.jsx(Q.div,{animate:{rotate:d?180:0},transition:{duration:.25},children:""})]}),s.jsx(sn,{children:d&&s.jsx(Q.div,{className:"space-y-2 sm:space-y-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:e.productos.map((N,_)=>s.jsxs(Q.div,{className:"flex items-center justify-between bg-white dark:bg-gray-700/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-green-100 dark:border-green-800 gap-3",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:_*.06},whileHover:{scale:1.02},children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold flex-shrink-0",children:""}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm sm:text-base block truncate",children:N.nombre}),s.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:["Cantidad: ",N.cantidad,"  ",h(N.precio)]})]})]}),s.jsx("span",{className:"font-bold text-green-600 dark:text-green-400 text-sm sm:text-base flex-shrink-0",children:h((Number(N.precio)||0)*N.cantidad)})]},`${N.id}-${_}`))})})]})]})}):null,s.jsxs(Q.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center mb-6 sm:mb-8",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:1.2},children:[s.jsx(Q.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:s.jsxs(Yt,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-500 dark:to-emerald-500 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[s.jsx(Jf,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{children:"Seguir comprando"})]})}),s.jsx(Q.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:s.jsxs(Yt,{to:"/profile",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[s.jsx(QU,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{children:"Ver historial"})]})})]}),r&&s.jsxs(Q.details,{className:"mt-2 text-left",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6},children:[s.jsx("summary",{className:"cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 font-medium mb-2 text-xs sm:text-sm",children:"Detalles tcnicos de la transaccin"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700 max-h-48 sm:max-h-64 overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap text-gray-600 dark:text-gray-300 text-xs font-mono",children:JSON.stringify(r,null,2)})})]})]})]})]})}function UQ(){try{const t=sessionStorage.getItem("checkoutPayload");return t?JSON.parse(t):null}catch{return null}}function BQ(){const[t]=y1(),{usuarioInfo:e}=er(),{carrito:n}=Xm(),[r,i]=b.useState(!1),[a,l]=b.useState(!1);b.useEffect(()=>{const u=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=u}},[]),b.useEffect(()=>{const m=setTimeout(async()=>{var S;if(r)return;const g=t.get("session"),h=UQ(),y=(S=h==null?void 0:h.items)!=null&&S.length?h.items:(n||[]).map(N=>({id:N.id,nombre:N.nombre,precio:Number(N.precio)||0,cantidad:N.cantidad})),w=(h==null?void 0:h.total)??(n||[]).reduce((N,_)=>N+(Number(_.precio)||0)*_.cantidad,0);try{if(g){const N=Ot(pt(oe,"orders"),qt("raw.SESSION","==",g),jl(1));if(!(await rn(N)).empty){try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0);return}}if(e&&(y.length>0||w>=0)){const N=y.map(_=>({id:_.id,nombre:_.nombre,precio:Number(_.precio)||0,cantidad:_.cantidad,imagen:_.imagen||"/Productos/default.jpg",empresa:_.empresa||"N/A",subtotal:(Number(_.precio)||0)*_.cantidad}));await Yc(pt(oe,"orders"),{userId:e.uid,userEmail:e.email,userName:e.displayName,userPhone:(e==null?void 0:e.telefono)||null,productos:N,total:w,subtotal:N.reduce((_,D)=>_+D.subtotal,0),impuestos:0,envio:0,estado:"cancelado",estadoPago:"fallido",metodoPago:"CardNet",fecha:Qd(),fechaCreacion:new Date().toISOString(),numeroOrden:`PCU-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkoutMode:(h==null?void 0:h.mode)||(h?"unknown":"cart"),direccionEntrega:(e==null?void 0:e.direccionCompleta)||null,telefonoContacto:(e==null?void 0:e.telefono)||null,notasEspeciales:null,raw:{SESSION:g||null}});try{sessionStorage.removeItem("checkoutPayload")}catch{}i(!0)}}catch{}},600);return()=>clearTimeout(m)},[e,n,r,t]);const d=[{icon:Bc,title:"Datos incorrectos",desc:"Verifica la informacin de tu tarjeta"},{icon:$h,title:"Sesin expirada",desc:"El tiempo lmite para el pago se agot"},{icon:Em,title:"Fondos insuficientes",desc:"Tu tarjeta no tiene saldo disponible"},{icon:bh,title:"Cancelado por el usuario",desc:"El pago fue cancelado manualmente"}];return s.jsxs(Q.div,{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-rose-50 via-red-50 to-pink-50 dark:from-gray-900 dark:via-red-950 dark:to-gray-900 px-4 sm:px-6 md:px-8 overflow-auto py-4 sm:py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.35},role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(16)].map((u,m)=>s.jsx(Q.div,{className:"absolute w-3 h-3 bg-red-200 dark:bg-red-900 rounded-full opacity-20 dark:opacity-15",animate:{x:[Math.random()*window.innerWidth,Math.random()*window.innerWidth],y:[Math.random()*window.innerHeight,Math.random()*window.innerHeight],rotate:[0,360]},transition:{duration:Math.random()*14+14,repeat:1/0,ease:"linear"},style:{left:Math.random()*100+"%",top:Math.random()*100+"%"}},m))}),s.jsxs(Q.div,{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-xl sm:rounded-2xl md:rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 lg:p-12 max-w-sm sm:max-w-lg md:max-w-2xl lg:max-w-3xl w-full text-center relative overflow-hidden border border-white/30 dark:border-gray-700/50 my-4",initial:{scale:.94,y:28},animate:{scale:1,y:0},transition:{type:"spring",damping:22,stiffness:280},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-pink-500/5 dark:from-red-500/10 dark:to-pink-500/10 rounded-3xl"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Q.div,{className:"mb-8",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:16,stiffness:300,delay:.15},children:s.jsxs(Q.div,{className:"relative inline-block",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[s.jsx(bh,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 text-red-500 mx-auto drop-shadow-lg"}),s.jsx(Q.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-100 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:s.jsx(Em,{className:"w-4 h-4 text-red-600"})})]})}),s.jsx(Q.h1,{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-red-600 to-pink-600 dark:from-red-400 dark:to-pink-400 bg-clip-text text-transparent mb-4 sm:mb-6",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.3},children:"Pago cancelado"}),s.jsxs(Q.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.45},children:[s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-base sm:text-lg leading-relaxed mb-4",children:"Tu transaccin no pudo ser completada."}),s.jsxs(Q.div,{className:"inline-flex items-center gap-2 bg-green-50 dark:bg-green-950/30 text-green-700 dark:text-green-300 px-4 py-2 rounded-full border border-green-200 dark:border-green-800",initial:{scale:0},animate:{scale:1},transition:{delay:.65,type:"spring"},children:[s.jsx(Bc,{className:"w-4 h-4"}),s.jsx("span",{className:"font-semibold",children:"No se realiz ningn cargo a tu tarjeta"})]})]}),s.jsxs(Q.div,{className:"mb-8",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.6},children:[s.jsxs("button",{onClick:()=>l(u=>!u),className:"flex items-center gap-2 mx-auto text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",type:"button",children:[s.jsx("span",{className:"font-medium",children:"Por qu fall mi pago?"}),s.jsx(Q.div,{animate:{rotate:a?180:0},transition:{duration:.25},children:s.jsx(IB,{className:"w-4 h-4"})})]}),s.jsx(sn,{children:a&&s.jsx(Q.div,{className:"mt-4 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.25},children:d.map((u,m)=>s.jsx(Q.div,{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700",initial:{opacity:0,x:-16},animate:{opacity:1,x:0},transition:{delay:m*.08},whileHover:{scale:1.02,backgroundColor:"#f8fafc"},children:s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg flex-shrink-0",children:s.jsx(u.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"})}),s.jsxs("div",{className:"text-left flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-1 text-sm sm:text-base",children:u.title}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-words",children:u.desc})]})]})},m))})})]}),s.jsxs(Q.div,{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.8},children:[s.jsx(Q.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:s.jsxs(Yt,{to:"/carrito",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-red-600 to-pink-600 dark:from-red-500 dark:to-pink-500 text-white rounded-lg sm:rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[s.jsx($6,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{children:"Intentar de nuevo"})]})}),s.jsx(Q.div,{whileHover:{scale:1.05},whileTap:{scale:.97},children:s.jsxs(Yt,{to:"/",className:"inline-flex items-center justify-center gap-2 sm:gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg sm:rounded-xl font-bold shadow-lg border-2 border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-xl transition-all duration-300 text-sm sm:text-base",children:[s.jsx(Jf,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{children:"Ir al inicio"})]})})]}),s.jsxs(Q.div,{className:"mt-6 sm:mt-8 p-4 sm:p-5 bg-blue-50 dark:bg-blue-950/30 rounded-lg sm:rounded-xl border border-blue-200 dark:border-blue-800",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:1},children:[s.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2 text-sm sm:text-base",children:"Necesitas ayuda?"}),s.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-xs sm:text-sm",children:"Si el problema persiste, contacta a nuestro equipo de soporte. Estamos aqu para ayudarte a completar tu compra."}),s.jsx(Q.a,{href:"/contacto",className:"mt-3 inline-block text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-800 dark:hover:text-blue-300 transition-colors",whileHover:{scale:1.03},children:"Contactar soporte "})]})]})]})]})}function WQ(){const{abrirModal:t}=Fl();return b.useEffect(()=>{try{const n=(new URLSearchParams(window.location.search).get("email")||"").trim().toLowerCase();if(n){const r={email:n,loginMethod:"email",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",n),localStorage.setItem("lastUserData",JSON.stringify(r))}}catch{}t("login")},[t]),s.jsx("div",{className:"min-h-[40vh] flex items-center justify-center p-6",children:s.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:s.jsx("p",{className:"text-sm",children:"Abriendo inicio de sesin"})})})}function HQ(){const t=Sr(),{usuario:e,usuarioInfo:n}=er(),[r,i]=b.useState(!1),[a,l]=b.useState(!1),[d,u]=b.useState(1),[m,g]=b.useState(null),[h,y]=b.useState(null),[w,S]=b.useState({nombre:"",descripcion:"",logo:null,banner:null,telefono:"",direccion:"",eslogan:"",email:"",nombreContacto:""}),[N,_]=b.useState([]),D=(M,O="info",j=null)=>{const U=Date.now()+Math.random();_(H=>[...H,{id:U,message:M,type:O,title:j}])},A=M=>{_(O=>O.filter(j=>j.id!==M))},L=(M,O)=>{const j=M.target.files[0];if(!j)return;if(j.size>5*1024*1024){D("La imagen no debe superar 5MB. Por favor elige una imagen ms pequea.","warning","Imagen muy grande");return}const U=new FileReader;U.onloadend=()=>{O==="logo"?(g(U.result),S({...w,logo:j})):(y(U.result),S({...w,banner:j}))},U.readAsDataURL(j)},I=async(M,O)=>{if(!M)return null;const j=so(io,`${O}/${Date.now()}.jpg`);return await Oh(j,M),await zc(j)},F=async M=>{if(M.preventDefault(),!w.nombre.trim()){D("Por favor ingresa el nombre de tu tienda","warning","Campo requerido");return}if(!w.email.trim()){D("El email es obligatorio para enviarte la respuesta","warning","Campo requerido");return}i(!0);try{const O=w.logo?await I(w.logo,"solicitudes/logos"):"",j=w.banner?await I(w.banner,"solicitudes/banners"):"",U={tiendaNombre:w.nombre,tiendaDescripcion:w.descripcion,tiendaEslogan:w.eslogan,tiendaLogo:O,tiendaBanner:j,tiendaTelefono:w.telefono,tiendaDireccion:w.direccion,email:w.email,nombreContacto:w.nombreContacto,userId:(e==null?void 0:e.uid)||null,fechaSolicitud:new Date,estado:"pendiente",revisadoPor:null,fechaRevision:null,notasAdmin:""},H=await Yc(pt(oe,"solicitudes_vendedor"),U);await Kb.newSellerRequest({id:H.id,nombreContacto:w.nombreContacto,tiendaNombre:w.nombre,email:w.email}),D("Solicitud enviada exitosamente!","success","xito!"),setTimeout(()=>l(!0),500)}catch{D("Hubo un error al enviar tu solicitud. Por favor intenta de nuevo.","error","Error al enviar")}finally{i(!1)}},R=()=>{d>1&&u(d-1)},E=()=>{if(d===1&&!w.nombre.trim()){D("Por favor ingresa el nombre de tu tienda para continuar","warning","Campo requerido");return}d<3&&u(d+1)};return a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center py-12 px-4",children:s.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:s.jsx(Qf,{className:"w-10 h-10 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-4",children:"Solicitud Enviada!"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-start gap-3 text-left",children:[s.jsx($h,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-blue-900 mb-2",children:"Playcenter Universal evaluar tu solicitud"}),s.jsxs("p",{className:"text-sm text-blue-700",children:["Te enviaremos la respuesta a ",s.jsx("strong",{children:w.email})," ","en las prximas 24-48 horas."]})]})]})}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Gracias por tu inters en vender con nosotros. Revisaremos tu informacin y te contactaremos pronto."}),s.jsx("button",{onClick:()=>t("/"),className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Volver al Inicio"})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-12 px-4",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs(Q.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4",children:s.jsx(xr,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:"Solicita Vender en Playcenter"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Completa el formulario y nos pondremos en contacto contigo"})]}),s.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3].map(M=>s.jsxs(Ns.Fragment,{children:[s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-bold ${d>=M?"bg-blue-600 text-white":"bg-gray-200 text-gray-400"}`,children:d>M?s.jsx(Qf,{className:"w-6 h-6"}):M}),M<3&&s.jsx("div",{className:`w-16 h-1 ${d>M?"bg-blue-600":"bg-gray-200"}`})]},M))}),s.jsx(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl p-8",children:s.jsxs("form",{onSubmit:F,children:[d===1&&s.jsxs(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[s.jsx(U6,{className:"w-4 h-4 text-blue-600"}),"Nombre de tu Tienda *"]}),s.jsx("input",{type:"text",value:w.nombre,onChange:M=>S({...w,nombre:M.target.value}),placeholder:"Ej: TecnoStore, GameZone, FashionHub",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Eslogan (Opcional)"}),s.jsx("input",{type:"text",value:w.eslogan,onChange:M=>S({...w,eslogan:M.target.value}),placeholder:"Ej: Los mejores productos gaming de RD",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Descripcin"}),s.jsx("textarea",{value:w.descripcion,onChange:M=>S({...w,descripcion:M.target.value}),placeholder:"Cuntanos sobre tu negocio...",rows:"4",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none"})]})]}),d===2&&s.jsxs(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[s.jsx(f_,{className:"w-4 h-4 text-blue-600"}),"Logo de la Tienda"]}),s.jsx("div",{className:"flex flex-col items-center",children:m?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:m,alt:"Preview Logo",className:"w-32 h-32 rounded-full object-cover border-4 border-blue-600 shadow-lg"}),s.jsx("button",{type:"button",onClick:()=>{g(null),S({...w,logo:null})},className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:""})]}):s.jsxs("label",{className:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-full flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[s.jsx(em,{className:"w-8 h-8 text-gray-400 mb-2"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Subir Logo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:M=>L(M,"logo"),className:"hidden"})]})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[s.jsx(f_,{className:"w-4 h-4 text-blue-600"}),"Banner de la Tienda"]}),s.jsx("div",{className:"flex flex-col items-center",children:h?s.jsxs("div",{className:"relative w-full",children:[s.jsx("img",{src:h,alt:"Preview Banner",className:"w-full h-48 rounded-xl object-cover border-4 border-blue-600 shadow-lg"}),s.jsx("button",{type:"button",onClick:()=>{y(null),S({...w,banner:null})},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:""})]}):s.jsxs("label",{className:"w-full h-48 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[s.jsx(em,{className:"w-8 h-8 text-gray-400 mb-2"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Subir Banner (1200x400px recomendado)"}),s.jsx("input",{type:"file",accept:"image/*",onChange:M=>L(M,"banner"),className:"hidden"})]})})]})]}),d===3&&s.jsxs(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email de Contacto *"}),s.jsx("input",{type:"email",value:w.email,onChange:M=>S({...w,email:M.target.value}),placeholder:"tu@email.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Te enviaremos la respuesta a este email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombre Completo *"}),s.jsx("input",{type:"text",value:w.nombreContacto,onChange:M=>S({...w,nombreContacto:M.target.value}),placeholder:"Tu nombre completo",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telfono de Contacto"}),s.jsx("input",{type:"tel",value:w.telefono,onChange:M=>S({...w,telefono:M.target.value}),placeholder:"809-123-4567",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Direccin"}),s.jsx("input",{type:"text",value:w.direccion,onChange:M=>S({...w,direccion:M.target.value}),placeholder:"Santiago, Repblica Dominicana",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Proceso de Aprobacin"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Playcenter Universal revisar tu solicitud. Te contactaremos en 24-48 horas con la respuesta."})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-0 mt-8 pt-6 border-t",children:[d>1?s.jsxs("button",{type:"button",onClick:R,className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-3 text-gray-600 hover:text-gray-900 font-semibold order-2 sm:order-1",children:[s.jsx(Sm,{className:"w-4 h-4"}),"Anterior"]}):s.jsxs("button",{type:"button",onClick:()=>t(-1),className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-3 text-gray-600 hover:text-gray-900 font-semibold order-2 sm:order-1",children:[s.jsx(Sm,{className:"w-4 h-4"}),"Cancelar"]}),d<3?s.jsx("button",{type:"button",onClick:E,className:"px-4 sm:px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors order-1 sm:order-2",children:"Siguiente"}):s.jsx("button",{type:"submit",disabled:r,className:"px-4 sm:px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-bold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 order-1 sm:order-2",children:r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(OB,{className:"w-5 h-5"}),"Enviar Solicitud"]})})]})]})}),s.jsx(tp,{notifications:N,onRemove:A})]})})}function qQ(){const t=uo();return s.jsx(sn,{mode:"wait",children:s.jsxs(IP,{location:t,children:[s.jsx(Pr,{path:"/",element:s.jsx(Wr,{children:s.jsx(Bq,{})})}),s.jsx(Pr,{path:"/profile",element:s.jsx(H5,{children:s.jsx(Wr,{children:s.jsx(Z_,{})})})}),s.jsx(Pr,{path:"/perfil",element:s.jsx(H5,{children:s.jsx(Wr,{children:s.jsx(Z_,{})})})}),s.jsx(Pr,{path:"/user/:userId",element:s.jsx(Wr,{children:s.jsx(iG,{})})}),s.jsx(Pr,{path:"/usuarios",element:s.jsx(Wr,{children:s.jsx(oG,{})})}),s.jsx(Pr,{path:"/admin",element:s.jsx(Oq,{})}),s.jsx(Pr,{path:"/producto/:id",element:s.jsx(Wr,{children:s.jsx(fG,{})})}),s.jsx(Pr,{path:"/carrito",element:s.jsx(Wr,{children:s.jsx(xG,{})})}),s.jsx(Pr,{path:"/contacto",element:s.jsx(Wr,{children:s.jsx(yG,{})})}),s.jsx(Pr,{path:"/nosotros",element:s.jsx(Wr,{children:s.jsx(GG,{})})}),s.jsx(Pr,{path:"/buscar",element:s.jsx(Wr,{children:s.jsx(MQ,{})})}),s.jsx(Pr,{path:"/categorias",element:s.jsx(Wr,{children:s.jsx(W5,{})})}),s.jsx(Pr,{path:"/Productos/:categoria?",element:s.jsx(Wr,{children:s.jsx(W5,{})})}),s.jsx(Pr,{path:"/estafetas",element:s.jsx(Wr,{children:s.jsx(VQ,{})})}),s.jsx(Pr,{path:"/vender",element:s.jsx(Wr,{children:s.jsx(vG,{})})}),s.jsx(Pr,{path:"/solicitar-vender",element:s.jsx(Wr,{children:s.jsx(HQ,{})})}),s.jsx(Pr,{path:"/tiendas",element:s.jsx(Wr,{children:s.jsx(bG,{})})}),s.jsx(Pr,{path:"/tiendas/:id",element:s.jsx(Wr,{children:s.jsx(HG,{})})}),s.jsx(Pr,{path:"/historial",element:s.jsx(Wr,{children:s.jsx(qG,{})})}),s.jsx(Pr,{path:"/payment/pending",element:s.jsx(Wr,{children:s.jsx(FQ,{})})}),s.jsx(Pr,{path:"/payment/success",element:s.jsx(Wr,{children:s.jsx($Q,{})})}),s.jsx(Pr,{path:"/payment/cancel",element:s.jsx(Wr,{children:s.jsx(BQ,{})})}),s.jsx(Pr,{path:"/login",element:s.jsx(Wr,{children:s.jsx(WQ,{})})})]},t.pathname)})}function Wr({children:t}){return s.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeInOut"},children:t})}function GQ(){const{pathname:t}=uo(),e=Sr(),{usuario:n}=er(),{abrirModal:r}=Fl(),[i,a]=b.useState(!1),l=u=>t===u,d=u=>{(u==="/profile"||u==="/carrito")&&!n?a(!0):e(u)};return s.jsxs(s.Fragment,{children:[s.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-t dark:border-gray-700 shadow-md flex justify-around items-center h-14 text-sm xl:hidden transition-colors duration-300",children:[s.jsx(Cf,{onClick:()=>d("/"),icon:s.jsx(RW,{}),label:"Inicio",active:l("/")}),s.jsx(Cf,{onClick:()=>d("/tiendas"),icon:s.jsx(OW,{}),label:"Tiendas",active:l("/tiendas")}),s.jsx(Cf,{onClick:()=>d("/categorias"),icon:s.jsx(VW,{}),label:"Categoras",active:l("/categorias")}),s.jsx(Cf,{onClick:()=>d("/carrito"),icon:s.jsx(q6,{}),label:"Carrito",active:l("/carrito")}),s.jsx(Cf,{onClick:()=>d("/profile"),icon:s.jsx(rh,{}),label:"Perfil",active:l("/profile")})]}),s.jsx(bx,{isOpen:i,onClose:()=>a(!1),onIniciarSesion:()=>{a(!1),r()}})]})}function Cf({onClick:t,icon:e,label:n,active:r}){return s.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center w-full h-full transition-colors ${r?"text-[#4FC3F7] font-semibold":"text-gray-600 dark:text-gray-300 hover:text-[#4FC3F7] dark:hover:text-[#60a5fa]"}`,"aria-label":n,type:"button",children:[s.jsx("div",{className:"text-lg",children:e}),s.jsx("div",{children:n})]})}const zv=fx();function KQ(){const{modalAbierto:t,setModalAbierto:e,modo:n,setModo:r}=Fl(),{login:i,signup:a,usuario:l,loginWithGoogle:d,loginWithApple:u,resetPassword:m,checkSignInMethods:g}=er(),{isDark:h}=Ss(),[y,w]=b.useState(n),[S,N]=b.useState(""),[_,D]=b.useState(""),[A,L]=b.useState(""),[I,F]=b.useState(""),[R,E]=b.useState(""),[M,O]=b.useState(!1),[j,U]=b.useState(""),[H,V]=b.useState(null),[K,X]=b.useState(!1),[ne,we]=b.useState(!1),[Z,le]=b.useState(!1),[re,B]=b.useState(!1),[ce,Se]=b.useState("email"),[Ve,$e]=b.useState(""),[Ke,Ye]=b.useState(""),[lt,Re]=b.useState(""),[Ct,Ue]=b.useState(""),[ot,ct]=b.useState(!1),[it,Lt]=b.useState(!1),[Bt,Ge]=b.useState(!1),[mn,Wt]=b.useState(!1),[an,At]=b.useState(!1);b.useEffect(()=>{const ge=localStorage.getItem("lastLoginEmail"),Ae=localStorage.getItem("lastUserData");if(ge&&U(ge),Ae)try{const Be=JSON.parse(Ae);V(Be)}catch{}},[]),b.useEffect(()=>{if(t){w(n),E("");const ge=localStorage.getItem("lastLoginEmail");ge?(N(ge),U(""),V(null)):N(""),D(""),L(""),F(""),we(!1),le(!1),B(!1),At(!1)}},[t,n]);function bn(){le(!0),Se("email"),$e(""),Ye(""),Re(""),Ue(""),Wt(!1)}async function Ht(){var ge;if(!S||!S.trim()){Ue("Por favor ingresa tu correo electrnico");return}ct(!0),Ue("");try{const Ae=Na(zv,"sendVerificationCode"),Be={browser:navigator.userAgent.includes("Chrome")?"Google Chrome":navigator.userAgent.includes("Firefox")?"Firefox":navigator.userAgent.includes("Safari")?"Safari":"Navegador",os:navigator.userAgent.includes("Mac")?"macOS":navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("Android")?"Android":navigator.userAgent.includes("iPhone")?"iOS":"Desconocido",location:"Repblica Dominicana"};await Ae({email:S.trim().toLowerCase(),userName:"Usuario",deviceInfo:Be,purpose:"password_reset"}),Se("code"),Vt(" Cdigo enviado a tu correo","success")}catch(Ae){console.error("Error enviando cdigo:",Ae),Ae.code==="functions/not-found"||(ge=Ae.message)!=null&&ge.includes("user-not-found")?Ue("No existe una cuenta con este correo electrnico."):Ue("Error al enviar el cdigo. Intenta de nuevo.")}finally{ct(!1)}}async function ze(){if(Ve.length!==6){Ue("El cdigo debe tener 6 dgitos");return}Lt(!0),Ue("");try{const Ae=await Na(zv,"verifyCode")({email:S.trim().toLowerCase(),code:Ve});Ae.data.success?(Wt(!0),Se("newPassword"),Vt(" Cdigo verificado","success")):Ue(Ae.data.error||"Cdigo invlido o expirado")}catch(ge){console.error("Error verificando cdigo:",ge),Ue("Error al verificar. Intenta de nuevo.")}finally{Lt(!1)}}async function Y(){if(Ke.length<6){Ue("La contrasea debe tener al menos 6 caracteres");return}if(Ke!==lt){Ue("Las contraseas no coinciden");return}Ge(!0),Ue("");try{const Ae=await Na(zv,"resetUserPassword")({email:S.trim().toLowerCase(),newPassword:Ke,verificationCode:Ve});Ae.data.success?(Se("success"),Vt(" Contrasea actualizada exitosamente","success")):Ue(Ae.data.error||"Error al cambiar la contrasea")}catch(ge){console.error("Error cambiando contrasea:",ge),Ue("Error al cambiar la contrasea. Intenta de nuevo.")}finally{Ge(!1)}}function ie(){le(!1),Se("email"),$e(""),Ye(""),Re(""),Ue(""),Wt(!1),D("")}async function pe(){var ge,Ae,Be,Ze;E(""),X(!0),we(!0);try{if(l){e(!1);return}const Rt=H;let Ie=j||(Rt==null?void 0:Rt.email)||"";if(Ie=(Ie||"").trim().toLowerCase(),!j&&Ie&&U(Ie),Ie){const gt=Rt==null?void 0:Rt.loginMethod;if(gt==="google"){E("Iniciando sesin con Google...");try{const Te=await d();if((ge=Te==null?void 0:Te.user)!=null&&ge.email){const nt=Te.user.email.toLowerCase(),ut={email:nt,loginMethod:"google",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",nt),localStorage.setItem("lastUserData",JSON.stringify(ut))}e(!1);return}catch(Te){Te.code==="auth/popup-closed-by-user"?E("Popup cerrado. Intenta de nuevo."):E("Error al iniciar con Google. Intenta de nuevo.")}}else if(gt==="apple"){E("Iniciando sesin con Apple...");try{const Te=await u();if((Ae=Te==null?void 0:Te.user)!=null&&Ae.email){const nt=Te.user.email.toLowerCase(),ut={email:nt,loginMethod:"apple",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",nt),localStorage.setItem("lastUserData",JSON.stringify(ut))}e(!1);return}catch{E("Error al iniciar con Apple. Intenta de nuevo.")}}else if(gt==="email"){N(Ie),we(!1),E("Por favor ingresa tu contrasea para continuar."),setTimeout(()=>{var Te;(Te=document.querySelector('input[type="password"]'))==null||Te.focus()},100),X(!1);return}const ft=await g(Ie);if(ft.includes("google.com")){E("Iniciando sesin con Google...");try{const Te=await d();if((Be=Te==null?void 0:Te.user)!=null&&Be.email){const nt=Te.user.email.toLowerCase(),ut={email:nt,loginMethod:"google",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",nt),localStorage.setItem("lastUserData",JSON.stringify(ut))}e(!1);return}catch(Te){Te.code==="auth/popup-closed-by-user"?E("Popup cerrado. Intenta de nuevo."):E("Error al iniciar con Google. Intenta de nuevo.")}}else if(ft.includes("apple.com")){E("Iniciando sesin con Apple...");try{const Te=await u();if((Ze=Te==null?void 0:Te.user)!=null&&Ze.email){const nt=Te.user.email.toLowerCase(),ut={email:nt,loginMethod:"apple",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",nt),localStorage.setItem("lastUserData",JSON.stringify(ut))}e(!1);return}catch{E("Error al iniciar con Apple. Intenta de nuevo.")}}else ft.includes("password")?(N(Ie),we(!1),E("Por favor ingresa tu contrasea para continuar."),setTimeout(()=>{var Te;(Te=document.querySelector('input[type="password"]'))==null||Te.focus()},100)):E("No se pudo verificar el mtodo de inicio de sesin. Selecciona una opcin abajo.")}else E("No hay cuenta guardada.");we(!1)}catch{E("Error al iniciar sesin. Intenta de nuevo."),we(!1)}finally{X(!1)}}async function he(ge){ge.preventDefault(),E(""),X(!0);const Ae=S.trim().toLowerCase(),Be=_;if(!Ae){E("Por favor ingresa tu correo electrnico"),X(!1);return}if(!Be){E("Por favor ingresa tu contrasea"),X(!1);return}if(Be.length<6){E("La contrasea debe tener al menos 6 caracteres"),X(!1);return}try{if(y==="login")try{await i(Ae,Be);const Ze={email:Ae,loginMethod:"email",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",Ae),localStorage.setItem("lastUserData",JSON.stringify(Ze))}catch(Ze){if(Ze.code==="auth/invalid-credential"){At(!0),E(""),X(!1),setTimeout(()=>{const Rt=document.querySelector(".google-login-btn");Rt&&(Rt.style.animation="pulse 1.5s ease-in-out 3",Rt.style.border="3px solid #4285f4")},500);return}else throw Ze}else{if(!I.trim()){E("El nmero de telfono es requerido"),X(!1);return}const Ze=await a(Ae,Be);await Cn(We(oe,"users",Ze.uid),{displayName:A||"Usuario",email:Ae,telefono:I||"",direccion:"",codigo:"",metodoEntrega:"",admin:!1,createdAt:new Date}),await Cn(We(oe,"usuarios",Ze.uid),{displayName:A||"Usuario",email:Ae,telefono:I||"",direccion:"",codigo:"",metodoEntrega:"",admin:!1,createdAt:new Date,uid:Ze.uid}),A&&await Mg(Ze,{displayName:A});const Rt={email:Ae,loginMethod:"email",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",Ae),localStorage.setItem("lastUserData",JSON.stringify(Rt))}e(!1)}catch(Ze){Ze.code==="auth/invalid-credential"||Ze.code==="auth/wrong-password"?(At(!0),E(""),X(!1),setTimeout(()=>{const Rt=document.querySelector(".google-login-btn");Rt&&(Rt.style.animation="pulse 1.5s ease-in-out 3",Rt.style.border="3px solid #4285f4")},500)):Ze.code==="auth/user-not-found"?E("No existe una cuenta con este correo. Por favor crea una cuenta nueva o verifica el correo electrnico."):Ze.code==="auth/invalid-login-credentials"?E("Credenciales incorrectas. Si olvidaste tu contrasea, usa 'Olvidaste tu contrasea?'"):Ze.code==="auth/email-already-in-use"?E("Este correo ya est registrado. Intenta iniciar sesin en lugar de crear una cuenta nueva."):Ze.code==="auth/weak-password"?E("La contrasea debe tener al menos 6 caracteres."):Ze.code==="auth/invalid-email"?E("El formato del correo electrnico no es vlido. Ejemplo: usuario@ejemplo.com"):Ze.code==="auth/too-many-requests"?E("Demasiados intentos fallidos. Espera unos minutos e intenta de nuevo, o usa 'Recuperar contrasea'."):Ze.code==="auth/network-request-failed"?E("Error de conexin a internet. Verifica tu conexin e intenta de nuevo."):E(`Error al iniciar sesin. Por favor intenta de nuevo. (${Ze.code||"Error desconocido"})`)}finally{X(!1)}}async function He(){var ge;E(""),X(!0);try{const Ae=await d();if((ge=Ae==null?void 0:Ae.user)!=null&&ge.email){const Be=Ae.user.email.toLowerCase(),Ze={email:Be,loginMethod:"google",timestamp:new Date().toISOString()};localStorage.setItem("lastLoginEmail",Be),localStorage.setItem("lastUserData",JSON.stringify(Ze))}e(!1)}catch(Ae){Ae.code==="auth/popup-closed-by-user"?E("Inicio de sesin cancelado."):Ae.code==="auth/popup-blocked"?E("Las ventanas emergentes estn bloqueadas. Por favor permtelas en tu navegador."):Ae.code==="auth/network-request-failed"?E("Error de conexin. Verifica tu internet e intenta de nuevo."):Ae.code==="auth/too-many-requests"?E("Demasiados intentos. Por favor intenta ms tarde."):E("Error al iniciar sesin con Google. Por favor intenta de nuevo.")}finally{X(!1)}}return t?s.jsx(Q.div,{id:"auth-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:h?"#111827":"#ffffff",zIndex:9999,overflowY:"auto",padding:"15px"},children:s.jsxs("div",{className:"w-100 d-flex flex-column justify-content-center",style:{maxWidth:"500px",margin:"auto",minHeight:"100%"},children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between py-3 px-4 flex-shrink-0",style:{borderBottom:`2px solid ${h?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)"}`},children:[s.jsx(Q.div,{className:"d-flex align-items-center",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:s.jsx("img",{src:"/play.png",alt:"Playcenter",className:"auth-modal-logo",style:{width:"auto",height:"42px",maxWidth:"130px",objectFit:"contain",filter:h?"brightness(1.1)":"brightness(0.95)"}})}),s.jsx(Q.button,{onClick:()=>e(!1),whileHover:{scale:1.05},whileTap:{scale:.95},transition:{duration:.2},className:"btn btn-close-modal",style:{background:"#2563eb",color:"#ffffff",border:"none",width:"40px",height:"40px",minWidth:"40px",minHeight:"40px",maxWidth:"40px",maxHeight:"40px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:"0",flexShrink:0},"aria-label":"Cerrar",children:s.jsx(ch,{size:18,color:"#ffffff"})})]}),s.jsxs("div",{className:"text-center py-4 px-4",style:{marginTop:"8px"},children:[s.jsx(Q.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"h3 fw-bold mb-3",style:{color:h?"#ffffff":"#111827",fontSize:"1.85rem",letterSpacing:"-0.6px",fontWeight:"700"},children:y==="login"?"Iniciar sesin":"Crear cuenta"}),s.jsx(Q.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mb-0",style:{color:h?"#9ca3af":"#6b7280",fontSize:"15px",lineHeight:"1.5"},children:y==="login"?"Ingresa tus credenciales para continuar":"Completa el formulario para registrarte"})]}),an&&y==="login"&&s.jsx(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:300,damping:25},className:"mx-4 mb-4",style:{background:h?"linear-gradient(135deg, rgba(66, 133, 244, 0.15) 0%, rgba(66, 133, 244, 0.08) 100%)":"linear-gradient(135deg, rgba(66, 133, 244, 0.12) 0%, rgba(66, 133, 244, 0.05) 100%)",border:`2px solid ${h?"rgba(66, 133, 244, 0.4)":"rgba(66, 133, 244, 0.3)"}`,borderRadius:"16px",padding:"20px",boxShadow:h?"0 8px 32px rgba(66, 133, 244, 0.25)":"0 8px 32px rgba(66, 133, 244, 0.15)"},children:s.jsxs("div",{className:"d-flex align-items-start gap-3",children:[s.jsx("div",{style:{minWidth:"48px",height:"48px",borderRadius:"12px",background:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:s.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 48 48",children:[s.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),s.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),s.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),s.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("div",{className:"fw-bold mb-2",style:{fontSize:"16px",color:h?"#ffffff":"#1f2937",lineHeight:"1.4"},children:" Esta cuenta est registrada en esta pgina como una de Google"}),s.jsxs("div",{className:"mb-3",style:{fontSize:"14px",color:h?"rgba(255, 255, 255, 0.85)":"#4b5563",lineHeight:"1.6"},children:["La cuenta ",s.jsx("strong",{children:S})," est registrada en esta pgina como una cuenta de Google."," ",s.jsx("strong",{children:"As que contina con Google"})," usando el botn ms abajo."]}),s.jsx("button",{type:"button",onClick:()=>{At(!1),N(""),D("")},className:"btn btn-sm px-3",style:{background:h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",border:`1px solid ${h?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)"}`,color:h?"#ffffff":"#1f2937",fontSize:"13px",fontWeight:"500",borderRadius:"8px"},children:"Entendido"})]})]})}),s.jsxs("div",{className:"px-4 pb-5 flex-grow-1 d-flex flex-column justify-content-start",style:{overflowY:"auto",maxWidth:"100%",paddingTop:"0.5rem"},children:[y==="login"&&j&&!ne&&s.jsxs(Q.button,{type:"button",onClick:pe,disabled:K,initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:K?1:1.02},whileTap:{scale:K?1:.98},className:"btn w-100 fw-semibold py-3 mb-4 d-flex align-items-center justify-content-between",style:{background:h?"rgba(59, 130, 246, 0.1)":"rgba(59, 130, 246, 0.08)",border:`2px solid ${h?"rgba(59, 130, 246, 0.25)":"rgba(59, 130, 246, 0.2)"}`,color:h?"#60a5fa":"#1e40af",borderRadius:"12px"},children:[s.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",borderRadius:"50%",background:h?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.15)"},children:K?s.jsx(Q.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},style:{width:"18px",height:"18px",border:"2px solid rgba(59, 130, 246, 0.3)",borderTopColor:h?"#60a5fa":"#1e40af",borderRadius:"50%"}}):s.jsx(rh,{size:18})}),s.jsxs("div",{className:"text-start flex-grow-1",children:[s.jsx("div",{className:"fw-bold mb-1",style:{fontSize:"15px"},children:(H==null?void 0:H.loginMethod)==="google"?"Continuar con Google":"Continuar como"}),s.jsx("div",{style:{fontSize:"13px",opacity:.9,wordBreak:"break-all",lineHeight:"1.3"},children:j})]})]}),s.jsx(qb,{size:16})]}),y==="login"&&j&&!ne&&s.jsx("div",{className:"text-center mb-3",children:s.jsx("button",{type:"button",onClick:()=>{U(""),V(null),localStorage.removeItem("lastLoginEmail"),localStorage.removeItem("lastUserData")},className:"btn btn-link text-decoration-none p-0",style:{fontSize:"13px",color:h?"#9ca3af":"#6b7280",fontWeight:"500"},children:"Usar otra cuenta"})}),y==="login"&&j&&!ne&&s.jsxs("div",{className:"d-flex align-items-center gap-3 mb-4",children:[s.jsx("div",{className:"flex-grow-1",style:{height:"1px",background:h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}}),s.jsx("span",{style:{color:h?"#9ca3af":"#6b7280",fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"o usa otra cuenta"}),s.jsx("div",{className:"flex-grow-1",style:{height:"1px",background:h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}})]}),R&&s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},transition:{type:"spring",stiffness:300,damping:20},className:"alert d-flex align-items-start gap-3 mb-4",style:{backgroundColor:h?"rgba(239, 68, 68, 0.1)":"rgba(254, 226, 226, 0.9)",borderLeft:`4px solid ${h?"#ef4444":"#dc2626"}`,borderRadius:"12px",padding:"14px 16px",color:h?"#fecaca":"#991b1b",boxShadow:h?"0 4px 12px rgba(239, 68, 68, 0.15)":"0 4px 12px rgba(239, 68, 68, 0.1)"},children:[s.jsx("div",{style:{fontSize:"20px",marginTop:"2px",color:h?"#ef4444":"#dc2626"},children:""}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("div",{className:"fw-semibold mb-1",style:{fontSize:"14px"},children:"Error al iniciar sesin"}),s.jsx("div",{style:{fontSize:"13px",lineHeight:"1.5",opacity:.95},children:R})]})]}),s.jsxs("form",{onSubmit:he,children:[y==="signup"&&s.jsxs(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-3",children:[s.jsxs("label",{className:"form-label fw-semibold mb-2",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(rh,{size:14,style:{opacity:.7}}),"Nombre completo"]}),s.jsx("input",{type:"text",required:!0,className:"form-control",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"10px",borderWidth:"1.5px",padding:"14px 16px",fontSize:"16px",transition:"all 0.2s ease"},value:A,onChange:ge=>L(ge.target.value),placeholder:"Tu nombre completo"})]}),y==="signup"&&s.jsxs(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-3",children:[s.jsxs("label",{className:"form-label fw-semibold mb-2",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(Tm,{size:14,style:{opacity:.7}}),"Nmero de telfono"]}),s.jsx("input",{type:"tel",required:!0,className:"form-control",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"10px",borderWidth:"1.5px",padding:"14px 16px",fontSize:"16px",transition:"all 0.2s ease"},value:I,onChange:ge=>F(ge.target.value),placeholder:"(809) 123-4567"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"form-label fw-semibold mb-2",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(lh,{size:14,style:{opacity:.7}}),"Correo electrnico"]}),s.jsx("input",{type:"email",required:!0,className:"form-control",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"10px",borderWidth:"1.5px",padding:"14px 16px",fontSize:"16px",transition:"all 0.2s ease"},value:S,onChange:ge=>N(ge.target.value),placeholder:"tu@email.com"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"form-label fw-semibold mb-2",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(fg,{size:14,style:{opacity:.7}}),"Contrasea"]}),s.jsxs("div",{className:"position-relative",children:[s.jsx("input",{type:M?"text":"password",required:!0,className:"form-control pe-5",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"10px",borderWidth:"1.5px",padding:"14px 16px",paddingRight:"50px",fontSize:"16px",transition:"all 0.2s ease"},value:_,onChange:ge=>D(ge.target.value),placeholder:""}),s.jsx("button",{type:"button",onClick:()=>O(!M),className:"position-absolute top-50 end-0 translate-middle-y me-3 btn btn-sm p-0",style:{color:h?"#9ca3af":"#6b7280",backgroundColor:"transparent",border:"none",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:M?s.jsx(v_,{size:16}):s.jsx(b_,{size:16})})]})]}),s.jsx(Q.button,{type:"submit",disabled:K,whileHover:{scale:K?1:1.02},whileTap:{scale:K?1:.98},transition:{type:"spring",stiffness:400},className:"btn w-100 fw-bold mb-3 d-flex align-items-center justify-content-center gap-2",style:{background:K?"linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)":"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",border:"none",color:"#ffffff",borderRadius:"10px",padding:"15px 24px",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 12px rgba(37, 99, 235, 0.4)",transition:"all 0.2s ease",opacity:K?.8:1,minHeight:"50px"},children:K?s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#ffffff",borderRadius:"50%"}}),s.jsx("span",{children:y==="login"?"Iniciando...":"Creando cuenta..."})]}):s.jsxs(s.Fragment,{children:[y==="login"?s.jsx(rh,{size:15}):s.jsx(FW,{size:15}),s.jsx("span",{children:y==="login"?"Iniciar sesin":"Crear cuenta"})]})}),y==="login"&&!Z&&s.jsx("div",{className:"text-center mt-3 mb-2",children:s.jsx("button",{type:"button",onClick:bn,disabled:K,className:"btn btn-link text-decoration-none p-0 forgot-password-btn",style:{fontSize:"13px",color:h?"#60a5fa":"#1e40af",fontWeight:"500"},children:"Olvidaste tu contrasea?"})})]}),s.jsx(sn,{children:Z&&s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"recovery-flow",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:h?"#111827":"#ffffff",padding:"20px",display:"flex",flexDirection:"column",zIndex:10},children:[s.jsxs("div",{className:"d-flex align-items-center gap-3 mb-4",children:[s.jsx("button",{onClick:ie,className:"btn p-2",style:{background:h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",borderRadius:"10px",border:"none",color:h?"#fff":"#000"},children:s.jsx(EW,{size:18})}),s.jsx("h2",{style:{margin:0,color:h?"#fff":"#000",fontSize:"1.5rem",fontWeight:"700"},children:ce==="success"?"Listo!":"Recuperar contrasea"})]}),ce==="email"&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"flex-grow-1 d-flex flex-column",children:[s.jsx("p",{style:{color:h?"#9ca3af":"#6b7280",marginBottom:"24px"},children:"Ingresa tu correo electrnico y te enviaremos un cdigo de 6 dgitos para verificar tu identidad."}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"form-label fw-semibold mb-2",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px"},children:[s.jsx(lh,{size:14,style:{opacity:.7,marginRight:"8px"}}),"Correo electrnico"]}),s.jsx("input",{type:"email",className:"form-control",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"10px",padding:"14px 16px",fontSize:"16px"},value:S,onChange:ge=>N(ge.target.value),placeholder:"tu@email.com"})]}),Ct&&s.jsx("div",{className:"alert",style:{backgroundColor:h?"rgba(239, 68, 68, 0.1)":"rgba(254, 226, 226, 0.9)",borderLeft:`4px solid ${h?"#ef4444":"#dc2626"}`,borderRadius:"12px",padding:"12px 16px",color:h?"#fecaca":"#991b1b",marginBottom:"16px"},children:Ct}),s.jsx(Q.button,{onClick:Ht,disabled:ot||!S.trim(),whileHover:{scale:ot?1:1.02},whileTap:{scale:ot?1:.98},className:"btn w-100 fw-bold d-flex align-items-center justify-content-center gap-2",style:{background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",border:"none",color:"#ffffff",borderRadius:"10px",padding:"15px 24px",fontSize:"16px",opacity:ot||!S.trim()?.7:1},children:ot?s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#ffffff",borderRadius:"50%"}}),"Enviando cdigo..."]}):s.jsxs(s.Fragment,{children:[s.jsx(lh,{size:16}),"Enviar cdigo de verificacin"]})})]}),ce==="code"&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"flex-grow-1 d-flex flex-column",children:[s.jsxs("p",{style:{color:h?"#9ca3af":"#6b7280",marginBottom:"24px"},children:["Enviamos un cdigo de 6 dgitos a ",s.jsx("strong",{children:S}),". Revisa tu bandeja de entrada."]}),s.jsxs("div",{className:"mb-4 text-center",children:[s.jsxs("label",{className:"form-label fw-semibold mb-3 d-block",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px"},children:[s.jsx(LW,{size:14,style:{opacity:.7,marginRight:"8px"}}),"Cdigo de verificacin"]}),s.jsx("input",{type:"text",maxLength:6,className:"form-control mx-auto",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"12px",padding:"16px",fontSize:"32px",fontFamily:"monospace",letterSpacing:"0.5em",textAlign:"center",width:"220px",border:"2px solid"},value:Ve,onChange:ge=>{const Ae=ge.target.value.replace(/\D/g,"");$e(Ae),Ue("")},placeholder:"000000"})]}),Ct&&s.jsx("div",{className:"alert",style:{backgroundColor:h?"rgba(239, 68, 68, 0.1)":"rgba(254, 226, 226, 0.9)",borderLeft:`4px solid ${h?"#ef4444":"#dc2626"}`,borderRadius:"12px",padding:"12px 16px",color:h?"#fecaca":"#991b1b",marginBottom:"16px"},children:Ct}),s.jsx(Q.button,{onClick:ze,disabled:it||Ve.length!==6,whileHover:{scale:it?1:1.02},whileTap:{scale:it?1:.98},className:"btn w-100 fw-bold d-flex align-items-center justify-content-center gap-2 mb-3",style:{background:Ve.length===6?"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)":h?"rgba(75, 85, 99, 0.5)":"#e5e7eb",border:"none",color:Ve.length===6?"#ffffff":h?"#9ca3af":"#6b7280",borderRadius:"10px",padding:"15px 24px",fontSize:"16px"},children:it?s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#ffffff",borderRadius:"50%"}}),"Verificando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(gv,{size:16}),"Verificar cdigo"]})}),s.jsx("button",{onClick:Ht,disabled:ot,className:"btn btn-link text-decoration-none",style:{color:h?"#60a5fa":"#1e40af",fontSize:"14px"},children:ot?"Enviando...":"No recibiste el cdigo? Reenviar"})]}),ce==="newPassword"&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"flex-grow-1 d-flex flex-column",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2 mb-4",style:{background:h?"rgba(34, 197, 94, 0.1)":"rgba(220, 252, 231, 0.9)",padding:"12px 16px",borderRadius:"10px",color:h?"#86efac":"#15803d"},children:[s.jsx(gv,{size:18}),s.jsx("span",{children:"Identidad verificada. Ahora crea tu nueva contrasea."})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"form-label fw-semibold mb-2",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px"},children:[s.jsx(fg,{size:14,style:{opacity:.7,marginRight:"8px"}}),"Nueva contrasea"]}),s.jsxs("div",{className:"position-relative",children:[s.jsx("input",{type:M?"text":"password",className:"form-control",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"10px",padding:"14px 16px",paddingRight:"50px",fontSize:"16px"},value:Ke,onChange:ge=>Ye(ge.target.value),placeholder:"Mnimo 6 caracteres"}),s.jsx("button",{type:"button",onClick:()=>O(!M),className:"position-absolute top-50 end-0 translate-middle-y me-3 btn btn-sm p-0",style:{color:h?"#9ca3af":"#6b7280",background:"transparent",border:"none"},children:M?s.jsx(v_,{size:16}):s.jsx(b_,{size:16})})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"form-label fw-semibold mb-2",style:{color:h?"#e5e7eb":"#374151",fontSize:"14px"},children:[s.jsx(fg,{size:14,style:{opacity:.7,marginRight:"8px"}}),"Confirmar contrasea"]}),s.jsx("input",{type:M?"text":"password",className:"form-control",style:{backgroundColor:h?"rgba(31, 41, 55, 0.5)":"#ffffff",borderColor:h?"rgba(75, 85, 99, 0.5)":"#d1d5db",color:h?"#ffffff":"#111827",borderRadius:"10px",padding:"14px 16px",fontSize:"16px"},value:lt,onChange:ge=>Re(ge.target.value),placeholder:"Repite la contrasea"})]}),Ct&&s.jsx("div",{className:"alert",style:{backgroundColor:h?"rgba(239, 68, 68, 0.1)":"rgba(254, 226, 226, 0.9)",borderLeft:`4px solid ${h?"#ef4444":"#dc2626"}`,borderRadius:"12px",padding:"12px 16px",color:h?"#fecaca":"#991b1b",marginBottom:"16px"},children:Ct}),s.jsx(Q.button,{onClick:Y,disabled:Bt||!Ke||!lt,whileHover:{scale:Bt?1:1.02},whileTap:{scale:Bt?1:.98},className:"btn w-100 fw-bold d-flex align-items-center justify-content-center gap-2",style:{background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",border:"none",color:"#ffffff",borderRadius:"10px",padding:"15px 24px",fontSize:"16px",opacity:Bt||!Ke||!lt?.7:1},children:Bt?s.jsxs(s.Fragment,{children:[s.jsx(Q.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},style:{width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#ffffff",borderRadius:"50%"}}),"Guardando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fg,{size:16}),"Guardar nueva contrasea"]})})]}),ce==="success"&&s.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex-grow-1 d-flex flex-column align-items-center justify-content-center text-center",children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"24px"},children:s.jsx(gv,{size:40,color:"#fff"})}),s.jsx("h3",{style:{color:h?"#fff":"#000",marginBottom:"12px"},children:"Contrasea actualizada!"}),s.jsx("p",{style:{color:h?"#9ca3af":"#6b7280",marginBottom:"32px"},children:"Tu contrasea ha sido cambiada exitosamente. Ya puedes iniciar sesin con tu nueva contrasea."}),s.jsxs(Q.button,{onClick:ie,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn fw-bold d-flex align-items-center justify-content-center gap-2",style:{background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",border:"none",color:"#ffffff",borderRadius:"10px",padding:"15px 40px",fontSize:"16px"},children:[s.jsx(rh,{size:16}),"Iniciar sesin"]})]})]})}),s.jsxs(Q.div,{className:"d-flex align-items-center gap-3 mb-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[s.jsx("div",{className:"flex-grow-1 position-relative",style:{height:"2px",background:h?"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%)":"linear-gradient(90deg, transparent 0%, rgba(0, 0, 0, 0.2) 50%, transparent 100%)"}}),s.jsx("span",{className:"fw-semibold",style:{color:h?"#ffffff":"#000000",fontSize:"13px",letterSpacing:"0.5px",textTransform:"uppercase"},children:"o contina con"}),s.jsx("div",{className:"flex-grow-1",style:{height:"2px",background:h?"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%)":"linear-gradient(90deg, transparent 0%, rgba(0, 0, 0, 0.2) 50%, transparent 100%)"}})]}),s.jsx(Q.div,{className:"d-flex flex-column flex-sm-row gap-2 mb-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:s.jsxs(Q.button,{type:"button",onClick:He,disabled:K,whileHover:{scale:K?1:1.02},whileTap:{scale:K?1:.98},transition:{type:"spring",stiffness:400},className:"btn w-100 fw-semibold d-flex align-items-center justify-content-center gap-3 google-login-btn",style:{background:"#2563eb",border:"none",color:"#ffffff",borderRadius:"10px",padding:"15px 24px",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 12px rgba(37, 99, 235, 0.4)",transition:"all 0.2s ease",minHeight:"50px"},children:[s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),s.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),s.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),s.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),s.jsx("span",{children:"Continuar con Google"})]})}),s.jsx(Q.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},children:s.jsx(Q.button,{type:"button",onClick:()=>{E("");const ge=y==="login"?"signup":"login";w(ge),r(ge)},whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn p-0 text-decoration-none fw-semibold",style:{color:h?"#ffffff":"#000000",background:"transparent",border:"none",fontSize:"14px"},children:y==="login"?s.jsxs("span",{children:["No tienes cuenta?"," ",s.jsx("span",{style:{color:h?"#ffffff":"#000000",fontWeight:"700"},children:"Regstrate aqu"})]}):s.jsxs("span",{children:["Ya tienes cuenta?"," ",s.jsx("span",{style:{color:h?"#ffffff":"#000000",fontWeight:"700"},children:"Inicia sesin"})]})})})]})]})}):null}const YQ=()=>{const{pathname:t}=uo();return b.useEffect(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0;const e=document.querySelector("main");e&&(e.scrollTop=0)},[t]),null};function XQ(){mw();const{theme:t,toggleTheme:e}=Ss(),n=Sr(),r=uo(),[i,a]=b.useState(typeof window<"u"?window.innerWidth<768:!0);b.useEffect(()=>{const d=()=>{a(window.innerWidth<768)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const l={display:"flex",margin:0,padding:0,borderTop:"none",marginTop:0};return i?s.jsxs("div",{style:{...l,padding:"0.25rem 0.5rem",margin:0,background:t==="dark"?"linear-gradient(to right, #1e3a8a, #1e40af, #1e3a8a)":"#ffffff",color:t==="dark"?"#e5e7eb":"#374151"},className:"flex topbar-base topbar-tech shadow-md justify-between items-center transition-colors duration-300",role:"region","aria-label":"Top bar",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs md:text-sm whitespace-nowrap theme-text",style:{color:t==="dark"?"#e5e7eb":"#374151"},children:[(r.pathname.startsWith("/producto/")||r.pathname.startsWith("/Producto/"))&&s.jsx("button",{onClick:()=>n(-1),className:"flex items-center justify-center w-7 h-7 rounded-full bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-all duration-200 hover:scale-110 active:scale-95 shadow-sm hover:shadow-md","aria-label":"Volver atrs",children:s.jsx(aq,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsx("span",{children:"Sitio oficial de las tiendas de videojuegos en RD"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("label",{className:"theme-toggle",children:[s.jsx("input",{type:"checkbox",checked:t==="dark",onChange:e,className:"theme-toggle__input","aria-label":"Cambiar tema"}),s.jsxs("svg",{className:"theme-toggle__icon theme-toggle__icon--sun",fill:"none",height:"18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"18",children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("line",{x1:"12",x2:"12",y1:"1",y2:"3"}),s.jsx("line",{x1:"12",x2:"12",y1:"21",y2:"23"}),s.jsx("line",{x1:"4.22",x2:"5.64",y1:"4.22",y2:"5.64"}),s.jsx("line",{x1:"18.36",x2:"19.78",y1:"18.36",y2:"19.78"}),s.jsx("line",{x1:"1",x2:"3",y1:"12",y2:"12"}),s.jsx("line",{x1:"21",x2:"23",y1:"12",y2:"12"}),s.jsx("line",{x1:"4.22",x2:"5.64",y1:"19.78",y2:"18.36"}),s.jsx("line",{x1:"18.36",x2:"19.78",y1:"5.64",y2:"4.22"})]}),s.jsx("svg",{className:"theme-toggle__icon theme-toggle__icon--moon",viewBox:"0 0 24 24",children:s.jsx("path",{d:"m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z"})})]})})]}):null}const QQ=()=>!0;function JQ(){const{theme:t}=Ss(),e=t==="dark";return s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-[9999] flex items-center justify-center ${e?"bg-gray-900":"bg-white"}`,children:[s.jsx("style",{children:`
        .account-loader {
          position: absolute;
          top: 50%;
          margin-left: -50px;
          left: 50%;
          animation: speeder 0.4s linear infinite;
        }
        .account-loader > span {
          height: 5px;
          width: 35px;
          background: ${e?"#fff":"#000"};
          position: absolute;
          top: -19px;
          left: 60px;
          border-radius: 2px 10px 1px 0;
        }
        .base span {
          position: absolute;
          width: 0;
          height: 0;
          border-top: 6px solid transparent;
          border-right: 100px solid ${e?"#fff":"#000"};
          border-bottom: 6px solid transparent;
        }
        .base span:before {
          content: "";
          height: 22px;
          width: 22px;
          border-radius: 50%;
          background: ${e?"#fff":"#000"};
          position: absolute;
          right: -110px;
          top: -16px;
        }
        .base span:after {
          content: "";
          position: absolute;
          width: 0;
          height: 0;
          border-top: 0 solid transparent;
          border-right: 55px solid ${e?"#fff":"#000"};
          border-bottom: 16px solid transparent;
          top: -16px;
          right: -98px;
        }
        .face {
          position: absolute;
          height: 12px;
          width: 20px;
          background: ${e?"#fff":"#000"};
          border-radius: 20px 20px 0 0;
          transform: rotate(-40deg);
          right: -125px;
          top: -15px;
        }
        .face:after {
          content: "";
          height: 12px;
          width: 12px;
          background: ${e?"#fff":"#000"};
          right: 4px;
          top: 7px;
          position: absolute;
          transform: rotate(40deg);
          transform-origin: 50% 50%;
          border-radius: 0 0 0 2px;
        }
        .account-loader > span > span:nth-child(1),
        .account-loader > span > span:nth-child(2),
        .account-loader > span > span:nth-child(3),
        .account-loader > span > span:nth-child(4) {
          width: 30px;
          height: 1px;
          background: ${e?"#fff":"#000"};
          position: absolute;
          animation: fazer1 0.2s linear infinite;
        }
        .account-loader > span > span:nth-child(2) {
          top: 3px;
          animation: fazer2 0.4s linear infinite;
        }
        .account-loader > span > span:nth-child(3) {
          top: 1px;
          animation: fazer3 0.4s linear infinite;
          animation-delay: -1s;
        }
        .account-loader > span > span:nth-child(4) {
          top: 4px;
          animation: fazer4 1s linear infinite;
          animation-delay: -1s;
        }
        @keyframes fazer1 {
          0% {
            left: 0;
          }
          100% {
            left: -80px;
            opacity: 0;
          }
        }
        @keyframes fazer2 {
          0% {
            left: 0;
          }
          100% {
            left: -100px;
            opacity: 0;
          }
        }
        @keyframes fazer3 {
          0% {
            left: 0;
          }
          100% {
            left: -50px;
            opacity: 0;
          }
        }
        @keyframes fazer4 {
          0% {
            left: 0;
          }
          100% {
            left: -150px;
            opacity: 0;
          }
        }
        @keyframes speeder {
          0% {
            transform: translate(2px, 1px) rotate(0deg);
          }
          10% {
            transform: translate(-1px, -3px) rotate(-1deg);
          }
          20% {
            transform: translate(-2px, 0px) rotate(1deg);
          }
          30% {
            transform: translate(1px, 2px) rotate(0deg);
          }
          40% {
            transform: translate(1px, -1px) rotate(1deg);
          }
          50% {
            transform: translate(-1px, 3px) rotate(-1deg);
          }
          60% {
            transform: translate(-1px, 1px) rotate(0deg);
          }
          70% {
            transform: translate(3px, 1px) rotate(-1deg);
          }
          80% {
            transform: translate(-2px, -1px) rotate(1deg);
          }
          90% {
            transform: translate(2px, 1px) rotate(0deg);
          }
          100% {
            transform: translate(1px, -2px) rotate(-1deg);
          }
        }
        .longfazers {
          position: absolute;
          width: 100%;
          height: 100%;
        }
        .longfazers span {
          position: absolute;
          height: 2px;
          width: 20%;
          background: ${e?"#fff":"#000"};
        }
        .longfazers span:nth-child(1) {
          top: 20%;
          animation: lf 0.6s linear infinite;
          animation-delay: -5s;
        }
        .longfazers span:nth-child(2) {
          top: 40%;
          animation: lf2 0.8s linear infinite;
          animation-delay: -1s;
        }
        .longfazers span:nth-child(3) {
          top: 60%;
          animation: lf3 0.6s linear infinite;
        }
        .longfazers span:nth-child(4) {
          top: 80%;
          animation: lf4 0.5s linear infinite;
          animation-delay: -3s;
        }
        @keyframes lf {
          0% {
            left: 200%;
          }
          100% {
            left: -200%;
            opacity: 0;
          }
        }
        @keyframes lf2 {
          0% {
            left: 200%;
          }
          100% {
            left: -200%;
            opacity: 0;
          }
        }
        @keyframes lf3 {
          0% {
            left: 200%;
          }
          100% {
            left: -100%;
            opacity: 0;
          }
        }
        @keyframes lf4 {
          0% {
            left: 200%;
          }
          100% {
            left: -100%;
            opacity: 0;
          }
        }
      `}),s.jsxs("div",{className:"account-loader",children:[s.jsxs("span",{children:[s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{})]}),s.jsxs("div",{className:"base",children:[s.jsx("span",{}),s.jsx("div",{className:"face"})]})]}),s.jsxs("div",{className:"longfazers",children:[s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{}),s.jsx("span",{})]}),s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"fixed bottom-20 left-0 right-0 flex flex-col items-center justify-center text-center w-full px-4",children:[s.jsx("h2",{className:`text-2xl sm:text-3xl font-semibold ${e?"text-white":"text-gray-900"}`,style:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"},children:"Cambiando cuenta"}),s.jsx("p",{className:`mt-2 text-base ${e?"text-gray-400":"text-gray-600"}`,style:{fontFamily:"'Inter', sans-serif"},children:"Un momento por favor"}),s.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:[0,1,2].map(n=>s.jsx(Q.div,{animate:{opacity:[.3,1,.3]},transition:{duration:1.2,repeat:1/0,delay:n*.2,ease:"easeInOut"},className:`w-2 h-2 rounded-full ${e?"bg-white":"bg-gray-900"}`},n))})]})]})}let Fv=!1;async function ZQ(){var t,e,n;if(!Fv){Fv=!0;try{const r=await rn(pt(oe,"users"));let i=0;for(const a of r.docs){const l=a.id,d=a.data(),u=await rn(pt(oe,`users/${l}/followers`)),m=await rn(pt(oe,`users/${l}/following`)),g=u.size,h=m.size,y=((t=d.stats)==null?void 0:t.seguidores)||0,w=((e=d.stats)==null?void 0:e.seguidos)||0;(y!==g||w!==h)&&(i++,await Cn(We(oe,"users",l),{stats:{seguidores:g,seguidos:h,publicaciones:((n=d.stats)==null?void 0:n.publicaciones)||0}},{merge:!0}))}i>0}catch{}finally{Fv=!1}}}const eJ=Array.from({length:4}),tJ=Array.from({length:40}),nJ=()=>s.jsxs("div",{className:"connection-error-page",children:[s.jsx("div",{className:"matrix-container","aria-hidden":"true",children:eJ.map((t,e)=>s.jsx("div",{className:"matrix-pattern",children:tJ.map((n,r)=>s.jsx("div",{className:"matrix-column"},r))},e))}),s.jsx("div",{className:"connection-error-content",children:s.jsxs("div",{className:"connection-error-card animate-fade-in",children:[s.jsx("div",{className:"connection-error-logo",children:s.jsx("img",{src:"/PCU.png",alt:"Playcenter Universal",className:"connection-error-logo-img"})}),s.jsxs("div",{className:"connection-error-body",children:[s.jsx("div",{className:"connection-error-icon",children:s.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:"connection-error-icon-svg",children:s.jsx("path",{d:"M12 18.5a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Zm6.36-7.78a11.25 11.25 0 0 0-12.72 0 1 1 0 1 0 1.12 1.64 9.25 9.25 0 0 1 10.48 0 1 1 0 0 0 1.12-1.64Zm-3 3.9a7.25 7.25 0 0 0-6.72 0 1 1 0 1 0 .92 1.76 5.25 5.25 0 0 1 4.88 0 1 1 0 0 0 .92-1.76Zm-3-6.9a13.25 13.25 0 0 0-8 2.6 1 1 0 0 0 1.2 1.6 11.25 11.25 0 0 1 13.6 0 1 1 0 0 0 1.2-1.6 13.25 13.25 0 0 0-8-2.6Z",fill:"currentColor"})})}),s.jsx("h1",{className:"connection-error-title",children:"Sin conexin a internet"}),s.jsx("p",{className:"connection-error-text",children:"Por favor, verifica tu conexin a internet y vuelve a intentarlo."}),s.jsx("p",{className:"connection-error-subtext",children:"Revisa tu WiFi o datos mviles. Si ya ests conectado, recarga la pgina o vuelve al inicio."}),s.jsxs("div",{className:"connection-error-actions",children:[s.jsx("button",{type:"button",className:"connection-error-button-primary",onClick:()=>window.location.reload(),children:"Reintentar conexin"}),s.jsx("button",{type:"button",className:"connection-error-button-secondary",onClick:()=>window.location.href="/",children:"Volver al inicio"})]})]})]})})]});function rJ(){const[t,e]=b.useState(navigator.onLine),[n,r]=b.useState(!navigator.onLine);return b.useEffect(()=>{const i=()=>{e(!0),r(!1)},a=()=>{e(!1),r(!0)};window.addEventListener("online",i),window.addEventListener("offline",a);const l=async()=>{try{const u=await fetch("https://www.google.com/favicon.ico",{mode:"no-cors",cache:"no-cache",signal:AbortSignal.timeout(3e3)});t||(e(!0),r(!1))}catch{t&&(e(!1),r(!0))}},d=setInterval(l,3e4);return l(),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a),clearInterval(d)}},[t]),{isOnline:t,showError:n,setShowError:r}}function sJ(){const{theme:t}=Ss(),{isSwitching:e}=sE(),{showError:n}=rJ(),[r,i]=b.useState(!0),[a,l]=b.useState(0),d=b.useRef(0),u=b.useRef(null);return b.useEffect(()=>{const m=()=>{if(u.current){const h=u.current.offsetHeight;l(h+8)}};m(),window.addEventListener("resize",m);const g=setTimeout(m,100);return()=>{window.removeEventListener("resize",m),clearTimeout(g)}},[]),b.useEffect(()=>{let m=!1;const g=()=>{m||(window.requestAnimationFrame(()=>{const h=window.pageYOffset,y=d.current;h>y&&h>50?i(!1):(h<y||h===0)&&i(!0),d.current=h,m=!1}),m=!0)};return window.addEventListener("scroll",g,{passive:!0}),()=>window.removeEventListener("scroll",g)},[]),s.jsxs(s.Fragment,{children:[n?s.jsx(nJ,{}):s.jsxs("div",{className:"min-h-screen flex flex-col bg-white dark:bg-gray-900 transition-colors duration-300",children:[s.jsxs("div",{ref:u,className:"fixed top-0 left-0 right-0 z-[900] w-full flex flex-col shadow-sm transition-transform duration-300 ease-in-out",style:{transform:r?"translateY(0)":"translateY(-100%)"},children:[s.jsx(KW,{}),s.jsx(XQ,{})]}),s.jsxs("main",{className:"flex-grow",style:{paddingTop:`${a}px`},children:[s.jsx(YQ,{}),s.jsx(qQ,{})]}),s.jsx(YW,{}),s.jsx(GQ,{}),s.jsx(KQ,{})]}),s.jsx(sn,{children:e&&s.jsx(JQ,{})})]})}function iJ(){const[t,e]=b.useState(!1);return b.useEffect(()=>{const n=QQ();e(n);try{localStorage.removeItem("deletedProductIds")}catch{}setTimeout(()=>{ZQ().catch(r=>{})},2e3)},[]),t?s.jsx(gW,{children:s.jsx(KO,{children:s.jsx(sJ,{})})}):null}var Qg={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var aJ=Qg.exports,G5;function oJ(){return G5||(G5=1,function(t,e){(function(n,r){t.exports=r()})(aJ,function(){const n=new Map,r={set($,v,P){n.has($)||n.set($,new Map);const q=n.get($);q.has(v)||q.size===0?q.set(v,P):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(q.keys())[0]}.`)},get:($,v)=>n.has($)&&n.get($).get(v)||null,remove($,v){if(!n.has($))return;const P=n.get($);P.delete(v),P.size===0&&n.delete($)}},i="transitionend",a=$=>($&&window.CSS&&window.CSS.escape&&($=$.replace(/#([^\s"#']+)/g,(v,P)=>`#${CSS.escape(P)}`)),$),l=$=>$==null?`${$}`:Object.prototype.toString.call($).match(/\s([a-z]+)/i)[1].toLowerCase(),d=$=>{$.dispatchEvent(new Event(i))},u=$=>!(!$||typeof $!="object")&&($.jquery!==void 0&&($=$[0]),$.nodeType!==void 0),m=$=>u($)?$.jquery?$[0]:$:typeof $=="string"&&$.length>0?document.querySelector(a($)):null,g=$=>{if(!u($)||$.getClientRects().length===0)return!1;const v=getComputedStyle($).getPropertyValue("visibility")==="visible",P=$.closest("details:not([open])");if(!P)return v;if(P!==$){const q=$.closest("summary");if(q&&q.parentNode!==P||q===null)return!1}return v},h=$=>!$||$.nodeType!==Node.ELEMENT_NODE||!!$.classList.contains("disabled")||($.disabled!==void 0?$.disabled:$.hasAttribute("disabled")&&$.getAttribute("disabled")!=="false"),y=$=>{if(!document.documentElement.attachShadow)return null;if(typeof $.getRootNode=="function"){const v=$.getRootNode();return v instanceof ShadowRoot?v:null}return $ instanceof ShadowRoot?$:$.parentNode?y($.parentNode):null},w=()=>{},S=$=>{$.offsetHeight},N=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_=[],D=()=>document.documentElement.dir==="rtl",A=$=>{var v;v=()=>{const P=N();if(P){const q=$.NAME,de=P.fn[q];P.fn[q]=$.jQueryInterface,P.fn[q].Constructor=$,P.fn[q].noConflict=()=>(P.fn[q]=de,$.jQueryInterface)}},document.readyState==="loading"?(_.length||document.addEventListener("DOMContentLoaded",()=>{for(const P of _)P()}),_.push(v)):v()},L=($,v=[],P=$)=>typeof $=="function"?$.call(...v):P,I=($,v,P=!0)=>{if(!P)return void L($);const q=(Ne=>{if(!Ne)return 0;let{transitionDuration:De,transitionDelay:st}=window.getComputedStyle(Ne);const Nt=Number.parseFloat(De),Tt=Number.parseFloat(st);return Nt||Tt?(De=De.split(",")[0],st=st.split(",")[0],1e3*(Number.parseFloat(De)+Number.parseFloat(st))):0})(v)+5;let de=!1;const fe=({target:Ne})=>{Ne===v&&(de=!0,v.removeEventListener(i,fe),L($))};v.addEventListener(i,fe),setTimeout(()=>{de||d(v)},q)},F=($,v,P,q)=>{const de=$.length;let fe=$.indexOf(v);return fe===-1?!P&&q?$[de-1]:$[0]:(fe+=P?1:-1,q&&(fe=(fe+de)%de),$[Math.max(0,Math.min(fe,de-1))])},R=/[^.]*(?=\..*)\.|.*/,E=/\..*/,M=/::\d+$/,O={};let j=1;const U={mouseenter:"mouseover",mouseleave:"mouseout"},H=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function V($,v){return v&&`${v}::${j++}`||$.uidEvent||j++}function K($){const v=V($);return $.uidEvent=v,O[v]=O[v]||{},O[v]}function X($,v,P=null){return Object.values($).find(q=>q.callable===v&&q.delegationSelector===P)}function ne($,v,P){const q=typeof v=="string",de=q?P:v||P;let fe=re($);return H.has(fe)||(fe=$),[q,de,fe]}function we($,v,P,q,de){if(typeof v!="string"||!$)return;let[fe,Ne,De]=ne(v,P,q);v in U&&(Ne=(ln=>function(cn){if(!cn.relatedTarget||cn.relatedTarget!==cn.delegateTarget&&!cn.delegateTarget.contains(cn.relatedTarget))return ln.call(this,cn)})(Ne));const st=K($),Nt=st[De]||(st[De]={}),Tt=X(Nt,Ne,fe?P:null);if(Tt)return void(Tt.oneOff=Tt.oneOff&&de);const bt=V(Ne,v.replace(R,"")),gn=fe?function(Qt,ln,cn){return function nn(qn){const cr=Qt.querySelectorAll(ln);for(let{target:yn}=qn;yn&&yn!==this;yn=yn.parentNode)for(const Ln of cr)if(Ln===yn)return ce(qn,{delegateTarget:yn}),nn.oneOff&&B.off(Qt,qn.type,ln,cn),cn.apply(yn,[qn])}}($,P,Ne):function(Qt,ln){return function cn(nn){return ce(nn,{delegateTarget:Qt}),cn.oneOff&&B.off(Qt,nn.type,ln),ln.apply(Qt,[nn])}}($,Ne);gn.delegationSelector=fe?P:null,gn.callable=Ne,gn.oneOff=de,gn.uidEvent=bt,Nt[bt]=gn,$.addEventListener(De,gn,fe)}function Z($,v,P,q,de){const fe=X(v[P],q,de);fe&&($.removeEventListener(P,fe,!!de),delete v[P][fe.uidEvent])}function le($,v,P,q){const de=v[P]||{};for(const[fe,Ne]of Object.entries(de))fe.includes(q)&&Z($,v,P,Ne.callable,Ne.delegationSelector)}function re($){return $=$.replace(E,""),U[$]||$}const B={on($,v,P,q){we($,v,P,q,!1)},one($,v,P,q){we($,v,P,q,!0)},off($,v,P,q){if(typeof v!="string"||!$)return;const[de,fe,Ne]=ne(v,P,q),De=Ne!==v,st=K($),Nt=st[Ne]||{},Tt=v.startsWith(".");if(fe===void 0){if(Tt)for(const bt of Object.keys(st))le($,st,bt,v.slice(1));for(const[bt,gn]of Object.entries(Nt)){const Qt=bt.replace(M,"");De&&!v.includes(Qt)||Z($,st,Ne,gn.callable,gn.delegationSelector)}}else{if(!Object.keys(Nt).length)return;Z($,st,Ne,fe,de?P:null)}},trigger($,v,P){if(typeof v!="string"||!$)return null;const q=N();let de=null,fe=!0,Ne=!0,De=!1;v!==re(v)&&q&&(de=q.Event(v,P),q($).trigger(de),fe=!de.isPropagationStopped(),Ne=!de.isImmediatePropagationStopped(),De=de.isDefaultPrevented());const st=ce(new Event(v,{bubbles:fe,cancelable:!0}),P);return De&&st.preventDefault(),Ne&&$.dispatchEvent(st),st.defaultPrevented&&de&&de.preventDefault(),st}};function ce($,v={}){for(const[P,q]of Object.entries(v))try{$[P]=q}catch{Object.defineProperty($,P,{configurable:!0,get:()=>q})}return $}function Se($){if($==="true")return!0;if($==="false")return!1;if($===Number($).toString())return Number($);if($===""||$==="null")return null;if(typeof $!="string")return $;try{return JSON.parse(decodeURIComponent($))}catch{return $}}function Ve($){return $.replace(/[A-Z]/g,v=>`-${v.toLowerCase()}`)}const $e={setDataAttribute($,v,P){$.setAttribute(`data-bs-${Ve(v)}`,P)},removeDataAttribute($,v){$.removeAttribute(`data-bs-${Ve(v)}`)},getDataAttributes($){if(!$)return{};const v={},P=Object.keys($.dataset).filter(q=>q.startsWith("bs")&&!q.startsWith("bsConfig"));for(const q of P){let de=q.replace(/^bs/,"");de=de.charAt(0).toLowerCase()+de.slice(1),v[de]=Se($.dataset[q])}return v},getDataAttribute:($,v)=>Se($.getAttribute(`data-bs-${Ve(v)}`))};class Ke{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(v){return v=this._mergeConfigObj(v),v=this._configAfterMerge(v),this._typeCheckConfig(v),v}_configAfterMerge(v){return v}_mergeConfigObj(v,P){const q=u(P)?$e.getDataAttribute(P,"config"):{};return{...this.constructor.Default,...typeof q=="object"?q:{},...u(P)?$e.getDataAttributes(P):{},...typeof v=="object"?v:{}}}_typeCheckConfig(v,P=this.constructor.DefaultType){for(const[q,de]of Object.entries(P)){const fe=v[q],Ne=u(fe)?"element":l(fe);if(!new RegExp(de).test(Ne))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${q}" provided type "${Ne}" but expected type "${de}".`)}}}class Ye extends Ke{constructor(v,P){super(),(v=m(v))&&(this._element=v,this._config=this._getConfig(P),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),B.off(this._element,this.constructor.EVENT_KEY);for(const v of Object.getOwnPropertyNames(this))this[v]=null}_queueCallback(v,P,q=!0){I(v,P,q)}_getConfig(v){return v=this._mergeConfigObj(v,this._element),v=this._configAfterMerge(v),this._typeCheckConfig(v),v}static getInstance(v){return r.get(m(v),this.DATA_KEY)}static getOrCreateInstance(v,P={}){return this.getInstance(v)||new this(v,typeof P=="object"?P:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(v){return`${v}${this.EVENT_KEY}`}}const lt=$=>{let v=$.getAttribute("data-bs-target");if(!v||v==="#"){let P=$.getAttribute("href");if(!P||!P.includes("#")&&!P.startsWith("."))return null;P.includes("#")&&!P.startsWith("#")&&(P=`#${P.split("#")[1]}`),v=P&&P!=="#"?P.trim():null}return v?v.split(",").map(P=>a(P)).join(","):null},Re={find:($,v=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(v,$)),findOne:($,v=document.documentElement)=>Element.prototype.querySelector.call(v,$),children:($,v)=>[].concat(...$.children).filter(P=>P.matches(v)),parents($,v){const P=[];let q=$.parentNode.closest(v);for(;q;)P.push(q),q=q.parentNode.closest(v);return P},prev($,v){let P=$.previousElementSibling;for(;P;){if(P.matches(v))return[P];P=P.previousElementSibling}return[]},next($,v){let P=$.nextElementSibling;for(;P;){if(P.matches(v))return[P];P=P.nextElementSibling}return[]},focusableChildren($){const v=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(P=>`${P}:not([tabindex^="-"])`).join(",");return this.find(v,$).filter(P=>!h(P)&&g(P))},getSelectorFromElement($){const v=lt($);return v&&Re.findOne(v)?v:null},getElementFromSelector($){const v=lt($);return v?Re.findOne(v):null},getMultipleElementsFromSelector($){const v=lt($);return v?Re.find(v):[]}},Ct=($,v="hide")=>{const P=`click.dismiss${$.EVENT_KEY}`,q=$.NAME;B.on(document,P,`[data-bs-dismiss="${q}"]`,function(de){if(["A","AREA"].includes(this.tagName)&&de.preventDefault(),h(this))return;const fe=Re.getElementFromSelector(this)||this.closest(`.${q}`);$.getOrCreateInstance(fe)[v]()})},Ue=".bs.alert",ot=`close${Ue}`,ct=`closed${Ue}`;class it extends Ye{static get NAME(){return"alert"}close(){if(B.trigger(this._element,ot).defaultPrevented)return;this._element.classList.remove("show");const v=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,v)}_destroyElement(){this._element.remove(),B.trigger(this._element,ct),this.dispose()}static jQueryInterface(v){return this.each(function(){const P=it.getOrCreateInstance(this);if(typeof v=="string"){if(P[v]===void 0||v.startsWith("_")||v==="constructor")throw new TypeError(`No method named "${v}"`);P[v](this)}})}}Ct(it,"close"),A(it);const Lt='[data-bs-toggle="button"]';class Bt extends Ye{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(v){return this.each(function(){const P=Bt.getOrCreateInstance(this);v==="toggle"&&P[v]()})}}B.on(document,"click.bs.button.data-api",Lt,$=>{$.preventDefault();const v=$.target.closest(Lt);Bt.getOrCreateInstance(v).toggle()}),A(Bt);const Ge=".bs.swipe",mn=`touchstart${Ge}`,Wt=`touchmove${Ge}`,an=`touchend${Ge}`,At=`pointerdown${Ge}`,bn=`pointerup${Ge}`,Ht={endCallback:null,leftCallback:null,rightCallback:null},ze={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Y extends Ke{constructor(v,P){super(),this._element=v,v&&Y.isSupported()&&(this._config=this._getConfig(P),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ht}static get DefaultType(){return ze}static get NAME(){return"swipe"}dispose(){B.off(this._element,Ge)}_start(v){this._supportPointerEvents?this._eventIsPointerPenTouch(v)&&(this._deltaX=v.clientX):this._deltaX=v.touches[0].clientX}_end(v){this._eventIsPointerPenTouch(v)&&(this._deltaX=v.clientX-this._deltaX),this._handleSwipe(),L(this._config.endCallback)}_move(v){this._deltaX=v.touches&&v.touches.length>1?0:v.touches[0].clientX-this._deltaX}_handleSwipe(){const v=Math.abs(this._deltaX);if(v<=40)return;const P=v/this._deltaX;this._deltaX=0,P&&L(P>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(B.on(this._element,At,v=>this._start(v)),B.on(this._element,bn,v=>this._end(v)),this._element.classList.add("pointer-event")):(B.on(this._element,mn,v=>this._start(v)),B.on(this._element,Wt,v=>this._move(v)),B.on(this._element,an,v=>this._end(v)))}_eventIsPointerPenTouch(v){return this._supportPointerEvents&&(v.pointerType==="pen"||v.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ie=".bs.carousel",pe=".data-api",he="ArrowLeft",He="ArrowRight",ge="next",Ae="prev",Be="left",Ze="right",Rt=`slide${ie}`,Ie=`slid${ie}`,gt=`keydown${ie}`,ft=`mouseenter${ie}`,Te=`mouseleave${ie}`,nt=`dragstart${ie}`,ut=`load${ie}${pe}`,kn=`click${ie}${pe}`,Ce="carousel",yt="active",on=".active",Nn=".carousel-item",Wn=on+Nn,Ra={[he]:Ze,[He]:Be},Me={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Xr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class pn extends Ye{constructor(v,P){super(v,P),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ce&&this.cycle()}static get Default(){return Me}static get DefaultType(){return Xr}static get NAME(){return"carousel"}next(){this._slide(ge)}nextWhenVisible(){!document.hidden&&g(this._element)&&this.next()}prev(){this._slide(Ae)}pause(){this._isSliding&&d(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?B.one(this._element,Ie,()=>this.cycle()):this.cycle())}to(v){const P=this._getItems();if(v>P.length-1||v<0)return;if(this._isSliding)return void B.one(this._element,Ie,()=>this.to(v));const q=this._getItemIndex(this._getActive());if(q===v)return;const de=v>q?ge:Ae;this._slide(de,P[v])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(v){return v.defaultInterval=v.interval,v}_addEventListeners(){this._config.keyboard&&B.on(this._element,gt,v=>this._keydown(v)),this._config.pause==="hover"&&(B.on(this._element,ft,()=>this.pause()),B.on(this._element,Te,()=>this._maybeEnableCycle())),this._config.touch&&Y.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const P of Re.find(".carousel-item img",this._element))B.on(P,nt,q=>q.preventDefault());const v={leftCallback:()=>this._slide(this._directionToOrder(Be)),rightCallback:()=>this._slide(this._directionToOrder(Ze)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Y(this._element,v)}_keydown(v){if(/input|textarea/i.test(v.target.tagName))return;const P=Ra[v.key];P&&(v.preventDefault(),this._slide(this._directionToOrder(P)))}_getItemIndex(v){return this._getItems().indexOf(v)}_setActiveIndicatorElement(v){if(!this._indicatorsElement)return;const P=Re.findOne(on,this._indicatorsElement);P.classList.remove(yt),P.removeAttribute("aria-current");const q=Re.findOne(`[data-bs-slide-to="${v}"]`,this._indicatorsElement);q&&(q.classList.add(yt),q.setAttribute("aria-current","true"))}_updateInterval(){const v=this._activeElement||this._getActive();if(!v)return;const P=Number.parseInt(v.getAttribute("data-bs-interval"),10);this._config.interval=P||this._config.defaultInterval}_slide(v,P=null){if(this._isSliding)return;const q=this._getActive(),de=v===ge,fe=P||F(this._getItems(),q,de,this._config.wrap);if(fe===q)return;const Ne=this._getItemIndex(fe),De=bt=>B.trigger(this._element,bt,{relatedTarget:fe,direction:this._orderToDirection(v),from:this._getItemIndex(q),to:Ne});if(De(Rt).defaultPrevented||!q||!fe)return;const st=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Ne),this._activeElement=fe;const Nt=de?"carousel-item-start":"carousel-item-end",Tt=de?"carousel-item-next":"carousel-item-prev";fe.classList.add(Tt),S(fe),q.classList.add(Nt),fe.classList.add(Nt),this._queueCallback(()=>{fe.classList.remove(Nt,Tt),fe.classList.add(yt),q.classList.remove(yt,Tt,Nt),this._isSliding=!1,De(Ie)},q,this._isAnimated()),st&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Re.findOne(Wn,this._element)}_getItems(){return Re.find(Nn,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(v){return D()?v===Be?Ae:ge:v===Be?ge:Ae}_orderToDirection(v){return D()?v===Ae?Be:Ze:v===Ae?Ze:Be}static jQueryInterface(v){return this.each(function(){const P=pn.getOrCreateInstance(this,v);if(typeof v!="number"){if(typeof v=="string"){if(P[v]===void 0||v.startsWith("_")||v==="constructor")throw new TypeError(`No method named "${v}"`);P[v]()}}else P.to(v)})}}B.on(document,kn,"[data-bs-slide], [data-bs-slide-to]",function($){const v=Re.getElementFromSelector(this);if(!v||!v.classList.contains(Ce))return;$.preventDefault();const P=pn.getOrCreateInstance(v),q=this.getAttribute("data-bs-slide-to");return q?(P.to(q),void P._maybeEnableCycle()):$e.getDataAttribute(this,"slide")==="next"?(P.next(),void P._maybeEnableCycle()):(P.prev(),void P._maybeEnableCycle())}),B.on(window,ut,()=>{const $=Re.find('[data-bs-ride="carousel"]');for(const v of $)pn.getOrCreateInstance(v)}),A(pn);const si=".bs.collapse",Vs=`show${si}`,Yi=`shown${si}`,Ei=`hide${si}`,wr=`hidden${si}`,Cs=`click${si}.data-api`,jr="show",vi="collapse",zs="collapsing",Xi=`:scope .${vi} .${vi}`,J='[data-bs-toggle="collapse"]',te={parent:null,toggle:!0},Le={parent:"(null|element)",toggle:"boolean"};class xe extends Ye{constructor(v,P){super(v,P),this._isTransitioning=!1,this._triggerArray=[];const q=Re.find(J);for(const de of q){const fe=Re.getSelectorFromElement(de),Ne=Re.find(fe).filter(De=>De===this._element);fe!==null&&Ne.length&&this._triggerArray.push(de)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return te}static get DefaultType(){return Le}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let v=[];if(this._config.parent&&(v=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(de=>de!==this._element).map(de=>xe.getOrCreateInstance(de,{toggle:!1}))),v.length&&v[0]._isTransitioning||B.trigger(this._element,Vs).defaultPrevented)return;for(const de of v)de.hide();const P=this._getDimension();this._element.classList.remove(vi),this._element.classList.add(zs),this._element.style[P]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const q=`scroll${P[0].toUpperCase()+P.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zs),this._element.classList.add(vi,jr),this._element.style[P]="",B.trigger(this._element,Yi)},this._element,!0),this._element.style[P]=`${this._element[q]}px`}hide(){if(this._isTransitioning||!this._isShown()||B.trigger(this._element,Ei).defaultPrevented)return;const v=this._getDimension();this._element.style[v]=`${this._element.getBoundingClientRect()[v]}px`,S(this._element),this._element.classList.add(zs),this._element.classList.remove(vi,jr);for(const P of this._triggerArray){const q=Re.getElementFromSelector(P);q&&!this._isShown(q)&&this._addAriaAndCollapsedClass([P],!1)}this._isTransitioning=!0,this._element.style[v]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(zs),this._element.classList.add(vi),B.trigger(this._element,wr)},this._element,!0)}_isShown(v=this._element){return v.classList.contains(jr)}_configAfterMerge(v){return v.toggle=!!v.toggle,v.parent=m(v.parent),v}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const v=this._getFirstLevelChildren(J);for(const P of v){const q=Re.getElementFromSelector(P);q&&this._addAriaAndCollapsedClass([P],this._isShown(q))}}_getFirstLevelChildren(v){const P=Re.find(Xi,this._config.parent);return Re.find(v,this._config.parent).filter(q=>!P.includes(q))}_addAriaAndCollapsedClass(v,P){if(v.length)for(const q of v)q.classList.toggle("collapsed",!P),q.setAttribute("aria-expanded",P)}static jQueryInterface(v){const P={};return typeof v=="string"&&/show|hide/.test(v)&&(P.toggle=!1),this.each(function(){const q=xe.getOrCreateInstance(this,P);if(typeof v=="string"){if(q[v]===void 0)throw new TypeError(`No method named "${v}"`);q[v]()}})}}B.on(document,Cs,J,function($){($.target.tagName==="A"||$.delegateTarget&&$.delegateTarget.tagName==="A")&&$.preventDefault();for(const v of Re.getMultipleElementsFromSelector(this))xe.getOrCreateInstance(v,{toggle:!1}).toggle()}),A(xe);var ve="top",Xe="bottom",et="right",tt="left",Pt="auto",at=[ve,Xe,et,tt],me="start",ke="end",vt="clippingParents",tn="viewport",Vn="popper",In="reference",Qr=at.reduce(function($,v){return $.concat([v+"-"+me,v+"-"+ke])},[]),Kn=[].concat(at,[Pt]).reduce(function($,v){return $.concat([v,v+"-"+me,v+"-"+ke])},[]),zn="beforeRead",os="read",jt="afterRead",Es="beforeMain",ii="main",bi="afterMain",Qi="beforeWrite",Ji="write",Ts="afterWrite",wi=[zn,os,jt,Es,ii,bi,Qi,Ji,Ts];function Xt($){return $?($.nodeName||"").toLowerCase():null}function ar($){if($==null)return window;if($.toString()!=="[object Window]"){var v=$.ownerDocument;return v&&v.defaultView||window}return $}function Rr($){return $ instanceof ar($).Element||$ instanceof Element}function Fr($){return $ instanceof ar($).HTMLElement||$ instanceof HTMLElement}function Ti($){return typeof ShadowRoot<"u"&&($ instanceof ar($).ShadowRoot||$ instanceof ShadowRoot)}const Ai={name:"applyStyles",enabled:!0,phase:"write",fn:function($){var v=$.state;Object.keys(v.elements).forEach(function(P){var q=v.styles[P]||{},de=v.attributes[P]||{},fe=v.elements[P];Fr(fe)&&Xt(fe)&&(Object.assign(fe.style,q),Object.keys(de).forEach(function(Ne){var De=de[Ne];De===!1?fe.removeAttribute(Ne):fe.setAttribute(Ne,De===!0?"":De)}))})},effect:function($){var v=$.state,P={popper:{position:v.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(v.elements.popper.style,P.popper),v.styles=P,v.elements.arrow&&Object.assign(v.elements.arrow.style,P.arrow),function(){Object.keys(v.elements).forEach(function(q){var de=v.elements[q],fe=v.attributes[q]||{},Ne=Object.keys(v.styles.hasOwnProperty(q)?v.styles[q]:P[q]).reduce(function(De,st){return De[st]="",De},{});Fr(de)&&Xt(de)&&(Object.assign(de.style,Ne),Object.keys(fe).forEach(function(De){de.removeAttribute(De)}))})}},requires:["computeStyles"]};function Sn($){return $.split("-")[0]}var As=Math.max,hn=Math.min,Fs=Math.round;function mo(){var $=navigator.userAgentData;return $!=null&&$.brands&&Array.isArray($.brands)?$.brands.map(function(v){return v.brand+"/"+v.version}).join(" "):navigator.userAgent}function La(){return!/^((?!chrome|android).)*safari/i.test(mo())}function Zi($,v,P){v===void 0&&(v=!1),P===void 0&&(P=!1);var q=$.getBoundingClientRect(),de=1,fe=1;v&&Fr($)&&(de=$.offsetWidth>0&&Fs(q.width)/$.offsetWidth||1,fe=$.offsetHeight>0&&Fs(q.height)/$.offsetHeight||1);var Ne=(Rr($)?ar($):window).visualViewport,De=!La()&&P,st=(q.left+(De&&Ne?Ne.offsetLeft:0))/de,Nt=(q.top+(De&&Ne?Ne.offsetTop:0))/fe,Tt=q.width/de,bt=q.height/fe;return{width:Tt,height:bt,top:Nt,right:st+Tt,bottom:Nt+bt,left:st,x:st,y:Nt}}function po($){var v=Zi($),P=$.offsetWidth,q=$.offsetHeight;return Math.abs(v.width-P)<=1&&(P=v.width),Math.abs(v.height-q)<=1&&(q=v.height),{x:$.offsetLeft,y:$.offsetTop,width:P,height:q}}function Yo($,v){var P=v.getRootNode&&v.getRootNode();if($.contains(v))return!0;if(P&&Ti(P)){var q=v;do{if(q&&$.isSameNode(q))return!0;q=q.parentNode||q.host}while(q)}return!1}function $s($){return ar($).getComputedStyle($)}function Pi($){return["table","td","th"].indexOf(Xt($))>=0}function or($){return((Rr($)?$.ownerDocument:$.document)||window.document).documentElement}function ls($){return Xt($)==="html"?$:$.assignedSlot||$.parentNode||(Ti($)?$.host:null)||or($)}function ai($){return Fr($)&&$s($).position!=="fixed"?$.offsetParent:null}function Jr($){for(var v=ar($),P=ai($);P&&Pi(P)&&$s(P).position==="static";)P=ai(P);return P&&(Xt(P)==="html"||Xt(P)==="body"&&$s(P).position==="static")?v:P||function(q){var de=/firefox/i.test(mo());if(/Trident/i.test(mo())&&Fr(q)&&$s(q).position==="fixed")return null;var fe=ls(q);for(Ti(fe)&&(fe=fe.host);Fr(fe)&&["html","body"].indexOf(Xt(fe))<0;){var Ne=$s(fe);if(Ne.transform!=="none"||Ne.perspective!=="none"||Ne.contain==="paint"||["transform","perspective"].indexOf(Ne.willChange)!==-1||de&&Ne.willChange==="filter"||de&&Ne.filter&&Ne.filter!=="none")return fe;fe=fe.parentNode}return null}($)||v}function Cr($){return["top","bottom"].indexOf($)>=0?"x":"y"}function bs($,v,P){return As($,hn(v,P))}function Xo($){return Object.assign({},{top:0,right:0,bottom:0,left:0},$)}function ae($,v){return v.reduce(function(P,q){return P[q]=$,P},{})}const Ee={name:"arrow",enabled:!0,phase:"main",fn:function($){var v,P=$.state,q=$.name,de=$.options,fe=P.elements.arrow,Ne=P.modifiersData.popperOffsets,De=Sn(P.placement),st=Cr(De),Nt=[tt,et].indexOf(De)>=0?"height":"width";if(fe&&Ne){var Tt=function(Qn,Un){return Xo(typeof(Qn=typeof Qn=="function"?Qn(Object.assign({},Un.rects,{placement:Un.placement})):Qn)!="number"?Qn:ae(Qn,at))}(de.padding,P),bt=po(fe),gn=st==="y"?ve:tt,Qt=st==="y"?Xe:et,ln=P.rects.reference[Nt]+P.rects.reference[st]-Ne[st]-P.rects.popper[Nt],cn=Ne[st]-P.rects.reference[st],nn=Jr(fe),qn=nn?st==="y"?nn.clientHeight||0:nn.clientWidth||0:0,cr=ln/2-cn/2,yn=Tt[gn],Ln=qn-bt[Nt]-Tt[Qt],wn=qn/2-bt[Nt]/2+cr,Tn=bs(yn,wn,Ln),Mn=st;P.modifiersData[q]=((v={})[Mn]=Tn,v.centerOffset=Tn-wn,v)}},effect:function($){var v=$.state,P=$.options.element,q=P===void 0?"[data-popper-arrow]":P;q!=null&&(typeof q!="string"||(q=v.elements.popper.querySelector(q)))&&Yo(v.elements.popper,q)&&(v.elements.arrow=q)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ht($){return $.split("-")[1]}var xt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Et($){var v,P=$.popper,q=$.popperRect,de=$.placement,fe=$.variation,Ne=$.offsets,De=$.position,st=$.gpuAcceleration,Nt=$.adaptive,Tt=$.roundOffsets,bt=$.isFixed,gn=Ne.x,Qt=gn===void 0?0:gn,ln=Ne.y,cn=ln===void 0?0:ln,nn=typeof Tt=="function"?Tt({x:Qt,y:cn}):{x:Qt,y:cn};Qt=nn.x,cn=nn.y;var qn=Ne.hasOwnProperty("x"),cr=Ne.hasOwnProperty("y"),yn=tt,Ln=ve,wn=window;if(Nt){var Tn=Jr(P),Mn="clientHeight",Qn="clientWidth";Tn===ar(P)&&$s(Tn=or(P)).position!=="static"&&De==="absolute"&&(Mn="scrollHeight",Qn="scrollWidth"),(de===ve||(de===tt||de===et)&&fe===ke)&&(Ln=Xe,cn-=(bt&&Tn===wn&&wn.visualViewport?wn.visualViewport.height:Tn[Mn])-q.height,cn*=st?1:-1),de!==tt&&(de!==ve&&de!==Xe||fe!==ke)||(yn=et,Qt-=(bt&&Tn===wn&&wn.visualViewport?wn.visualViewport.width:Tn[Qn])-q.width,Qt*=st?1:-1)}var Un,yr=Object.assign({position:De},Nt&&xt),us=Tt===!0?function(ki,ws){var li=ki.x,ci=ki.y,sr=ws.devicePixelRatio||1;return{x:Fs(li*sr)/sr||0,y:Fs(ci*sr)/sr||0}}({x:Qt,y:cn},ar(P)):{x:Qt,y:cn};return Qt=us.x,cn=us.y,st?Object.assign({},yr,((Un={})[Ln]=cr?"0":"",Un[yn]=qn?"0":"",Un.transform=(wn.devicePixelRatio||1)<=1?"translate("+Qt+"px, "+cn+"px)":"translate3d("+Qt+"px, "+cn+"px, 0)",Un)):Object.assign({},yr,((v={})[Ln]=cr?cn+"px":"",v[yn]=qn?Qt+"px":"",v.transform="",v))}const Mt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function($){var v=$.state,P=$.options,q=P.gpuAcceleration,de=q===void 0||q,fe=P.adaptive,Ne=fe===void 0||fe,De=P.roundOffsets,st=De===void 0||De,Nt={placement:Sn(v.placement),variation:ht(v.placement),popper:v.elements.popper,popperRect:v.rects.popper,gpuAcceleration:de,isFixed:v.options.strategy==="fixed"};v.modifiersData.popperOffsets!=null&&(v.styles.popper=Object.assign({},v.styles.popper,Et(Object.assign({},Nt,{offsets:v.modifiersData.popperOffsets,position:v.options.strategy,adaptive:Ne,roundOffsets:st})))),v.modifiersData.arrow!=null&&(v.styles.arrow=Object.assign({},v.styles.arrow,Et(Object.assign({},Nt,{offsets:v.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:st})))),v.attributes.popper=Object.assign({},v.attributes.popper,{"data-popper-placement":v.placement})},data:{}};var $t={passive:!0};const Ft={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function($){var v=$.state,P=$.instance,q=$.options,de=q.scroll,fe=de===void 0||de,Ne=q.resize,De=Ne===void 0||Ne,st=ar(v.elements.popper),Nt=[].concat(v.scrollParents.reference,v.scrollParents.popper);return fe&&Nt.forEach(function(Tt){Tt.addEventListener("scroll",P.update,$t)}),De&&st.addEventListener("resize",P.update,$t),function(){fe&&Nt.forEach(function(Tt){Tt.removeEventListener("scroll",P.update,$t)}),De&&st.removeEventListener("resize",P.update,$t)}},data:{}};var hr={left:"right",right:"left",bottom:"top",top:"bottom"};function $r($){return $.replace(/left|right|bottom|top/g,function(v){return hr[v]})}var da={start:"end",end:"start"};function Yn($){return $.replace(/start|end/g,function(v){return da[v]})}function go($){var v=ar($);return{scrollLeft:v.pageXOffset,scrollTop:v.pageYOffset}}function ua($){return Zi(or($)).left+go($).scrollLeft}function Ma($){var v=$s($),P=v.overflow,q=v.overflowX,de=v.overflowY;return/auto|scroll|overlay|hidden/.test(P+de+q)}function Qo($){return["html","body","#document"].indexOf(Xt($))>=0?$.ownerDocument.body:Fr($)&&Ma($)?$:Qo(ls($))}function Da($,v){var P;v===void 0&&(v=[]);var q=Qo($),de=q===((P=$.ownerDocument)==null?void 0:P.body),fe=ar(q),Ne=de?[fe].concat(fe.visualViewport||[],Ma(q)?q:[]):q,De=v.concat(Ne);return de?De:De.concat(Da(ls(Ne)))}function Us($){return Object.assign({},$,{left:$.x,top:$.y,right:$.x+$.width,bottom:$.y+$.height})}function Jo($,v,P){return v===tn?Us(function(q,de){var fe=ar(q),Ne=or(q),De=fe.visualViewport,st=Ne.clientWidth,Nt=Ne.clientHeight,Tt=0,bt=0;if(De){st=De.width,Nt=De.height;var gn=La();(gn||!gn&&de==="fixed")&&(Tt=De.offsetLeft,bt=De.offsetTop)}return{width:st,height:Nt,x:Tt+ua(q),y:bt}}($,P)):Rr(v)?function(q,de){var fe=Zi(q,!1,de==="fixed");return fe.top=fe.top+q.clientTop,fe.left=fe.left+q.clientLeft,fe.bottom=fe.top+q.clientHeight,fe.right=fe.left+q.clientWidth,fe.width=q.clientWidth,fe.height=q.clientHeight,fe.x=fe.left,fe.y=fe.top,fe}(v,P):Us(function(q){var de,fe=or(q),Ne=go(q),De=(de=q.ownerDocument)==null?void 0:de.body,st=As(fe.scrollWidth,fe.clientWidth,De?De.scrollWidth:0,De?De.clientWidth:0),Nt=As(fe.scrollHeight,fe.clientHeight,De?De.scrollHeight:0,De?De.clientHeight:0),Tt=-Ne.scrollLeft+ua(q),bt=-Ne.scrollTop;return $s(De||fe).direction==="rtl"&&(Tt+=As(fe.clientWidth,De?De.clientWidth:0)-st),{width:st,height:Nt,x:Tt,y:bt}}(or($)))}function Bs($){var v,P=$.reference,q=$.element,de=$.placement,fe=de?Sn(de):null,Ne=de?ht(de):null,De=P.x+P.width/2-q.width/2,st=P.y+P.height/2-q.height/2;switch(fe){case ve:v={x:De,y:P.y-q.height};break;case Xe:v={x:De,y:P.y+P.height};break;case et:v={x:P.x+P.width,y:st};break;case tt:v={x:P.x-q.width,y:st};break;default:v={x:P.x,y:P.y}}var Nt=fe?Cr(fe):null;if(Nt!=null){var Tt=Nt==="y"?"height":"width";switch(Ne){case me:v[Nt]=v[Nt]-(P[Tt]/2-q[Tt]/2);break;case ke:v[Nt]=v[Nt]+(P[Tt]/2-q[Tt]/2)}}return v}function ha($,v){v===void 0&&(v={});var P=v,q=P.placement,de=q===void 0?$.placement:q,fe=P.strategy,Ne=fe===void 0?$.strategy:fe,De=P.boundary,st=De===void 0?vt:De,Nt=P.rootBoundary,Tt=Nt===void 0?tn:Nt,bt=P.elementContext,gn=bt===void 0?Vn:bt,Qt=P.altBoundary,ln=Qt!==void 0&&Qt,cn=P.padding,nn=cn===void 0?0:cn,qn=Xo(typeof nn!="number"?nn:ae(nn,at)),cr=gn===Vn?In:Vn,yn=$.rects.popper,Ln=$.elements[ln?cr:gn],wn=function(ws,li,ci,sr){var Lr=li==="clippingParents"?function(Pn){var Tr=Da(ls(Pn)),di=["absolute","fixed"].indexOf($s(Pn).position)>=0&&Fr(Pn)?Jr(Pn):Pn;return Rr(di)?Tr.filter(function(Ka){return Rr(Ka)&&Yo(Ka,di)&&Xt(Ka)!=="body"}):[]}(ws):[].concat(li),Rs=[].concat(Lr,[ci]),No=Rs[0],es=Rs.reduce(function(Pn,Tr){var di=Jo(ws,Tr,sr);return Pn.top=As(di.top,Pn.top),Pn.right=hn(di.right,Pn.right),Pn.bottom=hn(di.bottom,Pn.bottom),Pn.left=As(di.left,Pn.left),Pn},Jo(ws,No,sr));return es.width=es.right-es.left,es.height=es.bottom-es.top,es.x=es.left,es.y=es.top,es}(Rr(Ln)?Ln:Ln.contextElement||or($.elements.popper),st,Tt,Ne),Tn=Zi($.elements.reference),Mn=Bs({reference:Tn,element:yn,placement:de}),Qn=Us(Object.assign({},yn,Mn)),Un=gn===Vn?Qn:Tn,yr={top:wn.top-Un.top+qn.top,bottom:Un.bottom-wn.bottom+qn.bottom,left:wn.left-Un.left+qn.left,right:Un.right-wn.right+qn.right},us=$.modifiersData.offset;if(gn===Vn&&us){var ki=us[de];Object.keys(yr).forEach(function(ws){var li=[et,Xe].indexOf(ws)>=0?1:-1,ci=[ve,Xe].indexOf(ws)>=0?"y":"x";yr[ws]+=ki[ci]*li})}return yr}function $l($,v){v===void 0&&(v={});var P=v,q=P.placement,de=P.boundary,fe=P.rootBoundary,Ne=P.padding,De=P.flipVariations,st=P.allowedAutoPlacements,Nt=st===void 0?Kn:st,Tt=ht(q),bt=Tt?De?Qr:Qr.filter(function(ln){return ht(ln)===Tt}):at,gn=bt.filter(function(ln){return Nt.indexOf(ln)>=0});gn.length===0&&(gn=bt);var Qt=gn.reduce(function(ln,cn){return ln[cn]=ha($,{placement:cn,boundary:de,rootBoundary:fe,padding:Ne})[Sn(cn)],ln},{});return Object.keys(Qt).sort(function(ln,cn){return Qt[ln]-Qt[cn]})}const ea={name:"flip",enabled:!0,phase:"main",fn:function($){var v=$.state,P=$.options,q=$.name;if(!v.modifiersData[q]._skip){for(var de=P.mainAxis,fe=de===void 0||de,Ne=P.altAxis,De=Ne===void 0||Ne,st=P.fallbackPlacements,Nt=P.padding,Tt=P.boundary,bt=P.rootBoundary,gn=P.altBoundary,Qt=P.flipVariations,ln=Qt===void 0||Qt,cn=P.allowedAutoPlacements,nn=v.options.placement,qn=Sn(nn),cr=st||(qn!==nn&&ln?function(Pn){if(Sn(Pn)===Pt)return[];var Tr=$r(Pn);return[Yn(Pn),Tr,Yn(Tr)]}(nn):[$r(nn)]),yn=[nn].concat(cr).reduce(function(Pn,Tr){return Pn.concat(Sn(Tr)===Pt?$l(v,{placement:Tr,boundary:Tt,rootBoundary:bt,padding:Nt,flipVariations:ln,allowedAutoPlacements:cn}):Tr)},[]),Ln=v.rects.reference,wn=v.rects.popper,Tn=new Map,Mn=!0,Qn=yn[0],Un=0;Un<yn.length;Un++){var yr=yn[Un],us=Sn(yr),ki=ht(yr)===me,ws=[ve,Xe].indexOf(us)>=0,li=ws?"width":"height",ci=ha(v,{placement:yr,boundary:Tt,rootBoundary:bt,altBoundary:gn,padding:Nt}),sr=ws?ki?et:tt:ki?Xe:ve;Ln[li]>wn[li]&&(sr=$r(sr));var Lr=$r(sr),Rs=[];if(fe&&Rs.push(ci[us]<=0),De&&Rs.push(ci[sr]<=0,ci[Lr]<=0),Rs.every(function(Pn){return Pn})){Qn=yr,Mn=!1;break}Tn.set(yr,Rs)}if(Mn)for(var No=function(Pn){var Tr=yn.find(function(di){var Ka=Tn.get(di);if(Ka)return Ka.slice(0,Pn).every(function(Di){return Di})});if(Tr)return Qn=Tr,"break"},es=ln?3:1;es>0&&No(es)!=="break";es--);v.placement!==Qn&&(v.modifiersData[q]._skip=!0,v.placement=Qn,v.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ul($,v,P){return P===void 0&&(P={x:0,y:0}),{top:$.top-v.height-P.y,right:$.right-v.width+P.x,bottom:$.bottom-v.height+P.y,left:$.left-v.width-P.x}}function cs($){return[ve,et,Xe,tt].some(function(v){return $[v]>=0})}const Ii={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function($){var v=$.state,P=$.name,q=v.rects.reference,de=v.rects.popper,fe=v.modifiersData.preventOverflow,Ne=ha(v,{elementContext:"reference"}),De=ha(v,{altBoundary:!0}),st=Ul(Ne,q),Nt=Ul(De,de,fe),Tt=cs(st),bt=cs(Nt);v.modifiersData[P]={referenceClippingOffsets:st,popperEscapeOffsets:Nt,isReferenceHidden:Tt,hasPopperEscaped:bt},v.attributes.popper=Object.assign({},v.attributes.popper,{"data-popper-reference-hidden":Tt,"data-popper-escaped":bt})}},Zo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function($){var v=$.state,P=$.options,q=$.name,de=P.offset,fe=de===void 0?[0,0]:de,Ne=Kn.reduce(function(Tt,bt){return Tt[bt]=function(gn,Qt,ln){var cn=Sn(gn),nn=[tt,ve].indexOf(cn)>=0?-1:1,qn=typeof ln=="function"?ln(Object.assign({},Qt,{placement:gn})):ln,cr=qn[0],yn=qn[1];return cr=cr||0,yn=(yn||0)*nn,[tt,et].indexOf(cn)>=0?{x:yn,y:cr}:{x:cr,y:yn}}(bt,v.rects,fe),Tt},{}),De=Ne[v.placement],st=De.x,Nt=De.y;v.modifiersData.popperOffsets!=null&&(v.modifiersData.popperOffsets.x+=st,v.modifiersData.popperOffsets.y+=Nt),v.modifiersData[q]=Ne}},Ri={name:"popperOffsets",enabled:!0,phase:"read",fn:function($){var v=$.state,P=$.name;v.modifiersData[P]=Bs({reference:v.rects.reference,element:v.rects.popper,placement:v.placement})},data:{}},hu={name:"preventOverflow",enabled:!0,phase:"main",fn:function($){var v=$.state,P=$.options,q=$.name,de=P.mainAxis,fe=de===void 0||de,Ne=P.altAxis,De=Ne!==void 0&&Ne,st=P.boundary,Nt=P.rootBoundary,Tt=P.altBoundary,bt=P.padding,gn=P.tether,Qt=gn===void 0||gn,ln=P.tetherOffset,cn=ln===void 0?0:ln,nn=ha(v,{boundary:st,rootBoundary:Nt,padding:bt,altBoundary:Tt}),qn=Sn(v.placement),cr=ht(v.placement),yn=!cr,Ln=Cr(qn),wn=Ln==="x"?"y":"x",Tn=v.modifiersData.popperOffsets,Mn=v.rects.reference,Qn=v.rects.popper,Un=typeof cn=="function"?cn(Object.assign({},v.rects,{placement:v.placement})):cn,yr=typeof Un=="number"?{mainAxis:Un,altAxis:Un}:Object.assign({mainAxis:0,altAxis:0},Un),us=v.modifiersData.offset?v.modifiersData.offset[v.placement]:null,ki={x:0,y:0};if(Tn){if(fe){var ws,li=Ln==="y"?ve:tt,ci=Ln==="y"?Xe:et,sr=Ln==="y"?"height":"width",Lr=Tn[Ln],Rs=Lr+nn[li],No=Lr-nn[ci],es=Qt?-Qn[sr]/2:0,Pn=cr===me?Mn[sr]:Qn[sr],Tr=cr===me?-Qn[sr]:-Mn[sr],di=v.elements.arrow,Ka=Qt&&di?po(di):{width:0,height:0},Di=v.modifiersData["arrow#persistent"]?v.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ya=Di[li],xd=Di[ci],yd=bs(0,Mn[sr],Ka[sr]),Cu=yn?Mn[sr]/2-es-yd-Ya-yr.mainAxis:Pn-yd-Ya-yr.mainAxis,Sp=yn?-Mn[sr]/2+es+yd+xd+yr.mainAxis:Tr+yd+xd+yr.mainAxis,ul=v.elements.arrow&&Jr(v.elements.arrow),pa=ul?Ln==="y"?ul.clientTop||0:ul.clientLeft||0:0,nc=(ws=us==null?void 0:us[Ln])!=null?ws:0,vd=Lr+Sp-nc,_o=bs(Qt?hn(Rs,Lr+Cu-nc-pa):Rs,Lr,Qt?As(No,vd):No);Tn[Ln]=_o,ki[Ln]=_o-Lr}if(De){var Eu,rc=Ln==="x"?ve:tt,Cp=Ln==="x"?Xe:et,Xa=Tn[wn],dr=wn==="y"?"height":"width",bd=Xa+nn[rc],Tu=Xa-nn[Cp],wd=[ve,tt].indexOf(qn)!==-1,jd=(Eu=us==null?void 0:us[wn])!=null?Eu:0,Au=wd?bd:Xa-Mn[dr]-Qn[dr]-jd+yr.altAxis,So=wd?Xa+Mn[dr]+Qn[dr]-jd-yr.altAxis:Tu,vr=Qt&&wd?function(ts,hs,sc){var ic=bs(ts,hs,sc);return ic>sc?sc:ic}(Au,Xa,So):bs(Qt?Au:bd,Xa,Qt?So:Tu);Tn[wn]=vr,ki[wn]=vr-Xa}v.modifiersData[q]=ki}},requiresIfExists:["offset"]};function Bl($,v,P){P===void 0&&(P=!1);var q,de,fe=Fr(v),Ne=Fr(v)&&function(bt){var gn=bt.getBoundingClientRect(),Qt=Fs(gn.width)/bt.offsetWidth||1,ln=Fs(gn.height)/bt.offsetHeight||1;return Qt!==1||ln!==1}(v),De=or(v),st=Zi($,Ne,P),Nt={scrollLeft:0,scrollTop:0},Tt={x:0,y:0};return(fe||!fe&&!P)&&((Xt(v)!=="body"||Ma(De))&&(Nt=(q=v)!==ar(q)&&Fr(q)?{scrollLeft:(de=q).scrollLeft,scrollTop:de.scrollTop}:go(q)),Fr(v)?((Tt=Zi(v,!0)).x+=v.clientLeft,Tt.y+=v.clientTop):De&&(Tt.x=ua(De))),{x:st.left+Nt.scrollLeft-Tt.x,y:st.top+Nt.scrollTop-Tt.y,width:st.width,height:st.height}}function Oa($){var v=new Map,P=new Set,q=[];function de(fe){P.add(fe.name),[].concat(fe.requires||[],fe.requiresIfExists||[]).forEach(function(Ne){if(!P.has(Ne)){var De=v.get(Ne);De&&de(De)}}),q.push(fe)}return $.forEach(function(fe){v.set(fe.name,fe)}),$.forEach(function(fe){P.has(fe.name)||de(fe)}),q}var Va={placement:"bottom",modifiers:[],strategy:"absolute"};function xo(){for(var $=arguments.length,v=new Array($),P=0;P<$;P++)v[P]=arguments[P];return!v.some(function(q){return!(q&&typeof q.getBoundingClientRect=="function")})}function za($){$===void 0&&($={});var v=$,P=v.defaultModifiers,q=P===void 0?[]:P,de=v.defaultOptions,fe=de===void 0?Va:de;return function(Ne,De,st){st===void 0&&(st=fe);var Nt,Tt,bt={placement:"bottom",orderedModifiers:[],options:Object.assign({},Va,fe),modifiersData:{},elements:{reference:Ne,popper:De},attributes:{},styles:{}},gn=[],Qt=!1,ln={state:bt,setOptions:function(nn){var qn=typeof nn=="function"?nn(bt.options):nn;cn(),bt.options=Object.assign({},fe,bt.options,qn),bt.scrollParents={reference:Rr(Ne)?Da(Ne):Ne.contextElement?Da(Ne.contextElement):[],popper:Da(De)};var cr,yn,Ln=function(wn){var Tn=Oa(wn);return wi.reduce(function(Mn,Qn){return Mn.concat(Tn.filter(function(Un){return Un.phase===Qn}))},[])}((cr=[].concat(q,bt.options.modifiers),yn=cr.reduce(function(wn,Tn){var Mn=wn[Tn.name];return wn[Tn.name]=Mn?Object.assign({},Mn,Tn,{options:Object.assign({},Mn.options,Tn.options),data:Object.assign({},Mn.data,Tn.data)}):Tn,wn},{}),Object.keys(yn).map(function(wn){return yn[wn]})));return bt.orderedModifiers=Ln.filter(function(wn){return wn.enabled}),bt.orderedModifiers.forEach(function(wn){var Tn=wn.name,Mn=wn.options,Qn=Mn===void 0?{}:Mn,Un=wn.effect;if(typeof Un=="function"){var yr=Un({state:bt,name:Tn,instance:ln,options:Qn});gn.push(yr||function(){})}}),ln.update()},forceUpdate:function(){if(!Qt){var nn=bt.elements,qn=nn.reference,cr=nn.popper;if(xo(qn,cr)){bt.rects={reference:Bl(qn,Jr(cr),bt.options.strategy==="fixed"),popper:po(cr)},bt.reset=!1,bt.placement=bt.options.placement,bt.orderedModifiers.forEach(function(Un){return bt.modifiersData[Un.name]=Object.assign({},Un.data)});for(var yn=0;yn<bt.orderedModifiers.length;yn++)if(bt.reset!==!0){var Ln=bt.orderedModifiers[yn],wn=Ln.fn,Tn=Ln.options,Mn=Tn===void 0?{}:Tn,Qn=Ln.name;typeof wn=="function"&&(bt=wn({state:bt,options:Mn,name:Qn,instance:ln})||bt)}else bt.reset=!1,yn=-1}}},update:(Nt=function(){return new Promise(function(nn){ln.forceUpdate(),nn(bt)})},function(){return Tt||(Tt=new Promise(function(nn){Promise.resolve().then(function(){Tt=void 0,nn(Nt())})})),Tt}),destroy:function(){cn(),Qt=!0}};if(!xo(Ne,De))return ln;function cn(){gn.forEach(function(nn){return nn()}),gn=[]}return ln.setOptions(st).then(function(nn){!Qt&&st.onFirstUpdate&&st.onFirstUpdate(nn)}),ln}}var Jc=za(),fu=za({defaultModifiers:[Ft,Ri,Mt,Ai]}),yo=za({defaultModifiers:[Ft,Ri,Mt,Ai,Zo,ea,hu,Ee,Ii]});const el=Object.freeze(Object.defineProperty({__proto__:null,afterMain:bi,afterRead:jt,afterWrite:Ts,applyStyles:Ai,arrow:Ee,auto:Pt,basePlacements:at,beforeMain:Es,beforeRead:zn,beforeWrite:Qi,bottom:Xe,clippingParents:vt,computeStyles:Mt,createPopper:yo,createPopperBase:Jc,createPopperLite:fu,detectOverflow:ha,end:ke,eventListeners:Ft,flip:ea,hide:Ii,left:tt,main:ii,modifierPhases:wi,offset:Zo,placements:Kn,popper:Vn,popperGenerator:za,popperOffsets:Ri,preventOverflow:hu,read:os,reference:In,right:et,start:me,top:ve,variationPlacements:Qr,viewport:tn,write:Ji},Symbol.toStringTag,{value:"Module"})),Zc="dropdown",Ws=".bs.dropdown",Wl=".data-api",mu="ArrowUp",ed="ArrowDown",td=`hide${Ws}`,Hl=`hidden${Ws}`,Hs=`show${Ws}`,pu=`shown${Ws}`,nd=`click${Ws}${Wl}`,ta=`keydown${Ws}${Wl}`,p=`keyup${Ws}${Wl}`,C="show",z='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',G=`${z}.${C}`,ye=".dropdown-menu",Pe=D()?"top-end":"top-start",mt=D()?"top-start":"top-end",Xn=D()?"bottom-end":"bottom-start",Zr=D()?"bottom-start":"bottom-end",Rn=D()?"left-start":"right-start",ds=D()?"right-start":"left-start",Ur={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Li={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class kr extends Ye{constructor(v,P){super(v,P),this._popper=null,this._parent=this._element.parentNode,this._menu=Re.next(this._element,ye)[0]||Re.prev(this._element,ye)[0]||Re.findOne(ye,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ur}static get DefaultType(){return Li}static get NAME(){return Zc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(h(this._element)||this._isShown())return;const v={relatedTarget:this._element};if(!B.trigger(this._element,Hs,v).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const P of[].concat(...document.body.children))B.on(P,"mouseover",w);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(C),this._element.classList.add(C),B.trigger(this._element,pu,v)}}hide(){if(h(this._element)||!this._isShown())return;const v={relatedTarget:this._element};this._completeHide(v)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(v){if(!B.trigger(this._element,td,v).defaultPrevented){if("ontouchstart"in document.documentElement)for(const P of[].concat(...document.body.children))B.off(P,"mouseover",w);this._popper&&this._popper.destroy(),this._menu.classList.remove(C),this._element.classList.remove(C),this._element.setAttribute("aria-expanded","false"),$e.removeDataAttribute(this._menu,"popper"),B.trigger(this._element,Hl,v)}}_getConfig(v){if(typeof(v=super._getConfig(v)).reference=="object"&&!u(v.reference)&&typeof v.reference.getBoundingClientRect!="function")throw new TypeError(`${Zc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return v}_createPopper(){if(el===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let v=this._element;this._config.reference==="parent"?v=this._parent:u(this._config.reference)?v=m(this._config.reference):typeof this._config.reference=="object"&&(v=this._config.reference);const P=this._getPopperConfig();this._popper=yo(v,this._menu,P)}_isShown(){return this._menu.classList.contains(C)}_getPlacement(){const v=this._parent;if(v.classList.contains("dropend"))return Rn;if(v.classList.contains("dropstart"))return ds;if(v.classList.contains("dropup-center"))return"top";if(v.classList.contains("dropdown-center"))return"bottom";const P=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return v.classList.contains("dropup")?P?mt:Pe:P?Zr:Xn}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:v}=this._config;return typeof v=="string"?v.split(",").map(P=>Number.parseInt(P,10)):typeof v=="function"?P=>v(P,this._element):v}_getPopperConfig(){const v={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&($e.setDataAttribute(this._menu,"popper","static"),v.modifiers=[{name:"applyStyles",enabled:!1}]),{...v,...L(this._config.popperConfig,[void 0,v])}}_selectMenuItem({key:v,target:P}){const q=Re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(de=>g(de));q.length&&F(q,P,v===ed,!q.includes(P)).focus()}static jQueryInterface(v){return this.each(function(){const P=kr.getOrCreateInstance(this,v);if(typeof v=="string"){if(P[v]===void 0)throw new TypeError(`No method named "${v}"`);P[v]()}})}static clearMenus(v){if(v.button===2||v.type==="keyup"&&v.key!=="Tab")return;const P=Re.find(G);for(const q of P){const de=kr.getInstance(q);if(!de||de._config.autoClose===!1)continue;const fe=v.composedPath(),Ne=fe.includes(de._menu);if(fe.includes(de._element)||de._config.autoClose==="inside"&&!Ne||de._config.autoClose==="outside"&&Ne||de._menu.contains(v.target)&&(v.type==="keyup"&&v.key==="Tab"||/input|select|option|textarea|form/i.test(v.target.tagName)))continue;const De={relatedTarget:de._element};v.type==="click"&&(De.clickEvent=v),de._completeHide(De)}}static dataApiKeydownHandler(v){const P=/input|textarea/i.test(v.target.tagName),q=v.key==="Escape",de=[mu,ed].includes(v.key);if(!de&&!q||P&&!q)return;v.preventDefault();const fe=this.matches(z)?this:Re.prev(this,z)[0]||Re.next(this,z)[0]||Re.findOne(z,v.delegateTarget.parentNode),Ne=kr.getOrCreateInstance(fe);if(de)return v.stopPropagation(),Ne.show(),void Ne._selectMenuItem(v);Ne._isShown()&&(v.stopPropagation(),Ne.hide(),fe.focus())}}B.on(document,ta,z,kr.dataApiKeydownHandler),B.on(document,ta,ye,kr.dataApiKeydownHandler),B.on(document,nd,kr.clearMenus),B.on(document,p,kr.clearMenus),B.on(document,nd,z,function($){$.preventDefault(),kr.getOrCreateInstance(this).toggle()}),A(kr);const vo="backdrop",tl="show",qh=`mousedown.bs.${vo}`,ap={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},op={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class nl extends Ke{constructor(v){super(),this._config=this._getConfig(v),this._isAppended=!1,this._element=null}static get Default(){return ap}static get DefaultType(){return op}static get NAME(){return vo}show(v){if(!this._config.isVisible)return void L(v);this._append();const P=this._getElement();this._config.isAnimated&&S(P),P.classList.add(tl),this._emulateAnimation(()=>{L(v)})}hide(v){this._config.isVisible?(this._getElement().classList.remove(tl),this._emulateAnimation(()=>{this.dispose(),L(v)})):L(v)}dispose(){this._isAppended&&(B.off(this._element,qh),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const v=document.createElement("div");v.className=this._config.className,this._config.isAnimated&&v.classList.add("fade"),this._element=v}return this._element}_configAfterMerge(v){return v.rootElement=m(v.rootElement),v}_append(){if(this._isAppended)return;const v=this._getElement();this._config.rootElement.append(v),B.on(v,qh,()=>{L(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(v){I(v,this._getElement(),this._config.isAnimated)}}const gu=".bs.focustrap",Lx=`focusin${gu}`,Mx=`keydown.tab${gu}`,Gh="backward",lp={autofocus:!0,trapElement:null},rd={autofocus:"boolean",trapElement:"element"};class ql extends Ke{constructor(v){super(),this._config=this._getConfig(v),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return lp}static get DefaultType(){return rd}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),B.off(document,gu),B.on(document,Lx,v=>this._handleFocusin(v)),B.on(document,Mx,v=>this._handleKeydown(v)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,B.off(document,gu))}_handleFocusin(v){const{trapElement:P}=this._config;if(v.target===document||v.target===P||P.contains(v.target))return;const q=Re.focusableChildren(P);q.length===0?P.focus():this._lastTabNavDirection===Gh?q[q.length-1].focus():q[0].focus()}_handleKeydown(v){v.key==="Tab"&&(this._lastTabNavDirection=v.shiftKey?Gh:"forward")}}const cp=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",sd=".sticky-top",xu="padding-right",Kh="margin-right";class id{constructor(){this._element=document.body}getWidth(){const v=document.documentElement.clientWidth;return Math.abs(window.innerWidth-v)}hide(){const v=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,xu,P=>P+v),this._setElementAttributes(cp,xu,P=>P+v),this._setElementAttributes(sd,Kh,P=>P-v)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,xu),this._resetElementAttributes(cp,xu),this._resetElementAttributes(sd,Kh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(v,P,q){const de=this.getWidth();this._applyManipulationCallback(v,fe=>{if(fe!==this._element&&window.innerWidth>fe.clientWidth+de)return;this._saveInitialAttribute(fe,P);const Ne=window.getComputedStyle(fe).getPropertyValue(P);fe.style.setProperty(P,`${q(Number.parseFloat(Ne))}px`)})}_saveInitialAttribute(v,P){const q=v.style.getPropertyValue(P);q&&$e.setDataAttribute(v,P,q)}_resetElementAttributes(v,P){this._applyManipulationCallback(v,q=>{const de=$e.getDataAttribute(q,P);de!==null?($e.removeDataAttribute(q,P),q.style.setProperty(P,de)):q.style.removeProperty(P)})}_applyManipulationCallback(v,P){if(u(v))P(v);else for(const q of Re.find(v,this._element))P(q)}}const oi=".bs.modal",dp=`hide${oi}`,up=`hidePrevented${oi}`,Yh=`hidden${oi}`,hp=`show${oi}`,Dx=`shown${oi}`,Ox=`resize${oi}`,Vx=`click.dismiss${oi}`,zx=`mousedown.dismiss${oi}`,na=`keydown.dismiss${oi}`,ad=`click${oi}.data-api`,Xh="modal-open",Qh="show",yu="modal-static",fp={backdrop:!0,focus:!0,keyboard:!0},Jh={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class rl extends Ye{constructor(v,P){super(v,P),this._dialog=Re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new id,this._addEventListeners()}static get Default(){return fp}static get DefaultType(){return Jh}static get NAME(){return"modal"}toggle(v){return this._isShown?this.hide():this.show(v)}show(v){this._isShown||this._isTransitioning||B.trigger(this._element,hp,{relatedTarget:v}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Xh),this._adjustDialog(),this._backdrop.show(()=>this._showElement(v)))}hide(){this._isShown&&!this._isTransitioning&&(B.trigger(this._element,dp).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Qh),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){B.off(window,oi),B.off(this._dialog,oi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new nl({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ql({trapElement:this._element})}_showElement(v){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const P=Re.findOne(".modal-body",this._dialog);P&&(P.scrollTop=0),S(this._element),this._element.classList.add(Qh),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,B.trigger(this._element,Dx,{relatedTarget:v})},this._dialog,this._isAnimated())}_addEventListeners(){B.on(this._element,na,v=>{v.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),B.on(window,Ox,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),B.on(this._element,zx,v=>{B.one(this._element,Vx,P=>{this._element===v.target&&this._element===P.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Xh),this._resetAdjustments(),this._scrollBar.reset(),B.trigger(this._element,Yh)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(B.trigger(this._element,up).defaultPrevented)return;const v=this._element.scrollHeight>document.documentElement.clientHeight,P=this._element.style.overflowY;P==="hidden"||this._element.classList.contains(yu)||(v||(this._element.style.overflowY="hidden"),this._element.classList.add(yu),this._queueCallback(()=>{this._element.classList.remove(yu),this._queueCallback(()=>{this._element.style.overflowY=P},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const v=this._element.scrollHeight>document.documentElement.clientHeight,P=this._scrollBar.getWidth(),q=P>0;if(q&&!v){const de=D()?"paddingLeft":"paddingRight";this._element.style[de]=`${P}px`}if(!q&&v){const de=D()?"paddingRight":"paddingLeft";this._element.style[de]=`${P}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(v,P){return this.each(function(){const q=rl.getOrCreateInstance(this,v);if(typeof v=="string"){if(q[v]===void 0)throw new TypeError(`No method named "${v}"`);q[v](P)}})}}B.on(document,ad,'[data-bs-toggle="modal"]',function($){const v=Re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&$.preventDefault(),B.one(v,hp,q=>{q.defaultPrevented||B.one(v,Yh,()=>{g(this)&&this.focus()})});const P=Re.findOne(".modal.show");P&&rl.getInstance(P).hide(),rl.getOrCreateInstance(v).toggle(this)}),Ct(rl),A(rl);const Fa=".bs.offcanvas",sl=".data-api",Zh=`load${Fa}${sl}`,Gl="show",vu="showing",ef="hiding",od=".offcanvas.show",Kl=`show${Fa}`,tf=`shown${Fa}`,mp=`hide${Fa}`,ld=`hidePrevented${Fa}`,nf=`hidden${Fa}`,pp=`resize${Fa}`,gp=`click${Fa}${sl}`,xp=`keydown.dismiss${Fa}`,yp={backdrop:!0,keyboard:!0,scroll:!1},vp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ps extends Ye{constructor(v,P){super(v,P),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return yp}static get DefaultType(){return vp}static get NAME(){return"offcanvas"}toggle(v){return this._isShown?this.hide():this.show(v)}show(v){this._isShown||B.trigger(this._element,Kl,{relatedTarget:v}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new id().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(vu),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Gl),this._element.classList.remove(vu),B.trigger(this._element,tf,{relatedTarget:v})},this._element,!0))}hide(){this._isShown&&(B.trigger(this._element,mp).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ef),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Gl,ef),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new id().reset(),B.trigger(this._element,nf)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const v=!!this._config.backdrop;return new nl({className:"offcanvas-backdrop",isVisible:v,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:v?()=>{this._config.backdrop!=="static"?this.hide():B.trigger(this._element,ld)}:null})}_initializeFocusTrap(){return new ql({trapElement:this._element})}_addEventListeners(){B.on(this._element,xp,v=>{v.key==="Escape"&&(this._config.keyboard?this.hide():B.trigger(this._element,ld))})}static jQueryInterface(v){return this.each(function(){const P=Ps.getOrCreateInstance(this,v);if(typeof v=="string"){if(P[v]===void 0||v.startsWith("_")||v==="constructor")throw new TypeError(`No method named "${v}"`);P[v](this)}})}}B.on(document,gp,'[data-bs-toggle="offcanvas"]',function($){const v=Re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&$.preventDefault(),h(this))return;B.one(v,nf,()=>{g(this)&&this.focus()});const P=Re.findOne(od);P&&P!==v&&Ps.getInstance(P).hide(),Ps.getOrCreateInstance(v).toggle(this)}),B.on(window,Zh,()=>{for(const $ of Re.find(od))Ps.getOrCreateInstance($).show()}),B.on(window,pp,()=>{for(const $ of Re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle($).position!=="fixed"&&Ps.getOrCreateInstance($).hide()}),Ct(Ps),A(Ps);const bu={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},rf=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Fx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,$x=($,v)=>{const P=$.nodeName.toLowerCase();return v.includes(P)?!rf.has(P)||!!Fx.test($.nodeValue):v.filter(q=>q instanceof RegExp).some(q=>q.test(P))},cd={allowList:bu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ux={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},bp={entry:"(string|element|function|null)",selector:"(string|element)"};class wp extends Ke{constructor(v){super(),this._config=this._getConfig(v)}static get Default(){return cd}static get DefaultType(){return Ux}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(v=>this._resolvePossibleFunction(v)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(v){return this._checkContent(v),this._config.content={...this._config.content,...v},this}toHtml(){const v=document.createElement("div");v.innerHTML=this._maybeSanitize(this._config.template);for(const[de,fe]of Object.entries(this._config.content))this._setContent(v,fe,de);const P=v.children[0],q=this._resolvePossibleFunction(this._config.extraClass);return q&&P.classList.add(...q.split(" ")),P}_typeCheckConfig(v){super._typeCheckConfig(v),this._checkContent(v.content)}_checkContent(v){for(const[P,q]of Object.entries(v))super._typeCheckConfig({selector:P,entry:q},bp)}_setContent(v,P,q){const de=Re.findOne(q,v);de&&((P=this._resolvePossibleFunction(P))?u(P)?this._putElementInTemplate(m(P),de):this._config.html?de.innerHTML=this._maybeSanitize(P):de.textContent=P:de.remove())}_maybeSanitize(v){return this._config.sanitize?function(P,q,de){if(!P.length)return P;if(de&&typeof de=="function")return de(P);const fe=new window.DOMParser().parseFromString(P,"text/html"),Ne=[].concat(...fe.body.querySelectorAll("*"));for(const De of Ne){const st=De.nodeName.toLowerCase();if(!Object.keys(q).includes(st)){De.remove();continue}const Nt=[].concat(...De.attributes),Tt=[].concat(q["*"]||[],q[st]||[]);for(const bt of Nt)$x(bt,Tt)||De.removeAttribute(bt.nodeName)}return fe.body.innerHTML}(v,this._config.allowList,this._config.sanitizeFn):v}_resolvePossibleFunction(v){return L(v,[void 0,this])}_putElementInTemplate(v,P){if(this._config.html)return P.innerHTML="",void P.append(v);P.textContent=v.textContent}}const fr=new Set(["sanitize","allowList","sanitizeFn"]),dd="fade",il="show",ud=".tooltip-inner",sf=".modal",wu="hide.bs.modal",$a="hover",Yl="focus",bo="click",jp={AUTO:"auto",TOP:"top",RIGHT:D()?"left":"right",BOTTOM:"bottom",LEFT:D()?"right":"left"},Bx={allowList:bu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Wx={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class wo extends Ye{constructor(v,P){if(el===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(v,P),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Bx}static get DefaultType(){return Wx}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),B.off(this._element.closest(sf),wu,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const v=B.trigger(this._element,this.constructor.eventName("show")),P=(y(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(v.defaultPrevented||!P)return;this._disposePopper();const q=this._getTipElement();this._element.setAttribute("aria-describedby",q.getAttribute("id"));const{container:de}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(de.append(q),B.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(q),q.classList.add(il),"ontouchstart"in document.documentElement)for(const fe of[].concat(...document.body.children))B.on(fe,"mouseover",w);this._queueCallback(()=>{B.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!B.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(il),"ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))B.off(v,"mouseover",w);this._activeTrigger[bo]=!1,this._activeTrigger[Yl]=!1,this._activeTrigger[$a]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),B.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(v){const P=this._getTemplateFactory(v).toHtml();if(!P)return null;P.classList.remove(dd,il),P.classList.add(`bs-${this.constructor.NAME}-auto`);const q=(de=>{do de+=Math.floor(1e6*Math.random());while(document.getElementById(de));return de})(this.constructor.NAME).toString();return P.setAttribute("id",q),this._isAnimated()&&P.classList.add(dd),P}setContent(v){this._newContent=v,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(v){return this._templateFactory?this._templateFactory.changeContent(v):this._templateFactory=new wp({...this._config,content:v,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ud]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(v){return this.constructor.getOrCreateInstance(v.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(dd)}_isShown(){return this.tip&&this.tip.classList.contains(il)}_createPopper(v){const P=L(this._config.placement,[this,v,this._element]),q=jp[P.toUpperCase()];return yo(this._element,v,this._getPopperConfig(q))}_getOffset(){const{offset:v}=this._config;return typeof v=="string"?v.split(",").map(P=>Number.parseInt(P,10)):typeof v=="function"?P=>v(P,this._element):v}_resolvePossibleFunction(v){return L(v,[this._element,this._element])}_getPopperConfig(v){const P={placement:v,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:q=>{this._getTipElement().setAttribute("data-popper-placement",q.state.placement)}}]};return{...P,...L(this._config.popperConfig,[void 0,P])}}_setListeners(){const v=this._config.trigger.split(" ");for(const P of v)if(P==="click")B.on(this._element,this.constructor.eventName("click"),this._config.selector,q=>{const de=this._initializeOnDelegatedTarget(q);de._activeTrigger[bo]=!(de._isShown()&&de._activeTrigger[bo]),de.toggle()});else if(P!=="manual"){const q=P===$a?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),de=P===$a?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");B.on(this._element,q,this._config.selector,fe=>{const Ne=this._initializeOnDelegatedTarget(fe);Ne._activeTrigger[fe.type==="focusin"?Yl:$a]=!0,Ne._enter()}),B.on(this._element,de,this._config.selector,fe=>{const Ne=this._initializeOnDelegatedTarget(fe);Ne._activeTrigger[fe.type==="focusout"?Yl:$a]=Ne._element.contains(fe.relatedTarget),Ne._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},B.on(this._element.closest(sf),wu,this._hideModalHandler)}_fixTitle(){const v=this._element.getAttribute("title");v&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",v),this._element.setAttribute("data-bs-original-title",v),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(v,P){clearTimeout(this._timeout),this._timeout=setTimeout(v,P)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(v){const P=$e.getDataAttributes(this._element);for(const q of Object.keys(P))fr.has(q)&&delete P[q];return v={...P,...typeof v=="object"&&v?v:{}},v=this._mergeConfigObj(v),v=this._configAfterMerge(v),this._typeCheckConfig(v),v}_configAfterMerge(v){return v.container=v.container===!1?document.body:m(v.container),typeof v.delay=="number"&&(v.delay={show:v.delay,hide:v.delay}),typeof v.title=="number"&&(v.title=v.title.toString()),typeof v.content=="number"&&(v.content=v.content.toString()),v}_getDelegateConfig(){const v={};for(const[P,q]of Object.entries(this._config))this.constructor.Default[P]!==q&&(v[P]=q);return v.selector=!1,v.trigger="manual",v}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(v){return this.each(function(){const P=wo.getOrCreateInstance(this,v);if(typeof v=="string"){if(P[v]===void 0)throw new TypeError(`No method named "${v}"`);P[v]()}})}}A(wo);const ju=".popover-header",ku=".popover-body",af={...wo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},of={...wo.DefaultType,content:"(null|string|element|function)"};class Xl extends wo{static get Default(){return af}static get DefaultType(){return of}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[ju]:this._getTitle(),[ku]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(v){return this.each(function(){const P=Xl.getOrCreateInstance(this,v);if(typeof v=="string"){if(P[v]===void 0)throw new TypeError(`No method named "${v}"`);P[v]()}})}}A(Xl);const hd=".bs.scrollspy",Hx=`activate${hd}`,lf=`click${hd}`,qx=`load${hd}.data-api`,Ql="active",fd="[href]",Ua=".nav-link",kp=`${Ua}, .nav-item > ${Ua}, .list-group-item`,Jl={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},fa={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ba extends Ye{constructor(v,P){super(v,P),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Jl}static get DefaultType(){return fa}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const v of this._observableSections.values())this._observer.observe(v)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(v){return v.target=m(v.target)||document.body,v.rootMargin=v.offset?`${v.offset}px 0px -30%`:v.rootMargin,typeof v.threshold=="string"&&(v.threshold=v.threshold.split(",").map(P=>Number.parseFloat(P))),v}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(B.off(this._config.target,lf),B.on(this._config.target,lf,fd,v=>{const P=this._observableSections.get(v.target.hash);if(P){v.preventDefault();const q=this._rootElement||window,de=P.offsetTop-this._element.offsetTop;if(q.scrollTo)return void q.scrollTo({top:de,behavior:"smooth"});q.scrollTop=de}}))}_getNewObserver(){const v={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(P=>this._observerCallback(P),v)}_observerCallback(v){const P=Ne=>this._targetLinks.get(`#${Ne.target.id}`),q=Ne=>{this._previousScrollData.visibleEntryTop=Ne.target.offsetTop,this._process(P(Ne))},de=(this._rootElement||document.documentElement).scrollTop,fe=de>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=de;for(const Ne of v){if(!Ne.isIntersecting){this._activeTarget=null,this._clearActiveClass(P(Ne));continue}const De=Ne.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(fe&&De){if(q(Ne),!de)return}else fe||De||q(Ne)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const v=Re.find(fd,this._config.target);for(const P of v){if(!P.hash||h(P))continue;const q=Re.findOne(decodeURI(P.hash),this._element);g(q)&&(this._targetLinks.set(decodeURI(P.hash),P),this._observableSections.set(P.hash,q))}}_process(v){this._activeTarget!==v&&(this._clearActiveClass(this._config.target),this._activeTarget=v,v.classList.add(Ql),this._activateParents(v),B.trigger(this._element,Hx,{relatedTarget:v}))}_activateParents(v){if(v.classList.contains("dropdown-item"))Re.findOne(".dropdown-toggle",v.closest(".dropdown")).classList.add(Ql);else for(const P of Re.parents(v,".nav, .list-group"))for(const q of Re.prev(P,kp))q.classList.add(Ql)}_clearActiveClass(v){v.classList.remove(Ql);const P=Re.find(`${fd}.${Ql}`,v);for(const q of P)q.classList.remove(Ql)}static jQueryInterface(v){return this.each(function(){const P=Ba.getOrCreateInstance(this,v);if(typeof v=="string"){if(P[v]===void 0||v.startsWith("_")||v==="constructor")throw new TypeError(`No method named "${v}"`);P[v]()}})}}B.on(window,qx,()=>{for(const $ of Re.find('[data-bs-spy="scroll"]'))Ba.getOrCreateInstance($)}),A(Ba);const qs=".bs.tab",cf=`hide${qs}`,Gx=`hidden${qs}`,Kx=`show${qs}`,al=`shown${qs}`,md=`click${qs}`,Zl=`keydown${qs}`,Nu=`load${qs}`,df="ArrowLeft",ol="ArrowRight",jo="ArrowUp",lr="ArrowDown",tr="Home",Wa="End",Er="active",Gs="fade",Ha="show",ll=".dropdown-toggle",Is=`:not(${ll})`,pd='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',_u=`.nav-link${Is}, .list-group-item${Is}, [role="tab"]${Is}, ${pd}`,Np=`.${Er}[data-bs-toggle="tab"], .${Er}[data-bs-toggle="pill"], .${Er}[data-bs-toggle="list"]`;class ma extends Ye{constructor(v){super(v),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),B.on(this._element,Zl,P=>this._keydown(P)))}static get NAME(){return"tab"}show(){const v=this._element;if(this._elemIsActive(v))return;const P=this._getActiveElem(),q=P?B.trigger(P,cf,{relatedTarget:v}):null;B.trigger(v,Kx,{relatedTarget:P}).defaultPrevented||q&&q.defaultPrevented||(this._deactivate(P,v),this._activate(v,P))}_activate(v,P){v&&(v.classList.add(Er),this._activate(Re.getElementFromSelector(v)),this._queueCallback(()=>{v.getAttribute("role")==="tab"?(v.removeAttribute("tabindex"),v.setAttribute("aria-selected",!0),this._toggleDropDown(v,!0),B.trigger(v,al,{relatedTarget:P})):v.classList.add(Ha)},v,v.classList.contains(Gs)))}_deactivate(v,P){v&&(v.classList.remove(Er),v.blur(),this._deactivate(Re.getElementFromSelector(v)),this._queueCallback(()=>{v.getAttribute("role")==="tab"?(v.setAttribute("aria-selected",!1),v.setAttribute("tabindex","-1"),this._toggleDropDown(v,!1),B.trigger(v,Gx,{relatedTarget:P})):v.classList.remove(Ha)},v,v.classList.contains(Gs)))}_keydown(v){if(![df,ol,jo,lr,tr,Wa].includes(v.key))return;v.stopPropagation(),v.preventDefault();const P=this._getChildren().filter(de=>!h(de));let q;if([tr,Wa].includes(v.key))q=P[v.key===tr?0:P.length-1];else{const de=[ol,lr].includes(v.key);q=F(P,v.target,de,!0)}q&&(q.focus({preventScroll:!0}),ma.getOrCreateInstance(q).show())}_getChildren(){return Re.find(_u,this._parent)}_getActiveElem(){return this._getChildren().find(v=>this._elemIsActive(v))||null}_setInitialAttributes(v,P){this._setAttributeIfNotExists(v,"role","tablist");for(const q of P)this._setInitialAttributesOnChild(q)}_setInitialAttributesOnChild(v){v=this._getInnerElement(v);const P=this._elemIsActive(v),q=this._getOuterElement(v);v.setAttribute("aria-selected",P),q!==v&&this._setAttributeIfNotExists(q,"role","presentation"),P||v.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(v,"role","tab"),this._setInitialAttributesOnTargetPanel(v)}_setInitialAttributesOnTargetPanel(v){const P=Re.getElementFromSelector(v);P&&(this._setAttributeIfNotExists(P,"role","tabpanel"),v.id&&this._setAttributeIfNotExists(P,"aria-labelledby",`${v.id}`))}_toggleDropDown(v,P){const q=this._getOuterElement(v);if(!q.classList.contains("dropdown"))return;const de=(fe,Ne)=>{const De=Re.findOne(fe,q);De&&De.classList.toggle(Ne,P)};de(ll,Er),de(".dropdown-menu",Ha),q.setAttribute("aria-expanded",P)}_setAttributeIfNotExists(v,P,q){v.hasAttribute(P)||v.setAttribute(P,q)}_elemIsActive(v){return v.classList.contains(Er)}_getInnerElement(v){return v.matches(_u)?v:Re.findOne(_u,v)}_getOuterElement(v){return v.closest(".nav-item, .list-group-item")||v}static jQueryInterface(v){return this.each(function(){const P=ma.getOrCreateInstance(this);if(typeof v=="string"){if(P[v]===void 0||v.startsWith("_")||v==="constructor")throw new TypeError(`No method named "${v}"`);P[v]()}})}}B.on(document,md,pd,function($){["A","AREA"].includes(this.tagName)&&$.preventDefault(),h(this)||ma.getOrCreateInstance(this).show()}),B.on(window,Nu,()=>{for(const $ of Re.find(Np))ma.getOrCreateInstance($)}),A(ma);const qa=".bs.toast",Ga=`mouseover${qa}`,Su=`mouseout${qa}`,uf=`focusin${qa}`,_p=`focusout${qa}`,Yx=`hide${qa}`,ko=`hidden${qa}`,ec=`show${qa}`,tc=`shown${qa}`,gd="hide",cl="show",Ks="showing",Mi={animation:"boolean",autohide:"boolean",delay:"number"},dl={animation:!0,autohide:!0,delay:5e3};class ji extends Ye{constructor(v,P){super(v,P),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return dl}static get DefaultType(){return Mi}static get NAME(){return"toast"}show(){B.trigger(this._element,ec).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(gd),S(this._element),this._element.classList.add(cl,Ks),this._queueCallback(()=>{this._element.classList.remove(Ks),B.trigger(this._element,tc),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(B.trigger(this._element,Yx).defaultPrevented||(this._element.classList.add(Ks),this._queueCallback(()=>{this._element.classList.add(gd),this._element.classList.remove(Ks,cl),B.trigger(this._element,ko)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(cl),super.dispose()}isShown(){return this._element.classList.contains(cl)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(v,P){switch(v.type){case"mouseover":case"mouseout":this._hasMouseInteraction=P;break;case"focusin":case"focusout":this._hasKeyboardInteraction=P}if(P)return void this._clearTimeout();const q=v.relatedTarget;this._element===q||this._element.contains(q)||this._maybeScheduleHide()}_setListeners(){B.on(this._element,Ga,v=>this._onInteraction(v,!0)),B.on(this._element,Su,v=>this._onInteraction(v,!1)),B.on(this._element,uf,v=>this._onInteraction(v,!0)),B.on(this._element,_p,v=>this._onInteraction(v,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(v){return this.each(function(){const P=ji.getOrCreateInstance(this,v);if(typeof v=="string"){if(P[v]===void 0)throw new TypeError(`No method named "${v}"`);P[v](this)}})}}return Ct(ji),A(ji),{Alert:it,Button:Bt,Carousel:pn,Collapse:xe,Dropdown:kr,Modal:rl,Offcanvas:Ps,Popover:Xl,ScrollSpy:Ba,Tab:ma,Toast:ji,Tooltip:wo}})}(Qg)),Qg.exports}oJ();FA.createRoot(document.getElementById("root")).render(s.jsx(Ns.StrictMode,{children:s.jsx(FP,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(WO,{children:s.jsx(GO,{children:s.jsx(HO,{children:s.jsx(qO,{children:s.jsx(iJ,{})})})})})})}));
